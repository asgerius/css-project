[{"tags": ["c++", "qt", "error-handling", "qwidget", "null-pointer"], "answers": [{"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1564619241, "last_edit_date": 1564619241, "creation_date": 1564618903, "answer_id": 57300368, "question_id": 57300230, "link": "https://stackoverflow.com/questions/57300230/should-i-check-for-null-pointers-after-calling-qts-setui-method/57300368#57300368", "title": "Should I check for null pointers after calling Qt&#39;s setui method?", "body": "<blockquote>\n  <p>After calling ui.setupUi(this); do I need to check and see if any GUI elements are null?</p>\n</blockquote>\n\n<p>No. You don't need to do that.</p>\n\n<p><code>setupUi()</code> does not swallow exceptions. It doesn't have any <code>try</code> blocks in it at all. (In Creator, you can just press F2 when the cursor in on the <code>setupUi()</code> call to jump to that function and inspect it.) If <code>new</code> throws, or one of the widget constructors throws, you will get that exception. AFAIK, the <code>QWidget</code> constructors will not throw, but <code>new</code> might (out of memory, for example.)</p>\n\n<p>You don't even need to check for exceptions yourself inside your own constructor that calls <code>setupUi()</code>. If <code>setupUi()</code> throws, then in turn your own constructor will automatically re-throw the exception.</p>\n\n<p>Anyway, long story short, all this means that you never need to check if any of the <code>ui</code> widget pointers is null.</p>\n"}], "owner": {"reputation": 89, "user_id": 8223925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--m3zzL4Wels/AAAAAAAAAAI/AAAAAAAAEHE/WIX3Xi2hDQE/photo.jpg?sz=128", "display_name": "Aaron Fine", "link": "https://stackoverflow.com/users/8223925/aaron-fine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 57300368, "answer_count": 1, "score": 2, "last_activity_date": 1564619241, "creation_date": 1564617567, "question_id": 57300230, "link": "https://stackoverflow.com/questions/57300230/should-i-check-for-null-pointers-after-calling-qts-setui-method", "title": "Should I check for null pointers after calling Qt&#39;s setui method?", "body": "<p>I am using the Qt Designer to generate lots of different *.ui files for my application. Those files then get used following the <a href=\"https://doc.qt.io/qt-5/designer-using-a-ui-file.html#the-single-inheritance-approach\" rel=\"nofollow noreferrer\">single inheritance</a> approach. </p>\n\n<p>After calling <code>ui.setupUi(this);</code> do I need to check and see if any GUI elements are null? I know that <code>setupUi</code> goes and creates the instances of all the objects in the GUI but it returns void and doesn't seem to use exceptions. Is there some kind of guarantee I'm missing from Qt that lets me know UI elements are safe to use or should I be doing a null check every time I want to touch them?</p>\n\n<p>An example can be seen in the sample code from the documentation here: <a href=\"https://doc.qt.io/qt-5/qtdesigner-calculatorform-example.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qtdesigner-calculatorform-example.html</a> </p>\n\n<p>Note that no null checking is performed before using the pointers to the UI elements. This could have been omitted for brevity of the example, but I don't <em>ever</em> see it in the sample code. If I can safely assume that the UI elements exist I can remove a lot of <code>if</code> statements from my code...</p>\n"}, {"tags": ["c++", "optimization", "copy"], "comments": [{"owner": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 1, "creation_date": 1564617362, "post_id": 57300190, "comment_id": 101094030, "body": "&quot;reference to temporary are evil&quot; -- why? What happens if you make a move ctor for <code>myVec</code>?"}, {"owner": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1564617412, "post_id": 57300190, "comment_id": 101094040, "body": "Just to clarify, this line: <code>foo([]()-&gt;myVec{return myVec(100,0.);});</code> is currently unoptimized, and <code>foo([&amp;existing]()-&gt;myVec{return existing;});</code> (w/ lvalue reference) is?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1564617759, "post_id": 57300190, "comment_id": 101094092, "body": "The compiler will not optimize away anything until the compiler can prove that the optimization has no observable side effects. I see multiple reasons why the compiler might find it difficult to do so. It may be obvious to you and me, but we have a human brain, and the compiler does not."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564617802, "post_id": 57300190, "comment_id": 101094103, "body": "Do you need a <code>vector</code> or maybe just a <code>tuple</code>?"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1564618728, "post_id": 57300190, "comment_id": 101094262, "body": "@JonathanLam I think the move ctor is inherited from std::vector and this is the reason why no copy is done in the first case. For the second case, how would I manage the rvalue reference? I don&#39;t want &quot;existing&quot; to be moved, just to be referenced. Concerning the second comment, the problem is opposite. The line ``` foo([&amp;existing]()-&gt;myVec{return existing;}); ``` copies the vector in foo."}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564618811, "post_id": 57300190, "comment_id": 101094279, "body": "@tadman vector is just an exemple of possibly &quot;Big object&quot;. This may be a complex class containing multiple members"}, {"owner": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1564618872, "post_id": 57300190, "comment_id": 101094286, "body": "@Teloze I might have misunderstood. Try making the lambda expression return an lvalue reference? And so you&#39;re saying that  the rvalue one is already being moved, not copied?"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1564619288, "post_id": 57300190, "comment_id": 101094350, "body": "@JonathanLam If I make lvalue reference, then the first case will break because the temporary object is created within <code>fun</code> and immediately destroyed."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564619842, "post_id": 57300190, "comment_id": 101094446, "body": "Fair enough. In situations with a trivial number of members <code>std::tuple</code> may perform better. If this is some kind of large, expensive to copy object, use references if not one of the <a href=\"https://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">pointer-wrappers</a>."}], "answers": [{"comments": [{"owner": {"reputation": 15224, "user_id": 2397327, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b1b4bb1ed29f123c55b9c916212f47ed?s=128&d=identicon&r=PG", "display_name": "Jonathan Lam", "link": "https://stackoverflow.com/users/2397327/jonathan-lam"}, "edited": false, "score": 0, "creation_date": 1564619592, "post_id": 57300421, "comment_id": 101094411, "body": "Oh, that makes sense. So a simple overload with the lvalue-returning lambda would do it!"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1564620295, "post_id": 57300421, "comment_id": 101094531, "body": "The code I have is not really using <code>std::function</code>. I just put it to make the code shorter. However, for testing, I already tried the overloading you suggest but the compiler is complaining about an ambiguous call to overloaded foo. Anyway, I really do like your templated version!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1564619469, "creation_date": 1564619469, "answer_id": 57300421, "question_id": 57300190, "link": "https://stackoverflow.com/questions/57300190/induce-compiler-to-avoid-trigger-copies-on-rvalues/57300421#57300421", "title": "Induce compiler to avoid/trigger copies on rvalues", "body": "<p><code>[&amp;existing]()-&gt;myVec{return existing;}</code> return by copy, not by reference, so it would create copy.</p>\n\n<p>You need so <code>[&amp;existing]()-&gt;myVec&amp;{return existing;}</code>.</p>\n\n<p>Then issue is with <code>std::function</code></p>\n\n<p>so either provide 2 overloads (<code>void foo(std::function&lt;myVec()&gt;)</code> and <code>void foo(std::function&lt;myVec&amp;()&gt;)</code>), or use template and get rid of std::function:</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid foo(F fun){\n    for (const auto &amp; v : fun()){\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    std::cout&lt;&lt;std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564619469, "creation_date": 1564617129, "last_edit_date": 1564618887, "question_id": 57300190, "link": "https://stackoverflow.com/questions/57300190/induce-compiler-to-avoid-trigger-copies-on-rvalues", "title": "Induce compiler to avoid/trigger copies on rvalues", "body": "<p>In the following code I have a function <code>foo</code> taking as argument a <code>std::function</code> returning a big object (here a <code>vector</code>) and uses it only to access its values. The big object may be built on-the-fly by <code>fun</code> or be a reference to an existing object as the two lambda expressions in the main show.</p>\n\n<p>I would like to optimize this code to avoid useless copies possibly by choosing the right return type of the <code>std::function</code>.</p>\n\n<p>If I use return by value, RVO optimizes out the copy and makes exactly what I want for the \"build on-the-fly\" case: no copies are done, the vector is built exactly where it needs to and later destroyed at the end of <code>foo</code>. However, in the second case the compiler does copy the vector even if I don't really need it. The second case would be the perfect situation for a return-by-reference but this would break the first case since reference to temporary are evil.</p>\n\n<p>I understand that making <code>foo</code> directly taking a reference to the vector would solve the problem in this particular case but my use case is more complex. Is there a way to solve this?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstruct myVec : public std::vector&lt;double&gt; {\n    using std::vector&lt;double&gt;::vector;\n    myVec(myVec const &amp; v){\n        std::cout &lt;&lt; \"Copy ctor\\n\";\n        *this=v;\n    }\n};\n\n\nvoid foo(std::function&lt;myVec(void)&gt; fun){\n    for(auto &amp; v : fun()){\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    std::cout&lt;&lt;std::endl;\n}\n\nint main() {\n    foo([]()-&gt;myVec{return myVec(100,0.);});\n    myVec existing(100,1.);\n    foo([&amp;existing]()-&gt;myVec{return existing;});\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "overriding", "abstract-class", "virtual-functions"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1564616987, "post_id": 57300152, "comment_id": 101093949, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1564617241, "post_id": 57300152, "comment_id": 101094005, "body": "This is a more fundamental problem than the question. You&#39;re guessing at syntax and other concepts. Once this question is resolved, it&#39;s onto another and so on.The way to resolve this is with some good <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">introductory material</a> to get up to speed and be confident in what you choose to write."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1564626160, "post_id": 57300152, "comment_id": 101095582, "body": "The code in your question is not the code that doesn&#39;t work. I know that because your error message says &quot;object of abstract class type &quot;logfile::headerBase&quot; is not allowed&quot; but in your code, logfile::headerBase is not abstract."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564639329, "post_id": 57300152, "comment_id": 101098363, "body": "<code>main()</code> is not valid C++ syntax."}, {"owner": {"reputation": 37, "user_id": 7120176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1fe39ff5d5bcc17769e972950044c4?s=128&d=identicon&r=PG&f=1", "display_name": "micah clarke", "link": "https://stackoverflow.com/users/7120176/micah-clarke"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1564667956, "post_id": 57300152, "comment_id": 101113728, "body": "@immibis, you are correct. I updated the question to make the base class an abstract class. My apologies."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1564698697, "post_id": 57300152, "comment_id": 101126890, "body": "Now your code still doesn&#39;t work because there is no logfile::header class."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7120176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1fe39ff5d5bcc17769e972950044c4?s=128&d=identicon&r=PG&f=1", "display_name": "micah clarke", "link": "https://stackoverflow.com/users/7120176/micah-clarke"}, "edited": false, "score": 0, "creation_date": 1564667245, "post_id": 57300265, "comment_id": 101113246, "body": "Thank you for the detailed explanation!Although, when I try to use a pointer to my object using &quot;logfile::headerBase *Obj = new logfile::headerDerived;&quot; I keep getting an error &quot;Error: object of abstract class type &quot;logfile::headerDerived&quot; is not allowed."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 37, "user_id": 7120176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1fe39ff5d5bcc17769e972950044c4?s=128&d=identicon&r=PG&f=1", "display_name": "micah clarke", "link": "https://stackoverflow.com/users/7120176/micah-clarke"}, "edited": false, "score": 0, "creation_date": 1564668596, "post_id": 57300265, "comment_id": 101114145, "body": "@micahclarke That means you forgot to implement the <code>log_header()</code> function in <code>headerDerived</code>. If you don&#39;t implement it, then <code>headerDerived</code> is still an abstract class and thus can&#39;t be instantiated."}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1564618442, "last_edit_date": 1564618442, "creation_date": 1564617874, "answer_id": 57300265, "question_id": 57300152, "link": "https://stackoverflow.com/questions/57300152/error-object-of-abstract-class-type-is-not-allowed/57300265#57300265", "title": "Error: Object of abstract class type is not allowed", "body": "<p>With value types, you need to declare the object to be of type <code>headerDerived</code>:</p>\n\n<pre><code>logfile::headerDerived Obj;\nObj.log_header() &gt;&gt; \"Add this text to my log file\";\n</code></pre>\n\n<p>with pointers, you need to allocate the actual object. In your code, you just have an unitialized pointer:</p>\n\n<pre><code>logfile::headerBase *Obj;\n</code></pre>\n\n<p><code>Obj</code> points to some random memory location. You need to make it point to some actual object. That object can be a <code>headerDerived</code>:</p>\n\n<pre><code>logfile::headerBase *Obj = new headerDerived;\n</code></pre>\n\n<p>However, doing manual memory allocation like this is not recommended, because then you also need to manually delete the object again when you don't need it anymore:</p>\n\n<pre><code>delete Obj;\n</code></pre>\n\n<p>If you don't get it right, you will leak the object (there's no garbage collector in C++.) So you should either use value types, or smart pointers (like <code>shared_ptr</code> or <code>unique_ptr</code>):</p>\n\n<pre><code>#include &lt;memory&gt;\n\n// ...\n\nstd::shared_ptr&lt;logfile::headerBase&gt; Obj = std::make_shared&lt;logfile::headerDerived&gt;();\nObj-&gt;log_header();\n</code></pre>\n\n<p>In any event, you should just use value types, not pointers, unless you actually have a reason not to. Polymorphism still works with value types if you pass the objects by reference or by pointer. This works fine, for example:</p>\n\n<pre><code>void by_reference(logfile::headerBase&amp; obj)\n{\n    obj.log_header() &gt;&gt; \"Add this text to my log file\";\n}\n\nvoid by_pointer(logfile::headerBase* obj)\n{\n    obj-&gt;log_header() &gt;&gt; \"Add this text to my log file\";\n}\n\n\n// ...\n\nlogfile::headerDerived Obj;\nby_reference(Obj);\nby_pointer(&amp;Obj);\n</code></pre>\n\n<p>You would use smart pointers instead of value types if you wanted to objects you create to outlive the scope they were created in. For example if you pass the object to function, and that function needs to store a pointer to the object for later use, then you must not use a value type. You need to allocate the object on the heap, and for that you use a smart pointer like <code>shared_ptr</code> (or <code>unique_ptr</code> if there's ever only one owner of the object, but if unsure, use <code>shared_ptr</code>.)</p>\n"}], "owner": {"reputation": 37, "user_id": 7120176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1fe39ff5d5bcc17769e972950044c4?s=128&d=identicon&r=PG&f=1", "display_name": "micah clarke", "link": "https://stackoverflow.com/users/7120176/micah-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 57300265, "answer_count": 1, "score": 0, "last_activity_date": 1564668140, "creation_date": 1564616730, "last_edit_date": 1564668140, "question_id": 57300152, "link": "https://stackoverflow.com/questions/57300152/error-object-of-abstract-class-type-is-not-allowed", "title": "Error: Object of abstract class type is not allowed", "body": "<p>I am trying to override a function in a class that generates a header for my log file. To add to the header that the function generates I have to override it and am having difficulty doing so. Thanks to Niko's input below I edited my question below. I know now I cannot create an object from an abstract class, so I need to use a reference or pointer. </p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"log_headerbase.h\"\n#include \"log_header.h\"\nmain()\n{\n    logfile::headerBase *Obj = new logfile::header;\n    Obj.log_header() &gt;&gt; \"Add this text to my log file\";\n...\n}\n</code></pre>\n\n<p>I get this error when I try to allocate memory to my pointer to my Obj. \"Error: object of abstract class type \"logfile::header\" is not allowed.\" </p>\n\n<p>log_header.h</p>\n\n<pre><code>#ifndef log_header_h\n#define log_header_h\n\n#include \"log_headerbase.h\"\n\nnamespace logfile\n{\n    class headerDerived : public headerBase\n    {\n    };\n}\n#endif\n</code></pre>\n\n<p>log_headerbase.h</p>\n\n<pre><code>#ifndef log_headerbase_h\n#define log_headerbase_h\n\nnamespace logfile\n{\n    class headerBase\n    {\n        virtual void log_header() = 0;\n    }\n};\n#endif\n</code></pre>\n"}, {"tags": ["c++", "function", "class"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 7, "creation_date": 1564612866, "post_id": 57299667, "comment_id": 101093172, "body": "<code>getVars()</code> returns a copy each time you call it. Not only that could be slow, it also causes the problem you&#39;re seeing. In <code>std::find ( vPatientClass[ posPz ].getVars().begin(), vPatientClass[ posPz ].getVars().end(), var_name )</code> you pass iterators to two <i>different</i> vectors (two copies of the same vector), which is not allowed. Return a reference: <code>const std::vector&lt;std::string&gt; &amp;getVars() const</code>"}, {"owner": {"reputation": 1154, "user_id": 10410363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5yYJ.gif?s=128&g=1", "display_name": "cccnrc", "link": "https://stackoverflow.com/users/10410363/cccnrc"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1564612961, "post_id": 57299667, "comment_id": 101093186, "body": "So I could just make the vector public and access it directly...right?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564613050, "post_id": 57299667, "comment_id": 101093196, "body": "Or return it by reference"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1564613190, "post_id": 57299667, "comment_id": 101093225, "body": "You can keep the copy, but just have <code>auto patients = vPatientClass[posPz].getVars();</code> beforehand"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1564613202, "post_id": 57299667, "comment_id": 101093227, "body": "@HolyBlackCat sounds like an answer!"}, {"owner": {"reputation": 1154, "user_id": 10410363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5yYJ.gif?s=128&g=1", "display_name": "cccnrc", "link": "https://stackoverflow.com/users/10410363/cccnrc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564613283, "post_id": 57299667, "comment_id": 101093245, "body": "@NathanOliver, just adding : <code>std::vector&lt;std::string&gt; getVars() { return &amp;vVar;};</code> ?"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1564613407, "post_id": 57299667, "comment_id": 101093270, "body": "@cccnrc No, change the return type: <code>const std::vector&lt;std::string&gt; &amp;getVars() const { return vVar; }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "is_accepted": true, "score": 4, "last_activity_date": 1564613188, "creation_date": 1564613188, "answer_id": 57299739, "question_id": 57299667, "link": "https://stackoverflow.com/questions/57299667/c-stdfind-unexpected-behavior-when-addressing-a-class-function-returning-a/57299739#57299739", "title": "C++ std::find() unexpected behavior when addressing a Class function returning a vector", "body": "<p>Your <code>getVars</code> member is returning a <em>copy</em> of the internal vector:</p>\n\n<pre><code>std::vector&lt;std::string&gt; getVars()\n{\n   return vVar;\n};\n</code></pre>\n\n<p>So in your problematic <code>std::find</code> invocation, you are calling <code>Patient::getVars()</code> 3 times and getting 3 different copies of the vector. While the values will be the same, the iterators you get from <code>begin()</code> and <code>end()</code> are NOT compatible with each other. You can return your vector by reference instead:</p>\n\n<pre><code>const std::vector&lt;std::string&gt;&amp; getVars() const\n{\n   return vVar;\n};\n</code></pre>\n"}], "owner": {"reputation": 1154, "user_id": 10410363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5yYJ.gif?s=128&g=1", "display_name": "cccnrc", "link": "https://stackoverflow.com/users/10410363/cccnrc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 57299739, "answer_count": 1, "score": 1, "last_activity_date": 1564613188, "creation_date": 1564612646, "last_edit_date": 1564612882, "question_id": 57299667, "link": "https://stackoverflow.com/questions/57299667/c-stdfind-unexpected-behavior-when-addressing-a-class-function-returning-a", "title": "C++ std::find() unexpected behavior when addressing a Class function returning a vector", "body": "<p>I'va a theory question. I've a class <code>Patient</code> in which I've a function that returns a vector of the class itself <code>Patient.getVars()</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Patient {\n  #... rest of class ...\n  std::vector&lt;std::string&gt; vVar;\n  public :\n    void addVar( std::string var )\n    {\n      vVar.push_back(var);\n    }\n    std::vector&lt;std::string&gt; getVars()\n    {\n       return vVar;\n    };\n  #... rest of class ...\n}\n</code></pre>\n\n<p>I noticed that if I check with <code>std::find()</code> for an element of the vector <code>vVar</code> calling the class function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if ( std::find ( vPatientClass[ posPz ].getVars().begin(), vPatientClass[ posPz ].getVars().end(), var_name ) == vPatientClass[ posPz ].getVars().end() ) {\n# .... rest of code ....\n</code></pre>\n\n<p>It tells me that is <strong>PRESENT</strong> when it's actually <strong>ABSENT</strong>, and vice-versa.</p>\n\n<p>Otherwise, if I copy the vector and find on it:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;std::string&gt; vPzVars = vPatientClass[ posPz ].getVars();\nif ( std::find ( vPzVars.begin(), vPzVars.end(), var_name ) == vPzVars.end() ) {\n# .... rest of code ....\n</code></pre>\n\n<p>It behave as expected! This is very important for me to find out... Any clue?</p>\n\n<p>PS: I address the <code>Patient</code> object by its position <code>[ posPz ]</code> cause <code>vPatientClass</code> is a vector of <code>Patient</code> class objects.</p>\n\n<p>Thanks in advance for any suggestion!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1564611730, "post_id": 57299509, "comment_id": 101092911, "body": "You probably just need to flush the stream. <a href=\"https://en.cppreference.com/w/cpp/io/manip/flush\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/flush</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564611871, "post_id": 57299509, "comment_id": 101092944, "body": "As @drescherjm suggested, do  <code>writeFile &lt;&lt; key &lt;&lt; std::flush;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1564611955, "post_id": 57299509, "comment_id": 101092966, "body": "Also I believe the question should not mention keylogger at all. The problem seems to about writing a file and has nothing at all to do with a keylogger in whatever OS you are using."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564612344, "post_id": 57299509, "comment_id": 101093046, "body": "@drescherjm You are right. Sorry. Thank you for the answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1564612564, "post_id": 57299509, "comment_id": 101093099, "body": "@TedLyngmo Thanks!!"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564639478, "post_id": 57299509, "comment_id": 101098397, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14105650/how-does-stdflush-work\">How does std::flush work?</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "edited": false, "score": 0, "creation_date": 1564613622, "post_id": 57299675, "comment_id": 101093309, "body": "Thanks! Do you know also why is &quot;\\b&quot; dosen&#39;t work in the file? It does &quot;&quot; insted of deleting the text"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1564614142, "post_id": 57299675, "comment_id": 101093389, "body": "Because <code>&#39;\\b&#39;</code> is part of the <code>char</code> stream, your terminal handler performs the magic to move the cursor backwards and overwrite the previous <code>char</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "edited": false, "score": 0, "creation_date": 1564615607, "post_id": 57299675, "comment_id": 101093689, "body": "So there is no way deleting char?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564619967, "post_id": 57299675, "comment_id": 101094467, "body": "Deleting isn&#39;t normally possible. You can overwrite though. Just step the <code>ofstream</code> pointer back and write a new value. Note: <code>\\b</code> is not an instruction, it&#39;s just another value to add to the stream - and you can truncate files - but not streams, if that&#39;s needed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564620509, "post_id": 57299675, "comment_id": 101094568, "body": "@TedLyngmo How can I pointer it back and write a new value?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564620578, "post_id": 57299675, "comment_id": 101094580, "body": "@Eathat If it&#39;s a file stream, just use <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/seekp\" rel=\"nofollow noreferrer\">seekp</a> when writing. or <code>seekg</code> for reading (on a <code>istream</code> type). That being said, if you are doing a keylogger, you want even backspaces and timings logged. :-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1564620881, "post_id": 57299675, "comment_id": 101094635, "body": "@TedLyngmo got it. Thanks. What do you mean &quot;if you are doing a keylogger, you want even backspaces and timings logged.&quot;"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564621302, "post_id": 57299675, "comment_id": 101094703, "body": "A keylogger worth the name lets you investigate what the user actually did - and pauses and backspaces tells you a lot. It also helps identifying who actually wrote the stuff afterwards. We all have unique patterns. So, each keystroke should be logged with timing if this is going to be used in a forensic analysis etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622022, "post_id": 57299675, "comment_id": 101094838, "body": "@TedLyngmo I see, for somereason my seekp does not work this is what I did I posted it above as updated"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622090, "post_id": 57299675, "comment_id": 101094857, "body": "Sounds like a new question. It&#39;s hard to read in this comment format."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622156, "post_id": 57299675, "comment_id": 101094867, "body": "@TedLyngmo I posted it in my qustion for some reason I need the approve of the guy who posted the answer."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1564622208, "post_id": 57299675, "comment_id": 101094874, "body": "Seams reasonable, since you are changing a question with an accepted answer. I think you should create a new question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622240, "post_id": 57299675, "comment_id": 101094878, "body": "@TedLyngmo My falut There. I changed my qustion."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1564622292, "post_id": 57299675, "comment_id": 101094889, "body": "Make a new question instead. The original question has an answer. Don&#39;t add to it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622385, "post_id": 57299675, "comment_id": 101094902, "body": "@TedLyngmo You are right. I will. What do you think the title should be? I can&#39;t think of a good one to be honest....."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622475, "post_id": 57299675, "comment_id": 101094915, "body": "Revert the latest edit of this question so that others with similar questions may benefit from reading it later. Then, take the parts you now need clarifying to the new question into a new mininal example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622569, "post_id": 57299675, "comment_id": 101094938, "body": "@TedLyngmo I did, I know but I still can&#39;t think of a good title. The best title I have is &quot;why seekp Isn&#39;t working in my code&quot;. Which is a bad title."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622632, "post_id": 57299675, "comment_id": 101094952, "body": "@Eathat  I&#39;m afraid that&#39;s a part of programming too :-) Describing your problem. Deal with what you have now for awhile and then, if you don&#39;t make it work, pose another question. It&#39;ll be easy to formulate then I think."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622831, "post_id": 57299675, "comment_id": 101094992, "body": "@TedLyngmo you are right. I&#39;ll ask it tommorow anyway. It&#39;s late or should I say morning. Good night/morning I guess."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564622858, "post_id": 57299675, "comment_id": 101094995, "body": "@Eathat Cheers!"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1564657880, "last_edit_date": 1564657880, "creation_date": 1564612716, "answer_id": 57299675, "question_id": 57299509, "link": "https://stackoverflow.com/questions/57299509/how-to-create-a-txt-file-that-writes-in-it-while-i-type-keylogger/57299675#57299675", "title": "How to create a txt file that writes in it while I type (KeyLogger)", "body": "<p>You need to <code>flush</code> a buffered stream in order to guarantee saving your output before a <code>close</code>:</p>\n\n<pre><code>writeFile &lt;&lt; key &lt;&lt; std::flush;\n</code></pre>\n\n<p>Your other option is to unbuffer the stream:</p>\n\n<pre><code>ofstream writeFile;\nwriteFile.rdbuf()-&gt;pubsetbuf(0, 0); // unbuffer stream\nwriteFile.open(\"test.txt\"); // open file\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11340118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1564645835, "accepted_answer_id": 57299675, "answer_count": 1, "score": 0, "last_activity_date": 1564657880, "creation_date": 1564611391, "last_edit_date": 1564622537, "question_id": 57299509, "link": "https://stackoverflow.com/questions/57299509/how-to-create-a-txt-file-that-writes-in-it-while-i-type-keylogger", "closed_reason": "Not suitable for this site", "title": "How to create a txt file that writes in it while I type (KeyLogger)", "body": "<p>I made a keylogger and it works great. The only problem that I have is it outputs the keylogger to the txt file just after I close the console. I'd to write in the txt file while I use the keylogger and not that I'd output the keylogger just after I close the console. I am now using fstream to write the file. This is what I am doing right now to print the keylogger the the txt file</p>\n\n<pre><code>ofstream writeFile;\nwriteFile.open(\"test.txt\"); // opening file\nwriteFile &lt;&lt; key;\n</code></pre>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1564610495, "post_id": 57299370, "comment_id": 101092592, "body": "There are no features of C causing ambiguity because it is not C code."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1564610802, "post_id": 57299370, "comment_id": 101092690, "body": "You have a <code>b</code> that is declared to be a <code>const char*</code>, then you declare another <code>b</code> as an <code>A</code>.  C++ does not allow this kind of variable shadowing in the same context."}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 0, "creation_date": 1564611511, "post_id": 57299418, "comment_id": 101092866, "body": "Thanks for the answer, could you elaborate on what the ambiguity is? When would I want to declare b within parentheses this way? Why is that allowed as a declaration of b, I have never seen a declaration of this type used before. What key word could I use to find this declaration type within the c++ documentation?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 1, "creation_date": 1564611931, "post_id": 57299418, "comment_id": 101092955, "body": "@TheBat <code>()</code> are often used to group things in complex declarations (e.g. <code>int (*x)[N]</code>). but in your case they do nothing. Redundant <code>()</code> are probably allowed for convenience, or to keep the grammar more simple."}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "reply_to_user": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 1, "creation_date": 1564612175, "post_id": 57299418, "comment_id": 101093009, "body": "@TheBat Take a look at <a href=\"http://eel.is/c++draft/stmt.ambig\" rel=\"nofollow noreferrer\">stmt.ambig</a> in the C++ standard."}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 0, "creation_date": 1564615655, "post_id": 57299418, "comment_id": 101093694, "body": "@iz_ That is an amazing link, would you mind adding it your answer. Thanks for the awesome answer!"}], "tags": [], "owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "is_accepted": true, "score": 5, "last_activity_date": 1564618130, "last_edit_date": 1564618130, "creation_date": 1564610735, "answer_id": 57299418, "question_id": 57299370, "link": "https://stackoverflow.com/questions/57299370/c-ambiguity-of-default-constructor-and-something-else-what-is-that-something/57299418#57299418", "title": "C++ Ambiguity of default constructor and something else. What is that something else?", "body": "<p>This is caused by an ambiguity in the C++ grammar. <code>A(b);</code> is parsed as a definition of <code>b</code>, an object of type <code>A</code>. This exact issue is described in <a href=\"http://eel.is/c++draft/stmt.ambig\" rel=\"nofollow noreferrer\">[stmt.ambig]</a>.</p>\n\n<p>To fix this, either use uniform initialization <code>A{b};</code> or surround it with parentheses to force it to be an expression instead of a declaration <code>(A(b));</code>. Either fix will allow your program to compile.</p>\n"}], "owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57299418, "answer_count": 1, "score": 2, "last_activity_date": 1564618130, "creation_date": 1564610358, "last_edit_date": 1564611630, "question_id": 57299370, "link": "https://stackoverflow.com/questions/57299370/c-ambiguity-of-default-constructor-and-something-else-what-is-that-something", "title": "C++ Ambiguity of default constructor and something else. What is that something else?", "body": "<p>I'm not sure what search terms I even need to use to find the answer to this question, so sorry if this is duplicated. Basically, Why does this compile?</p>\n\n<pre><code>struct A {                                                                                                                                                                                                                                                                                                                   \n    A(){};                                                                                                                                                                                                                                                                                                                   \n    A(const char*){};                                                                                                                                                                                                                                                                                                        \n};                                                                                                                                                                                                                                                                                                                           \n\nint main() {                                                                                                                                                                                                                                                                                                                 \n    //const char* b = \"what is going on?\";                                                                                                                                                                                                                                                                                                  \n    A(b);                                                                                                                                                                                                                                                                                                                    \n    return 0;                                                                                                                                                                                                                                                                                                                \n}\n</code></pre>\n\n<p>But this does not?</p>\n\n<pre><code>struct A {                                                                                                                                                                                                                                                                                                                   \n    A(){};                                                                                                                                                                                                                                                                                                                   \n    A(const char*){};                                                                                                                                                                                                                                                                                                        \n};                                                                                                                                                                                                                                                                                                                           \n\nint main() {                                                                                                                                                                                                                                                                                                                 \n    const char* b = \"what is going on?\";                                                                                                                                                                                                                                                                                                  \n    A(b);                                                                                                                                                                                                                                                                                                                    \n    return 0;                                                                                                                                                                                                                                                                                                                \n}\n\ntest.cpp: In function \u2018int main()\u2019:\ntest.cpp:8: error: conflicting declaration \u2018A b\u2019\ntest.cpp:7: error: \u2018b\u2019 has a previous declaration as \u2018const char* b\u2019\n</code></pre>\n\n<p>What feature of c++ is causing this ambiguity?\nThe main goal of this is to create an anonymous variable on the stack of type A. Similar to <code>A a(b);</code>, but not naming a.</p>\n"}, {"tags": ["c++", "visual-studio", "webots"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1564614876, "post_id": 57299369, "comment_id": 101093547, "body": "<i>When it loads up Visual Studio</i> - what &quot;it&quot; are you referring to?  The Webots software?"}, {"owner": {"reputation": 23, "user_id": 11866216, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FjgHIMO2m50/AAAAAAAAAAI/AAAAAAAAAAc/b4Nr2XCn59U/photo.jpg?sz=128", "display_name": "Josh Chica", "link": "https://stackoverflow.com/users/11866216/josh-chica"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1564702493, "post_id": 57299369, "comment_id": 101127640, "body": "@1201ProgramAlarm The &quot;it&quot; is the visual studio software that should be configured to work with the webots libraries."}, {"owner": {"reputation": 1726, "user_id": 2210777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed2b06be7765e94570ace8fb755b266c?s=128&d=identicon&r=PG", "display_name": "FabienRohrer", "link": "https://stackoverflow.com/users/2210777/fabienrohrer"}, "edited": false, "score": 1, "creation_date": 1564988173, "post_id": 57299369, "comment_id": 101194455, "body": "WEBOTS_HOME is indeed supposed to be defined (typically WEBOTS_HOME=C:\\Program Files\\Webots). It can be defined in you user environment variables (<a href=\"https://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10\" title=\"how do i set system environment variables in windows 10\">superuser.com/questions/949560/&hellip;</a>). Doing this, it will be certainly accessible from VS."}, {"owner": {"reputation": 23, "user_id": 11866216, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FjgHIMO2m50/AAAAAAAAAAI/AAAAAAAAAAc/b4Nr2XCn59U/photo.jpg?sz=128", "display_name": "Josh Chica", "link": "https://stackoverflow.com/users/11866216/josh-chica"}, "reply_to_user": {"reputation": 1726, "user_id": 2210777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed2b06be7765e94570ace8fb755b266c?s=128&d=identicon&r=PG", "display_name": "FabienRohrer", "link": "https://stackoverflow.com/users/2210777/fabienrohrer"}, "edited": false, "score": 1, "creation_date": 1565110685, "post_id": 57299369, "comment_id": 101246038, "body": "@FabienRohrer That worked! Thank you!"}, {"owner": {"reputation": 1726, "user_id": 2210777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed2b06be7765e94570ace8fb755b266c?s=128&d=identicon&r=PG", "display_name": "FabienRohrer", "link": "https://stackoverflow.com/users/2210777/fabienrohrer"}, "edited": false, "score": 0, "creation_date": 1565245935, "post_id": 57299369, "comment_id": 101293763, "body": "Ok, I just post this as an answer (to be accepted)"}], "answers": [{"tags": [], "owner": {"reputation": 1726, "user_id": 2210777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed2b06be7765e94570ace8fb755b266c?s=128&d=identicon&r=PG", "display_name": "FabienRohrer", "link": "https://stackoverflow.com/users/2210777/fabienrohrer"}, "is_accepted": true, "score": 1, "last_activity_date": 1565245888, "creation_date": 1565245888, "answer_id": 57406446, "question_id": 57299369, "link": "https://stackoverflow.com/questions/57299369/how-to-change-the-command-line-macros-in-visual-studio-2017/57406446#57406446", "title": "How to Change the command line macros in Visual Studio 2017", "body": "<p>The <code>WEBOTS_HOME</code> environment variable is indeed supposed to be defined (for a typical Webots installation: <code>WEBOTS_HOME = C:\\Program Files\\Webots</code>). It can be defined in <a href=\"https://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10\">your user environment variables</a>. Doing this, it will be accessible from VS.</p>\n"}], "owner": {"reputation": 23, "user_id": 11866216, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FjgHIMO2m50/AAAAAAAAAAI/AAAAAAAAAAc/b4Nr2XCn59U/photo.jpg?sz=128", "display_name": "Josh Chica", "link": "https://stackoverflow.com/users/11866216/josh-chica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 57406446, "answer_count": 1, "score": 2, "last_activity_date": 1565245888, "creation_date": 1564610357, "question_id": 57299369, "link": "https://stackoverflow.com/questions/57299369/how-to-change-the-command-line-macros-in-visual-studio-2017", "title": "How to Change the command line macros in Visual Studio 2017", "body": "<p>I'm trying to create a Webots controller in VS2017 (through the webots software). When it loads up Visual Studio, everything is linked correctly and compiles correctly until I close VS and reopen it. Afterwards the macro of $(WEBOTS_HOME) changes to an incorrect path, which messes up the links to the files and libraries.</p>\n\n<p>I tried to hard code the path in through properties editor, but it just says that all the files don't exist.</p>\n\n<p>Links to error images:</p>\n\n<p><a href=\"https://imgur.com/a/Fff59Oy\" rel=\"nofollow noreferrer\">Correct Macro Path</a></p>\n\n<p><a href=\"https://imgur.com/a/eNzRQHT\" rel=\"nofollow noreferrer\">Incorrect Macro + Correct Hard Coded Path</a></p>\n\n<p><a href=\"https://imgur.com/a/Hv8N8bU\" rel=\"nofollow noreferrer\">Error From Hard Coded Path</a></p>\n\n<p>Is there any way to change what this macro evaluates as, or a way to keep it from changing in the first place? After spending a couple hours on the internet looking for answers, I've determined that I can't add a user macro, which was my idea to replace the broken macro, because I can't access \"Project Manager\" Tab, only a console version.</p>\n"}, {"tags": ["c++", "move-semantics"], "comments": [{"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 2, "creation_date": 1564611806, "post_id": 57299324, "comment_id": 101092928, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12332772/why-arent-container-move-assignment-operators-noexcept\">Why aren&#39;t container move assignment operators noexcept?</a>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1564611942, "post_id": 57299324, "comment_id": 101092963, "body": "There is one overload that takes an allocator argument. That presumably needs to allocate new nodes and move-construct the contents, so allocation could fail. This doesn&#39;t explain the other overload though, since the allocator itself should be move constructible."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 3, "creation_date": 1564615263, "post_id": 57299324, "comment_id": 101093614, "body": "Not a duplicate of <a href=\"https://stackoverflow.com/q/12332772/576911\">Why aren&#39;t container move assignment operators noexcept?</a> because a move constructor is not the same thing as a move assignment operator.  Furthermore the answer for these two <i>different</i> special members is <i>different</i>."}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564626123, "post_id": 57299732, "comment_id": 101095576, "body": "looking at the survey, it seems like MSVC&#39;s <code>std::map</code> implementation isn&#39;t noexcept  movable. I&#39;m curious what is special about MSVC&#39;s implementation that <code>std::map</code> can&#39;t be noexcept moved?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564666425, "post_id": 57299732, "comment_id": 101112718, "body": "For the move constructor, they put their end node on the heap, thus they always have to allocate an end node during move construction."}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564672730, "post_id": 57299732, "comment_id": 101116615, "body": "If the end node is on the heap, why can&#39;t it copy the pointer to end node during move?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564673694, "post_id": 57299732, "comment_id": 101117145, "body": "<a href=\"https://stackoverflow.com/a/7028318/576911\">A moved-from <code>map</code> must be in a valid state.</a>  I.e. a moved-from <code>map</code> must have an end node to point to when <code>end()</code> gets called.  Before the move construction, there exists one end node.  After the move construction there must exist two end nodes.  If the design is that end nodes go on the heap, then a new one must be allocated.  If the design is that end nodes are embedded within the <code>map</code>, then the end node &quot;allocation&quot; is &quot;on the stack&quot;."}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564715939, "post_id": 57299732, "comment_id": 101129855, "body": "Thx. That&#39;s the answer I&#39;m looking for. Would you edit your answer to include this comment?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1564753693, "post_id": 57299732, "comment_id": 101145544, "body": "Done.  If that&#39;s still not right, just let me know how I can improve it, thanks."}, {"owner": {"reputation": 225, "user_id": 1685814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vqW0t.jpg?s=128&g=1", "display_name": "Tohnmeister", "link": "https://stackoverflow.com/users/1685814/tohnmeister"}, "edited": false, "score": 0, "creation_date": 1598879754, "post_id": 57299732, "comment_id": 112592190, "body": "So this means I cannot create a noexcept move constructor for any class that contains map instances. Correct?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1598880204, "post_id": 57299732, "comment_id": 112592418, "body": "You could make your move constructor conditionally <code>noexcept</code>, conditioned on if <code>map</code> is <code>is_nothrow_move_constructible</code>.  This would create a <code>noexcept</code> move constructor on 2 out of 3 major implementations."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 16, "last_activity_date": 1564753667, "last_edit_date": 1564753667, "creation_date": 1564613126, "answer_id": 57299732, "question_id": 57299324, "link": "https://stackoverflow.com/questions/57299324/why-is-stdmaps-move-constructor-not-noexcept/57299732#57299732", "title": "Why is std::map&#39;s move constructor not noexcept?", "body": "<p>It is because I couldn't talk all of the implementors into a resource-less state that the <code>map</code> could be put into.  For example an implementation needs to have an end-node to point to, even in the default-constructed state.  Implementations are allowed, but not required, to put that end-node on the heap.</p>\n\n<p><a href=\"https://stackoverflow.com/a/7028318/576911\">A moved-from map must be in a valid state.</a>  I.e. a moved-from <code>map</code> must have an end node to point to when <code>end()</code> gets called. Before the move construction, there exists one end node in the <code>map</code> that you're about to move from. After the move construction there must exist two end nodes: one in the new <code>map</code> and one in the moved-from `map.</p>\n\n<p>If the end node goes on the heap, that means that the move constructor either doesn't transfer ownership of the end node, and thus has to allocate a new end node for the new `map. Or does transfer the end node, but then has to allocate a new one to leave in the moved-from source.</p>\n\n<p>If the end node is instead embedded within the <code>map</code> data structure itself, then it never need be allocated on the heap.  It is automatically \"allocated on the stack\" as the <code>map</code> gets constructed.</p>\n\n<p>Implementations are allowed to make the <code>map</code> move constructor <code>noexcept</code> if they want to, they just aren't required to.</p>\n\n<p>Here is a <a href=\"http://howardhinnant.github.io/container_summary.html\" rel=\"noreferrer\">survey of the noexcept-state of the default constructor, move constructor and move assignment operator of the containers</a> among the implementations that I took several years ago.  This survey assumes <code>std::allocator</code> for each container.  I just spot checked it for <code>map</code> and the results haven't changed.</p>\n\n<p>If you would like to run this survey yourself, here is the code:</p>\n\n<pre><code>#include \"type_name.h\"\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n#include &lt;deque&gt;\n#include &lt;forward_list&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;set&gt;\n#include &lt;unordered_map&gt;\n#include &lt;unordered_set&gt;\n\ntemplate &lt;class C&gt;\nvoid\nreport()\n{\n    using namespace std;\n    const auto name = type_name&lt;C&gt;();\n    if (is_nothrow_default_constructible&lt;C&gt;::value)\n        std::cout &lt;&lt; name &lt;&lt; \" is noexcept default constructible\\n\";\n    else\n        std::cout &lt;&lt; name &lt;&lt; \" is NOT noexcept default constructible\\n\";\n    if (is_nothrow_move_constructible&lt;C&gt;::value)\n        std::cout &lt;&lt; name &lt;&lt; \" is noexcept move constructible\\n\";\n    else\n        std::cout &lt;&lt; name &lt;&lt; \" is NOT noexcept move constructible\\n\";\n    if (is_nothrow_move_assignable&lt;C&gt;::value)\n        std::cout &lt;&lt; name &lt;&lt; \" is noexcept move assignable\\n\\n\";\n    else\n        std::cout &lt;&lt; name &lt;&lt; \" is NOT noexcept move assignable\\n\\n\";\n}\n\nint\nmain()\n{\n    using namespace std;\n    report&lt;deque&lt;int&gt;&gt;();\n    report&lt;forward_list&lt;int&gt;&gt;();\n    report&lt;list&lt;int&gt;&gt;();\n    report&lt;vector&lt;int&gt;&gt;();\n    report&lt;string&gt;();\n    report&lt;map&lt;int, int&gt;&gt;();\n    report&lt;set&lt;int&gt;&gt;();\n    report&lt;unordered_map&lt;int, int&gt;&gt;();\n    report&lt;unordered_set&lt;int&gt;&gt;();\n}\n</code></pre>\n\n<p>where <code>\"type_name.h\"</code> comes from <a href=\"https://stackoverflow.com/a/20170989/576911\">this answer</a>.</p>\n"}], "owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 3, "accepted_answer_id": 57299732, "answer_count": 1, "score": 16, "last_activity_date": 1564753667, "creation_date": 1564610097, "last_edit_date": 1564625788, "question_id": 57299324, "link": "https://stackoverflow.com/questions/57299324/why-is-stdmaps-move-constructor-not-noexcept", "title": "Why is std::map&#39;s move constructor not noexcept?", "body": "<p>As said by cppreference.com, </p>\n\n<blockquote>\n  <p>Maps are usually implemented as red-black trees.</p>\n</blockquote>\n\n<p>So moving a <code>std::map</code> is just moving the pointer to the root <code>node</code> + other information such as size. Why is <code>std::map</code>'s move constructor not marked as <code>noexcept</code>?</p>\n"}, {"tags": ["c++", "multithreading", "performance", "mutex"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564609207, "post_id": 57299132, "comment_id": 101092238, "body": "The rule of thumb is to hold the lock for as little time as possible.  Only profiling though will tell you if you actually gain or not."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1564609286, "post_id": 57299132, "comment_id": 101092269, "body": "&quot;will this improve my code performance?&quot; - why can&#39;t you test it?"}, {"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564609683, "post_id": 57299132, "comment_id": 101092396, "body": "I tested it and the difference is too small. It is hard to see the time costs and it might because of my test cases. And I have no idea of how the performance of mutex works, the only thing I know is to make the critical section as small as possible. But i want to know why and some principle of how should I implement the mutex."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1564610806, "post_id": 57299132, "comment_id": 101092691, "body": "Why are you calling <code>mutex.lock()</code> and <code>mutex.unlock()</code> manually, instead of using a scoped lock like <code>unique_lock</code> or <code>lock_guard</code>? This is an <a href=\"http://kayari.org/cxx/antipatterns.html#locking-mutex\" rel=\"nofollow noreferrer\">anti-pattern</a>."}, {"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610887, "post_id": 57299132, "comment_id": 101092713, "body": "I am just using the simple code to show how the logic works. I want to know how lower-level works here. it is not my real code."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610141, "post_id": 57299241, "comment_id": 101092510, "body": "thanks for the suggestion. I edited the question. so if database.loadPetabyteOfData() is not fast i should split the mutex?"}, {"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610174, "post_id": 57299241, "comment_id": 101092517, "body": "For the second question. I added some thing. the func1 is a time consuming function and tunction 2 is not. That is why i use two mutexes for them."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610258, "post_id": 57299241, "comment_id": 101092532, "body": "if it&#39;s not a problem (because it&#39;s fast and so splitting doesn&#39;t give you any improvement), or not so big problem to pay for a bit more complicated code, I&#39;d suggest the highest priority should be readability/maintainability of your code"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610432, "post_id": 57299241, "comment_id": 101092575, "body": "do you have multiple threads that can concurrently execute func1 and func2, and func1 and func2 can be safely executed concurrently? in this case yes, use two separate mutexes"}, {"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610597, "post_id": 57299241, "comment_id": 101092624, "body": "OK thanks. Yes, and in func2 only if some condition is ture the function will go to the critical part of variable B. I updated the question 2 again."}], "tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": true, "score": 3, "last_activity_date": 1564609615, "creation_date": 1564609615, "answer_id": 57299241, "question_id": 57299132, "link": "https://stackoverflow.com/questions/57299132/is-that-good-to-improve-the-performance-to-split-the-critical-section-and-lock-m/57299241#57299241", "title": "Is that good to improve the performance to split the critical section and lock mutex twice?", "body": "<p>First of all, keep it simple, but correct. Then profile. Then, only if required, improve.</p>\n\n<p>Unfortunately I can't provide a more concrete answer here because:</p>\n\n<pre><code>mutex.lock();\ncritical Section A;\ndatabase.loadPetabyteOfData() // just a single line\ncritical Section B;\nmutex.unlock();\n</code></pre>\n\n<p>Here it makes a perfect sense. If your \"few lines which will not create conflict\" are fast - don't bother. </p>\n\n<p>Regarding your last example about using a separate mutex for each variable: usually this doesn't make sense too. If you modify a bunch of variables usually together, protect them by the same mutex. Start from a simpler version.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564609990, "post_id": 57299254, "comment_id": 101092475, "body": "But func1() is time-consuming and func2 is not. The thing i am considering is that if I use the same mutex for func1 and func2, func2 has to wait for the whole func1 rather than just the variable B."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "reply_to_user": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "edited": false, "score": 0, "creation_date": 1564610695, "post_id": 57299254, "comment_id": 101092655, "body": "@Gavin Xu if func1 is time consuming and func2 is not, it means that the critical section for A is time consuming. So in this case, it is better Not to use the same Mutex for func1 and func2."}], "tags": [], "owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1564656628, "last_edit_date": 1564656628, "creation_date": 1564609710, "answer_id": 57299254, "question_id": 57299132, "link": "https://stackoverflow.com/questions/57299132/is-that-good-to-improve-the-performance-to-split-the-critical-section-and-lock-m/57299254#57299254", "title": "Is that good to improve the performance to split the critical section and lock mutex twice?", "body": "<p>About your first question: If critical sections A and B are time consuming (and independant), then having two separate sections helps two threads to run them concurrently. So, yes, in some cases it may improve the performance.</p>\n\n<p>About your second Q: for light critical sections I always recommend to put them under the same lock. Having less locks helps to avoid deadlocks happening due to programmers mistake as well.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 1, "last_activity_date": 1564611619, "creation_date": 1564611619, "answer_id": 57299538, "question_id": 57299132, "link": "https://stackoverflow.com/questions/57299132/is-that-good-to-improve-the-performance-to-split-the-critical-section-and-lock-m/57299538#57299538", "title": "Is that good to improve the performance to split the critical section and lock mutex twice?", "body": "<blockquote>\n  <p>will this improve my code performance?</p>\n</blockquote>\n\n<p>Instead of worrying about performance you should be thinking in terms of correctness. Does it make sense for A and B to happen independently, or should they be a single \"atomic\" (i.e. indivisible) operation?</p>\n\n<p>If they're separate, independent actions then it might make sense to do:</p>\n\n<pre><code>{\n  lock_guard&lt;mutex&gt; l(mutex);\n  critical section A\n}\nfunc_A();\n{\n  lock_guard&lt;mutex&gt; l(mutex);\n  critical section B\n}\n</code></pre>\n\n<p>But be aware that this will allow your program to do AAAAAABAABBBBABBBB.</p>\n\n<p>If it's important that it does ABABABABABABABABAB then you need to treat them as a single critical section.</p>\n\n<p>So talking about performance without considering how that affects the actual behaviour is misguided. It's impossible to answer your questions about performance without knowing far more detail about the specifics. But performance is probably not what you should be worrying about anyway.</p>\n"}], "owner": {"reputation": 65, "user_id": 10102754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b595159bb6cebb250411e07ff60543?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Xu", "link": "https://stackoverflow.com/users/10102754/gavin-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 57299241, "answer_count": 3, "score": 0, "last_activity_date": 1564656628, "creation_date": 1564608841, "last_edit_date": 1564610454, "question_id": 57299132, "link": "https://stackoverflow.com/questions/57299132/is-that-good-to-improve-the-performance-to-split-the-critical-section-and-lock-m", "title": "Is that good to improve the performance to split the critical section and lock mutex twice?", "body": "<p>I am trying to optimize some multi-threads code. I know the way I should focus on is make the critical section smaller, but I meet some code structure and I am not sure what is the best way to improve the performance.</p>\n\n<p>the first question is like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>mutex.lock();\ncritical Section A;\nfunc_A(); //func_A() is just a function which will not create confliction.\ncritical Section B;\nmutex.unlock();\n</code></pre>\n\n<p>func_A() is just a function which will not create confliction.\nI treat A and B as a whole critical section, If I split the section, let's say, make A and B not in the same critical section like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>mutex.lock();\ncritical Section A;\nmutex.unlock();\nfunc_A(); //func_A() is just a function which will not create confliction.\nmutex.lock();\ncritical Section B;\nmutex.unlock();\n</code></pre>\n\n<p>will this improve my code performance?</p>\n\n<p>Second question is I have some code like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>func1(){\n    mutexA.lock();\n    critical Section for varibale A;\n    mutexB.lock();\n    critical Section for varibale B;\n    mutexB.unlock();\n    critical Section for varibale A;\n    mutexA.unlock();\n}\nfunc2(){\n    if (some condition){\n      mutexB.lock();\n      critical Section for varibale B;\n      mutexB.unlock();\n    }\n}\n</code></pre>\n\n<p>Here func1 is a time-consuming function and func2 is not.\nalso, critical Section for variable B is a fast part. </p>\n\n<p>Is that OK for the performance to put one lock inside of another lock? Will it affect the performance too much? Is that OK to just use one mutex for both func1 and func2 rather than 2?</p>\n\n<p>It is really hard to figure out how much these mutexes will cost. I really have no idea for them.</p>\n"}, {"tags": ["c++", "qt", "shared-memory", "virtual-table"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564606985, "post_id": 57298775, "comment_id": 101091533, "body": "Don&#39;t use <code>void*</code>. There&#39;s always a better way."}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564607050, "post_id": 57298775, "comment_id": 101091560, "body": "@JesperJuhl I don&#39;t. The function <code>QSharedPointer::data()</code> returns the <code>void*</code> to the memory."}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564609131, "post_id": 57298775, "comment_id": 101092209, "body": "@arsdever I think your answer lies in <a href=\"https://stackoverflow.com/questions/1905237/where-in-memory-is-vtable-stored\">this</a> question. The vtable is stored in local memory, and your second app instance tries to reach that space."}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564609497, "post_id": 57298775, "comment_id": 101092335, "body": "@seleciii44 If so, could you please suggest some solution to the problem?"}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564609752, "post_id": 57298775, "comment_id": 101092414, "body": "@seleciii44 Finally I got your point. And I realized the whole problem. It&#39;s kinda bigger than I expected. But it didn&#39;t solve my problem. Now I am more confused."}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564609912, "post_id": 57298775, "comment_id": 101092452, "body": "@arsdever why dont you separate data to share from the logic? Define a new class with only data, share that and apply some functions on it. in your example your implementer does not have any data. whats the point of having it shared?"}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564610312, "post_id": 57298775, "comment_id": 101092548, "body": "@seleciii44 In my project I work on there are some data I&#39;m keeping in <code>Implementer</code> class. It is a simple <code>QMap&lt;&gt;</code>. I liked your advice and probably will implement my code in that way. For a clean Q&amp;A please provide your solution into an answer that I could accept."}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1564610553, "post_id": 57298775, "comment_id": 101092612, "body": "@arsdever it is midnight in turkey and i am just about to sleep :) i will write it in the morning tomorrow."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1564630579, "post_id": 57298775, "comment_id": 101096275, "body": "I would not do that thing above as means of interprocess communication."}], "answers": [{"tags": [], "owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "is_accepted": true, "score": 1, "last_activity_date": 1564638939, "creation_date": 1564638939, "answer_id": 57302598, "question_id": 57298775, "link": "https://stackoverflow.com/questions/57298775/how-to-properly-write-and-read-class-instance-with-vtable-into-the-qsharedmemory/57302598#57302598", "title": "How to properly write and read class instance with vtable into the QSharedMemory?", "body": "<p>A base class with virtual functions requires a <code>vtable</code>. <a href=\"https://stackoverflow.com/questions/1905237/where-in-memory-is-vtable-stored\">The memory location of the vtable or even the existence of it is implementation-dependent</a>, thus you get an exception when you try to access a function via <code>vtable</code>.</p>\n\n<p>What you can do is separate the data and logic. Define a new class with only data, share that and apply some functions on it.</p>\n\n<p>However, it seems like you are going to have some more issues since you are planning to share <code>QMap</code> as data. It probably stores its data on the heap and does not provide a memory allocator interface (at least I couldn't see). Meaning that you won't be able to control where it allocates the data. If you are certain that you need a map structure, you can use <code>std::map</code> and provide your own memory allocator to the map which uses the shared memory you've created. I've just written <code>c++ std map custom memory allocator</code> in google and it shows some solutions. There is also <a href=\"https://stackoverflow.com/questions/11373796/custom-memory-allocator-for-stl-map\">this</a> question in SO that may help you.</p>\n"}], "owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 57302598, "answer_count": 1, "score": 0, "last_activity_date": 1564638939, "creation_date": 1564606813, "last_edit_date": 1564610400, "question_id": 57298775, "link": "https://stackoverflow.com/questions/57298775/how-to-properly-write-and-read-class-instance-with-vtable-into-the-qsharedmemory", "title": "How to properly write and read class instance with vtable into the QSharedMemory?", "body": "<p>I have a class derived from an interface</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Interface {\npublic:\n  virtual void foo() = 0;\n};\n\nclass Implementer : public Interface {\npublic:\n  void foo() override { std::cout &lt;&lt; \"Hello world\" &lt;&lt; std::endl; }\nprivate:\n  int __some_int_member;\n};\n</code></pre>\n\n<p>Now I want to write a program, which will get the same instance of <code>Implementer</code> class in all application instances. I followed the example suggested <a href=\"https://evileg.com/en/post/147/\" rel=\"nofollow noreferrer\">here</a> (the second one), but in that example, only a single byte is being used.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char **argv)\n{\n  QCoreApplication app(argc, argv);\n  Implementer *impl = nullptr;\n  QSystemSemaphore accessor(\"app_accessor\", 1);\n  accessor.acquire();\n#ifndef QT_OS_WIN\n  QSharedMemory mem_fix(\"my_class\");\n  if(mem_fix.attach())\n  {\n    mem_fix.detach();\n  }\n#endif\n  QSharedMemory mem(\"my_class\");\n  if(!mem.attach())\n  {\n    mem.create(sizeof(Implementer));\n    new(mem.data()) Implementer();\n  }\n  impl = (Implementer*)mem.data();\n  accessor.release();\n\n  impl-&gt;foo();\n  return app.exec();\n}\n</code></pre>\n\n<p>The first instance works fine. But it crashes for the second one on line <code>impl-&gt;foo()</code>.</p>\n\n<p>I think the reason is a bad cast from <code>void*</code> to the <code>Implementer*</code>. But I don't know how to do that correctly.</p>\n\n<p>Any suggestions?</p>\n\n<h1>Edit</h1>\n\n<p>I realized, that the crash caused by the <strong>Segmentation fault</strong> was the result of inheritance because without the base class everything works just fine.</p>\n\n<h1>Edit 2</h1>\n\n<p>After some debugging, memory dump and some comments, I realized, that the problem is that in runtime the first instance of the program creates the <code>vtable</code> in its stack and puts the <code>vptr</code> to its <code>vtable</code>. The second instance gets the same <code>vptr</code> which, unfortunately, points to some random memory (that might be allocated or not).</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "implicit-conversion", "sfinae"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1564606967, "post_id": 57298751, "comment_id": 101091526, "body": "Template deduction will never do an implicit conversion."}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564607052, "post_id": 57298751, "comment_id": 101091561, "body": "@NathanOliver aw :( I see. Do you know where that&#39;s stated off the top of your head."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1564607130, "post_id": 57298751, "comment_id": 101091586, "body": "Not off the top of my head, no.  The rules are in <a href=\"https://timsong-cpp.github.io/cppwp/temp.deduct\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1564607169, "post_id": 57298751, "comment_id": 101091598, "body": "<a href=\"http://coliru.stacked-crooked.com/a/4038f239070ebb2d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4038f239070ebb2d</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1564607298, "post_id": 57298751, "comment_id": 101091645, "body": "@PiotrSkotnicki Very interesting."}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1564607303, "post_id": 57298751, "comment_id": 101091647, "body": "@PiotrSkotnicki Can you explain what is going on. I am having trouble understanding your code, though it looks good."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1564607393, "post_id": 57298751, "comment_id": 101091678, "body": "@MichaelChoi I adjusted the code from my previous answer (with more solutions) from <a href=\"https://stackoverflow.com/q/53691855/3953764\">here</a>"}], "owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1564607836, "answer_count": 0, "score": 0, "last_activity_date": 1564606690, "creation_date": 1564606690, "question_id": 57298751, "link": "https://stackoverflow.com/questions/57298751/c-implicit-argument-conversion-of-variadic-template", "closed_reason": "Duplicate", "title": "C++ Implicit Argument Conversion of Variadic Template", "body": "<p>AFAIK, In non-templated functions, arguments can be implicitly converted rather than explicitly creating the parameter type:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto foo(const std::vector&lt;int&gt;&amp; input) {\n  // implementation here...\n}\n\nfoo({ 1, 2, 3, 4, 5 }); // implicitly converted to a std::vector&lt;int&gt;\n</code></pre>\n\n<p>I'd like to apply this to variadic templates whose types are known. In my case I've enforced a homogeneous parameter pack so all types are the same:</p>\n\n<pre><code>using Range = std::pair&lt;int, int&gt;;\n\ntemplate &lt;class ... Ranges,\n  class = std::enable_if_t&lt;std::conjunction_v&lt;std::is_same&lt;Range, Ranges &gt;...&gt;&gt;&gt;\nauto bar(Range&amp;&amp; range, Ranges&amp;&amp; ... ranges) {\n  // implementation here...\n}\n\nbar({ 1, 2 }, Range{ 3, 4 });\n</code></pre>\n\n<p>Unfortunately, if I try to call <code>bar({1, 2}, {3, 4});</code> I will encounter a compile error indicating:</p>\n\n<blockquote>\n  <p>E0304: no instances of function template \"bar\" matches the argument list</p>\n</blockquote>\n\n<p>I realize I can make an initializer list, but I'd like to make it work for variadic templates (homogeneous or heterogeneous).</p>\n\n<p>How can I modify my function <code>bar</code> so that arguments of the parameter pack <code>Ranges</code> will implicitly convert to <code>std::pair&lt;int, int&gt;</code>?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1564605206, "post_id": 57298375, "comment_id": 101090872, "body": "In 90%  of the situations you will be using a unique pointer. Chances are you don&#39;t need a weak pointer at all."}, {"owner": {"reputation": 979, "user_id": 10311873, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U6bx1OxX8qs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNd_9-45wwusxC1gms2M0Q8UEE1AA/mo/photo.jpg?sz=128", "display_name": "Irbis", "link": "https://stackoverflow.com/users/10311873/irbis"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1564606845, "post_id": 57298375, "comment_id": 101091468, "body": "I wonder if using a reference to unique_ptr makes sense (conceptually) at all."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1564608123, "post_id": 57298375, "comment_id": 101091903, "body": "@Irbis I think normally it doesn&#39;t."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1564613272, "post_id": 57298375, "comment_id": 101093239, "body": "Is it valid to pass a null pointer to <code>B</code>&#39;s constructor?"}], "answers": [{"tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": true, "score": 3, "last_activity_date": 1564616171, "last_edit_date": 1564616171, "creation_date": 1564607882, "answer_id": 57298967, "question_id": 57298375, "link": "https://stackoverflow.com/questions/57298375/weak-ptr-vs-unique-ptr-reference-passing-interface-impl-to-other-object/57298967#57298967", "title": "weak_ptr vs unique_ptr reference - passing interface impl to other object", "body": "<p>I believe the default choice should be that <code>A</code>, that <em>owns</em> the <code>Interface</code>, should hold it by <code>unique_ptr</code>. Then <code>B</code>, which does not own the <code>Interface</code>, should hold it by normal reference or raw pointer.</p>\n\n<p>A reference to a <code>unique_ptr</code> rarely makes sense. It offers no additional safety guarantees over a raw pointer or a normal reference but adds confusion over ownership.</p>\n\n<pre><code>class Interface\n{\npublic:\n    virtual ~Interface(){}\n    virtual void fun() = 0;\n};\n\nclass InterfaceImpl: public Interface \n{\n\npublic:\n    void fun() override\n    {}\n};\n\nclass B\n{\npublic:\n    B(const Interface&amp; impl): impl_(impl){}\nprivate:\n    const Interface&amp; impl_;\n};\n\nclass A\n{\npublic:\n    A(): impl_(std::make_unique&lt;InterfaceImpl&gt;()), b(*impl_){}\nprivate:\n    std::unique_ptr&lt;Interface&gt; impl_;\n    B b;\n};\n</code></pre>\n\n<p>This is assuming the lifetime of <code>B</code> is shorter than the lifetime of <code>A</code> so that <code>B</code> can guarantee that the <code>Interface</code> is alive. If you can't make that guarantee then you can start thinking about <code>shared_ptr</code> and <code>weak_ptr</code> pair but I don't think that should be your first choice. It looks like in your case you can make that guarantee.</p>\n\n<p>As for whether <code>B</code> should hold a normal reference or a raw pointer that comes down to whether <code>impl_</code> can be null (which doesn't seem to be the case here). Also, holding a reference restricts what you can do with <code>B</code>. It makes it unassignable and you can't reseat the reference to point to a different impl.</p>\n"}], "owner": {"reputation": 979, "user_id": 10311873, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U6bx1OxX8qs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNd_9-45wwusxC1gms2M0Q8UEE1AA/mo/photo.jpg?sz=128", "display_name": "Irbis", "link": "https://stackoverflow.com/users/10311873/irbis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 57298967, "answer_count": 1, "score": 1, "last_activity_date": 1564616171, "creation_date": 1564604843, "last_edit_date": 1564607961, "question_id": 57298375, "link": "https://stackoverflow.com/questions/57298375/weak-ptr-vs-unique-ptr-reference-passing-interface-impl-to-other-object", "title": "weak_ptr vs unique_ptr reference - passing interface impl to other object", "body": "<p>Here is an example code:</p>\n\n<pre><code>class Interface\n{\npublic:\n    virtual ~Interface(){}\n    virtual void fun() = 0;\n};\n\nclass InterfaceImpl: public Interface\n{\npublic:\n    void fun() override\n    {}\n};\n\nclass B\n{\npublic:\n    B(const std::shared_ptr&lt;Interface&gt;&amp; impl /*std::unique_ptr&lt;Interface&gt;&amp; impl* ?*/): impl_(impl){}\nprivate:\n    std::weak_ptr&lt;Interface&gt; impl_;\n    //std::unique_ptr&lt;Interface&gt;&amp; impl_; ?\n};\n\nclass A\n{\npublic:\n    A(): impl_(std::make_shared&lt;InterfaceImpl&gt;()), b(impl_){}\nprivate:\n    std::shared_ptr&lt;Interface&gt; impl_;\n    //std::unique_ptr&lt;Interface&gt; impl_ ?\n    B b;\n};\n</code></pre>\n\n<p>Class A contains an interface implementation and other object of type B. That object also need to use an interface implementation. I wonder which types of smart pointers should be used to create interface impl in class A and pass that impl to class B. Should I use shared_ptr in class A and weak_ptr in class B or unique_ptr in class A and a reference to unique ptr in class B ?</p>\n"}, {"tags": ["c++", "iterator", "auto"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1564603428, "post_id": 57298068, "comment_id": 101090230, "body": "I doubt you&#39;ll see any performance difference.  Such micro optimizations should not be considered until you&#39;ve actually profiled the code and determined the performance is not acceptable."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564603619, "post_id": 57298068, "comment_id": 101090309, "body": "The compiler will likely generate the exact same code for those two cases, once you enable the optimizer. Don&#39;t do micro optimizations like that without using a profiler (on optimized code) to prove that it actually makes a difference."}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 5, "creation_date": 1564603668, "post_id": 57298068, "comment_id": 101090325, "body": "Storing references to temporary objects is usually a bad idea."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 5, "creation_date": 1564603714, "post_id": 57298068, "comment_id": 101090348, "body": "@SidS in this case it is just fine"}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564624146, "post_id": 57298884, "comment_id": 101095200, "body": "or even <code>for(const auto&amp; [key, value] : the_map) { ... }</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1564663247, "post_id": 57298884, "comment_id": 101110874, "body": "&quot;someday another programmer remove the const then you have a reference to a temporary&quot; this will not work unless you have pesky MS compiler."}], "tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 1, "last_activity_date": 1564632972, "last_edit_date": 1564632972, "creation_date": 1564607455, "answer_id": 57298884, "question_id": 57298068, "link": "https://stackoverflow.com/questions/57298068/returning-iterators/57298884#57298884", "title": "Returning Iterators", "body": "<p><code>const auto&amp;</code> could be helpful if you were using it in a range <code>for</code> loop, where you are also sure about the lifetime:</p>\n\n<pre><code>for(const auto&amp; it : map)\n{....}\n</code></pre>\n\n<p>And as @<a href=\"https://stackoverflow.com/users/7582247/ted-lyngmo\">Ted</a> pointed out also this form of <code>for</code> loop </p>\n\n<pre><code>for(const auto&amp; [key, value] : the_map) \n { ... }\n</code></pre>\n\n<p>Otherwise the microptimization (if there is any)doesn't worth the potential bugs it brings.\nMaybe someday another programmer remove the <code>const</code> then you have a reference to a temporary.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1564664584, "last_edit_date": 1564664584, "creation_date": 1564664251, "answer_id": 57309565, "question_id": 57298068, "link": "https://stackoverflow.com/questions/57298068/returning-iterators/57309565#57309565", "title": "Returning Iterators", "body": "<p>There are 2 moments that make this method useless:</p>\n\n<ol>\n<li><p>iterators designed as lightweight objects that cheap to pass and store by value.</p></li>\n<li><p>even if you would have heavy object in this case it will not save anything. Here is why. </p></li>\n</ol>\n\n<p>Imagine this code:</p>\n\n<pre><code>HeavyObject foobar();\n\nauto obj1 = foobar();\nconst auto &amp;obj2 = foobar();\n</code></pre>\n\n<p>in early age of C++ second case will be more optimal due to copy ctor possibly called in the first one. This is not the case anymore due to RVO (return value optimization) which is mandatory since C++17. So your code used to make sense for more complex objects than iterators. In case of iterator it was very unlikely you would see any difference in performance even without optimization enabled and even when RVO was not mandated. So such code could be considered fine by some people but I would find it unreadable as iterators usually passed around by value and such code at least will raise a question, why author did this?</p>\n"}], "owner": {"reputation": 71, "user_id": 3220058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74ab1625448fac6624ac963b8d7eaa8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3220058", "link": "https://stackoverflow.com/users/3220058/user3220058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564664584, "creation_date": 1564603271, "question_id": 57298068, "link": "https://stackoverflow.com/questions/57298068/returning-iterators", "title": "Returning Iterators", "body": "<p>Using map.find() or any function that returns an iterator.\nIs there any benefit to storing the returned value as a ref ?</p>\n\n<pre><code>const auto  it  = map.find(0);\nconst auto&amp; it2 = map.find(0);\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "numactl"], "comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1564613632, "post_id": 57298045, "comment_id": 101093312, "body": "Most commonly, your program would have an argument (or envvar it reads) to specify the number of threads, and only use <code>std::thread::hardware_concurrency</code> as a default if that is not set.  <code>-j</code> is common."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1564608175, "creation_date": 1564608175, "answer_id": 57299022, "question_id": 57298045, "link": "https://stackoverflow.com/questions/57298045/maximum-number-of-threads-in-c/57299022#57299022", "title": "Maximum number of threads in C++", "body": "<p>You'll have to use OS specific calls to inquire about the limitations that it imposes on your process.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency\" rel=\"nofollow noreferrer\"><code>hardware_concurrency</code></a> potentially returns a hint to the number of threads supported (by your hardware), or may return 0. The OS can limit your process to fewer threads than this number (or could potentially use more), whether using tools like <code>numactl</code>, normal scheduling, or some other means.  There is always the possibility that some process or user will change the allowable CPU set, which can effect the available concurrency.  A typical C++ program is not expected to have to concern itself with these details, particularly since changes in the number of available threads are often transient.</p>\n"}], "owner": {"reputation": 1030, "user_id": 4080543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a1ce48bfe85fb56524408afe18fe89?s=128&d=identicon&r=PG&f=1", "display_name": "MTMD", "link": "https://stackoverflow.com/users/4080543/mtmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2326, "favorite_count": 1, "accepted_answer_id": 57299022, "answer_count": 1, "score": 5, "last_activity_date": 1564608246, "creation_date": 1564603136, "last_edit_date": 1564608246, "question_id": 57298045, "link": "https://stackoverflow.com/questions/57298045/maximum-number-of-threads-in-c", "title": "Maximum number of threads in C++", "body": "<p><strong>Trivia</strong></p>\n\n<p>Usually, when I want to write a multi-threaded program in C++, I ask the hardware regarding the number of supported concurrent threads as shown in what follows:</p>\n\n<pre><code>unsigned int numThreads = std::thread::hardware_concurrency();\n</code></pre>\n\n<p>This returns the total number of supported concurrency. Hence, if we have 2 CPUs each of which can support 12 threads, <code>numThreads</code> will be equal to 24.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>Recently I used <code>numactl</code> to enforce a program to run on ONE CPU ONLY.</p>\n\n<pre><code>numactl -N 1 ./a.out\n</code></pre>\n\n<p>The problem is that <code>std::thread::hardware_concurrency()</code> returns 24 even when I run it with <code>numactl -N 1</code>. However, under such settings the output of <code>nproc</code> is 12.</p>\n\n<pre><code>numactl -N 1 nproc --&gt; output = 12\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Perhaps <code>std::thread::hardware_concurrency()</code> is not designed to support such a scenario. That's not my concern. My question is, what is the <strong>best practice</strong> to get the supported number of threads when I want to run my program with <code>numactl</code>.</p>\n\n<p><strong>Further information</strong></p>\n\n<p>In case you haven't dealt with <code>numactl</code>, it can be used to run a process using a NUMA policy. For example, you can use it to enforce your program to be ran on one CPU only. The usage for such a case is shown above. </p>\n"}, {"tags": ["c++", "qt", "cmake", "qt5"], "comments": [{"owner": {"reputation": 502, "user_id": 11121626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gUeO.jpg?s=128&g=1", "display_name": "nonForgivingJesus", "link": "https://stackoverflow.com/users/11121626/nonforgivingjesus"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1564606835, "post_id": 57298040, "comment_id": 101091467, "body": "@eyllanesc edited"}], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 11121626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gUeO.jpg?s=128&g=1", "display_name": "nonForgivingJesus", "link": "https://stackoverflow.com/users/11121626/nonforgivingjesus"}, "is_accepted": true, "score": 0, "last_activity_date": 1564650208, "creation_date": 1564650208, "answer_id": 57305401, "question_id": 57298040, "link": "https://stackoverflow.com/questions/57298040/building-qt5-quick-project-without-qt-creator-via-cmake/57305401#57305401", "title": "Building Qt5 Quick project without Qt Creator via CMake", "body": "<p>The main problem, why \"First attempt\" failed is because Qt5 installed itself in\n<code>~/Qt</code> and CMake searched for <code>*.cmake</code> configuration files in <code>/usr/lib/x86_64-linux-gnu/cmake/</code> (I didn't metion that i use <code>Ubuntu 16 LTS</code>, which have cmake 3.5.1 preinstalled). </p>\n\n<p>So the way to solve this problem was to copy everything that was in </p>\n\n<p><code>~/Qt/*last cmake version*/gcc_64</code> (in my case <code>~/Qt/5.13.0/gcc_64</code>) </p>\n\n<p>into <code>/usr/lib/</code> via <code>sudo cp -a ~/Qt/5.13.0/gcc_64/* /usr/lib/</code></p>\n\n<hr>\n\n<p>The answer to second is short:</p>\n\n<p>This happend because by default Qt Creator sets CMake output into Ninja makefiles.</p>\n\n<p>Go to <code>Tools &gt; Options &gt; Kits</code> and add desired configuration or edit existing. </p>\n"}], "owner": {"reputation": 502, "user_id": 11121626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gUeO.jpg?s=128&g=1", "display_name": "nonForgivingJesus", "link": "https://stackoverflow.com/users/11121626/nonforgivingjesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 1, "accepted_answer_id": 57305401, "answer_count": 1, "score": 0, "last_activity_date": 1564650208, "creation_date": 1564603108, "last_edit_date": 1564606566, "question_id": 57298040, "link": "https://stackoverflow.com/questions/57298040/building-qt5-quick-project-without-qt-creator-via-cmake", "title": "Building Qt5 Quick project without Qt Creator via CMake", "body": "<p>Im trying to build simple Qt Quick project and want to work with it outside <code>Qt Creator</code>. It means coding, building and running program only with tools like <code>Vim</code> or <code>CMake</code>.</p>\n\n<p>I have two problems:</p>\n\n<ol>\n<li>I don't understand why CMake cannot find all needed libraries by itself and build project.</li>\n<li>I don't understand why clicking on <code>\u25b6</code> button in Qt Creator builds default project succesfully, but running CMake by myself results in c++ error.</li>\n</ol>\n\n<p>Firstly i made CMakeLists.txt in the image of Qt5 Quick project i found on github. Then I tried to make project via Creator, then inspect how it builds <code>CMakeLists.txt</code> and compose one by myself.</p>\n\n<p>My first attempt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.11..3.15)\n\nset(PROJECT_NAME \"uint32_sort_gui\")\n\nproject(${PROJECT_NAME} LANGUAGES CXX)\n\nset(CMAKE_AUTOMOC ON)\nset(CMAKE_AUTORCC ON)\nset(CMAKE_AUTOUIC ON)\n\nfind_package(Qt5 COMPONENTS Core Gui Qml Quick QuickControls2 REQUIRED)\n\nadd_subdirectory(${PROJECT_SOURCE_DIR}/sort_lib/)\n\ntarget_link_libraries(${PROJECT_NAME}\n                      PUBLIC\n                      Qt5::Core\n                      Qt5::Gui\n                      Qt5::Qml\n                      Qt5::Quick\n                      Qt5::QuickControls2    #(*)\n                      SortCore\n                      )\nset_target_properties(${PROJECT_NAME} \n                      PROPERTIES \n                      CXX_STANDARD 11 \n                      CXX_STANDARD_REQUIRED ON)\n</code></pre>\n\n<p>Second (autogenerated by Qt Creator):</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.1)\n\nproject(Deleteme2 LANGUAGES CXX)\n\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\nset(CMAKE_AUTOMOC ON)\nset(CMAKE_AUTORCC ON)\nset(CMAKE_CXX_STANDARD 11)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\nfind_package(Qt5 COMPONENTS Core Quick REQUIRED)\n\nadd_executable(${PROJECT_NAME} \"main.cpp\" \"qml.qrc\")\ntarget_compile_definitions(${PROJECT_NAME} PRIVATE $&lt;$&lt;OR:$&lt;CONFIG:Debug&gt;,$&lt;CONFIG:RelWithDebInfo&gt;&gt;:QT_QML_DEBUG&gt;)\ntarget_link_libraries(${PROJECT_NAME} PRIVATE Qt5::Core Qt5::Quick)\n</code></pre>\n\n<p>First listing fails on <code>(*)</code> line, saying </p>\n\n<pre><code>Could not find a package configuration file provided by \"Qt5QuickControls2\"\n  with any of the following names:\n\n    Qt5QuickControls2Config.cmake\n    qt5quickcontrols2-config.cmake\n\n  Add the installation prefix of \"Qt5QuickControls2\" to CMAKE_PREFIX_PATH or\n  set \"Qt5QuickControls2_DIR\" to a directory containing one of the above\n  files.  If \"Qt5QuickControls2\" provides a separate development package or\n  SDK, be sure it has been installed.\n</code></pre>\n\n<p>(But i've installed everything)</p>\n\n<p>And second fails with error during compilation:</p>\n\n<pre><code>make\n[ 16%] Automatic MOC for target Deleteme2\n[ 16%] Built target Deleteme2_autogen\n[ 33%] Building CXX object CMakeFiles/Deleteme2.dir/main.cpp.o\nDeleteme2/main.cpp: In function \u2018int main(int, char**)\u2019:\nDeleteme2/main.cpp:6:36: error: \u2018AA_EnableHighDpiScaling\u2019 is not a member of \u2018Qt\u2019\n     QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n</code></pre>\n\n<p>What am i doing wrong? Why Qt Creator can build <code>Deleteme2</code> without a problem?</p>\n\n<p>Edited:\nHere is the sample code, generated by Qt Creator for second attempt</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    const QUrl url(QStringLiteral(\"qrc:/main.qml\"));\n    QObject::connect(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,\n                     &amp;app, [url](QObject *obj, const QUrl &amp;objUrl) {\n        if (!obj &amp;&amp; url == objUrl)\n            QCoreApplication::exit(-1);\n    }, Qt::QueuedConnection);\n    engine.load(url);\n\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "amazon-web-services", "freeswitch", "amazon-polly", "aws-sdk-cpp"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1564600389, "post_id": 57297465, "comment_id": 101089035, "body": "<a href=\"https://stackoverflow.com/q/12573816/5910058\">stackoverflow.com/q/12573816/5910058</a>"}, {"owner": {"reputation": 29, "user_id": 10096205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bLYwWS5tqdk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7poboG2DD1v1nQWN0J4pSxilmXRtA/mo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/10096205/jack"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564602032, "post_id": 57297465, "comment_id": 101089735, "body": "should I be asking the same question again if that doesn&#39;t solve the problem? I am still figuring out if that does indeed solve the problem."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564602181, "post_id": 57297465, "comment_id": 101089796, "body": "What&#39;s unclear about &quot;This question has been asked before and already has an answer. If those answers do not fully address your question, please <a href=\"https://stackoverflow.com/questions/ask\">ask a new question</a>.&quot;?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564602448, "post_id": 57297465, "comment_id": 101089896, "body": "Your <code>-l</code> arguments seem to point at directories rather than actual libraries..."}, {"owner": {"reputation": 29, "user_id": 10096205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bLYwWS5tqdk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7poboG2DD1v1nQWN0J4pSxilmXRtA/mo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/10096205/jack"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564602660, "post_id": 57297465, "comment_id": 101089960, "body": "<code>aws-cpp-sdk-core</code> is present as <code>libaws-cpp-sdk.a</code>. Giving the name as is was giving an error like <code>&#47;usr&#47;bin&#47;ld: could not find file</code> &amp; failed to make .so"}], "owner": {"reputation": 29, "user_id": 10096205, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bLYwWS5tqdk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7poboG2DD1v1nQWN0J4pSxilmXRtA/mo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/10096205/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1564601574, "answer_count": 0, "score": 0, "last_activity_date": 1564610987, "creation_date": 1564600232, "last_edit_date": 1592644375, "question_id": 57297465, "link": "https://stackoverflow.com/questions/57297465/undefined-symbol-znk3aws35amazonserializablewebservicerequest7getbodyev-tr", "closed_reason": "Duplicate", "title": "undefined symbol: _ZNK3Aws35AmazonSerializableWebServiceRequest7GetBodyEv** - trying to use AWS cpp sdk with FreeSwitch", "body": "<p>I am trying to build a <code>FreeSWITCH</code> module to add <code>text-to-speech</code> functionality using <code>AWS Polly</code> &amp; the <code>AWS C++ SDK</code>.</p>\n<p>Dev environment is Debian 8, g++ 4.9.2. AWS C++ SDK is built using instructions <a href=\"https://github.com/aws/aws-sdk-cpp/wiki/Building-the-SDK-from-source-on-EC2\" rel=\"nofollow noreferrer\">here</a> except that I turned off shared libs (produces .a lib files).</p>\n<p>Now my mod_polly (AWS polly module) builds fine &amp; produces a .so file which when places under <code>/usr/local/freeswitch/mod</code> is attempted to load by <code> Freeswitch</code>. But it fails with errors</p>\n<blockquote>\n<p>2019-07-31 22:00:51.918181 [CRIT] switch_loadable_module.c:1522 Error Loading module /usr/local/freeswitch/mod/mod_polly.so</p>\n<p>/usr/local/freeswitch/mod/mod_polly.so: undefined symbol: _ZNK3Aws35AmazonSerializableWebServiceRequest7GetBodyEv</p>\n</blockquote>\n<p>This symbol is present in <code>libaws-cpp-sdk-core.a</code> and <code>libaws-cpp-sdk-polly.a</code>. Command i use to build my source (mod_polly.c) is</p>\n<blockquote>\n<p>g++ -shared -o mod_polly.so -L/usr/local/lib/ -laws-cpp-sdk-polly -laws-cpp-sdk-core -fPIC -g -ggdb -std=c++11 -Wall -Werror -I/usr/src/freeswitch/src/include/ -I/usr/src/freeswitch/libs/libteletone/src/ mod_polly.cpp</p>\n</blockquote>\n<p>Not sure what I am doing wrong here.</p>\n<p>PS: the source for the module is actually borrowed from community. From <a href=\"https://stackoverflow.com/a/12574420/10096205\">https://stackoverflow.com/a/12574420/10096205</a>, i understand that it is related to mixing of C/C++ code. Just not figured out what it is.</p>\n<p>Looking into symbols it shows -</p>\n<blockquote>\n<p>readelf -Ws mod_polly.so | grep _ZNK3Aws35AmazonSerializableWebServiceRequest7GetBodyEv</p>\n<p>66: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _ZNK3Aws35AmazonSerializableWebServiceRequest7GetBodyEv</p>\n<p>590: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _ZNK3Aws35AmazonSerializableWebServiceRequest7GetBodyEv</p>\n</blockquote>\n<p>So from my basic understanding of this post <a href=\"https://stackoverflow.com/a/26233563/10096205\">https://stackoverflow.com/a/26233563/10096205</a>, symbol exists in the library. So why can't <code>FreeSwitch</code> load it?</p>\n<p>Source code (removed author name &amp; MPL license part)</p>\n<pre><code>/*\n *\n * mod_polly.c -- Test Playground for labs\n *\n */\n\nextern &quot;C&quot; {\n#include &lt;switch.h&gt;\n}\n\n#include &lt;fstream&gt;\n\n#define BIG_ENDIAN_SYSTEM (*(uint16_t *)&quot;\\0\\xff&quot; &lt; 0x100)\n\n#define REVERSE_BYTES(...) do for(size_t REVERSE_BYTES=0; REVERSE_BYTES&lt;sizeof(__VA_ARGS__)&gt;&gt;1; ++REVERSE_BYTES)\\\n    ((unsigned char*)&amp;(__VA_ARGS__))[REVERSE_BYTES] ^= ((unsigned char*)&amp;(__VA_ARGS__))[sizeof(__VA_ARGS__)-1-REVERSE_BYTES],\\\n    ((unsigned char*)&amp;(__VA_ARGS__))[sizeof(__VA_ARGS__)-1-REVERSE_BYTES] ^= ((unsigned char*)&amp;(__VA_ARGS__))[REVERSE_BYTES],\\\n    ((unsigned char*)&amp;(__VA_ARGS__))[REVERSE_BYTES] ^= ((unsigned char*)&amp;(__VA_ARGS__))[sizeof(__VA_ARGS__)-1-REVERSE_BYTES];\\\nwhile(0)\n\n#include &lt;aws/core/Aws.h&gt;\n#include &lt;aws/core/auth/AWSCredentials.h&gt;\n#include &lt;aws/core/client/ClientConfiguration.h&gt;\n#include &lt;aws/core/utils/Outcome.h&gt;\n#include &lt;aws/polly/PollyClient.h&gt;\n#include &lt;aws/polly/model/SynthesizeSpeechRequest.h&gt;\n#include &lt;aws/polly/model/SynthesizeSpeechResult.h&gt;\n#include &lt;aws/polly/model/TextType.h&gt;\n#include &lt;aws/polly/model/LanguageCode.h&gt;\n#include &lt;aws/polly/model/OutputFormat.h&gt;\n#include &lt;aws/polly/model/VoiceId.h&gt;\n\ntypedef unsigned long DWORD;    // 32-bit unsigned integer\ntypedef unsigned short WORD;    // 16-bit unsigned integer\n\nstruct riff                                 // Data             Bytes   Total\n{\n    char            chunkID[4];             // &quot;RIFF&quot;           4       4\n    DWORD           riffSize;               // file size - 8    4       8\n    char            typeID[4];              // &quot;WAVE&quot;           4       12\n    char            formatChunkID[4];       // &quot;fmt &quot;           4       16\n    DWORD           formatChunkSize;        // 16 bytes         4       20          \n    WORD            formatTag;              //                  2       22\n    WORD            noOfChannels;           //                  2       24\n    DWORD           samplesPerSec;          //                  4       28\n    DWORD           bytesPerSec;            //                  4       32\n    WORD            blockAlign;             //                  2       34\n    WORD            bitsPerSample;          //                  2       36\n    char            dataChunkID[4];         // &quot;data&quot;           4       40\n    DWORD           dataChunkSize;          // not fixed        4       44\n};\n\nstatic struct {\n    switch_mutex_t *mutex;\n    switch_thread_rwlock_t *running_rwlock;\n    switch_memory_pool_t *pool;\n    int running;\n} process;\n\nstatic struct {\n    Aws::Auth::AWSCredentials *credentials;\n    Aws::Client::ClientConfiguration *config;\n    Aws::SDKOptions *options;\n} globals;\n\nswitch_loadable_module_interface_t *MODULE_INTERFACE;\n\nstatic char *supported_formats[SWITCH_MAX_CODECS] = { 0 };\n\n/* Prototypes */\n\nSWITCH_MODULE_LOAD_FUNCTION(mod_polly_load);\nSWITCH_MODULE_SHUTDOWN_FUNCTION(mod_polly_shutdown);\nSWITCH_MODULE_DEFINITION(mod_polly, mod_polly_load, mod_polly_shutdown, NULL);\n\n// ------------------------------------------------------------------------------------------------------------------\n\n/* Implementation */\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const riff&amp; h)\n{\n    if BIG_ENDIAN_SYSTEM {\n        struct riff hdr = std::move(h);\n\n        REVERSE_BYTES(hdr.riffSize);\n        REVERSE_BYTES(hdr.formatChunkSize);\n        REVERSE_BYTES(hdr.formatTag);\n        REVERSE_BYTES(hdr.noOfChannels);\n        REVERSE_BYTES(hdr.samplesPerSec);\n        REVERSE_BYTES(hdr.bytesPerSec);\n        REVERSE_BYTES(hdr.blockAlign);\n        REVERSE_BYTES(hdr.bitsPerSample);\n        REVERSE_BYTES(hdr.dataChunkSize);\n\n        return out \n            .write(hdr.chunkID, 4)\n            .write((const char *)&amp;hdr.riffSize, 4)\n            .write(hdr.typeID, 4)\n            .write(hdr.formatChunkID, 4)\n            .write((const char *)&amp;hdr.formatChunkSize, 4)\n            .write((const char *)&amp;hdr.formatTag, 2)\n            .write((const char *)&amp;hdr.noOfChannels, 2)\n            .write((const char *)&amp;hdr.samplesPerSec, 4)\n            .write((const char *)&amp;hdr.bytesPerSec, 4)\n            .write((const char *)&amp;hdr.blockAlign, 2)\n            .write((const char *)&amp;hdr.bitsPerSample, 2)\n            .write(hdr.dataChunkID, 4)\n            .write((const char *)&amp;hdr.dataChunkSize, 4);\n    } else {\n        return out\n            .write(h.chunkID, 4)\n            .write((const char *)&amp;h.riffSize, 4)\n            .write(h.typeID, 4)\n            .write(h.formatChunkID, 4)\n            .write((const char *)&amp;h.formatChunkSize, 4)\n            .write((const char *)&amp;h.formatTag, 2)\n            .write((const char *)&amp;h.noOfChannels, 2)\n            .write((const char *)&amp;h.samplesPerSec, 4)\n            .write((const char *)&amp;h.bytesPerSec, 4)\n            .write((const char *)&amp;h.blockAlign, 2)\n            .write((const char *)&amp;h.bitsPerSample, 2)\n            .write(h.dataChunkID, 4)\n            .write((const char *)&amp;h.dataChunkSize, 4);\n    }\n}\n\nriff init_pcm_header(std::ostream&amp; in)\n{\n    // get length of file\n    in.seekp(0, in.end);\n    DWORD sz = in.tellp();\n    in.seekp(0, in.beg);\n\n    struct riff result = {\n        {'R','I','F','F'},      // chunkID\n        sz + 0x24,              // riffSize         (size of stream + 0x24) or (file size - 8)\n        {'W','A','V','E'},      // typeID\n        {'f','m','t',' '},      // formatChunkID\n        16,                     // formatChunkSize\n        1,                      // formatTag        (PCM)\n        1,                      // noOfChannels     (mono)\n        8000,                   // samplesPerSec    (8KHz)\n        16000,                  // bytesPerSec      ((Sample Rate * BitsPerSample * Channels) / 8)\n        2,                      // blockAlign       ((bits per sample * channels) / 8)\n        16,                     // bitsPerSample    (multiples of 8)\n        {'d','a','t','a'},      // dataChunkID\n        sz                      // dataChunkSize    (sample size)   \n    };\n\n    return result;\n}\n\nstruct voice_sync {\n    char* session_uuid;\n    Aws::IOStream *audio_stream;\n    switch_size_t blockAlign;\n};\n\ntypedef struct voice_sync voice_sync_t;\n\nstatic switch_status_t polly_file_open(switch_file_handle_t *handle, const char *path)\n{\n    voice_sync_t *sync_info = (voice_sync_t*)malloc(sizeof(voice_sync_t));\n    sync_info-&gt;audio_stream = new Aws::StringStream(std::ios::in | std::ios::out | std::ios::binary);\n\n    handle-&gt;private_info = sync_info;\n    handle-&gt;samplerate = 8000;\n    handle-&gt;channels = 1;\n    handle-&gt;pos = 0;\n    handle-&gt;format = 0;\n    handle-&gt;sections = 0;\n    handle-&gt;seekable = 0;\n    handle-&gt;speed = 0.5;\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;submitting text [%s] to polly&quot;, path);\n\n    Aws::Polly::PollyClient polly_client(*globals.credentials, *globals.config);\n    Aws::Polly::Model::SynthesizeSpeechRequest request;\n\n    request.SetLanguageCode(Aws::Polly::Model::LanguageCode::en_US);\n    request.SetOutputFormat(Aws::Polly::Model::OutputFormat::pcm);\n    request.SetSampleRate(&quot;8000&quot;);\n    request.SetTextType(Aws::Polly::Model::TextType::text);  // or ssml\n    request.SetVoiceId(Aws::Polly::Model::VoiceId::Matthew);\n    request.SetText(path);\n\n    if (handle-&gt;params) {\n        // get the session UUID for this channel\n        // note: this doesnt fire for a standard call session in the audio context; is there a way to make sure it is there?\n        const char *uuid = switch_event_get_header(handle-&gt;params, &quot;session&quot;);\n        if (!zstr(uuid)) {\n            sync_info-&gt;session_uuid = switch_core_strdup(handle-&gt;memory_pool, uuid);\n            switch_log_printf(SWITCH_CHANNEL_UUID_LOG(sync_info-&gt;session_uuid), SWITCH_LOG_DEBUG, &quot;Polly linked to session %s\\n&quot;, sync_info-&gt;session_uuid);\n        }\n    }\n    sync_info-&gt;audio_stream-&gt;clear();\n//    sync_info-&gt;audio_stream.open(filename.c_str(), std::ios::out | std::ios::binary);\n\n    auto outcome = polly_client.SynthesizeSpeech(request);\n\n    // Output operation status\n    if (outcome.IsSuccess()) {\n        switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;received audio response for %s&quot;, request.GetServiceRequestName());\n\n        Aws::Polly::Model::SynthesizeSpeechResult&amp; result = ((Aws::Polly::Model::SynthesizeSpeechResult&amp;)(outcome));\n        Aws::IOStream*  audio_stream = &amp;result.GetAudioStream();\n\n        // this is raw PCM so we need to add a wav header!\n        riff header = init_pcm_header(*audio_stream);\n        *sync_info-&gt;audio_stream &lt;&lt; header;\n\n        // tansfer audio data into stream\n        *sync_info-&gt;audio_stream &lt;&lt; audio_stream-&gt;rdbuf();\n        sync_info-&gt;audio_stream-&gt;seekp(0, sync_info-&gt;audio_stream-&gt;beg);\n\n        // update handle information about audio stream\n        handle-&gt;samplerate = header.samplesPerSec;\n        handle-&gt;channels = header.noOfChannels;\n        handle-&gt;format = header.formatTag;\n        handle-&gt;duration = header.dataChunkSize / header.bytesPerSec +1;\n        handle-&gt;samples_in = header.dataChunkSize / header.blockAlign +1;\n\n        sync_info-&gt;blockAlign = header.blockAlign;\n\n        switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;polly audio stream ready; duration: %ld secs&quot;, handle-&gt;duration);\n        return SWITCH_STATUS_SUCCESS;\n    }\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_ERROR, &quot;something went wrong retrieving audio from polly&quot;);\n    return SWITCH_STATUS_FALSE;\n}\n\nstatic switch_status_t polly_file_close(switch_file_handle_t *handle)\n{\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;closiing polly audio stream&quot;);\n\n    voice_sync_t *sync_info = (voice_sync_t*)handle-&gt;private_info;\n\n    //sync_info-&gt;audio_stream-&gt;close(); -- doesnt exist on stringstream\n    delete sync_info-&gt;audio_stream;\n\n    if (sync_info-&gt;session_uuid) {\n        switch_safe_free(sync_info-&gt;session_uuid);\n    }\n\n    switch_safe_free(sync_info);\n    handle-&gt;private_info = NULL;\n\n    return SWITCH_STATUS_SUCCESS;\n}\n\nstatic switch_status_t polly_file_read(switch_file_handle_t *handle, void *data, size_t *len)\n{\n    voice_sync_t *sync_info = (voice_sync_t*)handle-&gt;private_info;\n    switch_size_t bytes;\n\n    sync_info-&gt;audio_stream-&gt;read((char *)data, *len * sync_info-&gt;blockAlign);\n    if ((bytes = sync_info-&gt;audio_stream-&gt;gcount()) &lt;= 0) {\n        return SWITCH_STATUS_FALSE;\n    }\n\n    *len = bytes / sync_info-&gt;blockAlign;\n    return SWITCH_STATUS_SUCCESS;\n}\n\nSWITCH_MODULE_LOAD_FUNCTION(mod_polly_load)\n{\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Initializing polly audio interface&quot;);\n\n    supported_formats[0] = (char*)&quot;polly&quot;;\n\n    /*\n        switch_application_interface_t *app_interface;\n        switch_api_interface_t *api_interface;\n    */\n    switch_file_interface_t *file_interface;\n\n    *module_interface = switch_loadable_module_create_module_interface(pool, modname);\n    file_interface = (switch_file_interface_t*)switch_loadable_module_create_interface(*module_interface, SWITCH_FILE_INTERFACE);\n    file_interface-&gt;interface_name = modname;\n    file_interface-&gt;extens = supported_formats;\n    file_interface-&gt;file_open = polly_file_open;\n    file_interface-&gt;file_close = polly_file_close;\n    file_interface-&gt;file_read = polly_file_read;\n\n    MODULE_INTERFACE = *module_interface;\n\n    memset(&amp;process, 0, sizeof(process));\n    memset(&amp;globals, 0, sizeof(globals));\n    process.pool = pool;\n\n    switch_thread_rwlock_create(&amp;process.running_rwlock, pool);\n    switch_mutex_init(&amp;process.mutex, SWITCH_MUTEX_NESTED, pool);\n\n    globals.options = new Aws::SDKOptions();\n    globals.options-&gt;loggingOptions.logLevel = Aws::Utils::Logging::LogLevel::Debug;\n\n    globals.credentials = new Aws::Auth::AWSCredentials();\n    globals.credentials-&gt;SetAWSAccessKeyId(&quot;your aws key&quot;);\n    globals.credentials-&gt;SetAWSSecretKey(&quot;your aws secret&quot;);\n\n    globals.config = new Aws::Client::ClientConfiguration();\n    globals.config-&gt;region = &quot;eu-west-1&quot;;  // Ireland\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Initializing aws api&quot;);\n\n    Aws::InitAPI(*globals.options);\n\n    switch_thread_rwlock_wrlock(process.running_rwlock);\n    process.running = 1;\n    switch_thread_rwlock_unlock(process.running_rwlock);\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Ready to rock!&quot;);\n\n    /* indicate that the module should continue to be loaded */\n    return SWITCH_STATUS_SUCCESS;\n}\n\nSWITCH_MODULE_SHUTDOWN_FUNCTION(mod_polly_shutdown)\n{   \n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Shutting down polly polly audio interface&quot;);\n\n    switch_thread_rwlock_wrlock(process.running_rwlock);\n    process.running = 0;\n    switch_thread_rwlock_unlock(process.running_rwlock);\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Closing aws api&quot;);\n    Aws::ShutdownAPI(*globals.options);\n\n    delete globals.credentials;\n    delete globals.config;\n    delete globals.options;\n\n    switch_log_printf(SWITCH_CHANNEL_LOG, SWITCH_LOG_DEBUG, &quot;Module shutdown finished&quot;);\n    return SWITCH_STATUS_UNLOAD;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "openssl", "signed", "bignum"], "comments": [{"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 2, "creation_date": 1564600992, "post_id": 57297328, "comment_id": 101089287, "body": "BN_get_word returns an unsigned integer. Maybe it is the get that generates issues,  see <a href=\"https://www.openssl.org/docs/man1.0.2/man3/BN_get_word.html\" rel=\"nofollow noreferrer\">openssl.org/docs/man1.0.2/man3/BN_get_word.html</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1564601235, "post_id": 57297328, "comment_id": 101089403, "body": "What makes you think openssl bignums support negative values?"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1564611167, "post_id": 57297328, "comment_id": 101092796, "body": "BN_set_word() and BN_get_word() both only support unsigned values."}, {"owner": {"reputation": 303, "user_id": 3026356, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/60JOt.jpg?s=128&g=1", "display_name": "Colby", "link": "https://stackoverflow.com/users/3026356/colby"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1564659932, "post_id": 57297328, "comment_id": 101108956, "body": "@stark the <code>BN_set_negative()</code>, <code>BN_is_negative()</code> functions found here...: <a href=\"https://www.openssl.org/docs/man1.0.2/man3/bn.html\" rel=\"nofollow noreferrer\">openssl.org/docs/man1.0.2/man3/bn.html</a>"}, {"owner": {"reputation": 303, "user_id": 3026356, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/60JOt.jpg?s=128&g=1", "display_name": "Colby", "link": "https://stackoverflow.com/users/3026356/colby"}, "reply_to_user": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1564659998, "post_id": 57297328, "comment_id": 101108993, "body": "@CuriouslyRecurringThoughts Ah thanks! That makes much more sense."}], "owner": {"reputation": 303, "user_id": 3026356, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/60JOt.jpg?s=128&g=1", "display_name": "Colby", "link": "https://stackoverflow.com/users/3026356/colby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564599589, "creation_date": 1564599589, "question_id": 57297328, "link": "https://stackoverflow.com/questions/57297328/openssl-bn-sub-cant-do-signed-subtraction", "title": "OpenSSL BN_sub() can&#39;t do signed subtraction", "body": "<p>I'm trying to perform subtraction using OpenSSL's <code>BN</code> functions. I am expecting a signed integer as the difference, but instead I get either the unsigned integer, or the integer overflows (or if neither I get the desired result). </p>\n\n<p>Am I using the wrong <code>BN</code> function? </p>\n\n<pre><code>int big_num_subtract_example(vector&lt;int&gt; *arr, unsigned int mod, int seed_num) {\n    BN_CTX *ctx;\n    ctx = BN_CTX_new();\n\n    BIGNUM *product = BN_new();\n    BIGNUM *tmp = BN_new();\n    BIGNUM *modulo = BN_new();\n    BIGNUM *mod_result = BN_new();\n\n    BN_set_word(product, seed_num);\n    BN_set_word(modulo, mod);\n\n    for (auto elem : arr) {\n\n        BN_CTX_start(ctx);\n\n        BN_set_word(tmp, elem);\n\n        BN_mul(product, product, tmp, ctx);\n\n        //Start of example\n        BIGNUM *sub_one = BN_new();\n        BIGNUM *sub_two = BN_new();\n\n        BIGNUM *num_one = BN_new();\n        BIGNUM *num_two = BN_new();\n\n        BN_set_word(num_one, -7);\n        BN_set_word(num_two, 11);\n\n        BN_sub(sub_one, num_one, num_two);\n        BN_sub(sub_two, num_two, num_one);\n\n        cout &lt;&lt; \"sub_one: \" &lt;&lt; BN_get_word(sub_one) &lt;&lt; \"\\n\"; //18446744073709551598 expected -4\n        cout &lt;&lt; \"sub_two: \" &lt;&lt; BN_get_word(sub_two) &lt;&lt; \"\\n\"; //18446744073709551598 expected 18\n\n        BN_set_word(num_one, 7);\n        BN_set_word(num_two, 11);\n\n        BN_sub(sub_one, num_one, num_two);\n        BN_sub(sub_two, num_two, num_one);\n\n        cout &lt;&lt; \"sub_one: \" &lt;&lt; BN_get_word(sub_one) &lt;&lt; \"\\n\"; //4 expected -11\n        cout &lt;&lt; \"sub_two: \" &lt;&lt; BN_get_word(sub_two) &lt;&lt; \"\\n\"; //4 \n        //end of example\n\n\n        //...\n        //Code using the product from start of loop and result of subtraction...\n        //...\n\n        BN_CTX_end(ctx);\n\n    }\n\n    BN_clear_free(product);\n    BN_clear_free(tmp);\n    BN_clear_free(modulo);\n    BN_clear_free(mod_result);\n    BN_CTX_free(ctx);\n\n    return 0;\n}\n</code></pre>\n\n<p>The <a href=\"https://www.openssl.org/docs/man1.1.0/man3/BN_sub.html\" rel=\"nofollow noreferrer\">docs</a> state:</p>\n\n<blockquote>\n  <p>BN_sub() subtracts b from a and places the result in r (r=a-b). r may\n  be the same BIGNUM as a or b.</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1564599125, "post_id": 57297200, "comment_id": 101088531, "body": "You have a rule of three violation.  You need to provide proper copy operations otherwise all of the copies share the same array"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564599180, "post_id": 57297200, "comment_id": 101088555, "body": "<i>Passing a class by value, the method should NOT be able to change the values.</i> Not sure where you got that information from. It&#39;s not true (as your code proves). It is perhaps <i>desirable</i> to write your classes so that statement is true, but nothing means it has to be true."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1564599227, "post_id": 57297200, "comment_id": 101088571, "body": "The pointer <code>mpdVal</code> itself is copied, but what it points to is not. You could <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">copy the array it points to in a copy constructor</a>. Or you could use a <code>std::vector</code> and forget about all this trouble."}, {"owner": {"reputation": 5849, "user_id": 767829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3f1eeecd07fe2b30579cc9f1a7353def?s=128&d=identicon&r=PG", "display_name": "jdl", "link": "https://stackoverflow.com/users/767829/jdl"}, "edited": false, "score": 0, "creation_date": 1564599248, "post_id": 57297200, "comment_id": 101088583, "body": "This is using a class not a structure to pass in to a method... it changes the results that way."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1564599312, "post_id": 57297200, "comment_id": 101088607, "body": "A class and a struct are the same thing in c++"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1564599319, "post_id": 57297200, "comment_id": 101088609, "body": "@jdl The only difference between <code>class</code> and <code>struct</code> is the default member (and base class) access (<code>public</code> vs <code>private</code>). In fact, strictly speaking there are no strucures in C++, <code>struct</code> creates classes."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564599320, "post_id": 57297200, "comment_id": 101088611, "body": "What&#39;s happening here is that the original object and the copy passed by value are sharing information (the dynamically allocated array pointed to by <code>mpdVal</code>) so obviously any changes to that array are visible to all objects which share that array, It&#39;s up to you to write your class in such a way that this sharing does not happen (if that&#39;s what you want)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1564599454, "post_id": 57297200, "comment_id": 101088672, "body": "Pointers... That makes a lot more sense."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564601853, "post_id": 57297200, "comment_id": 101089659, "body": "<a href=\"https://stackoverflow.com/q/388242/5910058\">stackoverflow.com/q/388242/5910058</a>"}], "owner": {"reputation": 5849, "user_id": 767829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3f1eeecd07fe2b30579cc9f1a7353def?s=128&d=identicon&r=PG", "display_name": "jdl", "link": "https://stackoverflow.com/users/767829/jdl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1564599070, "answer_count": 0, "score": 0, "last_activity_date": 1564599967, "creation_date": 1564598998, "last_edit_date": 1564599967, "question_id": 57297200, "link": "https://stackoverflow.com/questions/57297200/why-are-the-values-in-a-class-changed-when-the-class-is-passed-in-by-value-to-a", "closed_reason": "Duplicate", "title": "Why are the values in a CLASS changed when the CLASS is passed in by value to a method?", "body": "<p>This question is using a class not a structure to pass in to a method... it changes the results that way.</p>\n\n<ul>\n<li>Passing a class by reference, the method can changes those values.</li>\n<li>Passing a class by value, the method should NOT be able to change the values.</li>\n<li>But here Passing a class by value, the values are changed. WHY?</li>\n</ul>\n\n<hr>\n\n<pre><code>#include \"pch.h\"  //header from MSVS c++ console app\n#include &lt;iostream&gt;\n\n\n\nclass C_PetList\n{\npublic:\n  double *mpdVal;\n\n  C_PetList()\n  {\n    mpdVal = new double[20];\n  }\n\n  ~C_PetList() //Placing the destructor in here gives the same results from my other code.  All my values are set to -1.4568159901474629e+144\n\n  {\n    if (mpdVal)\n    {\n      delete mpdVal;\n      mpdVal = nullptr;\n    }\n  }\n};\n\nclass C_Pet\n{\npublic:\n  C_Pet() {}\n\n  ~C_Pet() {}\n\n\n  void EvalPetList(C_PetList c_PetList)\n  {\n    // do something\n    for (int i = 0; i &lt; 20; i++)\n    {\n      c_PetList.mpdVal[i] += 300;\n    }\n  }\n\n  void ProcessPetList(C_PetList c_PetList)\n  {\n\n    EvalPetList(c_PetList); //passed by value\n  }\n};\n\nint main()\n{\n  C_Pet c_Pet;\n\n  C_PetList c_PetList;\n\n  for (int i = 0; i &lt; 20; i++)\n  {\n    c_PetList.mpdVal[i] = (double)i;\n  }\n\n  c_Pet.ProcessPetList(c_PetList);\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "return"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1564598722, "post_id": 57297131, "comment_id": 101088346, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564598818, "post_id": 57297131, "comment_id": 101088384, "body": "@NathanOliver can I do that somehow in Visual Studio?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564598915, "post_id": 57297131, "comment_id": 101088432, "body": "Sure.  Set a breakpoint on the first line in <code>main</code> and then press either the green arrow &quot;Local Windows Debugger&quot; or press F5"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564598918, "post_id": 57297131, "comment_id": 101088434, "body": "Visual studio has one of the best debuggers out there. <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/debugger-feature-tour?view=vs-2019\" rel=\"nofollow noreferrer\">Start reading somewhere around here.</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564598966, "post_id": 57297131, "comment_id": 101088461, "body": "<a href=\"https://stackoverflow.com/q/25385173/5910058\">What is a debugger and how can it help me diagnose problems?</a> - <i>Please</i> read <a href=\"https://stackoverflow.com/a/25385174/5910058\">the accepted answer</a>."}, {"owner": {"reputation": 58, "user_id": 10993661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3955895741cff4e897b0d01296e23423?s=128&d=identicon&r=PG&f=1", "display_name": "Grayson", "link": "https://stackoverflow.com/users/10993661/grayson"}, "edited": false, "score": 0, "creation_date": 1564599120, "post_id": 57297131, "comment_id": 101088526, "body": "Look at your code line by line with your debugger and pay close attention to the data types you are using."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1564599203, "post_id": 57297131, "comment_id": 101088563, "body": "<code>int putnumber()         {             return rollno;         }</code> - How quaint. A getter named <code>put</code>foo.. which even returns a variable not initialized in-class, nor by the constructor, so very easily an uninitialized variable (the reading of which is Undefined Behaviour).."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564599449, "post_id": 57297131, "comment_id": 101088667, "body": "<code>class test : virtual public student</code> - why <code>virtual</code> inheritance? <i>Why</i>?  Virtual inheritance should be used <i>extremely</i> sparingly, and only when there is a <i>very</i> good reason. Definitely &quot;expert only&quot; territory..."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564599521, "post_id": 57297131, "comment_id": 101088694, "body": "<code>system(&quot;pause&quot;);</code> - <i>Not</i> portable."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564599559, "post_id": 57297131, "comment_id": 101088718, "body": "<code>using namespace std;</code> - <i>Usually</i> a bad idea."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564599641, "post_id": 57297131, "comment_id": 101088749, "body": "@Yksisarvinen Whoops. Right you are. So there is. But still, why is that? For something like this it looks over complicated for no real reason."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564599826, "post_id": 57297131, "comment_id": 101088821, "body": "<code>void getscore()</code> - I would expect a function named <code>getscore</code> to <code>return</code> me a score that I could then print or do calculations on or whatever. That that function returns <code>void</code> and has the side effect of <i>printing</i> the score is surprising (and looks like bad design to me)."}, {"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600107, "post_id": 57297131, "comment_id": 101088936, "body": "@JesperJuhl most of these are limitations put on by my teacher. I have to use virtual class. I have to use namespace std. I got the problem by debugging, in putscore and putmarks, the values for part1marks, part2marks and score are not the user inputted values, but rather default weird values. So how can I make it so that in putscore and putmarks, input values( the ones taken in getscore and getmarks) are returned?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600267, "post_id": 57297131, "comment_id": 101088980, "body": "Sounds like a poor teacher <i>to me</i>, if that&#39;s where this design came from."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600377, "post_id": 57297131, "comment_id": 101089028, "body": "@JesperJuhl I think it&#39;s pointless to do code review for school assignments. People are not gonna learn proper coding style unless they start working on real projects and see for themselves how bad is bad code. We repeat under every single question that <code>using namespace std</code> is bad, but it&#39;s school that teaches it, so it&#39;s school that gives the rules. I guess for school assignment it&#39;s more important to show some concept, rather than anything else - if you know the concept, you can reapply it with good code or bad code, doesn&#39;t matter."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564600653, "post_id": 57297131, "comment_id": 101089159, "body": "@Yksisarvinen It&#39;s late and I&#39;m bored, so I&#39;m just commenting on random questions (hopefully still sensibly). If this was an <i>actual</i> code review at work, I&#39;d have a lot more to say about this code.."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564600784, "post_id": 57297131, "comment_id": 101089208, "body": "Have you tried to debug your code yet? Check <code>display()</code> and the values of <code>t</code> and <code>s</code> when you use them."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600876, "post_id": 57297131, "comment_id": 101089242, "body": "&quot;maybe help me&quot; - I think the comments that have been made about your code and the links to tools you should investigate, <i>very much counts as</i> help.. Don&#39;t expect anyone to debug the code for you and just post a solution. You are the one who has to do that work."}, {"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564600889, "post_id": 57297131, "comment_id": 101089250, "body": "@Yksisarvinen I did, and I saw the values not being the user inputted values. I still cant figure out how to fix it."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564600939, "post_id": 57297131, "comment_id": 101089268, "body": "Can you find any place where the values inputted by user are present? How could you retrieve them?"}, {"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "edited": false, "score": 0, "creation_date": 1564600991, "post_id": 57297131, "comment_id": 101089286, "body": "should cin&gt;&gt;score store a value in score which should be returned in putscore? I have no clue..."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564601183, "post_id": 57297131, "comment_id": 101089377, "body": "Well, morotspaj already gave you the answer."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1564602367, "post_id": 57297131, "comment_id": 101089866, "body": "@SohamRay <i>NathanOliver can I do that somehow in Visual Studio?</i> -- Seriously, there is a big &quot;Debug&quot; menu on the main task bar in Visual Studio.  I am surprised you weren&#39;t curious as to what that menu item did."}, {"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1564623460, "post_id": 57297131, "comment_id": 101095096, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/197314/discussion-on-question-by-soham-ray-required-output-is-66-6-but-i-am-getting-gib\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "edited": false, "score": 0, "creation_date": 1564601299, "post_id": 57297676, "comment_id": 101089427, "body": "sadly, yes :( and I have to submit a whole compilation of different programs tomorrow..."}, {"owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "edited": false, "score": 0, "creation_date": 1564601395, "post_id": 57297676, "comment_id": 101089468, "body": "Thank you so much, it worked, I can rest easy now xD."}], "tags": [], "owner": {"reputation": 1222, "user_id": 302951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e12fc799c2b4cba0282f773851cf204?s=128&d=identicon&r=PG", "display_name": "morotspaj", "link": "https://stackoverflow.com/users/302951/morotspaj"}, "is_accepted": true, "score": 0, "last_activity_date": 1564601150, "creation_date": 1564601150, "answer_id": 57297676, "question_id": 57297131, "link": "https://stackoverflow.com/questions/57297131/required-output-is-66-6-but-i-am-getting-gibberish-as-posted-below-how-to-fix/57297676#57297676", "title": "Required output is 66.6 but I am getting gibberish (as posted below), how to fix this?", "body": "<p>You are creating new objects with uninitialized values in <code>display()</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    void display()\n    {\n        test t;   // &lt;- This is a new object with uninitialized members variables\n        sports s; // &lt;- This is a new object with uninitialized members variables\n        float sc = s.putscore(); // Replace with this-&gt;putscore() or simply putscore()\n        float ms = t.putmarks(); // Replace with this-&gt;putmarks() or simply putmarks()\n        total = sc + ms;\n        cout &lt;&lt;\"Total marks= \"&lt;&lt; total;\n    }\n</code></pre>\n\n<p>Multiple inheritance is almost never a good idea. Is your assignment really forcing you to do that?</p>\n"}], "owner": {"reputation": 21, "user_id": 11750997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qRui4es_6jE/AAAAAAAAAAI/AAAAAAAAJnA/x1p-kMTI8Xg/photo.jpg?sz=128", "display_name": "Soham Ray", "link": "https://stackoverflow.com/users/11750997/soham-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57297676, "answer_count": 1, "score": -1, "last_activity_date": 1564601150, "creation_date": 1564598689, "last_edit_date": 1564599412, "question_id": 57297131, "link": "https://stackoverflow.com/questions/57297131/required-output-is-66-6-but-i-am-getting-gibberish-as-posted-below-how-to-fix", "title": "Required output is 66.6 but I am getting gibberish (as posted below), how to fix this?", "body": "<p>To calculate total in void display, I need the values of part1marks, part2marks and score. Hence I have created return functions (This is how I have to do it as per my assignment). However, I am getting undesirable output as shown below. </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass student\n{\n    int rollno;\npublic:\n    void getnumber()\n    {\n        cout &lt;&lt; \"Enter roll number: \";\n        cin &gt;&gt; rollno;\n        cout &lt;&lt; endl;\n    }\n    int putnumber()\n    {\n        return rollno;\n    }\n};\nclass test : virtual public student\n{\n    float part1marks;\n    float part2marks;\npublic:\n    void getmarks()\n    {\n        cout &lt;&lt; \"Enter Marks(Parts 1 and 2): \";\n        cin &gt;&gt; part1marks &gt;&gt; part2marks;\n        cout &lt;&lt; endl;\n    }\n    float putmarks()\n    {\n        float marks = part1marks + part2marks;\n        return marks;\n    }\n};\nclass sports : virtual public student\n{\n    float score;\npublic:\n    void getscore()\n    {\n        cout &lt;&lt; \"Enter score: \";\n        cin &gt;&gt; score;\n        cout &lt;&lt; endl;\n    }\n    float putscore()\n    {\n        return score;\n    }\n };\nclass result : public test, public sports\n{\n    float total;\npublic:\n    void display()\n    {\n        test t;\n        sports s;\n        float sc = s.putscore();\n        float ms = t.putmarks();\n        total = sc + ms;\n        cout &lt;&lt;\"Total marks= \"&lt;&lt; total;\n    }\n\n};\nint main()\n{\n    result obj;\n    obj.getnumber();\n    obj.getmarks();\n    obj.getscore();\n    obj.display();\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Expected Output</p>\n\n<p>Enter roll number: 21</p>\n\n<p>Enter Marks(Parts 1 and 2): 22.2\n22.2</p>\n\n<p>Enter score: 22.2</p>\n\n<p>Total marks= 66.6 Press any key to continue . . .</p>\n\n<p>Actual Output</p>\n\n<p>Enter roll number: 21</p>\n\n<p>Enter Marks(Parts 1 and 2): 22.2\n22.2</p>\n\n<p>Enter score: 22.2</p>\n\n<p>Total marks= -3.22123e+08Press any key to continue . . .</p>\n"}, {"tags": ["c++", "c", "dll", "memory-leaks"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564598745, "post_id": 57297091, "comment_id": 101088356, "body": "Have you considered just using <a href=\"https://clang.llvm.org/docs/LeakSanitizer.html\" rel=\"nofollow noreferrer\">LeakSanitizer</a> rather than trying to hand-roll an inferior solution?"}, {"owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600024, "post_id": 57297091, "comment_id": 101088899, "body": "Wow, no I haven&#39;t considered using a Clang tool supported on Linux and OS X for my <i>Windows DLL</i>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600175, "post_id": 57297091, "comment_id": 101088946, "body": "The clang sanitizers can be used on Windows."}, {"owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564600369, "post_id": 57297091, "comment_id": 101089025, "body": "All I know is what I can read here: <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerLeakSanitizer\" rel=\"nofollow noreferrer\">github.com/google/sanitizers/wiki/AddressSanitizerLeakSaniti&zwnj;&#8203;zer</a> which is pretty explicit about what is supported.  Either way it would be a non trivial task to convert my existing project to new tooling."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564602612, "post_id": 57297091, "comment_id": 101089948, "body": "Just trying to help. As for supporting different tooling, that&#39;s usually a good idea regardless. Building with multiple compilers on multiple platforms tends to flush out lots of bugs :)"}, {"owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564604495, "post_id": 57297091, "comment_id": 101090618, "body": "I don&#39;t disagree but this code is 20+ years old, not well maintained and all about surfacing COM objects.  Oh, and it&#39;s mine now.  Sorry if I was snippy."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564604933, "post_id": 57297091, "comment_id": 101090779, "body": "No hard feelings. But seriously; the clang sanitizers <i>can</i> be used on Windows - I&#39;ve done so. And just making the code build with that toolchain (even if that&#39;s not what you ship) will probably help find bugs. There&#39;s also the <a href=\"https://docs.microsoft.com/en-us/windows-hardware/test/wpt/windows-performance-analyzer\" rel=\"nofollow noreferrer\">Windows Performance Analyzer</a> that you can use - it&#39;s pretty damn good at finding issues."}], "owner": {"reputation": 4286, "user_id": 1440105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QxCty.jpg?s=128&g=1", "display_name": "Dweeberly", "link": "https://stackoverflow.com/users/1440105/dweeberly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564598461, "creation_date": 1564598461, "question_id": 57297091, "link": "https://stackoverflow.com/questions/57297091/crtmemdumpallobjectssince-not-returning-expected-results", "title": "_CrtMemDumpAllObjectsSince not returning expected results", "body": "<p>I'm using <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/crtmemcheckpoint?view=vs-2019\" rel=\"nofollow noreferrer\">_CrtMemCheckpoint</a> and <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/crtmemdumpallobjectssince?view=vs-2019\" rel=\"nofollow noreferrer\">_CrtMemDumpAllObjectsSince</a> to track possible memory leaks in my dll.</p>\n\n<p>In DllMain when DLL_PROCESS_ATTACH is detected an init function is called which calls _CrtMemCheckpoint(&amp;startState) on the global _CrtMemState variable startState.  When DLL_PROCESS_DETACH is detected an exit function is called that calls _CrtMemDumpAllObjectsSince(&amp;startState).  This returns</p>\n\n<pre><code>ExitInstance()Dumping objects -&gt;\n{8706} normal block at 0x07088200, 8 bytes long.\n Data: &lt;p v     &gt; 70 FF 76 07 01 01 CD CD \n{8705} normal block at 0x07084D28, 40 bytes long.\n Data: &lt;                &gt; 00 00 00 10 FF FF FF FF FF FF FF FF 00 00 00 00 \n{4577} normal block at 0x070845F0, 40 bytes long.\n Data: &lt;dbV             &gt; 64 62 56 0F 01 00 00 00 FF FF FF FF FF FF FF FF \n{166} normal block at 0x028DD4B8, 40 bytes long.\n Data: &lt;dbV             &gt; 64 62 56 0F 01 00 00 00 FF FF FF FF FF FF FF FF \n{87} normal block at 0x02889BA8, 12 bytes long.\n Data: &lt; P          &gt; DC 50 90 02 00 00 00 00 01 00 00 00 \n</code></pre>\n\n<p>So far so good, except the last three entries (4577, 166 and 87) are also in startState.  I.E.  If I run <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/crtdumpmemoryleaks?view=vs-2019\" rel=\"nofollow noreferrer\">_CrtDumpMemoryLeaks()</a> in my Init function and in my Exit function those entries are in both lists.</p>\n\n<p>The <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/crtmemdumpallobjectssince?view=vs-2019\" rel=\"nofollow noreferrer\">documentation</a> says this:</p>\n\n<blockquote>\n  <p>_CrtMemDumpAllObjectsSince uses the value of the state parameter to determine where to initiate the dump operation. To begin dumping from\n  a specified heap state, the state parameter must be a pointer to a\n  _CrtMemState structure that has been filled in by _CrtMemCheckpoint before _CrtMemDumpAllObjectsSince was called.</p>\n</blockquote>\n\n<p>Which makes me believe that items tracked in startState would be excluded from the output.  At the end of the Init function where _CrtMemCheckpoint is called there have been about 4700 allocation calls.  Shouldn't _CrtMemDumpAllObjectsSince only dump objects allocated after that checkpoint call?</p>\n\n<p>What have I missed?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 5, "creation_date": 1564597782, "post_id": 57296899, "comment_id": 101087930, "body": "Why are you using <code>operator&lt;&lt;</code> directly like that? What are you trying to do?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1564597893, "post_id": 57296899, "comment_id": 101087977, "body": "@NicolBolas I suspect that they don&#39;t know what to do."}, {"owner": {"reputation": 473, "user_id": 8355696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0e39f22e8c126be22a6db9c08fb67a?s=128&d=identicon&r=PG&f=1", "display_name": "Pranjal Kaler", "link": "https://stackoverflow.com/users/8355696/pranjal-kaler"}, "edited": false, "score": 3, "creation_date": 1564597914, "post_id": 57296899, "comment_id": 101087989, "body": "I am trying to understand how the cascading of operators actually works"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1564597946, "post_id": 57296899, "comment_id": 101088006, "body": "Assuming you don&#39;t have some particular reason for using that form of operator&lt;&lt;, just use <code>cout &lt;&lt; str;</code> and you&#39;ll see the output you expect."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564597989, "post_id": 57296899, "comment_id": 101088023, "body": "Or you could try this <code>operator&lt;&lt;(out, str)</code>."}, {"owner": {"reputation": 473, "user_id": 8355696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0e39f22e8c126be22a6db9c08fb67a?s=128&d=identicon&r=PG&f=1", "display_name": "Pranjal Kaler", "link": "https://stackoverflow.com/users/8355696/pranjal-kaler"}, "edited": false, "score": 1, "creation_date": 1564598014, "post_id": 57296899, "comment_id": 101088034, "body": "i tried and it prints the string but my question is why it is printing some hexa values when it can print same result for other data types"}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564650707, "post_id": 57296899, "comment_id": 101103864, "body": "@john It&#39;s very valid and beneficial that OP found this weird behaviour when learning and asked a question about it. Not every question is a problem to be solved by a workaround, some are actually about understanding the issue at hand."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1564650811, "post_id": 57296899, "comment_id": 101103920, "body": "@Tom&#225;\u0161Zato Completely agree, and I was wrong in my first comment where I assumed that they didn&#39;t know what they were doing. As you can see below I answered the question and did my best to explain what was happening."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 16, "last_activity_date": 1564598154, "creation_date": 1564598154, "answer_id": 57297018, "question_id": 57296899, "link": "https://stackoverflow.com/questions/57296899/why-does-calling-cout-operatorconst-char-print-the-address-instead-of-the-c/57297018#57297018", "title": "Why does calling cout.operator&lt;&lt;(const char*) print the address instead of the character string?", "body": "<p>The problem is that for some types <code>operator&lt;&lt;</code> is overloaded as a member of <code>ostream</code> and for some types it is overloaded as a global function. In the case of <code>const char*</code> it's a global function, so if you want to call the operator function explicitly you must write</p>\n\n<pre><code>operator&lt;&lt;(cout, str);\n</code></pre>\n\n<p>but for integer types you must write</p>\n\n<pre><code>cout.operator&lt;&lt;(num);\n</code></pre>\n\n<p>What's happening in the code you posted is that the overload for <code>const void*</code> is being called, which is why you see hexadecimal numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 10, "creation_date": 1564598465, "post_id": 57297026, "comment_id": 101088226, "body": "Always use <code>cout &lt;&lt; X</code>, never use <code>cout.operator&lt;&lt;(X)</code> or <code>operator&lt;&lt;(cout, X)</code> directly (unless you have a REALLY GOOD reason to do so).  Let the compiler decide which one to call based on context and data type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564598617, "post_id": 57297026, "comment_id": 101088302, "body": "@RemyLebeau I&#39;ve removed the <code>operator&lt;&lt;(cout, X)</code> call.  As you said, they should just use the operator syntax."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 30, "last_activity_date": 1564600067, "last_edit_date": 1564600067, "creation_date": 1564598198, "answer_id": 57297026, "question_id": 57296899, "link": "https://stackoverflow.com/questions/57296899/why-does-calling-cout-operatorconst-char-print-the-address-instead-of-the-c/57297026#57297026", "title": "Why does calling cout.operator&lt;&lt;(const char*) print the address instead of the character string?", "body": "<p>When you do <code>cout.operator&lt;&lt;(str)</code> you call <code>cout</code>'s <code>operator &lt;&lt;</code> member function.  If we look at what <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"noreferrer\">member functions overloads</a> <code>cout</code> has we have</p>\n\n<pre><code>basic_ostream&amp; operator&lt;&lt;( short value );\nbasic_ostream&amp; operator&lt;&lt;( unsigned short value );\n\nbasic_ostream&amp; operator&lt;&lt;( int value );\nbasic_ostream&amp; operator&lt;&lt;( unsigned int value );\n\nbasic_ostream&amp; operator&lt;&lt;( long value );\nbasic_ostream&amp; operator&lt;&lt;( unsigned long value );\n\nbasic_ostream&amp; operator&lt;&lt;( long long value );\nbasic_ostream&amp; operator&lt;&lt;( unsigned long long value );\n\nbasic_ostream&amp; operator&lt;&lt;( float value );\nbasic_ostream&amp; operator&lt;&lt;( double value );\nbasic_ostream&amp; operator&lt;&lt;( long double value );\n\nbasic_ostream&amp; operator&lt;&lt;( bool value );\n\nbasic_ostream&amp; operator&lt;&lt;( const void* value );\n\nbasic_ostream&amp; operator&lt;&lt;( std::nullptr_t );\n\nbasic_ostream&amp; operator&lt;&lt;( std::basic_streambuf&lt;CharT, Traits&gt;* sb);\n\nbasic_ostream&amp; operator&lt;&lt;(\n    std::ios_base&amp; (*func)(std::ios_base&amp;) );\n\nbasic_ostream&amp; operator&lt;&lt;(\n    std::basic_ios&lt;CharT,Traits&gt;&amp; (*func)(std::basic_ios&lt;CharT,Traits&gt;&amp;) );\n\nbasic_ostream&amp; operator&lt;&lt;(\n    std::basic_ostream&lt;CharT,Traits&gt;&amp; (*func)(std::basic_ostream&lt;CharT,Traits&gt;&amp;) );\n</code></pre>\n\n<p>If you notice, there isn't one for a <code>const char*</code>, but there is one for a <code>const void*</code>.  So, your <code>const char*</code> is converted to a <code>const void*</code> and that version of the function prints the address held by the pointer.</p>\n\n<p>What you need to do is call the <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"noreferrer\">non member function overload</a> of <code>operator&lt;&lt;</code> and to do that you can use</p>\n\n<pre><code>cout &lt;&lt; str;\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 8355696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0e39f22e8c126be22a6db9c08fb67a?s=128&d=identicon&r=PG&f=1", "display_name": "Pranjal Kaler", "link": "https://stackoverflow.com/users/8355696/pranjal-kaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 57297026, "answer_count": 2, "score": 29, "last_activity_date": 1564605630, "creation_date": 1564597641, "last_edit_date": 1564605630, "question_id": 57296899, "link": "https://stackoverflow.com/questions/57296899/why-does-calling-cout-operatorconst-char-print-the-address-instead-of-the-c", "title": "Why does calling cout.operator&lt;&lt;(const char*) print the address instead of the character string?", "body": "<p>I was exploring the <code>ostream</code> class in C++. I am stuck on the strange output of <code>cout</code> on string and integer data types.</p>\n\n<p>When passing an integer or floating-point value, the output is exactly what I pass. For example <code>cout.operator&lt;&lt;(10);</code> prints <code>10</code>. But when passing a string as an argument it is printing some hexadecimal values:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n        const char* str = \"aia\";\n        cout.operator&lt;&lt;(str);\n        return 0;\n}\n</code></pre>\n\n<p>Output: <code>0x4007e0</code>.</p>\n"}, {"tags": ["c++", "linux", "opencv", "video-capture"], "comments": [{"owner": {"reputation": 1, "user_id": 11865502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f18bc4a82e59bb438d93cbe989ba1fe?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mosab", "link": "https://stackoverflow.com/users/11865502/m-mosab"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564597660, "post_id": 57296813, "comment_id": 101087869, "body": "No, I am using Linux to build application running on Xilinx Zedboard. The code is combiled with -O2."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1564600568, "post_id": 57296813, "comment_id": 101089116, "body": "Even a 640x480 RGB image is just about a megabyte. So 500 fps would just about saturate the very fastest USB3 connection and require 5x the bandwidth of a Gigabit Ethernet... relatively few cameras exceed 30 fps and even fewer 60 fps."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11865502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f18bc4a82e59bb438d93cbe989ba1fe?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mosab", "link": "https://stackoverflow.com/users/11865502/m-mosab"}, "edited": false, "score": 0, "creation_date": 1564649991, "post_id": 57297208, "comment_id": 101103492, "body": "Could you tell me how to measure it?"}], "tags": [], "owner": {"reputation": 729, "user_id": 11016652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uk4ey.png?s=128&g=1", "display_name": "somega", "link": "https://stackoverflow.com/users/11016652/somega"}, "is_accepted": false, "score": 0, "last_activity_date": 1564653312, "last_edit_date": 1564653312, "creation_date": 1564599041, "answer_id": 57297208, "question_id": 57296813, "link": "https://stackoverflow.com/questions/57296813/delay-in-capturing-camera-frames-using-opencv/57297208#57297208", "title": "Delay in capturing camera frames using openCV", "body": "<p>You have to measure the difference to when you took the last image and not how long it takes to save the image in your variable.</p>\n\n<p>pseudocode:</p>\n\n<pre><code>time = -1;\nwhile (true)\n{\n    new_time = now();\n    if (time != -1)\n    {\n        time_diff = new_time - time;\n        if (time_diff == 0) // avoid null pointer exception\n            cout &lt;&lt; \"infinite FPS\";\n        else\n            cout &lt;&lt; 1000000.d / double(time_diff) &lt;&lt; \"FPS\";\n    }\n    time = new_time;\n    ...\n}\n</code></pre>\n\n<p>Another improvements would be:</p>\n\n<ol>\n<li>print the FPS every second instead of every time you took a photo.</li>\n<li>use the period property of the clock instead of 1000000.</li>\n<li>I think you want \"== 27\" and not \">= 27\"</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 11865502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f18bc4a82e59bb438d93cbe989ba1fe?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mosab", "link": "https://stackoverflow.com/users/11865502/m-mosab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564653312, "creation_date": 1564597265, "last_edit_date": 1564597976, "question_id": 57296813, "link": "https://stackoverflow.com/questions/57296813/delay-in-capturing-camera-frames-using-opencv", "title": "Delay in capturing camera frames using openCV", "body": "<p>I am writing a program to capture camera frames using opencv 2.49.</p>\n\n<p>My problem is that the camera cap capture up to 500 FPS. But after the 5th frame capturing frames drop to 40 FPS and some times go beck to 500 FPS.</p>\n\n<p>Could any one has an idea why is this happening? how I can fix capturing frames 500 FPS.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lyx2N.png\" rel=\"nofollow noreferrer\">I have attached the output FPS</a></p>\n\n<pre><code>while(true)\n{\n    cout &lt;&lt; \"\\nStart while loop:\" &lt;&lt; endl;\n    auto t1 = chrono::high_resolution_clock::now(); \n\n\n    Mat curFrame;\n    cap &gt;&gt; curFrame;\n    if( curFrame.empty() ) break; // end of video stream\n\n    auto t2 = chrono::high_resolution_clock::now();     \n\n    auto cap_time = chrono::duration_cast&lt;chrono::microseconds&gt;( t2 - t1 ).count();\n    cout &lt;&lt; \"cap_time :\" &lt;&lt; cap_time &lt;&lt; \" microseconds, \" &lt;&lt; 1000000/(float)cap_time &lt;&lt; \" FPS\" &lt;&lt; endl;\n\n    imshow(\"Original\", curFrame);\n\n    if (waitKey(1) &gt;= 27) \n    {\n        cout &lt;&lt; \"esc key is pressed by user\" &lt;&lt; endl;\n        break;\n    }   \n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qpen"], "comments": [{"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 3, "creation_date": 1564602788, "post_id": 57296497, "comment_id": 101090016, "body": "Possibly draw it three times with different patterns so that the color of the first line shows through the gaps of the second and third, and the second color shows through the gaps of the third. It&#39;s hokey, but I think it could work depending on your actual needs."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5343882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8553f45e98cc20de5f3f8aba33ebf12e?s=128&d=identicon&r=PG&f=1", "display_name": "basania", "link": "https://stackoverflow.com/users/5343882/basania"}, "edited": false, "score": 0, "creation_date": 1564658083, "post_id": 57305355, "comment_id": 101107912, "body": "Thank you for a great answer and a working example! Much appreciated."}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 3, "last_activity_date": 1564651107, "last_edit_date": 1564651107, "creation_date": 1564650035, "answer_id": 57305355, "question_id": 57296497, "link": "https://stackoverflow.com/questions/57296497/multicolored-dashed-line-with-a-dashed-pattern-using-qpen/57305355#57305355", "title": "Multicolored dashed line with a dashed pattern using QPen", "body": "<p>Developing the idea of <a href=\"https://stackoverflow.com/questions/57296497/multicolored-dashed-line-with-a-dashed-pattern-using-qpen/57305355#comment101090016_57296497\">@goug</a>, you can do something like:</p>\n\n<pre><code>void drawWithManualDashedLine(QPainter&amp; painter, const QLine&amp; line) {\n  const int scale = 10;\n\n  QPen pen;\n  pen.setWidth(3);\n\n  pen.setColor(Qt::red);\n  pen.setDashPattern({ 0.0, 1.0 * scale, 1.0 * scale, 7.0 * scale });\n  painter.setPen(pen);\n  painter.drawLine(line);\n\n  pen.setColor(Qt::green);\n  pen.setDashPattern({ 0.0, 4.0 * scale, 1.0 * scale, 4.0 * scale});\n  painter.setPen(pen);\n  painter.drawLine(line);\n\n  pen.setColor(Qt::blue);\n  pen.setDashPattern({ 0.0, 7.0 * scale, 1.0 * scale, 1.0 *scale });\n  painter.setPen(pen);\n  painter.drawLine(line);    \n}\n</code></pre>\n\n<p>Now, a more generic solution for <code>n</code> colors (I know it has too many parameters, it's just an idea). The trick is done creating a single dash-pattern, and <em>moving</em> it using <a href=\"https://doc.qt.io/qt-5/qpen.html#setDashOffset\" rel=\"nofollow noreferrer\"><code>QPen::setDashOffset</code></a> for each color:</p>\n\n<pre><code>void drawMultiColorDashedLine(QPainter&amp; painter, const QLine&amp; line,\n    int length, int gap, int width,\n    const QList&lt;QColor&gt;&amp; colors, bool startWithGap = false) {\n  const int n = colors.count();\n  const int initialGap = startWithGap ? gap : 0;\n\n  QPen pen;\n  pen.setWidth(width);\n  pen.setDashPattern({ (qreal)length, (qreal)(gap * n + length * (n - 1)) });\n  for (int ii = 0; ii &lt; n; ++ii) {\n    pen.setColor(colors[ii]);\n    pen.setDashOffset(-ii * (length + gap) - initialGap);\n    painter.setPen(pen);\n    painter.drawLine(line);\n  }\n}\n</code></pre>\n\n<p>So they can be called:</p>\n\n<pre><code>void Widget::paintEvent(QPaintEvent*)\n{\n  QPainter painter(this);\n\n  const QLine line1(0, height() / 3, width(), height() / 3);\n  drawMultiColorDashedLine(painter, line1, 10, 20, 3, { Qt::blue, Qt::yellow }, true);\n\n  const QLine line2(0, height() / 2, width(), height() / 2);\n  drawWithManualDashedLine(painter, line2);\n\n  const QLine line3(0, 2 * height() / 3, width(), 2 * height() / 3);\n  drawMultiColorDashedLine(painter, line3, 10, 20, 3, { Qt::red, Qt::black, Qt::blue, Qt::magenta }, false);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Zb2pA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zb2pA.png\" alt=\"enter image description here\"></a></p>\n\n<p>The full working example is available at <a href=\"https://github.com/cbuchart/stackoverflow/tree/master/57296497-multicolored-dashed-line\" rel=\"nofollow noreferrer\">GitHub</a></p>\n"}], "owner": {"reputation": 105, "user_id": 5343882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8553f45e98cc20de5f3f8aba33ebf12e?s=128&d=identicon&r=PG&f=1", "display_name": "basania", "link": "https://stackoverflow.com/users/5343882/basania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 57305355, "answer_count": 1, "score": 1, "last_activity_date": 1564651107, "creation_date": 1564595800, "last_edit_date": 1564650349, "question_id": 57296497, "link": "https://stackoverflow.com/questions/57296497/multicolored-dashed-line-with-a-dashed-pattern-using-qpen", "title": "Multicolored dashed line with a dashed pattern using QPen", "body": "<p>I need to draw a multicoloured line with <code>QPen</code> that may consist of up to three colours within a dashed pattern.</p>\n\n<p>Different colours should be on one line.</p>\n\n<p>Any suggestions on how I can achieve it?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1564593835, "post_id": 57296042, "comment_id": 101086216, "body": "Did you <code>#include &lt;cctype&gt;</code>? In any case, you should read <a href=\"https://stackoverflow.com/questions/313970/how-to-convert-stdstring-to-lower-case?rq=1\" title=\"how to convert stdstring to lower case\">stackoverflow.com/questions/313970/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564594031, "post_id": 57296042, "comment_id": 101086296, "body": "It&#39;s <a href=\"https://en.cppreference.com/w/cpp/string/byte/toupper\" rel=\"nofollow noreferrer\">std::toupper</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1564594353, "post_id": 57296042, "comment_id": 101086438, "body": "Search the internet for &quot;c++ transform string toupper&quot;."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1564594447, "post_id": 57296042, "comment_id": 101086483, "body": "did you have a look at the ASCII table and see that this might be a simple matter of addition...or subtraction..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1564595037, "post_id": 57296042, "comment_id": 101086742, "body": "@Drt I recommend you read <a href=\"https://stackoverflow.com/a/24063783/9528746\">this answer</a>. Because ASCII is not cutting it in this day and age."}], "owner": {"reputation": 1, "user_id": 11865229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d4b8add4d00bf6385292f1b1d6610d3?s=128&d=identicon&r=PG&f=1", "display_name": "User12920493", "link": "https://stackoverflow.com/users/11865229/user12920493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1564594153, "answer_count": 0, "score": 0, "last_activity_date": 1564594209, "creation_date": 1564593619, "question_id": 57296042, "link": "https://stackoverflow.com/questions/57296042/how-exactly-can-i-convert-an-inputted-string-to-uppercase-in-c", "closed_reason": "Duplicate", "title": "How exactly can I convert an inputted string to uppercase in c++?", "body": "<p>So I'm making a program that needs a function that converts lowercase letters to uppercase. I'm looking for something similar to the function in python (.upper()).</p>\n\n<p>From what I've seen on this website (<a href=\"http://www.cplusplus.com/reference/cctype/toupper/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cctype/toupper/</a>), I tried to use the function \"toupper\".</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Help() {\n    string explain;\n    cout &lt;&lt; \"What do you need help with? (Map, Game)\" &lt;&lt; endl;\n    cin &gt;&gt; explain;\n    if (toupper(explain) == \"MAP\") {\n    cout &lt;&lt; \"Placeholder\" &lt;&lt; endl;\n    ChooseLevel();\n    }\n    else if (toupper(explain) == \"GAME\") {\n    cout &lt;&lt; \"Placeholder\" &lt;&lt; endl;\n    ChooseLevel();  \n    }\n    else {\n    cout &lt;&lt; \"Enter Map, or Game\";\n    Help();\n    }\n}\n</code></pre>\n\n<p>ChooseLevel() is defined, so that's not an issue.</p>\n\n<p>This is the error I got after running the code above:</p>\n\n<pre><code>main.cpp: In function \u2018void Help()\u2019:\nmain.cpp:21:21: error: no matching function for call to \u2018toupper(std::string&amp;)\u2019\n  if (toupper(explain) == \"MAP\") {\n                     ^\n</code></pre>\n"}, {"tags": ["c++", "templates", "rcpp", "rcpparmadillo"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1564603317, "post_id": 57296033, "comment_id": 101090196, "body": "First thing I have to say is that the use of a macro <code>#define DISPATCH_DATA_TYPE(CALL) {</code> looks horrible - why would you do that rather than a proper (possibly <code>constexpr</code>) function? Second; <code>case 1: CALL(unsigned short)                               \\     case 2: CALL(unsigned int)                                 \\     case 3: CALL(unsigned long)</code> etc, are these all really supposed to fall through to the next <code>case</code>? That just looks wrong - I would have expected some <code>break</code> statements in there.."}, {"owner": {"reputation": 532, "user_id": 3855417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHFgn.png?s=128&g=1", "display_name": "nbenn", "link": "https://stackoverflow.com/users/3855417/nbenn"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564640020, "post_id": 57296033, "comment_id": 101098568, "body": "@JesperJuhl thanks for taking an interest in my question. I see you don&#39;t like the macro approach. As to why I&#39;m doing this, I&#39;m afraid I don&#39;t have a good answer: I saw this somewhere and thought it&#39;d solve my problem in a reasonable way. Is it more of an aesthetic distaste, or is there something objectively bad about this? If you think this should be done differently, would you be so kind and sketch an alternative solution? Are the missing <code>break</code>s a problem? The <code>CALL</code>s contain <code>return</code> statements."}], "answers": [{"tags": [], "owner": {"reputation": 532, "user_id": 3855417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHFgn.png?s=128&g=1", "display_name": "nbenn", "link": "https://stackoverflow.com/users/3855417/nbenn"}, "is_accepted": true, "score": 1, "last_activity_date": 1565548921, "last_edit_date": 1565548921, "creation_date": 1565546240, "answer_id": 57452321, "question_id": 57296033, "link": "https://stackoverflow.com/questions/57296033/how-to-deal-with-an-rcppxptr-that-may-have-one-of-several-types/57452321#57452321", "title": "How to deal with an Rcpp::XPtr that may have one of several types", "body": "<p>The best non-macro approach I could come up with so far (using <code>boost::mp11</code>) is the following:</p>\n\n<p>Key parts:</p>\n\n<ul>\n<li>a type list (<code>mp11::mp_list</code>, called <code>types</code>) defining my set of types</li>\n<li>helper metafunctions <code>num_type_from_i</code> and <code>i_form_num_type</code> to query type given an index/index given a type</li>\n<li>a templated struct <code>dispatch_impl</code>, used recursively, providing iteration over the type list</li>\n<li>a specialized version of <code>dispatch_impl</code> for terminating the recursion</li>\n<li>a convenience function <code>dispatch_type()</code> calling <code>dispatch_impl</code> and defining the list length/max recursion depth</li>\n<li>example function objects <code>MatInit</code> and <code>Length</code> alongside their R interfaces <code>mat_init()</code> and <code>length()</code></li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// [[Rcpp::depends(RcppArmadillo)]]\n// [[Rcpp::plugins(cpp11)]]\n\n#include &lt;RcppArmadillo.h&gt;\n\n#include &lt;boost/mp11/list.hpp&gt;\n#include &lt;boost/mp11/algorithm.hpp&gt;\n\nnamespace mp11 = boost::mp11;\n\nusing types = mp11::mp_list&lt;int, float, double&gt;;\n\ntemplate &lt;std::size_t I&gt;\nusing num_type_from_i = mp11::mp_at_c&lt;types, I&gt;;\n\ntemplate &lt;typename T&gt;\nusing i_form_num_type = mp11::mp_find&lt;types, T&gt;;\n\ntemplate &lt;typename T, std::size_t N&gt; struct dispatch_impl\n{\n  template &lt;std::size_t K, template&lt;typename&gt; class Fn, typename ...Ar&gt;\n  static auto call(std::size_t i, Ar&amp;&amp;... rg) -&gt;\n      decltype(Fn&lt;mp11::mp_at_c&lt;T, 0&gt;&gt;()(std::forward&lt;Ar&gt;(rg)...))\n  {\n    if (i == 0)\n    {\n      return Fn&lt;mp11::mp_at_c&lt;T, K&gt;&gt;()(std::forward&lt;Ar&gt;(rg)...);\n    } \n    else\n    {\n      return dispatch_impl&lt;T, N - 1&gt;::template call&lt;K + 1, Fn&gt;(i - 1,\n          std::forward&lt;Ar&gt;(rg)...);\n    }\n  }\n};\n\ntemplate &lt;typename T&gt; struct dispatch_impl&lt;T, 1&gt;\n{\n  template &lt;std::size_t K, template&lt;typename&gt; class Fn, typename ...Ar&gt;\n  static auto call(std::size_t i, Ar&amp;&amp;... rg) -&gt;\n      decltype(Fn&lt;mp11::mp_at_c&lt;T, 0&gt;&gt;()(std::forward&lt;Ar&gt;(rg)...))\n  {\n    if (i == 0)\n    {\n      return Fn&lt;mp11::mp_at_c&lt;T, K&gt;&gt;()(std::forward&lt;Ar&gt;(rg)...);\n    }\n    else\n    {\n      throw std::runtime_error(\"Unsupported data type.\");\n    }\n  }\n};\n\ntemplate &lt;template&lt;typename&gt; class Fn, typename ...Ar&gt;\nauto dispatch_type(std::size_t type, Ar&amp;&amp;... rg) -&gt;\n    decltype(Fn&lt;num_type_from_i&lt;0&gt;&gt;()(std::forward&lt;Ar&gt;(rg)...))\n{\n  using n_types = mp11::mp_size&lt;types&gt;;\n  return dispatch_impl&lt;types, std::size_t{n_types::value}&gt;::template call&lt;0,\n      Fn&gt;(type, std::forward&lt;Ar&gt;(rg)...);\n}\n\ntemplate &lt;typename T&gt;\nstruct MatInit\n{\n  SEXP operator()(arma::uword n_rows, arma::uword n_cols)\n  {\n    auto res = new arma::Mat&lt;T&gt;(n_rows, n_cols);\n    auto ind = std::size_t{i_form_num_type&lt;T&gt;::value};\n    return Rcpp::XPtr&lt;arma::Mat&lt;T&gt;&gt;(res, true, Rcpp::wrap(ind));\n  }\n};\n\n// [[Rcpp::export]]\nSEXP mat_init(arma::uword n_rows, arma::uword n_cols, std::size_t data_type)\n{\n  return dispatch_type&lt;MatInit&gt;(data_type, n_rows, n_cols);\n}\n\ntemplate &lt;typename T&gt;\nstruct Length\n{\n  arma::uword operator()(SEXP x)\n  {\n    return Rcpp::XPtr&lt;arma::Mat&lt;T&gt;&gt;(x)-&gt;n_elem;\n  }\n};\n\n// [[Rcpp::export]]\narma::uword length(SEXP x)\n{\n  std::size_t type = Rcpp::as&lt;std::size_t&gt;(R_ExternalPtrTag(x));\n  return dispatch_type&lt;Length&gt;(type, x);\n}\n</code></pre>\n\n<p>This way the list of types can easily be modified and apart from requiring templated function objects instead of function templates, implementation of functions such as <code>length()</code> is fairly succinct.</p>\n\n<p>Furthermore, I don't have to pass the data type index between R and C, but can store the index within the external pointer structure.</p>\n\n<p>If anyone sees potential issues, I'd be keen on hearing from them.</p>\n"}], "owner": {"reputation": 532, "user_id": 3855417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHFgn.png?s=128&g=1", "display_name": "nbenn", "link": "https://stackoverflow.com/users/3855417/nbenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 57452321, "answer_count": 1, "score": 1, "last_activity_date": 1565548921, "creation_date": 1564593567, "last_edit_date": 1565545613, "question_id": 57296033, "link": "https://stackoverflow.com/questions/57296033/how-to-deal-with-an-rcppxptr-that-may-have-one-of-several-types", "title": "How to deal with an Rcpp::XPtr that may have one of several types", "body": "<p>I'm in the situation where I have an <code>Rcpp::XPtr</code> to an Armadillo object (e.g. <code>arma::Mat</code>, which may be a matrix of one of the supported data types). Now I'd like to write a function that queries the number of elements. The best I could come up with so far is the following (inspired by <a href=\"https://github.com/privefl/bigstatsr/blob/272951f4b74c2d41fb442eb8ca2f33fe949d1abc/inst/include/bigstatsr/types.h#L6\" rel=\"nofollow noreferrer\">bigstatsr</a>):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define DISPATCH_DATA_TYPE(CALL)                               \\\n{                                                              \\\n  switch (data_type)                                           \\\n  {                                                            \\\n    case 1: CALL(unsigned short)                               \\\n    case 2: CALL(unsigned int)                                 \\\n    case 3: CALL(unsigned long)                                \\\n    case 4: CALL(short)                                        \\\n    case 5: CALL(int)                                          \\\n    case 6: CALL(long)                                         \\\n    case 7: CALL(float)                                        \\\n    case 8: CALL(double)                                       \\\n    default: throw Rcpp::exception(\"Unsupported data type.\");  \\\n  }                                                            \\\n}\n\ntemplate &lt;typename T&gt;\narma::uword mat_length(SEXP mat)\n{\n  Rcpp::XPtr&lt; arma::Mat&lt;T&gt; &gt; p(mat);\n  return p-&gt;n_elem;\n}\n\n#define MAT_LENGTH(TYPE) return mat_length&lt;TYPE&gt;(mat);\n\n// [[Rcpp::export]]\narma::uword mat_length(SEXP mat, int data_type)\n{\n  DISPATCH_DATA_TYPE(MAT_LENGTH)\n}\n\n</code></pre>\n\n<p>Is there a better way of doing this? I'm using this pattern for quite a few functions and the verbosity is becoming a problem. Ideally I'd have a single but concise function, like (doesn't work of course)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>arma::uword mat_length(SEXP mat)\n{\n  Rcpp::XPtr&lt;arma::Mat&gt; p(mat);\n  return p-&gt;n_elem;\n}\n</code></pre>\n\n<p>instead of two functions + a macro for every single instance where I pass an <code>XPtr</code> like that from R to C.</p>\n\n<p>Bonus question: is there anything obviously wrong with the macro-based approach? Is this somehow inefficient or could lead to problems down the line?</p>\n\n<p>To create a reproducible example, add</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// [[Rcpp::depends(RcppArmadillo)]]\n#include &lt;RcppArmadillo.h&gt;\n\n// [[Rcpp::export]]\nSEXP setup_mat(arma::uword n_rows, arma::uword n_cols)\n{\n  arma::mat* res = new arma::mat(n_rows, n_cols);\n  return Rcpp::XPtr&lt;arma::mat&gt;(res);\n}\n</code></pre>\n\n<p>and run <code>Rcpp::sourceCpp()</code> on the file in R.</p>\n"}, {"tags": ["c++", "gmp", "bignum"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564594101, "post_id": 57296031, "comment_id": 101086329, "body": "I&#39;m pretty sure you don&#39;t. I mean, how do you check that an <code>int</code> is initialized for example?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1564594541, "post_id": 57296031, "comment_id": 101086528, "body": "Why are you passing a pointer to <code>mpz_t</code>, by the way? <code>mpz_t</code> is a reference type."}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 2, "creation_date": 1564594641, "post_id": 57296031, "comment_id": 101086566, "body": "Are you able to use the C++ interface?  <a href=\"https://gmplib.org/manual/C_002b_002b-Interface-General.html\" rel=\"nofollow noreferrer\">gmplib.org/manual/C_002b_002b-Interface-General.html</a>  Why are you using the C interface?"}, {"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "reply_to_user": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 0, "creation_date": 1564594889, "post_id": 57296031, "comment_id": 101086686, "body": "Thanks for your suggestion @John but I&#39;m making some changes in code where c++ interface is not implemented"}, {"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564594951, "post_id": 57296031, "comment_id": 101086714, "body": "@melpomene great, so I think I just can pass mpz_t isn&#39;t it? When I try to return an mpz_t, the compiler says function can&#39;t return an array"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1564595300, "post_id": 57296031, "comment_id": 101086868, "body": "Indeed, <code>mpz_t</code> is an array type. But array parameters decay to pointers."}, {"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "edited": false, "score": 0, "creation_date": 1564595585, "post_id": 57296031, "comment_id": 101086983, "body": "Sure. You can pass mpz_t as argument but the library is not designed to return values. Instead, values need to be stored on output arguments. Doc: <a href=\"https://gmplib.org/manual/Parameter-Conventions.html\" rel=\"nofollow noreferrer\">gmplib.org/manual/Parameter-Conventions.html</a>"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1564596812, "post_id": 57296031, "comment_id": 101087499, "body": "It&#39;s impossible to check if a POD type has been initialised."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1565802677, "post_id": 57296031, "comment_id": 101467957, "body": "If you insist on C++, you need to use <i>proper</i> classes defined in <code>&lt;gmpxx.h&gt;</code> - particularly the <code>mpz_class</code>, rather than <code>mpz_t</code> which is a C struct with no initialization / scope management whatsoever."}], "answers": [{"comments": [{"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "edited": false, "score": 0, "creation_date": 1564594409, "post_id": 57296191, "comment_id": 101086464, "body": "In fact I&#39;m checking if the pointer _amount is not NULL, but now I&#39;m asking for the content of the pointer."}], "tags": [], "owner": {"reputation": 81, "user_id": 6924642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8c9e3694923734807c12cd23945823?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan Aslam", "link": "https://stackoverflow.com/users/6924642/arslan-aslam"}, "is_accepted": false, "score": -3, "last_activity_date": 1564594330, "creation_date": 1564594330, "answer_id": 57296191, "question_id": 57296031, "link": "https://stackoverflow.com/questions/57296031/how-to-check-if-mpz-t-number-is-initialized-using-gmp/57296191#57296191", "title": "How to check if mpz_t number is initialized using GMP?", "body": "<p>As _amount is Pointer so you could check for null or void to make sure it is initialize or not.</p>\n\n<p>Thanks</p>\n"}, {"comments": [{"owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "edited": false, "score": 0, "creation_date": 1566233460, "post_id": 57499076, "comment_id": 101583574, "body": "Thanks for your complete answer @Brett. Why did you use mpz_sgn(amount) as exit condition?  The expected number can be zero. Anyway, I&#39;m not able to change the code to use c++ interface right now. Which kind of bugs are we leaving with your proposed code?"}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": true, "score": 2, "last_activity_date": 1591779019, "last_edit_date": 1591779019, "creation_date": 1565802096, "answer_id": 57499076, "question_id": 57296031, "link": "https://stackoverflow.com/questions/57296031/how-to-check-if-mpz-t-number-is-initialized-using-gmp/57499076#57499076", "title": "How to check if mpz_t number is initialized using GMP?", "body": "<p>This is bad practice in C - end of story. You <em>don't</em> check that <code>_amount</code> has been initialized. The GMP library is highly optimized, and ensuring an <code>mpz_t</code> object is correctly initialized is the only correct approach. So an <code>mpz_t</code> object might <em>look</em> initialized, but unless <code>mpz_init(_amount)</code> has been used, the fields might be uninitialized garbage.</p>\n\n<p>It doesn't matter if <code>_amount</code> has already been set. Look at <code>mpz/set.c</code> :</p>\n\n<pre><code>void\nmpz_set (mpz_ptr w, mpz_srcptr u)\n{\n  mp_ptr wp, up;\n  mp_size_t usize, size;\n\n  usize = SIZ(u);\n  size = ABS (usize);\n\n  wp = MPZ_REALLOC (w, size);\n\n  up = PTR(u);\n\n  MPN_COPY (wp, up, size);\n  SIZ(w) = usize;\n}\n</code></pre>\n\n<p>Clearly, if the fields of <code>mpz_t</code> (see: <code>gmp-h.in</code>) are uninitialized, they <em>could</em> be garbage. <code>mpz_set</code> could perform <code>realloc</code> on contiguous memory that has not been allocated. If you're lucky, that's a crash. If not, the program continues in an undefined state.</p>\n\n<p>It might be useful to think of <code>mpz_t</code> as 'C objects'. They are not valid (and cannot be used correctly) until initialized. I would also stress that when it comes to the requirements of GMP (multiple-precision arithmetic), the 'overhead' of initializing a variable (e.g., to zero) is absolutely negligible.</p>\n\n<p>So let's assume <code>_amount</code> has been correctly initialized:</p>\n\n<hr>\n\n<pre><code>mpz_init(_amount); /* correctly sets mpz_t and assigns (0). */\n\n/* (maybe `_amount` isn't (0)... that's OK too) */\n\nvoid f (mpz_t *_amount)\n{\n    mpz_t amount;\n    mpz_init(amount);\n\n    /* unless using the GMP C++ interface, there's no definition\n     * for the (!) operator. However `mpz_sgn` can be used here: */\n\n    if (mpz_sgn(_amount) == 0) /* (_amount == 0 : exit condition?) */\n    {\n        mpz_clear(_amount); /* free space occupied by (_amount) */\n\n        /* NOTE: this is NOT C++ with object unwinding! (amount) will\n         * potentially leak resources! */\n\n        mpz_clear(amount);\n        throw std::bad_alloc {}; /* no leaks; deallocated storage. */\n    }\n\n    /* since (amount) will need to be deallocated, and we don't want\n     * to deal with assignment errors - we simply 'swap' contents. */\n\n    mpz_swap(_amount, amount); mpz_clear(amount);\n}\n</code></pre>\n\n<hr>\n\n<p>I feel you are mixing paradigms here. The use of <code>throw</code> in what is essentially C code forces you to manually clean up, and <code>mpz_t</code> is <em>not</em> a C++ object that 'constructs' to a default, or frees all resources as it destructs / passes out of scope.</p>\n\n<p>You might find the <a href=\"https://gmplib.org/manual/C_002b_002b-Class-Interface.html#C_002b_002b-Class-Interface\" rel=\"nofollow noreferrer\">GMP C++ interface</a> more appropriate for prototyping your code. <code>mpz_class</code> acts as a C++ class, which initializes when instanced, and calls it's destructor at the end of its scope.</p>\n\n<p>Right now you are mixing C/C++ incorrectly, and leaving yourself vulnerable to a lot of bugs, some of which may not cause an immediate crash - and these can be the worst to pin down...</p>\n"}], "owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 1, "accepted_answer_id": 57499076, "answer_count": 2, "score": 2, "last_activity_date": 1591779019, "creation_date": 1564593553, "question_id": 57296031, "link": "https://stackoverflow.com/questions/57296031/how-to-check-if-mpz-t-number-is-initialized-using-gmp", "title": "How to check if mpz_t number is initialized using GMP?", "body": "<p>Using GMP library in c++. I have a function that receives a pointer to a mpz_t number and sets another gmp_z number from that. I need a way to check if *_amount has been initialized before.</p>\n\n<pre><code>void f(mpz_t* _amount)\n{\n    mpz_t amount;\n    mpz_init(amount);\n\n    if(!_amount){\n        throw std::bad_alloc();\n    }\n\n    mpz_set(amount, *_amount);\n}\n</code></pre>\n\n<p>How can I check if _amount has been initialized previously?</p>\n"}, {"tags": ["c++", "cmake", "cmake-format"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1564593514, "post_id": 57295914, "comment_id": 101086106, "body": "Just pass proper <code>-DCMAKE_INSTALL_PREFIX=&lt;...&gt;</code> option to <code>cmake</code>."}, {"owner": {"reputation": 299, "user_id": 6791381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3ntS.png?s=128&g=1", "display_name": "dan9er", "link": "https://stackoverflow.com/users/6791381/dan9er"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564610812, "post_id": 57295914, "comment_id": 101092696, "body": "@tsyvarev What do you mean by &quot;proper&quot;?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1564611629, "post_id": 57295914, "comment_id": 101092891, "body": "Value of <code>CMAKE_INSTALL_PREFIX</code> means <b>installation prefix</b> of the project. So libraries are usually installed under <code>lib&#47;</code> subdirectory of that prefix, headers - under <code>include&#47;</code> subdirectory and so on."}, {"owner": {"reputation": 299, "user_id": 6791381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3ntS.png?s=128&g=1", "display_name": "dan9er", "link": "https://stackoverflow.com/users/6791381/dan9er"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564612361, "post_id": 57295914, "comment_id": 101093051, "body": "So set <code>CMAKE_INSTALL_PREFIX=~&#47;Projects&#47;CppThing&#47;lib&#47;Magick++</code> or something? (PS remember to post as actual answer, you deserve rep)"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1564616326, "post_id": 57295914, "comment_id": 101093828, "body": "Yes, you may specify a user&#39;s home directory or its subdirectory as an installation prefix. (I am not sure, but it is better to avoid <code>~</code> in the <code>CMAKE_INSTALL_PREFIX</code> variable, because it may be expanded incorrectly sometimes. You may use <code>$HOME</code> instead, which is expanded immediately). Not sure that I want a reputation for a question which is so easily googled..."}], "owner": {"reputation": 299, "user_id": 6791381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r3ntS.png?s=128&g=1", "display_name": "dan9er", "link": "https://stackoverflow.com/users/6791381/dan9er"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564592994, "creation_date": 1564592994, "question_id": 57295914, "link": "https://stackoverflow.com/questions/57295914/how-do-i-compile-a-library-into-a-lib-folder", "title": "How do I compile a library into a lib/ folder?", "body": "<p>This is my first time using CMake as a developer, and I want to compile some libraries for my project into a lib/ folder.</p>\n\n<p>I'm on Ubuntu 18.04 LTS and running CMake from the command line.</p>\n\n<p>There's 2 libraries I wish to use:</p>\n\n<ul>\n<li>Magick++</li>\n<li><a href=\"https://github.com/ljfa-ag/libnbtplusplus\" rel=\"nofollow noreferrer\">https://github.com/ljfa-ag/libnbtplusplus</a></li>\n</ul>\n\n<p>(I'm also using TCLAP but that's implemented entirely in headers.)</p>\n\n<p>I know about and am using the standard folder layout (<code>bin/</code>, <code>build/</code>, <code>include/</code>, <code>src/</code>, etc).</p>\n\n<p>The libraries (especially libnbt++) are specific for this project and I don't want to install them globally. How do I compile them into my <code>lib/</code> folder?</p>\n"}, {"tags": ["c++", "arduino", "mqtt", "esp32"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1564593749, "post_id": 57295836, "comment_id": 101086190, "body": "Protip: C doesn&#39;t have constructors."}, {"owner": {"reputation": 370, "user_id": 719809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb43066f8b2177c9af726360458aa19b?s=128&d=identicon&r=PG", "display_name": "mzimmers", "link": "https://stackoverflow.com/users/719809/mzimmers"}, "edited": false, "score": 0, "creation_date": 1564595857, "post_id": 57295836, "comment_id": 101087105, "body": "It looks like a type mismatch. Can you show the code at and around Master:189?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1564599685, "post_id": 57295836, "comment_id": 101088766, "body": "Should <code>msg</code> be a <code>String</code> instead?"}, {"owner": {"reputation": 106, "user_id": 10581510, "user_type": "registered", "profile_image": "https://graph.facebook.com/1208266182538525/picture?type=large", "display_name": "Pakito Gama", "link": "https://stackoverflow.com/users/10581510/pakito-gama"}, "edited": false, "score": 0, "creation_date": 1564674411, "post_id": 57295836, "comment_id": 101117575, "body": "I just edited the post with the code as asked (Master:168 - 202)"}, {"owner": {"reputation": 106, "user_id": 10581510, "user_type": "registered", "profile_image": "https://graph.facebook.com/1208266182538525/picture?type=large", "display_name": "Pakito Gama", "link": "https://stackoverflow.com/users/10581510/pakito-gama"}, "edited": false, "score": 0, "creation_date": 1564674551, "post_id": 57295836, "comment_id": 101117654, "body": "Sorry about that, know it&#39;s not called a constructor but that&#39;s what I found out people would understand.  Guess I have lots to learn yet ahah Just a newbie :x"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 719809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb43066f8b2177c9af726360458aa19b?s=128&d=identicon&r=PG", "display_name": "mzimmers", "link": "https://stackoverflow.com/users/719809/mzimmers"}, "is_accepted": true, "score": 0, "last_activity_date": 1564677073, "creation_date": 1564677073, "answer_id": 57313385, "question_id": 57295836, "link": "https://stackoverflow.com/questions/57295836/how-to-fix-conversion-error-in-a-constructor-in-one-of-my-used-arduino-libraries/57313385#57313385", "title": "How to fix conversion error in a constructor in one of my used arduino libraries", "body": "<p>It does look like a type mismatch. According to the compiler error, createJsonString() returns a string object. In C++ this is <em>not</em> the same as a character array. I'd suggest you take a moment to familiarize yourself with std::string, convert msg to a string object (as jxh) suggested and use the c_str() function to gain access to the character array.</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\">good description of string object</a></p>\n"}], "owner": {"reputation": 106, "user_id": 10581510, "user_type": "registered", "profile_image": "https://graph.facebook.com/1208266182538525/picture?type=large", "display_name": "Pakito Gama", "link": "https://stackoverflow.com/users/10581510/pakito-gama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57313385, "answer_count": 1, "score": 0, "last_activity_date": 1564677073, "creation_date": 1564592679, "last_edit_date": 1564674461, "question_id": 57295836, "link": "https://stackoverflow.com/questions/57295836/how-to-fix-conversion-error-in-a-constructor-in-one-of-my-used-arduino-libraries", "title": "How to fix conversion error in a constructor in one of my used arduino libraries", "body": "<p>I am trying to get two LoRa-esp32 to communicate with each other, but my \"MASTER\" needs to send the reading on the sensors received from \"SLAVE\" to my MQTT server (using io.adafruit). And I am not able to send the data to the MQTT server for some reason. I tried everything and I don't understand why does it happen.</p>\n\n<p>I read the .h constructors of the function and I don't seem to get what's the problem with that.</p>\n\n<p>This is the code i have for the publish function:</p>\n\n<pre><code>if (! Text1.publish(msg)) {\n  Serial.println(F(\"Failed\"));\n} else {\n  Serial.println(F(\"OK!\"));\n}\n</code></pre>\n\n<p>And this is the correspondent Adafruit_MQTT.h lib code:</p>\n\n<pre><code>class Adafruit_MQTT_Publish {\n public:\n  Adafruit_MQTT_Publish(Adafruit_MQTT *mqttserver, const char *feed, uint8_t qos = 0);\n\n  bool publish(const char *s);\n  bool publish(double f, uint8_t precision=2);  // Precision controls the minimum number of digits after decimal.\n                                                // This might be ignored and a higher precision value sent.\n  bool publish(int32_t i);\n  bool publish(uint32_t i);\n  bool publish(uint8_t *b, uint16_t bLen);\n\n\nprivate:\n  Adafruit_MQTT *mqtt;\n  const char *topic;\n  uint8_t qos;\n};\n</code></pre>\n\n<blockquote>\n  <p>This is the error I get:</p>\n  \n  <blockquote>\n    <p>Master:189:42: error: cannot convert 'String' to 'const char*' in initialization</p>\n    \n    <p>const char *msg = createJsonString();</p>\n    \n    <p>exit status 1\n    cannot convert 'String' to 'const char*' in initialization</p>\n  </blockquote>\n</blockquote>\n\n<h2>EDIT</h2>\n\n<p>as asked in the comments to add the code in Master:168 to Master:202</p>\n\n<pre><code>void receive(){\n  //Tentamos ler o pacote\n  int packetSize = LoRa.parsePacket();\n\n  //Verificamos se o pacote tem o tamanho m\u00ednimo de caracteres que esperamos\n  if (packetSize &gt; SETDATA.length()){\n    String received = \"\";\n    //Armazena os dados do pacote em uma string\n    for(int i=0; i&lt;SETDATA.length(); i++){\n      received += (char) LoRa.read();\n    }\n\n    //Se o cabe\u00e7alho \u00e9 o que esperamos\n    if(received.equals(SETDATA)){\n      //Fazemos a leitura dos dados\n      LoRa.readBytes((uint8_t*)&amp;data, sizeof(data));\n      //Mostramos os dados no display\n      showData();\n\n      Serial.print(\"Publish message: \");\n      //Criamos o json que enviaremos para o server mqtt\n      const char *msg = createJsonString();\n      Serial.println(msg);\n      //Publicamos no t\u00f3pico onde o servidor espera para receber \n      //e gerar o gr\u00e1fico\n      //client.publish(TOPIC_NAME, msg.c_str());\n      //#define TOPIC_NAME \"iot-2/evt/status/fmt/json\"\n         if (! Text1.publish(msg)) {\n          Serial.println(F(\"Failed\"));\n        } else {\n          Serial.println(F(\"OK!\"));\n        }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "inheritance", "constructor", "overloading"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1564594232, "post_id": 57295770, "comment_id": 101086386, "body": "<a href=\"https://stackoverflow.com/q/388242/5910058\">The Definitive C++ Book Guide and List</a>"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1564595949, "post_id": 57295770, "comment_id": 101087142, "body": "It&#39;s mostly irrelevant to the question you&#39;re asking, but note that having a rectangle inherit from a square (or vice versa) is a pretty well known anti-pattern. The canonical example is circle vs. ellipse, but rectangle vs. square is essentially the same. <a href=\"https://en.wikipedia.org/wiki/Circle-ellipse_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Circle-ellipse_problem</a>"}, {"owner": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "edited": false, "score": 0, "creation_date": 1564596778, "post_id": 57295770, "comment_id": 101087482, "body": "Oh yeah this is kinda a useless example. Square is basically the same as rect. I easily could&#39;ve just made an overloaded constructor on rectangle but I wanted to demonstrate my problem without making good code lol."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "edited": false, "score": 0, "creation_date": 1564595495, "post_id": 57295851, "comment_id": 101086942, "body": "Really? Should I stick with m_ for private members then? I always thought C++ uses just &quot;_&quot; to distinguish private members."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "edited": false, "score": 0, "creation_date": 1564597255, "post_id": 57295851, "comment_id": 101087693, "body": "@EmDash - Nope. An <code>m_</code> prefix is fine. Or an <code>_</code> suffix. I vastly prefer the latter as there&#39;s a lot less visual noise that way. But an <code>_</code> prefix should never be used for any variable anywhere, unless you&#39;re writing the compiler or the standard library."}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": false, "score": 0, "last_activity_date": 1564593633, "last_edit_date": 1564593633, "creation_date": 1564592738, "answer_id": 57295851, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c/57295851#57295851", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<p>Yes, in newer versions of C++ there is a way to remove a lot of the boilerplate. And even in older versions of C++, in the specific case you mention, there is an objectively much better way to handle the problem than what you're doing.</p>\n\n<pre><code>class Rect\n{\npublic:\n   Rect(double length, double width) : _length(length), _width(width) { } \n   double Area();\n\nprotected:\n   double _length, _width;\n}\n\nclass Square : public Rect \n{\npublic:\n   explicit Square(double side = 1.0) : \n   Rect(side, side), _owner(\"me\"), _label(\"square\") { }\nprivate:\n   std::string _owner, _label;\n}\n</code></pre>\n\n<p>For your case, default arguments are the way to go. And you should include the keyword <code>explicit</code> in order to avoid having the compiler automatically convert a <code>double</code> value into a <code>Square</code> because that would likely surprise people. Default arguments have existed in C++ for a very long time and should work on all compilers.</p>\n\n<p>Another technique that helps with these kinds of issues that only works with post C++11 (which is almost all C++ compilers at this point) is <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">delegating constructors</a>.</p>\n\n<p>A more limited technique that is also post C++11 is <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">inheriting constructors</a>.</p>\n\n<p>A fourth technique that's sometimes applicable is to have default values for class members:</p>\n\n<pre><code>class Fribbler {\n public:\n   fribble()  { i_have_been_fribbled_ = true; }\n   is_fribbled() const { return i_have_been_fribbled_; }\n\n private:\n   bool i_have_been_fribbled_ = false;\n};\n</code></pre>\n\n<p>As a side note, you should not use names with a leading underscore (aka <code>_</code>) in C++. Those names are reserved for use by the library implementation or the compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 542, "user_id": 10865566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b1030e5af9ef662afc6d7a806d0182?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10865566/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1564592860, "creation_date": 1564592860, "answer_id": 57295879, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c/57295879#57295879", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<ol>\n<li>Use <a href=\"https://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">Inheriting constructors</a> to reuse the ctors from Rect (i.e. in your Square do <code>using Rect::Rect</code>; </li>\n<li>Use <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Delegating constructors</a> to call one ctor from another.</li>\n<li>Side-note, Your base classes need to have virtual Destructors if you are planning on using them polymorphic-ally.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "edited": false, "score": 0, "creation_date": 1564595263, "post_id": 57295882, "comment_id": 101086857, "body": "WOAH. Default arguments? When was this a thing!? This looks like Python all of a sudden. Also the delegate constructor looks very elegant. Thank you!"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1564593240, "last_edit_date": 1564593240, "creation_date": 1564592885, "answer_id": 57295882, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c/57295882#57295882", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<p>If I have understood your question correctly then if the initializers of the strings are the same in the both constructors then you can use a delegate constructor</p>\n\n<pre><code>   explicit Square(double side) : \n   Rect(side, side), _owner(\"me\"), _label(\"square\") { }\n\n   Square() : Square(1.0) {}\n</code></pre>\n\n<p>Also you can add default arguments as for example</p>\n\n<pre><code>   explicit Square(double side, const char *owner = \"me\", const char *label = \"square\" ) : \n   Rect(side, side), _owner(owner), _label(label ) { }\n\n   Square() : Square(1.0, \"me\", \"unit square\" ) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "edited": false, "score": 0, "creation_date": 1564595232, "post_id": 57295997, "comment_id": 101086841, "body": "Yes you COULD do this but this isn&#39;t truly initialization in C++. From what I&#39;ve read this is merely assignment, which is not the way C++ prefers you do things."}], "tags": [], "owner": {"reputation": 25, "user_id": 6338771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKOzDuk-c4s/AAAAAAAAAAI/AAAAAAAAAho/XmrM4y919Us/photo.jpg?sz=128", "display_name": "Afonso Ramos", "link": "https://stackoverflow.com/users/6338771/afonso-ramos"}, "is_accepted": false, "score": 0, "last_activity_date": 1564593366, "creation_date": 1564593366, "answer_id": 57295997, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c/57295997#57295997", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<p>From my understanding, constructor overloading in C++ is very similar to its function overloading, for this reason, overloaded constructors have the same name of the class but different number of arguments, and depending upon the number and type of arguments passed, specific constructor is called.</p>\n\n<p>However, you can probably make them similar to this way</p>\n\n<pre><code>class Person\n{\n    int id;\n    string name;\n\n    public:\n    //Empty Constructor\n    Person(){\n        this-&gt;id = 0;\n        this-&gt;name = \"default\";\n    }\n\n    //Overloaded constructor with int parameter\n    Person(int id){\n        this-&gt;id = id;\n    }\n\n    //Overloaded constructor with a int parameter and a string\n    Person(int id, string name){\n        this-&gt;id =id;\n        this-&gt;name = name;\n    }\n\n    void display(){\n        cout &lt;&lt; \"Person Info: \"&lt;&lt;\" \" &lt;&lt; id &lt;&lt; \" \" &lt;&lt; name.c_str()&lt;&lt;\"\\n\";\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "is_accepted": false, "score": 1, "last_activity_date": 1564593886, "creation_date": 1564593886, "answer_id": 57296098, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c/57296098#57296098", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<p>You have to spell out <code>Rect</code> because you could inherit from multiple classes. </p>\n\n<p>You can simplify the two <code>Square</code> constructors to a single one:</p>\n\n<pre><code>class Square : public Rect \n{\npublic:\n   Square(double side = 1.0) : \n   Rect(side, side), _owner(\"me\"), _label(\"square\") { }\n\n  // ...\n\n}\n</code></pre>\n\n<p>If you are serious about your initialization values, you could also do:</p>\n\n<pre><code>class Square : public Rect \n{\npublic:\n   Square(double side = 1.0) : Rect(side, side) {}\n\nprivate:\n    std::string _owner = \"me\";\n    std::string _label = \"square\";\n\n}\n</code></pre>\n\n<p>The only remaining distinction is C++ constructor syntax vs. quasi-assignments in the C# CTor (\"quasi\" because assignments in CTors have somewhat different semantics than elsewhere)</p>\n\n<p>That distinction has some merit: at the opening curly brace, all members and base classes are fully constructed. And <em>that</em> matters for two reasons: </p>\n\n<p>First, C++ makes construction vs. assigmnent explicit. C# hides more aspects of \"turning garbled memory into a valid object\". (N.B. many of the merits of the <em>performance</em> benefits of that are probably in the scope of todays desktop compilers.)</p>\n\n<p>Second, since there is deterministic construction / destruction in C++, order and dependency of initializations are important, e.g if there are dependencies between these elements, or if any of the initialization fails and throws an exception. </p>\n\n<p>(N.B. the order of initialization depends on order of declaration, NOT the order of the CTor initialization.)</p>\n\n<p>Give it a week, it will feel natural soon. </p>\n"}], "owner": {"reputation": 49, "user_id": 11678724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3eSxEy_zr5g/AAAAAAAAAAI/AAAAAAAABNA/DkLzb8aQKTo/photo.jpg?sz=128", "display_name": "EmDash", "link": "https://stackoverflow.com/users/11678724/emdash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "accepted_answer_id": 57295882, "answer_count": 5, "score": 0, "last_activity_date": 1564593886, "creation_date": 1564592408, "question_id": 57295770, "link": "https://stackoverflow.com/questions/57295770/what-is-a-proper-and-elegant-way-to-overload-constructors-in-c", "title": "What Is a Proper and Elegant Way to Overload Constructors in C++", "body": "<p>I touched C++ a few years ago and am having to go back to it for a project I'm working on. I learned most of the basics but never really nailed down on how C++ wants you to implement its idea of classes.</p>\n\n<p>I have experience in other languages like Java, Python, and C#.</p>\n\n<p>One of the troubles I'm having is understanding how to overload constructors in C++ and how to properly do inheritance.</p>\n\n<p>For example, say I have a class called Rect and a class called Square that inherits from Rect.</p>\n\n<p>In Java...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Rect {\n   protected double m_length, m_width;\n\n   public Rect(double length, double width) {\n      this.m_length = length;\n      this.m_width = width;\n   }\n\n   public double Area()\n   {\n      return (this.m_length * this.m_width);\n   }\n\n}\n\npublic class Square extends Rect {\n   private String m_label, m_owner;\n   public Square(double side) {\n      super(side, side);\n      this.m_owner = \"me\";\n      this.m_label = \"square\";\n   }\n\n   //Make the default a unit square\n   public Square() {\n      this(1.0);\n      this.m_label = \"unit square\";\n   }\n}\n</code></pre>\n\n<p>However the same process in C++ just feels convoluted.</p>\n\n<p>Headers:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Rect\n{\npublic:\n   Rect(double length, double width) : _length(length), _width(width) { } \n   double Area();\n\nprotected:\n   double _length, _width;\n}\n\nclass Square : public Rect \n{\npublic:\n   Square(double side) : \n   Rect(side, side), _owner(\"me\"), _label(\"square\") { }\n\n   Square() : Rect(1.0, 1.0), _owner(\"me\"), _label(\"unit square\");\n\nprivate:\n   std::string _owner, _label;\n}\n</code></pre>\n\n<p>I feel like I shouldn't have to write out Rect again. It just seems like an awful lot of rewriting, especially since in my project I'm working with matrices a lot and I want to have constructors to be able to extend each other like in Java to avoid rewriting lots of code.</p>\n\n<p>I'm sure there's a way to do this properly, but I haven't see anyone really talk about this problem.</p>\n"}, {"tags": ["python", "c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "is_accepted": false, "score": 0, "last_activity_date": 1565033930, "last_edit_date": 1565033930, "creation_date": 1565033612, "answer_id": 57365025, "question_id": 57295628, "link": "https://stackoverflow.com/questions/57295628/convert-numpy-slice-to-opencv-c-mat/57365025#57365025", "title": "Convert numpy slice to Opencv c++ Mat", "body": "<p>Opencv Matrices follow a completely different paradigm than numpy arrays, and thus you aren't going to be able to take advantage of broadcasting and other indexing features numpy allows. </p>\n\n<p>Out side of special circumstances, OpenCV doesn't even support matrices over 3 dimensions due to how specialized OpenCV is towards computer vision.  If you <em>absolutely</em> need to use an opencv matrix for this, create a 1 dimensional opencv matrix of size <code>sum(array.shape)</code> and stuff all your data in in C order, then you can still use the general indexing formula for arbitrary dimensions:</p>\n\n<pre><code>cv::Mat your_mat = /*what ever data for your flattened matrix assuming double,*/\nvector&lt;int&gt; dimensions = {/*what ever your dimensions are, in this case 1, 17, 17, 5, 5*/};\nvector&lt;int&gt; nd_index = {/*what ever indexes you are trying to access, assuming x, y, z, ... order, not C order*/};\nint accumulated_frame_size = 1;\nint linear_index = 0;\nfor(int dim_idx = 0; dim_idx &lt; dimensions.size(); ++dim_idx){\n    linear_index += nd_index[dim_idx] * accumulated_frame_size;\n    accumulated_frame_size *= nd_index[dim_idx];\n}\n//the value for that index. \nstd::cout &lt;&lt; your_mat.at&lt;double&gt;(linear_idx) &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Note of course most of what you probably want to do to operate on this probably won't work unless it is solely element wise. </p>\n\n<p>Since you want to do something specific, we can do a bit better.  The first singleton dimension in our array wouldn't exist, since we flatten it in C++, so no need to subscript by <code>[0]</code>. If we think about it, <code>subarray[:,:,:,4]</code> is actually just the 4th index of every 5 element offset, nothing more.   To extract that information we first calculate how many of these elements we want to extract then input them in another matrix.</p>\n\n<pre><code>int extract_count =  17 * 17 * 5; //all dimensions before indexed dimension.\nint final_dim_size = 5;\nint extract_index = 4;\ncv::Mat extracted_mat(1,extract_count,CV_64F);\nfor(int i = 0; i&lt; extract_count ; ++i){\n    extracted_mat.at&lt;double&gt;(i) = your_mat.at&lt;double&gt;(i*final_dim_size + extract_index);\n}\n</code></pre>\n\n<p>What Numpy does is internally convert all indexes you make to similar operations. </p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "is_accepted": true, "score": 0, "last_activity_date": 1566235347, "creation_date": 1566235347, "answer_id": 57561359, "question_id": 57295628, "link": "https://stackoverflow.com/questions/57295628/convert-numpy-slice-to-opencv-c-mat/57561359#57561359", "title": "Convert numpy slice to Opencv c++ Mat", "body": "<p>I ended up using cv::Range to get the subarray I needed</p>\n\n<pre><code>std::vector&lt;cv::Range&gt; ranges;\nranges.push_back(cv::Range(0, 1));\nranges.push_back(cv::Range::all());\nranges.push_back(cv::Range::all());\nranges.push_back(cv::Range::all());\nranges.push_back(cv::Range(4, 5));\n\ncv::Mat subarray = array(ranges);\n</code></pre>\n\n<p>It doesn't change the dimensions of the array, but makes sure I am only looking to the data that I am interested in.</p>\n"}], "owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 57561359, "answer_count": 2, "score": 0, "last_activity_date": 1566235347, "creation_date": 1564591811, "question_id": 57295628, "link": "https://stackoverflow.com/questions/57295628/convert-numpy-slice-to-opencv-c-mat", "title": "Convert numpy slice to Opencv c++ Mat", "body": "<p>I have an array in python with shape (1, 17, 17, 5, 5). I need to get a subarray of this array:</p>\n\n<pre><code>subarray = array[0]\nsubarray = subarray[:,:,:,4]\n</code></pre>\n\n<p>Now I need to write the same code in C++ using a Opencv Mat.\nHow do I get this subarray? Is there an easy way to slice a Mat same as with Numpy?</p>\n"}, {"tags": ["c++", "qt", "qvector"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1564591812, "post_id": 57295600, "comment_id": 101085367, "body": "Do you really need to dynamically allocate your <code>QVector</code>? I would change <code>QVector&lt;QVector&lt;QString&gt;&gt; *SecondList = new QVector&lt;QVector&lt;QString&gt;&gt;;</code> to <code>QVector&lt;QVector&lt;QString&gt;&gt; SecondList;</code>"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564592145, "post_id": 57295600, "comment_id": 101085524, "body": "Yes it would be preferable. I will test without it being dynamically allocated and see if it solves the problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564592212, "post_id": 57295600, "comment_id": 101085547, "body": "<b><i>Yes it would be preferable</i></b> remember that the elements of the vector are still dynamically allocated if you use <code>QVector&lt;QVector&lt;QString&gt;&gt; SecondList;</code>"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564592803, "post_id": 57295600, "comment_id": 101085798, "body": "I&#39;m testing it right now, be back to you"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1564592789, "post_id": 57295779, "comment_id": 101085790, "body": "I tried <code>*SecondList[i][2] = nP;</code>, yet I get this error: <code>no match for &#39;operator*&#39; (operand type is &#39;QVector&lt;QString&gt;&#39;)</code>. As @drescherjm suggested it might be because of my vector being a pointer, but not the inside one."}, {"owner": {"reputation": 542, "user_id": 10865566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b1030e5af9ef662afc6d7a806d0182?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10865566/david"}, "reply_to_user": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1564592969, "post_id": 57295779, "comment_id": 101085871, "body": "try without leading *, i.e. just do SecondList[i][2] = nP . The * is dereferencing operator."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 1, "creation_date": 1564593078, "post_id": 57295779, "comment_id": 101085914, "body": "@WKstraw You would have to do <code>(*SecondList)[i][2]</code>."}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1564593088, "post_id": 57295779, "comment_id": 101085918, "body": "that&#39;s what I first thought but then I got this error:  <code>no match for &#39;operator=&#39; (operand types are &#39;QVector&lt;QString&gt;&#39; and &#39;QString&#39;)</code>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1564593215, "post_id": 57295779, "comment_id": 101085981, "body": "@David That&#39;s not correct. You need two indexing operations already for the two nested vectors. It would technically work to do <code>SecondList[0][i][2]</code> (because <code>x[y]</code> is literally <code>*(x+y)</code> for raw pointers) but please don&#39;t do that."}, {"owner": {"reputation": 542, "user_id": 10865566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b1030e5af9ef662afc6d7a806d0182?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10865566/david"}, "edited": false, "score": 0, "creation_date": 1564593249, "post_id": 57295779, "comment_id": 101085996, "body": "ah yeah, as Max said above do (*SecondList)[i][2] or don&#39;t do dynamic allocation"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564593259, "post_id": 57295779, "comment_id": 101086002, "body": "@MaxLanghof Wow, that worked, I had completely forgotten about the brackets.. Thanks!"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564593349, "post_id": 57295779, "comment_id": 101086039, "body": "@MaxLanghof if you want to answer I can mark it as answered (or I can do it myself, if it bothers you)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564593519, "post_id": 57295779, "comment_id": 101086107, "body": "This would be a minor edit/addition to this already correct answer, I don&#39;t think adding it separately helps. Maybe @David wants to add some code to show the correct usage :)"}], "tags": [], "owner": {"reputation": 542, "user_id": 10865566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b1030e5af9ef662afc6d7a806d0182?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10865566/david"}, "is_accepted": true, "score": 1, "last_activity_date": 1564592451, "creation_date": 1564592451, "answer_id": 57295779, "question_id": 57295600, "link": "https://stackoverflow.com/questions/57295600/problem-when-attempting-to-change-the-value-of-a-two-dimensional-vector/57295779#57295779", "title": "Problem when attempting to change the value of a two-dimensional vector", "body": "<p><a href=\"https://doc.qt.io/qt-5/qvector.html#at\" rel=\"nofollow noreferrer\">QVector at()</a> returns a <strong>const</strong> T&amp;, try using <a href=\"https://doc.qt.io/qt-5/qvector.html#operator-5b-5d\" rel=\"nofollow noreferrer\">operator []</a> instead, which returns <strong>non-const</strong> &amp;</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564593462, "post_id": 57295811, "comment_id": 101086083, "body": "But why would you call <code>operator[]</code> manually instead of just using <code>[i]</code> as it was intended?"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564593575, "post_id": 57295811, "comment_id": 101086125, "body": "This was partly the problem, but <code>*SecondList[i][2] = nP;</code> also didn&#39;t work. As @MaxLanghof pointed out, I had just forgotten the brackets around the <code>*SecondList</code>"}], "tags": [], "owner": {"reputation": 64, "user_id": 11731556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a579a8cf799af1584a0ec8e53e90ca6?s=128&d=identicon&r=PG&f=1", "display_name": "yo76yo", "link": "https://stackoverflow.com/users/11731556/yo76yo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564592540, "creation_date": 1564592540, "answer_id": 57295811, "question_id": 57295600, "link": "https://stackoverflow.com/questions/57295600/problem-when-attempting-to-change-the-value-of-a-two-dimensional-vector/57295811#57295811", "title": "Problem when attempting to change the value of a two-dimensional vector", "body": "<p>So Ben answered this question over <a href=\"https://stackoverflow.com/a/24377779/11731556\">here</a> </p>\n\n<p>But the reason is that the <code>QVector::at</code> method is <code>const</code> and the full prototype is <code>const T &amp;QVector::at(int i) const</code>.</p>\n\n<p>So you are going to have to use the <code>QVector::operator[]</code> which the full prototype is <code>T &amp;QVector::operator[](int i)</code></p>\n\n<p>So I would try <code>SecondList-&gt;operator[](i).operator[](0)  = nP;</code>. Something along these lines.</p>\n"}], "owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57295779, "answer_count": 2, "score": 1, "last_activity_date": 1602412935, "creation_date": 1564591709, "last_edit_date": 1602412935, "question_id": 57295600, "link": "https://stackoverflow.com/questions/57295600/problem-when-attempting-to-change-the-value-of-a-two-dimensional-vector", "title": "Problem when attempting to change the value of a two-dimensional vector", "body": "<p>I am trying to change the values of a two-dimensional QVector (<code>QVector&lt;QVector&lt;QString&gt;</code>). However when attempting it, I get the following error: <code>passing 'const QString' as 'this' argument discards qualifiers [-fpermissive]</code>.</p>\n<p>I first thought that the problem was in the way I was accessing the data in the <code>QVector</code>. I therefore tried accessing it via <code>operator []</code>. This gave me the following error: <code>no match for 'operator=' (operand types are 'QVector&lt;QString&gt;' and 'QString')</code>. I also tried dereferencing the vector (<code>*SecondList</code>), as I wasn't sure whether <code>operator []</code> did it and got the following error: <code>no match for 'operator*' (operand type is 'const QVector&lt;QString&gt;')</code> .</p>\n<p>Here is the problematic code:</p>\n<pre><code>void Handler::changePassword(QString newPassword, int id)\n{\n    \n    QString nP = newPassword;\n\n    int i = 0;\n    bool loopBreaker = false;\n\n    while (!loopBreaker)    \n    {\n        if (SecondList-&gt;at(i).at(2) == QString::number(id))\n        {//Changes the value for password in &quot;secondlist&quot;\n            SecondList-&gt;at(i).at(0) = nP;    // ----&gt; ERROR\n            loopBreaker = true;\n            saveList();\n        }\n        i++;\n    }\n}\n</code></pre>\n<p>Here is the header file for <code>Handler </code> class</p>\n<pre><code>class Handler : public QWidget\n{\nprivate: \n    QVector&lt;QVector&lt;QString&gt;&gt; *SecondList = new QVector&lt;QVector&lt;QString&gt;&gt;;\n}\n</code></pre>\n<p>(code is ommitted for readability)</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1564591495, "post_id": 57295507, "comment_id": 101085232, "body": "File I/O operations do not throw by default in C++, so you can&#39;t catch anything - you want to check the return values of the open(), read() and other functions."}, {"owner": {"reputation": 127, "user_id": 8838989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7274393fee8e5275ee5ef9d7e242a34a?s=128&d=identicon&r=PG&f=1", "display_name": "Kam", "link": "https://stackoverflow.com/users/8838989/kam"}, "edited": false, "score": 3, "creation_date": 1564591744, "post_id": 57295507, "comment_id": 101085340, "body": "Yes, I know. But I did not ask the default case. I asked the case in my example where I set up exceptions on reading/writing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1564592543, "post_id": 57295507, "comment_id": 101085709, "body": "The open() call won&#39;t throw an exception if you set the exception mask after the call."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1564595604, "post_id": 57295507, "comment_id": 101086988, "body": "<a href=\"https://stackoverflow.com/questions/9670396/exception-handling-and-opening-a-file\">Related</a>"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 8838989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7274393fee8e5275ee5ef9d7e242a34a?s=128&d=identicon&r=PG&f=1", "display_name": "Kam", "link": "https://stackoverflow.com/users/8838989/kam"}, "edited": false, "score": 0, "creation_date": 1564593907, "post_id": 57295709, "comment_id": 101086244, "body": "My English is not good. I will try ask other way. My question is: Is it necessary to test the return value of gcount() when the exceptions are set?"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1564592150, "creation_date": 1564592150, "answer_id": 57295709, "question_id": 57295507, "link": "https://stackoverflow.com/questions/57295507/is-it-sufficient-to-only-catch-exceptions-to-detect-all-binary-file-read-write-e/57295709#57295709", "title": "Is it sufficient to only catch exceptions to detect all binary file read/write errors in C++?", "body": "<p>Correct, the stream exception function is passed a <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"nofollow noreferrer\"><code>std::ios_base::iostate</code></a> parameter of type trait <a href=\"https://en.cppreference.com/w/cpp/named_req/BitmaskType\" rel=\"nofollow noreferrer\"><code>BitmaskType</code></a>. Bitmask types supports all bitwise operators:</p>\n\n<blockquote>\n  <p>The bitwise operators operator&amp;, operator|, operator^, operator~, operator&amp;=, operator|=, and operator^= are defined for values of the bitmask type and have the same semantics as the corresponding built-in operators on unsigned integers would have if the bitmask elements were the distinct integer powers of two.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1564598514, "last_edit_date": 1564598514, "creation_date": 1564598109, "answer_id": 57297012, "question_id": 57295507, "link": "https://stackoverflow.com/questions/57295507/is-it-sufficient-to-only-catch-exceptions-to-detect-all-binary-file-read-write-e/57297012#57297012", "title": "Is it sufficient to only catch exceptions to detect all binary file read/write errors in C++?", "body": "<p>The fact that <code>read()</code> throws an exception at all guarantees that <code>gcount()</code> <em>cannot</em> be equal to the requested buffer size. You can look at <code>gcount()</code> after a <em>successful</em> <code>read()</code> to check how many bytes it actually read, which you know is not the case if an exception is thrown.</p>\n\n<p>In your example, you have set an exception to be thrown on all possible outcomes of <code>read()</code> that do not read the entire requested size.  So yes, in that case, checking <code>gcount()</code> is redundant.  It would only make sense to check <code>gcount()</code> if EOF were reached with no exception thrown, and you want to know how many bytes were read.  Which doesn't make a lot of sense for a <em>binary</em> read, unless the data is variable-length and you simply just don't know its size up front.  If you need to handle data that ends with EOF, you shouldn't be throwing an exception on <code>eofbit</code> to begin with.  Throw an exception on EOF only if EOF is a real error condition (ie, the data at the end of the stream is incomplete).</p>\n"}], "owner": {"reputation": 127, "user_id": 8838989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7274393fee8e5275ee5ef9d7e242a34a?s=128&d=identicon&r=PG&f=1", "display_name": "Kam", "link": "https://stackoverflow.com/users/8838989/kam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 57297012, "answer_count": 2, "score": 0, "last_activity_date": 1564598514, "creation_date": 1564591361, "last_edit_date": 1564596713, "question_id": 57295507, "link": "https://stackoverflow.com/questions/57295507/is-it-sufficient-to-only-catch-exceptions-to-detect-all-binary-file-read-write-e", "title": "Is it sufficient to only catch exceptions to detect all binary file read/write errors in C++?", "body": "<p>In example below, file exceptions are set. Inside the try-catch block is validating the size of the read data using the <code>gcout()</code> function. Is it necessary to test the return value of <code>gcount()</code> when the exceptions are set?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main()\n{\n    char buf[100];\n    std::ifstream file;\n\n    file.exceptions(std::ios_base::badbit | std::ios_base::failbit | std::ios_base::eofbit);\n\n    try {\n        file.open(\"file.bin\", std::ios_base::in | std::ios_base::binary);\n\n        file.read(buf, sizeof buf);\n\n        // Is this error check redundant?\n        if (file.gcount() != sizeof buf) {\n            std::cout &lt;&lt; \"gcount(): Read error\\n\";\n        }\n\n        file.close();\n    } catch (...) {\n        std::cout &lt;&lt; \"Exception: Read error\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "hardware", "raytracing", "fixed-point"], "answers": [{"comments": [{"owner": {"reputation": 4001, "user_id": 671509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cfc6eb6760f9d2bab7d5b876f283e2a1?s=128&d=identicon&r=PG", "display_name": "John McFarlane", "link": "https://stackoverflow.com/users/671509/john-mcfarlane"}, "edited": false, "score": 1, "creation_date": 1564670300, "post_id": 57296176, "comment_id": 101115199, "body": "Strictly speaking, only if the exponent of the destination value is not equal to the sum of the exponents of the operands."}, {"owner": {"reputation": 167, "user_id": 5518358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqFzP.jpg?s=128&g=1", "display_name": "Jorgeluis", "link": "https://stackoverflow.com/users/5518358/jorgeluis"}, "edited": false, "score": 0, "creation_date": 1564684237, "post_id": 57296176, "comment_id": 101121966, "body": "e1p, e1q, e2p, e2q are fixed point too, as stated in the page 27, inside the struct definition: (int e1q, e2q;  // signed fixed point) and (int e1p, e2p;  // in (-2^-E, 2^-E))"}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1564594260, "creation_date": 1564594260, "answer_id": 57296176, "question_id": 57295400, "link": "https://stackoverflow.com/questions/57295400/fixed-point-hardware-ray-tracing-products-compensation/57296176#57296176", "title": "Fixed Point Hardware Ray Tracing products compensation", "body": "<p>In the paper on page 30, it states that <code>kp</code> and <code>kq</code> are integer values.  When working with fixed point, you only need to normalize when multiplying 2 fixed-point values together.</p>\n\n<pre><code>int kp = O[p] + ((t*omega[p]) &gt;&gt; (m-1)) - pp;\nint kq = O[q] + ((t*omega[q]) &gt;&gt; (m-1)) - pq;\nlong long int u = (long long int)e1p*kq - (long long int)e1q*kp;\nlong long int v = (long long int)e2q*kp - (long long int)e2p*kq;\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5518358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqFzP.jpg?s=128&g=1", "display_name": "Jorgeluis", "link": "https://stackoverflow.com/users/5518358/jorgeluis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1564603964, "creation_date": 1564590981, "last_edit_date": 1564603964, "question_id": 57295400, "link": "https://stackoverflow.com/questions/57295400/fixed-point-hardware-ray-tracing-products-compensation", "title": "Fixed Point Hardware Ray Tracing products compensation", "body": "<p>I'm trying to replicate a implementation of integer calculi of ray-triangle intersection and I'm basing my code on the work of Johannes Hanika (<a href=\"https://jo.dreggn.org/home/2007_master.pdf\" rel=\"nofollow noreferrer\">https://jo.dreggn.org/home/2007_master.pdf</a>).</p>\n\n<p>But I having a problem that I think it is in the following lines of Hanika's implementation:</p>\n\n<pre><code>long long int u = (long long int)e1p*kq - (long long int)e1q*kp;\nlong long int v = (long long int)e2q*kp - (long long int)e2p*kq;\n</code></pre>\n\n<p>I believe these products should have some sort of compensation, something like right shifting by <i>(m - 1)</i>, as it has in others sections of the code.</p>\n\n<p>I've made this compensation in my code, and it works only this way.</p>\n\n<p>Someone here has ever implemented this code of his? Or have any guesses for this problem?</p>\n"}, {"tags": ["c++", "qt", "c++11", "qt5"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1564590961, "post_id": 57295332, "comment_id": 101084983, "body": "You capture a reference to a local variable. Once that local variable dies (because you leave the scope it was defined in) you have a dangling reference."}, {"owner": {"reputation": 417, "user_id": 3120665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3f532a17b6ee5e822b6e900852c9c346?s=128&d=identicon&r=PG&f=1", "display_name": "cid", "link": "https://stackoverflow.com/users/3120665/cid"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564591355, "post_id": 57295332, "comment_id": 101085159, "body": "That was the solution! After making &quot;counter&quot; into a class member variable, it never died, and no more dangling reference. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1564591366, "creation_date": 1564591366, "answer_id": 57295509, "question_id": 57295332, "link": "https://stackoverflow.com/questions/57295332/qt-connections-using-lambda-expression-resets-passed-int-variable-weird/57295509#57295509", "title": "Qt Connections: Using Lambda Expression Resets Passed int Variable (Weird)", "body": "<p><code>&amp;counter</code> in the <code>[]</code> means you are capturing <code>counter</code> by-reference in the lambda.</p>\n\n<p>If the variable <code>int counter</code> has gone out of scope (as local variables are wont to do), then this means you have a dangling reference; using it is undefined behavior.</p>\n\n<p>The easy way to fix this is to just capture counter by value -- <code>[this, counter]</code> instead of <code>[this, &amp;counter]</code>.  Then the lambda will own its own copy of the state of <code>counter</code>.  As it is mutable, it will have permission to edit its own state.</p>\n"}], "owner": {"reputation": 417, "user_id": 3120665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3f532a17b6ee5e822b6e900852c9c346?s=128&d=identicon&r=PG&f=1", "display_name": "cid", "link": "https://stackoverflow.com/users/3120665/cid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57295509, "answer_count": 1, "score": 2, "last_activity_date": 1564591366, "creation_date": 1564590608, "last_edit_date": 1564591020, "question_id": 57295332, "link": "https://stackoverflow.com/questions/57295332/qt-connections-using-lambda-expression-resets-passed-int-variable-weird", "title": "Qt Connections: Using Lambda Expression Resets Passed int Variable (Weird)", "body": "<p>Consider the following code:</p>\n\n<pre><code>int counter = 0;\n\nQTimer* timer = new QTimer(this);\n\nconnect(timer, &amp;QTimer::timeout, [this, &amp;counter]() mutable {\n    counter++;\n    qDebug() &lt;&lt; counter;\n});\n\ntimer-&gt;start(500);\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>1\n2\n3\n4\n...\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>32766 (a random number)\n...\n</code></pre>\n\n<p>Is there some undefined stuff going on here? I can't find anything about this effect.</p>\n"}, {"tags": ["c++", "reference", "rvalue"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1564590413, "post_id": 57295260, "comment_id": 101084721, "body": "Why not just use <code>int&amp; get_front() {     return example_q.front(); }</code>?  Out parameters are generally considered a bad idea."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1564590474, "post_id": 57295260, "comment_id": 101084752, "body": "No, but you can pass a reference to a pointer and modify the pointer to point to your data. Better still, return a tuple with a reference and whatever else you need to return: <code>std::tuple&lt;int&amp;, bool&gt; get_front()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 7, "last_activity_date": 1564590406, "creation_date": 1564590406, "answer_id": 57295296, "question_id": 57295260, "link": "https://stackoverflow.com/questions/57295260/is-it-possible-to-return-a-reference-via-an-argument-passed-by-reference/57295296#57295296", "title": "Is it possible to return a reference via an argument passed by reference?", "body": "<p>No, you can't do that.</p>\n\n<p>Other than in its initialiser, a reference behaves like the thing it refers to. By passing it as a function argument, you \"hide\" the initialiser from the part that wants to do the assignment. So, the function has no access to the referencey behaviour of the thing.</p>\n\n<p>You will have to use pointers if you want to do that:</p>\n\n<pre><code>void get_front(int*&amp; int_ptr)\n{\n    int_ptr = &amp;example_q.front(); \n}\n\nint* ptr = nullptr;\nget_front(ptr);\n\n// optional:\nint&amp; ref = *ptr;\n</code></pre>\n\n<p><em>(Ew!)</em></p>\n\n<p>Option B was fine.</p>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 6895191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf44f8dd1bbebcbd21609104677a512?s=128&d=identicon&r=PG&f=1", "display_name": "durandaltheta", "link": "https://stackoverflow.com/users/6895191/durandaltheta"}, "edited": false, "score": 0, "creation_date": 1564591460, "post_id": 57295349, "comment_id": 101085214, "body": "Here&#39;s the fun bit, I&#39;m doing a trivial example in the question but the actual usecase is getting a reference of an std::unique_ptr from a queue that is not guaranteed to be full XD."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 4, "last_activity_date": 1564591449, "last_edit_date": 1564591449, "creation_date": 1564590675, "answer_id": 57295349, "question_id": 57295260, "link": "https://stackoverflow.com/questions/57295260/is-it-possible-to-return-a-reference-via-an-argument-passed-by-reference/57295349#57295349", "title": "Is it possible to return a reference via an argument passed by reference?", "body": "<p>This code is invalid C++:</p>\n\n<pre><code>if(get_front(int&amp; magical_ref))\n</code></pre>\n\n<p>You cannot declare a new variable as you're passing it to a function. And because a reference variable must be declared and initialized at the same time, it wouldn't be possible to have a reference be initialized by passing it to a function.</p>\n\n<p>You <em>could</em> however, do this:</p>\n\n<pre><code>if(int &amp;magical_ref = get_front()) {\n</code></pre>\n\n<p>But note that you'd be checking whether <code>magical_ref</code> is 0 or not, which is different from the condition you have in your example.</p>\n\n<p>If your logic is as simple as comparing the <code>int</code>, you could do:</p>\n\n<pre><code>if (int&amp; magical_ref = get_front(); magical_ref == 42)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 6895191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf44f8dd1bbebcbd21609104677a512?s=128&d=identicon&r=PG&f=1", "display_name": "durandaltheta", "link": "https://stackoverflow.com/users/6895191/durandaltheta"}, "edited": false, "score": 0, "creation_date": 1564608808, "post_id": 57295603, "comment_id": 101092114, "body": "That would be my recommended solution for multiple returns, except I&#39;ve the self imposed limit of C++11 at the moment due to backwards compatibility concerns"}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1564591725, "creation_date": 1564591725, "answer_id": 57295603, "question_id": 57295260, "link": "https://stackoverflow.com/questions/57295260/is-it-possible-to-return-a-reference-via-an-argument-passed-by-reference/57295603#57295603", "title": "Is it possible to return a reference via an argument passed by reference?", "body": "<p>You can return a <code>std::tuple&lt;int&amp;, /* status condition */&gt;</code> and check the status. For example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::tuple&lt;int&amp;, bool&gt; get_front() {\n    static int example = 0;\n    return {example, false};\n}\n\n...\n\n// C++17's structured bindings + if statement with initializer\nif (auto [ref, success] = get_front(); success) {\n    ref = 42;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/LfaOr3\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 217, "user_id": 6895191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf44f8dd1bbebcbd21609104677a512?s=128&d=identicon&r=PG&f=1", "display_name": "durandaltheta", "link": "https://stackoverflow.com/users/6895191/durandaltheta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 57295296, "answer_count": 3, "score": 1, "last_activity_date": 1564591725, "creation_date": 1564590290, "last_edit_date": 1564591356, "question_id": 57295260, "link": "https://stackoverflow.com/questions/57295260/is-it-possible-to-return-a-reference-via-an-argument-passed-by-reference", "title": "Is it possible to return a reference via an argument passed by reference?", "body": "<p>I want to return a boolean or success/failure enum from the function and modify an argument by reference. However, I want to construct a reference in the calling function instead of copying the value.</p>\n\n<p>I have some container (say 'example_q' of type std::queue). queue.front() will return a reference to the value stored in the queue. I can make a copy of that reference (example A) or I can take a reference of that reference (example B), allowing the value to stay in the queue but be utilized outside of it.</p>\n\n<p>A)</p>\n\n<pre><code>int a = example_q.front();\n</code></pre>\n\n<p>B) </p>\n\n<pre><code>int&amp; b = example_q.front();\n</code></pre>\n\n<p>Using this difference I could also return the queued value:</p>\n\n<p>A)</p>\n\n<pre><code>int get_front()\n{\n    int a = example_q.front(); \n    return a;\n}\n</code></pre>\n\n<p>B) </p>\n\n<pre><code>int&amp; get_front()\n{\n    return example_q.front();\n}\n</code></pre>\n\n<p>Using option 'B' I can avoid unnecessary copies without moving the data out of the queue via std::move() semantics.</p>\n\n<p>My question is, can I do 'B' via an argument passed by reference? Would I need to use std::move()/rvalues/&amp;&amp; somehow?</p>\n\n<pre><code>void get_front(int&amp; int_ref)\n{\n    // somehow don't copy the value into referenced int_ref, but construct \n    // a reference in the caller based on an input argument?\n    int_ref = example_q.front(); \n}\n</code></pre>\n\n<p>The problem this would solve is making API match other functions that modify reference arguments but return a success/failure value, ie:</p>\n\n<pre><code>if(q.get_front(referrence_magic_here))\n{\n    ...\n}\n</code></pre>\n\n<p>I could reverse the order to get the desired result, IE:</p>\n\n<pre><code>int&amp; get_front(bool&amp; success)\n{\n    ...\n}\n</code></pre>\n\n<p>But I'd rather keep the pattern of my API as well as being able to do it via a single line in the if() statement if possible.</p>\n\n<p>Perhaps something like:</p>\n\n<pre><code>bool get_front(int&amp;&amp; int_rvalue)\n{\n    ...\n    int_rvalue = example_q.front();\n    ...\n    return true_or_false;\n}\n\n\nvoid calling_func()\n{\n    ...\n    if(get_front(int&amp; magical_ref))\n    {\n       ... //use magical_ref here?\n    }\n    ...\n}\n\n</code></pre>\n"}, {"tags": ["c++", "stack-overflow", "iostream", "mutual-recursion"], "comments": [{"owner": {"reputation": 912, "user_id": 2359895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9X5ZI.jpg?s=128&g=1", "display_name": "Paul Baxter", "link": "https://stackoverflow.com/users/2359895/paul-baxter"}, "edited": false, "score": 1, "creation_date": 1564589286, "post_id": 57294944, "comment_id": 101084126, "body": "You program will cause a stack overflow and exit."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564589734, "post_id": 57294944, "comment_id": 101084366, "body": "This depends of compilation flags and compiler. Compiler can transform this code into infinitive loop (tail recursion) and stack will not overflow. We need more information to explain that return code. How do you build this code: compiler, its flags and what OS. How do you run it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 731, "user_id": 3030737, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/84f06b806a31acf130deb8f5c9e0d679?s=128&d=identicon&r=PG&f=1", "display_name": "Cromon", "link": "https://stackoverflow.com/users/3030737/cromon"}, "edited": false, "score": 0, "creation_date": 1564589820, "post_id": 57294944, "comment_id": 101084425, "body": "@Cromon Don&#39;t write answers in comments please. I see you&#39;ve also posted it as an answer so the comment can just be deleted."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 3, "creation_date": 1564589878, "post_id": 57294944, "comment_id": 101084455, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53009030/clion-exit-code-1073741571-0xc00000fd\">Clion exit code -1073741571 (0xC00000FD)</a>"}, {"owner": {"reputation": 131, "user_id": 8675336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d0d75bb8284fdde4179eea6c75960b?s=128&d=identicon&r=PG&f=1", "display_name": "SgerS1", "link": "https://stackoverflow.com/users/8675336/sgers1"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564590538, "post_id": 57294944, "comment_id": 101084787, "body": "@MarekR  Compiler:GNU GCC Flags:C++11 ISO standard [-std=c++11] OS:Windows 10"}], "answers": [{"tags": [], "owner": {"reputation": 731, "user_id": 3030737, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/84f06b806a31acf130deb8f5c9e0d679?s=128&d=identicon&r=PG&f=1", "display_name": "Cromon", "link": "https://stackoverflow.com/users/3030737/cromon"}, "is_accepted": false, "score": 4, "last_activity_date": 1564589485, "last_edit_date": 1564589485, "creation_date": 1564589436, "answer_id": 57295018, "question_id": 57294944, "link": "https://stackoverflow.com/questions/57294944/program-returns-a-value-of-1073741571-instead-of-going-forever/57295018#57295018", "title": "Program returns a value of -1073741571 instead of going forever", "body": "<p>While in theory this goes on forever the problem is that every time a function is called some memory needs to be reserved on something called the 'stack'. Eventually there is no more space left on that 'stack' and you get a StackOverflowException. <code>0xC00000FD</code> is the error code windows uses to tell you that a StackOverflowException happened</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1564589524, "creation_date": 1564589524, "answer_id": 57295042, "question_id": 57294944, "link": "https://stackoverflow.com/questions/57294944/program-returns-a-value-of-1073741571-instead-of-going-forever/57295042#57295042", "title": "Program returns a value of -1073741571 instead of going forever", "body": "<p>Whenever you call a function, the program reserved a small amount of space to hold information for that function (space for local variables, information about where to return to after the function exits, etc.). This memory is allocated from a region called the call stack (or \u201cstack\u201d for short), and it\u2019s returned to the stack when the function finishes running.</p>\n\n<p>The stack typically has a fixed, small size. If you have a very long chain of calls (usually measured in tens of thousands of calls), you can run out of stack space and the program will terminate with an error called a stack overflow. That\u2019s what\u2019s happening in your program.</p>\n\n<p>Generally speaking, if you have recursive (or in your case, mutually recursive) functions, you\u2019ll need to make sure that the recursion depth doesn\u2019t get \u201ctoo large\u201d for some definition of \u201ctoo large,\u201d or this sort of thing can happen. There are some special cases where some compilers can recognize that you\u2019re writing recursive code and transform it into code that doesn\u2019t allocate multiple stack frames (see \u201ctail-call elimination\u201d for more details), but that\u2019s the exception rather than the rule.</p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 8675336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d0d75bb8284fdde4179eea6c75960b?s=128&d=identicon&r=PG&f=1", "display_name": "SgerS1", "link": "https://stackoverflow.com/users/8675336/sgers1"}, "edited": false, "score": 0, "creation_date": 1564600005, "post_id": 57295521, "comment_id": 101088893, "body": "since i don&#39;t have a good knowledge in c++(yet) and this &quot;stack&quot; , &quot;tail recursion&quot;, &quot;recursion&quot; concepts are new for me i still have some questions. despite this, all of the answers helped me to understand those concepts. so if i get it right when function is called, computer must remember the address where it came from and that information is stored in allocated memory called &quot;call stack&quot; which is around 1MB and because function is recursive it adds more and more repetitive addresses. That&#39;s where tail recursion comes in game right?"}, {"owner": {"reputation": 131, "user_id": 8675336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d0d75bb8284fdde4179eea6c75960b?s=128&d=identicon&r=PG&f=1", "display_name": "SgerS1", "link": "https://stackoverflow.com/users/8675336/sgers1"}, "edited": false, "score": 0, "creation_date": 1564600289, "post_id": 57295521, "comment_id": 101088991, "body": "in your code, those keywords &quot;sub&quot; &quot;jmp&quot; &quot;rsp&quot; &quot;call&quot;.. i guess are actions which tail recursion technique takes but i don&#39;t understand their meanings. i turned on -O2 optimization but it didn&#39;t worked(Code::Blocks). is there any other manual way to optimize the code?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 131, "user_id": 8675336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d0d75bb8284fdde4179eea6c75960b?s=128&d=identicon&r=PG&f=1", "display_name": "SgerS1", "link": "https://stackoverflow.com/users/8675336/sgers1"}, "edited": false, "score": 0, "creation_date": 1564613600, "post_id": 57295521, "comment_id": 101093303, "body": "To understand outcome of godbolt you have to be familiar with assembly code (CPU instructions). <code>call</code> instruction is a jump which add come back address on stack. Later <code>ret</code> instruction takes this address from stack and jumps to that address."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1564996494, "post_id": 57295521, "comment_id": 101198083, "body": "Where is <code>foo()</code>?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1565027387, "post_id": 57295521, "comment_id": 101213763, "body": "@curiousguy nowhere. It is not needed to show how compiler resolves code. So it is just declared as external. Adding <code>foo</code> with code would make compiler optimize more stuff  what could hide actual topic."}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": true, "score": 4, "last_activity_date": 1564591404, "creation_date": 1564591404, "answer_id": 57295521, "question_id": 57294944, "link": "https://stackoverflow.com/questions/57294944/program-returns-a-value-of-1073741571-instead-of-going-forever/57295521#57295521", "title": "Program returns a value of -1073741571 instead of going forever", "body": "<p>Ok so since this is gcc on Windows 10 take a look on this <a href=\"https://godbolt.org/z/EeY8g4\" rel=\"noreferrer\">goodbolt</a></p>\n\n<p>Without any optimization enabled both functions are explicitly called.</p>\n\n<pre><code>b():\n        push    rbp\n        mov     rbp, rsp\n        call    foo()\n        call    a()\n        nop\n        pop     rbp\n        ret\na():\n        push    rbp\n        mov     rbp, rsp\n        call    b()\n        nop\n        pop     rbp\n        ret\n</code></pre>\n\n<p>As other answer point out each call leaves on stack information how to come back to function which called function.\nNow since functions never return this information is never removed from stack, but is constantly added. As a result you have got stack overflow which on Windows is indicated by value <code>0xC00000FD</code>.</p>\n\n<p>Now if you enable optimization (<code>-O2</code>) compiler is able to figure out this is infinitive loop (using technique called tail recursion).</p>\n\n<pre><code>b():\n        sub     rsp, 8\n.L2:\n        call    foo()\n        jmp     .L2\na():\n        sub     rsp, 8\n.L6:\n        call    foo()\n        jmp     .L6\n</code></pre>\n\n<p>So with optimization enabled you will have infinitive loop as you are expecting.</p>\n"}], "owner": {"reputation": 131, "user_id": 8675336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d0d75bb8284fdde4179eea6c75960b?s=128&d=identicon&r=PG&f=1", "display_name": "SgerS1", "link": "https://stackoverflow.com/users/8675336/sgers1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 57295521, "answer_count": 3, "score": 1, "last_activity_date": 1566518498, "creation_date": 1564589156, "last_edit_date": 1566518498, "question_id": 57294944, "link": "https://stackoverflow.com/questions/57294944/program-returns-a-value-of-1073741571-instead-of-going-forever", "title": "Program returns a value of -1073741571 instead of going forever", "body": "<p>i'm learning about functions and decided to make a loop where two function(in this case <code>funcA</code> and <code>funcB</code> ) call each other forever but it stops execution after some time.\nThe code looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid funcA(); //forward declaration\n\n//funcB calls funcA \nvoid funcB()\n{\n    funcA();\n}\n\n//funcA prints 1 and calls funcB again \nvoid funcA()\n{\n    std::cout&lt;&lt;1;\n    funcB();\n}\n\n//main calls funcB\nint main()\n{\n    funcB();\n    return 0;\n}  \n</code></pre>\n\n<p>the returned value is <code>-1073741571</code> (<code>0xC00000FD</code>). can you expain why this happens?</p>\n"}, {"tags": ["c++", "constructor", "initializer-list", "default-copy-constructor"], "comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1564589225, "post_id": 57294924, "comment_id": 101084086, "body": "What standard are you compiling against? C++20 this should work, else you need to define the necessary constructor."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1564589239, "post_id": 57294924, "comment_id": 101084095, "body": "What version of C++ are you compiling your code as?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1564592250, "post_id": 57294924, "comment_id": 101085564, "body": "You can check which C++ standard you are using:  <code>std::cout &lt;&lt; &quot;C++ version &quot; &lt;&lt; __cplusplus &lt;&lt; &quot;\\n&quot;;</code>"}], "owner": {"reputation": 212, "user_id": 3779982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468ca70ed1dce0b43aecf9e5bc9089c8?s=128&d=identicon&r=PG", "display_name": "Freedom", "link": "https://stackoverflow.com/users/3779982/freedom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1564589227, "answer_count": 0, "score": 0, "last_activity_date": 1578499823, "creation_date": 1564589094, "last_edit_date": 1578499823, "question_id": 57294924, "link": "https://stackoverflow.com/questions/57294924/c-initializer-list-copy-constructor", "closed_reason": "Duplicate", "title": "C++ initializer list &amp; copy constructor", "body": "<p>I am facing an issue using the {} syntax alongside with the copy constructor.\nThe following code according to Stroustrup should work (I checked his book and he does this very same example multiple times) but when I try to compile it with gcc it fails (it compiles and works with clang though):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct A\n{\n    int a;\n    std::string s;\n};\n\nint main()\n{\n  A a{7, \"stefano\"};\n  A b{a};\n  std::cout &lt;&lt; \"Hello, \" &lt;&lt; b.s &lt;&lt; \"!\\n\";\n}\n</code></pre>\n\n<p>The compilation error is:\nerror: cannot convert 'A' to 'int' in initialization</p>\n\n<p>Clearly it is trying to use the initializer list as list of parameters (therefore trying to assign struct A to int), but according to the language specs it should be possible to call the copy constructor using the {} (and in fact it works in clang).</p>\n\n<p>Is this a peculiarity of gcc? Am I missing something?</p>\n\n<p>Edit: Solution Found:\nIt seems is a bug in the standard that should be fixed in C++14\n(check the \"Errata\" section here: <a href=\"http://stroustrup.com/4th.html\" rel=\"nofollow noreferrer\">http://stroustrup.com/4th.html</a> )</p>\n"}, {"tags": ["c++", "undefined-behavior", "ubsan"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1564588918, "post_id": 57294792, "comment_id": 101083926, "body": "What compiler and version are you using?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1564589278, "post_id": 57294792, "comment_id": 101084120, "body": "Have you tried it on your machine or only on godbolt.org? It&#39;s possible that the system on godbolt.org is configured such that ubsan fails."}, {"owner": {"reputation": 818, "user_id": 7091875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5553895fe341c842ebba11da4deef8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Petrenko", "link": "https://stackoverflow.com/users/7091875/nikita-petrenko"}, "edited": false, "score": 0, "creation_date": 1564591654, "post_id": 57294792, "comment_id": 101085302, "body": "That is interesting. I&#39;m also having trouble with UBSan, but on my program, and only under gcc. clang&#39;s sanitizers work OK  I&#39;ve found a lot of discussions on simular topics, e.g.: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39191\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=39191</a>"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1564644736, "post_id": 57294792, "comment_id": 101100674, "body": "I cannot reproduce this."}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1564645703, "post_id": 57294792, "comment_id": 101101208, "body": "It happens on all compilers although I noticed that the MWE only worked on godbolt. I produced the MWE by using my original code and subsequently stripping it down to the bare essentials that still produced the bug on godbolt to try different compilers and for people to play with it. Seems behavior there is indeed different, so I attached the original MWE which together with the link lead me to the cause. Not really satisfied with &quot;Upgrade Boost&quot; as a solution, but well..."}], "answers": [{"tags": [], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "is_accepted": true, "score": 5, "last_activity_date": 1564645478, "creation_date": 1564645478, "answer_id": 57304113, "question_id": 57294792, "link": "https://stackoverflow.com/questions/57294792/c-ubsan-produces-false-positives-with-derived-objects/57304113#57304113", "title": "C++ UBSAN produces false positives with derived objects", "body": "<p>Trying to answer this myself after the comments and creating another MWE.</p>\n\n<p>TLDR: Make sure all classes containing virtual functions are exported when compiling with <code>-fvisibility=hidden</code></p>\n\n<p>Consider a shared library Foo with</p>\n\n<p>foo.h</p>\n\n<pre><code>#define EXPORT __attribute__((visibility(\"default\")))\n\nstruct Foo{\n    virtual int g() = 0;\n};\n\nstruct Bar: Foo{\n    int g(){ return 42; }\n};\n\nEXPORT Foo* create();\n</code></pre>\n\n<p>foo.cpp\n    #include \"foo.h\"</p>\n\n<pre><code>Foo* create(){\n  return new Bar();\n}\n</code></pre>\n\n<p>Compiled with <code>clang++-8 foo.cpp -shared -fPIC -o foo.so</code></p>\n\n<p>And an executable linked against this using the virtual functions but with <code>-fvisibility</code>:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"foo.h\"\n\nint main(){\n  Foo* f  = create();\n  return f-&gt;g() != 42;\n}\n</code></pre>\n\n<p>Compiled with <code>clang++-8 -fsanitize=undefined -fvisibility=hidden main.cpp foo.so</code></p>\n\n<p>This will report </p>\n\n<blockquote>\n  <p>runtime error: member call on address 0x00000290cea0 which does not point to an object of type 'Foo'</p>\n</blockquote>\n\n<p>This is the same error as described in <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39191\" rel=\"noreferrer\">https://bugs.llvm.org/show_bug.cgi?id=39191</a> (thanks @Nikita Petrenko)</p>\n\n<p>Summary: With <code>fvisibility=hidden</code> not exported symbols (functions, classes not decorated with the attribute <code>__attribute__((visibility(\"default\")))</code> are not considered the same when used in different DSOs (e.g. executable and shared library). Hence the base class <code>Foo</code> in the shared library and the executable are distinct (they have different vtables) which UBSAN detects: The executable \"expects\" an object witg vtable of <code>Exe::Foo</code> but instead gets <code>Library::Foo</code></p>\n\n<p>In the boost case the class <code>sp_counted_base</code> is the culprit as it is not exported until Boost 1.69 which adds <code>BOOST_SYMBOL_EXPORT</code>, so switching to Boost 1.69+ fixes the issue.</p>\n"}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1561, "favorite_count": 1, "accepted_answer_id": 57304113, "answer_count": 1, "score": 5, "last_activity_date": 1564645497, "creation_date": 1564588660, "last_edit_date": 1592644375, "question_id": 57294792, "link": "https://stackoverflow.com/questions/57294792/c-ubsan-produces-false-positives-with-derived-objects", "title": "C++ UBSAN produces false positives with derived objects", "body": "<p>I wanted to use UBSAN (undefined behavior sanitizer) but found it completely worthless as it reports to many false positives.</p>\n<p>E.g. a simple <code>std::make_shared&lt;int&gt;(42);</code> is enough to trigger warnings like</p>\n<blockquote>\n<p>member access within address 0x00000236de70 which does not point to an object of type '_Sp_counted_base'</p>\n</blockquote>\n<p>Reducing this example to a MWE shows that the problem is more general with base classes and inheritance:</p>\n<p>Example:</p>\n<pre><code>struct Foo{\n    int f(){ return g(); }\n    virtual int g() = 0;\n};\n\nstruct Bar: Foo{\n    int g(){ return 42; }\n};\n\nint main(){\n    auto f = new Bar();\n    return f-&gt;g();\n}\n</code></pre>\n<p>Compile with <code>-fsanitize=undefined</code> and watch</p>\n<blockquote>\n<p>example.cpp:15:16: runtime error: member call on address 0x000000726e70 which does not point to an object of type 'Bar'</p>\n<p>0x000000726e70: note: object has invalid vptr</p>\n</blockquote>\n<p>See <a href=\"https://godbolt.org/z/0UiVtu\" rel=\"nofollow noreferrer\">https://godbolt.org/z/0UiVtu</a>.</p>\n<p>How are not even these simple cases properly handled? Did I miss anything? How should I properly use UBSAN to check my code? (This requires [almost] no false positives)</p>\n<p>Edit: As it seems the MWE only works on godbolt, the original code looks like this:</p>\n<pre><code>#include &lt;boost/iostreams/device/mapped_file.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\nusing MMStream = boost::iostreams::stream&lt;boost::iostreams::mapped_file_source&gt;;\n\nint main(){\n  MMStream stream;\n  stream.open(&quot;a.out&quot;);\n  return !stream;\n}\n</code></pre>\n<p>Compile with <code>clang++-8 -fsanitize=undefined -fvisibility=hidden -I /opt/boost_1_64_0/include/ test.cpp /opt/boost_1_64_0/lib/libboost_iostreams.so</code> and run which results in errors like</p>\n<blockquote>\n<p>runtime error: member call on address 0x00000126ef30 which does not point to an object of type 'boost::detail::sp_counted_base'</p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "traits", "constexpr"], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1564618135, "post_id": 57294855, "comment_id": 101094154, "body": "Actually great news: in C++20 <code>new</code>, <code>std::vector</code> and <code>std::string</code> are <code>constexpr</code>. Although I am not sure how it helps in this particular case."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1564656613, "post_id": 57294855, "comment_id": 101107100, "body": "@bolov - Interesting. I&#39;d have to investigate to figure out how that works. And I still strongly suspect that you still wouldn&#39;t be able to build up a data structure at compile time across compilation units."}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": false, "score": 1, "last_activity_date": 1564588861, "creation_date": 1564588861, "answer_id": 57294855, "question_id": 57294730, "link": "https://stackoverflow.com/questions/57294730/can-a-constexpr-linked-list-of-arbitrary-types-be-created/57294855#57294855", "title": "Can a constexpr linked list of arbitrary types be created?", "body": "<p>No.</p>\n\n<p><code>constexpr</code> things may not allocate memory with <code>new</code>. This limitation may eventually be removed. But for now, that's how it is.</p>\n\n<p>This precludes the use of any dynamically sized data type.</p>\n\n<p>OTOH, <code>constexpr</code> allows you to create statically sized data types with computed sizes (provided that computation can be done at compile time) relatively easily. This can probably be leveraged to do something like what you want.</p>\n\n<p>Except that building a type like this across several different compilation units is again not something that can be done. And that limitation is intrinsic to the C++ compile/link chain and will not be able to be removed without significantly changing it.</p>\n\n<p>So, No.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 5, "last_activity_date": 1564591603, "last_edit_date": 1564591603, "creation_date": 1564588873, "answer_id": 57294857, "question_id": 57294730, "link": "https://stackoverflow.com/questions/57294730/can-a-constexpr-linked-list-of-arbitrary-types-be-created/57294857#57294857", "title": "Can a constexpr linked list of arbitrary types be created?", "body": "<p>Compile time metaprogramming is for the most part pure.  This means each expression's result is determined by its arguments.</p>\n\n<p>There are exceptions that can get around it by using argument dependent lookup and friend functions and SFINAE in quite frankly insane ways.</p>\n\n<p>Don't do that.</p>\n\n<p>Build the policy traits class from its policies, don't hack around to get global state.</p>\n\n<p>TL;DR technically possible, but a horrible idea.  Don't do it.</p>\n\n<p>Possibly an adjacent problem to the one you drescribe has a clean and elegant solution.</p>\n"}], "owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57294857, "answer_count": 2, "score": 1, "last_activity_date": 1564591603, "creation_date": 1564588442, "last_edit_date": 1564589874, "question_id": 57294730, "link": "https://stackoverflow.com/questions/57294730/can-a-constexpr-linked-list-of-arbitrary-types-be-created", "title": "Can a constexpr linked list of arbitrary types be created?", "body": "<p>I'm trying to implement a trait-based policy subsystem and I have an issue which I don't really know how to tackle (if it's even possible). I have a traits that looks like this:</p>\n\n<pre><code>template &lt;typename ValueT, typename TagT = void, typename EnableT = void&gt;\nstruct TPolicyTraits\n{\n    static void Apply(ValueT&amp; value) { }\n};\n</code></pre>\n\n<p>And this trait can be specialized as such:</p>\n\n<pre><code>struct MyPolicy {};\n\ntemplate &lt;typename ValueT&gt;\nstruct TPolicyTraits&lt;ValueT, MyPolicy&gt;\n{\n    static void Apply(ValueT&amp; value) { /* Implementation */ }\n};\n</code></pre>\n\n<p>I would like to register policy at compile time in a sort of linked list. The policy system would be used like this:</p>\n\n<pre><code>namespace PolicyTraits\n{\n    template &lt;typename ValueT, typename TagT&gt;\n    using TPolicyTraitsOf = TPolicyTraits&lt;std::decay_t&lt;ValueT&gt;, TagT&gt;;\n\n    template &lt;typename ValueT&gt;\n    void Apply(ValueT&amp;&amp; value) \n    {\n        // todo iterate through constexpr tag list and apply policies\n    }\n\n    template &lt;typename TagT&gt;\n    constexpr void Enable()\n    {\n        // todo add tag to constexpr list\n    }\n}\n\nint main()\n{\n    PolicyTraits::Enable&lt;MyPolicy&gt;();\n    PolicyTraits::Apply(std::string());\n}\n</code></pre>\n\n<p>Is there any way to achieve this?</p>\n"}, {"tags": ["python", "c++", "windows", "winapi", "pyinstaller"], "comments": [{"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 1, "creation_date": 1564642995, "post_id": 57294642, "comment_id": 101099806, "body": "Have you tried to specified a temp folder with <code>--runtime-tmpdir PATH</code>?"}, {"owner": {"reputation": 595, "user_id": 2542835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jly03.jpg?s=128&g=1", "display_name": "Vikramaditya Gaonkar", "link": "https://stackoverflow.com/users/2542835/vikramaditya-gaonkar"}, "reply_to_user": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1564643453, "post_id": 57294642, "comment_id": 101100004, "body": "I have tried --runtime-tmpdir but I do not see any change. All it does it to give the location to unzip all the DLLs, so I am not sure why it would even work. Even if it worked, it would not be an option for me as I plan to ship this executable to unknown users whose TMPDIR I do not know about"}, {"owner": {"reputation": 595, "user_id": 2542835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jly03.jpg?s=128&g=1", "display_name": "Vikramaditya Gaonkar", "link": "https://stackoverflow.com/users/2542835/vikramaditya-gaonkar"}, "reply_to_user": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1564643869, "post_id": 57294642, "comment_id": 101100213, "body": "Here is the executable, in case you are interested in having a look: <a href=\"https://filebin.net/y7vudcftplokwrvo\" rel=\"nofollow noreferrer\">filebin.net/y7vudcftplokwrvo</a> I suspect that one can reproduce my issue only on Windows 7- SP0"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 1, "creation_date": 1564644230, "post_id": 57294642, "comment_id": 101100413, "body": "FYI. I am not able to repro it on windows 10 1903."}, {"owner": {"reputation": 595, "user_id": 2542835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jly03.jpg?s=128&g=1", "display_name": "Vikramaditya Gaonkar", "link": "https://stackoverflow.com/users/2542835/vikramaditya-gaonkar"}, "reply_to_user": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1564644851, "post_id": 57294642, "comment_id": 101100738, "body": "That is the same behavior that I have observed too. The question boils down to: Why can&#39;t LoadLibraryExW(python36.dll) not find the dependent DLLs which are in the same directory on only certain Windows machines"}], "answers": [{"tags": [], "owner": {"reputation": 595, "user_id": 2542835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jly03.jpg?s=128&g=1", "display_name": "Vikramaditya Gaonkar", "link": "https://stackoverflow.com/users/2542835/vikramaditya-gaonkar"}, "is_accepted": true, "score": 0, "last_activity_date": 1565352437, "creation_date": 1565352437, "answer_id": 57429746, "question_id": 57294642, "link": "https://stackoverflow.com/questions/57294642/pyinstaller-created-executable-can-not-find-dll-that-is-is-present-in-the-meipas/57429746#57429746", "title": "Pyinstaller created executable can not find DLL that is is present in the MEIPASS directory", "body": "<p>I solved this by building a new bootloader for pyinstaller which would load the CRT DLLs prior to loading Python3x.DLL. </p>\n\n<p>I am sure there must be a more elegant way to do solve the loading issue.</p>\n"}], "owner": {"reputation": 595, "user_id": 2542835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jly03.jpg?s=128&g=1", "display_name": "Vikramaditya Gaonkar", "link": "https://stackoverflow.com/users/2542835/vikramaditya-gaonkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 57429746, "answer_count": 1, "score": 0, "last_activity_date": 1565352437, "creation_date": 1564588166, "last_edit_date": 1564643954, "question_id": 57294642, "link": "https://stackoverflow.com/questions/57294642/pyinstaller-created-executable-can-not-find-dll-that-is-is-present-in-the-meipas", "title": "Pyinstaller created executable can not find DLL that is is present in the MEIPASS directory", "body": "<p>I am trying to create a onefile exe on Windows 7 using PyInstaller.\nThe executable is created without any errors:</p>\n\n<pre><code>88 INFO: PyInstaller: 3.5\n88 INFO: Python: 3.6.9\n88 INFO: Platform: Windows-7-6.1.7600-SP0\n88 DEBUG: Testing for UPX ...\n90 INFO: UPX is not available.\n92 DEBUG: script: numeca\\admin_tool\\admin_tool.py\n93 INFO: Extending PYTHONPATH with paths\n['C:\\\\Users\\\\vikramaditya\\\\Desktop\\\\admin_tool_2to3',\n 'C:\\\\Users\\\\vikramaditya\\\\Desktop\\\\admin_tool_2to3']\n93 INFO: checking Analysis\n93 INFO: Building Analysis because Analysis-00.toc is non existent\n93 INFO: Initializing module dependency graph...\n95 INFO: Initializing module graph hooks...\n97 INFO: Analyzing base_library.zip ...\n97 DEBUG: Collecting submodules for collections\n187 DEBUG: collect_submodules - Found submodules: {'collections', 'collections.abc'}\n188 DEBUG: Collecting submodules for encodings\n293 DEBUG: collect_submodules - Found submodules: {'encodings.cp1006', 'encodings.cp950', 'encodings.undefined', 'encodings.cp852', 'encodings.iso2022_jp_2', 'encodings.cp1026', 'encodings.iso8859_9', 'encodings.johab', 'encodings.iso2022_jp_2004', 'encodings.hz', 'encodings.gb2312', 'encodings.oem', 'encodings.utf_32_be', 'encodings.cp775', 'encodings.kz1048', 'encodings.cp1251', 'encodings.euc_jis_2004', 'encodings.uu_codec', 'encodings.cp857', 'encodings.cp1250', 'encodings.utf_16_le', 'encodings.charmap', 'encodings.iso2022_jp_3', 'encodings.iso8859_11', 'encodings', 'encodings.zlib_codec', 'encodings.aliases', 'encodings.iso8859_5', 'encodings.big5', 'encodings.mac_latin2', 'encodings.iso8859_4', 'encodings.bz2_codec', 'encodings.iso8859_1', 'encodings.utf_16_be', 'encodings.cp65001', 'encodings.mac_iceland', 'encodings.mac_roman', 'encodings.koi8_u', 'encodings.cp864', 'encodings.cp273', 'encodings.unicode_escape', 'encodings.iso2022_jp_1', 'encodings.cp858', 'encodings.iso8859_6', 'encodings.iso2022_jp_ext', 'encodings.cp1254', 'encodings.iso8859_3', 'encodings.palmos', 'encodings.tis_620', 'encodings.iso8859_16', 'encodings.utf_32', 'encodings.iso8859_8', 'encodings.cp875', 'encodings.iso8859_15', 'encodings.rot_13', 'encodings.idna', 'encodings.cp862', 'encodings.euc_jp', 'encodings.mac_croatian', 'encodings.euc_jisx0213', 'encodings.koi8_t', 'encodings.mbcs', 'encodings.koi8_r', 'encodings.cp863'}\n3771 DEBUG: Adding python files to base_library.zip\n3810 DEBUG: Hidden import: codecs\n3810 DEBUG: Hidden import 'codecs' already found\n3810 INFO: running Analysis Analysis-00.toc\n3810 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python.exe\n3836 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python.exe:\n3837 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n3837 INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of final executable\n  required by c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python.exe\n3837 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n3845 DEBUG: Adding api-ms-win-crt-math-l1-1-0.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-math-l1-1-0.dll\n3847 DEBUG: Adding python36.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python36.dll\n3849 DEBUG: Skipping KERNEL32.dll dependency of python.exe\n3851 DEBUG: Adding api-ms-win-crt-stdio-l1-1-0.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-stdio-l1-1-0.dll\n3853 DEBUG: Adding VCRUNTIME140.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\VCRUNTIME140.dll\n3854 DEBUG: Adding api-ms-win-crt-heap-l1-1-0.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-heap-l1-1-0.dll\n3855 DEBUG: Adding api-ms-win-crt-runtime-l1-1-0.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-runtime-l1-1-0.dll\n3857 DEBUG: Adding api-ms-win-crt-locale-l1-1-0.dll dependency of python.exe from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-locale-l1-1-0.dll\n3857 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-math-l1-1-0.dll\n3877 DEBUG: Adding ucrtbase.dll dependency of api-ms-win-crt-math-l1-1-0.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\ucrtbase.dll\n3877 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python36.dll\n3878 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python36.dll:\n3878 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n3879 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n3897 DEBUG: Adding api-ms-win-crt-time-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-time-l1-1-0.dll\n3898 DEBUG: Adding api-ms-win-crt-process-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-process-l1-1-0.dll\n3901 DEBUG: Skipping VERSION.dll dependency of python36.dll\n3903 DEBUG: Skipping ADVAPI32.dll dependency of python36.dll\n3906 DEBUG: Skipping WS2_32.dll dependency of python36.dll\n3908 DEBUG: Skipping SHLWAPI.dll dependency of python36.dll\n3910 DEBUG: Adding api-ms-win-crt-environment-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-environment-l1-1-0.dll\n3911 DEBUG: Adding api-ms-win-crt-string-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-string-l1-1-0.dll\n3913 DEBUG: Adding api-ms-win-crt-convert-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-convert-l1-1-0.dll\n3915 DEBUG: Skipping KERNEL32.dll dependency of python36.dll\n3924 DEBUG: Adding api-ms-win-crt-filesystem-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-filesystem-l1-1-0.dll\n3925 DEBUG: Adding api-ms-win-crt-conio-l1-1-0.dll dependency of python36.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-conio-l1-1-0.dll\n3925 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-stdio-l1-1-0.dll\n3938 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\VCRUNTIME140.dll\n3947 DEBUG: Skipping KERNEL32.dll dependency of VCRUNTIME140.dll\n3949 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-heap-l1-1-0.dll\n3955 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-runtime-l1-1-0.dll\n3965 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-locale-l1-1-0.dll\n3970 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\ucrtbase.dll\n3995 DEBUG: Adding api-ms-win-core-datetime-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-datetime-l1-1-0.dll\n3997 DEBUG: Adding api-ms-win-core-synch-l1-2-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-synch-l1-2-0.dll\n3998 DEBUG: Adding api-ms-win-core-sysinfo-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-sysinfo-l1-1-0.dll\n3999 DEBUG: Adding api-ms-win-core-interlocked-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-interlocked-l1-1-0.dll\n4001 DEBUG: Adding api-ms-win-core-file-l1-2-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-file-l1-2-0.dll\n4002 DEBUG: Adding api-ms-win-core-errorhandling-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-errorhandling-l1-1-0.dll\n4004 DEBUG: Adding api-ms-win-core-file-l2-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-file-l2-1-0.dll\n4005 DEBUG: Adding api-ms-win-core-memory-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-memory-l1-1-0.dll\n4006 DEBUG: Adding api-ms-win-core-heap-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-heap-l1-1-0.dll\n4008 DEBUG: Adding api-ms-win-core-namedpipe-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-namedpipe-l1-1-0.dll\n4010 DEBUG: Adding api-ms-win-core-processthreads-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-processthreads-l1-1-0.dll\n4011 DEBUG: Adding api-ms-win-core-string-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-string-l1-1-0.dll\n4013 DEBUG: Adding api-ms-win-core-file-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-file-l1-1-0.dll\n4014 DEBUG: Adding api-ms-win-core-handle-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-handle-l1-1-0.dll\n4016 DEBUG: Adding api-ms-win-core-localization-l1-2-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-localization-l1-2-0.dll\n4017 DEBUG: Adding api-ms-win-core-processenvironment-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-processenvironment-l1-1-0.dll\n4018 DEBUG: Adding api-ms-win-core-libraryloader-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-libraryloader-l1-1-0.dll\n4020 DEBUG: Adding api-ms-win-core-rtlsupport-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-rtlsupport-l1-1-0.dll\n4021 DEBUG: Adding api-ms-win-core-timezone-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-timezone-l1-1-0.dll\n4023 DEBUG: Adding api-ms-win-core-processthreads-l1-1-1.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-processthreads-l1-1-1.dll\n4024 DEBUG: Adding api-ms-win-core-console-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-console-l1-1-0.dll\n4026 DEBUG: Adding api-ms-win-core-profile-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-profile-l1-1-0.dll\n4027 DEBUG: Adding api-ms-win-core-debug-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-debug-l1-1-0.dll\n4028 DEBUG: Adding api-ms-win-core-util-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-util-l1-1-0.dll\n4030 DEBUG: Adding api-ms-win-core-synch-l1-1-0.dll dependency of ucrtbase.dll from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-synch-l1-1-0.dll\n4030 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-time-l1-1-0.dll\n4036 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-process-l1-1-0.dll\n4039 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-environment-l1-1-0.dll\n4042 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-string-l1-1-0.dll\n4054 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-convert-l1-1-0.dll\n4063 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-filesystem-l1-1-0.dll\n4068 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-conio-l1-1-0.dll\n4071 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-datetime-l1-1-0.dll\n4076 DEBUG: Skipping kernel32.dll dependency of api-ms-win-core-datetime-l1-1-0.dll\n...\n4149 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-localization-l1-2-0.dll\n4156 DEBUG: Skipping kernel32.dll dependency of api-ms-win-core-localization-l1-2-0.dll\n4158 DEBUG: Skipping normaliz.dll dependency of api-ms-win-core-localization-l1-2-0.dll\n4158 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-processenvironment-l1-1-0.dll\n4163 DEBUG: Skipping kernel32.dll dependency of api-ms-win-core-processenvironment-l1-1-0.dll\n4163 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-core-libraryloader-l1-1-0.dll\n4169 DEBUG: Skipping user32.dll dependency of api-ms-win-core-libraryloader-l1-1-0.dll\n4171 DEBUG: Skipping kernel32.dll dependency of api-ms-win-core-libraryloader-l1-1-0.dll\n...\n4216 INFO: Caching module hooks...\n4223 INFO: Analyzing numeca\\admin_tool\\admin_tool.py\n4227 INFO: Loading module hooks...\n4227 INFO: Loading module hook \"hook-encodings.py\"...\n4227 DEBUG: Collecting submodules for encodings\n4335 DEBUG: collect_submodules - Found submodules: {'encodings.cp1006', 'encodings.iso2022_jp_1', 'encodings.cp858', 'encodings.iso8859_6', 'encodings.iso2022_jp_ext', 'encodings.cp1254', 'encodings.iso8859_3', 'encodings.palmos', 'encodings.tis_620', 'encodings.iso8859_16', 'encodings.utf_32', 'encodings.iso8859_8', 'encodings.cp875', 'encodings.iso8859_15', 'encodings.rot_13', 'encodings.idna', 'encodings.cp862', 'encodings.euc_jp', 'encodings.mac_croatian', 'encodings.euc_jisx0213', 'encodings.koi8_t', 'encodings.mbcs', 'encodings.koi8_r', 'encodings.cp863'}\n4344 INFO: Loading module hook \"hook-pydoc.py\"...\n4345 INFO: Loading module hook \"hook-xml.py\"...\n4652 DEBUG: Looking for egg data files...\n4652 INFO: Looking for ctypes DLLs\n4652 INFO: Analyzing run-time hooks ...\n4659 INFO: Looking for dynamic libraries\n4660 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_ssl.pyd\n4661 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_ssl.pyd:\n4662 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4662 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4669 DEBUG: Skipping ADVAPI32.dll dependency of _ssl.pyd\n4671 DEBUG: Skipping USER32.dll dependency of _ssl.pyd\n4673 DEBUG: Skipping WS2_32.dll dependency of _ssl.pyd\n4675 DEBUG: Adding api-ms-win-crt-utility-l1-1-0.dll dependency of _ssl.pyd from c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-utility-l1-1-0.dll\n4677 DEBUG: Skipping KERNEL32.dll dependency of _ssl.pyd\n4680 DEBUG: Skipping CRYPT32.dll dependency of _ssl.pyd\n4682 DEBUG: Skipping GDI32.dll dependency of _ssl.pyd\n4682 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\pyexpat.pyd\n4683 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\pyexpat.pyd:\n4683 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4684 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4689 DEBUG: Skipping KERNEL32.dll dependency of pyexpat.pyd\n4689 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\unicodedata.pyd\n4690 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\unicodedata.pyd:\n4690 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4690 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4696 DEBUG: Skipping KERNEL32.dll dependency of unicodedata.pyd\n4696 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_hashlib.pyd\n4697 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_hashlib.pyd:\n4697 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4698 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4704 DEBUG: Skipping ADVAPI32.dll dependency of _hashlib.pyd\n4706 DEBUG: Skipping USER32.dll dependency of _hashlib.pyd\n4711 DEBUG: Skipping KERNEL32.dll dependency of _hashlib.pyd\n4713 DEBUG: Skipping GDI32.dll dependency of _hashlib.pyd\n4713 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_bz2.pyd\n4714 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_bz2.pyd:\n4714 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4714 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4720 DEBUG: Skipping KERNEL32.dll dependency of _bz2.pyd\n4720 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_lzma.pyd\n4721 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_lzma.pyd:\n4721 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4721 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4726 DEBUG: Skipping KERNEL32.dll dependency of _lzma.pyd\n4726 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_socket.pyd\n4727 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\_socket.pyd:\n4727 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4728 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4733 DEBUG: Skipping WS2_32.dll dependency of _socket.pyd\n4735 DEBUG: Skipping KERNEL32.dll dependency of _socket.pyd\n4735 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\select.pyd\n4736 DEBUG: Dependent assemblies of c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\DLLs\\select.pyd:\n4736 DEBUG: *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4736 DEBUG: Skipping assembly *_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.0.0_none\n4742 DEBUG: Skipping WS2_32.dll dependency of select.pyd\n4744 DEBUG: Skipping KERNEL32.dll dependency of select.pyd\n4744 DEBUG: Analyzing c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\api-ms-win-crt-utility-l1-1-0.dll\n4748 INFO: Looking for eggs\n4748 INFO: Using Python library c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\python36.dll\n4748 INFO: Found binding redirects: \n[]\n4757 INFO: Warnings written to C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\build\\admin_tool\\warn-admin_tool.txt\n4812 INFO: Graph cross-reference written to C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\build\\admin_tool\\xref-admin_tool.html\n4835 INFO: Graph drawing written to C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\build\\admin_tool\\graph-admin_tool.dot\n4866 INFO: Appending 'datas' from .spec\n4867 INFO: checking PYZ\n4867 INFO: Building PYZ because PYZ-00.toc is non existent\n4867 INFO: Building PYZ (ZlibArchive) C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\build\\admin_tool\\PYZ-00.pyz\n5506 INFO: Building PYZ (ZlibArchive) C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\build\\admin_tool\\PYZ-00.pyz completed successfully.\n5524 INFO: checking PKG\n5524 INFO: Building PKG because PKG-00.toc is non existent\n5524 INFO: Building PKG (CArchive) PKG-00.pkg\n5600 DEBUG: Compiling c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\lib\\site-packages\\PyInstaller\\loader\\pyiboot01_bootstrap.py\n5600 DEBUG: Compiling c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\lib\\site-packages\\PyInstaller\\loader\\pyiboot01_bootstrap.py\n5602 DEBUG: Compiling C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\numeca\\admin_tool\\admin_tool.py\n5602 DEBUG: Compiling C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\numeca\\admin_tool\\admin_tool.py\n7195 INFO: Building PKG (CArchive) PKG-00.pkg completed successfully.\n7204 INFO: Bootloader c:\\users\\vikramaditya\\desktop\\admin_tool_2to3\\__build_artifacts__\\_tmp_conda_env_3\\build_env_windows\\lib\\site-packages\\PyInstaller\\bootloader\\Windows-64bit\\run.exe\n7204 INFO: checking EXE\n7204 INFO: Building EXE because EXE-00.toc is non existent\n7204 INFO: Building EXE from EXE-00.toc\n7204 INFO: Appending archive to EXE C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\\admin_tool.exe\n7526 INFO: Building EXE from EXE-00.toc completed successfully.\n</code></pre>\n\n<p>However, when I try to run the executable it complains that \"The program can't start because <strong>api-ms-win-core-localization-l1-2-0.dll</strong> is missing from your computer. Try reinstalling the program to fix this problem\".\nAfter days of searching this is what I know:</p>\n\n<ol>\n<li>When the .exe is executed, api-ms-win-core-localization-l1-2-0.dl is present in the temporary MEIPASS directory. As you will see below, the <code>SetDllDirectory</code> has been set to the MEIPASS directory</li>\n<li>If that api-ms-win-core-localization-l1-2-0.dll is present in the same directory as the .exe, then it does not complain about this DLL. But it complains that it could not find another DLL api-ms-win-core-processthreads-l1-1-0.dll which is again presnt in the MEIPASS directory. If I copy all the DLLs from MEIPASS to the directory where I have the .exe, then it does not complain and the .exe executes normally.</li>\n<li>After digging through the bootloader of pyinstaller, I see that the crash happens during the function LoadLibraryExW(dllpath_w, NULL, LOAD_WITH_ALTERED_SEARCH_PATH) where it is trying to laod the Python36.dll. Changing the <code>dwFlags</code> to <code>LOAD_LIBRARY_SEARCH_DLL_LOAD_DIR</code> is not an option as I do not have <a href=\"http://go.microsoft.com/fwlink/p/?linkid=217865\" rel=\"nofollow noreferrer\">KB2533623</a> installed.</li>\n<li>I have stripped down my original python script to a <code>print(\"Hello World\")</code> and I am able to reproduce the issue even on that script.</li>\n<li>The executable executes normally on other Windows7 and Windows 10 machines.</li>\n<li>Including the DLLs from the <a href=\"https://pyinstaller.readthedocs.io/en/stable/usage.html?highlight=windows%207#platform-specific-notes\" rel=\"nofollow noreferrer\">CRT</a> as mentioned in the pyinstaller documentation did not help.</li>\n<li>If I set the environment variable PATH to the location of the DLLs then it works.</li>\n</ol>\n\n<p>Here is the execution log:</p>\n\n<pre><code>[1128] PyInstaller Bootloader 3.x\n[1128] LOADER: executable is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\\admin_tool.exe\n[1128] LOADER: homepath is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\n[1128] LOADER: _MEIPASS2 is NULL\n[1128] LOADER: archivename is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\\admin_tool.exe\n[1128] LOADER: Extracting binaries\n[1128] LOADER: Executing self as child\n[1128] LOADER: set _MEIPASS2 to C:\\Users\\vikramaditya\\AppData\\Local\\Temp\\_MEI11282\n[1128] LOADER: Setting up to run child\n[1128] LOADER: Creating child process\n[1128] LOADER: Waiting for child process to finish...\n[1172] PyInstaller Bootloader 3.x\n[1172] LOADER: executable is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\\admin_tool.exe\n[1172] LOADER: homepath is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\n[1172] LOADER: _MEIPASS2 is C:\\Users\\vikramaditya\\AppData\\Local\\Temp\\_MEI11282\n[1172] LOADER: archivename is C:\\Users\\vikramaditya\\Desktop\\admin_tool_2to3\\dist\\admin_tool.exe\n[1172] LOADER: SetDllDirectory(C:\\Users\\vikramaditya\\AppData\\Local\\Temp\\_MEI11282)\n[1172] LOADER: Already in the child - running user's code.\n[1172] LOADER: manifestpath: C:\\Users\\vikramaditya\\AppData\\Local\\Temp\\_MEI11282\\admin_tool.exe.manifest\n[1172] LOADER: Activation context created\n[1172] LOADER: Activation context activated\n[1172] LOADER: Python library: C:\\Users\\vikramaditya\\AppData\\Local\\Temp\\_MEI11282\\python36.dll\n</code></pre>\n\n<p>Has anyone come across something similar? Any ideas on what I should be looking for? I have tried various versions of python3 (the executable used to work correctly when I was on python2) and pyinstaller (3.3.1, 3.4, 3.5).\nAs you can see from the execution log, the windows 7 version is 7-6.1.7600-SP0 which is not updated but pyinstaller still supports it.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2019"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1564588146, "post_id": 57294566, "comment_id": 101083522, "body": "Output the value of the variable &#39;c&#39;."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 2, "creation_date": 1564588251, "post_id": 57294566, "comment_id": 101083568, "body": "The answer to the question &quot;is this a compiler bug&quot; is &quot;almost certainly no&quot;."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1564588300, "post_id": 57294566, "comment_id": 101083600, "body": "Aren&#39;t you curious as to what the value of <code>c</code> may be?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1564588499, "post_id": 57294566, "comment_id": 101083719, "body": "printing the value of <code>c</code> stops it crashing..."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 3, "creation_date": 1564588558, "post_id": 57294566, "comment_id": 101083747, "body": "Clearly a compiler bug... report it: Help -&gt; Send Feedback -&gt; Report a Problem..."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1564589366, "post_id": 57294566, "comment_id": 101084169, "body": "you can see the code generated at <a href=\"https://godbolt.org/z/CfRaTI\" rel=\"nofollow noreferrer\">godbolt.org/z/CfRaTI</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1564590624, "post_id": 57294566, "comment_id": 101084832, "body": "I reproduced the crash in x64 release mode in Visual Studio 2019. Version 16.1.3"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1564590736, "post_id": 57294566, "comment_id": 101084876, "body": "Reproduced in Visual Studio 2017, Ver 15.9.11. Example from cppref in similar conditions works well <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564591407, "post_id": 57294566, "comment_id": 101085190, "body": "It does not crash if you output <code>c</code>."}, {"owner": {"reputation": 139, "user_id": 1619888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bXQY.jpg?s=128&g=1", "display_name": "Adam Lindberg", "link": "https://stackoverflow.com/users/1619888/adam-lindberg"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1564662436, "post_id": 57294566, "comment_id": 101110420, "body": "Yes, I tried that too. This is also part of my phrasing &quot;very weird cirumstances&quot;. It seems that rustyx is right and I will report it. @drescherjm"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 1619888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bXQY.jpg?s=128&g=1", "display_name": "Adam Lindberg", "link": "https://stackoverflow.com/users/1619888/adam-lindberg"}, "is_accepted": true, "score": 0, "last_activity_date": 1567024779, "creation_date": 1567024779, "answer_id": 57699753, "question_id": 57294566, "link": "https://stackoverflow.com/questions/57294566/access-violation-only-in-release-x64/57699753#57699753", "title": "Access violation only in release x64", "body": "<p>This is a bug with the optimizer where it applies a pattern meant for signed integers to unsigned integers.</p>\n\n<p>I reported the bug and David Hartglass at Microsoft responded <a href=\"https://developercommunity.visualstudio.com/content/problem/672003/suspected-compiler-bug-only-in-release-x64.html\" rel=\"nofollow noreferrer\">here</a>. The bug is currently being worked on.</p>\n"}], "owner": {"reputation": 139, "user_id": 1619888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bXQY.jpg?s=128&g=1", "display_name": "Adam Lindberg", "link": "https://stackoverflow.com/users/1619888/adam-lindberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 3, "accepted_answer_id": 57699753, "answer_count": 1, "score": 6, "last_activity_date": 1567024779, "creation_date": 1564587889, "last_edit_date": 1564588105, "question_id": 57294566, "link": "https://stackoverflow.com/questions/57294566/access-violation-only-in-release-x64", "title": "Access violation only in release x64", "body": "<p>I am getting access violation in very weird circumstances with the <code>&lt;random&gt;</code> header. Is this a compiler bug? Here is the code:</p>\n\n<pre><code>#include &lt;random&gt;\n\nclass Foo {\npublic:\n    std::random_device rd;\n    std::mt19937_64 mt;\n    std::uniform_int_distribution&lt;int&gt; dist;\n\n    Foo();\n};\n\nFoo::Foo() : mt(rd()) {\n    dist = std::uniform_int_distribution&lt;int&gt;(0, 1);\n}\n\nint main() {\n    Foo foo;\n\n    int a[2];\n\n    int b[2] = { 0 };\n\n    for (int i = 0; i &lt; 2; i++) {\n        int c = foo.dist(foo.mt);\n        a[0] = b[c];\n        b[c] = b[0];\n    }\n}\n</code></pre>\n\n<p>If I instead replace the for-loop with the following, the code works without access violation!</p>\n\n<pre><code>{\n    int c = foo.dist(foo.mt);\n    a[0] = b[c];\n    b[c] = b[0];\n}\n\n{\n    int c = foo.dist(foo.mt);\n    a[0] = b[c];\n    b[c] = b[0];\n}\n</code></pre>\n\n<p>This only applies to Release x64 and I started out with an \"Empty project\". To me this seems like a bug. Am I missing something?</p>\n"}, {"tags": ["c++", "raspberry-pi", "serial-port", "termios", "raspberry-pi-zero"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564587842, "post_id": 57294369, "comment_id": 101083349, "body": "<i>The controller only operates at a strange 100000 baudrate</i> this makes things hard. You need to provide a valid <code>speed_t</code> value, and 100000 probably isn&#39;t valid. Is <a href=\"https://stackoverflow.com/questions/4968529/how-to-set-baud-rate-to-307200-on-linux\">How to set baud rate to 307200 on Linux?</a> any help?"}, {"owner": {"reputation": 1, "user_id": 11864731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52941dad77fb73b59c66498b3292eabb?s=128&d=identicon&r=PG&f=1", "display_name": "NurZumTest", "link": "https://stackoverflow.com/users/11864731/nurzumtest"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564590168, "post_id": 57294369, "comment_id": 101084579, "body": "I saw that post earlier and used the code to set the baurate. If it worked to set the baudrate, it stayed so until a reboot. But the strange additional bytes are the bigger problem."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564595430, "post_id": 57294369, "comment_id": 101086911, "body": "This shouldn&#39;t help (and if it somehow does, I&#39;m going to have to read more deeply into what the Standard says about the relationship between arrays and pointers) but I&#39;m always leery of stuff like  <code>::write(fd_, &amp;buf, 25);</code>. <code>buf</code> is an array. It automatically decays to a pointer. Remove a potential point of confusion from the code with <code>::write(fd_, buf, 25);</code>."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1564611851, "post_id": 57294369, "comment_id": 101092940, "body": "A serial link requires the same configuration of baud rate, character size, parity, and number of stop bits at both ends.  You neglect to mention how the serial port on this <i>&quot;drone flight controller&quot;</i> is configured.  Your program only configures two parameters, and leaves the other two parameters to chance.  IOW your termios configuration is incomplete.  Do not expect reliable serial communications.   BTW how are you determining what the <i>&quot;wrong&quot;</i> serial output is?"}, {"owner": {"reputation": 1, "user_id": 11864731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52941dad77fb73b59c66498b3292eabb?s=128&d=identicon&r=PG&f=1", "display_name": "NurZumTest", "link": "https://stackoverflow.com/users/11864731/nurzumtest"}, "edited": false, "score": 0, "creation_date": 1564612395, "post_id": 57294369, "comment_id": 101093059, "body": "The controller uses 100000 baud, 8 bits per byte (which is set by default), even parity (like it&#39;s set), an one stopbit (default). I measured the serial communication with a logic analyzer. The only problem is the baud rate, the rest is properly set. The right output is determined by the first loop (0 to 48 with a stepsize of to, which should get 0x00, 0x02 etc. in hex on the serial bus. But there is more on the bus, like I wrote."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1564618496, "post_id": 57294369, "comment_id": 101094222, "body": "Relying on default settings is the sure way to create an unreliable and quirky program. A program that &quot;worked&quot; yesterday, but doesn&#39;t today, or a program that sometimes produces unexpected results. That&#39;s what you have: sending <i>&quot;additional useless bytes&quot;</i>.   You do not have <i>&quot;the rest [is] properly set.&quot;</i>   One more time: your termios configuration is incomplete. The basic port settings, input &amp; output canonical modes, echo suppression, and character conversions are all left to chance. How do you know that this extra output is not the echoing of input? BTW a serial link is not a <i>&quot;bus&quot;</i>."}, {"owner": {"reputation": 1, "user_id": 11864731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52941dad77fb73b59c66498b3292eabb?s=128&d=identicon&r=PG&f=1", "display_name": "NurZumTest", "link": "https://stackoverflow.com/users/11864731/nurzumtest"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1564655055, "post_id": 57294369, "comment_id": 101106261, "body": "Thanks @sawdust. I&#39;ll never rely on default settings in the future."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11864731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52941dad77fb73b59c66498b3292eabb?s=128&d=identicon&r=PG&f=1", "display_name": "NurZumTest", "link": "https://stackoverflow.com/users/11864731/nurzumtest"}, "is_accepted": false, "score": 0, "last_activity_date": 1564654966, "creation_date": 1564654966, "answer_id": 57306873, "question_id": 57294369, "link": "https://stackoverflow.com/questions/57294369/why-does-the-raspberrypi-not-send-the-requested-serial-output/57306873#57306873", "title": "Why does the raspberrypi not send the requested serial output?", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/1599004/sawdust\">sawdust</a>, I know, that the problem was relying on the flags which are \"set by default\". Because they weren't. To fix my code, I added those flags, with the help of <a href=\"https://blog.mbedded.ninja/programming/operating-systems/linux/linux-serial-ports-using-c-cpp/#flow-control-crtscts\" rel=\"nofollow noreferrer\">this guide</a> about Linux serial programming:</p>\n\n<pre><code>options.c_cflag &amp;= ~CRTSCTS;\noptions.c_cflag |= CREAD | CLOCAL;\noptions.c_lflag &amp;= ~ICANON;\noptions.c_lflag &amp;= ~ECHO;\noptions.c_lflag &amp;= ~ECHOE;\noptions.c_lflag &amp;= ~ECHONL;\noptions.c_lflag &amp;= ~ISIG;\noptions.c_iflag &amp;= ~(IXON | IXOFF | IXANY);\noptions.c_iflag &amp;= ~(IGNBRK|BRKINT|PARMRK|ISTRIP|INLCR|IGNCR|ICRNL);\noptions.c_oflag &amp;= ~OPOST; \noptions.c_oflag &amp;= ~ONLCR;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11864731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52941dad77fb73b59c66498b3292eabb?s=128&d=identicon&r=PG&f=1", "display_name": "NurZumTest", "link": "https://stackoverflow.com/users/11864731/nurzumtest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564654966, "creation_date": 1564587196, "question_id": 57294369, "link": "https://stackoverflow.com/questions/57294369/why-does-the-raspberrypi-not-send-the-requested-serial-output", "title": "Why does the raspberrypi not send the requested serial output?", "body": "<p>I want to send some serial output through the pins of my raspberrypi for serial communication with a  drone flight controller. The controller only operates at a strange 100000 baudrate. </p>\n\n<ol>\n<li><p>My code does not always set the baudrate correctly. Sometimes I have to reboot and restart the code 5 times to get the right baudrate.</p></li>\n<li><p>The code does not send the requested data. It sends much more. The serial output of the console is disabled (by raspi-config).</p></li>\n</ol>\n\n<p>I tried writing it in python, but the code is running too slow (I need image processing with OpenCV too) so I switched to C++. The python code was working fine. I already tried the serial library by wjwood : <a href=\"http://wjwwood.github.com/serial/\" rel=\"nofollow noreferrer\">http://wjwwood.github.com/serial/</a> but it is also not working correctly whit the strange baudrate. Setting the baudrate with the stty command failed too.\nI tried setting the baudrate with the setispeed functions and the old termios structure. This didn't work too.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stropts.h&gt;\n#include &lt;asm/termios.h&gt;\n\n#include &lt;iostream&gt;\n\nint main()\n{\n   int fd_ = ::open(\"/dev/ttyAMA0\", O_RDWR);\n\n   struct termios2 options;\n\n   ioctl(fd_, TCGETS2, &amp;options);\n   options.c_cflag |= PARENB;\n   options.c_cflag &amp;= ~CBAUD;\n   options.c_cflag |= BOTHER;\n   options.c_ispeed = 100000;\n   options.c_ospeed = 100000;\n   options.c_cc[VTIME] = 10;\n   options.c_cc[VMIN] = 0;\n\n   unsigned char buf[25];\n   for (int i = 0; i != 25; i++)\n   {\n      buf[i] = 2 * i;\n   }\n   ioctl(fd_, TCSETS2, &amp;options);\n\n   for (int i = 0; i != 25; i++)\n   {\n      std::cout &lt;&lt; static_cast&lt;int&gt;(buf[i]) &lt;&lt; \" \";\n   }\n   std::cout &lt;&lt; std::endl;\n\n   ::write(fd_, &amp;buf, 25);\n   ::close(fd_);\n}\n</code></pre>\n\n<p>Expected is a serial output like: 0x00 0x02 0x04 ... 0x30.\nBut I get: 0x5E 0x4F 0x5E 0x40 ... 0x00 0x02 0x04 ... 0x30.</p>\n\n<p>The more I send the more additional useless bytes are blocking the bus and confusing the flight controller.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1564587026, "post_id": 57294238, "comment_id": 101082871, "body": "Is there perhaps a <code>template</code> header somewhere that you missed? If not, then we need the definitions of the classes <code>X</code> and <code>Y</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 6, "creation_date": 1564587227, "post_id": 57294238, "comment_id": 101082991, "body": "&quot;<i>I provided a link to the original code</i>&quot; If you&#39;re asking a question about code, you are supposed to provide the code in the question, not behind a link. Even a link on this very site."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 1, "creation_date": 1564589923, "post_id": 57294238, "comment_id": 101084471, "body": "C++ Templates: The Complete Guide (2nd Edition)  Is a good book to read about these things."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1564589156, "last_edit_date": 1564589156, "creation_date": 1564587771, "answer_id": 57294527, "question_id": 57294238, "link": "https://stackoverflow.com/questions/57294238/please-explain-the-following-c-syntax/57294527#57294527", "title": "Please explain the following C++ syntax", "body": "<p>With reference to your question numbers.</p>\n\n<ol>\n<li><p>To allow template argument deduction of <code>X</code> to occur when <code>_check</code> is called.</p></li>\n<li><p>Similarly for <code>Y</code>.</p></li>\n<li><p>To check that X + Y is not an error (i.e. that X+Y exists), and the \"={}\" is a default argument for the third parameter. So it doesn't have to be supplied when calling <code>_check</code></p></li>\n</ol>\n\n<p>EDIT</p>\n\n<p>If there is no operator+ then the version of <code>_check</code> that returns <code>true_type</code> is removed, leaving only the version of <code>_check</code> that returns <code>false_type</code>, so <code>_has_plus_hlp&lt;T,U&gt;::type</code> will be <code>false_type</code>. That's the basic mechanism of SFINAE.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6428095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1564640104, "accepted_answer_id": 57294527, "answer_count": 1, "score": 2, "last_activity_date": 1564589156, "creation_date": 1564586838, "last_edit_date": 1564588597, "question_id": 57294238, "link": "https://stackoverflow.com/questions/57294238/please-explain-the-following-c-syntax", "closed_reason": "Needs details or clarity", "title": "Please explain the following C++ syntax", "body": "<p>The code I'm about to present here is originally here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/57292886/gcc-check-whether-the-given-class-has-operator\">Gcc check whether the given class has operator+</a></p>\n\n<p>I did read about SFINAE, but this example is still very unclear to me. These things are never mentioned in literature.</p>\n\n<p>Even though I would like to get an explanation for the entire code, the most confusing part is:</p>\n\n<pre><code>static std::true_type _check(X&amp;, Y&amp;, decltype(std::declval&lt;X&gt;() + std::declval&lt;Y&gt;()) = {});\n</code></pre>\n\n<p>_check is a static member function taking 3 arguments?</p>\n\n<ol>\n<li>What is the point of the first argument, a reference to type X?</li>\n<li>What is the point of the second argument, a reference to type Y?</li>\n<li>decltype should return a type (I guess a type of result X + Y, whatever that is ). What is the point of that entire argument and what does it mean \"={}\" at the end?</li>\n</ol>\n\n<p>Edit:\nEven though I provided a link to the original code, nobody cares about it, so here is a copy/paste:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nstruct _has_plus_hlp {\n    template&lt;typename X, typename Y&gt;\n    static std::true_type _check(X&amp;, Y&amp;, decltype(std::declval&lt;X&gt;() + std::declval&lt;Y&gt;()) = {});\n    static std::false_type _check(...);\n\n    using type = decltype(_check(std::declval&lt;T&gt;(), std::declval&lt;U&gt;()));\n};\ntemplate&lt;typename X, typename Y&gt;\nconstexpr bool has_plus_v = _has_plus_hlp&lt;X, Y&gt;::type::value; \n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; detail::has_plus_v&lt;int, std::string&gt; &lt;&lt; std::endl;\n    auto f = [](auto&amp; a, auto&amp; b) {\n        std::cout &lt;&lt; std::boolalpha &lt;&lt; detail::has_plus_v&lt;decltype(a), decltype(b)&gt; &lt;&lt; std::endl;\n    };\n    std::string str = \"HELLO\";\n    int num = 5;\n    f(num, str);\n}\n</code></pre>\n\n<p>Edit #2:<br>\n@john So, if there is no operator+ defined for these two arbitrary types, what happens in that line of code? Also, can we omit the '=' from the \"={}\"?</p>\n"}, {"tags": ["c++", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1564587565, "post_id": 57294105, "comment_id": 101083185, "body": "Machine code for what? Normal x64/ARM or your own custom back end?"}, {"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1564590900, "post_id": 57294105, "comment_id": 101084959, "body": "Have you gone over the documentation? You probably need <code>llc</code>. However, what does TableGen have to do with what you&#39;re writing? Are you targeting a custom/imaginary machine (in which case you need to go over the relevant backend <a href=\"https://llvm.org/docs/WritingAnLLVMBackend.html\" rel=\"nofollow noreferrer\">doc</a>)?"}, {"owner": {"reputation": 934, "user_id": 8474738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdPIm.jpg?s=128&g=1", "display_name": "Nathanael Demacon", "link": "https://stackoverflow.com/users/8474738/nathanael-demacon"}, "edited": false, "score": 0, "creation_date": 1564595660, "post_id": 57294105, "comment_id": 101087013, "body": "What I want to do is generating the machine code (an executable) of the LLVM IR generated in the API. I&#39;m trying not to use <code>llc</code> or any other compiler/linker for this since LLVM API seems to can deal with the problem (?)"}, {"owner": {"reputation": 3524, "user_id": 829116, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dc2fd642323cb9bab9a050710290353?s=128&d=identicon&r=PG", "display_name": "AlexDenisov", "link": "https://stackoverflow.com/users/829116/alexdenisov"}, "edited": false, "score": 0, "creation_date": 1564660420, "post_id": 57294105, "comment_id": 101109241, "body": "Look at the ORC APIs, there is a <code>compiler</code> class that can generate an object file for you. We could help you better if you also provide the version of LLVM you use."}], "owner": {"reputation": 934, "user_id": 8474738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdPIm.jpg?s=128&g=1", "display_name": "Nathanael Demacon", "link": "https://stackoverflow.com/users/8474738/nathanael-demacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564586420, "creation_date": 1564586420, "question_id": 57294105, "link": "https://stackoverflow.com/questions/57294105/how-to-create-machine-code-from-llvm-ir-using-llvm-c-api", "title": "How to create machine code from LLVM IR using LLVM C++ API", "body": "<p>I want to convert LLVM IR to machine code using the C++ API, which I already use to create the IR. Their documentation is a big mess and I didn't found that much help to generate machine code with the API. It sure is explicated but without any example of how to use the classes they provide.</p>\n\n<p>For now I had discovered the TableGen which seems to be the way to go to generate the machine code but no example is provided.</p>\n\n<p>All I have is a complete module, context and builder</p>\n\n<pre><code>llvm::Module *module;\nllvm::LLVMContext context;\nllvm::IRBuilder&lt;&gt; builder;\n</code></pre>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 45, "user_id": 11864655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a1489946b32b008f85b37289e18df3?s=128&d=identicon&r=PG&f=1", "display_name": "GreyFox", "link": "https://stackoverflow.com/users/11864655/greyfox"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564586503, "post_id": 57294058, "comment_id": 101082622, "body": "@NathanOliver Thanks, I will try by adding a copy operator"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564586740, "post_id": 57294058, "comment_id": 101082724, "body": "Don&#39;t just add the copy constructor. Fully support the Rule of Three so that you don&#39;t find yourself with a nearly identical bug because the assignment operator is missing. While it may not be the most efficient solution, the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">Copy and Swap Idiom</a> makes writing the assignment operator ludicrously easy and is a great place to start."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1564586907, "post_id": 57294058, "comment_id": 101082809, "body": "@user4581301 They already have a copy constructor, they just don&#39;t have a copy assignment operator."}, {"owner": {"reputation": 45, "user_id": 11864655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a1489946b32b008f85b37289e18df3?s=128&d=identicon&r=PG&f=1", "display_name": "GreyFox", "link": "https://stackoverflow.com/users/11864655/greyfox"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564587102, "post_id": 57294058, "comment_id": 101082920, "body": "@NathanOliver Thank you very much, that actually solved the problem. I thought it was enough by adding the copy constructor, but was very wrong. If you post it as answer, I will accept it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564587155, "post_id": 57294058, "comment_id": 101082956, "body": "In that case I&#39;ll close the Q as a dupe, since it has already be asked and answered before.  Thanks for letting me know that worked for you."}], "owner": {"reputation": 45, "user_id": 11864655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a1489946b32b008f85b37289e18df3?s=128&d=identicon&r=PG&f=1", "display_name": "GreyFox", "link": "https://stackoverflow.com/users/11864655/greyfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1564587121, "answer_count": 0, "score": 0, "last_activity_date": 1564586272, "creation_date": 1564586272, "question_id": 57294058, "link": "https://stackoverflow.com/questions/57294058/double-free-or-corruption-prev-on-1d-dynamic-array", "closed_reason": "Duplicate", "title": "double free or corruption (!prev) on 1D dynamic array", "body": "<p>Working on a 3D render application, a class used to manage 3D Textures throws an <code>double free or corruption (!prev)</code> error when the class destructor is called.</p>\n\n<p>I have been browsing similar questions regarding the same issue, but none of them managed to solve my problem, since most of them are based on releasing twice the same memory. As I will show below in the code, this is something I have take care of (even through copy constructors).</p>\n\n<p>The class itself is the following</p>\n\n<pre><code>Texture3D::Texture3D()\n   : _width(0)\n   , _height(0)\n   , _depth(0)\n   , _data(nullptr)\n   , _textureId(GL_INVALID_VALUE)\n  {\n  }\n\n  Texture3D::Texture3D(const uint width_,\n                       const uint height_,\n                       const uint depth_)\n   : _width(width_)\n   , _height(height_)\n   , _depth(depth_)\n   , _data(nullptr)\n   , _textureId(GL_INVALID_VALUE)\n  {\n    if(_width &gt; 0 &amp;&amp; _height &gt; 0 &amp;&amp; _depth &gt; 0)\n    {\n      _data = new byte[_width * _height * _depth]();\n    }\n    else\n    {\n      throw std::runtime_error(\"Texture3D: zero or negative dimensions specified\");\n    }\n  }\n\n  Texture3D::Texture3D(const byte * data_,\n                       const uint width_,\n                       const uint height_,\n                       const uint depth_)\n   : Texture3D(width_, height_, depth_)\n  {\n    if(data_ != nullptr)\n    {\n      std::memcpy(_data, data_, width_ * height_ * depth_);\n    }\n  }\n\n  Texture3D::Texture3D(const Texture3D &amp; other_)\n    : _width(other_._width)\n    , _height(other_._height)\n    , _depth(other_._depth)\n    , _data(nullptr)\n    , _textureId(other_._textureId)\n  {\n    if(_width &gt; 0 &amp;&amp; _height &gt; 0 &amp;&amp; _depth &gt; 0)\n    {\n      _data = new byte[_width * _height * _depth]();\n    }\n    else\n    {\n      throw std::runtime_error(\"Texture3D: zero or negative dimensions specified\");\n    }\n\n    if(other_._data != nullptr)\n    {\n      std::memcpy(_data, other_._data, _width * _height * _depth);\n    }\n  }\n\n  Texture3D::~Texture3D()\n  {\n    destroy();\n  }\n\n  byte * Texture3D::getTextureData()\n  {\n    return _data;\n  }\n\n  uint Texture3D::getWidth()\n  {\n    return _width;\n  }\n\n  uint Texture3D::getHeight()\n  {\n    return _height;\n  }\n\n  uint Texture3D::getDepth()\n  {\n    return _depth;\n  }\n\n  void Texture3D::setValue(const uint iRow_,\n                           const uint jColumn_,\n                           const uint kDepth_,\n                           const byte value_)\n  {\n    if(_checkBounds(iRow_, jColumn_, kDepth_))\n    {\n      const uint frameSize = _width * _height;\n      uint index = kDepth_ * frameSize + jColumn_ * _width + iRow_;\n      _data[index] = value_;\n    }\n    else\n    {\n      throw std::runtime_error(\"Texture3D::setValue: one or more out of bounds indices passed\");\n    }\n  }\n\n  byte Texture3D::getValue(const uint iRow_,\n                           const uint jColumn_,\n                           const uint kDepth_)\n  {\n    if(_checkBounds(iRow_, jColumn_, kDepth_))\n    {\n      const uint frameSize = _width * _height;\n      uint index = kDepth_ * frameSize + jColumn_ * _width + iRow_;\n      return _data[index];\n    }\n    else\n    {\n      throw std::runtime_error(\"Texture3D::getValue: one or more out of bounds indices passed\");\n    }\n\n    return 0;\n  }\n\n  void Texture3D::upload()\n  {\n    glGenTextures(1, &amp;_textureId);\n    glBindTexture(GL_TEXTURE_3D, _textureId);\n      glTexStorage3D(GL_TEXTURE_3D, 6, GL_R8, _width, _height, _depth);\n      glTexImage3D(GL_TEXTURE_3D, 0, GL_R8, _width, _height, _depth, 0,  GL_RED,  GL_UNSIGNED_BYTE, _data);\n    glGenerateMipmap(GL_TEXTURE_3D);\n  }\n\n  void Texture3D::destroy()\n  {\n    if(_textureId != GL_INVALID_VALUE)\n    {\n      glDeleteTextures(1, &amp;_textureId);\n      _textureId = GL_INVALID_VALUE;\n    }\n\n    if(_data != nullptr)\n    {\n      delete[] _data;\n      _data = nullptr;\n    }\n  }\n\n  uint Texture3D::getTextureId()\n  {\n    return _textureId;\n  }\n\n  uint Texture3D::getTextureId() const\n  {\n    return _textureId;\n  }\n\n  inline bool Texture3D::_checkBounds(const uint i_,\n                                      const uint j_,\n                                      const uint k_)\n  {\n    return i_ &lt; _width &amp;&amp; j_ &lt; _height &amp;&amp; k_ &lt; _depth;\n  }\n</code></pre>\n\n<p>The error is thrown in the destructor, which calls the function <code>destroy()</code></p>\n\n<pre><code>  void Texture3D::destroy()\n  {\n    if(_textureId != GL_INVALID_VALUE)\n    {\n      glDeleteTextures(1, &amp;_textureId);\n      _textureId = GL_INVALID_VALUE;\n    }\n\n    if(_data != nullptr)\n    {\n      delete[] _data;\n      _data = nullptr;\n    }\n  }\n</code></pre>\n\n<p>If I comment the line <code>delete[] _data;</code>, The error disappear. However, as you might understand, I do not want to leave the memory allocated if I destroy the object. </p>\n\n<p>I know I could/should use smart pointers or the class vector, but at this point I would like to know why is the error being thrown, when I make sure the pointer is valid before deleting it, and set it to nullptr after releasing it. As you can also see in the copy constructor, I do not copy the pointer itself, I allocate new memory for the object being created and copy the contents, if the pointer of the source object is valid.</p>\n\n<p>Am I forgetting to do something, or is there any error I dont see in the code? </p>\n\n<p>Note: </p>\n\n<ul>\n<li><code>uint</code> is <code>typedef unsigned int uint;</code> </li>\n<li><code>byte</code> is <code>typedef unsigned\nchar byte;</code></li>\n</ul>\n"}, {"tags": ["c++", "c++11"], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 4, "last_activity_date": 1564585365, "creation_date": 1564585365, "answer_id": 57293797, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57293797#57293797", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>Explicitly delete the constructor for <code>double</code> (possibly add <code>float</code>):</p>\n\n<pre><code>A(double) = delete;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 31, "last_activity_date": 1564585374, "creation_date": 1564585374, "answer_id": 57293800, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57293800#57293800", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>The way to achieve this is to provide another constructor that would be a better match, and then <code>delete</code> it so you'll get an error.  For your class, adding</p>\n\n<pre><code>template &lt;typename T&gt;\nA(T) = delete;\n</code></pre>\n\n<p>Will stop the class from being constructed from anything that isn't an <code>int</code></p>\n"}, {"comments": [{"owner": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 5, "creation_date": 1564665872, "post_id": 57293816, "comment_id": 101112389, "body": "@Alexander C++ is one of the oldest high level languages that still sees active use in new projects. The only languages that are older and still actively used AFAIK are FORTRAN, COBOL and LISP. A consequence of that is that C++ has A LOT more flexibility than younger languages like Java or C#, but that flexibility comes at the cost of being a lot easier to screw something up."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "reply_to_user": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "edited": false, "score": 0, "creation_date": 1564672904, "post_id": 57293816, "comment_id": 101116722, "body": "@Nzall Flexibility is fine, but implicit-conversion-by-default sounds crazy to me. I haven&#39;t used C# much, but I know that it has implicit conversion operators, but they&#39;re not the default, and require explicit opt-in (unlike here, where <code>explicit</code> has to be explicitly stated to opt-out of implicit behaviour). Along these lines, I also <i>really</i> wished <code>const</code> was the default. The compiler can catch a non-const reference to a const variable, and require you to write <code>mutating</code> (or something to that effect). But it never suggested &quot;this can (should?) be const, btw&quot;, in any compiler/IDE i&#39;ve seen"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 4, "creation_date": 1564673016, "post_id": 57293816, "comment_id": 101116775, "body": "@Alexander <i>&quot;implicit-conversion-by-default sounds crazy to me&quot;</i> It sounds crazy to all C++ developpers. But the choice to do so has been made eons ago and we&#39;re now all paying the price."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1564675297, "post_id": 57293816, "comment_id": 101118058, "body": "@YSC Oh, okay, that&#39;s kind of relieving to hear, actually. I thought I was taking crazy pills. Was it ever considered to make source-breaking changes, enabled by a compiler flag, macro at the top of the file, etc.? <code>__EXLICIT_OPERATORS_BY_DEFAULT</code> or something"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "edited": false, "score": 7, "creation_date": 1564679879, "post_id": 57293816, "comment_id": 101120091, "body": "@Nzall Are you suggesting that C is not used much in new projects? Or that it&#39;s not a high level language?"}, {"owner": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1564682446, "post_id": 57293816, "comment_id": 101121194, "body": "@Barmar Oh right, I forgot about C. Still, C and C++ are very similar and can pretty much be considered together when talking about this. I&#39;m not saying they&#39;re interchangeable, but considering Alexander is talking about C++ having sharp edges, I kept C out of it because from what I understand, C++ is considered a cotton swab compared to C in that respect."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "edited": false, "score": 8, "creation_date": 1564685157, "post_id": 57293816, "comment_id": 101122357, "body": "@Nzall I&#39;ve been programming for over 40 years, I&#39;m proficient in about a half dozen languages and familiar with many more. Modern C++ seems to be in a class by itself in terms of complexity (I remember thinking similarly about Ada when it first came out, but C++ far eclipses that). But I guess that&#39;s a testament to its popularity -- they wouldn&#39;t keep adding on to it if no one cared."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 3169, "user_id": 1770430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/n7Ycz.jpg?s=128&g=1", "display_name": "Nzall", "link": "https://stackoverflow.com/users/1770430/nzall"}, "edited": false, "score": 0, "creation_date": 1564757371, "post_id": 57293816, "comment_id": 101147748, "body": "@Nzall C is so, soo much simpler than C++, it&#39;s not even in the same league. C as a language is one of the simplest ones around (there just isn&#39;t much to it), C++ is most certainly the most complicated one of the mainstream languages."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1564764501, "post_id": 57293816, "comment_id": 101151151, "body": "@Barmar Quite literally; template syntax <i>on its own</i> is Turing-complete. The C++ <i>parser</i> is subject to the halting problem."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 75, "last_activity_date": 1564585452, "creation_date": 1564585452, "answer_id": 57293816, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57293816#57293816", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>You can <code>delete</code> <code>A::A(&lt;anything not an int&gt;);</code>:</p>\n\n<pre><code>struct A\n{\n    explicit A(int a)\n    : num(a)\n    {}\n\n    template&lt;class T&gt;\n    A(T) = delete;\n\n    int num;\n};\n\nint main()\n{\n    //A a1=A(10.0); // error: use of deleted function 'A::A(T) [with T = double]'\n    A a2 = A(10); // OK\n    (void) a2;\n}\n</code></pre>\n\n<p>Demo: <a href=\"https://coliru.stacked-crooked.com/a/425afc19003697c9\" rel=\"noreferrer\">https://coliru.stacked-crooked.com/a/425afc19003697c9</a></p>\n"}, {"tags": [], "owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "is_accepted": false, "score": 6, "last_activity_date": 1564650157, "creation_date": 1564650157, "answer_id": 57305384, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57305384#57305384", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>I just want to add that the <code>A(double) = delete</code> is a <code>C++11</code> addition.</p>\n\n<p>If for whatever reason you cannot use this relatively new construct, you can simply declare it as private as this:</p>\n\n<pre><code>class A{\n  public:\n    A(int);\n  private:\n    A(double);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "is_accepted": false, "score": 5, "last_activity_date": 1564862625, "last_edit_date": 1564862625, "creation_date": 1564671980, "answer_id": 57311996, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57311996#57311996", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>To avoid int->double conversions everywhere, not only in your case. With g++ you can use <code>-Wconversion -Werror</code>. Note that it'll be allowed in your particular case, because the compiler understands that 10.0 is literal, but it will fail compilation for:</p>\n\n<pre><code>class A\n{\npublic:\n    explicit A(int a)\n    {\n        num = a;\n    }\n\n    int num;\n};\n\nint main()\n{\n    double x = 10;\n    A a1 = A(x);\n    static_cast&lt;void&gt;(a1);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/L7547n\" rel=\"nofollow noreferrer\">Compiler explorer</a></p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11874390, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c8524a5afa047ddf0af99691e5b667ec?s=128&d=identicon&r=PG", "display_name": "IHopeImHelpful", "link": "https://stackoverflow.com/users/11874390/ihopeimhelpful"}, "is_accepted": false, "score": 8, "last_activity_date": 1564752111, "creation_date": 1564752111, "answer_id": 57327385, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57327385#57327385", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>You can circumvent this problem by using braced initialization. For example:</p>\n\n<pre><code>struct A {\n  A(int _a) : a(_a) {}\n  int a;\n};\n\nA a{5}; // ok\nA b{1.123}; // compile error\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/TjDQHH\" rel=\"noreferrer\">Proof</a></p>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": false, "score": 4, "last_activity_date": 1564752977, "creation_date": 1564752977, "answer_id": 57327620, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help/57327620#57327620", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>You should use the -Wconversion flag of gcc, that will generate a warning when implicitly casting a float to an int.\nAdd -Werror to transform this warning (all in fact) into an error.</p>\n"}], "owner": {"reputation": 671, "user_id": 11402457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gurpreet Dhami", "link": "https://stackoverflow.com/users/11402457/gurpreet-dhami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3077, "favorite_count": 4, "answer_count": 7, "score": 56, "last_activity_date": 1564862676, "creation_date": 1564585209, "last_edit_date": 1564862676, "question_id": 57293752, "link": "https://stackoverflow.com/questions/57293752/avoiding-implicit-conversion-in-constructor-the-explicit-keyword-doesnt-help", "title": "Avoiding implicit conversion in constructor. The &#39;explicit&#39; keyword doesn&#39;t help here", "body": "<p>I am able to avoid the implicit conversion of a constructor using the <code>explicit</code> keyword. So now, conversions like <code>A a1 = 10;</code> can be avoided.</p>\n\n<p>But still I can initialize <code>A a1 = A(20.2);</code>. How can I disable the object creation such that an object can only be created if we pass an integer as a parameter e.g. <code>A a1 = A(10)</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\npublic:\n    explicit A(int a)\n    {\n        num = a;\n    }\n\n    int num;\n};\n\nint main()\n{\n    A a1 = A(10.0);\n    std::cout &lt;&lt; a1.num;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "sql-like"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1564585104, "post_id": 57293686, "comment_id": 101081775, "body": "look into <code>std::string</code> and <code>std::string::find</code> and <code>std::regex</code> and <code>std::regex_match</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1564585106, "post_id": 57293686, "comment_id": 101081776, "body": "since c++11 there is <code>&lt;regex&gt;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1564585152, "post_id": 57293686, "comment_id": 101081805, "body": "please note that asking to find open source code is off-topic. You can reformulate the question to be less  suspectible to be closed for being off-topic"}, {"owner": {"reputation": 55, "user_id": 4306215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b7e863adc319ade10f99265bd07dda5?s=128&d=identicon&r=PG&f=1", "display_name": "user29809", "link": "https://stackoverflow.com/users/4306215/user29809"}, "edited": false, "score": 0, "creation_date": 1564729584, "post_id": 57293686, "comment_id": 101133722, "body": "Essentially, it&#39;s the same algorithm as the wild card string matching, also known as globbing(?). I found an algorithm <a href=\"https://www.geeksforgeeks.org/wildcard-pattern-matching/\" rel=\"nofollow noreferrer\">here</a>."}], "owner": {"reputation": 55, "user_id": 4306215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b7e863adc319ade10f99265bd07dda5?s=128&d=identicon&r=PG&f=1", "display_name": "user29809", "link": "https://stackoverflow.com/users/4306215/user29809"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1564585464, "answer_count": 0, "score": 0, "last_activity_date": 1564585017, "creation_date": 1564585017, "question_id": 57293686, "link": "https://stackoverflow.com/questions/57293686/algorithm-for-the-sql-like-operator-in-c", "closed_reason": "Duplicate", "title": "Algorithm for the SQL &#39;LIKE&#39; operator in C++", "body": "<p>I need to write a function that implements the SQL 'LIKE' operator.</p>\n\n<p>For example the sql sentence:</p>\n\n<pre><code>  SELECT .... WHERE company_name LIKE '%soft'\n</code></pre>\n\n<p>Then I need to call my function like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  char *company_name = \"Microsoft\";\n  bool match = string_like( company_name, \"%soft\"); // must return true\n</code></pre>\n\n<p>Now, is there a predefined function in C++ that does this? If not, where can I find an algorithm or open source code for the \"string_like\" function?</p>\n"}, {"tags": ["c#", "c++", "dll", ".net-core"], "comments": [{"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1564585457, "post_id": 57293646, "comment_id": 101081999, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44861236/make-a-net-standard-library-com-visible\">Make a .NET Standard library COM-Visible?</a>"}, {"owner": {"reputation": 81, "user_id": 9523443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192a3b289a9553cdc0164ff099358d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Rodgers", "link": "https://stackoverflow.com/users/9523443/brian-rodgers"}, "reply_to_user": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1564590594, "post_id": 57293646, "comment_id": 101084819, "body": "I don&#39;t think it&#39;s a duplicate as COM is windows based and I&#39;m trying to use it on Linux."}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1564591179, "post_id": 57293646, "comment_id": 101085091, "body": ".NET Standard is cross platform."}], "owner": {"reputation": 81, "user_id": 9523443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192a3b289a9553cdc0164ff099358d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Rodgers", "link": "https://stackoverflow.com/users/9523443/brian-rodgers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564650858, "creation_date": 1564584855, "last_edit_date": 1564650858, "question_id": 57293646, "link": "https://stackoverflow.com/questions/57293646/port-c-com-dll-to-linux", "title": "Port C# COM dll to Linux", "body": "<p>I have a .NET Framework C# dll with a COM layer that gets exposed and picked up by a customer C/C++ application. Now the customer wants to call the dll from Linux. I can port the code to .NET Core, but how do I replace the COM layer so that the customer can use the dll from their C/C++ application (without the customer having to change their code)? I can put my own C/C++ layer in as an bridge if necessary, but don't know where to start in exposing the C# side.</p>\n\n<p>Edit: The COM in my original issue solved my original problem of moving between unmanaged and managed code in a Windows environment. The COM element was not going to work on Linux, so rather than trying to replace COM i should have gone back to the original issue - moving from unmanaged to managed code.\nAs such, there is a good article here....</p>\n\n<p><a href=\"https://www.codeproject.com/Articles/1276328/Hosting-NET-Core-Components-in-Unmanaged-C-Cpluspl\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/1276328/Hosting-NET-Core-Components-in-Unmanaged-C-Cpluspl</a></p>\n\n<p>This goes some way towards solving the problem.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1564584591, "post_id": 57293461, "comment_id": 101081426, "body": "Have you seen: <a href=\"https://en.cppreference.com/w/cpp/numeric/math/modf\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/math/modf</a>?  Also, you can look at the source for libstdc++ and libc++ to see how it is implemented."}, {"owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564584719, "post_id": 57293461, "comment_id": 101081525, "body": "@NathanOliver: I did see the reference, but it mentions that the function is implemented <i>as though</i> it were done the way they showed, plus the question just gets kicked down the line: how does the rounding work.  I did not, however, look at the source, so I suppose I should go do that.  Thanks!"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564584732, "post_id": 57293461, "comment_id": 101081534, "body": "I&#39;m sure when you look at the code you&#39;ll see that it manipulates the bits directly."}, {"owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "edited": false, "score": 0, "creation_date": 1564587138, "post_id": 57293461, "comment_id": 101082944, "body": "Also, to add, while looking at the code will help you understand what kind of tricks could be used to implement such a function, how it is actually implemented might be different in different implementations of the library, which might or might not perform better."}], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 3529065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d3b2ce14931ce2caede7e1896a0bb15?s=128&d=identicon&r=PG&f=1", "display_name": "Hagadol", "link": "https://stackoverflow.com/users/3529065/hagadol"}, "is_accepted": true, "score": 1, "last_activity_date": 1564587152, "creation_date": 1564587152, "answer_id": 57294354, "question_id": 57293461, "link": "https://stackoverflow.com/questions/57293461/how-does-the-c-function-modf-work-internally/57294354#57294354", "title": "How does the C++ function `modf` work internally?", "body": "<p>Looking around, I found an implementation <a href=\"http://www.netlib.org/fdlibm/s_modf.c\" rel=\"nofollow noreferrer\">source</a>,</p>\n\n<pre><code>#ifdef __STDC__\n    double modf(double x, double *iptr)\n#else\n    double modf(x, iptr)\n    double x,*iptr;\n#endif\n{\n    int i0,i1,j0;\n    unsigned i;\n    i0 =  __HI(x);      /* high x */\n    i1 =  __LO(x);      /* low  x */\n    j0 = ((i0&gt;&gt;20)&amp;0x7ff)-0x3ff;    /* exponent of x */\n    if(j0&lt;20) {         /* integer part in high x */\n        if(j0&lt;0) {          /* |x|&lt;1 */\n        __HIp(iptr) = i0&amp;0x80000000;\n        __LOp(iptr) = 0;        /* *iptr = +-0 */\n        return x;\n        } else {\n        i = (0x000fffff)&gt;&gt;j0;\n        if(((i0&amp;i)|i1)==0) {        /* x is integral */\n            *iptr = x;\n            __HI(x) &amp;= 0x80000000;\n            __LO(x)  = 0;   /* return +-0 */\n            return x;\n        } else {\n            __HIp(iptr) = i0&amp;(~i);\n            __LOp(iptr) = 0;\n            return x - *iptr;\n        }\n        }\n    } else if (j0&gt;51) {     /* no fraction part */\n        *iptr = x*one;\n        __HI(x) &amp;= 0x80000000;\n        __LO(x)  = 0;   /* return +-0 */\n        return x;\n    } else {            /* fraction part in low x */\n        i = ((unsigned)(0xffffffff))&gt;&gt;(j0-20);\n        if((i1&amp;i)==0) {         /* x is integral */\n        *iptr = x;\n        __HI(x) &amp;= 0x80000000;\n        __LO(x)  = 0;   /* return +-0 */\n        return x;\n        } else {\n        __HIp(iptr) = i0;\n        __LOp(iptr) = i1&amp;(~i);\n        return x - *iptr;\n        }\n    }\n}\n</code></pre>\n\n<p>but can not say for certain whether or not this is the one currently used. As you suspected, it is not identical to the explanation given at cppreference. It directly manipulates the bits within the floating point number. I did not work through the details of this optimized code but do not suspect anything particularly deep.</p>\n"}], "owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57294354, "answer_count": 1, "score": 1, "last_activity_date": 1564587152, "creation_date": 1564584295, "question_id": 57293461, "link": "https://stackoverflow.com/questions/57293461/how-does-the-c-function-modf-work-internally", "title": "How does the C++ function `modf` work internally?", "body": "<p>I get what it does, but I'd like to know what the function is doing internally to separate out the floating point number.  I can think of a really hacky way to do it using an integer cast, but I'm really hoping that it's a more elegant solution than that...Does it access the bits directly and convert?</p>\n"}, {"tags": ["c++", "performance", "number-crunching"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1564584375, "post_id": 57293423, "comment_id": 101081287, "body": "1 wont have any better performance than 2.  When compiling with optimizations, <code>vector</code> pretty much gets optimized away."}, {"owner": {"reputation": 431, "user_id": 2748344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000131989464/picture?type=large", "display_name": "caiomcg", "link": "https://stackoverflow.com/users/2748344/caiomcg"}, "edited": false, "score": 0, "creation_date": 1564584478, "post_id": 57293423, "comment_id": 101081351, "body": "I think the rule of thumb is try to stick with std containers, std::vector or std::array(fixed size). If you need pointers try not to expose them, use smart pointers std::unique_ptr or std::shared_ptr (last case as this contain significant overhead)"}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1564584855, "post_id": 57293423, "comment_id": 101081621, "body": "the forth solution is to use <code>std::unique_ptr&lt;double[]&gt;</code>. And it&#39;s the best if you need a replacement for the first one and nothing more."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1564584925, "post_id": 57293423, "comment_id": 101081669, "body": "The general recommendation is that closely related data should be structured as a single unit. Like your <code>Vertex</code> structure. And using a vector (or array) of vertex structures is very common and often used in &quot;mathematical calculations&quot; using parallelism or CUDA kernels or the like."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1564585864, "post_id": 57293423, "comment_id": 101082245, "body": "<code>std::array</code> or <code>std::vector</code>. <i>Not</i> raw arrays."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 2, "creation_date": 1564586051, "post_id": 57293423, "comment_id": 101082345, "body": "AoS <i>vs.</i> SoA is something of a field of research all of its own.  Conceptually, parallel arrays are plainly inferior, but that doesn\u2019t always carry the day."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1564586246, "post_id": 57293423, "comment_id": 101082459, "body": "Note: names like <code>Array_1</code> in your <code>struct Vertex</code> are misleading - these are not arrays and not meant to be arrays."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1564586254, "post_id": 57293423, "comment_id": 101082463, "body": "@JesperJuhl: <code>array</code> is obviously wrong here\u2014this is between <code>unique_ptr</code> and <code>vector</code>, and is really the long-rejected <code>dynarray</code> (plus the <code>struct</code> business)."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1564587349, "post_id": 57293423, "comment_id": 101083062, "body": "Most probably you will access three coordinates <code>x</code>, <code>y</code>, <code>z</code> of one vertex in one bit of code, in very close time, thus the third sample, the array of vertexes, is better for CPU caches and predictions, since three coordinates of each vertex will be placed in small memory region."}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 1, "creation_date": 1564588480, "post_id": 57294219, "comment_id": 101083711, "body": "One recommendation: <code>Get_all_points_at_index</code> should probably return <code>std::array&lt;double, 3&gt;</code>, or a special <code>Vertex</code> type, just to communicate the size guarantee (not to mention avoiding a performance hit from repeated dynamic allocation)."}], "tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 2, "last_activity_date": 1564586784, "creation_date": 1564586784, "answer_id": 57294219, "question_id": 57293423, "link": "https://stackoverflow.com/questions/57293423/declaring-array-data-inside-a-class-c/57294219#57294219", "title": "Declaring array data inside a class C++", "body": "<p>Don't use raw arrays. Options 2 and 3 are reasonable, the difference depends on how you'll be traversing the data. If you'll frequently be going through the arrays individually, you should store them as in solution #2 because each vector will be stored contiguously in memory. If you'll be going through them as sets of points, then solution 3 is probably better. If you want to go with solution #2 and it's critical that the arrays always be synchronized (same size, etc.) then I would make them private and control access to them through member functions. Example:</p>\n\n<pre><code>class Example\n{\nprivate:\n    vector&lt;double&gt; Array_1;\n    vector&lt;double&gt; Array_2;\n    vector&lt;double&gt; Array_3;\n\npublic:\n    void Push_data(double val1, double val2, double val3) {\n        Array_1.push_back(val1);\n        Array_2.push_back(val2);\n        Array_3.push_back(val3);\n    }\n\n    vector&lt;double&gt; Get_all_points_at_index(size_t index) const {\n        if (index &lt; Array_1.size())\n            return {Array_1[index], Array_2[index], Array_3[index]};\n        else\n            throw std::runtime_error(\"Error: index out of bounds\");\n    }\n\n    const vector&lt;double&gt;&amp; Get_array1() const {\n        return Array_1;\n    }\n\n    void Clear_all() {\n        Array_1.clear();\n        Array_2.clear();\n        Array_3.clear();\n    }\n};\n</code></pre>\n\n<p>This way, users of the class aren't burdened with the responsibility of making sure they add/remove values from all the vectors evenly - you do that with your class's member functions where you have complete control over the underlying data. The accessor functions should be written such that it's impossible for a user (including you) to un-syncronize the data.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1564586863, "creation_date": 1564586863, "answer_id": 57294248, "question_id": 57293423, "link": "https://stackoverflow.com/questions/57293423/declaring-array-data-inside-a-class-c/57294248#57294248", "title": "Declaring array data inside a class C++", "body": "<p>If you are going to process big amounts of data, then solutions 1 and 2 are pretty much the same - the only meaningful difference is that solution 1 is hard to protect against memory leaks (while solution 2 deallocates your data when needed automatically).</p>\n\n<p>The difference between solutions 2 and 3 is what people often call \"Structure of arrays\" vs \"Array of structures\". The runtime efficiency of these solutions depends on what your code does with them. The general principle is <a href=\"https://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow noreferrer\">locality of reference</a>. If your code frequently does number crunching only on the first component of your vertex data, then use structure of arrays (solution 2). However, any complex code will work on all of the data, so I <em>guess</em> solution 3 (array of structures) is the best.</p>\n\n<p>Note that this example is rather pure. If your data contains elements that are sometimes used in number crunching and sometimes not (e.g. it does some transformation on two coordinates of the vertices, while leaving the third untouched), then you might need to implement some kind of in-between solution - copy only the needed data to some place, transform it and copy the results back.</p>\n"}, {"tags": [], "owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1564588726, "last_edit_date": 1564588726, "creation_date": 1564587734, "answer_id": 57294514, "question_id": 57293423, "link": "https://stackoverflow.com/questions/57293423/declaring-array-data-inside-a-class-c/57294514#57294514", "title": "Declaring array data inside a class C++", "body": "<p>Forget about approach 1 (as the others have mentioned) and stick to either approach 2 or 3 which best fits your needs. To me, I see your code as a part of an application/library that manages coordinates/data of a 3D space. So, you should think which operation you need to do on these 3D coordinates/data and which approach makes your code simpler or more efficient. As an example, if at some moment you need to pass the raw data of one dimension to a third-party library (e.g. for visualization stuff) you should go for approach 2. </p>\n\n<p>As an concrete example, <a href=\"https://vtk.org/\" rel=\"nofollow noreferrer\">VTK</a> (the visualization toolkit) has <a href=\"https://vtk.org/doc/nightly/html/annotated.html\" rel=\"nofollow noreferrer\">lots of data structures</a> that keep 3D data in both ways, either like your 2nd approach (see <a href=\"https://vtk.org/doc/nightly/html/classvtkTypedDataArray.html#details\" rel=\"nofollow noreferrer\">vtkTypedDataArray</a>) or your like 3rd approach (see <a href=\"https://vtk.org/doc/nightly/html/classvtkAOSDataArrayTemplate.html\" rel=\"nofollow noreferrer\">vtkAOSDataArrayTemplate</a>). Taking a look at them may give you some ideas. </p>\n"}], "owner": {"reputation": 33, "user_id": 11864474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RbNNDCNI65c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVB6X48Lk0x1iHrMpIhzf8R80OiA/photo.jpg?sz=128", "display_name": "Glayson Patricio", "link": "https://stackoverflow.com/users/11864474/glayson-patricio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1564588726, "creation_date": 1564584203, "last_edit_date": 1564586456, "question_id": 57293423, "link": "https://stackoverflow.com/questions/57293423/declaring-array-data-inside-a-class-c", "title": "Declaring array data inside a class C++", "body": "<p>I am creating a class that needs to store different arrays like data. Those arrays will have mutable size, but all of the arrays inside the class will have the same size. The arrays will be later used for number crunching in methods provided by the class.</p>\n\n<p>What is the best/standard way of declaring that kind of data inside the class?</p>\n\n<p>Solution 1 \u2013 Raw arrays</p>\n\n<pre><code>class Example {\n    double *Array_1;\n    double *Array_2;\n    double *Array_3;\n    int size; //used to store size of all arrays\n};\n</code></pre>\n\n<p>Solution 2 \u2013 <code>std::vector</code> for each array</p>\n\n<pre><code>class Example {\n    vector&lt;double&gt; Array_1;\n    vector&lt;double&gt; Array_2;\n    vector&lt;double&gt; Array_3;\n};\n</code></pre>\n\n<p>Solution 3 \u2013 A <code>struct</code> that stores each vertex and have a <code>std::vector</code> of that struct</p>\n\n<pre><code>struct Vertex{\n    double Var_1;\n    double Var_2;\n    double Var_3;\n};\nclass Example {\n    vector&lt;Vertex&gt; data;\n};\n</code></pre>\n\n<p>My conclusion as a beginner would be:</p>\n\n<p>Solution 1 would have the best performance but would be the hardest to implement.</p>\n\n<p>Solution 3 would be elegant and easier to implement, but I would run into problems when performing some calculations because the information would not be in an array format. This means numeric regular functions that receive arrays/vectors would not work (I would need to create temporary vectors in order to do the number crunching).</p>\n\n<p>Solution 2 might be the middle of the way.</p>\n\n<p>Any ideas for a 4th solution would be greatly appreciated.</p>\n"}, {"tags": ["c++", "gcc", "clang", "language-lawyer"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1564584207, "post_id": 57293304, "comment_id": 101081174, "body": "Could you please use the [stable.section.name] instead of 6.4.1. Numbering can change drastically between standards, the stable names do not."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1564584279, "post_id": 57293304, "comment_id": 101081221, "body": "Both GCC and Clang trunk compile this on godbolt."}, {"owner": {"reputation": 87, "user_id": 7291499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53a35675a4ad60e5233e83a4bde6ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Simo Simov", "link": "https://stackoverflow.com/users/7291499/simo-simov"}, "edited": false, "score": 0, "creation_date": 1564584394, "post_id": 57293304, "comment_id": 101081304, "body": "What is wrong with this error message?! 1. The code shouldn&#39;t compile. 2. You use template brackets after the name, so it says that there is no such template name. 3. Proposal to use the namespace qualifier is good. So what is wrong?!"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1564584536, "post_id": 57293304, "comment_id": 101081383, "body": "@chris - The code fails to compile for me with any version of gcc on godbolt unless I specify <code>-std=c++2a</code>. And even then it only compiles with gcc 9 and gcc trunk."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1564584612, "post_id": 57293304, "comment_id": 101081439, "body": "@Omnifarious - Likely because it&#39;s a shiny new C++20 related change."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 87, "user_id": 7291499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53a35675a4ad60e5233e83a4bde6ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Simo Simov", "link": "https://stackoverflow.com/users/7291499/simo-simov"}, "edited": false, "score": 0, "creation_date": 1564584667, "post_id": 57293304, "comment_id": 101081486, "body": "@SimoSimov - Shouldn&#39;t it be trying to look up <code>f</code> in the namespace of the arguments to <code>f</code>? Isn&#39;t that what argument dependent lookup is all about?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564584728, "post_id": 57293304, "comment_id": 101081532, "body": "The text in question is not in my C++17 draft so it probably does come from C++20.  That said, <a href=\"https://timsong-cpp.github.io/cppwp/basic.lookup.unqual\" rel=\"nofollow noreferrer\">my c++20 draft</a> doesn&#39;t have the same code as quoted, So I don&#39;t know where it comes from."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1564584777, "post_id": 57293304, "comment_id": 101081561, "body": "@Omnifarious ADL does not find function templates when parameters are specified"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1564584786, "post_id": 57293304, "comment_id": 101081567, "body": "@StoryTeller - The OP should be explicit then about which version of the standard he or she is referencing and exactly which version of the compiler he or she is using."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1564584824, "post_id": 57293304, "comment_id": 101081599, "body": "@Omnifarious - No argument there"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1564585620, "post_id": 57293304, "comment_id": 101082110, "body": "Wow, yes I was reading the standard from the <code>latex</code> sources generated here <a href=\"http://eel.is/c++draft/\" rel=\"nofollow noreferrer\">eel.is/c++draft</a> and I was compiling with <code>std=c++17</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1564585721, "post_id": 57293620, "comment_id": 101082170, "body": "That makes sense, I was using the latest draft found in <a href=\"http://eel.is/c++draft/\" rel=\"nofollow noreferrer\">eel.is/c++draft</a> That being said, I am curious now why they changed it, especially when we are waiting for the proposed changes of Herb Sutters proposal (for ADL)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1564586232, "post_id": 57293620, "comment_id": 101082453, "body": "@KostasRim See the linked proposal document"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1564591082, "post_id": 57293620, "comment_id": 101085045, "body": "@eerorikaI was unaware of this paper and I very much appreciate the link/reference. Thank you for the reply/edit and help :) I am curious if that got in during the Cologne meeting, I will take a look at the mailing list ;) \u2013 Edit, just read the paper Toronto and it received strong support (12 | 14 | 0 | 0 | 0)."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1564586207, "last_edit_date": 1592644375, "creation_date": 1564584793, "answer_id": 57293620, "question_id": 57293304, "link": "https://stackoverflow.com/questions/57293304/bug-on-both-clang-and-gcc-on-unqualified-call/57293620#57293620", "title": "Bug on both clang and gcc on unqualified call", "body": "<p>The rule that you quote is different in C++17. The change proposal: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0846r0.html\" rel=\"nofollow noreferrer\">p0846r0</a>. If you are compiling for C++20, then the example should compile, and if it doesn't, then the compiler has incomplete C++20 support.</p>\n<p>No compiler has stable support for C++20, which hasn't even been released yet officially (the feature list was recently frozen though), so some bugs are to be expected, as support for that future language version may not be complete.</p>\n<p>The latest development version of both GCC and Clang successfully compile the example, so bug report should not be necessary.</p>\n<hr />\n<p>The standard draft for C++17 says:</p>\n<blockquote>\n<p>[basic.lookup.unqual]</p>\n<p>The lookup for an unqualified name used as the postfix-expression of a function call is described in 6.4.2. [Note: For purposes of determining (during parsing) whether an expression is a postfix-expression for a function call, the usual name lookup rules apply. The rules in 6.4.2 have no effect on the syntactic interpretation of an expression. For example,</p>\n<pre><code>typedef int f;\nnamespace N {\n    struct A {\n        friend void f(A &amp;);\n        operator int();\n        void g(A a) {\n            int i = f(a); // f is the typedef, not the friend function: equivalent to int(a)\n        }\n    };\n}\n</code></pre>\n</blockquote>\n<p>This example compiles fine in clang 5.0.0-3~16.04.1 as well as GCC 8.2.0.</p>\n"}], "owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57293620, "answer_count": 1, "score": 1, "last_activity_date": 1564586207, "creation_date": 1564583840, "last_edit_date": 1564583893, "question_id": 57293304, "link": "https://stackoverflow.com/questions/57293304/bug-on-both-clang-and-gcc-on-unqualified-call", "title": "Bug on both clang and gcc on unqualified call", "body": "<p>The standard manifests: </p>\n\n<blockquote>\n  <h1>6.4.1</h1>\n  \n  <p>The lookup for an unqualified name used as the postfix-expression of a function call is described in [basic.lookup.argdep].\n  [\u2009Note: For purposes of determining (during parsing) whether an expression is a postfix-expression for a function call, the usual name lookup rules apply.\n  In some cases a name followed by &lt; is treated as a template-name even though name lookup did not find a template-name (see [temp.names]).\n  For example,</p>\n\n<pre><code>namespace N {\n  struct A {};\n  template &lt;class T&gt; int f(T);\n}\n\n int main() {\n  int x = f&lt;N::A&gt;(N::A());        // OK: lookup of f finds nothing, f treated as template name\n}\n</code></pre>\n</blockquote>\n\n<p>Both gcc and clang do not compile this simple program and they issue a similar diagnostic:</p>\n\n<pre><code>no templated name f found did you mean N::f?\n</code></pre>\n\n<p>This is clearly an implementation bug unless something is not clear. Should I fill in a defect report?  </p>\n"}, {"tags": ["c++", "g++", "c++17"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1564582994, "post_id": 57292886, "comment_id": 101080353, "body": "I cannot reproduce. All I did was replace printing with <code>static_assert</code>ions, and gcc 7.4 accepts it without a hitch <a href=\"https://godbolt.org/z/Mv8uhz\" rel=\"nofollow noreferrer\">godbolt.org/z/Mv8uhz</a>"}, {"owner": {"reputation": 179, "user_id": 11804824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b17674e5753e51e3103dba124088fe?s=128&d=identicon&r=PG&f=1", "display_name": "embeddedPy", "link": "https://stackoverflow.com/users/11804824/embeddedpy"}, "edited": false, "score": 0, "creation_date": 1564582997, "post_id": 57292886, "comment_id": 101080356, "body": "With g++ 7.3.0 I got false both times."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1564583036, "post_id": 57292886, "comment_id": 101080386, "body": "With gcc-8.2 I do get <code>false\\nfalse</code>: <a href=\"https://coliru.stacked-crooked.com/a/273f04befb832554\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/273f04befb832554</a>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1564583063, "post_id": 57292886, "comment_id": 101080405, "body": "Note that this produces false for <code>int + int</code>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1564583200, "post_id": 57292886, "comment_id": 101080492, "body": "@chris well spotted, OP is missing two <code>const</code>s: <a href=\"https://coliru.stacked-crooked.com/a/d886f75b58f53ea6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/d886f75b58f53ea6</a>"}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1564583207, "post_id": 57292886, "comment_id": 101080498, "body": "Very strange.. I used gdb to debug the code above and result on g++ is that it always reports true.. any thoughts?"}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1564583402, "post_id": 57292886, "comment_id": 101080631, "body": "@YSC by adding const i got true, true now on gcc..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1564584288, "post_id": 57292886, "comment_id": 101081229, "body": "@Quest I get the correct output: <a href=\"https://godbolt.org/z/Edy1hJ\" rel=\"nofollow noreferrer\">godbolt.org/z/Edy1hJ</a>. Note that the code in YSC&#39;s last link is for <code>int</code> and <code>int</code>, not <code>int</code> and <code>std::string</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1564585927, "post_id": 57293372, "comment_id": 101082279, "body": "The first one didn&#39;t work out but changing that to <code>static auto _check(T&amp;&amp; t, U&amp;&amp; u) -&gt; decltype(static_cast&lt;void&gt;(t + u), std::true_type{});</code> worked like a charm"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1564586134, "post_id": 57293372, "comment_id": 101082395, "body": "@Quest It worked in <a href=\"https://coliru.stacked-crooked.com/a/26ec2e4ae285cba3\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/26ec2e4ae285cba3</a>"}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1564586382, "post_id": 57293372, "comment_id": 101082529, "body": "This worked for me as well but the problems started when I tried it in a lambda like here: <a href=\"https://coliru.stacked-crooked.com/a/f7a253a511d93932\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/f7a253a511d93932</a> But now this thing works as well. Thank you very much!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1564585767, "last_edit_date": 1564585767, "creation_date": 1564584055, "answer_id": 57293372, "question_id": 57292886, "link": "https://stackoverflow.com/questions/57292886/gcc-check-whether-the-given-class-has-operator/57293372#57293372", "title": "Gcc check whether the given class has operator+", "body": "<p>Your original version doesn't work because <code>std::declval&lt;&gt;</code> returns an r-value and a regular reference can't bind to it. A fix is to bind to a forwarding reference:</p>\n\n<pre><code>static std::true_type _check(X&amp;&amp;, Y&amp;&amp;, decltype(std::declval&lt;X&gt;() + std::declval&lt;Y&gt;()) = {});\n</code></pre>\n\n<hr>\n\n<p>A slightly simpler version:</p>\n\n<pre><code>template&lt;class T, class U&gt;\nauto has_plus_test(T&amp;&amp; t, U&amp;&amp; u) -&gt; decltype(static_cast&lt;void&gt;(t + u), std::true_type{});\n\nstd::false_type has_plus_test(...);\n\ntemplate&lt;class T, class U&gt;\nusing has_plus = decltype(has_plus_test(std::declval&lt;T&gt;(), std::declval&lt;U&gt;()));\n\ntemplate&lt;class T, class U&gt;\nconstexpr bool has_plus_v = has_plus&lt;T, U&gt;::value;\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; has_plus_v&lt;int, int&gt; &lt;&lt; '\\n'; // Outputs true.\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; has_plus_v&lt;int, std::string&gt; &lt;&lt; '\\n'; // Outputs false.\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; has_plus_v&lt;std::string, std::string&gt; &lt;&lt; '\\n'; // Outputs true.\n}\n</code></pre>\n"}], "owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57293372, "answer_count": 1, "score": 2, "last_activity_date": 1564585767, "creation_date": 1564582514, "last_edit_date": 1564583006, "question_id": 57292886, "link": "https://stackoverflow.com/questions/57292886/gcc-check-whether-the-given-class-has-operator", "title": "Gcc check whether the given class has operator+", "body": "<p>I created a code below to test whether there is an operator+ overload for 2 classes:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nstruct _has_plus_hlp {\n    template&lt;typename X, typename Y&gt;\n    static std::true_type _check(X&amp;, Y&amp;, decltype(std::declval&lt;X&gt;() + std::declval&lt;Y&gt;()) = {});\n    static std::false_type _check(...);\n\n    using type = decltype(_check(std::declval&lt;T&gt;(), std::declval&lt;U&gt;()));\n};\ntemplate&lt;typename X, typename Y&gt;\nconstexpr bool has_plus_v = _has_plus_hlp&lt;X, Y&gt;::type::value; \n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; detail::has_plus_v&lt;int, std::string&gt; &lt;&lt; std::endl;\n    auto f = [](auto&amp; a, auto&amp; b) {\n        std::cout &lt;&lt; std::boolalpha &lt;&lt; detail::has_plus_v&lt;decltype(a), decltype(b)&gt; &lt;&lt; std::endl;\n    };\n    std::string str = \"HELLO\";\n    int num = 5;\n    f(num, str);\n}\n</code></pre>\n\n<p>This is what I got for g++ (7.4.0):</p>\n\n<blockquote>\n  <p><strong>false<br>\n  true</strong></p>\n</blockquote>\n\n<p>Whereas I expect both to be false as in case of clang:</p>\n\n<blockquote>\n  <p><strong>false<br>\n  false</strong></p>\n</blockquote>\n\n<p>Did I got something wrong?</p>\n"}, {"tags": ["c++", "linux", "getrusage"], "comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1564584113, "post_id": 57293168, "comment_id": 101081104, "body": "Is your compiler maybe optimising out the vector because it isn&#39;t being used? Try iterating the vector and pushing values into v."}, {"owner": {"reputation": 11, "user_id": 11864646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24933901b5d37ce01f7def4686a6875?s=128&d=identicon&r=PG&f=1", "display_name": "Sebasti&#225;n", "link": "https://stackoverflow.com/users/11864646/sebasti%c3%a1n"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1564585479, "post_id": 57293168, "comment_id": 101082020, "body": "I understand that this allows you to get the resource usage up to a certain point, so in theory I could use the vector after that and this should take the vector into account. But yes, I tried writing values on the vector. Thanks for your comment anyways."}, {"owner": {"reputation": 1295, "user_id": 2279765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432916361960d8ddbb2d4bdb8369b78f?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/2279765/tomer"}, "edited": false, "score": 1, "creation_date": 1564585990, "post_id": 57293168, "comment_id": 101082312, "body": "Have you tried modifying the 1024 to a larger value (e.g. 100,000)? perhaps 1024 is not enough to incur memory increase."}, {"owner": {"reputation": 11, "user_id": 11864646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24933901b5d37ce01f7def4686a6875?s=128&d=identicon&r=PG&f=1", "display_name": "Sebasti&#225;n", "link": "https://stackoverflow.com/users/11864646/sebasti%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1564681450, "post_id": 57293168, "comment_id": 101120754, "body": "Why wouldn&#39;t it be enough? In theory it&#39;s the number of KB, so a vector of 1024 ints should add 4KB. Anyways, I tried with 1024000 and the increase in the output didn&#39;t make any sense to me :/ Thanks for your comment."}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 5582833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3c0022c00e0af4780f089e055fd822?s=128&d=identicon&r=PG&f=1", "display_name": "codeczar", "link": "https://stackoverflow.com/users/5582833/codeczar"}, "is_accepted": false, "score": 2, "last_activity_date": 1585422113, "creation_date": 1585422113, "answer_id": 60905584, "question_id": 57293168, "link": "https://stackoverflow.com/questions/57293168/is-getrusage-not-working-for-me-why/60905584#60905584", "title": "Is getrusage not working for me? Why?", "body": "<p>I have modified your code a bit to make sense for you for the data which is shown by the ru_maxrss element of rusage structure.</p>\n\n<p>Here is my code </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;sys/resource.h&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[]){\n\n    int who = RUSAGE_SELF;\n    struct rusage usage;\n    int ret = -1;\n    long int a,b;\n\ngetrusage(who, &amp;usage);\na=usage.ru_maxrss;\n\ncout &lt;&lt; \"Maximum resident set size before vector allocation   \"&lt;&lt;a &lt;&lt; endl;\n    vector&lt;int&gt; v(10240000);\n\ncout&lt;&lt;\"Size of vector v in kilobytes (kB)  \"&lt;&lt;(v.size()*sizeof(int))/(1024)&lt;&lt;endl;\n\n    ret = getrusage(who, &amp;usage);\n\n    cout&lt;&lt;\"Size of integer data type   \"&lt;&lt;sizeof(int)&lt;&lt;endl;\n    b=usage.ru_maxrss;\n\n    if (ret == 0) \ncout &lt;&lt; \"Maximum resident set size after vector allocation  \"&lt;&lt;b &lt;&lt; endl;\n cout&lt;&lt;\"Difference between resident set size before and after vector allocation  \"&lt;&lt;b-a&lt;&lt;endl;\n\n    return 0;\n}\n\n</code></pre>\n\n<p>Each time <strong>getrusage()</strong> is called it allocates a different resident set size which is a few kB(approx 600-800) greater than the size allocated for the vector.</p>\n\n<p>Some of the outputs of the above code are as follow \n<a href=\"https://i.stack.imgur.com/hBUZB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hBUZB.png\" alt=\"enter image description here\"></a>\n<br>\n<br>\n<a href=\"https://i.stack.imgur.com/JFYiW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JFYiW.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I reduce the no. of elements in the vector to 1024000 the output is as follow\n<a href=\"https://i.stack.imgur.com/UtWQz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UtWQz.png\" alt=\"enter image description here\"></a></p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://computerscience.stackexchange.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1439905020, "open_beta_date": 1332272936, "closed_beta_date": 1331060400, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/cs/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon.png", "audience": "students, researchers and practitioners of computer science", "site_url": "https://cs.stackexchange.com", "api_site_parameter": "cs", "logo_url": "https://cdn.sstatic.net/Sites/cs/Img/logo.png", "name": "Computer Science", "site_type": "main_site"}, "on_date": 1564583413, "question_id": 112340}, "owner": {"reputation": 11, "user_id": 11864646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24933901b5d37ce01f7def4686a6875?s=128&d=identicon&r=PG&f=1", "display_name": "Sebasti&#225;n", "link": "https://stackoverflow.com/users/11864646/sebasti%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1585422113, "creation_date": 1564582456, "last_edit_date": 1564583460, "question_id": 57293168, "link": "https://stackoverflow.com/questions/57293168/is-getrusage-not-working-for-me-why", "title": "Is getrusage not working for me? Why?", "body": "<p>I'm trying to measure the maximum resident set size and I found that you can do so with getrusage:</p>\n\n<ul>\n<li><a href=\"https://linux.die.net/man/2/getrusage\" rel=\"nofollow noreferrer\">https://linux.die.net/man/2/getrusage</a></li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/getrusage.html\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/009695399/functions/getrusage.html</a></li>\n</ul>\n\n<p>When I run this</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;vector&gt;\n#include &lt;sys/resource.h&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[]){\n\n    int who = RUSAGE_SELF;\n    struct rusage usage;\n    int ret = -1;\n\n    vector&lt;int&gt; v(1024);\n\n    ret = getrusage(who, &amp;usage);\n    if (ret == 0) cout &lt;&lt; usage.ru_maxrss &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I get the same value as I do when I comment the declaration of the vector.</p>\n\n<p>Is there anything I'm doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "serial-port", "atmega"], "comments": [{"owner": {"reputation": 2160, "user_id": 9446665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BmYHc.png?s=128&g=1", "display_name": "William Charlton", "link": "https://stackoverflow.com/users/9446665/william-charlton"}, "edited": false, "score": 0, "creation_date": 1564583045, "post_id": 57292739, "comment_id": 101080393, "body": "I understand what your issue is (you&#39;re getting timeout errors), but I don&#39;t see a question. I&#39;m sure you don&#39;t expect someone to set up a Atmega2560 with a Atmel 109 Bootloader, compile it with CodeVision AVR and debug your code, right? So, what is your question?"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1564584267, "post_id": 57292739, "comment_id": 101081213, "body": "Creating and destroying a new event object for every byte you read or write seems heavy-handed - but I doubt that&#39;s the cause of your issue."}], "owner": {"reputation": 11, "user_id": 11864166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274e4e46c39ea6bd5d9cfc7358fe12c6?s=128&d=identicon&r=PG&f=1", "display_name": "treichart", "link": "https://stackoverflow.com/users/11864166/treichart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564583779, "creation_date": 1564582041, "last_edit_date": 1564583779, "question_id": 57292739, "link": "https://stackoverflow.com/questions/57292739/serial-port-timeout-issues-with-windows-10-and-atmega-chip", "title": "Serial Port Timeout Issues with Windows 10 and Atmega Chip", "body": "<p>We are using an old Atmega2560 that uses the classic Atmel 109 Bootloader for self-programming. This code has been compiled with CodeVision AVR.</p>\n\n<p>In order to flash the firmware via a PC we used to run a command line tool based on the Atmel 911 App Note. We connect the Atmega to a computer via a Silicon Labs CP2103 USB to UART bridge. I have the latest VCP driver from Silabs installed. </p>\n\n<p>Under Windows 10 and/or faster machines this CL tool constantly throws timeout errors, therefore I took the code and tried to port it to Windows 10 using the VS 2019 community edition (x86). Before VS, I used the freeware Dev-C++, as it was referenced in the actual app note, but no luck. I also tried to adapt the AVR911 code by integrating the hints in Silicon Labs' App Note 197, mainly all the overlapped stuff. I played around with commtimeouts and buffering flags, but nothing yielded satisfying and reproduceable results.</p>\n\n<p>Still, I get timeout errors, mostly during Read operations but sometimes write operations fail as well.</p>\n\n<p>Randomly, instead of programming the flash, the lock bits get changed, which is really strange and a bit scary. I'm not an expert for Windows apps as I mostly do work on the embedded side, so please forgive me for any weird code snippets :)</p>\n\n<pre><code>/* Open the communication channel */\nvoid SerialPort::openChannel()\n{\n    char comName[] = \"COMx\";\n    COMMTIMEOUTS comTimeouts;\n    DCB comState;\n\n    /* Reserve Space for the COM State DCB */\n    FillMemory(&amp;comState, sizeof(comState), 0);\n    comState.DCBlength = sizeof(comState);\n\n    /* Check if channel already open */\n    if( channelOpen )\n        throw new ErrorMsg( \"Channel already open! Cannot open port twice.\" );\n\n    /* Generate COM filename and attempt open */\n    comName[3] = '0' + (char)portNumber;\n\n    serialHandle = CreateFileA( comName, GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, \n        FILE_ATTRIBUTE_NORMAL | FILE_FLAG_OVERLAPPED | FILE_FLAG_NO_BUFFERING, NULL );\n\n    /* Print error and return if failed opening port */\n    if( serialHandle == INVALID_HANDLE_VALUE )\n        throw new ErrorMsg( \"Error opening COM port!\" );\n\n    channelOpen = true;\n\n    /* Purge COM Port as suggested by CP210x AN197 */\n    if (!PurgeComm(serialHandle, PURGE_TXABORT | PURGE_RXABORT | PURGE_TXCLEAR | PURGE_RXCLEAR))\n        throw new ErrorMsg(\"Error purging COM port!\");\n\n    /* Store old COM port settings */\n    if( !GetCommTimeouts( serialHandle, &amp;oldComTimeouts ) )\n        throw new ErrorMsg( \"Error reading COM port settings!\" );\n\n    if (!GetCommState(serialHandle, &amp;oldComState))\n        throw new ErrorMsg(\"Error reading COM port state settings!\");\n\n    /* Get another copy of the COM timeout settings, and change them */\n    if( !GetCommTimeouts( serialHandle, &amp;comTimeouts ) )\n        throw new ErrorMsg( \"Error reading new COM port settings!\" );\n\n    if (!GetCommState(serialHandle, &amp;comState))\n        throw new ErrorMsg(\"Error reading new COM port state settings!\");\n\n    /* Actual Change of Port Settings */\n\n    comTimeouts.ReadIntervalTimeout = 5000;\n    comTimeouts.ReadTotalTimeoutConstant = 0;\n    comTimeouts.ReadTotalTimeoutMultiplier = 5000;\n\n    comTimeouts.WriteTotalTimeoutMultiplier = 5000;\n    comTimeouts.WriteTotalTimeoutConstant = 0;\n\n    comState.BaudRate = CBR_115200;\n    comState.Parity = NOPARITY;\n    comState.ByteSize = 8;\n    comState.StopBits = ONESTOPBIT;\n\n    /* Apply new  settings */\n    if (!SetCommState(serialHandle, &amp;comState))\n        throw new ErrorMsg(\"Error changing COM port settings!\");\n\n    if( !SetCommTimeouts( serialHandle, &amp;comTimeouts ) )\n        throw new ErrorMsg( \"Error changing COM port settings!\" );\n\n    Sleep(60); // Delay suggested in CP210x AN197\n}\n\n/* Transmit a single byte */\nvoid SerialPort::sendByte( long data )\n{\n    bool success = false;\n    OVERLAPPED ow = { 0 };\n    DWORD written;\n\n    /* Check if channel is open */\n    if (!channelOpen)\n        throw new ErrorMsg(\"Channel not open! Cannot send to unopened channel.\");\n\n    ow.hEvent = CreateEventA(NULL, FALSE, FALSE, NULL);\n\n    if (ow.hEvent == NULL)\n        throw new ErrorMsg(\"Error creating Event!\");\n\n    if (!WriteFile(serialHandle, &amp;data, 1, &amp;written, &amp;ow))\n    {\n        if (GetLastError() == ERROR_IO_PENDING)\n            if (WaitForSingleObject(ow.hEvent, INFINITE) == WAIT_OBJECT_0)\n                if (GetOverlappedResult(serialHandle, &amp;ow, &amp;written, FALSE))\n                    success = true;\n    }\n    else\n    {\n        success = true;\n    }\n\n    if (written != 1)\n        throw new ErrorMsg(\"Error writing byte to COM port!\");\n\n    CloseHandle(ow.hEvent);\n\n    /* Attempt writing */\n    if( success == false )\n        throw new ErrorMsg( \"Error writing byte to COM port!\" );\n}\n\n/* Receive a single byte */\nlong SerialPort::getByte()\n{\n    time_t startTime;\n    startTime = time(NULL); // Read current time in seconds\n\n    OVERLAPPED o = {0};  //Use Overlapped as suggested in AN 197\n    DWORD readnum = 0;\n    DWORD errorString;\n    DWORD data = 0;\n    bool success = false;\n\n    /* Check if channel is open */\n    if (!channelOpen)\n        throw new ErrorMsg(\"Channel not open! Cannot read from unopened channel.\");\n\n    /* Attempt receiving byte until timeout limit exceeded */\n    do\n    {\n        o.hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);\n\n        if (o.hEvent == NULL)\n            throw new ErrorMsg(\"Error creating Event!\");\n\n        if (!ReadFile(serialHandle, &amp;data, 1, &amp;readnum, &amp;o)) //solange nicht fertig\n        {\n            if (GetLastError() == ERROR_IO_PENDING) //Io still in progress\n            {\n                if (WaitForSingleObject(o.hEvent, INFINITE) == WAIT_OBJECT_0)\n                    success = true;\n            }\n            if (!GetOverlappedResult(serialHandle, &amp;o, &amp;readnum, FALSE))\n            {\n                errorString = GetLastError();\n\n\n            }\n\n        }\n        else\n        {\n            success = true;\n        }\n\n        if (readnum &gt; 0)\n            return data &amp; 0xFF;\n    }while  (time(NULL) - startTime &lt; timeout);\n\n    /* Timeout */\n    throw new ErrorMsg(\"Timeout during COM-port read operation!\");\n}\n</code></pre>\n\n<p>I expect the readByte / writeByte functions to correctly transfer or read one byte. When I use the awesome AVROSP II software to flash hex files it works like charm even under Windows 10. Therefore I assume the actual bootloader is fine, but it's an issue in AVR911 vs. Serial Port on Windows.</p>\n\n<p><strong>Edit</strong>\nThanks for the hint about clarifying the question. My question(s) would be, if there is some way of slowing down the communication in order to make sure no bytes are lost during transfer and receive? I played around with \"Sleep\" already.\nIs there a way to easily edit buffer sizes? My code apparently uses 4096 bytes for ReadFile as opposed to AVROSP II which uses 512 bytes if I interpret procmon data correctly.\nDid I use the async / overlapped correctly?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1564582073, "post_id": 57292547, "comment_id": 101079754, "body": "Basically answered here (2D-1D case): <a href=\"https://stackoverflow.com/q/54113882/580083\">How can I initialize 2d array with a list of 1d arrays?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "is_accepted": false, "score": 1, "last_activity_date": 1564582612, "last_edit_date": 1564582612, "creation_date": 1564581995, "answer_id": 57292722, "question_id": 57292547, "link": "https://stackoverflow.com/questions/57292547/how-can-i-join-x-2-dimensional-arrays-into-one-3-dimensional-array/57292722#57292722", "title": "How can I join x 2-dimensional arrays into one 3-dimensional array", "body": "<p>I suggest to take a look at <code>std::array</code>. With this you can initialise like this</p>\n\n<pre><code>#include &lt;array&gt;\nusing mat2d = std::array&lt;std::array&lt;int,2&gt;,3&gt;;\n\nint main(){\n    mat2d mat1 {{{1,2},{3,4},{5,6}}};\n    mat2d mat2 {{{7,8},{9,10},{11,12}}};\n\n    std::array&lt;mat2d,2&gt; mat3d {mat1,mat2};\n    return mat3d[0][1][0];\n}\n</code></pre>\n\n<p>This code will return <code>3</code>. And the compiler is able to optimise all the matrix initialisation away.</p>\n\n<p>This is the assembler with optimisation (-O3) turned on.</p>\n\n<pre><code>main:                                   # @main\n        mov     eax, 3\n        ret\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/Dteqjy\" rel=\"nofollow noreferrer\">Here is</a> the working example.</p>\n"}], "owner": {"reputation": 11, "user_id": 11864231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da500dcd05799673b878afbdb477825?s=128&d=identicon&r=PG&f=1", "display_name": "DD_NOOB_WASTED", "link": "https://stackoverflow.com/users/11864231/dd-noob-wasted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "closed_date": 1564582013, "answer_count": 1, "score": 1, "last_activity_date": 1564582612, "creation_date": 1564581504, "last_edit_date": 1564581749, "question_id": 57292547, "link": "https://stackoverflow.com/questions/57292547/how-can-i-join-x-2-dimensional-arrays-into-one-3-dimensional-array", "closed_reason": "Duplicate", "title": "How can I join x 2-dimensional arrays into one 3-dimensional array", "body": "<p>I have x 2-dimensional arrays and want to combine them in a 3-dimensional array </p>\n\n<p>I have these two arrays for example (or more)</p>\n\n<pre><code>int array1[3][2] = {{1,2},{3,4},{5,6}};\nint array2[3][2] = {{7,8},{9,10},{11,12}};\n</code></pre>\n\n<p>and the result should look like this</p>\n\n<pre><code>multi_array = {{{1,2},{3,4},{5,6}},{{7,8},{9,10},{11,12}}};\n</code></pre>\n\n<p>but this doesn't work obviously:</p>\n\n<pre><code>int multi_array[2][3][2] = {array1, array2};\n</code></pre>\n\n<p>Does anything helpful come to mind?</p>\n"}, {"tags": ["c++", "variadic-templates"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564583565, "post_id": 57292333, "comment_id": 101080746, "body": "Note that <code>VectorHolder</code> is a class name and template type parameter name for <code>getRange</code>. This is confusing."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1564598798, "creation_date": 1564598798, "answer_id": 57297151, "question_id": 57292333, "link": "https://stackoverflow.com/questions/57292333/constructing-an-iterator-range-with-variadic-templates-and-runtime-indices/57297151#57297151", "title": "Constructing an iterator_range with variadic templates and runtime indices", "body": "<p><code>std::index_sequence</code> helps:</p>\n\n<pre><code>template &lt;typename... Ts, typename VectorHolder, std::size_t ... Is&gt;\nauto getRange(const VectorHolder&amp; vh, const std::vector&lt;int&gt;&amp; idx, std::index_sequence&lt;Is...&gt;)\n{\n    assert(sizeof...(Ts) == idx.size());\n\n    return boost::combine(\n        boost::iterator_range&lt;typename VectorHolder::template Iterator&lt;Ts&gt;&gt;(\n            vh.template begin&lt;Ts&gt;(idx[Is]), vh.template end&lt;Ts&gt;(idx[Is]))...);\n}\n\ntemplate &lt;typename... Ts, typename VectorHolder&gt;\nauto getRange(const VectorHolder&amp; vh, const std::vector&lt;int&gt;&amp; idx)\n{\n    return getRange&lt;Ts...&gt;(vh, idx, std::index_sequence_for&lt;Ts...&gt;());\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/tMtGqB\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 33, "user_id": 11838231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d906fc4cadd86b2c03a0f9127b5e90d4?s=128&d=identicon&r=PG&f=1", "display_name": "Vari", "link": "https://stackoverflow.com/users/11838231/vari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57297151, "answer_count": 1, "score": 0, "last_activity_date": 1564598798, "creation_date": 1564580851, "question_id": 57292333, "link": "https://stackoverflow.com/questions/57292333/constructing-an-iterator-range-with-variadic-templates-and-runtime-indices", "title": "Constructing an iterator_range with variadic templates and runtime indices", "body": "<p>I have a collection of equally-sized vectors and want to provide an interface for the user to obtain an iterator range over a subset of these vectors.</p>\n\n<p>The following example shows the problematic line inside <code>getRange</code>: its idea is to receive a bunch of types (specifying the types of vectors) and equally many indices (specifying the locations of the vectors). The code compiles, but the problem is that <code>i++</code> never gets executed as intended, i.e., the call is always with just <code>i</code> (which equals 0). This will also lead to runtime errors via <code>boost::get</code> if the user tries to get distinct types.</p>\n\n<p>This is probably a well-known issue. What's a neat solution to it?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;boost/variant.hpp&gt;\n#include &lt;boost/range/combine.hpp&gt;\n\ntemplate &lt;typename... T&gt;\nstruct VectorHolder\n{\n    template&lt;typename X&gt;\n    using Iterator = typename std::vector&lt;X&gt;::const_iterator;\n\n    std::vector&lt;boost::variant&lt;std::vector&lt;T&gt;...&gt; &gt; vecs_;\n\n    template &lt;typename X&gt;\n    auto begin(int idx) const {\n        return boost::get&lt;std::vector&lt;X&gt; &gt;(vecs_.at(idx)).cbegin();\n    }\n\n    template &lt;typename X&gt;\n    auto end(int idx) const {\n        return boost::get&lt;std::vector&lt;X&gt; &gt;(vecs_.at(idx)).cend();\n    }\n};\n\ntemplate &lt;typename... T, typename VectorHolder&gt;\nauto getRange(const VectorHolder&amp; vh, const std::vector&lt;int&gt;&amp; idx)\n{\n    assert(sizeof...(T) == idx.size());\n    // Fetch a boost::iterator_range over the specified indices\n    std::size_t i = 0;\n    std::size_t j = 0;\n\n    // PROBLEM: i and j not incremented as intended\n    return boost::combine(\n        boost::iterator_range&lt;VectorHolder::Iterator&lt;T&gt;&gt;(\n            vh.begin&lt;T&gt;(idx[i++]), vh.end&lt;T&gt;(idx[j++]))...);\n}\n\nint main()\n{\n    VectorHolder&lt;bool, int, double&gt; vh;\n    vh.vecs_.push_back(std::vector&lt;int&gt;(5, 5));\n    vh.vecs_.push_back(std::vector&lt;bool&gt;(5));\n    vh.vecs_.push_back(std::vector&lt;double&gt;(5, 2.2));\n    vh.vecs_.push_back(std::vector&lt;int&gt;(5, 1));\n\n    const std::vector&lt;int&gt; idx = { 0, 3 };\n    for (auto t : getRange&lt;int, int&gt;(vh, idx))\n    {\n        std::cout &lt;&lt; t.get&lt;0&gt;() &lt;&lt; \" \" &lt;&lt; t.get&lt;1&gt;() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "openssl", "jwt", "base64url"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10076200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467361a94483e5e8ff28c029ae471e67?s=128&d=identicon&r=PG&f=1", "display_name": "typ", "link": "https://stackoverflow.com/users/10076200/typ"}, "edited": false, "score": 0, "creation_date": 1564734486, "post_id": 57314480, "comment_id": 101135837, "body": "You are right. Can&#39;t believe I didn&#39;t see this. Thank you so much!"}], "tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1564684654, "last_edit_date": 1564684654, "creation_date": 1564681783, "answer_id": 57314480, "question_id": 57292210, "link": "https://stackoverflow.com/questions/57292210/what-are-the-exact-base64-url-decoding-rules-and-implementation-using-openssl-an/57314480#57314480", "title": "What are the exact base64 url decoding rules and implementation using openssl and C++ to validate JWT", "body": "<p>This is the base64_url_decode that I used.  I didn't write it but I can't find where I got it from.</p>\n\n<p>With the below code, do you still have a problem?</p>\n\n<pre><code>/*\nBase64 translates 24 bits into 4 ASCII characters at a time. First,\n3 8-bit bytes are treated as 4 6-bit groups. Those 4 groups are\ntranslated into ASCII characters. That is, each 6-bit number is treated\nas an index into the ASCII character array.\n\nIf the final set of bits is less 8 or 16 instead of 24, traditional base64\nwould add a padding character. However, if the length of the data is\nknown, then padding can be eliminated.\n\nOne difference between the \"standard\" Base64 is two characters are different.\nSee RFC 4648 for details.\nThis is how we end up with the Base64 URL encoding.\n*/\n\nconst char base64_url_alphabet[] = {\n    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n    'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',\n    'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',\n    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_'\n};\n\nstd::string base64_url_encode(const std::string &amp; in) {\n  std::string out;\n  int val =0, valb=-6;\n  size_t len = in.length();\n  unsigned int i = 0;\n  for (i = 0; i &lt; len; i++) {\n    unsigned char c = in[i];\n    val = (val&lt;&lt;8) + c;\n    valb += 8;\n    while (valb &gt;= 0) {\n      out.push_back(base64_url_alphabet[(val&gt;&gt;valb)&amp;0x3F]);\n      valb -= 6;\n    }\n  }\n  if (valb &gt; -6) {\n    out.push_back(base64_url_alphabet[((val&lt;&lt;8)&gt;&gt;(valb+8))&amp;0x3F]);\n  }\n  return out;\n}\n\nstd::string base64_url_decode(const std::string &amp; in) {\n  std::string out;\n  std::vector&lt;int&gt; T(256, -1);\n  unsigned int i;\n  for (i =0; i &lt; 64; i++) T[base64_url_alphabet[i]] = i;\n\n  int val = 0, valb = -8;\n  for (i = 0; i &lt; in.length(); i++) {\n    unsigned char c = in[i];\n    if (T[c] == -1) break;\n    val = (val&lt;&lt;6) + T[c];\n    valb += 6;\n    if (valb &gt;= 0) {\n      out.push_back(char((val&gt;&gt;valb)&amp;0xFF));\n      valb -= 8;\n    }\n  }\n  return out;\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Your problem isn't the base64 decode, it's this line:</p>\n\n<pre><code>decoded_body.append(token.begin()+ token.find('.')+1, token.begin() + token.rfind('.')-1);\n</code></pre>\n\n<p>You are out by one.  The decoded_body is missing the last character.  If you change it to the following it will work ok:</p>\n\n<pre><code>decoded_body.append(token.begin()+ token.find('.')+1, token.begin() + token.rfind('.'));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10076200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467361a94483e5e8ff28c029ae471e67?s=128&d=identicon&r=PG&f=1", "display_name": "typ", "link": "https://stackoverflow.com/users/10076200/typ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 57314480, "answer_count": 1, "score": 0, "last_activity_date": 1564684654, "creation_date": 1564580483, "question_id": 57292210, "link": "https://stackoverflow.com/questions/57292210/what-are-the-exact-base64-url-decoding-rules-and-implementation-using-openssl-an", "title": "What are the exact base64 url decoding rules and implementation using openssl and C++ to validate JWT", "body": "<p>I am quite new to openssl interface and base64 decoding rules as general and trying to verify JWT signed with private key (RS256 alg) using the solution: <a href=\"https://stackoverflow.com/questions/56200476/segmentation-fault-while-verifying-jwt-token-using-a-public-key-through-openssl\">Segmentation Fault while verifying JWT token using a public key through openSSL in C++</a> But my sample JWT is failing to verify.</p>\n\n<p>I only do not have the base64 url decode function, so I manually executed the steps as I understood it - before calling my base64 decode function I replaced '-' -> '+' and '_' -> '/'. To be able to get the proper signature length I also had to manually add the padding ('='). Is there some rule for base64 url decoding that I am missing or is the approach with first replacing the symbols wrong in any way?</p>\n\n<p>I tried first to use RSA_verify, but the error is the same.</p>\n\n<p>The same token and key are validated using python and online JWT validation so they should be ok. I printed the signature after the b64 decoding in hex on the gdb and after the urlsafe_b64decode on the python and the values were the same (except some symbols at the end in the python version) which even more made be believe that the replacing strategy should be working.</p>\n\n<pre><code>   // This is the original token\n   static constexpr const char* buffer_token = \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsiYXBpLXJlc291cmNlIl0sInNjb3BlIjpbInJlYWQiXSwiZXhwIjoxNTYzNDUwODkzLCJhdXRob3JpdGllcyI6WyJST0xFX1VTRVIiXSwianRpIjoiMzVhYmVjZDEtNjcxMi00M2M3LWE4MDItZjg3MGYzMTY4MmI0IiwiY2xpZW50X2lkIjoidGVzdCJ9.ZCXtI2nN-d0Cn5dgb3K9JMI41nrEaK_AVSMRG9c5cyZqXpnMQETfGcDEs0jPzmRh-jDc-Kuq53naOtjkItMcR_vYPn72dKZ4Fpp8mvOAZXypkVCLzof3Lsxrtqq9G3V4LNTuOHiXW_q-9mEu51zWg1HDr1-rSt3YXkFFSWp5e4MWS2TNP1MB7lBbZC-kdMZ_GqZ9lrfNo2YqJR7tqcHOrfOmFTzqxVivEB8s-A0iEv_MwdlS6LpJBKU9-d94i1P9Lsqzlg7b_0ekRoYJEG4DXeNp2zxxBxZ1u3FBlIbyJoOGDmX-EU4A5eh2RlDdEvG1YF_zcMARpP1bFV86WTSOuQ\";\n\n    // This is token with replaced symbols that I am testing before writing the method for url decode\n    static constexpr const char* buffer_token = \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsiYXBpLXJlc291cmNlIl0sInNjb3BlIjpbInJlYWQiXSwiZXhwIjoxNTYzNDUwODkzLCJhdXRob3JpdGllcyI6WyJST0xFX1VTRVIiXSwianRpIjoiMzVhYmVjZDEtNjcxMi00M2M3LWE4MDItZjg3MGYzMTY4MmI0IiwiY2xpZW50X2lkIjoidGVzdCJ9.ZCXtI2nN+d0Cn5dgb3K9JMI41nrEaK/AVSMRG9c5cyZqXpnMQETfGcDEs0jPzmRh+jDc+Kuq53naOtjkItMcR/vYPn72dKZ4Fpp8mvOAZXypkVCLzof3Lsxrtqq9G3V4LNTuOHiXW/q+9mEu51zWg1HDr1+rSt3YXkFFSWp5e4MWS2TNP1MB7lBbZC+kdMZ/GqZ9lrfNo2YqJR7tqcHOrfOmFTzqxVivEB8s+A0iEv/MwdlS6LpJBKU9+d94i1P9Lsqzlg7b/0ekRoYJEG4DXeNp2zxxBxZ1u3FBlIbyJoOGDmX+EU4A5eh2RlDdEvG1YF/zcMARpP1bFV86WTSOuQ==\";\n\n    // this is how I create the RSA from a key, hopefully successfully because a key is returned with no error\n    RSA* create_public_rsa(const unsigned char* p_key)\n    {\n       BIO *keybio = BIO_new_mem_buf(p_key, -1); // -1: assume string is null terminated\n       if (!keybio)\n       {\n            return nullptr;\n       }\n\n       RSA* l_res = nullptr;\n\n       l_res = PEM_read_bio_RSA_PUBKEY(keybio, NULL, NULL, NULL);\n\n       BIO_free(keybio);\n\n       return l_res;\n    }\n\n    bool RSAVerifySignature(RSA* rsa, std::string const&amp; token)\n    {\n       auto pub_key_handle = std::shared_ptr&lt;EVP_PKEY&gt;(EVP_PKEY_new(), EVP_PKEY_free);\n       if (!pub_key_handle)\n       {\n           return false;\n       }\n\n       RSA_up_ref(rsa);\n       EVP_PKEY_assign_RSA(pub_key_handle.get(), rsa);\n\n\n       std::string decoded_header(token, 0, token.find('.'));\n       std::string decoded_body;\n       decoded_body.append(token.begin()+ token.find('.')+1, token.begin() + token.rfind('.')-1);\n       std::string sig;\n       sig.append(token.begin() + token.rfind('.') + 1, token.end());\n       std::string sig_decoded;\n       base64_decode(sig.c_str(), sig.size(), sig_decoded);\n\n       EVP_MD_CTX* l_ctx = EVP_MD_CTX_create();\n       EVP_MD_CTX_init(l_ctx);\n\n       EVP_PKEY_CTX *pctx;\n       if (1 != EVP_DigestVerifyInit(l_ctx, /*&amp;pctx*/nullptr, \n EVP_sha256(), nullptr, pub_key_handle.get())) return false;\n       //pub_key_handle.reset();\n       if (1 != EVP_DigestVerifyUpdate(l_ctx, reinterpret_cast&lt;const unsigned char*&gt;(decoded_header.data()), decoded_header.length())) return false;\n       if (1 != EVP_DigestVerifyUpdate(l_ctx, \".\", 1)) return false;\n       if (1 != EVP_DigestVerifyUpdate(l_ctx, reinterpret_cast&lt;const unsigned char*&gt;(decoded_body.data()), decoded_body.length())) return false;\n       if(1 == EVP_DigestVerifyFinal(l_ctx, reinterpret_cast&lt;const unsigned char*&gt;(sig_decoded.data()), sig_decoded.length())) return true;\n\n       // ERR_print_errors_fp(stdout);\n\n       ERR_load_crypto_strings();\n       char err[130];\n       while(auto e = ERR_get_error())\n       {\n          ERR_error_string(e, err);\n          fprintf(stderr, \"Error verifying message: %s\\n\", err);\n       }\n\n       return false;\n    }  \n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>header: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9\nbody: eyJhdWQiOlsiYXBpLXJlc291cmNlIl0sInNjb3BlIjpbInJlYWQiXSwiZXhwIjoxNTYzNDUwODkzLCJhdXRob3JpdGllcyI6WyJST0xFX1VTRVIiXSwianRpIjoiMzVhYmVjZDEtNjcxMi00M2M3LWE4MDItZjg3MGYzMTY4MmI0IiwiY2xpZW50X2lkIjoidGVzdCJ\nsig: ZCXtI2nN+d0Cn5dgb3K9JMI41nrEaK/AVSMRG9c5cyZqXpnMQETfGcDEs0jPzmRh+jDc+Kuq53naOtjkItMcR/vYPn72dKZ4Fpp8mvOAZXypkVCLzof3Lsxrtqq9G3V4LNTuOHiXW/q+9mEu51zWg1HDr1+rSt3YXkFFSWp5e4MWS2TNP1MB7lBbZC+kdMZ/GqZ9lrfNo2YqJR7tqcHOrfOmFTzqxVivEB8s+A0iEv/MwdlS6LpJBKU9+d94i1P9Lsqzlg7b/0ekRoYJEG4DXeNp2zxxBxZ1u3FBlIbyJoOGDmX+EU4A5eh2RlDdEvG1YF/zcMARpP1bFV86WTSOuQ==\nError verifying message: error:04091068:rsa routines:INT_RSA_VERIFY:bad signature\nerror:04091068:rsa routines:INT_RSA_VERIFY:bad signature\n</code></pre>\n"}, {"tags": ["c++", "bash", "signals"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564580859, "post_id": 57292175, "comment_id": 101078913, "body": "Why is this question tagged with c++ and how is it related to programming?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564580890, "post_id": 57292175, "comment_id": 101078932, "body": "@ThomasSablik Just removed it - had to somehow vet an edit first."}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1564580951, "post_id": 57292175, "comment_id": 101078974, "body": "The problem is that at this point, <code>cat</code> is waiting for input on <code>stdin</code>, but you&#39;ve not given it an input file (via <code>&lt; in</code> or a pipe) and it&#39;s not connected to your terminal as <code>stdin</code>, so it got the signal <code>SIGTTIN</code> as soon as it tried to read from <code>stdin</code>. The terminal gets notified of this because interactive terminals have job control enabled by default, and so when they background job got suspended waiting in input from <code>stdin</code>, the message popped up."}, {"owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1564581350, "post_id": 57292175, "comment_id": 101079262, "body": "@PaulEvans I used C++ tag because at this moment I try create an app. This app must run /bin/cat in background. Give my tag back!"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1564581684, "post_id": 57292175, "comment_id": 101079496, "body": "Fixed the question so the c++ connection is clear. @\u0418\u0433\u043e\u0440\u044c\u0418\u0432\u0430\u043d\u043e\u0432, please review my edit to make sure I didn&#39;t diverge from your actual meaning."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1564581477, "post_id": 57292467, "comment_id": 101079342, "body": "I dont have a problem with this information. I just want to know How it works in code C++"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "reply_to_user": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1564581515, "post_id": 57292467, "comment_id": 101079374, "body": "just added a note about c++ at the bottom. Does that help?"}, {"owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1564581879, "post_id": 57292467, "comment_id": 101079625, "body": "no. sorry, you dont understand me. if I run /bin/cat in my app - its work normally. but I wont to handle an error like in a terminal"}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "reply_to_user": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1564584480, "post_id": 57292467, "comment_id": 101081353, "body": "Ah, OK. I think I get it now, sorry for mangling the question, and I&#39;m glad you fixed it. This is much deeper a question than I realized. I put you C++ tag back on, by the way, and I would say this is a C++ signals question, but not really a bash one. Now that I get your question, it seems like you need bash-style job control within C++, and I have no idea how to do that. I hope someone else can help. You might want to edit your question to make it more directly to that point, something like &quot;I would like to monitor child processes in C++ in a way similar to what bash does&quot;."}], "tags": [], "owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "is_accepted": false, "score": 0, "last_activity_date": 1564581487, "last_edit_date": 1564581487, "creation_date": 1564581258, "answer_id": 57292467, "question_id": 57292175, "link": "https://stackoverflow.com/questions/57292175/how-zsh-sh-bash-check-signal-sigttin-for-command-cat-launched-from-a-c-pro/57292467#57292467", "title": "How zsh/sh/bash check signal SIGTTIN for command &quot;cat &amp;&quot; launched from a c++ program", "body": "<p>The reason is that at this point, <code>cat</code> is waiting for input on <code>stdin</code>, but you've not given it an input file (via <code>&lt; in</code> or via a pipe like <code>echo foo | cat &amp;</code>) and it's not connected to your terminal as <code>stdin</code> since you put it in the background, so it got the signal <code>SIGTTIN</code> as soon as it tried to read from <code>stdin</code>. The terminal gets notified of this because interactive terminals have job control enabled by default, and so when the background job got suspended waiting in input from <code>stdin</code>, the message popped up.</p>\n\n<p>If you're trying to open <code>cat</code> in the background from a C++ program, you have to make sure to connect its <code>stdin</code> in the call when you're launching the <code>cat</code> process: give it a file, a pipe, or connect it to a file handle in your own program.</p>\n"}, {"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1564585548, "creation_date": 1564585548, "answer_id": 57293852, "question_id": 57292175, "link": "https://stackoverflow.com/questions/57292175/how-zsh-sh-bash-check-signal-sigttin-for-command-cat-launched-from-a-c-pro/57293852#57293852", "title": "How zsh/sh/bash check signal SIGTTIN for command &quot;cat &amp;&quot; launched from a c++ program", "body": "<p>Perhaps you want to use a <a href=\"https://en.cppreference.com/w/cpp/utility/program/signal\" rel=\"nofollow noreferrer\"><code>std::signal</code></a>, something like:</p>\n\n<pre><code>void signal_handler(int signal)\n{\n    std::cout &lt;&lt; \"Received SIGTTIN signal\\n\";\n}\n\nint main()\n{\n    std::signal(SIGTTIN, signal_handler);\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "is_accepted": true, "score": 2, "last_activity_date": 1564639603, "creation_date": 1564639603, "answer_id": 57302713, "question_id": 57292175, "link": "https://stackoverflow.com/questions/57292175/how-zsh-sh-bash-check-signal-sigttin-for-command-cat-launched-from-a-c-pro/57302713#57302713", "title": "How zsh/sh/bash check signal SIGTTIN for command &quot;cat &amp;&quot; launched from a c++ program", "body": "<p>So. After two days trying and crying now I solve this problem. If you want give your child process SIGTTIN you should call setpgid() in parent process.</p>\n"}], "owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 57302713, "answer_count": 3, "score": 1, "last_activity_date": 1564639603, "creation_date": 1564580365, "last_edit_date": 1564581981, "question_id": 57292175, "link": "https://stackoverflow.com/questions/57292175/how-zsh-sh-bash-check-signal-sigttin-for-command-cat-launched-from-a-c-pro", "title": "How zsh/sh/bash check signal SIGTTIN for command &quot;cat &amp;&quot; launched from a c++ program", "body": "<p>I can't understand <em>How the terminal knows if a binary used <code>stdin</code> in background mode</em>? </p>\n\n<p>I have a C++ program that must run commands like <code>/bin/cat</code> in the background, but I DONT get the error message:</p>\n\n<blockquote>\n  <p><code>cat</code> is stopped because it used <code>stdin</code> and got <code>SIGTTIN</code></p>\n</blockquote>\n"}, {"tags": ["c++", "function", "struct", "scope"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564580365, "post_id": 57292103, "comment_id": 101078551, "body": "Here is a good read that should help you: <a href=\"https://akrzemi1.wordpress.com/2012/02/03/value-semantics/\" rel=\"nofollow noreferrer\">akrzemi1.wordpress.com/2012/02/03/value-semantics</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1564580366, "post_id": 57292103, "comment_id": 101078552, "body": "What is <code>maps</code>? Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. Perhaps refresh <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a> too."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580413, "post_id": 57292103, "comment_id": 101078591, "body": "what is Map? and Point? and maps?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564580485, "post_id": 57292103, "comment_id": 101078640, "body": "<code>point</code> is copied. You can read most of it here <a href=\"https://en.cppreference.com/w/cpp/container/map/operator_at\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/map/operator_at</a>"}, {"owner": {"reputation": 534, "user_id": 1063364, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bcd101f6b7a20739b8b113e566efe8a0?s=128&d=identicon&r=PG", "display_name": "user1063364", "link": "https://stackoverflow.com/users/1063364/user1063364"}, "edited": false, "score": 0, "creation_date": 1564580519, "post_id": 57292103, "comment_id": 101078668, "body": "Thank you, if it is copied then I am safe, this is what I need to know. Many thanks"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1564581078, "post_id": 57292103, "comment_id": 101079068, "body": "BTW, there is a <code>map</code> symbol in the <code>std</code> namespace.  You may want to choose a different name."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1564581137, "post_id": 57292103, "comment_id": 101079117, "body": "Also, differentiating classes from variables by only case, e.g. <code>Map</code> vs. <code>map</code>, is poor coding style which can lead to confusion and injected defects."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1564581256, "post_id": 57292103, "comment_id": 101079205, "body": "Consider using <code>std::vector</code> instead of arrays.  Also, prefer passing by reference versus passing by pointer.  A pointer can point to anywhere, including invalid locations (and is difficult to validate).  A reference refers to an existing object."}], "answers": [{"comments": [{"owner": {"reputation": 534, "user_id": 1063364, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bcd101f6b7a20739b8b113e566efe8a0?s=128&d=identicon&r=PG", "display_name": "user1063364", "link": "https://stackoverflow.com/users/1063364/user1063364"}, "edited": false, "score": 0, "creation_date": 1564581058, "post_id": 57292340, "comment_id": 101079051, "body": "Thank you, I placed this question because I am searching for random crash in my program and I was not sure with usage struct as key for std::map."}], "tags": [], "owner": {"reputation": 135, "user_id": 10822088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed8608bc2c437d897a4c50e46946bda?s=128&d=identicon&r=PG&f=1", "display_name": "Pete D.", "link": "https://stackoverflow.com/users/10822088/pete-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1564580868, "creation_date": 1564580868, "answer_id": 57292340, "question_id": 57292103, "link": "https://stackoverflow.com/questions/57292103/c-will-be-struct-as-key-for-stdmap-copied-to-stdmap/57292340#57292340", "title": "C++ will be struct as key for std::map copied to std::map?", "body": "<p>point will be allocated on the stack, and shouldn't be accessed after addMap returns.\nA pointer to Map will be added to maps at the position given by point. maps will still\nhave the entry after addMap returns. As you are adding pointers to maps you need to\nbe careful the memory pointed to persists for at least the lifetime of maps. As you come from Java, I suggest you double check.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1564581566, "last_edit_date": 1564581566, "creation_date": 1564581252, "answer_id": 57292464, "question_id": 57292103, "link": "https://stackoverflow.com/questions/57292103/c-will-be-struct-as-key-for-stdmap-copied-to-stdmap/57292464#57292464", "title": "C++ will be struct as key for std::map copied to std::map?", "body": "<p><code>std::map</code> stores a copy of the key, regardless of the type of the key. While the local variable <code>point</code> is destroyed  at the end of <code>addMap</code>, <code>maps</code> is not destroyed, nor are its elements, which consist of the key and the value.</p>\n"}], "owner": {"reputation": 534, "user_id": 1063364, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/bcd101f6b7a20739b8b113e566efe8a0?s=128&d=identicon&r=PG", "display_name": "user1063364", "link": "https://stackoverflow.com/users/1063364/user1063364"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1564581982, "accepted_answer_id": 57292464, "answer_count": 2, "score": -3, "last_activity_date": 1564581566, "creation_date": 1564580152, "last_edit_date": 1564581259, "question_id": 57292103, "link": "https://stackoverflow.com/questions/57292103/c-will-be-struct-as-key-for-stdmap-copied-to-stdmap", "closed_reason": "Needs details or clarity", "title": "C++ will be struct as key for std::map copied to std::map?", "body": "<p>I have function in which I use struct as key for <code>std::map</code>. But I am not sure what will happen with that struct if I exit my function. Will be stored in <code>std::map</code> or will be deleted when exiting function scope and further search usage in <code>std::map</code> will be broken?</p>\n\n<pre><code>    //Map is standard class\n    class Map { ... }\n\n    //hashmap of maps\n    std::map&lt;Point, Map*&gt; maps;\n\n    void Maps::addMap(Map *map, int row, int column) {\n      Point point = {row, column};\n      maps[point] = map;\n    }\n</code></pre>\n\n<p>EDIT :</p>\n\n<p>Thanks to Thomas Sablik</p>\n\n<p>I know that basic types like int are copied, but I did not know what happens by struct. If is copied then I am safe</p>\n\n<p>EDIT 2</p>\n\n<p>I changed my question, I did not know what to ask correctly to get my answer, sorry.</p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "factory", "std-function"], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 1, "last_activity_date": 1564581513, "last_edit_date": 1564581513, "creation_date": 1564580661, "answer_id": 57292280, "question_id": 57292083, "link": "https://stackoverflow.com/questions/57292083/combination-of-2-templated-constructors-for-class-build-with-variadic-templates/57292280#57292280", "title": "Combination of 2 templated constructors for class build with variadic templates. How?", "body": "<p>How about simply removing the constructor taking the <code>std::function</code>?</p>\n\n<pre><code>template&lt;typename Function&gt;\nCreator(Function&amp;&amp; fun) : m_any(std::function(fun)) {}\n</code></pre>\n\n<p>This will wrap <code>fun</code> only if it's not already a <code>std::function</code>. For cases if it's a <code>std::function</code> then it's a noop.</p>\n\n<p><a href=\"https://godbolt.org/z/ODClJq\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<hr>\n\n<p>Looking at your code, you only use function pointers as your factory function. You could save yourself some indirections using function pointers directly instead of <code>std::function</code>, which is already a layer like <code>std::any</code>.</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nusing Func = std::add_pointer_t&lt;Ret(Args...)&gt;;\n\n// in you class:\n\ntemplate&lt;typename Function, std::enable_if_t&lt;std::is_pointer_v&lt;Function&gt;, int&gt; = 0&gt;\nCreator(Function fun) : m_any(fun) {}\n</code></pre>\n\n<p>If you use that, in C++20 you can remove the ugly enable if and use a concept:</p>\n\n<pre><code>template&lt;typename T&gt;\nconcept FunctionPointer = requires(T t) {\n    requires std::is_pointer_v&lt;T&gt;;\n    requires std::is_function_v&lt;std::remove_pointer_t&lt;T&gt;&gt;;\n    { std::function(t) };\n};\n\n// then in your class:\n\nCreator(FunctionPointer auto fun) : m_any(fun) {}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/E9VvIx\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57292280, "answer_count": 1, "score": 1, "last_activity_date": 1564581513, "creation_date": 1564580086, "question_id": 57292083, "link": "https://stackoverflow.com/questions/57292083/combination-of-2-templated-constructors-for-class-build-with-variadic-templates", "title": "Combination of 2 templated constructors for class build with variadic templates. How?", "body": "<p>I created some small factory class. See the code below. The factory uses a simple map with a key and a class creator function. The challenge was that I wanted to use different signatures for the createInstance functions. With that, I could use different derived classes with different constructor signatures. So, I would be able to pass different values to the constructor of the classes.</p>\n\n<p>Since I cannot store functions with different signatueres in <code>std::function</code> and finally in a <code>std::map</code>, I have written a short wrapper that \"erases\" the type parameter part. So, basically I can then store the function in a <code>std::function</code>, and finally in a <code>std::any</code>.</p>\n\n<p>The code works fine. You can compile it and run it without problem.</p>\n\n<p>There is also some test code attached.</p>\n\n<p>Now my question:</p>\n\n<p>I tried to come up with only <strong>one</strong> constructor in my class <strong>\"Creator\"</strong>. But I could <strong>not</strong> achieve that. In my opinion it should be possible. I would like to ask for your support to come up with a possible solution.</p>\n\n<p>Please note: I am in the phase of refactoring. So the code is not yet \"perfect\".</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;utility&gt;\n#include &lt;functional&gt;\n#include &lt;any&gt;\n\n// Some demo classes ----------------------------------------------------------------------------------\nstruct Base {\n    Base(int d) : data(d) {};\n    virtual ~Base() { std::cout &lt;&lt; \"Destructor Base\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Base\\n\"; }\n    int data{};\n};\nstruct Child1 : public Base {\n    Child1(int d, std::string s) : Base(d) { std::cout &lt;&lt; \"Constructor Child1 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; s &lt;&lt; \"\\n\"; }\n    virtual ~Child1() { std::cout &lt;&lt; \"Destructor Child1\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child1: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\nstruct Child2 : public Base {\n    Child2(int d, char c, long l) : Base(d) { std::cout &lt;&lt; \"Constructor Child2 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \" \" &lt;&lt; l &lt;&lt; \"\\n\"; }\n    virtual ~Child2() { std::cout &lt;&lt; \"Destructor Child2\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child2: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\nstruct Child3 : public Base {\n    Child3(int d, long l, char c, std::string s) : Base(d) { std::cout &lt;&lt; \"Constructor Child3 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; l &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \" \" &lt;&lt; s &lt;&lt; \"\\n\"; }\n    virtual ~Child3() { std::cout &lt;&lt; \"Destructor Child3\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child3: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\n\n\nusing Ret = std::unique_ptr&lt;Base&gt;;\n\ntemplate &lt;typename ... Args&gt;\nusing Func = std::function&lt;Ret(Args...)&gt;;\n\n// ---------------------------------------------------------------------------------------------------\n// Hide away the different signatures for std::function\nclass Creator\n{\npublic:\n    Creator() {}\n\n    // I want to combine the follwong 2 constructors in one\n    template&lt;typename Function&gt;\n    Creator(Function&amp;&amp; fun) : Creator(std::function(fun)) {}\n    template&lt;typename ... Args&gt;\n    Creator(Func&lt;Args...&gt; fun) : m_any(fun) {}\n\n    template&lt;typename ... Args&gt;\n    Ret operator()(Args ... args)   { return std::any_cast&lt;Func&lt;Args...&gt;&gt;(m_any)(args...);  }\nprotected:\n    std::any m_any;\n};\n\n\ntemplate &lt;class Child, typename ...Args&gt;\nstd::unique_ptr&lt;Base&gt; createClass(Args...args) { return std::make_unique&lt;Child&gt;(args...); }\n\n// The Factory ----------------------------------------------------------------------------------------\ntemplate &lt;class Key&gt;\nclass Factory\n{\n    std::map&lt;Key, Creator&gt; selector;\npublic:\n    Factory(std::initializer_list&lt;std::pair&lt;const Key, Creator&gt;&gt; il) : selector(il) {}\n\n    template &lt;typename ... Args&gt;\n    Ret createInstance(Key key, Args ... args) {\n        if (selector.find(key) != selector.end()) {\n            return selector[key](args ...);\n        }\n        else {\n            return std::make_unique&lt;Base&gt;(0);\n        }\n    }\n};\n\nint main()\n{\n    Factory&lt;int&gt; factory { \n        {1, createClass&lt;Child1, int, std::string&gt;},\n        {2, createClass&lt;Child2, int, char, long&gt;},\n        {3, createClass&lt;Child3, int, long, char, std::string&gt;}\n    };\n\n    // Some test values\n    std::string s1(\" Hello1 \"); std::string s3(\" Hello3 \");\n    int i = 1;  const int ci = 1;   int&amp; ri = i;    const int&amp; cri = i;   int&amp;&amp; rri = 1;\n\n    std::unique_ptr&lt;Base&gt; b1 = factory.createInstance(1,   1, s1);\n    std::unique_ptr&lt;Base&gt; b2 = factory.createInstance(2,   2, '2', 2L);\n    std::unique_ptr&lt;Base&gt; b3 = factory.createInstance(3,   3, 3L, '3', s3);\n\n    b1-&gt;print();\n    b2-&gt;print();\n    b3-&gt;print();\n    b1 = factory.createInstance(2, 4, '4', 4L);\n    b1-&gt;print();\n    return 0;\n}\n</code></pre>\n\n<p>So, again, I would like to get rid of the 2 constructors</p>\n\n<pre><code>    template&lt;typename Function&gt;\n    Creator(Function&amp;&amp; fun) : Creator(std::function(fun)) {}\n\n    template&lt;typename ... Args&gt;\n    Creator(Func&lt;Args...&gt; fun) : m_any(fun) {}\n</code></pre>\n\n<p>and have only one in the end. How?</p>\n\n<p>Sorry for the lengthy code.</p>\n"}, {"tags": ["c++", "intel", "sse", "simd", "intrinsics"], "comments": [{"owner": {"reputation": 730, "user_id": 5096416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc4dbd84e88180775789317cf72125f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/5096416/lawrence"}, "edited": false, "score": 3, "creation_date": 1564580432, "post_id": 57292018, "comment_id": 101078602, "body": "Try <code>_mm_unpacklo_epi8</code> and <code>_mm_unpackhi_epi8</code>"}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "reply_to_user": {"reputation": 730, "user_id": 5096416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc4dbd84e88180775789317cf72125f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/5096416/lawrence"}, "edited": false, "score": 0, "creation_date": 1564580608, "post_id": 57292018, "comment_id": 101078746, "body": "@Lawrence I will give it a try, thanks"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 730, "user_id": 5096416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc4dbd84e88180775789317cf72125f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/5096416/lawrence"}, "edited": false, "score": 1, "creation_date": 1564591164, "post_id": 57292018, "comment_id": 101085084, "body": "@Lawrence <code>_mm_unpacklo_epi8</code> won&#39;t help much with signed unpacking. With SSE4.1 <code>_mm_cvtepi8_epi16</code> might be an option."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 730, "user_id": 5096416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc4dbd84e88180775789317cf72125f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/5096416/lawrence"}, "edited": false, "score": 0, "creation_date": 1564661922, "post_id": 57292018, "comment_id": 101110097, "body": "@Lawrence, actually, <code>_mm_unpack{lo,hi}_epi8</code> could work, since you can unpack the data bytes into the upper half of each 16bit word (and use <code>_mm_mulhi_epi16</code> for multiplication). I think you still need to either shift (or cleverly permute) the multiplication result, since I don&#39;t think there is a variant of <code>_mm_packs_epi16</code> which shifts to the right instead of saturating."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1564593712, "post_id": 57295415, "comment_id": 101086176, "body": "Thanks, it really helps!"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1564661890, "post_id": 57295415, "comment_id": 101110077, "body": "Nice update.  Agreed that looks like a better balance of mul/shift vs. other uops.  Skylake can run integer shift/mul on p0 or p1, but getting more uops that can use p5 into the mix is still good.  Good for Ryzen, too: even though mul and shift run on separate ports, they&#39;re each only 1c throughput.  (vs. 4/clock throughput for <code>pand</code>/<code>pxor</code> that can run on Ryzen&#39;s P0123)"}], "tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 3, "last_activity_date": 1564661660, "last_edit_date": 1564661660, "creation_date": 1564591041, "answer_id": 57295415, "question_id": 57292018, "link": "https://stackoverflow.com/questions/57292018/sse2-packed-8-bit-integer-signed-multiply-high-half-decomposing-a-m128i-16x8/57295415#57295415", "title": "SSE2 packed 8-bit integer signed multiply (high-half): Decomposing a m128i (16x8 bit) into two m128i (8x16 each) and repack", "body": "<p>As you want to do signed multiplication, you need to sign-extend each byte to 16bit words, or move them into the upper half of each 16bit word. Since you pack the results back together afterwards, you can split the input into odd and even bytes, instead of the higher and lower half. <strike>Then sign-extension of the odd bytes can be done by arithmetically shifting all 16bit parts to the right</strike> You can extract the odd bytes by masking out the even bytes, and to get the even bytes, you can shift all 16bit parts to the left (both need to be multiplied by <code>_mm_mulhi_epi16</code>).</p>\n\n<p>The following should work with SSE2:</p>\n\n<pre><code>__m128i mulhi_epi8(__m128i a, __m128i b)\n{\n    __m128i mask = _mm_set1_epi16(0xff00);\n    // mask higher bytes:\n    __m128i a_hi = _mm_and_si128(a, mask);\n    __m128i b_hi = _mm_and_si128(b, mask);\n\n    __m128i r_hi = _mm_mulhi_epi16(a_hi, b_hi);\n    // mask out garbage in lower half:\n    r_hi = _mm_and_si128(r_hi, mask);\n\n    // shift lower bytes to upper half\n    __m128i a_lo = _mm_slli_epi16(a,8);\n    __m128i b_lo = _mm_slli_epi16(b,8);\n    __m128i r_lo = _mm_mulhi_epi16(a_lo, b_lo);\n    // shift result to the lower half:\n    r_lo = _mm_srli_epi16(r_lo,8);\n\n    // join result and return:\n    return _mm_or_si128(r_hi, r_lo);\n}\n</code></pre>\n\n<p>Note: a previous version used shifts to sign-extend the odd bytes. On most Intel CPUs this would increase P0 usage (which needs to be used for multiplication as well). Bit-logic can operate on more ports, so this version should have better throughput.</p>\n"}], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 57295415, "answer_count": 1, "score": 1, "last_activity_date": 1564661660, "creation_date": 1564579929, "last_edit_date": 1564616893, "question_id": 57292018, "link": "https://stackoverflow.com/questions/57292018/sse2-packed-8-bit-integer-signed-multiply-high-half-decomposing-a-m128i-16x8", "title": "SSE2 packed 8-bit integer signed multiply (high-half): Decomposing a m128i (16x8 bit) into two m128i (8x16 each) and repack", "body": "<p>I'm trying to multiply two <code>m128i</code> byte per byte (8 bit signed integers).</p>\n\n<p>The problem here is overflow. My solution is to store these 8 bit signed integers into 16 bit signed integers, multiply, then pack the whole thing into a <code>m128i</code> of 16 x 8 bit integers.</p>\n\n<p>Here is the <code>__m128i mulhi_epi8(__m128i a, __m128i b)</code> emulation I made:</p>\n\n<pre><code>inline __m128i mulhi_epi8(__m128i a, __m128i b)\n{\n    auto a_decomposed = decompose_epi8(a);\n    auto b_decomposed = decompose_epi8(b);\n\n    __m128i r1 = _mm_mullo_epi16(a_decomposed.first, b_decomposed.first);\n    __m128i r2 = _mm_mullo_epi16(a_decomposed.second, b_decomposed.second);\n\n    return _mm_packs_epi16(_mm_srai_epi16(r1, 8), _mm_srai_epi16(r2, 8));\n}\n</code></pre>\n\n<p><code>decompose_epi8</code> is implemented in a non-simd way:</p>\n\n<pre><code>inline std::pair&lt;__m128i, __m128i&gt; decompose_epi8(__m128i input)\n{\n    std::pair&lt;__m128i, __m128i&gt; result;\n\n    // result.first     =&gt;  should contain 8 shorts in [-128, 127] (8 first bytes of the input)\n    // result.second    =&gt;  should contain 8 shorts in [-128, 127] (8 last bytes of the input)\n\n    for (int i = 0; i &lt; 8; ++i)\n    {\n        result.first.m128i_i16[i]   = input.m128i_i8[i];\n        result.second.m128i_i16[i]  = input.m128i_i8[i + 8];\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>This code works well. My goal now is to implement a simd version of this for loop. I looked at the <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/\" rel=\"nofollow noreferrer\">Intel Intrinsics Guide</a> but I can't find a way to do this. I guess shuffle could do the trick but I have trouble conceptualising this.</p>\n"}, {"tags": ["c++", "algorithm", "stack", "runtime-error", "shunting-yard"], "comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 2, "creation_date": 1564579997, "post_id": 57291984, "comment_id": 101078327, "body": "Have you debugged this code?"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580098, "post_id": 57291984, "comment_id": 101078400, "body": "I think you need some parentheses here: else if(st[x] &gt;= &#39;a&#39; || st[x] &lt;= &#39;z&#39; &amp;&amp; st[x] != &#39; &#39;)"}, {"owner": {"reputation": 29, "user_id": 11624242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111edc9a9fd15e944908d0b20f70d277?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagya Singh", "link": "https://stackoverflow.com/users/11624242/bhagya-singh"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580164, "post_id": 57291984, "comment_id": 101078432, "body": "I have tried, used different inputs (with and without brackets and spaces)  but till now only this input is causing a problem."}, {"owner": {"reputation": 29, "user_id": 11624242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111edc9a9fd15e944908d0b20f70d277?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagya Singh", "link": "https://stackoverflow.com/users/11624242/bhagya-singh"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580363, "post_id": 57291984, "comment_id": 101078549, "body": "Parentheses placed, still runtime error"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1564580383, "post_id": 57291984, "comment_id": 101078570, "body": "Have you used your debugger to identify where in the code the runtime error occurs?"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580604, "post_id": 57291984, "comment_id": 101078741, "body": "@BhagyaSingh With &quot;debug your code&quot; I don&#39;t mean &quot;try some input&quot;, I mean: have you used a debugger to see exactly where your problem is?"}, {"owner": {"reputation": 29, "user_id": 11624242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111edc9a9fd15e944908d0b20f70d277?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagya Singh", "link": "https://stackoverflow.com/users/11624242/bhagya-singh"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564580640, "post_id": 57291984, "comment_id": 101078771, "body": "@MFnx No haven&#39;t used a real debugger as per se, only tried it with different inputs."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 1, "creation_date": 1564580912, "post_id": 57291984, "comment_id": 101078942, "body": "@BhagyaSingh I recommend you to use a debugger, and if you still don&#39;t understand the problem, post your debugging results here."}, {"owner": {"reputation": 179, "user_id": 11804824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b17674e5753e51e3103dba124088fe?s=128&d=identicon&r=PG&f=1", "display_name": "embeddedPy", "link": "https://stackoverflow.com/users/11804824/embeddedpy"}, "edited": false, "score": 0, "creation_date": 1564581427, "post_id": 57291984, "comment_id": 101079314, "body": "You can change the order of <code>op.top() != &#39;(&#39; &amp;&amp; !op.empty()</code> such that <code>!op.empty()</code> is done first and if it fails then <code>op.top() != &#39;(&#39;</code> doesn&#39;t get evaluated."}, {"owner": {"reputation": 179, "user_id": 11804824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b17674e5753e51e3103dba124088fe?s=128&d=identicon&r=PG&f=1", "display_name": "embeddedPy", "link": "https://stackoverflow.com/users/11804824/embeddedpy"}, "edited": false, "score": 0, "creation_date": 1564581759, "post_id": 57291984, "comment_id": 101079542, "body": "Likewise, after the <code>while</code>, when you do <code>op.pop()</code>, check that the stack is non-empty before doing it. Also in the <code>if (pr(st[x]) &lt;= pr(op.top()))</code> add that check, for example by adding <code>!op.empty() &amp;&amp;</code> to the condition."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1564583154, "post_id": 57291984, "comment_id": 101080465, "body": "@BhagyaSingh -- You should get yourself a compiler and debugger, test / correct your code on your machine using the input you say doesn&#39;t work.  Once that works, <i>then</i> you submit it to the online compiler.  Trying to do this with an online compiler alone, and especially since you know what input breaks your code, will be a lot of time wasted on your part.  Also, when you submit code here, please hard-code the input into the program.  No one cares about <code>t</code> or <code>scanf</code> -- you know what the input should be, so just put it directly into the program&#39;s variables."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1564583674, "post_id": 57291984, "comment_id": 101080810, "body": "@BhagyaSingh This is what your <code>main</code> should look like: <code>int main() { \tinfixToPostfix(&quot;(((a+b) * (c+r)^(t+b)-n)^(c-(d * e))-b)+(c+(e-(d^r)))&quot;); }</code> -- Posting code verbatim as if we&#39;re the SPOJ site should not be done.  The code duplicates the error, doesn&#39;t require us to type in the input every single time we run the program, and makes it easier (once you get a compiler) for you to debug the issue."}, {"owner": {"reputation": 29, "user_id": 11624242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111edc9a9fd15e944908d0b20f70d277?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagya Singh", "link": "https://stackoverflow.com/users/11624242/bhagya-singh"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1564589762, "post_id": 57291984, "comment_id": 101084384, "body": "Thank you all for your invaluable feedback. As suggested by @MFnx and others I did debugged my program and have corrected the error. Sry for the trouble."}], "owner": {"reputation": 29, "user_id": 11624242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111edc9a9fd15e944908d0b20f70d277?s=128&d=identicon&r=PG&f=1", "display_name": "Bhagya Singh", "link": "https://stackoverflow.com/users/11624242/bhagya-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564580463, "creation_date": 1564579856, "last_edit_date": 1564580463, "question_id": 57291984, "link": "https://stackoverflow.com/questions/57291984/how-to-fix-runtime-error-in-shunting-yard-algorithm", "title": "How to fix runtime error in Shunting Yard algorithm", "body": "<p>I have implemented Shunting yard algorithm using stack in c++.\nWell it is working quite well on inputs from SPOJ example inputs but when I input:</p>\n\n<p>1</p>\n\n<p>(((a+b) * (c+r)^(t+b)-n)^(c-(d * e))-b)+(c+(e-(d^r)))</p>\n\n<p>I get a runtime error.</p>\n\n<p><strong>Note: I only get a runtime error when I call infixToPostfix() and use the above input and not when I comment it out.</strong>\nSubmission to SPOJ and running on ideone(with input above) results in a runtime error.\nI really can't understand this behaviour of my program, so any help is welcomed.</p>\n\n<p>I have tried some random inputs and it seems to work fine on them.\nEven though they had spaces around operators.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;math.h&gt;\n#include&lt;stack&gt;\n#include&lt;strings.h&gt;\nusing namespace std;\nvoid infixToPostfix(string st);\nint pr(char s);\nint main() {\n    int t;\n    scanf(\"%d\",&amp;t);\n    cin.ignore();\n    string st; // input string\n\n    while(t--)\n    {\n        getline(cin,st);\n        cin.sync();\n        cout&lt;&lt;st&lt;&lt;endl;\n        infixToPostfix(st);\n    }\n    return 0;\n}\n\nint pr(char s) // to check precedence\n{\n    if(s == '^')\n    {\n        return 4;\n    }\n    else if(s == '*')\n    {\n        return 3;\n    }\n    else if(s == '/')\n    {\n        return 3;\n    }\n    else if(s == '+')\n    {\n        return 2;\n    }\n    else if(s == '-')\n    {\n        return 2;\n    }\n    else {\n        return 0;\n    }\n}\nvoid infixToPostfix(string st)\n{\n    stack&lt;char&gt;op; //stack to hold operators and bracket\n    st += 'n';\n\n    int l = st.size();\n    op.push('0');\n    string fst;    //final string\n    for(int x = 0;x&lt;l;x++)\n    {\n        if(st[x] == '(')\n        {\n            op.push(st[x]);\n\n        }\n        else if(st[x] == ')')\n        {\n            while(op.top() != '(' &amp;&amp;  !op.empty())\n            {\n\n                fst +=op.top();\n                op.pop();\n            }\n            op.pop();\n        }\n        else if(st[x] == '+' || st[x] == '-' || st[x] == '*' ||st[x] == '/' ||st[x] == '^')\n        {\n            if(pr(st[x]) &lt;= pr(op.top()))\n            {\n                fst += op.top();\n                op.pop();\n                op.push(st[x]);\n            }\n            else{\n                op.push(st[x]);\n            }\n        }\n        else if(st[x] == 'n'){\n\n            while(op.size() != 0)\n            {\n                if(op.top() != '0')\n                   {fst += op.top();}\n                op.pop();\n            }\n        }\n        else if((st[x] &gt;= 'a' || st[x] &lt;= 'z' )&amp;&amp; st[x] != ' ')\n        {\n\n\n            fst += st[x];\n        }\n\n    }\nprintf(\"%s\\n\",fst.c_str());\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "udp", "esp8266"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1564587012, "post_id": 57291776, "comment_id": 101082860, "body": "If you want to create/manipulate packet headers yourself, you&#39;ll probably want to use raw sockets:  <a href=\"https://opensourceforu.com/2015/03/a-guide-to-using-raw-sockets/\" rel=\"nofollow noreferrer\">opensourceforu.com/2015/03/a-guide-to-using-raw-sockets</a>"}, {"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1564595396, "post_id": 57291776, "comment_id": 101086899, "body": "for esp8266 Arduino you can select the LwIP in Tools menu. Select a LwIP version build from source code and you can modify the LwIP source code then"}], "owner": {"reputation": 11, "user_id": 9679964, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sRhXlkhFLl4/AAAAAAAAAAI/AAAAAAAAAQY/9Mo3NayMa1M/photo.jpg?sz=128", "display_name": "Igor Fran&#231;a", "link": "https://stackoverflow.com/users/9679964/igor-fran%c3%a7a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564579190, "creation_date": 1564579190, "question_id": 57291776, "link": "https://stackoverflow.com/questions/57291776/how-can-i-inject-errors-in-a-udp-packet-transmitted-by-a-esp8266", "title": "How can I inject errors in a UDP packet transmitted by a ESP8266?", "body": "<p>I'm doing some research about error detection in UDP packets. I have a simple code that makes my ESP8266 send packets but I wanted to go deeper and alter information at the header or at the payload of the packet before it is sent, is there any way I can do it? I tried to find a way analyzing  the source code of the WiFiUdp.h, the \"write(const uint8_t *buffer, size_t size)\" method to be more specific, but had no success. I'm using the Arduino IDE if it helps in any way</p>\n"}, {"tags": ["c++", "string", "decimal"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564579660, "post_id": 57291758, "comment_id": 101078109, "body": "Does your computer have enough precision in a <code>float</code> to do that? Are you sure?"}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564579902, "post_id": 57291758, "comment_id": 101078255, "body": "@LightnessRacesinOrbit I am not sure anything. I don&#39;t want to print a and b. I just want a and b get the all values. If they already get all values and if it appear in a short way because of printing, it&#39;s okay. can you tell me ?"}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564579972, "post_id": 57291758, "comment_id": 101078305, "body": "@NathanOliver I accepted your small answer. thank you bro"}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564580010, "post_id": 57291758, "comment_id": 101078335, "body": "@NathanOliver also which type should I use? double or float?"}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "edited": false, "score": 0, "creation_date": 1564580016, "post_id": 57291758, "comment_id": 101078337, "body": "for     float a, b;"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564580033, "post_id": 57291758, "comment_id": 101078355, "body": "You can check the real value of the variable using a <i>debugger</i>. But for printing, the duplicate answers it well."}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564580105, "post_id": 57291758, "comment_id": 101078403, "body": "@Yksisarvinen thank you. also float a,b; is correct? or should I use double?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564580391, "post_id": 57291758, "comment_id": 101078576, "body": "@NathanOliver Really? I thought a IEEE 754 single-precision float only guaranteed six-ish decimal significant figures (barring looser constraints on powers of two)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564580425, "post_id": 57291758, "comment_id": 101078597, "body": "What is &quot;cout.net&quot;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564580436, "post_id": 57291758, "comment_id": 101078605, "body": "@LightnessRacesinOrbit You&#39;re correct.  Not sure what I was thinking.  They&#39;d need a double for full precision."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564580444, "post_id": 57291758, "comment_id": 101078608, "body": "@NathanOliver Nearly the weekend...."}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564583273, "post_id": 57291758, "comment_id": 101080549, "body": "@LightnessRacesinOrbit you made me confuse..."}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564583281, "post_id": 57291758, "comment_id": 101080553, "body": "@NathanOliver you made me confuse..."}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1564583295, "post_id": 57291758, "comment_id": 101080562, "body": "@Yksisarvinen you made me confuse..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564587101, "post_id": 57291758, "comment_id": 101082919, "body": "@baybaybay Your comment (written three times!) does not add anything to the discussion."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1564580541, "creation_date": 1564580541, "answer_id": 57292239, "question_id": 57291758, "link": "https://stackoverflow.com/questions/57291758/how-to-get-all-decimal-number-from-string-in-c/57292239#57292239", "title": "how to get all decimal number from string in c++", "body": "<p>You can't.</p>\n\n<p>A <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"noreferrer\"><code>float</code></a> can only give you six (ish) decimal <em>significant figures</em>. The values in your file, after conversion from string, cannot be held in a <code>float</code>.</p>\n\n<p>First, you need to switch to <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"noreferrer\"><code>double</code></a>, otherwise you won't even have a variable with the full numerical value.</p>\n\n<p>Then, for output, be careful to <a href=\"https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout\">specify the precision you want</a>.</p>\n\n<p>Please remain aware of the foibles of floating-point, and consider sticking with strings, depending on what you're doing with this data.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "edited": false, "score": 0, "creation_date": 1564583132, "post_id": 57292521, "comment_id": 101080452, "body": "this doesn&#39;t show all value when I print out. But I don&#39;t want to show, I just want they get the exact values. Do they get the exact values if I use double?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "edited": false, "score": 0, "creation_date": 1564587127, "post_id": 57292521, "comment_id": 101082938, "body": "@baybaybay Try it and find out?"}], "tags": [], "owner": {"reputation": 495, "user_id": 6770027, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZOOf4wwDA4E/AAAAAAAAAAI/AAAAAAAAAHQ/aYLr1lm7f1A/photo.jpg?sz=128", "display_name": "GIRISH kuniyal", "link": "https://stackoverflow.com/users/6770027/girish-kuniyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1564581415, "creation_date": 1564581415, "answer_id": 57292521, "question_id": 57291758, "link": "https://stackoverflow.com/questions/57291758/how-to-get-all-decimal-number-from-string-in-c/57292521#57292521", "title": "how to get all decimal number from string in c++", "body": "<p>There are two main things i see in your code.</p>\n\n<ol>\n<li><strong>float</strong> precision is not enough for you data you need <strong>double</strong> data type.</li>\n<li>you need to set proper cout precision to get your desired output.</li>\n</ol>\n\n<p>This code will work for you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::ifstream infile(\"newfile.txt\");\n    double a, b;\n    std::cout.precision(11);\n    while (infile &gt;&gt; a &gt;&gt; b)\n    {\n        // process pair (a,b)\n    }\n\n    std::cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564581934, "post_id": 57292543, "comment_id": 101079652, "body": "Why do this yourself when IOStreams will do it for you? In code that the OP&#39;s written?"}, {"owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "edited": false, "score": 0, "creation_date": 1564583342, "post_id": 57292543, "comment_id": 101080592, "body": "@ShafiqaIqbal I didn&#39;t get all what you said"}], "tags": [], "owner": {"reputation": 118, "user_id": 11548219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCQZHLkysHpVbfkpnmwNdafoVkEN0L-_obAXkH0SQ=k-s128", "display_name": "Shafiqa Iqbal", "link": "https://stackoverflow.com/users/11548219/shafiqa-iqbal"}, "is_accepted": false, "score": 0, "last_activity_date": 1564581484, "creation_date": 1564581484, "answer_id": 57292543, "question_id": 57291758, "link": "https://stackoverflow.com/questions/57291758/how-to-get-all-decimal-number-from-string-in-c/57292543#57292543", "title": "how to get all decimal number from string in c++", "body": "<p>you should read your inputs into a string and then convert them into double (depending on enough precision in float on your computer). you can directly display strings. A possible answer is <a href=\"https://stackoverflow.com/a/4754486/11548219\">here</a>.</p>\n\n<pre><code>string word;  \nopenfile &gt;&gt; word;\ndouble lol = atof(word.c_str());\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11864106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed3cc6ead67073ac2b0d90b358db66fd?s=128&d=identicon&r=PG&f=1", "display_name": "baybaybay", "link": "https://stackoverflow.com/users/11864106/baybaybay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1564583051, "creation_date": 1564579160, "last_edit_date": 1564583051, "question_id": 57291758, "link": "https://stackoverflow.com/questions/57291758/how-to-get-all-decimal-number-from-string-in-c", "title": "how to get all decimal number from string in c++", "body": "<p>I'm trying to get value (all decimal number) from a text in c++. But I have a problem and I couldn't solve it</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::ifstream infile(\"C:\\\\thefile.txt\");\n    float a, b;\n    while (infile &gt;&gt; a &gt;&gt; b)\n    {\n        // process pair (a,b)\n    }\n\n    std::cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b;\n\n}\n</code></pre>\n\n<p>thefile.txt:</p>\n\n<pre><code>34.123456789 77.987654321\n</code></pre>\n\n<p>When I run the above code, </p>\n\n<pre><code>a = 34.1235 \nb = 77.9877\n</code></pre>\n\n<p>but I want </p>\n\n<pre><code>a = 34.123456789 \nb = 77.987654321\n</code></pre>\n\n<p>what should I do?</p>\n\n<p>EDIT: I don't want to print out of a and b. I just want they get the exact values.net</p>\n"}, {"tags": ["c++", "linux", "multithreading", "std"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564579252, "post_id": 57291698, "comment_id": 101077847, "body": "Why aren&#39;t you just using <code>thread(tfunc)</code>?"}, {"owner": {"reputation": 740, "user_id": 5275945, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/02e26f954321fb0b208690369b38a22f?s=128&d=identicon&r=PG&f=1", "display_name": "Mihai", "link": "https://stackoverflow.com/users/5275945/mihai"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564579320, "post_id": 57291698, "comment_id": 101077883, "body": "@NathanOliver that was the first thing i tried but the error is the same"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 6, "creation_date": 1564579355, "post_id": 57291698, "comment_id": 101077906, "body": "Initial integer value is missing when thread ctor is called: <code>thread(std::ref(tfunc), 123)</code>. Function of thread body takes integer, you need to provide it when thread starts."}, {"owner": {"reputation": 740, "user_id": 5275945, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/02e26f954321fb0b208690369b38a22f?s=128&d=identicon&r=PG&f=1", "display_name": "Mihai", "link": "https://stackoverflow.com/users/5275945/mihai"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1564580063, "post_id": 57291698, "comment_id": 101078378, "body": "@rafix07 Of course"}], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 5275945, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/02e26f954321fb0b208690369b38a22f?s=128&d=identicon&r=PG&f=1", "display_name": "Mihai", "link": "https://stackoverflow.com/users/5275945/mihai"}, "is_accepted": true, "score": 3, "last_activity_date": 1601991003, "last_edit_date": 1601991003, "creation_date": 1564651679, "answer_id": 57305872, "question_id": 57291698, "link": "https://stackoverflow.com/questions/57291698/error-static-assertion-failed-stdthread-arguments-must-be-invocable-after-co/57305872#57305872", "title": "error: static assertion failed: std::thread arguments must be invocable after conversion to rvalues", "body": "<p>The initial integer value is missing when thread ctor is called: thread(std::ref(tfunc), 123).</p>\n<p>Function of thread body takes integer, you need to provide it when thread starts.</p>\n"}], "owner": {"reputation": 740, "user_id": 5275945, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/02e26f954321fb0b208690369b38a22f?s=128&d=identicon&r=PG&f=1", "display_name": "Mihai", "link": "https://stackoverflow.com/users/5275945/mihai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6996, "favorite_count": 2, "accepted_answer_id": 57305872, "answer_count": 1, "score": 10, "last_activity_date": 1601991003, "creation_date": 1564579007, "last_edit_date": 1564579362, "question_id": 57291698, "link": "https://stackoverflow.com/questions/57291698/error-static-assertion-failed-stdthread-arguments-must-be-invocable-after-co", "title": "error: static assertion failed: std::thread arguments must be invocable after conversion to rvalues", "body": "<p>I am trying to add a std::function to std::thread and i stumble upon this error</p>\n\n<pre><code>error: static assertion failed: std::thread arguments must be invocable after conversion to rvalues\n</code></pre>\n\n<pre><code>struct Foo {\n    explicit Foo(const std::function&lt;void(int)&gt;&amp; tfunc)\n        : thread(tfunc) { //&lt;----- error points here\n        thread.join();\n    }\n\n    std::thread thread;\n}\n</code></pre>\n\n<p>Why is this not working?</p>\n"}, {"tags": ["c++", "opencv", "gstreamer", "yocto"], "answers": [{"comments": [{"owner": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "edited": false, "score": 0, "creation_date": 1564645449, "post_id": 57293453, "comment_id": 101101078, "body": "Updated answer with your suggestion. Almost there!"}, {"owner": {"reputation": 752, "user_id": 9526947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56kbS.png?s=128&g=1", "display_name": "Bubai", "link": "https://stackoverflow.com/users/9526947/bubai"}, "reply_to_user": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "edited": false, "score": 0, "creation_date": 1564647773, "post_id": 57293453, "comment_id": 101102337, "body": "@mattdibi : so is it working now?? or not opening/writing streams..? I can see it&#39;s a <code>warning</code> don&#39;t worry about it. And, I&#39;m looking for it <code>vp8enc</code> if found anything I&#39;ll post it immediately."}, {"owner": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "edited": false, "score": 0, "creation_date": 1564648100, "post_id": 57293453, "comment_id": 101102497, "body": "Not working. It&#39;s missing only the <code>vp8enc</code> element. It should be inside <code>gstreamer1.0-plugins-good</code> but can&#39;t be found. I&#39;ll try rebuild the image cleaning some recipes and see what happens."}, {"owner": {"reputation": 752, "user_id": 9526947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56kbS.png?s=128&g=1", "display_name": "Bubai", "link": "https://stackoverflow.com/users/9526947/bubai"}, "reply_to_user": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "edited": false, "score": 0, "creation_date": 1564648644, "post_id": 57293453, "comment_id": 101102769, "body": "Did you get this <code>libgstvpx.so</code> library file under your <code>&#47;usr&#47;lib</code> or somewhere like <code>..&#47;gstreamer1.0&#47;..</code> directory? Mine is present there. Which gives support to <b>VP8</b> and <b>VP9</b> en/de-coding. If it&#39;s not there install them. using <code>libvpx-dev</code> &amp; <code>libvpx5</code>"}, {"owner": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "edited": false, "score": 0, "creation_date": 1564653760, "post_id": 57293453, "comment_id": 101105580, "body": "Unfortunately this doesn&#39;t seem to help."}], "tags": [], "owner": {"reputation": 752, "user_id": 9526947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/56kbS.png?s=128&g=1", "display_name": "Bubai", "link": "https://stackoverflow.com/users/9526947/bubai"}, "is_accepted": false, "score": 2, "last_activity_date": 1564584272, "creation_date": 1564584272, "answer_id": 57293453, "question_id": 57291680, "link": "https://stackoverflow.com/questions/57291680/yocto-opencv-w-gstreamer-installation-issues/57293453#57293453", "title": "Yocto OpenCV w/ GStreamer installation issues", "body": "<p>Try reinstalling the <code>gstreamer</code> packages like <code>gstreamer1.0-plugins-good, gstreamer1.0-plugins-bad, gstreamer1.0-plugins-ugly</code> and <code>gstreamer1.0-libav</code>.</p>\n\n<p>Following packages will provide: <strong>gstreamer1.0-audiosink, gstreamer1.0-audiosource, gstreamer1.0-videosink, gstreamer1.0-videosource, gstreamer1.0-visualization</strong></p>\n\n<p><code>libav</code> have elements for encoding 40+ formats (MPEG, DivX, MPEG4, AC3, DV, ...), decoding elements for decoding 90+ formats (AVI, MPEG, OGG, Matroska, ASF, ...).</p>\n"}, {"tags": [], "owner": {"reputation": 883, "user_id": 5968022, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4babdcf792cafcb3d35474738f0cb9c0?s=128&d=identicon&r=PG", "display_name": "PierreOlivier", "link": "https://stackoverflow.com/users/5968022/pierreolivier"}, "is_accepted": true, "score": 1, "last_activity_date": 1564654145, "last_edit_date": 1564654145, "creation_date": 1564653328, "answer_id": 57306407, "question_id": 57291680, "link": "https://stackoverflow.com/questions/57291680/yocto-opencv-w-gstreamer-installation-issues/57306407#57306407", "title": "Yocto OpenCV w/ GStreamer installation issues", "body": "<p>To complete the answer of @Subrata:\nYou need to install the package corresponding to the elements requiered by gstreamer.</p>\n\n<p>I don't know which Yocto version you are using but you can see which gstreamer elements are installed by default on gstreamer. In the <code>meta/recipes-multimedia/gstreamer/gstreamer1.0-plugins-good.inc</code> file:</p>\n\n<pre><code>PACKAGECONFIG ??= \" \\\n    ${GSTREAMER_ORC} \\\n    ${@bb.utils.filter('DISTRO_FEATURES', 'pulseaudio x11', d)} \\\n    cairo flac gdk-pixbuf gudev jpeg libpng soup speex taglib v4l2 \\\n\"\n\n[...]\n\nPACKAGECONFIG[vpx]        = \"--enable-vpx,--disable-vpx,libvpx\"\n</code></pre>\n\n<p>Now you are required <code>vp8enc</code>, included in <a href=\"https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good/html/gst-plugins-good-plugins-plugin-vpx.html#plugin-vpx\" rel=\"nofollow noreferrer\">vpx</a> library, but, as you can see, the PACKAGECONFIG variable does not contains this option.</p>\n\n<p>You need to add a <code>.bbappend</code> file with this option added to use this plugin, in your meta :<code>your-meta/repices-multimedia/gstreamer/gstreamer1.0-plugins-good_%.bbappend</code></p>\n\n<pre><code>PACKAGECONFIG_append=\" vpx\"\n</code></pre>\n\n<p>If you plan to write a recipe which needs this <code>vpx</code> element, you can add it in the RDEPENDS:</p>\n\n<pre><code>DEPENDS=\" gstreamer1.0 gstreamer1.0-plugins-good\"\n\nRDEPENDS_${PN}=\" gstreamer1.0 \\\n                 gstreamer1.0-plugins-good-vpx \"\n</code></pre>\n"}], "owner": {"reputation": 282, "user_id": 7780889, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d0d127aa61a70182b291bbcaa636e657?s=128&d=identicon&r=PG&f=1", "display_name": "mattdibi", "link": "https://stackoverflow.com/users/7780889/mattdibi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 57306407, "answer_count": 2, "score": 0, "last_activity_date": 1564654145, "creation_date": 1564578945, "last_edit_date": 1564646847, "question_id": 57291680, "link": "https://stackoverflow.com/questions/57291680/yocto-opencv-w-gstreamer-installation-issues", "title": "Yocto OpenCV w/ GStreamer installation issues", "body": "<p>I have a simple GStreamer pipeline that I instantiate through OpenCV VideoWriter</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>LOG_INFO(\"Opening VP8 GStreamer writer object at \"\n         &lt;&lt; host &lt;&lt; \":\" &lt;&lt; port &lt;&lt; \" with \" &lt;&lt; horizontal_resolution\n         &lt;&lt; \"x\" &lt;&lt; vertical_resolution &lt;&lt; \"p@\" &lt;&lt; fps &lt;&lt; \"fps\"\n         &lt;&lt; \"(color=\" &lt;&lt; is_color &lt;&lt; \")\");\n\nconst std::string filename{\n    \" appsrc is-live=true ! videoconvert ! \"\n    \" vp8enc cpu-used=2 threads=2 min_quantizer=5 max_quantizer=5 deadline=100000 ! \"\n    \" rtpvp8pay ! application/x-rtp,media=video,encoding-name=VP8,payload=96 ! \"\n    \" udpsink host= \" + host + \" port= \" + port\n};\n\nwriter.open(\n    filename,\n    cv::CAP_GSTREAMER,\n    fps, \n    cv::Size{horizontal_resolution, vertical_resolution},\n    is_color\n);\n</code></pre>\n\n<p>On my host machine it runs smoothly but when I cross-compile and run on the target I get the following:</p>\n\n<pre><code>Opening VP8 GStreamer writer object at 127.0.0.1:8004 with 160x120p@30fps(color=true)\n0:00:00.003785000  3484      0xe7e0ac0 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"appsrc\"!\n0:00:00.003901750  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"appsrc\"\n0:00:00.003951125  3484      0xe7e0ac0 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"videoconvert\"!\n0:00:00.003972875  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"videoconvert\"\n0:00:00.003998375  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no source [sink=@(nil)]\n0:00:00.004042250  3484      0xe7e0ac0 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"vp8enc\"!\n0:00:00.004070875  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"vp8enc\"\n0:00:00.004105500  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no source [sink=@(nil)]\n0:00:00.004135750  3484      0xe7e0ac0 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"rtpvp8pay\"!\n0:00:00.004160250  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"rtpvp8pay\"\n0:00:00.004186875  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no source [sink=@(nil)]\n0:00:00.004309875  3484      0xe7e0ac0 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"udpsink\"!\n0:00:00.004336375  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"udpsink\"\n0:00:00.004364125  3484      0xe7e0ac0 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no source [sink=@(nil)]\n\n(EXE:3484): GStreamer-CRITICAL **: gst_debug_log_valist: assertion 'category != NULL' failed\n\n** (EXE:3484): CRITICAL **: gst_app_src_end_of_stream: assertion 'GST_IS_APP_SRC (appsrc)' failed\n</code></pre>\n\n<p>My Yocto configuration file is the following, target platform is a i.MX8M Mini.</p>\n\n<pre><code>require conf/distro/include/yocto-uninative.inc\n\nMACHINE ??= \"e0219\"\nUBOOT_CONFIG ??= \"sd\"\nUBOOT_CONFIG[sd] ??= \"e0219_config\"\n\n\n#MACHINE ??= 'imx8mmevk'\nDISTRO ?= 'fsl-imx-xwayland'\nPACKAGE_CLASSES ?= \"package_rpm\"\nEXTRA_IMAGE_FEATURES ?= \"debug-tweaks\"\nUSER_CLASSES ?= \"buildstats image-mklibs image-prelink\"\nPATCHRESOLVE = \"noop\"\nBB_DISKMON_DIRS ??= \"\\\n    STOPTASKS,${TMPDIR},1G,100K \\\n    STOPTASKS,${DL_DIR},1G,100K \\\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\n    STOPTASKS,/tmp,100M,100K \\\n    ABORT,${TMPDIR},100M,1K \\\n    ABORT,${DL_DIR},100M,1K \\\n    ABORT,${SSTATE_DIR},100M,1K \\\n    ABORT,/tmp,10M,1K\"\nPACKAGECONFIG_append_pn-qemu-native = \" sdl\"\nPACKAGECONFIG_append_pn-nativesdk-qemu = \" sdl\"\nCONF_VERSION = \"1\"\n\nDL_DIR ?= \"${BSPDIR}/downloads/\"\n\nCORE_IMAGE_EXTRA_INSTALL += \" net-tools iputils dhcpcd\"\nCORE_IMAGE_EXTRA_INSTALL += \" openssh nano python3 ethtool i2c-tools strace spitools\"\nCORE_IMAGE_EXTRA_INSTALL += \" tcpdump socat opencv libmicrohttpd libsrtp curl boost\"\nCORE_IMAGE_EXTRA_INSTALL += \" nmap python-djangorestframework net-snmp\"\nCORE_IMAGE_EXTRA_INSTALL += \" openmp llvm\"\nACCEPT_FSL_EULA = \"1\"\n</code></pre>\n\n<p>If I understand this correctly the opencv recipe should require gstreamer and some of its plugins but it seems to me that, after the build, GStreamer can't find the needed plugins to run the pipeline. Here's the output of gst-inspect:</p>\n\n<pre><code>$ gst-inspect-1.0        \ncoreelements:  capsfilter: CapsFilter\ncoreelements:  concat: Concat\ncoreelements:  dataurisrc: data: URI source element\ncoreelements:  downloadbuffer: DownloadBuffer\ncoreelements:  fakesrc: Fake Source\ncoreelements:  fakesink: Fake Sink\ncoreelements:  fdsrc: Filedescriptor Source\ncoreelements:  fdsink: Filedescriptor Sink\ncoreelements:  filesrc: File Source\ncoreelements:  funnel: Funnel pipe fitting\ncoreelements:  identity: Identity\ncoreelements:  input-selector: Input selector\ncoreelements:  output-selector: Output selector\ncoreelements:  queue: Queue\ncoreelements:  queue2: Queue 2\ncoreelements:  filesink: File Sink\ncoreelements:  tee: Tee pipe fitting\ncoreelements:  typefind: TypeFind\ncoreelements:  multiqueue: MultiQueue\ncoreelements:  valve: Valve element\ncoreelements:  streamiddemux: Streamid Demux\nstaticelements:  bin: Generic bin\nstaticelements:  pipeline: Pipeline object\n\nTotal count: 2 plugins, 23 features\n</code></pre>\n\n<p>How can I solve this?</p>\n\n<h3>Update 2 using @Subrata suggestion</h3>\n\n<p>I added the packages suggested by @Subrata to my local.conf like so:</p>\n\n<pre><code>CORE_IMAGE_EXTRA_INSTALL += \" gstreamer1.0 gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav\"\n</code></pre>\n\n<p>And now can see 179 plugins through gst-inspect.</p>\n\n<p>Launching my application I'm still missing an element, but it's a step in the right direction.</p>\n\n<pre><code>Opening VP8 GStreamer writer object at 127.0.0.1:8004 with 160x120p@30fps(color=true)\n0:00:00.053317750  3520     0x16290b00 WARN     GST_ELEMENT_FACTORY gstelementfactory.c:456:gst_element_factory_make: no such element factory \"vp8enc\"!\n0:00:00.053537875  3520     0x16290b00 ERROR           GST_PIPELINE grammar.y:816:priv_gst_parse_yyparse: no element \"vp8enc\"\n0:00:00.053606125  3520     0x16290b00 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no sink [source=@0x16293290]\n0:00:00.057937500  3520     0x16290b00 ERROR           GST_PIPELINE grammar.y:901:priv_gst_parse_yyparse: link has no source [sink=@0x162a0250]\n0:00:00.081852625  3520     0x1629f720 FIXME                default gstutils.c:3981:gst_pad_create_stream_id_internal:&lt;appsrc0:src&gt; Creating random stream-id, consider implementing a deterministic way of creating a stream-id\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-templates"], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "edited": false, "score": 0, "creation_date": 1564581857, "post_id": 57291751, "comment_id": 101079605, "body": "While the actual example works, for my real problem it required me to use <code>template</code> in the middle. So, something like this <code>S::template ContainerType&lt;double&gt; y;</code> I don&#39;t know why."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "edited": false, "score": 0, "creation_date": 1564582967, "post_id": 57291751, "comment_id": 101080342, "body": "@Mochan In your real code what is <code>S</code>? And what&#39;s your compiler?"}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 1, "last_activity_date": 1564579146, "creation_date": 1564579146, "answer_id": 57291751, "question_id": 57291637, "link": "https://stackoverflow.com/questions/57291637/getting-the-type-of-a-template-template-parameter-with-using/57291751#57291751", "title": "Getting the type of a template template parameter with using", "body": "<p>You could declare <code>ContainerType</code> as an <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">alias template</a>, since <code>Container</code> is a template itself.</p>\n\n<pre><code>template&lt;typename... X&gt;\nusing ContainerType = Container&lt;X...&gt;;\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/LPILGvyahakdD6zu\" rel=\"nofollow noreferrer\">LIVE</a></p>\n"}], "owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "closed_date": 1564579187, "accepted_answer_id": 57291751, "answer_count": 1, "score": 1, "last_activity_date": 1564579235, "creation_date": 1564578848, "last_edit_date": 1564579235, "question_id": 57291637, "link": "https://stackoverflow.com/questions/57291637/getting-the-type-of-a-template-template-parameter-with-using", "closed_reason": "Duplicate", "title": "Getting the type of a template template parameter with using", "body": "<p>I have the following piece of code which does not compile -> <a href=\"http://ideone.com/bL9DF1\" rel=\"nofollow noreferrer\">http://ideone.com/bL9DF1</a>. </p>\n\n<p>The problem is that I want to get the template template parameter out of a type. What I have is <code>using S = A&lt;int, std::vector&gt;</code> and I want to get back that I used <code>std::vector</code> in making S and to use it somewhere else. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename T, template&lt;class...&gt; class Container&gt;\nstruct A\n{\n  using Ttype = T;\n  using ContainerType = Container;\n\n  Container&lt;T&gt; s;\n};\n\nint main()\n{\n  using S = A&lt;int, std::vector&gt;;\n\n  S::ContainerType&lt;double&gt; y;\n  y.push_back(2);\n\n  return 0;\n}\n</code></pre>\n\n<p>I don't know if there is even a way of doing what I want. Without the template parameters added <code>std::vector</code> is not a type. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 0, "creation_date": 1564580302, "post_id": 57291622, "comment_id": 101078507, "body": "I suggest you check your file permissions. I just ran your code verbatim, save for changing the file path to C:\\\\temp\\\\friends.txt, and it worked OK. You could always add some deeper error checking so you get a more useful message."}, {"owner": {"reputation": 5, "user_id": 11730723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1f63bb3dcc00a1fa20c051a8eecffa?s=128&d=identicon&r=PG&f=1", "display_name": "mdc", "link": "https://stackoverflow.com/users/11730723/mdc"}, "reply_to_user": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 0, "creation_date": 1564614929, "post_id": 57291622, "comment_id": 101093558, "body": "Well, I checked the file permissions and saw that I had full control over the .txt file, but I&#39;m still not sure where to go from here. Any advice is much appreciated."}, {"owner": {"reputation": 5, "user_id": 11730723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1f63bb3dcc00a1fa20c051a8eecffa?s=128&d=identicon&r=PG&f=1", "display_name": "mdc", "link": "https://stackoverflow.com/users/11730723/mdc"}, "reply_to_user": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 0, "creation_date": 1564655516, "post_id": 57291622, "comment_id": 101106510, "body": "I&#39;ve been racking my brain since yesterday and finally learned my problem was coming from how I was naming the .txt file. I was literally typing &quot;friends.txt&quot; into the file name section in the save as window of notepad when I was creating the .txt file. Once I just saved the .txt file as &quot;friends&quot;, everything started reading from the file just fine. I realized this when I observed how an ostream object was automatically creating files."}, {"owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 1, "creation_date": 1564673546, "post_id": 57291622, "comment_id": 101117062, "body": "So you original file was actually called friends.txt.txt? Yay for Windows hiding file extension by default!"}], "owner": {"reputation": 5, "user_id": 11730723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1f63bb3dcc00a1fa20c051a8eecffa?s=128&d=identicon&r=PG&f=1", "display_name": "mdc", "link": "https://stackoverflow.com/users/11730723/mdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564579438, "creation_date": 1564578803, "last_edit_date": 1564579438, "question_id": 57291622, "link": "https://stackoverflow.com/questions/57291622/understanding-ifstream-objects-and-reading-from-files", "title": "understanding ifstream objects and reading from files", "body": "<p>I'm just learning and practicing the basics of ifstream objects and tried to write a small program that will read a .txt file and then display what is read. I can't tell what I need to change, but i do know that there might be something wrong with how I'm specifying the path because. When I run the program, it doesn't seem like it can open the file. the friends.txt file I made is in the path I specified. In the .txt file, there are 3 names which are written on 3 consecutive lines (after typing one name, I pressed enter to write another name on a new line).</p>\n\n<p>I tried checking to see if made any typos on the folder names in the path and made sure to correct any I found.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    ifstream inputfile;\n    string name;\n\n    inputfile.open(\"C:\\\\Users\\\\Dox\\\\Documents\\\\Visual Studio 2015\\\\Projects\\\\Practice\\\\Practice\\\\friends.txt\");\n    cout &lt;&lt; \"Reading data from the file.\\n\";\n\n    if (!inputfile.is_open())\n    {\n        cout &lt;&lt; \"error opening file\" &lt;&lt; endl;\n    }\n    else \n    {\n        inputfile &gt;&gt; name;\n        cout &lt;&lt; name &lt;&lt; endl;\n        inputfile &gt;&gt; name;\n        cout &lt;&lt; name &lt;&lt; endl;\n        inputfile &gt;&gt; name;\n        cout &lt;&lt; name &lt;&lt; endl;\n    }\n    inputfile.close();\n\n    cin.get();\n    return 0;\n}\n\n</code></pre>\n\n<p>When running the code, the error message I made displays.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1564595733, "post_id": 57291522, "comment_id": 101087055, "body": "What text encoding is the file? If you don&#39;t know, consider reading <code>QByteArray</code> from <code>QFile</code> intead of using <code>QTextStream</code>, because using wrong encoding can lead to funny things..."}, {"owner": {"reputation": 83, "user_id": 11139478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ydZ0kVaORYI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdaRvCYhfLKx-6kNTJNzpIed1z__g/mo/photo.jpg?sz=128", "display_name": "Stakan Stakan", "link": "https://stackoverflow.com/users/11139478/stakan-stakan"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1564596604, "post_id": 57291522, "comment_id": 101087425, "body": "ASCII text file"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 11139478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ydZ0kVaORYI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdaRvCYhfLKx-6kNTJNzpIed1z__g/mo/photo.jpg?sz=128", "display_name": "Stakan Stakan", "link": "https://stackoverflow.com/users/11139478/stakan-stakan"}, "edited": false, "score": 0, "creation_date": 1564589071, "post_id": 57294576, "comment_id": 101084000, "body": "It&#39;s strange. readAll really reads all file at once. But it will be better to read it line by line for me. currentString = textStream.readLine() gives error in while loop because it cannot be converted t bool (it is QString). I tried to use  !((currentString = textStream.readLine()).isEmpty()) but it gives the same result as textStream.atEnd() - it stops on the same string, on the same symbol."}, {"owner": {"reputation": 55, "user_id": 327091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2270b72cb416b490f0564bfcceda3a5f?s=128&d=identicon&r=PG", "display_name": "Smurph269", "link": "https://stackoverflow.com/users/327091/smurph269"}, "reply_to_user": {"reputation": 83, "user_id": 11139478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ydZ0kVaORYI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdaRvCYhfLKx-6kNTJNzpIed1z__g/mo/photo.jpg?sz=128", "display_name": "Stakan Stakan", "link": "https://stackoverflow.com/users/11139478/stakan-stakan"}, "edited": false, "score": 0, "creation_date": 1564596621, "post_id": 57294576, "comment_id": 101087431, "body": "@StakanStakan Edited my comment to fix the compile error. Does readAll() at least get the entire file? You could also try <a href=\"https://doc.qt.io/qt-5/qiodevice.html#readLine\" rel=\"nofollow noreferrer\">QFile::readline(char* data, qint64 maxSize)</a>"}, {"owner": {"reputation": 83, "user_id": 11139478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ydZ0kVaORYI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdaRvCYhfLKx-6kNTJNzpIed1z__g/mo/photo.jpg?sz=128", "display_name": "Stakan Stakan", "link": "https://stackoverflow.com/users/11139478/stakan-stakan"}, "edited": false, "score": 0, "creation_date": 1564669833, "post_id": 57294576, "comment_id": 101114910, "body": "Yes, readAll() reads all. But it is not so good option for me. Of course, it can be used if there isn&#39;t any other, but it will be perfect to use reading of lines.  while (file.readLine(arr, 128)!=-1) reads only first 3 lines. I don&#39;t understand why."}], "tags": [], "owner": {"reputation": 55, "user_id": 327091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2270b72cb416b490f0564bfcceda3a5f?s=128&d=identicon&r=PG", "display_name": "Smurph269", "link": "https://stackoverflow.com/users/327091/smurph269"}, "is_accepted": true, "score": 0, "last_activity_date": 1564596126, "last_edit_date": 1564596126, "creation_date": 1564587908, "answer_id": 57294576, "question_id": 57291522, "link": "https://stackoverflow.com/questions/57291522/qfile-qtextstream-read-only-part-of-the-file/57294576#57294576", "title": "QFile + QTextStream read only part of the file", "body": "<p>Apparently textStream.atEnd() is <a href=\"https://doc.qt.io/qt-5/qiodevice.html#atEnd\" rel=\"nofollow noreferrer\">not always a reliable indicator that you're actually at the end of a stream.</a> I would try textStream.ReadAll() and see if you get the entire file that way. Alternatively, you can just call textStream.readLine() until it returns NULL and use that to break the while loop:</p>\n\n<pre><code>currentString = textStream.readLine();\nwhile (!currentString.isNull())\n    {\n        //Some code here without closing file(I doublechecked this) \n        currentString = textStream.readLine();\n    }\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 11139478, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ydZ0kVaORYI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdaRvCYhfLKx-6kNTJNzpIed1z__g/mo/photo.jpg?sz=128", "display_name": "Stakan Stakan", "link": "https://stackoverflow.com/users/11139478/stakan-stakan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 57294576, "answer_count": 1, "score": 1, "last_activity_date": 1564596126, "creation_date": 1564578523, "last_edit_date": 1564580222, "question_id": 57291522, "link": "https://stackoverflow.com/questions/57291522/qfile-qtextstream-read-only-part-of-the-file", "title": "QFile + QTextStream read only part of the file", "body": "<p>I'm trying to make .obj parser for one project.</p>\n\n<p>I have ObjLoader class with loaddata method. And it reads file line by line and parse it as I need.</p>\n\n<pre><code>QFile file(sourceFolder+ QString(\"/\") +filename);\nfile.open(QIODevice::ReadOnly);\nQTextStream textStream(&amp;file);\n\nQString currentString;\n\nwhile (!textStream.atEnd())\n    {\n        currentString = textStream.readLine();\n        //Some code here without closing file(I doublechecked this) \n    }\nfile.close()\n</code></pre>\n\n<p>It reads first 600 strings well, but then unexpectedly stops.<br>\nIt happens on these strings:</p>\n\n<p>v 3.956570 0.532126 0.300000<br>\nv 3.958734 0.593226 -0.300000<br>\nv 3.958731 0.593220 0.300000<br>\nvn 0.0000 -0.0000 1.0000<br>\nvn 0.0000 0.0000 -1.0000<br>\nvn 0.4852 -0.8744 0.0000  </p>\n\n<p>But when I tried  </p>\n\n<blockquote>\n  <p>std::cerr \"&lt;&lt;\" currentString.toStdString() \"&lt;&lt;\" \"\\n\";<br>\n  (Sorry, don't know how to write this normally with stackoverflow formatting)  </p>\n</blockquote>\n\n<p>for these strings by using index \"int i\" which increments each time in the loop, it gives only this:</p>\n\n<p>v 3.956570 0.532126 0.300000<br>\nv 3.958734 0.593226 -0.300000<br>\nv 3.958731 0.593220 0.300000<br>\nv  </p>\n\n<p>And in this point it stops reading file without any errors. It looks like the file in memory ends here. But it is only the 601-st string, when the file has 1100+ of them.  </p>\n\n<p>I checked the file in the text editor for unprintable symbols, but here is not any of them in this part.  </p>\n\n<p>Each time when I start debugging of this code it do the same thing - the same string stops the reading at the same symbol. Why can it happen?  </p>\n"}, {"tags": ["c++", "multithreading", "sockets", "ssl", "future"], "comments": [{"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 0, "creation_date": 1564577395, "post_id": 57291078, "comment_id": 101076708, "body": "Have you actually checked the value of <code>t_timeout</code>?"}, {"owner": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "edited": false, "score": 0, "creation_date": 1564577463, "post_id": 57291078, "comment_id": 101076752, "body": "Yes its 3 seconds and future is exiting when I do debug with gdb its exiting from scope and it stopping execution(hangs) before <code>cout&lt;&lt;&quot;TEST&quot;;</code>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1564579061, "post_id": 57291078, "comment_id": 101077711, "body": "If <code>SSL_connect</code> blocks indefinitely and does not return then neither threads or async code will help to get around it. There is no such thing as &quot;killing&quot; future."}, {"owner": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1564579157, "post_id": 57291078, "comment_id": 101077788, "body": "@VTT What can help me? Manual create and kill the thread?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1564579272, "post_id": 57291078, "comment_id": 101077857, "body": "&quot;Forever blocking&quot; functions are broken by design, there is no way around it. At most you will be left with leaking blocked threads. Switching to some proper library / API could help."}], "answers": [{"comments": [{"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 161, "user_id": 8725098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c43a9232bbf368598d575f712eb784?s=128&d=identicon&r=PG&f=1", "display_name": "Rostin", "link": "https://stackoverflow.com/users/8725098/rostin"}, "edited": false, "score": 0, "creation_date": 1564578154, "post_id": 57291278, "comment_id": 101077187, "body": "So if he wants to see the <code>cout&lt;&lt;&quot;TEST&quot;</code> heshould not enclose the future in a block because at the end of the block its destructor is called."}, {"owner": {"reputation": 161, "user_id": 8725098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c43a9232bbf368598d575f712eb784?s=128&d=identicon&r=PG&f=1", "display_name": "Rostin", "link": "https://stackoverflow.com/users/8725098/rostin"}, "edited": false, "score": 0, "creation_date": 1564578321, "post_id": 57291278, "comment_id": 101077276, "body": "What if the code is inside a function and he wants to print test in int main()?"}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 161, "user_id": 8725098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c43a9232bbf368598d575f712eb784?s=128&d=identicon&r=PG&f=1", "display_name": "Rostin", "link": "https://stackoverflow.com/users/8725098/rostin"}, "edited": false, "score": 0, "creation_date": 1564578362, "post_id": 57291278, "comment_id": 101077302, "body": "@Rostin that is another question =)"}, {"owner": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "edited": false, "score": 0, "creation_date": 1564578894, "post_id": 57291278, "comment_id": 101077619, "body": "I updated question and posted another one. Thank you Could We continue discussion here?"}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "edited": false, "score": 0, "creation_date": 1564579303, "post_id": 57291278, "comment_id": 101077874, "body": "@DanielHornik check again my answer. I have updated it. Weather the destructor should block or not has been a point of discussion in the C++ for a while already =)"}, {"owner": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "edited": false, "score": 1, "creation_date": 1564580411, "post_id": 57291278, "comment_id": 101078590, "body": "@DavideSpataro. Great :D Thank you so much I will make it as a class property and I am to solve the issue."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 2, "last_activity_date": 1564579106, "last_edit_date": 1564579106, "creation_date": 1564577833, "answer_id": 57291278, "question_id": 57291078, "link": "https://stackoverflow.com/questions/57291078/stdfuture-wait-for-blocking-forever/57291278#57291278", "title": "std::future.wait_for blocking forever", "body": "<p>The problem with your code is that when the future goes out of scope, its destructor might block as reported in the <a href=\"https://en.cppreference.com/w/cpp/thread/future/%7Efuture\" rel=\"nofollow noreferrer\">documentation</a> for <code>std::future&lt;T&gt;::~future</code>: </p>\n\n<p>It says explicitly: </p>\n\n<blockquote>\n  <p>... will not block for the shared state to become ready, except that it may block if all of the following are true: the shared state was created by a call to std::async, the shared state is not yet ready, and this was the last reference to the shared state. </p>\n</blockquote>\n\n<p>In your case:</p>\n\n<ol>\n<li>the shared state is not yet ready: SSL hangs forever</li>\n<li>that  is the only (and so last) reference to the shared state.</li>\n</ol>\n\n<hr>\n\n<p>The solution to your problem is that you have to make the scope of variable <code>std::future&lt;void&gt; future</code> such that it outlives the part of the code you want not to be blocked. </p>\n\n<p>Check these answers: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48575385/main-thread-waits-for-stdasync-to-complete\">main thread waits for std::async to complete</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21531096/can-i-use-stdasync-without-waiting-for-the-future-limitation\">Can I use std::async without waiting for the future limitation?</a></li>\n</ul>\n\n<p><a href=\"https://wandbox.org/permlink/jdfJDDuh9Bd417v6\" rel=\"nofollow noreferrer\">LIVE DEMO</a></p>\n"}], "owner": {"reputation": 954, "user_id": 4328633, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-g1XYzvszg2I/AAAAAAAAAAI/AAAAAAAAAwM/a0kU3BPnqgA/photo.jpg?sz=128", "display_name": "Daniel Hornik", "link": "https://stackoverflow.com/users/4328633/daniel-hornik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 57291278, "answer_count": 1, "score": 2, "last_activity_date": 1564646443, "creation_date": 1564577160, "last_edit_date": 1564646443, "question_id": 57291078, "link": "https://stackoverflow.com/questions/57291078/stdfuture-wait-for-blocking-forever", "title": "std::future.wait_for blocking forever", "body": "<p>I am crating SSL socket and when I try to connect to that socket my program hangs. </p>\n\n<p>I found some issue that server does not send any data so SSL connection is waiting for the any response.</p>\n\n<p>I decided to create future and kill it after timeout. But it is still hanging. </p>\n\n<p>If you see to the code, below part is not executed: <code>cout&lt;&lt;\"TEST\";</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>{\n\n     std::future&lt;void&gt; future = std::async(std::launch::async, \n     [&amp;](){ \n              err = SSL_connect (m_ssl); \n          });\n\n     std::future_status status;\n     status = future.wait_for(std::chrono::seconds(t_timeout));\n}\n\ncout&lt;&lt;\"TEST\";\n</code></pre>\n\n<p>To simulate stopping response from server I just run:</p>\n\n<pre><code>for item in $(seq 1 1000); do sudo nc -i 100000ms -l 443 &gt;&gt; log.out; done;\n</code></pre>\n\n<p>How do I kill the SSL connection? \nI want to continue execution of code after kill the future.</p>\n\n<p><strong>EDIT:</strong>\nI do not want to open another question for that. \n<strong>Answer</strong>: So i am sure now that this is because of future destructor. It is waiting for finish of code from the future body.</p>\n\n<p><strong>Question 2:</strong> \nHow Can I fix above issue? I want to execute code after scope which future is in. </p>\n\n<p>Is it OK to create thread and wait until timeout or ssl some mutex is unlocked?</p>\n"}, {"tags": ["c++", "qt", "gcc", "compilation", "g++"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564577425, "post_id": 57290986, "comment_id": 101076727, "body": "You need to invoke <a href=\"https://doc.qt.io/archives/qt-4.8/moc.html\" rel=\"nofollow noreferrer\">moc</a>"}, {"owner": {"reputation": 33, "user_id": 9621471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f042f4f28d93fc8dec4dd807d4a8cd?s=128&d=identicon&r=PG&f=1", "display_name": "Weird random", "link": "https://stackoverflow.com/users/9621471/weird-random"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564579669, "post_id": 57290986, "comment_id": 101078116, "body": "Alright, will look into it. Thanks!"}], "owner": {"reputation": 33, "user_id": 9621471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f042f4f28d93fc8dec4dd807d4a8cd?s=128&d=identicon&r=PG&f=1", "display_name": "Weird random", "link": "https://stackoverflow.com/users/9621471/weird-random"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564577055, "creation_date": 1564576864, "last_edit_date": 1564577055, "question_id": 57290986, "link": "https://stackoverflow.com/questions/57290986/manually-compile-qt-project-with-g", "title": "Manually compile QT project with g++", "body": "<p>I am currently working on a polymorphic engine that works for c++ projects. What i am doing is that i am </p>\n\n<p>(1) generating assembly files from .cpp files</p>\n\n<p>(2) generating object files from assembly files</p>\n\n<p>(3) loading object files into an .exe</p>\n\n<p>All this is done using the g++ compiler through the command line. Now, all this works fine for a regular win32 c++ console application project created in visual studio, but i also need to adapt my polymorph engine to be able to build QT projects (GUI) with the same method of approach listed above.</p>\n\n<p>I am unable to find commands to replicate this for QT projects. Below is the commands i am currently using in order to manually compile a console application project built in Visual studio.</p>\n\n<p>(1) g++ -S -masm=intel -o my_asm_output.s main.cpp \n// generate assembly from main.cpp file</p>\n\n<p>(2) g++ -c -o my_obj_output.o assembly.s \n// generate object file from assembly.s</p>\n\n<p>(3) g++ -o my_exe_output.exe my_obj_file.o \n// generate executable by loading object file into it</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "lua"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564578053, "post_id": 57290650, "comment_id": 101077118, "body": "If you have a solution, write an answer. Don&#39;t put the answer in the question. The question is for... the question. Thanks."}, {"owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564643716, "post_id": 57290650, "comment_id": 101100142, "body": "ok. Will keep that in mind from now on."}], "answers": [{"comments": [{"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1564577395, "post_id": 57291003, "comment_id": 101076707, "body": "I disagree with the last sentence. The common recommendation is that libraries should not create globals."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1564578066, "post_id": 57291003, "comment_id": 101077131, "body": "@lhf Well, you&#39;d know. :-) But my impression was that as of 5.1, it was considered reasonable practice to register libraries into the global table, while that was phased out in later versions with luaL_register in favor of luaL_newlib."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 1, "creation_date": 1564578174, "post_id": 57291003, "comment_id": 101077192, "body": "Your impression is correct. But there is no need to keep on doing that today even if you use Lua 5.1. For instance, all of my libraries work for 5.1 but none creates globals."}, {"owner": {"reputation": 826, "user_id": 12514997, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D0DMePIuN54/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTuS0cLrP5FwvEomVqlA9RnDolUQ/photo.jpg?sz=128", "display_name": "Allister", "link": "https://stackoverflow.com/users/12514997/allister"}, "edited": false, "score": 0, "creation_date": 1579335831, "post_id": 57291003, "comment_id": 105738551, "body": "As I&#39;ve been learning the 5.1 API, I&#39;ve found that one way to pass a null value to the second parameter of register is to create a const of char pointers with no value before hand and pass that. ex: <code>const char* x;</code> (I don&#39;t know C so sorry if I phrased that wrong technically, explanation might be bad but the code should work). That should be a little easier than creating a new table (I could not figure out how to pass the null newtable to luaL_register). Just leaving this for people learning like me."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": true, "score": 3, "last_activity_date": 1564579013, "last_edit_date": 1564579013, "creation_date": 1564576915, "answer_id": 57291003, "question_id": 57290650, "link": "https://stackoverflow.com/questions/57290650/attempt-to-index-a-string-value-error-while-loading-a-c-module-in-lua/57291003#57291003", "title": "&#39;Attempt to index a string value&#39; error while loading a c++ module in lua", "body": "<p>The second argument to <code>luaL_register</code> is the library name. You can leave it as <code>NULL</code>, but if you do, <code>luaL_register</code> will try to insert the registered functions into the table it expects to find on the top of the stack (and in your code there's no table on top of the stack). For the general case of registering a library, it's easiest to pass your library name as the second parameter. </p>\n\n<p>Note that LHF suggests <em>not</em> doing it that way, since it automatically puts the libary's table into the global table, whereas the user of the library might want to have it only as a local variable. The alternative is to create your own table with <code>lua_newtable</code> before calling <code>luaL_register</code> (with a null name).</p>\n"}], "owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 57291003, "answer_count": 1, "score": 2, "last_activity_date": 1564579013, "creation_date": 1564575734, "last_edit_date": 1564578057, "question_id": 57290650, "link": "https://stackoverflow.com/questions/57290650/attempt-to-index-a-string-value-error-while-loading-a-c-module-in-lua", "title": "&#39;Attempt to index a string value&#39; error while loading a c++ module in lua", "body": "<p>I'm trying to use a function written in C++ from lua. Given below is the cpp file:</p>\n\n<pre><code>extern \"C\"\n{\n#include \"lua.h\"\n#include \"lauxlib.h\"\n#include \"lualib.h\"\n}\n\nstatic int  add_5(lua_State *L)\n{\n  double d = lua_tonumber(L, 1); /* get argument */\n  d=d+5;\n  lua_pushnumber(L, d); /* push result */\n  return 1; /* number of results */\n}\n\nstatic const struct luaL_Reg mylib [] =\n{\n  {\"add_5\", add_5},\n  {NULL, NULL} /* sentinel */\n};\n\nextern \"C\"\n{\n  int luaopen_mylib (lua_State *L)\n  {\n    //luaL_newlib(L, mylib);\n    luaL_register(L, NULL, mylib);\n    return 1;\n  }\n}\n</code></pre>\n\n<p>I compiled the above code by g++ using the following command:</p>\n\n<pre><code>g++ -shared -o mylib.so test.cpp -fPIC\n</code></pre>\n\n<p>I'm getting the following error on the lua interpreter:</p>\n\n<pre><code>Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio\n&gt; local temp = require \"mylib\"\nattempt to index a string value\nstack traceback:\n        [C]: ?\n        [C]: in function 'require'\n        stdin:1: in main chunk\n        [C]: ?\n</code></pre>\n\n<p>Please note that I can't upgrade the version of Lua due to some reasons.</p>\n"}, {"tags": ["c++", "cmake", "mpi"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564579737, "post_id": 57290858, "comment_id": 101078153, "body": "I added <code>cmake_policy(SET CMP0004 OLD)</code> to my cmake file didnt help. still getting the same error."}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564579795, "post_id": 57290858, "comment_id": 101078189, "body": "where to find this <code>you can either edit the MPI CMake file(s) </code>? in my error it says ` /home/nourisaj/c++/WP1/build/CMakeFiles/CMakeTmp/CMakeLists.&zwnj;&#8203;txt:` but the file doesnt exist"}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564581794, "post_id": 57290858, "comment_id": 101079565, "body": "I am working on a cluster and no idea where it&#39;s cmake files are located.  Do you have any idea how to find it out?"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564582979, "post_id": 57290858, "comment_id": 101080349, "body": "@JalilNourisa The CMake installation comes with a <code>FindMPI.cmake</code> file, within which you can set the policy, or modify the linker flags to remove the whitespace. In the CMake installation, it is located here: <code>share&#47;cmake-3.14&#47;Modules&#47;FindMPI.cmake</code>."}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564583557, "post_id": 57290858, "comment_id": 101080741, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/197285/discussion-between-squareskittles-and-jalil-nourisa\">continue this discussion in chat</a>."}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564587285, "post_id": 57290858, "comment_id": 101083027, "body": "I just removed built file and created make file from scratch and it turned out working fine! you can add this to the top of your answer to make it completed so I will go ahead and confirm your answer"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1564587847, "post_id": 57290858, "comment_id": 101083353, "body": "@JalilNourisa I added a note for that to my answer, although refreshing your CMake cache applies to all situations when testing with different CMake versions. Glad it&#39;s working!"}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 2, "last_activity_date": 1564587784, "last_edit_date": 1564587784, "creation_date": 1564576472, "answer_id": 57290858, "question_id": 57290410, "link": "https://stackoverflow.com/questions/57290410/cmake3-set-path-to-mpi-headers/57290858#57290858", "title": "cmake3: set path to mpi headers", "body": "<p>You are running into the <a href=\"https://cmake.org/cmake/help/v3.0/policy/CMP0004.html#cmp0004\" rel=\"nofollow noreferrer\"><code>CMP0004</code></a> policy error. In earlier versions of CMake, linked libraries automatically had any leading or trailing whitespace removed. This can lead to subtle, undesired errors in some cases, so CMake now enforces this policy, the <code>NEW</code> behavior requiring that linked libraries have <em>no</em> leading or trailing whitespace. It looks like one of your MPI targets is linking with this, which has a leading whitespace character: </p>\n\n<pre><code>\" -Wl,-rpath -Wl,/usr/lib64/openmpi/lib -Wl,--enable-new-dtags\"\n</code></pre>\n\n<p>Based on this CMake <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/11881\" rel=\"nofollow noreferrer\">issue</a>, this policy error appears to be fixed as of CMake 3.9. If you are running a CMake older than 3.9, you'll have to modify the <code>FindMPI.cmake</code> file yourself to either remove the leading whitespace, or you can tell CMake to use the old behavior for this policy (silently remove the leading whitespace):</p>\n\n<pre><code>cmake_policy(SET CMP0004 OLD)\n</code></pre>\n\n<p>Here are the docs for <a href=\"https://cmake.org/cmake/help/latest/command/cmake_policy.html#setting-policies-explicitly\" rel=\"nofollow noreferrer\"><code>cmake_policy</code></a>. While setting this policy in the <code>FindMPI.cmake</code> file may work, it is not recommended. The CMake policy was put in place to avoid the <code>OLD</code> behavior, so it is recommended you remove the whitespace manually from the file.</p>\n\n<p><strong>NOTE:</strong> As is always the case when testing with different versions of CMake, make sure you are deleting the CMake cache and building from scratch when switching versions.</p>\n"}], "owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57290858, "answer_count": 1, "score": 0, "last_activity_date": 1564587784, "creation_date": 1564574845, "question_id": 57290410, "link": "https://stackoverflow.com/questions/57290410/cmake3-set-path-to-mpi-headers", "title": "cmake3: set path to mpi headers", "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/36091579/cmake-set-path-to-mpi-headers-and-binaries-manually\">CMake: set path to MPI headers and binaries manually</a>, I set up my cmake file as:</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED(VERSION 2.8)\nSET(TARGET \"test\")\nPROJECT(${TARGET})\nadd_compile_options(-std=c++11)\nset(CMAKE_CXX_FLAGS \"-std=c++11\" CACHE STRING \"compile flags\" FORCE)\n\nfind_package(MPI REQUIRED)\nif (MPI_FOUND)\n    include_directories(SYSTEM ${MPI_INCLUDE_PATH})\nelse (MPI_FOUND)\n    message(SEND_ERROR \"couldn't find MPI\")\nendif (MPI_FOUND)\nadd_executable(${TARGET} somefiles)\ntarget_link_libraries(${TARGET} ${MPI_LIBRARIES})\n</code></pre>\n\n<p>and it worked nicely. But when I do it with cmake3 as:</p>\n\n<pre><code>CMAKE_MINIMUM_REQUIRED(VERSION 3.13.4)\nthe rest is the same as above\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>CMake Error at /home/nourisaj/c++/WP1/build/CMakeFiles/CMakeTmp/cmTC_3d1ffTargets.cmake:16 (add_library):\n  Target \"MPI::MPI_C\" links to item \" -Wl,-rpath -Wl,/usr/lib64/openmpi/lib\n  -Wl,--enable-new-dtags\" which has leading or trailing whitespace.  This is\n  now an error according to policy CMP0004.\nCall Stack (most recent call first):\n  /home/nourisaj/c++/WP1/build/CMakeFiles/CMakeTmp/CMakeLists.txt:14 (include)\n\n\nCMake Error at /home/nourisaj/c++/WP1/build/CMakeFiles/CMakeTmp/cmTC_3d1ffTargets.cmake:16 (add_library):\n  Target \"MPI::MPI_C\" links to item \" -Wl,-rpath -Wl,/usr/lib64/openmpi/lib\n  -Wl,--enable-new-dtags\" which has leading or trailing whitespace.  This is\n  now an error according to policy CMP0004.\nCall Stack (most recent call first):\n  /home/nourisaj/c++/WP1/build/CMakeFiles/CMakeTmp/CMakeLists.txt:14 (include)\n\n\nCMake Error at /usr/share/cmake3/Modules/FindMPI.cmake:1187 (try_compile):\n  Failed to generate test project build system.\nCall Stack (most recent call first):\n  /usr/share/cmake3/Modules/FindMPI.cmake:1228 (_MPI_try_staged_settings)\n  /usr/share/cmake3/Modules/FindMPI.cmake:1488 (_MPI_check_lang_works)\n  CMakeLists.txt:19 (find_package)\n</code></pre>\n\n<p>any idea?</p>\n"}, {"tags": ["c++", "r", "visual-studio", "visual-c++", "neural-network"], "comments": [{"owner": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1564574846, "post_id": 57290293, "comment_id": 101075225, "body": "I&#39;m not a ML expert, but I would assume you would need to export the trained network to some kind of file and load it back into C++. Obviously there is no native support for this so you would need a third party library or have to write your own parser"}, {"owner": {"reputation": 398, "user_id": 3233134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb38165472b87cc345133669e1cf56c1?s=128&d=identicon&r=PG&f=1", "display_name": "jludewig", "link": "https://stackoverflow.com/users/3233134/jludewig"}, "edited": false, "score": 0, "creation_date": 1564577115, "post_id": 57290293, "comment_id": 101076527, "body": "you may want to look into PMML (<a href=\"http://dmg.org/pmml/v4-4/GeneralStructure.html\" rel=\"nofollow noreferrer\">dmg.org/pmml/v4-4/GeneralStructure.html</a>). In general it allows you to export ML models into a markup format which then can be used across different languages. This post might be helpful: <a href=\"https://stackoverflow.com/questions/30477094/how-to-use-a-pmml-model-in-c\" title=\"how to use a pmml model in c\">stackoverflow.com/questions/30477094/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 10822088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed8608bc2c437d897a4c50e46946bda?s=128&d=identicon&r=PG&f=1", "display_name": "Pete D.", "link": "https://stackoverflow.com/users/10822088/pete-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1564575126, "creation_date": 1564575126, "answer_id": 57290476, "question_id": 57290293, "link": "https://stackoverflow.com/questions/57290293/using-a-neural-network-trained-in-r-to-predict-new-data-in-c/57290476#57290476", "title": "Using a neural network trained in R to predict new data in C++", "body": "<p>When training an ANN:-</p>\n\n<p>1) Present input pattern</p>\n\n<p>2) Forward propagate to get the current ANNs answer</p>\n\n<p>3) Compare the ANNs answer with the correct answer</p>\n\n<p>4) Find the difference (error), and backprop the error to train the network.</p>\n\n<p>When using a trained network, just do 1) &amp; 2) and hope the ANNs answer is correct (!).</p>\n"}], "owner": {"reputation": 3, "user_id": 10590476, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6PLxiShvg1M/AAAAAAAAAAI/AAAAAAAABw8/4kKZowQkTrE/photo.jpg?sz=128", "display_name": "AKum", "link": "https://stackoverflow.com/users/10590476/akum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 57290476, "answer_count": 1, "score": 0, "last_activity_date": 1564575126, "creation_date": 1564574497, "question_id": 57290293, "link": "https://stackoverflow.com/questions/57290293/using-a-neural-network-trained-in-r-to-predict-new-data-in-c", "title": "Using a neural network trained in R to predict new data in C++", "body": "<p>I have trained a basic back-propagation neural network in R using a training data set and validated using a test set. The neural net is giving me satisfactory results.</p>\n\n<p>Now what I want to do is to use this trained neural network (and the  determined weights ) in a C++ code, so that I can put the input variables in the C++ code and it gives me the prediction output.</p>\n\n<p>Most of the tutorial I find regarding the implementation of Neural Network in C++ is about training a network itself, and not really using for prediction. </p>\n\n<p>How do I do this? I feel since the hard part(training the NN) is already done in R, implementing the NN in C++ shouldn't be very difficult. Maybe I'm missing some key concepts?</p>\n"}, {"tags": ["c++", "fstream", "ifstream"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1564573730, "post_id": 57289983, "comment_id": 101074624, "body": "Yay finally it&#39;s an exact dupe!"}, {"owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564575906, "post_id": 57289983, "comment_id": 101075793, "body": "Now I tried to put infile &gt;&gt; fruit in !infile.eof() place, but the output was still wrong. It was Orange, Barana, The number of fruit: 2. Why It&#39;s still wrong."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564576214, "post_id": 57289983, "comment_id": 101075987, "body": "Because you did not fully read the page I linked you to. You probably have two <code>infile &gt;&gt; fruit</code> now so you&#39;re discarding every other input. (Though it&#39;s not possible for Orange to be first, and now it&#39;s spelt &quot;Barana&quot;? Pay attention to details to avoid confusing the issue.)"}, {"owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564576493, "post_id": 57289983, "comment_id": 101076152, "body": "Yes It&#39;s really true. I missed It somehow. Thank you, but how could I change It."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564576511, "post_id": 57289983, "comment_id": 101076163, "body": "So you recognise the error but can&#39;t see how to fix it? I&#39;ll let you think for a while about how to do that, and about what each line of code in your program does."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564577111, "post_id": 57289983, "comment_id": 101076525, "body": "If you don&#39;t mind me asking, what made you think <code>while(!infile.eof()){</code> was correct? We see this error over and over again, but why beginners make this mistake isn&#39;t usually clear."}, {"owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "edited": false, "score": 0, "creation_date": 1564577715, "post_id": 57289983, "comment_id": 101076912, "body": "I did It. Thanks that you let me to think about It."}, {"owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564577931, "post_id": 57289983, "comment_id": 101077044, "body": "@john I wached video on youtube and that man&#39;s code was good with !infile.eof(). Can you say me where !infile.eof() is usefull?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564581371, "post_id": 57289983, "comment_id": 101079277, "body": "That man didn&#39;t know what he was talking about. The only time that <code>eof</code> is useful is when you know that a read has failed and you want to find out why it has failed. <code>eof</code> does not tell you if you are currently positioned at the end of file. So it&#39;s something you would use <b>after</b> you tried to read something, to tell you how that read went, not something you would use <b>before</b> you read, to tell you how the next read might go."}, {"owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564582353, "post_id": 57289983, "comment_id": 101079931, "body": "@John Thanks for your help."}], "owner": {"reputation": 1, "user_id": 10202262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hpFH2k8jrJk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osfcx6aDlxaH3aMesD8pIADBKRyA/mo/photo.jpg?sz=128", "display_name": "hey man", "link": "https://stackoverflow.com/users/10202262/hey-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1564573722, "answer_count": 0, "score": 0, "last_activity_date": 1564574179, "creation_date": 1564573475, "last_edit_date": 1564574179, "question_id": 57289983, "link": "https://stackoverflow.com/questions/57289983/why-i-have-bad-output-using-fstream", "closed_reason": "Duplicate", "title": "Why I have bad output using fstream?", "body": "<p>I'm getting wrong output using <code>fstream</code>.</p>\n\n<p>I create a text file with 3 words in it. When I run the program from a text file I got the last word in the output twice (The word Apple I got twice in the output). I don't know why.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    string fruit;\n    int point = 0;\n\n    ifstream infile;\n    infile.open(\"darbas.txt\");\n\n    while(!infile.eof()){\n        infile &gt;&gt; fruit;\n        cout &lt;&lt; fruit &lt;&lt; endl;\n        point++;\n    }\n\n    cout &lt;&lt; \"The number of fruit: \" &lt;&lt; point &lt;&lt;  endl;\n    infile.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I expect the output to be</p>\n\n<blockquote>\n  <p>Banana, Orange, Apple, The number of fruit: 3</p>\n</blockquote>\n\n<p>Actual output:</p>\n\n<blockquote>\n  <p>Banana, Orange, Apple, Apple, The number of fruit: 4</p>\n</blockquote>\n"}, {"tags": ["android", "c++", "android-ndk", "tesseract", "ld"], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "edited": false, "score": 0, "creation_date": 1564604975, "post_id": 57298208, "comment_id": 101090798, "body": "I tried copying libc.a to libpthread.a but now there is symbols duplicate . can you tell me how to create an empty library with ar command"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564615493, "post_id": 57298208, "comment_id": 101093665, "body": "<code>libc.a</code> is a static library containing the basic C functions. <code>libpthread.a</code> is the static version of the Posix <code>pthread</code> library. You&#39;ll be unsuccessful in 99.9...% of the time if you randomly copy one library with a completely different set of functions and hope it&#39;ll magically replace what a library with a whole different purpose serves - and you&#39;ll get duplicate symbols if you link with both of them. Linking with <code>libc.a</code> is built-in."}, {"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "edited": false, "score": 1, "creation_date": 1564634533, "post_id": 57298208, "comment_id": 101097052, "body": "I created an empty libpthread.a with : &#39;arm-dontremeber-ar.exe cr libpthread.a&#39; and it worked . @Alex-Cohn what do you mean with training ? do you mean using the languages files from tesseract repository or something else ?"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1564634965, "post_id": 57298208, "comment_id": 101097180, "body": "Cool that now it works: I was offline and could not answer you question timely."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1564635767, "post_id": 57298208, "comment_id": 101097351, "body": "@TedLyngmo my mistake was that in this particular case, the linker had both libc.a (under the name of libpthread.a) and libc.so. Your pitch is generally correct, but the Android NDK is that 0.01% because here, libc includes all libpthread symbols. Methinks this wasn&#39;t a wise choice of people who created NDK, but after 10 years, it&#39;s too late to rebel."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1564649523, "post_id": 57298208, "comment_id": 101103241, "body": "<b>re: training</b> \u2014 tesseract&#39;s main CMakeList.txt recognizes <code>-DBUILD_TRAINING_TOOLS=OFF</code>, but default is <code>ON</code>. The <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/TrainingTesseract-4.00\" rel=\"nofollow noreferrer\">training</a> covers adding new languages, fonts, or logic to the new neural network-based recognition engine. According to the Wiki above (I am not sure how up-to-date it is), training only works on Linux, and may take a few days to a couple of weeks with OpenMP and Intel Intrinsics support for SSE/AVX extensions. So there is no point in compiling the training-only code (e.g. <b>fileio.cpp</b>) for Android."}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 4, "last_activity_date": 1564646453, "last_edit_date": 1564646453, "creation_date": 1564603976, "answer_id": 57298208, "question_id": 57289494, "link": "https://stackoverflow.com/questions/57289494/ndk-r20-ld-ld-error-cannot-find-lpthread/57298208#57298208", "title": "ndk r20 ld : ld: error: cannot find -lpthread", "body": "<p>You don't need glob. After all, you are building for a mobile device, where you won't perform training. The file <code>fileio.cpp</code> that refers to glob, is only used in training.</p>\n\n<p>Android NDK is special in that it does not have libpthread, the pthread implementation is inside libc. The easy hack is to <s>copy libc.a to libpthread.a, or</s> create an empty libpthread.a with <strong>ar</strong> command.</p>\n\n<p>You may find the preconfigured <a href=\"https://github.com/rhardih/bad/tree/master/tesseract\" rel=\"nofollow noreferrer\">docker build environment</a> helpful. If you prefer an ndk-build version, fully integrated into Android Studio, have a look at my fork: <a href=\"https://github.com/alexcohn/tess-two\" rel=\"nofollow noreferrer\">https://github.com/alexcohn/tess-two</a>.</p>\n"}], "owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1169, "favorite_count": 0, "accepted_answer_id": 57298208, "answer_count": 1, "score": 4, "last_activity_date": 1564646453, "creation_date": 1564571714, "question_id": 57289494, "link": "https://stackoverflow.com/questions/57289494/ndk-r20-ld-ld-error-cannot-find-lpthread", "title": "ndk r20 ld : ld: error: cannot find -lpthread", "body": "<p>I'm trying to build tesseract for android arm with vcpkg and ndk r20\nI had to edit CMakeLists.txt and add glob.c and glob.h because they weren't in the ndk</p>\n\n<p>I also made fileio.cpp include glob.h</p>\n\n<p>then I had to bypass pkg-config because ndk doesn't have it\nI replace this :</p>\n\n<pre><code>if(NOT EXISTS ${PROJECT_SOURCE_DIR}/.cppan)\n    if (NOT Leptonica_DIR AND NOT MSVC)\n        find_package(PkgConfig REQUIRED)\n        pkg_check_modules(Leptonica REQUIRED lept&gt;=${MINIMUM_LEPTONICA_VERSION})\n        #link_directories(${Leptonica_LIBRARY_DIRS})\n    else()\n        find_package(Leptonica ${MINIMUM_LEPTONICA_VERSION} REQUIRED CONFIG)\n    endif()\nelse()\n    if (STATIC)\n        set(CPPAN_BUILD_SHARED_LIBS 0)\n    else()\n        set(CPPAN_BUILD_SHARED_LIBS 1)\n    endif()\n    add_subdirectory(.cppan)\nendif()\n</code></pre>\n\n<p>with this : </p>\n\n<pre><code>if(NOT EXISTS ${PROJECT_SOURCE_DIR}/.cppan)\n    if (NOT Leptonica_DIR AND NOT MSVC)\n        find_package(Leptonica CONFIG REQUIRED)\n        #link_libraries(tesseract leptonica) causes errors , tried tesseractlib instead of tesseract\n    else()\n        find_package(Leptonica ${MINIMUM_LEPTONICA_VERSION} REQUIRED CONFIG)\n    endif()\nelse()\n    if (STATIC)\n        set(CPPAN_BUILD_SHARED_LIBS 0)\n    else()\n        set(CPPAN_BUILD_SHARED_LIBS 1)\n    endif()\n    add_subdirectory(.cppan)\nendif()\n</code></pre>\n\n<p>after this I tried to build the library with this command :</p>\n\n<pre><code>vcpkg install tesseract[core]:arm-android\n</code></pre>\n\n<p>the build process exits due to error near the end\nthe libtesseract.a library is built but not the binary tesseract</p>\n\n<p>there is a long log in install-arm-android-rel-out.log and this is the error at the end :</p>\n\n<pre><code>[240/242] cmd.exe /C \"cd . &amp;&amp; E:\\programs\\vcpkg\\downloads\\tools\\cmake-3.14.0-windows\\cmake-3.14.0-win32-x86\\bin\\cmake.exe -E remove libtesseract.a &amp;&amp; E:\\programs\\ndk\\android-ndk-r20\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\arm-linux-androideabi-ar.exe qc libtesseract.a  @CMakeFiles\\libtesseract.rsp &amp;&amp; E:\\programs\\ndk\\android-ndk-r20\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\arm-linux-androideabi-ranlib.exe libtesseract.a &amp;&amp; cd .\"\n[241/242] cmd.exe /C \"cd . &amp;&amp; E:\\programs\\ndk\\android-ndk-r20\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\clang++.exe --target=armv7-none-linux-androideabi21 --gcc-toolchain=E:/programs/ndk/android-ndk-r20/toolchains/llvm/prebuilt/windows-x86_64 --sysroot=E:/programs/ndk/android-ndk-r20/toolchains/llvm/prebuilt/windows-x86_64/sysroot  -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fno-addrsig -march=armv7-a -mthumb -Wa,--noexecstack -Wformat -Werror=format-security -frtti -fexceptions  --std=c++11 -Oz -DNDEBUG  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -static-libstdc++ -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--exclude-libs,libunwind.a -Wl,--no-undefined -Qunused-arguments -Wl,-z,noexecstack -Wl,--gc-sections CMakeFiles/tesseract.dir/src/api/tesseractmain.cpp.o  -o bin\\tesseract  libtesseract.a -lpthread E:/programs/vcpkg/installed/arm-android/lib/libleptonica.a E:/programs/vcpkg/installed/arm-android/lib/libgif.a E:/programs/vcpkg/installed/arm-android/lib/libjpeg.a E:/programs/vcpkg/installed/arm-android/share/png/../../lib/libpng16.a E:/programs/vcpkg/installed/arm-android/lib/libtiff.a E:/programs/vcpkg/installed/arm-android/lib/liblzma.a E:/programs/vcpkg/installed/arm-android/lib/libjpeg.a E:/programs/vcpkg/installed/arm-android/share/png/../../lib/libpng16.a E:/programs/vcpkg/installed/arm-android/lib/libtiff.a E:/programs/vcpkg/installed/arm-android/lib/liblzma.a E:/programs/vcpkg/installed/arm-android/lib/libz.a -lm E:/programs/vcpkg/installed/arm-android/lib/libz.a -lm -latomic -lm &amp;&amp; cd .\"\nFAILED: bin/tesseract \ncmd.exe /C \"cd . &amp;&amp; E:\\programs\\ndk\\android-ndk-r20\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\clang++.exe --target=armv7-none-linux-androideabi21 --gcc-toolchain=E:/programs/ndk/android-ndk-r20/toolchains/llvm/prebuilt/windows-x86_64 --sysroot=E:/programs/ndk/android-ndk-r20/toolchains/llvm/prebuilt/windows-x86_64/sysroot  -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fno-addrsig -march=armv7-a -mthumb -Wa,--noexecstack -Wformat -Werror=format-security -frtti -fexceptions  --std=c++11 -Oz -DNDEBUG  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -static-libstdc++ -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--exclude-libs,libunwind.a -Wl,--no-undefined -Qunused-arguments -Wl,-z,noexecstack -Wl,--gc-sections CMakeFiles/tesseract.dir/src/api/tesseractmain.cpp.o  -o bin\\tesseract  libtesseract.a -lpthread E:/programs/vcpkg/installed/arm-android/lib/libleptonica.a E:/programs/vcpkg/installed/arm-android/lib/libgif.a E:/programs/vcpkg/installed/arm-android/lib/libjpeg.a E:/programs/vcpkg/installed/arm-android/share/png/../../lib/libpng16.a E:/programs/vcpkg/installed/arm-android/lib/libtiff.a E:/programs/vcpkg/installed/arm-android/lib/liblzma.a E:/programs/vcpkg/installed/arm-android/lib/libjpeg.a E:/programs/vcpkg/installed/arm-android/share/png/../../lib/libpng16.a E:/programs/vcpkg/installed/arm-android/lib/libtiff.a E:/programs/vcpkg/installed/arm-android/lib/liblzma.a E:/programs/vcpkg/installed/arm-android/lib/libz.a -lm E:/programs/vcpkg/installed/arm-android/lib/libz.a -lm -latomic -lm &amp;&amp; cd .\"\nE:/programs/ndk/android-ndk-r20/toolchains/llvm/prebuilt/windows-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/bin\\ld: error: cannot find -lpthread\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>as you can see the linker can't find pthread !</p>\n\n<p>this is my arm-android.cmake used by vcpkg :</p>\n\n<pre><code>set(VCPKG_TARGET_ARCHITECTURE arm)\nset(VCPKG_CRT_LINKAGE dynamic)\nset(VCPKG_LIBRARY_LINKAGE static)\n\nset(VCPKG_CMAKE_SYSTEM_NAME Android)\nset(VCPKG_BUILD_TYPE release)\n</code></pre>\n\n<p>and I set these variables :</p>\n\n<pre><code>set \"ANDROID_NDK=E:\\programs\\ndk\\android-ndk-r20\\\"\nset \"ANDROID_NDK_HOME=E:\\programs\\ndk\\android-ndk-r20\\\"\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "winsock", "iocp"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1564573423, "post_id": 57289435, "comment_id": 101074451, "body": "Check [ IO completion ports](<a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/i-o-completion-ports\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/fileio/&hellip;</a>)"}, {"owner": {"reputation": 1005, "user_id": 10674275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1710877d569a65bda20b7c7c0865b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/10674275/julius"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1564573853, "post_id": 57289435, "comment_id": 101074690, "body": "@VictorGubin Thanks! I was looking at that but I couldn&#39;t find any related information"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1564584683, "post_id": 57289435, "comment_id": 101081497, "body": "what sense at all pass zero size buffer ? just pass not empty buffer"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1564584789, "post_id": 57289435, "comment_id": 101081569, "body": "and anyway in all case you only got notify when I/O complete. no any sense in 0 buffer"}, {"owner": {"reputation": 1005, "user_id": 10674275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1710877d569a65bda20b7c7c0865b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/10674275/julius"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1564585266, "post_id": 57289435, "comment_id": 101081883, "body": "@RbMm mostly for portability (compatibility with epoll and the like)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1564586356, "post_id": 57289435, "comment_id": 101082518, "body": "i nothing understand in portability and are exist sense in this, but all this absolute unrelated to IOCP. <i>IOCP can sort of emulate readiness notification</i> - absolute senseless and wrong assumption. iocp nothing emulate. never. simply when I/O on file object complete and file object is bind to IOCP - packet queued to this IOCP. if you begin asynchronous I/O via <code>WSARecv</code> - when it finished - you got notification to IOCP. are you pass 0 or not 0 buffer - how here related at all ?! notification will be when io finished (if it not synchronous fail do invalid parameter/handle)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1564586869, "post_id": 57289435, "comment_id": 101082793, "body": "you confuse completely different and unrelated things. if file is bind to IOCP and I/O operation finished on this file - you got notification via IOCP. all. what is I/O operation, what buffers you pass, are I/O operation at all have buffers - unrelate  here at all. pass emprty buffers i sure no sense - because in this case you need again call recv with not empty buffers. what sense do this, when you from begin can begin I/O operation with not empty buffers ? it will complete at the same time, if you use empty buffers. simply if case empty buffers need 2 I/O operation instead 1."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1564587582, "post_id": 57289435, "comment_id": 101083193, "body": "so in short - readiness notification not exist at all. iocp here unrelated. use empty buffers - have no any sense"}], "owner": {"reputation": 1005, "user_id": 10674275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1710877d569a65bda20b7c7c0865b4c?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/10674275/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564571819, "creation_date": 1564571504, "last_edit_date": 1564571819, "question_id": 57289435, "link": "https://stackoverflow.com/questions/57289435/winsock-and-iocp-readiness-notification", "title": "WinSock and IOCP readiness notification", "body": "<p>I was reading <a href=\"https://news.ycombinator.com/item?id=19541691\" rel=\"nofollow noreferrer\">this post</a> where someone mentions the ability to get notifications when a socket is ready to read instead of getting a notification when reading is finished - by submitting a 0 sized buffer.</p>\n\n<pre><code>...\nWSABUF DataBuf;\nDataBuf.len = 0;\nDataBuf.buf = NULL;\n...\nrc = WSARecv(ConnSocket, &amp;DataBuf, 1, &amp;RecvBytes, &amp;Flags, &amp;RecvOverlapped, NULL);\n</code></pre>\n\n<p>However, I couldn't find anything in the documentation about that so I am a bit worried. Is this common practice and safe to do?</p>\n"}, {"tags": ["python", "c++", "opencv", "cmake", "raspberry-pi"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1564574463, "post_id": 57289402, "comment_id": 101075017, "body": "Isn&#39;t OpenCV available via pacman on raspbian?"}], "answers": [{"comments": [{"owner": {"reputation": 1284, "user_id": 6262757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1134014206619252/picture?type=large", "display_name": "Nam Vu", "link": "https://stackoverflow.com/users/6262757/nam-vu"}, "edited": false, "score": 1, "creation_date": 1587229134, "post_id": 58088982, "comment_id": 108430920, "body": "Thanks, it&#39;s seems to only happens in the rpi from what I&#39;ve found. Weird, maybe compiler version?"}, {"owner": {"reputation": 473, "user_id": 4929491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d02b8907126c4c9243497e1c507ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Void", "link": "https://stackoverflow.com/users/4929491/void"}, "reply_to_user": {"reputation": 1284, "user_id": 6262757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1134014206619252/picture?type=large", "display_name": "Nam Vu", "link": "https://stackoverflow.com/users/6262757/nam-vu"}, "edited": false, "score": 0, "creation_date": 1587300436, "post_id": 58088982, "comment_id": 108451374, "body": "I don&#39;t know personally. It could be a version mismatch, but if the fix is simple enough, I just change the codebase."}, {"owner": {"reputation": 1284, "user_id": 6262757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1134014206619252/picture?type=large", "display_name": "Nam Vu", "link": "https://stackoverflow.com/users/6262757/nam-vu"}, "edited": false, "score": 0, "creation_date": 1587394107, "post_id": 58088982, "comment_id": 108487403, "body": "Well it&#39;s a little more for me since I included this as an <code>ExternalProject_Add</code> in my CMaktLists.txt that way there are no manual installation for different system. I fixed this by creating a diff file and applying the patch with git apply. I&#39;d still like to know why this is okay with other system though o_0. I&#39;m suspecting just different compiler flags/version"}, {"owner": {"reputation": 473, "user_id": 4929491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d02b8907126c4c9243497e1c507ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Void", "link": "https://stackoverflow.com/users/4929491/void"}, "reply_to_user": {"reputation": 1284, "user_id": 6262757, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1134014206619252/picture?type=large", "display_name": "Nam Vu", "link": "https://stackoverflow.com/users/6262757/nam-vu"}, "edited": false, "score": 0, "creation_date": 1587482507, "post_id": 58088982, "comment_id": 108526075, "body": "ya probably is compiler flags"}], "tags": [], "owner": {"reputation": 473, "user_id": 4929491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d02b8907126c4c9243497e1c507ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Void", "link": "https://stackoverflow.com/users/4929491/void"}, "is_accepted": true, "score": 1, "last_activity_date": 1569364829, "creation_date": 1569364829, "answer_id": 58088982, "question_id": 57289402, "link": "https://stackoverflow.com/questions/57289402/opencv-error-while-building-on-raspberry-pi/58088982#58088982", "title": "OpenCV Error while building on Raspberry PI", "body": "<p>It appears to be a bug in OpenCV; after I did the following change at <code>opencv3/modules/python/src2/cv2.cpp</code>, it compiled for me. Change...</p>\n\n<p><code>char* str = PyString_AsString(obj);</code></p>\n\n<p>to</p>\n\n<p><code>const char* str = PyString_AsString(obj);</code></p>\n"}], "owner": {"reputation": 113, "user_id": 9749938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccac5c1101d30568a39528c9eacac295?s=128&d=identicon&r=PG&f=1", "display_name": "efedoganay", "link": "https://stackoverflow.com/users/9749938/efedoganay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 58088982, "answer_count": 1, "score": 1, "last_activity_date": 1569364829, "creation_date": 1564571375, "question_id": 57289402, "link": "https://stackoverflow.com/questions/57289402/opencv-error-while-building-on-raspberry-pi", "title": "OpenCV Error while building on Raspberry PI", "body": "<p>When I use cmake to build opencv-3.2.0 on Raspberry Pi, I encountered a weird error at the 99% of installation.</p>\n\n<p>I did not change anything to not mess anything up, however it seems like a simple code error.</p>\n\n<p>Here is the error appeared in my terminal</p>\n\n<pre><code>/home/pi/opencv-3.2.0/modules/python/src2/cv2.cpp: In function \n\u2018bool pyopencv_to(PyObject*, T&amp;, const char*) [with T = \ncv::String; PyObject = _object]\u2019:\n/home/pi/opencv-3.2.0/modules/python/src2/cv2.cpp:730:34: error: \ninvalid conversion from \u2018const char*\u2019 to \u2018char*\u2019 [-fpermissive]\n char* str = PyString_AsString(obj);\nIn file included from /home/pi/opencv- \n3.2.0/modules/python/src2/cv2.cpp:1362:\n</code></pre>\n\n<p>and this is the  pyopencv_to function in cv2.cpp</p>\n\n<pre><code>template&lt;&gt;\nbool pyopencv_to(PyObject* obj, String&amp; value, const char* name)\n{\n(void)name;\nif(!obj || obj == Py_None)\n    return true;\nchar* str = PyString_AsString(obj);\nif(!str)\n    return false;\nvalue = String(str);\nreturn true;\n}\n</code></pre>\n\n<p>Should i manually change the code ?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1564572643, "post_id": 57289395, "comment_id": 101074007, "body": "In all honesty, this type of thing belongs in the project CMakeLists.txt, not the toolchain description. There should be some way to determine the toolchain and add the manifest when necessary. This is just a dirty hack."}, {"owner": {"reputation": 1591, "user_id": 955508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c96c0fe10c21c73dcf3ed8afa75c762f?s=128&d=identicon&r=PG", "display_name": "leanid.chaika", "link": "https://stackoverflow.com/users/955508/leanid-chaika"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1564573059, "post_id": 57289395, "comment_id": 101074249, "body": "@rubenvb As you can see, my link command is composite from several sub commands. If I create some CUSTOM_MANIFEST var in CMakeLists.txt how I manage to update CMAKE_CXX_LINK_EXECUTABLE?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1564573967, "post_id": 57289395, "comment_id": 101074760, "body": "This is just a plain <a href=\"https://cmake.org/cmake/help/latest/command/add_custom_command.html#build-events\" rel=\"nofollow noreferrer\">POST_BUILD command</a>. This mechanism allows you to specify what the output is of the command such that dependency tracking isn&#39;t broken."}, {"owner": {"reputation": 1591, "user_id": 955508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c96c0fe10c21c73dcf3ed8afa75c762f?s=128&d=identicon&r=PG", "display_name": "leanid.chaika", "link": "https://stackoverflow.com/users/955508/leanid-chaika"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1564575504, "post_id": 57289395, "comment_id": 101075584, "body": "@rubenvb With POST_BUILD I have to add custom_target to every my project (to every CMakeLists.txt) and it all be the same. So I decide to write once toolchain. May be I can do it in toolchain file?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1564576339, "post_id": 57289395, "comment_id": 101076061, "body": "you could also write a <code>function</code> or <code>macro</code> and stuff it in a <code>.cmake</code> file that you share across projects."}], "answers": [{"tags": [], "owner": {"reputation": 1591, "user_id": 955508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c96c0fe10c21c73dcf3ed8afa75c762f?s=128&d=identicon&r=PG", "display_name": "leanid.chaika", "link": "https://stackoverflow.com/users/955508/leanid-chaika"}, "is_accepted": false, "score": 1, "last_activity_date": 1564571994, "creation_date": 1564571994, "answer_id": 57289575, "question_id": 57289395, "link": "https://stackoverflow.com/questions/57289395/how-to-get-project-root-directory-inside-cmake-toolchain-file-is-it-possible/57289575#57289575", "title": "How to get project root directory inside cmake toolchain file, is it possible?", "body": "<p>Looks like CMAKE_CURRENT_SOURCE_DIR works for me.</p>\n\n<pre><code>set(APP_META \"${CMAKE_CURRENT_SOURCE_DIR}/Application.manifest\")\n</code></pre>\n"}], "owner": {"reputation": 1591, "user_id": 955508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c96c0fe10c21c73dcf3ed8afa75c762f?s=128&d=identicon&r=PG", "display_name": "leanid.chaika", "link": "https://stackoverflow.com/users/955508/leanid-chaika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1564571994, "creation_date": 1564571349, "question_id": 57289395, "link": "https://stackoverflow.com/questions/57289395/how-to-get-project-root-directory-inside-cmake-toolchain-file-is-it-possible", "title": "How to get project root directory inside cmake toolchain file, is it possible?", "body": "<p>I doing crossplatform building, and try to use cmake. So I create my-toolchain-file.cmake in which customize c++ linker command. Linking for my baremetal staff can be done like:</p>\n\n<pre><code>set(CMAKE_CXX_LINK_EXECUTABLE\n      \"&lt;CMAKE_CXX_COMPILER&gt; &lt;CMAKE_CXX_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;OBJECTS&gt; &lt;LINK_LIBRARIES&gt; ${SDK_ROOT}/Libraries/${BUILD_TARGET}/${BUILD_TYPE}/memory.a -o &lt;TARGET_BASE&gt;\"\n      \"if not exist &lt;TARGET_BASE&gt; ( mkdir &lt;TARGET_BASE&gt; )\"\n      \"${SDK_ROOT}/Tools/CommandLineTools/Make/MakeBin.exe &lt;TARGET_BASE&gt; &lt;TARGET_BASE&gt;/main\"\n      \"${SDK_ROOT}/Tools/CommandLineTools/Make/MakeManifest.exe --desc ${APP_DESC} --meta ${APP_META} -o &lt;TARGET_BASE&gt;/main.m\"\n      \"copy ${SDK_ROOT_WIN}\\\\Libraries\\\\${BUILD_TARGET}\\\\${BUILD_TYPE}\\\\syslib.so &lt;TARGET_BASE&gt;\\\\rtld &gt;NUL\"\n      \"copy ${SDK_ROOT_WIN}\\\\Libraries\\\\${BUILD_TARGET}\\\\${BUILD_TYPE}\\\\Sdk.so &lt;TARGET_BASE&gt;\\\\sdk &gt;NUL\"\n      \"${SDK_ROOT}/Tools/SomeTool.exe createimage -o &lt;TARGET_BASE&gt; --desc ${APP_DESC} --meta ${APP_META} --type Exe --program &lt;TARGET_BASE&gt;bin\"\n      \"rmdir /S /Q &lt;TARGET_BASE&gt;\"\n      \"del /Q &lt;TARGET_BASE&gt;\"\n    )\n</code></pre>\n\n<p>Inside customized linker command I have to get path to manifest file which relative to project CMakeLists.txt not to toolchain file. How I can set my APP_META variable inside toolchain file? I try:</p>\n\n<pre><code>set(APP_META \"${CMAKE_CURRENT_LIST_DIR}/Application.manifest\")\n</code></pre>\n\n<p>It is not working (toolchain file and CMakeLists.txt in different places). How to get root directory path inside cmake toolchain file? Thanks in advance!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 4, "creation_date": 1564571485, "post_id": 57289371, "comment_id": 101073339, "body": "<i>&quot;splitting up the threading/parallelisation parts and the &quot;actual work&quot; parts into separate classes might be the much smarter idea&quot;</i> - it definitely is. With proper class responsibilities such an issue wouldn&#39;t occur."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 5, "creation_date": 1564571553, "post_id": 57289371, "comment_id": 101073380, "body": "You violate in general the owning concept. Any entity should be responsible for exactly its own resources, fully independent of what it is. This means not only memory and threads but absolutely include them!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1564571798, "post_id": 57289371, "comment_id": 101073527, "body": "how about CRTP?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564572998, "post_id": 57289371, "comment_id": 101074209, "body": "@Jarod42 Base dtor is still invoked after the derived subobject is dead. Just knowing what derived function to call isn&#39;t enough - you have to call it earlier"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1564573043, "post_id": 57289371, "comment_id": 101074236, "body": "Would be better to fix the root cause of having this design issue. It&#39;s backwards!"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1564626740, "post_id": 57289371, "comment_id": 101095677, "body": "Any derived class that own some ressource should do its own cleanup. <b>Base class should only cleanup things from its own class</b>. Avoid design than goes against basic rules of how C++ works."}], "answers": [{"tags": [], "owner": {"reputation": 672, "user_id": 3210609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mo48W.png?s=128&g=1", "display_name": "aerkenemesis", "link": "https://stackoverflow.com/users/3210609/aerkenemesis"}, "is_accepted": false, "score": -1, "last_activity_date": 1564574888, "last_edit_date": 1564574888, "creation_date": 1564574436, "answer_id": 57290274, "question_id": 57289371, "link": "https://stackoverflow.com/questions/57289371/call-common-function-in-destructor-before-destroying-derived-members/57290274#57290274", "title": "Call common function in destructor before destroying derived members", "body": "<p><strong>Edit: I realized this doesn't aswer your question but I'll leave it here for reference.</strong></p>\n\n<p>As mentioned earlier, each object should be responsible for managing its own resources so your design is a bit flawed to begin with.</p>\n\n<p>Consider the following example. The <code>TaskRunner</code> is responsible for firing up a thread, and shutting it down when the constructor is called (textbook RAII). The <code>Task</code> class specifies what to do during the lifetime of the task, through pure virtual inheritance.</p>\n\n<pre><code>#include &lt;atomic&gt;                                                                                                                                                                                                   \n#include &lt;future&gt;                                                                                                                                                                                                   \n#include &lt;iostream&gt;                                                                                                                                                                                                 \n#include &lt;memory&gt;                                                                                                                                                                                                   \n\nstruct Task {                                                                                                                                                                                                       \n    virtual void run( ) = 0;                                                                                                                                                                                        \n    virtual ~Task( ) {                                                                                                                                                                                              \n    }                                                                                                                                                                                                               \n};                                                                                                                                                                                                                  \n\nclass TaskRunner final {                                                                                                                                                                                            \n    std::unique_ptr&lt;Task&gt; task;                                                                                                                                                                                     \n    std::future&lt;void&gt;     fut;                                                                                                                                                                                      \n    std::atomic&lt;bool&gt;     terminate;                                                                                                                                                                                \n\npublic:                                                                                                                                                                                                             \n    TaskRunner(std::unique_ptr&lt;Task&gt;&amp;&amp; task)                                                                                                                                                                        \n        : task {std::move(task)}                                                                                                                                                                                    \n        , terminate {false} {                                                                                                                                                                                       \n        fut = std::async(std::launch::async, [this] {                                                                                                                                                               \n            while(!terminate) {                                                                                                                                                                                     \n                this-&gt;task-&gt;run( );                                                                                                                                                                                 \n            }                                                                                                                                                                                                       \n            this-&gt;task.reset( );                                                                                                                                                                                    \n        });                                                                                                                                                                                                         \n    }                                                                                                                                                                                                               \n\n    TaskRunner(TaskRunner&amp;&amp;) = delete;                                                                                                                                                                              \n    TaskRunner&amp; operator=(TaskRunner&amp;&amp;) = delete;                                                                                                                                                                   \n    TaskRunner(const TaskRunner&amp;)       = delete;                                                                                                                                                                   \n    TaskRunner&amp; operator=(const TaskRunner&amp;) = delete;                                                                                                                                                              \n\n    ~TaskRunner( ) {                                                                                                                                                                                                \n        terminate = true;                                                                                                                                                                                           \n        fut.wait( ); // Block until cleanup is completed                                                                                                                                                            \n        std::cout &lt;&lt; \"~TaskRunner()\" &lt;&lt; std::endl;                                                                                                                                                                  \n    }                                                                                                                                                                                                               \n};                                                                                                                                                                                                                  \n\nstruct MyTask : public Task {                                                                                                                                                                                       \n    int i = 0;                                                                                                                                                                                                      \n\n    void                                                                                                                                                                                                            \n    run( ) {                                                                                                                                                                                                        \n        // Do important stuf here, don't block.                                                                                                                                                                     \n        std::cout &lt;&lt; \"MyTask::run() \" &lt;&lt; i++ &lt;&lt; std::endl;                                                                                                                                                          \n        std::this_thread::sleep_for(std::chrono::milliseconds {100});                                                                                                                                               \n    }                                                                                                                                                                                                               \n\n    ~MyTask( ) override {                                                                                                                                                                                           \n        // Clean up stuff here, run() is guaranteed to never be run again                                                                                                                                           \n        std::cout &lt;&lt; \"~MyTask()\" &lt;&lt; std::endl;                                                                                                                                                                      \n    }                                                                                                                                                                                                               \n};                                                                                                                                                                                                                  \n\nint                                                                                                                                                                                                                 \nmain( ) {                                                                                                                                                                                                           \n    TaskRunner t {std::make_unique&lt;MyTask&gt;( )};                                                                                                                                                                     \n    std::this_thread::sleep_for(std::chrono::seconds {1});                                                                                                                                                          \n} \n</code></pre>\n\n<p>Output</p>\n\n<pre><code>MyTask::run() 0\nMyTask::run() 1\nMyTask::run() 2\nMyTask::run() 3\nMyTask::run() 4\nMyTask::run() 5\nMyTask::run() 6\nMyTask::run() 7\nMyTask::run() 8\nMyTask::run() 9\n~MyTask()\n~TaskRunner()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 4553852, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h8e-nRRPy7I/AAAAAAAAAAI/AAAAAAAAACA/lYjfmeJsu4Q/photo.jpg?sz=128", "display_name": "Silvan Wegmann", "link": "https://stackoverflow.com/users/4553852/silvan-wegmann"}, "edited": false, "score": 1, "creation_date": 1566848759, "post_id": 57290477, "comment_id": 101776900, "body": "As tough as this answer might be, I have to accept the broad hint that ultimately the underlying design is simply flawed. I guess sometimes you just need an outsider to confirm your naging feelings that something is wrong ;-)"}], "tags": [], "owner": {"reputation": 156, "user_id": 10290252, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LahpDKW-wyU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP9nobF93BhV20-c9ZSVrTg2NIzAQ/mo/photo.jpg?sz=128", "display_name": "QCTDev", "link": "https://stackoverflow.com/users/10290252/qctdev"}, "is_accepted": true, "score": 1, "last_activity_date": 1564575131, "creation_date": 1564575131, "answer_id": 57290477, "question_id": 57289371, "link": "https://stackoverflow.com/questions/57289371/call-common-function-in-destructor-before-destroying-derived-members/57290477#57290477", "title": "Call common function in destructor before destroying derived members", "body": "<p>Quite simply you don't. The best thing to do in this situation is to redesign how everything works to prevent this from being a problem. </p>\n\n<p>But lets face it, in all likelihood you don't have the time and/or resources to achieve that. So your second best option (in my opinion) is to ensure that any call to the destroyed members of the derived class kills you application immediately with a very clear error message.</p>\n\n<p>If a system must fail, fail early.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1564585891, "creation_date": 1564585891, "answer_id": 57293970, "question_id": 57289371, "link": "https://stackoverflow.com/questions/57289371/call-common-function-in-destructor-before-destroying-derived-members/57293970#57293970", "title": "Call common function in destructor before destroying derived members", "body": "<p>While I agree with comments that the design is flawed .....</p>\n\n<p>Assuming that the objects are dynamically allocated, one solution is to make the destructors <code>virtual</code> and <code>protected</code>, and use a separate function to take care of calling the \"pre-cleanup\" before destroying the objects.   For example;</p>\n\n<pre><code>class B\n{\n   public:\n\n      void die()\n      {\n           common_pre_cleanup_function();\n           delete this;\n      };\n\n  protected:\n     virtual ~B() {};\n\n  private:\n\n     void common_pre_cleanup_function() { };\n};\n\nclass D : public B\n{\n   protected:\n     virtual ~D() {};\n};\n\n\nint main()\n{\n     B *b = new D;\n\n     b-&gt;die();\n}\n</code></pre>\n\n<p>This has a few limitations for the user of the class.   In particular, behaviour is undefined if</p>\n\n<ol>\n<li>the object is not created using a <code>new</code> expression;</li>\n<li>any non-static member function of the object is called after calling <code>die()</code></li>\n<li>any non-static data member is accessed after calling <code>die()</code></li>\n</ol>\n\n<p>This also means that, if you maintain a set of objects (like a vector of pointers, <code>B*</code>) then it is necessary to remove the pointer from the list to ensure no usage of the object after it has died.</p>\n\n<p>The <code>protected</code> destructors  prevent a few things.  Functions that are not members of <code>friend</code>s of <code>B</code> or <code>D</code> cannot;</p>\n\n<ol>\n<li>Create a <code>B</code> or a <code>D</code> of automatic storage duration </li>\n<li>Use operator <code>delete</code> directly.    For example, a statement <code>delete b;</code> in <code>main()</code> above will not compile.   This also prevents destroying an object before calling the \"pre-cleanup\"</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1564621960, "creation_date": 1564621960, "answer_id": 57300653, "question_id": 57289371, "link": "https://stackoverflow.com/questions/57289371/call-common-function-in-destructor-before-destroying-derived-members/57300653#57300653", "title": "Call common function in destructor before destroying derived members", "body": "<p>You might do something like:</p>\n\n<pre><code>template &lt;typename TaskImpl&gt;\nclass Task final : public TaskImpl\n{\n    static_assert(std::is_base_of&lt;BackgroundTask, TaskImpl&gt;);\npublic:\n    virtual ~Task() { stop(); }\n};\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>class MyTaskImpl : public BackgroundTask\n{\n    // ...\nprivate:\n    std::unique_ptr&lt;MyClass&gt; member;\n};\n\nusing MyTask = Task&lt;MyTaskImpl&gt;;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4553852, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h8e-nRRPy7I/AAAAAAAAAAI/AAAAAAAAACA/lYjfmeJsu4Q/photo.jpg?sz=128", "display_name": "Silvan Wegmann", "link": "https://stackoverflow.com/users/4553852/silvan-wegmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 57290477, "answer_count": 4, "score": 2, "last_activity_date": 1564621960, "creation_date": 1564571257, "question_id": 57289371, "link": "https://stackoverflow.com/questions/57289371/call-common-function-in-destructor-before-destroying-derived-members", "title": "Call common function in destructor before destroying derived members", "body": "<p>Assuming we have the classical Base class and derived class like this</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class B {\npublic:\n    virtual ~B() {\n        // calling it here is too late, see explanations\n        //common_pre_cleanup_function();\n    }\n\n    void common_pre_cleanup_function() { }\n};\n\nclass D : public B {\npublic:\n    virtual ~D() {\n        // What if we forget to do this call in another derived class?\n        common_pre_cleanup_function();\n    }\n};\n</code></pre>\n\n<p>How would you make sure a function like <code>common_pre_cleanup_function()</code> is called in all derived <code>D</code>s destructors before the members of <code>D</code> are destroyed but without having to explicitly call this function in every destructor-implementation of a new <code>D</code>?</p>\n\n<h2>Background</h2>\n\n<p>In my current project we have a base class that implements certain parallelism and threading features and will eventually start a new thread that does the actual work.\nIn the destructor of this base class we wanted to make sure, that the thread is always stopped and joined so that it gets cleaned up properly.</p>\n\n<p>However derived classes may create members that are used by this thread in the base class. So if we destroy objects of the derived class, these members are also destroyed. But at this time the thread that is managed by the base class can still be running and now wrongfully access destroyed members.</p>\n\n<p>I'm aware that this isn't the smartest approach to solve the issue and probably splitting up the threading/parallelisation parts and the \"actual work\" parts into separate classes might be the much smarter idea. However I'm interested if there are any approaches that don't involve an entire rewrite of the existing code base.</p>\n\n<p>This code here is closer to our situation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class BackgroundTask {\npublic:\n    virtual ~BackgroundTask() {\n        // if we forget to call stop() in the derived classes, we will\n        // at this point have already destroyed any derived members\n        // while the thread might still run and access them; so how/where\n        // can we put this call?\n        //stop();\n    }\n\n    void stop() {\n        cancelFlag_.set();\n        thread_.join();\n    }\n\n    // more functions helping with Background tasks\n\nprivate:\n    Thread thread_;\n    Condition cancelFlag_;\n};\n\nclass MyTask : public BackgroundTask {\npublic:\n    virtual ~MyTask() {\n        // with the current case, we have to remember to call\n        // this function in all destructors in classes derived\n        // from BackgroundTask; that's what I want to avoid\n        stop();\n    }\n\nprivate:\n    std::unique_ptr&lt;MyClass&gt; member;\n};\n</code></pre>\n"}, {"tags": ["c++", "ubuntu", "boost", "cmake", "bitcoin"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1564572876, "post_id": 57289217, "comment_id": 101074127, "body": "The <a href=\"https://github.com/cryptonotefoundation/cryptonote/blob/master/CMakeLists.txt#L86-L95\" rel=\"nofollow noreferrer\">build script</a> contains instructions to make sure you use the &quot;gold&quot; linker instead of the default one. Did you run the <code>update-alternatives ...</code> command listed there? Alternatively, remove line 94 (the one with -flto) and recompile."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1564573269, "post_id": 57289217, "comment_id": 101074359, "body": "The issues you linked to have different causes (<code>-Werror</code> finding warnings the original authors did not fix yet)"}, {"owner": {"reputation": 93, "user_id": 9951349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cfe97c83d388470c24d284e3d4ce79?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie259", "link": "https://stackoverflow.com/users/9951349/sophie259"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1564579060, "post_id": 57289217, "comment_id": 101077710, "body": "@Botje I tried doing what you stated. Unfortunately it won&#39;t work."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1564582314, "post_id": 57289217, "comment_id": 101079911, "body": "Same error? Nuke the <code>build&#47;release</code> directory and try again."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1564582666, "post_id": 57289217, "comment_id": 101080142, "body": "Apparently there&#39;s an <a href=\"https://github.com/cryptonotefoundation/cryptonote/pull/17\" rel=\"nofollow noreferrer\">unmerged pull request</a> that seems to &quot;fix it&quot; by changing the build order. What a sorry excuse for a codebase."}, {"owner": {"reputation": 93, "user_id": 9951349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cfe97c83d388470c24d284e3d4ce79?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie259", "link": "https://stackoverflow.com/users/9951349/sophie259"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1564585427, "post_id": 57289217, "comment_id": 101081978, "body": "I can confirm that fixing it using the solution provided has worked. For future users: you will get lots of warnings but you can temporarily ignore them and fix them later. Thanks @Botje our hero!"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 12763630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cca04c7a32bd1b8918afae302b6972b?s=128&d=identicon&r=PG&f=1", "display_name": "developers prb", "link": "https://stackoverflow.com/users/12763630/developers-prb"}, "is_accepted": true, "score": 1, "last_activity_date": 1581364942, "creation_date": 1581364942, "answer_id": 60157571, "question_id": 57289217, "link": "https://stackoverflow.com/questions/57289217/cryptonote-make-compile-issues-ubuntu/60157571#60157571", "title": "CryptoNote Make Compile Issues Ubuntu", "body": "<p>let me tell you that I had that same error, but looking for a solution and investigating, I could finally find how to solve this problem.</p>\n\n<p>you must delete </p>\n\n<p><code>set (RELEASE_FLAGS \"$ {RELEASE_FLAGS} -flto\")</code></p>\n\n<p>or just put a # before it, this way</p>\n\n<p><code>#set (RELEASE_FLAGS \"$ {RELEASE_FLAGS} -flto\")</code> </p>\n\n<p>this can be found in CMakeList.txt</p>\n\n<p>you must run it as follows</p>\n\n<pre><code> sudo make -j\n</code></pre>\n\n<p>I suggest you place the number of threads because if you do it that way and you are using a virtual machine you can leave it paralyzed or slow down, I think it does not matter the speed at which it is being compiled, but if the work is done correctly.\nI hope I can help you.</p>\n"}], "owner": {"reputation": 93, "user_id": 9951349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2cfe97c83d388470c24d284e3d4ce79?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie259", "link": "https://stackoverflow.com/users/9951349/sophie259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 60157571, "answer_count": 1, "score": 0, "last_activity_date": 1581364942, "creation_date": 1564570770, "question_id": 57289217, "link": "https://stackoverflow.com/questions/57289217/cryptonote-make-compile-issues-ubuntu", "title": "CryptoNote Make Compile Issues Ubuntu", "body": "<p>I am following the <a href=\"https://cryptonotestarter.org/inner.html\" rel=\"nofollow noreferrer\">cryptonote starter</a> about creating a cryptocurrency on its own blockchain. So far so good except that it doesn't compile. I tried both on Ubuntu 18.04 and 16.04 and I am getting the same error. After creating the code as specified in the guidance, I leave the genesis address and click on compile. </p>\n\n<p>When I run make I am getting this error:</p>\n\n<pre><code>    [ 53%] Building CXX object src/CMakeFiles/ConnectivityTool.dir/ConnectivityTool/ConnectivityTool.cpp.o\n[ 53%] Linking CXX executable connectivity_tool\n/usr/bin/ld: StreamTools.cpp.o: plugin needed to handle lto object\n/tmp/ccn2FxVh.ltrans2.ltrans.o: In function `std::_Function_handler&lt;void (), handle_request_stat(boost::program_options::variables_map&amp;, unsigned long long)::{lambda()#4}&gt;::_M_invoke(std::_Any_data const&amp;) [clone .lto_priv.448]':\n&lt;artificial&gt;:(.text+0x161b): undefined reference to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)'\n&lt;artificial&gt;:(.text+0x164b): undefined reference to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)'\n&lt;artificial&gt;:(.text+0x1798): undefined reference to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)'\n&lt;artificial&gt;:(.text+0x17d2): undefined reference to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)'\n/tmp/ccn2FxVh.ltrans2.ltrans.o: In function `std::_Function_handler&lt;void (), handle_request_stat(boost::program_options::variables_map&amp;, unsigned long long)::{lambda()#3}&gt;::_M_invoke(std::_Any_data const&amp;) [clone .lto_priv.450]':\n&lt;artificial&gt;:(.text+0x1b35): undefined reference to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)'\n/tmp/ccn2FxVh.ltrans2.ltrans.o:&lt;artificial&gt;:(.text+0x1b5b): more undefined references to `Common::write(Common::IOutputStream&amp;, void const*, unsigned int)' follow\n/tmp/ccn2FxVh.ltrans27.ltrans.o: In function `(anonymous namespace)::loadSection(Common::IInputStream&amp;) [clone .lto_priv.376]':\n&lt;artificial&gt;:(.text+0x391): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0x3db): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0x42d): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0x485): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0x4ae): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0x4ed): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0x52b): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n/tmp/ccn2FxVh.ltrans27.ltrans.o: In function `(anonymous namespace)::loadValue(Common::IInputStream&amp;, unsigned char)':\n&lt;artificial&gt;:(.text+0x8f4): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0x961): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0x9c1): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0x9f1): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0xa11): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n&lt;artificial&gt;:(.text+0xa31): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n/tmp/ccn2FxVh.ltrans27.ltrans.o:&lt;artificial&gt;:(.text+0xa51): more undefined references to `Common::read(Common::IInputStream&amp;, void*, unsigned int)' follow\n/tmp/ccn2FxVh.ltrans27.ltrans.o: In function `(anonymous namespace)::loadValue(Common::IInputStream&amp;, unsigned char)':\n&lt;artificial&gt;:(.text+0xb5c): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0xb98): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0xc29): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0xcb9): undefined reference to `Common::read(Common::IInputStream&amp;, unsigned char&amp;)'\n&lt;artificial&gt;:(.text+0xcf9): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\n/tmp/ccn2FxVh.ltrans29.ltrans.o: In function `CryptoNote::KVBinaryInputStreamSerializer::KVBinaryInputStreamSerializer(Common::IInputStream&amp;)':\n&lt;artificial&gt;:(.text+0x1087): undefined reference to `Common::read(Common::IInputStream&amp;, void*, unsigned int)'\ncollect2: error: ld returned 1 exit status\nsrc/CMakeFiles/ConnectivityTool.dir/build.make:113: recipe for target 'src/connectivity_tool' failed\nmake[3]: *** [src/connectivity_tool] Error 1\nmake[3]: Leaving directory '/home/user/Desktop/mycoin/build/release'\nCMakeFiles/Makefile2:415: recipe for target 'src/CMakeFiles/ConnectivityTool.dir/all' failed\nmake[2]: *** [src/CMakeFiles/ConnectivityTool.dir/all] Error 2\nmake[2]: Leaving directory '/home/user/Desktop/mycoin/build/release'\nMakefile:94: recipe for target 'all' failed\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory '/home/user/Desktop/mycoin/build/release'\nMakefile:20: recipe for target 'build-release' failed\nmake: *** [build-release] Error 2\n</code></pre>\n\n<p>Apparently this is a well known error that other people have, yet nobody posted a solution.\nExample of people with the error in compiling: \n<a href=\"https://github.com/cryptonotefoundation/cryptonote/issues/304\" rel=\"nofollow noreferrer\">Example 1</a>\n<a href=\"https://github.com/cryptonotefoundation/cryptonote/issues/314\" rel=\"nofollow noreferrer\">Example 2</a></p>\n\n<p>I found an alternative solution that I'd rather not use. A user suggested:</p>\n\n<blockquote>\n  <p>Here is one that you can setup without errors on latest Ubuntu <a href=\"https://github.com/Matthuffy/eightcoin\" rel=\"nofollow noreferrer\">https://github.com/Matthuffy/eightcoin</a>   </p>\n</blockquote>\n\n<p>However that version is different from the original (it has more coding parameters where you have to specify the minimum coin value, etc.). I'd rather stick to the official guidance in the cryptonote starter. This one compiled successfully </p>\n\n<p>Keep in mind that I installed the following dependencies yet it doesn't work:</p>\n\n<blockquote>\n  <p>sudo apt install build-essential libqt4-dev qt5-qmake cmake qttools5-dev libqt5webkit5-dev qttools5-dev-tools qt5-default python-sphinx texlive-latex-base inotify-tools openssl libssl-dev libdb++-dev libminiupnpc-dev git sqlite3 libsqlite3-dev g++ libpng-dev gedit python gcc make libbz2-dev libdb-dev libssl-dev libreadline-dev autoconf libtool libleveldb-dev libblkid-dev e2fslibs-dev libboost-all-dev libaudit-dev nano qtbase5-dev qt4-dev-tools libqtcore4 libqtgui4 automake -y </p>\n</blockquote>\n\n<p>I need a solution to be able to compile from <a href=\"https://cryptonotestarter.org/inner.html\" rel=\"nofollow noreferrer\">https://cryptonotestarter.org/inner.html</a> </p>\n\n<p>Other information you may want to know from my actual os (ubuntu 16.04):</p>\n\n<pre><code>make -v\nGNU Make 4.1\n\ndpkg -s libboost-dev | grep 'Version'\nVersion: 1.58.0.1ubuntu1\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtableview"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 9630308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b740783d6db19cece7ce4aa3fe5e83f?s=128&d=identicon&r=PG&f=1", "display_name": "twohobos", "link": "https://stackoverflow.com/users/9630308/twohobos"}, "is_accepted": true, "score": 1, "last_activity_date": 1564587143, "creation_date": 1564587143, "answer_id": 57294348, "question_id": 57289010, "link": "https://stackoverflow.com/questions/57289010/losing-background-colour-when-focus-is-lost-on-a-qtableview/57294348#57294348", "title": "Losing background colour when focus is lost on a QTableView", "body": "<p>Using frozenTableWidget for testing is perhaps a bit confusing as it's a combination of 2 QTableWidgets. </p>\n\n<pre><code>   // QPalette p = frozenTableView-&gt;palette();\n   QPalette p = palette();\n   p.setColor(QPalette::Inactive, QPalette::Highlight, p.color(QPalette::Active, QPalette::Base));\n   setPalette(p);\n</code></pre>\n\n<p>This removes the highlighted colour when focus is lost, if that's what you're after?</p>\n"}], "owner": {"reputation": 181, "user_id": 829252, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d4fe81c2ae4748a809342cbe620c7ea6?s=128&d=identicon&r=PG", "display_name": "Peter S", "link": "https://stackoverflow.com/users/829252/peter-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 57294348, "answer_count": 1, "score": 0, "last_activity_date": 1564587143, "creation_date": 1564570051, "last_edit_date": 1564570184, "question_id": 57289010, "link": "https://stackoverflow.com/questions/57289010/losing-background-colour-when-focus-is-lost-on-a-qtableview", "title": "Losing background colour when focus is lost on a QTableView", "body": "<p>I have a QTableView in an existing product.  I have changed it to use a grey background for rows that can't be edited.  But, when the table loses focus, QT will change the background colour to grey.  I've found quite a few things on the internet to try but had no luck.</p>\n\n<p>The closest I've got to anything is by setting the palette on the editor created in createEditor.  I've had no luck when setting the palette of the QTableView itself.  When the table loses focus, I see the test colour I've used (yellow) flash briefly before going grey.</p>\n\n<p>I've been playing with the frozencolumn example provided with QT Creator but had less luck there as there's no editor.</p>\n\n<pre><code>  QPalette p = frozenTableView-&gt;palette();\n  p.setColor(QPalette::Active, QPalette::Highlight, Qt::darkGreen);\n  p.setColor(QPalette::Disabled, QPalette::Highlight, Qt::green);\n  p.setColor(QPalette::Inactive, QPalette::Highlight, Qt::yellow);\n  p.setColor(QPalette::Inactive, QPalette::HighlightedText, Qt::darkYellow);\n  frozenTableView-&gt;setPalette(p);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>frozenTableView-&gt;setStyleSheet(\"QTableView { border: none;\"\n                                     \"background-color: #8EDE21;\"\n                                     \"selection-background-color: #999}\"\n      \"QTableView:!active {\"\n                                     \"selection-background-color: yellow;\"\n                                         \"selection-color: yellow\"\n                                     );\n</code></pre>\n\n<p>Anything else I could try?  It's like QT is calling setPalette() when the focus is lost and undoing anything I manage to achieve.</p>\n"}, {"tags": ["c++", "templates", "linker", "template-specialization"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1564569799, "post_id": 57288906, "comment_id": 101072390, "body": "Note that you have two overloaded template functions <code>f</code> with second one having two template parameters. <code>f(x);</code> will invoke <code>void f(const T&amp; data);</code> which is indeed not defined anywhere."}, {"owner": {"reputation": 1082, "user_id": 2151275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2d9bf4f71e74bb9681f47ba862067c48?s=128&d=identicon&r=PG", "display_name": "heLomaN", "link": "https://stackoverflow.com/users/2151275/heloman"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1564570073, "post_id": 57288906, "comment_id": 101072554, "body": "I want the second one only accept containers. How should I fix it?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1564570167, "post_id": 57288906, "comment_id": 101072613, "body": "Just remove the one taking <code>int</code>, and consider just writing your code without the complicated <code>std::decay</code> part, it probably won&#39;t be necessary."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1564570172, "post_id": 57288906, "comment_id": 101072617, "body": "You should utilize SFINAE-based solution."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 3, "last_activity_date": 1564574267, "last_edit_date": 1564574267, "creation_date": 1564571429, "answer_id": 57289415, "question_id": 57288906, "link": "https://stackoverflow.com/questions/57288906/why-internal-linkage-error-when-template-defined-in-anonymous-namespace/57289415#57289415", "title": "Why internal linkage error when template defined in anonymous namespace?", "body": "<p>You have two overloaded template functions <code>f</code> with the second one having two template parameters. <code>f(x);</code> will invoke <code>void f(const T&amp; data);</code> which is indeed not defined anywhere.</p>\n\n<p>I'll now sketch out a brief solution.</p>\n\n<p>The most practical way is to use a helper class that's partially specialized, since template functions cannot be partially specialized.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nnamespace {\n\n    template&lt;typename T, typename=void&gt;\n    struct ff;\n\n    template&lt;&gt;\n    struct ff&lt;int, void&gt; {\n\n        static constexpr bool specialized=true;\n        static inline void func(const int &amp;data)\n        {\n            std::cout &lt;&lt; \"int\" &lt;&lt; std::endl;\n        }\n    };\n\n    template&lt;typename T&gt;\n    struct ff&lt;T,\n         std::void_t&lt;decltype(*std::begin(std::declval&lt;T&gt;()))&gt;&gt; {\n\n        static constexpr bool specialized=true;\n        static inline void func(const T &amp;data)\n        {\n            std::cout &lt;&lt; \"vector\" &lt;&lt; std::endl;\n        }\n    };\n\n    template &lt;class T, typename=decltype(ff&lt;T&gt;::specialized)&gt;\n    inline void f(const T&amp; data)\n    {\n        ff&lt;T&gt;::func(data);\n    }\n}\n\nint main()\n{\n    std::vector&lt;float&gt; x;\n    int y;\n    f(x); // Result: vector\n    f(y); // Result: int\n\n    // Error:\n    //\n    // char *z;\n    // f(z);\n}\n</code></pre>\n\n<p>You still need a 2nd template parameter on the template function, for SFINAE purposes, and most compilers should optimize away the extra function call, on a moderate optimization level.</p>\n"}], "owner": {"reputation": 1082, "user_id": 2151275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2d9bf4f71e74bb9681f47ba862067c48?s=128&d=identicon&r=PG", "display_name": "heLomaN", "link": "https://stackoverflow.com/users/2151275/heloman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57289415, "answer_count": 1, "score": 2, "last_activity_date": 1564574267, "creation_date": 1564569706, "last_edit_date": 1564570330, "question_id": 57288906, "link": "https://stackoverflow.com/questions/57288906/why-internal-linkage-error-when-template-defined-in-anonymous-namespace", "title": "Why internal linkage error when template defined in anonymous namespace?", "body": "<p>Declare template in anonymous namespace lead to error <code>error: function '(anonymous namespace)::f&lt;std::__1::vector&lt;float, std::__1::allocator&lt;float&gt; &gt; &gt;' has internal linkage but is not defined</code>.</p>\n\n<p>The codes are belowings:</p>\n\n<pre><code>    #include &lt;type_traits&gt;\n    #include &lt;vector&gt;\n\n    namespace {\n\n    template &lt;class T&gt;\n    void f(const T&amp; data);\n\n    template &lt;&gt;\n    void f&lt;int&gt;(const int&amp; data){}\n\n    template &lt;typename Iterable, typename std::decay&lt;decltype(*std::begin(std::declval&lt;Iterable&gt;()))&gt;::type&gt;\n    void f(const Iterable&amp; data) {\n        ;\n    }\n\n    }\n\n    void g() {\n        std::vector&lt;float&gt; x;\n        f(x);\n    }\n</code></pre>\n\n<p>I searched and found <a href=\"https://stackoverflow.com/questions/46229122/is-it-proper-to-have-a-template-function-inside-an-anonymous-namespace-of-a-cpp\">Possibly Same</a>, but it won't explain.</p>\n\n<p>Update:<br>\nIf I remove the anonymous namespace, the error turns to be <code>Undefined symbols for void f&lt;std::__1::vector&lt;float, std::__1::allocator&lt;float&gt; &gt; &gt;(std::__1::vector&lt;float, std::__1::allocator&lt;float&gt; &gt; const&amp;</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1564570008, "post_id": 57288858, "comment_id": 101072506, "body": "Pass a lambda to <code>sort</code> to sort it on your own conditions."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2202554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45261f7abdf6ee0f48d38c45ccb1a6f?s=128&d=identicon&r=PG", "display_name": "Maros Macko", "link": "https://stackoverflow.com/users/2202554/maros-macko"}, "edited": false, "score": 0, "creation_date": 1564573272, "post_id": 57289248, "comment_id": 101074362, "body": "I am getting some &quot;no matching function for call&quot; errors, not sure what am I missing. Also, doesn&#39;t vector.erase remove just one (or range of) members in a vector? I have a problem where I have multiple of duplicated WiFi networks (office area)"}, {"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "reply_to_user": {"reputation": 57, "user_id": 2202554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45261f7abdf6ee0f48d38c45ccb1a6f?s=128&d=identicon&r=PG", "display_name": "Maros Macko", "link": "https://stackoverflow.com/users/2202554/maros-macko"}, "edited": false, "score": 1, "creation_date": 1564573291, "post_id": 57289248, "comment_id": 101074375, "body": "@MarosMacko The call to <code>std::unique</code> does not erase elements. It puts all duplicate elements at the back of the vector and returns an iterator to where these duplicate elements begin. So this iterator is then commonly used in a call to <code>std::vector::erase</code> to delete all duplicate entries from the vector. See: <a href=\"https://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/unique</a> for more info."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 57, "user_id": 2202554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45261f7abdf6ee0f48d38c45ccb1a6f?s=128&d=identicon&r=PG", "display_name": "Maros Macko", "link": "https://stackoverflow.com/users/2202554/maros-macko"}, "edited": false, "score": 1, "creation_date": 1564573808, "post_id": 57289248, "comment_id": 101074669, "body": "@MarosMacko: typo fixed (extra <code>)</code>) and link added."}, {"owner": {"reputation": 57, "user_id": 2202554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45261f7abdf6ee0f48d38c45ccb1a6f?s=128&d=identicon&r=PG", "display_name": "Maros Macko", "link": "https://stackoverflow.com/users/2202554/maros-macko"}, "edited": false, "score": 0, "creation_date": 1564574427, "post_id": 57289248, "comment_id": 101074992, "body": "@Jarod42 I spotted and fixed the <code>)</code> typo, but somehow it did not like it. Anyway, don&#39;t know how, it works now :) Thanks"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1564573761, "last_edit_date": 1564573761, "creation_date": 1564570894, "answer_id": 57289248, "question_id": 57288858, "link": "https://stackoverflow.com/questions/57288858/efficient-way-to-remove-struct-based-on-one-member-but-chose-which-one-to-keep/57289248#57289248", "title": "Efficient way to remove struct based on one member, but chose which one to keep by other member", "body": "<p>With custom functor, you might do:</p>\n\n<pre><code>std::vector&lt;WiFiParam&gt; params /*= */;\n\nauto less_by_name_signal = [](const WiFiParam&amp; lhs, const WiFiParam&amp; rhs){\n    return std::tie(lhs.SSID, rhs.RSSI) &lt; std::tie(rhs.SSID, lhs.RSSI);\n};\nstd::sort(params.begin(), params.end(), less_by_name_signal);\nauto equal_by_name = [](const WiFiParam&amp; lhs, const WiFiParam&amp; rhs){\n    return lhs.SSID == rhs.SSID;\n};\nparams.erase(std::unique(params.begin(), params.end(), equal_by_name), params.end());\n</code></pre>\n\n<p><a href=\"https://ideone.com/E8SS13\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 57, "user_id": 2202554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45261f7abdf6ee0f48d38c45ccb1a6f?s=128&d=identicon&r=PG", "display_name": "Maros Macko", "link": "https://stackoverflow.com/users/2202554/maros-macko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57289248, "answer_count": 1, "score": 1, "last_activity_date": 1564573761, "creation_date": 1564569523, "question_id": 57288858, "link": "https://stackoverflow.com/questions/57288858/efficient-way-to-remove-struct-based-on-one-member-but-chose-which-one-to-keep", "title": "Efficient way to remove struct based on one member, but chose which one to keep by other member", "body": "<p>I have a vecor <code>list</code> of found WiFi networks. Problem is, it detects all transmitters, even if they have the same name (repeaters). I want to delete the duplicates, but keep the one with highest quality (RSSI).</p>\n\n<pre><code>Example:\n{HomeWiFi, -60}\n{HomeWiFi, -55}\n{HomeWifi, -80}    //Worse signal, duplicate name = repeater further away\n{AnotherWifi, -70}\n\nExpected output:\n{HomeWiFi, -55}\n{AnotherWifi, -70}\n</code></pre>\n\n<p>I was thinking of sorting them by name and then deleting consecutive duplicates with <code>std::unique</code>, but I don't know how to specfy the \"secondary\" sorting by quality.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct WiFiParam\n{\n    String SSID;\n    int32_t RSSI; \n    .....\n};\n\nstd::vector&lt;WiFiParam&gt; list;\n\n</code></pre>\n"}, {"tags": ["c++", "gcc", "linux-kernel", "llvm-clang", "llvm-gcc"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10929366, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saurabh Sakhare", "link": "https://stackoverflow.com/users/10929366/saurabh-sakhare"}, "edited": false, "score": 0, "creation_date": 1564642128, "post_id": 57296226, "comment_id": 101099422, "body": "I think it is target specific I tried for aarch64 error is same                                   <code>.&#47;clang -S -o - foo.c --target=aarch64-linux-android foo.c:11:9: error: cannot compile this __builtin_init_dwarf_reg_size_table yet         __builtin_init_dwarf_reg_size_table(x);         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 1 error generated.</code>                                                                                                                                   and did for arm32 working <code>.&#47;clang -S -o - foo.c --target=arm-linux-androideabi androideabi</code>"}], "tags": [], "owner": {"reputation": 1632, "user_id": 576252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e102b1b4ec887ac1182e9bdc337608a9?s=128&d=identicon&r=PG", "display_name": "echristo", "link": "https://stackoverflow.com/users/576252/echristo"}, "is_accepted": true, "score": 0, "last_activity_date": 1564594474, "creation_date": 1564594474, "answer_id": 57296226, "question_id": 57288842, "link": "https://stackoverflow.com/questions/57288842/clang-error-cannot-compile-builtin-function/57296226#57296226", "title": "Clang error: Cannot compile builtin function", "body": "<p>That's a really weird error message, can you put the full one here? Also, I'm surprised that you want to compile libgcc with clang, I don't think anyone has really tried before. Some better repro instructions would help though as this seems to work:</p>\n\n<p>echristo@jhereg ~/tmp> cat foo.c</p>\n\n<pre><code>char x[16]; void a() { __builtin_init_dwarf_reg_size_table(x); }\n</code></pre>\n\n<p>echristo@jhereg ~/tmp> clang -S -o - foo.c --target=x86_64-linux-gnu</p>\n\n<pre><code>    .text\n    .file   \"foo.c\"\n    .globl  a                       # -- Begin function a\n    .p2align    4, 0x90\n    .type   a,@function\na:                                      # @a\n    .cfi_startproc\n# %bb.0:\n    pushq   %rbp\n    .cfi_def_cfa_offset 16\n    .cfi_offset %rbp, -16\n    movq    %rsp, %rbp\n    .cfi_def_cfa_register %rbp\n    movb    $8, x\n    movb    $8, x+1\n    movb    $8, x+2\n    movb    $8, x+3\n    movb    $8, x+4\n    movb    $8, x+5\n    movb    $8, x+6\n    movb    $8, x+7\n    movb    $8, x+8\n    movb    $8, x+9\n    movb    $8, x+10\n    movb    $8, x+11\n    movb    $8, x+12\n    movb    $8, x+13\n    movb    $8, x+14\n    movb    $8, x+15\n    movb    $8, x+16\n    popq    %rbp\n    .cfi_def_cfa %rsp, 8\n    retq\n.Lfunc_end0:\n    .size   a, .Lfunc_end0-a\n    .cfi_endproc\n                                        # -- End function\n    .type   x,@object               # @x\n    .comm   x,16,16\n\n    .ident  \"clang version 9.0.0 (https://github.com/llvm/llvm-project.git b669fea42f5c2a5b203c3f0da2a6b04b90bfd5a7)\"\n    .section    \".note.GNU-stack\",\"\",@progbits\n    .addrsig\n    .addrsig_sym x\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10929366, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saurabh Sakhare", "link": "https://stackoverflow.com/users/10929366/saurabh-sakhare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 57296226, "answer_count": 1, "score": 0, "last_activity_date": 1564594474, "creation_date": 1564569467, "last_edit_date": 1564570865, "question_id": 57288842, "link": "https://stackoverflow.com/questions/57288842/clang-error-cannot-compile-builtin-function", "title": "Clang error: Cannot compile builtin function", "body": "<p>I'm compiling a code which has GCC library extra separately added. While  compiling it with clang error</p>\n\n<pre><code>cannot compile\n</code></pre>\n\n<p>is showing</p>\n\n<p>I've tried added flags. <code>-std=89gnu</code> does not work with a clang. After some inspection found the same function in compiler file.</p>\n\n<pre><code>BUILTIN(__builtin_init_dwarf_reg_size_table, \"vv*\", \"n\")\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>gcc/unwind-dw2.c:1336:3: error: cannot compile this __builtin_init_dwarf_reg_size_table\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "vector", "constructor"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1564569550, "post_id": 57288719, "comment_id": 101072256, "body": "Just some minor issues in advance: <code>assert(numRows &gt; 0);</code> \u2013 you don&#39;t need that, if you accept <code>unsigned int</code> as parameter. Maybe, though (no matter if signed or unsigned) there&#39;s some reasonable upper limit? <code>N</code> is redundant, you get the same via <code>mData.size()</code>.  <code>mData = otherMatrix.mData;</code> already copies the entire vector, if you do it in a loop, you do N times exactly the same task again and again. Actually, as you have no user defined memory management, the default copy constructor is fine (<code>Matrix(Matrix const&amp; otherMatrix) = default;</code> \u2013 yours, in contrast, isn&#39;t...)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1564569927, "post_id": 57288719, "comment_id": 101072468, "body": "Get used to using the constructor&#39;s initialiser list (not to be confused with <code>std::initializer_list</code>!): <code>Matrix(unsigned int numRows, unsigned int numCols) : m(numRows), mNumCols(numCols), mData(numRows*numCols, 0.0) { }</code> \u2013 you avoid default initialisation + assignment in favour of direct initialisation by value; some types (references and non-default-constructable ones) <i>only</i> can be initialised that way. Additionally: <code>std::vector</code> has a constructor that already does what you do in the loop (just more efficiently, especially, as you do not <code>reserve</code> in advance), I used it already above..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1564570460, "post_id": 57288719, "comment_id": 101072764, "body": "Really, really bad: <code>Matrix mat(2, 2); mat.~Matrix();</code> will result in double deletion of your object, as destructor is called implicitly (<i>again</i> in this case) as soon as <code>mat</code> runs out of scope. There&#39;s almost never need for calling a destructor explicitly (exception is if you created your objects with placement-new)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1564570540, "post_id": 57288719, "comment_id": 101072801, "body": "It seems like you could use <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">a few good books to read</a>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1564570611, "post_id": 57288719, "comment_id": 101072841, "body": "You don&#39;t need to <code>clear</code> a <code>std::vector</code> in your custom destructor, <code>std::vector</code> will clean up everything properly in its own destructor (so at best you achieve nothing, at worst produce extra work)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1564571040, "post_id": 57288719, "comment_id": 101073083, "body": "Correction of one of my previous comments (haven&#39;t paid attention myself!): If using constructors initialiser list, you need to initialise the members in the order they are declared inside the class (which I failed to comply with), needs to be: <code>Matrix(...) : mData(...), mNumRows(...), mNumCols(...) { }</code> \u2013 sorry for confusion."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1564570079, "post_id": 57288804, "comment_id": 101072559, "body": "@Aconcagua Oops! :)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1564570125, "post_id": 57288804, "comment_id": 101072578, "body": "That error was in question already, failed to edit my comment appropriately in time..."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1564570165, "post_id": 57288804, "comment_id": 101072609, "body": "@Aconcagua Copy-pasting is <i>one</i> root of all evil. :)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1564570295, "post_id": 57288804, "comment_id": 101072673, "body": "But please add a line of comment that you fixed that as well, as it was already an error in the question."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1564571123, "last_edit_date": 1564571123, "creation_date": 1564569347, "answer_id": 57288804, "question_id": 57288719, "link": "https://stackoverflow.com/questions/57288719/private-members-of-class-changes-during-instantiation-of-my-class-even-though-th/57288804#57288804", "title": "Private members of class changes during instantiation of my class even though they shouldn&#39;t", "body": "<p>The problem is because of these three lines in the constructor:</p>\n\n<pre><code>int mNumRows = numRows;\nint mNumCols = numCols;  // Corrected from question which had assignment from numRows\nint N = mNumRows * mNumCols;\n</code></pre>\n\n<p>They define three <em>new</em> and local variables, which have no relation to the member variables of the same name. All changes to these local variables are lost when the constructor function ends.</p>\n\n<p>One solution is to use plain assignment for the member variables:</p>\n\n<pre><code>mNumRows = numRows;\nmNumCols = numCols;\nN = mNumRows * mNumCols;\n</code></pre>\n\n<p>But I rather recommend you learn about <em>constructor initializer lists</em> where you can directly initialize member variables:</p>\n\n<pre><code>Matrix(int numRows, int numCols)\n    : mNumRows(numRows), mNumCols(numCols), N(mNumRows * mNumCols)\n{\n    // The rest of the constructor...\n}\n</code></pre>\n\n<p>You have the same problem in the copy-constructor where you define a new local variable <code>mData</code> which shadows the member variable of the same name.</p>\n\n<hr>\n\n<p>With a little knowledge of the <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code> constructors</a> you don't need anything in the constructor function at all, it can all be initialized using the constructor initializer list:</p>\n\n<pre><code>Matrix(int numRows, int numCols)\n    : mData(numRows * numCols), mNumRows(numRows), mNumCols(numCols)\n{\n    // Totally empty!\n}\n</code></pre>\n\n<p>Do note that I don't initialize <code>N</code>. That's because it's not needed, you can get the value of <code>N</code> from the vector through its <code>size</code> function.</p>\n\n<p>Also note that I don't specify a default value for the contents of the vector. That's because the values will be default-constructed. And for simple types like <code>int</code> or <code>float</code> that means the values will be zero.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1564668434, "last_edit_date": 1564668434, "creation_date": 1564569969, "answer_id": 57288986, "question_id": 57288719, "link": "https://stackoverflow.com/questions/57288719/private-members-of-class-changes-during-instantiation-of-my-class-even-though-th/57288986#57288986", "title": "Private members of class changes during instantiation of my class even though they shouldn&#39;t", "body": "<p>The class definition entirely does not make sense.</p>\n\n<p>For example consider the following copy constructor.</p>\n\n<pre><code>   Matrix(const Matrix&amp; otherMatrix)\n   {\n    mNumRows = otherMatrix.mNumRows;\n    mNumCols = otherMatrix.mNumCols;\n    std::vector&lt;T&gt; mData;\n    for (int i = 0; i &lt; otherMatrix.N; i++)\n    {\n    mData = otherMatrix.mData;\n    }\n   }\n</code></pre>\n\n<p>There is declared a local cector</p>\n\n<pre><code>std::vector&lt;T&gt; mData;\n</code></pre>\n\n<p>that is named as the corresponding data member of the class.</p>\n\n<p>Then in the loop</p>\n\n<pre><code>for (int i = 0; i &lt; otherMatrix.N; i++)\n{\nmData = otherMatrix.mData;\n}\n</code></pre>\n\n<p>the local vector N times is assigned by the vector otherMatrix.mData. </p>\n\n<p>In this constructor</p>\n\n<pre><code>   Matrix(int numRows, int numCols)\n   {\n    assert(numRows &gt; 0);\n    assert(numCols &gt; 0);\n    int mNumRows = numRows;\n    int mNumCols = numRows;\n    int N = mNumRows * mNumCols;\n    for (int i = 0; i &lt; N; i++)\n    {\n    mData.push_back(0.0);\n    }\n   }\n</code></pre>\n\n<p>there are also used local variables instead of the corresponding data members of the class</p>\n\n<pre><code>int mNumRows = numRows;\nint mNumCols = numRows;\n</code></pre>\n\n<p>Moreover there is a typo</p>\n\n<pre><code>int mNumCols = numRows;\n               ^^^^^^^\n</code></pre>\n\n<p>This constructor could look for example like</p>\n\n<pre><code>Matrix(int numRows, int numCols) \n   : mData( numRows * numCols ), mNumRows( numRows ), mNumCols( numCols ), N( numRows * numCols )\n{\n    assert(numRows &gt; 0);\n    assert(numCols &gt; 0);\n}\n</code></pre>\n\n<p>Also it is a bad idea to call explicitly the destructor of a variable with automatic storage duration</p>\n\n<pre><code>mat.~Matrix();\n</code></pre>\n\n<p>This can result in undefined behavior.</p>\n\n<p>Here is a demonstrative program that shows how your code can be rewritten</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T = int&gt; \nclass Matrix\n{\nprivate:\n    size_t mNumRows;\n    size_t mNumCols; // dimensions\n    size_t N;\n    std::vector&lt;T&gt; mData; // entries of matrix\n\npublic:\n    // copy constructor\n    Matrix( const Matrix &amp;otherMatrix ) \n        : mNumRows( otherMatrix.mNumRows ),\n          mNumCols( otherMatrix.mNumCols ),\n          N( otherMatrix.mNumRows * otherMatrix.mNumCols ),\n          mData( otherMatrix.mData )\n    {\n    }\n\n   // Storing matrix as a flattened matrix\n   // And using std::vector\n    Matrix( size_t numRows, size_t numCols ) \n        : mNumRows( numRows ),\n          mNumCols( numCols ),\n          N( numRows * numCols ),\n          mData( N )\n    {\n    }\n\n    ~Matrix() = default;\n\n    size_t GetNumberOfRows() const\n    {\n        return mNumRows;\n    }\n\n    size_t GetNumberOfColumns() const\n    {\n        return mNumCols;\n    }\n};\n\nint main()\n{\n    Matrix&lt;&gt; mat(2, 2);\n\n    std::cout &lt;&lt; mat.GetNumberOfRows() &lt;&lt; \", \" &lt;&lt; mat.GetNumberOfColumns() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>2, 2\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9533162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215185802819673/picture?type=large", "display_name": "Kasper Fischer-Rasmussen", "link": "https://stackoverflow.com/users/9533162/kasper-fischer-rasmussen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57288804, "answer_count": 2, "score": 0, "last_activity_date": 1564668434, "creation_date": 1564569091, "last_edit_date": 1564592292, "question_id": 57288719, "link": "https://stackoverflow.com/questions/57288719/private-members-of-class-changes-during-instantiation-of-my-class-even-though-th", "title": "Private members of class changes during instantiation of my class even though they shouldn&#39;t", "body": "<p>My question is: Why do the my functions <code>GetNumberOfRows()</code> and <code>GetNumberOfColumns()</code> not return the values I specified in my constructor?</p>\n\n<p>I have a class template that allocates memory for Matrix stored as a <code>std::vector</code>. As private members of this class I have the number of rows and columns (<code>mNumRows</code>, <code>mNumCols</code>). I have a constructor that takes number of rows and columns as arguments and creates a <code>std::vector</code> to store the values in. I have created assertions to make sure that when I index, the matrix, the index must not exceed the number of rows or columns. When overloading the *-operator I assert that matrix columns and vector size are identical (when multiplying my matrix class with a vector class). My program compiles, but during execution of my program I kept getting assertion errors, and I therefore checked the values of <code>mNumRows</code> and <code>mNumCols</code>, which proved to be 31, and 0, even though I specified them to be 2 and 2 in the constructor.</p>\n\n<p>My program gives the correct results when specifying <code>mNumRows</code> and <code>mNumCols</code> to be a number inside the class, but I want to be able to specify it in my main file. I have provided my header file, where my class is specified.</p>\n\n<pre><code>template&lt;typename T&gt; class Matrix\n{\nprivate:\n   std::vector&lt;T&gt; mData; // entries of matrix\n   int mNumRows;\n   int mNumCols; // dimensions\n   int N;\n\npublic:\n    // copy constructor\n   Matrix(const Matrix&amp; otherMatrix)\n   {\n    mNumRows = otherMatrix.mNumRows;\n    mNumCols = otherMatrix.mNumCols;\n    std::vector&lt;T&gt; mData;\n    for (int i = 0; i &lt; otherMatrix.N; i++)\n    {\n    mData = otherMatrix.mData;\n    }\n   }\n\n   // Storing matrix as a flattened matrix\n   // And using std::vector\n   Matrix(int numRows, int numCols)\n   {\n    assert(numRows &gt; 0);\n    assert(numCols &gt; 0);\n    int mNumRows = numRows;\n    int mNumCols = numCols;\n    int N = mNumRows * mNumCols;\n    for (int i = 0; i &lt; N; i++)\n    {\n    mData.push_back(0.0);\n    }\n   }\n\n   ~Matrix()\n   {\n      mData.clear();\n   }\n\n   int GetNumberOfRows() const\n   {\n       return mNumRows;\n   }\n\n   int GetNumberOfColumns() const\n   {\n       return mNumCols;\n   }\n};\n</code></pre>\n\n<p>In the main file I write.</p>\n\n<pre><code>Matrix mat(2, 2);\n\nstd::cout &lt;&lt; mat.GetNumberOfRows() &lt;&lt; \", \" &lt;&lt; mat.GetNumberOfColumns() &lt;&lt; std::endl;\n\nmat.~Matrix();\n</code></pre>\n\n<p>The output is 31, 0. It should be 2, 2. Why does the rows and columns change?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 5, "creation_date": 1564569008, "post_id": 57288641, "comment_id": 101071970, "body": "Wow, this really takes me back in time. Windows 3.1 programming... Instead of <code>while(true)</code> you need a message handling loop."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1564569034, "post_id": 57288641, "comment_id": 101071990, "body": "Your code doesn&#39;t check for errors. Does <code>RegtisterClass</code> succeed? Does <code>CreateWindowEx</code> succeed? If not then you need to <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror\" rel=\"nofollow noreferrer\">figure out the error code</a>."}, {"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "edited": false, "score": 0, "creation_date": 1564569447, "post_id": 57288641, "comment_id": 101072196, "body": "Check out the basic example: <a href=\"http://www.winprog.org/tutorial/simple_window.html\" rel=\"nofollow noreferrer\">winprog.org/tutorial/simple_window.html</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1564569551, "post_id": 57288641, "comment_id": 101072257, "body": "Also check out, <a href=\"https://docs.microsoft.com/en-us/windows/win32/learnwin32/your-first-windows-program\" rel=\"nofollow noreferrer\">Your first Windows program</a>. Although you passed the windows class name as an argument to <code>CreateWindowEx</code>, you might also need to set <code>wc.lpszClassName</code>."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1564579060, "post_id": 57288641, "comment_id": 101077709, "body": "So many questions without error checking........ Do yourself a favour and learn to check for errors in Win32 code."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 11737733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPKyG.jpg?s=128&g=1", "display_name": "Jeffreys", "link": "https://stackoverflow.com/users/11737733/jeffreys"}, "edited": false, "score": 1, "creation_date": 1564625894, "post_id": 57295771, "comment_id": 101095534, "body": "besides, add the <code>UpdateWindow(hwnd);</code>, maybe <code>TranslateMessage(&amp;Msg);</code> also needed. :)"}], "tags": [], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "is_accepted": false, "score": 2, "last_activity_date": 1564606885, "last_edit_date": 1564606885, "creation_date": 1564592413, "answer_id": 57295771, "question_id": 57288641, "link": "https://stackoverflow.com/questions/57288641/the-window-i-created-in-c-is-not-displayed/57295771#57295771", "title": "The window I created in C++ is not displayed", "body": "<p>You have a typo: you are setting </p>\n\n<pre><code> wc.lpszMenuName = pClassName;\n</code></pre>\n\n<p>instead of wc.lpszClassName.</p>\n\n<p>I believe just fixing that will get the window on the screen but the executable will then hang with it on the screen because nothing is fielding messages. </p>\n\n<p>A minimal message loop instead of</p>\n\n<pre><code>while (true) ...\n</code></pre>\n\n<p>would be </p>\n\n<pre><code>MSG msg;\nwhile( GetMessage( &amp;msg, NULL, 0, 0 ) &gt; 0 )\n    DispatchMessage( &amp;msg );\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11863300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--vHJk6pXgqg/AAAAAAAAAAI/AAAAAAAAAAc/PtGPRZl1j0M/photo.jpg?sz=128", "display_name": "MMC Studios", "link": "https://stackoverflow.com/users/11863300/mmc-studios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564606885, "creation_date": 1564568805, "last_edit_date": 1564578086, "question_id": 57288641, "link": "https://stackoverflow.com/questions/57288641/the-window-i-created-in-c-is-not-displayed", "title": "The window I created in C++ is not displayed", "body": "<p>I tried to create a window in an Empty C++ Project in Visual Studio, but when I run it, it shows me no window. However, it doesn't give me any error too.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\nusing namespace std;\n\nint CALLBACK WinMain(\n    HINSTANCE hInstance,\n    HINSTANCE hPrevInstance,\n    LPSTR     lpCmdLine,\n    int       nCmdShow ) \n{\n    const auto pClassName = \"TextClass\";\n    WNDCLASSEX wc = {0};\n    wc.cbSize = sizeof(wc);\n    wc.style = CS_OWNDC;\n    wc.lpfnWndProc = DefWindowProc;\n    wc.cbClsExtra = 0;\n    wc.cbWndExtra = 0;\n    wc.hInstance = hInstance;\n    wc.hIcon = nullptr;\n    wc.hCursor = nullptr;\n    wc.hbrBackground = nullptr;\n    wc.lpszMenuName = pClassName;\n    wc.hIconSm = nullptr;\n    RegisterClassEx(&amp;wc);\n    HWND hWnd = CreateWindowEx(\n        0,\n        pClassName,\n        \"A sad Window\",\n        WS_CAPTION | WS_MINIMIZEBOX | WS_SYSMENU,\n        200, 200, 640, 480,\n        nullptr, nullptr, hInstance, nullptr);\n    ShowWindow(hWnd, SW_SHOW);\n    while (true);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1564575827, "post_id": 57288282, "comment_id": 101075749, "body": "FWIW, prefer overloads to specializations.  Function template specializations are still not functions and as such do not participate in overload resolution."}, {"owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564634830, "post_id": 57288282, "comment_id": 101097145, "body": "But then how is the overload resolution if I have functions and function templates with the same name?"}, {"owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564635519, "post_id": 57288282, "comment_id": 101097289, "body": "I have read several times that overloads are &quot;better&quot; than specializations. But why? Do you have any source which explains why it is better?"}, {"owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564636383, "post_id": 57288282, "comment_id": 101097493, "body": "Found something useful: <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">gotw.ca/publications/mill17.htm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "edited": false, "score": 0, "creation_date": 1564646127, "post_id": 57288854, "comment_id": 101101431, "body": "Is there any good reason not to make the specialized template a non-template function? In your code, is there a disadvantage if I always definie TEST_BITCOUNT?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "edited": false, "score": 0, "creation_date": 1564648031, "post_id": 57288854, "comment_id": 101102458, "body": "@Fabian Overloads behave differently to specialisations, especially when other overloads are present. It&#39;s probably better to overload than to specialise"}, {"owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "edited": false, "score": 0, "creation_date": 1564650918, "post_id": 57288854, "comment_id": 101103978, "body": "In your answer, shouldn&#39;t it be #ifndef? In test mode, I need the normal function, hence there must not be template&lt;&gt;. In normal mode, the function may be a specialized template."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 2, "last_activity_date": 1564650940, "last_edit_date": 1564650940, "creation_date": 1564569509, "answer_id": 57288854, "question_id": 57288282, "link": "https://stackoverflow.com/questions/57288282/is-it-possible-to-call-a-non-specialized-template-function-although-a-specialize/57288854#57288854", "title": "Is it possible to call a non-specialized template function although a specialized function exists?", "body": "<p>No, the specialisation <em>is</em> <code>bitCount&lt;std::uint64_t&gt;</code>. </p>\n\n<p>If you have a <code>#define</code> for your testing, you could instead overload <code>bitCount</code> during the tests</p>\n\n<pre><code>template&lt;class IntegerType&gt;\ninline IntegerType bitCount(IntegerType bitset)\n{\n  puts(\"general\");\n  return 0;\n}\n\n#ifndef(TEST_BITCOUNT)\ntemplate&lt;&gt;\n#endif\ninline std::uint64_t bitCount(std::uint64_t bitset)\n{\n  puts(\"specialized\");\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3405, "user_id": 4675398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f82f90aae5005af1ffe060462dd87482?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian", "link": "https://stackoverflow.com/users/4675398/fabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57288854, "answer_count": 1, "score": 1, "last_activity_date": 1564650940, "creation_date": 1564567640, "last_edit_date": 1564568288, "question_id": 57288282, "link": "https://stackoverflow.com/questions/57288282/is-it-possible-to-call-a-non-specialized-template-function-although-a-specialize", "title": "Is it possible to call a non-specialized template function although a specialized function exists?", "body": "<p>If I have a template function with specializations, is it possible to explicitly call the non-specialized template?</p>\n\n<pre><code>template&lt;class IntegerType&gt;\ninline IntegerType bitCount(IntegerType bitset)\n{\n  puts(\"general\");\n  return 0;\n}\n\ntemplate&lt;&gt;\ninline std::uint64_t bitCount(std::uint64_t bitset)\n{\n  puts(\"specialized\");\n  return 0;\n}\n\nint main() {\n  std::uint64_t x = 1&lt;&lt;5;\n  std::cout &lt;&lt; bitCount(x) &lt;&lt; '\\n'; //specialized\n  std::cout &lt;&lt; bitCount&lt;std::uint64_t&gt;(x) &lt;&lt; '\\n'; //specialized\n  return 0;\n}\n</code></pre>\n\n<p>My use case is that I want to write unit tests to ensure that the generic function and its specializations yield the same results.</p>\n"}, {"tags": ["c++", "lua"], "comments": [{"owner": {"reputation": 651, "user_id": 6834680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor   Skriptunoff", "link": "https://stackoverflow.com/users/6834680/egor-skriptunoff"}, "edited": false, "score": 1, "creation_date": 1564567693, "post_id": 57287988, "comment_id": 101071196, "body": "Probably because of name mangling when exporting a function from C++."}, {"owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1564568439, "post_id": 57287988, "comment_id": 101071653, "body": "@Sneftel I&#39;ve added some new observations."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1564569120, "post_id": 57287988, "comment_id": 101072039, "body": "@VishalSharma It sounds like you have a different question now. You should ask that as a new question, rather than editing this one to change what it&#39;s asking about."}, {"owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1564570162, "post_id": 57287988, "comment_id": 101072606, "body": "@Sneftel I&#39;ve changed the question&#39;s title now"}, {"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1564574895, "post_id": 57287988, "comment_id": 101075249, "body": "@VishalSharma Your edit is clearly asking a completely different question. I suggest opening a new question instead, as I don&#39;t see this one getting re-opened."}, {"owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "edited": false, "score": 0, "creation_date": 1564575928, "post_id": 57287988, "comment_id": 101075813, "body": "I&#39;ve created a new question @ <a href=\"https://stackoverflow.com/q/57290650/5701173\">stackoverflow.com/q/57290650/5701173</a>"}], "owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1564567737, "answer_count": 0, "score": 1, "last_activity_date": 1564575969, "creation_date": 1564566734, "last_edit_date": 1564575969, "question_id": 57287988, "link": "https://stackoverflow.com/questions/57287988/unable-to-use-a-c-module-from-lua", "closed_reason": "Duplicate", "title": "Unable to use a C++ module from Lua", "body": "<p>I'm trying to use a function written in C++ from lua. Given below is the cpp file:</p>\n\n<pre><code>extern \"C\"\n{\n#include \"lua.h\"\n#include \"lauxlib.h\"\n#include \"lualib.h\"\n}\n\nstatic int  add_5(lua_State *L)\n{\n  double d = lua_tonumber(L, 1); /* get argument */\n  d=d+5;\n  lua_pushnumber(L, d); /* push result */\n  return 1; /* number of results */\n}\n\nstatic const struct luaL_Reg mylib [] =\n{\n  {\"add_5\", add_5},\n  {NULL, NULL} /* sentinel */\n};\n\nint luaopen_mylib (lua_State *L)\n{\n  //luaL_newlib(L, mylib); //This is not working.\n  luaL_register(L, NULL, mylib);\n  return 1;\n}\n</code></pre>\n\n<p>I compiled the above code by g++ using the following command:</p>\n\n<pre><code>g++ -shared -o mylib.so test.cpp -fPIC\n</code></pre>\n\n<p>I'm getting the following error on the lua interpreter:</p>\n\n<pre><code>Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio\n&gt; local temp = require \"mylib\"\nerror loading module 'mylib' from file './mylib.so':\n        ./mylib.so: undefined symbol: luaopen_mylib\nstack traceback:\n        [C]: ?\n        [C]: in function 'require'\n        stdin:1: in main chunk\n        [C]: ?\n</code></pre>\n\n<p><strong>Edit 1</strong>: As per the <a href=\"https://stackoverflow.com/questions/33865875/unable-to-load-c-dll-module-in-lua\">suggested link</a>, I've enclosed luaopen_mylib function inside an extern \"C\" block. The error which I was getting earlier has been replaced by a new error now. Now I'm getting this:</p>\n\n<pre><code>Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio\n&gt; local temp = require \"mylib\"\nattempt to index a string value\nstack traceback:\n        [C]: ?\n        [C]: in function 'require'\n        stdin:1: in main chunk\n        [C]: ?\n</code></pre>\n\n<p><strong>Edit 2</strong>: I've added a new question @ <a href=\"https://stackoverflow.com/q/57290650/5701173\">&#39;Attempt to index a string value&#39; error while loading a c++ module in lua</a></p>\n"}, {"tags": ["c++", "string", "c++11", "std", "getline"], "answers": [{"tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 0, "last_activity_date": 1564566717, "creation_date": 1564566717, "answer_id": 57287982, "question_id": 57287769, "link": "https://stackoverflow.com/questions/57287769/getting-multiple-string-input-after-integer/57287982#57287982", "title": "Getting multiple string input after integer?", "body": "<p>The issue here is that <code>std::cin &gt;&gt; t;</code> doesn't consume the <code>\\n</code> that appears in the input. This is why the first call to <code>std::getline</code> reads everything until the next <code>\\n</code>, which appears immediately (such that <code>s</code> is the empty string during the first iteration).</p>\n\n<p>You can fix this in two ways. Without touching the code, adjust the input to</p>\n\n<pre><code>2 Hello World\nHello StackOverFlow\n</code></pre>\n\n<p>But I guess that's not the intention. Another way is to tell <code>std::cin</code> to ignore everything until the next newline, e.g.</p>\n\n<pre><code>cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>This eats a possibly huge amount of characters until it encounters the next <code>\\n</code>. For the above to compile, you need to <code>#include &lt;limits&gt;</code>.</p>\n"}], "owner": {"reputation": 109, "user_id": 11862995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KHU3u6iweQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7_DPBn-yJkj91kmBJtv3wjP2n7Q/photo.jpg?sz=128", "display_name": "Shiva Chandel", "link": "https://stackoverflow.com/users/11862995/shiva-chandel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 57287982, "answer_count": 1, "score": 0, "last_activity_date": 1564566729, "creation_date": 1564566066, "last_edit_date": 1564566729, "question_id": 57287769, "link": "https://stackoverflow.com/questions/57287769/getting-multiple-string-input-after-integer", "title": "Getting multiple string input after integer?", "body": "<p>I came through this programming question where I need to input multiple strings after inputing a integer.\nThe string also include spaces.</p>\n\n<p>//Program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\nint main() {\nint t;\ncin&gt;&gt;t;\nwhile(t--){\n    string s;\n    getline(cin,s,'\\n');  //also used cin&gt;&gt;s;\n    cout&lt;&lt;\"$\"&lt;&lt;s&lt;&lt;\"$\"&lt;&lt;'\\n';\n}\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>2\nHello World\nHello StackOverFlow\n</code></pre>\n\n<p><strong>Expected Output</strong></p>\n\n<pre><code>Hello World\nHello StackOverFlow\n</code></pre>\n\n<p><strong>Program's Output</strong></p>\n\n<pre><code>$$$Hello World$\n</code></pre>\n"}, {"tags": ["c++", "mfc", "listbox"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1564567461, "post_id": 57287764, "comment_id": 101071044, "body": "<code>myListBox-&gt;ResetContent();</code> Just saying."}, {"owner": {"reputation": 19, "user_id": 11623314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e00e3d51876baafb09d05deadddcb60?s=128&d=identicon&r=PG&f=1", "display_name": "J.B", "link": "https://stackoverflow.com/users/11623314/j-b"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564567510, "post_id": 57287764, "comment_id": 101071079, "body": "@WhozCraig cheers mate, will try that now.... any idea why only a fraction of the strings are deleted ??"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564567586, "post_id": 57287764, "comment_id": 101071129, "body": "Yeah, because each time you clear a string you&#39;re reducing the item count (and thus the index limits) of the listbox. I.e. the item at <code>1</code> becomes the item at <code>0</code> when you delete the item at <code>0</code> prior. <code>myListBox-&gt;DeleteString(0);</code> repeated <code>count</code> times would do what you seem to be trying. Hope that made sense."}, {"owner": {"reputation": 19, "user_id": 11623314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e00e3d51876baafb09d05deadddcb60?s=128&d=identicon&r=PG&f=1", "display_name": "J.B", "link": "https://stackoverflow.com/users/11623314/j-b"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564568505, "post_id": 57287764, "comment_id": 101071693, "body": "@WhozCraig makes sense, thanks !!"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11623314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e00e3d51876baafb09d05deadddcb60?s=128&d=identicon&r=PG&f=1", "display_name": "J.B", "link": "https://stackoverflow.com/users/11623314/j-b"}, "edited": false, "score": 0, "creation_date": 1564568721, "post_id": 57288351, "comment_id": 101071822, "body": "awesome, thank you very much... I was going to remove this stackoverflow entry but your answer is clear and concise and could benefit others... thanks :)"}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 2, "last_activity_date": 1564588197, "last_edit_date": 1564588197, "creation_date": 1564567875, "answer_id": 57288351, "question_id": 57287764, "link": "https://stackoverflow.com/questions/57287764/why-do-i-still-have-strings-in-my-listbox-even-after-using-a-loop-to-individuall/57288351#57288351", "title": "Why do I still have strings in my ListBox even after using a loop to individually remove them?", "body": "<p>Imagine your listbox as</p>\n\n<pre><code>0  foo\n1  bar\n2  baz\n</code></pre>\n\n<p>Now, hit your loop. Delete index 0:</p>\n\n<pre><code>0  bar\n1  baz\n</code></pre>\n\n<p>Now delete index 1</p>\n\n<pre><code>0  bar\n</code></pre>\n\n<p>See the problem? This would do what you want:</p>\n\n<pre><code>int count = (int)myListBox-&gt;GetListBoxInfo();\nfor (int i=0; i&lt;count; ++i)\n    myListBox-&gt;DeleteString(0);\n\nmyListBox-&gt;UpdateData();\nmyListBox-&gt;UpdateWindow();    \n</code></pre>\n\n<p>But in reality, belay all of that and just do this:</p>\n\n<pre><code>myListBox-&gt;ResetContent();\n</code></pre>\n\n<p>See <a href=\"https://docs.microsoft.com/en-us/cpp/mfc/reference/clistbox-class?view=vs-2019#resetcontent\" rel=\"nofollow noreferrer\"><code>ResetContent</code></a> in the MSDN Library.</p>\n"}], "owner": {"reputation": 19, "user_id": 11623314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e00e3d51876baafb09d05deadddcb60?s=128&d=identicon&r=PG&f=1", "display_name": "J.B", "link": "https://stackoverflow.com/users/11623314/j-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564648348, "creation_date": 1564566061, "last_edit_date": 1564648348, "question_id": 57287764, "link": "https://stackoverflow.com/questions/57287764/why-do-i-still-have-strings-in-my-listbox-even-after-using-a-loop-to-individuall", "title": "Why do I still have strings in my ListBox even after using a loop to individually remove them?", "body": "<p>Stumbled across what seems like an odd bug..... I have ListBox items added with addstring ... I have the listbox control return a count as a <code>DWORD</code> and convert it into an integer with the following code and only a portion of the strings listed are deleted ... I realise some of the type conversions arent necessary, but i have tried without the typecasting and the issue remains the same....the code :</p>\n\n<pre><code>int count = (int)myListBox-&gt;GetListBoxInfo();\n    for (int cnt = 0; cnt &lt;= count; cnt++) {\n        UINT itemIndex = (UINT)cnt;\n        myListBox-&gt;DeleteString(itemIndex);\n\n    }\n    myListBox-&gt;UpdateData();\n    myListBox-&gt;UpdateWindow();\n</code></pre>\n\n<p>I\u2019m sure there is probably another way to clear the list but im curious why this isn't working ....</p>\n\n<p>Kind regards stackoverflow,</p>\n"}, {"tags": ["c++", "c", "linux", "samba"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564697264, "post_id": 57287741, "comment_id": 101126550, "body": "What is Dolphin in this context?"}, {"owner": {"reputation": 136, "user_id": 6412806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSC3n.png?s=128&g=1", "display_name": "42LeapsOfFaith", "link": "https://stackoverflow.com/users/6412806/42leapsoffaith"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564717470, "post_id": 57287741, "comment_id": 101130087, "body": "Dolphin in this context is KDE&#39;s version of Windows Explorer."}, {"owner": {"reputation": 349, "user_id": 4198124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eEgbZ.png?s=128&g=1", "display_name": "Oren Kishon", "link": "https://stackoverflow.com/users/4198124/oren-kishon"}, "edited": false, "score": 0, "creation_date": 1573653988, "post_id": 57287741, "comment_id": 103952025, "body": "By \u201csmb://sharename\u201d you mean  \u201csmb://server/sharename\u201d? And why can&#39;t you use the server hostname in your program instead of the explicit IP?"}], "owner": {"reputation": 136, "user_id": 6412806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSC3n.png?s=128&g=1", "display_name": "42LeapsOfFaith", "link": "https://stackoverflow.com/users/6412806/42leapsoffaith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565309666, "creation_date": 1564565992, "last_edit_date": 1565309666, "question_id": 57287741, "link": "https://stackoverflow.com/questions/57287741/how-to-find-refresh-local-network-samba-shares-on-a-linux-computer-with-c-c", "title": "How to find/refresh local network SAMBA Shares on a Linux computer with C/C++", "body": "<p>I am writing a c++ program on a Linux (KDE) computer that accesses files on a SAMBA share in a local network. However, I\u2019m finding that if the ip address lease expires the connection to the SAMBA share is lost.</p>\n\n<p>If I type \u201csmb://sharename\u201d into the address bar of Dolphin, it causes the system to renew the ip address and my connection can be resumed.</p>\n\n<p>My question is \u2013 what c or c++ functions can I call to provide the same outcome as Dolphin?</p>\n"}, {"tags": ["c++", "client-server", "qnx"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1564566967, "post_id": 57287648, "comment_id": 101070764, "body": "Wild guess, try adding <code>-lsocket</code> to your build command."}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564567089, "post_id": 57287648, "comment_id": 101070850, "body": "My bad Yes this work. Can you please put this as answer."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564567224, "post_id": 57287648, "comment_id": 101070913, "body": "@nm seems too trival to be an answer"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564567372, "post_id": 57287648, "comment_id": 101070995, "body": "Now i get run time error as  ./server  setsockopt: Protocol not available"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564567712, "post_id": 57287648, "comment_id": 101071210, "body": "Edited question @john Any help on this"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1564647158, "post_id": 57287648, "comment_id": 101102008, "body": "From what I recall options need to be specified separately.  So bitwise &#39;or&#39; such as <code>SO_REUSEADDR | SO_REUSEPORT</code> isn&#39;t valid."}], "owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1588776334, "creation_date": 1564565682, "last_edit_date": 1564568854, "question_id": 57287648, "link": "https://stackoverflow.com/questions/57287648/undefined-reference-to-socketpair", "title": "undefined reference to `socketpair&#39;", "body": "<p>I have written socket client code run fine with Linux GCC but through error on QNX platform. It through error as <strong>undefined reference to `socketpair'</strong></p>\n\n<p><strong>compile command:</strong> aarch64-unknown-nto-qnx7.0.0-gcc  ss1.c </p>\n\n<p><strong>Buid error</strong></p>\n\n<pre><code>/tmp/cc8ssnim.o: In function `main':\nss1.c:(.text+0x34): undefined reference to `socketpair'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>Edited After john comment</strong></p>\n\n<p>Comiple time error fixed by adding -lsocket i get run time error as </p>\n\n<p><strong>setsockopt: Protocol not available</strong></p>\n\n<p>Example code taken from <a href=\"http://www.qnx.com/developers/docs/qnx_4.25_docs/tcpip50/prog_guide/sock_ipc_tut.html\" rel=\"nofollow noreferrer\">HERE</a> </p>\n\n<pre><code>// Server side C/C++ program to demonstrate Socket programming\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n#include&lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n#define PORT 8080\nint main(int argc, char const *argv[])\n{\n    int server_fd, new_socket, valread;\n    struct sockaddr_in address;\n    int opt = 1;\n    int addrlen = sizeof(address);\n    char buffer[1024] = {0};\n    char hello[500] = {};\n\n    // Creating socket file descriptor\n    if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0)\n    {\n        perror(\"socket failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    // Forcefully attaching socket to the port 8080\n    if (setsockopt(server_fd, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT,\n                &amp;opt, sizeof(opt)))\n    {\n        perror(\"setsockopt\");\n        exit(EXIT_FAILURE);\n    }\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = INADDR_ANY;\n    address.sin_port = htons( PORT );\n\n    // Forcefully attaching socket to the port 8080\n    if (bind(server_fd, (struct sockaddr *)&amp;address,\n                sizeof(address))&lt;0)\n    {\n        perror(\"bind failed\");\n        exit(EXIT_FAILURE);\n    }\n    if (listen(server_fd, 3) &lt; 0)\n    {\n        perror(\"listen\");\n        exit(EXIT_FAILURE);\n    }\n    if ((new_socket = accept(server_fd, (struct sockaddr *)&amp;address,\n                    (socklen_t*)&amp;addrlen))&lt;0)\n    {\n        perror(\"accept\");\n        exit(EXIT_FAILURE);\n    }\n    ab:\n    std::cout&lt;&lt;\"Enter send to client\\n\";\n    std::cin&gt;&gt;hello;\n    valread = read( new_socket , buffer, 1024);\n    printf(\"Received in server = %s\\n\",buffer );\n        memset( buffer, '\\0', sizeof(char)*1024 );\n\n    send(new_socket , hello , strlen(hello) , 0 );\n    memset( hello, '\\0', sizeof(char)*500 );\n    goto ab;\n    //printf(\"Hello message sent\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "protocol-buffers"], "comments": [{"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 1, "creation_date": 1564566654, "post_id": 57287462, "comment_id": 101070573, "body": "Deserializing with the wrong type is undefined behaviour. It might work &quot;fine&quot;. It might throw."}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 0, "creation_date": 1564566829, "post_id": 57287462, "comment_id": 101070674, "body": "But how can I know what type will be the good one ? This is an example but in my program, I only get a string and I want to know from what type it came !!"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1564571173, "post_id": 57287462, "comment_id": 101073160, "body": "@Ephesiel You can&#39;t know from just looking at the serialized string.  You must store the message type separately."}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1564572302, "post_id": 57287462, "comment_id": 101073827, "body": "@Miles Budnek okay, I implement something like that, each time that I send a message, I send another message before called Header which contain the message type. Then, according to the type, I will parse a different protobuf class. So now i have an other problem, when I write two messages, both are read in the same time in me QTcpSocket, but this is an other problem. Thanks a lot !"}, {"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 0, "creation_date": 1564636585, "post_id": 57287462, "comment_id": 101097536, "body": "In this scenario, IMO you should use a single outer message type with a &quot;oneof&quot; inner message. Then the answer is always &quot;the single outer type&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "edited": false, "score": 0, "creation_date": 1564658708, "post_id": 57304449, "comment_id": 101108257, "body": "I didn&#39;t know how to answer you, but i needed to write some code, so I wrote an answer"}], "tags": [], "owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "is_accepted": true, "score": 1, "last_activity_date": 1564646700, "creation_date": 1564646700, "answer_id": 57304449, "question_id": 57287462, "link": "https://stackoverflow.com/questions/57287462/why-my-protobuf-class-can-parse-a-string-serialized-by-an-other-protobuf-class/57304449#57304449", "title": "Why my Protobuf class can parse a string serialized by an other Protobuf class", "body": "<p>My recommended solution to the problem of multiple different payloads:</p>\n\n<pre class=\"lang-proto prettyprint-override\"><code>syntax = \"proto3\";\n\npackage protobuf;\nmessage RenameMe // the outer payload wrapper\n{\n  oneof payload\n  {\n    Foo foo = 1;\n    Bar bar = 2;\n  }\n}\nmessage Foo // one type of content\n{\n    string content = 1;\n}\nmessage Bar // another type of content\n{\n    int32 id = 1;\n    string name = 2;\n}\n</code></pre>\n\n<p>Now you can just deserialize everything as a <code>RenameMe</code> (naming is hard!) and check the <code>payload</code> discriminated union enum to see how you should interpret the data. Then just access <code>foo</code> or <code>bar</code> respectively.</p>\n\n<p>This approach is clear, obvious, and readily and effectively extensible into additional message types. The testing can be implemented with <code>switch</code> in many programming languages. This style also works well with polymorphism in some environments - for example, in C# with protobuf-net that could be serialized/deserialized with:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[ProtoContract, ProtoInclude(1, typeof(Foo)), ProtoInclude(2, typeof(Bar))]\nabstract class RenameMe {}\n\n[ProtoContract]\nclass Foo : RenameMe {\n  [ProtoMember(1)] public string Content {get;set;}\n}\n\n[ProtoContract]\nclass Bar : RenameMe {\n  [ProtoMember(1)] public int Id {get;set;}\n  [ProtoMember(2)] public string Name {get;set;}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 0, "creation_date": 1564658946, "post_id": 57307924, "comment_id": 101108406, "body": "note that protobuf messages aren&#39;t self terminating; frankly I&#39;m surprised that even works, but even if it did: you&#39;re basically re-implementing serialization inside the serializer; it would seem preferable to actually use the serializer for <i>what it does</i>, no?"}, {"owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "reply_to_user": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 0, "creation_date": 1564660652, "post_id": 57307924, "comment_id": 101109386, "body": "@Marc Gravell I edit the answer, is that right now ?"}, {"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 1, "creation_date": 1564662251, "post_id": 57307924, "comment_id": 101110306, "body": "that indeed looks more like how I might typically use it; ultimately, though, anything that works ... it is up to you!"}], "tags": [], "owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1564660620, "last_edit_date": 1564660620, "creation_date": 1564658614, "answer_id": 57307924, "question_id": 57287462, "link": "https://stackoverflow.com/questions/57287462/why-my-protobuf-class-can-parse-a-string-serialized-by-an-other-protobuf-class/57307924#57307924", "title": "Why my Protobuf class can parse a string serialized by an other Protobuf class", "body": "<p>EDIT : So, now, is it the best approach ?</p>\n\n<pre><code>syntax = \"proto3\";\n\nmessage Header\n{\n    oneof payload\n    {\n        Message message = 1;\n        Player player = 2;\n    }\n}\nmessage Message\n{\n    string content = 1;\n}\nmessage Player\n{\n    int32 id = 1;\n    string name = 2;\n}\n</code></pre>\n\n<p>When I write :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void SocketManager::sendData(Player&amp; player)\n{\n    Header header;\n    header.set_allocated_player(&amp;player);\n    write(header);\n}\n\nvoid SocketManager::sendData(Message&amp; message)\n{\n    Header header;\n    header.set_allocated_message(&amp;message);\n    write(header);\n}\n\n// etc... for each kind of message\n</code></pre>\n\n<p>When I read :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void read(const std::string&amp; data)\n{\n    protobuf::Header header;\n    header.ParseFromString(data);\n\n    switch (header.payload_case())\n    {\n    case protobuf::Header::kMessage:\n        emit messageProtoReceived(header.message());\n        break;\n    case protobuf::Header::kPlayer:\n        emit playerProtoReceived(header.player());\n        break;\n    case protobuf::Header::PAYLOAD_NOT_SET:\n        qDebug() &lt;&lt; \"Error, the payload isn't set, please create a header with a payload\";\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11862409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12e00e26344c4d0dfb108154846a5a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ephesiel", "link": "https://stackoverflow.com/users/11862409/ephesiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 57304449, "answer_count": 2, "score": 1, "last_activity_date": 1564660620, "creation_date": 1564565086, "question_id": 57287462, "link": "https://stackoverflow.com/questions/57287462/why-my-protobuf-class-can-parse-a-string-serialized-by-an-other-protobuf-class", "title": "Why my Protobuf class can parse a string serialized by an other Protobuf class", "body": "<p>I tried to know what package I got in my tcp socket, so I use protobuf.\nBut when I <code>SerializeToString</code> my first protobuf class, the <code>ParseFromString</code> method of an other protobuf class returns true.</p>\n\n<p>The two classes are differents</p>\n\n<p>Here are my <code>.proto</code></p>\n\n<pre><code>syntax = \"proto3\";\n\npackage protobuf;\nmessage Message\n{\n    string content = 1;\n}\nmessage Player\n{\n    int32 id = 1;\n    string name = 2;\n}\n</code></pre>\n\n<p>Here is my c++ code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto messageProto = new protobuf::Message;\nmessageProto-&gt;set_content(\"Hello\");\n\nstd::string data;\nmessageProto-&gt;SerializeToString(&amp;data);\n\nprotobuf::Player player;\nif (player.ParseFromString(data))\n{\n    qDebug() &lt;&lt; \"parse player\";\n}\n\nprotobuf::Message message2;\nif (message2.ParseFromString(data))\n{\n    qDebug() &lt;&lt; \"parse message\";\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>parse player\nparse message\n</code></pre>\n\n<p>Why ?</p>\n"}, {"tags": ["c++", "function", "recursion", "stack-overflow"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1564565630, "post_id": 57287267, "comment_id": 101069948, "body": "It is OS dependent how MMU exeptions are handled. However, since a stackoverflow could result in an access to an invalid address (or an address the process does not own), SIGBUS is a valid option."}, {"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1564565833, "post_id": 57287267, "comment_id": 101070071, "body": "Yes, but on the very same machine I had segmentation fault but now it&#39;s bus error 10 and cannot understand why ..."}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1564566879, "post_id": 57287267, "comment_id": 101070713, "body": "<code>A stackoverflow could result...</code> does not mean it have to. If the overflow hits an address which is not owned by the process, you should get a SIGSEGV. If it hist an invalid address (or according to the comments in <a href=\"https://stackoverflow.com/questions/32488353/diagnosing-sigbus-error-on-os-x-yosemite\">this</a> question, memory which is marked readonly) you should get a SIGBUS. It is not reliable... Your Mac could also catch fire..."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1564568713, "post_id": 57287267, "comment_id": 101071819, "body": "A bus error and a segmentation violation each result from a program accessing memory it shouldn&#39;t, but they are detected and signaled by different mechanisms. Under unix, if the OS detects a process accessing memory that the OS hasn&#39;t allocated to that process (e.g. allocated to another process), it sends a SIGSEGV signal to the offending process. However, if the hardware detects an access of hardware resources that don&#39;t physically exist, it raises a hardware fault that is trapped by the OS, which sends a SIGBUS signal to the process executing the offending instruction."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1564569103, "post_id": 57287267, "comment_id": 101072030, "body": "@Peter That might make a good <i>answer</i>..."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564570360, "post_id": 57287267, "comment_id": 101072707, "body": "@LightnessRacesinOrbit - Yeah, I wrote that pretty quickly with fingers on auto-drive, but reading it now, it&#39;s more complete than I thought.   I&#39;ll tidy it up a little (and add a couple of extra details) and post as an answer shortly."}], "answers": [{"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 3, "last_activity_date": 1564570996, "creation_date": 1564570996, "answer_id": 57289288, "question_id": 57287267, "link": "https://stackoverflow.com/questions/57287267/why-stack-overflow-causes-bus-error-10-and-not-segmentation-fault/57289288#57289288", "title": "Why stack overflow causes bus error 10 and not segmentation fault", "body": "<p>A bus error and a segmentation violation each result from a program accessing memory it shouldn't, but they are detected and signaled by different mechanisms.</p>\n\n<p>The details do vary with operating system.  The following observations are, more or less,  how things happen with a unix host.  </p>\n\n<p>If the OS detects a process accessing memory that the OS hasn't allocated to that process (e.g. allocated to another process), it sends a SIGSEGV signal to the offending process.   The process/program then terminates, reporting a segmentation violation.</p>\n\n<p>However, if the hardware detects an access of hardware resources that don't physically exist, it raises a hardware fault that is trapped by the OS, which sends a SIGBUS signal to the process executing the offending instruction.   This can also happen with unaligned memory accesses - a hardware fault is raised, trapped by the operating system which sends a signal to the originating process.</p>\n\n<p>Although the details vary (e.g. how the OS or kernel responds to hardware faults, or what signals it sends to an offending process) the general ideas are similar.</p>\n"}], "owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564570996, "creation_date": 1564564502, "last_edit_date": 1564565896, "question_id": 57287267, "link": "https://stackoverflow.com/questions/57287267/why-stack-overflow-causes-bus-error-10-and-not-segmentation-fault", "title": "Why stack overflow causes bus error 10 and not segmentation fault", "body": "<p>Can anyone explain why stack overflow during recursive calls causes bus error and not segmentation fault (Mac OS)? </p>\n\n<p>I have a function that is called recursively for a few thousand times. As I expected it hits the stack limit but in other cases that caused segmentation fault and that's logical but why is it bus error 10? As I know referencing unaligned memory causes bus error but why is that when hitting stack limit?</p>\n"}, {"tags": ["c++", "oversampling"], "comments": [{"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1564564942, "post_id": 57287252, "comment_id": 101069521, "body": "It sounds like you are searching for code that determines how many values need  to be added before each new value from in. You could alternate between the floor of the ratio (desired length / input length) and its ceil. How often you use floor or ceil also depends on the ratio. This would result in a quite regular interpolation. Or do you want a random decision so it becomes irregular?"}, {"owner": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "edited": false, "score": 0, "creation_date": 1564565454, "post_id": 57287252, "comment_id": 101069839, "body": "Should the array be upsampled as uniformly as possible? I.e., is it a problem if between element n and n+1 5 items are added, but between n+1 and n+2 none?"}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "reply_to_user": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1564566707, "post_id": 57287252, "comment_id": 101070604, "body": "@ypnos For example If V= {0.1,0.2,0.3} the desired output might be like  V&#39; ={0.1,0.12,0.14,0.17,0.2,0.27,0.29,0.3}"}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "reply_to_user": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "edited": false, "score": 0, "creation_date": 1564566867, "post_id": 57287252, "comment_id": 101070699, "body": "@SilverTear Yes. it would be better to add at least one value between each two. Also for accuracy purposes."}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "reply_to_user": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1564567708, "post_id": 57287252, "comment_id": 101071206, "body": "@ypnos Could you please explain this statement: &quot;How often you use floor or ceil also depends on the ratio.&quot;"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 2, "creation_date": 1564567750, "post_id": 57287252, "comment_id": 101071235, "body": "You can check also Bresenham&#39;s line algorithm (aliasing geometric line onto pixel raster is in principle the same aliasing issue... you have 20 input values = let&#39;s say that &quot;y-axis&quot; and you want 50 output values = &quot;x-axis&quot;, so you are drawing line (+50,+20) with every starting point at new line being &quot;copy&quot; of input, and remaining one or two points are new value generated. If you want to spread the new values across whole range as uniformly as possible. The important thing to understand is, that due to &quot;aliasing&quot; it will be perfect only for very specific values, so decide how to alias first."}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "edited": false, "score": 0, "creation_date": 1564568148, "post_id": 57287252, "comment_id": 101071483, "body": "Thank you. I&#39;ll check it out. it sounds like filling the blanks with mapping some values. right?"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1564568557, "post_id": 57287252, "comment_id": 101071734, "body": "yes. You can use the math behind Bresenham to decide when to fill (with new generated value) and when to copy (the original input value). How you generate the filling is not related to that. If you will use simple linear interpolation (i.e. truly drawing lines :)), the largely upscaled data will show this behaviour (which may be good if the data are important and somebody may need to know which ones were original), adding some random noise (perlin noise 2D height maps for example) can help if the data are used for some visual effect, like bump mapping, etc.."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1564568750, "post_id": 57287252, "comment_id": 101071840, "body": "and the latest fashion is to use NN trained on other data containing &quot;details&quot; to fill up the gaps on the low resolution data, like upscaling images, etc... which slightly triggers me, when I see it, because the provided data often kinda make sense, although you should never forget they are basically random and not real. As long as people use it to upscale textures for game, it&#39;s excellent stuff, but when somebody will upscale some important data like this, and hide the information, it may bite somebody later who will be not aware of the artificial origin of the data... :)"}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "reply_to_user": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "edited": false, "score": 0, "creation_date": 1564569730, "post_id": 57287252, "comment_id": 101072348, "body": "@SilverTear. If the input vector&#39; s length is close to 50. say 49. So we should insert just one more sample randomly between any pair of elements. So in this case the number of inserted values between other elements in none."}, {"owner": {"reputation": 1880, "user_id": 11829247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7ed099888314cc282b63908b890a76?s=128&d=identicon&r=PG&f=1", "display_name": "Frodyne", "link": "https://stackoverflow.com/users/11829247/frodyne"}, "edited": false, "score": 2, "creation_date": 1564570392, "post_id": 57287252, "comment_id": 101072724, "body": "In digital signal processing a standard method is, if you want to scale a signal from X Hz to Y Hz, then the way to do it is to upsample to a common multiple, and then decimate down again. In this case it would be to upsample to 100 Hz, and throw every second sample away. The benefit here is that you only work in whole integers, and it is the same process no matter if you want to up- or down-sample. The problem is that it gets pretty inefficient if the to/from have few common prime factors (eg. 49 Hz to 50 Hz requires upsampling to 2450 Hz as the intermediate)."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "edited": false, "score": 0, "creation_date": 1564738863, "post_id": 57300727, "comment_id": 101137994, "body": "I really appreciate your help. It seems that weighted up-sampling gives more accurate output for my program. But i found it a bit hard to understand the details of your code."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "edited": false, "score": 0, "creation_date": 1564741799, "post_id": 57300727, "comment_id": 101139428, "body": "@student_11 just ask in the comments here about particular parts... I tried to keep it simple, if this would be &quot;production&quot; code for my app, I would change few parts for better performance, but it would be slightly harder to read, so it should actually read well? = which makes your feedback about which parts are difficult super valuable to me, this is always very interesting to me, to hear about how other people think about code, and what is difficult for them. :)"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "edited": false, "score": 0, "creation_date": 1564742084, "post_id": 57300727, "comment_id": 101139558, "body": "But the main principle is same as mentioned in original comment, what Frodyne wrote is just less efficient variant of the code I provided, and after thinking about his comment I finally (after all those decades) realized how Bresenham got that math for his line algorithm, it&#39;s actually the same principle. When you have two values M,N, both principles start with M*N (or optimized to common multiple) as &quot;total amount of steps&quot;, because such value can be divided without remained for both M and N steps. So that&#39;s like the general &quot;tick&quot; value [0..M*N] to which everything else is relative to."}, {"owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "edited": false, "score": 0, "creation_date": 1564745963, "post_id": 57300727, "comment_id": 101141377, "body": "Thanks for your valuable comments. I just used your code(with some modifications) in my project and it worked really well. So i have not debug it yet.  After debugging and diving into Bresenham  algorithm. I&#39;ll asked my real questions about the code :). Thank you again."}], "tags": [], "owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "is_accepted": true, "score": 3, "last_activity_date": 1564622740, "creation_date": 1564622740, "answer_id": 57300727, "question_id": 57287252, "link": "https://stackoverflow.com/questions/57287252/upsampling-insert-extra-values-between-each-consecutive-elements-of-a-vector/57300727#57300727", "title": "Upsampling: insert extra values between each consecutive elements of a vector", "body": "<p>So I did some math myself, because I was curious how to get the weight ratios (as if upsampling linearly up to common multiple and then extracting only target values from large array - but without creating the large array, just using weights to know how much left+right elements contribute to particular value).</p>\n\n<p>The sample code does always create new value by simple weighted average (i.e. 40% of 123.4 with 60% 567.8 will give \"upscaled\" value 390.04), no random used to pepper the upscaled values (leaving that part to OP).</p>\n\n<p>The ratios goes like this:</p>\n\n<p>if vector of size <strong>M</strong> is being upscaled to size <strong>N</strong> (<strong>M</strong> &lt;= <strong>N</strong>) (the \"upscale\" will always preserve first and last element of input vector, those are \"fixed\" in this proposal)</p>\n\n<p>then every upscaled element can be viewed as being somewhere between some original elements [i, i+1].</p>\n\n<p>If we would declare the \"distance\" between the source elements [i, i+1] equal to <strong>d = N-1</strong>, then the upscaled element distance between can be always expressed as some <strong>j/d</strong> where <strong>j</strong>:[0,d] (when <strong>j</strong> is actual <strong>d</strong>, it's precisely at \"i+1\" element and can be considered the same case as <strong>j</strong>=0 but with [i+1,i+2] source elements)</p>\n\n<p>And the distance between two upscaled elements is then <strong>M-1</strong>.</p>\n\n<p>So when source vector is size 4, and upscaled vector size should be 5, the ratios for upscaled elements are [ [4/4,0/4], [1/4,3/4], [2/4,2/4], [3/4,1/4],  [0/4,4/4] ] of elements (indices into vector) [ [0,1], [0,1], [1,2], [2, 3], [2, 3] ].\n(\"distance\" between source elements is 5-1=4, that's then the \"/4\" to normalize weights, \"distance\" between upscaled elements is 4-1=3, that's why the ratios are shifting by [-3,+3] in every step).</p>\n\n<p>I'm afraid that my description is far from \"obvious\" (how it feels in my head after figuring it out), but if you will put some of that into spreadsheet and toy around with it, hopefully it will make some sense. Or maybe you can debug the code to get better feel how that mumbling above transforms into real code.</p>\n\n<p>Code example 1, this one will \"copy\" source element only if the weight is precisely fully onto it (i.e. in the example data only first and last element are \"copied\", rest of the upscaled elements are weighted averages of original values).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cassert&gt;\n\nstatic double get_upscale_value(const size_t total_weight, const size_t right_weight, const double left, const double right) {\n    // do the simple weighted average for demonstration purposes\n    const size_t left_weight = total_weight - right_weight;\n    return (left * left_weight + right * right_weight) / total_weight;\n}\n\nstd::vector&lt;double&gt; upsample_weighted(std::vector&lt;double&gt;&amp; in, size_t n)\n{\n    assert( 2 &lt;= in.size() &amp;&amp; in.size() &lt;= n ); // this is really only upscaling (can't downscale)\n\n    // resulting vector variable\n    std::vector&lt;double&gt; upscaled;\n    upscaled.reserve(n);\n\n    // upscaling factors variables and constants\n    size_t index_left = 0;                      // first \"left\" item is the in[0] element\n    size_t weight_right = 0;                    // and \"right\" has zero weight (i.e. in[0] is copied)\n    const size_t in_weight = n - 1;             // total weight of single \"in\" element\n    const size_t weight_add = in.size() - 1;    // shift of weight between \"upscaled\" elements\n\n    while (upscaled.size() &lt; n) {               // add N upscaled items\n        if (0 == weight_right) {\n            // full weight of left -&gt; just copy it (never tainted by \"upscaling\")\n            upscaled.push_back(in[index_left]);\n        } else {\n            // the weight is somewhere between \"left\" and \"right\" items of \"in\" vector\n            // i.e. weight = 1..(in_weight-1) (\"in_weight\" is full \"right\" value, never happens)\n            double upscaled_val = get_upscale_value(in_weight, weight_right, in[index_left], in[index_left+1]);\n            upscaled.push_back(upscaled_val);\n        }\n        weight_right += weight_add;\n        if (in_weight &lt;= weight_right) {\n            // the weight shifted so much that \"right\" is new \"left\"\n            ++index_left;\n            weight_right -= in_weight;\n        }\n    }\n\n    return upscaled;\n}\n\nint main(int argc, const char *argv[])\n{\n    std::vector&lt;double&gt; in { 10, 20, 30 };\n//    std::vector&lt;double&gt; in { 20, 10, 40 };\n\n    std::vector&lt;double&gt; upscaled = upsample_weighted(in, 14);\n    std::cout &lt;&lt; \"upsample_weighted from \" &lt;&lt; in.size() &lt;&lt; \" to \" &lt;&lt; upscaled.size() &lt;&lt; \": \";\n    for (const auto i : upscaled) {\n        std::cout &lt;&lt; i &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>upsample_weighted from 3 to 14: 10 11.5385 13.0769 14.6154 16.1538 17.6923 19.2308 20.7692 22.3077 23.8462 25.3846 26.9231 28.4615 30 </p>\n</blockquote>\n\n<p>Code example 2, this one will \"copy\" every source elements and use weighted average only to fill up gaps between, so as much of original data as possible is preserved (for the price of the result being not linearly-upscaled of original data set, but \"aliased\" to \"grid\" defined by target size):</p>\n\n<p>(the code is pretty much identical to first one, except one <code>if</code> line in the upscaler)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cassert&gt;\n\nstatic double get_upscale_value(const size_t total_weight, const size_t right_weight, const double left, const double right) {\n    // do the simple weighted average for demonstration purposes\n    const size_t left_weight = total_weight - right_weight;\n    return (left * left_weight + right * right_weight) / total_weight;\n}\n\n// identical to \"upsample_weighted\", except all source values from \"in\" are copied into result\n// and only extra added values (to make the target size) are generated by \"get_upscale_value\"\nstd::vector&lt;double&gt; upsample_copy_preferred(std::vector&lt;double&gt;&amp; in, size_t n)\n{\n    assert( 2 &lt;= in.size() &amp;&amp; in.size() &lt;= n ); // this is really only upscaling (can't downscale)\n\n    // resulting vector variable\n    std::vector&lt;double&gt; upscaled;\n    upscaled.reserve(n);\n\n    // upscaling factors variables and constants\n    size_t index_left = 0;                      // first \"left\" item is the in[0] element\n    size_t weight_right = 0;                    // and \"right\" has zero weight (i.e. in[0] is copied)\n    const size_t in_weight = n - 1;             // total weight of single \"in\" element\n    const size_t weight_add = in.size() - 1;    // shift of weight between \"upscaled\" elements\n\n    while (upscaled.size() &lt; n) {               // add N upscaled items\n/* ! */ if (weight_right &lt; weight_add) { /* ! this line is modified */\n            // most of the weight on left -&gt; copy it (don't taint it by upscaling)\n            upscaled.push_back(in[index_left]);\n        } else {\n            // the weight is somewhere between \"left\" and \"right\" items of \"in\" vector\n            // i.e. weight = 1..(in_weight-1) (\"in_weight\" is full \"right\" value, never happens)\n            double upscaled_val = get_upscale_value(in_weight, weight_right, in[index_left], in[index_left+1]);\n            upscaled.push_back(upscaled_val);\n        }\n        weight_right += weight_add;\n        if (in_weight &lt;= weight_right) {\n            // the weight shifted so much that \"right\" is new \"left\"\n            ++index_left;\n            weight_right -= in_weight;\n        }\n    }\n\n    return upscaled;\n}\n\nint main(int argc, const char *argv[])\n{\n    std::vector&lt;double&gt; in { 10, 20, 30 };\n//    std::vector&lt;double&gt; in { 20, 10, 40 };\n\n    std::vector&lt;double&gt; upscaled = upsample_copy_preferred(in, 14);\n    std::cout &lt;&lt; \"upsample_copy_preferred from \" &lt;&lt; in.size() &lt;&lt; \" to \" &lt;&lt; upscaled.size() &lt;&lt; \": \";\n    for (const auto i : upscaled) {\n        std::cout &lt;&lt; i &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>upsample_copy_preferred from 3 to 14: 10 11.5385 13.0769 14.6154 16.1538 17.6923 19.2308 20 22.3077 23.8462 25.3846 26.9231 28.4615 30 </p>\n</blockquote>\n\n<p>(notice how \"20.7692\" from example 1 is here just \"20\" - copy of original sample, even if at that point the \"30\" has some small weight if linear interpolation is considered)</p>\n"}], "owner": {"reputation": 143, "user_id": 8697243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6e1b24b4fe3f0936b2ec1eca04b0d?s=128&d=identicon&r=PG&f=1", "display_name": "student_11", "link": "https://stackoverflow.com/users/8697243/student-11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 2, "accepted_answer_id": 57300727, "answer_count": 1, "score": 5, "last_activity_date": 1564622740, "creation_date": 1564564464, "question_id": 57287252, "link": "https://stackoverflow.com/questions/57287252/upsampling-insert-extra-values-between-each-consecutive-elements-of-a-vector", "title": "Upsampling: insert extra values between each consecutive elements of a vector", "body": "<p>Suppose we a have a vector V consisting of 20 floating point numbers. Is it possible to insert values between each pair of these floating points such that vector V becomes a vector of exactly 50 numbers.</p>\n\n<p>The inserted value should be a random number between upper and lower value I've decided to insert a midpoint of two values between the two.</p>\n\n<p>I have try the following:</p>\n\n<pre><code> vector&lt;double&gt; upsample(vector&lt;double&gt;&amp; in)\n {\n\n    vector&lt;double&gt; temp;\n    for (int i = 1; i &lt;= in.size() - 1 ; i++)\n    {\n        double sample = (in[i] + in[i - 1]) / 2;\n        temp.push_back(in[i - 1]);\n        temp.push_back(sample);\n    }\n    temp.push_back(in.back());\n    return temp;\n}\n</code></pre>\n\n<p>with this function the input vector elements increases by 2(n) - 1 (20 elements becomes 39). It can be possible that the input vector has different sizes less than 50.</p>\n\n<p>I think it can be done by inserting more than one value between two elements randomly to have a vector of size 50 (e.g. between V[0] and V[1] insert 3 values, between V[3] and V[4] insert 1 value, etc.). Is this possible?</p>\n\n<p>Could you please guide me how to perform this?\nThank you.</p>\n"}, {"tags": ["c++", "visual-studio", "googletest", "visual-studio-2019", "googlemock"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564565218, "post_id": 57287163, "comment_id": 101069686, "body": "Problem is specific your your machine/code. Your example simply <a href=\"https://godbolt.org/z/uGRhtp\" rel=\"nofollow noreferrer\">works in both versions</a>. Something bad is done in code which you didn&#39;t show."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564565456, "post_id": 57287163, "comment_id": 101069844, "body": "Also there are couple things which should be done in a <a href=\"https://godbolt.org/z/0mNXfE\" rel=\"nofollow noreferrer\">bit different way</a>."}, {"owner": {"reputation": 83, "user_id": 8574536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/US7e6.jpg?s=128&g=1", "display_name": "aminator", "link": "https://stackoverflow.com/users/8574536/aminator"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564566600, "post_id": 57287163, "comment_id": 101070533, "body": "I copy&amp;pasted your code samples into my Source.cpp and Visual Studio will still tell me &quot;Function Definition for &#39;MOCK_METHOD&#39; not found.&quot;  also there is nothing in the project except the Source.cpp and packages.config that I showed <a href=\"https://ibb.co/YXyNcbZ\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564567652, "post_id": 57287163, "comment_id": 101071168, "body": "Just to be clear: is this a build issue or just a warning shown by IDE? AFAIK Visual Studio IDE without ReSharper installed shows some false positive warnings when it sees some macros from gtest/gmock."}, {"owner": {"reputation": 83, "user_id": 8574536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/US7e6.jpg?s=128&g=1", "display_name": "aminator", "link": "https://stackoverflow.com/users/8574536/aminator"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564568192, "post_id": 57287163, "comment_id": 101071511, "body": "I copy&amp;pasted this code: <a href=\"https://godbolt.org/z/Il-Fxc\" rel=\"nofollow noreferrer\">link</a>  and it gave me this complie output: <code>1&gt;Source.cpp 1&gt;C:\\Users\\Amin Abromand\\source\\repos\\Project2\\Project2\\Source.cpp(14,25): error C2061:  syntax error: identifier &#39;PenUp&#39; 1&gt;C:\\Users\\Amin Abromand\\source\\repos\\Project2\\Project2\\Source.cpp(14,42): error C4430:  missing type specifier - int assumed. Note: C++ does not support default-int 1&gt;C:\\Users\\Amin Abromand\\source\\repos\\Project2\\Project2\\Source.cpp(14,42): warning C4183:  &#39;MOCK_METHOD&#39;: missing return type; assumed to be a member function returning &#39;int&#39;</code>"}, {"owner": {"reputation": 83, "user_id": 8574536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/US7e6.jpg?s=128&g=1", "display_name": "aminator", "link": "https://stackoverflow.com/users/8574536/aminator"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1564579280, "post_id": 57287163, "comment_id": 101077859, "body": "I have just recognized, if you chose an x86 msvc compiler, the compiler explorer is not giving any output :("}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 8574536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/US7e6.jpg?s=128&g=1", "display_name": "aminator", "link": "https://stackoverflow.com/users/8574536/aminator"}, "is_accepted": true, "score": 0, "last_activity_date": 1564588006, "creation_date": 1564588006, "answer_id": 57294606, "question_id": 57287163, "link": "https://stackoverflow.com/questions/57287163/gmock-for-dummies-how-to-getting-started-visual-studio-2019/57294606#57294606", "title": "gMock for Dummies - How to Getting Started? (Visual-Studio-2019)", "body": "<p>I was able to compile my solution now:</p>\n\n<ol>\n<li>I created a new blank project in VS Studio 2019</li>\n<li>I cloned the google repo <a href=\"https://github.com/google/googletest\" rel=\"nofollow noreferrer\">googletest</a></li>\n<li><p>In the project properties I added C/C++ add. include directories</p>\n\n<pre><code>path\\to\\repo\\googlemock\npath\\to\\repo\\googlemock\\include\npath\\to\\repo\\googlemock\\include\\gmock\npath\\to\\repo\\googlemock\\include\\gmock\\internal\npath\\to\\repo\\googletest\npath\\to\\repo\\googletest\\include\npath\\to\\repo\\googletest\\include\\gtest\npath\\to\\repo\\googletest\\include\\gtest\\internal\n</code></pre></li>\n<li><p>I created 1 file Source.cpp</p>\n\n<pre><code>#include \"gmock/gmock.h\"\n#include \"gtest/gtest.h\"\n\n#include \"src/gmock-cardinalities.cc\"\n#include \"src/gmock-internal-utils.cc\"\n#include \"src/gmock-matchers.cc\"\n#include \"src/gmock-spec-builders.cc\"\n#include \"src/gmock.cc\"\n\n#include \"src/gtest.cc\"\n#include \"src/gtest-death-test.cc\"\n#include \"src/gtest-filepath.cc\"\n#include \"src/gtest-port.cc\"\n#include \"src/gtest-printers.cc\"\n#include \"src/gtest-test-part.cc\"\n#include \"src/gtest-typed-test.cc\"\n\nclass Turtle {\npublic:\n    virtual ~Turtle() {}\n    virtual void PenUp() = 0;\n};\n\nclass MockTurtle : public Turtle {\npublic:\n\n    //MOCK_METHOD0(PenUp, void()); // working =)\n    MOCK_METHOD(void, PenUp, (), (override)); // working =)\n\n};\n\nint main(int, const char* []) {\n    return 0;\n}\n</code></pre></li>\n</ol>\n\n<p>Idea came from <a href=\"https://blog.many-monkeys.com/using_gmock_with_visual_studio_cpp_unit_test_framework/\" rel=\"nofollow noreferrer\">this blog post</a></p>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "is_accepted": false, "score": 2, "last_activity_date": 1585808127, "creation_date": 1585808127, "answer_id": 60985253, "question_id": 57287163, "link": "https://stackoverflow.com/questions/57287163/gmock-for-dummies-how-to-getting-started-visual-studio-2019/60985253#60985253", "title": "gMock for Dummies - How to Getting Started? (Visual-Studio-2019)", "body": "<p>Here is how to do it, the <strong>Windows</strong> way. You need to install the Windows <code>cmake</code> here <a href=\"https://cmake.org/download/\" rel=\"nofollow noreferrer\">https://cmake.org/download/</a>. Because the <code>cmake</code> bundled in Cygwin is <strong>NOT</strong> compatible to <strong>Visual Studio</strong>, you need the <code>cmake.exe</code> for Windows and then run it from DOS terminal. I have <code>cygwin</code> for other things, but for all things <strong>Visual Studio</strong>, it needs to be done the Window's way in the DOS terminal. I am using <strong>Visual Studio 2019</strong>.</p>\n\n<pre><code>git clone https://github.com/google/googletest.git\n</code></pre>\n\n<p>Then open DOS terminal, granting PATH can find <code>cmake.exe</code> already. Goto where you cloned the <code>googletest</code> repo.</p>\n\n<pre><code>cd googletest\nmkdir c:\\opt\nmkdir build\ncd build\ncmake -G \"Visual Studio 16 2019\" -DCMAKE_INSTALL_PREFIX=c:\\\\opt ..\n</code></pre>\n\n<p>It shall generate the usual <code>googletest-distribution.sln</code> Visual Studio solution file. It is now time to use the mouse. Double-click on this solution file, and it shall launch <strong>Visual Studio IDE</strong>. Build <strong>ALL_BUILD</strong> and <strong>INSTALL</strong>. The <code>ALL_BUILD</code> will produce <code>*.lib</code> files and the <code>INSTALL</code> will copy these files to <code>c:\\opt</code> location. After this, the gtest/gmock lib and headers shall be located in <code>C:\\opt\\</code> folder.</p>\n"}], "owner": {"reputation": 83, "user_id": 8574536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/US7e6.jpg?s=128&g=1", "display_name": "aminator", "link": "https://stackoverflow.com/users/8574536/aminator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2622, "favorite_count": 0, "accepted_answer_id": 57294606, "answer_count": 2, "score": 0, "last_activity_date": 1585808127, "creation_date": 1564564269, "question_id": 57287163, "link": "https://stackoverflow.com/questions/57287163/gmock-for-dummies-how-to-getting-started-visual-studio-2019", "title": "gMock for Dummies - How to Getting Started? (Visual-Studio-2019)", "body": "<p>I tried to create a very simple Mock Class as per Getting Started of <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md\" rel=\"nofollow noreferrer\">gMock for Dummies</a>.</p>\n\n<ol>\n<li>I created a new blank project in VS Studio 2019</li>\n<li>I ran the package manager <code>Install-Package gmock -Version 1.8.1</code> as per this answer <a href=\"https://stackoverflow.com/questions/50053105/how-to-configure-googlemock-in-visual-studio-2017-after-already-installing-googl\">Configure GoogleMock</a></li>\n<li><p>The packages.config file that got created</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;`\n&lt;packages&gt;\n    &lt;package id=\"gmock\" version=\"1.8.1\" targetFramework=\"native\" /&gt;\n&lt;/packages&gt;\n</code></pre></li>\n<li><p>I created 1 file Source.cpp</p>\n\n<pre><code>class Turtle {\n    virtual void PenUp();\n};\n\nvoid Turtle::PenUp() {\n    return;\n}\n\n#include \"gmock/gmock.h\"\n\nclass MockTurtle : public Turtle {\npublic:\n\n    MOCK_METHOD(void, PenUp, (), (override)); // not working see Pic1\n\n    MOCK_METHOD0(PenUp, void()); // not working see Pic2\n\n};\n</code></pre></li>\n</ol>\n\n<p>The 2nd example tries a syntax like this answer <a href=\"https://stackoverflow.com/questions/38500334/how-to-mock-method-with-optional-parameter-in-google-mock/45049665\">How to mock method</a></p>\n\n<p>Pic1:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fm1xX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fm1xX.png\" alt=\"Pic1 - MOCK_METHOD\"></a></p>\n\n<p>Pic2:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SoETD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SoETD.png\" alt=\"Pic2 - MOCK_METHOD0\"></a></p>\n"}, {"tags": ["c++", "visual-studio", "cmake", "azurekinect"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 1, "creation_date": 1564574771, "post_id": 57287098, "comment_id": 101075187, "body": "Have you checked the <a href=\"https://github.com/microsoft/Azure-Kinect-Sensor-SDK/blob/develop/docs/building.md\" rel=\"nofollow noreferrer\">build docs</a>? If there are any errors, you need to be more specific, i.e.: What does your CMakeLists.txt look like? How did you include the libraries, that give you errors and so on. Did you remember to <a href=\"https://github.com/microsoft/Azure-Kinect-Sensor-SDK/blob/develop/docs/dependencies.md\" rel=\"nofollow noreferrer\">update init external dependencies</a> via <code>git submodule update --init --recursive</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11826025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9162f61f5375cc1348b689e9ceea5e62?s=128&d=identicon&r=PG&f=1", "display_name": "wes-b", "link": "https://stackoverflow.com/users/11826025/wes-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1572466737, "creation_date": 1572466737, "answer_id": 58633061, "question_id": 57287098, "link": "https://stackoverflow.com/questions/57287098/how-to-build-kinect-dk-viewer-example-with-cmake-file-in-visual-studio/58633061#58633061", "title": "How to build Kinect DK viewer example with cmake file in Visual Studio?", "body": "<p>You are probably trying to build from the ZIP file. You need to clone the repo. From building.md: </p>\n\n<blockquote>\n  <p>If you need to build from source, you have to clone the repository instead of downloading the Zip file to ensure all the submodule dependencies in place.</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 11856721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8aV3H0NDQPk/AAAAAAAAAAI/AAAAAAAAABA/EIrnkHDND4Y/photo.jpg?sz=128", "display_name": "Chlo&#233; Gevrey", "link": "https://stackoverflow.com/users/11856721/chlo%c3%a9-gevrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572466737, "creation_date": 1564564073, "last_edit_date": 1565038457, "question_id": 57287098, "link": "https://stackoverflow.com/questions/57287098/how-to-build-kinect-dk-viewer-example-with-cmake-file-in-visual-studio", "title": "How to build Kinect DK viewer example with cmake file in Visual Studio?", "body": "<p>I want to test the viewer example from the new Kinect DK sdk. I try to compile the project manually by adding headers and libs (opengl, imgui...) but I still have links errors. I try to compile the Cmake file, provided by the SDK, with cmake-gui (I just provided path to the CMakeList.txt and the path of the folder where to build the project) but when I generate the builded project I still have the same dependencies errors. </p>\n\n<p><img src=\"https://i.stack.imgur.com/F2jp0.png\" alt=\"enter image description here\"></p>\n\n<p>Is there another way of building the project with the cmake file directly in Visual Studio (2019)?</p>\n"}, {"tags": ["c++", "recursion", "stdarray"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1564564196, "post_id": 57287053, "comment_id": 101069073, "body": "<i>Why is this only observed during reverse indexing and not during forward indexing?</i> -- What did your debugging efforts reveal?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 0, "creation_date": 1564564870, "post_id": 57287053, "comment_id": 101069487, "body": "When do you check that your iterators are valid?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564565992, "post_id": 57287053, "comment_id": 101070161, "body": "Three calls to <code>circular</code> happen in the backward case. The first fulfills the opening <code>if</code>, so <code>diff</code> is 1 (0+(3-2)), and <code>return circular(--iterA, --iterB, d);</code> is invoked. That call eventually falls to the related <code>else</code>.  Within that, the nested <code>if</code> is taken because <code>if (*iterB - *iterA &lt;= diff)</code> is true (2-1 &lt;= 1), so <code>diff</code> is set back to zero and <code>return circular(--iterA, --iterB, d);</code> is taken. Finally, we&#39;re back to the first <code>if (*iterA &gt; *iterB)</code> being true again (5 &gt; 4),  so<code>return circular(--iterA, --iterB, d);</code> But <code>iterA</code> and <code>iterB</code> are already at start of sequence. UB."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564566259, "post_id": 57287053, "comment_id": 101070310, "body": "And FYI, switching to <code>direction d = direction::foward;</code> is also broken, but it takes an extra run through the recursion before it succumbs, this time when dereferencing the <code>end</code> iterators. I.e. it&#39;s just as broken; but you&#39;re not seeing it. Look closer."}, {"owner": {"reputation": 791, "user_id": 10881416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40069cb51b3d7b68984bfaca6b51d206?s=128&d=identicon&r=PG&f=1", "display_name": "Vinod", "link": "https://stackoverflow.com/users/10881416/vinod"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564570713, "post_id": 57287053, "comment_id": 101072890, "body": "@WhozCraig Based on my gdb debugging I could find that the recursion ends in the case of forward indexing before the invalid values in both the iterators are examined; as opposed to reverse indexing the gdb log of which I had reproduced in my original question."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1564583179, "post_id": 57287053, "comment_id": 101080478, "body": "Well, based on MS debugger <i>and</i> debug-iterator assertions that trip when doing things like trying to decrement an iterator already at the beginning of it sequence, or dereference an iterator sitting on <code>end()</code>, whether you realize it or not, even forward is broken with those sequences and that code."}], "owner": {"reputation": 791, "user_id": 10881416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40069cb51b3d7b68984bfaca6b51d206?s=128&d=identicon&r=PG&f=1", "display_name": "Vinod", "link": "https://stackoverflow.com/users/10881416/vinod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564563923, "creation_date": 1564563923, "question_id": 57287053, "link": "https://stackoverflow.com/questions/57287053/recursion-reverse-indexing-stdarray", "title": "Recursion reverse indexing std::array", "body": "<p>This is a simple piece of code that uses recursion:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n\nusing std::array;\nusing std::size_t;\nusing std::cout;\nusing std::endl;\n\n#define ARRAY_SZ 3\n\nenum class direction{forward, backward};\n\nint circular (array&lt;size_t,ARRAY_SZ&gt;::iterator, array&lt;size_t, ARRAY_SZ&gt;::iterator, direction);\n\nint main (void){\n\n    array&lt;size_t,ARRAY_SZ&gt; A = {5,1,3};\n    array&lt;size_t,ARRAY_SZ&gt; B = {4,2,2};\n\n    auto result = 0;\n    //direction d = direction::forward;\n    size_t distance = ARRAY_SZ - 1;\n    direction d = direction::backward;\n\n    if(d == direction::forward){\n       result = circular(A.begin(),B.begin(), d);\n       cout &lt;&lt; result &lt;&lt; endl;\n    }\n    else{\n            result = circular(A.begin() + distance, B.begin() + distance, d);\n        if(result &gt;= 0){\n            cout &lt;&lt; ARRAY_SZ - (result + 1) &lt;&lt; endl;\n        }\n        else{\n            cout &lt;&lt; result &lt;&lt; endl;\n        }\n    }\n\n    return 0;\n}\n\nint circular (array&lt;size_t,ARRAY_SZ&gt;::iterator iterA, array&lt;size_t,ARRAY_SZ&gt;::iterator iterB, direction d){\n\n    static auto count = -1; \n    static size_t diff = 0;\n\n    switch(d){\n        case direction::backward:\n            {\n                if(*iterA &gt; *iterB){\n                    diff += *iterA - *iterB;\n                    ++count;\n                    return circular(--iterA, --iterB, d);\n                }\n                else{\n                        if(*iterB - *iterA &lt;= diff){\n                            diff -= *iterB - *iterA;\n                            ++count;\n                            return circular(--iterA, --iterB, d);\n                        }\n                        else{\n                            return count;\n                        }\n                }\n            }\n            break;\n        default:\n            {\n                if(*iterA &gt; *iterB){\n                    diff += *iterA - *iterB;\n                    ++count;\n                    return circular(++iterA, ++iterB, d);\n                }\n                else{\n                        if(*iterB - *iterA &lt;= diff){\n                            diff -= *iterB - *iterA;\n                            ++count;\n                            return circular(++iterA, ++iterB, d);\n                        }\n                        else{\n                            return count;\n                        }\n                }\n            }\n            break;\n    }\n}\n</code></pre>\n\n<p>The recursive function is </p>\n\n<pre><code>int circular (array&lt;size_t,ARRAY_SZ&gt;::iterator, array&lt;size_t, ARRAY_SZ&gt;::iterator, direction);\n</code></pre>\n\n<p>The implemented logic inside this function works as expected for the forward indexing of both the arrays; the recursion ends as expected returning a value of <code>2</code> for <code>count</code>. </p>\n\n<p>However, in the case of reverse indexing, the recursion goes one iteration beyond the expected end point, as evinced by the following <code>gdb</code> log:</p>\n\n<pre><code>Thread 1 \"a\" hit Breakpoint 1, circular (iterA=0xffffcb78, iterB=0xffffcb58, d=direction::backward) at code.cpp:49\n49          switch(d){\n(gdb) n\n52                      if(*iterA &gt; *iterB){\n(gdb) n\n53                          diff += *iterA - *iterB;\n(gdb) p *iterA\n$12 = 6445809520\n(gdb) p *iterB\n$13 = 6445644288\n(gdb) \n</code></pre>\n\n<p>As shown in the log, both <code>iterA</code> and <code>iterB</code> now point to garbage values. </p>\n\n<p>Why is this only observed during reverse indexing and not during forward indexing? </p>\n"}, {"tags": ["c++", "c", "stm32", "flash-memory", "stm32ldiscovery"], "comments": [{"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 1, "creation_date": 1564643475, "post_id": 57286886, "comment_id": 101100014, "body": "It&#39;s not clear why you need to swap memory. Why not calling the entry point of the application 2 from your boot loader ?"}, {"owner": {"reputation": 2336, "user_id": 31152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BozWc.jpg?s=128&g=1", "display_name": "Malkocoglu", "link": "https://stackoverflow.com/users/31152/malkocoglu"}, "edited": false, "score": 0, "creation_date": 1564737151, "post_id": 57286886, "comment_id": 101137097, "body": "I do not know this specific model, but page sizes may differ (most probably get bigger) depending on their start address..."}], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 3209700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff587d3b6bcf18f37e537946c080d291?s=128&d=identicon&r=PG&f=1", "display_name": "Terje", "link": "https://stackoverflow.com/users/3209700/terje"}, "is_accepted": true, "score": 1, "last_activity_date": 1564736769, "creation_date": 1564736769, "answer_id": 57323258, "question_id": 57286886, "link": "https://stackoverflow.com/questions/57286886/how-to-swap-two-memory-regions-from-different-banks-in-flash-memory-for-stm32l47/57323258#57323258", "title": "How to swap two memory regions from different banks in FLASH Memory for STM32L475?", "body": "<p>One possible workaround/different approach is to integrate the bootloader functionality into both application 1 and application 2, and having each application in its own flash bank (1 and 2). Using dual bank mode makes switching back and forth between applications much easier. I have used this approach with an STM32F7 device.</p>\n\n<p>When the device boots it is configured to boot from flash bank 1 or 2 depending on several device option bytes/settings. If your code in the bootloader/application decides to boot into the other application, it can do this by modifying some option bytes and then performing a soft reset. Also, while running bootloader/application from one flash bank, the other flash bank can be updated.</p>\n\n<p>If using this approach to do firmware updates, you must be especially careful that new firmware versions do not break the firmware update functionality of the bootloader.</p>\n"}], "owner": {"reputation": 81, "user_id": 11642594, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a6b5XWAgnhA/AAAAAAAAAAI/AAAAAAAAArs/c_-a-liPyCs/photo.jpg?sz=128", "display_name": "Shetu Raj", "link": "https://stackoverflow.com/users/11642594/shetu-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 57323258, "answer_count": 1, "score": 0, "last_activity_date": 1564736769, "creation_date": 1564563423, "last_edit_date": 1564598025, "question_id": 57286886, "link": "https://stackoverflow.com/questions/57286886/how-to-swap-two-memory-regions-from-different-banks-in-flash-memory-for-stm32l47", "title": "How to swap two memory regions from different banks in FLASH Memory for STM32L475?", "body": "<p>I am working on B-L475E-IOT01A2 which is a STM32L475 series Discovery IoT kit and has an ARM M4 cortex. It has two banks of FLASH Memory of size 512 KB each. I am implementing two applications along with a bootloader and all of them are stored in the FLASH. Since there is very little space, the bootloader, the 1st application and some part of the 2nd application is stored in the 1st bank whereas the 2nd bank contains the remaining part of the 2nd application. So at a point in the bootloader program, I need to swap both the applications.</p>\n\n<p>The problem is that only some part of both the applications is getting swapped because the 2nd Application is stored partly in both the banks. Only one page (2 KB) of memory can be written at once in the FLASH . Both the applications have a size of 384 KB and after calculation it turns out to be 192 pages. But after running the swapping program only 72 pages were swapped.</p>\n\n<p>Here are the addresses of the applications and the bootloader.</p>\n\n<pre><code>BOOTLOADER_ADDRESS 0x08000000,  (Size = 48K )\n\nAPPLICATION1_ADDRESS 0x0800F000 (Size = 384 KB)\n\nAPPLICATION2_ADDRESS 0x0806F800 (Size = 384 KB)\n</code></pre>\n\n<p>So what should I do to ensure proper swapping? Should I enable dual bank mode or store the 2nd Application in the 2nd bank or do something else?</p>\n\n<p>Your help will be highly appreciated.</p>\n\n<p>Thanks,</p>\n\n<p>Shetu</p>\n"}]