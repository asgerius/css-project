[{"tags": ["c++", "winapi", "registry", "dword"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487807216, "post_id": 42404439, "comment_id": 71955757, "body": "&quot;Not working&quot; is not a technical description of a problem. What exactly happens when you run this? What are the return codes on each line?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1487807581, "post_id": 42404439, "comment_id": 71955904, "body": "how you call <code>RegSetValueEx</code> completely wrong. must be <code>DWORD d = 1;RegSetValueEx(hKey, L&quot;test&quot;, REG_DWORD, &amp;d, sizeof(d));</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1487807587, "post_id": 42404439, "comment_id": 71955908, "body": "You are probably just ignoring the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384232.aspx\" rel=\"nofollow noreferrer\">Registry Redirector</a> and then it gets all mad, and ignores you."}, {"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487807720, "post_id": 42404439, "comment_id": 71955966, "body": "At first the Message Box comes up and says that the Button was clicked, but it doesn&#39;t write into registry. How can I check for return codes? I will try to find out :)"}, {"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487809703, "post_id": 42404439, "comment_id": 71956567, "body": "I get this message.  argument of type unsigned int is incompatible with parameter of type const BYTE *"}, {"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487810057, "post_id": 42404439, "comment_id": 71956662, "body": "And too few arguments in function call."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1487810754, "post_id": 42404439, "comment_id": 71956847, "body": "If you&#39;re setting a <code>REG_DWORD</code> you have to give it a <code>DWORD</code>, not a string."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1496941786, "post_id": 42404439, "comment_id": 75881182, "body": "It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/42404439/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487814014, "post_id": 42405490, "comment_id": 71957878, "body": "OK, I was thinking about this, but I was not sure. Thank you! I will try to run in administrator mode."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1487813757, "creation_date": 1487813757, "answer_id": 42405490, "question_id": 42404439, "link": "https://stackoverflow.com/questions/42404439/how-to-write-a-32-bit-d-word-to-windows-registry-in-c/42405490#42405490", "title": "How to write a 32 Bit D-Word to Windows registry in C++", "body": "<p>You can't write to any key under <code>HKEY_LOCAL_MACHINE</code> unless the program is running with elevated privileges, i.e. administrator mode. The call to <code>RegOpenKeyEx</code> or <code>RegSetValueEx</code> will fail.</p>\n"}, {"comments": [{"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487814989, "post_id": 42405531, "comment_id": 71958186, "body": "I try&#39;d to run in administrator mode by starting Visual Studio in Administrator mode. Still not working."}, {"owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "edited": false, "score": 0, "creation_date": 1487815041, "post_id": 42405531, "comment_id": 71958203, "body": "And yes, I am writing 32bit code on 64bit machine. Thank you!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1487814308, "last_edit_date": 1487814308, "creation_date": 1487813997, "answer_id": 42405531, "question_id": 42404439, "link": "https://stackoverflow.com/questions/42404439/how-to-write-a-32-bit-d-word-to-windows-registry-in-c/42405531#42405531", "title": "How to write a 32 Bit D-Word to Windows registry in C++", "body": "<p>When opening a Registry key, you should request only the rights you actually need.  So replace <code>KEY_ALL_ACCESS</code> with <code>KEY_SET_VALUE</code> instead, since all you are doing is writing a value.  But even then, you might still need to run your app with elevated permissions in order to write to <code>HKEY_LOCAL_MAHCINE</code>, unless you give your user account write access to the Windows Defender key beforehand.</p>\n\n<p>Also, if your code is compiled as 32bit and runs on a 64bit system, and it needs to write to the 64bit Registry, then you have to include the <code>KEY_WOW64_64KEY</code> flag otherwise you may be subject to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384235.aspx\" rel=\"nofollow noreferrer\">Registry Reflection</a>/<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384232.aspx\" rel=\"nofollow noreferrer\">Registry Redirection</a>.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>case 1:\n{\n    ::MessageBox(hWnd, L\"Button was Pressed\", L\"Button was clicked?\", MB_OK);\n\n    DWORD value = 1;\n    DWORD flags = KEY_SET_VALUE;\n\n    #if !defined(_WIN64)\n    BOOL bIsWow64Process = FALSE;\n    if (IsWow64Process(GetCurrentProcess(), &amp;bIsWow64Process) &amp;&amp; bIsWow64Process)\n        flags |= KEY_WOW64_64KEY;\n    #endif\n\n    HKEY hKey;\n    LONG status = RegOpenKeyEx(HKEY_LOCAL_MACHINE, L\"\\\\SOFTWARE\\\\Policies\\\\Microsoft\\\\Windows Defender\", 0, flags, &amp;hKey);\n    if ((status == ERROR_SUCCESS) &amp;&amp; (hKey != NULL))\n    {\n        status = RegSetValueEx(hKey, L\"DisableAntiSpyware\", 0, REG_DWORD, (const BYTE*)&amp;value, sizeof(value));\n        RegCloseKey(hKey);\n    }\n\n    ::MessageBeep(MB_ICONERROR);\n}\nbreak;\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 7380157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2LD0LPKTvDM/AAAAAAAAAAI/AAAAAAAAAAs/4dCfXkSbCe8/photo.jpg?sz=128", "display_name": "Sardar Agabejli", "link": "https://stackoverflow.com/users/7380157/sardar-agabejli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 42405531, "answer_count": 2, "score": -1, "last_activity_date": 1508341254, "creation_date": 1487807058, "last_edit_date": 1508341254, "question_id": 42404439, "link": "https://stackoverflow.com/questions/42404439/how-to-write-a-32-bit-d-word-to-windows-registry-in-c", "title": "How to write a 32 Bit D-Word to Windows registry in C++", "body": "<p>I am trying to disable the Windows Defender using a C++ Win32API application.\nTo do that I need to write a D Word into the registry (DisableAntiSpyware = 1).\nI always do that manually after installing a new Windows.\nSo here is my code, but its not working.\nMaybe someone could tell me why or what is wrong with it. Thank you!</p>\n\n<p>OK I've changed the code a bit, still not working...</p>\n\n<pre><code>        case 1:\n\n            //::MessageBeep(MB_ICONERROR);\n            ::MessageBox(hWnd, L\"Button was Pressed\",L\"Button was clicked?\",MB_OK);\n\n            LONG\n            SetRegValue\n            (\n            const wchar_t* path\n            , const wchar_t *name\n            , const BYTE *value\n\n                );\n            {\n                LONG status;\n                HKEY hKey;\n\n                DWORD value = 0x00000001;\n\n                status = RegOpenKeyEx(HKEY_LOCAL_MACHINE, L\"\\\\SOFTWARE\\\\Policies\\\\Microsoft\\\\Windows Defender\", 0, KEY_ALL_ACCESS, &amp;hKey);\n                if ((status == ERROR_SUCCESS) &amp;&amp; (hKey != NULL))\n                {\n                    status = RegSetValueEx(hKey, L\"test\", 0, REG_DWORD, (const BYTE*)&amp;value,sizeof(value));\n                    RegCloseKey(hKey);\n                }\n                return status;\n\n                ::MessageBeep(MB_ICONERROR);\n            }\n        }\n    }\n    break;\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 4, "creation_date": 1487818767, "post_id": 42404384, "comment_id": 71959194, "body": "Remove child, then <code>deleteLater()</code>."}, {"owner": {"reputation": 2039, "user_id": 2266412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TvyMj.jpg?s=128&g=1", "display_name": "Max Go", "link": "https://stackoverflow.com/users/2266412/max-go"}, "edited": false, "score": 2, "creation_date": 1487818799, "post_id": 42404384, "comment_id": 71959205, "body": "Will it work if you just call setParent(nullptr) on scheduling of object&#39;s deletion?"}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1487896497, "post_id": 42404384, "comment_id": 72003007, "body": "Thanks, guys. Will go with picking it out of the relevant lists by hand, then."}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1487896019, "post_id": 42417224, "comment_id": 72002880, "body": "@ Benjamin T It&#39;s counterintuitive because it&#39;s not how it normally works. After you mark a file for deletion, for instance, OS API does not list it along with normal files anymore. The file itself may be deleted much later and after several system-level procedures - all but the final one reversible - but from the business logic standpoint file&#39;s lifetime ends when you set the &quot;delete this thing&quot; flag."}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1487920583, "post_id": 42417224, "comment_id": 72010367, "body": "@sigil The object is not &quot;marked&quot; for deletion, it is &quot;scheduled&quot; for deletion. Calling &quot;deleteLater&quot; do not change an object it just tells you that at some point in the future it will self delete. Generally speaking you shouldn&#39;t assume an API will do more than documented: &quot;deleteLater&quot; is not &quot;markAsDeleted&quot; and nowhere in Qt documentation it says that &quot;about to be deleted object are not listed&quot;."}], "tags": [], "owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1487856783, "creation_date": 1487856783, "answer_id": 42417224, "question_id": 42404384, "link": "https://stackoverflow.com/questions/42404384/how-to-track-objects-scheduled-for-later-deletion/42417224#42417224", "title": "How to track objects scheduled for later deletion?", "body": "<p>As of Qt 5.8, there are no way to track objects scheduled for deletion out of the box.</p>\n\n<p>Calling <code>deleteLater()</code> just post an event (<code>QDeferredDeleteEvent</code>) to the target object. As there is no way to get the list of pending events you cannot know which object will receive a QDeferredDeleteEvent.</p>\n\n<p>To achieve what you want there are several solutions:</p>\n\n<ol>\n<li>Use a \"DeleteLaterManager\"\nA class with a \"deleteObject(QObject *)\" function that will call deletelater() and keep track of the object until deleted.</li>\n<li>Reimplement QAbstractEventDispatcher and track events of type <code>QEvent::DeferredDelete</code>.</li>\n<li>Use a custom event class of type <code>QEvent::DeferredDelete</code> and instead of calling <code>deleteLater()</code> call  <code>QCoreApplication::postEvent()</code>.</li>\n</ol>\n\n<p>If you are only concerned with such object showing in child lists, you could simply remove their parent when calling deleteLater().</p>\n\n<p>On a side note, why \"this behaviour is seriously counterintuitive\"? The documentation of <code>deleteLater()</code> simply states that the object will be scheduled for deletion, why would the parent/child relation be affected?</p>\n"}], "owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1487856783, "creation_date": 1487806733, "last_edit_date": 1487809787, "question_id": 42404384, "link": "https://stackoverflow.com/questions/42404384/how-to-track-objects-scheduled-for-later-deletion", "title": "How to track objects scheduled for later deletion?", "body": "<p>It's often recommended to use <code>deleteLater()</code> instead of normal <code>delete</code> in Qt. However, it leads to a problem of dangling objects: they are marked for deletion but still appear on children lists returned by Qt API. (Since this behaviour is seriously counterintuitive, my rapidly developing Qt quirks sense made me verify it. They do.) So, is there an idiomatic way to track such objects? I could, of course, use an ad-hoc solution like</p>\n\n<pre><code>class DeleteLaterable\n{\npublic:\n     void markForDeletion() { mMarked = true; }\n     bool isMarked() const { return mMarked; }\nprivate:\n     bool mMarked = false;\n};\n</code></pre>\n\n<p>and publicly inherit everything from it, but it opens a whole different can of virtual inheritance worms. Any better ideas?</p>\n"}, {"tags": ["c++", "token"], "comments": [{"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1487807554, "post_id": 42404343, "comment_id": 71955892, "body": "&quot;The code comes up blank&quot;. What do you mean? There are some errors here so it shouldn&#39;t even compile."}, {"owner": {"reputation": 554, "user_id": 3022930, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af9c1301a4eceaa87411fdce4843c975?s=128&d=identicon&r=PG&f=1", "display_name": "QuinnFTW", "link": "https://stackoverflow.com/users/3022930/quinnftw"}, "edited": false, "score": 1, "creation_date": 1487807726, "post_id": 42404343, "comment_id": 71955970, "body": "result.push_back(); [sic], try result.emplace_back(token);"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487810785, "post_id": 42404343, "comment_id": 71956855, "body": "Can you please post a complete example program that can be compiled as-is? Would make it much easier to help..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487810845, "post_id": 42404343, "comment_id": 71956877, "body": "<code>while(inFile.good()) {</code> That&#39;s all well and good, but what you really want to know is the state of the stream after <code>getline(inFile, s);</code>. <code>while(getline(inFile, s)) {</code> gives you the best of both worlds. More details here: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487811109, "post_id": 42404709, "comment_id": 71956954, "body": "Wouldn&#39;t mind knowing what earned this the downvotification. Yes this can be done with regex and some deeper stream parsing with a stringstream, but really"}, {"owner": {"reputation": 27, "user_id": 7083151, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f75d72ec732868612528b1c765faeaad?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/7083151/wes"}, "edited": false, "score": 0, "creation_date": 1487829508, "post_id": 42404709, "comment_id": 71962817, "body": "Actually this helped me! My program works perfectly. I have no idea why someone would down vote this because this is actually the solution. Thank you for your help."}], "tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": true, "score": -1, "last_activity_date": 1487808640, "creation_date": 1487808640, "answer_id": 42404709, "question_id": 42404343, "link": "https://stackoverflow.com/questions/42404343/how-do-you-parse-a-file-into-a-vector-of-tokens/42404709#42404709", "title": "How do you parse a file into a vector of tokens?", "body": "<p>You are good, except some errors:</p>\n\n<p>First:</p>\n\n<pre><code>vector&lt;string&gt; result(1);\n</code></pre>\n\n<p>Why would you have one empty <code>std::string</code> at the start? That would break your vector, and the result would be like: <code>\"\", \"one\", \"two\", \"three\", ...</code>.\nChange it to:</p>\n\n<pre><code>vector&lt;string&gt; result;\n</code></pre>\n\n<p>Second:</p>\n\n<pre><code>result.push_back();\n</code></pre>\n\n<p>You can't call <code>push_back</code> with no arguments. With logic of your program, you should <code>push_back</code> the <code>token</code>, so change it to:</p>\n\n<pre><code>result.push_back(token);\n</code></pre>\n\n<p>Third:</p>\n\n<p>You don't free allocated memory. After inner while, call:</p>\n\n<pre><code>delete [] str;\n</code></pre>\n\n<p>Also <code>std::string s</code> is not visible in your function, but I assume it is global.</p>\n"}], "owner": {"reputation": 27, "user_id": 7083151, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f75d72ec732868612528b1c765faeaad?s=128&d=identicon&r=PG&f=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/7083151/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 42404709, "answer_count": 1, "score": -2, "last_activity_date": 1487808640, "creation_date": 1487806507, "question_id": 42404343, "link": "https://stackoverflow.com/questions/42404343/how-do-you-parse-a-file-into-a-vector-of-tokens", "title": "How do you parse a file into a vector of tokens?", "body": "<p>So what I want to do is to create a c++ function which reads in a file and converts that file's text to a vector of tokens.    </p>\n\n<p>Now the text file I have requires many delimiters including periods, quotation marks, etc. so I thought strtok would work better than sstream to read in tokens. However when traversing through my vector i notice there is nothing in it. The code comes up blank. What am I doing wrong?    </p>\n\n<p>Please help me!  </p>\n\n<p>My code is here:</p>\n\n<pre><code>void getTokenFreq(string inFile_name) {\nifstream inFile;\nint n = 0;\nchar *token;\nvector&lt;string&gt; result(1);\n\ninFile.open(inFile_name);\n\nif (inFile.fail()){\n    cout &lt;&lt; \"Fail to open the file tmp.txt.\\n\";\n    exit(-1);\n}\n\nwhile(inFile.good()) {\n    getline(inFile, s);\n    char *str = new char[s.length() + 1];\n    strcpy(str, s.c_str());\n    token = strtok(str, \" \u2019\u2014\\\",;.:?\u201c\u201d\");\n    while (token != NULL) {\n        result.push_back();\n        token = strtok (NULL, \" \u2019\u2014\\\",;.:?\u201c\u201d\");\n        n++;\n    }\n}\n\nfor(int i = 0; i &lt; n; i++) {\n    cout &lt;&lt; result[i];\n}\n\ninFile.close();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "matrix", "googletest", "throw"], "comments": [{"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1488208056, "post_id": 42404191, "comment_id": 72117642, "body": "<code>size_t(-2)</code> is not less than 1!  size_t is unsigned type - read about <a href=\"https://cs.wikipedia.org/wiki/Dvojkov%C3%BD_dopln%C4%9Bk\" rel=\"nofollow noreferrer\">cs.wikipedia.org/wiki/Dvojkov%C3%BD_dopln%C4%9Bk</a>"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1488208094, "post_id": 42404191, "comment_id": 72117675, "body": "as far as I can guess here - what you really get is <code>std::bad_alloc</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6944506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82fde875f2e3fe8fe4ceab02dddfdfd?s=128&d=identicon&r=PG&f=1", "display_name": "Crky", "link": "https://stackoverflow.com/users/6944506/crky"}, "edited": false, "score": 0, "creation_date": 1487836226, "post_id": 42404210, "comment_id": 71965904, "body": "Yea thank you for your response. The problem is I cant change the code. Im just doing tests so do you have any idea how to solve this with calling               new ?"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 3, "user_id": 6944506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82fde875f2e3fe8fe4ceab02dddfdfd?s=128&d=identicon&r=PG&f=1", "display_name": "Crky", "link": "https://stackoverflow.com/users/6944506/crky"}, "edited": false, "score": 0, "creation_date": 1487839390, "post_id": 42404210, "comment_id": 71967663, "body": "Can you try <code>EXPECT_THROW(TestedMatrix = new Matrix(-2,3),void*);</code>?"}, {"owner": {"reputation": 3, "user_id": 6944506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82fde875f2e3fe8fe4ceab02dddfdfd?s=128&d=identicon&r=PG&f=1", "display_name": "Crky", "link": "https://stackoverflow.com/users/6944506/crky"}, "edited": false, "score": 0, "creation_date": 1487840831, "post_id": 42404210, "comment_id": 71968570, "body": "No, its not working. Alsa can I ask you if its better to use Matrix *TestedMatrix or Matrix Tested Matrix. Whats better about testing with pointer or vise versa . Thanks."}], "tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": true, "score": 5, "last_activity_date": 1487805786, "creation_date": 1487805786, "answer_id": 42404210, "question_id": 42404191, "link": "https://stackoverflow.com/questions/42404191/expect-throw-actual-it-throws-a-different-type-google-tests/42404210#42404210", "title": "EXPECT_THROW - Actual: it throws a different type, google tests", "body": "<p>Don't call <code>new</code>.  </p>\n\n<pre><code>Matrix::Matrix(size_t row, size_t col)\n{\n  if(row &lt; 1 || col &lt; 1)\n    throw std::runtime_error(\"Minimalni velikost matice je 1x1\");\n  matrix = std::vector&lt;std::vector&lt; double &gt; &gt;(row,std::vector&lt;double&gt;(col, 0));\n}\n</code></pre>\n\n<p><code>new</code> is going to return a <code>void*</code> which is why you are getting the \"exception is of different type\" error.</p>\n"}], "owner": {"reputation": 3, "user_id": 6944506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82fde875f2e3fe8fe4ceab02dddfdfd?s=128&d=identicon&r=PG&f=1", "display_name": "Crky", "link": "https://stackoverflow.com/users/6944506/crky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4957, "favorite_count": 0, "accepted_answer_id": 42404210, "answer_count": 1, "score": 0, "last_activity_date": 1487805786, "creation_date": 1487805692, "question_id": 42404191, "link": "https://stackoverflow.com/questions/42404191/expect-throw-actual-it-throws-a-different-type-google-tests", "title": "EXPECT_THROW - Actual: it throws a different type, google tests", "body": "<p>Hi guys so i have this constructor </p>\n\n<pre><code>`Matrix::Matrix(size_t row, size_t col)\n{\n  if(row &lt; 1 || col &lt; 1)\n    throw new std::runtime_error(\"Minimalni velikost matice je 1x1\");\n  matrix = std::vector&lt;std::vector&lt; double &gt; &gt;(row,std::vector&lt;double&gt;(col, 0));\n}`\n</code></pre>\n\n<p>and this test </p>\n\n<pre><code>`Matrix *TestedMatrix;\n EXPECT_THROW(TestedMatrix = new Matrix(-2,3),std::runtime_error );`\n</code></pre>\n\n<p>but im still getting that exepction is of different type. I also tried <code>std::runtime_error*</code> but result is the same. I wanted use EXPECT_ANY_THROW at first but it was not displayed in my code coverage. Thanks for help ! :)</p>\n"}, {"tags": ["c++", "string", "unicode"], "comments": [{"owner": {"reputation": 666, "user_id": 591784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c01c539fe6d1ca726f1e92ce427dd89?s=128&d=identicon&r=PG&f=1", "display_name": "Vada Poch&#233;", "link": "https://stackoverflow.com/users/591784/vada-poch%c3%a9"}, "edited": false, "score": 0, "creation_date": 1487805571, "post_id": 42404126, "comment_id": 71955095, "body": "Have you had a chance to look at <code>std::wstring</code> and/or <code>wchar_t</code>?"}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 2, "creation_date": 1487805769, "post_id": 42404126, "comment_id": 71955181, "body": "What encoding are you looking to use?"}, {"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "reply_to_user": {"reputation": 666, "user_id": 591784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c01c539fe6d1ca726f1e92ce427dd89?s=128&d=identicon&r=PG&f=1", "display_name": "Vada Poch&#233;", "link": "https://stackoverflow.com/users/591784/vada-poch%c3%a9"}, "edited": false, "score": 0, "creation_date": 1487805842, "post_id": 42404126, "comment_id": 71955199, "body": "@VadaPoch&#233; Let me read that stuff up ..."}, {"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1487805890, "post_id": 42404126, "comment_id": 71955214, "body": "@KlitosKyriacou UTF8"}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 2, "creation_date": 1487806565, "post_id": 42404126, "comment_id": 71955503, "body": "Whereas C# (and Java for that matter) does your encoding/decoding automatically during the read/write operations, in C++ you have to read your bytes as bytes and then use <a href=\"http://en.cppreference.com/w/cpp/locale/codecvt\" rel=\"nofollow noreferrer\">std::codecvt</a>. See also the question <a href=\"http://stackoverflow.com/questions/17103925/how-well-is-unicode-supported-in-c11\">How well is Unicode supported in C++11?</a>."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487806634, "post_id": 42404126, "comment_id": 71955536, "body": "The Unicode support in C++ not great. Depending on what you want to do with those strings in the end, consider using a library light ICU."}, {"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1487807299, "post_id": 42404126, "comment_id": 71955796, "body": "@KlitosKyriacou Thanks for the link! Sounds promising ... not. I&#39;ll have to read it a couple more times :D"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 4, "creation_date": 1487811493, "post_id": 42404126, "comment_id": 71957063, "body": "<i>The value of these chars map directly to unicode values.</i>  - You are aware that 16-bit data type can&#39;t hold the full unicode range?"}, {"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487838341, "post_id": 42404126, "comment_id": 71967029, "body": "@zett42 Yes, I am. But as far as I know .NET (Windows in general) is built arount UTF16. 16 bit characters are a core part of the framework. Not sure how we would read 24 or 32 bit Unicode character using .NET. But honestly, I never had issues with the .NET character encodings (yet)."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487885489, "post_id": 42404126, "comment_id": 71998590, "body": "I have updated my answer to read an UTF-8 file and convert to UTF-16 string."}], "answers": [{"comments": [{"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "edited": false, "score": 0, "creation_date": 1487889423, "post_id": 42404416, "comment_id": 72000547, "body": "The talk you linked provides some important insights into Unicode support in c++. I can recommend it to anyone who wants to better understand character encodings in gerneral (not only c++). I will go with utfcpp because from what I have figured out it appears to provide the best functionality for 1) validation and 2) conversion."}], "tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": true, "score": 0, "last_activity_date": 1487806924, "creation_date": 1487806924, "answer_id": 42404416, "question_id": 42404126, "link": "https://stackoverflow.com/questions/42404126/c-correctly-read-files-whose-unicode-characters-might-be-larger-than-a-byte/42404416#42404416", "title": "C++ Correctly read files whose Unicode characters might be larger than a byte", "body": "<p>I'd recommend watching <a href=\"https://youtu.be/tOHnXt3Ycfo\" rel=\"nofollow noreferrer\">Unicode in C++ by James McNellis</a>.<br>\nThat will help explain what facilitates C++ has and does not have when dealing with Unicode.<br>\nYou will see that C++ lacks good support for easily working with UTF8.</p>\n\n<p>Since it sounds like you want to iterate over each glyph (not just code points),<br>\nI'd recomend using a 3rd  pary library to handle the intricacies.<br>\n<a href=\"http://utfcpp.sourceforge.net/\" rel=\"nofollow noreferrer\">utfcpp</a> has worked well for me.</p>\n"}, {"comments": [{"owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "edited": false, "score": 0, "creation_date": 1487889184, "post_id": 42411341, "comment_id": 72000444, "body": "+1 for multiple reasons: Pointing out wstring and wchar_t which I NOW believe shouldn&#39;t be used for UTF8, describing different file streams and providing a sample for both UTF8 and UTF16. I did not accept this as the answer because I believe a library such as the utfcpp (mentioned by Trevor) can handle validation and decoding much better than any sample I can understand/write. Still, if someone is looking for a self written solution, this is probably the way to go. Thanks for the info  zett42 :)"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "edited": false, "score": 0, "creation_date": 1487976310, "post_id": 42411341, "comment_id": 72042903, "body": "Unfortunately I had to remove the UTF-16 example because it only read UCS-2 (see above). Should read documentation more carefully..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487976809, "post_id": 42411341, "comment_id": 72043110, "body": "Just read the file as binary. Use the standard library&#39;s machinery where it works effortlessly, do something else where it&#39;s yuck-ish. At times in the past my &quot;do something else&quot; has included writing UTF-8 codecvt-ers from scratch, but now with C++11 and later the library is not sufficiently yuck-ish in that respect, to justify the effort."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1489412647, "post_id": 42411341, "comment_id": 72645402, "body": "It gives UCS-2 because that&#39;s all it can do faced with an implementation where wchar_t is 16 bit. C++ standard requires wchar_t to be big enough for every code point, meaning 32 bits (as of 1996)."}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 2, "last_activity_date": 1487976243, "last_edit_date": 1487976243, "creation_date": 1487841085, "answer_id": 42411341, "question_id": 42404126, "link": "https://stackoverflow.com/questions/42404126/c-correctly-read-files-whose-unicode-characters-might-be-larger-than-a-byte/42411341#42411341", "title": "C++ Correctly read files whose Unicode characters might be larger than a byte", "body": "<p>The equivalent for a 16-bit \"character\" that is compatible with the Windows API would be wchar_t. Be aware though that wchar_t might be 32-bit on some platforms, so use char16_t if you want to store an UTF-16 encoded string in a platform-independent way.</p>\n\n<p>If you use char16_t on the Windows platform you have to do some casts though when passing strings to the OS API.</p>\n\n<p>The equivalent string types are:</p>\n\n<ul>\n<li><code>std::wstring</code> (wchar_t)</li>\n<li><code>std::u16string</code> (char16_t)</li>\n</ul>\n\n<p>File stream types:</p>\n\n<ul>\n<li><code>std::wifstream</code> (a typedef for <code>std::basic_ifstream&lt;wchar_t&gt;</code>)</li>\n<li><code>std::basic_ifstream&lt;char16_t&gt;</code></li>\n<li><code>std::wofstream</code> (a typedef for <code>std::basic_ofstream&lt;wchar_t&gt;</code>)</li>\n<li><code>std::basic_ofstream&lt;char16_t&gt;</code></li>\n</ul>\n\n<p><strong>Example to read an UTF-8 encoded file into an UTF-16 string:</strong></p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n\nint main()\n{   \n    std::wifstream file( L\"test_utf8.txt\" );\n\n    // Apply a locale to read UTF-8 file, skip the BOM if present and convert to UTF-16.\n    file.imbue( std::locale( file.getloc(),\n        new std::codecvt_utf8_utf16&lt;wchar_t, 0x10ffff, std::consume_header&gt; ) );\n\n    std::wstring str;\n    std::getline( file, str );\n\n    ::MessageBox( 0, str.data(), L\"test\", 0 );\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>How to read an UTF-16 encoded file into a 16-bit <code>std::wstring</code> or <code>std::u16string</code>?</strong> </p>\n\n<p>Apparently this isn't so easy.\nThere is <code>std::codecvt_utf16</code> but when used with 16-bit <code>wchar_t</code> character type it produces <a href=\"https://en.wikipedia.org/wiki/UTF-16\" rel=\"nofollow noreferrer\">UCS-2</a> which is only a subset of UTF-16, so surrogate pairs won't be read correctly. See <a href=\"http://en.cppreference.com/w/cpp/locale/codecvt_utf16\" rel=\"nofollow noreferrer\">cppreference example</a>.</p>\n\n<p>I don't know how the C++ ISO committee came to this decision, because it's completely useless in practice. At least they should have provided a flag so we could choose if we want to restrict ourselfs to UCS-2 or want to read the full UTF-16 range.</p>\n\n<p>Maybe there is another solution but right now I'm not aware of it.</p>\n"}, {"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487976547, "post_id": 42428454, "comment_id": 72043007, "body": "+1 for providing history. It should also be said that UTF-16 is very error-prone, because even if developers are not aware of surrogate pairs, it will work 99% of time because these devs will most like only test with code points in the UCS-2 range."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1487976923, "post_id": 42428454, "comment_id": 72043145, "body": "<i>UTF-8 has the penalty that random access to chars isn&#39;t possible</i> ... that&#39;s also true for UTF-16 and even UTF-32, because an <a href=\"https://en.wikipedia.org/wiki/Unicode#Abstract_characters\" rel=\"nofollow noreferrer\">abstract character</a> can be composed of multiple unicode characters."}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 2, "last_activity_date": 1487894369, "creation_date": 1487894369, "answer_id": 42428454, "question_id": 42404126, "link": "https://stackoverflow.com/questions/42404126/c-correctly-read-files-whose-unicode-characters-might-be-larger-than-a-byte/42428454#42428454", "title": "C++ Correctly read files whose Unicode characters might be larger than a byte", "body": "<p>The situation is that C's getc() was written in the 1970s. To all intents and purposes, it means \"read an octet\", not \"read a character\". Virtually all binary data is built on octets.</p>\n\n<p>Unicode allows characters beyond the range an octet can represent. So, naively, the Unicode people proposed a standard for 16 bit characters. Microsoft then incorporated the proposal early on and added wide characters (wchar_t and so on) to Windows. One problem was that 16 bits are not enough to represent every glyph in every human language with some status, another was the endianness of the binary files. So the Unicode people had to add a 32-bit unicode standard, and they then had in incorporate a little enianness and format tag at the start of Unicode files. Finally, the 16-bit Unicode glyphs didn't quite match Microsoft's wchar_t glyphs.</p>\n\n<p>So the result was a mess. It is quite difficult to read and display 16 or 32 bit Unicode files with complete accuracy and portability. Also, very many programs were still using 8 bit ascii.</p>\n\n<p>Fortunately, UTF-8 was invented. UTF-8 is backwards compatible with 7-bit ascii. If the top bit is set, then the glyph is encoded by more than one character, and there's a scheme that tells you how many. The nul byte never appears except as an end-of-string indicator. So most programs will process UTF-8 correctly, unless they try to split strings or otherwise try to treat them as English. </p>\n\n<p>UTF-8 has the penalty that random access to chars isn't possible, because of the variable length rule. But that's a minor disadvantage. Generally UTF-8 is the way to go for saving Unicode text and passing it about in programs, and you should only break it out into Unicode code points when you actually need the glyphs, e.g. for display purposes.</p>\n"}], "owner": {"reputation": 4048, "user_id": 2173516, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P3SKn.png?s=128&g=1", "display_name": "Noel Widmer", "link": "https://stackoverflow.com/users/2173516/noel-widmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 0, "accepted_answer_id": 42404416, "answer_count": 3, "score": 2, "last_activity_date": 1563135293, "creation_date": 1487805413, "last_edit_date": 1563135293, "question_id": 42404126, "link": "https://stackoverflow.com/questions/42404126/c-correctly-read-files-whose-unicode-characters-might-be-larger-than-a-byte", "title": "C++ Correctly read files whose Unicode characters might be larger than a byte", "body": "<p>I've spent many hours now reading about Unicode, its encodings and many related topics. <br>\nThe reason behind my research is because I am trying to read the contents of a file and parse them character by character.</p>\n\n<p><strong>Correct me if I am wrong please:</strong></p>\n\n<ul>\n<li>C++'s <code>getc()</code> returns an <code>int</code> which might equal <code>EOF</code>. <br> If the\nreturn value does not equal <code>EOF</code> it can be <strike>interpreted as\na</strike> safely assigned to a <code>char</code>.<br> Since <code>std::string</code> is\nbased on <code>char</code> we can build <code>std::string</code>s with these chars and use\nthose.</li>\n</ul>\n\n<p>I have a C# background where we use C#'s <code>char</code> (16bit)  for <code>string</code>s.<br>\nThe value of these <code>char</code>s map directly to unicode values.<br>\nA <code>char</code> whose value is <code>5</code> is equal to the unicode character located at <code>U+0005</code>.</p>\n\n<p>What I don't understand is how to read a file in C++ that contains characters whose values might be larger than a byte. I don't feel comfortable using <code>getc()</code> when I can only read characters whose values are limited to a byte. </p>\n\n<p>I might be missing an important point on how to correctly read files with C++.<br>\nAny insights are very much appreciated.</p>\n\n<p><em>I am running a Windows 10 x64 using VC++.<br>\nBut I'd prefer to keep this question platform-independent if that is possible.</em></p>\n\n<hr>\n\n<h3>EDIT</h3>\n\n<p>I'd like to emphasize a stack overflow post linked in the comments by Klitos Kyriacou:<br>\n<a href=\"https://stackoverflow.com/questions/17103925/how-well-is-unicode-supported-in-c11\">How well is Unicode supported in C++11?</a></p>\n\n<p>It's a quick dive into how bad Unicode is supported in C++.<br>\nFor more details you should read/watch the resources provided in the accepted answer.</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487805869, "post_id": 42404211, "comment_id": 71955203, "body": "Thanks,  that was the solution."}, {"owner": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806064, "post_id": 42404211, "comment_id": 71955284, "body": "Nevertheless, I&#39;m thinking about a possibility how I can make this more generic, i.e. without the ugly fourth void parameter"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806142, "post_id": 42404211, "comment_id": 71955318, "body": "@FloriHe - but, exactly... what do you want obtain?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806429, "post_id": 42404211, "comment_id": 71955447, "body": "@FloriHe - sorry: maybe I didn&#39;t understand: do you simply want the third type of a list?"}, {"owner": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806482, "post_id": 42404211, "comment_id": 71955472, "body": "Yep, done with this recursive template construction."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806568, "post_id": 42404211, "comment_id": 71955504, "body": "@FloriHe - but why with recursive construction; or do you want a generic struct for get the n-th type of a list (where &#39;n&#39; is a parameter?)?"}, {"owner": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487806945, "post_id": 42404211, "comment_id": 71955660, "body": "Out of curiosity."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "edited": false, "score": 0, "creation_date": 1487807088, "post_id": 42404211, "comment_id": 71955715, "body": "@FloriHe - answer expanded; hope this helps"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1487807060, "last_edit_date": 1487807060, "creation_date": 1487805786, "answer_id": 42404211, "question_id": 42404091, "link": "https://stackoverflow.com/questions/42404091/retrieve-special-type-parameter-of-recursive-variadic-template/42404211#42404211", "title": "Retrieve special type parameter of recursive variadic template", "body": "<blockquote>\n  <p>why isn't the specialized case found?</p>\n</blockquote>\n\n<p>Because there isn't a <code>void</code> in the end of the type list of</p>\n\n<pre><code>third_t&lt;int,int,std::string,unsigned&gt;::type z = \"test\";\n</code></pre>\n\n<p>If you try with</p>\n\n<pre><code>third_t&lt;int,unsigned,int,std::string,void&gt;::type z = \"test\";\n</code></pre>\n\n<p>compile.</p>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>The OP ask to get the third type using a \"recorsive construction\".</p>\n\n<p>So I suggest the costruction of a type traits that get the n-th-type (where <code>n</code> is a template parameter) of a list of types.</p>\n\n<p>Something like</p>\n\n<pre><code>template &lt;std::size_t N, typename, typename ... Ts&gt;\nstruct nth_t\n { using type = typename nth_t&lt;N-1U, Ts...&gt;::type; };\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct nth_t&lt;0U, T0, Ts...&gt;\n { using type = T0; };\n</code></pre>\n\n<p>So the third parameter can be found using the index <code>2U</code> (as usual in C/C++, starting from <code>0U</code>) as follows</p>\n\n<pre><code>nth_t&lt;2U, int, int, std::string, void&gt;::type z = \"test\";\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5038088, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/15ec74c2406d2b92897973e478e07c8d?s=128&d=identicon&r=PG&f=1", "display_name": "FloriHe", "link": "https://stackoverflow.com/users/5038088/florihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42404211, "answer_count": 1, "score": 1, "last_activity_date": 1542808219, "creation_date": 1487805292, "last_edit_date": 1542808219, "question_id": 42404091, "link": "https://stackoverflow.com/questions/42404091/retrieve-special-type-parameter-of-recursive-variadic-template", "title": "Retrieve special type parameter of recursive variadic template", "body": "<p>Is something like that possible:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename T1, typename T2, typename T3, typename T4, class ...Ts&gt;\nstruct third_t {\n\n    typedef typename third_t&lt;T2,T3,T4,Ts...&gt;::type type;\n};\n\ntemplate&lt;typename T1,typename T2, typename T3&gt;\nstruct third_t&lt;T1,T2,T3,void&gt; {\n\n    typedef T3 type;\n};\n\nint main() {\n\n    third_t&lt;int,int,std::string,unsigned&gt;::type z = \"test\";\n\n    std::cout&lt;&lt;\"string type: \"&lt;&lt;z&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>If yes, why isn't the specialized case found? I.e. it isn't even considered in the resolution.</p>\n\n<p>I get the error:</p>\n\n<pre><code>main.cpp: In instantiation of 'struct third_t&lt;int, int, std::__cxx11::basic_string&lt;char&gt;, unsigned int&gt;':\n\nmain.cpp:18:46:   required from here\n\nmain.cpp:7:56: error: wrong number of template arguments (3, should be at least 4)\n\n     typedef typename third_t&lt;T2,T3,T4,Ts...&gt;::type type;\n</code></pre>\n\n<p><strong>update:</strong></p>\n\n<p>I realized that my initial false presumption led me to think that I could \"overload\" a class as well, which of course is nonsense. Whereas something like that can be done with function templates, that</p>\n\n<pre><code>template&lt;typename T1,typename T2, typename T3&gt;\nstruct third_t { ... };\n</code></pre>\n\n<p>cannot be done with class templates, if so it would have been possible to extract the third-<strong>last</strong> parameter out of the template parameters.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1487803974, "post_id": 42403784, "comment_id": 71954527, "body": "You might be looking for <a href=\"http://en.cppreference.com/w/cpp/algorithm/next_permutation\" rel=\"nofollow noreferrer\"><code>std::next_permutation</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": -1, "last_activity_date": 1487804378, "creation_date": 1487804378, "answer_id": 42403913, "question_id": 42403784, "link": "https://stackoverflow.com/questions/42403784/trying-to-make-every-number-possibility-with-digits-from-array/42403913#42403913", "title": "Trying to make every number possibility with digits from array", "body": "<p>So its ever permutation. You have N! permuations.</p>\n\n<p>It's easiest to write the function recursively, enumerate the first digit, then then second from N-1, the third from N-2 and so on. </p>\n"}, {"tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": false, "score": 2, "last_activity_date": 1487805192, "last_edit_date": 1487805192, "creation_date": 1487804583, "answer_id": 42403953, "question_id": 42403784, "link": "https://stackoverflow.com/questions/42403784/trying-to-make-every-number-possibility-with-digits-from-array/42403953#42403953", "title": "Trying to make every number possibility with digits from array", "body": "<p>As a comment said, it sounds like you want <a href=\"http://en.cppreference.com/w/cpp/algorithm/next_permutation\" rel=\"nofollow noreferrer\">std::next_permutation</a>, here's how to use it:</p>\n\n<pre><code>int main()\n{\n    std::vector&lt;int&gt; a{ 1, 2, 3 };\n\n    std::sort(a.begin(), a.end());\n    do {\n        std::cout &lt;&lt; a &lt;&lt; \"; \";\n    } while (std::next_permutation(a.begin(), a.end()));\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that you need an overload of <code>operator&lt;&lt;()</code>:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; s, const std::vector&lt;int&gt;&amp; v)\n{\n    for (auto&amp;&amp; item : v)\n        s &lt;&lt; item;\n    return s;\n}\n</code></pre>\n\n<p>The output of this program is</p>\n\n<blockquote>\n  <p>123; 132; 213; 231; 312; 321;</p>\n</blockquote>\n\n<p>You can even make a little utility routine:</p>\n\n<pre><code>void permutations(std::ostream&amp; s, std::vector&lt;int&gt; a)\n{\n    std::sort(a.begin(), a.end());\n    do {\n        s &lt;&lt; a &lt;&lt; \"; \";\n    } while (std::next_permutation(a.begin(), a.end()));\n}\n\npermutations(std::cout, a);\nstd::cout &lt;&lt; \"\\n\";\npermutations(std::cout, { 3, 1, 4, 2 });\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7211666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60dee6a1ff86f212f4c035309ad2aef0?s=128&d=identicon&r=PG&f=1", "display_name": "blackbear2014", "link": "https://stackoverflow.com/users/7211666/blackbear2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1487805274, "creation_date": 1487803793, "last_edit_date": 1487805274, "question_id": 42403784, "link": "https://stackoverflow.com/questions/42403784/trying-to-make-every-number-possibility-with-digits-from-array", "title": "Trying to make every number possibility with digits from array", "body": "<p>I have the following array:<br>\n<code>int a[3]={1, 2, 3};</code><br>\n<strong>note: I don't know how many elements the array has.<br></strong></p>\n\n<p>I want to output</p>\n\n<blockquote>\n  <p>123; 132; 213; 231; 312; 321.</p>\n</blockquote>\n\n<p>However I don't know how many digits are found in the array. Also the same digit can't be repeated.</p>\n"}, {"tags": ["c++", "postgresql", "qt"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487803994, "post_id": 42403705, "comment_id": 71954535, "body": "Run it in Dependency Walker and see if you&#39;re missing any DLLs."}, {"owner": {"reputation": 77, "user_id": 3010266, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0184cb1abbe9bea20c6cab1fa5bc6bd8?s=128&d=identicon&r=PG&f=1", "display_name": "ExiD", "link": "https://stackoverflow.com/users/3010266/exid"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487804207, "post_id": 42403705, "comment_id": 71954615, "body": "@MrEricSir it is show nothing critical"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 1, "creation_date": 1487834300, "post_id": 42403705, "comment_id": 71964885, "body": "@ExiD , You need to use <a href=\"http://www.dependencywalker.com/help/html/application_profiling.htm\" rel=\"nofollow noreferrer\">Dependency Walker Application Profiling</a> to detect dependencies dynamically (as they are being loaded at run-time). Most likely you will find out that you need to copy <code>libpq.dll</code>, <code>libintl.dll</code> to your application&#39;s directory. . ."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 2415322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AkQW6.jpg?s=128&g=1", "display_name": "Mher Didaryan", "link": "https://stackoverflow.com/users/2415322/mher-didaryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487837600, "creation_date": 1487837600, "answer_id": 42410271, "question_id": 42403705, "link": "https://stackoverflow.com/questions/42403705/qt-release-application-dont-see-plugin/42410271#42410271", "title": "Qt release application don&#39;t see plugin", "body": "<p>To deploy qt application with plugins you should also add plugins in same folder as application. <a href=\"http://www.tripleboot.org/?p=138\" rel=\"nofollow noreferrer\">How to deploy qt applications with plugins</a></p>\n\n<p>You should also add platform folder near application to be able to deploy your application on computers where qt isn't available. </p>\n\n<p><a href=\"https://i.stack.imgur.com/AjBQo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AjBQo.png\" alt=\"Here is an example of my application\"></a>\nIt's on Linux but same applies in windows. You can only add sqldrivers in plugins folder.</p>\n\n<pre><code>qt.conf file contaians:\n\n[Paths]\nPlugins=plugins\n</code></pre>\n\n<p>Also run Dependency Walker to find all dependent libraries. </p>\n"}], "owner": {"reputation": 77, "user_id": 3010266, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0184cb1abbe9bea20c6cab1fa5bc6bd8?s=128&d=identicon&r=PG&f=1", "display_name": "ExiD", "link": "https://stackoverflow.com/users/3010266/exid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487837600, "creation_date": 1487803483, "question_id": 42403705, "link": "https://stackoverflow.com/questions/42403705/qt-release-application-dont-see-plugin", "title": "Qt release application don&#39;t see plugin", "body": "<p>I have a problem with release application, it is don't see psql driver if i start it by exe from explorer.\nBut it works perfect if i start it from visual studio...</p>\n\n<p>I place these files near exe, and no result:</p>\n\n<pre><code>unins000.dat\nmsvcp140.dll\nqsqlpsql.dll\nQt5Core.dll\nQt5Gui.dll\nQt5Network.dll\nQt5Sql.dll\nvccorlib140.dll\nServer.exe\nunins000.exe\nconfig.json\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>QSqlDatabase: QPSQL driver not loaded\nQSqlDatabase: available drivers: QSQLITE QMYSQL QMYSQL3 QODBC ODBC3 QPSQL QPSQL7\n</code></pre>\n\n<p>but i compiled that plugin defore!</p>\n\n<p>Whats can be wrong?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1487850470, "post_id": 42409249, "comment_id": 71975069, "body": "So you&#39;re saying that the fact that I have some specialization on <code>T</code> makes the compiler consider <code>A&lt;B&lt;T&gt;&gt;</code> and <code>A&lt;T, std::enable_if&lt;...&gt;&gt;</code> to be equally specialized? That&#39;s a little counter-intuitive to me (I&#39;d still expect <code>A&lt;B&lt;T&gt;&gt;</code> to be more specialized, somehow), but that makes sense."}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1487890650, "post_id": 42409249, "comment_id": 72001025, "body": "I agree it seems a little counter-intuitive at first glance but I think perhaps that&#39;s us reading more into the code than we should?  We see <code>B&lt;T&gt;</code> and think &quot;a whole class built around <code>T</code>, that must be more important than some type returned by <code>std::enable_if</code>.  But the enable test also uses <code>B&lt;T&gt;</code>.  Should that use be considered less significant than the other use?"}], "tags": [], "owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "is_accepted": true, "score": 2, "last_activity_date": 1487834005, "creation_date": 1487834005, "answer_id": 42409249, "question_id": 42403660, "link": "https://stackoverflow.com/questions/42403660/ambiguous-partial-specialization-depending-on-stdenable-if/42409249#42409249", "title": "Ambiguous partial specialization depending on std::enable_if", "body": "<p>In the <code>std::enable_if&lt;true&gt;::type</code> case your code defines two specialisations of the class A namely:</p>\n\n<ol>\n<li><code>A&lt;B&lt;T&gt;, void&gt;</code></li>\n<li><code>A&lt;T, std::enable_if&lt;true&gt;::type&gt;</code>.  </li>\n</ol>\n\n<p>Those two specialisations are quite distinct from each other.  The first specialisation is narrowly focused on the type <code>B&lt;T&gt;</code> while the second specialisation is more general fitting any type at all.  Also, in the second specialisation the <code>std::enable_if</code> expression does not depend on <code>T</code> in any way.</p>\n\n<p>For any declaration <code>A&lt;X&gt; a;</code> the type <code>X</code> will either match <code>B&lt;something&gt;</code> or not.  If it matches <code>B&lt;something&gt;</code> then the first specialisation will be used because it is \"more specialised\".  If X does not match <code>B&lt;something&gt;</code> then the second, more general specialisation will be used.  Either way you don't get the ambiguous error.</p>\n\n<p>For more details see the discussion of Partial Ordering in <a href=\"http://en.cppreference.com/w/cpp/language/partial_specialization\" rel=\"nofollow noreferrer\">partial template specialization</a></p>\n\n<p>Now let's consider the <code>std::enable_if&lt;std::is_base_of&lt;...&gt;::value&gt;::type</code> case.</p>\n\n<p>You still have two specialisations but the second specialisation is now conditional on the enable_if which in turn depends on the parameter T.</p>\n\n<ol>\n<li><code>A&lt;B&lt;T&gt;, void&gt;</code></li>\n<li><code>A&lt;T, std::enable_if&lt;...&gt;&gt;</code>.  </li>\n</ol>\n\n<p>The type <code>B&lt;int&gt;</code> now matches both specialisations (to some equal extent).  Obviously it matches the <code>A&lt;B&lt;T&gt;&gt;, void&gt;</code> specialisation but it also matches the <code>A&lt;T, std::enable_if...&gt;&gt;</code> specialisation because <code>B&lt;int&gt;</code> is a type which satisfies the conditions imposed by the <code>std::enable_if</code> expression.</p>\n\n<p>That gives you two equally valid specialisations that are candidates for your declaration of the variable <code>a</code> and so you get the \"ambiguous partial specialization\" error.</p>\n\n<p>It might help make all this a bit more concrete if you added two more declarations to <code>main</code></p>\n\n<pre><code>A&lt;C&lt;int&gt;&gt; x;\nA&lt;int&gt;    y;\n</code></pre>\n\n<p>In the <code>std::enable_if&lt;true&gt;</code> case this will compile and both declarations will call the \"there\" constructor.  </p>\n\n<p>In the more complex case the declaration of <code>x</code> will compile and invoke the \"there\" constructor but the declaration of <code>y</code> will get a compiler error.</p>\n\n<p>There is no <code>int::Var_t</code> so the <code>std::enable_if</code> expression will get a substitution failure and SFINAE will hide that specialisation.  That means there won't be any specialisation that fits <code>int</code> and you'll get the error <code>aggregate \u2018A&lt;int&gt; y\u2019 has incomplete type and cannot be defined</code></p>\n"}], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 2, "accepted_answer_id": 42409249, "answer_count": 1, "score": 5, "last_activity_date": 1487834005, "creation_date": 1487803287, "question_id": 42403660, "link": "https://stackoverflow.com/questions/42403660/ambiguous-partial-specialization-depending-on-stdenable-if", "title": "Ambiguous partial specialization depending on std::enable_if", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;class T, typename U = void&gt; class A;\n\ntemplate &lt;class T&gt;\nclass C\n{\npublic:\n    typedef T Var_t;\n};\n\ntemplate &lt;class T&gt;\nclass B : public C&lt;T&gt;\n{\n};\n\ntemplate &lt;class T&gt;\nclass A&lt;B&lt;T&gt;&gt;\n{\npublic:\n    A() { std::cout &lt;&lt; \"Here.\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;class T&gt;\nclass A&lt;T, typename std::enable_if&lt;\n                             std::is_base_of&lt;C&lt;typename T::Var_t&gt;, T&gt;::value&gt;\n                             ::type&gt;\n{\npublic:\n    A() { std::cout &lt;&lt; \"There.\" &lt;&lt; std::endl;}\n};\n\nint main() \n{\n    A&lt;B&lt;int&gt;&gt; a;\n    return 0;\n}\n</code></pre>\n\n<p>When the compiler tries to instantiate the second partial specialization with the parameter <code>B&lt;int&gt;</code>, <code>std::is_base_of&lt;C&lt;int&gt;, B&lt;int&gt;&gt;::value</code> is <code>true</code>, and therefore the <code>std::enable_if&lt;...&gt;::type</code> returns <code>void</code> (the default type if one isn't specified). This causes an \"ambiguous partial specialization\" error as the compiler can't decide between the first and second partial specializations. So far, so good. However, when I replace the code within the <code>std::enable_if</code> to simply be <code>true</code> (i.e., the second partial specialization is just <code>template &lt;class T&gt; class A&lt;T, typename std::enable_if&lt;true&gt;::type&gt;</code>), the code compiles and runs. It outputs <code>\"Here\"</code>, indicating the first specialization was chosen.</p>\n\n<p>My question is: If they both evaluate to <code>void</code> in the end, why does the behavior of <code>std::enable_if&lt;true&gt;::type</code> differ to that of <code>std::enable_if&lt;std::is_base_of&lt;...&gt;::value&gt;::type</code>?</p>\n\n<p>This behavior has been tested and verified on Ideone <a href=\"http://ideone.com/0d4p59\" rel=\"noreferrer\">here</a>.</p>\n"}, {"tags": ["c++", "windows", "winapi", "mfc", "delete-file"], "comments": [{"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 1, "creation_date": 1487801153, "post_id": 42403037, "comment_id": 71953353, "body": "Nice. A downvote without an explanation. That&#39;s pretty spineless. How could I possibly provide more details than I have here?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487801264, "post_id": 42403037, "comment_id": 71953398, "body": "<code>\\Readyshare\\...</code> this is exactly path ? or may be <code>\\\\Readyshare\\...</code> file not local ?"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487801405, "post_id": 42403037, "comment_id": 71953467, "body": "The path starts off with two backslashes, as I have it in my question. That is the <i>exact</i> path. It&#39;s on a USB drive that&#39;s connected to my router. And I haven&#39;t had any problems until I started getting these longer filenames because of the directory structure."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487801505, "post_id": 42403037, "comment_id": 71953517, "body": "<code>Windows Explorer, it shows me that folder.</code> are backup program run in same logon session as and explorer ? who mapped` \\\\readyshare`"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487801562, "post_id": 42403037, "comment_id": 71953545, "body": "@RbMm: Yes, I&#39;m running the software from the same session where I&#39;m running Windows Explorer."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487801756, "post_id": 42403037, "comment_id": 71953629, "body": "Pretty sure that filename exceeds MAX_PATH."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487801810, "post_id": 42403037, "comment_id": 71953651, "body": "@MrEricSir: Yes, me too. But don&#39;t know anything about <code>DeleteFile()</code> not being able to handle names that long. I am using Unicode."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487801883, "post_id": 42403037, "comment_id": 71953679, "body": "@JonathanWood The filename length restriction is explicitly called out in the docs for <code>DeleteFile()</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363915(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487801998, "post_id": 42403037, "comment_id": 71953739, "body": "@MrEricSir: Hmmm... it&#39;s very clear about the ANSI version, but there is another discussion related to Unicode. You might be right though. Still reading... Am I supposed to use <code>\\\\?\\\\\\Readyshare\\...</code>?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1487802945, "post_id": 42403037, "comment_id": 71954154, "body": "you need use  &quot;\\\\?\\UNC\\Readyshare\\USB 3\\...&quot;"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1487808576, "post_id": 42403037, "comment_id": 71956231, "body": "Other potential issues. I think a Visual Studio update created a very long file name for a one time usage install file that was creating issues. There was no need for the name to be so long, so I just renamed it. Going way back, SecureRom digital rights program creates garbled file names that can&#39;t be copied and are difficult to delete. Win 10 won&#39;t allow SecureRom, and Win 7 or later require the user to enable SecureRom, so it&#39;s a legacy problem dating back to Win XP (I don&#39;t know about Win Vista)."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1487802163, "post_id": 42403394, "comment_id": 71953811, "body": "`\\\\?` prefix will be worked only for local file system absolute path and not will be work for network path"}, {"owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1487802411, "post_id": 42403394, "comment_id": 71953922, "body": "@RbMm From MSDN: <code>The &quot;\\\\?\\&quot; prefix can also be used with paths constructed according to the universal naming convention (UNC). To specify such a path using UNC, use the &quot;\\\\?\\UNC\\&quot; prefix. For example, &quot;\\\\?\\UNC\\server\\share&quot;, where &quot;server&quot; is the name of the computer and &quot;share&quot; is the name of the shared folder.</code> <a href=\"https://msdn.microsoft.com/pt-br/library/windows/desktop/aa365247(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/pt-br/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487802601, "post_id": 42403394, "comment_id": 71954010, "body": "this is yes - <code>\\\\?\\UNC` will be work, but in your code is </code>\\\\?` what is wrong. really when win32 subsystem view <code>\\\\?` prefix it simply convert it to </code>\\??`"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487805079, "post_id": 42403394, "comment_id": 71954915, "body": "in case UNC path need remove two forward backsplash \\\\ before append \\\\?\\UNC\\"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1487807411, "post_id": 42403394, "comment_id": 71955843, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773712.aspx\" rel=\"nofollow noreferrer\">PathIsUNC</a> is restricted to path names of maximum length <code>MAX_PATH</code>. Unless the documentation is wrong, this code is."}, {"owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487962201, "post_id": 42403394, "comment_id": 72035911, "body": "@IInspectable I might be wrong, but <code>PathIsUNC</code> ignore the rest of the string should the beginning of it matches..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487964064, "post_id": 42403394, "comment_id": 72036846, "body": "Even if you are right, this is neither part of the documented contract, nor does it help in situations, where the UNC prefix and server part exceed <code>MAX_PATH</code> characters."}], "tags": [], "owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "is_accepted": true, "score": 7, "last_activity_date": 1487805530, "last_edit_date": 1487805530, "creation_date": 1487802065, "answer_id": 42403394, "question_id": 42403037, "link": "https://stackoverflow.com/questions/42403037/deletefile-failing-but-the-file-is-there-very-long-file-name/42403394#42403394", "title": "DeleteFile() failing but the file is there (very long file name)", "body": "<p>From <a href=\"https://msdn.microsoft.com/pt-br/library/windows/desktop/aa363915(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN</a>:</p>\n\n<blockquote>\n  <p>Parameters</p>\n  \n  <p>lpFileName [in] The name of the file to be deleted. In the ANSI\n  version of this function, the name is limited to MAX_PATH characters.\n  To extend this limit to 32,767 wide characters, call the Unicode\n  version of the function and prepend \"\\\\?\\\" to the path. For more\n  information, see Naming a File.</p>\n</blockquote>\n\n<p>Basically, you should call <code>DeleteFileW</code> prepending <code>\\\\?\\</code> for local paths and <code>\\\\?\\UNC\\</code> for remote paths, something like this: </p>\n\n<pre><code>CFileFind find;\nBOOL bContinue = find.FindFile(AppendPath(lpszPath, _T(\"*\")));\nwhile (bContinue)\n{\n    bContinue = find.FindNextFile();\n    if (!find.IsDirectory())\n    {\n        if (find.IsReadOnly())\n            ClearReadOnlyAttribute(find);\n\n        CString path = find.GetFilePath();\n        if (path.GetLength() &gt;= MAX_PATH)\n        {\n            if (PathIsUNC(path)) {\n                path.TrimLeft(_T(\"\\\\\"));\n                path.Insert(0, _T(\"\\\\\\\\?\\\\UNC\\\\\"));\n            }\n            else\n                path.Insert(0, _T(\"\\\\\\\\?\\\\\"));\n        }\n\n        if (!::DeleteFileW(path))\n            return false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 1, "accepted_answer_id": 42403394, "answer_count": 1, "score": 1, "last_activity_date": 1487805569, "creation_date": 1487800574, "last_edit_date": 1487805569, "question_id": 42403037, "link": "https://stackoverflow.com/questions/42403037/deletefile-failing-but-the-file-is-there-very-long-file-name", "title": "DeleteFile() failing but the file is there (very long file name)", "body": "<p>I'm writing a backup program that is having errors. Stepping through the code with a debugger, I'm finding I'm getting errors deleting files.</p>\n\n<p>I'm using <code>CFileFind</code> to locate the files, and I use <code>CFileFind::GetFilePath()</code> to obtain the full path name.</p>\n\n<pre><code>CFileFind find;\nBOOL bContinue = find.FindFile(AppendPath(lpszPath, _T(\"*\")));\nwhile (bContinue)\n{\n    bContinue = find.FindNextFile();\n    if (!find.IsDirectory())\n    {\n        if (find.IsReadOnly())\n            ClearReadOnlyAttribute(find);\n        if (!::DeleteFile(find.GetFilePath()))\n            return false;\n    }\n}\n</code></pre>\n\n<p><code>DeleteFile()</code> is returning <code>FALSE</code>, and <code>GetLastError()</code> is returning 3 (<code>ERROR_PATH_NOT_FOUND</code>), and was in other cases returning 2 (<code>ERROR_FILE_NOT_FOUND</code>).</p>\n\n<p>As you can see, I first attempt to remove the read-only attribute if it is set; however, I can see that the file exists and it does not have the read-only attribute.</p>\n\n<p>One thing to note is that the file name is very long. This code has actually been tested and working pretty well with shorter filenames. In this case, <code>find.GetFilePath()</code> returns:</p>\n\n<blockquote>\n  <p>\\\\Readyshare\\USB 3\\Backups\\DRIVEZ_BACKUP\\Stacey\\Backup 0001\\Music\\TO BE DELETED\\iTunes\\iTunes Media\\Music\\Dave Matthews Band\\Away from the World (Deluxe Version)\\Away from the World (Deluxe Version.itlp\\audio\\DaveMatthewsBand_AwayFromTheWorld_backgroundaudio.m4a</p>\n</blockquote>\n\n<p>And this looks correct. If I copy all but the filename into Windows Explorer, it shows me that folder. And the file exists there in that folder.</p>\n\n<p>Does anyone know why <code>DeleteFile()</code> would tell me the path or file does not exist when in fact it does?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Based on Bruno Ferreira's answer, I'm running my filenames through the following method. (Sorry for the old CString-style code, I'm updating an older MFC program.)</p>\n\n<pre><code>CString CBackupWorker::ConvertToExtendedLengthPath(LPCTSTR pszPath)\n{\n    CString s(pszPath);\n\n    if (s.GetLength() &gt;= MAX_PATH)\n    {\n        if (::isalpha(s[0]) &amp;&amp; s[1] == ':')\n        {\n            s.Insert(0, _T(\"\\\\\\\\?\\\\\"));\n        }\n        else if (s[0] == '\\\\' &amp;&amp; s[1] == '\\\\')\n        {\n            s.Delete(0, 2);\n            s.Insert(0, _T(\"\\\\\\\\\\?\\\\UNC\\\\\"));\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p>As you can see the code, prepends the appropriate prefix if the file name exceeds <code>MAX_PATH</code>. Steps are taken to append the appropriate prefix depending on whether or not the path specifies a network path.</p>\n\n<p>I have no idea why it was made this incredibly messy. I really don't see a backwards compatibility issue if Windows allows you to specify a longer name. On Windows 10, there is a registry setting you can change so that this nonsense is not required. But of course, I don't want to limit my software to only tweaked versions of Windows 10.</p>\n"}, {"tags": ["c++", "neural-network", "backpropagation"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 3926072, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/527177476/picture?type=large", "display_name": "Charles-Ugo Brouillard", "link": "https://stackoverflow.com/users/3926072/charles-ugo-brouillard"}, "is_accepted": false, "score": 1, "last_activity_date": 1487861720, "creation_date": 1487861720, "answer_id": 42419170, "question_id": 42403003, "link": "https://stackoverflow.com/questions/42403003/xor-always-converging-toward-0-5-using-backpropagation-in-sigmoidal-neural-net-c/42419170#42419170", "title": "XOR always converging toward 0.5 using backpropagation in Sigmoidal neural net C++", "body": "<p>Interestingly enough, in case it can help someone, changing from a Sigmoid() network to a TanH() network solved the issue. </p>\n\n<p>In some way it does make sense, and yet, a Sigmoid transfert function seems perfect for this kind of problem, since XOR is already normalized between 0 &amp; 1...</p>\n"}], "owner": {"reputation": 89, "user_id": 3926072, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/527177476/picture?type=large", "display_name": "Charles-Ugo Brouillard", "link": "https://stackoverflow.com/users/3926072/charles-ugo-brouillard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487861720, "creation_date": 1487800428, "question_id": 42403003, "link": "https://stackoverflow.com/questions/42403003/xor-always-converging-toward-0-5-using-backpropagation-in-sigmoidal-neural-net-c", "title": "XOR always converging toward 0.5 using backpropagation in Sigmoidal neural net C++", "body": "<p>Thanks again for taking the time to read this post.</p>\n\n<p>I know this question has been asked a lot , and i have checked many posts about this issue : however, my quest for a sucessfull XOR learning using backpropagation remain unfinished.</p>\n\n<p>I tried, like suggested,  tweaking the learning rate, the momentum , with/out biases, etc, still no success.</p>\n\n<p>Network consist of 2 input neuron, 2 hidden neurons, 1 output, <strong>all</strong> Sigmoids.\nThe output neuron seems to always converge around 0.5 for every inputs.</p>\n\n<p>I am therefore requesting your precious skills for that matter.\nI am using a self-made C++ library (so i can learn in deep how the basics work).</p>\n\n<p>Here are lines-of-interest of my code :<br/></p>\n\n<p><strong>Get error derivative from output neuron</strong></p>\n\n<pre><code>void ClOutputSigmoidNeuron::ComputeErrorGradient()\n{\n    double wanted_output = this-&gt;m_dataset-&gt;GetNextData();\n    double delta = wanted_output - this-&gt;m_result_buffer;\n    this-&gt;m_error_gradient = delta * this-&gt;SigmoidDerivative(this-&gt;m_result_buffer);\n}\n</code></pre>\n\n<p><strong>Get error derivative from hidden neuron</strong></p>\n\n<pre><code>void ClSigmoidNeuron::ComputeErrorGradient()\n{\n    double tmpBuffer = 0.00;\n    for(std::size_t i=0;i&lt;this-&gt;m_output_connections.size();i++)\n    {\n        ClNeuron* target_neuron = (ClNeuron*)m_output_connections[i]-&gt;m_target_neuron;\n        tmpBuffer += (target_neuron-&gt;m_error_gradient * this-&gt;m_output_connections[i]-&gt;m_weight);\n    }\n\n    //Get the sigmoid derivative\n    this-&gt;m_error_gradient = tmpBuffer * this-&gt;SigmoidDerivative(this-&gt;m_result_buffer);\n}\n</code></pre>\n\n<p><strong>Weights update for a general neuron :</strong></p>\n\n<pre><code>void ClNeuron::UpdateWeights()\n{ \n    for(std::size_t i=0;i&lt;this-&gt;m_input_connections.size();i++)\n    {\n        double momentum = this-&gt;m_input_connections[i]-&gt;m_weight_last_delta * this-&gt;m_input_connections[i]-&gt;m_momentum_value;\n        double new_weight_delta = this-&gt;m_learning_rate * this-&gt;m_error_gradient * this-&gt;m_input_connections[i]-&gt;m_data + momentum ;\n        this-&gt;m_input_connections[i]-&gt;m_weight += new_weight_delta;\n        this-&gt;m_input_connections[i]-&gt;m_weight_last_delta = new_weight_delta;\n        this-&gt;m_input_connections[i]-&gt;m_number_of_time_updated++;\n    }\n}\n</code></pre>\n\n<p><strong>Transfer functions</strong></p>\n\n<pre><code>double ClNeuron::Sigmoid(double p_value)\n{\n    return 1.00 / (1.00 + std::exp(p_value*-1.00));\n}\n\n\ndouble ClNeuron::SigmoidDerivative(double p_value)\n{\n    double sigmoid = this-&gt;Sigmoid(p_value);\n    return sigmoid * (1.00 - sigmoid);\n}\n</code></pre>\n\n<p><strong>The function used to training</strong></p>\n\n<pre><code>bool ClBackPropagationSupervisedTrainer::Train()\n{\n    for (std::size_t i = 0; i &lt; this-&gt;m_dataset_size; i++)\n    {\n        this-&gt;m_network-&gt;Fire();\n\n        if (!this-&gt;m_network-&gt;ComputeErrorGradients())\n        {\n            std::cout &lt;&lt; \"ClBackPropagationSupervisedTrainer:Train - Oups\" &lt;&lt; std::endl;\n            return false;\n        }\n\n        this-&gt;m_network-&gt;UpdateWeights();\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Again, thanks for reading this, i know this question has been asked a lot !\nPointing me in the right direction would be greatly appreciated.</p>\n"}, {"tags": ["c++", "inheritance", "matrix", "return-type", "virtual-functions"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487799751, "post_id": 42402813, "comment_id": 71952677, "body": "No. An overridden virtual function must return the same type. End of story. In this, very common, design pattern, the virtual functions return smart pointers to the base class. This works out fairly well when the classes are designed correctly."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1487799811, "post_id": 42402813, "comment_id": 71952708, "body": "@SamVarshavchik Not always. It is common to have covariant return types, for example in <code>clone()</code> member functions."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1487799890, "post_id": 42402813, "comment_id": 71952747, "body": "Look at <a href=\"https://en.wikipedia.org/wiki/Circle-ellipse_problem\" rel=\"nofollow noreferrer\">Circle-ellipse_problem</a>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1487800091, "post_id": 42402813, "comment_id": 71952830, "body": "Why does <code>operator+</code> need to be virtual?"}, {"owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1487801509, "post_id": 42402813, "comment_id": 71953521, "body": "@Jarod42. Useful link. That problem has been bothering me all the way through building this class. Now I know what its called. I can&#39;t see the direct relevance to this question though."}, {"owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487801621, "post_id": 42402813, "comment_id": 71953574, "body": "@Kerrek SB. It doesn&#39;t, at least any more than any other class which uses virtual functions. But it would be useful to know if there&#39;s a general solution to this kind of problem."}, {"owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487801932, "post_id": 42402813, "comment_id": 71953709, "body": "@SamVarshavchik. I understand that&#39;s the case. I was really asking for advice as to how to get around the limitations of virtual functions. Do you have a link to somewhere discussing these smart pointers? Thanks."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487802085, "post_id": 42402813, "comment_id": 71953776, "body": "Yeah, I&#39;ve got a link. They are described in <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">every modern C++ book</a>."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487803743, "post_id": 42402813, "comment_id": 71954452, "body": "For a simple class like this, virtual functions, smart pointers and all that stuff are totally overkill imo. This add unnecessary complexity to the program and there is runtime overhead for virtual functions, dynamic memory allocation and indirection through pointers. I&#39;d go with the answer of R Sahu."}], "answers": [{"comments": [{"owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "edited": false, "score": 0, "creation_date": 1487802140, "post_id": 42403182, "comment_id": 71953801, "body": "Doesn&#39;t that lessen type safety, since any functions which only apply to squarematrices (inverse, diagonalise, determinant etc) have to be checked at runtime rather than compile time to see if they are valid?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "edited": false, "score": 0, "creation_date": 1487802694, "post_id": 42403182, "comment_id": 71954053, "body": "@YairHalberstadt, yes, it does. However, consider the case where you have <code>Submatrix</code> as a class. In order to be compute the determinant of <code>Matrix*</code> or <code>Matrix&amp;</code>, you&#39;ll have to check whether they underlying object is <code>Submatrix</code>. That will require a <code>down_cast</code>. That is not any better. You could provide a provide a <code>virtual</code> function to compute the determinant. However, you&#39;ll have to do something about that for a rectangular matrix. There is no getting around the fact that certain operations are allowed only for a subset of objects and you have to deal with the differences."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 6, "last_activity_date": 1487801142, "creation_date": 1487801142, "answer_id": 42403182, "question_id": 42402813, "link": "https://stackoverflow.com/questions/42402813/best-way-to-return-an-inherited-class-from-a-function-in-c/42403182#42403182", "title": "Best way to return an inherited class from a function in c++", "body": "<p>I would recommend:</p>\n\n<ol>\n<li>Remove <code>Squarematrix</code>.</li>\n<li>Add a constructor to <code>Matrix</code> to construct a square matrix.</li>\n<li>If the knowledge of whether a matrix is square matrix is helpful for your application, add a member function in <code>Matrix</code> to answer that query.</li>\n</ol>\n\n<hr>\n\n<pre><code>class Matrix\n{\n   public:\n\n      Matrix(int r);        // Construct a square matrix.\n      Matrix(int r, int c); // Construct a rectangular matrix.\n\n      bool isSquareMatrix() const { return (rows == columns); }\n\n      Matrix operator+(const Matrix&amp; addend) const;\n\n   private:\n\n      int rows;\n      int columns;\n      double* values;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "is_accepted": true, "score": 1, "last_activity_date": 1505840857, "last_edit_date": 1505840857, "creation_date": 1505840359, "answer_id": 46306007, "question_id": 42402813, "link": "https://stackoverflow.com/questions/42402813/best-way-to-return-an-inherited-class-from-a-function-in-c/46306007#46306007", "title": "Best way to return an inherited class from a function in c++", "body": "<p>This is known as return type covariance (<a href=\"https://en.wikipedia.org/wiki/Covariant_return_type\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Covariant_return_type</a>).</p>\n\n<p>It was not supported by old compilers, but is supported by many now. For example my code compiles fine in Visual Studio 2017. Here is an article on its use and limitations in c++: <a href=\"https://aycchen.wordpress.com/2009/08/17/covariant-return-type-in-cpp/\" rel=\"nofollow noreferrer\">https://aycchen.wordpress.com/2009/08/17/covariant-return-type-in-cpp/</a>.</p>\n\n<p>It is not supported in C# yet, but is being considered for a future version. See <a href=\"https://github.com/dotnet/csharplang/issues/49\" rel=\"nofollow noreferrer\">https://github.com/dotnet/csharplang/issues/49</a>.</p>\n\n<p>It is also supported by newer versions of Java. See <a href=\"https://blogs.oracle.com/sundararajan/covariant-return-types-in-java\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/sundararajan/covariant-return-types-in-java</a>.</p>\n\n<p>Other than implementation issues, as far as I know there is no reason for it not to be added to a polymorphic language. I don't believe it can cause errors, although due to an imperfect implementation in Java it can cause bugs-see <a href=\"https://dzone.com/articles/covariant-return-type-abyssal\" rel=\"nofollow noreferrer\">https://dzone.com/articles/covariant-return-type-abyssal</a>.</p>\n"}], "owner": {"reputation": 3134, "user_id": 7607408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7ZMW.jpg?s=128&g=1", "display_name": "Yair Halberstadt", "link": "https://stackoverflow.com/users/7607408/yair-halberstadt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 46306007, "answer_count": 2, "score": 3, "last_activity_date": 1505840857, "creation_date": 1487799633, "question_id": 42402813, "link": "https://stackoverflow.com/questions/42402813/best-way-to-return-an-inherited-class-from-a-function-in-c", "title": "Best way to return an inherited class from a function in c++", "body": "<p>I'm looking for advice as to how to proceed with this class hierarchy I'm building in C++.</p>\n\n<p>Base class is Matrix:</p>\n\n<pre><code>class Matrix\n{\nprotected:\n\n    int rows;\n    int columns;\n    double* values;\n\npublic:\n\n\\\\lots of stuff goes here. bla di bla di bla.\n\n    virtual Matrix operator+(const Matrix&amp; addend) const;\n\n\\\\etc.\n}\n</code></pre>\n\n<p>Squarematrix is inherited from Matrix</p>\n\n<pre><code>class Squarematrix : public Matrix\n{\npublic:\n\n    Squarematrix operator+(const Squarematrix&amp; addend) const;\n\n}\n</code></pre>\n\n<p>Operator+ returns a matrix or a squarematrix respectively. Since operator+ is a virtual function this wont compile, as it must have the same return type in all classes.</p>\n\n<p>So what are my options?</p>\n\n<p>I could use an ordinary function instead of virtual. This is a bit annoying, but wouldn't cause a problem under most circumstances.</p>\n\n<p>I could return a matrix in all cases. This would basically make my squarematrix class a right pain in the *** to use, as I would have to constantly downcast from matrix to squarematrix.</p>\n\n<p>I could return a reference to a squarematrix. Then the matrix would have to be stored on the heap and there's no way to make sure its deleted safely. Especially if I do something like this:</p>\n\n<pre><code>squarematrix a=b+(c+d);\n</code></pre>\n\n<p>(c+d) will be stored on the heap and have no pointer to it so will be leaked.</p>\n\n<p>Is there any way to keep virtual functions and still have different return types?</p>\n\n<p>What would you advise in this situation?</p>\n\n<p>Thanks for your help. Looking forward to hearing from you.</p>\n"}, {"tags": ["c++", "qt", "qwidget", "qspinbox"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1487799688, "post_id": 42402731, "comment_id": 71952648, "body": "Use a reference. <code>int &amp; arg1</code>"}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1487800379, "post_id": 42402731, "comment_id": 71952980, "body": "No, this slot definition is correct without the reference. You&#39;re misunderstanding the direction; see answer below."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6060162, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UsaT3pwe9Qs/AAAAAAAAAAI/AAAAAAAAAPY/Ck3CxkJss8E/photo.jpg?sz=128", "display_name": "Tosik", "link": "https://stackoverflow.com/users/6060162/tosik"}, "edited": false, "score": 0, "creation_date": 1487800679, "post_id": 42403017, "comment_id": 71953121, "body": "Can u give me an example, how do this? Cause I know only way with global"}, {"owner": {"reputation": 697, "user_id": 1640610, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/KsWSQ.jpg?s=128&g=1", "display_name": "GigaRohan", "link": "https://stackoverflow.com/users/1640610/gigarohan"}, "reply_to_user": {"reputation": 7, "user_id": 6060162, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UsaT3pwe9Qs/AAAAAAAAAAI/AAAAAAAAAPY/Ck3CxkJss8E/photo.jpg?sz=128", "display_name": "Tosik", "link": "https://stackoverflow.com/users/6060162/tosik"}, "edited": false, "score": 0, "creation_date": 1487805339, "post_id": 42403017, "comment_id": 71955009, "body": "@Tosik In <code>MainWindow</code>, add a member variable <code>_spinBoxChangeTime</code> (or something like that) and set that equal to <code>ui-&gt;spinBox-&gt;value()</code>. That&#39;s what @goug is referring to."}], "tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": false, "score": 0, "last_activity_date": 1487800478, "creation_date": 1487800478, "answer_id": 42403017, "question_id": 42402731, "link": "https://stackoverflow.com/questions/42402731/set-value-from-spinbox-to-variable/42403017#42403017", "title": "Set value from SpinBox to variable", "body": "<p>When the spin box value changes, the <code>on_spinBox_valueChanged</code> is called with the new value of the spin box. You're trying to set that input parameter to the spin box value, which does nothing and is, in fact, already the value passed in. You need to create a member variable to store the result. A global also works, although that's certainly not a good practice.</p>\n"}], "owner": {"reputation": 7, "user_id": 6060162, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UsaT3pwe9Qs/AAAAAAAAAAI/AAAAAAAAAPY/Ck3CxkJss8E/photo.jpg?sz=128", "display_name": "Tosik", "link": "https://stackoverflow.com/users/6060162/tosik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 833, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496155313, "creation_date": 1487799345, "last_edit_date": 1496155313, "question_id": 42402731, "link": "https://stackoverflow.com/questions/42402731/set-value-from-spinbox-to-variable", "title": "Set value from SpinBox to variable", "body": "<p>I need to set the <code>spinBox</code> value to my variable, which is outside the function. \nSo here I have variable time and wanna set it to <code>spinBox</code> value:</p>\n\n<pre><code>void MainWindow::on_spinBox_valueChanged(int arg1)\n{\n    arg1 = ui-&gt;spinBox-&gt;value();\n}\n</code></pre>\n\n<p>I wanna store <code>arg1</code> to time variable.</p>\n\n<p>Shall I define time as global variable?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1487796261, "post_id": 42401853, "comment_id": 71950673, "body": "How do you expect the compiler to convert a <code>char*</code> (what <code>p</code> is) to a <code>string*</code> (what the vector contains)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1487796293, "post_id": 42401853, "comment_id": 71950688, "body": "It&#39;s highly unlikely that you want a vector of pointers, or that you need to pass the vector to the function via a pointer."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 7, "creation_date": 1487796307, "post_id": 42401853, "comment_id": 71950699, "body": "At first glance, there are way too many pointers in there for C++ code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1487796365, "post_id": 42401853, "comment_id": 71950731, "body": "<code>std::set&lt;std::string&gt;</code> might be useful."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1487797541, "post_id": 42401853, "comment_id": 71951438, "body": "This would be easier to read if you wrote <code>p-&gt;foo</code> rather than <code>(*p).foo</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487799813, "post_id": 42401853, "comment_id": 71952709, "body": "You would make life a lot easier by stopping with the use of pointers"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487805652, "post_id": 42401853, "comment_id": 71955140, "body": "You don&#39;t need pointers."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 1, "last_activity_date": 1487799219, "last_edit_date": 1495541827, "creation_date": 1487797713, "answer_id": 42402316, "question_id": 42401853, "link": "https://stackoverflow.com/questions/42401853/how-to-fix-no-instance-of-overloaded-function-in-vector-push-back/42402316#42402316", "title": "How to fix &quot;no instance of overloaded function&quot; in vector push_back?", "body": "<p><code>dictionnary</code> is a vector of <code>std::string*</code>. <code>std::string*</code> and <code>char*</code> are totally unrelated types. To convert from <code>char*</code> to <code>std::string*</code> will require you to create a new <code>string</code> that contains the value of <code>p</code> for your dictionnary, rather than passing a <code>char*</code> directly. This change  will allow your example to compile, but the resulting function is error prone.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\nusing std::string;\nusing std::vector;\n\nvoid manageDictionnary(vector&lt;string *&gt; * dictionnary, char *p) {\n    for (unsigned int i = 0; i &lt; (*dictionnary).size(); i++) {\n        string * pstring = (*dictionnary).at(i);\n        if ((*pstring).compare(p)) {\n            (*dictionnary).push_back(new string(p));\n            // Make a new string     ^^^^^^^^^^\n        }\n    }\n}\n</code></pre>\n\n<p>This solution will require you to delete your strings manually which is not the way things are done in c++. Changing from <code>std::vector&lt;std::string*&gt;</code> to simply <code>std::vector&lt;std::string&gt;</code> will solve this problem, and avoid you headaches in the future. There are other unnecessary pointers that can be removed. Since <code>at(i)</code> returns a <code>string&amp;</code> then we should change <code>pstring</code> to <code>string&amp;</code>. Since <code>dictionnary</code> is not optional (can't be <code>nullptr</code>) and always points to the same <code>vector</code> we can also change it to a <code>vector&lt;string&gt;&amp;</code>.</p>\n\n<pre><code>void manageDictionnary(vector&lt;string&gt; &amp; dictionnary, char *p) {\n    for (unsigned int i = 0; i &lt; dictionnary.size(); i++) {\n        string &amp; pstring = dictionnary.at(i);\n        if (pstring.compare(p)) {\n            dictionnary.push_back(p);\n        }\n    }\n}\n</code></pre>\n\n<p>This latest version will work fine and is much more in line with c++'s philosophy for resource management. I recommend you read on a few topics : </p>\n\n<ul>\n<li>Standard algorithms like <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find</code></a>.</li>\n<li><a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">Range-based for loops</a>.</li>\n<li><a href=\"https://isocpp.org/wiki/faq/const-correctness\" rel=\"nofollow noreferrer\">const-correctness</a>. </li>\n<li><a href=\"https://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in\">pointer vs reference</a>.</li>\n</ul>\n\n<p>Additionally, consider using <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set&lt;string&gt;</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\"><code>std::unordered_set&lt;string&gt;</code></a> for a more convenient representation of a dictionnary.</p>\n\n<p>In the future, note that the preferred way to access a pointer's methods is <code>ptr-&gt;foo()</code> rather than <code>(*ptr).foo()</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7607248, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uC9gse3_mQQ/AAAAAAAAAAI/AAAAAAAABAE/BNF9wqySH4Q/photo.jpg?sz=128", "display_name": "Naz-Al Islam", "link": "https://stackoverflow.com/users/7607248/naz-al-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2746, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1487804222, "creation_date": 1487796119, "last_edit_date": 1487804222, "question_id": 42401853, "link": "https://stackoverflow.com/questions/42401853/how-to-fix-no-instance-of-overloaded-function-in-vector-push-back", "title": "How to fix &quot;no instance of overloaded function&quot; in vector push_back?", "body": "<p>I want to write a function which takes as input a pointer to a vector pointer which point to a string (Dictionary) and a pointer which points to a char (p). The function will check if the char is in the Dictionary and if it isn't there it adds the p in the vector Dictionary.</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing std::string;\nusing std::vector;\n\nstd::vector&lt;string *&gt; dictionary;\n\nvoid manageDictionary(vector&lt;string *&gt; * dictionary, char *p) {\n    for (unsigned int i = 0; i &lt; (*dictionary).size(); i++) {\n        string * pstring = (*dictionary).at(i);\n        if ((*pstring).compare(p)) {\n            (*dictionary).push_back(p);\n        }\n    }\n}\n</code></pre>\n\n<p>However, the visual studio compiler shows I have an error in the if statement just before the push_back method (<code>.</code>). When I hover on the error, it says \"no instance of overloaded function\".</p>\n\n<p>I added the <code>std::vector&lt;string *&gt; dictionary;</code> at the beginning, still cannot figure out where the problem is.</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 16113, "user_id": 347508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG", "display_name": "kritzikratzi", "link": "https://stackoverflow.com/users/347508/kritzikratzi"}, "edited": false, "score": 0, "creation_date": 1487802045, "post_id": 42401586, "comment_id": 71953760, "body": "&amp; is called the <code>bitwise and</code>. the calculation in detail: <code>x = 0b1010; r = 0b0101</code>. now <code>r &amp; 0x1 = 0b0101 &amp; 0b0001 = 1</code>  and then <code>x &lt;&lt; 1 = 0b1010 &lt;&lt; 1 = 0b10100 = 1*16+0*8+1*4+0*2+0*1 = 20</code>. see for instance <a href=\"http://www.learncpp.com/cpp-tutorial/38-bitwise-operators/\" rel=\"nofollow noreferrer\">learncpp.com/cpp-tutorial/38-bitwise-operators</a>"}, {"owner": {"reputation": 16113, "user_id": 347508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG", "display_name": "kritzikratzi", "link": "https://stackoverflow.com/users/347508/kritzikratzi"}, "edited": false, "score": 0, "creation_date": 1487802456, "post_id": 42401586, "comment_id": 71953948, "body": "ps. <code>x &lt;&lt; n</code> is NOT <code>x^n</code>. (side note: in programming the hat <code>^</code> is usually a bit xor, not the mathematical power). anyways, you can use shifting to form positive powers of two only, in general: <code>1&lt;&lt;x = pow(2, x)</code>. a few examples: <code>1&lt;&lt;0=pow(2,0)=1;</code>  <code>1&lt;&lt;1=pow(2,1)=2;</code>  <code>1&lt;&lt;2=pow(2,2)=4</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 2, "last_activity_date": 1487795475, "creation_date": 1487795475, "answer_id": 42401661, "question_id": 42401586, "link": "https://stackoverflow.com/questions/42401586/math-equation-equivalent-to-bitwise-operation/42401661#42401661", "title": "Math equation equivalent to bitwise operation", "body": "<p><code>r &amp; 0x1</code> is a bitwise AND between <code>r</code> and <code>1</code>. This is essentially equivalent to checking if <code>r</code> is even or odd.</p>\n\n<p>The statement preforms a bit shift of <code>1</code> if <code>r</code> is odd or does nothing (bit shift of 0) if <code>r</code> is even. Left shifting an integer by <code>n</code> is equivalent to multiplying it by <code>2^n</code>. So in this case, it doubles the <code>x</code> if <code>r</code> is odd.</p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 2969723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/093776f8b823fedd13ac6130fdee4633?s=128&d=identicon&r=PG&f=1", "display_name": "LukeG", "link": "https://stackoverflow.com/users/2969723/lukeg"}, "is_accepted": false, "score": 2, "last_activity_date": 1487795524, "creation_date": 1487795524, "answer_id": 42401680, "question_id": 42401586, "link": "https://stackoverflow.com/questions/42401586/math-equation-equivalent-to-bitwise-operation/42401680#42401680", "title": "Math equation equivalent to bitwise operation", "body": "<p>&amp; is the bitwise and-operator</p>\n\n<p><code>r &amp; 0x1</code> results in 1 if the last bit is set (i.e. if r is odd), and in 0 if the last bit is not set (r is even).</p>\n\n<p>The left shift by n corresponds to a multiplication by 2^n.</p>\n\n<p>As r = 5 is odd the left shift by 1 is perfomed, resulting in 10 * (2^1) = 20</p>\n"}, {"tags": [], "owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "is_accepted": true, "score": 3, "last_activity_date": 1487796294, "last_edit_date": 1487796294, "creation_date": 1487795664, "answer_id": 42401716, "question_id": 42401586, "link": "https://stackoverflow.com/questions/42401586/math-equation-equivalent-to-bitwise-operation/42401716#42401716", "title": "Math equation equivalent to bitwise operation", "body": "<p>this equation does the following:</p>\n\n<p>(r &amp; 0x1) checks for oddity of r, example :</p>\n\n<pre><code> r = 5 -&gt; 00000101 in bits\n 0x1   -&gt; 00000001 in bits\n\n r &amp; 0x1-&gt;00000001 since its only 1 if both bits are one.\n</code></pre>\n\n<p>so this term results in 1 if r is odd, and 0 if r is even.</p>\n\n<p>now we shift with this value (either 1 or 0) left.</p>\n\n<pre><code> n &lt;&lt; 0/1 \n\n n = 10:   00001010\n n &lt;&lt; 1    00010100\n</code></pre>\n\n<p>so this term gets doubled (shift left) if r is odd, explaining the result</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4390285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e693dab3e14cfa596bea8354c53d94f?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4390285/kyle"}, "edited": false, "score": 0, "creation_date": 1487799678, "post_id": 42401771, "comment_id": 71952644, "body": "Very straightforward answer! With jonas_toth&#39;s explanation in depth, I now understand bitwise operation!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83, "user_id": 4390285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e693dab3e14cfa596bea8354c53d94f?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4390285/kyle"}, "edited": false, "score": 0, "creation_date": 1487800051, "post_id": 42401771, "comment_id": 71952815, "body": "@Kyle, glad I was able to help you understand bitwise operations a bit better."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1487795842, "creation_date": 1487795842, "answer_id": 42401771, "question_id": 42401586, "link": "https://stackoverflow.com/questions/42401586/math-equation-equivalent-to-bitwise-operation/42401771#42401771", "title": "Math equation equivalent to bitwise operation", "body": "<pre><code>auto bb = x &lt;&lt; (r &amp; 0x1);\n</code></pre>\n\n<p>can be translated to English as:</p>\n\n<p>If <code>r</code> is odd, initialize <code>bb</code> to <code>x * 2</code>.<br>\nIf <code>r</code> is even, initialize <code>bb</code> to <code>x</code>.</p>\n\n<p><code>r &amp; 0x1</code> is <code>1</code> if <code>r</code> is odd and <code>0</code> if <code>r</code> is even.</p>\n\n<p><code>x &lt;&lt; 1</code> is equal to <code>x * 2</code>.<br>\n<code>x &lt;&lt; 0</code> is equal to <code>x</code>.  </p>\n"}], "owner": {"reputation": 83, "user_id": 4390285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e693dab3e14cfa596bea8354c53d94f?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4390285/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 42401716, "answer_count": 4, "score": -1, "last_activity_date": 1487796294, "creation_date": 1487795192, "question_id": 42401586, "link": "https://stackoverflow.com/questions/42401586/math-equation-equivalent-to-bitwise-operation", "title": "Math equation equivalent to bitwise operation", "body": "<p>A piece of c++ code I am reading is </p>\n\n<pre><code>int x = 10;\nint r = 5;\n\nauto bb = x &lt;&lt; (r &amp; 0x1);\n</code></pre>\n\n<p>where bb reads 20. I understand how bitwise operation works, but I have difficulty to explain its mathematical logic, say, use traditional mathematical equation to explain above. For example, &lt;&lt; means shift. So x &lt;&lt; n could be x^n? Then what does &amp; mean here?</p>\n"}, {"tags": ["c++", "multithreading", "actionscript-3", "winapi", "air"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487795630, "post_id": 42401557, "comment_id": 71950309, "body": "if read documentation about say <a href=\"http://help.adobe.com/en_US/air/extensions/WSb464b1207c184b14-62b8e11f12937b86be4-7ff8.html\" rel=\"nofollow noreferrer\">FREAcquireBitmapData</a> - <code>FRE_WRONG_THREAD     The method was called from a thread other than the one on which the runtime has an outstanding call to a native extension function.</code> are your code in thread work at all without this error <code>FRE_WRONG_THREAD</code> ?"}, {"owner": {"reputation": 4397, "user_id": 539285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5509c378b4bb7a2795d958a3b45fdee?s=128&d=identicon&r=PG", "display_name": "Ilyssis", "link": "https://stackoverflow.com/users/539285/ilyssis"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487796437, "post_id": 42401557, "comment_id": 71950778, "body": "I don&#39;t get such an error. The event &quot;screenshot_done&quot; is being dispatched."}, {"owner": {"reputation": 1438, "user_id": 5862335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcb2895ae5f18a28c16755d4af8a6fa?s=128&d=identicon&r=PG", "display_name": "payam_sbr", "link": "https://stackoverflow.com/users/5862335/payam-sbr"}, "edited": false, "score": 0, "creation_date": 1487816024, "post_id": 42401557, "comment_id": 71958442, "body": "you may save it as a temporary file then load it from as3"}, {"owner": {"reputation": 4397, "user_id": 539285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5509c378b4bb7a2795d958a3b45fdee?s=128&d=identicon&r=PG", "display_name": "Ilyssis", "link": "https://stackoverflow.com/users/539285/ilyssis"}, "edited": false, "score": 0, "creation_date": 1487848369, "post_id": 42401557, "comment_id": 71973626, "body": "That would be very slow. The reason why I want to do it in a thread is to not block the main thread creating and filling the bitmap data - e.g. when getting the data from the clipboard the main thread has to create the new bitmpdata."}, {"owner": {"reputation": 4397, "user_id": 539285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5509c378b4bb7a2795d958a3b45fdee?s=128&d=identicon&r=PG", "display_name": "Ilyssis", "link": "https://stackoverflow.com/users/539285/ilyssis"}, "edited": false, "score": 0, "creation_date": 1487855465, "post_id": 42401557, "comment_id": 71978657, "body": "Ok, when I use FREGetContextActionScriptData inside the thread, I get the message FRE_WRONG_THREAD."}], "answers": [{"comments": [{"owner": {"reputation": 4397, "user_id": 539285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5509c378b4bb7a2795d958a3b45fdee?s=128&d=identicon&r=PG", "display_name": "Ilyssis", "link": "https://stackoverflow.com/users/539285/ilyssis"}, "edited": false, "score": 0, "creation_date": 1488026032, "post_id": 42417076, "comment_id": 72054666, "body": "I don&#39;t have problems dispatching events (strings) to the main thread. But that is not bitmapdata."}], "tags": [], "owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "is_accepted": false, "score": 0, "last_activity_date": 1487856343, "creation_date": 1487856343, "answer_id": 42417076, "question_id": 42401557, "link": "https://stackoverflow.com/questions/42401557/air-native-extension-pass-bitmapdata-from-thread-winapi-to-as3/42417076#42417076", "title": "Air native extension: pass bitmapdata from thread (winapi) to as3", "body": "<ul>\n<li><code>std.IN/OUT</code> : Could <strong>std in/out</strong> be an option...? </li>\n<li><code>return</code> : Would it be possible for the functions of your ANE to simply <code>return</code> the bitmapData instead of <code>null</code> and <code>0</code>? I don't use ANEs so maybe I'm wrong &amp; it must be kept like that?</li>\n</ul>\n\n<p><strong>std in/out</strong> comes from when I use <code>NativeProcess</code> to run an external program &amp; receive its data. A process thread is really just a program running, so hopefully you can do some <strong>std</strong> functions with it. </p>\n"}], "owner": {"reputation": 4397, "user_id": 539285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a5509c378b4bb7a2795d958a3b45fdee?s=128&d=identicon&r=PG", "display_name": "Ilyssis", "link": "https://stackoverflow.com/users/539285/ilyssis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487856343, "creation_date": 1487795101, "question_id": 42401557, "link": "https://stackoverflow.com/questions/42401557/air-native-extension-pass-bitmapdata-from-thread-winapi-to-as3", "title": "Air native extension: pass bitmapdata from thread (winapi) to as3", "body": "<p>In my native extension for air I want to create a screenshot. I managed to do this in synchronous way. Now I want to do it <strong>asynchronous in a thread</strong> (using WINAPI CreateThread).</p>\n\n<p>In the thread I create new bitmapdata and set the color for each pixel. But now my question is:</p>\n\n<p><strong>How do I pass the bitmapdata created in the thread back to actionscript?</strong></p>\n\n<p>Here I create the thread:</p>\n\n<pre><code>FREObject getScreenShotAsynchronous(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])\n{\n    FREGetObjectAsInt32(argv[1], &amp;_iSsWidth);\n    FREGetObjectAsInt32(argv[2], &amp;_iSsHeight);\n    FREGetObjectAsInt32(argv[3], &amp;_iSsOffsetX);\n    FREGetObjectAsInt32(argv[4], &amp;_iSsOffsetY);\n\n    //Context ref for thread:\n    oCtxThreadScreenshot = ctx;\n\n    //Create thread:\n    bRunThreadScreenshot = true;\n    hThreadScreenshot = CreateThread(NULL, 0, threadScreenshot, 0, 0, &amp;dwThreadScreenshotID);\n    CloseHandle(hThreadScreenshot);\n\n    return NULL;\n}\n</code></pre>\n\n<p>And here is the thread itself:</p>\n\n<pre><code>DWORD WINAPI threadScreenshot(LPVOID data)\n{\n    int32_t iWidth, iHeight, iOffsetX, iOffsetY;\n    iWidth = _iSsWidth;\n    iHeight = _iSsHeight;\n    iOffsetX = _iSsOffsetX;\n    iOffsetY = _iSsOffsetY;\n\n    FREObject freWidth;\n    FRENewObjectFromUint32(uint32_t(iWidth), &amp;freWidth);\n\n    FREObject freHeight;\n    FRENewObjectFromUint32(uint32_t(iHeight), &amp;freHeight);\n\n    FREObject freTransparent;\n    FRENewObjectFromBool(uint32_t(0), &amp;freTransparent);\n\n    FREObject freFillColor;\n    FRENewObjectFromUint32(uint32_t(0xFF0000), &amp;freFillColor);\n\n\n    // first get those values from imaage\n    FREObject freArguments[4] = { freWidth, freHeight, freTransparent, freFillColor };\n\n    // create an instance of BitmapData\n    FREObject freoBitmapData;\n    FRENewObject((uint8_t *)\"flash.display.BitmapData\", 4, freArguments, &amp;freoBitmapData, NULL);\n\n    // now acquire the bitmap data in order to manipulate it\n    FREBitmapData freBitmapData;\n    FREAcquireBitmapData(freoBitmapData, &amp;freBitmapData);\n\n    //***\n    //Grab screenshot data and fill bitmapdata...\n    //**.\n\n    // Tell Flash which region of the bitmapData changes (all of it here)\n    FREInvalidateBitmapDataRect(freoBitmapData, 0, 0, freBitmapData.width, freBitmapData.height);\n    // Release our control over the bitmapData\n    FREReleaseBitmapData(freoBitmapData);\n\n    //Dispatch event:\n    FREDispatchStatusEventAsync(oCtxThreadScreenshot, (const uint8_t *)\"onMsg\", (const uint8_t *)\"screenshot_done\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1487794818, "post_id": 42401431, "comment_id": 71949881, "body": "If it&#39;s not available, your code that uses it won&#39;t compile. That seems like a pretty straightforward indicator to me. And why do you think you need to (or can) &quot;backport&quot; it?"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1487794869, "post_id": 42401431, "comment_id": 71949905, "body": "Look at Boost.Config&#39;s <code>BOOST_NO_CXX11_NULLPTR</code> macro. Either use Boost.Config or duplicate the equivalent logic they use to determine this."}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1487796068, "post_id": 42401431, "comment_id": 71950562, "body": "@Matt have you tried a typetrait checking for nullptr_t? sth like std::is_same or sth like that."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487797688, "post_id": 42401431, "comment_id": 71951518, "body": "Why do you want to use <code>nullptr</code> with old compilers?  It&#39;s a nice touch, but <code>NULL</code> is almost as good."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1487798594, "post_id": 42401431, "comment_id": 71952056, "body": "Typical XY problem. Just use <code>NULL</code> until you don&#39;t have to support legacy compilers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487799003, "post_id": 42401431, "comment_id": 71952294, "body": "Old compiler will map <code>NULL</code> to <code>0</code>, compiler that supports <code>nullptr</code> can map <code>NULL</code> to <code>nullptr</code>. (Although not all of them do)."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487799129, "post_id": 42401431, "comment_id": 71952355, "body": "@RustyX - this all came about due to someone defining null to be NULL in a library we use to save his pinky. And then clashing with other libs.  So we decided to switch to nullptr to make things clear.  Can o&#39; worms!"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1487799459, "post_id": 42401431, "comment_id": 71952504, "body": "199711L is the correct value for compliance to the 1998 or 2003 specs, and has nothing to do with &quot;partial C++11 support&quot;."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1487801280, "post_id": 42401431, "comment_id": 71953404, "body": "@NeilButterworth - not really a backport, it&#39;s just that we had an inhouse library developed over many years that used &quot;null&quot;... because the main dev didn&#39;t like using his pinky to write NULL.  It seems null was clashing with other libs for other dev&#39;s so we thought time to fix it, lets switch to nullptr.  But this turned out to be a little more difficult than first thought.  defining nullptr to 0 is acceptable for us.  The fancy class based one produced more problems than it solved.  0 is fine."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1487801373, "post_id": 42401431, "comment_id": 71953453, "body": "@matt that last edit should be an answer instead."}], "answers": [{"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1487795385, "post_id": 42401496, "comment_id": 71950169, "body": "regarding #if !defined(nullptr), that&#39;s what I thought too but so many people were posting answers to a question that had implemented the check that way reinforcing it as correct.  So I began to doubt what I assumed was true.  That&#39;s for confirming my first thought."}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "reply_to_user": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1487796034, "post_id": 42401496, "comment_id": 71950549, "body": "@Matt have you tried a typetrait checking for nullptr_t? sth like std::is_same or sth like that."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1487796371, "post_id": 42401496, "comment_id": 71950734, "body": "Doesn&#39;t Boost build this configuration when you install the library? So, unless you have a complete list of supported compilers or some external build tool to test for language features, this solution can&#39;t be used when distributing a header only library?"}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1487800424, "post_id": 42401496, "comment_id": 71953002, "body": "So we aren&#39;t using boost and I can&#39;t included boost headers in this thing, so what I ended up doing was pulling out the boost library and extracting the needed parts."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 8, "last_activity_date": 1487796113, "last_edit_date": 1487796113, "creation_date": 1487794871, "answer_id": 42401496, "question_id": 42401431, "link": "https://stackoverflow.com/questions/42401431/how-do-i-reliably-detect-support-for-nullptr/42401496#42401496", "title": "How do I reliably detect support for nullptr?", "body": "<ul>\n<li><p>If you're using Boost, <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_c__11_features_not_supported\" rel=\"noreferrer\">Boost.Config</a> provides the <code>BOOST_NO_CXX11_NULLPTR</code> macro.</p>\n\n<p>Boost implements this by defining it for each compiler-version-combo that doesn't support it, so you cannot easily duplicate the functionality.</p></li>\n<li><p>If you're using CMake, you can use <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-compile-features.7.html#\" rel=\"noreferrer\">compiler feature detection</a> (specifically <code>cxx_nullptr</code>) to conditionally define a macro.</p></li>\n</ul>\n\n<p><code>#if !defined(nullptr)</code> doesn't work because <code>nullptr</code> is not a macro.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1487801611, "creation_date": 1487801611, "answer_id": 42403287, "question_id": 42401431, "link": "https://stackoverflow.com/questions/42401431/how-do-i-reliably-detect-support-for-nullptr/42403287#42403287", "title": "How do I reliably detect support for nullptr?", "body": "<p>Thanks to the hints to the boost library this is what I ended up with. I'm sure I'm not the only one who wants this.</p>\n\n<pre><code>#if defined(__GNUC__)\n#  define GCC_VERSION (__GNUC__ * 10000 + __GNUC_MINOR__ * 100 + __GNUC_PATCHLEVEL__)\n#  if defined(__GXX_EXPERIMENTAL_CXX0X__) || (__cplusplus &gt;= 201103L)\n#    define GCC_CXX11\n#  endif\n#  if (GCC_VERSION &lt; 40600) || !defined(GCC_CXX11)\n#    define NO_CXX11_NULLPTR\n#  endif\n#endif\n\n#if defined(_MSC_VER)\n#  if (_MSC_VER &lt; 1600)\n#    define NO_CXX11_NULLPTR\n#  endif\n#endif\n\n#if defined(__clang__)\n#  if !__has_feature(cxx_nullptr)\n#    define NO_CXX11_NULLPTR\n#  endif\n#endif\n\n#if defined(NO_CXX11_NULLPTR)\n#  pragma message(\"Defining nullptr\")\n#  define nullptr 0\n#endif\n</code></pre>\n"}], "owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 2, "accepted_answer_id": 42401496, "answer_count": 2, "score": 8, "last_activity_date": 1487801655, "creation_date": 1487794674, "last_edit_date": 1495535389, "question_id": 42401431, "link": "https://stackoverflow.com/questions/42401431/how-do-i-reliably-detect-support-for-nullptr", "title": "How do I reliably detect support for nullptr?", "body": "<p>I need to backport nullptr to a cross platform library we have, but I'm having trouble getting a reliable check of nullptr support.</p>\n\n<p>Initially I had this:</p>\n\n<pre><code>#if __cplusplus &gt;= 201103L || (__cplusplus &lt; 200000 &amp;&amp; __cplusplus &gt;= 199711L)\n    // nullptr should be ok\n#else\n    // Too old\n#endif\n</code></pre>\n\n<p>But then I discovered that compiling a program that just printed out the value of __cplusplus produced unexpected results.</p>\n\n<p>One blog post claimed 199711L was a value that MS compilers use to indicate partial support for C++11.  But I notice g++ 5.4 produces that value by default.  Until you expressly tell it to use compile with -std=c++11.\nBut then if you tell it the standard is c++98 the value 199711 is still shown.  That doesn't sound right to me. So that's not a good check!</p>\n\n<p>Then I saw <a href=\"https://stackoverflow.com/questions/10496824/how-to-define-nullptr-for-supporting-both-c03-and-c11\">someone doing this</a> with an answer that claimed it may work.  Well it doesn't.  </p>\n\n<pre><code>#if !defined(nullptr)\n#endif\n</code></pre>\n\n<p>But I'm not sure you can do that.  So I tested it like this:</p>\n\n<pre><code>#if defined(nullptr)\n#error \"null ptr defined\"\n#endif\n</code></pre>\n\n<p>Guess what?  that doesn't print out the error when nullptr is actually available.  So that doesn't at all.</p>\n\n<p>How do I detect nullptr or compiler version under linux/windows and OSX (clang)/ android.</p>\n"}, {"tags": ["c++", "encryption", "aes", "xor", "crypto++"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 3, "creation_date": 1487793474, "post_id": 42400956, "comment_id": 71949128, "body": "XOR takes far less time than reading or writing a word from memory."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487793747, "post_id": 42400956, "comment_id": 71949266, "body": "<code>k=(++k&lt;klen?k:0);</code>  could be <code>k=(++k)%klen;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7607017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b52d147995b327e9efb4a88658078be6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Rifle", "link": "https://stackoverflow.com/users/7607017/t-rifle"}, "edited": false, "score": 0, "creation_date": 1487950882, "post_id": 42406615, "comment_id": 72029051, "body": "Thanks for ur answer jww. Is there a way to xor strings in crypto++? After encryption given result is string."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 65, "user_id": 7607017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b52d147995b327e9efb4a88658078be6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Rifle", "link": "https://stackoverflow.com/users/7607017/t-rifle"}, "edited": false, "score": 0, "creation_date": 1487972428, "post_id": 42406615, "comment_id": 72041256, "body": "@T.Rifle - use <code>xorbuf</code> as discussed above."}, {"owner": {"reputation": 65, "user_id": 7607017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b52d147995b327e9efb4a88658078be6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Rifle", "link": "https://stackoverflow.com/users/7607017/t-rifle"}, "edited": false, "score": 0, "creation_date": 1488028284, "post_id": 42406615, "comment_id": 72055465, "body": "jww - I am very new in c++, so sorry for the question. How to cast a byte? It&#39;s given error: invalid conversion from \u2018char*\u2019 to \u2018byte* {aka unsigned char*}\u2019 [-fpermissive]"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 65, "user_id": 7607017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b52d147995b327e9efb4a88658078be6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Rifle", "link": "https://stackoverflow.com/users/7607017/t-rifle"}, "edited": false, "score": 0, "creation_date": 1488041949, "post_id": 42406615, "comment_id": 72060204, "body": "@T.Rifle - See <a href=\"http://stackoverflow.com/q/332030/608639\">When should static_cast, dynamic_cast, const_cast and reinterpret_cast be used?</a> and <a href=\"http://stackoverflow.com/q/28002/608639\">Regular cast vs. static_cast vs. dynamic_cast</a>."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 0, "last_activity_date": 1487981014, "last_edit_date": 1487981014, "creation_date": 1487821470, "answer_id": 42406615, "question_id": 42400956, "link": "https://stackoverflow.com/questions/42400956/how-can-i-do-xor-operation-in-crypto/42406615#42406615", "title": "How can I do XOR operation in Crypto++?", "body": "<blockquote>\n  <p>How can I do XOR operation in Crypto++?</p>\n</blockquote>\n\n<p>There are two ways to use the library to perform an XOR. First, there are two  functions <a href=\"https://github.com/weidai11/cryptopp/blob/master/misc.cpp#L28\" rel=\"nofollow noreferrer\"><code>xorbuf</code></a> in <code>misc.h</code>. The first implementation is shown below, and it uses a single in/out buffer with a mask:</p>\n\n<pre><code>void xorbuf(byte *buf, const byte *mask, size_t count)\n{\n    size_t i=0;\n    if (IsAligned&lt;word32&gt;(buf) &amp;&amp; IsAligned&lt;word32&gt;(mask))\n    {\n        if (!CRYPTOPP_BOOL_SLOW_WORD64 &amp;&amp; IsAligned&lt;word64&gt;(buf) &amp;&amp; IsAligned&lt;word64&gt;(mask))\n        {\n            for (i=0; i&lt;count/8; i++)\n                ((word64*)(void*)buf)[i] ^= ((word64*)(void*)mask)[i];\n            count -= 8*i;\n            if (!count)\n                return;\n            buf += 8*i;\n            mask += 8*i;\n        }\n\n        for (i=0; i&lt;count/4; i++)\n            ((word32*)(void*)buf)[i] ^= ((word32*)(void*)mask)[i];\n        count -= 4*i;\n        if (!count)\n            return;\n        buf += 4*i;\n        mask += 4*i;\n    }\n\n    for (i=0; i&lt;count; i++)\n        buf[i] ^= mask[i];\n}\n</code></pre>\n\n<p>There's a second <code>xorbuf(byte *output, const byte *input, const byte *mask, size_t count)</code> that uses separate in and out buffers with a mask.</p>\n\n<p>The second way to XOR is use an <code>ArrayXorSink</code> from <a href=\"https://github.com/weidai11/cryptopp/blob/master/filters.cpp#L565\" rel=\"nofollow noreferrer\"><code>filters.h</code></a>. Internally, <code>ArrayXorSink</code> calls <code>xorbuf</code> for you. You would use this is you prefer <a href=\"https://www.cryptopp.com/wiki/Pipelining\" rel=\"nofollow noreferrer\">pipelines</a>.</p>\n\n<pre><code>size_t ArrayXorSink::Put2(const byte *begin, size_t length, int messageEnd, bool blocking)\n{\n    // Avoid passing NULL pointer to xorbuf\n    size_t copied = 0;\n    if (m_buf &amp;&amp; begin)\n    {\n        copied = STDMIN(length, SaturatingSubtract(m_size, m_total));\n        xorbuf(m_buf+m_total, begin, copied);\n    }\n    m_total += copied;\n    return length - copied;\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n<pre><code>string XOR(string value, string key)\n{\n    string retval(value);\n\n    short unsigned int klen=key.length();\n    short unsigned int vlen=value.length();\n    short unsigned int k=0;\n    short unsigned int v=0;\n\n    for(v;v&lt;vlen;v++)\n    {\n        retval[v]=value[v]^key[k];\n        k=(++k&lt;klen?k:0);\n    }\n\n    return retval;\n}\n</code></pre>\n</blockquote>\n\n<p>For this, you could do something like the following. It asks the compiler to <code>inline</code> the function, and it passes the <code>value</code> and <code>key</code> by constant reference to avoid the copies.</p>\n\n<pre><code>inline string XOR(const string&amp; value, const string&amp; key)\n{\n    ASSERT(key.length() == value.length());\n\n    string retval(value);\n    xorbuf(&amp;retval[0], &amp;key[0], retval.length());\n    return retval; \n}\n</code></pre>\n\n<p>The trick is, you have to take the address of element 0 to get the non-const pointer and avoid potential undefined behavior. You may need to cast to a <code>byte*</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>How can I reduce the XOR operation time?</p>\n</blockquote>\n\n<p>You probably want to use an operand size larger that 1-byte when its feasible. The library's <code>xorbuf</code> uses <code>word32</code> and <code>word64</code> when available. </p>\n\n<p>In addition, if you have AVX, then you can operate on buffers up to 512-bit. If you keep your buffers aligned, then GCC will try use the larger buffers at <code>-O3</code> and above. <code>-O3</code> is significant because that's when GCC starts aggressive vectorization and using features provided by AVX and AVX2.</p>\n\n<p>The Crypto++ library endured a non-trivial amount of pain a couple of years ago because its buffers were not aligned as GCC expected, and it was causing SEGFAULT's <code>-O3</code> and above. See, for example, <a href=\"https://groups.google.com/d/msg/cryptopp-users/AUKPXDduHww/lk0AE9fAVKcJ\" rel=\"nofollow noreferrer\">Crash on Cygwin i386 with -O3</a>.</p>\n\n<p>The alignment problem was not limited to Cygwin; Cygwin happened to demonstrate it. The problem surfaced on occasion under other platforms and CPUs, like ARM when NEON was enabled. We believe all the issues have been cleared.</p>\n"}], "owner": {"reputation": 65, "user_id": 7607017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b52d147995b327e9efb4a88658078be6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Rifle", "link": "https://stackoverflow.com/users/7607017/t-rifle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 42406615, "answer_count": 1, "score": 0, "last_activity_date": 1487981014, "creation_date": 1487793082, "last_edit_date": 1487867162, "question_id": 42400956, "link": "https://stackoverflow.com/questions/42400956/how-can-i-do-xor-operation-in-crypto", "title": "How can I do XOR operation in Crypto++?", "body": "<p>I want to perform XOR operation in AES before and after encryption in AES (like DESX) with new keys. But XOR operation takes too much time.</p>\n\n<p>How can I reduce the XOR operation time?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>string XOR(string value, string key)\n{\n    string retval(value);\n\n    short unsigned int klen=key.length();\n    short unsigned int vlen=value.length();\n    short unsigned int k=0;\n    short unsigned int v=0;\n\n    for(v;v&lt;vlen;v++)\n    {\n        retval[v]=value[v]^key[k];\n        k=(++k&lt;klen?k:0);\n    }\n\n    return retval;\n}\n\nint main(int argc, char* argv[])\n{\n    AutoSeededRandomPool prng;\n\n    byte key1[AES::DEFAULT_KEYLENGTH];\n    prng.GenerateBlock(key1, sizeof(key1));\n\n    byte key[AES::DEFAULT_KEYLENGTH];\n    prng.GenerateBlock(key, sizeof(key));\n\n    byte key2[AES::DEFAULT_KEYLENGTH];\n    prng.GenerateBlock(key2, sizeof(key2));\n\n    byte iv[AES::BLOCKSIZE];\n    prng.GenerateBlock(iv, sizeof(iv));\n\n    string plain = \"AESX CBC Mode Test\";\n    string cipher,encoded, encodediv, encodedkey1, encodedkey, \n    encodedkey2, recovered, prerecovered, postrecovered, \n    prewhiten, postwhiten;\n\n    // Pretty print key1\n    StringSource(key1, sizeof(key1), true,\n        new HexEncoder(\n            new StringSink(encodedkey1)\n        ) // HexEncoder\n    ); // StringSource\n    cout &lt;&lt; \"key1: \" &lt;&lt; encodedkey1 &lt;&lt; endl;\n\n    // Pretty print iv\n    StringSource(iv, sizeof(iv), true,\n        new HexEncoder(\n            new StringSink(encodediv)\n        ) // HexEncoder\n    ); // StringSource\n    cout &lt;&lt; \"iv: \" &lt;&lt; encodediv &lt;&lt; endl;\n\n    // Pretty print key\n    StringSource(key, sizeof(key), true,\n        new HexEncoder(\n            new StringSink(encodedkey)\n        ) // HexEncoder\n    ); // StringSource\n    cout &lt;&lt; \"key: \" &lt;&lt; encodedkey &lt;&lt; endl;\n\n    // Pretty print key2\n    StringSource(key2, sizeof(key2), true,\n        new HexEncoder(\n            new StringSink(encodedkey2)\n        ) // HexEncoder\n    ); // StringSource\n    cout &lt;&lt; \"key2: \" &lt;&lt; encodedkey2 &lt;&lt; endl;\n\n    cout &lt;&lt; \"plain text: \" &lt;&lt; plain &lt;&lt; endl;\n\n    prewhiten = XOR(plain, encodedkey1);\n\n    try\n    {\n        cout &lt;&lt; \"pre whiten text: \" &lt;&lt; prewhiten &lt;&lt; endl;\n\n        CBC_Mode&lt; AES &gt;::Encryption e;\n        e.SetKeyWithIV(key, sizeof(key), iv);\n\n        // The StreamTransformationFilter removes\n        //  padding as required.\n        StringSource s(prewhiten, true, \n            new StreamTransformationFilter(e,\n                new StringSink(cipher)\n            ) // StreamTransformationFilter\n        ); // StringSource\n\n    }\n    catch(const CryptoPP::Exception&amp; e)\n    {\n        cerr &lt;&lt; e.what() &lt;&lt; endl;\n        exit(1);\n    }\n\n    /*********************************\\\n    \\*********************************/\n\n    // Pretty print\n    encoded.clear();\n    StringSource(cipher, true,\n        new HexEncoder(\n            new StringSink(encoded)\n        ) // HexEncoder\n    ); // StringSource\n    cout &lt;&lt; \"cipher text: \" &lt;&lt; encoded &lt;&lt; endl;\n\n    postwhiten = XOR(encoded, encodedkey2);\n\n    cout &lt;&lt; \"post whiten text: \" &lt;&lt; postwhiten &lt;&lt; endl;\n\n    //decryption\n\n    prerecovered = XOR(postwhiten, encodedkey2);\n\n    encoded.clear();\n    StringSource(prerecovered, true,\n        new HexEncoder(\n            new StringSink(encoded)\n        ) // HexEncoder\n    ); // StringSource\n\n    cout &lt;&lt; \"pre recovered text: \" &lt;&lt; encoded &lt;&lt; endl;\n\n    try\n    {\n        CBC_Mode&lt; AES &gt;::Decryption d;\n        d.SetKeyWithIV(key, sizeof(key), iv);\n\n        // The StreamTransformationFilter removes\n        //  padding as required.\n        StringSource s(prerecovered, true, \n            new HexDecoder(\n                new StreamTransformationFilter(d,\n                    new StringSink(recovered)\n                ) // StreamTransformationFilter\n            )//HexDecoder\n        ); // StringSource\n\n        cout &lt;&lt; \"recovered text: \" &lt;&lt; recovered &lt;&lt; endl;\n    }\n    catch(const CryptoPP::Exception&amp; e)\n    {\n        cerr &lt;&lt; e.what() &lt;&lt; endl;\n        exit(1);\n    }\n\n    postrecovered = XOR(recovered, encodedkey1);\n\n    cout &lt;&lt; \"post recovered text: \" &lt;&lt; postrecovered &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "xcode", "build"], "owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1487793073, "creation_date": 1487793073, "question_id": 42400954, "link": "https://stackoverflow.com/questions/42400954/adding-c-static-libraries-to-xcode-8-2", "title": "Adding C++ static libraries to XCode 8.2", "body": "<p>I needed to include several static (.a) libraries to my project. I tried to add the library path in TARGET-Build Settings-Search Paths-Library Search Paths as \"($SRCROOT)/lib/\" (without quotes), but it does not work.</p>\n\n<p>I managed to make it working by including the names explicitly in TARGET-Build Phases-Link Binary With Libraries.</p>\n\n<p>Is there a way to include the library path without explicitly listing every library?  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 5, "creation_date": 1487793175, "post_id": 42400883, "comment_id": 71948957, "body": "Why are you using macros? Templates perhaps?"}, {"owner": {"reputation": 132, "user_id": 3529442, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/333b033df5143a3240cd3991c39c2db2?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/3529442/curious"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1487793531, "post_id": 42400883, "comment_id": 71949152, "body": "@EdHeal test_macro may be used by a C application"}], "answers": [{"tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": true, "score": 9, "last_activity_date": 1487793377, "last_edit_date": 1487793377, "creation_date": 1487793061, "answer_id": 42400951, "question_id": 42400883, "link": "https://stackoverflow.com/questions/42400883/how-to-write-a-macro-that-accepts-a-typename/42400951#42400951", "title": "How to write a macro that accepts a typename?", "body": "<p>Macros have no idea about typenames or any other language features as they are a part of the preprocessor.  The only problem with your code is formatting, namely some extra spaces:   </p>\n\n<pre><code>#define test_macro(some_typename) some_typename func (some_typename x) {return x;}\ntest_macro(int)\n</code></pre>\n\n<p>On a side note, when you need a typename to be a parameter, consider templates - they are good at it:)</p>\n"}], "owner": {"reputation": 132, "user_id": 3529442, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/333b033df5143a3240cd3991c39c2db2?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/3529442/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 1, "accepted_answer_id": 42400951, "answer_count": 1, "score": 3, "last_activity_date": 1487793377, "creation_date": 1487792831, "last_edit_date": 1487792932, "question_id": 42400883, "link": "https://stackoverflow.com/questions/42400883/how-to-write-a-macro-that-accepts-a-typename", "title": "How to write a macro that accepts a typename?", "body": "<p>The following code-</p>\n\n<pre><code>#define test_macro (some_typename) some_typename func (some_typename x) {return x;} \ntest_macro (int)\n</code></pre>\n\n<p>does not compile with g++ 4.4.7 giving the following errors-</p>\n\n<pre><code>constructor, destructor, or type conversion before 'some_typename'\nunqualified-id before 'int'\n')' before 'int'\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["c++", "clang-format"], "comments": [{"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1487796489, "post_id": 42400651, "comment_id": 71950809, "body": "iam not aware of this functionality in clang-format. especially the second one not in my experience. clang format splits strings on lines, but i never saw this. BUT it can align trailing comments, so maybe i just dont know it. i would like to have such alignment as well :)"}, {"owner": {"reputation": 709, "user_id": 6605494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c140e8dc532f574e899392ad4ffa4e7?s=128&d=identicon&r=PG&f=1", "display_name": "jonas_toth", "link": "https://stackoverflow.com/users/6605494/jonas-toth"}, "edited": false, "score": 0, "creation_date": 1487796594, "post_id": 42400651, "comment_id": 71950869, "body": "see <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/ClangFormatStyleOptions.html</a> for the options"}], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487792014, "creation_date": 1487792014, "question_id": 42400651, "link": "https://stackoverflow.com/questions/42400651/align-variable-length-function-arguments-with-clang-format", "title": "align variable length function arguments with clang-format", "body": "<p>I relatively often come across code like this</p>\n\n<pre><code>  tree-&gt;Branch(\"Regression_Q2_RANDOM\",&amp;Regression_Q2_RANDOM,\"Regression_Q2_RANDOM/F\");\n  tree-&gt;Branch(\"Regression_Q2_BEST\",&amp;Regression_Q2_BEST,\"Regression_Q2_BEST/F\");\n  tree-&gt;Branch(\"Regression_Q2_WORST\",&amp;Regression_Q2_WORST,\"Regression_Q2_WORST/F\");\n  tree-&gt;Branch(\"Regression_Q2_TRUE\",&amp;Regression_Q2_TRUE,\"Regression_Q2_TRUE/F\");\n  tree-&gt;Branch(\"Regression_Q2_HI\",&amp;Regression_Q2_HI,\"Regression_Q2_HI/F\");\n  tree-&gt;Branch(\"Regression_Q2_LO\",&amp;Regression_Q2_LO,\"Regression_Q2_LO/F\");\n</code></pre>\n\n<p>Most auto formaters are anyhow not happy with this due to the long lines, but that aside, I would like to have the function arguments aligned like this:</p>\n\n<pre><code>  tree-&gt;Branch(\"Regression_Q2_RANDOM\",&amp;Regression_Q2_RANDOM,\"Regression_Q2_RANDOM/F\");\n  tree-&gt;Branch(\"Regression_Q2_BEST\",  &amp;Regression_Q2_BEST,  \"Regression_Q2_BEST/F\");\n  tree-&gt;Branch(\"Regression_Q2_WORST\", &amp;Regression_Q2_WORST, \"Regression_Q2_WORST/F\");\n  tree-&gt;Branch(\"Regression_Q2_TRUE\",  &amp;Regression_Q2_TRUE,  \"Regression_Q2_TRUE/F\");\n  tree-&gt;Branch(\"Regression_Q2_HI\",    &amp;Regression_Q2_HI,    \"Regression_Q2_HI/F\");\n  tree-&gt;Branch(\"Regression_Q2_LO\",    &amp;Regression_Q2_LO,    \"Regression_Q2_LO/F\");\n</code></pre>\n\n<p>such that with block editing I could replace the ampersands by asterisks, or do other block-manipulations to the common parts of the arguments. Can <code>clang-format</code> (or maybe another formater) do that?</p>\n\n<p>BONUS POINTS:</p>\n\n<p>This is probably too much to ask, but at best also the common ends of the strings should align:</p>\n\n<pre><code>  tree-&gt;Branch(\"Regression_Q2_RANDOM\",&amp;Regression_Q2_RANDOM,\"Regression_Q2_RANDOM\" \"/F\");\n  tree-&gt;Branch(\"Regression_Q2_BEST\",  &amp;Regression_Q2_BEST,  \"Regression_Q2_BEST\"   \"/F\");\n  tree-&gt;Branch(\"Regression_Q2_WORST\", &amp;Regression_Q2_WORST, \"Regression_Q2_WORST\"  \"/F\");\n  tree-&gt;Branch(\"Regression_Q2_TRUE\",  &amp;Regression_Q2_TRUE,  \"Regression_Q2_TRUE\"   \"/F\");\n  tree-&gt;Branch(\"Regression_Q2_HI\",    &amp;Regression_Q2_HI,    \"Regression_Q2_HI\"     \"/F\");\n  tree-&gt;Branch(\"Regression_Q2_LO\",    &amp;Regression_Q2_LO,    \"Regression_Q2_LO\"     \"/F\");\n</code></pre>\n"}, {"tags": ["python", "c++", "visual-c++"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487792554, "post_id": 42400637, "comment_id": 71948606, "body": "Can you temporarily disable your anti-malware software to preclude that as part of the issue?"}, {"owner": {"reputation": 41, "user_id": 3034822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1137810154/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3034822/kevin"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487796085, "post_id": 42400637, "comment_id": 71950572, "body": "Unfortunately, no. This is on my work machines, and I do not have the ability to disable that software."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3034822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1137810154/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3034822/kevin"}, "is_accepted": true, "score": 0, "last_activity_date": 1487801494, "creation_date": 1487801494, "answer_id": 42403263, "question_id": 42400637, "link": "https://stackoverflow.com/questions/42400637/visual-c-compiler-producing-inaccessible-pyd-files/42403263#42403263", "title": "Visual C++ Compiler Producing Inaccessible .pyd Files", "body": "<p>So, it had nothing to do with the compiler (probably unsurprisingly) and everything to do with Windows' handling of permission. I noticed that I was unable to delete the file from either of my machines, so I decided to shut one of them down as it seemed immediately clear that it was probably the two computers somehow fighting over rights to the file. The file immediately disappeared and all problems went with it.</p>\n"}], "owner": {"reputation": 41, "user_id": 3034822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1137810154/picture?type=large", "display_name": "Kevin", "link": "https://stackoverflow.com/users/3034822/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 42403263, "answer_count": 1, "score": 1, "last_activity_date": 1487801494, "creation_date": 1487791952, "last_edit_date": 1487798042, "question_id": 42400637, "link": "https://stackoverflow.com/questions/42400637/visual-c-compiler-producing-inaccessible-pyd-files", "title": "Visual C++ Compiler Producing Inaccessible .pyd Files", "body": "<p>All of a sudden, my compiler seems to have stopped functioning. I am building C++ extensions for Python (3.5) from scratch and compiling them from the command line using the Microsoft Visual C++ Build Tools. It was working fine this morning, then out of nowhere started throwing linker errors relating to the .pyd file that was being produced.</p>\n\n<p>In a Windows 7 command line (PowerShell, actually), I run:</p>\n\n<pre><code>python setup.py build_ext --inplace\n</code></pre>\n\n<p>This throws the error:\n\"LINK : fatal error LNK1104: cannot open file 'Z:\\ ...\\wrapperModule.cp35-win_amd64.pyd\" (wrapperModule is the name of the extension module). </p>\n\n<p>I don't have permission to access the file listed above and can't seem to force permission, either. Before this issue started, I was able to access the .pyd file without any problem.</p>\n\n<p>UPDATE:\nIt turns out copying the directory containing the source code to a local location (the code was on a shared network drive) solved the problem. This code is a part of a git repository on the shared drive and needs to remain there, however.</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "edited": false, "score": 0, "creation_date": 1487791388, "post_id": 42400329, "comment_id": 71947922, "body": "is that for vector.resize()&#39;s call for default constructor?"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "edited": false, "score": 0, "creation_date": 1487791411, "post_id": 42400329, "comment_id": 71947933, "body": "@solti, yes - vector.resize() expects it. Whats wrong with <code>my_vec[0] = {3,4};</code> ?"}, {"owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "edited": false, "score": 0, "creation_date": 1487791517, "post_id": 42400329, "comment_id": 71947998, "body": "oh ok! thank you.  Sorry abt <code>my_vec[0] = {3,4};</code> that was my bad .. you can ignore it"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 1, "last_activity_date": 1487799055, "last_edit_date": 1487799055, "creation_date": 1487790910, "answer_id": 42400329, "question_id": 42400284, "link": "https://stackoverflow.com/questions/42400284/how-to-place-partially-initialized-struct-object-into-a-vector/42400329#42400329", "title": "How to place partially initialized struct object into a vector?", "body": "<p>You need a default constructor:</p>\n\n<pre><code>my_data() = default;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1487792536, "creation_date": 1487792536, "answer_id": 42400794, "question_id": 42400284, "link": "https://stackoverflow.com/questions/42400284/how-to-place-partially-initialized-struct-object-into-a-vector/42400794#42400794", "title": "How to place partially initialized struct object into a vector?", "body": "<p>FWIW, you can make <code>my_data</code> easier to use by removing the constructor and the default value of <code>z</code>.</p>\n\n<pre><code>struct my_data {\n    int x;\n    int y;\n    double z;\n};\n\nint main() {\n   std::vector&lt;my_data&gt; my_vec;\n   my_vec.resize(10);\n\n   my_vec[0] = {};           // Same as = {0, 0, 0};\n   my_vec[1] = {3};          // Same as = {3, 0, 0};\n   my_vec[2] = {3, 4};       // Same as = {3, 4, 0};\n   my_vec[3] = {3, 4, 2.0};\n}\n</code></pre>\n"}], "owner": {"reputation": 3710, "user_id": 1031311, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Wn8YV.png?s=128&g=1", "display_name": "solti", "link": "https://stackoverflow.com/users/1031311/solti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 42400329, "answer_count": 2, "score": 0, "last_activity_date": 1487808340, "creation_date": 1487790766, "last_edit_date": 1487808340, "question_id": 42400284, "link": "https://stackoverflow.com/questions/42400284/how-to-place-partially-initialized-struct-object-into-a-vector", "title": "How to place partially initialized struct object into a vector?", "body": "<p>I currently have struct where I initialize only two of three member. I purposefully do this since during the time of creation I am not sure what the value will be  ( I actually am fine with it being just zero). </p>\n\n<pre><code>struct my_data {\n    my_data(int x_, int y_) {\n       x = x_;\n       y = y_;\n    }\n\n\n    int x;\n    int y;\n    double z = 0;\n};\n\nint main() {\n   std::vector&lt;my_data&gt; my_vec;\n   my_vec.resize(10);\n\n   my_vec[0] = {3,4};\n}\n</code></pre>\n\n<p>When I do this I get <code>error: no matching function for call .... _T1(std::forward&lt;Args ..</code></p>\n\n<p>Is there any way to avoid this error or should I have to include <code>z</code> also in as parameter in constructor.</p>\n"}, {"tags": ["c++", "c++11", "pointers", "stdvector"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 3, "creation_date": 1487790808, "post_id": 42400272, "comment_id": 71947624, "body": "Drop one level of vector and take the address of a pointer to the first element of that flat vector."}, {"owner": {"reputation": 2546, "user_id": 1210992, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/667308854998f2f3ce1a8f386e8c2854?s=128&d=identicon&r=PG", "display_name": "BlueWanderer", "link": "https://stackoverflow.com/users/1210992/bluewanderer"}, "edited": false, "score": 0, "creation_date": 1487791312, "post_id": 42400272, "comment_id": 71947874, "body": "Only making it looks nicer, you can replace psPtr with a vector&lt;short *&gt;, and set it up with some function in algorithm."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487791707, "post_id": 42400272, "comment_id": 71948103, "body": "The API function either needs a size parameter or has the convention that a null pointer denotes the last element, in which case you must add a <code>nullptr</code> at the end."}, {"owner": {"reputation": 963, "user_id": 5231637, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2cd12e90cf389349baecb192ace9e312?s=128&d=identicon&r=PG&f=1", "display_name": "yc2986", "link": "https://stackoverflow.com/users/5231637/yc2986"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487791780, "post_id": 42400272, "comment_id": 71948151, "body": "@ChristianHackl Thanks I will update it. I am not so familiar with C convention. Correct me if I am wrong."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1487791994, "post_id": 42400272, "comment_id": 71948279, "body": "@yc2986: Well, I thought you were talking about a real function :) But in any case, the function must have some way to know the size (or the sizes). What should it do if it just receives a single pointer <i>and</i> there is no convention to represent the last element(s)? How could you ever hope to implement such a function?"}], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 5231637, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2cd12e90cf389349baecb192ace9e312?s=128&d=identicon&r=PG&f=1", "display_name": "yc2986", "link": "https://stackoverflow.com/users/5231637/yc2986"}, "edited": false, "score": 0, "creation_date": 1487791607, "post_id": 42400448, "comment_id": 71948051, "body": "This looks pretty neat. Never thought of vector of pointer before. Thanks!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 963, "user_id": 5231637, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2cd12e90cf389349baecb192ace9e312?s=128&d=identicon&r=PG&f=1", "display_name": "yc2986", "link": "https://stackoverflow.com/users/5231637/yc2986"}, "edited": false, "score": 0, "creation_date": 1487793037, "post_id": 42400448, "comment_id": 71948888, "body": "@yc2986: A vector of pointers is usually an anti-pattern. If you never thought of doing this, this is actually a good thing."}, {"owner": {"reputation": 963, "user_id": 5231637, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2cd12e90cf389349baecb192ace9e312?s=128&d=identicon&r=PG&f=1", "display_name": "yc2986", "link": "https://stackoverflow.com/users/5231637/yc2986"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1487793246, "post_id": 42400448, "comment_id": 71949002, "body": "@IInspectable Thanks for the info. I think for everything C++ project I will never do this. But for interfacing with C code it may have some value. I will never do thing like generating a vector of pointer then point each of them to &quot;new&quot; allocated objects and manually delete them."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1487791308, "creation_date": 1487791308, "answer_id": 42400448, "question_id": 42400272, "link": "https://stackoverflow.com/questions/42400272/convert-vector-of-vector-to-pointer-of-pointer/42400448#42400448", "title": "Convert vector of vector to pointer of pointer", "body": "<blockquote>\n  <p>Is this the best way to achieve the goal?</p>\n</blockquote>\n\n<p>If you are sure that the vector of vectors will outlive <code>psPtr</code>, then yes. Otherwise, you run the risk that <code>psPtr</code> will contain invalid pointers.</p>\n\n<blockquote>\n  <p>Can I get rid of the \"new delete\" thing by using iterator or some std method in this case? </p>\n</blockquote>\n\n<p>Yes. I suggest using:</p>\n\n<pre><code>std::vector&lt;short*&gt; psPtr(vvsVec.size());\n</code></pre>\n\n<p>and then use <code>&amp;psPtr[0]</code> in the call to the C API function. That removes the burden of memory management from your code.</p>\n\n<pre><code>foo(&amp;psPtr[0]);        \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1487793183, "post_id": 42400460, "comment_id": 71948962, "body": "Since you know the size of the container <code>vecOfPtrs</code> ahead of time, you should really initialize it to that size. This prevents potential memory relocations, and potential exceptions due to resizing."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1487794565, "post_id": 42400460, "comment_id": 71949744, "body": "Why <code>&amp;vec[0]</code> and not <code>vec.data()</code>?  I can think of at least 3 reasons to use <code>vec.data()</code> over <code>&amp;vec[0]</code>, and zero to use <code>&amp;vec[0]</code> over <code>vec.data()</code>.  (empty vectors, <code>vector&lt;bool&gt;</code>, <code>std::addressof</code> issues, in decreasing importance)"}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1487808390, "post_id": 42400460, "comment_id": 71956182, "body": "@Yakk I guess old habits die hard from C++03. <code>vec.data()</code> is superior. However, your first reason isn&#39;t good at all since <code>vec.data()</code> should return <code>&amp;vec[0]</code>, even for an empty vector, and the C++ standard allows taking the address of one-past-the-end of an array."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1487811270, "post_id": 42400460, "comment_id": 71956994, "body": "@rlbond you cannot call <code>v[v.size()]</code> -- it is equivalent to <code>*(v.begin()+v.size())</code>, which is <code>*v.end()</code>, even if you immediately <code>&amp;</code> it; dereferencing an <code>end</code> iterator is illegal in <code>vector</code>.  Niw this may be unlikely to format your drive, but it generating run time debug messages seems likeky."}], "tags": [], "owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "is_accepted": false, "score": 3, "last_activity_date": 1487791340, "creation_date": 1487791340, "answer_id": 42400460, "question_id": 42400272, "link": "https://stackoverflow.com/questions/42400272/convert-vector-of-vector-to-pointer-of-pointer/42400460#42400460", "title": "Convert vector of vector to pointer of pointer", "body": "<pre><code>std::vector&lt;short*&gt; vecOfPtrs;\nfor (auto&amp;&amp; vec : vvsVec)\n    vecOfPtrs.push_back(&amp;vec[0]);\n\nfoo(&amp;vecOfPtrs[0]);\n</code></pre>\n"}], "owner": {"reputation": 963, "user_id": 5231637, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2cd12e90cf389349baecb192ace9e312?s=128&d=identicon&r=PG&f=1", "display_name": "yc2986", "link": "https://stackoverflow.com/users/5231637/yc2986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1793, "favorite_count": 0, "accepted_answer_id": 42400448, "answer_count": 2, "score": 8, "last_activity_date": 1487794253, "creation_date": 1487790710, "last_edit_date": 1487794253, "question_id": 42400272, "link": "https://stackoverflow.com/questions/42400272/convert-vector-of-vector-to-pointer-of-pointer", "title": "Convert vector of vector to pointer of pointer", "body": "<p>Assume I have a C library API function which takes pointer of pointers as parameter. However since I am programming in C++ I would like to take advantage of std vector to deal with the dynamic memory. How can I efficiently convert vector of vector into pointer of pointer? Right now I am using this.</p>\n\n<pre><code>#include &lt;vector&gt;\n\n/* C like api */\nvoid foo(short **psPtr, const int x, const int y);    \n\nint main()\n{\n    const int x = 2, y = 3;\n    std::vector&lt;std::vector&lt;short&gt;&gt; vvsVec(x, std::vector&lt;short&gt;(y, 0));\n    short **psPtr = new short*[x];\n\n    /* point psPtr to the vector */\n    int c = 0;\n    for (auto &amp;vsVec : vvsVec)\n        psPtr[c++] = &amp;vsVec[0];\n\n    /* api call */\n    foo(psPtr, x, y);        \n\n    delete[] psPtr;\n    return 0;\n}\n</code></pre>\n\n<p>Is this the best way to achieve the goal? Can I get rid of the \"new delete\" thing by using iterator or some std method in this case? Thanks in advance.</p>\n\n<p><strong>Edit:</strong>\nAccording to answers I am now using this version to interface with C code. I am posting it here.</p>\n\n<pre><code>#include &lt;vector&gt;\n\n/* C like api */\nvoid foo(short **psPtr, const int x, const int y);    \n\nint main()\n{\n    const int x = 2, y = 3;\n    std::vector&lt;std::vector&lt;short&gt;&gt; vvsVec(x, std::vector&lt;short&gt;(y, 0));\n    std::vector&lt;short*&gt; vpsPtr(x, nullptr);\n\n    /* point vpsPtr to the vector */\n    int c = 0;\n    for (auto &amp;vsVec : vvsVec)\n        vpsPtr[c++] = vsVec.data();\n\n    /* api call */\n    foo(vpsPtr.data(), x, y);        \n\n    return 0;\n}\n</code></pre>\n\n<p>Looks more C++ like to me. Thanks for all!</p>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "edited": false, "score": 1, "creation_date": 1487791060, "post_id": 42400261, "comment_id": 71947740, "body": "Can&#39;t find a documentation reference, but it&#39;s likely that you need to use setbuf or setvbuf on your new FILE* after doing _open_osfhandle to set a sensible buffer size, probably not smaller than 256k, you can experiment with larger sizes to see where the sweet spot for read performance is."}, {"owner": {"reputation": 2546, "user_id": 1210992, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/667308854998f2f3ce1a8f386e8c2854?s=128&d=identicon&r=PG", "display_name": "BlueWanderer", "link": "https://stackoverflow.com/users/1210992/bluewanderer"}, "edited": false, "score": 0, "creation_date": 1487791770, "post_id": 42400261, "comment_id": 71948147, "body": "A wild guess: unformatted drive may have some difficulty in handling discarded data, so if you don&#39;t overwrite a whole block, it will end up a read and a write. And I think you should at least try system function first. And as it seems that you are using WindowsNT try Read/WriteFile or even NtRead/WriteFile"}], "owner": {"reputation": 83, "user_id": 4999059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cb277361a9b9d766f5f7679ce1afbf?s=128&d=identicon&r=PG&f=1", "display_name": "nmr", "link": "https://stackoverflow.com/users/4999059/nmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1487791277, "creation_date": 1487790678, "last_edit_date": 1487791277, "question_id": 42400261, "link": "https://stackoverflow.com/questions/42400261/formatted-vs-unformatted-hard-drive-read-wrtie-issue", "title": "Formatted Vs Unformatted Hard Drive Read/Wrtie Issue", "body": "<p>I am trying to read a large amount of data (~TB) from two solid state drives (SSDs) (ideally unformatted) and combine the data by a certain algorithm and write it back to another SSD. Initially I implemented a program that reads from two FORMATTED hard drives (OS sees it) and writes to another formatted hard drive. I was able to get about 450 MB/Sec speed (for the whole program). I was using fread() to read data from SSDs.</p>\n\n<p>Then I implemented it with reading from two UNFORMATTED SSDs and writing to a formatted SSD and I am only getting about 200 MB/sec. I am still using fread() and I am puzzled why the speed is slower. To read unformatted hard drives I have to run in the Admin mode and use HANDLE and then cast it to a file pointer by the time I read bytes. So, once the correct hard drives are found the code is the same and I am using freads(). The code is listed below for a test program I used to measure the speed of the formatted vs unformatted reads. In this program I am getting about 200 MB/sec for UNFORMATTED hard drive reads and 500 MB/sec for FORMATTED hard drive reads.</p>\n\n<p>Formatted read program.</p>\n\n<pre><code>while (tempCounter &lt; frames_to_process)   //\n{\n\n    if (fread(frame_header_A, 1, 212052, pFile_A) != 212052) {\n\n        printf(\"Couldn't read 212052 Bytes\\n\");\n        if (feof(pFile_A))\n        {\n            printf(\"End of File reached while reading the frame\\n\");\n            cout &lt;&lt; \"Num iterations \" &lt;&lt; tempCounter &lt;&lt; endl;\n\n        }\n        if (ferror(pFile_A))\n        {\n            printf(\"Error reading file while reading for the frame\\n\");\n        }\n\n        time2 = chrono::high_resolution_clock::now();\n        time_span = chrono::duration_cast&lt;chrono::duration&lt;double&gt;&gt;(time2 - time1);\n\n        cout &lt;&lt; \"time to create imagery files \" &lt;&lt; setprecision(10) &lt;&lt; time_span.count() &lt;&lt; \" seconds\" &lt;&lt; endl &lt;&lt; endl;\n\n        exit(0);\n        return 0;\n\n    }\n\n\n\n\n\n\n    tempCounter++;\n\n\n    //let's Check whether the variable end with 0xBCB55757\n\n\n    container_count_A = 1;\n    container_count_B = 2;\n\n    if ((frame_header_A[212048] == (char)0xBC) &amp;&amp; (frame_header_A[212049] == (char)0xB5) &amp;&amp; (frame_header_A[212050] == (char)0x57) &amp;&amp; (frame_header_A[212051] == (char)0x57))\n    {\n        unsigned int byte_1 = frame_header_A[27];\n        unsigned int byte_2 = frame_header_A[26];\n        unsigned int byte_3 = frame_header_A[25];\n        unsigned int byte_4 = frame_header_A[24];\n\n    }\n\n\n}\n</code></pre>\n\n<p>Unformatted reads program. Essentially, it iterates though all connected hard drives and find the specific hard drive A and B using a certain pattern. After that the HANDLE is casted to a regular file pointer and then reuses the code above (formatted case)</p>\n\n<pre><code>FILE *pFile_A = NULL;\nFILE *pFile_B = NULL;\nFILE* f = NULL;\n\n\nofstream writeBinary_Combine;\n\nwriteBinary_Combine.open(argv[2], ofstream::out | ofstream::binary);\n//\n\n\nLPCTSTR dsksrc = L\"\\\\\\\\.\\\\PhysicalDrive\";\nwchar_t dsk[512] = L\"\";\n\n\nint fd;\nbool channel_A_found = false;\nbool channel_B_found = false;\nchar frame_header_A[212052];  //seems I can't have another \nchar frame_header_B[212052];\n\nunsigned int container_count_A = 1;\nunsigned int container_count_B = 2;\n\n\nchar* frame_header_test = new char[212052];  // for some reason I am running out of static memory; so I am using heap to alleviate it ???\n\n\nHANDLE hDisk;\n\nfor (int i = 0; i &lt; 8; i++)\n{\n\n\n    swprintf(dsk, 511, L\"%s%d\", dsksrc, i);\n\n    hDisk = CreateFile(dsk, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, NULL, NULL);\n    if (hDisk == INVALID_HANDLE_VALUE)\n    {\n\n        printf(\"%s%d%s\", \"couldn't open the drive \", i, \"\\n\");\n        CloseHandle(hDisk);\n    }\n    else\n    {\n        printf(\"%s%d%s\", \"successfully open the drive \", i, \"\\n\");\n        fd = _open_osfhandle((intptr_t)hDisk, _O_RDONLY);\n\n        char buff_test[500000];\n        if (fd != -1)\n        {\n            f = _fdopen(fd, \"rb\");\n            int ret_code = 0;\n\n            char drive_header[512];\n            fread(drive_header, 1, 512, f);\n\n            if ((drive_header[510] == (char)0x55) &amp;&amp; (drive_header[511] == (char)0xAA))  //  test for a formatted drive; is there other identifiers?\n            {\n                //bootable drive; not an unformatted drive no need to keep on searching\n                //_close(fd);\n            }\n\n            else\n            {\n                fseek(f, 0, SEEK_SET);\n                ret_code = find_BCB55757(f, i);\n\n                if (ret_code != -1)\n                {\n                    fseek(f, 0, SEEK_SET);\n                    fread(buff_test, 1, ret_code, f);\n                    fread(frame_header_test, 1, 212052, f);\n\n                    unsigned int readout_B = 1;\n                    unsigned int cmdout_B = 2;\n\n                    unsigned int byte_1 = frame_header_test[115];\n                    unsigned int byte_2 = frame_header_test[114];\n                    unsigned int byte_3 = frame_header_test[113];\n                    unsigned int byte_4 = frame_header_test[112];\n\n                    readout_B = ((byte_4 &lt;&lt; 24) &amp; 0xff000000) | ((byte_3 &lt;&lt; 16) &amp; 0x00ff0000) | ((byte_2 &lt;&lt; 8) &amp; 0x0000ff00) | (byte_1 &amp; 0x000000ff);\n\n                    byte_1 = frame_header_test[123];\n                    byte_2 = frame_header_test[122];\n                    byte_3 = frame_header_test[121];\n                    byte_4 = frame_header_test[120];\n\n                    cmdout_B = ((byte_4 &lt;&lt; 24) &amp; 0xff000000) | ((byte_3 &lt;&lt; 16) &amp; 0x00ff0000) | ((byte_2 &lt;&lt; 8) &amp; 0x0000ff00) | (byte_1 &amp; 0x000000ff);\n\n                    //cout &lt;&lt; readout_B &lt;&lt; \"  \" &lt;&lt; cmdout_B &lt;&lt; endl;\n\n                    size_t result_1 = 0;\n\n                    if (readout_B == (cmdout_B - 1))\n                    {\n                        channel_B_found = true;\n                        fseek(f, 0, SEEK_SET);              //this is the only way to do it\n                        result_1 = fread(buff_test, 1, ret_code, f);\n\n                        if (result_1 != (size_t)ret_code)\n                        {\n                            cout &lt;&lt; \"reading error 1 \" &lt;&lt; endl;\n                            cout &lt;&lt; \"read bytes \" &lt;&lt; result_1 &lt;&lt; endl;\n                        }\n\n\n                        result_1 = fread(frame_header_B, 1, 212052, f);\n                        if (result_1 != (size_t)212052)\n                        {\n                            cout &lt;&lt; \"reading error 2\" &lt;&lt; endl;\n                            cout &lt;&lt; \"read bytes \" &lt;&lt; result_1 &lt;&lt; endl;\n                        }\n\n                        pFile_B = f;\n\n                        byte_1 = frame_header_B[27];\n                        byte_2 = frame_header_B[26];\n                        byte_3 = frame_header_B[25];\n                        byte_4 = frame_header_B[24];\n\n\n\n                        cout &lt;&lt; \"found B\" &lt;&lt; endl;\n\n                    }\n\n                    else\n                    {\n                        channel_A_found = true;\n                        fseek(f, 0, SEEK_SET);              //this is the only way to do it\n                        result_1 = fread(buff_test, 1, ret_code, f);\n\n                        if (result_1 != (size_t)ret_code)\n                        {\n                            cout &lt;&lt; \"reading error 5\" &lt;&lt; endl;\n                            cout &lt;&lt; \"read bytes \" &lt;&lt; result_1 &lt;&lt; endl;\n                        }\n\n                        result_1 = fread(frame_header_A, 1, 212052, f);\n\n                        if (result_1 != (size_t)212052)\n                        {\n                            cout &lt;&lt; \"reading error 6\" &lt;&lt; endl;\n                            cout &lt;&lt; \"read bytes \" &lt;&lt; result_1 &lt;&lt; endl;\n                        }\n\n                        pFile_A = f;\n\n                        byte_1 = frame_header_A[27];\n                        byte_2 = frame_header_A[26];\n                        byte_3 = frame_header_A[25];\n                        byte_4 = frame_header_A[24];\n\n\n\n\n                        cout &lt;&lt; \"found A\" &lt;&lt; endl;\n\n                    }\n                }\n                //fclose(f);\n            }\n        }\n\n        else\n        {\n            _close(fd);\n        }\n\n    }\n\n    if (channel_A_found &amp;&amp; channel_B_found)\n    {\n        cout &lt;&lt; \"both drives found\" &lt;&lt; endl;\n        break;\n    }\n}// then reuse the code from the formatted case\n</code></pre>\n\n<p>Here are my questions.</p>\n\n<p>1) why is the speed in the unformatted case lot slower although I am using the same fread(). Does it have to do with setting up reading physical drives the HANDLE</p>\n\n<p>2) Is there a way to improve the speed of the unformatted hard drives? should I be using read() instead of fread() in the unformatted case?</p>\n\n<p>I appreciate any help or ideas!</p>\n"}, {"tags": ["c++", "json"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487790651, "post_id": 42400144, "comment_id": 71947527, "body": "We have no way of knowing what library you&#39;re using here. Please present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487790680, "post_id": 42400144, "comment_id": 71947553, "body": "<i>&quot;the runModel(jsonpayload) is a rather big section so I am hoping that the issue is within what I posted above&quot;</i> Don&#39;t &quot;hope&quot; \u2014 spend some time narrowing down the problem, to result in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 1, "user_id": 7606821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314c6c6c922878aff35240e51eb71d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/7606821/laurel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488023462, "creation_date": 1487790301, "last_edit_date": 1488023462, "question_id": 42400144, "link": "https://stackoverflow.com/questions/42400144/json-terminating-with-uncaught-exception-of-type-stddomain-error-type-must-be", "title": "JSON terminating with uncaught exception of type std::domain_error: type must be number, but is null", "body": "<p>I have a modeling code that keeps giving me a domain_error when I try to run it and when I try to debug I can't figure out why it is occurring.  Admittedly I am pretty new to c++, and completely new to JSON so any help would be greatly appreciated.<br>\nThe main() code:</p>\n\n<pre><code>int main() {\n    AirPlenum testair;\n\n    string jsonconststr = zrein::readtxtfile(\"HyperConstants.json\");\n    json::json payload, constants, parameters;\n    constants = json::json::parse(jsonconststr);\n\n    parameters[\"rpm\"] = 689;\n    parameters[\"PreviousRhot\"] = 1;\n    parameters[\"Aexit\"] = 25;\n    parameters[\"Cd\"] = 5;\n    parameters[\"time0\"] = 0.0;\n    parameters[\"time1\"] = 0.01;\n    parameters[\"MdotIn\"] = 82;\n    parameters[\"PreviousTtankout\"] = 10;\n    parameters[\"Tin\"] = 795;\n    parameters[\"Pin\"] = 6500;\n    parameters[\"Ain\"] = 25;\n    parameters[\"Asin\"] = 24;\n    parameters[\"d1\"] = 6;\n    parameters[\"dins\"] = 5;\n    parameters[\"PreviousTsurf\"] = 0.0;\n    parameters[\"Vm\"] = 1;\n\n    payload[\"Constants\"] = constants;\n    payload[\"Parameters\"] = parameters;\n\n    string jpayload = payload.dump(4);\n\n    string results = testair.runModel(jpayload);   //Here is where the issue happens\n\n    cout &lt;&lt; endl &lt;&lt; \"Air Plenum Results\" &lt;&lt; endl;\n    cout &lt;&lt; json::json::parse(results)[\"Parameters\"].dump(4) &lt;&lt; endl;\n\n    payload.clear();\n    parameters.clear();\n    results.clear();\n\n    return 0;\n}\n</code></pre>\n\n<p>The line having issues calls upon this:</p>\n\n<pre><code>std::string AirPlenum::runModel(std::string payload)\n{json::json jsonpayload=json::json::parse(payload);\njson::json results=runModel(jsonpayload);\nreturn results.dump(4);}\n</code></pre>\n\n<p>And the runModel(jsonpayload) is a rather big section so I am hoping that the issue is within what I posted above.  I am getting an exit code of 6 (CLion) which from what I can find online indicates there might be a problem with my links somewhere, but I am not seeing it.</p>\n\n<p>EDIT: so I ended up commenting out one of my parameters and retyping it exactly on the line below and for some reason it now works.</p>\n"}, {"tags": ["c++", "cin"], "comments": [{"owner": {"reputation": 5865, "user_id": 2557138, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zwSr0.png?s=128&g=1", "display_name": "Rick S", "link": "https://stackoverflow.com/users/2557138/rick-s"}, "edited": false, "score": 0, "creation_date": 1487790035, "post_id": 42399975, "comment_id": 71947120, "body": "And this one too: <a href=\"http://stackoverflow.com/questions/18936664/how-to-limit-input-to-numbers-only\" title=\"how to limit input to numbers only\">stackoverflow.com/questions/18936664/&hellip;</a>"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487790070, "post_id": 42399975, "comment_id": 71947142, "body": "DevC++ is an IDE. How is that relevant to the question?"}, {"owner": {"reputation": 493, "user_id": 3601666, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100004042307975/picture?type=large", "display_name": "Edie Johnny", "link": "https://stackoverflow.com/users/3601666/edie-johnny"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487790244, "post_id": 42399975, "comment_id": 71947247, "body": "@MrEricSir I don&#39;t know, maybe it&#39;s a bug, some people told me that it&#39;s the worst IDE ever. I just downloaded it because it&#39;s free, light and portable."}], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": false, "score": 1, "last_activity_date": 1487790401, "last_edit_date": 1487790401, "creation_date": 1487790054, "answer_id": 42400070, "question_id": 42399975, "link": "https://stackoverflow.com/questions/42399975/how-to-accept-only-numbers-in-cin-c-programming/42400070#42400070", "title": "How to accept only numbers in &#39;cin&#39; (C++ Programming)?", "body": "<p>It happens because <code>cin</code> extracts the <code>1</code> digit in one pass, and stores that in your array. It stops reading when it encounters the <code>a</code> (since that is not a valid character for an integer), and leaves it in the input buffer. It then reads the <code>a</code> on the next pass, which causes it to fail because it's not an integer.</p>\n\n<p>What you should do is use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> to read strings instead. Then you can do any kind of parsing you want. You can use functions from the standard library like <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\"><code>std::stoi</code></a> if they suit you. Otherwise write your own custom parsing.</p>\n"}], "owner": {"reputation": 493, "user_id": 3601666, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100004042307975/picture?type=large", "display_name": "Edie Johnny", "link": "https://stackoverflow.com/users/3601666/edie-johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2326, "favorite_count": 0, "closed_date": 1487790324, "answer_count": 1, "score": 0, "last_activity_date": 1487790401, "creation_date": 1487789777, "question_id": 42399975, "link": "https://stackoverflow.com/questions/42399975/how-to-accept-only-numbers-in-cin-c-programming", "closed_reason": "Duplicate", "title": "How to accept only numbers in &#39;cin&#39; (C++ Programming)?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;locale&gt;\n\nusing namespace std;\n\nint main(int argc, char** argv) {\n\n    setlocale(LC_ALL, \"English\");\n\n    int i, vetor[16];\n    for(i = 0; i &lt; 16; i ++) {\n        cout &lt;&lt; \"Input the position: [\" &lt;&lt; i &lt;&lt; \"]: \";\n        cin  &gt;&gt; vetor[i];\n        if(cin.fail()) {\n            cin.clear();\n            cin.ignore(numeric_limits &lt; streamsize &gt; ::max(), '\\n');\n            cout &lt;&lt; \"Please, input only numbers.\" &lt;&lt; endl;\n            i --;\n            continue;\n        }\n\n        if(vetor[i] &lt;= 0) {\n            cout &lt;&lt; \"Insert a non-zero value.\" &lt;&lt; endl;\n            i --;\n            continue;\n        }\n    }\n    cout &lt;&lt; vetor[0];\n\n    return 0;\n}\n</code></pre>\n\n<p>And I need to accept only numbers. When I run it and insert <code>\"1\"</code> (or any other number), it goes to the following position, what's correct. When I input <code>\"a\"</code>, it shows me the error and warn me to input only numbers, what's correct too. If I input <code>\"a1\"</code>, the same thing occurs, what's correct. But when I input <code>\"1a\"</code>, it shows me the warning, but the code continues to the next position, and when it executes the last line with the <code>cout</code> command above the <code>return</code>, it tells me the value is <code>\"1\"</code>, not <code>\"1a\"</code>, because the type of the variable is <code>int</code> I believe.</p>\n\n<p>Can someone tells me why does it happen? I need to accept only numbers, and <code>\"1a\"</code> is not a number. How can I filter this and how can I do to when I input <code>\"1a\"</code>, occurs the same thing as I had input <code>\"a\"</code>?</p>\n\n<p>I use DevC++ 5.11.</p>\n"}, {"tags": ["c++", "lambda"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1487789383, "post_id": 42399809, "comment_id": 71946737, "body": "It is a typo in the book."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1487789386, "post_id": 42399809, "comment_id": 71946740, "body": "Looks like a typo in the book.  There should be a <code>;</code> at the end there."}, {"owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487789493, "post_id": 42399809, "comment_id": 71946796, "body": "@NathanOliver Thanks guys."}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 7240762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d1xni.jpg?s=128&g=1", "display_name": "N. Gerontidis", "link": "https://stackoverflow.com/users/7240762/n-gerontidis"}, "is_accepted": true, "score": 1, "last_activity_date": 1487789743, "creation_date": 1487789743, "answer_id": 42399964, "question_id": 42399809, "link": "https://stackoverflow.com/questions/42399809/is-this-a-typo-in-c-primer-plus-sixth-edition/42399964#42399964", "title": "Is this a typo in C++ Primer Plus (Sixth Edition)", "body": "<p>Yes the semicolon is needed and the compiler will show an error, something like \"syntax error: missing ';'...\".</p>\n"}], "owner": {"reputation": 151, "user_id": 2557276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb272702a465a7355d30b1b0dfeaff1f?s=128&d=identicon&r=PG", "display_name": "Illia", "link": "https://stackoverflow.com/users/2557276/illia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 42399964, "answer_count": 1, "score": 1, "last_activity_date": 1496393739, "creation_date": 1487789249, "last_edit_date": 1496393739, "question_id": 42399809, "link": "https://stackoverflow.com/questions/42399809/is-this-a-typo-in-c-primer-plus-sixth-edition", "title": "Is this a typo in C++ Primer Plus (Sixth Edition)", "body": "<p>In the book C++ Primer Plus I see the following example:</p>\n\n<pre><code>auto mod3 = [](int x){return x % 3 == 0; }  //&lt;---- note no semicolon\nconut1 = std::count_if(n1.begin(), n1.end(), mod3);\n</code></pre>\n\n<p>In my own code I just tried to use it in the following way:</p>\n\n<pre><code>auto compareEntry = [](PCEntry* a, PCEntry* b) { return (a-&gt;getSize() &lt; b-&gt;getSize());  }; //&lt;--- semicolon\nstd::priority_queue&lt; PCEntry*, std::vector&lt;PCEntry*&gt;, decltype(compareEntry) &gt; sorted(compareEntry);\n</code></pre>\n\n<p>I had problems with this code until I added the semicolon after lambda following a post on stack overflow. </p>\n\n<p>My question:</p>\n\n<p>Is it an error in the book? Or Am I missing something.\nIt looks inconsistent to me.</p>\n\n<p>Just in case:\nBook: C++ Primer Plus (Sixth Edition) S. Prata page: 1189</p>\n"}, {"tags": ["c++", "qt", "user-interface", "web"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3053231"}, "edited": false, "score": 0, "creation_date": 1487789796, "post_id": 42399789, "comment_id": 71946965, "body": "web user interface written in C++?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487790596, "post_id": 42399789, "comment_id": 71947488, "body": "You mean you want your application to incorporate a web browser, or you want your application to act as a local web server?"}, {"owner": {"reputation": 197, "user_id": 2447249, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62afc75913da2b06c50ec4bad2a723c7?s=128&d=identicon&r=PG", "display_name": "m.taheri", "link": "https://stackoverflow.com/users/2447249/m-taheri"}, "edited": false, "score": 0, "creation_date": 1487795468, "post_id": 42399789, "comment_id": 71950209, "body": "@\u041c\u0430\u0440\u0442\u0438\u043d \u0411\u0435\u0435, yes. Of course, preferably using Qt framework."}, {"owner": {"reputation": 197, "user_id": 2447249, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62afc75913da2b06c50ec4bad2a723c7?s=128&d=identicon&r=PG", "display_name": "m.taheri", "link": "https://stackoverflow.com/users/2447249/m-taheri"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487795568, "post_id": 42399789, "comment_id": 71950269, "body": "@MrEricSir, I clarified my question. I need my application to act as a web server (not necessarily local)."}], "answers": [{"tags": [], "owner": {"reputation": 1317, "user_id": 3859568, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/95f7c4804f0329695780bb33b83311eb?s=128&d=identicon&r=PG&f=1", "display_name": "FourtyTwo", "link": "https://stackoverflow.com/users/3859568/fourtytwo"}, "is_accepted": false, "score": 2, "last_activity_date": 1487795731, "creation_date": 1487795731, "answer_id": 42401731, "question_id": 42399789, "link": "https://stackoverflow.com/questions/42399789/best-way-to-have-a-web-user-interface-for-a-qt-application/42401731#42401731", "title": "Best way to have a web user interface for a Qt application?", "body": "<p>I have read about <a href=\"http://cutelyst.org/\" rel=\"nofollow noreferrer\">Cutelyst</a> on the Qt blog a few times, which seems an exact fit to your question. </p>\n"}], "owner": {"reputation": 197, "user_id": 2447249, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62afc75913da2b06c50ec4bad2a723c7?s=128&d=identicon&r=PG", "display_name": "m.taheri", "link": "https://stackoverflow.com/users/2447249/m-taheri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 0, "closed_date": 1487815627, "answer_count": 1, "score": 0, "last_activity_date": 1488660887, "creation_date": 1487789172, "last_edit_date": 1488660887, "question_id": 42399789, "link": "https://stackoverflow.com/questions/42399789/best-way-to-have-a-web-user-interface-for-a-qt-application", "closed_reason": "Needs details or clarity", "title": "Best way to have a web user interface for a Qt application?", "body": "<p>I have written a service using C++ and Qt framework (QtService). The service should run in the background. I need the service to have a web user interface and can be accessed using web browsers. I mean the service should act as as a web server and output html content to a specific port. I know there are some frameworks that can be used to generate web content in C++, but by taking into account that I am using Qt, I prefer to use Qt features as much as possible rather than a new framework. Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 0, "creation_date": 1487788845, "post_id": 42399662, "comment_id": 71946437, "body": "<code>number1_result == true&#47;false</code> is a condition, change <code>==</code> to <code>=</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487788886, "post_id": 42399662, "comment_id": 71946462, "body": "Break the loop as soon as you find a divisor.  There is no need to keep checking the others."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1487789044, "post_id": 42399662, "comment_id": 71946544, "body": "<a href=\"http://coliru.stacked-crooked.com/a/e9cadc9857b846e5\" rel=\"nofollow noreferrer\">Turn on warnings.</a>"}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1487789408, "post_id": 42399662, "comment_id": 71946745, "body": "Not really related to your question but you can skip 4, 9 and 25 because they have multiples included in the array. More generally, if you want to test many numbers against the same array, it could meke sense to check for such cases first."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 5302890, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-v9oDwa4Co8E/AAAAAAAAAAI/AAAAAAAAADQ/u1HbMLYlQHU/photo.jpg?sz=128", "display_name": "Brendan Jackson", "link": "https://stackoverflow.com/users/5302890/brendan-jackson"}, "edited": false, "score": 0, "creation_date": 1487789765, "post_id": 42399713, "comment_id": 71946945, "body": "Only after the time limit"}], "tags": [], "owner": {"reputation": 1081, "user_id": 6764663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GlGjM.jpg?s=128&g=1", "display_name": "Tanuj Yadav", "link": "https://stackoverflow.com/users/6764663/tanuj-yadav"}, "is_accepted": true, "score": 2, "last_activity_date": 1487839390, "last_edit_date": 1487839390, "creation_date": 1487788903, "answer_id": 42399713, "question_id": 42399662, "link": "https://stackoverflow.com/questions/42399662/is-a-number-divisible-by-any-number-in-array/42399713#42399713", "title": "Is a number divisible by any number in array", "body": "<p>Break the loop once you find a divisor.And use <code>=</code> instead of <code>==</code> for assignment.    <br>Correct solution is- </p>\n\n<pre><code>int square_numbers[10] = { 4, 9, 25, 36, 49, 64, 81, 100, 121, 144 };\nbool number1_result=false;\n\nfor (int i = 0; i &lt; 10; i++) {\n    if(number1 % square_numbers[i] == 0) {\n        number1_result = true;\n        break;\n    } \n}\n</code></pre>\n\n<p>Problem with your code is that it overwrites number_result even if it is already true.  </p>\n\n<p>Consider the example, <code>number1=4</code>, <code>square_number={2, 3}</code><br>\nIn your loop <code>num_result</code> will become <code>true</code> at first comparison but it will again become <code>false</code> on next comparison with <code>3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1487789394, "creation_date": 1487789394, "answer_id": 42399858, "question_id": 42399662, "link": "https://stackoverflow.com/questions/42399662/is-a-number-divisible-by-any-number-in-array/42399858#42399858", "title": "Is a number divisible by any number in array", "body": "<p>The problem is you are assigning <code>number1_result</code> which should check inside the loop but instead you have to input <code>number1</code>:</p>\n\n<pre><code>cin &gt;&gt; number1_result; // redundant\n</code></pre>\n\n<p>The answer:</p>\n\n<pre><code>int square_numbers[10] = { 4, 9, 25, 36, 49, 64, 81, 100, 121, 144 };\nbool number1_result = false;\n\nint number1;\ncin &gt;&gt; number1;  \n\nfor (int i = 0; i &lt; 10; i++) {\n    if(number1 % square_numbers[i] == 0){\n        number1_result = true;\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1487790512, "creation_date": 1487790512, "answer_id": 42400217, "question_id": 42399662, "link": "https://stackoverflow.com/questions/42399662/is-a-number-divisible-by-any-number-in-array/42400217#42400217", "title": "Is a number divisible by any number in array", "body": "<p>With <code>std</code>:</p>\n\n<pre><code>bool number1_result = std::any_of(std::begin(square_numbers),\n                                  std::end(square_numbers),\n                                  [&amp;](auto e){ return number % e == 0; });\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 5302890, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-v9oDwa4Co8E/AAAAAAAAAAI/AAAAAAAAADQ/u1HbMLYlQHU/photo.jpg?sz=128", "display_name": "Brendan Jackson", "link": "https://stackoverflow.com/users/5302890/brendan-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 42399713, "answer_count": 3, "score": -3, "last_activity_date": 1487839390, "creation_date": 1487788722, "last_edit_date": 1487789826, "question_id": 42399662, "link": "https://stackoverflow.com/questions/42399662/is-a-number-divisible-by-any-number-in-array", "title": "Is a number divisible by any number in array", "body": "<p>I'm trying to see if a number is divisible by any given numbers in an array.\n I've seen a lot of answers with the number1 % number2 == 0 answer but I haven't found any with an array of numbers and I'd rather not write out each number in the array myself (that would be working too hard). </p>\n\n<p>So here is what I'm trying to figure out. As you can see the only way this works currently is if the  last number I give it is true otherwise the else statement kicks in and evaluates number1_result to false. </p>\n\n<pre><code>int square_numbers[10] = { 4, 9, 25, 36, 49, 64, 81, 100, 121, 144 };\nint number1;    \nbool number1_result;\n\ncin &gt;&gt; number1; \n\nfor (int i = 0; i &lt; 10; i++) {\n    if(number1 % square_numbers[i] == 0)\n        number1_result = true; \n    else\n        number1_result = false;\n}\n</code></pre>\n\n<p>How do I make sure that if the loop ever evaluates to true once, it is true. If its not true at least one time, it is false.</p>\n\n<p>Let me know if you need more info and thank you!</p>\n"}, {"tags": ["c++", "qt", "restrictions"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1487788982, "post_id": 42399457, "comment_id": 71946518, "body": "Have you tried to implement the mousePressEvent and mouseReleaseEvent?"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1487791653, "post_id": 42399457, "comment_id": 71948074, "body": "Not really. But I need the position of the cursor when I &quot;grab&quot; the custom widget (to drag it) to not allow the widget to move outside the QScrollArea. how can I do that using mousePress and mouseRelease? Wouldn&#39;t mouse press also activate when I just click anywhere?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1487791904, "post_id": 42399457, "comment_id": 71948232, "body": "try with eventFilter"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1487792755, "post_id": 42399457, "comment_id": 71948729, "body": "This would solve my second problem. But I really want to know why &quot;mouseMoveEvent&quot; isn&#39;t triggerring. I will try to use event filters"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1487794950, "post_id": 42399457, "comment_id": 71949941, "body": "You&#39;re looking for mouse tracking: you must enable it."}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1487795312, "post_id": 42399457, "comment_id": 71950126, "body": "@KubaOber already did. check the constructor of &quot;myscrollarea.cpp&quot;. There is a line like this: <code>this-&gt;setMouseTracking(true);</code>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1487856248, "post_id": 42399457, "comment_id": 71979227, "body": "@andseg Sorry, didn&#39;t notice it before."}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "edited": false, "score": 0, "creation_date": 1487872897, "post_id": 42402465, "comment_id": 71991551, "body": "This is a good idea. Just as pointed by eyllanesc. But the I don&#39;t know if the <code>event-&gt;type()</code> is a <code>QEvent::MouseMove</code> because <code>mouseTracking</code> is not working properly. Again, this solves my second problem, but not the first one."}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 0, "last_activity_date": 1487798291, "creation_date": 1487798291, "answer_id": 42402465, "question_id": 42399457, "link": "https://stackoverflow.com/questions/42399457/qt-5-7-how-to-restrict-mouse-movement-inside-a-widget/42402465#42402465", "title": "Qt 5.7 How to restrict mouse movement inside a widget", "body": "<p>What about using EventFilter? Steps:</p>\n\n<p>Install an <a href=\"http://doc.qt.io/qt-5/qobject.html#installEventFilter\" rel=\"nofollow noreferrer\">event filter</a> in your widget:</p>\n\n<pre><code>this-&gt;setMouseTracking(true);\nthis-&gt;installEventFilter(this);\n</code></pre>\n\n<p>Reimplement the <a href=\"http://doc.qt.io/qt-5/qobject.html#eventFilter\" rel=\"nofollow noreferrer\">eventFilter</a> function:</p>\n\n<pre><code>bool MyScrollArea::eventFilter(QObject *obj, QEvent *event)\n{\n    if (obj == this) {\n        if(event-&gt;type() == QEvent::MouseMove) {\n             QMouseEvent *mEvent = (QMouseEvent*)event;\n             // Use something like the viewPortSize to handle if the pos event is inside\n             if (over) { \n                   // Mouse over Widget\n             } else {\n                  // Mouse outside\n             }\n        }\n    } else {\n        return QScrollArea::eventFilter(obj, event);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 711, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560693146, "creation_date": 1487788044, "question_id": 42399457, "link": "https://stackoverflow.com/questions/42399457/qt-5-7-how-to-restrict-mouse-movement-inside-a-widget", "title": "Qt 5.7 How to restrict mouse movement inside a widget", "body": "<p>I want the mouse to be \"stuck\" inside the QScrollArea while I'm dragging  custom widget. I made the QScrollArea a subclass called <code>MyScrollArea</code> so I could reimplement the event <code>mouseMoveEvent</code>. This is <code>MyScrollArea</code> subclass:</p>\n\n<p>myscrollarea.h</p>\n\n<pre><code>#ifndef MYSCROLLAREA_H\n#define MYSCROLLAREA_H\n\n#include &lt;QScrollArea&gt;\n#include &lt;QDebug&gt;\n#include &lt;QtGui&gt;\n\nclass MyScrollArea : public QScrollArea\n{\n    Q_OBJECT\npublic:\n    explicit MyScrollArea(QWidget *parent = 0);\n\nsignals:\n    void changeLabel(QString);\n\npublic slots:\n\nprotected:\n    void leaveEvent(QEvent *event);\n\n    void mouseMoveEvent(QMouseEvent *event);\n\nprivate:\n    int mouseX, mouseY;\n};\n\n#endif // MYSCROLLAREA_H\n</code></pre>\n\n<p>myscrollarea.cpp</p>\n\n<pre><code>#include \"myscrollarea.h\"\n\nMyScrollArea::MyScrollArea(QWidget *parent)\n    : QScrollArea(parent)\n{\n    this-&gt;setMouseTracking(true);\n    mouseX = 0;\n    mouseY = 0;\n}\n\nvoid MyScrollArea::leaveEvent(QEvent *event)\n{\n    qDebug() &lt;&lt; \"LEFT!\";\n}\n\nvoid MyScrollArea::mouseMoveEvent(QMouseEvent *event)\n{\n    mouseX = event-&gt;x();\n    mouseY = event-&gt;y();\n    event-&gt;accept();\n    emit changeLabel(QString::number(mouseX) + \", \" + QString::number(mouseY));\n}\n</code></pre>\n\n<p>Even though the mouse tracking is set to true, I only manage to get the <code>mouseMoveEvent</code> when a button is held.</p>\n\n<p><strong>My question is:</strong></p>\n\n<ol>\n<li>How do I make <code>mouseMoveEvent</code> trigger in all movements?</li>\n<li>How do I set the cursor to the last position (inside the \"QScrollArea\") when he is dragging the custom widget I created?</li>\n</ol>\n"}, {"tags": ["c++", "linux", "sfml"], "comments": [{"owner": {"reputation": 2938, "user_id": 1936366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0298a41112c6940b378ca0e88c4183?s=128&d=identicon&r=PG", "display_name": "Onur A.", "link": "https://stackoverflow.com/users/1936366/onur-a"}, "edited": false, "score": 0, "creation_date": 1487806967, "post_id": 42399123, "comment_id": 71955669, "body": "double check your path, issue seems related with your path to SFML files"}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487832192, "post_id": 42399123, "comment_id": 71963893, "body": "Please show <code>ls -l &#47;media&#47;eidan&#47;soft&#47;c++&#47;Libraries&#47;SFML-2.4.2&#47;lib&#47;libsfml-windo&zwnj;&#8203;w*</code>  Besides that, as far as I understand you launch the program not from the Makefile, but from the command line you give by hands, right? Then I assume the Makefile has nothing to do with the error message."}, {"owner": {"reputation": 21, "user_id": 7606573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bfd58c34df3f61cab575b5c9a57d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eidan", "link": "https://stackoverflow.com/users/7606573/eidan"}, "reply_to_user": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487845302, "post_id": 42399123, "comment_id": 71971575, "body": "@dmi !<a href=\"http://imgur.com/OQakv5J\" rel=\"nofollow noreferrer\">valid XHTML</a>."}, {"owner": {"reputation": 21, "user_id": 7606573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bfd58c34df3f61cab575b5c9a57d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eidan", "link": "https://stackoverflow.com/users/7606573/eidan"}, "edited": false, "score": 0, "creation_date": 1487845420, "post_id": 42399123, "comment_id": 71971646, "body": "!<a href=\"http://imgur.com/a4FpEfI\" rel=\"nofollow noreferrer\">valid XHTML</a> \u0444\u0435\u0432 is february on rus"}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487845516, "post_id": 42399123, "comment_id": 71971725, "body": "@Eidan, sorry I cannot understand your comment. What exactly do you mean?"}, {"owner": {"reputation": 21, "user_id": 7606573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bfd58c34df3f61cab575b5c9a57d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eidan", "link": "https://stackoverflow.com/users/7606573/eidan"}, "reply_to_user": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487850363, "post_id": 42399123, "comment_id": 71974984, "body": "@dmi this is link to <code>ls -l &#47;media&#47;eidan&#47;soft&#47;c++&#47;Libraries&#47;SFML-2.4.2&#47;lib&#47;libsfml-windo&zwnj;&#8203;w*</code> ( <a href=\"http://imgur.com/a4FpEfI\" rel=\"nofollow noreferrer\">imgur.com/a4FpEfI</a> ) and it&#39;s link to my process of launching ( <a href=\"http://imgur.com/OQakv5J\" rel=\"nofollow noreferrer\">imgur.com/OQakv5J</a>  ) In dark blue window you can see my makefile and above you  can see path to my makefile"}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487850543, "post_id": 42399123, "comment_id": 71975116, "body": "I cannot access that, please paste as text, or send in a message."}, {"owner": {"reputation": 21, "user_id": 7606573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bfd58c34df3f61cab575b5c9a57d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eidan", "link": "https://stackoverflow.com/users/7606573/eidan"}, "reply_to_user": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487851220, "post_id": 42399123, "comment_id": 71975601, "body": "@dmi  first part of <code>ls -l &#47;media&#47;eidan&#47;soft&#47;c++&#47;Libraries&#47;SFML-2.4.2&#47;lib&#47;libsfml-windo&zwnj;&#8203;\u200c\u200bw*</code>  indent here   <code>lrwxrwxrwx 1 eidan eidan      23 \u0444\u0435\u0432 22 20:23 libsfml-window-d.so -&gt; libsfml-window-d.so.2.4</code>    indent here    <code>lrwxrwxrwx 1 eidan eidan      25 \u0444\u0435\u0432 22 20:23 libsfml-window-d.so.2.4 -&gt; libsfml-window-d.so.2.4.2</code>   indent here    <code>-rw-r--r-- 1 eidan eidan 1269880 \u0444\u0435\u0432 10 17:19 libsfml-window-d.so.2.4.2</code>   indent here    <code>-rw-r--r-- 1 eidan eidan  322658 \u0444\u0435\u0432 10 17:21 libsfml-window-s.a</code> `"}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1487851361, "post_id": 42399123, "comment_id": 71975707, "body": "That&#39;s what I assumed - I don&#39;t see a file named like libsfml-window.so or libsfml-window.so.XX.XX. What I see in your listing is I assume a debug version of the library with prefix -d. Perhaps you have somewhere else the libsfml-window.so which was used while linking but cannot be found while execution?"}], "answers": [{"tags": [], "owner": {"reputation": 1475, "user_id": 2000724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOARB.png?s=128&g=1", "display_name": "ETech", "link": "https://stackoverflow.com/users/2000724/etech"}, "is_accepted": false, "score": 0, "last_activity_date": 1488021776, "creation_date": 1488021776, "answer_id": 42455403, "question_id": 42399123, "link": "https://stackoverflow.com/questions/42399123/error-while-loading-libraries/42455403#42455403", "title": "Error while loading libraries", "body": "<p>This can be solved with one of following ways:<br>\n 1. Create /etc/ld.so.conf.d/some.conf file and add /media/eidan/soft/c++/Libraries/SFML-2.4.2/lib path there<br>\n 2. Create a launch script, exporting LD_LIBRARY_PATH of your linked shared libraries dir upon start. This library path can be exported for any launched bash session manually.<br>\n-L CFLAG is being used only by the compiler. Library path is not being included to the final binary file.</p>\n"}], "owner": {"reputation": 21, "user_id": 7606573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bfd58c34df3f61cab575b5c9a57d4c?s=128&d=identicon&r=PG&f=1", "display_name": "Eidan", "link": "https://stackoverflow.com/users/7606573/eidan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1488021776, "creation_date": 1487786849, "last_edit_date": 1488019319, "question_id": 42399123, "link": "https://stackoverflow.com/questions/42399123/error-while-loading-libraries", "title": "Error while loading libraries", "body": "<p>Content of my makefile:</p>\n\n<pre><code>all: compile launch\n\ncompile:\n    g++ main.cpp -c -I/media/eidan/soft/c++/Libraries/SFML-2.4.2/include \n\nlaunch:\n    g++ main.o -o result -L/media/eidan/soft/c++/Libraries/SFML-2.4.2/lib -lsfml-window -lsfml-system -lsfml-graphics\n</code></pre>\n\n<p>And when I'm trying launch program I get this:</p>\n\n<pre><code>./result: error while loading shared libraries: libsfml-window.so.2.4: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>Although my SFML paths are right and file <strong>libsfml-window.so.2.4</strong> exist</p>\n\n<p>What I must change in Makefile to make it work?</p>\n\n<p>PS: Ubuntu 16.04</p>\n"}, {"tags": ["c++", "winapi", "com"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487790653, "post_id": 42399071, "comment_id": 71947529, "body": "yes, can confirm. this is really windows bug"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487792625, "post_id": 42399071, "comment_id": 71948651, "body": "this is bug of <code>Shlwapi.dll</code> - current implementation not design for work with files more than <code>0xffffffff</code> size. all what you can do, if need IStream on large files - implement it yourself"}, {"owner": {"reputation": 960, "user_id": 173314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413a4161a98009b12be1189b7428e4d8?s=128&d=identicon&r=PG", "display_name": "wjt", "link": "https://stackoverflow.com/users/173314/wjt"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487837583, "post_id": 42399071, "comment_id": 71966620, "body": "@RbMm is this documented anywhere? Or is it just knowledge you accumulate? \u263a"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487840941, "post_id": 42399071, "comment_id": 71968642, "body": "I simply test what you wrote - set offset to <code>0xffffffff</code> read 1 byte and check stream offset again. - <code>0x100000fff</code>. trace function call under debugger and view that this is <code>shlwapi</code> bug"}], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 173314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413a4161a98009b12be1189b7428e4d8?s=128&d=identicon&r=PG", "display_name": "wjt", "link": "https://stackoverflow.com/users/173314/wjt"}, "edited": false, "score": 0, "creation_date": 1487860290, "post_id": 42413720, "comment_id": 71982424, "body": "Thanks for going to the effort of stepping through in the debugger!"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 960, "user_id": 173314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413a4161a98009b12be1189b7428e4d8?s=128&d=identicon&r=PG", "display_name": "wjt", "link": "https://stackoverflow.com/users/173314/wjt"}, "edited": false, "score": 0, "creation_date": 1487862803, "post_id": 42413720, "comment_id": 71984438, "body": "@wjt - i add explanation why this happens, why exactly  <code>100000FFF</code> offset. really stepping under debugger is very easy )"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 2, "last_activity_date": 1487862734, "last_edit_date": 1487862734, "creation_date": 1487847285, "answer_id": 42413720, "question_id": 42399071, "link": "https://stackoverflow.com/questions/42399071/shcreatestreamonfileex-on-files-larger-than-232-bytes/42413720#42413720", "title": "SHCreateStreamOnFileEx on files larger than 2**32 bytes", "body": "<p>this is really windows bug. tested on several windows version including latest <code>SHCore.DLL</code> version <code>10.0.14393.0</code> x64. simple way for reproduce:</p>\n\n<pre><code>void BugDemo(PCWSTR path)\n{\n    // FILE_FLAG_DELETE_ON_CLOSE !\n    HANDLE hFile = CreateFile(path, FILE_GENERIC_WRITE, FILE_SHARE_READ|FILE_SHARE_DELETE, 0, \n        CREATE_NEW, FILE_ATTRIBUTE_TEMPORARY|FILE_FLAG_DELETE_ON_CLOSE, 0);\n\n    if (hFile != INVALID_HANDLE_VALUE)\n    {\n        ULONG dwBytesRet;\n        // i not want really take disk space\n        if (DeviceIoControl(hFile, FSCTL_SET_SPARSE, NULL, 0, NULL, 0, &amp;dwBytesRet, NULL))\n        {\n            static FILE_END_OF_FILE_INFO eof = { 0, 2 };// 8GB\n            if (SetFileInformationByHandle(hFile, FileEndOfFileInfo, &amp;eof, sizeof(eof)))\n            {\n                IStream* pstm;\n                if (!SHCreateStreamOnFileEx(path, STGM_READ|STGM_SHARE_DENY_NONE, 0,FALSE, NULL, &amp;pstm))\n                {\n                    LARGE_INTEGER pos = { 0xffffffff };\n                    ULARGE_INTEGER newpos;\n                    if (!pstm-&gt;Seek(pos, STREAM_SEEK_SET, &amp;newpos) &amp;&amp; !pstm-&gt;Read(&amp;newpos, 1, &amp;dwBytesRet))\n                    {\n                        pos.QuadPart = 0;\n                        if (!pstm-&gt;Seek(pos, STREAM_SEEK_CUR, &amp;newpos))\n                        {\n                            DbgPrint(\"newpos={%I64x}\\n\", newpos.QuadPart);//newpos={100000fff}\n                        }\n                    }\n                    pstm-&gt;Release();\n                }\n            }\n        }\n\n        // close and delete\n        CloseHandle(hFile);\n    }\n}\n\nvoid BugDemo()\n{\n    WCHAR path[MAX_PATH];\n    if (ULONG len = GetTempPath(RTL_NUMBER_OF(path), path))\n    {\n        if (len + 16 &lt; MAX_PATH)\n        {\n            FILETIME ft;\n            GetSystemTimeAsFileTime(&amp;ft);\n            swprintf(path + len, L\"%08x%08x\", ~ft.dwLowDateTime, ft.dwHighDateTime);\n            BugDemo(path);\n        }\n    }\n}\n</code></pre>\n\n<p>I trace <code>virtual long CFileStream::Seek(LARGE_INTEGER, ULONG, ULARGE_INTEGER* );</code> under debugger and can confirm that this function not design to work with files more than 4GB size</p>\n\n<hr>\n\n<p>if be more exactly, why is <code>100000FFF</code> offset - <code>CFileStream</code> use internal buffer for read <code>1000</code> byte size. when you ask read 1 byte from <code>FFFFFFFF</code> offset - it actually read <code>1000</code> bytes to the buffer and file offset become <code>100000FFF</code>. when you then call <code>Seek(0, STREAM_SEEK_CUR, &amp;newpos)</code> - <code>CFileStream</code> call <code>SetFilePointer(hFile, 1-1000, 0/*lpDistanceToMoveHigh*/, FILE_CURRENT)</code> </p>\n\n<p>(1 this is internal position in buffer, because we read 1 byte minus buffer size 1000) . if not take to account overflow can be <code>(100000FFF + (1 - 1000)) == 100000000</code> but </p>\n\n<p>read about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365541(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SetFilePointer</code></a></p>\n\n<blockquote>\n  <p>If <em>lpDistanceToMoveHigh</em> is <strong>NULL</strong> and the new file position does not fit\n  in a 32-bit value, the function fails and returns\n  <strong>INVALID_SET_FILE_POINTER</strong>.</p>\n</blockquote>\n\n<p>as result <code>SetFilePointer</code> fail (return <code>INVALID_SET_FILE_POINTER</code>) but <code>CFileStream</code> even not check for this. and then it call <code>SetFilePointerEx(hFile, 0, &amp;newpos, FILE_CURRENT)</code> and return to you newpos which still <code>100000FFF</code></p>\n"}], "owner": {"reputation": 960, "user_id": 173314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413a4161a98009b12be1189b7428e4d8?s=128&d=identicon&r=PG", "display_name": "wjt", "link": "https://stackoverflow.com/users/173314/wjt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 1, "accepted_answer_id": 42413720, "answer_count": 1, "score": 4, "last_activity_date": 1487862734, "creation_date": 1487786674, "question_id": 42399071, "link": "https://stackoverflow.com/questions/42399071/shcreatestreamonfileex-on-files-larger-than-232-bytes", "title": "SHCreateStreamOnFileEx on files larger than 2**32 bytes", "body": "<p>I'm getting an <code>IStream</code> for a file using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb759866(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SHCreateStreamOnFileEx</code></a>, but its <code>Read()</code> method appears to misbehave on extremely large files when the new position of the seek pointer is 2 ** 32 bytes or further into the file.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380011(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ISequentialStream::Read</code>'s documentation says</a>:</p>\n\n<blockquote>\n  <p>This method adjusts the seek pointer by the actual number of bytes read.</p>\n</blockquote>\n\n<p>This is the same behaviour as <code>read(2)</code> and <code>fread(3)</code> on all platforms I'm aware of. </p>\n\n<p>But with these streams, this isn't the actual behaviour I see in some cases:</p>\n\n<ul>\n<li><code>Seek(2 ** 32 - 2, SEEK_SET, &amp;pos)</code>, <code>Read(buf, 1, &amp;bytesRead)</code>, <code>Seek(0, MOVE_CUR, &amp;pos)</code> \u2192 <code>bytesRead == 1</code> and <code>pos == 2 ** 32 - 1</code>, as expected.</li>\n<li><code>Seek(2 ** 32 - 1, SEEK_SET, &amp;pos)</code>, <code>Read(buf, 1, &amp;bytesRead)</code>, <code>Seek(0, MOVE_CUR, &amp;pos)</code> \u2192 <code>bytesRead == 1</code>, but <code>pos == (2 ** 32 - 1) + 4096</code>, which is incorrect. This means that any subsequent reads (without another <code>Seek</code> to fix the cursor position) read the wrong data, and my application doesn't work!</li>\n</ul>\n\n<p>Am I \u201cholding it wrong\u201d? Is there some flag I need to set to make this class behave properly? Or is this a bug in <code>Shlwapi.dll</code>?</p>\n\n<p>The code below reproduces this problem for me. (Set <code>OFFSET = WORKS</code> to see the successful case.)</p>\n\n<pre><code>#include \"stdafx.h\"\n\nstatic const int64_t TWO_THIRTY_TWO = 4294967296LL;\nstatic const int64_t WORKS = TWO_THIRTY_TWO - 2LL;\nstatic const int64_t FAILS = TWO_THIRTY_TWO - 1LL;\nstatic const int64_t OFFSET = FAILS;\n\nstatic void checkPosition(CComPtr&lt; IStream &gt; fileStream, ULONGLONG expectedPosition)\n{\n    LARGE_INTEGER move;\n    ULARGE_INTEGER newPosition;\n\n    move.QuadPart = 0;\n    HRESULT hr = fileStream-&gt;Seek(move, SEEK_CUR, &amp;newPosition);\n    ASSERT(SUCCEEDED(hr));\n    ULONGLONG error = newPosition.QuadPart - expectedPosition;\n    ASSERT(error == 0);\n}\n\nint main()\n{\n    const wchar_t *path = /* path to a file larger than 2**32 bytes */ L\"C:\\\\users\\\\wjt\\\\Desktop\\\\eos-eos3.1-amd64-amd64.170216-122002.base.img\";\n    CComPtr&lt; IStream &gt; fileStream;\n\n    HRESULT hr;\n    hr = SHCreateStreamOnFileEx(path, STGM_READ, FILE_ATTRIBUTE_NORMAL, FALSE, NULL, &amp;fileStream);\n    ASSERT(SUCCEEDED(hr));\n\n    LARGE_INTEGER move;\n    ULARGE_INTEGER newPosition;\n\n    // Advance\n    move.QuadPart = OFFSET;\n    hr = fileStream-&gt;Seek(move, SEEK_SET, &amp;newPosition);\n    ASSERT(SUCCEEDED(hr));\n    ASSERT(newPosition.QuadPart == OFFSET);\n\n    // Check position\n    checkPosition(fileStream, OFFSET);\n\n    // Read\n    char buf[1];\n    ULONG bytesRead = 0;\n    hr = fileStream-&gt;Read(buf, 1, &amp;bytesRead);\n    ASSERT(SUCCEEDED(hr));\n    ASSERT(bytesRead == 1);\n\n    // Check position: this assertion fails if the Read() call moves the cursor\n    // across the 2**32 byte boundary\n    checkPosition(fileStream, OFFSET + 1);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1487786786, "post_id": 42399069, "comment_id": 71945187, "body": "<b>\u22121</b> Your code will not compile. Please only post <b>real code</b>. It&#39;s meaningless to discuss what code that wouldn&#39;t compile, would do if it compiled."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1487786801, "post_id": 42399069, "comment_id": 71945199, "body": "To remove confusion, don&#39;t compare them.  They are different languages.  The C++ language has pointers <i>and</i> references, and they are different."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1487786937, "post_id": 42399069, "comment_id": 71945276, "body": "Your C++ code isn&#39;t using references, it is using pointers.  The pointers are passed to the function by copy.  Your function is not modifying the content of the original pointer variable."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1487786941, "post_id": 42399069, "comment_id": 71945279, "body": "@1290 <code>*temp = new Point(4,5);</code> overrides contents of instance where <code>temp</code> is pointing to. <code>temp = new Point (5,6);</code> overrides <code>temp</code> but it is provided by value. Change signature of <code>changePoint</code> to <code>changePoint(Point *&amp;temp)</code> to make <code>temp</code> a reference parameter. Check this out in your debugger..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1487787052, "post_id": 42399069, "comment_id": 71945347, "body": "@Scheff: Before he can check things out in a debugger he would have to correct the code so that it compiles. Then with the changed code it may be that your comment doesn&#39;t make sense any more."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487787201, "post_id": 42399069, "comment_id": 71945437, "body": "<i>@1290</i> <code>changePoint(Point *temp)</code> doesn&#39;t use the pointer by reference, but by value. Instead of passing the address of the pointer, make it a reference here: <code>changePoint(Point *&amp; temp)</code>."}, {"owner": {"reputation": 68467, "user_id": 1081110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1", "display_name": "Dawood ibn Kareem", "link": "https://stackoverflow.com/users/1081110/dawood-ibn-kareem"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487787375, "post_id": 42399069, "comment_id": 71945537, "body": "@ThomasMatthews OP may have worded it badly, but they are comparing Java references to C++ pointers.  Java references are more similar to C++ pointers than to C++ references"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487787390, "post_id": 42399069, "comment_id": 71945553, "body": "@Cheersandhth.-Alf Ah, I see. <code>*temp = new Point(4,5);</code> might probably produce a compile error (except <code>Point</code>does provide a rather strange conversion constructor or assignment operator.)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1487787564, "post_id": 42399069, "comment_id": 71945667, "body": "@Scheff: Well I reacted first to <code>&amp;p</code> as actual argument (a <code>Point**</code> as actual argument), but also <code>changePoint</code> lacks a return type, and at least one of the two assignments, to <code>*temp</code> and <code>temp</code>, must necessarily fail to compile. It&#39;s just fantasy rubbish code. Nobody can predict what it would be if corrected."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487787779, "post_id": 42399069, "comment_id": 71945803, "body": "@Cheersandhth.-Alf In ancient times, no type meant <code>int</code> but I&#39;m not sure if it is even allowed in C++11. Of courrse, I never used this option in daily business for years..."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487787968, "post_id": 42399069, "comment_id": 71945943, "body": "No, implicit int has never been part of standard C++. It was there in K&amp;R C, and I believe it&#39;s still part of C."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1487788337, "post_id": 42399069, "comment_id": 71946166, "body": "Your Java explanation seems overly complicated. <code>p</code> is passed to <code>changePoint</code> by value - it receives a copy of the reference. Then it assigns to that copy, so the original reference is unchanged. Nothing in there relates to the actual <code>Point</code> object referred to by either reference. And this is exactly how pointers work in C++."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1487790503, "post_id": 42399069, "comment_id": 71947426, "body": "I wish I could upvote the &quot;Java is not C++&quot; comment again.  The two languages are different, period, full-stop."}, {"owner": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1487807805, "post_id": 42399069, "comment_id": 71955992, "body": "@chris Thank you for the clarification. That simplified a lot of my doubts combined with Thomas post below. Sorry for the confusion on the post I was in a hurry while writing. Will keep this in mind next time..."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 2, "last_activity_date": 1487787650, "last_edit_date": 1487787650, "creation_date": 1487787348, "answer_id": 42399271, "question_id": 42399069, "link": "https://stackoverflow.com/questions/42399069/changing-where-a-c-pointer-is-pointing-to/42399271#42399271", "title": "Changing where a C++ Pointer is pointing to", "body": "<p>You should understand the following before comparing to Java:</p>\n\n<ol>\n<li>C++ pass by reference vs. pass by value (copy).</li>\n<li>Pointers to pointers.</li>\n</ol>\n\n<p>In C++ if you want to modify the variable that was passed to a function, you need to pass by reference:  </p>\n\n<pre><code>void func1(int&amp; value)\n{\n  value = 5;\n}\nvoid another_function()\n{\n  int number = 0;\n  func(number);\n  std::cout &lt;&lt; \"The value of number is: \" &lt;&lt; number &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The value of <code>number</code> will be changed by <code>func</code> because the variable is passed by reference.  </p>\n\n<p>If you want to modify variable using pointers instead of references, you will need to pass a pointer:  </p>\n\n<pre><code>void func2(int * pointer_to_value)\n{\n  *pointer_to_value = 16;\n}\nvoid caller()\n{\n  int number = 0;\n  func2(&amp;number);\n  std::cout &lt;&lt; \"The value of number is: \" &lt;&lt; number &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>If you want to change a pointer, without passing by reference, you need to pass a pointer to the pointer:  </p>\n\n<pre><code>void func3(int * * pointer_to_point_to_value)\n{\n  *pointer_to_pointer_to_value = new int;\n  **pointer_to_pointer_to_value = 23;\n}\nvoid caller3()\n{\n  int * pointer_to_number;\n  func3(&amp;pointer_to_number);\n  cout &lt;&lt; \"Number is: \" **pointer_to_number &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>A simpler method is to pass a pointer by reference:  </p>\n\n<pre><code>void func4(int * &amp; pointer_to_value)\n{\n  pointer_to_value = new int;\n  *pointer_to_value = 17;\n}\nvoid caller4()\n{\n  int * pointer_to_number;\n  func4(pointer_to_number);\n}\n</code></pre>\n\n<p>As far as arrays go, simplify your life and use <code>std::vector</code>.  Pass the vector variable by reference or if you won't modify it, by constant reference.</p>\n"}], "owner": {"reputation": 1797, "user_id": 5228393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/l3lfi.jpg?s=128&g=1", "display_name": "CapturedTree", "link": "https://stackoverflow.com/users/5228393/capturedtree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 42399271, "answer_count": 1, "score": -2, "last_activity_date": 1487787650, "creation_date": 1487786658, "question_id": 42399069, "link": "https://stackoverflow.com/questions/42399069/changing-where-a-c-pointer-is-pointing-to", "title": "Changing where a C++ Pointer is pointing to", "body": "<p>I am getting confused comparing <code>Java</code> and <code>C++</code> references:</p>\n\n<p>In the below code in java the <code>Point p</code> object is still pointing to the <code>(5,5)</code> object after calling <code>changePoint</code>. </p>\n\n<p>This is because the <code>temp</code> variable (in <code>chagePoint</code>) is allocated on the stack and holds a reference to the <code>p</code> object (in <code>main</code>) in the heap but when we reassign temp it just points to another point object in the heap without changing where the original <code>Point p</code> object in main is pointing to.</p>\n\n<pre><code>public static void main(String [] args) {\n    Point p = new Point(5,5);\n    changePoint(p);\n}\n\nchangePoint(Point temp) {\n    temp = new Point(4,6);\n}\n</code></pre>\n\n<p>Now in C++ if we do the same thing what happens to the <code>(5,5)</code> object in main after exeucting those two statements in <code>changePoint</code>? When you do <code>*temp = new Point(4,5)</code> it will simply override the <code>(5,5)</code> object that <code>p</code> is pointing to from main correct? But when you do temp = new Point(4,5) will the <code>(5,5)</code> object in main will be a memory leak?</p>\n\n<pre><code>int main() {\n    Point *p = new Point(5,5);\n    changePoint(&amp;p);\n}\n\nchangePoint(Point *temp) {\n    *temp = new Point(4,5);\n    temp = new Point (5,6);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487786792, "post_id": 42398841, "comment_id": 71945192, "body": "<i>&quot;What I can do?&quot;</i> Reinstall Visual Studio. Doesn&#39;t have to do anything with the redistributable files. Headers aren&#39;t part of these."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487788176, "post_id": 42398841, "comment_id": 71946063, "body": "OP may have also removed the Windows SDK. A Visual Studio repair should put that right as well."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 6431602, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b63b4ded38f8ea208091d7b241259fcb?s=128&d=identicon&r=PG&f=1", "display_name": "TKK", "link": "https://stackoverflow.com/users/6431602/tkk"}, "edited": false, "score": 0, "creation_date": 1487875161, "post_id": 42399215, "comment_id": 71992826, "body": "I repaired but I still have one error in targetver.h: cannot open source file: &quot;SDKDDKVer.h&quot; :("}, {"owner": {"reputation": 2998, "user_id": 2628257, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ujGHu.jpg?s=128&g=1", "display_name": "Sergio Basurco", "link": "https://stackoverflow.com/users/2628257/sergio-basurco"}, "reply_to_user": {"reputation": 178, "user_id": 6431602, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b63b4ded38f8ea208091d7b241259fcb?s=128&d=identicon&r=PG&f=1", "display_name": "TKK", "link": "https://stackoverflow.com/users/6431602/tkk"}, "edited": false, "score": 0, "creation_date": 1488307295, "post_id": 42399215, "comment_id": 72169760, "body": "That looks from the Windows SDK, you need to install that separately"}], "tags": [], "owner": {"reputation": 2998, "user_id": 2628257, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ujGHu.jpg?s=128&g=1", "display_name": "Sergio Basurco", "link": "https://stackoverflow.com/users/2628257/sergio-basurco"}, "is_accepted": false, "score": 2, "last_activity_date": 1487787136, "creation_date": 1487787136, "answer_id": 42399215, "question_id": 42398841, "link": "https://stackoverflow.com/questions/42398841/c-redistributable-file-was-deleted-causes-errors-when-opening-visual-studio-p/42399215#42399215", "title": "C++ redistributable file was deleted, causes errors when opening Visual Studio project", "body": "<p>Normally, you can use the same version installer in order to <strong>repair</strong> the installation rather than getting it brand new. </p>\n\n<p>If you've customized you installation and don't want to lose it try exporting your settings so that you can recover them later. <a href=\"https://msdn.microsoft.com/en-us/library/zbhkx167.aspx\" rel=\"nofollow noreferrer\">Here</a>'s more info on this.</p>\n"}], "owner": {"reputation": 178, "user_id": 6431602, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b63b4ded38f8ea208091d7b241259fcb?s=128&d=identicon&r=PG&f=1", "display_name": "TKK", "link": "https://stackoverflow.com/users/6431602/tkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487898058, "creation_date": 1487785937, "last_edit_date": 1487799683, "question_id": 42398841, "link": "https://stackoverflow.com/questions/42398841/c-redistributable-file-was-deleted-causes-errors-when-opening-visual-studio-p", "title": "C++ redistributable file was deleted, causes errors when opening Visual Studio project", "body": "<p>In a mistake, I removed some file a few months ago. I think it was one of the visual c++ redistributable files. When I open any c++ project, I have about four hundred errors like:</p>\n\n<pre><code>cannot open source file \"corecrt.h\"\ncannot open source file \"ctype.h\"\ncannot open source file \"errno.h\"\ncannot open source file \"float.h\"\ncannot open source file \"stdio.h\"\n</code></pre>\n\n<p>I reinstalled all of the redistributable files and installed all x64 versions but the errors still exist.</p>\n\n<p>What I can do? Can I fix it without reinstalling visual studio?</p>\n"}, {"tags": ["c++", "linux", "visual-studio", "visual-studio-code"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1487785652, "post_id": 42398699, "comment_id": 71944449, "body": "VS Code is an editor. You need a compiler."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1487785997, "post_id": 42398699, "comment_id": 71944689, "body": "@NeilButterworth: I think Linux comes with GCC and compiler and it is already installed, so my question is how to configure VSC to use the compiler and build my application? Should I create a makefile? can VSC generate the make file for me, or I should do it by myself? If I need to do it by myself, how I can configure VSC to run the make and then attach to application to be able to debug it?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1487786003, "post_id": 42398699, "comment_id": 71944699, "body": "You system has a compiler called g++. You C++ code is invalid due to missing return type for <code>main</code> (in old C there was implicit int feature, not in C++). Just compile from the command line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1487786054, "post_id": 42398699, "comment_id": 71944727, "body": "Why do you think you need to use VS Code?"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1487786203, "post_id": 42398699, "comment_id": 71944834, "body": "@NeilButterworth To make development and debugging easier. I used VS on windows a lot and I like it as a development system. I can use a makefile to build my system, but I want to use VSC as I think it would make my development easier."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1487786218, "post_id": 42398699, "comment_id": 71944842, "body": "&quot;I think Linux comes with GCC and compiler &quot; Might do, might not - depends entirely on what distribution you are using. Some don&#39;t come witha C or C++ compiler, some come with just a C compiler, and some with both."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1487786516, "post_id": 42398699, "comment_id": 71945031, "body": "@NeilButterworth My system has g++, as I can manually compile the code using g++ main.cpp and it generates a.out. My question is how to configure VSC to develop c/c++ code in Linux?"}, {"owner": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1487790169, "post_id": 42398699, "comment_id": 71947206, "body": "Please consider a real IDE, such as Eclipse with CDT, NetBeans, CLion, or others, if you only have VS experience in the past. I don&#39;t expect you pick up all the command line based tooling quickly and then use tasks.json to wire them up."}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 7086838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359051de51571663d036e48c8c64970?s=128&d=identicon&r=PG&f=1", "display_name": "ahmedhara", "link": "https://stackoverflow.com/users/7086838/ahmedhara"}, "is_accepted": false, "score": -1, "last_activity_date": 1487786580, "creation_date": 1487786580, "answer_id": 42399041, "question_id": 42398699, "link": "https://stackoverflow.com/questions/42398699/create-and-compile-hello-world-application-in-linux-using-visual-studio-code/42399041#42399041", "title": "create and compile &quot;hello world&quot; application in Linux using Visual Studio Code", "body": "<p>First, you have to install a compiler, I recommend GCC (Ubuntu usually doesn't come with one even though it's mostly written in C/C++)</p>\n\n<p>Second, compile your program, here's how</p>\n\n<blockquote>\n  <p>To compile the program, open the terminal and move on to the target directory type the command \u2013 (where gcc implies compiler name, then it asks for the file name of the source program while -o option specifies the file name of the output program)</p>\n\n<pre><code>gcc hello.c -o hello1\n</code></pre>\n  \n  <p>If there is no syntax/semantic error in you program then the compiler will successfully generate an executable file, otherwise fix the problem in your code.</p>\n</blockquote>\n\n<p>However, that will only work for C, here's how to do it for C++ (only if the extension is .cpp)</p>\n\n<blockquote>\n  <p>The steps are almost same as above but you need to install g++ compiler, the file extension should be .cpp and in compilation phase replace gcc with g++. To install G++ compiler, execute the command -</p>\n</blockquote>\n\n<pre><code>sudo apt-get install g++\n</code></pre>\n\n<p>The compilation command now is:</p>\n\n<pre><code>g++ hello.cpp -o hello1\n</code></pre>\n\n<p>It goes without saying that you should replace \"hello.cpp\" with your files name and \"hello1\" with the name you want your \"exe\" file to have</p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487786846, "creation_date": 1487785497, "last_edit_date": 1592644375, "question_id": 42398699, "link": "https://stackoverflow.com/questions/42398699/create-and-compile-hello-world-application-in-linux-using-visual-studio-code", "title": "create and compile &quot;hello world&quot; application in Linux using Visual Studio Code", "body": "<p>I am new to Linux, but developed C/C++ in windows for some times now.</p>\n<p>I installed a Linux Ubuntu 16.4 and Visual Studio Code.</p>\n<p>I create a folder and inside that folder I created a file called main.cpp and inside that file I wrote:</p>\n<pre><code>#include &lt;iostream&gt;\nvoid main()\n{\n    std::cout &lt;&lt; &quot;Hello World&quot; &lt;&lt; std::endl;\n}\n</code></pre>\n<p>Now I want to compile and run it and possibly debug it (step by step to see how I can debug a simple application).</p>\n<p>How can I do this?</p>\n<p>Any tutorial on to setup a development system in Linux using Visual Studio Code?</p>\n<p>I installed &quot;C/C++ for Visual Studio Code&quot; but I am still not able to compile and run the sample application.</p>\n<h1>Edit1</h1>\n<p>I already installed compiler and can compile my code using</p>\n<pre><code>g++ main.cpp\n</code></pre>\n<p>and getting a.out</p>\n<p>How can I configure VSC to automate this processor and generate dependency and if there is an error, open the file with error on editor and show me the line that generate error. Also during debug show me the source code when I am stepping the code.</p>\n<p>These are some basic requirement that I have from a development system, otherwise I call it an editor and not a development system.</p>\n"}, {"tags": ["c++", "c++builder", "vcl"], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 7562980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8f932824c368d7bfb7807747a54947?s=128&d=identicon&r=PG&f=1", "display_name": "S. Petri\u0107", "link": "https://stackoverflow.com/users/7562980/s-petri%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1487802602, "creation_date": 1487802602, "answer_id": 42403511, "question_id": 42398644, "link": "https://stackoverflow.com/questions/42398644/c-with-vcl-closing-secondary-form-does-not-end-process/42403511#42403511", "title": "c++ with vcl: closing secondary form does not end process", "body": "<p>It's normal behavior. Both forms are auto-created, so closing the second form will not terminate the application...main form is still alive.\nYou can solve this in several ways. Here is the quick one: </p>\n\n<p>Show second form as modal:</p>\n\n<pre><code>void __fastcall TMainForm::ExecuteCopyClick(TObject *Sender)\n      {\n      this-&gt;Hide();\n      BackupForm-&gt;ShowModal();\n      this-&gt;Show();\n      }\n</code></pre>\n\n<p>Now, the BackupForm has \"full control\" because it's shown as modal form. After BackupForm is closed, you can either show again your main form (as in example above), or close the main form.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "edited": false, "score": 0, "creation_date": 1488208445, "post_id": 42405644, "comment_id": 72117895, "body": "Thanks for the help!  For some reason, adding the two <code>FormClose</code> methods didn&#39;t work in my code, but the second solution with <code>ShowModal</code> seemed to work just fine."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "edited": false, "score": 0, "creation_date": 1488220489, "post_id": 42405644, "comment_id": 72125734, "body": "It is not enough to just add the <code>FormClose()</code> methods to the code, you need to actually assign them to the <code>OnClose</code> events.  They work just fine when used correctly."}, {"owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "edited": false, "score": 0, "creation_date": 1492614471, "post_id": 42405644, "comment_id": 74053343, "body": "How do you assign the FormClose method to the OnClose event?  I&#39;m struggling to find documentation of how to do so..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "edited": false, "score": 0, "creation_date": 1492619472, "post_id": 42405644, "comment_id": 74056856, "body": "You can assign it using the Object Inspector at design-time, or assign it in code at run-time like any other property."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1487814744, "creation_date": 1487814744, "answer_id": 42405644, "question_id": 42398644, "link": "https://stackoverflow.com/questions/42398644/c-with-vcl-closing-secondary-form-does-not-end-process/42405644#42405644", "title": "c++ with vcl: closing secondary form does not end process", "body": "<p>Your <code>MainForm</code> is being auto-created first, so it gets set as the <code>Application-&gt;MainForm</code>.</p>\n\n<p>When the <code>Application-&gt;MainForm</code> is actually closed, it calls <code>Application-&gt;Terminate()</code>, causing <code>Application-&gt;Run()</code> to exit, thus allowing <code>WinMain()</code> to exit and the process to terminate.</p>\n\n<p>When you show <code>BackupForm</code>, you are merely <em>hiding</em> the <code>MainForm</code>, not <em>closing</em> it.  So <code>Application-&gt;Terminate()</code> is not getting called.</p>\n\n<p>If you want the process to terminate when <code>BackupForm</code> is closed, you need to either:</p>\n\n<ul>\n<li><p><code>Close()</code> the <code>Application-&gt;MainForm</code>:</p>\n\n<pre><code>void __fastcall TBackupForm::FormClose(TObject *Sender, TCloseAction &amp;Action)\n{\n    Application-&gt;MainForm-&gt;Close(); \n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>void __fastcall TMainForm::ExecuteCopyClick(TObject *Sender)\n{\n    //Setting variables.... \n    //Then:\n    Hide(); \n    BackupForm-&gt;ShowModal();\n    Close();\n}\n</code></pre></li>\n<li><p>just call <code>Application-&gt;Terminate()</code> directly:</p>\n\n<pre><code>void __fastcall TBackupForm::FormClose(TObject *Sender, TCloseAction &amp;Action)\n{\n    Application-&gt;Terminate(); \n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 53, "user_id": 5976632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c53a80bad35f8d18013293aac1a47f8f?s=128&d=identicon&r=PG", "display_name": "RisaAudr", "link": "https://stackoverflow.com/users/5976632/risaaudr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2522, "favorite_count": 1, "accepted_answer_id": 42405644, "answer_count": 2, "score": 1, "last_activity_date": 1487814744, "creation_date": 1487785316, "question_id": 42398644, "link": "https://stackoverflow.com/questions/42398644/c-with-vcl-closing-secondary-form-does-not-end-process", "title": "c++ with vcl: closing secondary form does not end process", "body": "<p>I'm still learning c++ with vcl forms so forgive me if what I'm asking turns out to be simpler than it seems.  For reference, I'm using c++ builder 10.1 berlin in a Windows environment.</p>\n\n<p>I have a program with two forms (lets call them \"MainForm\" and \"BackupForm\").  I am accepting user input in MainForm, then when the user clicks a particular button (\"DoSomething\") that action sets a few variables then calls <code>BackupForm-&gt;Show();</code> then <code>MainForm-&gt;Hide();</code> to switch over to the second form which does more things.  </p>\n\n<p>The issue I'm having is this:  if a user clicks the \"X\" in the upper right that normally closes a program, it only closes the BackupForm and does not end the process.  If I did the same action on the MainForm it ends the process.</p>\n\n<p>I looked around and either wasn't asking the right question or no-one but me has this issue, or perhaps hiding/showing to switch forms isn't the right way to go about it, but my overall question is this:  </p>\n\n<p><strong>TLDR:</strong> <em>Is there a way/method/etc. to detect the \"close window\" button being pressed on a secondary form and subsequently close the application, ending it's process without having to kill it in task manager?</em></p>\n\n<p>If there's a better way to be switching forms that I'm unaware of, I wouldn't mind suggestions towards that end as well.</p>\n\n<p>Also, if needed, I can post more of the code but I wasn't sure what would actually be helpful.  Below is some of what I have:</p>\n\n<p>Main (Function? Application?) Pre-generated by my IDE:</p>\n\n<pre><code>#include &lt;vcl.h&gt;\n#pragma hdrstop\n#include &lt;tchar.h&gt;\n//------------------------------------------------------------------------\nUSEFORM(\"BackupFormCode.cpp\", BackupForm);\nUSEFORM(\"UserBackupProgram.cpp\", MainForm);\n//----------------------------------------------------------------------\nint WINAPI _tWinMain(HINSTANCE, HINSTANCE, LPTSTR, int)\n{\n    try\n    {\n        Application-&gt;Initialize();\n        Application-&gt;MainFormOnTaskBar = true;\n        Application-&gt;CreateForm(__classid(TMainForm), &amp;MainForm);\n        Application-&gt;CreateForm(__classid(TBackupForm), &amp;BackupForm);\n        Application-&gt;Run();\n    }\n    catch (Exception &amp;exception)\n    {\n        Application-&gt;ShowException(&amp;exception);\n    }\n    catch (...)\n    {\n        try\n        {\n            throw Exception(\"\");\n        }\n        catch (Exception &amp;exception)\n        {\n            Application-&gt;ShowException(&amp;exception);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Button \"DoSomething\" Pressed in \"MainForm\":</p>\n\n<pre><code>void __fastcall TMainForm::ExecuteCopyClick(TObject *Sender)\n{\n    //Setting variables.... \n    //Then:\n    BackupForm-&gt;Show();\n    MainForm-&gt;Hide(); \n}\n</code></pre>\n"}, {"tags": ["python", "c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "edited": false, "score": 0, "creation_date": 1487791115, "post_id": 42399925, "comment_id": 71947773, "body": "Yes, but problem that it is for Uniform Hist. For non-uniform it is totaly unclear how to call function. Especially for 3-rd implementation of calcHist with STL parameters."}, {"owner": {"reputation": 1820, "user_id": 6411572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UW5c3vqf1Uk/AAAAAAAAAAI/AAAAAAAACVM/MxyCKe2XJJM/photo.jpg?sz=128", "display_name": "Shawn Mathew", "link": "https://stackoverflow.com/users/6411572/shawn-mathew"}, "reply_to_user": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "edited": false, "score": 0, "creation_date": 1487793414, "post_id": 42399925, "comment_id": 71949080, "body": "I don&#39;t see any evidence of opencv having an implementation for non uniform histograms. Is that what the OP wants? Perhaps you should consider writing our own code for  the implementation"}, {"owner": {"reputation": 643, "user_id": 1781448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5e6cae64c95cfdb59e9d54d7d7341e2e?s=128&d=identicon&r=PG", "display_name": "UndeadDragon", "link": "https://stackoverflow.com/users/1781448/undeaddragon"}, "edited": false, "score": 0, "creation_date": 1487793641, "post_id": 42399925, "comment_id": 71949205, "body": "It have, it is right in header with functions and also here <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/histograms.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/imgproc/doc/histograms.html</a>. The question is also: does python code use uniform hist? Because the problem is that results from two images in python and C++ differs much."}], "tags": [], "owner": {"reputation": 1820, "user_id": 6411572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UW5c3vqf1Uk/AAAAAAAAAAI/AAAAAAAACVM/MxyCKe2XJJM/photo.jpg?sz=128", "display_name": "Shawn Mathew", "link": "https://stackoverflow.com/users/6411572/shawn-mathew"}, "is_accepted": false, "score": 0, "last_activity_date": 1487789619, "creation_date": 1487789619, "answer_id": 42399925, "question_id": 42398442, "link": "https://stackoverflow.com/questions/42398442/opencv-c-analog-of-python-method/42399925#42399925", "title": "OpenCV C++ analog of Python method", "body": "<p>If you're looking for the C++ version of the opencv calcHist function, there is a good tutorial at <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/histograms.html#calchist\" rel=\"nofollow noreferrer\">http://docs.opencv.org/2.4/modules/imgproc/doc/histograms.html#calchist</a></p>\n\n<p>It shows how to declare the ranges parameter, which I assume is your confusion</p>\n"}, {"tags": [], "owner": {"reputation": 869, "user_id": 7519513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c34e9268e6feddce2370659088cb28?s=128&d=identicon&r=PG&f=1", "display_name": "Nejc", "link": "https://stackoverflow.com/users/7519513/nejc"}, "is_accepted": false, "score": 1, "last_activity_date": 1487808372, "creation_date": 1487808372, "answer_id": 42404672, "question_id": 42398442, "link": "https://stackoverflow.com/questions/42398442/opencv-c-analog-of-python-method/42404672#42404672", "title": "OpenCV C++ analog of Python method", "body": "<p>I will reply to one of your comments first. Here is a short example that shows you how to compute a non-uniform histogram:</p>\n\n<pre><code>using namespace std;\nusing namespace cv;\n\nMat img = imread(\"Lenna.png\", IMREAD_COLOR);\n\nint channels[] = { 0, 1 }; \n\nMat histogram;\nint hist_size[] = { 4, 5 };\n\nfloat range_0[] = { 0.0f, 60.0f, 120.0f, 180.0f, 255.0f }; \nfloat range_1[] = { 0.0f, 50.0f, 100.0f, 150.0f, 200.0f, 255.0f};\nconst float* all_ranges[] = { range_0, range_1 };\n\ncalcHist(&amp;img, 1, channels, Mat(), histogram, 2, hist_size, all_ranges, false);\n</code></pre>\n\n<p>The histogram will have 4 x 5 bins, so I had to define 5 x 6 bin boundaries. The first bin for channel 0 will store the values from interval [0, 60), the second bin will store values from the interval [60, 120), and so on.</p>\n\n<p>If you choose the <code>uniform</code> argument to be true, you only need to specify the lower boundary of the first bin and the upper boundary of the last bin for every channel. The algorithm then computes the bin boundaries by dividing this range with number of bins for every channel.</p>\n\n<p>I think that with all information I've given you so far, you should be able to figure out how to rewrite your Python code snippet into C++ code. :) </p>\n"}], "owner": {"reputation": 471, "user_id": 5852851, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ac74261f678c8e1c8ea26989adf30063?s=128&d=identicon&r=PG&f=1", "display_name": "Maximus", "link": "https://stackoverflow.com/users/5852851/maximus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487808372, "creation_date": 1487784680, "question_id": 42398442, "link": "https://stackoverflow.com/questions/42398442/opencv-c-analog-of-python-method", "title": "OpenCV C++ analog of Python method", "body": "<p>What will be full analog of that function in C++?</p>\n\n<pre><code># img, channels, mask, bins for each channel, ranges for each channel\nhist2 = cv2.calcHist([img2], [0, 1, 2], None, [32, 32, 32],\n        [50, 256, 50, 256, 50, 256])\n</code></pre>\n\n<p>Because of C interfaces I can't understand it. Ranges in C++ version sets in some another way..</p>\n"}, {"tags": ["c++", "compilation", "codeblocks"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1487788486, "post_id": 42398438, "comment_id": 71946246, "body": "This means the mingw dlls are not in your system path. Update your system path to include the folder containing these dlls."}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1487793188, "post_id": 42398438, "comment_id": 71948965, "body": "So what is the question exactly?"}, {"owner": {"reputation": 7, "user_id": 7086838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359051de51571663d036e48c8c64970?s=128&d=identicon&r=PG&f=1", "display_name": "ahmedhara", "link": "https://stackoverflow.com/users/7086838/ahmedhara"}, "edited": false, "score": 0, "creation_date": 1488125630, "post_id": 42398438, "comment_id": 72082283, "body": "Basically, how to fix it"}, {"owner": {"reputation": 7, "user_id": 7086838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359051de51571663d036e48c8c64970?s=128&d=identicon&r=PG&f=1", "display_name": "ahmedhara", "link": "https://stackoverflow.com/users/7086838/ahmedhara"}, "edited": false, "score": 0, "creation_date": 1488126146, "post_id": 42398438, "comment_id": 72082457, "body": "I will now try to see if it works with Visual Studio 2015"}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1488224281, "post_id": 42398438, "comment_id": 72127802, "body": "Fix what? This is expected behaviour. If you dynamically link to your C/C++ runtime you have to distribute the runtime along with your executable. Or install it on the system where it gets loaded when required. Code::Blocks environment searches special directories for these files. Regular Windows does not. for Visual Studio its similar - but the runtime gets installed with the Studio so you won&#39;t notice it on your machine. You can also statically link your runtime, for both, Visual Studio and Code:Blocks."}, {"owner": {"reputation": 7, "user_id": 7086838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359051de51571663d036e48c8c64970?s=128&d=identicon&r=PG&f=1", "display_name": "ahmedhara", "link": "https://stackoverflow.com/users/7086838/ahmedhara"}, "edited": false, "score": 0, "creation_date": 1489502456, "post_id": 42398438, "comment_id": 72692193, "body": "I know it is expected behaviour. What I was asking is if there was any way of compiling the .exe with the needed files. I don&#39;t need it anymore so don&#39;t say anything"}], "owner": {"reputation": 7, "user_id": 7086838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c359051de51571663d036e48c8c64970?s=128&d=identicon&r=PG&f=1", "display_name": "ahmedhara", "link": "https://stackoverflow.com/users/7086838/ahmedhara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1350, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493809033, "creation_date": 1487784671, "question_id": 42398438, "link": "https://stackoverflow.com/questions/42398438/libstdc-6-dll-and-libgcc-s-dw2-1-dll-missing-while-running-c-program", "title": "libstdc++-6.dll and libgcc_s_dw2-1.dll missing while running c++ program", "body": "<p>I created a program in C++, it was just  a joke. I wanted to test the possibilities just a little. I built the program, ran it through Code::Blocks\nand it worked. I headed over to the directory I saved it in, ran it from there.</p>\n\n<blockquote>\n  <p>The program can't start because libstdc++-6.dll is missing from your computer. Try reinstalling the program to fix this problem. </p>\n</blockquote>\n\n<p>I pressed OK, then another \"popup\"</p>\n\n<blockquote>\n  <p>The program can't start because libgcc_s_dw2-1.dll is missing from your computer. Try reinstalling the program to fix this problem.</p>\n</blockquote>\n\n<p>I <strong>do</strong> have those files on my computer.</p>\n\n<p>I tried to fix it myself, it was dumb but I copied those files over to the directory in which the program itself was. </p>\n\n<p>P.S. here's the code but I don't think it matters.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\nint main(){\nint rnum;\nchar yn;\nsrand (time(NULL));\n\ncout &lt;&lt; \"Welcome to my fortune teller!!!\"&lt;&lt; endl;\ncout &lt;&lt; \"It uses an extremely futuristic and advanced algorithm!\"&lt;&lt; endl;\ncout &lt;&lt; \"if you know your luck, it can easily change, are you sure you want to continue? Y/N\"&lt;&lt; endl;\ncin &gt;&gt; yn;\n\nif (yn == 'Y'){}\nelse if (yn == 'y'){}\nelse {\n    return 0;\n}\n\n\nrnum = rand() % 11 + 1;\n\nif (rnum == 1) {\n    system(\"color A1\");\n    cout &lt;&lt; \"Bad luck, you're screwed mi friend\"&lt;&lt; endl;\n}\nelse if (rnum == 2) {\n    cout &lt;&lt; \"Jump off of a building cuz' you got the lucks\"&lt;&lt; endl;\n}\nelse if (rnum == 3) {\n    cout &lt;&lt; \"It's an awkward day for you, I see...\"&lt;&lt; endl;\n}\nelse if (rnum == 4) {\n    cout &lt;&lt; \"Sorry man, go home and lock yourself into a closet\"&lt;&lt; endl;\n}\nelse if (rnum == 5) {\n    cout &lt;&lt; \"Do risky things today, your luck has hit 100%\"&lt;&lt; endl;\n}\nelse if (rnum == 6) {\n    cout &lt;&lt;\"Quite frankly, I'm not sure, today looks kinda cloudy for you, the sun may shine through though\"&lt;&lt; endl;\n}\nelse if (rnum == 7) {\n    cout &lt;&lt; \"Your luck is a bit more on the bad side, it could fix (by the end of the century)\" &lt;&lt; endl;\n}\nelse if (rnum == 8) {\n    cout &lt;&lt; \"Your luck is a bit on the good side, but don't do dumb things, it can easily fall into the bottomless sea\" &lt;&lt; endl;\n}\nelse if (rnum == 9) {\n    cout &lt;&lt; \"This is weird, it's balancing right in the middle, look out, it could go bad anytime, or good\"&lt;&lt; endl;\n}\nelse if (rnum == 10) {\n    cout &lt;&lt;\"No comment.\"&lt;&lt; endl;\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487784463, "post_id": 42398340, "comment_id": 71943676, "body": "Do not add C as a tag to a question also tagged C++, C++11, C++14."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1487784522, "post_id": 42398340, "comment_id": 71943724, "body": "Please give us the exact error and the line where this error is reported."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487784556, "post_id": 42398340, "comment_id": 71943746, "body": "@JonathanLeffler I&#39;m not even sure it should be tagged c++11 or c++14 or even visual-c++."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487784576, "post_id": 42398340, "comment_id": 71943768, "body": "Looks like you should be using an array or <code>vector</code> of <code>unique_ptr&lt;Command&gt;</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1487784620, "post_id": 42398340, "comment_id": 71943790, "body": "Does as your other <code>Command</code>: <code>SimpleCommand one(&amp;object, &amp;Number::dubble); commands[0] = &amp;one;</code>."}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1487784629, "post_id": 42398340, "comment_id": 71943796, "body": "Are you sure that the book suggested that line of code?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487784782, "post_id": 42398340, "comment_id": 71943896, "body": "If that code example is really from that book, please burn it. You should never need a member function pointer in a &quot;simple example&quot; of anything. The syntax is godawful and it&#39;s just a very specialized tool, especially in modern C++. Not to mention using out parameters...yuck."}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 5267636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03ed286e5355a0d0ee1cc4452995a19?s=128&d=identicon&r=PG&f=1", "display_name": "roman", "link": "https://stackoverflow.com/users/5267636/roman"}, "is_accepted": false, "score": 1, "last_activity_date": 1487784944, "last_edit_date": 1487784944, "creation_date": 1487784911, "answer_id": 42398510, "question_id": 42398340, "link": "https://stackoverflow.com/questions/42398340/warning-taking-address-of-temporary-c/42398510#42398510", "title": "warning: taking address of temporary - C++", "body": "<pre><code>SimpleCommand(&amp;object, &amp;Number::dubble)\n</code></pre>\n\n<p>Creates something called <strong>rvalue</strong>. This is a temporary value that will be destroyed at the end of the statement, so you should not keep reference to it.</p>\n"}, {"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1487786370, "post_id": 42398581, "comment_id": 71944943, "body": "Note that in general (ie, not in the toy example where everything is in main), this may suffer the same problem when <code>simple</code> goes out of scope."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1487786432, "post_id": 42398581, "comment_id": 71944978, "body": "@Useless - that&#39;s true.   I&#39;ll add a note to that effect shortly."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487787884, "post_id": 42398581, "comment_id": 71945886, "body": "Better still, use a smart pointer: <code>std::vector&lt;std::shared_ptr&lt;Command&gt; commands; commands.push_back(std::make_shared&lt;SimpleCommand&gt;(&amp;object, &amp;Number::dubble));</code> or the like."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487788253, "post_id": 42398581, "comment_id": 71946112, "body": "@TobySpeight - that won&#39;t address the problem of <code>object</code> ceasing to exist before the <code>shared_ptr</code> destroys the contained object."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487791732, "post_id": 42398581, "comment_id": 71948120, "body": "That&#39;s true - I was only looking at the <code>SimpleCommand</code>.  The ownership and lifetime of <code>object</code> does also need to be considered."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1487840669, "post_id": 42398581, "comment_id": 71968441, "body": "Agreed.  Although I expressed it in a different manner, that is the message of the last para I added."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1487786784, "last_edit_date": 1487786784, "creation_date": 1487785132, "answer_id": 42398581, "question_id": 42398340, "link": "https://stackoverflow.com/questions/42398340/warning-taking-address-of-temporary-c/42398581#42398581", "title": "warning: taking address of temporary - C++", "body": "<p>The offending line is the third of.</p>\n\n<pre><code>Number object;\nCommand *commands[3];\ncommands[0] = &amp;SimpleCommand(&amp;object, &amp;Number::dubble); // \"warning: taking address of temporary\"\n</code></pre>\n\n<p>In this, <code>SimpleCommand(&amp;object, &amp;Number::dubble)</code> constructs a temporary, which will cease to exist at the end of the statement, and the <code>&amp;</code> takes its address.  Hence the warning - the pointer will be dangling (pointing to an object that no longer exists).   Any dereferencing of that pointer will cause undefined behaviour.  A compiler is not required to diagnose this, but yours is doing you a favour.</p>\n\n<p>Simply do as you have with other objects:  construct the object and then store its address.</p>\n\n<pre><code>SimpleCommand simple(&amp;object, &amp;Number::dubble);\ncommands[0] = &amp;simple;\n</code></pre>\n\n<p>Note that this will encounter the same problem if <code>command[0]</code> is used after <code>simple</code> ceases to exist.   More realistic code (e.g. not everything within a toy <code>main()</code>, as noted by \"Useless in comments) can easily have the problem of <code>commands[0]</code> continuing to exist - and being used - after the object it points to ceases to exist.    That also causes undefined behaviour - but it is less likely that the compiler will be able to recognise that and issue a warning.</p>\n"}], "owner": {"reputation": 23, "user_id": 7126346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9477f8820023802a5ceb7f007e3309a3?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben", "link": "https://stackoverflow.com/users/7126346/ruben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2179, "favorite_count": 1, "closed_date": 1487822353, "accepted_answer_id": 42398581, "answer_count": 2, "score": 0, "last_activity_date": 1487814026, "creation_date": 1487784367, "last_edit_date": 1487814026, "question_id": 42398340, "link": "https://stackoverflow.com/questions/42398340/warning-taking-address-of-temporary-c", "closed_reason": "Not suitable for this site", "title": "warning: taking address of temporary - C++", "body": "<p>The following code is an example from a book \"<a href=\"https://www.goodreads.com/book/show/21795152-design-patterns-explained-simply\" rel=\"nofollow noreferrer\">Design Patterns Explained Simply</a>\". I tried using the suggested way of other questions but with bad results. How can I figure out this problem:</p>\n\n<pre><code>commands[0] = &amp;SimpleCommand(&amp;object, &amp;Number::dubble);\n</code></pre>\n\n<p>\"warning: taking address of temporary\"?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Number\n{\n  public:\n    void dubble(int &amp;value)\n    {\n        value *= 2;\n    }\n};\n\nclass Command\n{\n  public:\n    virtual void execute(int &amp;) = 0;\n};\n\nclass SimpleCommand: public Command\n{\n    typedef void(Number:: *Action)(int &amp;);\n    Number *receiver;\n    Action action;\n  public:\n    SimpleCommand(Number *rec, Action act)\n    {\n        receiver = rec;\n        action = act;\n    }\n     /*virtual*/void execute(int &amp;num)\n    {\n        (receiver-&gt;*action)(num);\n    }\n};\n\nclass MacroCommand: public Command\n{\n    vector &lt; Command * &gt; list;\n  public:\n    void add(Command *cmd)\n    {\n        list.push_back(cmd);\n    }\n     /*virtual*/void execute(int &amp;num)\n    {\n        for (unsigned int i = 0; i &lt; list.size(); i++)\n          list[i]-&gt;execute(num);\n    }\n};\n\nint main()\n{\n  Number object;\n  Command *commands[3];\n  commands[0] = &amp;SimpleCommand(&amp;object, &amp;Number::dubble); // \"warning: taking address of temporary\"\n\n  MacroCommand two;\n  two.add(commands[0]);\n  two.add(commands[0]);\n  commands[1] = &amp;two;\n\n  MacroCommand four;\n  four.add(&amp;two);\n  four.add(&amp;two);\n  commands[2] = &amp;four;\n\n  int num, index;\n  while (true)\n  {\n    cout &lt;&lt; \"Enter number selection (0=2x 1=4x 2=16x): \";\n    cin &gt;&gt; num &gt;&gt; index;\n    commands[index]-&gt;execute(num);\n    cout &lt;&lt; \"   \" &lt;&lt; num &lt;&lt; '\\n';\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "loops", "stl"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1487783780, "post_id": 42398090, "comment_id": 71943199, "body": "There is no such thing as &quot;most efficient way&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783886, "post_id": 42398090, "comment_id": 71943273, "body": "Do you need to full string for anything?  If not you could just read it in as words from the get go."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1487784046, "post_id": 42398090, "comment_id": 71943384, "body": "What&#39;s wrong with &quot;manually iterating over each character&quot;? That&#39;s what <code>istringstream ::operator&gt;&gt;</code> probably does anyway (on top of copying the result into the <code>word</code> argument)."}, {"owner": {"reputation": 715, "user_id": 1000039, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3256bc83fb83cc3ce42d7ed34f1bc89?s=128&d=identicon&r=PG", "display_name": "user1000039", "link": "https://stackoverflow.com/users/1000039/user1000039"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784076, "post_id": 42398090, "comment_id": 71943408, "body": "@Slava I agree that was poor phrasing on my part. I suppose I meant &quot;more efficient than this way&quot;"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1487784144, "post_id": 42398090, "comment_id": 71943451, "body": "The first thing you should worry about is not &quot;inefficiencies&quot;, but that the code is good, readable, maintainable and works. Then if (but only if) the program is slower than some requirement, you measure and benchmark and profile to find the hotspots and bottlenecks and start working there."}], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 1000039, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3256bc83fb83cc3ce42d7ed34f1bc89?s=128&d=identicon&r=PG", "display_name": "user1000039", "link": "https://stackoverflow.com/users/1000039/user1000039"}, "edited": false, "score": 0, "creation_date": 1487786011, "post_id": 42398417, "comment_id": 71944702, "body": "I had a feeling that there may have been a simple method hidden somewhere in the localization part of STL, but if not then string streams are definitely the way to go. Thanks for the demo though"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1487810414, "post_id": 42398417, "comment_id": 71956751, "body": "This can be done much easier (and propably as efficient) using boost string algorithms. See my answer."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1487784593, "creation_date": 1487784593, "answer_id": 42398417, "question_id": 42398090, "link": "https://stackoverflow.com/questions/42398090/most-efficient-way-to-iterate-over-words-in-a-string/42398417#42398417", "title": "Most efficient way to iterate over words in a string", "body": "<p>In most cases, copying represents a very small percentage of the overall costs, so having a clean, highly readable code becomes more important. In rare cases when the time profiler tells you that copying creates a bottleneck, you can iterate over characters in the string with some help from the standard library.</p>\n\n<p>One approach that you could take is to iterate with <code>std::string::find_first_of</code> and <code>std::string::find_first_not_of</code> member functions, like this:</p>\n\n<pre><code>const std::string s = \"quick \\t\\t brown \\t fox jumps over the\\nlazy dog\";\nconst std::string ws = \" \\t\\r\\n\";\nstd::size_t pos = 0;\nwhile (pos != s.size()) {\n    std::size_t from = s.find_first_not_of(ws, pos);\n    if (from == std::string::npos) {\n        break;\n    }\n    std::size_t to = s.find_first_of(ws, from+1);\n    if (to == std::string::npos) {\n        to = s.size();\n    }\n    // If you want an individual word, copy it with substr.\n    // The code below simply prints it character-by-character:\n    std::cout &lt;&lt; \"'\";\n    for (std::size_t i = from ; i != to ; i++) {\n        std::cout &lt;&lt; s[i];\n    }\n    std::cout &lt;&lt; \"'\" &lt;&lt; std::endl;\n    pos = to;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/xZVR7A\" rel=\"noreferrer\">Demo.</a></p>\n\n<p>Unfortunately, the code becomes a lot harder to read, so you should avoid this change, or at least postpone it until it becomes requried.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 7240762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d1xni.jpg?s=128&g=1", "display_name": "N. Gerontidis", "link": "https://stackoverflow.com/users/7240762/n-gerontidis"}, "is_accepted": false, "score": -1, "last_activity_date": 1487786158, "last_edit_date": 1495542308, "creation_date": 1487786158, "answer_id": 42398919, "question_id": 42398090, "link": "https://stackoverflow.com/questions/42398090/most-efficient-way-to-iterate-over-words-in-a-string/42398919#42398919", "title": "Most efficient way to iterate over words in a string", "body": "<p>What about spliting the string? You can check this <a href=\"https://stackoverflow.com/questions/236129/split-a-string-in-c\">post</a> for more information.</p>\n\n<p>Inside this post there is a detailed answer about how to split a string in tokens. In this answer maybe you could check the second way using iterators and the copy algorithm.</p>\n"}, {"tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 1, "last_activity_date": 1487809779, "last_edit_date": 1487809779, "creation_date": 1487809299, "answer_id": 42404818, "question_id": 42398090, "link": "https://stackoverflow.com/questions/42398090/most-efficient-way-to-iterate-over-words-in-a-string/42404818#42404818", "title": "Most efficient way to iterate over words in a string", "body": "<p>Using <a href=\"http://www.boost.org/doc/libs/release/doc/html/string_algo.html\" rel=\"nofollow noreferrer\">boost string algorithms</a> we can write it as follows.\nThe loop doesn't involve any copying of the string.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n\nint main()\n{\n    std::string s = \"stack over   flow\";\n\n    auto it = boost::make_split_iterator( s, boost::token_finder( \n                          boost::is_any_of( \" \" ), boost::algorithm::token_compress_on ) );\n    decltype( it ) end;\n\n    for( ; it != end; ++it ) \n    {\n        std::cout &lt;&lt; \"word: '\" &lt;&lt; *it &lt;&lt; \"'\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Making it C++11-ish</strong></p>\n\n<p>Since pairs of iterators are so oldschool nowadays, we may use <a href=\"http://www.boost.org/doc/libs/release/libs/range/\" rel=\"nofollow noreferrer\">boost.range</a> to define some generic helper functions. These finally allow us to loop over the words using range-for: </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n#include &lt;boost/range/iterator_range_core.hpp&gt;\n\ntemplate&lt; typename Range &gt;\nusing SplitRange = boost::iterator_range&lt; boost::split_iterator&lt; typename Range::const_iterator &gt; &gt;;\n\ntemplate&lt; typename Range, typename Finder &gt;\nSplitRange&lt; Range &gt; make_split_range( const Range&amp; rng, const Finder&amp; finder )\n{\n    auto first = boost::make_split_iterator( rng, finder );\n    decltype( first ) last;\n    return {  first, last };\n}\n\ntemplate&lt; typename Range, typename Predicate &gt;\nSplitRange&lt; Range &gt; make_token_range( const Range&amp; rng, const Predicate&amp; pred )\n{\n    return make_split_range( rng, boost::token_finder( pred, boost::algorithm::token_compress_on ) );\n}\n\nint main()\n{\n    std::string str = \"stack \\tover\\r\\n  flow\";\n\n    for( const auto&amp; substr : make_token_range( str, boost::is_any_of( \" \\t\\r\\n\" ) ) )\n    {\n        std::cout &lt;&lt; \"word: '\" &lt;&lt; substr &lt;&lt; \"'\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Demo:</strong></p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2f4b3d34086cc6ec\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/2f4b3d34086cc6ec</a></p>\n"}, {"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1487812494, "post_id": 42405164, "comment_id": 71957384, "body": "According to <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/data\" rel=\"nofollow noreferrer\">C++ reference docs</a> making modifications to the array obtained through the call to data results in undefined behavior, so a copy into a temporary array may be needed. I would also stay awsy from non-reentrant strtok, preferring strtok_r instead."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1487814602, "post_id": 42405164, "comment_id": 71958065, "body": "This refers only to the const overload of string::data(). If you have a fancy C++17 compiler, there is a non-const overload that returns a pointer to a non-const array which you are allowed to modify."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1487843004, "post_id": 42405164, "comment_id": 71970019, "body": "@dasblinkenlight Exactly. I&#39;m using the non-const overload, as I&#39;m passing the resulting <code>char*</code> to <code>std::strtok()</code>, which <i>requires</i> a non-const pointer as its first argument. So, no UB. Obviously, I agree with you on prefering <code>strtok_r()</code>, but a) it does not seem to be available via the <code>std::</code> namespace (which would not stop me from actually importing and using the C function, of course), and b) it&#39;s not necessary if you don&#39;t have multiple threads anyway (yes, there is real software that&#39;s either designed to use multiprocessing over multithreading, or where multithreading is pointless)."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1487811425, "creation_date": 1487811425, "answer_id": 42405164, "question_id": 42398090, "link": "https://stackoverflow.com/questions/42398090/most-efficient-way-to-iterate-over-words-in-a-string/42405164#42405164", "title": "Most efficient way to iterate over words in a string", "body": "<p>If you want to have it as fast as possible, you need to fall back to the good old C function <code>strtok()</code> (or its thread-safe companion <code>strtok_r()</code>):</p>\n\n<pre><code>const char* kWhiteSpace = \" \\t\\v\\n\\r\";    //whatever you call white space\n\nchar* token = std::strtok(myString.data(), kWhiteSpace);\nwhile(token) {\n    //do things with token\n    token = std::strtok(nullptr, kWhiteSpace));\n}\n</code></pre>\n\n<p>Beware that this will clobber the contents of <code>myString</code>: It works by replacing the first delimiter character after each token with a terminating null byte, and returning a pointer to the start of the tokens in turn. This is a legacy C function after all.</p>\n\n<p>However, that weakness is also its strength: It does not perform any copy, nor does it allocate any dynamic memory (which likely is the most time consuming thing in your example code). As such, you won't find a native C++ method that beats <code>strtok()</code>'s speed.</p>\n"}], "owner": {"reputation": 715, "user_id": 1000039, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3256bc83fb83cc3ce42d7ed34f1bc89?s=128&d=identicon&r=PG", "display_name": "user1000039", "link": "https://stackoverflow.com/users/1000039/user1000039"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3671, "favorite_count": 1, "accepted_answer_id": 42398417, "answer_count": 4, "score": 3, "last_activity_date": 1487811425, "creation_date": 1487783623, "last_edit_date": 1487786396, "question_id": 42398090, "link": "https://stackoverflow.com/questions/42398090/most-efficient-way-to-iterate-over-words-in-a-string", "title": "Most efficient way to iterate over words in a string", "body": "<p>If I wanted to iterate over individual words in a string (separated by whitespace), then the obvious solution would be:</p>\n\n<pre><code>std::istringstream s(myString);\n\nstd::string word;\nwhile (s &gt;&gt; word)\n    do things\n</code></pre>\n\n<p>However that's quite inefficient. The entire string is copied while initializing the string stream, and then each extracted word is copied one at a time into the <code>word</code> variable (which is close to copying the entire string for a second time). Is there a way to improve on this without manually iterating over each character?</p>\n"}, {"tags": ["c++", "copy-constructor"], "answers": [{"comments": [{"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 0, "creation_date": 1487784158, "post_id": 42398066, "comment_id": 71943460, "body": "That&#39;s what I thought in the first place but it even works with -O0 in g++ 6.3.1 and in clang 3.9.1. Or the optimization level does no matter in this case?"}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 0, "creation_date": 1487784883, "post_id": 42398066, "comment_id": 71943952, "body": "Just tried to compile with <code>-fno-elide-constructors</code> and finally, to my satisfaction, the linking fails! Thanks for the keyword &#39;elide&#39;."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1487783552, "creation_date": 1487783552, "answer_id": 42398066, "question_id": 42397983, "link": "https://stackoverflow.com/questions/42397983/factory-requires-only-declaration-of-copy-ctor-without-implementation/42398066#42398066", "title": "Factory requires only declaration of copy ctor without implementation", "body": "<p>The actual copy is elided by the compiler, which is allowed since the copy constructor is accessible. The compiler is of course under no obligation to elide this copy and if it didn't I would expect a linker error not finding the implementation of the copy constructor.</p>\n"}], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 42398066, "answer_count": 1, "score": 1, "last_activity_date": 1487783552, "creation_date": 1487783340, "question_id": 42397983, "link": "https://stackoverflow.com/questions/42397983/factory-requires-only-declaration-of-copy-ctor-without-implementation", "title": "Factory requires only declaration of copy ctor without implementation", "body": "<p>I'm experiencing behavior which I don't understand in a copy constructor of derived class.</p>\n\n<pre><code>class A {\n    A(const A&amp;);\n\npublic:\n    A() = default;\n};\n\nclass B : public A {\n    friend class Factory;\n    B(const int v) : A(), m_test_val(v) {}\n\npublic:\n    int m_test_val;\n    B(const B&amp;); // no implementation, just declaration\n};\n\nclass Factory {\npublic:\n    static B create(const int v) {\n        return B(v);\n    }\n};\n\nint main() {\n    B b = Factory::create(2);\n    std::cout &lt;&lt; b.m_test_val &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>The behavior I don't understand is a matter of a working copy constructor <code>B::B(const B&amp;);</code> which, however, does not have any implementation.</p>\n\n<p>When I use <code>B::B(const B&amp;) = default;</code> instead, I get an error saying I'm using deleted function (implicitly deleted because of ill-formation) in the return statement of the Factory::create() function (The A::A(const A&amp;) is private and without implementation on purpose).</p>\n\n<p>And of course, when I use <code>B::B(const B&amp;) = delete;</code>, compiler tells me I use a deleted function.</p>\n\n<p><strong>How is it possible that the copy constructor works with no implementation just with declaration?</strong></p>\n\n<p><em>Note: The example code is based on a much larger code that behaves the same way, hopefully I didn't leave something out.</em></p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1487783391, "post_id": 42397947, "comment_id": 71942941, "body": "<code>CloseResource</code> should accept a pointer to the resource it is closing"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 4, "creation_date": 1487783394, "post_id": 42397947, "comment_id": 71942946, "body": "Why do you need a shared pointer. Why not just rely on the object itself going out of scope?"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1487783504, "post_id": 42397947, "comment_id": 71943014, "body": "First, using <code>unique_ptr</code> would be more efficient (assuming you aren&#39;t using the shared-lifetime aspect of <code>shared_ptr</code>). Second, if you can use Boost, there&#39;s Boost.ScopeExit which accomplishes this. Third, if you can&#39;t use Boost, <a href=\"http://stackoverflow.com/questions/3669833/c11-scope-exit-guard-a-good-idea\">you can easily make your own class that does this</a> to avoid the hacky use of <code>unique_ptr</code>/<code>shared_ptr</code>."}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 4, "creation_date": 1487783537, "post_id": 42397947, "comment_id": 71943038, "body": "What do you mean &#39;without shared_ptr part&#39; Are you interested in multiple clients using the shared resource or not? Because if not, this is a terrible idea since shared_ptr is actually quite complex, involves atomic manipulations, dynamic block allocation and more that is not a free meal."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1487783552, "post_id": 42397947, "comment_id": 71943049, "body": "@Cornstalks OP may need to share onwership of the resource"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1487783598, "post_id": 42397947, "comment_id": 71943081, "body": "Could you give an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? there is too much unknowns."}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 1, "creation_date": 1487783674, "post_id": 42397947, "comment_id": 71943128, "body": "Also such exploiting makes your head hurt in about 3 weeks from now when you come back to the code and scratch your head. shared_ptr implies something and the implication might be very strong, misusing it like this sounds like asking for trouble."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1487784090, "post_id": 42397947, "comment_id": 71943415, "body": "@MadPhysicist The object itself is a c struct, allocated by a library, and I need to call the library&#39;s resource free-er function."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1487784160, "post_id": 42397947, "comment_id": 71943461, "body": "@Cornstalks, not using boost, just stl. Unique_ptr or shared_ptr, same thing, I&#39;m wondering about the usage of it, doesn&#39;t matter which one I use."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 0, "creation_date": 1487784233, "post_id": 42397947, "comment_id": 71943510, "body": "@AdrianLis as above I don&#39;t want to reimplement something that already exists. Something that goes out of scope and calls an arbitrary function when it does so. It may be an unintended use, but it&#39;s a known quantity, well tested and implemented everywhere. Why author it again?"}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 1, "creation_date": 1487784310, "post_id": 42397947, "comment_id": 71943558, "body": "@stu because its not designed to be a scope guard... Its for resource management But w/e"}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487784447, "post_id": 42397947, "comment_id": 71943661, "body": "I&#39;m trying to make a scope guard. shared_ptr has the functionality I want. So I thought I&#39;d use it, even if it that was not its intended purpose. Cars can do a lot more than drive from point A to B, but that&#39;s all most people use them for. Some use them for homes. Not the intended purpose, but it works."}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 3, "creation_date": 1487784750, "post_id": 42397947, "comment_id": 71943873, "body": "@stu if you wish to use it like so then nobody is stopping you, just pointing out this is plain stupid. If you really want just the scope guard unique_ptr would be better since it doesnt allocate memory dynamically for the control block and doesnt incur atomic increments for the resource ref counts."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487785391, "post_id": 42397947, "comment_id": 71944280, "body": "unique_ptr it is. thanks."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1487786438, "post_id": 42397947, "comment_id": 71944983, "body": "&quot;I need to call the library&#39;s resource free-er function.&quot; There&#39;s a word for an object that does that: a scope guard. So you <i>are</i> trying to make a scope guard."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 1, "creation_date": 1487786467, "post_id": 42397947, "comment_id": 71945002, "body": "@Dan I have been RAIIing my objects since 1997 or so when I first discovered the wonders of destructors, and since then I&#39;ve made a bazillion *cleaner classes each one does nothing but have a destructor that frees some resource. Then templates came, and I was able to make a few templates that covered most cases I needed, but as the question referred to shows, the best solution is still to make a custom class for everything, and in 2017 that just seems bizarre to me."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1487786547, "post_id": 42397947, "comment_id": 71945058, "body": "@stu: That&#39;s why almost 18 years ago we made <a href=\"http://stackoverflow.com/a/31365171/845092\">Scope_guard</a> and unique_ptr."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1487789040, "post_id": 42397947, "comment_id": 71946543, "body": "@MooingDuck Then why, why oh why, do things like scope guard not make it into the c++ standard but ever more complex and unnecessary things do? C++ is supposed to be a general purpose language, presumably used to solve real world problems. Something got lost along the way. /rant."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1487791857, "post_id": 42397947, "comment_id": 71948211, "body": "@stu: Honestly, I&#39;m not sure why <code>Scope_guard</code> was never standardized. The committee probably just never saw the need. <code>Scope_guard</code> has some awkward overhead with dynamic allocations, wheras a custom one is free and only ~4 lines of code."}], "answers": [{"comments": [{"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487784047, "post_id": 42398204, "comment_id": 71943387, "body": "Yeah, I could make a templated class, but I was trying to avoid that since all the functionality I need exists in the shared_ptr already. Why reproduce the wheel?"}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 4, "creation_date": 1487784111, "post_id": 42398204, "comment_id": 71943431, "body": "Shared pointer is not designed to just call a deleter on destruction - it is much more. Its not reinventing a wheel its trying you to stop using that wheel to make a spaghetti"}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487784355, "post_id": 42398204, "comment_id": 71943592, "body": "Computers are much more but we only use them to play games and make spreadsheets. Doesn&#39;t everybody like reuse? I&#39;m just reusing part of existing functionality, and not all of it. I&#39;m really surprised there isn&#39;t an stl solution to this real world problem that doesn&#39;t involve doing bad things like this."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487784542, "post_id": 42398204, "comment_id": 71943738, "body": "I&#39;m getting the idea, that the answer is &quot;no, there is no stl way to do this without writing your own scope guard.&quot;"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 2, "creation_date": 1487785116, "post_id": 42398204, "comment_id": 71944098, "body": "@stu: The answer is actually &quot;It&#39;s easy to use <code>shared_ptr</code>/<code>unique_ptr</code> to just call a function at scope exit, but doing so is somewhere between a hack and a kludge, and it&#39;s better to just create a custom class that&#39;s properly designed for the task.&quot; It&#39;s a bit like using a screw driver as a hammer... it works (and I&#39;ve done it before) and makes sense if you&#39;re in a pinch, but it&#39;s better to use a proper hammer, especially when it&#39;s so easy to reach for."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1487786133, "post_id": 42398204, "comment_id": 71944787, "body": "@Cornstalks I agree for correct and right and good and all that, I see now the proper way is to write my own template class that does what I want. I am just aghast that after years of stl, there is no built in way to do something this simple, when raii is all the rage."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 1, "creation_date": 1487786675, "post_id": 42398204, "comment_id": 71945131, "body": "@stu: That&#39;s because everyone write their own scope guard. It&#39;s like 4 lines of code. It&#39;s actually easier to write a custom scope guard than to use <code>shared_ptr</code> for this."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1487786897, "post_id": 42398204, "comment_id": 71945255, "body": "@MooingDuck I disagree, I can do the shared/unique_ptr thing in one line."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1487787167, "post_id": 42398204, "comment_id": 71945411, "body": "True. But requires an include. <code>struct ResourceCloser{~ResourceCloser(){CloseResource();}}guard;</code> doesn&#39;t."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1487792514, "post_id": 42398204, "comment_id": 71948580, "body": "@stu: Add to that one line and the <code>#include</code> a long comment in which you explain the special purpose of your <code>std::shared_ptr</code>-related class to future readers of your code, who will otherwise have trouble understanding what&#39;s going on."}], "tags": [], "owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "is_accepted": false, "score": 0, "last_activity_date": 1487783989, "creation_date": 1487783989, "answer_id": 42398204, "question_id": 42397947, "link": "https://stackoverflow.com/questions/42397947/how-to-use-a-shared-ptr-for-the-deleter-only/42398204#42398204", "title": "How to use a shared_ptr for the deleter only?", "body": "<p>If you want a RAII like semantics with a lambda maybe something like this will do the job?</p>\n\n<pre><code>namespace details {\n  enum class ScopeExitDummy { };\n}\n\n\ntemplate&lt;typename T&gt;\nclass scope_exit_t\n{\npublic:\n  inline scope_exit_t(T&amp;&amp; codeChunk_)\n    : m_codeChunk(std::forward&lt;T&gt;(codeChunk_)) {\n  }\n\n  inline scope_exit_t(scope_exit_t&lt;T&gt;&amp;&amp; rhs_)\n    : m_codeChunk(std::move(rhs_.m_codeChunk))\n  {\n  }\n\n  ~scope_exit_t() {\n    m_codeChunk();\n  }\n\nprivate:\n  T m_codeChunk;\n};\n\ntemplate&lt;typename T&gt;\ninline scope_exit_t&lt;T&gt; operator+(details::ScopeExitDummy, T&amp;&amp; functor_) {\n  return scope_exit_t&lt;T&gt;{std::forward&lt;T&gt;(functor_)};\n}\n\n#define AtScopeExit auto TW_UNIQUE_VARIABLE(_scopeExit) = details::ScopeExitDummy{} + [&amp;]\n</code></pre>\n\n<p>And usage is like:</p>\n\n<pre><code>AtScopeExit {\n  CloseResource();\n};\n</code></pre>\n\n<p>Note: TW_UNIQUE_VARIABLE is just a macro that generares a unique variable name so that the code does not clash with hand-written declarations.</p>\n\n<pre><code>#define TW_STR_CONCAT_IMPL(x, y) x##y\n#define TW_STR_CONCAT(x, y) TW_STR_CONCAT_IMPL(x, y)\n\n#ifdef __COUNTER__\n  #define TW_UNIQUE_VARIABLE(prefix) TW_STR_CONCAT(prefix, __COUNTER__)\n#else\n  #define TW_UNIQUE_VARIABLE(prefix) TW_STR_CONCAT(prefix, __LINE__)\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": true, "score": 3, "last_activity_date": 1487788678, "last_edit_date": 1495542296, "creation_date": 1487784973, "answer_id": 42398524, "question_id": 42397947, "link": "https://stackoverflow.com/questions/42397947/how-to-use-a-shared-ptr-for-the-deleter-only/42398524#42398524", "title": "How to use a shared_ptr for the deleter only?", "body": "<p>It sounds like what you <strong>may</strong> be trying to do is turn over \"delete\" responsibilities to \"somebody else\" so you no longer have to worry about it.  If that's the case, <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/unique_ptr\" rel=\"nofollow noreferrer\"><code>unique_ptr</code></a> (not <code>shared_ptr</code>) with a custom deleter will work:</p>\n\n<pre><code>struct Foo final {};\nFoo* New() { return new Foo; }\nvoid Delete(Foo* p) { delete p; }\n\nint main()\n{\n    auto p = New();\n    std::unique_ptr&lt;Foo, decltype(&amp;Delete)&gt; up(p, &amp;Delete);\n}\n</code></pre>\n\n<p>There are a number of similar solutions listed <a href=\"https://stackoverflow.com/questions/14841396/stdunique-ptr-deleters-and-the-win32-api\">here</a>; there's not much more that can be done without more information about your actual API (e.g., does the <a href=\"https://stackoverflow.com/a/14842047/8877\"><code>HANDLE</code> is really a pointer</a> trick work?).  And even more reading at <a href=\"https://stackoverflow.com/questions/10270328/the-simplest-and-neatest-c11-scopeguard\">The simplest and neatest c++11 ScopeGuard</a>, including a <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0052r0.pdf\" rel=\"nofollow noreferrer\">link</a> to a proposed <code>std::unique_resource</code>.</p>\n"}], "owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 42398524, "answer_count": 2, "score": 1, "last_activity_date": 1514760435, "creation_date": 1487783252, "last_edit_date": 1514760435, "question_id": 42397947, "link": "https://stackoverflow.com/questions/42397947/how-to-use-a-shared-ptr-for-the-deleter-only", "title": "How to use a shared_ptr for the deleter only?", "body": "<p>I simply want to use the deleter feature of a shared_ptr without using the shared_ptr part. As in, I want to call a function when the shared_ptr goes out of scope and the deleter doesn't need any pointer passed to it.</p>\n\n<p>I have this but it's cheezy.</p>\n\n<pre><code>shared_ptr&lt;int&gt; x(new int, [&amp;](int *me) { delete me; CloseResource(); }); \n</code></pre>\n\n<p>Is there a way to not associate any pointer with the shared_ptr?</p>\n\n<p>Update: as per many suggestions, the unique_ptr way would look like this:</p>\n\n<pre><code>unique_ptr&lt;int, std::function&lt;void(int*)&gt;&gt; x(new int, [&amp;](int *me) {delete me; CloseResource();});\n</code></pre>\n\n<p>Which frankly looks worse than the shared_ptr version, as much 'better' as it is. </p>\n\n<p>Update: for those who like using this simple scope closing function caller I made it a bit simpler, you don't even need to allocate or free an object:</p>\n\n<pre><code>shared_ptr&lt;int&gt; x(NULL, [&amp;](int *) { CloseResource(); });\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 9, "user_id": 7606035, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154602142278853/picture?type=large", "display_name": "David Gil", "link": "https://stackoverflow.com/users/7606035/david-gil"}, "edited": false, "score": 0, "creation_date": 1487788573, "post_id": 42397813, "comment_id": 71946289, "body": "I was able to figure out 1), I just added a clause to include the negative sign on the last iteration, but can anyone point me in the right direction for how to include the l1 into an array to save my numbers an ultimately sort them."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487792892, "post_id": 42397813, "comment_id": 71948802, "body": "Highly recommend reading through <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is the Rule of Three?</a> because <code>doubleLinkedList</code> violates it and could put you up for some rather hellish debugging."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487792990, "post_id": 42397813, "comment_id": 71948853, "body": "Also highly recommend reading <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> because <code>while (!ifs.eof())</code> can get you at least two different ways."}, {"owner": {"reputation": 9, "user_id": 7606035, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154602142278853/picture?type=large", "display_name": "David Gil", "link": "https://stackoverflow.com/users/7606035/david-gil"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487798957, "post_id": 42397813, "comment_id": 71952267, "body": "@user4581301 OK, I&#39;m going to have to read both of those articles to understand what you mean, Thank you.  In the mean time do you mind sharing a little knowledge about an array of doubly linked list or an article regarding the topic?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487802463, "post_id": 42397813, "comment_id": 71953950, "body": "Linked List is more a rite of passage than anything widely useful. What you learn from it is useful. Best way to deal with a linked list is drawing boxes on a piece of paper. You build the linked list on paper, drawing in all of the links one by one taking careful notes of what you did because the notes become your code. If you need to insert a link, draw each step of separating the existing links and attaching them to the inserted node. Removing is the same deal. Draw pictures."}], "owner": {"reputation": 9, "user_id": 7606035, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154602142278853/picture?type=large", "display_name": "David Gil", "link": "https://stackoverflow.com/users/7606035/david-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487807302, "creation_date": 1487782895, "last_edit_date": 1487807302, "question_id": 42397813, "link": "https://stackoverflow.com/questions/42397813/having-trouble-creating-an-array-of-doubly-linked-list", "title": "Having trouble creating an array of doubly linked list", "body": "<p>I have two problems where I'm having a hard time to understand.</p>\n\n<p>1) I'm having a hard time to understand how to pass my L1 doublyLinkedList into an array so that I can save each list of numbers my txt file reads</p>\n\n<p>2) If I have an uneven negative number my <code>break_into_nodes()</code> method is reading an error as <code>stoi</code> is creating 1 node for a negative sign, how would I create an if statement to continue to breaking it into a node</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include \"ArgumentManager.h\"\nusing namespace std;\n\nstruct Node\n{\n    long long value;\n    Node *next, *prev;\n    Node(long long y)\n    {\n        value = y;\n        next = prev = NULL;\n    }\n};\n\nclass doubleLinkedList\n{\n    Node *back;\n\npublic:\n    Node *front;\n    doubleLinkedList() { front = NULL; back = NULL; }\n    ~doubleLinkedList() { destroyList(); }\n    doubleLinkedList(const string&amp; num, int digitsPerNode) {\n        appendNodeFront(stoi(num, 0, 10));\n    }\n\n    void appendNodeFront(long int x);\n    void dispNodesForward(int digits);\n    void destroyList();\n    void clean();\n\n};\n\nvoid doubleLinkedList::clean()\n{\n    destroyList();\n}\n\nvoid doubleLinkedList::appendNodeFront(long int x)\n{\n    Node *n = new Node(x);\n    if (front == NULL)\n    {\n        front = n;\n        //back = n;\n    }\n    else\n    {\n        front-&gt;prev = n;\n        n-&gt;next = front;\n        front = n;\n    }\n}\nvoid doubleLinkedList::dispNodesForward(int digits)\n{\n    Node *temp = front;\n    int temp_val;\n\n    if (temp != NULL)\n    {\n        /* First node does not get Zero padding */\n        temp_val = (int)temp-&gt;value;\n        printf(\"%d\", temp_val);\n\n        temp = temp-&gt;next;\n        while (temp != NULL)\n        {\n            temp_val = (int)temp-&gt;value;\n            printf(\"%0*d\", digits, temp_val);\n            temp = temp-&gt;next;\n        }\n    }\n}\nvoid doubleLinkedList::destroyList()\n{\n    Node *T = back;\n    while (T != NULL)\n    {\n        Node *T2 = T;\n        T = T-&gt;prev;\n        delete T2;\n    }\n    front = NULL;\n    back = NULL;\n}\n\nvoid break_into_nodes(doubleLinkedList *list, string number, int digits) {\n\n    string  node_value;\n    int     num_index, num_iterations;\n    int     i, j;\n\n    num_index = number.length();\n\n    if (num_index &lt; digits)\n    {\n        node_value = number;\n        list-&gt;appendNodeFront(stoi(node_value));\n    }\n    else {\n\n        /* adjust for incomplete nodes */\n        if ((number.length() % digits) == 0)\n            num_iterations = (number.length() / digits);\n        else\n            num_iterations = (number.length() / digits) + 1;\n\n        for (j = 0; j &lt; num_iterations; j++) {\n            node_value.clear();\n            for (i = 0; i &lt; digits; i++) {\n                num_index--;\n                if (num_index &lt; 0)\n                    break;\n                node_value = node_value.insert(0, number.substr(num_index, 1));\n            }\n            list-&gt;appendNodeFront(stoi(node_value));\n        }\n    }\n}\n\n// Driver program\nint main(int argc, char* argv[]) {\n\n    doubleLinkedList l1;\n\n    if (argc &lt; 2) {\n        cerr &lt;&lt; \"Usage: infinitearithmetic \\\"input=xyz.txt;digitsPerNode=    &lt;number&gt;\\\"\\n\";\n    }\n    ArgumentManager am(argc, argv);\n    string filename = am.get(\"input\");\n\n    /* Digits per Node ar from 1 to 8 */\n    int digitsPerNode = stoi(am.get(\"digitsPerNode\"));\n    ifstream ifs(filename.c_str());\n    string line;\n    string num1;\n    int i = 0;\n\n    while (!ifs.eof())\n    {\n        getline(ifs, line);\n        //cout &lt;&lt; \"\" &lt;&lt; line &lt;&lt; endl;\n        num1 = line;\n        break_into_nodes(&amp;l1, num1, digitsPerNode);\n        l1.dispNodesForward(digitsPerNode);\n        cout &lt;&lt; endl;\n        l1.clean();\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "class-design"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783047, "post_id": 42397612, "comment_id": 71942713, "body": "Why not just use an extra bool member as a flag and initialize it in the constructor as <code>true</code> is you use a single <code>int</code> and false in the other constructor?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1487783107, "post_id": 42397612, "comment_id": 71942764, "body": "if the internal is only 3 <code>int</code>s, why it&#39;s important they are initialized at compile time?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783111, "post_id": 42397612, "comment_id": 71942766, "body": "@NathanOliver Yep, but in the latter case, where do I store the three ints? At compile time I don&#39;t know which one of the three I&#39;ll need at runtime."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783288, "post_id": 42397612, "comment_id": 71942879, "body": "@szczurcio Can&#39;t <code>A</code> just have all 3 variables or are you trying to not waste space?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783419, "post_id": 42397612, "comment_id": 71942965, "body": "@NathanOliver Yep, that&#39;s the problem. See bullet point 3."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1487783433, "post_id": 42397612, "comment_id": 71942973, "body": "@appleapple See updated answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487783587, "post_id": 42397612, "comment_id": 71943068, "body": "@szczurcio So <a href=\"http://coliru.stacked-crooked.com/a/bd6f41baf540f4d5\" rel=\"nofollow noreferrer\">this</a> would not work for you?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487784252, "post_id": 42397612, "comment_id": 71943521, "body": "@NathanOliver It would, but like I said in bullet point three, it does waste 8 (usually) bytes for objects where only one <code>int</code> will ever be used (like I said, most of these objects are global <code>const</code>s). It&#39;s not <i>horrible</i>, and if I don&#39;t find anything better, this is probably what I&#39;ll do, but I&#39;m wondering if there&#39;s a more elegant solution."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487784820, "post_id": 42397612, "comment_id": 71943915, "body": "What does bullet point 2 even mean? Determine which of <code>x</code>,<code>y</code>,<code>z</code> how? Also if you potentially need 3 <code>int</code>s and a flag to determine which is used, you can&#39;t have less than 3 <code>int</code>s worth of storage..."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487784910, "post_id": 42397612, "comment_id": 71943967, "body": "@Barry Based on external global state (basically a simple <code>switch</code> on a global). The thing is that I <i>do</i> know, for each individual object, at compilation time, whether I need three ints or one int. The problem is stuffing all this in a single type and still keeping it literal."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487787243, "post_id": 42397612, "comment_id": 71945457, "body": "@szczurcio You have conflicting requirements. You want this type to be able to store 3 <code>int</code>s but to not actually store them. The only way to not store them is to have different types."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1487787780, "post_id": 42397612, "comment_id": 71945805, "body": "@Barry I&#39;ve added a general summary after the list of my requirements, hopefully that clears it up."}, {"owner": {"reputation": 216, "user_id": 5107245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd92b0a4ba0becd3c0e37ac0fa70ed1a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Baron", "link": "https://stackoverflow.com/users/5107245/robert-baron"}, "edited": false, "score": 0, "creation_date": 1488889502, "post_id": 42397612, "comment_id": 72422642, "body": "My impression is that you want to something polymorphic, g without inheritance.  One possible solution would be to have an abstract class and two inherited classes, one for the single int, the other for the int array.  It would probably simplify the rest of your code. - I realize the doesn&#39;t satify all of your requirements, but neither does anything else."}], "answers": [{"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1487787362, "post_id": 42399016, "comment_id": 71945525, "body": "@szczurcio - yes: it&#39;s very, very dangerous: you have to verify that the lifespan of the variable that initialize your <code>foo()</code> cover the lifespan of your <code>foo</code> object"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1487788344, "post_id": 42399016, "comment_id": 71946171, "body": "Yep, it seems like it does work (tested with VC++ under full optimization now, the objects are initialized at compile time and reside in <code>.data</code>). However, this requires the manual allocation of the <code>int</code> arguments. Is there a better way?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1487788503, "post_id": 42399016, "comment_id": 71946252, "body": "@szczurcio - I don&#39;t see a better way; your requirments are very hard to satisfy (IMHO)."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1487786493, "creation_date": 1487786493, "answer_id": 42399016, "question_id": 42397612, "link": "https://stackoverflow.com/questions/42397612/designing-a-literal-type-class-with-a-variant-field-inside-in-which-one-or-three/42399016#42399016", "title": "Designing a literal-type class with a variant field inside in which one or three objects may be stored", "body": "<p>A class/struct with 2 members?</p>\n\n<p>A pointer to <code>int</code> and a <code>bool</code> (where the boolean say if the pointer point to one or three values)?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo\n {\n   bool           single;\n   int const    * p;\n\n   constexpr foo ( int const &amp; x ) : single{true}, p{&amp;x}\n    {}\n\n   constexpr foo ( int const * y ) : single{false}, p{y}\n    {}\n };\n\nconstexpr int x{2};\nconstexpr int y[]{3, 5, 7};\n\nint main ()\n {\n   constexpr foo f1{x};\n   constexpr foo f3{y};\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1487797595, "post_id": 42400309, "comment_id": 71951466, "body": "Indeed, it appears this is the best I can do. Always storing all three <code>int</code>s results in an excess 12 bytes (in my case) for objects that only ever need to store a single <code>int</code> (the flag gets padded), so that&#39;s not too bad."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1487790840, "creation_date": 1487790840, "answer_id": 42400309, "question_id": 42397612, "link": "https://stackoverflow.com/questions/42397612/designing-a-literal-type-class-with-a-variant-field-inside-in-which-one-or-three/42400309#42400309", "title": "Designing a literal-type class with a variant field inside in which one or three objects may be stored", "body": "<p>Seems like the best thing you could use is a conditionally sized range of ints:</p>\n\n<pre><code>class A {\n    std::array&lt;int, 3&gt; data;\n    bool one;\n\npublic:\n    constexpr A(int x): data{{x, 0, 0}}, one(true) { }\n    constexpr A(int x, int y, int z): data{{x, y, z}}, one(false) { }\n\n    constexpr size_t size() const { return one ? 1 : 3; }\n    constexpr const int* begin() const { return data.data(); }\n    constexpr const int* end() const { return data.data() + size(); }\n};\n</code></pre>\n\n<p>I'm not entirely sure what your logic is for selecting which element, but if you have a 1-sized range, you get that element, if you have a 3-sized range, then you do whatever it is you need to do. </p>\n\n<hr />\n\n<p>Regardless of the specific details, the main point is that you want a type that has 3 <code>int</code>s and a <code>bool</code>. You need to store 3 <code>int</code>s, you want it to be literal, and you want it to know whether it's storing 3 or 1 <code>int</code>. That pretty much spells out the type. The only thing left is to determine how you want the data access to look, and that's not specified. </p>\n"}], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 42400309, "answer_count": 2, "score": 4, "last_activity_date": 1487790840, "creation_date": 1487782383, "last_edit_date": 1487787750, "question_id": 42397612, "link": "https://stackoverflow.com/questions/42397612/designing-a-literal-type-class-with-a-variant-field-inside-in-which-one-or-three", "title": "Designing a literal-type class with a variant field inside in which one or three objects may be stored", "body": "<p>I'm trying to design a class - let's call it <code>A</code> for the sake of discussion - that will fulfill a specific set of requirements:</p>\n\n<ol>\n<li><code>A</code> must be a literal type to allow the compiler to initialize its global instances at compile time via <code>constexpr</code> constructors (many global <code>const</code> objects of this type are created in the source code). The reason for this is that <code>A</code> employs simple compile-time encryption (mostly XOR) on the integers. Decryption is later done at runtime while accessing the appropriate <code>int</code>.</li>\n<li>Its central private field is a simple integer. However, the class has two constructors:\n<code>A::A(int x)</code> and <code>A::A(int x, int y, int z)</code>. If the first version is invoked, then later, at runtime, that single <code>x</code> will be used by the class internally whenever a method call that needs to use it is made. In contrast, if the second version with three parameters is used, it will be decided at runtime which one of <code>x</code>, <code>y</code> and <code>z</code> to use if a function that needs one is invoked.</li>\n<li><code>A</code> must be a single type; one type for the first constructor and another type for the second constructor is not satisfactory (<code>A</code> is frequently passed to functions as an argument, so without this constraint, I would need to duplicate or templatize all those functions).</li>\n<li>A great majority of all <code>A</code> objects will be global constants, assignment will seldom happens, and if it does, it will certainly not be between an object with three <code>int</code>s and an object with one <code>int</code> or vice-versa.</li>\n</ol>\n\n<p>To summarize: <code>A</code> will be instantiated as global <code>const</code> objects. If I initialize an object with a single <code>int</code>, that single <code>int</code> should be stored inside it (and nothing more). If I initialize it with three <code>int</code>s, then those three <code>int</code>s should be stored inside. There's no need to worry about assignment from a three-<code>int</code> object to a one-<code>int</code> object or vice versa, because they're all constants.</p>\n\n<p>The solutions I have considered so far are as follows:</p>\n\n<ul>\n<li><p>Make <code>A</code> a template; the template parameter would be what I called the <code>StorageType</code>. That storage would abstract access to that central <code>int</code> resource by exposing an accessor for it. The problem of choosing which <code>int</code> field to use would then be moved from the <code>A</code> to this helper storage type. The idea is roughly illustrated by this code:</p>\n\n<pre><code>template&lt;typename StorageType&gt;\nclass A\n{\nprivate:\n    StorageType storage;\n\npublic:\n    constexpr A(int x, int y, int z) :\n        storage(x, y, z)\n    { }\n\n    constexpr A(int x) :\n        storage(x)\n    { }\n\n    void doSomething()\n    {\n        auto theRightInt = storage.getInt();\n        // ...\n    }\n};\n</code></pre>\n\n<p><strong>Problem:</strong> violates constraint 3.</p></li>\n<li><p>As before, but rather than templatize <code>A</code> on the <code>StorageType</code>, have a generic interface that describes the <code>StorageType</code> and store a <code>unique_ptr</code> to one inside <code>A</code>.</p>\n\n<p><strong>Problem:</strong> violates constraint 1.</p></li>\n<li><p>Store the integers as a union:</p>\n\n<pre><code>union\n{\n    struct\n    {\n        int x;\n        int y;\n        int z;\n    } intPack;\n\n    int singleInt;\n};\n</code></pre>\n\n<p>In this variant, each <code>A</code> object - including those that only use a single <code>int</code> - has room for three possible <code>int</code>s. Another option would be to use <code>boost::variant</code> instead of the obsolete <code>union</code>.</p>\n\n<p><strong>Problem</strong>: This is wasteful - see point 4. If <code>boost::variant</code> is used, it violates constraint 1 since <code>boost::variant</code>, unlike <code>std::variant</code> from C++17, is not a literal type.</p></li>\n<li><p>Rather than attempt to represent the \"variance\" of the central integer field inside <code>A</code>, do it externally: have the class always store a single <code>int</code>, and create a helper class - let's call it <code>VariantA</code> - that contains three versions of <code>A</code>, each initialized with what was <code>x</code>, <code>y</code> and <code>z</code> in the constructor mentioned in point 2. <code>VariantA</code> would have an accessor function that decides at runtime which <code>A</code> object to return.</p>\n\n<p><strong>Problem</strong>: Tedious to use because the accessor has to be invoked every single time:</p>\n\n<pre><code>VariantA a1(0, 1, 2);\nVariantA a2(10, 20, 30);\n\nauto a3 = a1.get() + a2.get();\nsomeFunctionThatTakesAnA(a1.get());\n// etc\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p><strong>Question:</strong>\nIs there an elegant solution to this problem that I have missed, or will I have to choose one of the solutions I have considered (and rejected) above?\nMy platform is VC++, so use of C++11/4 is okay except some more esoteric parts, but the features from C++17 drafts are not yet available.</p>\n"}, {"tags": ["c++", "dynamic-allocation", "dynamic-loading"], "comments": [{"owner": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "edited": false, "score": 0, "creation_date": 1487782835, "post_id": 42397577, "comment_id": 71942550, "body": "(The loaded lib allocates it by calling &quot;new&quot; in the usual way - not using in-place &quot;new&quot; upon a memory address I provide to it, or anything like that.)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1487784040, "post_id": 42397577, "comment_id": 71943381, "body": "Looks like this question comes from usage of MS stuff. No, Linux/Unix system implemented shared libs properly the first place, not that crap from MS"}, {"owner": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784323, "post_id": 42397577, "comment_id": 71943569, "body": "If I could find an official-ish reference saying as much, that&#39;d solve my problem. :)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1487784480, "post_id": 42397577, "comment_id": 71943687, "body": "@KeithRussell there is no universal official reference about shared libraries in C++, because the standard does not specify shared libraries. To find official documentation you must limit your search to particular implementation of shared libraries."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784964, "post_id": 42397577, "comment_id": 71944001, "body": "@KeithRussell this is normal way which should work by default, MS as usually ignored standard and made their own way. So I doubt you would find official reference that Linux does it properly."}], "answers": [{"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1487782644, "post_id": 42397634, "comment_id": 71942408, "body": "The destructors have to be declared <code>virtual</code>."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1487782693, "post_id": 42397634, "comment_id": 71942446, "body": "@mch Can you elaborate why?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1487782776, "post_id": 42397634, "comment_id": 71942507, "body": "If the destructor of the base class is not virtual, it will not call the destructor of the derived class when you delete the base pointer."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1487783002, "post_id": 42397634, "comment_id": 71942678, "body": "Yes, but having a non-virtual dtor doesn&#39;t make delete any less safe. It might leak memory if you should be invoking the derived dtor, but that&#39;s it."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1487783079, "post_id": 42397634, "comment_id": 71942736, "body": "@tuple_cat standard doesn&#39;t guarantee that. A conforming compiler is free to launch nethack, for example. Or just crash. Or corrupt your data."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1487782423, "creation_date": 1487782423, "answer_id": 42397634, "question_id": 42397577, "link": "https://stackoverflow.com/questions/42397577/safety-of-calling-delete-on-base-class-pointer-allocated-by-dynamically-loaded-l/42397634#42397634", "title": "safety of calling delete on base-class pointer allocated by dynamically loaded lib in C++", "body": "<p>Yes, if it was allocated with <code>new</code>, and if the library (or any other code) doesn't try to use the object after the delete.</p>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1487782772, "post_id": 42397738, "comment_id": 71942502, "body": "Wrong, the destructor doesn&#39;t have to be virtual for the delete to be safe. It only has be virtual if you want any derived class destructors to be called."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1487782891, "post_id": 42397738, "comment_id": 71942592, "body": "@tuple_cat <i>&quot;if the static type of the object to be deleted is different from its dynamic type, the static type shall be a base class of the dynamic type of the object to be deleted and <b>the static type shall have a virtual destructor or the behavior is undefined</b>.&quot;</i> So sayeth the standard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1487782962, "post_id": 42397738, "comment_id": 71942644, "body": "@tuple wrong - the standard says that deleting a derived object via a base pointer is undefined behaviour if the base destructor is not virtual. The standard doesn&#39;t say what destructors may or may not be called in this circumstance."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1487783131, "post_id": 42397738, "comment_id": 71942772, "body": "@user2079303 Thanks, learned something. Never heard that before."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784229, "post_id": 42397738, "comment_id": 71943504, "body": "Unfortunately this is from standard C++ point of view, but MS thinks differently: <a href=\"http://stackoverflow.com/questions/443147/c-mix-new-delete-between-libs\" title=\"c mix new delete between libs\">stackoverflow.com/questions/443147/&hellip;</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487785223, "post_id": 42397738, "comment_id": 71944166, "body": "@Slava I expanded the answer a bit to consider language extensions in general."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1487785131, "last_edit_date": 1487785131, "creation_date": 1487782687, "answer_id": 42397738, "question_id": 42397577, "link": "https://stackoverflow.com/questions/42397577/safety-of-calling-delete-on-base-class-pointer-allocated-by-dynamically-loaded-l/42397738#42397738", "title": "safety of calling delete on base-class pointer allocated by dynamically loaded lib in C++", "body": "<p>It is safe to <code>delete</code> the pointer if and only if</p>\n\n<ul>\n<li>The destructor of the base class is virtual.</li>\n<li>The pointer was returned by <code>new</code> (not <code>new[]</code>, not <code>malloc</code>, not <code>mmap</code>, ...)</li>\n<li>You are the sole owner of the pointer. In other words: If no other piece of code (within or out of the dll) is going to use or destroy the pointed object.</li>\n</ul>\n\n<hr>\n\n<p>As far as the standard is concerned, the library must have linked with the same version of runtime library that define the allocation functions. Same requirement applies to separate object files that are linked together statically.</p>\n\n<p>Technically multiple different implementation of memory allocation functions violates the one definition rule, but a C++ implementation that extends the language with standard libraries may possibly extend the language to allow multiple different implementations for those functions. If that is the case for the implementation that you use, then it might not be safe to deallocate memory allocated by the shared library unless you can prove that same versions were used for both the library and the code that deletes the object.</p>\n\n<hr>\n\n<p>Whether it is safe or not, it is a bad idea to provide an API that returns resources (such as dynamic memory), but not API that takes care of releasing those resources.</p>\n"}, {"comments": [{"owner": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "edited": false, "score": 0, "creation_date": 1487783713, "post_id": 42397771, "comment_id": 71943160, "body": "Hearing a rumor about this is what prompted my question, actually. I&#39;m interested to know whether this two-heaps behavior is only done by obscure OSes, or whether e.g. mainstream Linux distros do it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "edited": false, "score": 0, "creation_date": 1487784100, "post_id": 42397771, "comment_id": 71943426, "body": "I saw it when dynamic library was compiled wit an older version of g++. It was all long ago, may be there is a better solution by now.  In any case, think of executable compiled with g++ and library compiled with an Intel compiler :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784534, "post_id": 42397771, "comment_id": 71943730, "body": "There in no such thing as &quot;heap controlled by the library&quot; in Unix/Linux world. As OP question says gcc, which probably means Linux, this is not a problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487788852, "post_id": 42397771, "comment_id": 71946441, "body": "@Slava At the very least, if the dynamic library was compiled with static C runtime, you&#39;ll have that situation. And even if the library links to C runtime dynamically, if the C runtime version of library is very old, it will not be able to share the executable&#39;s version. So you will have two different heap data structures."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487790157, "post_id": 42397771, "comment_id": 71947199, "body": "@Arkadiy what OS do you mean? If Linux this does not make any sense."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 1, "last_activity_date": 1487782779, "creation_date": 1487782779, "answer_id": 42397771, "question_id": 42397577, "link": "https://stackoverflow.com/questions/42397577/safety-of-calling-delete-on-base-class-pointer-allocated-by-dynamically-loaded-l/42397771#42397771", "title": "safety of calling delete on base-class pointer allocated by dynamically loaded lib in C++", "body": "<p>It depends on the version of the compiler and flags that dynamic library was compiled with.</p>\n\n<p>The library's call to <code>new</code> grabs the object from the heap controlled by the library.</p>\n\n<p>Your call to <code>delete</code> places the object back to the heap controlled by your executable.</p>\n\n<p>This may or may not be the same heap managed by the same library.</p>\n\n<p>The safe way is to wrap the <code>delete</code> in the library call, like fopen/fclose.</p>\n"}], "owner": {"reputation": 473, "user_id": 3225396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1904f9dbb6f777f0e91ebe3c46728dba?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Russell", "link": "https://stackoverflow.com/users/3225396/keith-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1487785131, "creation_date": 1487782277, "last_edit_date": 1487783782, "question_id": 42397577, "link": "https://stackoverflow.com/questions/42397577/safety-of-calling-delete-on-base-class-pointer-allocated-by-dynamically-loaded-l", "title": "safety of calling delete on base-class pointer allocated by dynamically loaded lib in C++", "body": "<p>Is it safe to call delete on a base-class pointer to a heap object allocated by a dynamically loaded library? Both that lib and the client were built by the same compiler (GCC).</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1487782407, "post_id": 42397553, "comment_id": 71942242, "body": "First, why do you want to avoid it passing those parameters?  You have them right there the line above.  I ask this because I can produce solutions, but the solutions are likely to not help you <i>if I don&#39;t understand your real problem</i>.  That would be a waste of my time (generating a solution that doesn&#39;t help you).  Can you describe a practical problem you are trying to solve with this request?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1487782887, "post_id": 42397553, "comment_id": 71942590, "body": "And why do you not just write <code>return {10};</code>. How is the extra <code>make_foo</code> call useful"}, {"owner": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "edited": false, "score": 0, "creation_date": 1487782900, "post_id": 42397553, "comment_id": 71942598, "body": "In this example the template arguments are small. The real example could be more  tricky and not just doing <code>make_foo&lt;x,y&gt;()</code> . As template arguments cannot be deduced from their constructors I need this make workaround as it&#39;s a well known idiom to co over this issue. the issue is clear to me, but the question is how to go(if possible) go over that.  if you need to create a tuple with 10 different types in it, you will avoid to type all then types.  Thanks."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1487782970, "post_id": 42397553, "comment_id": 71942651, "body": "So is your main question how to deduce the type params in <code>make_foo</code>, or how to avoid re-typing them in <code>make_my_foo_object</code>?"}, {"owner": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1487783079, "post_id": 42397553, "comment_id": 71942737, "body": "@Johannes Schaub - litb That&#39;s what I&#39;m doing currently and probably it will be what I will end up doing by default, but I wan&#39;t to make that call there. it can also be wrapped into a macro <code>#define bla(x) { z }</code>. But my real goal is understand how to go over this."}, {"owner": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1487783157, "post_id": 42397553, "comment_id": 71942790, "body": "@Useless avoid the explicit types in the make_foo(). Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "edited": false, "score": 0, "creation_date": 1487783791, "post_id": 42398075, "comment_id": 71943205, "body": "It isn&#39;t using the bool param at all at the moment, and B isn&#39;t involved in any conversion. What do you mean?"}, {"owner": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "edited": false, "score": 0, "creation_date": 1487784871, "post_id": 42398075, "comment_id": 71943946, "body": "Just removed my previous comment, now looking at it better, it make sense but there are two things I&#39;m trying to avoid, if you have to write your own <code>make_my_foo_object</code> function, then you have to deal with the template declaration in your function and that&#39;s not what I want to be doing.  I&#39;m trying to avoid you to be writing the template signature in your functions. Thanks"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "edited": false, "score": 0, "creation_date": 1487785760, "post_id": 42398075, "comment_id": 71944527, "body": "<i>in your function</i> - in <b>what</b> function? In the caller? That doesn&#39;t need to specify the params, that&#39;s the whole reason for defaulting them. In <code>make_my_foo_object</code> at all? You have to specify the types somewhere, you just had them in the return type before. Or you just want to avoid typing the <code>template</code> keyword for some reason?"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1487783582, "creation_date": 1487783582, "answer_id": 42398075, "question_id": 42397553, "link": "https://stackoverflow.com/questions/42397553/deduce-non-present-template-parameter-from-return-function/42398075#42398075", "title": "Deduce non present template parameter from return function", "body": "<p>If your only concern is avoiding repetition of the hardcoded type params, you can just give them names like so:</p>\n\n<pre><code>template &lt;typename A=int, typename B=bool&gt;\nFoo&lt;A,B&gt; make_my_foo_object() {\n  return make_foo&lt;A,B&gt;(10);\n}\n</code></pre>\n\n<p>That is, the decision about what types to use for A and B simply moves from the return type, to the template parameter list.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1487787984, "creation_date": 1487787984, "answer_id": 42399427, "question_id": 42397553, "link": "https://stackoverflow.com/questions/42397553/deduce-non-present-template-parameter-from-return-function/42399427#42399427", "title": "Deduce non present template parameter from return function", "body": "<pre><code>template&lt;class...Ts&gt;\nstruct make_something_t {\n  std::tuple&lt;Ts...&gt; data;\n  template&lt;class T, std::size_t...Is&gt;\n  T make(std::index_sequence&lt;Is...&gt;) &amp;&amp; {\n    return T( std::get&lt;Is&gt;(std::move(data))... );\n  }\n  template&lt;class T&gt;\n  operator T()&amp;&amp;{\n    return std::move(*this).template make&lt;T&gt;(std::make_index_sequence&lt;sizeof...(Ts)&gt;{});\n  }\n};\ntemplate&lt;class...Ts&gt;\nmake_something_t&lt;Ts...&gt; make_something( Ts&amp;&amp;...ts ) {\n  return {std::forward_as_tuple(std::forward&lt;Ts&gt;(ts)...)};\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4e956ca8bf5df5c4\" rel=\"nofollow noreferrer\">live example</a>.</p>\n\n<p><code>make_something(args...)</code> doesn't make anything.  Instead, you can use it to construct (almost) anything, and it uses <code>args...</code> to do the construction of whatever type you construct from it.</p>\n\n<p>This may not be a great idea, but it deduces the type of object you make from by what object you construct from it.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1487974143, "last_edit_date": 1487974143, "creation_date": 1487788033, "answer_id": 42399450, "question_id": 42397553, "link": "https://stackoverflow.com/questions/42397553/deduce-non-present-template-parameter-from-return-function/42399450#42399450", "title": "Deduce non present template parameter from return function", "body": "<blockquote>\n  <p>What I'm trying to avoid is to specify the types in the\u00a0return make_foo(10);\u00a0in the\u00a0make_my_foo_object function.</p>\n</blockquote>\n\n<p>Something like this probably works for you (minimal, working example in C++14):</p>\n\n<pre><code>template &lt;class A, class B&gt;\nstruct Foo {\n    Foo(A aa): a(aa) {}\n    Foo(B bb): b(bb) {}\n    A a;\n    B b;\n};\n\ntemplate&lt;typename A, class B&gt;\nFoo&lt;A,B&gt; make_foo(A a) {\n    return Foo&lt;A,B&gt;(a);\n}\n\nstruct W {\n    template&lt;typename A, typename B&gt;\n    operator Foo&lt;A, B&gt;() {\n        return make_foo&lt;A, B&gt;(10);\n    }\n};\n\nauto make_my_foo_object() {\n    return W{};\n}\n\nint main() {\n    Foo&lt;int, bool&gt; foo1 = make_my_foo_object();\n    Foo&lt;int, char&gt; foo2 = make_my_foo_object();\n}\n</code></pre>\n\n<p>Template parameters are deduced by the operator present in <code>W</code>:</p>\n\n<pre><code>template&lt;typename A, typename B&gt;\noperator Foo&lt;A, B&gt;() {\n    return make_foo&lt;A, B&gt;(10);\n}\n</code></pre>\n\n<p>For you tagged it as C++14, <code>auto</code> return type is allowed and it does the rest.<br>\nAs requested (if I got correctly your request) <code>make_my_foo_object</code> no longer has template parameters, that is it's not a function template.</p>\n"}], "owner": {"reputation": 11, "user_id": 7606113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192aa9ce40d63ce345d769cbfdfbe1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7606113/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1487974143, "creation_date": 1487782208, "question_id": 42397553, "link": "https://stackoverflow.com/questions/42397553/deduce-non-present-template-parameter-from-return-function", "title": "Deduce non present template parameter from return function", "body": "<p>hope you guys can help with this:\nI have the following function that should return an object Foo, in this case with a specific types:</p>\n\n<pre><code>Foo&lt;int,bool&gt; make_my_foo_object() {\n  return make_foo(10);\n}\n</code></pre>\n\n<p>in my Foo class I have:</p>\n\n<pre><code>template &lt;class A, class B&gt;\n  struct Foo {\n    Foo(A aa): a(aa) {}\n    Foo(B bb): b(bb) {}\n    A a;\n    B b;\n  };\n</code></pre>\n\n<p>Then, in my make_foo function I have:</p>\n\n<pre><code>template&lt;typename A, class B&gt;\n    Foo&lt;A,B&gt; make_foo(A a) {\n        return Foo&lt;A,B&gt;(a); // this should call the Foo(A) ctor\n    };\n</code></pre>\n\n<p>I know this is not possible as there is no way in this simple implementation that <code>B</code> can be infer from the return type of make_foo.</p>\n\n<p>The <code>make_my_foo_object</code> make not much sense in this context, but the whole idea is dealing with template params that cannot be deduced as they are missed.</p>\n\n<p>What I'm trying to avoid is to specify the types in the  <em>return make_foo<code>&lt;int, bool&gt;</code>(10);</em> in the <code>make_my_foo_object</code> function.</p>\n\n<p>Do you guys think there is a possible workaround to this? or it's a no-go!</p>\n\n<p>Any help or information will be appreciated.\nThanks.</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1487782185, "post_id": 42397494, "comment_id": 71942088, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1487783712, "post_id": 42397494, "comment_id": 71943158, "body": "It&#39;s not clear what you really want as output and really you are just saying &quot;My code doesn&#39;t work&quot;, but one thought - if you are looking for substrings, say <code>&quot;nana&quot;</code> in another string just go to the length of the other string minus the length of &quot;<code>nana&quot;</code> <code>for (i = 0; i&lt;s1.length() - s2.length(); i++)</code> - there&#39;s no point in running beyond a possible match length, which will give you &quot;nana in the end&quot; for your example"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7466509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a3da155f806572504088a5586cfebd?s=128&d=identicon&r=PG&f=1", "display_name": "Douglas Chan", "link": "https://stackoverflow.com/users/7466509/douglas-chan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487791561, "last_edit_date": 1487791561, "creation_date": 1487791176, "answer_id": 42400411, "question_id": 42397494, "link": "https://stackoverflow.com/questions/42397494/im-trying-to-find-the-pattern-in-the-text-what-going-wrong/42400411#42400411", "title": "I&#39;m trying to find the pattern in the text,what going wrong?", "body": "<p>It looks like you reset count even after finding the pattern, because you do nothing to break out of the outer for loop and it continues. It compares nana in the first string with nana in the second, finds the match, falls out of the inner for loop, but then goes back into the outer for loop. Later it will get to the last n in s1, trigger the if statement again, and try to match \"nas\" with \"nana\". When the s doesn't match the n, it resets count to \"\".</p>\n\n<p>Anyway, if you add an if statement checking if k is the length of s2, then you can return immediately once you find the pattern.</p>\n\n<p>Anyway, that's what it looks like from looking at your code. I do recommend going through it with a debugger that lets you step through your code, so you can see what's going on as it happens.</p>\n"}], "owner": {"reputation": 23, "user_id": 6335624, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b347ca603a76ae31f4c9e6c2e9c5b87e?s=128&d=identicon&r=PG&f=1", "display_name": "nimitt chauhan", "link": "https://stackoverflow.com/users/6335624/nimitt-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487807395, "creation_date": 1487782069, "last_edit_date": 1487807395, "question_id": 42397494, "link": "https://stackoverflow.com/questions/42397494/im-trying-to-find-the-pattern-in-the-text-what-going-wrong", "title": "I&#39;m trying to find the pattern in the text,what going wrong?", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    string s1=\"panamabananas\";\n    string s2=\"nana\";\n    int i,j,k=0;\n    string count=\"\";\n    for(i=0;i&lt;s1.length();i++)\n    {\n        k=0;\n\n        if(s2[k]==s1[i]);\n        {                           \n            count+=s2[k];\n\n            for(j=i+1;j&lt;i+s2.length();j++)\n            {       \n                    k++;\n                    if(s2[k]==s1[j])\n                    {\n                        count+=s2[k];\n                        cout&lt;&lt;\"it is: \"&lt;&lt;count&lt;&lt;endl;\n                    }\n                    else\n                    {\n                        count=\"\";\n                        break;\n                    }                   \n            }\n        }\n    }\n    cout&lt;&lt;\"the matched string is \"&lt;&lt;count;\n    return 0;\n}\n</code></pre>\n\n<p>The pattern s2 is searched if it exists in text s1. And a counter is managed to write the content of pattern match. The counter must be equal to <code>nana</code> in the end i.e it indicates the <code>nana</code> exist in the text <code>panamabananas</code>.\nI don't understand what's going wrong here.</p>\n"}, {"tags": ["c++", "makefile", "configure"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9321566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8ogN.jpg?s=128&g=1", "display_name": "Asher Atom", "link": "https://stackoverflow.com/users/9321566/asher-atom"}, "is_accepted": false, "score": 1, "last_activity_date": 1517915814, "creation_date": 1517915814, "answer_id": 48641753, "question_id": 42397481, "link": "https://stackoverflow.com/questions/42397481/issues-with-setup-of-coin-clp/48641753#48641753", "title": "Issues with setup of Coin-CLP", "body": "<p>I've recently stumbled against this same issue trying to enable Fast-Downward planner to work with LP capabilities. I know this is an old question, but it is one of the few pages that show up when searching for this error, so I thought I may as well give my solution for it.</p>\n\n<p>After digging through the config.log file inside the Osi folder, I found that there were undefined references to the functions from the DL (Dynamically Loaded) library, such as <code>dlopen</code>. So I added <code>-ldl</code> to the <code>--with-cplex-lib</code> configure argument. My configure call was like this at the end:</p>\n\n<pre><code>./configure CC=\"gcc\"  CFLAGS=\"-m64 -pthread -Wno-long-long\" CXX=\"g++\" \\\n  CXXFLAGS=\"-m64 -pthread -Wno-long-long\" LDFLAGS=\"-L$DOWNWARD_CPLEX_ROOT64/lib/x86-64_linux/static_pic/\"\\\n  --without-lapack --enable-static=yes --prefix=\"/usr/local/\" --disable-zlib --disable-bzlib\\\n  --with-cplex-incdir=$DOWNWARD_CPLEX_ROOT64/include/ilcplex --with-cplex-lib=\"-lcplex -lm -ldl\" \n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 73, "user_id": 3111197, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8ba2faaa99f4c1bc345992a6100bec03?s=128&d=identicon&r=PG&f=1", "display_name": "user3111197", "link": "https://stackoverflow.com/users/3111197/user3111197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517915814, "creation_date": 1487782025, "question_id": 42397481, "link": "https://stackoverflow.com/questions/42397481/issues-with-setup-of-coin-clp", "title": "Issues with setup of Coin-CLP", "body": "<p>I am trying to setup <a href=\"https://projects.coin-or.org/Clp\" rel=\"nofollow noreferrer\">Coin-CLP</a> that supports also CPLEX (which I have installed and is running smoothly on my machine) following the instructions found on the website.</p>\n\n<p>Unfortunately when I try to run the configure step on the installation, that in my version where I want to include CPLEX as well looks like this:</p>\n\n<pre><code>./configure --with-cplex \\\n--with-cplex-lib=\"-L/opt/ibm/ILOG/CPLEX_Studio127/cplex/lib/x86-64_linux/static_pic -lilocplex -lconcert -lcplex -lm -lpthread\" \\\n--with-cplex-incdir=\"/opt/ibm/ILOG/CPLEX_Studio127/cplex/include/ilcplex\" \\\n--enable-static -C\n</code></pre>\n\n<p>I receive the following error:</p>\n\n<pre><code>checking whether symbol CPXgetstat is available with CPX... no\nconfigure: error: Cannot find symbol(s) CPXgetstat with CPX\nconfigure: error: /bin/bash './configure' failed for Osi\n</code></pre>\n\n<p>I have tried to search online and find similar issues and proposed solutions, but unfortunately so far I haven't managed to find any way to fix this.\nSo, any help would be really appreciated!</p>\n"}, {"tags": ["c++", "stl", "stl-algorithm"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1487782397, "post_id": 42397374, "comment_id": 71942236, "body": "Looks like XY problem. Store data in proper format (struct with double fields) and not only your problem would be gone, but your code would become more readable and less error prone"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487782738, "post_id": 42397374, "comment_id": 71942482, "body": "this might help: <a href=\"http://stackoverflow.com/questions/5685983/skipping-iterator\">stackoverflow.com/questions/5685983/skipping-iterator</a>"}, {"owner": {"reputation": 15, "user_id": 3469604, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ae745b83d5ced7aef07cf90f198c09a?s=128&d=identicon&r=PG&f=1", "display_name": "user3469604", "link": "https://stackoverflow.com/users/3469604/user3469604"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487784976, "post_id": 42397374, "comment_id": 71944005, "body": "@Slava, I can&#39;t change the way data is stored."}, {"owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "edited": false, "score": 0, "creation_date": 1487785660, "post_id": 42397374, "comment_id": 71944458, "body": "It&#39;s common (for example when interfacing with fortran) to encounter data in row major format.  It&#39;d be pretty inefficient to change representation just to iterate over it.  The great thing about C++ is you can define types that work in expected ways on any data format."}, {"owner": {"reputation": 15, "user_id": 3469604, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ae745b83d5ced7aef07cf90f198c09a?s=128&d=identicon&r=PG&f=1", "display_name": "user3469604", "link": "https://stackoverflow.com/users/3469604/user3469604"}, "reply_to_user": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "edited": false, "score": 0, "creation_date": 1487786055, "post_id": 42397374, "comment_id": 71944728, "body": "@ArtYerkes, exactly my situation, my dataArray comes from a FORTRAN subroutine and I cannot change the underline data structure. Same data is accessed in FORTRAN as well as C++ routines."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1487787864, "post_id": 42397374, "comment_id": 71945867, "body": "&quot;You can write FORTRAN in any language&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3469604, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ae745b83d5ced7aef07cf90f198c09a?s=128&d=identicon&r=PG&f=1", "display_name": "user3469604", "link": "https://stackoverflow.com/users/3469604/user3469604"}, "edited": false, "score": 0, "creation_date": 1487785119, "post_id": 42398124, "comment_id": 71944101, "body": "Thank you. This will do my job!"}], "tags": [], "owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "is_accepted": true, "score": 0, "last_activity_date": 1487783734, "creation_date": 1487783734, "answer_id": 42398124, "question_id": 42397374, "link": "https://stackoverflow.com/questions/42397374/how-to-use-stdlower-bound-with-a-custom-iterator/42398124#42398124", "title": "How to use std::lower_bound with a custom iterator?", "body": "<p>You can write an iterator to do what you want pretty easily.  I'm not aware of a drop-in that does just this.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt; struct SkipIt : public std::iterator&lt;std::forward_iterator_tag, T&gt; {\n    SkipIt(T *t, unsigned skip) : elt(t), skip(skip) {}\n    bool operator == (const SkipIt&lt;T&gt; &amp;other) const { return elt == other.elt; }\n    bool operator != (const SkipIt&lt;T&gt; &amp;other) const { return elt != other.elt; }\n     T *operator -&gt; () const { return elt; }\n    T &amp;operator * () const { return *elt; }\n    SkipIt &amp;operator ++ () { elt += skip; return *this; }\n    SkipIt operator ++ (int) { auto ret = *this; ++*this; return ret; }\n    SkipIt operator + (int amt) const { auto ret = SkipIt(elt + amt * skip, skip); return ret; }\n\nprivate:\n    unsigned skip;\n    T *elt;\n};\n\nint main() {\n    double test[] =\n        { 0.1, 0.2, 0.3\n        , 1.1, 1.2, 1.3\n        , 2.1, 2.2, 2.3\n        , 3.1, 3.2, 3.3\n        };\n    auto begin = SkipIt&lt;double&gt;(test, 3);\n    auto end = begin + 4;\n    auto res = std::lower_bound(begin, end, 2.0);\n    if (res == end) {\n        std::cout &lt;&lt; \"Lower bound not found\\n\";\n    } else {\n        std::cout &lt;&lt; \"Lower bound of 2.0: \" &lt;&lt; *res &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3469604, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ae745b83d5ced7aef07cf90f198c09a?s=128&d=identicon&r=PG&f=1", "display_name": "user3469604", "link": "https://stackoverflow.com/users/3469604/user3469604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 42398124, "answer_count": 1, "score": -1, "last_activity_date": 1487783734, "creation_date": 1487781745, "question_id": 42397374, "link": "https://stackoverflow.com/questions/42397374/how-to-use-stdlower-bound-with-a-custom-iterator", "title": "How to use std::lower_bound with a custom iterator?", "body": "<p>I have a \u201ctwo dimensional\u201d data stored in a double array in a row major way.\nMy data has 5 columns, time, x, y, z, and field. </p>\n\n<ol>\n<li>T1, x1, y1, z1, F1 </li>\n<li>T2, x2, y2, z2, F2 </li>\n<li>T3, x3, y3, z3, F3 \n\u2026 </li>\n</ol>\n\n<p>This data is stored in a double 1D array in row major way. Like </p>\n\n<pre><code>double dataArray[] = { T1, x1, y1,z1,F1, T2,x2,y2,z2,F2, T3,x3,y3,z3,F3, ... };\n</code></pre>\n\n<p>Now I want to find the first row of the data for which time is equal to or greater than a given value T0. How can I use std::lower_bound to do this? </p>\n\n<p>I guess that I need a ForwardIterator which returns every 5th element in that array but don't how to do that. Any help is appreciated. </p>\n"}, {"tags": ["c++", "pointer-to-member"], "comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1487782984, "post_id": 42397341, "comment_id": 71942667, "body": "that&#39;s funny that I just wrote exactly same code in wandbox, down to identificatiors. Tuple_cat&#39;s answer explains this. Basicly you have  to link object and callable, so one indirection operator is not enough. Some compilers give more  understandable  error messages, like they tell you that you can call only a static member this way - a hint that you didn&#39;t had  a this pointer for them"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1487783423, "post_id": 42397341, "comment_id": 71942967, "body": "Regarding your edit, I just think the look of operator <code>-&gt;*</code> is throwing you off. Consider it was just a regular function named <code>call_with_this</code>, that took a pointer to an object and a member function. Then your original not-working call was <code>call_with_this(t, function);</code>. Here it just so happens the name <code>function</code> is a non-static member of the <code>Test</code> class, but it has nothing to do with <code>t</code>. And because you&#39;re in a static function, there is no <code>this</code> to look in to resolve the name <code>function</code>. Once you ask for <code>t-&gt;function</code>, you have an actual value with an accessible name."}, {"owner": {"reputation": 233, "user_id": 4170785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab203f2107c1e013ad1ba64c58c557c?s=128&d=identicon&r=PG&f=1", "display_name": "Kerry", "link": "https://stackoverflow.com/users/4170785/kerry"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1487785659, "post_id": 42397341, "comment_id": 71944453, "body": "@GManNickG That&#39;s exactly it.  Now that I see the solution, I get it, but I didn&#39;t realize what the <code>-&gt;*</code> operator was actually doing (I was reading it as <code>(t-&gt;(*function))</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1487782838, "post_id": 42397458, "comment_id": 71942554, "body": "That is the same reason why he is forced to write  <code>(this-&gt;*function)()</code> in non-static member, the innermost indirection operator &quot;gets&quot; value of pointer, while outmost allows call in reference to the object"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 11, "last_activity_date": 1487781956, "creation_date": 1487781956, "answer_id": 42397458, "question_id": 42397341, "link": "https://stackoverflow.com/questions/42397341/cannot-call-pointer-to-member-function-from-static-method/42397458#42397458", "title": "Cannot call pointer to member function from static method", "body": "<pre><code>main.cpp:17:14: error: invalid use of member 'function' in static member function\n        (t-&gt;*function)();// error C2568: '-&gt;*': unable to resolve function overload\n             ^~~~~~~~\n</code></pre>\n\n<p><code>function</code> is a non-static data member, so you cannot access it from a static function.</p>\n\n<p>If you want to refer to <code>t</code>'s <code>function</code>, you can do it like so:</p>\n\n<pre><code>        (t-&gt;*(t-&gt;function))();\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 4170785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab203f2107c1e013ad1ba64c58c557c?s=128&d=identicon&r=PG&f=1", "display_name": "Kerry", "link": "https://stackoverflow.com/users/4170785/kerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 1, "accepted_answer_id": 42397458, "answer_count": 1, "score": 9, "last_activity_date": 1487782456, "creation_date": 1487781669, "last_edit_date": 1487782456, "question_id": 42397341, "link": "https://stackoverflow.com/questions/42397341/cannot-call-pointer-to-member-function-from-static-method", "title": "Cannot call pointer to member function from static method", "body": "<p>I am having difficulty calling a pointer to a member function on an object that was cast from <code>void*</code>.  See below example:</p>\n\n<pre><code>class Test\n{\npublic:\n    Test(int pointTo)\n    {\n        if (pointTo == 1)\n            function = &amp;Test::Function1;\n        else\n            function = &amp;Test::Function2;\n    }\n\n    static void CallIt(void* cStyle)\n    {\n        Test* t(static_cast&lt;Test*&gt;(cStyle));\n        (t-&gt;*function)();// error C2568: '-&gt;*': unable to resolve function overload\n    }\n\n    void CallIt()\n    {\n        (this-&gt;*function)();// Works just fine\n    }\n\nprivate:\n    typedef void (Test::*ptrToMemberFunc)();\n\n    ptrToMemberFunc function;\n\n    void Function1()\n    {\n        std::cout &lt;&lt; \"Function 1\" &lt;&lt; std::endl;\n    }\n\n    void Function2()\n    {\n        std::cout &lt;&lt; \"Function 2\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Test t1(1);\n    Test t2(2);\n\n    Test::CallIt(static_cast&lt;void*&gt;(&amp;t1));\n    Test::CallIt(static_cast&lt;void*&gt;(&amp;t2));\n\n    t1.CallIt();\n    t2.CallIt();\n\n    return 0;\n}\n</code></pre>\n\n<p>What happens when the object is cast to <code>void*</code> and back?  Why can I no longer call the pointer to member function?</p>\n\n<p>EDIT:</p>\n\n<p>Modifying <code>CallIt()</code> as follows allows the program to compile, but I'm still curious as to why the original didn't work.</p>\n\n<pre><code>static void CallIt(void* cStyle)\n{\n    Test* t(static_cast&lt;Test*&gt;(cStyle));\n    Test::ptrToMemberFunc pf(t-&gt;function);\n    (t-&gt;*pf)();\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "mode"], "comments": [{"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1487781100, "post_id": 42397046, "comment_id": 71941358, "body": "<code>std::sort(array.begin(),array.end());</code> them first, then iterate."}, {"owner": {"reputation": 790, "user_id": 1083027, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EALwO.png?s=128&g=1", "display_name": "Rahul Kadukar", "link": "https://stackoverflow.com/users/1083027/rahul-kadukar"}, "edited": false, "score": 0, "creation_date": 1487781392, "post_id": 42397046, "comment_id": 71941570, "body": "How about using a map with the key as the integer and value as its occurence. Every time you see the same key again, increment the value.   Though I am not sure how you would determine the max from that unless you iterate over the whole thing.  EDIT: This question here shows the same thing <a href=\"http://stackoverflow.com/a/9370990/1083027\">stackoverflow.com/a/9370990/1083027</a> just keep a running count of max"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1487781743, "post_id": 42397046, "comment_id": 71941781, "body": "Wait, why would you want this? Why not just keep a list of the values that are equal to the highest number in the list, and wipe it if you find one higher then the max?"}], "answers": [{"tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": false, "score": 0, "last_activity_date": 1487781891, "creation_date": 1487781891, "answer_id": 42397435, "question_id": 42397046, "link": "https://stackoverflow.com/questions/42397046/using-double-arrays-to-find-the-mode/42397435#42397435", "title": "Using double arrays to find the mode?", "body": "<p>If you don't mind some extra storage (potentially <code>O(N)</code> storage) you could use a <code>std::map</code> to get the counts and then a linear search for the most frequent number.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;class InputIterator&gt;\nauto mode(InputIterator first, InputIterator last)\n{\n    using key_type = typename std::iterator_traits&lt;InputIterator&gt;::value_type;\n    std::map&lt;key_type, std::size_t&gt; counts;\n    for (auto it = first; it != last; ++it) {\n        counts[*it]++;    \n    }    \n    return *std::max_element(counts.cbegin(), counts.cend(), [](auto const&amp; lhs, auto const&amp; rhs) {\n        return lhs.second &lt; rhs.second;\n    }); // return mode + frequency\n}\n\nint main() {   \n    auto v = std::vector&lt;int&gt; { 0, 0, 1, 5, 5, 5, 7, 7, 7 };   \n    auto m = mode(v.cbegin(), v.cend());\n    std::cout &lt;&lt; m.first &lt;&lt; \": \" &lt;&lt; m.second;\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/uMZlYav25TT5HvLO\" rel=\"nofollow noreferrer\"><strong>Live Example</strong></a> // prints 5: 3</p>\n"}], "owner": {"reputation": 37, "user_id": 6650578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153869246743412/picture?type=large", "display_name": "Amos Wu", "link": "https://stackoverflow.com/users/6650578/amos-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487790522, "creation_date": 1487780816, "last_edit_date": 1487790522, "question_id": 42397046, "link": "https://stackoverflow.com/questions/42397046/using-double-arrays-to-find-the-mode", "title": "Using double arrays to find the mode?", "body": "<p>I'm stuck on how to write a function that finds the mode or modes of a set of integers contained in an array, using that array and its length as parameters. I've found multiple solutions online on how to find the mode of an array, but I'm trying solve this problem in the following way: </p>\n\n<p>Let's say the original array contains (0, 0, 1, 5, 5, 5, 7, 7, 7). I want to iterate through the array with a loop that finds the highest frequency of any amount without storing the mode, and store these frequencies in another array, where in this case, the new array would have the values (1, 2, 1, 1, 2, 3, 1, 2, 3). By finding the max value in the second array, I would find the highest frequency, being 3 in this case. Then I want to iterate through the original array again, comparing the highest frequency with the counts of each of the values in that array, and where there is a match, I return that value, which is 5 and 7 in this example I'm giving. Given the criteria here, how would you write this function for finding the mode or modes of a given array? (You can assume the array has already been presorted in ascending order). </p>\n\n<p><strong>Edit:</strong> Here's my preliminary code. I'm up to the step where I find the frequencies of each integer in the original array and store them into another array.</p>\n\n<pre><code>    void findMode(int array, int size){ \n        int count = 1;\n        int freq[size];\n        freq[0] = count;\n        for (int pass = 1; pass &lt; size; pass++){\n            if (array[pass] == array[pass-1]){\n            count++;\n            freq[pass] = count;\n            } \n          else{\n              count = 1;\n              freq[pass] = count;\n              }\n      }   \n</code></pre>\n"}, {"tags": ["c++", "qt", "jpeg", "qt-creator", "exif"], "comments": [{"owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "edited": false, "score": 0, "creation_date": 1487781537, "post_id": 42396954, "comment_id": 71941658, "body": "Add <code>QT += multimedia</code> to your .pro file and try compiling again."}, {"owner": {"reputation": 11, "user_id": 7606041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd38ae4b8d24703efceb64bf9b392602?s=128&d=identicon&r=PG&f=1", "display_name": "Jans Raberta", "link": "https://stackoverflow.com/users/7606041/jans-raberta"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487838229, "post_id": 42396954, "comment_id": 71966982, "body": "thanks, changed @TobySpeight"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1494399177, "post_id": 42396954, "comment_id": 74805074, "body": "I&#39;m not sure if this was solved using Qt? If so, please post the solution. In the meantime I can comment that I have used the lightweight <a href=\"https://github.com/mayanklahiri/easyexif\" rel=\"nofollow noreferrer\">easyexif</a> library for this. But I&#39;m really looking for Qt native solution too, in particular one that can also overwrite the date-time infromation the Exif data of an existing photo."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7606041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd38ae4b8d24703efceb64bf9b392602?s=128&d=identicon&r=PG&f=1", "display_name": "Jans Raberta", "link": "https://stackoverflow.com/users/7606041/jans-raberta"}, "edited": false, "score": 0, "creation_date": 1487846398, "post_id": 42411030, "comment_id": 71972342, "body": "Thanks. So i have to create a mediaObject? I already have the path as a string."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 11, "user_id": 7606041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd38ae4b8d24703efceb64bf9b392602?s=128&d=identicon&r=PG&f=1", "display_name": "Jans Raberta", "link": "https://stackoverflow.com/users/7606041/jans-raberta"}, "edited": false, "score": 0, "creation_date": 1487846796, "post_id": 42411030, "comment_id": 71972601, "body": "I don&#39;t know how to get a suitable <code>QMediaObject</code> from a filename or contents - I tried to find it hidden in there, but the Qt Multimedia seems more oriented towards building capture devices than for graphics editors.  :("}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1487840140, "creation_date": 1487840140, "answer_id": 42411030, "question_id": 42396954, "link": "https://stackoverflow.com/questions/42396954/qt-get-jpeg-exif-metadata-for-datetime/42411030#42411030", "title": "QT get jpeg exif metadata for DateTime", "body": "<p>The documentation shows that <code>QMediaMetaData::DateTimeOriginal</code> isn't a method; it's a string constant that can be used with the <code>QMediaObject::metaData()</code> method.  So you want something more like</p>\n\n<pre><code>QDateTime t = mediaObject-&gt;metaData(QMediaMetaData::DateTimeOriginal).toDateTime();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7606041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd38ae4b8d24703efceb64bf9b392602?s=128&d=identicon&r=PG&f=1", "display_name": "Jans Raberta", "link": "https://stackoverflow.com/users/7606041/jans-raberta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1729, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1487847048, "creation_date": 1487780569, "last_edit_date": 1487847048, "question_id": 42396954, "link": "https://stackoverflow.com/questions/42396954/qt-get-jpeg-exif-metadata-for-datetime", "title": "QT get jpeg exif metadata for DateTime", "body": "<p>I want to get the EXIF metadata of my JPEG images (only DateTime).\nI want to use the standard Qt functions if possible. I use Qt Creator on Windows.</p>\n\n<p>I tried to use <code>QMediaMetaData::DateTimeOriginal()</code> but I don't know how to use it. So I can't compile it. I didn't find any examples for images.</p>\n\n<p>My attempt:</p>\n\n<pre><code>QString info;\ninfo = QMediaMetaData::DateTimeOriginal(PathtoImageFile);\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>...mainwindow.cpp:80: Fehler: no match for call to '(const QString) (QString&amp;)'\n             info = QMediaMetaData::DateTimeOriginal(PathtoImageFile);\n                                                              ^\n</code></pre>\n\n<p>What am I doing wrong, and what's the correct way to obtain this metadata?</p>\n\n<p>Note: I have ensured that the multimedia library is included/linked:</p>\n\n<pre class=\"lang-make prettyprint-override\"><code>QT += multimedia\n</code></pre>\n"}, {"tags": ["c++", "type-conversion"], "comments": [{"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 1, "creation_date": 1487780461, "post_id": 42396865, "comment_id": 71940902, "body": "This is because you use ints to make an operation which results in a return value which is also an int that might overflow and then you have the promotion which is already too late."}, {"owner": {"reputation": 271, "user_id": 2603739, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/e28cc9c637f2a8208893c8997db15a4f?s=128&d=identicon&r=PG", "display_name": "Bharg", "link": "https://stackoverflow.com/users/2603739/bharg"}, "reply_to_user": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 0, "creation_date": 1487780483, "post_id": 42396865, "comment_id": 71940915, "body": "I tried the same with C where I used the &quot;%lld&quot; placeholder in printf for printing. Even then, it is showing me negative value."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "edited": false, "score": 2, "creation_date": 1487780731, "post_id": 42396865, "comment_id": 71941075, "body": "possibly a duplicate <a href=\"http://stackoverflow.com/questions/31662792/multiplication-of-two-integers-in-c\" title=\"multiplication of two integers in c\">stackoverflow.com/questions/31662792/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 0, "creation_date": 1487780491, "post_id": 42396912, "comment_id": 71940921, "body": "Overflows give undefined behaviour?"}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 3, "creation_date": 1487780514, "post_id": 42396912, "comment_id": 71940938, "body": "@Adrian Lis for signed integers, yes"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1487780531, "post_id": 42396912, "comment_id": 71940951, "body": "It is defined for <code>unsigned int</code>, but not for signed."}, {"owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "reply_to_user": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "edited": false, "score": 0, "creation_date": 1487780544, "post_id": 42396912, "comment_id": 71940959, "body": "@Ap31 that is much more specific ;)"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "reply_to_user": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "edited": false, "score": 0, "creation_date": 1487780775, "post_id": 42396912, "comment_id": 71941112, "body": "@AdrianLis Note I said <code>int</code>, not &quot;integer types`. I was as specific as I possibly could have been!"}], "tags": [], "owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "is_accepted": false, "score": 5, "last_activity_date": 1487780889, "last_edit_date": 1487780889, "creation_date": 1487780450, "answer_id": 42396912, "question_id": 42396865, "link": "https://stackoverflow.com/questions/42396865/why-does-implicit-conversion-of-int-to-long-long-int-give-unexpected-answer-in-c/42396912#42396912", "title": "Why does implicit conversion of int to long long int give unexpected answer in C++?", "body": "<p>The multiplication is happening as an <code>int</code>, which overflows, giving <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>Undefined Behaviour</em></a> (in this case overflow, which is very normal - your combination of compiler+settings may even guarantee it), and <em>after that</em> the result is being converted to <code>long long</code>.</p>\n\n<p>I think you want to do the conversion on one of the arguments <em>before</em> multiplication, so that the multiplication is performed using <code>long long</code>s:</p>\n\n<pre><code>long long c = static_cast&lt;long long&gt;(a)*b;\n</code></pre>\n\n<p>In this way, <code>b</code> will be promoted to <code>long long</code> before the multiplication takes place, and the whole operation will be performed safely, and with the desired result.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 8, "last_activity_date": 1599915903, "last_edit_date": 1599915903, "creation_date": 1487780457, "answer_id": 42396917, "question_id": 42396865, "link": "https://stackoverflow.com/questions/42396865/why-does-implicit-conversion-of-int-to-long-long-int-give-unexpected-answer-in-c/42396917#42396917", "title": "Why does implicit conversion of int to long long int give unexpected answer in C++?", "body": "<p><code>a*b</code> is still of type <code>int</code>. Once it's evaluated, the result is <em>then</em> converted to <code>long long int</code>. At that point it's too late to avoid overflow. Convert one of your values to <code>long long int</code> before preforming the multiplication. Try this :</p>\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int a = 1000000, b = 1000000;\n    long long int c = static_cast&lt;long long int&gt;(a)*b;\n    std::cout &lt;&lt; c;\n    return 0;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1487780504, "creation_date": 1487780504, "answer_id": 42396934, "question_id": 42396865, "link": "https://stackoverflow.com/questions/42396865/why-does-implicit-conversion-of-int-to-long-long-int-give-unexpected-answer-in-c/42396934#42396934", "title": "Why does implicit conversion of int to long long int give unexpected answer in C++?", "body": "<p>Because multiplying two <code>int</code>s will result in another <code>int</code> that comes with all the overflow problems attached. This <code>int</code> is then (after the fact) promoted to a <code>long long int</code> which still means it's not what you want.</p>\n\n<p>Promote at least one of the operands to have the other promoted and get the result you want.</p>\n"}], "owner": {"reputation": 271, "user_id": 2603739, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/e28cc9c637f2a8208893c8997db15a4f?s=128&d=identicon&r=PG", "display_name": "Bharg", "link": "https://stackoverflow.com/users/2603739/bharg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 42396917, "answer_count": 3, "score": 3, "last_activity_date": 1599915903, "creation_date": 1487780331, "last_edit_date": 1487781024, "question_id": 42396865, "link": "https://stackoverflow.com/questions/42396865/why-does-implicit-conversion-of-int-to-long-long-int-give-unexpected-answer-in-c", "title": "Why does implicit conversion of int to long long int give unexpected answer in C++?", "body": "<p>I read that conversion from <code>int</code> to <code>long long int</code> is promotion and hence thought that there shouldn't be any issue as there is no loss of data, unlike the vice versa conversion.</p>\n\n<p>But when I multiply two <code>int</code>s of large value and store it in <code>long long int</code>, it is showing me negative number.</p>\n\n<p>Eg: </p>\n\n<pre><code>int a=1000000, b=1000000;\nlong long int c=a*b;\ncout&lt;&lt;c;\n</code></pre>\n\n<p>The above code gives me a negative value. Can someone explain why?</p>\n"}, {"tags": ["c++", "opencv", "projection", "perspective", "homography"], "answers": [{"tags": [], "owner": {"reputation": 4021, "user_id": 1279459, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/6d94da0b2f5f78c36e5d66c184c5982e?s=128&d=identicon&r=PG", "display_name": "cerebrou", "link": "https://stackoverflow.com/users/1279459/cerebrou"}, "is_accepted": false, "score": 7, "last_activity_date": 1529569043, "creation_date": 1529569043, "answer_id": 50963647, "question_id": 42396860, "link": "https://stackoverflow.com/questions/42396860/inverse-homography/50963647#50963647", "title": "Inverse Homography", "body": "<p>To find the inverse homography, simply switch <code>points_dst</code> and <code>points_src</code>:</p>\n\n<pre><code>H_inv= findHomography(points_dst, points_src);\n</code></pre>\n\n<p>Then if you apply the <code>H_inv</code> to the points trandformed by <code>H</code>, you will obtain the original points.</p>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 1, "creation_date": 1562146102, "post_id": 52756540, "comment_id": 100282809, "body": "cv also have builtin function for matrix inverse: <code>cv::Mat::inv</code>."}], "tags": [], "owner": {"reputation": 14484, "user_id": 2291710, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0232aab5638a75f2286dccc43ecf4df3?s=128&d=identicon&r=PG&f=1", "display_name": "Delgan", "link": "https://stackoverflow.com/users/2291710/delgan"}, "is_accepted": false, "score": 13, "last_activity_date": 1539249689, "creation_date": 1539249689, "answer_id": 52756540, "question_id": 42396860, "link": "https://stackoverflow.com/questions/42396860/inverse-homography/52756540#52756540", "title": "Inverse Homography", "body": "<p>You could indeed use <code>findHomography()</code> once again, but thanks to the <a href=\"https://en.wikipedia.org/wiki/Transformation_matrix#Composing_and_inverting_transformations\" rel=\"noreferrer\">composition properties of such matrix</a>, a much more elegant, accurate and fast way to reverse the transformation is to simply <strong>inverse the homography matrix</strong>.</p>\n\n<p>Here is a little demonstration using Python:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import cv2\nimport numpy as np\n\nsource = np.float32([[0, 0], [100, 0], [100, 100], [0, 100]])\ndest = np.float32([[0, 0], [-1000, 0], [-1000, -1000], [0, -1000]])\n\npoints = np.float32([[[50, 50]]])\n\nhomography, _ = cv2.findHomography(source, dest)\n\ntransformed = cv2.perspectiveTransform(points, homography)\n\nprint(transformed)\n# =&gt; [[[-500. -500.]]]\n\nhomography_inverse = np.linalg.inv(homography)\n\ndetransformed = cv2.perspectiveTransform(transformed, homography_inverse)\n\nprint(detransformed)\n# =&gt; [[[50. 50.]]]\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 3112791, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000891747806/picture?type=large", "display_name": "Pavel Angel Mendoza Villafane", "link": "https://stackoverflow.com/users/3112791/pavel-angel-mendoza-villafane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5340, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1539249689, "creation_date": 1487780324, "question_id": 42396860, "link": "https://stackoverflow.com/questions/42396860/inverse-homography", "title": "Inverse Homography", "body": "<p>I get an H matrix using findHomography function. </p>\n\n<pre><code>H = findHomography(points_src, points_dst);\n</code></pre>\n\n<p>Then, I use H with warpPerspective to get a perspective projection of the image </p>\n\n<pre><code>warpPerspective(im_src, im_dst, H, Size(100, 100));\n</code></pre>\n\n<p>and from here I get a set of points of interest</p>\n\n<pre><code>vector&lt;Point2f&gt; points = some_function(im_dst)\n</code></pre>\n\n<p>Now I want to get back only the set of \"points\" to the original image and in this way I will now the set of points of interest in the original image.</p>\n\n<p>For this task, I guess that I need to use again warpPerspective with the flag WARP_INVERSE_MAP but this does not work.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1487780225, "post_id": 42396771, "comment_id": 71940728, "body": "Looks like a function pointer type... function that takes a pair of ints and returns a size_t."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487780353, "post_id": 42396771, "comment_id": 71940816, "body": "Also see <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487780396, "post_id": 42396771, "comment_id": 71940849, "body": "@NathanOliver while very useful, unfortunately doesn&#39;t understand C++ gibberish :( There is the command line tool, however: <a href=\"https://linux.die.net/man/1/c++decl\" rel=\"nofollow noreferrer\">linux.die.net/man/1/c++decl</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1487780476, "post_id": 42396771, "comment_id": 71940911, "body": "@user2079303 Yeah, Fortunately you can normally remove the C++iness out of it."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1487780216, "creation_date": 1487780216, "answer_id": 42396814, "question_id": 42396771, "link": "https://stackoverflow.com/questions/42396771/explain-what-size-tconst-stdpairint-int-means/42396814#42396814", "title": "Explain what size_t(*)(const std::pair&lt;int, int&gt;&amp;) means", "body": "<p>It's a pointer to a function that returns <code>size_t</code> and takes a <code>const std::pair&lt;int, int&gt;&amp;</code> as the parameter.</p>\n\n<p>Quite often you'd see a variable name in the <code>(*)</code> part, although not when instantiating a template. Is that what's causing the confusion?</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1487780256, "creation_date": 1487780256, "answer_id": 42396829, "question_id": 42396771, "link": "https://stackoverflow.com/questions/42396771/explain-what-size-tconst-stdpairint-int-means/42396829#42396829", "title": "Explain what size_t(*)(const std::pair&lt;int, int&gt;&amp;) means", "body": "<p>It is a function pointer to a function with <code>size_t</code> return type, and <code>const std::pair&lt;int, int&gt;&amp;</code> argument.</p>\n"}, {"comments": [{"owner": {"reputation": 5971, "user_id": 5537840, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/aKRoy.jpg?s=128&g=1", "display_name": "Kenenbek Arzymatov", "link": "https://stackoverflow.com/users/5537840/kenenbek-arzymatov"}, "edited": false, "score": 0, "creation_date": 1487783525, "post_id": 42396834, "comment_id": 71943026, "body": "why <code>size_t(*)</code> doesn&#39;t has a name like <code>size_t(*name)</code>?"}], "tags": [], "owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "is_accepted": true, "score": 2, "last_activity_date": 1487780281, "creation_date": 1487780281, "answer_id": 42396834, "question_id": 42396771, "link": "https://stackoverflow.com/questions/42396771/explain-what-size-tconst-stdpairint-int-means/42396834#42396834", "title": "Explain what size_t(*)(const std::pair&lt;int, int&gt;&amp;) means", "body": "<p>Read it from the inside out:</p>\n\n<pre><code>size_t(*)(const std::pair&lt;int, int&gt;&amp;)\n</code></pre>\n\n<p>the <code>*</code> indicates that the type is a pointer, then the parentheses indicate that this is a pointer to a function, the function takes a <code>const std::pair&lt;int, int&gt;&amp;</code> as an argument and returns a <code>size_t</code>.</p>\n"}], "owner": {"reputation": 5971, "user_id": 5537840, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/aKRoy.jpg?s=128&g=1", "display_name": "Kenenbek Arzymatov", "link": "https://stackoverflow.com/users/5537840/kenenbek-arzymatov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1487780280, "accepted_answer_id": 42396834, "answer_count": 3, "score": 0, "last_activity_date": 1487780281, "creation_date": 1487780130, "question_id": 42396771, "link": "https://stackoverflow.com/questions/42396771/explain-what-size-tconst-stdpairint-int-means", "closed_reason": "Duplicate", "title": "Explain what size_t(*)(const std::pair&lt;int, int&gt;&amp;) means", "body": "<p>I read some code and stumble upon such string</p>\n\n<pre><code>ConcurrentHashMap&lt;std::pair&lt;int, int&gt;, int, size_t(*)(const std::pair&lt;int, int&gt;&amp;)&gt; pair_table(pair_hash);\n</code></pre>\n\n<p>Could you help in explaining what <code>size_t(*)(const std::pair&lt;int, int&gt;&amp;)</code> construction means?</p>\n"}, {"tags": ["c++", "lambda", "static", "c++14", "auto"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 2, "creation_date": 1487779917, "post_id": 42396626, "comment_id": 71940514, "body": "A generic lambda&#39;s <code>operator (...)</code> is more or less a <i>function-template</i>. Hence the static variables will be created for every separate instantiation of the function."}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "edited": false, "score": 0, "creation_date": 1487841755, "post_id": 42396709, "comment_id": 71969162, "body": "Great! That makes perfect sense. I was also printing the address of variable <code>y</code> and indeed it was different with calls to lambda with different types, and it was the same address for calls with arguments of the same type. I knew about <code>static</code> variables and also about templates, but I didn&#39;t fully understand this behaviour. Now I do, thanks a lot!!"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 4, "last_activity_date": 1487783044, "last_edit_date": 1487783044, "creation_date": 1487779950, "answer_id": 42396709, "question_id": 42396626, "link": "https://stackoverflow.com/questions/42396626/static-auto-variable-in-generic-lambda-in-c14/42396709#42396709", "title": "Static Auto Variable in Generic Lambda in C++14", "body": "<p>Your lambda is <em>generic</em>. Which means that this is a template in disguise. The situation is handled in accordance with general rules for template specializations.</p>\n\n<p>For every specific deduced type of parameter <code>x</code> you get a separate specialization of your function. So, yes for each specific type of <code>x</code> you get a separate copy of <code>y</code>. But the underlying mechanism is not somehow localized at your <code>static</code>, it is the whole body of your function that gets \"copied\" to produce a separate independent implementation of the function.</p>\n\n<p>Each specialization of your lambda will have a separate copy of <code>y</code>, which will be initialized only once at the first call to that specific specialization.</p>\n\n<p>The situation is virtually equivalent to a more explicit</p>\n\n<pre><code>template &lt;typename T&gt; void foo(T x)\n{\n  static T y = x;\n  std::cout &lt;&lt; y &lt;&lt; std::endl;\n}\n\nint main()\n{\n  foo(1);\n  foo('a');\n  foo(1.5);\n  foo(3.0);\n}\n</code></pre>\n\n<p>which outputs <code>1</code>, <code>a</code>, <code>1.5</code> and <code>1.5</code>.</p>\n\n<p>In this example you get three independent specializations of <code>foo</code>: <code>foo&lt;int&gt;</code>, <code>foo&lt;char&gt;</code> and <code>foo&lt;double&gt;</code>. Each version of <code>foo</code> gets its own version of <code>y</code>, meaning that there are three different static <code>y</code>s in this example. The first call to each specialization will initialize <code>y</code> and the subsequent calls will not re-initialize it. In this case call to <code>foo(1.5)</code> initializes <code>y</code> for <code>foo&lt;double&gt;</code>, but the subsequent call to <code>foo(3.0)</code> does not.</p>\n\n<p>The same thing happens in your case as well, it just uses a different syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "is_accepted": false, "score": 2, "last_activity_date": 1487779963, "creation_date": 1487779963, "answer_id": 42396717, "question_id": 42396626, "link": "https://stackoverflow.com/questions/42396626/static-auto-variable-in-generic-lambda-in-c14/42396717#42396717", "title": "Static Auto Variable in Generic Lambda in C++14", "body": "<p>Lamda with auto is nothing more than a class with operator () overloaded to be a template and using auto for type deduction (which follows the rules for a template parameter deduction).</p>\n\n<p>In this case you have as many static y fields as many instantiations of this function object template operator.</p>\n\n<p>The initialization is done like in hand written class which is the first time the function is triggered (the lambda in this case) </p>\n"}], "owner": {"reputation": 391, "user_id": 6892577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871d574cf46242569247c7a4037df4bd?s=128&d=identicon&r=PG&f=1", "display_name": "J L", "link": "https://stackoverflow.com/users/6892577/j-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 42396709, "answer_count": 2, "score": 1, "last_activity_date": 1487783044, "creation_date": 1487779694, "last_edit_date": 1495541827, "question_id": 42396626, "link": "https://stackoverflow.com/questions/42396626/static-auto-variable-in-generic-lambda-in-c14", "title": "Static Auto Variable in Generic Lambda in C++14", "body": "<pre><code>class A {\n    public:\n        int a;\n        char b;\n        double c;\n        A ( int x, char y, double z ) : a(x), b(y), c(z){}\n};\n\nint main(){\n\n    auto lambda = []( auto x ) {\n        static auto y = x;\n        // y = x;\n        return y;\n    };\n\n    int    a = lambda(1);\n    char   b = lambda('a');\n    double c = lambda(1.5);\n    A      d = lambda( A( 2, 'b', 2.5 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>This code compiles in Clang 3.8.0 and GCC 5.4.0, and works fine. However, taking into account that variable <code>y</code> is <code>static</code>: </p>\n\n<ul>\n<li>What is the type of variable <code>y</code>? Does the type of <code>y</code> change in every call to the lambda?</li>\n<li>Is variable <code>y</code> initialized in every call in spite of being <code>static</code>? The commented assignment <code>// y = x</code> is not needed to update the value of variable <code>y</code>.</li>\n<li>Is this behaviour C++14 Standard compliant?  </li>\n</ul>\n\n<p>If I print the <code>sizeof(y)</code> in each call I get 4, 1, 8 and 16 respectively.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12186857/on-local-and-global-static-variables-in-c\">On local and global static variables in C++</a></p>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 5006, "user_id": 289099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kFqGO.jpg?s=128&g=1", "display_name": "pattivacek", "link": "https://stackoverflow.com/users/289099/pattivacek"}, "edited": false, "score": 0, "creation_date": 1487781034, "post_id": 42396517, "comment_id": 71941311, "body": "Please post your code and the error message instead of linking to an image."}, {"owner": {"reputation": 153, "user_id": 7577647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd3c7fc8f287e65c752ecf11d9179d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Fieuws", "link": "https://stackoverflow.com/users/7577647/stan-fieuws"}, "reply_to_user": {"reputation": 5006, "user_id": 289099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kFqGO.jpg?s=128&g=1", "display_name": "pattivacek", "link": "https://stackoverflow.com/users/289099/pattivacek"}, "edited": false, "score": 0, "creation_date": 1487787365, "post_id": 42396517, "comment_id": 71945528, "body": "I have no code, I only added one item and tried to run that"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7577647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd3c7fc8f287e65c752ecf11d9179d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Fieuws", "link": "https://stackoverflow.com/users/7577647/stan-fieuws"}, "edited": false, "score": 0, "creation_date": 1487795942, "post_id": 42398599, "comment_id": 71950491, "body": "Thanks, reinstalled it in my C and it works, silly me"}], "tags": [], "owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "is_accepted": true, "score": 1, "last_activity_date": 1487785174, "creation_date": 1487785174, "answer_id": 42398599, "question_id": 42396517, "link": "https://stackoverflow.com/questions/42396517/qt-error-when-executing-step-make/42398599#42398599", "title": "Qt, Error when executing step &quot;Make&quot;", "body": "<blockquote>\n  <p>'C:\\Program' is not recognized as an internal or external command</p>\n</blockquote>\n\n<p>tells you that it splits <code>C:\\Program Files (x86)\\Qt\\5.0\\mingw53_32\\bin\\qmake.exe</code> into several strings. Install your Qt into a folder without spaces in its name.</p>\n"}], "owner": {"reputation": 153, "user_id": 7577647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd3c7fc8f287e65c752ecf11d9179d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Fieuws", "link": "https://stackoverflow.com/users/7577647/stan-fieuws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 42398599, "answer_count": 1, "score": 0, "last_activity_date": 1487785174, "creation_date": 1487779422, "last_edit_date": 1487784700, "question_id": 42396517, "link": "https://stackoverflow.com/questions/42396517/qt-error-when-executing-step-make", "title": "Qt, Error when executing step &quot;Make&quot;", "body": "<p>I'm trying to get the hang of Qt for my C++ applications. I tried a quick test project, but when I tried to run it I got this error.</p>\n\n<p><img src=\"https://i.stack.imgur.com/rrrGK.png\" alt=\"screenshot of error\"></p>\n\n<p>I found a post on Stack Overflow about this error, but the solutions they gave didn't work for me. </p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487779467, "post_id": 42396381, "comment_id": 71940152, "body": "Why are you even using pointers?  You can do this all with automatic objects which require no cleanup from you."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487780497, "post_id": 42396381, "comment_id": 71940928, "body": "@LightnessRacesinOrbit This <i>is</i> C++ not C#, sigh.  olive: no need for <code>new</code> or pointers in the demonstrated code.  And avoid <code>using namespace std;</code>, <code>std</code> has too many symbols in it."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1487790353, "post_id": 42396381, "comment_id": 71947307, "body": "Consider using a thread <i>pool</i> instead of creating a new thread for each new connection.  I don&#39;t know enough C++ to know if there&#39;s a good thread pool implementation that you can just use, but it&#39;s a simple idea:  You have a blocking queue of <i>tasks</i> (In this case, each task is an object representing a client that&#39;s waiting to be served.), and you have some number of threads that loop forever trying to take tasks from the queue.  When a thread gets a task, it <i>performs</i> the task (i.e., it serves the client), and then instead of dying, it goes back to wait for the next task."}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487779835, "post_id": 42396523, "comment_id": 71940445, "body": "If I try to join the thread just before delete it the program throw an exception &quot;std::system_error&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487779940, "post_id": 42396523, "comment_id": 71940530, "body": "@olive007: Took a closer look at <code>action</code>. Looks like you&#39;re trying to delete the thread... from itself. Why? You&#39;re hitting the <code>resource_deadlock_would_occur</code> error condition. I think you should revisit your design!"}, {"owner": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487780134, "post_id": 42396523, "comment_id": 71940664, "body": "Year I am trying to do that. I delete the thread from itself because if I don&#39;t do it that a memory leak and my server use too memory."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487780172, "post_id": 42396523, "comment_id": 71940698, "body": "@olive007: Of course you don&#39;t want to leak memory, but you also shouldn&#39;t have memory cleaning itself. Your main thread should be managing its worker threads, including their cleanup."}, {"owner": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487784312, "post_id": 42396523, "comment_id": 71943559, "body": "I change my design. Now I cleanup the memory into the main tread. Here a example : <a href=\"https://gist.github.com/olive007/b4abead4c23a87bacb659aee1e4996b9\" rel=\"nofollow noreferrer\">gist.github.com/olive007/b4abead4c23a87bacb659aee1e4996b9</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "edited": false, "score": 0, "creation_date": 1487785283, "post_id": 42396523, "comment_id": 71944206, "body": "@olive007: Better! You still have unnecessary dynamic allocation, and you could do away with some of those mutexes (using atomics instead), but that&#39;s good"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1487780040, "last_edit_date": 1487780040, "creation_date": 1487779428, "answer_id": 42396523, "question_id": 42396381, "link": "https://stackoverflow.com/questions/42396381/c-thread-delete-itself-at-its-end/42396523#42396523", "title": "C++ thread delete itself at its end", "body": "<p><strong>Before you destroy a <code>std::thread</code>, you must \"join\" it with <code>t-&gt;join()</code>.</strong></p>\n\n<p>Refer to <a href=\"http://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow noreferrer\">this documentation</a>:</p>\n\n<blockquote>\n  <p>If <code>*this</code> has an associated thread (<code>joinable() == true</code>), <code>std::terminate()</code> is called.</p>\n</blockquote>\n\n<p>More fatally, though, you're trying to do all this from within the thread itself. You can't do that:</p>\n\n<blockquote>\n  <p><strong>Exceptions</strong><br>\n  <code>std::system_error</code> if an error occurs.</p>\n  \n  <p><strong>Error Conditions</strong><br>\n  <code>resource_deadlock_would_occur</code> if <code>this-&gt;get_id() == std::this_thread::get_id()</code> (deadlock detected)</p>\n</blockquote>\n\n<p>By the way, you should lose that dynamic allocation. You don't need it.</p>\n"}, {"tags": [], "owner": {"reputation": 637, "user_id": 1431558, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5e17f8a067133f8d7fb63e3722c55887?s=128&d=identicon&r=PG", "display_name": "Adrian Lis", "link": "https://stackoverflow.com/users/1431558/adrian-lis"}, "is_accepted": false, "score": 1, "last_activity_date": 1487779504, "creation_date": 1487779504, "answer_id": 42396551, "question_id": 42396381, "link": "https://stackoverflow.com/questions/42396381/c-thread-delete-itself-at-its-end/42396551#42396551", "title": "C++ thread delete itself at its end", "body": "<p>Calling a destructor on a thread that is <code>joinable</code> is specified as a termination of a program. It must be either <code>joined</code> or <code>detached</code>.</p>\n\n<p>Also you should be using those RAII helpers, and lock_guards for mutexes as if exception occurs you won't properly release locks etc.</p>\n\n<p>As a side-note: using one thread per connection isn't the best use of the resources, unless you expect to have a small number of simultaneous connections.</p>\n"}], "owner": {"reputation": 530, "user_id": 3795575, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8baee1e391eff6deba9913846dc6bcee?s=128&d=identicon&r=PG&f=1", "display_name": "olive007", "link": "https://stackoverflow.com/users/3795575/olive007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3048, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487780040, "creation_date": 1487779099, "last_edit_date": 1487779653, "question_id": 42396381, "link": "https://stackoverflow.com/questions/42396381/c-thread-delete-itself-at-its-end", "title": "C++ thread delete itself at its end", "body": "<p>I am writing a server with allow connection from multiple client in same time. I create a new thread for every new connection. The client communicate with the server with this thread. I need to unallocate the memory for the thread into the server process when the client disconnect from the server.</p>\n\n<p>The problem is when I try to \"delete the thread itself\". </p>\n\n<p>I write a little code to explain my problem. The Class C represent a new connection. I create a new object of this class dynamically for every connection. The function action is voluntarily simplified to explain the problem.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\nmutex m;\n\nclass C {\n  thread *t;\n\n  static void action(int n, C* obj) {\n    for (int i = 0; i &lt; 10; i++) {\n      m.lock();\n      cout &lt;&lt; \"i:\" &lt;&lt; i &lt;&lt; \", n:\" &lt;&lt; n &lt;&lt; endl;\n      m.unlock();\n    }\n    delete(obj);\n  }\n\n  public:\n    C() : t(nullptr) {}\n\n    ~C() {\n      delete(t); // Work if I comment this line\n    }\n\n    void launch() {\n      static int i = 0;\n      t = new thread(action, i++, this);\n    }\n\n};\n\nint main() {\n  C *c1 = new C();\n  c1-&gt;launch();\n\n  this_thread::sleep_for(chrono::seconds(5));\n  return 0;\n}\n</code></pre>\n\n<p>Sorry for my English I am learning it.</p>\n"}, {"tags": ["c++", "segmentation-fault", "tensorflow", "include", "eigen3"], "answers": [{"tags": [], "owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "is_accepted": false, "score": 2, "last_activity_date": 1487785979, "creation_date": 1487785979, "answer_id": 42398857, "question_id": 42396286, "link": "https://stackoverflow.com/questions/42396286/segmentation-fault-when-using-tensorflow-with-another-library-both-linked-to-ei/42398857#42398857", "title": "Segmentation fault when using tensorflow with another library, both linked to eigen3", "body": "<p>It sounds like your <code>cmake</code> procedure is exporting Eigen symbols, whereas it shouldn't.</p>\n\n<p>Building with bazel makes sure those symbols are not exported using <code>exported_symbols_list</code> directive. I'm not sure what the equivalent command is in cmake. See <a href=\"https://github.com/tensorflow/tensorflow/issues/7380\" rel=\"nofollow noreferrer\">Limit the exported symbols from _pywrap_tensorflow.so</a> for more info</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6456078"}, "is_accepted": false, "score": 0, "last_activity_date": 1498480688, "last_edit_date": 1498480688, "creation_date": 1495533025, "answer_id": 44131405, "question_id": 42396286, "link": "https://stackoverflow.com/questions/42396286/segmentation-fault-when-using-tensorflow-with-another-library-both-linked-to-ei/44131405#44131405", "title": "Segmentation fault when using tensorflow with another library, both linked to eigen3", "body": "<p>Tensorflow uses its own copy of eigen3 which may be different than the one you need in your project.</p>\n"}], "owner": {"reputation": 3223, "user_id": 2312653, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2d90f702a0c6a18532ccf2f3490a3bbe?s=128&d=identicon&r=PG", "display_name": "Antoine M.", "link": "https://stackoverflow.com/users/2312653/antoine-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1498480688, "creation_date": 1487778829, "question_id": 42396286, "link": "https://stackoverflow.com/questions/42396286/segmentation-fault-when-using-tensorflow-with-another-library-both-linked-to-ei", "title": "Segmentation fault when using tensorflow with another library, both linked to eigen3", "body": "<p>I am currently trying to use Tensorflow's shared library with another stereo vision library inside my program but I get a segmentation fault when I use both at the same time.</p>\n\n<p>I created a shared library for tensorflow, \"libtensorflow_cc.so\", so that I can use TensorFlow in other programs using CMake. I can compile a simple tensorflow program using it and run it: the neural network is working fine, I reproduced results I got with Python. TensorFlow (r0.12) is compiled with Protobuf (3.1.0) and Eigen (v3). </p>\n\n<p>I can compile my stereo vision program with the dedicated stereo-vision shared library and run it without TensorFlow.</p>\n\n<p>However, when I include Tenserflow like this:</p>\n\n<pre><code>#include \"tensorflow/core/lib/core/refcount.h\"\n</code></pre>\n\n<p>in the previous stereo-vision program, without using anything else from TensorFlow, I can recompile but I get a segmentation error at run time.</p>\n\n<p>The stereo-vision dedicated shared library includes eigen3. TensorFlow has its own version of eigen3 that uses some functions of the original eigen3.</p>\n\n<p>Therefore, I think that the definitions included by TensorFlow replace the original definitions used when including eigen3. When the dedicated stereo-vision library uses the eigen3 definitions from TensorFlow, it crashes. I ran Valgrind on the program to see this:</p>\n\n<pre><code>==10038== Process terminating with default action of signal 11 (SIGSEGV)\n==10038== General Protection Fault\n==10038== at 0x7E66E2D: Eigen::ColPivHouseholderQR &gt;::computeInPlace() (in /home/hammouche/.cache/bazel/_bazel_hammouche/0355a6c384eef63f75e9b7278f4fc05b/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/libtensorflow_cc.so)\n==10038== by 0x1108C490: Eigen::LevenbergMarquardt, double&gt;::minimizeOneStep(Eigen::Matrix&amp;) (in /usr/local/zed/lib/libsl_calibration.so)\n</code></pre>\n\n<p>The function <code>Eigen::LevenbergMarquardt</code> in the stereo-vision library (<code>/usr/local/zed/lib/libsl_calibration.so</code>) is using definitions from the eigen of TensorFlow (<code>/home/hammouche/.cache/bazel/_bazel_hammouche/0355a6c384eef63f75e9b7278f4fc05b/execroot/tensorflow/bazel-out/local_linux-opt/bin/tensorflow/libtensorflow_cc.so</code>) while it should use definitions from the eigen installed on the computer (<code>/usr/local/include/eigen3</code>).</p>\n\n<p>How can I fix this ? Thank you very much in advance for your help</p>\n"}, {"tags": ["c++", "c++11", "templates"], "answers": [{"comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1487778964, "post_id": 42396261, "comment_id": 71939730, "body": "You don&#39;t need <code>typename</code> in <code>value_type</code>. Also <code>char</code> cannot be used as a parameter identifier."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1487778966, "post_id": 42396261, "comment_id": 71939733, "body": "Suggest <code>using value_type = std::remove_reference&lt;decltype(*std::begin(container))&gt;::typ&zwnj;&#8203;e;</code>"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1487778999, "post_id": 42396261, "comment_id": 71939759, "body": "Hah yeah pretty poorly named parameter, thanks for corrections."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1487779217, "post_id": 42396261, "comment_id": 71939948, "body": "@RSahu I added that correct as well. Though when I run this code I actually see weird output."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1487779293, "post_id": 42396261, "comment_id": 71940006, "body": "@NirFriedman, you need to use just <code>c</code>, not <code>&amp;c</code> to construct the <code>ostream_iterator</code>."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1487779331, "post_id": 42396261, "comment_id": 71940039, "body": "@RSahu <a href=\"http://en.cppreference.com/w/cpp/iterator/ostream_iterator/ostream_iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator/ostream_iterator/&hellip;</a> Seems to indicate that the constructor takes a pointer... is this a typo?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1487779383, "post_id": 42396261, "comment_id": 71940084, "body": "@NirFriedman, my mistake. It needs to be a null terminated string, not just a <code>char*</code>."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1487788312, "post_id": 42396261, "comment_id": 71946147, "body": "Nice solution (+1) but I suppose you can semplify it: if I&#39;m not wrong, you can avoid the third template parameter (<code>Char</code>) and use <code>Stream::char_type</code> instead."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1487790328, "post_id": 42396261, "comment_id": 71947291, "body": "@max66 I think that&#39;s correct, I&#39;ll make the change, thanks."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": true, "score": 3, "last_activity_date": 1487790399, "last_edit_date": 1487790399, "creation_date": 1487778773, "answer_id": 42396261, "question_id": 42396109, "link": "https://stackoverflow.com/questions/42396109/converting-printcontainer-preprocessor-define-into-template-in-c11/42396261#42396261", "title": "Converting PrintContainer Preprocessor Define into Template in C++11", "body": "<p>You can do the following:</p>\n\n<pre><code>template &lt;class Con, class Stream&gt;\nvoid print_container(const Con&amp; container, Stream&amp; stream, const typename Stream::char_type* c) {\n    using value_type = typename std::remove_reference&lt;decltype(*std::begin(container))&gt;::typ\u200c\u200be;\n    std::copy(std::begin(container), std::end(container), std::ostream_iterator&lt;value_type&gt;(stream, &amp;c);\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>std::vector&lt;int&gt; v{1,2,3};\nprint_container(v, std::cerr, \" \");\nint a [] = {4, 5, 6};\nprint_container(a, std::cerr, \" \");\n</code></pre>\n\n<p>Prints</p>\n\n<p>1 2 3 4 5 6</p>\n\n<p>I should probably mention, btw when you say \"all STL containers\", this still cannot work with all STL containers, because many STL containers (like all of the maps) actually iterate over <code>std::pair</code>s of something. And <code>std::pair</code> does not have <code>&lt;&lt;</code> or anything equivalent defined, so this will not work for those.</p>\n"}, {"comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487779161, "post_id": 42396358, "comment_id": 71939902, "body": "@NathanOliver, Ahh,,, didn&#39;t see that part. Corrected"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 1, "last_activity_date": 1487779461, "last_edit_date": 1487779461, "creation_date": 1487779027, "answer_id": 42396358, "question_id": 42396109, "link": "https://stackoverflow.com/questions/42396109/converting-printcontainer-preprocessor-define-into-template-in-c11/42396358#42396358", "title": "Converting PrintContainer Preprocessor Define into Template in C++11", "body": "<p>Generally, STL containers have an alias <code>value_type</code> that denotes the type of objects the container holds. So you can use it to get the type of the contained element. But that fails for raw arrays. In which case you can use <code>decltype(*std::begin(c))</code> to deduce the type. A generic solution will be:</p>\n\n<pre><code>template&lt;typename Container&gt;\nvoid PrintArray(std::ostream&amp; Stream, const char* Separator, const Container&amp; c){\n    std::copy(std::begin(c), std::end(c), std::ostream_iterator&lt;decltype(*std::begin(c))&gt;(Stream, Separator));\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>std::vector&lt;int&gt; v0{1,2 ,3, 5};\nPrintArray(std::cout, \" \", v0);\n</code></pre>\n\n<p>As seen <a href=\"http://coliru.stacked-crooked.com/a/9e0948094cc2371d\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 1896, "user_id": 791025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/66a1d3b208aad4b7381b384fe2fa0756?s=128&d=identicon&r=PG", "display_name": "AdmiralJonB", "link": "https://stackoverflow.com/users/791025/admiraljonb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 42396261, "answer_count": 2, "score": 1, "last_activity_date": 1487790399, "creation_date": 1487778405, "question_id": 42396109, "link": "https://stackoverflow.com/questions/42396109/converting-printcontainer-preprocessor-define-into-template-in-c11", "title": "Converting PrintContainer Preprocessor Define into Template in C++11", "body": "<p>I've got the following preprocessor define:</p>\n\n<pre><code>#define PRINTARRAY(Type, Array, Stream, Separator) \\\nstd::copy(std::begin(Array), std::end(Array), std::ostream_iterator&lt;Type&gt;(Stream, Separator))\n</code></pre>\n\n<p>I'm wanting to convert this to a template, so it can automatically determine the type for the ostream_iterator, so I don't have to pass it in.</p>\n\n<p>However, I'm wondering what how to do this. My key issues are:</p>\n\n<ul>\n<li>Getting this to work with all STL containers</li>\n<li>Getting this to work with ordinary arrays (which std::begin / end supports?)</li>\n</ul>\n\n<p>I think the key issue is that the ostream_iterator, afaik, needs to have the type of the contained values, and not the type of the container.</p>\n\n<p>Does anyone have any ideas? Thanks.</p>\n"}, {"tags": ["c++", "llvm", "openmp", "mutex"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487778575, "post_id": 42396083, "comment_id": 71939418, "body": "Does the program really run for 25 secs? (when you look at your watch)"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487780798, "post_id": 42396083, "comment_id": 71941132, "body": "Yes. I use  boost::chrono::system_clock for watch time."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1487782380, "post_id": 42396083, "comment_id": 71942217, "body": "For such performance considerations, you have to specify more details that allow to understand and reproduce the issue, such as compiler options and hardware configurations of the systems as well as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also clang 3.7 only supports OpenMP 3.1, OpenMP 5.0 is not even final yet. VS2010 certainly does not implement it."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487789891, "post_id": 42396083, "comment_id": 71947023, "body": "I was update description."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 1, "creation_date": 1487790201, "post_id": 42396083, "comment_id": 71947224, "body": "It seems that under the hood a lightweight mutex is used on windows. On the other hand your implementation of prarallel sum is very bad. Use a local accumulator for every thread and add them together at the end."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1487791145, "post_id": 42396083, "comment_id": 71947796, "body": "Btw A mutex, is the wrong thing to use in this case. You solve this efficiently with a reduction,  see e.g <a href=\"http://stackoverflow.com/questions/42395568/openmp-why-does-the-number-of-comparisons-decrease/42398834#42398834\" title=\"openmp why does the number of comparisons decrease\">stackoverflow.com/questions/42395568/&hellip;</a>"}, {"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1487791370, "post_id": 42396083, "comment_id": 71947909, "body": "What about the performance gap when you use 2 threads?"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487791780, "post_id": 42396083, "comment_id": 71948152, "body": "I said that I use mutex only for performance test. In my real application i am using mutex in some time. When i begin to port app from win to mac I see that performance  slowdown."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487791927, "post_id": 42396083, "comment_id": 71948246, "body": "And I try to use boost::mutex and nothing change in result."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 2, "creation_date": 1487850334, "post_id": 42396083, "comment_id": 71974969, "body": "Before blaming OpenMP, I suggest that you time the mutex performance in a code that is simply using ptrheads. My guess (since I haven&#39;t timed it) is that the performance there will also be horrible!"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487854938, "post_id": 42396083, "comment_id": 71978256, "body": "If in the last example to replace the array of mutexes on a single or critical section, then the entire algorithm will run in only one thread."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487835763, "post_id": 42406343, "comment_id": 71965662, "body": "I answered you in the next post."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1487836348, "post_id": 42406343, "comment_id": 71965978, "body": "What is the point in explicit locks? I have never used them. I just use <code>critical</code>. Can you give me an example where explicit locks are the better choice?"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487838388, "post_id": 42406343, "comment_id": 71967058, "body": "I description my work case in the end of post. I don&#39;t understand how use critical section in this case. In test i used critical too, but speed slower than  when I use mutex (on Win machine)."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 2, "creation_date": 1487850454, "post_id": 42406343, "comment_id": 71975056, "body": "@Zboson. The OP has just give you such an example. A critical section would serialize all updates to his array, whereas by using locks he can serialize only the accesses to individual rows."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 1, "creation_date": 1487850493, "post_id": 42406343, "comment_id": 71975085, "body": "@D.Sedov &quot;I don&#39;t understand how use critical section in this case&quot;, so use OpenMP locks!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1487853817, "post_id": 42406343, "comment_id": 71977425, "body": "@JimCownie, wouldn&#39;t a reduction be more appropriate in the first place (I want a useful example)? But I don&#39;t see how the lock is any different than critical in this case(I see in the answer that the lock is a bit faster but that could be within the timing uncertainty). Each thread cannot update <code>sum</code> while another one is writing to it.  There is no implicit barrier with <code>critical</code> so if one thread is very slow another thread could update <code>sum</code> and the array multiple times before the slow thread got to <code>sum</code>. What are you referring to by row?"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487854554, "post_id": 42406343, "comment_id": 71977989, "body": "I added the code as in a real application. The code is simplified, but shows how I use mutexes to fill the matrix."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487854943, "post_id": 42406343, "comment_id": 71978259, "body": "If in the last example to replace the array of mutexes on a single or critical section, then the entire algorithm will run in only one thread."}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487856602, "post_id": 42406343, "comment_id": 71979501, "body": "@D.Sedov - it seems like the solution is to use an array of omp_locks (just as with mutexes)."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1487857113, "post_id": 42406343, "comment_id": 71979892, "body": "@JimCownie, I only read the code not the next. I see the OP discusses row and a real example in the text."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487861984, "post_id": 42406343, "comment_id": 71983788, "body": "@Jonathan Dursi Yes it is. I use mutexes traditionally, and only recently have used features of openmp, so old-fashioned sometimes write the old solution. But the main thing were not understood, why &quot;Mac&quot; is such a bad performance when using mutexes?"}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487862473, "post_id": 42406343, "comment_id": 71984172, "body": "@D.Sedov - You&#39;d have to ask the clang developers - but there&#39;s no reason to expect that mixing threading and synchronization systems like this should ever perform well.  I have no idea why it happens to work ok with VS and Windows."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487871301, "post_id": 42406343, "comment_id": 71990619, "body": "@Jonathan Dursi I try to use omp_lock on mac, but it is slower then mutex on win.  omp_lock on mac more faster  then mutex on mac (ratio = 20)."}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487871779, "post_id": 42406343, "comment_id": 71990949, "body": "@D.Sedov how does the omp_lock on win compare with mutex on windows?  Are you sure the windows machine isn&#39;t just faster than the mac?"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487876593, "post_id": 42406343, "comment_id": 71993572, "body": "@Jonathan Dursi On win opm_lock and boost::mutex have equal performance. I wrote that win-Corei7(3.4GHz) and mac-Corei7(2.7 GHz)."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487876781, "post_id": 42406343, "comment_id": 71993670, "body": "@Jonathan Dursi On Windows there is no such performance degradation (relative) as on the Mac when using a mutex.  I&#39;m not talking about the absolute difference in performance of the two systems, and a strong drop it on the Mac."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487876950, "post_id": 42406343, "comment_id": 71993769, "body": "@Jonathan Dursi If I use omp_lock on Mac then thea are&#39;t critical degradate performance as if I am using mutex. I wrote about that above."}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487877172, "post_id": 42406343, "comment_id": 71993896, "body": "@Jonathan Dursi I&#39;m sorry I do not understand why the Mac is so slow mutex, but the solution with opm_lock will allow me to correct the situation with the performance in a better way."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 0, "creation_date": 1487928345, "post_id": 42406343, "comment_id": 72014244, "body": "@D.Sedov. Since the slowness here is with std::mutex, there is no point in discussing it with the LLVM OpenMP developers, as it has nothing to do with OpenMP. Note, too, that in OpenMP you have some tuning options for locks, so that you can hint to the runtime whether you want a fast, unfair, spinlock or a slower, fair queueing lock (or, on appropriate Intel HW to use TSX to speculate the critical region). See the description of omp_init_lock_with_hint on page 273 of the OpenMP 4.5 specification available from <a href=\"http://openmp.org\" rel=\"nofollow noreferrer\">openmp.org</a>"}, {"owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1487940948, "post_id": 42406343, "comment_id": 72022276, "body": "@Jim Cownie I agree, but then I have to raise the question of the slowness of std::mutex in LLVM on Mac. It should be noted that omp_lock_* is also not a quick thing on the Mac (although it is much faster than a mutex). On Windows I don&#39;t see any difference between std::mutex and omp_lock, but on the Mac, the difference is catastrophic."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "edited": false, "score": 1, "creation_date": 1488275073, "post_id": 42406343, "comment_id": 72148123, "body": "@D.Sedov The implementations of omp_lock_t in the LLVM OpenMP runtime are identical on LInux, Windows and Mac (modulo how they sleep under high contention), (You can see them at <a href=\"http://openmp.llvm.org\" rel=\"nofollow noreferrer\">openmp.llvm.org</a> ) So they should perform the same on each of the platforms.  AFAICT the implementation of std::mutex comes from system libraries, not LLVM. (See <a href=\"http://info.prelert.com/blog/cpp11-mutex-implementations\" rel=\"nofollow noreferrer\">info.prelert.com/blog/cpp11-mutex-implementations</a> for instance) Therefore all of this seems to be &quot;The implementation of std::mutex in MacOS is slower than that in Windows&quot;, which has no OpenMP or LLVM component to it."}], "tags": [], "owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "is_accepted": true, "score": 4, "last_activity_date": 1487857327, "last_edit_date": 1487857327, "creation_date": 1487819797, "answer_id": 42406343, "question_id": 42396083, "link": "https://stackoverflow.com/questions/42396083/very-slow-mutex-in-llvm-openmp/42406343#42406343", "title": "Very slow mutex in LLVM/OpenMP", "body": "<p>You're combining two different sets of threading/synchronization primitives - OpenMP, which is built into the compiler and has a runtime system, and manually creating a posix mutex with std::mutex.  It's probably not surprising that there's some interoperability hiccups with some compiler/OS combinations.</p>\n\n<p>My guess here is that in the slow case, the OpenMP runtime is going overboard to make sure that there's no interactions between higher-level ongoing OpenMP threading tasks and the manual mutex, and that doing so inside a tight loop causes the dramatic slowdown.</p>\n\n<p>For mutex-like behaviour in the OpenMP framework, we can use critical sections:</p>\n\n<pre><code>#pragma omp parallel for \nfor (int i = 0; i &lt; len; i++)\n{\n    //...\n    // replacing this: std::lock_guard&lt;std::mutex&gt; scoped(_mutex);\n    #pragma omp critical\n    sum += c[i];\n}\n</code></pre>\n\n<p>or explicit locks:</p>\n\n<pre><code>omp_lock_t sumlock;\nomp_init_lock(&amp;sumlock);\n#pragma omp parallel for \nfor (int i = 0; i &lt; len; i++)\n{\n    //...\n    // replacing this: std::lock_guard&lt;std::mutex&gt; scoped(_mutex);\n    omp_set_lock(&amp;sumlock);\n    sum += c[i];\n    omp_unset_lock(&amp;sumlock);\n}\nomp_destroy_lock(&amp;sumlock);\n</code></pre>\n\n<p>We get much more reasonable timings: </p>\n\n<pre><code>$ time ./openmp-original\nreal    1m41.119s\nuser    1m15.961s\nsys 1m53.919s\n\n$ time ./openmp-critical\nreal    0m16.470s\nuser    1m2.313s\nsys 0m0.599s\n\n$ time ./openmp-locks\nreal    0m15.819s\nuser    1m0.820s\nsys 0m0.276s\n</code></pre>\n\n<p><strong>Updated</strong>: There's no problem with using an array of openmp locks in exactly the same way as the mutexes:</p>\n\n<pre><code>omp_lock_t sumlocks[elementsNum];\nfor (unsigned idx=0; idx&lt;elementsNum; idx++) \n    omp_init_lock(&amp;(sumlocks[idx]));\n\n//...\n#pragma omp parallel for\nfor (int i = 0; i &lt; elementsNum; i++)\n{\n    unsigned int* elems = &amp;elements[3*i];\n    for (unsigned int j = 0; j &lt; 3; j++)\n    {\n        //in here set mutex for  row with index = elems[j];\n        double res = 0.0;\n        for (unsigned int k = 0; k &lt; 3; k++)\n        {\n            res += ActionWithNumber(matrix[elems[j]*elementsNum + elems[k]]);\n        }\n        omp_set_lock(&amp;(sumlocks[i]));\n        for (unsigned int k = 0; k &lt; 3; k++)\n        {\n            matrix[elems[j]*elementsNum + elems[k]] = res;\n        }\n        omp_unset_lock(&amp;(sumlocks[i]));\n    }\n}\nfor (unsigned idx=0; idx&lt;elementsNum; idx++) \n    omp_destroy_lock(&amp;(sumlocks[idx]));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7605723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f6d478c5d5493767a4ea44b8a215d2?s=128&d=identicon&r=PG&f=1", "display_name": "D.Sedov", "link": "https://stackoverflow.com/users/7605723/d-sedov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 42406343, "answer_count": 1, "score": 2, "last_activity_date": 1487857327, "creation_date": 1487778351, "last_edit_date": 1487854377, "question_id": 42396083, "link": "https://stackoverflow.com/questions/42396083/very-slow-mutex-in-llvm-openmp", "title": "Very slow mutex in LLVM/OpenMP", "body": "<p>I wrote code to test the performance of openmp on win (Win7 x64, Corei7 3.4HGz) and on Mac (10.12.3 Core i7 2.7 HGz).</p>\n\n<ol>\n<li>In xcode I made a console application setting the compiled default. I use LLVM 3.7 and OpenMP 5 (in opm.h i searched define KMP_VERSION_MAJOR=5, define KMP_VERSION_MINOR=0 and KMP_VERSION_BUILD = 20150701, libiopm5) on macos 10.12.3 (CPU - Corei7 2700GHz)</li>\n<li>For win I use VS2010 Sp1. Additional I set c/C++ -> Optimization -> Optimization = Maximize Speed (O2), c/C++ -> Optimization ->Favor Soze Or Speed = Favor Fast code (Ot). </li>\n</ol>\n\n<p>If I run the application in a single thread, the time difference corresponds to the frequency ratio of processors (approximately). But if you run 4 threads, the difference becomes tangible: win program be faster then mac program in ~70 times.</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;mutex&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n#include &lt;boost/chrono/chrono.hpp&gt;\n\nstatic double ActionWithNumber(double number)\n{\n    double sum = 0.0f;\n    for (std::uint32_t i = 0; i &lt; 50; i++)\n    {\n        double coeff = sqrt(pow(std::abs(number), 0.1));\n        double res = number*(1.0-coeff)*number*(1.0-coeff) * 3.0;\n        sum += sqrt(res);\n    }\n    return sum;\n}\n\nstatic double TestOpenMP(void)\n{\n    const std::uint32_t len = 4000000;\n    double *a;\n    double *b;\n    double *c;\n    double sum = 0.0;\n\n    std::mutex _mutex;\n    a = new double[len];\n    b = new double[len];\n    c = new double[len];\n\n    for (std::uint32_t i = 0; i &lt; len; i++)\n    {\n        c[i] = 0.0;\n        a[i] = sin((double)i);\n        b[i] = cos((double)i);\n    }\n    boost::chrono::time_point&lt;boost::chrono::system_clock&gt; start, end;\n    start = boost::chrono::system_clock::now();\n    double k = 2.0;\n    omp_set_num_threads(4);\n#pragma omp parallel for \n    for (int i = 0; i &lt; len; i++)\n    {\n        c[i] = k*a[i] + b[i] + k;\n        if (c[i] &gt; 0.0)\n        {\n            c[i] += ActionWithNumber(c[i]);\n        }\n        else\n        {\n            c[i] -= ActionWithNumber(c[i]);\n        }\n        std::lock_guard&lt;std::mutex&gt; scoped(_mutex);\n        sum += c[i];\n    }\n    end = boost::chrono::system_clock::now();\n    boost::chrono::duration&lt;double&gt; elapsed_time = end - start;\n    double sum2 = 0.0;\n    for (std::uint32_t i = 0; i &lt; len; i++)\n    {\n        sum2 += c[i];\n        c[i] /= sum2;\n    }\n    if (std::abs(sum - sum2) &gt; 0.01) printf(\"Incorrect result.\\n\");\n    delete[] a;\n    delete[] b;\n    delete[] c;\n    return elapsed_time.count();\n}\n\nint main()\n{\n\n    double sum = 0.0;\n    const std::uint32_t steps = 5;\n    for (std::uint32_t i = 0; i &lt; steps; i++)\n    {\n        sum += TestOpenMP();\n    }\n    sum /= (double)steps;\n    std::cout &lt;&lt; \"Elapsed time = \" &lt;&lt;  sum;\n    return 0;\n}\n</code></pre>\n\n<p>I specifically use a mutex here to compare the performance of openmp on the \"mac\" and \"win\". On the \"Win\" function returns the time of 0.39 seconds. On the \"Mac\" function returns the time of 25 seconds, i.e. 70 times slower. </p>\n\n<p>What is the cause of this difference?</p>\n\n<p>First of all, thank for edit my post (i use translater to write text). \nIn the real app, I update the values in a huge matrix (20000\u044520000) in random order. Each thread determines the new value and writes it in a particular cell. I create a mutex for each row, since in most cases different threads write to different rows. But apparently in cases when 2 threads write in one row and there is a long lock. At the moment I can't divide the rows in different threads, since the order of records is determined by the FEM elements. \nSo just to put a critical section in there comes out, as it will block writes to the entire matrix.</p>\n\n<p>I wrote code like in real application. </p>\n\n<pre><code>static double ActionWithNumber(double number)\n{\n    const unsigned int steps = 5000;\n    double sum = 0.0f;\n    for (u32 i = 0; i &lt; steps; i++)\n    {\n        double coeff = sqrt(pow(abs(number), 0.1));\n        double res = number*(1.0-coeff)*number*(1.0-coeff) * 3.0;\n        sum += sqrt(res);\n    }\n    sum /= (double)steps;\n    return sum;\n}\n\nstatic double RealAppTest(void)\n{\n    const unsigned int elementsNum = 10000;\n    double* matrix;\n    unsigned int* elements;\n    boost::mutex* mutexes;\n\n    elements = new unsigned int[elementsNum*3];\n    matrix = new double[elementsNum*elementsNum];\n    mutexes = new boost::mutex[elementsNum];\n    for (unsigned int i = 0; i &lt; elementsNum; i++)\n        for (unsigned int j = 0; j &lt; elementsNum; j++)\n            matrix[i*elementsNum + j] = (double)(rand() % 100);\n    for (unsigned int i = 0; i &lt; elementsNum; i++) //build FEM element like Triangle\n    {\n        elements[3*i] = rand()%(elementsNum-1);\n        elements[3*i+1] = rand()%(elementsNum-1);\n        elements[3*i+2] = rand()%(elementsNum-1);\n    }\n    boost::chrono::time_point&lt;boost::chrono::system_clock&gt; start, end;\n    start = boost::chrono::system_clock::now();\n    omp_set_num_threads(4);\n#pragma omp parallel for\n    for (int i = 0; i &lt; elementsNum; i++)\n    {\n        unsigned int* elems = &amp;elements[3*i];\n        for (unsigned int j = 0; j &lt; 3; j++)\n        {\n            //in here set mutex for  row with index = elems[j];\n            boost::lock_guard&lt;boost::mutex&gt; lockup(mutexes[i]);\n            double res = 0.0;\n            for (unsigned int k = 0; k &lt; 3; k++)\n            {\n                res += ActionWithNumber(matrix[elems[j]*elementsNum + elems[k]]);\n            }\n            for (unsigned int k = 0; k &lt; 3; k++)\n            {\n                matrix[elems[j]*elementsNum + elems[k]] = res;\n            }\n        }\n    }\n    end = boost::chrono::system_clock::now();\n    boost::chrono::duration&lt;double&gt; elapsed_time = end - start;\n\n    delete[] elements;\n    delete[] matrix;\n    delete[] mutexes;\n    return elapsed_time.count();\n}\n\nint main()\n{\n    double sum = 0.0;\n    const u32 steps = 5;\n    for (u32 i = 0; i &lt; steps; i++)\n    {\n        sum += RealAppTest();\n    }\n    sum /= (double)steps;\n    std::cout&lt;&lt;\"Elapsed time = \" &lt;&lt;  sum;\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "filter"], "comments": [{"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1487871295, "post_id": 42396073, "comment_id": 71990614, "body": "If you are interested in working with python, <a href=\"http://scikit-image.org/docs/dev/api/skimage.filters.html#skimage.filters.wiener\" rel=\"nofollow noreferrer\">HAVE A LOOK HERE</a>"}, {"owner": {"reputation": 11, "user_id": 7605704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U_znvx001uo/AAAAAAAAAAI/AAAAAAAAQII/3d05SMibYmo/photo.jpg?sz=128", "display_name": "John Napier", "link": "https://stackoverflow.com/users/7605704/john-napier"}, "reply_to_user": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1487889036, "post_id": 42396073, "comment_id": 72000375, "body": "@JeruLuke Thanks for the comment however I don&#39;t really have a choice as this is for a thesis and I have to use C++"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1487908738, "post_id": 42396073, "comment_id": 72006132, "body": "hmmm... don&#39;t have hopes on me... but I&#39;ll try my best. I am interested in this solution too"}, {"owner": {"reputation": 11, "user_id": 7605704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U_znvx001uo/AAAAAAAAAAI/AAAAAAAAQII/3d05SMibYmo/photo.jpg?sz=128", "display_name": "John Napier", "link": "https://stackoverflow.com/users/7605704/john-napier"}, "reply_to_user": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 1, "creation_date": 1488192955, "post_id": 42396073, "comment_id": 72107356, "body": "@JeruLuke I have been looking around and i found this post very useful - Here is the <a href=\"http://stackoverflow.com/questions/10269456/inverse-fourier-transformation-in-opencv\">link</a>"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1488196541, "post_id": 42396073, "comment_id": 72109816, "body": "Thnx for letting me know :)"}], "owner": {"reputation": 11, "user_id": 7605704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U_znvx001uo/AAAAAAAAAAI/AAAAAAAAQII/3d05SMibYmo/photo.jpg?sz=128", "display_name": "John Napier", "link": "https://stackoverflow.com/users/7605704/john-napier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487778316, "creation_date": 1487778316, "question_id": 42396073, "link": "https://stackoverflow.com/questions/42396073/wiener-filter-opencv", "title": "wiener filter OpenCV", "body": "<p>Basically I am trying to implement a very basic version of the Wiener filter on a grey scale image, using the a stripped down Wiener equation: (1/(SNR))*DFT(Image) after which I take the IDFT of the whole thing. My problem is that my output image which is supposed to be filtered looks exactly like the input, and therefore it seems that the pixel values aren't changing at all. Can anyone please indicate to me where I am going wrong? Here's the code I am currently using:</p>\n\n<pre><code>#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv/cv.hpp\"\n#include \"opencv/cxcore.hpp\"\n#include &lt;iostream&gt;\n\n\nusing namespace cv;\nusing namespace std;\n\nvoid updateMag(Mat complex);\nMat updateResult(Mat complex);\n\nMat computeDFT(Mat image);\nMat DFT2(Mat I);\nvoid shift(Mat magI);\n\nint kernel_size = 0;\n\nint main( int argc, char** argv )\n{\n\n    Mat  result;\n    String file;\n    file = \" &lt;&lt; SAMPLE FILE &gt;&gt;\";\n\n    Mat image = imread(\"/Users/John/Desktop/house.png\", CV_LOAD_IMAGE_GRAYSCALE);\n    namedWindow( \"Orginal window\", CV_WINDOW_AUTOSIZE  );// Create a window for display.\n    imshow( \"Orginal window\", image );                   // Show our image inside it.\n\n    float x = 1/0.001;\n    Mat complex = computeDFT(image); // DFT of image\n\n    updateMag(complex);         // compute magnitude of complex, switch to logarithmic scale and display...\n\n    Mat fourierImage(complex.size(), complex.type());\n    fourierImage = cv::Scalar::all(x);\n\n\n    //cout&lt;&lt; \"Fourier = \" &lt;&lt; endl &lt;&lt; fourierImage &lt;&lt; endl;\n    //Mat complexFourier = computeDFT(fourierImage);\n    //cout &lt;&lt; \"1\" &lt;&lt; endl &lt;&lt; complexFourier.type() &lt;&lt; endl &lt;&lt; complexFourier.type() &lt;&lt; endl;\n\n    //complex = complex.mul(fourierImage);\n    //mulSpectrums(complex, fourierImage, complex, DFT_ROWS);\n\n    complex = complex.mul(x);\n    result = updateResult(complex);      // do inverse transform and display the result image\n\n    waitKey(0);\n\n    return 0;\n}\n\n\n\nMat updateResult(Mat complex)\n{\n    Mat work;\n    //work.convertTo(work, CV_32F);\n    idft(complex, work);\n    //dft(complex, work, DFT_INVERSE + DFT_SCALE);\n    Mat planes[] = {Mat::zeros(complex.size(), complex.type()), Mat::zeros(complex.size(), complex.type())};\n    split(work, planes);                // planes[0] = Re(DFT(I)), planes[1] = Im(DFT(I))\n\n    magnitude(planes[0], planes[1], work);    // === sqrt(Re(DFT(I))^2 + Im(DFT(I))^2)\n    normalize(work, work, 1, 0, NORM_MINMAX);\n    imshow(\"result\", work);\n    return work;\n}\n\nvoid updateMag(Mat complex )\n{\n\n    Mat magI;\n    Mat planes[] = {Mat::zeros(complex.size(), CV_32F), Mat::zeros(complex.size(), CV_32F)};\n    split(complex, planes);                // planes[0] = Re(DFT(I)), planes[1] = Im(DFT(I))\n\n    magnitude(planes[0], planes[1], magI);    // sqrt(Re(DFT(I))^2 + Im(DFT(I))^2)\n\n    // switch to logarithmic scale: log(1 + magnitude)\n    magI += Scalar::all(1);\n    log(magI, magI);\n\n    shift(magI);\n    normalize(magI, magI, 1, 0, NORM_INF); // Transform the matrix with float values into a\n    // viewable image form (float between values 0 and 1).\n    imshow(\"spectrum\", magI);\n}\n\n\nMat computeDFT(Mat image) {\n    Mat padded;                            //expand input image to optimal size\n    int m = getOptimalDFTSize( image.rows );\n    int n = getOptimalDFTSize( image.cols ); // on the border add zero values\n    copyMakeBorder(image, padded, 0, m - image.rows, 0, n - image.cols, BORDER_CONSTANT, Scalar::all(0));\n    Mat planes[] = {Mat_&lt;float&gt;(padded), Mat::zeros(padded.size(), CV_32F)};\n    Mat complex;\n    merge(planes, 2, complex);         // Add to the expanded another plane with zeros\n    dft(complex, complex, DFT_COMPLEX_OUTPUT);  // furier transform\n    return complex;\n}\n\n\n\nvoid shift(Mat magI) {\n\n    // crop if it has an odd number of rows or columns\n    magI = magI(Rect(0, 0, magI.cols &amp; -2, magI.rows &amp; -2));\n\n    int cx = magI.cols/2;\n    int cy = magI.rows/2;\n\n    Mat q0(magI, Rect(0, 0, cx, cy));   // Top-Left - Create a ROI per quadrant\n    Mat q1(magI, Rect(cx, 0, cx, cy));  // Top-Right\n    Mat q2(magI, Rect(0, cy, cx, cy));  // Bottom-Left\n    Mat q3(magI, Rect(cx, cy, cx, cy)); // Bottom-Right\n\n    Mat tmp;                            // swap quadrants (Top-Left with Bottom-Right)\n    q0.copyTo(tmp);\n    q3.copyTo(q0);\n    tmp.copyTo(q3);\n    q1.copyTo(tmp);                     // swap quadrant (Top-Right with Bottom-Left)\n    q2.copyTo(q1);\n    tmp.copyTo(q2);\n}\n\nMat DFT2(Mat I)\n{\n    Mat padded;                            //expand input image to optimal size\n    int m = getOptimalDFTSize( I.rows );\n    int n = getOptimalDFTSize( I.cols ); // on the border add zero values\n    copyMakeBorder(I, padded, 0, m - I.rows, 0, n - I.cols, BORDER_CONSTANT, Scalar::all(0));\n\n    Mat planes[] = {Mat_&lt;float&gt;(padded), Mat::zeros(padded.size(), CV_32F)};\n    Mat complexI;\n    merge(planes, 2, complexI);         // Add to the expanded another plane with zeros\n\n    dft(complexI, complexI);            // this way the result may fit in the source matrix\n\n    // compute the magnitude and switch to logarithmic scale\n    // =&gt; log(1 + sqrt(Re(DFT(I))^2 + Im(DFT(I))^2))\n    split(complexI, planes);                   // planes[0] = Re(DFT(I), planes[1] = Im(DFT(I))\n    magnitude(planes[0], planes[1], planes[0]);// planes[0] = magnitude\n    Mat magI = planes[0];\n\n    magI += Scalar::all(1);                    // switch to logarithmic scale\n    log(magI, magI);\n\n    // crop the spectrum, if it has an odd number of rows or columns\n    magI = magI(Rect(0, 0, magI.cols &amp; -2, magI.rows &amp; -2));\n\n    // rearrange the quadrants of Fourier image  so that the origin is at the image center\n    int cx = magI.cols/2;\n    int cy = magI.rows/2;\n\n    Mat q0(magI, Rect(0, 0, cx, cy));   // Top-Left - Create a ROI per quadrant\n    Mat q1(magI, Rect(cx, 0, cx, cy));  // Top-Right\n    Mat q2(magI, Rect(0, cy, cx, cy));  // Bottom-Left\n    Mat q3(magI, Rect(cx, cy, cx, cy)); // Bottom-Right\n\n    Mat tmp;                           // swap quadrants (Top-Left with Bottom-Right)\n    q0.copyTo(tmp);\n    q3.copyTo(q0);\n    tmp.copyTo(q3);\n\n    q1.copyTo(tmp);                    // swap quadrant (Top-Right with Bottom-Left)\n    q2.copyTo(q1);\n    tmp.copyTo(q2);\n\n    normalize(magI, magI, 0, 1, CV_MINMAX); // Transform the matrix with float values into a\n    // viewable image form (float between values 0 and 1).\n\n\n    return complexI;\n}\n</code></pre>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1487778331, "post_id": 42396057, "comment_id": 71939231, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and format your code"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1487778378, "post_id": 42396057, "comment_id": 71939269, "body": "<a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">Find a good beginners book</a> and read about <i>references</i>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487778385, "post_id": 42396057, "comment_id": 71939279, "body": "Do you know what passing by value and passing by reference are?  If not read this: <a href=\"http://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\" title=\"whats the difference between passing by reference vs passing by value\">stackoverflow.com/questions/373419/&hellip;</a>"}, {"owner": {"reputation": 386, "user_id": 1356754, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc819ab0cae38bbc1689b3fb80db7ba9?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1356754/brandon"}, "edited": false, "score": 0, "creation_date": 1487788360, "post_id": 42396057, "comment_id": 71946187, "body": "<a href=\"https://stackoverflow.com/questions/19827119/c-argument-passing-passed-by-reference\" title=\"c argument passing passed by reference\">stackoverflow.com/questions/19827119/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7605766, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/aa3ea3dcc543e7128c758ef470caff0a?s=128&d=identicon&r=PG&f=1", "display_name": "Yunus Emre Guney Student", "link": "https://stackoverflow.com/users/7605766/yunus-emre-guney-student"}, "edited": false, "score": 0, "creation_date": 1487792459, "post_id": 42396249, "comment_id": 71948544, "body": "thanks its all done"}], "tags": [], "owner": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "is_accepted": false, "score": 1, "last_activity_date": 1487778733, "creation_date": 1487778733, "answer_id": 42396249, "question_id": 42396057, "link": "https://stackoverflow.com/questions/42396057/c-carrying-user-input-from-one-function-to-another-and-displaying-it-with-main/42396249#42396249", "title": "C++ Carrying user input from one function to another and displaying it with main(newbie)", "body": "<p>You can change <code>void getinput(string restname,string name, double point)</code>\nto</p>\n\n<pre><code>void getinput(string restname,string name, double&amp; point)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7605766, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/aa3ea3dcc543e7128c758ef470caff0a?s=128&d=identicon&r=PG&f=1", "display_name": "Yunus Emre Guney Student", "link": "https://stackoverflow.com/users/7605766/yunus-emre-guney-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1487801891, "answer_count": 1, "score": -3, "last_activity_date": 1488357013, "creation_date": 1487778259, "last_edit_date": 1488357013, "question_id": 42396057, "link": "https://stackoverflow.com/questions/42396057/c-carrying-user-input-from-one-function-to-another-and-displaying-it-with-main", "closed_reason": "Needs details or clarity", "title": "C++ Carrying user input from one function to another and displaying it with main(newbie)", "body": "<p>its all done\nits all done\nits all done</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "cin"], "comments": [{"owner": {"reputation": 53, "user_id": 6938024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354c5341b9903d85c42886488f430df5?s=128&d=identicon&r=PG&f=1", "display_name": "mario.b", "link": "https://stackoverflow.com/users/6938024/mario-b"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487778060, "post_id": 42395777, "comment_id": 71939015, "body": "@KerrekSB There is no cin.close() function... Please correct me if I&#39;m wrong"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487778161, "post_id": 42395777, "comment_id": 71939081, "body": "You&#39;re right, never mind :-S"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487778165, "post_id": 42395777, "comment_id": 71939089, "body": "@Mario Try <code>::close( STDIN_FILENO );</code> or <code>::fclose( stdin );</code> or even <code>::close( 0 );</code>.  See <a href=\"http://stackoverflow.com/questions/288062/is-close-fclose-on-stdin-guaranteed-to-be-correct\" title=\"is close fclose on stdin guaranteed to be correct\">stackoverflow.com/questions/288062/&hellip;</a>  It&#39;s a bit drastic..."}, {"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1487842110, "post_id": 42395777, "comment_id": 71969388, "body": "You can build logic such that if thread1 reads something specific then it can exit. Now thread2 can <code>putback</code> that something specific in order for thread1 to exit.  see this example(<a href=\"http://www.cplusplus.com/reference/istream/istream/putback/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/istream/istream/putback</a>)"}, {"owner": {"reputation": 53, "user_id": 6938024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354c5341b9903d85c42886488f430df5?s=128&d=identicon&r=PG&f=1", "display_name": "mario.b", "link": "https://stackoverflow.com/users/6938024/mario-b"}, "reply_to_user": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1487850300, "post_id": 42395777, "comment_id": 71974946, "body": "@sameerkn Then there is still the problem that the user has to push the enter key to close cin reading."}, {"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1487850865, "post_id": 42395777, "comment_id": 71975352, "body": "If you simply want to cancel <code>cin</code> in <code>foo</code> from <code>bar</code> then simply use a <code>bool read_valid = true;</code> variable which will decide whether to use <code>cin</code> in <code>foo</code>. <code>read_valid</code> will be read-only in <code>foo</code> and write-only in <code>bar</code>. Inside <code>bar</code> when the condition is satisfied then simply make <code>read_valid = false</code>."}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 1794022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1c458295c63c619fd46092b0f63a9a?s=128&d=identicon&r=PG", "display_name": "mikosz", "link": "https://stackoverflow.com/users/1794022/mikosz"}, "is_accepted": false, "score": 0, "last_activity_date": 1487841419, "creation_date": 1487841419, "answer_id": 42411446, "question_id": 42395777, "link": "https://stackoverflow.com/questions/42395777/how-to-stop-from-another-thread-stdcin-from-reading-anymore-input/42411446#42411446", "title": "How to stop, from another thread, std::cin from reading anymore input?", "body": "<p>I don't think there is a standard non-blocking read from istream or a means to interrupt a thread waiting for input. You might try to look at boost asio or boost iostreams - perhaps they have this functionality.</p>\n\n<p>You could use select/poll on POSIX systems or their counterparts on other systems to check if any data is available, or use some form of interruptive read - API is system-dependent also.</p>\n\n<p>Below is a dirty solution that works - you end up with a leaked thread that will forever wait on stdin, but it does what you want.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;condition_variable&gt;\n#include &lt;chrono&gt;\n#include &lt;mutex&gt;\n#include &lt;queue&gt;\n\nstd::mutex m;\nbool dataEnd = false;\nstd::queue&lt;std::string&gt; data;\nstd::condition_variable sAvail;\n\nvoid Reader() {\n    while (std::cin) {\n        auto s = std::string();\n        std::cin &gt;&gt; s;\n\n        auto lock = std::unique_lock&lt;std::mutex&gt;(m);\n        data.push(std::move(s));\n        sAvail.notify_all();\n    }\n}\n\nvoid Foo() {\n    for (;;) {\n        auto lock = std::unique_lock&lt;std::mutex&gt;(m);\n        if (data.empty()) {\n            sAvail.wait(lock);\n            if (dataEnd) {\n                std::cerr &lt;&lt; \"No more data!\\n\";\n                break;\n            }\n        }\n\n        if (!data.empty()) {\n            auto s = std::move(data.front());\n            data.pop();\n            std::cerr &lt;&lt; \"Got \" &lt;&lt; s &lt;&lt; '\\n';\n        }\n    }\n}\n\nvoid Bar(std::thread&amp; reader) {\n    // Do stuff\n    // If a condition is fullfilled I don't need the input in Foo anymore and so I want to cancel cin.\n\n    {\n        auto lock = std::unique_lock&lt;std::mutex&gt;(m);\n        dataEnd = true;\n        sAvail.notify_all();\n        reader.detach();\n    }\n\n    // maybe something similar like these above\n}\n\nint main() {\n    std::thread r(Reader);\n    std::thread t1(Foo);\n    std::this_thread::sleep_for(std::chrono::milliseconds(5000));\n    std::thread t2(Bar, std::ref(r));\n\n    t1.join();\n    t2.join();\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6938024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/354c5341b9903d85c42886488f430df5?s=128&d=identicon&r=PG&f=1", "display_name": "mario.b", "link": "https://stackoverflow.com/users/6938024/mario-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1604, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487841419, "creation_date": 1487777534, "last_edit_date": 1487777986, "question_id": 42395777, "link": "https://stackoverflow.com/questions/42395777/how-to-stop-from-another-thread-stdcin-from-reading-anymore-input", "title": "How to stop, from another thread, std::cin from reading anymore input?", "body": "<p>I started two threads, <code>thread t1</code> is waiting for input via <code>cin</code>. Can I put something like an <code>EOF</code> bit to <code>cin</code> from <code>thread t2</code>to stop <code>cin</code> from reading? I tried <code>'\\n'</code> and <code>ios::eofbit</code>. Both did not work.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;condition_variable&gt;\n\nstd::condition_variable cv;\n\nvoid Foo()\n{\n    std::string sFoo;\n    std::cin &gt;&gt; sFoo;\n    // Do stuff with sFoo\n}\n\nvoid Bar()\n{\n    // Do stuff\n    // If a condition is fullfilled I don't need the input in Foo anymore and so I want to cancel cin.\n\n    std::cin.setstate(std::ios::setstate(std::ios::eofbit); // Does not work\n    std::cin.putback('\\n'); // Does not work\n\n    // maybe something similar like these above\n}\n\nint main()\n{\n    std::thread t1(Foo);\n    std::thread t2(Bar);\n}\n</code></pre>\n"}, {"tags": ["c++", "csv"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487777304, "post_id": 42395566, "comment_id": 71938447, "body": "Some good reading: <a href=\"http://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c\" title=\"how can i read and parse csv files in c\">stackoverflow.com/questions/1120140/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487778529, "post_id": 42395566, "comment_id": 71939387, "body": "@NathanOliver thanks, was trying to figure out why the alternative codes worked."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1487778439, "post_id": 42395632, "comment_id": 71939325, "body": "+1 -- where to find/learn  the following info?  <b>When you read a string using &gt;&gt;, it reads a space delimited string</b>  <b>as newline is a space</b>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1487779160, "post_id": 42395632, "comment_id": 71939901, "body": "@CowardlyDog For most information I usually go to <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">this reference wiki</a>. The <a href=\"http://en.cppreference.com/w/cpp/io\" rel=\"nofollow noreferrer\">input/output reference</a> have of course a section on <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream\" rel=\"nofollow noreferrer\"><code>std::basic_istream</code></a> (which is the base class for all input streams) which in turn have links to the <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt\" rel=\"nofollow noreferrer\">in-class member <code>operator&gt;&gt;</code> overload</a> as well as the <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2\" rel=\"nofollow noreferrer\">non-member <code>operator&gt;&gt;</code> overloads</a> (used for strings)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 1, "creation_date": 1487779234, "post_id": 42395632, "comment_id": 71939962, "body": "@CowardlyDog [Continued...] For reading strings, the last reference contains the text &quot;The extraction stops if one of the following conditions are met: ...a whitespace character ... is found.&quot; Ergo, reading strings is space-delimited. :)"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1487779347, "last_edit_date": 1487779347, "creation_date": 1487777146, "answer_id": 42395632, "question_id": 42395566, "link": "https://stackoverflow.com/questions/42395566/issues-with-ifstream-reading-csv-data/42395632#42395632", "title": "Issues with ifstream reading CSV data", "body": "<p>When you read a string using <code>&gt;&gt;</code>, it reads a <em>space delimited</em> string. If there is no space in the text you read, it will read until the end of the line (as newline is a space).</p>\n\n<p>Because of this the \"parsing\" of the input will after a little while be out of sync with the contents from the file, and will lead to an error when attempting to read one of the numbers.</p>\n"}], "owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "closed_date": 1487824916, "answer_count": 1, "score": -3, "last_activity_date": 1487779347, "creation_date": 1487777008, "question_id": 42395566, "link": "https://stackoverflow.com/questions/42395566/issues-with-ifstream-reading-csv-data", "closed_reason": "Not suitable for this site", "title": "Issues with ifstream reading CSV data", "body": "<p>Non-working code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\nint main(){\nint id; string name;char comma ; double money;\nifstream read(\"testfile.csv\");\n while (read &gt;&gt; id &gt;&gt; comma&gt;&gt; name &gt;&gt; comma &gt;&gt; money)\n {cout &lt;&lt; id &lt;&lt;comma&lt;&lt;name&lt;&lt;comma&lt;&lt;money&lt;&lt;  endl ;}\n read.close();\n _getch();\nreturn 0;}\n</code></pre>\n\n<p>The csv file data &amp; structure:</p>\n\n<p><code>1,user1,999\n 2,user2,33\n 3,user3,337</code></p>\n\n<p>But, the following works fine. Why so?</p>\n\n<p><code>while (read &gt;&gt; id &gt;&gt;comma&gt;&gt;name)\n     {cout &lt;&lt; id&lt;&lt;comma&lt;&lt;name &lt;&lt;endl ;}</code></p>\n"}, {"tags": ["c++", "image", "visual-c++", "sfml", "mandelbrot"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487776627, "post_id": 42395145, "comment_id": 71937958, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1487776758, "post_id": 42395145, "comment_id": 71938043, "body": "<i>when I try to save a 64k picture some problems come up</i>... And what exactly are these problems? You cannot expect anyone to give a valid answer with such a vague description."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487777261, "post_id": 42395145, "comment_id": 71938420, "body": "What picture format are you saving as: JPEG?  TIFF?  PNG?  GIF?  BMP? WMF? Are there any size limitations for the format you are using?"}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "edited": false, "score": 0, "creation_date": 1487778766, "post_id": 42395145, "comment_id": 71939576, "body": "I am sorry for the bad explaination. It was rather meant as a general question of how to save it properly (which file-format/methods). But I will upload my code shortly."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487779074, "post_id": 42395145, "comment_id": 71939820, "body": "<b>Q:</b> <i>how to save it properly (which file-format/methods)</i>? <b>A:</b> by writing the correct code for the file-format (jpeg, bmp, or whatever) you want. Sorry, but your question Is really too general, it&#39;s somewhat like asking: <i>How do I write a text processor?</i>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1487779989, "post_id": 42395145, "comment_id": 71940574, "body": "Did you run it with a debugger ?"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1487780006, "post_id": 42395145, "comment_id": 71940589, "body": "TIFF has an extension for extremely large images, and you want to be using that."}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487780643, "post_id": 42395145, "comment_id": 71941019, "body": "@MichaelWalz I used the debugger of Visual Studio 2015"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487781378, "post_id": 42395145, "comment_id": 71941554, "body": "And <b>where</b> did it crash ?"}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487781497, "post_id": 42395145, "comment_id": 71941629, "body": "@MichaelWalz It crashed at &quot;img.setPixel(xArray, yArray, sf::Color(tmp / maxIterations * 128, tmp / maxIterations * 128, tmp / maxIterations * 255, 255));&quot; (Line 75 in fillPixelArrayThreadFunc)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487782600, "post_id": 42395145, "comment_id": 71942373, "body": "@SgtDomo this looks like a problem in <code>img.setPixel</code> which is not your code. So it&#39;s certainly a bug or a limitation in SFML. Maybe you should compile your program as 64 bit program."}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487782981, "post_id": 42395145, "comment_id": 71942665, "body": "@MichaelWalz as far as I know I already compile it as a 64bit program"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487783476, "post_id": 42395145, "comment_id": 71942999, "body": "@SgtDomo I&#39;m compiling it as 32 bit and your program boils down allocating 4198498343 bytes which cannot be handled. BTW: have a look in the Visual Studio Output window: I&#39;m getting this message: <code>Exception thrown at 0x75BFC41F in testco.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0069F65C.</code>."}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487783681, "post_id": 42395145, "comment_id": 71943135, "body": "@MichaelWalz I think I&#39;m getting the same message (how I already said, it&#39;s unfortunately on german). But I&#39;m running it as debug with x64 which is 64bit, right?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487784137, "post_id": 42395145, "comment_id": 71943447, "body": "@SgtDomo, yes it&#39;s 64 bit. Try to step through the SFML code, but it&#39;s certainly some limitation. With 122&#39;880 * 69&#39;120 pixels (= 8&#39;493&#39;465&#39;600) and 3 bytes per pixel you need to allocate 25&#39;480&#39;396&#39;800 bytes ~24 Gb for the image and that&#39;s probably more than your system can handle. Just try <code>malloc(24000000000)</code> and look if that works."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "edited": false, "score": 0, "creation_date": 1487785887, "post_id": 42398775, "comment_id": 71944620, "body": "Thank you! I guess I have to find a different way to visualize it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "edited": false, "score": 0, "creation_date": 1487786099, "post_id": 42398775, "comment_id": 71944766, "body": "Creating several smaller images and stitching them together might be a way to go."}, {"owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "edited": false, "score": 0, "creation_date": 1487786202, "post_id": 42398775, "comment_id": 71944833, "body": "but I would still have to use something else to stitch them together, because even if I begin with smaller images, the size of the end-image won&#39;t change"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "edited": false, "score": 0, "creation_date": 1487787266, "post_id": 42398775, "comment_id": 71945468, "body": "Yes you need something else. Anyway this is not trivial. Maybe <a href=\"https://sites.google.com/site/openimageio/home\" rel=\"nofollow noreferrer\">this</a> helps."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1487785766, "creation_date": 1487785766, "answer_id": 42398775, "question_id": 42395145, "link": "https://stackoverflow.com/questions/42395145/visualizing-saving-an-extremely-large-number-of-pixels-with/42398775#42398775", "title": "Visualizing/saving an extremely large number of pixels with", "body": "<p>Your program fails during the call  <code>img.create(width, height, sf::Color::Black);</code>.</p>\n\n<p>When you step into the <code>sf::Image::create</code> function you end up here where the <code>newPixels</code> vector is created, this simply fails when <code>width * height</code> is too big as in your case:</p>\n\n<pre><code>////////////////////////////////////////////////////////////\nvoid Image::create(unsigned int width, unsigned int height, const Color&amp; color)\n{\n    if (width &amp;&amp; height)\n    {\n        // Create a new pixel buffer first for exception safety's sake\n        std::vector&lt;Uint8&gt; newPixels(width * height * 4);\n                                     ^61440* ^34560 = 8'493'465'600 bytes !!\n</code></pre>\n\n<p>Conclusion: SFML cannot handle huge images.</p>\n"}], "owner": {"reputation": 1, "user_id": 7605416, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-d1wqrKnkk18/AAAAAAAAAAI/AAAAAAAAABA/Sq2pbM9ixxU/photo.jpg?sz=128", "display_name": "SgtDomo", "link": "https://stackoverflow.com/users/7605416/sgtdomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488097837, "creation_date": 1487775929, "last_edit_date": 1488097837, "question_id": 42395145, "link": "https://stackoverflow.com/questions/42395145/visualizing-saving-an-extremely-large-number-of-pixels-with", "title": "Visualizing/saving an extremely large number of pixels with", "body": "<p>I made a program in C++ which calculates the <code>mandelbrot-set</code>. Now I want to visualize it (save it in a picture). But when I try to save a <code>64k</code> picture some problems come up. So what is the best way to save a picture of the pixels or at least to visual it?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>When I want to create a for Example <code>64K</code> (61440 * 34560) image there will be the error \"Access violation while writing at the position <code>0x0</code>...\" (originally on German and translated) and the program stops. This error appears with very high resolution. On lower resolutions the program works as it is supposed to.</p>\n\n<pre><code>#include &lt;SFML\\Graphics.hpp&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;complex&gt;\n#include &lt;cmath&gt;\n#include &lt;thread&gt;\n\n//4K :   3840 *  2160\n//8K :   7680 *  4320\n//16K:  15360 *  8640\n//32K:  30720 * 17280\n//64K:  61440 * 34560\n//128K:122880 * 69120\n\n\nconst unsigned long width  = 61440; //should be dividable by ratioX &amp; numberOfThreads!\nconst unsigned long height = 34560; //should be dividable by ratioY &amp; numberOfThreads!\n\nconst unsigned int maxIterations = 500;\n\nconst unsigned int numberOfThreads = 6;\n\nconst int maxWidth = width / 3;\nconst int maxHeight = height / 2;\nconst int minWidth = -maxWidth * 2;\nconst int minHeight = -maxHeight;\n\nconst double ratioX = 3.0 / width;\nconst double ratioY = 2.0 / height;\n\nsf::Image img = sf::Image();\n\n\nint getsGreaterThan2(std::complex&lt;double&gt; z, int noIterations) {\n    double result;\n    std::complex&lt;double&gt; zTmp = z;\n    std::complex&lt;double&gt; c = z;\n    for (int i = 1; i != noIterations; i++) {\n        zTmp = std::pow(z, 2) + c;\n        if (zTmp == z) {\n            return 0;\n        }\n        z = std::pow(z, 2) + c;\n        result = std::sqrt(std::pow(z.real(), 2) + std::pow(z.imag(), 2));\n        if (result &gt; 2) {\n            return i;\n        }\n    }\n    return 0;\n}\n\n\nvoid fillPixelArrayThreadFunc(int noThreads, int threadNr) { //threadNr ... starts from 0\n\n    double imgNumber;\n    double realNumber;\n\n    double tmp;\n\n    long startWidth = ((double)width) / noThreads * threadNr + minWidth;\n    long endWidth = startWidth + width / noThreads;\n\n    for (long x = startWidth; x &lt; endWidth; x++) {\n        imgNumber = x * ratioX;\n        for (long y = minHeight; y &lt; maxHeight; y++) {\n            realNumber = y * ratioY;\n            long xArray = x - minWidth;\n            long yArray = y - minHeight;\n            tmp = getsGreaterThan2(std::complex&lt;double&gt;(imgNumber, realNumber), maxIterations);\n            if (tmp == 0) {\n                img.setPixel(xArray, yArray, sf::Color(0, 0, 0, 255));\n            }\n            else {\n                img.setPixel(xArray, yArray, sf::Color(tmp / maxIterations * 128, tmp / maxIterations * 128, tmp / maxIterations * 255, 255));\n            }\n        }\n    }\n}\n\nint main() {\n    img.create(width, height, sf::Color::Black);\n\n    std::thread *threads = new std::thread[numberOfThreads];\n    for (int i = 0; i &lt; numberOfThreads; i++) {\n        threads[i] = std::thread(std::bind(fillPixelArrayThreadFunc, numberOfThreads, i));\n    }\n    for (int i = 0; i &lt; numberOfThreads; i++) {\n        threads[i].join();\n    }\n\n    img.saveToFile(\"filename.png\");\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "ternary-operator"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1487775900, "post_id": 42395118, "comment_id": 71937454, "body": "You&#39;re not asking about the type, you&#39;re asking about the value category!"}, {"owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487775964, "post_id": 42395118, "comment_id": 71937498, "body": "what is value category?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1487776599, "post_id": 42395118, "comment_id": 71937941, "body": "<code>v</code> is a reference - a reference to <code>v0</code>, so <code>v0</code> is what you are clearing through that reference."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1487776774, "post_id": 42395168, "comment_id": 71938057, "body": "(There are a few more details, since the spectrum of value categories is finer than I made it sound, and you can also have a <code>throw</code> in one of the operands. But this is the gist of it.)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487777304, "post_id": 42395168, "comment_id": 71938446, "body": "Here&#39;s a bit of subtle silliness. Consider <code>const int&amp; f(const int&amp; n) { return n; }</code>. We all know that <code>const int&amp; r = f(5);</code> is a dangling reference. Now consider <code>const int&amp; r = cond ? f(5) : f(-5);</code>. That&#39;s a dangling reference for the same reason. But <code>const int&amp; r = cond ? 5 : f(-5);</code> is not, because that conditional expression is a prvalue and the lifetime of the temporary is extended."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 15, "last_activity_date": 1487775981, "creation_date": 1487775981, "answer_id": 42395168, "question_id": 42395118, "link": "https://stackoverflow.com/questions/42395118/what-is-the-result-type-of-ternary-operation/42395168#42395168", "title": "what is the result (type) of ternary operation?", "body": "<p>The <em>type</em> of a conditional expression is the common type of the operands.</p>\n\n<p>But I think you aren't actually interested in that. What matters is what the <em>value category</em> of a conditional expression is.</p>\n\n<p>If both operands are, or can be converted to, lvalues of the common type, then the conditional expression is an lvalue; otherwise it is an rvalue (potentially requiring lvalue-to-rvalue conversion of one of the operands).</p>\n"}, {"comments": [{"owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "edited": false, "score": 0, "creation_date": 1487777066, "post_id": 42395554, "comment_id": 71938263, "body": "MSVC compiles. Compiler bug?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "edited": false, "score": 0, "creation_date": 1487777145, "post_id": 42395554, "comment_id": 71938315, "body": "@user1899020 Yes, but Microsoft prefers to refer to that bug as a &quot;compiler extension&quot;. Disable it, it&#39;s dangerous."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "edited": false, "score": 0, "creation_date": 1487778272, "post_id": 42395554, "comment_id": 71939170, "body": "@user1899020: No, it is not a bug, it is a <i>compiler extension</i>. <i>Everybody</i> refers to it as a compiler extension, not just Microsoft. (Because it is nothing else than a plain compiler extension, obviously.) And no, it is not in any way more dangerous than the standard C++ rule of lifetime extension for temporaries tied to const references. Microsoft extension simply makes const optional."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 2, "last_activity_date": 1487777282, "last_edit_date": 1487777282, "creation_date": 1487776969, "answer_id": 42395554, "question_id": 42395118, "link": "https://stackoverflow.com/questions/42395118/what-is-the-result-type-of-ternary-operation/42395554#42395554", "title": "what is the result (type) of ternary operation?", "body": "<p>The rules are found <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Conditional_operator\" rel=\"nofollow noreferrer\">here</a>:\nRelevant to your expression:</p>\n\n<pre><code>E1 ? E2 : E3\n</code></pre>\n\n<blockquote>\n  <p>4) If E2 and E3 are <a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">glvalues</a> of the same type and the same value\n  category, then the result has the same type and value category, and is\n  a bit-field if at least one of E2 and E3 is a bit-field.</p>\n</blockquote>\n\n<p>In your case:</p>\n\n<pre><code>true ? v0 : v1;\n</code></pre>\n\n<p><code>v0</code> and <code>v1</code> are <a href=\"http://en.cppreference.com/w/cpp/language/value_category#lvalue\" rel=\"nofollow noreferrer\">lvalues</a> (broadly <a href=\"http://en.cppreference.com/w/cpp/language/value_category#glvalue\" rel=\"nofollow noreferrer\">glvalue</a>).\nSo the return will be an <em>lvalue</em> <code>v0</code>. Hence, your expression will be equivalent to:</p>\n\n<pre><code>vector&lt;int&gt;&amp; v = v0;\n</code></pre>\n\n<hr>\n\n<p>As to your <strong>Edit</strong>:</p>\n\n<pre><code>vector&lt;int&gt;&amp; v = true ? v0 : vector&lt;int&gt;{3};\nv.clear(); // v0 will not be cleared\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/04da00b830af2c17\" rel=\"nofollow noreferrer\">Should <strong>not</strong> compile</a>, because the value category of the result will be an <code>rvalue</code>, and you cannot bind a <em>non-const reference</em> to an <code>rvalue</code></p>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 42395168, "answer_count": 2, "score": 7, "last_activity_date": 1487777613, "creation_date": 1487775880, "last_edit_date": 1487777613, "question_id": 42395118, "link": "https://stackoverflow.com/questions/42395118/what-is-the-result-type-of-ternary-operation", "title": "what is the result (type) of ternary operation?", "body": "<p>Does the ternary operation return a copy or reference?</p>\n\n<p>I checked the following code</p>\n\n<pre><code>vector&lt;int&gt; v0 = { 1, 2 };\nvector&lt;int&gt; v1 = { 3 };\n\nvector&lt;int&gt;&amp; v = true ? v0 : v1;\nv.clear(); // v0 will be cleared also\n</code></pre>\n\n<p>I think the ternary operation returns a copy of <code>v0</code>. And then pass it to <code>v</code>. Thus <code>v</code> and <code>v0</code> has different storage of data. Testing doesn't show it.</p>\n\n<p>Thanks, Kerrek SB! I add a \"should-not-compiled\" example (Thanks WhiZTiM!) to show the point.</p>\n\n<pre><code>vector&lt;int&gt;&amp; v = true ? v0 : vector&lt;int&gt;{3};\nv.clear(); // v0 will not be cleared\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pointers", "curl", "memory-leaks"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1487779966, "post_id": 42394988, "comment_id": 71940556, "body": "<code>curlHandle</code> doesn&#39;t appear to be initialized. As far as I can tell, you are passing random garbage to <code>curl_easy_setopt</code>."}, {"owner": {"reputation": 129, "user_id": 6760806, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/410mT.jpg?s=128&g=1", "display_name": "Kid", "link": "https://stackoverflow.com/users/6760806/kid"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1487780863, "post_id": 42394988, "comment_id": 71941190, "body": "Thanks I figured this out. And changed to <b>curlHandle = NULL;</b>  It seems it works fine. Since the error come at random  point in time I am bit doubt my initialisation. Is initialising <b>curlHandle</b> to <b>NULL</b> valid?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1487785420, "post_id": 42394988, "comment_id": 71944294, "body": "It&#39;s valid in the sense that it makes <code>openConnection</code> actually call <code>curl_easy_init()</code>. I bet it wasn&#39;t doing that before."}, {"owner": {"reputation": 129, "user_id": 6760806, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/410mT.jpg?s=128&g=1", "display_name": "Kid", "link": "https://stackoverflow.com/users/6760806/kid"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1487845000, "post_id": 42394988, "comment_id": 71971379, "body": "Sorry Igor it worked before getting initialised to NULL. It throws run time errors on and off only."}], "owner": {"reputation": 129, "user_id": 6760806, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/410mT.jpg?s=128&g=1", "display_name": "Kid", "link": "https://stackoverflow.com/users/6760806/kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487808326, "creation_date": 1487775515, "last_edit_date": 1487808326, "question_id": 42394988, "link": "https://stackoverflow.com/questions/42394988/curl-easy-opt-throws-exe-bad-access-or-malloc-pointer-being-freed-was-not-alloca", "title": "curl_easy_opt throws EXE_BAD_Access or malloc pointer being freed was not allocated error", "body": "<p>I have following run time error sometimes (not all the times)</p>\n\n<blockquote>\n  <p>malloc: <strong>* error for object 0x14: pointer being freed was not allocated\n  *</strong> set a breakpoint in malloc_error_break to debug</p>\n</blockquote>\n\n<p>else</p>\n\n<blockquote>\n  <p>EXE_BAD_ACCESS ( EXC_I386_GPFLT)</p>\n</blockquote>\n\n<p>on the same line of code.</p>\n\n<p>Please help me to solve this trouble.</p>\n\n<p>I have following structure for curl based server connector. \nin <strong>curlBasedServerConnector.cpp</strong> see the place where <strong>>>>ERROR POINTED HERE</strong> line appear. </p>\n\n<p>curlBasedServerConnector.hpp   </p>\n\n<pre><code> class curlBasedServerConnector  : public webServiceConnectorInterfaceA\n{\n\nprivate:\n    CURLcode curlCode;\n    CURL* curlHandle;        \n    char* messagePtr;\n    std::string message = \"\";        \n    static std::atomic&lt;int&gt; totalNumOfCurlProcesses;\n    static std::atomic&lt;bool&gt; isGlobalInitCalledAlready;\n    static std::mutex curlGlobalInitKey;   \n    static size_t writeContents_s(char *buf, size_t size, size_t nmemb, void *up)\n    {\n        curlBasedServerConnector* pThis = static_cast&lt;curlBasedServerConnector*&gt;(up);\n        return pThis-&gt;writeContents(buf, size, nmemb);\n    }    \n    // member version\n    size_t writeContents(char* buf, size_t size, size_t nmemb)\n    {\n        std::copy(buf, buf+(size*nmemb), std::back_inserter(message));\n        return size*nmemb;\n    }\n\npublic:\n\n    bool executeOperation()override ;\n\n    bool openConnection() override;\n\n    bool setHttpHeader(const char* contentType, const char* charSet)override;\n\n    bool setServerUrl(const char* url)override;\n\n    void setRequest(const char* request)override;\n\n    void closeConnection() override;\n    std::string getResponseAsString()override;\n\n    bool listenToNotification()override;\n\n    void setTrace(bool trace);\n\n    int getNumberofCurlProcessesInitialized();\n\n    curlBasedServerConnector()\n    {       \n        curlGlobalInitKey.lock();\n        {\n            if(!isGlobalInitCalledAlready)\n            {\n                curlCode = curl_global_init(CURL_GLOBAL_ALL);\n                cout&lt;&lt;\" Server Connector GLOBAL_INIT CALLED \"&lt;&lt;endl;\n                isGlobalInitCalledAlready = true;\n                totalNumOfCurlProcesses++;\n            }\n            else\n            {\n                totalNumOfCurlProcesses++;            \n            }            \n        }\n        curlGlobalInitKey.unlock();       \n        openConnection();        \n    }\n\n    virtual ~curlBasedServerConnector(){\n\n        curlGlobalInitKey.lock();        \n        totalNumOfCurlProcesses--;        \n        if(totalNumOfCurlProcesses == 0)\n        {          \n            curl_global_cleanup();      \n        }        \n        curlGlobalInitKey.unlock();      \n    }  \n\n};\n</code></pre>\n\n<p>curlBasedServerConnector.cpp</p>\n\n<pre><code>bool curlBasedServerConnector::openConnection(){\n    bool successStatus = false;\n\n    if(curlHandle )\n    {\n        cout&lt;&lt;\"curl hanlde --\"&lt;&lt;curlHandle&lt;&lt;endl;\n        successStatus = true;            \n    }\n    else\n    {\n        curlHandle = curl_easy_init();\n\n        if(curlHandle != NULL){\n\n            successStatus = true;\n        }\n    }\n\n    cout&lt;&lt;\"openConnection() CURL CODE \"&lt;&lt;curlCode&lt;&lt;endl;\n\n    return successStatus;\n}\n\nvoid curlBasedServerConnector::closeConnection(){\n     curl_easy_cleanup(curlHandle);\n}\n\n\nbool curlBasedServerConnector::setServerUrl(const char *url){\n\n    cout&lt;&lt;\"curl handle at setting url \"&lt;&lt;curlHandle&lt;&lt;endl;\n\n  curlCode = curl_easy_setopt(curlHandle, CURLOPT_URL,  url);  &gt;&gt;&gt;ERROR POINTED HERE\n\n    bool successStatus = false;\n\n    if(curlCode == 0 | curlCode == CURLE_OK)\n    {\n        successStatus = true;\n    }\n    else if (curlCode == 27 | curlCode == CURLE_OUT_OF_MEMORY){\n\n        exit(8);\n    }        \n    return successStatus;\n}\n</code></pre>\n\n<p>webServiceConnectorInterfaceA.hpp</p>\n\n<pre><code>class webServiceConnectorInterfaceA\n{\n\npublic:   \n\n    virtual bool openConnection() = 0;\n    virtual bool executeOperation()= 0; //\n    virtual bool setHttpHeader(const char* contentType, const char* charSet) = 0;\n\n    virtual bool setServerUrl(const char* url)=0;\n    virtual void setRequest(const char* request)=0;\n    virtual void closeConnection() = 0;\n    virtual bool listenToNotification() = 0;\n\n    virtual std::string getResponseAsString()=0;\n\n    webServiceConnectorInterfaceA(){ };\n\n     ~webServiceConnectorInterfaceA(){   };\n\n};\n</code></pre>\n\n<p>I have accessor class which compose this class as following </p>\n\n<pre><code>class webServiceAccessor{\nprivate:       \n    const char* serverAddress = \"http://localhost:2000\";        \n    std::shared_ptr&lt;sharedQueue&gt; gmsListenerQueue;\n    std::shared_ptr&lt;webServiceConnectorInterfaceA&gt; webServiceConnectorInterface;\n\nwebServiceAccessor(){}\n~webServiceAccessor(){} \n</code></pre>\n\n<p>}</p>\n\n<p>Why it throws such error on the same line ? \nWho cause this error <strong>curlBasedServerConnector class</strong> or <strong>class webServiceAccessor</strong> ? \nHow to solve this or debug this? \nI am using C++11 in Xcode IDE. \nThanks</p>\n\n<p>Trace when using malloc guard:</p>\n\n<pre><code> GuardMalloc[TIFAR2-5307]: Allocations will be placed on 16 byte boundaries.\nGuardMalloc[TIFAR2-5307]:  - Some buffer overruns may not be noticed.\nGuardMalloc[TIFAR2-5307]:  - Applications using vector instructions (e.g., SSE) should work.\nGuardMalloc[TIFAR2-5307]: version 108\nTIFAR2(5307,0x100c31000) malloc: protecting edges\nTIFAR2(5307,0x100c31000) malloc: stack logs being written into /tmp/stack-logs.5307.102c4c000.TIFAR2.M7TEpU.index\nTIFAR2(5307,0x100c31000) malloc: recording malloc and VM allocation stacks to disk using standard recorder\nTIFAR2(5307,0x100c31000) malloc: enabling scribbling to detect mods to free blocks\nTIFAR2(5307,0x100c31000) malloc: process 5239 no longer exists, stack logs deleted from /tmp/stack-logs.5239.102c4c000.TIFAR2.YFARFr.index\nWEB SERVICE CONNECTION STARTS HERE ......\n webServiceConnectorInterfaceA constructtor called \n.\n.\n.\n</code></pre>\n"}, {"tags": ["c++", "performance", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "edited": false, "score": 1, "creation_date": 1487775054, "post_id": 42394684, "comment_id": 71936789, "body": "Did you compile your program in Release mode? It took less than 10 ms on my computer."}, {"owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "reply_to_user": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "edited": false, "score": 0, "creation_date": 1487775729, "post_id": 42394684, "comment_id": 71937325, "body": "program is compiled in release mode with visual studio 2013 and as static library"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1487777237, "post_id": 42394684, "comment_id": 71938398, "body": "This is a very poor benchmark, you make only one measurement without any warmup. In this case, the time you obtained is dominated by all kinds of overhead unrelated to the algorithm you&#39;re actually trying to measure, and as such the result is meaningless. You need a statistically significant sample size. With 1000 iterations, the mean iteration time is around 1-2 ms on my 4930K (roughly what I would expect to see)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1487778748, "post_id": 42394684, "comment_id": 71939563, "body": "This is the sort of code which should benefit from AVX2, but is your OpenCV code compiled with that?"}], "owner": {"reputation": 141, "user_id": 3976246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ab4e7e123d0927f56d813fcf1d5eca5a?s=128&d=identicon&r=PG&f=1", "display_name": "Krustenkaese", "link": "https://stackoverflow.com/users/3976246/krustenkaese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487774764, "creation_date": 1487774764, "question_id": 42394684, "link": "https://stackoverflow.com/questions/42394684/opencv-performance-of-meanstddev", "title": "OpenCV Performance of meanStdDev", "body": "<p>I'm currently trying to build a realtime machine vision system with a camera framerate of 30 fps (33 ms per frame) meaning that my calculations shall take a maximum of 30 ms.<br>\nCalculating the mean and the standard deviation of a picture takes 140 ms with opencv on an <strong>Intel Core i7-4930K @ 3.40 GHz</strong>, which is too slow.<br>\nIs this performance usual for this function and is there a way to improve the performance to get faster than the needed 30 ms, preferably without the use of Cuda?</p>\n\n<p>Testcode:</p>\n\n<pre><code>int main()\n{\n    cv::Mat m = cv::Mat(1500, 2000, CV_8UC1);\n    cv::Scalar n1,n2;\n    int64 n3 = cv::getTickCount();\n    meanStdDev(m, n1, n2);\n    printf(\"%f\\n\", double(cv::getTickCount() - n3) / cv::getTickFrequency());\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "feature-extraction", "feature-detection"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1487775732, "post_id": 42394324, "comment_id": 71937331, "body": "not answer, but maybe you can try find all <b>normal</b> blood cell? (and the remained is not normal)"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 1, "creation_date": 1487776618, "post_id": 42394324, "comment_id": 71937952, "body": "I don&#39;t think feature extractors will help you. I would try filtering them based on shape. Read the docs for <a href=\"http://docs.opencv.org/2.4/modules/features2d/doc/common_interfaces_of_feature_detectors.html#simpleblobdetector\" rel=\"nofollow noreferrer\">SimpleBlobDetector</a>"}, {"owner": {"reputation": 1, "user_id": 7297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/560e1d6ab596329882e9b46c267b8e2a?s=128&d=identicon&r=PG&f=1", "display_name": "safwan olaimat", "link": "https://stackoverflow.com/users/7297872/safwan-olaimat"}, "edited": false, "score": 0, "creation_date": 1487777432, "post_id": 42394324, "comment_id": 71938549, "body": "do you have implemented code for normal blood cell or any idea how to do it ?"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1488825379, "post_id": 42394324, "comment_id": 72393900, "body": "Try resizing the image template and perform correlation over the source image."}], "owner": {"reputation": 1, "user_id": 7297872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/560e1d6ab596329882e9b46c267b8e2a?s=128&d=identicon&r=PG&f=1", "display_name": "safwan olaimat", "link": "https://stackoverflow.com/users/7297872/safwan-olaimat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487779050, "creation_date": 1487773847, "last_edit_date": 1487779050, "question_id": 42394324, "link": "https://stackoverflow.com/questions/42394324/opencv-how-to-match-multi-instance-of-templates-in-image-using-c", "title": "OpenCV - How to match multi-instance of templates in image using C++", "body": "<p>I need some help trying to match non-normal blood cell with original cell. \nAfter some searches I found SURF and SIFT feature extraction. </p>\n\n<p>I have this template; </p>\n\n<p><img src=\"https://i.stack.imgur.com/2t4e6.jpg\" alt=\"1\"></p>\n\n<p>and this original image;</p>\n\n<p><img src=\"https://i.stack.imgur.com/tnfOq.jpg\" alt=\"2\"></p>\n\n<p>This is my code: </p>\n\n<pre><code>int main(int argc, char** argv)\n{\n\nMat img_scene = imread(\"d:\\\\projimg\\\\last.jpg\", CV_LOAD_IMAGE_GRAYSCALE);\nMat img_object = imread(\"d:\\\\projimg\\\\lasttmp.jpg\", CV_LOAD_IMAGE_GRAYSCALE);\n//Mat img_object = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);\n//Mat img_scene = imread(argv[2], CV_LOAD_IMAGE_GRAYSCALE);\n\nif (!img_object.data || !img_scene.data)\n{\n    std::cout &lt;&lt; \" --(!) Error reading images \" &lt;&lt; std::endl; return -1;\n}\n\n//-- Step 1: Detect the keypoints using SURF Detector\nint minHessian = 200;\n\nSurfFeatureDetector detector(minHessian);\n\nstd::vector&lt;KeyPoint&gt; keypoints_object, keypoints_scene;\n\ndetector.detect(img_object, keypoints_object);\ndetector.detect(img_scene, keypoints_scene);\n\n//-- Step 2: Calculate descriptors (feature vectors)\nSurfDescriptorExtractor extractor;\n\nMat descriptors_object, descriptors_scene;\n\nextractor.compute(img_object, keypoints_object, descriptors_object);\nextractor.compute(img_scene, keypoints_scene, descriptors_scene);\n\n//-- Step 3: Matching descriptor vectors using FLANN matcher\nFlannBasedMatcher matcher;\nstd::vector&lt; DMatch &gt; matches;\nmatcher.match(descriptors_object, descriptors_scene, matches);\nmatches.resize(10);\nsort(matches.begin(), matches.end());\ndouble max_dist = 0; double min_dist = 100;\n\n//-- Quick calculation of max and min distances between keypoints\nfor (int i = 0; i &lt;matches.size(); i++)\n{\n    double dist = matches[i].distance;\n    if (dist &lt; min_dist) min_dist = dist;\n    if (dist &gt; max_dist) max_dist = dist;\n}\n\nprintf(\"-- Max dist : %f \\n\", max_dist);\nprintf(\"-- Min dist : %f \\n\", min_dist);\n\n//-- Draw only \"good\" matches (i.e. whose distance is less than 3*min_dist )\nstd::vector&lt; DMatch &gt; good_matches;\n\nfor (int i = 0; i &lt; matches.size(); i++)\n{\n    if (matches[i].distance &lt; 3 * min_dist)\n    {\n        good_matches.push_back(matches[i]);\n    }\n}\n\nMat img_matches;\ndrawMatches(img_object, keypoints_object, img_scene, keypoints_scene,\n    good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),\n    vector&lt;char&gt;(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS);\n\n//-- Localize the object\nstd::vector&lt;Point2f&gt; obj;\nstd::vector&lt;Point2f&gt; scene;\n\nfor (int i = 0; i &lt; good_matches.size(); i++)\n{\n    //-- Get the keypoints from the good matches\n    obj.push_back(keypoints_object[good_matches[i].queryIdx].pt);\n    scene.push_back(keypoints_scene[good_matches[i].trainIdx].pt);\n}\nimshow(\"ii\", img_matches);\nwaitKey();\nreturn 0;\n}\n</code></pre>\n\n<p>Can  anyone help me to match all similar templates ?</p>\n\n<p>Thanks all</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 2, "creation_date": 1487773354, "post_id": 42393975, "comment_id": 71935577, "body": "Remember as far as <code>val</code> is of type <code>double</code> or <code>float</code>, even if you assigned <code>val = 45</code>, you still have a floating point number, not a &quot;whole number&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 6433996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b468d7a420d3598d6a0e69d4cf985c?s=128&d=identicon&r=PG&f=1", "display_name": "SAlex", "link": "https://stackoverflow.com/users/6433996/salex"}, "is_accepted": false, "score": 1, "last_activity_date": 1487777701, "last_edit_date": 1487777701, "creation_date": 1487773534, "answer_id": 42394216, "question_id": 42393975, "link": "https://stackoverflow.com/questions/42393975/using-boostformat-print-only-2-digits-after-decimal/42394216#42394216", "title": "Using boost::format print only 2 digits after decimal", "body": "<p>You could try <a href=\"http://www.cplusplus.com/reference/cmath/modf/\" rel=\"nofollow noreferrer\"><code>modf</code></a> and check the fractional part for 0.00 and then use another formater. But beware, it's difficult to check for an exact value with floating point values.</p>\n\n<pre><code>somefunc()\n{\n  double intPart(0.0);      \n  double fracturedPart(modf(val, &amp;intPart));\n\n  if (fracturedPart == 0.0)\n  {\n    // zero formater\n  }\n  else\n  {\n    // decimal formater\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 899, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487777701, "creation_date": 1487772937, "question_id": 42393975, "link": "https://stackoverflow.com/questions/42393975/using-boostformat-print-only-2-digits-after-decimal", "title": "Using boost::format print only 2 digits after decimal", "body": "<p>I am using boost::format to print only 2 digits after decimal point for a float value and that too after rounding up. It's like this</p>\n\n<pre><code>#include &lt;boost/format.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace boost;\n\nsomefunc()\n{\n   format outFileFormatter(\"%1$.2f\");\n   cout &lt;&lt; outFileFormatter % val;\n}\n</code></pre>\n\n<p>It is working correctly for floating point values but for whole numbers also it's printing 0 after decimal point like 100 is 100.00 .\nIs there anyway to remove this extra 00 after decimal point.</p>\n\n<p>Thanks In Advance</p>\n"}, {"tags": ["c++", "dev-c++"], "comments": [{"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1487772964, "post_id": 42393874, "comment_id": 71935271, "body": "<a href=\"http://stackoverflow.com/questions/3884124/convert-a-console-app-to-a-windows-app\" title=\"convert a console app to a windows app\">stackoverflow.com/questions/3884124/&hellip;</a>"}, {"owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "reply_to_user": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1487773215, "post_id": 42393874, "comment_id": 71935469, "body": "@GoverNator That answer is for Visual Studio."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1487773785, "post_id": 42393874, "comment_id": 71935886, "body": "<code>project options -&gt; general</code>, change the type"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1487773864, "post_id": 42393874, "comment_id": 71935948, "body": "It should be project file, a cpp file will not contain any project settings, nor will it know it is GUI or console application."}, {"owner": {"reputation": 6270, "user_id": 2111515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8JoIY.jpg?s=128&g=1", "display_name": "Barry Michael Doyle", "link": "https://stackoverflow.com/users/2111515/barry-michael-doyle"}, "edited": false, "score": 0, "creation_date": 1488035974, "post_id": 42393874, "comment_id": 72058145, "body": "Removed tag from title and improved formatting"}], "answers": [{"tags": [], "owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "is_accepted": false, "score": 0, "last_activity_date": 1487773988, "creation_date": 1487773988, "answer_id": 42394385, "question_id": 42393874, "link": "https://stackoverflow.com/questions/42393874/how-to-change-file-type-between-windows-application-and-console/42394385#42394385", "title": "How to change file type between Windows Application and Console", "body": "<p>You need to specify the subsystem for your linker via the switch <strong>/SUBSYSTEM:CONSOLE</strong> . When doing so no WinMain() will expected any more. You should do this in the used makefile which was written / created by Dev C++.</p>\n"}], "owner": {"reputation": 1, "user_id": 7605227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-As1l8Ztf2_U/AAAAAAAAAAI/AAAAAAAAAPA/GFHceCZ2sfw/photo.jpg?sz=128", "display_name": "Reuben French", "link": "https://stackoverflow.com/users/7605227/reuben-french"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1488035974, "creation_date": 1487772678, "last_edit_date": 1488035974, "question_id": 42393874, "link": "https://stackoverflow.com/questions/42393874/how-to-change-file-type-between-windows-application-and-console", "title": "How to change file type between Windows Application and Console", "body": "<p>I think in my recent project I accidentally had one <code>cpp</code> file set up as a Windows application and the other <code>cpp</code> file as a console file. No matter what I did I ended up with weird errors saying I needed a <code>WinMain()</code> function, or that a <code>WinMain()</code> function was causing half-a-dozen errors. Does anybody know of a way to switch a Windows Application file's settings to a console application?</p>\n"}, {"tags": ["java", "c++", "swig"], "answers": [{"comments": [{"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1543531663, "post_id": 42402929, "comment_id": 93964092, "body": "Thank you so much for this code! It&#39;s been a while since I had to work with this, but I&#39;m back in this problem and tried your solution. It works for me."}, {"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 2, "creation_date": 1543531762, "post_id": 42402929, "comment_id": 93964114, "body": "It took me just a moment to realize I needed to remove the size argument from the Java code. I know you mention it here, but it didn&#39;t click for me immediately since the code wasn&#39;t shown. I&#39;m adding this comment in case other readers have the same problem... don&#39;t forget to update the Java sub-class."}, {"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1543618030, "post_id": 42402929, "comment_id": 93997684, "body": "Is there a reason <code>JCALL</code> is being used to call the JNI methods in four places but in a fifth place <code>jenv</code> is used directly (see the line <code>(jenv)-&gt;GetDoubleArrayRegion(...)</code>). I&#39;m wondering if this was a mistake or if it is intentional. Maybe <code>JCALL5</code> should be used???"}, {"owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1543628575, "post_id": 42402929, "comment_id": 93999781, "body": "I have now integrated this solution into my project. It works great! I made a couple small modifications for our particular use case, but the solution is almost identical. So this really is the solution that worked for me."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "edited": false, "score": 0, "creation_date": 1543663545, "post_id": 42402929, "comment_id": 94005277, "body": "Oh yes you&#39;re right, I missed that one and only tested  one a C++ compiler!"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 1, "last_activity_date": 1543531138, "last_edit_date": 1543531138, "creation_date": 1487800102, "answer_id": 42402929, "question_id": 42393651, "link": "https://stackoverflow.com/questions/42393651/passing-arrays-from-c-to-java-using-swig-directors-the-up-call/42402929#42402929", "title": "Passing arrays from C++ to Java using Swig directors, the up call", "body": "<p>I got this working with a bit of effort. The typemaps you found as a starting point are reasonable, but I think not complete. I don't think you can realistically write directorin/directorargout typemaps without having a matching in/jtype/jstype/jni/javadirectorin/javain one, because you very rapidly end up with mismatched expectations between various fragments of generated code. (The director code can call the regular Java class as well and also be called by it).</p>\n\n<p>Also, I think it's much better to use a multiargument typemap to condense the pointer and size arguments down to a single argument inside Java given that length is implicitly an attribute of an array in Java.</p>\n\n<p>So here's a quick summary of what I had to do to make it work:</p>\n\n<ol>\n<li>Firstly, your existing typemaps won't get applied to your code because they match on both argument type and argument name. <code>%apply</code> is the neat way to do this, particularly for multi-argument typemaps like these.</li>\n<li>Secondly, added corresponding typemaps for in rather than just directorin.</li>\n<li>Thirdly, added typemaps to pass <code>double[]</code> all the way through from C++ to Java via the proxy.</li>\n<li>Finally, because the type is now just <code>double[]</code> and an implicit size the test case needed updating to make sure it remained an override instead of an overload. For good measure I added <code>@Override</code>.</li>\n</ol>\n\n<p>And some stylistic changes I made because they're better code:</p>\n\n<ol>\n<li>Removed the casts from the typemap inputs to jdouble. At best they should be a no-op (<code>double*</code>-><code>jdouble*</code>), but at worst they're going to hide something untoward.</li>\n<li>Set the typemaps up to be within a block of their own. This means you can use the same typemap twice on the same function without clashing local variable names. (Although I removed the local variable in the end anyway)</li>\n<li>Used SWIG's JCALLx macros - this is clearly C++ code, but it's a habit I try to keep in when writing SWIG code.</li>\n</ol>\n\n<p>So in the end your SWIG interface looked like this:</p>\n\n<pre><code>%module(directors=\"1\") c_backend\n\n%{\n#include \"c_backend.h\"\n%}\n\n%typemap(jstype) (double *DOUBLE, size_t LENGTH) \"double[]\"\n%typemap(jtype) (double *DOUBLE, size_t LENGTH) \"double[]\"\n%typemap(jni) (double *DOUBLE, size_t LENGTH) \"jdoubleArray\"\n%typemap(javadirectorin) (double *DOUBLE, size_t LENGTH) \"$jniinput\"\n%typemap(javain) (double *DOUBLE, size_t LENGTH) \"$javainput\"\n%typemap(in,numinputs=1) (double *DOUBLE, size_t LENGTH) {\n  // Note the NULL here if you don't want to be making changes visible\n  $1 = JCALL2(GetDoubleArrayElements, jenv, $input, NULL);\n  $2 = JCALL1(GetArrayLength, jenv, $input);\n}\n%typemap(freearg) (double *DOUBLE, size_t LENGTH) {\n  // Swap 0 for JNI_ABORT if you don't want to make changes visible\n  JCALL3(ReleaseDoubleArrayElements, jenv, $input, $1, 0); \n}\n%typemap(directorin,descriptor=\"[D\") (double *DOUBLE, size_t LENGTH) { \n  $input = JCALL1(NewDoubleArray, jenv, $2); \n  JCALL4(SetDoubleArrayRegion, jenv, $input, 0, $2, $1); \n} \n%typemap(directorargout) (double *DOUBLE, size_t LENGTH) {\n  (jenv)-&gt;GetDoubleArrayRegion($input, 0, $2, $1); \n} \n\n%feature(\"director\") CallbackHandler;\n\n%apply (double *DOUBLE, size_t LENGTH) { (double *params, size_t size) };\n\n%include \"c_backend.h\"\n</code></pre>\n\n<p>Which was sufficient to make your test case work correctly with the aforementioned change to make it override instead of overload now.</p>\n"}], "owner": {"reputation": 10095, "user_id": 361855, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/68079962b0216cb8cf689ffe636555a8?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/361855/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 1, "accepted_answer_id": 42402929, "answer_count": 1, "score": 1, "last_activity_date": 1543531138, "creation_date": 1487772126, "last_edit_date": 1487784738, "question_id": 42393651, "link": "https://stackoverflow.com/questions/42393651/passing-arrays-from-c-to-java-using-swig-directors-the-up-call", "title": "Passing arrays from C++ to Java using Swig directors, the up call", "body": "<p>I have a C++ class with a virtual method. I'm using directors and I sub-classed the C++ class in Java. This class is for receiving callbacks from the C++ code. So the Java class is then passed to C++ and C++ calls methods on it (upcalls to Java). There are array arguments (or pointer arrays, I've tried both) and they get converted to SWIGTYPE_p_double.</p>\n\n<p>I would like to have a Java side type signature of double[] and of course have the contents of the array in that double[] argument (copying the contents is fine).</p>\n\n<p>How can I do this?</p>\n\n<p>I've tried it with the following code which I lifted from some email lists:</p>\n\n<p>c_backend.i:</p>\n\n<pre><code>%module(directors=\"1\") c_backend\n\n%{\n#include \"c_backend.h\"\n%}\n\n%typemap(directorin, descriptor=\"[D\") (double *DOUBLE, size_t LENGTH) { \n   jdoubleArray jd = (jenv)-&gt;NewDoubleArray($2); \n   (jenv)-&gt;SetDoubleArrayRegion(jd, 0, $2, (jdouble *)$1); \n   $input = jd; \n} \n%typemap(directorargout) (double *DOUBLE, size_t LENGTH) \n%{(jenv)-&gt;GetDoubleArrayRegion($input, 0, $2, (jdouble *)$1); %} \n\n%feature(\"director\") CallbackHandler;\n\n%include \"c_backend.h\"\n</code></pre>\n\n<p>c_backend.h:</p>\n\n<pre><code>#ifndef CALLBACK_HANDLER_H\n#define CALLBACK_HANDLER_H\n\n#include &lt;stdio.h&gt;\n\n\nclass CallbackHandler {\n  public:\n    virtual ~CallbackHandler() {}\n    virtual void statusUpdate( double *params, size_t size ) {\n        printf(\"in C++ statusUpdate\\n\");\n    }\n};\n\n\nclass Server {\n  public:\n    void doSomething( CallbackHandler * );\n};\n\n#endif\n</code></pre>\n\n<p>c_backend.cpp:</p>\n\n<pre><code>#include \"c_backend.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid Server::doSomething( CallbackHandler *ch ) {\n    double *params = (double *)malloc(3*sizeof(double));\n    params[0] = 1.1;\n    params[1] = 2.2;\n    params[2] = 3.3;\n    printf(\"In doSomthing\\n\");\n    ch-&gt;statusUpdate(params,3);\n    printf(\"exiting doSomthing\\n\");\n}\n</code></pre>\n\n<p>JavaFrontend.java:</p>\n\n<pre><code>public class JavaFrontend {\n    static {\n        System.loadLibrary(\"CBackend\");\n    }\n    public static void main( String[] args ) {\n        JFCallbackHandler jf = new JFCallbackHandler();\n        new Server().doSomething(jf);\n    }\n\n    public static class JFCallbackHandler extends CallbackHandler {\n        public void statusUpdate( double params[], long size ) {\n            System.out.println(\"Java got params: \"+params);\n        }\n    }\n}\n</code></pre>\n\n<p>And a Makefile to compile:</p>\n\n<pre><code>JAVA_INCLUDE=-I/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home/include -I/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home/include/darwin\n\nall:\n    c++ -c c_backend.cpp\n    swig -java -c++ $(JAVA_INCLUDE) c_backend.i\n    c++ $(JAVA_INCLUDE) -c c_backend_wrap.cxx\n    c++ -dynamiclib -o libCBackend.jnilib *.o -framework JavaVM\n    javac *.java\n\nclean:\n    rm -rf *.class *.o *_wrap.cxx *_wrap.h Server.java SWIGTYPE*.java c_backend*.java CallbackHandler.java\n</code></pre>\n\n<p>Swig -version:</p>\n\n<blockquote>\n  <p>SWIG Version 3.0.8</p>\n  \n  <p>Compiled with clang++ [x86_64-apple-darwin15.2.0]</p>\n  \n  <p>Configured options: +pcre</p>\n  \n  <p>Please see <a href=\"http://www.swig.org\" rel=\"nofollow noreferrer\">http://www.swig.org</a> for reporting bugs and further\n  information</p>\n</blockquote>\n"}, {"tags": ["c++", "cmake", "clang++", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1487788080, "post_id": 42393627, "comment_id": 71946006, "body": "You could probably get what you want by using a custom target and using <code>clang --build &lt;dir&gt; --target &lt;tgt&gt;</code>. But why waste your time? Just use a wrapper around the two <code>scan-build</code> steps."}, {"owner": {"reputation": 3908, "user_id": 1398841, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/s8gQQ.png?s=128&g=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/1398841/phoenix"}, "reply_to_user": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1487790465, "post_id": 42393627, "comment_id": 71947398, "body": "I also like <code>cmake --build</code> because it keeps all of the generated files nicely tucked away in a folder rather than putting them all in the root of the project."}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1487792287, "post_id": 42393627, "comment_id": 71948443, "body": "you have control over that too w/o using <code>--build</code>. i keep my source and build directories side-by-side. then you can just do <code>cd myproj&#47;build; cmake ..&#47;src&#47;</code>"}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1487795166, "post_id": 42393627, "comment_id": 71950046, "body": "You should anyway use out-of-source builds. Having files in your source directory isn&#39;t a good argument."}], "answers": [{"tags": [], "owner": {"reputation": 5642, "user_id": 2137996, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dYdyn.jpg?s=128&g=1", "display_name": "Alex Reinking", "link": "https://stackoverflow.com/users/2137996/alex-reinking"}, "is_accepted": false, "score": 0, "last_activity_date": 1614540213, "creation_date": 1614540213, "answer_id": 66413032, "question_id": 42393627, "link": "https://stackoverflow.com/questions/42393627/can-clang-static-analyzer-scan-build-be-used-with-cmake-build/66413032#66413032", "title": "Can clang static analyzer (scan-build) be used with cmake --build?", "body": "<p>If you want to use the Clang Static Analyzer, you should just set <code>CMAKE_EXPORT_COMPILE_COMMANDS=YES</code>. This will create a <em>compilation database</em> that CSA can read. You don't even need to build your project. The file is located at: <code>/path/to/build/compile_commands.json</code>.</p>\n<p><code>scan-build</code> is designed for projects that can't create a compilation database themselves.</p>\n<p>Then you can run:</p>\n<pre><code>analyze-build --cdb /path/to/build/compile_commands.json \\\n              --use-analyzer /path/to/clang \\\n              --output /path/to/output\n</code></pre>\n<p>It's worth noting that <code>clang-tidy</code> has all of the CSA checks now. You can use this same compilation database technique to run <code>clang-tidy</code> on your codebase.</p>\n"}], "owner": {"reputation": 3908, "user_id": 1398841, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/s8gQQ.png?s=128&g=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/1398841/phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2188, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1614540213, "creation_date": 1487772075, "last_edit_date": 1495542716, "question_id": 42393627, "link": "https://stackoverflow.com/questions/42393627/can-clang-static-analyzer-scan-build-be-used-with-cmake-build", "title": "Can clang static analyzer (scan-build) be used with cmake --build?", "body": "<p>I'd like to use the clang static analyzer command line tool <a href=\"https://clang-analyzer.llvm.org/scan-build.html\" rel=\"noreferrer\"><code>scan-build</code></a> with the convenience of <a href=\"https://cmake.org/cmake/help/latest/manual/cmake.1.html#build-tool-mode\" rel=\"noreferrer\"><code>cmake --build</code></a>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/21785566/1398841\">Most</a> of the <a href=\"http://baptiste-wicht.com/posts/2014/04/install-use-clang-static-analyzer-cmake.html\" rel=\"noreferrer\">resources</a> I found online seem to indicate you need a two-step process:</p>\n\n<pre><code>scan-build cmake .\nscan-build make\n</code></pre>\n\n<p>For example for this small example program with a bug that <code>scan-build</code> catches:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint fun() {\n    int x;\n    return x; # main.cpp:5:5: warning: Undefined or garbage value returned to caller\n\n}\n\nint main() {\n    int a = fun();\n\n    std::cout &lt;&lt; \"Hello, World! \" &lt;&lt; a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(test_program)\n\nset(CMAKE_CXX_STANDARD 11)\n\nset(SOURCE_FILES main.cpp)\nadd_executable(test_program ${SOURCE_FILES})\n</code></pre>\n\n<p>If I run <code>scan-build cmake --build cmake-build-release/</code> it does not find the bug, even though the binary is built. Is there anyway to get <code>scan-build</code> to work in a one step process with CMake?</p>\n"}, {"tags": ["c++", "vector", "std"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1487771902, "post_id": 42393502, "comment_id": 71934460, "body": "use <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\">std::transform</a>, and then profile to make sure it is actually a bottleneck before trying to optimize it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1487771990, "post_id": 42393502, "comment_id": 71934516, "body": "Whatever you do, call <code>reserve</code> on <code>somenumbers</code> before you add anything to it."}], "answers": [{"tags": [], "owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "is_accepted": true, "score": 3, "last_activity_date": 1487772646, "last_edit_date": 1487772646, "creation_date": 1487771935, "answer_id": 42393557, "question_id": 42393502, "link": "https://stackoverflow.com/questions/42393502/c-copy-elements-from-an-object-vector-into-a-vector-with-this-element/42393557#42393557", "title": "C++ Copy elements from an object vector into a vector with this element", "body": "<p>What do you mean fastest? Just loop, or algorithm, or something else. For example:</p>\n\n<pre><code>std::transform\n(\n    foos.begin(), foos.end(), std::back_inserter(somenumbers),\n    [](const Foo&amp; v) { return v.a; }\n);\n</code></pre>\n\n<p>Also, since you know size of vector - you should call<a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\">reserve</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 3, "last_activity_date": 1487772395, "last_edit_date": 1495541812, "creation_date": 1487772067, "answer_id": 42393621, "question_id": 42393502, "link": "https://stackoverflow.com/questions/42393502/c-copy-elements-from-an-object-vector-into-a-vector-with-this-element/42393621#42393621", "title": "C++ Copy elements from an object vector into a vector with this element", "body": "<pre><code>somenumbers.reserve(foos.size());\nfor(const auto&amp; f : foos) somenumbers.emplace_back(f.a);\n</code></pre>\n\n<hr>\n\n<p>If you're doing this operation multiple times in your codebase, introduce an abstraction:</p>\n\n<pre><code>template &lt;typename TRange, typename TF&gt;\nauto map_vector(TRange&amp;&amp; range, TF&amp;&amp; f)\n{\n    using type = std::decay_t&lt;decltype(f(*std::begin(range)))&gt;;\n\n    std::vector&lt;type&gt; result;\n    result.reserve(range.size());\n\n    for(auto&amp;&amp; x : range) result.emplace_back(forward_like&lt;TRange&gt;(x));\n    return result;\n}\n</code></pre>\n\n<p><em>(<a href=\"https://stackoverflow.com/questions/29779825/perfect-forwarding-container-element\"><code>forward_like</code> can be found here</a>.)</em></p>\n\n<p>Usage:</p>\n\n<pre><code>auto somenumbers = map_vector(foos, [](const auto&amp; x){ return x.a; });\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5735003, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b71443b255d3f93435644f47a225c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Shedex", "link": "https://stackoverflow.com/users/5735003/shedex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 42393557, "answer_count": 2, "score": 0, "last_activity_date": 1487776055, "creation_date": 1487771827, "last_edit_date": 1487776055, "question_id": 42393502, "link": "https://stackoverflow.com/questions/42393502/c-copy-elements-from-an-object-vector-into-a-vector-with-this-element", "title": "C++ Copy elements from an object vector into a vector with this element", "body": "<p>I want to copy the <code>a</code> values from the <code>foos</code> vector into another vector with just the <code>int</code> value. What's the fastest way to do this?</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct Foo {\n   int a;\n};\n\nint main() {\n   std::vector&lt;Foo&gt; foos;\n   for(int i = 0; i &lt; 100; i++)\n      foos[i].a = i;\n\n   std::vector&lt;int&gt; somenumbers;\n   //Fastest way to copy the ints from the struct into the somenumbers vector?  \n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1487770796, "post_id": 42393086, "comment_id": 71933578, "body": "Tip: <b>Read</b> the error messages."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1487770872, "post_id": 42393086, "comment_id": 71933628, "body": "A C++ program consists of <i>keywords</i> and <i>identifiers</i>. Learn what the keywords are. You can use keywords freely, but you must not use <i>any</i> identifier unless you have proven to yourself that that identifier has been declared in your program."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1487770886, "post_id": 42393086, "comment_id": 71933640, "body": "what is string? You don&#39;t have anything defining it."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 1, "creation_date": 1487770968, "post_id": 42393086, "comment_id": 71933697, "body": "you probably forgot <code>#include &lt;string&gt;</code>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487771632, "post_id": 42393086, "comment_id": 71934232, "body": "@Michael Chen  Though some compilers include the header &lt;string&gt; into the header &lt;iostream&gt; nevertheless you should explicitly include headers where the types you are using are declared."}, {"owner": {"reputation": 13, "user_id": 7203067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f48dc84f5c43dd17f9e14d30bdd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chen", "link": "https://stackoverflow.com/users/7203067/michael-chen"}, "edited": false, "score": 0, "creation_date": 1488200479, "post_id": 42393086, "comment_id": 72112386, "body": "thanks for your advices"}], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487771502, "post_id": 42393184, "comment_id": 71934109, "body": "It seems, you forgot to include the Bible."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487771700, "post_id": 42393184, "comment_id": 71934298, "body": "Well, Stroustrup book is not bad, as an introduction to C++"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487771805, "post_id": 42393184, "comment_id": 71934387, "body": "Not all will agree with you."}, {"owner": {"reputation": 13, "user_id": 7203067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f48dc84f5c43dd17f9e14d30bdd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chen", "link": "https://stackoverflow.com/users/7203067/michael-chen"}, "edited": false, "score": 0, "creation_date": 1488200367, "post_id": 42393184, "comment_id": 72112305, "body": "thanks a lot guys I&#39;ve just started to learn C+\uff0b with C++ Primer"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1487771014, "creation_date": 1487771014, "answer_id": 42393184, "question_id": 42393086, "link": "https://stackoverflow.com/questions/42393086/c-invalid-operands-to-binary-expression/42393184#42393184", "title": "c++ : invalid operands to binary expression", "body": "<p>Read more about C++. So read first <a href=\"http://www.stroustrup.com/Programming/\" rel=\"nofollow noreferrer\">Programming -- Principles and Practice Using C++</a>.</p>\n\n<p>Then read <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">C++ reference</a> documentation, notably the one about <a href=\"http://en.cppreference.com/w/cpp/string\" rel=\"nofollow noreferrer\">std::string</a>-s.</p>\n\n<p>You need to <code>#include &lt;string&gt;</code></p>\n\n<p>You should enable all warnings when compiling. If using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>, compile with <code>g++ -Wall -g</code></p>\n"}, {"tags": [], "owner": {"reputation": 1068, "user_id": 4560200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WayWyP-f_aw/AAAAAAAAAAI/AAAAAAAAAAA/lBR8FcVg-6E/photo.jpg?sz=128", "display_name": "James B. Nall", "link": "https://stackoverflow.com/users/4560200/james-b-nall"}, "is_accepted": false, "score": 0, "last_activity_date": 1487772248, "creation_date": 1487772248, "answer_id": 42393703, "question_id": 42393086, "link": "https://stackoverflow.com/questions/42393086/c-invalid-operands-to-binary-expression/42393703#42393703", "title": "c++ : invalid operands to binary expression", "body": "<p>You don't need that <code>string</code> before the actual string:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"hello world\";\n    return 0;\n}\n</code></pre>\n\n<p>Or, alternatively, if you're trying to store a string:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    string str = \"hello world\";\n    cout &lt;&lt; str;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7203067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f48dc84f5c43dd17f9e14d30bdd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chen", "link": "https://stackoverflow.com/users/7203067/michael-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "closed_date": 1487801875, "accepted_answer_id": 42393184, "answer_count": 2, "score": -4, "last_activity_date": 1487772248, "creation_date": 1487770751, "question_id": 42393086, "link": "https://stackoverflow.com/questions/42393086/c-invalid-operands-to-binary-expression", "closed_reason": "Not suitable for this site", "title": "c++ : invalid operands to binary expression", "body": "<p>I don't know what's wrong here ?\nIt's just running errors !!!</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; string(\"hello world\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "tcp", "non-printing-characters"], "comments": [{"owner": {"reputation": 1274, "user_id": 7031374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7659ba8c1b8d7ca94fbbea972be8946?s=128&d=identicon&r=PG&f=1", "display_name": "Erik \u0160\u0165astn&#253;", "link": "https://stackoverflow.com/users/7031374/erik-%c5%a0%c5%a5astn%c3%bd"}, "edited": false, "score": 2, "creation_date": 1487770540, "post_id": 42392969, "comment_id": 71933408, "body": "TCP is working with bytes so values 0-255 regardless if they are printable of nonprintable characters. Choose totally different aproach. Put all into one message with header."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1487770668, "post_id": 42392969, "comment_id": 71933499, "body": "Yes, TCP is quite happy with binary data.Share the relevant sections of both your client and server/"}, {"owner": {"reputation": 31, "user_id": 7475619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1d2027540e69522a5e26917a6fafea?s=128&d=identicon&r=PG&f=1", "display_name": "dido22", "link": "https://stackoverflow.com/users/7475619/dido22"}, "reply_to_user": {"reputation": 1274, "user_id": 7031374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7659ba8c1b8d7ca94fbbea972be8946?s=128&d=identicon&r=PG&f=1", "display_name": "Erik \u0160\u0165astn&#253;", "link": "https://stackoverflow.com/users/7031374/erik-%c5%a0%c5%a5astn%c3%bd"}, "edited": false, "score": 0, "creation_date": 1487770708, "post_id": 42392969, "comment_id": 71933523, "body": "@Erik\u0160\u0165astn&#253; But does select also works with 0-255 values ?"}, {"owner": {"reputation": 1274, "user_id": 7031374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7659ba8c1b8d7ca94fbbea972be8946?s=128&d=identicon&r=PG&f=1", "display_name": "Erik \u0160\u0165astn&#253;", "link": "https://stackoverflow.com/users/7031374/erik-%c5%a0%c5%a5astn%c3%bd"}, "edited": false, "score": 0, "creation_date": 1487770893, "post_id": 42392969, "comment_id": 71933644, "body": "We dont know which classes or dlls are you using for communication.We can not know what is select? is some method or what? But TCP has nothing to do with characters. TCP is sending and receiving arrays of bytes. for example i am using in my app this format: <code>4bytes length of message, 4 bytes ID message, xxxx bytes of data</code> and this is one message sended via TCP"}, {"owner": {"reputation": 1274, "user_id": 7031374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7659ba8c1b8d7ca94fbbea972be8946?s=128&d=identicon&r=PG&f=1", "display_name": "Erik \u0160\u0165astn&#253;", "link": "https://stackoverflow.com/users/7031374/erik-%c5%a0%c5%a5astn%c3%bd"}, "edited": false, "score": 1, "creation_date": 1487771251, "post_id": 42392969, "comment_id": 71933891, "body": "if you want any help you will have to post code."}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1487771834, "post_id": 42392969, "comment_id": 71934406, "body": "IMHO your problem has nothing to do with your use of non-printable characters.  Try send some printable characters back and forward, to see if that works.  If still fails, then printable or not is irrelevant.  Suggestion: find a tutorial with a working example and start from there."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1487774398, "post_id": 42392969, "comment_id": 71936325, "body": "TCP has no real concept of messages, but only of stream. That means that it ensures that all bytes sent by one side will reach other side in same order, but messages can be concatenated (one read for more than one message) or read by chunk (many reads for one single message). But it transfers any byte with no special meaning..."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1274, "user_id": 7031374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7659ba8c1b8d7ca94fbbea972be8946?s=128&d=identicon&r=PG&f=1", "display_name": "Erik \u0160\u0165astn&#253;", "link": "https://stackoverflow.com/users/7031374/erik-%c5%a0%c5%a5astn%c3%bd"}, "edited": false, "score": 0, "creation_date": 1487776312, "post_id": 42392969, "comment_id": 71937766, "body": "@Erik\u0160\u0165astn&#253; TCP works with octets.  These are often called bytes, but C++ (and also C) have a different definition of &quot;byte&quot; (specifically &quot;the size of a char&quot;, which can be 9 or 16 or 32 bits) and this question is tagged C++."}], "answers": [{"comments": [{"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 80313, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1487774392, "post_id": 42393498, "comment_id": 71936321, "body": "@osgx UDP has no retransmission mechanism, but you can add your own. TCP has no reliable flushing mechanism, and workarounds tend to suck. Pick your poison."}], "tags": [], "owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "is_accepted": false, "score": 4, "last_activity_date": 1487771815, "creation_date": 1487771815, "answer_id": 42393498, "question_id": 42392969, "link": "https://stackoverflow.com/questions/42392969/does-tcp-support-non-printable-characters/42393498#42393498", "title": "Does TCP support non-printable characters?", "body": "<p>TCP is entirely a binary protocol. It defines a packet header which follows the IP datagram header. A continuous data-stream is divided into packets so it (hopefully) goes smoothly from point A to point B. The stream comprises arbitrary octets (bytes).</p>\n\n<p>Are you sure that the only difference between the messages is the initial byte value, <code>$01</code> vs <code>$03</code>? Perhaps the message size is different? Perhaps one instance does something to flush the stream? Perhaps the messages are being sent in sequence on a session?</p>\n\n<p>If you need to quickly transmit short, discrete messages, UDP might help prevent surprising latencies.</p>\n"}], "owner": {"reputation": 31, "user_id": 7475619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1d2027540e69522a5e26917a6fafea?s=128&d=identicon&r=PG&f=1", "display_name": "dido22", "link": "https://stackoverflow.com/users/7475619/dido22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487771815, "creation_date": 1487770453, "question_id": 42392969, "link": "https://stackoverflow.com/questions/42392969/does-tcp-support-non-printable-characters", "title": "Does TCP support non-printable characters?", "body": "<p>I'm new to the TCP/IP protocol, and would like to create a server for a chat, in C++.</p>\n\n<p>For now, I decided to begin all my transmissions with a character to tell what's next (a login request, a message to post, the user-name of a client, ...).</p>\n\n<p>So, I use values like 0x01, 0x02, ... for what is related to login, information request, ... and 0x10 for the messages.</p>\n\n<p>Hopelessly, when I try to connect to my server with another program I created, I receive one transmission from the server, which begin by 0x01 (so all is still OK), but then when I reply with something beginning by 0x03, the server only receive it when I kill the client...</p>\n\n<p>I think that it's the select function that doesn't say that there's something to read.</p>\n\n<p>Is that normal ?</p>\n\n<p>And if yes, should I replace this values by values that are printable and does not have a special meaning ?</p>\n"}, {"tags": ["c++", "methods", "arguments"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1487769952, "post_id": 42392738, "comment_id": 71932959, "body": "is it part of the state of the object or only used in the context of that single member function?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1487770005, "post_id": 42392738, "comment_id": 71933003, "body": "imho your example isnt the best, because for what you are doing I wouldnt write a class at all"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 2, "creation_date": 1487770185, "post_id": 42392738, "comment_id": 71933155, "body": "There is no one answer to this kind of question. It all depends on the circumstances and you didn&#39;t show them. I understand this is because you want a general guideline for how to program, but there aren&#39;t any - you have to think and consider the situation in every case and make the decision based on the arguments."}, {"owner": {"reputation": 3477, "user_id": 3531894, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1668290480/picture?type=large", "display_name": "Jodo", "link": "https://stackoverflow.com/users/3531894/jodo"}, "reply_to_user": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 1, "creation_date": 1487770911, "post_id": 42392738, "comment_id": 71933658, "body": "@slawekwin Yes, I was looking for some general guideline. But &quot;there is no general guideline to this&quot;, is also an answer, which helps me. Even thou the question most definitely does not have a very positive resonance, thank you for your reply."}], "answers": [{"tags": [], "owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "is_accepted": true, "score": 1, "last_activity_date": 1487772128, "creation_date": 1487772128, "answer_id": 42393652, "question_id": 42392738, "link": "https://stackoverflow.com/questions/42392738/methods-using-arguments-vs-member-variables/42393652#42393652", "title": "Methods using arguments vs member variables", "body": "<p>The class in OOP is something which describes an object. Take a real world object for example, a car. The car can have functions like <code>accelerate_to_speed(double speed);</code> and some members like <code>Color color;</code>. The methods are something the object does and the members describe the object or show possession (the car can have an engine <code>Engine engine;</code>). The whole concept of what is a member and what is a method lies at a foundation of object oriented programming and is not dependent upon language but the language is dependant upon it.</p>\n\n<p>You could still write a class car in this way:</p>\n\n<pre><code>class Car {\n    ...\n    double target_speed;\n    ...\n    void set_target_speed(double speed) {\n        target_speed = speed;\n    }\n    void accelerate_to_speed() {\n        current_speed = target_speed;\n    }\n    ...\n}\n</code></pre>\n\n<p>And the language would allow it but what does it mean? Is the car described by what the target speed is? What does the target speed mean if the car is not used?</p>\n"}], "owner": {"reputation": 3477, "user_id": 3531894, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/1668290480/picture?type=large", "display_name": "Jodo", "link": "https://stackoverflow.com/users/3531894/jodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1487801850, "accepted_answer_id": 42393652, "answer_count": 1, "score": -5, "last_activity_date": 1487772128, "creation_date": 1487769823, "last_edit_date": 1487769961, "question_id": 42392738, "link": "https://stackoverflow.com/questions/42392738/methods-using-arguments-vs-member-variables", "closed_reason": "Needs more focus", "title": "Methods using arguments vs member variables", "body": "<p>I am often wondering what is considered \"better\" when I write a class method and want to pass arguments to this method.</p>\n\n<ol>\n<li><p>Option: using member variables</p>\n\n<pre><code>class Foo {\n    public:\n        int x, y, result;\n\n        void SomeMethod()\n        {\n            x = 4;\n            y = 10;\n            AddMethod();\n        }\n\n        void AddMethod()\n        {\n            result = x + y;\n        }\n}\n</code></pre></li>\n<li><p>Option: passing arguments</p>\n\n<pre><code>class Foo {\n    public:\n        int result;\n\n        void SomeMethod()\n        {\n            result = AddMethod(4, 14);\n        }\n\n        int AddMethod(int x, int y)\n        {\n            return (x + y);\n        }\n}\n</code></pre></li>\n</ol>\n\n<p>Personally I usually tend to use the second option, because to me it is more readable and comprehensible. What would be the correct reasoning to use one or the other code? </p>\n"}, {"tags": ["c++", "namespaces", "argument-dependent-lookup"], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 5, "last_activity_date": 1487770083, "last_edit_date": 1487770083, "creation_date": 1487769772, "answer_id": 42392717, "question_id": 42392621, "link": "https://stackoverflow.com/questions/42392621/function-lookup-and-namespaces/42392717#42392717", "title": "function lookup and namespaces", "body": "<p>Actually, there is no order among the namespaces for ADL. All relevant namespaces are searched, and all functions thus found form the set of candidates for overload resolution.</p>\n\n<p>Also note that unlike what you say in the question, ADL is performed even when a function <em>is</em> found by unqualified lookup in the calling scope. The union of unqualified lookup and ADL is then used to find the best overload.</p>\n\n<p>ADL is only suppressed if unqualified lookup at calling scope finds a class member, a non-function, or a block-scope non-<code>using</code> declaration.</p>\n\n<p>The relevant rules are in C++14 3.4.2 [basic.lookup.argdep]. Quoting N4140, bold emphasis mine:</p>\n\n<blockquote>\n  <p>3 Let <em>X</em> be the lookup set produced by unqualified lookup (3.4.1) and let <em>Y</em> be the lookup set produced by\n  argument dependent lookup (defined as follows). If <em>X</em> contains</p>\n  \n  <ul>\n  <li>a declaration of a class member, or</li>\n  <li>a block-scope function declaration that is not a using-declaration, or</li>\n  <li>a declaration that is neither a function or a function template</li>\n  </ul>\n  \n  <p>then <em>Y</em> is empty. Otherwise <em>Y</em> is the set of declarations found in the namespaces associated with the\n  argument types as described below. <strong>The set of declarations found by the lookup of the name is the union of\n  <em>X</em> and <em>Y</em>.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 42392717, "answer_count": 1, "score": 2, "last_activity_date": 1487770225, "creation_date": 1487769510, "last_edit_date": 1487769823, "question_id": 42392621, "link": "https://stackoverflow.com/questions/42392621/function-lookup-and-namespaces", "title": "function lookup and namespaces", "body": "<p>If a function cannot be found in the scope where it is called, looking up in the namespaces of its arguments will follow. I have a few questions.</p>\n\n<ol>\n<li><p>If there are several arguments in different namespaces, which namespace will be first looked up? Is it the namespace of the first argument?</p>\n\n<pre><code>f(A::T t, B:U u); // Is namespace A looked up first?\n</code></pre></li>\n<li><p>More complex for template classes, like</p>\n\n<pre><code>f(A::T&lt;B::U&gt; t); // Namespace A or B is looked up first?\n</code></pre></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1487769789, "post_id": 42392610, "comment_id": 71932828, "body": "Getter\\Setter isn&#39;t C++ style I think."}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 4, "creation_date": 1487769799, "post_id": 42392610, "comment_id": 71932834, "body": "Note that your static-variable-approach is significantly different because it does not work in situations where you would have at least two instances of <code>XXX</code>."}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1487769880, "post_id": 42392610, "comment_id": 71932895, "body": "You may find relevant information with &quot;Singleton pattern&quot;, &quot;Singleton antipattern&quot; and &quot;Observer pattern&quot;"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 7, "creation_date": 1487770050, "post_id": 42392610, "comment_id": 71933038, "body": "AFAIK In C++, we call the getter/setter function as &#39;property&#39;. ... No we do not. :)"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1487770169, "post_id": 42392610, "comment_id": 71933134, "body": "It is called Callback ...."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1487773143, "post_id": 42392610, "comment_id": 71935414, "body": "@knivil Indeed, contrast c#, where a property is a shared identifier for a (pair of) unnamed get and/or set member functions, or delphi where a property is a name by which you can access named member functions or fields (of the appropriate type), or java where by convention a getFoo() setFoo() pair can be called a property Foo (but this isn&#39;t a language element)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1487773835, "post_id": 42392610, "comment_id": 71935931, "body": "@Caleth A &quot;property&quot; in Delphi/C++ Builder (among other rad tools) only refers to member variables, not functions. I guess the key here is that &quot;property&quot; is not a formally defined term."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487775234, "post_id": 42392610, "comment_id": 71936937, "body": "@Lundin properties are a language element of delphi see <a href=\"http://docwiki.embarcadero.com/RADStudio/Seattle/en/Properties#Property_Access\" rel=\"nofollow noreferrer\">docwiki.embarcadero.com/RADStudio/Seattle/en/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1487775421, "post_id": 42392610, "comment_id": 71937095, "body": "@Caleth Which is just a fancy fluff way of saying public member variables that can have certain restricted values."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1487775440, "post_id": 42392610, "comment_id": 71937109, "body": "@yeputons Yes I know it will not work for multiple-instances situation, I&#39;ve googled the term you gave, it is not what I wanted however. :( I&#39;ve reworded my question, hope it will be more clear about what I&#39;m looking for this time..."}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1487776045, "post_id": 42393442, "comment_id": 71937560, "body": "I&#39;m not sure about the property, but I think you misunderstood my question. I was asking for name/term of <code>XXX_Width()</code>, which behaves like getter/setter but not inside a class, and it is intentionally not for multiple-instances neither, the XXX it modifies is single-instance only."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1487776276, "post_id": 42393442, "comment_id": 71937742, "body": "@raymai97 It&#39;s just a plain function. It is not part of any particular well-known design pattern. Probably because it is a rather bad design..."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1487771661, "creation_date": 1487771661, "answer_id": 42393442, "question_id": 42392610, "link": "https://stackoverflow.com/questions/42392610/is-there-a-name-for-non-oop-version-of-property/42393442#42393442", "title": "Is there a name for non-OOP version of &#39;property&#39;?", "body": "<p>Lots of confusion about terminology here. </p>\n\n<p>OOP simply means that you have autonomous classes with their functionality encapsulated. Both your examples use OO, though if they are bad or good design is another matter.</p>\n\n<blockquote>\n  <blockquote>\n    <p>Now I found static variable can be used to implement similar thing, in a non-OOP fashion:</p>\n  </blockquote>\n</blockquote>\n\n<p>There is nothing non-OOP with your example. It is however probably bad OO design, since multiple instances of your class may access that same function. It is also bad design from a thread-safety perspective.</p>\n\n<p>Sometimes, using static variables locally is perfectly fine though, like for example when implementing \"singleton\" classes.</p>\n\n<blockquote>\n  <p>In C++, we call the getter/setter function as 'property'</p>\n</blockquote>\n\n<p>No, that is not a common term. Getter/setter functions are called members, or member functions. Or possibly public member functions, since by definition those must be public. Another term used for them is <em>methods</em>.</p>\n\n<p>The term property is most often used to describe public member <em>variables</em>. Often RAD tools use the term property for such variables.</p>\n\n<blockquote>\n  <p>My question is, is there a name or term for this kind of functions?</p>\n</blockquote>\n\n<p>A function which is specified by the caller, but called by someone else (the class, the OS, an interrupt etc) is universally called <em>callback function</em>. This is a fairly broad term.</p>\n\n<p>In your case, you seem to use callback functions like \"events\" - an event is a kind of callback function but a higher level concept. Code like your example could be used for so-called \"event-driven design\", which is also popular among RAD tools.</p>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1487773334, "post_id": 42393936, "comment_id": 71935567, "body": "<code>XXX&amp; Width(int)</code> would be a &quot;fluent setter&quot;, as you could chain a bunch of calls to similarly defined members like <code>xxx.Width(10).Height(5).Color().oops_no_argument(now_im_call&zwnj;&#8203;ing_some_other_type)</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1487773973, "post_id": 42393936, "comment_id": 71936027, "body": "@Caleth I&#39;ve never heard that term, but I could see the same thing being being accomplished by <code>XXX_Width</code>. So perhaps that is the term being sought?"}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1487775672, "post_id": 42393936, "comment_id": 71937284, "body": "Thanks for answering, however &#39;static local variable&#39; is not what I&#39;m looking for. What I like to know is the term we use for function like <code>XXX_Width()</code>, which behaves like getter/setter but not inside a class."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1487776900, "post_id": 42393936, "comment_id": 71938131, "body": "@raymai97 Defining a <code>static</code> local variable is a common practice in Object Oriented C [sic], in order to simulate member variables or properties. But even in such a case where such a concept is common, it is simply referred to as a <code>static</code> local variable. I believe that this is as close as you&#39;re going to get to what you&#39;re looking for. So I would say: <b>There isn&#39;t a closer term to answer my understanding of your question.</b>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1487772848, "last_edit_date": 1592644375, "creation_date": 1487772848, "answer_id": 42393936, "question_id": 42392610, "link": "https://stackoverflow.com/questions/42392610/is-there-a-name-for-non-oop-version-of-property/42393936#42393936", "title": "Is there a name for non-OOP version of &#39;property&#39;?", "body": "<p>The 1<sup>st</sup> point that should be made is that your &quot;property block&quot; or &quot;getter/setter&quot; are non-conformant. <a href=\"https://en.wikipedia.org/wiki/Mutator_method#C.2B.2B_example\" rel=\"nofollow noreferrer\">The expected declarations</a> look like:</p>\n<pre><code>int Width() const;\nvoid Width(const int);\n</code></pre>\n<p>So when you change the setter to: <code>XXX&amp; Width(int)</code> it becomes clear that you aren't talking about &quot;property blocks&quot; or &quot;getter/setters&quot;. So let's talk about what your setter does look like:</p>\n<ol>\n<li>It makes a call <em>after</em> <code>width</code> changes. Such a call would typically be an <a href=\"https://en.wikipedia.org/wiki/Interrupt\" rel=\"nofollow noreferrer\"><strong>interupt</strong></a> or a <a href=\"http://doc.qt.io/qt-5/signalsandslots.html\" rel=\"nofollow noreferrer\"><strong>signal</strong></a></li>\n<li>It returns a non-<code>const</code> reference to the object. This is the behavior of an <a href=\"https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B\" rel=\"nofollow noreferrer\"><strong>operator</strong></a> which notably <em>do</em> have outside class versions</li>\n</ol>\n<p>Now let's talk about your function: <code>int XXX_Width(bool set = false, int val = 0)</code> You've set it up with <a href=\"https://en.wikipedia.org/wiki/Default_argument\" rel=\"nofollow noreferrer\"><strong>default arguments</strong></a> such that it could behave as either the setter or the getter in your example, notwithstanding the weirdness of your getter's return.</p>\n<p>Given the distinction between the 2 options you present, you seem to be asking:</p>\n<h1>Is there a name for using a functions <code>static</code> variable instead of defining a function and providing getter/setters for a member variable?</h1>\n<p>A function scoped <code>static</code> variable is called a <a href=\"https://en.wikipedia.org/wiki/Local_variable#Static_local_variables\" rel=\"nofollow noreferrer\"><strong><code>static</code> local variable</strong></a>.</p>\n<p>One word of wisdom on <code>static</code> local variables:</p>\n<blockquote>\n<p>A static local variable is different from a local variable as a static local variable is initialized only once no matter how many times the function in which it resides is called and its value is retained and accessible through many calls to the function in which it is declared <sup>[<a href=\"https://en.wikipedia.org/wiki/Static_variable#Scope\" rel=\"nofollow noreferrer\">source</a>]</sup></p>\n</blockquote>\n"}], "owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487775083, "creation_date": 1487769487, "last_edit_date": 1487775083, "question_id": 42392610, "link": "https://stackoverflow.com/questions/42392610/is-there-a-name-for-non-oop-version-of-property", "title": "Is there a name for non-OOP version of &#39;property&#39;?", "body": "<p>AFAIK In C++, we call the getter/setter function as 'property'.\nThe getter/setter is used to get/set a member variable.\nOne of the advantages of doing this is that we can listen for change, like this:</p>\n\n<pre><code>// In header:\nclass XXX {\n    int m_width{};\n\n    void OnWidthChanged() {\n    // do something...\n    }\n\npublic:\n    int Width() const {\n        return m_width;\n    }\n    void Width(int val)\n        m_width = val;\n        this-&gt;OnWidthChanged();\n    }\n};\n// In CPP:\nXXX my_xxx;\nmy_xxx.Width(123);\ncout &lt;&lt; my_xxx.Width() &lt;&lt; endl;\n</code></pre>\n\n<p>Now I found static variable can be used to implement similar thing, <strike>in a non-OOP fashion</strike> I know it cannot handle multiple-instance, so let's just assume XXX is an object that has only 1 instance.</p>\n\n<pre><code>// In header:\nint XXX_Width(bool set = false, int val = 0);\nvoid XXX_OnWidthChanged();\n// In CPP:\nint XXX_Width(bool set, int val) {\n    static int width = 0;\n    if (set) {\n        width = val;\n        XXX_OnWidthChanged();\n    }\n    return width;\n}\n\nXXX_Width(true, 123);\ncout &lt;&lt; XXX_Width() &lt;&lt; endl;\n</code></pre>\n\n<p>My question is, is there <strong>a name or term for</strong> <strike> this kind of functions </strike> <strong>functions like <code>XXX_Width()</code></strong>?\nI'm looking for a name so I can google search for related information.\nI'm <em>not</em> asking for name for <code>OnWidthChanged()</code>.</p>\n"}, {"tags": ["c++", "multithreading", "threadpool"], "comments": [{"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1487769601, "post_id": 42392601, "comment_id": 71932700, "body": "Why the &quot;threadpool&quot; tag? I don&#39;t see anything in your question related to threadpools."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1487770553, "post_id": 42392601, "comment_id": 71933422, "body": "This is a question about an unnamed specific application. Nobody can answer your question without looking into that application."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487773137, "post_id": 42392601, "comment_id": 71935411, "body": "What do you mean by daemon thread? And have you looked up what std::thread::detach does?"}, {"owner": {"reputation": 2946, "user_id": 1488118, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/74638bb1fe3873f2c5d1d31ac6cdafe2?s=128&d=identicon&r=PG", "display_name": "bweber", "link": "https://stackoverflow.com/users/1488118/bweber"}, "edited": false, "score": 1, "creation_date": 1487847309, "post_id": 42392601, "comment_id": 71972970, "body": "Once a detached <code>std::thread</code> ends execution, its resources will be released."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2674995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1130995912/picture?type=large", "display_name": "Pankaj Goyal", "link": "https://stackoverflow.com/users/2674995/pankaj-goyal"}, "edited": false, "score": 0, "creation_date": 1487941365, "post_id": 42394906, "comment_id": 72022544, "body": "Yes, I am referring to this same example. But I still did not get the answer that when a thread is detached, what is the life time of that thread. Does the memory for detached thread is freed once the execution ended will it remain till the lifetime of process?"}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1487775322, "creation_date": 1487775322, "answer_id": 42394906, "question_id": 42392601, "link": "https://stackoverflow.com/questions/42392601/detach-stdthread-running-in-background/42394906#42394906", "title": "detach std::thread running in background", "body": "<p>I think you're talking about the book <a href=\"https://rads.stackoverflow.com/amzn/click/com/1933988770\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Practical Multithreading</a>. The writer there was just giving an example of how threads can be useful and how detach can be used.</p>\n\n<p>The writer didn't intend on covering every corner case. He just was giving an example on how detaching threads could be used. It's up to you how to deal with limited resources. It's like giving you an M6 screw and a screw-driver, and then you decide what to do with them. You can use the screw for a lamp, or a computer, or even maybe misuse it and put it in an M5 hole and break stuff. The context of using the screw and the screw-driver is a different one, and me giving an example about a lamp doesn't mean I'm explaining how a lamp works and it's electricity consumption, just like the context of having multiple threads is different than how you manage resources. It's up to you and up to your application's special case. </p>\n"}], "owner": {"reputation": 93, "user_id": 2674995, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1130995912/picture?type=large", "display_name": "Pankaj Goyal", "link": "https://stackoverflow.com/users/2674995/pankaj-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487775322, "creation_date": 1487769465, "question_id": 42392601, "link": "https://stackoverflow.com/questions/42392601/detach-stdthread-running-in-background", "title": "detach std::thread running in background", "body": "<p>I was reading about the C++ threading. I encounter a example where an DocumentEditor was created. In the document editor whenever user opens a new document a new thread is created and that thread is immediately detached. </p>\n\n<p>That detached thread would become a deamon thread when the document editing task will complete. </p>\n\n<p>So my question is that if the user keeps the application opens for days and keep on creating new documents say 100s of them than the deamon thread count will keep on increasing ?</p>\n\n<p>Or the deamons will be destroyed when the process is less on resources ?</p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487769514, "post_id": 42392549, "comment_id": 71932636, "body": "Why are you managing pointers yourself? That&#39;s error prone."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1487769582, "post_id": 42392549, "comment_id": 71932690, "body": "Three things: Why do you use a pointer to pointer to <code>Frame</code> instead of <code>std::vector&lt;Frame&gt;</code>? Then why don&#39;t you use initializer lists? And why do you dynamically allocate the <code>Buf</code> object in your <code>main</code> function?"}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 5, "creation_date": 1487769601, "post_id": 42392549, "comment_id": 71932699, "body": "Suggestion: if you believe that the <code>Frame</code> class is unrelated to the problem, replace it with <code>int</code>, add <code>main</code>, and you&#39;ve got an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> which will significantly help in diagnostics."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1487769675, "post_id": 42392549, "comment_id": 71932749, "body": "That&#39;s too much simplification, we cannot reproduce the error from that code. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1487769689, "post_id": 42392549, "comment_id": 71932761, "body": "Symptoms look like you mishandled pointers <i>somewhere</i> in your program. Note that if that happened, it&#39;s undefined behavior and <i>anything</i> can happen afterwards, including random changes of random variables in random lines in debugger."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487769691, "post_id": 42392549, "comment_id": 71932762, "body": "All, a. fixed the ; b. agree vector is safer, but it should not prevent my code to work. c. Will try d. I am getting there - for now I am just asking for any suggestions - I was not able to find so far the minimal reproducible code"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1487769981, "post_id": 42392549, "comment_id": 71932976, "body": "Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function and at least one <code>#include</code>. Please <a href=\"https://stackoverflow.com/posts/42392549/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem, then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487770447, "post_id": 42392549, "comment_id": 71933342, "body": "@Someprogrammerdude some people want to actually understand an issue and not scrap the whole thing in favor of a library just because they can&#39;t figure it out."}, {"owner": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487770525, "post_id": 42392549, "comment_id": 71933393, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 there&#39;s nothing wrong with managing pointers. It isn&#39;t as if it&#39;s so complicated that it&#39;s impossible."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "edited": false, "score": 0, "creation_date": 1487770877, "post_id": 42392549, "comment_id": 71933632, "body": "@Erix It&#39;s error prone though. At the end you may reinvent the wheel and write your own classes for <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">dynamic memory management</a>, to overcome all these problems introduced with using <code>new</code> and <code>delete</code> directly?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "edited": false, "score": 1, "creation_date": 1487770895, "post_id": 42392549, "comment_id": 71933647, "body": "@Erix <code>std::vector</code> is not just part of any old library, it&#39;s part of the <i>standard</i> library. All C++ compilers comes with it. It contains a lot of thing that will make every C++ programmers life easier, and makes the code easier to read, understand and maintain. If I was a teacher and this is part of a school assignment, and it&#39;s <i>not</i> about pointers, then I would give the person giving me this code a very low grade."}, {"owner": {"reputation": 159, "user_id": 2659899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300dea0056c76cd5f71d88245b7930e0?s=128&d=identicon&r=PG", "display_name": "TeaMonkie", "link": "https://stackoverflow.com/users/2659899/teamonkie"}, "edited": false, "score": 0, "creation_date": 1487771376, "post_id": 42392549, "comment_id": 71933996, "body": "I think we are missing information needed to answer the problem. The <code>Frame</code> class might be small and have no memory operations, but might actually be part of the problem."}, {"owner": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487771522, "post_id": 42392549, "comment_id": 71934127, "body": "@Someprogrammerdude I&#39;m glad you weren&#39;t my teacher. I learned memory management much more intimately by avoiding libraries. Sure STL is great, but to answer a programming question about memory by suggesting to simply avoid it is not helpful."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "edited": false, "score": 0, "creation_date": 1487771887, "post_id": 42392549, "comment_id": 71934450, "body": "@Erix <b><i>If</i></b> it was an exercise in manual memory management then yes using pointers would be mandatory. But if not, then <i>don&#39;t do it</i>. As we don&#39;t know if this is such a manual memory management exercise, the best advice is going to be to not use pointers."}, {"owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487772333, "post_id": 42392549, "comment_id": 71934797, "body": "@Someprogrammerdude &quot;you&#39;re an idiot, don&#39;t do X&quot; (paraphrased) is not usually the best way to convince someone of the wrongness of their ways. Instead, try &quot;your attempt at X fails because of these reasons. As an aside, getting X right is complicated; you might prefer method Y or method Z instead&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "edited": false, "score": 0, "creation_date": 1487772535, "post_id": 42392549, "comment_id": 71934957, "body": "@WouterVerhelst But we <i>can&#39;t</i> say &quot;this fails because...&quot;, because there&#39;s simply not enough information. We can <i>guess</i> that there is a problem with memory, and such problems are generally solved by removing the use of pointers. But that&#39;s all we can really say for now."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487772732, "post_id": 42392549, "comment_id": 71935082, "body": "I understand, I am just asking for suggestions on what to look at further - I don&#39;t expect the solution."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487772781, "post_id": 42392549, "comment_id": 71935127, "body": "At the moment, I recompiled the code on another computer (with identical OS/compiler, etc.) and I am not getting this error so far - continue to try"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487772808, "post_id": 42392549, "comment_id": 71935159, "body": "@Alex A debugger, and something like <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a> are the best tools to help you find memory issues, if you don&#39;t want to change your code to not use pointers."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487772882, "post_id": 42392549, "comment_id": 71935200, "body": "I am using XCode, their debugger is pretty good. Also, tried Eclipse/GDB, but having a bit of an issue making it work (another topic :))"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487773506, "post_id": 42392549, "comment_id": 71935679, "body": "I hear Valgrind works in OS X these days. That should be the first tool to use. More often than not it will tell you what your problem is right away."}, {"owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "edited": false, "score": 0, "creation_date": 1487773546, "post_id": 42392549, "comment_id": 71935711, "body": "@Alex yeah, but XCode&#39;s dependency tracker is pretty shit. I&#39;ve noticed that sometimes it does things like that, and then all you need to do is &quot;project-&gt;clean&quot;, &quot;project-&gt;build&quot;, and it magically disappears. Did you try that?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487773898, "post_id": 42392549, "comment_id": 71935972, "body": "If you have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please post it. If you can&#39;t produce one, and you expect suggestions on how to debug the problem, please mention it is the question so that people stop close-voting it."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487778132, "post_id": 42392549, "comment_id": 71939059, "body": "Yes, I tried to clean/rebuild, also had the same issue from Eclipse as well as from the command line. I now rebuild the project on another computer and cannot reproduce the problem."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487778175, "post_id": 42392549, "comment_id": 71939100, "body": "n.m. - I asked for suggestions - please see my original post. Thanks"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487783540, "post_id": 42392549, "comment_id": 71943042, "body": "You probably should say something along these lines. &quot;I don&#39;t have a minimal example that reproduces the problem. I&#39;m not looking for an answer that would point out a bug in this specific program. I want to know how I can debug this kind of problem myself&quot;. Makes your question absolutely clear. (Again, the answer to this is &quot;use valgrind&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1487769982, "post_id": 42392740, "comment_id": 71932979, "body": "True, but very unclear if that is the actual problem. Most likely not because that would be a compilation error. We should wait for that MCVE."}, {"owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487770265, "post_id": 42392740, "comment_id": 71933207, "body": "@BaummitAugen it is very unclear indeed, but based on the minimal amount of code given, seems like an obvious candidate. It would be a compilation error if Frames <i>did not exist</i>; but since we&#39;re using pointers here and not vectors or safe pointers some such, and depending on the used compiler and its settings, this may &quot;only&quot; be a warning but compile just fine. However, If sizeof(Frames) &lt; sizeof(Frame), this will go horribly horribly wrong."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487770358, "post_id": 42392740, "comment_id": 71933282, "body": "<i>&quot;but based on the minimal amount of code given, seems like an obvious candidate.&quot;</i> And that&#39;s why I suggest we wait until the question is in an answerable state."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487770437, "post_id": 42392740, "comment_id": 71933326, "body": "@Someprogrammerdude It&#39;s <code>Frame**</code> in the declaration vs <code>Frames*</code> in the <code>new[]</code> expression. Note the extra &#39;s&#39;. Misread that too at first."}, {"owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "edited": false, "score": 0, "creation_date": 1487772618, "post_id": 42392740, "comment_id": 71935003, "body": "My apologies, corrected it in the question: it is of course new Frame*[size]"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487772635, "post_id": 42392740, "comment_id": 71935015, "body": "If this was the problem it would have been a build error, not a run-time problem."}, {"owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487772768, "post_id": 42392740, "comment_id": 71935111, "body": "@Someprogrammerdude there are plenty of creative ways in which this would compile correctly but still result in a run-time problem. All depends on things like compiler in use, its version, the settings being used, and whether Frames exists or what it does. Pointers have &quot;interesting&quot; properties :-)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1487772809, "post_id": 42392740, "comment_id": 71935162, "body": "Also, <i>&quot;If sizeof(Frames) &lt; sizeof(Frame), this will go horribly horribly wrong.&quot;</i>: Not really, we would need <code>sizeof(Frame*) != sizeof(Frames*)</code> for that to be an issue, and that&#39;s uncommon at least."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487772927, "post_id": 42392740, "comment_id": 71935238, "body": "@WouterVerhelst True, and it could easily be that there <i>was</i> a <code>Frames</code> class or structure in the code, but that the OP just didn&#39;t show us."}], "tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 0, "last_activity_date": 1487769825, "creation_date": 1487769825, "answer_id": 42392740, "question_id": 42392549, "link": "https://stackoverflow.com/questions/42392549/strange-memory-behaviour-c/42392740#42392740", "title": "Strange memory behaviour - C++", "body": "<pre><code>frames = new Frames*[size];\n</code></pre>\n\n<p>that's wrong, the \"frames\" variable is defined as pointer to pointer to <code>Frame</code>, not pointer to pointer to <code>Frames</code>.</p>\n"}], "owner": {"reputation": 303, "user_id": 6621955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204968935503263/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6621955/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487778426, "creation_date": 1487769346, "last_edit_date": 1487778426, "question_id": 42392549, "link": "https://stackoverflow.com/questions/42392549/strange-memory-behaviour-c", "title": "Strange memory behaviour - C++", "body": "<p>I have a very strange issue in a seemingly simple code (For debugging purposes, I simplified it now to pretty much this code):</p>\n\n<pre><code>class Buf {\n   Frame ** frames;\n\n   Buf(int a);\n   int a;\n   long b, c, d\n\n}\nBuf::Buf(int size){\n\n   a = size;\n   frames = new Frame*[size]; \n\n   for (int f = 0; f &lt; size; ++f){\n       frames[f] = new Frame;\n   }\n\n   b = c = d = 5; // (***)\n}\n</code></pre>\n\n<p>Frame class is very simple and small, I disabled any memory operations in its constructor/destructor.</p>\n\n<p>In <code>main</code> I am calling:</p>\n\n<pre><code>Buf* buf =  new Buf(50);\n</code></pre>\n\n<p>Once in a while it works fine, but most of the time it works ok until the (***) line, then when I pass this line as I can see in the debugger, the *frame, frame[1], etc. become equals to 5 (!) or whatever other number I put in the assignment.</p>\n\n<p>If I try to run it from the command line, it tells me about bad memory access. </p>\n\n<p>As I said, I simplified my program to be extremely trivial, still cannot find an error. </p>\n\n<p>Any suggestions/help would be fantastic!</p>\n\n<p>UPDATE: </p>\n\n<p>I copied the code to another computer (with similar configuration) and I cannot reproduce the problem there. On the original computer, I can reproduce the problem, whether I run the project from XCode or Eclipse/command line (different copies of the code). </p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1487769465, "post_id": 42392540, "comment_id": 71932600, "body": "I suspect that you wanted: <code>Derived d; Base&amp; b = d;</code>"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1487769537, "post_id": 42392540, "comment_id": 71932653, "body": "@PiotrSkotnicki No, I actually want pointers."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1487769570, "post_id": 42392540, "comment_id": 71932675, "body": "If that was allowed you could say <code>b = new Base;</code>. and <code>d</code> would point to an unrelated object."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1487771854, "post_id": 42392540, "comment_id": 71934422, "body": "Where exactly is the location of the memory used? Derived* d{}; creates a null pointer. What you can do, of course, would be Derived der; Derived* p_der = &amp;der; Base* p_bas = p_der;, why not do that?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1487772268, "post_id": 42392540, "comment_id": 71934743, "body": "That is not assignment or initialization, that is <i>aliasing</i> and you can&#39;t <i>alias</i> a <code>Derived*</code> with a <code>Base*&amp;</code>."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1487778376, "post_id": 42392540, "comment_id": 71939266, "body": "Is this a homework question where they want you to use virtual functions so that <code>Derived</code> can provide implementations of &quot;set()&quot; operations that are accessible through <code>Base</code>?"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1487779868, "post_id": 42392540, "comment_id": 71940478, "body": "@Peter No it&#39;s not. The error occurred in real code. I distilled the issue to make a it a very simple (may be overly simplified) complete example."}], "answers": [{"tags": [], "owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "is_accepted": false, "score": 1, "last_activity_date": 1487773157, "creation_date": 1487773157, "answer_id": 42394067, "question_id": 42392540, "link": "https://stackoverflow.com/questions/42392540/how-to-store-reference-to-a-derived-type-in-the-base-type-reference/42394067#42394067", "title": "How to store reference to a derived type in the base type reference?", "body": "<p>To demonstrate why its a problem, imagine you had another struct</p>\n\n<pre><code>struct OtherDerived : Base\n{};\n</code></pre>\n\n<p>Now consider what would happen if you added the following line after your definition of b</p>\n\n<pre><code>b = new OtherDerived();\n</code></pre>\n\n<p>this (if allowed) would have to assign d (which is of type Derived*) to a OtherDerived*, which isn't valid since OtherDerived doesn't derive from Derive.</p>\n\n<p>To solve this you could decide whether the pointer you are referencing actually needs to be a derived pointer. If not it can be a base pointer and your reference to a base pointer is then OK.</p>\n\n<pre><code>Derived *d{};\nBase* pointerToABase = d;\nBase*&amp; refToAPointerToABase = pointerToABase;\n</code></pre>\n\n<p>Otherwise if the pointer you reference must be a Derived* not a Base* then can you change the type of your reference : e.g. replace the declaration of b with.</p>\n\n<pre><code>    Derived*&amp; refToAPointerToADerived = d;\n</code></pre>\n\n<p>I am aware that this isn't what you actually ask for in the title of the question - but as described you can't do that anyway.</p>\n\n<p>Without knowing why you need a reference to the pointer its hard to suggest an alternative approach.</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487773266, "creation_date": 1487769303, "question_id": 42392540, "link": "https://stackoverflow.com/questions/42392540/how-to-store-reference-to-a-derived-type-in-the-base-type-reference", "title": "How to store reference to a derived type in the base type reference?", "body": "<p>Consider:</p>\n\n<pre><code>struct Base{};\nstruct Derived: Base{};\n\nint main() {\n    Derived *d{};\n    Base *&amp;b = d; // Error: non-const reference to rvalue. \n    (void)b; \n    return 0;\n}\n</code></pre>\n\n<p>As the comment indicates, the assignment tries to store non-const reference to rvalue. I understand that the rvalue is the <code>d</code> converted to <code>Base *</code>. But how do I get around this problem, so I can change <code>d</code> by assigning to <code>b</code>?</p>\n"}, {"tags": ["c++", "casting", "char", "unsigned-char"], "comments": [{"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 1, "creation_date": 1487769260, "post_id": 42392482, "comment_id": 71932436, "body": "Just try it ....."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1487769263, "post_id": 42392482, "comment_id": 71932441, "body": "A <code>static_cast</code> should work fine IIRC."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487769349, "post_id": 42392482, "comment_id": 71932520, "body": "Did <code>if (!PyTuple_GetByte(poArgs, 0, reinterpret_cast&lt;unsigned char*&gt;(&amp;SourceCell.window_type)))</code> not work?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1487769418, "post_id": 42392482, "comment_id": 71932572, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I think <code>static_cast</code> will not work here: <a href=\"http://stackoverflow.com/questions/10151834/why-cant-i-static-cast-between-char-and-unsigned-char\" title=\"why cant i static cast between char and unsigned char\">stackoverflow.com/questions/10151834/&hellip;</a> as they&#39;re different types no?"}, {"owner": {"reputation": 41, "user_id": 7586718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e8621df0fadc7d628644557eb83424f?s=128&d=identicon&r=PG&f=1", "display_name": "Klappstuhl", "link": "https://stackoverflow.com/users/7586718/klappstuhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1487769722, "post_id": 42392482, "comment_id": 71932785, "body": "The <code>static_cast</code> did not work, @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 is right. I tried that before. Currently I am trying to use a <code>reinterpret_cast</code> but wanted to know if any experts here have a more elegant solution."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 3, "creation_date": 1487769821, "post_id": 42392482, "comment_id": 71932845, "body": "You&#39;d have to <code>reinterpret_cast</code> or c-style cast here"}, {"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 1, "creation_date": 1487771795, "post_id": 42392482, "comment_id": 71934376, "body": "if you can change type of the SourceCell.window_type to be unsigned char instead of a normal char, no cast will be needed"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1487780369, "post_id": 42392482, "comment_id": 71940828, "body": "Safe way is to create an unsigned char buffer, read into it, then assign to the char array from it checking the values."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1498823337, "post_id": 42392482, "comment_id": 76671591, "body": "@EdChum i.e. you have to <code>reinterpret_cast</code>. c-style casts are defined in terms of some <code>*_cast</code>s"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 8219779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Lx8uiCal_tw/AAAAAAAAAAI/AAAAAAAAADI/xbMqZqQCiMw/photo.jpg?sz=128", "display_name": "Meng Tian", "link": "https://stackoverflow.com/users/8219779/meng-tian"}, "is_accepted": true, "score": 1, "last_activity_date": 1498813247, "last_edit_date": 1498813247, "creation_date": 1498812892, "answer_id": 44842471, "question_id": 42392482, "link": "https://stackoverflow.com/questions/42392482/c-how-to-convert-from-char-to-unsigned-char-in-function-call/44842471#44842471", "title": "C++ how to convert from char * to unsigned char * in function call?", "body": "<p>From the error, the signature of the <code>PyTuple_GetByte</code> function was expecting a third parameter of type <code>unsigned char*</code>, but you passed a variable of type <code>char*</code> at its invocation. I think you have two options here.</p>\n\n<ol>\n<li><p>You can change the signature of function <code>PyTuple_GetByte</code> to expect a <code>char*</code> parameter.</p></li>\n<li><p>You need to convert your input variable from type <code>char*</code> to type <code>unsigned char*</code>, before you can pass it into <code>PyTuple_GetByte</code>.</p></li>\n</ol>\n\n<p>The conversion is normally like this:</p>\n\n<pre><code>unsigned char* convert_var = reinterpret_cast&lt;unsigned char*&gt;(&amp;SourceCell.window_type); // (c++ way)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>unsigned char* convert_var = (unsigned char*)(&amp;SourceCell.window_type); // (c way)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7586718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e8621df0fadc7d628644557eb83424f?s=128&d=identicon&r=PG&f=1", "display_name": "Klappstuhl", "link": "https://stackoverflow.com/users/7586718/klappstuhl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3333, "favorite_count": 2, "accepted_answer_id": 44842471, "answer_count": 1, "score": 0, "last_activity_date": 1507712492, "creation_date": 1487769152, "last_edit_date": 1507712492, "question_id": 42392482, "link": "https://stackoverflow.com/questions/42392482/c-how-to-convert-from-char-to-unsigned-char-in-function-call", "title": "C++ how to convert from char * to unsigned char * in function call?", "body": "<p>When building my C++ application the build fails at this line of code</p>\n\n<pre><code>if (!PyTuple_GetByte(poArgs, 0, &amp;SourceCell.window_type))\n</code></pre>\n\n<p>with this error</p>\n\n<blockquote>\n  <p>error C2664:  'PyTuple_GetByte' : cannot convert parameter 3 from\n  'char *' to 'unsigned char *'</p>\n</blockquote>\n\n<p>This is the called function: </p>\n\n<pre><code>bool PyTuple_GetByte(PyObject* poArgs, int pos, unsigned char* ret);\n</code></pre>\n\n<p>The third parameter <code>&amp;SourceCell.window_type</code> is type <code>char</code>.</p>\n\n<p>Is there a way to convert/cast the parameter inside the function call like </p>\n\n<pre><code>if (!PyTuple_GetByte(poArgs, 0, reinterpret_cast&lt;unsigned char*&gt;(&amp;SourceCell.window_type)))\n</code></pre>\n\n<p>or do I have to deal with it in another way?</p>\n"}, {"tags": ["c++", "vector", "static"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1487768369, "post_id": 42392152, "comment_id": 71931749, "body": "Have you tried this on <i>anything simpler</i> before? <code>std::string s; s::size_type n; &#47;&#47; ???</code>"}, {"owner": {"reputation": 2938, "user_id": 1936366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0298a41112c6940b378ca0e88c4183?s=128&d=identicon&r=PG", "display_name": "Onur A.", "link": "https://stackoverflow.com/users/1936366/onur-a"}, "edited": false, "score": 0, "creation_date": 1487776153, "post_id": 42392152, "comment_id": 71937636, "body": "why it doesn&#39;t look beautiful to your eyes?"}, {"owner": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "reply_to_user": {"reputation": 2938, "user_id": 1936366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0298a41112c6940b378ca0e88c4183?s=128&d=identicon&r=PG", "display_name": "Onur A.", "link": "https://stackoverflow.com/users/1936366/onur-a"}, "edited": false, "score": 0, "creation_date": 1487787582, "post_id": 42392152, "comment_id": 71945679, "body": "@OnurA. because I needed to scroll to the class for seeing declaration of MyVector"}, {"owner": {"reputation": 2938, "user_id": 1936366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0298a41112c6940b378ca0e88c4183?s=128&d=identicon&r=PG", "display_name": "Onur A.", "link": "https://stackoverflow.com/users/1936366/onur-a"}, "edited": false, "score": 0, "creation_date": 1487799084, "post_id": 42392152, "comment_id": 71952335, "body": "@Sourena then simply you can define it  with <code>using MyVector = vector&lt;Bar&gt;;</code>in C++11 or <code>typedef vector&lt;Bar&gt; MyVector;</code> in previous C++ versions so whenever you type MyVector you don&#39;t have to scroll back to the class for actualy declaration"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "edited": false, "score": 0, "creation_date": 1487768758, "post_id": 42392189, "comment_id": 71932055, "body": "So I need to go back to see the definition of Foo:MyVector in the class, before proceeding to defining a variable for storing its size_type?"}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "reply_to_user": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "edited": false, "score": 0, "creation_date": 1487768820, "post_id": 42392189, "comment_id": 71932098, "body": "@Sourena, no, by writing <code>vector&lt;whatever_type&gt;::size_type</code> you are accessing the size type of this particular vector <i>type</i>."}, {"owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "edited": false, "score": 1, "creation_date": 1487769109, "post_id": 42392189, "comment_id": 71932303, "body": "In C++11, you can use decltype(Foo::MyVector)::size_type"}, {"owner": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "reply_to_user": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "edited": false, "score": 0, "creation_date": 1487769337, "post_id": 42392189, "comment_id": 71932507, "body": "@MartinHierholzer interesting. Could you elaborate?"}, {"owner": {"reputation": 887, "user_id": 5998125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGGFf.jpg?s=128&g=1", "display_name": "Martin Hierholzer", "link": "https://stackoverflow.com/users/5998125/martin-hierholzer"}, "reply_to_user": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "edited": false, "score": 0, "creation_date": 1487858308, "post_id": 42392189, "comment_id": 71980854, "body": "@Sourena <code>decltype(Foo::MyVector)</code> will be the type of the variable <code>Foo::MyVector</code>, which is <code>vector&lt;Bar&gt;</code>. Thus <code>decltype(Foo::MyVector)::size_type</code> will be the same as <code>vector&lt;Bar&gt;::size_type</code>. You just gain a bit flexibility, since you do not need to assume the type at that point in the code."}], "tags": [], "owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "is_accepted": true, "score": 7, "last_activity_date": 1487768327, "creation_date": 1487768327, "answer_id": 42392189, "question_id": 42392152, "link": "https://stackoverflow.com/questions/42392152/static-vector-member-variable/42392189#42392189", "title": "static vector member variable", "body": "<p>It is not workaround. <code>MyVector</code> is object. <code>vector&lt;Bar&gt;</code> is type. <code>size_type</code> is typedef in <code>vector</code> class, not member variable.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "edited": false, "score": 0, "creation_date": 1487769426, "post_id": 42392235, "comment_id": 71932576, "body": "Thanks for the answer. I was just thinking if it is possible to &quot;Extract&quot; a typedef from an instance, and not going back to see its definition."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1487768438, "creation_date": 1487768438, "answer_id": 42392235, "question_id": 42392152, "link": "https://stackoverflow.com/questions/42392152/static-vector-member-variable/42392235#42392235", "title": "static vector member variable", "body": "<p><code>size_type</code> is a type declared in <code>std::vector</code>. It is bound to the class, not individual instances. Additionally, the :: operator is only used with namespaces and classes. You cannot use it with variables. </p>\n"}], "owner": {"reputation": 25, "user_id": 1914356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7944b529de19d33dc14b85377fbd3?s=128&d=identicon&r=PG", "display_name": "Sourena", "link": "https://stackoverflow.com/users/1914356/sourena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 42392189, "answer_count": 2, "score": 1, "last_activity_date": 1487769816, "creation_date": 1487768223, "last_edit_date": 1487769816, "question_id": 42392152, "link": "https://stackoverflow.com/questions/42392152/static-vector-member-variable", "title": "static vector member variable", "body": "<p>So I have a class with a static vector member:</p>\n\n<pre><code>class Foo {\n// some private members\npublic:\nstatic vector&lt;Bar&gt; MyVector;\n};\n</code></pre>\n\n<p>Now I initialize MyVector before actually using it:</p>\n\n<pre><code>std::vector&lt;Bar&gt; Foo::MyVector;\n</code></pre>\n\n<p>Then I want to define a variable like this in main(), but it doesn't seem to work:</p>\n\n<pre><code>Foo::MyVector::size_type t; \n</code></pre>\n\n<p>This workaround does work, but doesn't look beautiful (to my eyes):</p>\n\n<pre><code>vector&lt;Bar&gt;::size_type t;\n</code></pre>\n\n<p>What is the basic concept that I have been missing here?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The main point is, should I always come back to see declaration of <em>MyVector</em> as  <em>vector&lt; Bar></em> before proceeding to declaring a size_type for it?</p>\n"}, {"tags": ["c++", "bit-manipulation", "systemc"], "comments": [{"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 2, "creation_date": 1487771580, "post_id": 42392133, "comment_id": 71934183, "body": "Are the rest of the bits constant? The uint in the system verilog example has 34 bits? If the rest doesn&#39;t change have it as a mask and or in (255 &lt;&lt; 16) if my variable is true?"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1487779919, "creation_date": 1487779919, "answer_id": 42396694, "question_id": 42392133, "link": "https://stackoverflow.com/questions/42392133/concatenate-bits-c/42396694#42396694", "title": "concatenate bits C++", "body": "<p>Looks like </p>\n\n<pre><code>  0b0000'0000'0000'0000'1111'1111'0000'1100 | \n( 0b0000'0000'1111'1111'0000'0000'0000'0000 * myVariable )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488210587, "post_id": 42408967, "comment_id": 72119458, "body": "Is there a way to cast sc_lv to sc_uint ? If so we don&#39;t need the replicate function."}, {"owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "reply_to_user": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488272838, "post_id": 42408967, "comment_id": 72146575, "body": "I don&#39;t quite understood sc_lv idea. Can you please elaborate it in details?  In general I think it is possible to write templated replication function that will support various datatypes."}, {"owner": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488273705, "post_id": 42408967, "comment_id": 72147172, "body": "sc_lv is an Arbitrary Width Logic Type this is sc_lv documentation <a href=\"http://www.lysium.de/docs/systemc-2.2/docs/html/classsc__dt_1_1sc__lv.html\" rel=\"nofollow noreferrer\">lysium.de/docs/systemc-2.2/docs/html/classsc__dt_1_1sc__lv.h&zwnj;&#8203;tml</a> it has a c&#39;tor to initialize all bits to the same value: template&lt;int W&gt; sc_dt::sc_lv&lt; W &gt;::sc_lv\t(\tbool \tinit_value\t )"}, {"owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "reply_to_user": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488278194, "post_id": 42408967, "comment_id": 72150359, "body": "Yes, but what if you want to replicate some pattern? Like replicate 010 3 times to get 010010010?"}, {"owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "reply_to_user": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488278272, "post_id": 42408967, "comment_id": 72150407, "body": "Also I can recommend AC types <a href=\"https://www.mentor.com/hls-lp/downloads/ac-datatypes\" rel=\"nofollow noreferrer\">mentor.com/hls-lp/downloads/ac-datatypes</a> for arbitrary width integers, fixed and floats."}, {"owner": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "edited": false, "score": 0, "creation_date": 1488281427, "post_id": 42408967, "comment_id": 72152494, "body": "Your solution is more general, I don&#39;t need to replicate patterns just a single bit.  BTW in your solution you need to use your template function <i>replicate</i> for sc_uint&lt;8&gt;(1) and sc_uint&lt;2&gt;(1) as well. otherwise you&#39;ll have 00000001 and 01 instead of 11111111 and 11"}], "tags": [], "owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "is_accepted": false, "score": 3, "last_activity_date": 1487841134, "last_edit_date": 1487841134, "creation_date": 1487833001, "answer_id": 42408967, "question_id": 42392133, "link": "https://stackoverflow.com/questions/42392133/concatenate-bits-c/42408967#42408967", "title": "concatenate bits C++", "body": "<p>In SystemC comma operator is overloaded for concatenation. But there is no replication operator like {8{my_variable}}.</p>\n\n<p>But, you can write a function that will do replication. For example:</p>\n\n<pre><code>template &lt;int N, int M&gt;\nsc_uint&lt;N*M&gt; replicate( sc_uint&lt;M&gt; val) {\n    sc_uint&lt;N*M&gt; res = 0;\n    for (int i = 0; i &lt; N; ++i)\n        res = (res &lt;&lt; M) | val;\n    return res;\n};\n</code></pre>\n\n<p>So SystemC version of your SystemVerilog sample can look like:</p>\n\n<pre><code>sc_uint&lt;1&gt; my_variable = 1;\nsc_uint&lt;32&gt; bits_concatenation = (sc_uint&lt;8&gt;(0), replicate&lt;8&gt;(my_variable), sc_uint&lt;8&gt;(1), sc_uint&lt;4&gt;(0), sc_uint&lt;2&gt;(1), sc_uint&lt;4&gt;(0) );\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 7424807, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10153988115486504/picture?type=large", "display_name": "Noa Yehezkel", "link": "https://stackoverflow.com/users/7424807/noa-yehezkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488110357, "creation_date": 1487768155, "last_edit_date": 1488110357, "question_id": 42392133, "link": "https://stackoverflow.com/questions/42392133/concatenate-bits-c", "title": "concatenate bits C++", "body": "<p>I am looking for an elegant C++ using SystemC to concatenate bits.</p>\n\n<p>A System Verilog example in one nice line:</p>\n\n<pre><code>bool my_variable;\nuint bits_combination = {8'b0, {8{my_variable}}, 8'b1, 4'b0, 2'b1, 2'b0};\n</code></pre>\n\n<p>My best solution for C++:</p>\n\n<pre><code>bool my_variable;\nsc_uint&lt;32&gt; bits_combination;\nbits_combination.range(31,24) = 0;\nbits_combination.range(23,16) = my_variable ? (1 &lt;&lt; 8)-1  : 0;\nbits_combination.range(15,8)  = (1 &lt;&lt; 8)-1;\nbits_combination.range(7,4)   = 0;\nbits_combination.range(3,2)   = (1 &lt;&lt; 2)-1;\nbits_combination.range(1,0)   = 0;\n</code></pre>\n\n<p>Improving this line to a non ternary operator will also help: </p>\n\n<pre><code>my_variable ? (1 &lt;&lt; 8)-1  : 0\n</code></pre>\n"}, {"tags": ["c++", "virtual-destructor"], "comments": [{"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 2, "creation_date": 1487768242, "post_id": 42392128, "comment_id": 71931659, "body": "<code>virtual void ~A();</code> - this should not compile, destructors do not return anything, and normal method name cannot contain tilda."}, {"owner": {"reputation": 73, "user_id": 4597291, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/XLF0v.png?s=128&g=1", "display_name": "Sanane Lan", "link": "https://stackoverflow.com/users/4597291/sanane-lan"}, "reply_to_user": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1487768362, "post_id": 42392128, "comment_id": 71931743, "body": "@yeputons right, sry, was a typo"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1487768453, "post_id": 42392128, "comment_id": 71931820, "body": "It will cause undefined behaviour by calling <code>~A()</code> twice (since there is an implied call once <code>~B()</code>&#39;s body exits)"}, {"owner": {"reputation": 73, "user_id": 4597291, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/XLF0v.png?s=128&g=1", "display_name": "Sanane Lan", "link": "https://stackoverflow.com/users/4597291/sanane-lan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487768571, "post_id": 42392128, "comment_id": 71931903, "body": "@M.M so the endless loop is just a random behavior and could be anything else."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1487768863, "post_id": 42392128, "comment_id": 71932128, "body": "@SananeLan: Please don&#39;t type. <i>Copy-paste</i> from your local test program."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487768875, "post_id": 42392128, "comment_id": 71932135, "body": "@SananeLan I think so although I wouldn&#39;t say I 100% understand the behaviour .. there might also be UB for other reasons :)  Virtual dispatch is disabled in constructors and destructors"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487769206, "post_id": 42392468, "comment_id": 71932397, "body": "C++14 [class.dtor]/15 is the clause that specifically says a second destructor call is UB, for classes with non-trivial destructor  (which this is, since <code>virtual</code> makes it non-trivial)"}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": true, "score": 2, "last_activity_date": 1487769111, "creation_date": 1487769111, "answer_id": 42392468, "question_id": 42392128, "link": "https://stackoverflow.com/questions/42392128/how-does-the-compiler-handle-base-class-destructor-calls-in-the-derived-destruct/42392468#42392468", "title": "How does the compiler handle base class destructor calls in the derived destructor?", "body": "<p>@M.M's comment hit it. You are calling the destructor twice. This is undefined behavior and anything may happen, including the behavior you observe.</p>\n\n<p>(In reality, most likely one of those destructor calls modifies the vptr of the object, meaning that subsequent destructor calls no longer go to the most derived object. But that's just a guess.)</p>\n\n<p>The correct thing to do is to not call the destructor manually.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 5267636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03ed286e5355a0d0ee1cc4452995a19?s=128&d=identicon&r=PG&f=1", "display_name": "roman", "link": "https://stackoverflow.com/users/5267636/roman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487769354, "creation_date": 1487769354, "answer_id": 42392553, "question_id": 42392128, "link": "https://stackoverflow.com/questions/42392128/how-does-the-compiler-handle-base-class-destructor-calls-in-the-derived-destruct/42392553#42392553", "title": "How does the compiler handle base class destructor calls in the derived destructor?", "body": "<p>Calling derived class virtual destructor causes call of base class destructor. But not vise versa. </p>\n"}, {"tags": [], "owner": {"reputation": 1256, "user_id": 4130137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/195f002689d15b2e4f3384d2c169fc68?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/4130137/anton"}, "is_accepted": false, "score": 1, "last_activity_date": 1487770395, "last_edit_date": 1495540440, "creation_date": 1487770395, "answer_id": 42392948, "question_id": 42392128, "link": "https://stackoverflow.com/questions/42392128/how-does-the-compiler-handle-base-class-destructor-calls-in-the-derived-destruct/42392948#42392948", "title": "How does the compiler handle base class destructor calls in the derived destructor?", "body": "<p>Virtual destructors in a derived class will always call parent-class destructors first, in a recursive order such that the most \"ancestral\" base-class' destructor will be called, and then the second-most-\"ancestral\", etc. Imagine that Child inherits from Parent, which inherits from GrandParent. The Child class' destructor will actually call GrandParent's destructor, then Parent's destructor, then Child's destructor.</p>\n\n<p>Indeed your derived class constructors also call their parent-class constructors in the same recursive order. You have to imagine derived classes like a \"layer cake\": each instance of inheritance adds a layer to your object. So the Child class has 3 layers {GrandParent, Parent, Child}, each layer's construction/destruction is handled by the corresponding class.</p>\n\n<p>What you're attempting will attempt to call the parent destructor twice, which is a bad idea. Generally you do not have to explicitly call destructors, except in the case where you overloaded the <code>new</code> operator. See this answer for more details: <a href=\"https://stackoverflow.com/questions/14187006/is-calling-destructor-manually-always-a-sign-of-bad-design\">Is calling destructor manually always a sign of bad design?</a></p>\n"}], "owner": {"reputation": 73, "user_id": 4597291, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/XLF0v.png?s=128&g=1", "display_name": "Sanane Lan", "link": "https://stackoverflow.com/users/4597291/sanane-lan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 42392468, "answer_count": 3, "score": 0, "last_activity_date": 1508240437, "creation_date": 1487768146, "last_edit_date": 1508240437, "question_id": 42392128, "link": "https://stackoverflow.com/questions/42392128/how-does-the-compiler-handle-base-class-destructor-calls-in-the-derived-destruct", "title": "How does the compiler handle base class destructor calls in the derived destructor?", "body": "<p>Just out of curiosity I tried to do something like the example below to see if the compiler gives me a warning or so instead of calling an endless loop which ends up in a stack overflow. I thought maybe there is a different behavior than just calling normal functions or methods. But that's not the case. Is there a special explanation for that or is it just handled as normal function calls since I am explicitely calling the base class destructor by using the <code>this</code> operator?</p>\n\n<p>Example:</p>\n\n<pre><code>class A {\n  virtual ~A();\n};\n\nclass B : A {\n  virtual ~B() { this-&gt;~A(); }\n};\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487768187, "post_id": 42392084, "comment_id": 71931628, "body": "Please add some addition detail that what container you have and what container you want to go to.  Also what you have tried."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1487768405, "post_id": 42392084, "comment_id": 71931780, "body": "If you talk about &quot;where Basis is...&quot; then something from before should have that word in it. You are essentially asking a question like &quot;I have a problem where stuff does not work&quot; without any further details."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1487768798, "post_id": 42392084, "comment_id": 71932079, "body": "Are you going to want to do something like <code>basis_map[something].some_function();</code> and have the function of the derived class called?"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1487768938, "post_id": 42392084, "comment_id": 71932175, "body": "maybe instead of switching to <code>Base*</code> you would prefer switching to <code>std::shared_ptr&lt;Base&gt;</code>?"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1487769129, "post_id": 42392084, "comment_id": 71932320, "body": "Specify your problem with using pointers (that is, proper pointers, not raw pointers). If you go without pointers, other than like in the answer of John Zwinck, the only thing that would be feasible is doing it manually with some converting method that makes sure that no slicing happens."}, {"owner": {"reputation": 589, "user_id": 1293937, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0578b2931b635734716cd15217247b9e?s=128&d=identicon&r=PG", "display_name": "Cristi", "link": "https://stackoverflow.com/users/1293937/cristi"}, "edited": false, "score": 0, "creation_date": 1487782396, "post_id": 42392084, "comment_id": 71942233, "body": "Finally I chose to implement a constructor Derived(Basis). I worked only with std::map(type, Basis) and only in some places I used the constructor mentioned above to get the other map. It is not a general solution but the particular structure of my problem favours this solution."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 4, "last_activity_date": 1487768916, "creation_date": 1487768916, "answer_id": 42392381, "question_id": 42392084, "link": "https://stackoverflow.com/questions/42392084/type-conversion-of-stl-structure-in-c/42392381#42392381", "title": "Type conversion of STL structure in c++", "body": "<p>You simply cannot convert from a container of Derived to a container of Base.  For one thing, if Derived is larger than Base, what would happen to the extra bits?</p>\n\n<p>If you want something approaching a solution without raw pointers, use this:</p>\n\n<pre><code>std::map&lt;type, std::unique_ptr&lt;Base&gt;&gt; \n</code></pre>\n\n<p>Then you can put either Base or Derived objects into the map.</p>\n"}], "owner": {"reputation": 589, "user_id": 1293937, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0578b2931b635734716cd15217247b9e?s=128&d=identicon&r=PG", "display_name": "Cristi", "link": "https://stackoverflow.com/users/1293937/cristi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42392381, "answer_count": 1, "score": -1, "last_activity_date": 1487769778, "creation_date": 1487768053, "last_edit_date": 1487769778, "question_id": 42392084, "link": "https://stackoverflow.com/questions/42392084/type-conversion-of-stl-structure-in-c", "title": "Type conversion of STL structure in c++", "body": "<p>Context: I create the </p>\n\n<blockquote>\n<pre><code>std::map&lt;type, Base&gt;\n</code></pre>\n</blockquote>\n\n<p>inside a function where the map is given as reference parameter. This function is ideally called from somewhere with the reference parameter                    </p>\n\n<blockquote>\n<pre><code>std::map&lt;type, Derived&gt;&amp;.\n</code></pre>\n</blockquote>\n\n<p>What is the best way to convert from </p>\n\n<pre><code>std::map&lt;type, Derived&gt; \n</code></pre>\n\n<p>to </p>\n\n<pre><code>std::map&lt;type, Basis&gt; \n</code></pre>\n\n<p>where <code>Basis</code> is the Basis class of <code>Derived</code>? I have already unsuccessfully tried to convert through a direct cast. I would prefer not to switch from Derived to Derived* and from Base to Base*.</p>\n\n<p>I would need to run the function to create the map with the Basis elements and then get it back and work with the map with Derived elements.</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1487768217, "post_id": 42392070, "comment_id": 71931643, "body": "anyway this code will not compile, as <code>std::queue::pop</code> returns void, and not <code>T</code>. if <code>T</code> is <code>void</code>, than <code>std::queue&lt;void&gt;</code> is illegal"}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 4, "last_activity_date": 1487768080, "creation_date": 1487768080, "answer_id": 42392096, "question_id": 42392070, "link": "https://stackoverflow.com/questions/42392070/unordered-map-emplace-how-to-create-objects-in-place/42392096#42392096", "title": "unordered_map emplace - how to create objects in place", "body": "<p>You need:</p>\n\n<pre><code>mmap.emplace(std::piecewise_construct,\n             std::forward_as_tuple(1),  // args for key\n             std::forward_as_tuple());  // args for mapped value\n</code></pre>\n\n<p>(This uses the piecewise pair constructor for the value type.)</p>\n"}, {"tags": [], "owner": {"reputation": 2937, "user_id": 895077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/guQeO.png?s=128&g=1", "display_name": "Roman Kruglov", "link": "https://stackoverflow.com/users/895077/roman-kruglov"}, "is_accepted": false, "score": 0, "last_activity_date": 1605027800, "creation_date": 1605027800, "answer_id": 64773391, "question_id": 42392070, "link": "https://stackoverflow.com/questions/42392070/unordered-map-emplace-how-to-create-objects-in-place/64773391#64773391", "title": "unordered_map emplace - how to create objects in place", "body": "<p><strong>TL;DR:</strong> just use <code>operator []</code>, I think it's simpler, like:</p>\n<pre><code>std::map&lt;int, MyClass&lt;float&gt;&gt; mmap;\nauto&amp; obj = mmap[1]; // here it created an object and returned a reference\n</code></pre>\n<p><strong>Details:</strong> I had a similar situation once, here is a link to <a href=\"https://stackoverflow.com/a/42001375/895077\">my answer</a> with details.</p>\n"}], "owner": {"reputation": 79, "user_id": 3081218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce8c35b788a5e3b3d84d171fd8bb415?s=128&d=identicon&r=PG&f=1", "display_name": "user3081218", "link": "https://stackoverflow.com/users/3081218/user3081218"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 1, "accepted_answer_id": 42392096, "answer_count": 2, "score": 3, "last_activity_date": 1605027800, "creation_date": 1487768008, "last_edit_date": 1487768113, "question_id": 42392070, "link": "https://stackoverflow.com/questions/42392070/unordered-map-emplace-how-to-create-objects-in-place", "title": "unordered_map emplace - how to create objects in place", "body": "<p>need to create unordered_map for integer and some user defined class - MyClass, where MyClass uses mutex for data access synchronisation, i.e. MyClass object can not be copied or moved.\nIs it possible to create such a map?\nHow do I use emplace to create object of MyClass to avoid copy/move?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass MyClass {\n  public:\n    T pop() {\n      std::unique_lock&lt;std::mutex&gt; lock(m_mutex);\n      m_cv.wait(lock, [this]{return !m_queue.empty();});\n      return m_queue.pop();\n    }\n    void push(T const&amp; x) {\n      { \n        std::unique_lock&lt;std::mutex&gt; lock(m_mutex);\n        m_queue.push(x) ;\n      }\n      m_cv.notify_one();\n    }\n  private:\n    std::queue&lt;T&gt; m_queue ;\n    std::mutex m_mutex ;\n    std::condition_variable m_cv;\n};\n\nint main(){\n  std::unordered_map&lt;int, MyClass&lt;float&gt;&gt; mmap;\n  mmap.emplace(1, MyClass&lt;float&gt;{});\n}\n</code></pre>\n"}, {"tags": ["c++", "bit-manipulation"], "answers": [{"tags": [], "owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "is_accepted": true, "score": 3, "last_activity_date": 1487768976, "creation_date": 1487768976, "answer_id": 42392416, "question_id": 42392061, "link": "https://stackoverflow.com/questions/42392061/ffs-not-returning-the-right-result-if-its-argument-is-of-uint64-type/42392416#42392416", "title": "Ffs not returning the right result if its argument is of uint64 type", "body": "<p>From the <a href=\"https://linux.die.net/man/3/ffs\" rel=\"nofollow noreferrer\">ffs() man page</a>, <code>ffs()</code> takes an int parameter.</p>\n\n<p>Try using ffsll() instead:</p>\n\n<pre><code>int ffsll(long long int i);\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 7604826, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/99c5631fe4f537770c729b315fe19fdc?s=128&d=identicon&r=PG&f=1", "display_name": "Aaa Bbb", "link": "https://stackoverflow.com/users/7604826/aaa-bbb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 42392416, "answer_count": 1, "score": 0, "last_activity_date": 1487768976, "creation_date": 1487767991, "question_id": 42392061, "link": "https://stackoverflow.com/questions/42392061/ffs-not-returning-the-right-result-if-its-argument-is-of-uint64-type", "title": "Ffs not returning the right result if its argument is of uint64 type", "body": "<p>When I try this code, It ouputs 0 instead of the dseried result, which is 35</p>\n\n<pre><code>uint64_t er = (uint64_t)1 &lt;&lt; 34;\ncout &lt;&lt; ffs(er);\n</code></pre>\n\n<p>If instead of 34 I use some vale smaller than 32, it works fine, so I assume my compiler isn't using the right ffs, or is it that ffs does not support at all 64 bits types ?</p>\n\n<p>What should I do in this case ? I want to use ffs as I want my code to be the fastest possible, and I heard that ffs has a material implementation.</p>\n\n<p>I am on Ubuntu using g++ and a Xeon processor</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1487767944, "post_id": 42392016, "comment_id": 71931411, "body": "Is c++11 enabled with your compiler?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1487767994, "post_id": 42392016, "comment_id": 71931457, "body": "What&#39;s <code>std_lib_facilities.h</code>?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487768023, "post_id": 42392016, "comment_id": 71931494, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 There&#39;s no way to disable it in VS; and if the OP is really using VS2015, they have <code>{}</code> support."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487768081, "post_id": 42392016, "comment_id": 71931549, "body": "Also, use the update header that matches your edition of the book (<a href=\"http://stroustrup.com/Programming/PPP2code/std_lib_facilities.h\" rel=\"nofollow noreferrer\">here</a>) so you can get rid of that define."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1487768141, "post_id": 42392016, "comment_id": 71931594, "body": "@Angew It comes with the book. <a href=\"http://stroustrup.com/Programming/PPP2code/std_lib_facilities.h\" rel=\"nofollow noreferrer\">Version OP should use</a>, <a href=\"http://www.stroustrup.com/Programming/std_lib_facilities.h\" rel=\"nofollow noreferrer\">version they are using</a>."}], "answers": [{"tags": [], "owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "is_accepted": true, "score": 2, "last_activity_date": 1487768092, "creation_date": 1487768092, "answer_id": 42392101, "question_id": 42392016, "link": "https://stackoverflow.com/questions/42392016/compilation-error-when-using-vector-from-stroustrups-ppp-book-with-initializer/42392101#42392101", "title": "Compilation error when using vector from Stroustrup&#39;s PPP book with initializer list", "body": "<p>Looks like you use wrong version of std_lib_facilities.h.<code>Vector</code> from that <a href=\"http://www.stroustrup.com/Programming/std_lib_facilities.h\" rel=\"nofollow noreferrer\">std_lib_facilities.h</a> have no <code>initializer_list</code> constructor. So you can't do that with this version of header.</p>\n\n<pre><code>// trivially range-checked vector (no iterator checking):\ntemplate&lt; class T&gt; struct Vector : public std::vector&lt;T&gt; {\n    typedef typename std::vector&lt;T&gt;::size_type size_type;\n\n    Vector() { }\n    explicit Vector(size_type n) :std::vector&lt;T&gt;(n) {}\n    Vector(size_type n, const T&amp; v) :std::vector&lt;T&gt;(n,v) {}\n    template &lt;class I&gt;\n    Vector(I first, I last) :std::vector&lt;T&gt;(first,last) {}\n\n    T&amp; operator[](unsigned int i) // rather than return at(i);\n    {\n        if (i&lt;0||this-&gt;size()&lt;=i) throw Range_error(i);\n        return std::vector&lt;T&gt;::operator[](i);\n    }\n    const T&amp; operator[](unsigned int i) const\n    {\n        if (i&lt;0||this-&gt;size()&lt;=i) throw Range_error(i);\n        return std::vector&lt;T&gt;::operator[](i);\n    }\n};\n\n// disgusting macro hack to get a range checked vector:\n#define vector Vector\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 2, "last_activity_date": 1487768620, "last_edit_date": 1487768620, "creation_date": 1487768297, "answer_id": 42392172, "question_id": 42392016, "link": "https://stackoverflow.com/questions/42392016/compilation-error-when-using-vector-from-stroustrups-ppp-book-with-initializer/42392172#42392172", "title": "Compilation error when using vector from Stroustrup&#39;s PPP book with initializer list", "body": "<p>You are using the wrong version of Stroustrup's header. The one you use belongs with the first edition of PPP, use the new one from <a href=\"http://stroustrup.com/Programming/PPP2code/std_lib_facilities.h\" rel=\"nofollow noreferrer\">here</a> and the code works fine.</p>\n\n<p>Then you can also get rid of that legacy fix</p>\n\n<pre><code>#define _SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7539664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LbOF2.jpg?s=128&g=1", "display_name": "E. Delacroix", "link": "https://stackoverflow.com/users/7539664/e-delacroix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 42392101, "answer_count": 2, "score": 1, "last_activity_date": 1487769222, "creation_date": 1487767880, "last_edit_date": 1487769222, "question_id": 42392016, "link": "https://stackoverflow.com/questions/42392016/compilation-error-when-using-vector-from-stroustrups-ppp-book-with-initializer", "title": "Compilation error when using vector from Stroustrup&#39;s PPP book with initializer list", "body": "<p>My code:</p>\n\n<pre><code>#define _SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS\n#include \"c:\\Users\\1\\documents\\visual studio 2015\\std_lib_facilities.h\"\n\nint main()\n{\n    vector&lt;int&gt; v = { 5, 7, 9, 4, 6, 8 };\n    return 0;\n}\n</code></pre>\n\n<p>fails to compile with this error:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State   Detail Description\nError (active)      no instance of constructor \"Vector&lt;T&gt;::Vector [with T=int]\" matches the argument list   ConsoleApplication1 c:\\Users\\1\\Documents\\Visual Studio 2015\\Projects\\ConsoleApplication1\\Source.cpp 6                   argument types are: (int, int, int, int, int, int)\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["c#", "c++", ".net", "locking", "code-analysis"], "comments": [{"owner": {"reputation": 18719, "user_id": 1997232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/y6na2.png?s=128&g=1", "display_name": "Sinatr", "link": "https://stackoverflow.com/users/1997232/sinatr"}, "edited": false, "score": 1, "creation_date": 1487769338, "post_id": 42391960, "comment_id": 71932510, "body": "Maybe there is none yet. You can investigate if creating custom code analysis rules worth it (<a href=\"https://blogs.msdn.microsoft.com/codeanalysis/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010/\" rel=\"nofollow noreferrer\">click</a>, <a href=\"http://stackoverflow.com/q/9468601/1997232\">click</a>)."}], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1487767716, "creation_date": 1487767716, "question_id": 42391960, "link": "https://stackoverflow.com/questions/42391960/how-to-specify-annotation-attribute-for-locking", "title": "How to specify annotation/attribute for locking", "body": "<p>In Visual C++, we have set of <a href=\"https://msdn.microsoft.com/en-us/library/hh916381.aspx\" rel=\"nofollow noreferrer\">annotation attributes</a> - for example <code>_Guarded_by_</code> can be used to state that given variable is being protected by synchronization object given in this macro. Code from <a href=\"https://msdn.microsoft.com/en-us/library/hh161624.aspx\" rel=\"nofollow noreferrer\">MSDN</a>:</p>\n\n<pre><code>CRITICAL_SECTION gCS;\n_Guarded_by_(gCS) int gData; \n</code></pre>\n\n<p>It simply means that integer variable is guarded by given Critical Section. The Code Analysis tool will detect and render a warning if variable is used without <em>guarding</em> the integer variable with this CS.</p>\n\n<p>What is the equivalent in C# to state the same? I am not willing to use <code>lock</code> keyword, since I'm using <a href=\"https://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>ReaderWriterLockSlim</code></a> (lighter than <code>lock</code>). Hence I require some attribute/annotation against the variable(s) that I want to have synchronized access, backed by given Reader-Writer lock.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1487767822, "post_id": 42391946, "comment_id": 71931321, "body": "Dupe of <a href=\"http://stackoverflow.com/questions/34263916/is-it-possible-to-return-an-instance-of-a-non-movable-non-copyable-type\">this</a> for C++11/14.  Do note that in C++17 guaranteed copy elision will make the code compile."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1487767838, "post_id": 42391946, "comment_id": 71931331, "body": "I&#39;m baffled that that actually works, and also baffled that you want to do this. It&#39;s pretty awful of you not to allow the caller to return the same object untouched. I hope this is just an academic exercise and not something you actually want to do."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1487768187, "post_id": 42391946, "comment_id": 71931627, "body": "@Mehrdad: In C++03 you could also bind a temporary object to a const reference which extends the lifetime of the object to the end of the scope. I think it is used by scopeguard in folly."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1487768341, "post_id": 42391946, "comment_id": 71931725, "body": "@knivil: I&#39;m aware... I&#39;m not sure what the relevance of that was though? I was talking about letting a caller <i>return</i> the value, not merely <i>use</i> it."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 1, "creation_date": 1487769130, "post_id": 42391946, "comment_id": 71932324, "body": "It is not pure academic. folly use template magic (function template parameters to derive class template parameters) and binds the created object to a base class reference (that explanation may be wrong). Very handy if you do not have the keyword <code>auto</code> and do not know the type of your lambda expression. E.g. Visual Studio 2010 supports <code>lambda</code> but no <code>auto</code>."}, {"owner": {"reputation": 2892, "user_id": 200121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/968230da96f8cbae6a46712829d26996?s=128&d=identicon&r=PG", "display_name": "peper0", "link": "https://stackoverflow.com/users/200121/peper0"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 1, "creation_date": 1487769177, "post_id": 42391946, "comment_id": 71932374, "body": "@knivil: It&#39;s exactly what I want to do. <code>NonCop</code> is a lock that holds a mutex. It would be better if it just supported move construction, but it&#39;s in the external lib and it doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 2892, "user_id": 200121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/968230da96f8cbae6a46712829d26996?s=128&d=identicon&r=PG", "display_name": "peper0", "link": "https://stackoverflow.com/users/200121/peper0"}, "edited": false, "score": 0, "creation_date": 1487769285, "post_id": 42392280, "comment_id": 71932462, "body": "Thanks, I know, but I need this for mutex locking and making an additional allocation each time is not acceptable."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 2892, "user_id": 200121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/968230da96f8cbae6a46712829d26996?s=128&d=identicon&r=PG", "display_name": "peper0", "link": "https://stackoverflow.com/users/200121/peper0"}, "edited": false, "score": 0, "creation_date": 1487777162, "post_id": 42392280, "comment_id": 71938335, "body": "@peper0: Then don&#39;t use a real heap allocator. Use a pool allocator or somesuch."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 3, "last_activity_date": 1487768593, "creation_date": 1487768593, "answer_id": 42392280, "question_id": 42391946, "link": "https://stackoverflow.com/questions/42391946/returning-non-copyable-non-movable-object-with-explicit-constructor/42392280#42392280", "title": "Returning non-copyable non-movable object with explicit constructor", "body": "<p>Unfortunatelly, in this context you can't return the temporary object, since in a return by value expression the compiler requires that the object's copy constructor is accessible, even if this object is going to be copy elided in the end. However, you could return a <code>std::unique_ptr</code> instead of concrete object.</p>\n\n<pre><code>std::unique_ptr&lt;NonCop&gt; get_non_cop() {\n    return std::make_unique&lt;NonCop&gt;(1, 2);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c90b061bfbeff938\" rel=\"nofollow noreferrer\"><strong>Live Demo</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 6, "last_activity_date": 1487788659, "last_edit_date": 1487788659, "creation_date": 1487781063, "answer_id": 42397128, "question_id": 42391946, "link": "https://stackoverflow.com/questions/42391946/returning-non-copyable-non-movable-object-with-explicit-constructor/42397128#42397128", "title": "Returning non-copyable non-movable object with explicit constructor", "body": "<p>No, this isn't possible.  There is no mechanism to call explicit constructors while returning from a function in C++11 or 14 without having an implicit move or copy (that the compiler will certainly elide).</p>\n\n<p>In C++17 you can just type <code>return NonCop(1,2);</code> and due to \"guaranteed elision\" it will no longer require a move or copy constructor.</p>\n\n<hr>\n\n<p>But this is C++, so yes, I can make your code work with zero additional overhead.  By cheating, and returning a different type.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct implicit_construct:T {\n  template&lt;class...Ts&gt;\n  implicit_construct(Ts&amp;&amp;...ts):\n    T(std::forward&lt;Ts&gt;(ts)...) // note: this is an EXPLICIT construction\n  {}\n};\n\nimplicit_construct&lt;NonCop&gt; get_non_cop()\n{\n  return {1, 2};\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3367efcfeaa979f0\" rel=\"noreferrer\">Live example</a>.</p>\n\n<p>An <code>implicit_construct&lt;NonCop&gt;</code> derives from a <code>NonCop</code>, so you can store the return value in a <code>NonCop&amp;&amp;</code>.</p>\n\n<hr>\n\n<p>If you are writing <code>NonCop</code> yourself, then what I'd do is add:</p>\n\n<pre><code> struct explicit_construct_t {};\n // ...\n struct NonCop {\n   // ...\n   template&lt;class...Ts&gt;\n   NonCop( explicit_construct_t, Ts&amp;&amp;...ts ):\n     NonCop( std::forward&lt;Ts&gt;(ts)... )\n  {}\n  // ...\n};\n</code></pre>\n\n<p>which means you can call explicit constructors by prefixing it with a <code>explicit_construct_t</code> to call them implicitly:</p>\n\n<pre><code>NonCop get_non_cop() {\n  return {explicit_construct_t{}, 1, 2};\n}\n</code></pre>\n"}], "owner": {"reputation": 2892, "user_id": 200121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/968230da96f8cbae6a46712829d26996?s=128&d=identicon&r=PG", "display_name": "peper0", "link": "https://stackoverflow.com/users/200121/peper0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3474, "favorite_count": 1, "accepted_answer_id": 42397128, "answer_count": 2, "score": 6, "last_activity_date": 1487788659, "creation_date": 1487767687, "question_id": 42391946, "link": "https://stackoverflow.com/questions/42391946/returning-non-copyable-non-movable-object-with-explicit-constructor", "title": "Returning non-copyable non-movable object with explicit constructor", "body": "<p>If we have a non-movable, non-copyable class with non-explicit constructor, we can return it and use as follows (in C++11):</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass NonCop\n{\npublic:\n    /*non explicit*/ NonCop(int a, int b) : number(a + b) {}\n    NonCop(const NonCop&amp;) = delete;\n    int number;\n};\n\nNonCop get_non_cop()\n{\n    return {1, 2};\n}\n\nint main()\n{\n    NonCop &amp;&amp;nc = get_non_cop();\n    std::cout &lt;&lt; \"three: \" &lt;&lt; nc.number &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>However if the constructor is explicit, it doesn't work. Is there any method of doing this in C++11/C++14 with no modifications in <code>NonCop</code>?</p>\n\n<p>Currently I'm using workaround with deriving from NonCop with wrapper that \"deexplicits\" the constructor but it doesn't seem very pretty.</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 5, "last_activity_date": 1487774271, "last_edit_date": 1495535389, "creation_date": 1487767482, "answer_id": 42391871, "question_id": 42391745, "link": "https://stackoverflow.com/questions/42391745/error-class-template-partial-specialization-contains-a-template-parameter-that/42391871#42391871", "title": "Error: class template partial specialization contains a template parameter that cannot be deduced", "body": "<p>The problem here is that </p>\n\n<pre><code>MetaFunction&lt;ushort,Container&gt;::Type\n</code></pre>\n\n<p>is a <strong>non-deduced context</strong>, in other words the compiler cannot deduce the template arguments from it, so your specialization is not valid. To see why, read more about it from a previous SO question</p>\n\n<p><a href=\"https://stackoverflow.com/q/25245453/3093378\">What is a nondeduced context?</a></p>\n\n<p>Basically a non-deduced context boils down to</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Identity\n{\n    using type = T;\n};\n</code></pre>\n\n<p>Now in a pattern like <code>Identity&lt;T&gt;::type</code>, <code>T</code> won't be deduced, although for you it may look obvious (see again the examples in the link I provided for why this is so, it has to do with partial specializations and lack of 1-1 correspondence between types and the members of the specialization).</p>\n"}], "owner": {"reputation": 4915, "user_id": 181783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1fb6e1466afe620716fcdd839fe54bba?s=128&d=identicon&r=PG", "display_name": "Olumide", "link": "https://stackoverflow.com/users/181783/olumide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 0, "accepted_answer_id": 42391871, "answer_count": 1, "score": 5, "last_activity_date": 1487774271, "creation_date": 1487767133, "question_id": 42391745, "link": "https://stackoverflow.com/questions/42391745/error-class-template-partial-specialization-contains-a-template-parameter-that", "title": "Error: class template partial specialization contains a template parameter that cannot be deduced", "body": "<p>I'd appreciate help figuring out what going on in this problem that's come up in my code which I've reduced to the following:</p>\n\n<pre><code>typedef unsigned short ushort;\n\ntemplate&lt;typename T = ushort*&gt;\nstruct Foo\n{\n};\n\n// Specialization -- works when not a specialization\ntemplate&lt;\n    template&lt;typename,typename&gt; class Container ,\n    template&lt;typename , template&lt;typename,typename&gt; class&gt; class MetaFunction\n    &gt;\nstruct Foo&lt;Container&lt;ushort,typename MetaFunction&lt;ushort,Container&gt;::Type&gt; &gt;\n{   \n    //typedef Container&lt;ushort,typename MetaFunction&lt;ushort,Container&gt;::Type&gt; TestType; // OK\n};\n\nint main()\n{\n}\n</code></pre>\n\n<p>On compilation (gcc 5.4.0) I get the error:</p>\n\n<pre><code>Test.cpp:14:8: error: template parameters not deducible in partial specialization:\n struct Foo&lt;Container&lt;ushort,typename MetaFunction&lt;ushort,Container&gt;::Type&gt; &gt;\n        ^\nTest.cpp:14:8: note:         \u2018template&lt;class, template&lt;class, class&gt; class&lt;template-parameter-2-2&gt; &gt; class MetaFunction\u2019\n</code></pre>\n\n<p>Oddly, the argument <code>Container&lt;ushort,typename MetaFunction&lt;ushort,Container&gt;::Type&gt;</code> to the specialization appears to be valid.  </p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1487767257, "last_edit_date": 1495540810, "creation_date": 1487767257, "answer_id": 42391795, "question_id": 42391717, "link": "https://stackoverflow.com/questions/42391717/how-to-populate-vector-from-text-file-with-two-columns-c/42391795#42391795", "title": "how to populate vector from text file with two columns C++", "body": "<ol>\n<li><p>Read a line using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline()</code></a></p></li>\n<li><p>Split the string for white spaces as mentioned <a href=\"https://stackoverflow.com/questions/9435385/split-a-string-using-c11\">here</a></p></li>\n<li><p>push every element to your vectors.</p></li>\n<li><p>repeat for next line until the end of the file</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 432, "user_id": 5431132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9880037e6079b0d5036d409697d312?s=128&d=identicon&r=PG&f=1", "display_name": "AngusTheMan", "link": "https://stackoverflow.com/users/5431132/angustheman"}, "edited": false, "score": 0, "creation_date": 1487769732, "post_id": 42391800, "comment_id": 71932792, "body": "Thank you for your help! I am still struggling with this however. I have edited the question, could you tell me if I am on the correct track? cheers!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 432, "user_id": 5431132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9880037e6079b0d5036d409697d312?s=128&d=identicon&r=PG&f=1", "display_name": "AngusTheMan", "link": "https://stackoverflow.com/users/5431132/angustheman"}, "edited": false, "score": 0, "creation_date": 1487770097, "post_id": 42391800, "comment_id": 71933083, "body": "@AngusTheMan A little yes, but also a lot of no. Please see my updated answer for a simple example program."}, {"owner": {"reputation": 432, "user_id": 5431132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9880037e6079b0d5036d409697d312?s=128&d=identicon&r=PG&f=1", "display_name": "AngusTheMan", "link": "https://stackoverflow.com/users/5431132/angustheman"}, "edited": false, "score": 0, "creation_date": 1487805527, "post_id": 42391800, "comment_id": 71955080, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1487770071, "last_edit_date": 1487770071, "creation_date": 1487767265, "answer_id": 42391800, "question_id": 42391717, "link": "https://stackoverflow.com/questions/42391717/how-to-populate-vector-from-text-file-with-two-columns-c/42391800#42391800", "title": "how to populate vector from text file with two columns C++", "body": "<p>You can use the normal input operator <code>&gt;&gt;</code> in a loop:</p>\n\n<pre><code>int x, y;  // The coordinates\nint z;     // The dummy first value\n\nwhile (textfile &gt;&gt; z &gt;&gt; x &gt;&gt; y)\n{\n    // Do something with x and y\n}\n</code></pre>\n\n<p>As for the structure, I suggest a little different approach:</p>\n\n<pre><code>struct point\n{\n    int x;\n    int y;\n};\n</code></pre>\n\n<p>Then have a vector of structures:</p>\n\n<pre><code>std::vector&lt;point&gt; points;\n</code></pre>\n\n<p>In the loop, create a <code>point</code> instance, initialize its <code>x</code> and <code>y</code> member, then push it back into the <code>points</code> vector.</p>\n\n<p>Note that the above code have almost no kind of error checking or fault tolerance. If there is an error in the file, more specifically if there is a problem with the format (for example one extra number in one line, or a number to little) then the code above will not be able to handle it. For that you can use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> to read the whole line, put it into a <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> and read into the <code>x</code> and <code>y</code> variables from the string stream.</p>\n\n<hr>\n\n<p>Putting it all together, the simple example of working code (without handling of invalid input) would then be something like</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\n// Defines the point structure\nstruct point\n{\n    int x;\n    int y;\n};\n\nint main()\n{\n    // A collection of points structures\n    std::vector&lt;point&gt; points;\n\n    // Open the text file for reading\n    std::ifstream file(\"textfile.txt\");\n\n    // The x and y coordinates, plus the dummy first number\n    int x, y, dummy;\n\n    // Read all data from the file...\n    while (file &gt;&gt; dummy &gt;&gt; x &gt;&gt; y)\n    {\n        // ... And create a point using the x and y coordinates,\n        // that we put into the vector\n        points.push_back(point{x, y});\n    }\n\n    // TODO: Do something with the points\n}\n</code></pre>\n"}], "owner": {"reputation": 432, "user_id": 5431132, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9880037e6079b0d5036d409697d312?s=128&d=identicon&r=PG&f=1", "display_name": "AngusTheMan", "link": "https://stackoverflow.com/users/5431132/angustheman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1692, "favorite_count": 0, "accepted_answer_id": 42391800, "answer_count": 2, "score": -1, "last_activity_date": 1487770071, "creation_date": 1487767054, "last_edit_date": 1487769771, "question_id": 42391717, "link": "https://stackoverflow.com/questions/42391717/how-to-populate-vector-from-text-file-with-two-columns-c", "title": "how to populate vector from text file with two columns C++", "body": "<p>I am very new to C++ and am trying to create a vector of points in a 2d plane read from a textfile. To do this I first create a struct consisting of two values (x,y) called point. Then a vector of these points called vec. However I am unsure of how to populate the struct data when the textfile is in three columns! The first column is just an index for the points, the second column is the x data and the third is the y data. I don't know the size of vec so I try to use <code>push_back()</code> Here is what I have so far. </p>\n\n<pre><code>    int main(){\n\n        struct point{\n std::vector&lt;x&gt; vec_x;\n std::vector&lt;y&gt; vec_y;\n    };\n\n    std::vector&lt;point&gt; vec;\n    vec.reserve(1000);\n    push_back();\n\n    ifstream file;\n    file.open (\"textfile.txt\");\n        if (textfile.is_open()){\n\n\n/* want to populate x with second column and y with third column */\n        }\n        else std::cout &lt;&lt; \"Unable to open file\";\n    }\n</code></pre>\n\n<p>Where the comment is I have the following;</p>\n\n<pre><code>while( file  &gt;&gt; x ) \nvec.push_back (x);\n\n\nwhile( file  &gt;&gt; y ) \nvec.push_back (y);\n</code></pre>\n\n<p>Apologies if this is very simple, but it isn't to me! Posted below is an example of the txt file with only 6 points. </p>\n\n<pre><code>0 131 842\n1 4033 90\n2 886 9013490\n3 988534 8695\n4 2125 10\n5 4084 474\n6 863 25\n</code></pre>\n\n<p><strong>EDIT</strong> </p>\n\n<pre><code>while (file &gt;&gt; z &gt;&gt; x &gt;&gt; y){\n\n    struct point{\n        int x;\n        int y;\n    };\n\n    std::vector&lt;point&gt; vec;\n    vec.push_back (x);\n    vec.push_back (y);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "c++11", "most-vexing-parse"], "comments": [{"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "edited": false, "score": 0, "creation_date": 1487766902, "post_id": 42391570, "comment_id": 71930668, "body": "Stupid question: QT only includes libraries for MinGW 32Bit, and you target 64bits. Did you solve this issue?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 1, "creation_date": 1487767041, "post_id": 42391570, "comment_id": 71930768, "body": "You should try to strip down that program and produce a mcve: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1487767109, "post_id": 42391570, "comment_id": 71930813, "body": "You need to show us the code. Chances are your code is invalid and MSVC is just not as strict as GCC."}, {"owner": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 1, "creation_date": 1487770343, "post_id": 42391570, "comment_id": 71933271, "body": "Maybe a leftover of msvc-build? Set the build and run directory different from the msvc build directories or delete them before."}, {"owner": {"reputation": 2258, "user_id": 4223664, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W4fi6U1Ff8I/AAAAAAAAAAI/AAAAAAAAAG8/H1w3xH-kWig/photo.jpg?sz=128", "display_name": "Adrien Leravat", "link": "https://stackoverflow.com/users/4223664/adrien-leravat"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1487775423, "post_id": 42391570, "comment_id": 71937096, "body": "Could you give more code context to what fails ? This is very likely like @rubenvb said, GCC is more strict than MSVC."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1487839072, "post_id": 42391570, "comment_id": 71967470, "body": "@lanoxx I&#39;m having trouble understanding why you have to have a class to show the problem... will <code>int main() { std::cout&lt;&lt;QString(&quot;foo&quot;).toStdString()&lt;&lt;std::endl; return 0; }</code> work?"}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1487843319, "post_id": 42391570, "comment_id": 71970262, "body": "@TheQuantumPhysicist That works, but thats not my issue, there is some problem due to the use of the QString constructor when using in the constructor of MyClass. Note that my3 works by my4 produces an error."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1487843399, "post_id": 42391570, "comment_id": 71970311, "body": "I can reproduce this with gcc. The warning/advice from clang is: &quot;<code>Parentheses were disambiguated as a function declaration [-Wvexing-parse]</code>&quot;. Adding parentheses around the arguments (like <code>my4((QString(foo)), (QString(bar)), (QString(foo)));</code>) removes the warning and makes it compile"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1487843558, "post_id": 42391570, "comment_id": 71970414, "body": "<a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">Wikipedia has something about this</a>"}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1487844316, "post_id": 42391570, "comment_id": 71970898, "body": "Can I somehow configure the compiler to work around this until I can refactor the code?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1487848623, "post_id": 42391570, "comment_id": 71973825, "body": "@lanoxx while you successfully recognized this as &quot;the most vexing parse&quot;, I recommend in the future to show very, very simple examples when you want describe the problem. You should keep trimming down your example further until you identify the problem with a specific line when inserted. Thanks Karsten, but not all people would be insterested in recreating the problem on their computer. Good luck!"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1487882501, "last_edit_date": 1495540409, "creation_date": 1487882501, "answer_id": 42425800, "question_id": 42391570, "link": "https://stackoverflow.com/questions/42391570/differences-between-msvc2013-and-mingw-lead-to-most-vexing-parse-issue/42425800#42425800", "title": "Differences between MSVC2013 and MingW lead to most vexing parse issue", "body": "<p>This code would be a function declaration:</p>\n\n<pre><code>MyClass my4(QString(foo), QString(bar), QString(foo));\n</code></pre>\n\n<p>because it matches the grammar specification for a function. Look up \"most vexing parse\" for more information.   The error is because a function declaration cannot have two parameters with the same identifier.  Whenever a statement starts off with <code>T name( U(</code> , this is possible</p>\n\n<p>The error with <code>MyClass my4(QString(foo), QString(bar), QString(foo), Foo::Foobar(5));</code> could be a gcc compiler bug, it reminds me of <a href=\"https://stackoverflow.com/questions/28034742/construction-of-temporary-in-function-call-is-interpreted-as-declaration/\">this similar issue</a>.</p>\n\n<p>To avoid this problem in this case, avoid redundant casts:</p>\n\n<pre><code>MyClass my4(foo, bar, foo);\n</code></pre>\n\n<p>Or you could get in the habit of using list initialization:</p>\n\n<pre><code>MyClass my4{ foo, bar, foo };\n</code></pre>\n\n<p>Note, you had several redundant casts earlier in the code too; e.g. <code>QString foo = QString(\"foo\");</code> could be <code>QString foo(\"foo\");</code>; similarly with <code>a</code>, <code>b</code>, <code>c</code>.</p>\n"}], "owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 42425800, "answer_count": 1, "score": 0, "last_activity_date": 1488003636, "creation_date": 1487766644, "last_edit_date": 1488003636, "question_id": 42391570, "link": "https://stackoverflow.com/questions/42391570/differences-between-msvc2013-and-mingw-lead-to-most-vexing-parse-issue", "title": "Differences between MSVC2013 and MingW lead to most vexing parse issue", "body": "<p>I have an existing C++ and Qt program that builds fine under MSVC but fails to build with MinGW.</p>\n\n<p>Under MinGW I get lots of syntax errors such as:</p>\n\n<pre><code>Redefinition of 'QString foobar'\n</code></pre>\n\n<p>I have extracted the issue into a minimum working example:</p>\n\n<pre><code>//main.cpp\n#include &lt;QString&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass MyClass {\n\npublic:\n    MyClass(const QString &amp;foo, const QString &amp;bar, const QString baz)\n        : foo_(foo), bar_(bar), baz_(baz) {}\n\n    QString foo_;\n    QString bar_;\n    QString baz_;\n};\n\nint main(int argc, char **argv) {\n\n    QString foo = QString(\"foo\");\n    QString bar = QString(\"bar\");\n    QString baz = QString(\"baz\");\n\n    MyClass my(foo, bar, baz);\n\n    QString a = QString(foo);\n    QString b = QString(bar);\n    QString c = QString(baz);\n\n    MyClass my2(a,b,c);\n    MyClass my3(QString(foo), QString(bar), QString(baz));\n    //MyClass my4(QString(foo), QString(bar), QString(foo)); //redefinition error\n\n    return 0;\n}\n</code></pre>\n\n<p>Which gives the error:</p>\n\n<pre><code>main.cpp:31: error: C2086: 'QString foo' : redefinition\n</code></pre>\n\n<p>As pointed out in the comments my problem is being caused by a parse issue that is called \"most vexing parse\". With this knowledge I have refined my issue further and found the following difference between MSVC and MinGW. The following line of code compile under MSVC2013 but not under MinGW:</p>\n\n<pre><code>MyClass my5(QString(foo), QString(bar), QString(foo), Foo::Foobar(5));\n</code></pre>\n\n<p>It seems that adding \"Foo::Foobar(5)\" causes MSVC to see this line as a variable declaration, but MinGW still sees this as function declaration.</p>\n\n<p>My question is, can I work around this issue through some compile flag in GCC, or must I refactor my whole project to avoid the most vexing parse issue all together.</p>\n"}, {"tags": ["c++", "opengl", "geometry-shader"], "comments": [{"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1487766920, "post_id": 42391390, "comment_id": 71930683, "body": "Is there a particular reason why you need to be able to generate all this geometry on the fly, or is it also possible to generate everything once in advance, and only update it when necessary. Because if you&#39;re not updating these triangles every single frame, it&#39;s better to use the latter approach instead instead of a geometry shader."}, {"owner": {"reputation": 573, "user_id": 1890261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9d19249c118004b66d6e41fa9fa655e?s=128&d=identicon&r=PG", "display_name": "Close Call", "link": "https://stackoverflow.com/users/1890261/close-call"}, "reply_to_user": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1487768810, "post_id": 42391390, "comment_id": 71932087, "body": "I&#39;m processing real-time video, which means different image data every frame."}, {"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1487770077, "post_id": 42391390, "comment_id": 71933060, "body": "I would still say geometry shaders may be your best bet here. You create a buffer with your vertex grid, then use the geometry shader to change the order in which vertices are emitted. If you decide not to draw a triangle, simply reverse the order of its indices, and use backface culling to have it become invisible. This will still allow you to add your complementary triangles."}, {"owner": {"reputation": 573, "user_id": 1890261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9d19249c118004b66d6e41fa9fa655e?s=128&d=identicon&r=PG", "display_name": "Close Call", "link": "https://stackoverflow.com/users/1890261/close-call"}, "reply_to_user": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1487774306, "post_id": 42391390, "comment_id": 71936273, "body": "@Bartvbl I am not sure if I can follow you. I assume that I process one triangle at once in the geometry shader, which means that I may omit (no need for reversing the index order) it or keep it. I cannot access the missing 4th vertex to generate the complementary triangle, as in my understanding."}, {"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1487774852, "post_id": 42391390, "comment_id": 71936645, "body": "A geometry shader executes on a single triangle at a time. The input to the function is a struct like the one shown here: <a href=\"https://www.khronos.org/opengl/wiki/Geometry_Shader#Inputs\" rel=\"nofollow noreferrer\">khronos.org/opengl/wiki/Geometry_Shader#Inputs</a>. You can decide yourself in which order to emit these vertices. Or you can change their coordinates such that the triangles become of the &quot;complementary&quot; kind. Finally, you can invert the order in which the vertices are emitted to cause them to be culled through backface culling (I seem to remember the geometry shader can do this as a built-in feature, but I can&#39;s find it at the moment)"}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 1890261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9d19249c118004b66d6e41fa9fa655e?s=128&d=identicon&r=PG", "display_name": "Close Call", "link": "https://stackoverflow.com/users/1890261/close-call"}, "edited": false, "score": 0, "creation_date": 1487774498, "post_id": 42393151, "comment_id": 71936389, "body": "I will try your suggestion! This should work, but I would still prefer more efficient approaches."}, {"owner": {"reputation": 573, "user_id": 1890261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9d19249c118004b66d6e41fa9fa655e?s=128&d=identicon&r=PG", "display_name": "Close Call", "link": "https://stackoverflow.com/users/1890261/close-call"}, "edited": false, "score": 0, "creation_date": 1487779306, "post_id": 42393151, "comment_id": 71940020, "body": "I&#39;ve succesfully tried your first approach and I could not measure a huge performance penalty in milliseconds. Unfortunately my quality improvements are miniscule, but it&#39;s still an improvement!"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": true, "score": 4, "last_activity_date": 1487775958, "last_edit_date": 1487775958, "creation_date": 1487770927, "answer_id": 42393151, "question_id": 42391390, "link": "https://stackoverflow.com/questions/42391390/dynamically-create-complementary-triangles-of-a-regular-grid-in-opengl/42393151#42393151", "title": "Dynamically create complementary triangles of a regular grid in OpenGL", "body": "<p>Here's my idea:\n<p>Put the whole grid in a buffer/texture.\n <br> Build <strong>four</strong> triangles for each four pixels. They cross each other, yes.\n<br>  In the geometry shader you can tell if a triangle is \"faulty\" because it connects two wrong regions. Or, sampling form the texture, because the crossing triangle is valid, so this new one can be discarded.\n<p><strong>EDIT</strong>: Another approach\n<p>Use the texture. Draw instanced with GL_POINTS. With some order and the help of the instanceID the shader knows where the point is.\n<br>For this point test the four possible triangles. If you instance top to down and left to right, only a point to the right and the two below are used for the four triangles. And you avoid repeating tests.\n<br>  Emit only those you choose.</p>\n"}], "owner": {"reputation": 573, "user_id": 1890261, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9d19249c118004b66d6e41fa9fa655e?s=128&d=identicon&r=PG", "display_name": "Close Call", "link": "https://stackoverflow.com/users/1890261/close-call"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 42393151, "answer_count": 1, "score": 5, "last_activity_date": 1487775958, "creation_date": 1487766166, "question_id": 42391390, "link": "https://stackoverflow.com/questions/42391390/dynamically-create-complementary-triangles-of-a-regular-grid-in-opengl", "title": "Dynamically create complementary triangles of a regular grid in OpenGL", "body": "<p>I have created a regular grid which originates from a 2D image, i.e. each pixels has a vertex. There are two triangles per four pixels so that I have a triangle in the top right and in the bottom left. I use vertex and index buffers for that.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sbh2m.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Sbh2m.png\" alt=\"Current state\"></a></p>\n\n<p>Now I dynamically remove triangles / faces at the border of two different kinds of vertices (according to my application) because else there would be distortions. I wrote a geometry shader which takes a triangle and outputs the triangle or nothing (see first picture). The shader recognizes if a triangle is \"faulty\" (has orange edges) and omits it.</p>\n\n<p>Now this works fine, but I may lose some details because of my vertex geometry. I can add complementary triangles to the mesh (see second picture, new triangles with dashed orange line).</p>\n\n<p><a href=\"https://i.stack.imgur.com/6awcn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6awcn.png\" alt=\"Goal state\"></a></p>\n\n<p><strong>How do I accomplish this in OpenGL?</strong></p>\n\n<p>My first idea is to create one quad instead of two triangles, check for the four possible triangles cases and create those triangles dynamically in the geometry shader. But this might be slow; GL_QUADs are deprecated and alternatives might be slow too. What do you have in mind?</p>\n"}, {"tags": ["c++", "zip", "compression", "mbed"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487766248, "post_id": 42391139, "comment_id": 71930184, "body": "LZMA should work fine on small boards."}, {"owner": {"reputation": 11, "user_id": 7595593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12dabce4b4e807f48579465d7de39f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/7595593/tommy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487854889, "post_id": 42391139, "comment_id": 71978220, "body": "thanks for it!  (1) I searched and find out that XZ utils is the new version of LZMA. In this link ( <a href=\"http://tukaani.org/xz/\" rel=\"nofollow noreferrer\">tukaani.org/xz</a> ) i see the section of &quot;Supported platforms&quot;. but I don&#39;t have any OS platform on my Mbed board model STM32F746. (2) Which files are the ones who I need to put them in the header directory?  I would love to get help"}], "answers": [{"tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1487770027, "last_edit_date": 1495540809, "creation_date": 1487770027, "answer_id": 42392813, "question_id": 42391139, "link": "https://stackoverflow.com/questions/42391139/zip-compression-with-c-on-arm-board/42392813#42392813", "title": "zip compression with C++ on ARM board", "body": "<p>You'll need a compression library that does not depend on any file system APIs, as they will not be available on embedded. <a href=\"https://stackoverflow.com/questions/3767640/compact-decompression-library-for-embedded-use\">Here</a> is a list of libraries that would potentially work.</p>\n"}], "owner": {"reputation": 11, "user_id": 7595593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12dabce4b4e807f48579465d7de39f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/7595593/tommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 706, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487770027, "creation_date": 1487765551, "question_id": 42391139, "link": "https://stackoverflow.com/questions/42391139/zip-compression-with-c-on-arm-board", "title": "zip compression with C++ on ARM board", "body": "<p>I've downloaded and tested some zip libraries out there like zlib, miniz and minilzo. When I put it in the Keil software to build it and load it on the ARM board, it can't be builded because a lot of error like it can't find that header file etc.\nIt seems like it's all about OS and depends on the OS, and on Windows it runs well, while for the ARM board it doesn't.\nI'm using Mbed board model STM32F746.\nAny ideas? I would like to get some help. tnx</p>\n"}, {"tags": ["c++", "rvalue-reference"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1487764909, "post_id": 42390859, "comment_id": 71929193, "body": "Change the first <code>f()</code> to take a <code>const int &amp;i</code> parameter."}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 0, "creation_date": 1487765154, "post_id": 42390859, "comment_id": 71929391, "body": "I&#39;m surprised your compiler gives you that error. Mine gives me &quot;binding const int to reference of type int&amp; discards qualifiers&quot;."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 3, "creation_date": 1487765164, "post_id": 42390859, "comment_id": 71929398, "body": "If it gives <i>ambiguity</i> error, then I think this error is <b>misleading</b> because neither of them can be invoked with argument <code>j</code> which is of type <code>int const</code>. The compiler should give <i>&quot;no function found which accepts <code>int const &amp;</code>&quot;</i>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1487765181, "post_id": 42390859, "comment_id": 71929416, "body": "Or add a <code>void f(const int &amp;)</code> overload. Depends on what you want to achieve."}, {"owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "edited": false, "score": 0, "creation_date": 1487765184, "post_id": 42390859, "comment_id": 71929419, "body": "but it seems that the compiler can not differentiate the r value and l value when it comes to <code>const</code>parameters am i right?"}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 1, "creation_date": 1487765210, "post_id": 42390859, "comment_id": 71929439, "body": "@R\u0131fatTolgaKiran, no, neither of these functions is going to work. You can easily check it by commenting them 1by1. Neither of the overloads match the <code>const int</code> argument.\\"}, {"owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "reply_to_user": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 0, "creation_date": 1487765719, "post_id": 42390859, "comment_id": 71929792, "body": "@SingerOfTheFall oh is my fault. the compiler gives <code>error: binding &#39;const int&#39; to reference of type &#39;int&amp;&#39; discards qualifiers</code> error. So the only solution is to create a <code>const int &amp;</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "is_accepted": true, "score": 6, "last_activity_date": 1487765607, "creation_date": 1487765607, "answer_id": 42391158, "question_id": 42390859, "link": "https://stackoverflow.com/questions/42390859/binding-error-in-l-value-reference-and-r-value-reference/42391158#42391158", "title": "binding error in l-value reference and r-value reference", "body": "<p>Your compiler error (if it is indeed the one you mentioned) is misleading. What is really wrong here is that attempting to pass a <code>const int</code> argument to any of your functions would discard the <code>const</code> qualifier, which is not allowed. You can solve it by either changing the signature to <code>const int&amp;</code> / <code>const int&amp;&amp;</code> (note that <code>const int&amp;&amp;</code> will still not work with a <code>const int</code> argument), or by adding an another overload for <code>const</code> arguments, depending on what exactly do you want to achieve.</p>\n\n<p>Basically the choice you have to make is between \"I need one version that needs to be able to modify the passed reference\" (2 versions then) and \"I will never modify the passed reference anyway\" (just the <code>const int&amp;</code> version).</p>\n"}], "owner": {"reputation": 219, "user_id": 5107882, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1014131048620071/picture?type=large", "display_name": "R\u0131fat Tolga Kiran", "link": "https://stackoverflow.com/users/5107882/r%c4%b1fat-tolga-kiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42391158, "answer_count": 1, "score": 4, "last_activity_date": 1487765767, "creation_date": 1487764856, "last_edit_date": 1487765767, "question_id": 42390859, "link": "https://stackoverflow.com/questions/42390859/binding-error-in-l-value-reference-and-r-value-reference", "title": "binding error in l-value reference and r-value reference", "body": "<pre><code>void f(int &amp; i){\n    cout &lt;&lt; \"l-value-ref\" &lt;&lt; endl;\n}\n\nvoid f(int &amp;&amp; i){\n    cout &lt;&lt; \"r-value-ref\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Assuming the code above, we have a overloaded function which takes respectively l-value-reference and r-value-reference parameters. </p>\n\n<pre><code>int x = 5;\nf(x);\nf(5);\nconst int j = 9;\nf(j);\n</code></pre>\n\n<p>when i use <strong>const int j = 9</strong> compiler gives ambiguity error. How can i solve this problem? </p>\n"}]