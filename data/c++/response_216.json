[{"tags": ["c++", "arrays", "c++11", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551311940, "post_id": 54916361, "comment_id": 96598849, "body": "<code>vector&lt;int[256]&gt;</code> looks weird already, it probably should be <code>std::vector&lt;std::array&lt;int,256&gt;&gt;</code>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1551312183, "post_id": 54916361, "comment_id": 96598911, "body": "I don&#39;t think you can use <code>vector&lt;int[256]&gt;</code> in practice in the first place. How do you insert elements into it?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1551312296, "post_id": 54916361, "comment_id": 96598933, "body": "An array decays to a pointer (<code>int *</code> in this case). An array of arrays  decays to a pointer to an array (<code>int *[SIZE]</code>), not a double pointer. Taking the address of <code>table[0][0]</code> provides a pointer to that one element, an <code>int *</code>. Making a 2D array out of <code>int **</code> takes a bit of work and is often the least efficient way to do the job. There&#39;s probably a good formal answer embedded in this comment if I try hard enough to eke it out."}, {"owner": {"reputation": 13, "user_id": 11019468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e7891d8220c9c929c9d482ccf9234f?s=128&d=identicon&r=PG&f=1", "display_name": "yeroc-sebrof", "link": "https://stackoverflow.com/users/11019468/yeroc-sebrof"}, "edited": false, "score": 0, "creation_date": 1551312535, "post_id": 54916361, "comment_id": 96598992, "body": "As far as it stands eerorika and \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I have had no issues in regards to using the C style array but I am now looking at redoing this as a CPP array to see if this fixes my issue"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551312718, "post_id": 54916361, "comment_id": 96599035, "body": "@yeroc_sebrof Well, the major problem I see is that neither <code>vector&lt;int[256]&gt;</code> nor <code>std::vector&lt;std::array&lt;int,256&gt;&gt;</code> would store the data in a single, consecutive chunk of memory, thus a simple cast can&#39;t be applied."}, {"owner": {"reputation": 13, "user_id": 11019468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e7891d8220c9c929c9d482ccf9234f?s=128&d=identicon&r=PG&f=1", "display_name": "yeroc-sebrof", "link": "https://stackoverflow.com/users/11019468/yeroc-sebrof"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551313233, "post_id": 54916361, "comment_id": 96599167, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I woudl expect that to be incorrect given the answer to the question I linked to. I will look into the answer Anroca provided first before looking into other methods"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551313403, "post_id": 54916361, "comment_id": 96599210, "body": "@yeroc_sebrof No, what I said isn&#39;t <i>incorrect</i>. Using a simple cast is something fundamentally different as doing a copy."}, {"owner": {"reputation": 13, "user_id": 11019468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e7891d8220c9c929c9d482ccf9234f?s=128&d=identicon&r=PG&f=1", "display_name": "yeroc-sebrof", "link": "https://stackoverflow.com/users/11019468/yeroc-sebrof"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551314180, "post_id": 54916361, "comment_id": 96599401, "body": "@eerorika by pushing an pre-initalised row I have stored. <code>int newRow[256] = { 0 };</code>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551314966, "post_id": 54916361, "comment_id": 96599573, "body": "@yeroc_sebrof I can&#39;t get that working: <a href=\"http://coliru.stacked-crooked.com/a/e2499f9b3ed7216e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/e2499f9b3ed7216e</a> Can you show me a minimal demo of how to use it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1551315253, "post_id": 54916361, "comment_id": 96599634, "body": "@yeroc_sebrof The native pointer arithmetic coming with a <code>int**</code> would calculate offsets based on a consecutive memory block that can be addressed with the simple formula _<code>addr = base_addr + (row_index * row_size) + col_index</code>"}, {"owner": {"reputation": 13, "user_id": 11019468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e7891d8220c9c929c9d482ccf9234f?s=128&d=identicon&r=PG&f=1", "display_name": "yeroc-sebrof", "link": "https://stackoverflow.com/users/11019468/yeroc-sebrof"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551315513, "post_id": 54916361, "comment_id": 96599694, "body": "@eerorika, it seems I had too much trust in IntelliSense. It seems that this method does not work. Thank you for bringing this to my attention"}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 5496117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d70965fc19d09d5cc7e3dc1a072ff31?s=128&d=identicon&r=PG", "display_name": "Anroca", "link": "https://stackoverflow.com/users/5496117/anroca"}, "is_accepted": false, "score": 0, "last_activity_date": 1551312811, "creation_date": 1551312811, "answer_id": 54916490, "question_id": 54916361, "link": "https://stackoverflow.com/questions/54916361/how-to-convert-a-vector-of-integer-arrays-into-a-2d-array-in-c/54916490#54916490", "title": "How to convert a vector of integer arrays into a 2D array in C++?", "body": "<p>Assuming use of C++ 11, <code>include &lt;algorithm&gt;</code></p>\n\n<p>you could probably use std::copy.</p>\n\n<p>I've not tested it but believe you could just do:</p>\n\n<pre><code>std::copy(&amp;table[0][0], &amp;table[0][0]+256*table.size(), &amp;myArray[0][0]);\n</code></pre>\n\n<p>where the parameters are effectively:</p>\n\n<pre><code>std::copy(&lt;source obj begin&gt;, &lt;source obj end&gt;, &lt;dest obj begin&gt;);\n</code></pre>\n\n<p>More on that here:\n<a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/algorithm/copy</a></p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1551315721, "last_edit_date": 1551315721, "creation_date": 1551315250, "answer_id": 54916775, "question_id": 54916361, "link": "https://stackoverflow.com/questions/54916361/how-to-convert-a-vector-of-integer-arrays-into-a-2d-array-in-c/54916775#54916775", "title": "How to convert a vector of integer arrays into a 2D array in C++?", "body": "<p>While there is going to be a route that should work via casting, the easiest thing I can guarantee will work is to make an array of pointers to <code>int</code>s that contains pointers to the arrays in the source <code>vector</code>.</p>\n\n<pre><code>// make vector of pointers to int\nstd::vector&lt;int*&gt; table2(table.size());\n\n// fill pointer vector pointers to arrays in array vector\nfor (int i = 0; i &lt; size; i++ )\n{\n    table2[i] = table[i];\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;memory&gt;\n\nconstexpr int size = 4;\n\n// test by printing out \nvoid func(int ** arr)\n{\n    for (int i = 0; i &lt; size; i++ )\n    {\n        for (int j = 0; j &lt; size; j++ )\n        {\n            std::cout &lt;&lt; std::setw(5) &lt;&lt; arr[i][j] &lt;&lt;  ' ';\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n}\n\nint main()\n{\n    std::vector&lt;int[size]&gt; table(size);\n\n    // fill values\n    for (int i = 0; i &lt; size; i++ )\n    {\n        for (int j = 0; j &lt; size; j++ )\n        {\n            table[i][j] = i*size +j;\n        }\n    }\n\n    // build int **\n    std::vector&lt;int*&gt; table2(table.size());\n    for (size_t i = 0; i &lt; size; i++ )\n    {\n        table2[i] = table[i];\n    }\n\n    //call function\n    func(table2.data());\n\n}\n</code></pre>\n\n<p>Looks like you're stuck doing this he thar way because of the requirement for a <code>int **</code>, when possible try to use <a href=\"https://stackoverflow.com/a/2076668/4581301\">a simple matrix class</a> instead.</p>\n"}], "owner": {"reputation": 13, "user_id": 11019468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e7891d8220c9c929c9d482ccf9234f?s=128&d=identicon&r=PG&f=1", "display_name": "yeroc-sebrof", "link": "https://stackoverflow.com/users/11019468/yeroc-sebrof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 54916775, "answer_count": 2, "score": 0, "last_activity_date": 1551315870, "creation_date": 1551311800, "last_edit_date": 1551315870, "question_id": 54916361, "link": "https://stackoverflow.com/questions/54916361/how-to-convert-a-vector-of-integer-arrays-into-a-2d-array-in-c", "title": "How to convert a vector of integer arrays into a 2D array in C++?", "body": "<p>So I have been looking at the following post for converting a vector into an array but this method does not seem to be converting for my use case.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2923272/how-to-convert-vector-to-array\">How to convert vector to array</a></p>\n\n<pre><code>vector&lt;array&lt;int, 256&gt;&gt; table; // is my table that I want to convert\n\n// There is then code in the middle that will fill it\n\nint** convert = &amp;table[0][0] // is the first method that I attempted\n\nconvert = table.data(); // is the other method to convert that doesn't work\n</code></pre>\n\n<p>I belive my understanding of the back end of the data type is where my knowledge falls short. Any help on this would be appreciated</p>\n\n<p>edit: I have changed form C style array's to C++ arrays</p>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1551311184, "post_id": 54916199, "comment_id": 96598675, "body": "The fixed-width types in <code>&lt;cstdint&gt;</code> are just aliases, they are not native types of their own. <code>int64_t</code> is an alias for whatever native type the compiler uses as a 64-bit signed integer, whether that be <code>long</code>, <code>long long</code>, <code>__int64</code>, etc."}, {"owner": {"reputation": 322, "user_id": 6772507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ff78e6682bb552d9685c4c7a9827bf?s=128&d=identicon&r=PG&f=1", "display_name": "werk", "link": "https://stackoverflow.com/users/6772507/werk"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551311602, "post_id": 54916199, "comment_id": 96598771, "body": "@RemyLebeau That being said, version-script can only recognize the fundamental type. So aliases such as size_t cannot be used?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551313477, "post_id": 54916199, "comment_id": 96599234, "body": "so it would seem, because aliases are resolved to their fully qualified types during compiling, and map files need to use the same symbol names that the compiler uses.  See <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"nofollow noreferrer\">How To Write Shared Libraries</a>, Section 2.2.5, &quot;Use Export Maps&quot;."}], "owner": {"reputation": 322, "user_id": 6772507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ff78e6682bb552d9685c4c7a9827bf?s=128&d=identicon&r=PG&f=1", "display_name": "werk", "link": "https://stackoverflow.com/users/6772507/werk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551311193, "creation_date": 1551310795, "last_edit_date": 1551311193, "question_id": 54916199, "link": "https://stackoverflow.com/questions/54916199/gcc-version-script-cannot-recognize-int64-t", "title": "gcc --version-script cannot recognize int64_t", "body": "<p>The code examples explain the problem fairly straightforward:</p>\n\n<p>Hash.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\nusing namespace std;\n\nclass Hash {\npublic:\n    Hash(int64_t sz);\n    int64_t size;\n};\n</code></pre>\n\n<p>Hash.cpp</p>\n\n<pre><code>#include \"Hash.h\"\n\nusing namespace std;\n\nHash::Hash(int64_t sz) : size(sz)\n{\n    cout &lt;&lt; \"Hash int\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Hash.h\"\n\nusing namespace std;\n\nint main(int argc, char *argv[]) \n{\n    Hash HashTable(12);\n\n    return 0;\n}\n</code></pre>\n\n<p>And here is the version file, foo.map:</p>\n\n<pre><code>VER_0.1\n{\n  global:\n    extern \"C++\" {\n        \"Hash::Hash(int64_t)\";\n    };\n  local:\n    *;\n};\n</code></pre>\n\n<p>For the compilation:</p>\n\n<pre><code>$g++ -g -c -Wall -Werror -fpic Hash.cpp -std=c++0x\n$g++ -shared -o Hash.so Hash.o -std=c++0x -Wl,--version-script=foo.map\n$g++ -g -o prog Hash.so main.cpp -std=c++0x\n</code></pre>\n\n<p>The error message:</p>\n\n<pre><code>/tmp/ccd60Ulm.o: In function `main':\n/remote/ltg_engine1_us03/liangwa/test/004/main.cpp:7: undefined reference to `Hash::Hash(long)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Then if I change all int64_t to int or long, it compiles fine. So anything special with int64_t? I am using g++ 7.3.0</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551311928, "post_id": 54916182, "comment_id": 96598845, "body": "You will find that the handling of low-level stuff like this lies underneath C++ and does not throw exceptions, at least not exceptions in the C++ sense. For example <a href=\"http://eel.is/c++draft/expr.mul#4\" rel=\"nofollow noreferrer\">division by zero is undefined behaviour,</a> not an exception. Typically what happens with division by zero with integers is you get a floating point exception (Sounds really silly for integer math, huh?) that is NOT a C++ exception and cannot be caught with <code>try&#47;catch</code>."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1551311404, "last_edit_date": 1592644375, "creation_date": 1551311051, "answer_id": 54916243, "question_id": 54916182, "link": "https://stackoverflow.com/questions/54916182/integer-overflow-not-occuring-they-restart-from-0/54916243#54916243", "title": "Integer overflow not occuring : they restart from 0", "body": "<p>Almost nothing throws <code>std::overflow_error</code>; overflow of unsigned values is already defined in the language standard to wrap around to 0, it's not considered an &quot;exceptional&quot; case, so no exception will ever be thrown for plain unsigned integer math. Per <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic#Overflows\" rel=\"nofollow noreferrer\">cppreference docs on integer arithmetic overflow</a>:</p>\n<blockquote>\n<p>Unsigned integer arithmetic is always performed modulo 2<sup>n</sup>\nwhere <code>n</code> is the number of bits in that particular integer. E.g. for <code>unsigned int</code>, adding one to <code>UINT_MAX</code> gives <code>\u200b0</code>\u200b, and subtracting one from <code>\u200b0</code>\u200b gives <code>UINT_MAX</code>.</p>\n</blockquote>\n<p>Similarly, <a href=\"https://en.cppreference.com/w/cpp/error/overflow_error\" rel=\"nofollow noreferrer\">standard library modules rarely use it</a>:</p>\n<blockquote>\n<p>The only standard library components that throw this exception are <code>std::bitset::to_ulong</code> and <code>std::bitset::to_ullong</code>.</p>\n<p>The mathematical functions of the standard library components do not throw this exception (mathematical functions report overflow errors as specified in <code>math_errhandling</code>). Third-party libraries, however, use this. For example, <code>boost.math</code> throws <code>std::overflow_error</code> if <code>boost::math::policies::throw_on_error</code> is enabled (the default setting).</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 7413, "user_id": 304974, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0bad048f40991e627962d8341092b1d?s=128&d=identicon&r=PG", "display_name": "Programmer", "link": "https://stackoverflow.com/users/304974/programmer"}, "edited": false, "score": 0, "creation_date": 1551311637, "post_id": 54916260, "comment_id": 96598777, "body": "&quot;largest representable unsigned integer + 1 is 0,&quot; - I understand you wanted to state the minimum?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 7413, "user_id": 304974, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0bad048f40991e627962d8341092b1d?s=128&d=identicon&r=PG", "display_name": "Programmer", "link": "https://stackoverflow.com/users/304974/programmer"}, "edited": false, "score": 0, "creation_date": 1551311690, "post_id": 54916260, "comment_id": 96598793, "body": "@Programmer 0 is the minimum value representable by unsigned integer types."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1551311823, "last_edit_date": 1551311823, "creation_date": 1551311127, "answer_id": 54916260, "question_id": 54916182, "link": "https://stackoverflow.com/questions/54916182/integer-overflow-not-occuring-they-restart-from-0/54916260#54916260", "title": "Integer overflow not occuring : they restart from 0", "body": "<blockquote>\n  <p>it seems that latest C++ compiler has introduced a new functionality</p>\n</blockquote>\n\n<p>No. This is how C++ has always been specified.</p>\n\n<blockquote>\n  <p>if the variable crosses its max value, its values are restart from 0</p>\n</blockquote>\n\n<p>If an <em>unsigned integer</em> result of a calculation is not representable by the type, then the result will instead be the representable value that is congruent with the mathematical result modulo 2<sup>n</sup> where n is the number of bits in the representation (i.e. congruent with the largest representable value + 1).</p>\n\n<p>In other words, (largest representable unsigned integer + 1) is 0, just like you observed.</p>\n\n<p>Note that this rule does not apply to signed integers. Overflowing a signed integer results in undefined behaviour.</p>\n\n<p>P.S. No operation on a fundamental type is specified to throw an exception. Most of the standard library functions don't throw <code>std::overflow_error</code> either.</p>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1551313462, "post_id": 54916271, "comment_id": 96599228, "body": "A minor detail: an integer overflow is not <b>required</b> to throw an exception. As you say, the behavior is undefined. It <b>could</b> throw an exception."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1551316119, "post_id": 54916271, "comment_id": 96599811, "body": "you are technically correct\u2014the best kind of correct\u2026 \ud83d\ude09"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1551311464, "last_edit_date": 1551311464, "creation_date": 1551311157, "answer_id": 54916271, "question_id": 54916182, "link": "https://stackoverflow.com/questions/54916182/integer-overflow-not-occuring-they-restart-from-0/54916271#54916271", "title": "Integer overflow not occuring : they restart from 0", "body": "<p><code>unsigned int</code> does not overflow or underflow, that's the core difference between signed and unsigned types in C++. <code>unsigned</code> types behave according to modulo arithmetic (i.e., they \"wrap around\") <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.fundamental#4\" rel=\"nofollow noreferrer\">[basic.fundamental]/4</a>. If you want to provoke an integer overflow, use a signed integer type. But even then, an integer overflow does not throw an exception but just lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>\u2026</p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 2, "last_activity_date": 1551311238, "creation_date": 1551311238, "answer_id": 54916284, "question_id": 54916182, "link": "https://stackoverflow.com/questions/54916182/integer-overflow-not-occuring-they-restart-from-0/54916284#54916284", "title": "Integer overflow not occuring : they restart from 0", "body": "<p>That is the behavior for <em>unsigned</em> types, according to the standard:</p>\n\n<p>Standard 6.7.1/4</p>\n\n<blockquote>\n  <p>Unsigned integers shall obey the laws of arithmetic modulo 2n where n is the number of bits in the value representation of that particular size of integer.</p>\n</blockquote>\n\n<p>Which inspires the footnote:</p>\n\n<blockquote>\n  <p>This implies that unsigned arithmetic does not overflow because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting unsigned integer type. </p>\n</blockquote>\n"}], "owner": {"reputation": 7413, "user_id": 304974, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0bad048f40991e627962d8341092b1d?s=128&d=identicon&r=PG", "display_name": "Programmer", "link": "https://stackoverflow.com/users/304974/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 54916243, "answer_count": 4, "score": 1, "last_activity_date": 1551311823, "creation_date": 1551310693, "question_id": 54916182, "link": "https://stackoverflow.com/questions/54916182/integer-overflow-not-occuring-they-restart-from-0", "title": "Integer overflow not occuring : they restart from 0", "body": "<p>I tried a simple code and found that integers variables are not overflowing instead it seems that latest C++ compiler has introduced a new functionality related to POD datatypes - if the variable crosses its max value, its values are restart from 0:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;stdexcept&gt;\n\nint main()\n{\ntry\n{\nfor (uint8_t idx = 254 ;  ; idx++)\n{\nstd::cout &lt;&lt; unsigned(idx) &lt;&lt; std::endl;\n}\n}\ncatch(std::overflow_error e)\n{\nstd::cout &lt;&lt; \"Error\" &lt;&lt; std::endl;\n}\n}\n</code></pre>\n\n<p>When I run the code the exception code is never executed - but is this the desired behavior?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1551346388, "post_id": 54916178, "comment_id": 96609687, "body": "Hi Ochmar, you can call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">GetLastError()</a> after GetDIBits or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-bitblt#return-value\" rel=\"nofollow noreferrer\">BitBlt</a> function to see if there is an error code."}], "owner": {"reputation": 284, "user_id": 7441356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc54fe2a8aacea30c617f259e7fe0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ochmar", "link": "https://stackoverflow.com/users/7441356/ochmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551310677, "creation_date": 1551310677, "question_id": 54916178, "link": "https://stackoverflow.com/questions/54916178/c-windows-sometimes-white-screen-while-taking-an-application-screenshot", "title": "C++, windows (sometimes) white screen while taking an application screenshot", "body": "<p>I have an application function that triggers screenshot capture of the said application's window.</p>\n\n<p>It goes like this:</p>\n\n<pre><code>    void PlatformWindow::captureScreenshot()\n{\n    WIN32Window *window = (WIN32Window*)&amp;g_window;\n    if (window) {\n        HWND handle = window-&gt;getWindow();\n        if (handle){\n            RECT client_rect = { 0 };\n            GetClientRect(handle, &amp;client_rect);\n            int width = client_rect.right - client_rect.left;\n            int height = client_rect.bottom - client_rect.top;\n\n\n            HDC hdcScreen = GetDC(handle);\n            HDC hdc = CreateCompatibleDC(hdcScreen);\n            HBITMAP hbmp = CreateCompatibleBitmap(hdcScreen, width, height);\n            SelectObject(hdc, hbmp);\n\n            BitBlt(hdc, 0, 0, width, height, hdcScreen, 0, 0, SRCCOPY);\n\n            BITMAPINFO bmp_info = { 0 };\n            bmp_info.bmiHeader.biSize = sizeof(bmp_info.bmiHeader);\n            bmp_info.bmiHeader.biWidth = width;\n            bmp_info.bmiHeader.biHeight = height;\n            bmp_info.bmiHeader.biPlanes = 1;\n            bmp_info.bmiHeader.biBitCount = 24;\n            bmp_info.bmiHeader.biCompression = BI_RGB;\n\n            int bmp_padding = (width * 3) % 4;\n            if (bmp_padding != 0) bmp_padding = 4 - bmp_padding;\n\n            BYTE *bmp_pixels = new BYTE[(width * 3 + bmp_padding) * height];;\n            GetDIBits(hdc, hbmp, 0, height, bmp_pixels, &amp;bmp_info, DIB_RGB_COLORS);\n\n            BITMAPFILEHEADER bmfHeader;\n            //Make screenshot name as a time\n            time_t currentTime = std::time(NULL);\n            std::ostringstream oss;\n            auto tm = *std::localtime(&amp;currentTime);\n            oss &lt;&lt; std::put_time(&amp;tm, \"%d-%m-%Y_%H-%M\");\n            auto time_string = oss.str();\n            uint id = 0;\n            std::string name = \"screens\\\\\" + time_string +\"_0.bmp\";\n\n            //Loop over its indexes\n            while(true){\n                name = \"screens\\\\\" + time_string + \"_\" + std::to_string(id) +\".bmp\";\n                if (!file_exists(name)){\n                    break;\n                }\n                id++;\n            }\n            LPSTR fileName = const_cast&lt;char *&gt;(name.c_str());\n            HANDLE bmp_file_handle = CreateFile(fileName, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\n\n            // Add the size of the headers to the size of the bitmap to get the total file size\n            DWORD dwSizeofDIB = (width * 3 + bmp_padding) * height + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n\n            //Offset to where the actual bitmap bits start.\n            bmfHeader.bfOffBits = (DWORD)sizeof(BITMAPFILEHEADER) + (DWORD)sizeof(BITMAPINFOHEADER);\n\n            //Size of the file\n            bmfHeader.bfSize = dwSizeofDIB;\n\n            //bfType must always be BM for Bitmaps\n            bmfHeader.bfType = 0x4D42; //BM\n\n            DWORD dwBytesWritten = 0;\n            WriteFile(bmp_file_handle, (LPSTR)&amp;bmfHeader, sizeof(BITMAPFILEHEADER), &amp;dwBytesWritten, NULL);\n            WriteFile(bmp_file_handle, (LPSTR)&amp;bmp_info.bmiHeader, sizeof(BITMAPINFOHEADER), &amp;dwBytesWritten, NULL);\n            WriteFile(bmp_file_handle, (LPSTR)bmp_pixels, (width * 3 + bmp_padding) * height, &amp;dwBytesWritten, NULL);\n\n            //Close the handle for the file that was created\n            CloseHandle(bmp_file_handle);\n\n            DeleteDC(hdc);\n            DeleteObject(hbmp);\n            ReleaseDC(NULL, hdcScreen);\n            delete[] bmp_pixels;\n        }\n    }\n}\n</code></pre>\n\n<p>And it works fine on several machines (Windows 10, XP and so on).\nThere is, however, a rare case on Windows 7 (and maybe others, I don't know if that's just a bad luck or whatever) that makes screenshot's blank. Just all white.\nI ran some diagnosis and am pretty convenient that it, for sure, captures right window, but somehow it does not capture pixels well.</p>\n\n<p>I dig deeper and found out, that whenever I set this option in windows ->  performance options -> \"Adjust for best performance\", it suddenly starts to work and a screenshot is positively taken (no more white screen, which is great).</p>\n\n<p>What I am wondering right now is if I can somehow make my code better to cover up those situations since forcing user to change his Window's options is not an ideal scenario.</p>\n\n<p>@EDIT:\nI found out that this is the very option that makes it works, if I disable desktop composition, it works just fine.</p>\n"}, {"tags": ["c++", "variadic"], "answers": [{"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 71, "user_id": 7286467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a54d96183b49995c13cb850de2a485?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/7286467/jordan"}, "edited": false, "score": 0, "creation_date": 1559141839, "post_id": 54916029, "comment_id": 99330085, "body": "@PemiNg why did you not accept that answer ? ( <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a> )"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1551310591, "last_edit_date": 1551310591, "creation_date": 1551309557, "answer_id": 54916029, "question_id": 54915993, "link": "https://stackoverflow.com/questions/54915993/variadic-function-that-takes-array-types/54916029#54916029", "title": "Variadic function that takes array types", "body": "<p>Fixed arrays decay into a pointer to the 1st element.</p>\n\n<p>Arrays are always passed to C style variadic parameters by pointer, eg:</p>\n\n<pre><code>void compare(int count, ...)\n{\n    double *condition;\n    va_list vl;    \n    va_start(vl, count);\n    for (int i = 0; i &lt; count; ++i)\n    {\n        condition = va_arg(vl, double*);\n        // do something with condition up to 2 elements\n    }\n    va_end(vl);\n}\n\nint main()\n{\n    double arr1[2] = {1, 2};\n    double arr2[2] = {3, 4};\n    double arr3[2] = {5, 6};\n    compare(3, arr1, arr2, arr3);\n    return 0;\n}\n</code></pre>\n\n<p>If you need to know the length of each passed array, you will have to pass in that info using additional variadic parameters, eg:</p>\n\n<pre><code>void compare(int count, ...)\n{\n    double *condition;\n    int len;\n    va_list vl;    \n    va_start(vl, count);\n    for (int i = 0; i &lt; count; ++i)\n    {\n        len = va_arg(vl, int);\n        condition = va_arg(vl, double*);\n        // do something with condition, up to len elements\n    }\n    va_end(vl);\n}\n\nint main()\n{\n    double arr1[1] = {1};\n    double arr2[5] = {2, 3, 4, 5, 6};\n    double arr3[2] = {7, 8};\n    compare(3, 1, arr1, 5, arr2, 2, arr3);\n    return 0;\n}\n</code></pre>\n\n<p>If you are using C++11 or later, you should use C++ style <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">variadic templates</a> instead of C style variadic parameters, eg:</p>\n\n<pre><code>template &lt;size_t N&gt;\nvoid doSomething(double (&amp;condition)[N])\n{\n    // do something with condition, up to N elements\n}\n\ntemplate &lt;size_t N&gt;\nvoid compare(double (&amp;arr)[N])\n{\n    doSomething(arr);\n}\n\ntemplate &lt;size_t N, typename... Args&gt;\nvoid compare(double (&amp;arr)[N], Args&amp;... args)\n{\n    doSomething(arr);\n    compare(args...);\n}\n\nint main()\n{\n    double arr1[1] = {1};\n    double arr2[5] = {2, 3, 4, 5, 6};\n    double arr3[2] = {7, 8};\n    compare(arr1, arr2, arr3);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/ZstmWA\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 71, "user_id": 7286467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a54d96183b49995c13cb850de2a485?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/7286467/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551310881, "creation_date": 1551309245, "last_edit_date": 1551310881, "question_id": 54915993, "link": "https://stackoverflow.com/questions/54915993/variadic-function-that-takes-array-types", "title": "Variadic function that takes array types", "body": "<p>Is there any way to write a variadic function that takes array types?</p>\n\n<pre><code>void compare(int count ...) {\n    double[2] condition;\n    va_list vl;    \n    va_start(vl, count);\n    for (int i = 0; i &lt; count; i++){\n        condition = va_arg(vl, double[2]);\n        // do something with condition\n    }\n    va_end(vl);\n}\n</code></pre>\n\n<p>I tried to do in C++, but my program says that <code>double[2]</code> types are not assignable.</p>\n\n<p>Is there any solution?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551308411, "post_id": 54915833, "comment_id": 96597921, "body": "Using <code>std::vector</code> instead of raw c arrays might help to improve that code a lot."}, {"owner": {"reputation": 11, "user_id": 11127740, "user_type": "registered", "profile_image": "https://graph.facebook.com/2522515507777037/picture?type=large", "display_name": "Aaron Ryan", "link": "https://stackoverflow.com/users/11127740/aaron-ryan"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551308677, "post_id": 54915833, "comment_id": 96597988, "body": "Thanks,I&#39;m not familiar with vectors and I&#39;m just trying to see if i can do this with the knowledge i have,I will try read more into them and see can i understand them"}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551308803, "post_id": 54915833, "comment_id": 96598028, "body": "<a href=\"https://stackoverflow.com/questions/8861568/fisher-yates-variation\">This</a> might work well enough (as a base, at least) to getting a shuffle. Should work on a fixed array, as well"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551309097, "post_id": 54915833, "comment_id": 96598131, "body": "There is a lot of things this code could be doing more efficiently (using structs/classes, using 4 <code>int[13]</code> arrays, or at least one <code>int[4][13]</code> array, instead of a single big <code>int[52]</code> array, using STL algorithms, etc). But, some issues I do see are 1) calling <code>srand()</code> too many times, 2) incrementing <code>x</code> 1 too many times when the final <code>else</code> (black) is reached, and 3) not actually &quot;removing&quot; elements from the array when decrementing <code>x</code>."}, {"owner": {"reputation": 11, "user_id": 11127740, "user_type": "registered", "profile_image": "https://graph.facebook.com/2522515507777037/picture?type=large", "display_name": "Aaron Ryan", "link": "https://stackoverflow.com/users/11127740/aaron-ryan"}, "edited": false, "score": 0, "creation_date": 1551309604, "post_id": 54915833, "comment_id": 96598263, "body": "Remy Lebeau that is one of the problems I mentioned that I&#39;m not positive on how to remove the elements from the array,and for decrementing on the final else would you recommend using another else if? Or something different altogether?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551311205, "post_id": 54915833, "comment_id": 96598683, "body": "You can&#39;t really remove an element form an array. The only things you can do with an array of <code>int</code> is to find a value that cannot exist in the dataset and use it as a marker for an empty slot, writing this value over deleted elements, or move everything in the array after the element to be removed back one element and update a book-keeping value that stores the number of items in use in the array."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11102662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sG8WAVXH2Jw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQN8RTKlTsgxMJ2BXxIwlKSSIvLKpQ/mo/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/11102662/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1551460772, "last_edit_date": 1551460772, "creation_date": 1551315775, "answer_id": 54916834, "question_id": 54915833, "link": "https://stackoverflow.com/questions/54915833/moving-a-particular-element-of-an-array-to-a-new-array/54916834#54916834", "title": "Moving a particular element of an array to a new array", "body": "<p>To Remove a certain element of an array, I look at the last index in the array, then swap it with the index you want to remove. Then, decrement the size of the array.\nEg:</p>\n\n<pre><code>int arr [] = {1,2,3,4,5};\nint itemCount = 5; \n</code></pre>\n\n<p>If I want to remove the 2nd item in the array, I would do:</p>\n\n<pre><code>arr[1] = arr[itemCount-1]; //Assigns 4th Index of array to 2nd Index.\nitemCount--;\n</code></pre>\n\n<p>New array would look like this if you displayed it: </p>\n\n<pre><code>{1,5,3,4}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1551319786, "creation_date": 1551319786, "answer_id": 54917342, "question_id": 54915833, "link": "https://stackoverflow.com/questions/54915833/moving-a-particular-element-of-an-array-to-a-new-array/54917342#54917342", "title": "Moving a particular element of an array to a new array", "body": "<p>If I understand your question, you have a number of problems that are preventing you from reaching your goal of separating the deal of 52 cards into four arrays by suit to collect somewhat of a <em>\"hand\"</em> of cards by suit where no card in any one suit is a duplicate of (<code>1 - 13</code>), e.g. \"Ace -> King\".</p>\n\n<p>If I have that right, then you are wanting to loop over your deck using <code>rand</code> to pick a \"card number\" which you then use to categorize the card by suit with your <code>if (rNumber &lt; FT) ...</code> logic resulting is something similar to:</p>\n\n<pre><code>  YELLOW     BLUE      RED    BLACK\n\n      13       12        5       11\n       7        8        1        5\n       8       13       13        1\n      10        1       12        7\n       6        7        3       12\n       3        4       11        3\n      11        3        2        4\n       0        0        9        6\n       0        0        6        2\n</code></pre>\n\n<p>(Where <code>0</code> simply means \"not dealt\", e.g. there were only <code>7 - YELLOW and BLUE cards</code> generated in this run compared to <code>9 = RED and BLACK</code> cards. (the difference between the total and <code>52</code> representing duplicate cards generated) To ensure a complete deal, you would need to loop <code>while (x &lt; 52)</code> incrementing <code>x</code> on each unique card generated rather than simply looping <code>52</code> times -- that is left to you)</p>\n\n<p>As others have suggested in the comments, you can simplify things while making your code less error prone by using the containers provided by C++, e.g. <code>vector</code> or <code>map</code> or the like where automatic memory management and built-in bound checking iteration routines can prevent you from straying off into undefined behavior. That said, there is nothing wrong with understanding and learning how to handle plain-old arrays. (you will find them quite frequently in a lot of the C++ written over the past 30 years). Since you have chosen arrays, let's move forward with your problem.</p>\n\n<p>In order to achieve some reasonable distribution of cards, you have a number of issues to fix. The primary two problems you have are <code>int rNumber = rand() % x;</code> returning a decreasing number which along with your choice of <code>ft = 14</code> and your comparisons ensure you are zero (or very close to zero) <code>BLACK</code> cards ever generated.</p>\n\n<p>The random card number you generate each iteration should be a valid card number from <code>0 - 51</code> to correspond to the valid indexes of your <code>ar</code> array, e.g.</p>\n\n<pre><code>#define SUITS  4    /* no. of suits */\n#define FT    13    /* cards per-suit (left as FT as your original was ft) */\n#define CARDS 52    /* cards per-deck */\n...\n        int rNumber = rand() % CARDS;   /* mod with total cards not x */\n</code></pre>\n\n<p>Next, 'ft<code>should not be</code>14<code>. Think about your</code>if<code>statements</code>YELLOW &lt; 14<code>, then</code>BLUE &lt; 28<code>and</code>RED &lt; 42<code>, that's not right, that only leaves</code>10<code>possible cards for</code>BLACK`. Instead you need:</p>\n\n<pre><code>        if (rNumber &lt; FT) { /* separate into suit, copy to deal array */\n        ...\n</code></pre>\n\n<p>(that way the valid indexes for <code>13 - cards</code> (e.g. <code>0 - 12</code>) map exactly to corresponding array elements for each of the cards per-suit)</p>\n\n<p>To handle separating cards into a separate 2D-array where each row represents a suit and where each of the columns can then hold each unique card of each suit, just declare a 2D array of sufficient size, e.g.</p>\n\n<pre><code>    int deal[SUITS][FT] = {{0}},    /* 2D array holding cards by suit */\n        count[SUITS] = {0},         /* count per-suit in deal */\n</code></pre>\n\n<p>(where <code>count</code> just holds the number of cards added to each suit in <code>deal</code>, e.g. when a card is added to <code>deal[YELLOW][n]</code>, you increment <code>count[YELLOW]++;</code>)</p>\n\n<p>To make things easier on yourself you can create a global <code>enum</code> which maps your suit colors to proper values for use throughout the remainder of your code, e.g.</p>\n\n<pre><code>enum { YELLOW, BLUE, RED, BLACK };  /* color constants */\n</code></pre>\n\n<p>Now you have the constants <code>YELLOW = 0</code>, <code>BLUE = 1</code>, <code>RED = 2</code> and <code>BLACK = 3</code> which allows easy mapping of your cards to suits during your separation conditionals, e.g.</p>\n\n<pre><code>        if (rNumber &lt; FT) { /* separate into suit, copy to deal array */\n            cout &lt;&lt; (\"yellow - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[YELLOW], count[YELLOW], ar[rNumber]))\n                deal[YELLOW][count[YELLOW]++] = ar[rNumber];\n        }\n        else if (rNumber &lt; FT * 2) {\n            cout &lt;&lt; (\"blue - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[BLUE], count[BLUE], ar[rNumber]))\n                deal[BLUE][count[BLUE]++] = ar[rNumber];\n        }\n        ...\n</code></pre>\n\n<p>That is pretty much it. After the cards are all separated, you can loop over the <code>count</code> array and find the maximum number of cards in any one suit and then output your <code>deal</code> array showing how the cards were randomly selected and filtered into the different suits. Putting it together in a short example, you could do something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\n#define SUITS  4    /* no. of suits */\n#define FT    13    /* cards per-suit */\n#define CARDS 52    /* cards per-deck */\n\nenum { YELLOW, BLUE, RED, BLACK };  /* color constants */\n\n/* function to scan 'a' for 'val`\n * returning 1 if 'val` doesn't exist, 0 otherwise\n */\nint isunique (int *a, int sz, int val)\n{\n    for (int i = 0; i &lt; sz; i++)\n        if (a[i] == val)\n            return 0;\n\n    return 1;\n}\n\nint main (void) {\n\n    int ar[] = { 1,  2,  3,  4,  5,  6,  7,  8,  9, 10,\n                11, 12, 13,  1,  2,  3,  4,  5,  6,  7,\n                 8,  9, 10, 11, 12, 13,  1,  2,  3,  4,\n                 5,  6,  7,  8,  9, 10, 11, 12, 13,  1,\n                 2,  3,  4,  5,  6,  7,  8,  9, 10, 11,\n                12, 13 },\n        deal[SUITS][FT] = {{0}},    /* 2D array holding cards by suit */\n        count[SUITS] = {0},         /* count per-suit in deal */\n        maxcount = 0,               /* max cards per-suit in deal */\n        x = CARDS;\n\n    srand (time(NULL));\n\n    while (x--)     /* loop 52 times */\n    {   /* get card number (0 - 51) */\n        int rNumber = rand() % CARDS;   /* mod with total cards not x */\n\n        if (rNumber &lt; FT) { /* separate into suit, copy to deal array */\n            cout &lt;&lt; (\"yellow - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[YELLOW], count[YELLOW], ar[rNumber]))\n                deal[YELLOW][count[YELLOW]++] = ar[rNumber];\n        }\n        else if (rNumber &lt; FT * 2) {\n            cout &lt;&lt; (\"blue - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[BLUE], count[BLUE], ar[rNumber]))\n                deal[BLUE][count[BLUE]++] = ar[rNumber];\n        }\n        else if (rNumber &lt; FT * 3) {\n            cout &lt;&lt; (\"red - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[RED], count[RED], ar[rNumber]))\n                deal[RED][count[RED]++] = ar[rNumber];\n        }\n        else {\n            cout &lt;&lt; (\"black - \") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            if (isunique (deal[BLACK], count[BLACK], ar[rNumber]))\n                deal[BLACK][count[BLACK]++] = ar[rNumber];\n        }\n    }\n\n    for (int i = 0; i &lt; SUITS; i++) /* find max cards in any one suit */\n        if (count[i] &gt; maxcount)\n            maxcount = count[i];\n\n    /* output deal */\n    printf (\"\\n%8s %8s %8s %8s\\n\\n\", \"YELLOW\", \"BLUE\", \"RED\", \"BLACK\");\n    for (int i = 0; i &lt; maxcount; i++)\n        printf (\"%8d %8d %8d %8d\\n\",\n                i &lt; count[YELLOW] ? deal[YELLOW][i] : 0,\n                i &lt; count[BLUE] ? deal[BLUE][i] : 0,\n                i &lt; count[RED] ? deal[RED][i] : 0,\n                i &lt; count[BLACK] ? deal[BLACK][i] : 0);\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>You can delete the raw <code>cout</code> statements in each <code>if(..) else if (..)...</code> when you are satisfied the raw card numbers are being separated by suit in the way you intend. They were left below (with a space and hyphen added between the color and number for readability) because that is the way you had your original code.</p>\n\n<pre><code>$ ./bin/card_array\nblue - 12\nblack - 11\nred - 5\nblue - 8\nred - 1\nblack - 5\nblue - 8\nyellow - 13\nblue - 8\nblue - 8\nblue - 13\nblue - 1\nblue - 12\nred - 13\nblack - 1\nblack - 7\nblack - 5\nred - 12\nblue - 7\nred - 3\nblue - 8\nred - 11\nred - 2\nyellow - 7\nyellow - 8\nblack - 12\nred - 5\nyellow - 13\nblue - 4\nblack - 7\nred - 12\nblack - 3\nblack - 4\nblue - 3\nyellow - 10\nblue - 4\nred - 9\nyellow - 6\nyellow - 6\nyellow - 3\nblue - 13\nred - 5\nblack - 6\nblack - 11\nblack - 6\nred - 6\nblack - 5\nred - 11\nblack - 6\nyellow - 11\nblack - 2\nyellow - 13\n\n  YELLOW     BLUE      RED    BLACK\n\n      13       12        5       11\n       7        8        1        5\n       8       13       13        1\n      10        1       12        7\n       6        7        3       12\n       3        4       11        3\n      11        3        2        4\n       0        0        9        6\n       0        0        6        2\n</code></pre>\n\n<p>While you can make the logic simpler by using the C++ containers, e.g. <code>vector</code>, <code>map</code>, etc. there is nothing wrong with learning how to handle simple arrays (there is a lot of C++ code out there written in the last 30 years that uses them exclusively). Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 11, "user_id": 11127740, "user_type": "registered", "profile_image": "https://graph.facebook.com/2522515507777037/picture?type=large", "display_name": "Aaron Ryan", "link": "https://stackoverflow.com/users/11127740/aaron-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551460772, "creation_date": 1551308270, "last_edit_date": 1551309006, "question_id": 54915833, "link": "https://stackoverflow.com/questions/54915833/moving-a-particular-element-of-an-array-to-a-new-array", "title": "Moving a particular element of an array to a new array", "body": "<p>I have a 1-dimensional array of length 52 (a deck), with 4 sets of numbers between 1-13.</p>\n\n<p>At the moment, I have it so that a random number generator selects an element, if that number is between a certain range it is one colour, between another range a different colour, etc..</p>\n\n<p>I want to be able to remove the element that is selected by the RNG, move it to another array, i.e player, and turn it into a 2-dimensional array with its corresponding colour.  I want to make the array smaller each time so there is no duplicates.  Right now, I have 13 numbers being displayed at a time, and still have a long way to go.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint main()\n{\n    int x = 51;\n    while (x &gt;=1)\n    {\n        int ar[x] = {1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13,1,2,3,4,5,6,7,8,9,10,11,12,13};\n\n        int ft = 14;\n\n        srand(time(NULL));\n        int rNumber = rand() % x;\n\n        if (rNumber &lt; ft)\n        {\n            cout &lt;&lt; (\"yellow\") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            x--;\n        }\n        else if (rNumber &lt; ft * 2)\n        {\n            cout &lt;&lt; (\"blue\") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";;\n            x--;\n        }\n        else if (rNumber &lt; ft * 3)\n        {\n            cout &lt;&lt; (\"red\") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n            x--;\n        }\n\n        else cout &lt;&lt; (\"black\") &lt;&lt; ar[rNumber] &lt;&lt; \"\\n\";\n        x--;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "symlink"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 4, "creation_date": 1551308128, "post_id": 54915790, "comment_id": 96597831, "body": "Symlinks are regularly used with shared objects (e.g. libz.so is generally a symlink to libz.so.1.2.11.whatever), so, if they are valid, they are unlikely to be the culprit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1551308153, "post_id": 54915790, "comment_id": 96597841, "body": "What does this have to do with makefiles?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1551308163, "post_id": 54915790, "comment_id": 96597843, "body": "You can use <code>ldd</code> to check the paths to shared objects"}, {"owner": {"reputation": 43, "user_id": 5390664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fae0fc65efe15169a7ec7579f98cc6?s=128&d=identicon&r=PG&f=1", "display_name": "adamits", "link": "https://stackoverflow.com/users/5390664/adamits"}, "edited": false, "score": 0, "creation_date": 1551308413, "post_id": 54915790, "comment_id": 96597923, "body": "You right about having nothing to do with the Makefile. Updating."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1551347429, "post_id": 54915790, "comment_id": 96610347, "body": "Have you <i>really</i> put libraries <code>libtest1.so</code> and <code>libtest2.so</code> into <code>&#47;lib</code> in your root filesystem? If not, edit your question to show the actual facts."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1551365468, "last_edit_date": 1551365468, "creation_date": 1551364999, "answer_id": 54928196, "question_id": 54915790, "link": "https://stackoverflow.com/questions/54915790/g-compiling-can-i-link-to-a-directory-with-symlinked-binaries/54928196#54928196", "title": "g++ compiling: can I link to a directory with symlinked binaries?", "body": "<p>What happens at <em>runtime</em> is related to the <a href=\"https://en.wikipedia.org/wiki/Rpath\" rel=\"nofollow noreferrer\">rpath</a>.</p>\n\n<p>You may want (not really recommended, see <a href=\"https://gms.tf/ld_library_path-considered-harmful.html\" rel=\"nofollow noreferrer\">this</a>) to set your <code>LD_LIBRARY_PATH</code> appropriately before running your executable, or better yet you want to set the executable's rpath when linking it (e.g. by passing <code>-Wl,--rpath $(realpath ../../lib/)</code> to the <code>g++</code> command doing the link.</p>\n\n<p>Read Drepper's <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"nofollow noreferrer\"><em>How to write shared libraries</em></a> paper and the <a href=\"http://tldp.org/HOWTO/Program-Library-HOWTO/\" rel=\"nofollow noreferrer\">Program Library HowTo</a></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5390664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fae0fc65efe15169a7ec7579f98cc6?s=128&d=identicon&r=PG&f=1", "display_name": "adamits", "link": "https://stackoverflow.com/users/5390664/adamits"}, "edited": false, "score": 0, "creation_date": 1551379821, "post_id": 54928261, "comment_id": 96629183, "body": "Ah - so even if compiler knows about those directories, Is till need to modify rpath to have runtime access tot them? Thanks!"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 43, "user_id": 5390664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fae0fc65efe15169a7ec7579f98cc6?s=128&d=identicon&r=PG&f=1", "display_name": "adamits", "link": "https://stackoverflow.com/users/5390664/adamits"}, "edited": false, "score": 1, "creation_date": 1551385833, "post_id": 54928261, "comment_id": 96632026, "body": "@adamits Added more details for you."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1551386374, "last_edit_date": 1592644375, "creation_date": 1551365191, "answer_id": 54928261, "question_id": 54915790, "link": "https://stackoverflow.com/questions/54915790/g-compiling-can-i-link-to-a-directory-with-symlinked-binaries/54928261#54928261", "title": "g++ compiling: can I link to a directory with symlinked binaries?", "body": "<p>Option <code>-L</code> is for linker <code>ld</code> to find <code>.a</code> and <code>.so</code> during linking.</p>\n<p>Option <code>-Wl,-rpath=</code> is for the <em>dynamic linker</em> ld.so to find <code>.so</code> when the application is run. You need to use <code>-Wl,-rpath=</code> when a required shared library is not in (standard system) directories specified in <code>/etc/ld.so.conf</code>.</p>\n<p>Use <code>$ORIGIN</code> <em>dynamic linker</em> variable to make rpath relative to the path of your executable:</p>\n<pre><code>g++ -L../../lib -Wl,-rpath='${ORIGIN}/../../lib' -o my_prog my_prog.cpp -ltest1 -ltest2\n</code></pre>\n<p>Be careful to make sure <code>${ORIGIN}</code> is <strong>not</strong> expanded by the shell or your makefile (this is why it is in single quotes).</p>\n<p><a href=\"https://linux.die.net/man/8/ld.so\" rel=\"nofollow noreferrer\"><code>${ORIGIN}</code></a>:</p>\n<blockquote>\n<p><code>$ORIGIN</code> and rpath</p>\n<p><code>ld.so</code> understands the string <code>$ORIGIN</code> (or equivalently <code>${ORIGIN}</code>) in an rpath specification (<code>DT_RPATH</code> or <code>DT_RUNPATH</code>) to mean the directory containing the application executable. Thus, an application located in somedir/app could be compiled with <code>gcc -Wl,-rpath,'$ORIGIN/../lib'</code> so that it finds an associated shared library in somedir/lib no matter where somedir is located in the directory hierarchy. This facilitates the creation of &quot;turn-key&quot; applications that do not need to be installed into special directories, but can instead be unpacked into any directory and still find their own shared libraries.</p>\n</blockquote>\n"}], "owner": {"reputation": 43, "user_id": 5390664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fae0fc65efe15169a7ec7579f98cc6?s=128&d=identicon&r=PG&f=1", "display_name": "adamits", "link": "https://stackoverflow.com/users/5390664/adamits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 54928196, "answer_count": 2, "score": -2, "last_activity_date": 1551386374, "creation_date": 1551307983, "last_edit_date": 1551364637, "question_id": 54915790, "link": "https://stackoverflow.com/questions/54915790/g-compiling-can-i-link-to-a-directory-with-symlinked-binaries", "title": "g++ compiling: can I link to a directory with symlinked binaries?", "body": "<p>The below compiles:</p>\n\n<p><code>g++ -L../../lib -o my_prog my_prog.cpp -ltest1 -ltest2</code></p>\n\n<p>where <code>../../lib</code> contains symlinks to libtest1.so and libtest2.so</p>\n\n<p>But I am getting an error when I run the program: \"error while loading shared libraries: libtest1.so: cannot open shared object file: No such file or directory\" and am not sure if symlinking is the culprit.</p>\n"}, {"tags": ["c++", "directx", "opencl", "directx-10"], "comments": [{"owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "edited": false, "score": 1, "creation_date": 1551335177, "post_id": 54915538, "comment_id": 96604572, "body": "You didn\u2019t include code for the FallBodyClass, so we\u2019re missing some info here."}, {"owner": {"reputation": 39, "user_id": 10085006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc15bdeca4be51b688f883ad3dea745a?s=128&d=identicon&r=PG&f=1", "display_name": "Mstislaw", "link": "https://stackoverflow.com/users/10085006/mstislaw"}, "reply_to_user": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "edited": false, "score": 0, "creation_date": 1551336650, "post_id": 54915538, "comment_id": 96605175, "body": "FallBodyClass is a massive file that interacts with an OpenCL kernel. I will try to edit the most important parts in, but it is going to be quite messy."}, {"owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "edited": false, "score": 1, "creation_date": 1551348465, "post_id": 54915538, "comment_id": 96610957, "body": "That&#39;s fair enough. From your description, it appears that <code>ModelClass::Initialize</code> is failing (returning <code>false</code>). Looking at the code, I see that there are 2 points where this could happen: 1) <code>FallBodyClass</code> constructor, 2) <code>InitializeBuffers</code> function. Your next step should be to determine which one it is."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1551467606, "post_id": 54915538, "comment_id": 96664569, "body": "Are more basic question would be &quot;Why are you using DirectX 10 in the first place?&quot;"}, {"owner": {"reputation": 39, "user_id": 10085006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc15bdeca4be51b688f883ad3dea745a?s=128&d=identicon&r=PG&f=1", "display_name": "Mstislaw", "link": "https://stackoverflow.com/users/10085006/mstislaw"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1551470509, "post_id": 54915538, "comment_id": 96665830, "body": "@ChuckWalbourn For the most part, because it is already there, and migration will be too time-consuming since mapping now works in a somewhat different way."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1551477294, "post_id": 54915538, "comment_id": 96668247, "body": "Mapping works in exactly the same way... you just call <code>Map</code> on the context instead of the device. DirectX 10 should be considered legacy and porting to DirectX 11 is fairly trivial... except if you made lots of use of the legacy D3DX10 helper. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2013/08/20/living-without-d3dx/\" rel=\"nofollow noreferrer\">Living without D3DX</a>."}], "owner": {"reputation": 39, "user_id": 10085006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc15bdeca4be51b688f883ad3dea745a?s=128&d=identicon&r=PG&f=1", "display_name": "Mstislaw", "link": "https://stackoverflow.com/users/10085006/mstislaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551336948, "creation_date": 1551306603, "last_edit_date": 1551336948, "question_id": 54915538, "link": "https://stackoverflow.com/questions/54915538/model-class-fails-to-initialize-in-directx-10", "title": "Model class fails to initialize in DirectX 10", "body": "<p>My project uses DirectX 10 and some of its boilerplate to render a scene, however, it crashes with an error message \"Could not initialize the model object.\" As far as I understand, making it up to this point means that, at the very least, the model has been successfully created, so the error must be in one of the files below, which is fortunate as the most difficult tasks are handled by the <code>FallBodyClass.cpp</code> that hosts OpenCL API interactions. If needed, I can try attaching parts of it in a later edit.</p>\n\n<p>During debug, my IDE shows that all components of m_Model (m_vertexBuffer, m_indexBuffer etc) are shown as   with _vfptr . I do not know what to make of it, but it does seem to confirm that <code>modelclass.cpp</code> is the point of failure.</p>\n\n<h1>graphicsclass.cpp</h1>\n\n<pre><code>GraphicsClass::GraphicsClass()\n{\n    m_Direct3D = 0;\n    m_Model = 0;\n    m_ColorShader = 0;\n\n    m_bodies = BODIES;\n}\nGraphicsClass::GraphicsClass(const GraphicsClass&amp; other)\n{}\nGraphicsClass::~GraphicsClass()\n{}\nbool GraphicsClass::Initialize(int screenWidth, int screenHeight, HWND hwnd)\n{\n    bool result;\n    // Create the Direct3D object.\n    m_Direct3D = new D3DClass;\n    if (!m_Direct3D)\n    {\n        return false;\n    }\n    // Initialize the Direct3D object.\n    result = m_Direct3D-&gt;Initialize(screenWidth, screenHeight, VSYNC_ENABLED, hwnd, FULL_SCREEN, SCREEN_DEPTH, SCREEN_NEAR);\n    if (!result)\n    {\n        MessageBox(hwnd, L\"Could not initialize Direct3D\", L\"Error\", MB_OK);\n        return false;\n    }\n    // Create the model object.\n    m_Model = new ModelClass(m_bodies);\n    if (!m_Model)\n    {\n        return false;\n    }\n\n    // Initialize the model object.\n    result = m_Model-&gt;Initialize(m_Direct3D-&gt;GetDevice());\n    if (!result)\n    {\n        MessageBox(hwnd, L\"Could not initialize the model object.\", L\"Error\", MB_OK);\n        return false;\n    }\n</code></pre>\n\n<h1>modelclass.cpp</h1>\n\n<pre><code>ModelClass::ModelClass(int bodies)\n{\n    m_vertexBuffer = 0;\n    m_indexBuffer = 0;\n\n    m_positions = 0;\n    m_velocities = 0;\n    m_bodySystem = 0;\n\n    m_bodies = bodies;\n}\nModelClass::ModelClass(const ModelClass&amp; other)\n{}\nModelClass::~ModelClass()\n{}\nbool ModelClass::Initialize(ID3D10Device* device)\n{\n    bool result;\n  TwoLines twoLinesConstants = CalculateLinesConstants(M_PI_4);\n    m_positions = new float[COORD_DIM * m_bodies];\n    m_velocities = new float[VEL_DIM * m_bodies];\n    m_bodySystem = new class FallBodyClass(m_bodies, &amp;m_positions, &amp;m_velocities, twoLinesConstants, result);\n    if (!result) {\n        return false;\n    }\n    // Initialize the vertex and index buffer that hold the geometry for the triangle.\n    result = InitializeBuffers(device, twoLinesConstants);\n    if(!result)\n    {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n\n<h1>FallBodyclass.cpp</h1>\n\n<pre><code>    FallBodyClass::FallBodyClass(int bodies, float ** positionsCPU, float ** velocitiesCPU, TwoLines twoLines, bool &amp; success)\n        :bodies(bodies)\n    {\n        cl_int ret;\n\n        // getting the first available platform\n        cl_platform_id clPlatformID[2];\n        cl_platform_id GPUplatform;\n        cl_uint num_platforms;\n        //char str[1024];\n\n        ret = clGetPlatformIDs(2, clPlatformID, &amp;num_platforms);\n\n        GPUplatform = clPlatformID[0]; //choose GPU platform\n        //error |= clGetPlatformInfo(GPUplatform, CL_PLATFORM_NAME, 0, NULL, NULL);\n        //clGetPlatformInfo(GPUplatform, CL_PLATFORM_VENDOR, sizeof(str), str, NULL);\n\n        // getting the first GPU device\n        ret |= clGetDeviceIDs(GPUplatform, CL_DEVICE_TYPE_GPU, 1, &amp;device, NULL);\n\n        if (ret != CL_SUCCESS)\n        {\n            success = false;\n            return;\n        }\n\n        //clGetDeviceInfo(device, CL_DEVICE_NAME, sizeof(str), str, NULL);\n        // creating the context\n        context = clCreateContext(0, 1, &amp;device, NULL, NULL, &amp;ret);\n        if (ret != CL_SUCCESS)\n        {\n            success = false;\n            return;\n        }\n\n        cl_queue_properties props[] = {\n            CL_QUEUE_PROFILING_ENABLE\n        };\n\n        // creating the command queue \n        queue = clCreateCommandQueueWithProperties(context, device, props, &amp;ret);\n\n        if (ret != CL_SUCCESS)\n        {\n            success = false;\n            return;\n        }\n\n        // setting the local variables\n        // (at the same time one of them supposed to be 0 and another to be 1)\n        read = 0;\n        write = 1;\n\n        // reading the kernel\n        FILE * f = NULL;\n        char fileName[18] = \"kernel.cl\";\n\n        f = fopen(fileName, \"rb\");\n        if(f == NULL) \n        {   \n            success = false;\n            return;\n        }\n        // getting the length of the source code for the kernel\n        fseek(f, 0, SEEK_END); \n        size_t codeLength = ftell(f);\n        rewind(f); \n\n        char * code = (char *)malloc(codeLength + 1); \n        if (fread(code, codeLength, 1, f) != 1)\n        {\n            fclose(f);\n            free(code);\n            success = false;\n            return;\n        }\n\n        // closing the file and 0-terminating the source code\n        fclose(f);\n        code[codeLength] = '\\0';\n\n        // creating the program\n        program = clCreateProgramWithSource(context, 1, (const char **)&amp;code, &amp;codeLength, &amp;ret);\n\n        if (ret != CL_SUCCESS)\n        {\n\n            success = false;\n            return;\n        }\n\n\n        // clearing the memory    \n        free(code);\n\n        // building the program\n        ret |= clBuildProgram(program, 0, NULL, NULL, NULL, NULL);\n\n        // creating the kernel\n        kernel = clCreateKernel(program, \"impactManager\", &amp;ret);\n\n        // setting the local size of the group the largest possible in order to load all computational units\n        int numGroups;\n        ret |= clGetDeviceInfo(device, CL_DEVICE_MAX_COMPUTE_UNITS, sizeof(numGroups), &amp;numGroups, NULL);\n        localSize = bodies / numGroups;\n\n        // allocating pinned buffers for velocities and positions, and stuck\n        positionsCPUBuffer = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_ALLOC_HOST_PTR, COORD_DIM * bodies * sizeof(float) , NULL, NULL);\n        velocitiesCPUBuffer = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_ALLOC_HOST_PTR, VEL_DIM * bodies * sizeof(float) , NULL, NULL);\n        linesCPUBuffer = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_ALLOC_HOST_PTR, 8 * sizeof(float), NULL, NULL);\n\n        //  get pointers to arrays to operate with the buffers (array map buffers here (to program) as float-arrays)\n        *positionsCPU = (float *)clEnqueueMapBuffer(queue, positionsCPUBuffer, CL_TRUE, CL_MAP_WRITE, 0, COORD_DIM * bodies * sizeof(float), 0, NULL, NULL, NULL);\n        *velocitiesCPU = (float *)clEnqueueMapBuffer(queue, velocitiesCPUBuffer, CL_TRUE, CL_MAP_WRITE, 0, VEL_DIM * bodies * sizeof(float), 0, NULL, NULL, NULL);\n        float * linesCPU = (float *)clEnqueueMapBuffer(queue, linesCPUBuffer, CL_TRUE, CL_MAP_WRITE, 0, 8 * sizeof(float), 0, NULL, NULL, NULL);\n\n        // initialization of the bodies' positions and velocities, and stuck\n        initBodies(*positionsCPU, *velocitiesCPU);\n        initLines(twoLines, linesCPU);\n\n        // unmapping the pointers to arrays (invalidates array pointers)\n        clEnqueueUnmapMemObject(queue, positionsCPUBuffer, *positionsCPU, 0, NULL, NULL);\n        clEnqueueUnmapMemObject(queue, velocitiesCPUBuffer, *velocitiesCPU, 0, NULL, NULL);\n        clEnqueueUnmapMemObject(queue, linesCPUBuffer, linesCPU, 0, NULL, NULL);\n\n        // allocate two arrays on GPU for positions and velocities\n        for (int i = 0; i &lt; 2; ++i) {\n            positionsGPU[i] = clCreateBuffer(context, CL_MEM_READ_WRITE, COORD_DIM * bodies * sizeof(float), NULL, NULL);\n            ret |= clEnqueueWriteBuffer(queue, positionsGPU[i], CL_TRUE, 0, COORD_DIM * bodies * sizeof(float), *positionsCPU, 0, NULL, NULL);\n            velocitiesGPU[i] = clCreateBuffer(context, CL_MEM_READ_WRITE, VEL_DIM * bodies * sizeof(float), NULL, NULL);\n            ret |= clEnqueueWriteBuffer(queue, velocitiesGPU[i], CL_TRUE, 0, VEL_DIM * bodies * sizeof(float), *velocitiesCPU, 0, NULL, NULL);\n        }\n\n        linesGPU = clCreateBuffer(context, CL_MEM_READ_WRITE, 8 * sizeof(float), NULL, NULL);\n        ret |= clEnqueueWriteBuffer(queue, linesGPU, CL_TRUE, 0, 8 * sizeof(float), linesCPU, 0, NULL, NULL);\n\n        if (ret != CL_SUCCESS)\n        {\n            success = false;\n            return;\n        }\n    }\n\n\nvoid FallBodyClass::initLines(IN TwoLines l, OUT float *linesCPU)\n{\n  linesCPU[0] = l.a1;\n  linesCPU[1] = l.b1;\n  linesCPU[2] = l.R1.x;\n  linesCPU[3] = l.R1.y;\n\n  linesCPU[4] = l.a2;\n  linesCPU[5] = l.b2;\n  linesCPU[6] = l.R2.x;\n  linesCPU[7] = l.R2.y;\n}\n\n\n// initialization of the bodies' positions and velocities\nvoid FallBodyClass::initBodies(float * positionsCPU, float * velocitiesCPU)\n{\n    float scale = 0.20f;\n\n    // initialization of the memory\n    memset(positionsCPU, 0, COORD_DIM * bodies * sizeof(float));\n    memset(velocitiesCPU, 0, VEL_DIM * bodies * sizeof(float));\n    // for the randomization\n    srand((unsigned int)time(NULL));\n\n    for (int i = 0; i &lt; bodies; i++)\n    {\n        positionsCPU[COORD_DIM * i] = 1.8*((rand() / (float)RAND_MAX) - 0.5);   //x axis\n        positionsCPU[COORD_DIM * i + 1] = 0.9;  //y axis\n        positionsCPU[COORD_DIM * i + 2] = 0.0f; //z axis\n        positionsCPU[COORD_DIM * i + 3] = 0.0f; // stuck variable \n\n\n        // velocities are zeros\n        velocitiesCPU[VEL_DIM* i] = 0.0;\n        velocitiesCPU[VEL_DIM* i + 1] = -2 * (rand() / (float)RAND_MAX);\n        velocitiesCPU[VEL_DIM* i + 2] = 0.0;\n\n    }\n}\n\n// updating the bodies' positions and velocities. Stuck is updated inside too \nvoid FallBodyClass::update(float dt, float * positionsCPU, float * velocitiesCPU, bool &amp; success)\n{\n    cl_int error = CL_SUCCESS;\n    size_t global_work_size;\n    size_t local_work_size;\n    success = true;\n\n    if (localSize &gt; bodies)\n        localSize = bodies;\n\n    local_work_size = localSize;\n    global_work_size = bodies;\n\n    // passing the arguments\n    // we write the new positions and velocities and read the previous ones\n    error |= clSetKernelArg(kernel, 0, sizeof(cl_mem), (void *)&amp;positionsGPU[write]);\n    error |= clSetKernelArg(kernel, 1, sizeof(cl_mem), (void *)&amp;velocitiesGPU[write]);\n    error |= clSetKernelArg(kernel, 2, sizeof(cl_mem), (void *)&amp;positionsGPU[read]);\n    error |= clSetKernelArg(kernel, 3, sizeof(cl_mem), (void *)&amp;velocitiesGPU[read]);\n    error |= clSetKernelArg(kernel, 4, sizeof(cl_float), (void *)&amp;dt);\n    error |= clSetKernelArg(kernel, 5, sizeof(cl_mem), (void *)&amp;linesGPU);\n\n    // just swap read and write in order not to copy the arrays\n    int temp;\n    temp = write;\n    write = read;\n    read = temp;\n\n    // executing the kernel\n    error |= clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &amp;global_work_size, &amp;local_work_size, 0, NULL, NULL);\n    // synchronization \n    clFinish(queue);\n\n    // asynchronously reading the updated values \n    error |= clEnqueueReadBuffer(queue, positionsGPU[read], CL_FALSE, 0, COORD_DIM * bodies * sizeof(float), positionsCPU, 0, NULL, NULL);\n    if (error != CL_SUCCESS)\n    {\n        success = false;\n    }\n\n    error |= clEnqueueReadBuffer(queue, velocitiesGPU[read], CL_FALSE, 0, VEL_DIM * bodies * sizeof(float), velocitiesCPU, 0, NULL, NULL);\n    if (error != CL_SUCCESS)\n    {\n        success = false;\n    }\n\n    ///////////\n    bool toReboot = positionsCPU[3]; //fourth index of the [0] first element\n  //bool toReboot = false;\n    ////////////\n    if (toReboot) {\n        positionsCPU = (float *)clEnqueueMapBuffer(queue, positionsCPUBuffer, CL_TRUE, CL_MAP_WRITE, 0, COORD_DIM * bodies * sizeof(float), 0, NULL, NULL, NULL);\n        velocitiesCPU = (float *)clEnqueueMapBuffer(queue, velocitiesCPUBuffer, CL_TRUE, CL_MAP_WRITE, 0, VEL_DIM * bodies * sizeof(float), 0, NULL, NULL, NULL);\n\n        initBodies(positionsCPU, velocitiesCPU);\n\n        // unmapping the pointers\n        clEnqueueUnmapMemObject(queue, positionsCPUBuffer, positionsCPU, 0, NULL, NULL);\n        clEnqueueUnmapMemObject(queue, velocitiesCPUBuffer, velocitiesCPU, 0, NULL, NULL);\n        //update values on GPU side\n        error |= clEnqueueWriteBuffer(queue, positionsGPU[read], CL_TRUE, 0, COORD_DIM * bodies * sizeof(float), positionsCPU, 0, NULL, NULL);\n        error |= clEnqueueWriteBuffer(queue, velocitiesGPU[read], CL_TRUE, 0, VEL_DIM * bodies * sizeof(float), velocitiesCPU, 0, NULL, NULL);\n    }\n\n    return;\n}\n\n\nFallBodyClass::~FallBodyClass(void)\n{\n    // synchronization (if something has to be done) \n    clFinish(queue);\n    // releasing all objects\n    clReleaseMemObject(linesGPU);\n    clReleaseMemObject(linesCPUBuffer);\n    clReleaseMemObject(velocitiesGPU[0]);\n    clReleaseMemObject(velocitiesGPU[1]);\n    clReleaseMemObject(positionsGPU[0]);\n    clReleaseMemObject(positionsGPU[1]);\n    clReleaseMemObject(positionsCPUBuffer);\n    clReleaseMemObject(velocitiesCPUBuffer);\n    clReleaseKernel(kernel);\n    clReleaseProgram(program);\n    clReleaseCommandQueue(queue);\n    clReleaseContext(context);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "header-files", "multiple-definition-error"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1551305687, "post_id": 54915281, "comment_id": 96596969, "body": "<i>I get errors.</i> Recommend adding these so we can help you through them. Switch to the build console, if you&#39;re not using it already, and get them from the build output. They&#39;re easier to copy and paste as well as more complete."}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551305689, "post_id": 54915281, "comment_id": 96596971, "body": "Instead of making <code>pointers()</code> return an int you should change it to <code>void Pointers()</code> and get rid of the <code>return 0;</code> Same goes for <code>HelloWorld()</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1551305903, "post_id": 54915281, "comment_id": 96597059, "body": "Is your build configuration using the Eclipse internal builder, make with Eclipse generated makefiles, or your own makefile?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1551305919, "post_id": 54915281, "comment_id": 96597065, "body": "Typo: pointers.h has <code>#ifndef POINTERS_H_INCLUDED</code> and <code>#ifndef POINTERS_H_INCLUDED</code> The second one should be <code>#define POINTERS_H_INCLUDED</code>. Just dropped the code into eclipse, made the change and I&#39;m not getting any more errors. Output looks like what I&#39;d expect, so I&#39;m voting to close as a typo."}, {"owner": {"reputation": 704, "user_id": 8801881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1053cd1123d3bf1c159b18b97cf9c45b?s=128&d=identicon&r=PG&f=1", "display_name": "Hemil", "link": "https://stackoverflow.com/users/8801881/hemil"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551321495, "post_id": 54915281, "comment_id": 96600984, "body": "That should be an answer I feel @user4581301"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 704, "user_id": 8801881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1053cd1123d3bf1c159b18b97cf9c45b?s=128&d=identicon&r=PG&f=1", "display_name": "Hemil", "link": "https://stackoverflow.com/users/8801881/hemil"}, "edited": false, "score": 0, "creation_date": 1551334591, "post_id": 54915281, "comment_id": 96604363, "body": "@Hemil It&#39;s just a cut and paste mistake. Everybody does them and the solution is simply the impossible &quot;Don&#39;t do that.&quot; No one&#39;s going to learn anything useful from a formal answer. This is exactly what the  Off-topic: non-reproducible or typographical error close-vote is for."}], "owner": {"reputation": 1, "user_id": 11127538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ab05d7b9b0d474e96045d1b68a702d?s=128&d=identicon&r=PG&f=1", "display_name": "oronoc1210", "link": "https://stackoverflow.com/users/11127538/oronoc1210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551305388, "creation_date": 1551305388, "question_id": 54915281, "link": "https://stackoverflow.com/questions/54915281/eclipse-c-multiple-main-error-only-when-using-multiple-headers", "title": "Eclipse C++ multiple main error only when using multiple headers", "body": "<p>I'm trying to learn how to utilize header files in C++ projects, so I made .cpp files containing simple functions to make sure I'm doing all the declaring and including correctly.\nEverything worked fine when I only had one set of .cpp and .h files, but when I try to add more I get errors.</p>\n\n<p>To start with, in my project I had:</p>\n\n<p>helloworld.cpp</p>\n\n<pre><code>#include \"helloworld.h\"\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\nusing namespace std;\n\nint HelloWorld() {\n    puts(\"Hello, World!\");\n    cout &lt;&lt; \"Hello, World!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>helloworld.h</p>\n\n<pre><code>#ifndef HELLOWORLD_H_INCLUDED\n#define HELLOWORLD_H_INCLUDED\nint HelloWorld();\n#endif /* HELLOWORLD_H_INCLUDED */\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"helloworld.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    HelloWorld();\n    return 0;\n}\n</code></pre>\n\n<p>Which built with no errors and ran correctly.</p>\n\n<p>Next I tried adding a second .cpp and .h file, which created building errors.</p>\n\n<p>pointers.cpp</p>\n\n<pre><code>#include \"pointers.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint Pointers() {\n    int x = 1;\n    int *ptr_a = &amp;x;\n    cout &lt;&lt; *ptr_a &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>pointers.h</p>\n\n<pre><code>#ifndef POINTERS_H_INCLUDED\n#ifndef POINTERS_H_INCLUDED\nint Pointers();\n#endif /* POINTERS_H_INCLUDED */\n</code></pre>\n\n<p>and modified main.cpp:</p>\n\n<pre><code>#include \"helloworld.h\"\n#include \"pointers.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    HelloWorld();\n    Pointers();\n    return 0;\n}\n</code></pre>\n\n<p>Now when I try to build, I get an error saying there are multiple definitions of main -- one in main.cpp, and the other in pointers.cpp.</p>\n\n<p>Even more oddly, if I make a new project and do the exact same thing but reverse the order in which I create the .cpp and .h files (i.e. pointers first then helloworld), it builds and runs correctly with just the pointers files but runs into the same error when adding helloworld files, saying that the multiple exceptions of main are in main.cpp and helloworld.cpp.</p>\n\n<p>I figure it must have something to do with Eclipse itself, but I don't know what the exact issue is.</p>\n\n<p>Does anyone know what might be going on?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1551304935, "post_id": 54915160, "comment_id": 96596680, "body": "This is way too much description and not nearly enough actual details for someone to help you.   No one wants to read a novel about why you went through some process to get where you are.   Post the minimal code to reproduce the problem and the exact error message you are getting and delete all the other stuff.  It&#39;s important to understand that when you don&#39;t understand what&#39;s going on, your interpretation of what&#39;s going on isn&#39;t really very useful - usually people don&#39;t share the necessary information because they&#39;ve assumed that it&#39;s not relevant even though they don&#39;t understand what&#39;s up"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1551305216, "post_id": 54915160, "comment_id": 96596798, "body": "<i>I keep getting Out of Line Definition.</i> -- Is this a real compiler error?  If so, you should post it.  That &quot;error&quot; sounds more like a message coming from an IDE or third-party syntax checker (i.e. Intellisense), and not an actual compiler error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9088793"}, "edited": false, "score": 0, "creation_date": 1551305303, "post_id": 54915160, "comment_id": 96596828, "body": "<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9088793"}, "edited": false, "score": 0, "creation_date": 1551305397, "post_id": 54915160, "comment_id": 96596865, "body": "I&#39;m a bit puzzled by the member functions like <code>::removeArtist</code>, because <code>::getArtistsInternal</code> is returning a copy not a reference, so the member data won&#39;t be modified."}, {"owner": {"reputation": 169, "user_id": 2682968, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/819460186/picture?type=large", "display_name": "Seth D. Fulmer", "link": "https://stackoverflow.com/users/2682968/seth-d-fulmer"}, "edited": false, "score": 0, "creation_date": 1551305619, "post_id": 54915160, "comment_id": 96596944, "body": "Well that was another bug I just noticed and now fixed in my code - it&#39;s supposed to return a reference but wasn&#39;t - Media as you may have seen is an abstract class - that&#39;s to be used as a base so I haven&#39;t been able to use/test it yet.  I figured out my problem though - The #pragma once line I think has to be first in the file - Once I moved that all the errors vanished.  Thanks for viewing/responding though."}, {"owner": {"reputation": 169, "user_id": 2682968, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/819460186/picture?type=large", "display_name": "Seth D. Fulmer", "link": "https://stackoverflow.com/users/2682968/seth-d-fulmer"}, "edited": false, "score": 0, "creation_date": 1551305859, "post_id": 54915160, "comment_id": 96597042, "body": "Sir - this IS the minimum amount of code to express the problem - If I KNEW the problem was not the code but the pragma line I wouldn&#39;t have posted here in the first place.  Any problem that would be posted anywhere on this site so simple as just a few lines of code are simple enough for me to resolve on my own in less than a minute.  Anytime someone posts something it should be because they went through a process to try to figure it out themselves or else they&#39;re lazy and are just looking for hand outs - I&#39;ve never looked for hand outs and wouldn&#39;t answer a question for someone like that."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1551306100, "post_id": 54915160, "comment_id": 96597125, "body": "@SethD.Fulmer -- The way you solve these issues is to comment out everything, compile, and confirm there are no errors.  Then reintroduce code, compiling each time, until the compiler error is duplicated.  Did you do that?  If not, that is how it&#39;s done in the real world, regardless of the size of the program."}, {"owner": {"reputation": 169, "user_id": 2682968, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/819460186/picture?type=large", "display_name": "Seth D. Fulmer", "link": "https://stackoverflow.com/users/2682968/seth-d-fulmer"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1551636987, "post_id": 54915160, "comment_id": 96703508, "body": "@PaulMcKenzie, I had already commented &amp; done my own debugging already - I&#39;ve been prog, for over 20 years in a lot of languages incl, C++ &amp; Java - I&#39;m a Sr Lvl Full Stack developer in my job &amp; this was for my personal project.  I know damn well how to debug something.  When everything else&#39;s considered &amp; the bug still remains I come here - or Quora but I hate people who ask prog questions on Quora so I won&#39;t be one myself.  This WAS the least amount of code that still demonstrated the problem.  I know exactly what I&#39;m doing with debugging problems - I just don&#39;t have any C++ colleagues."}], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 2682968, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/819460186/picture?type=large", "display_name": "Seth D. Fulmer", "link": "https://stackoverflow.com/users/2682968/seth-d-fulmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1551305678, "creation_date": 1551305678, "answer_id": 54915342, "question_id": 54915160, "link": "https://stackoverflow.com/questions/54915160/i-keep-getting-out-of-line-definition-errors-when-its-copied-and-pasted/54915342#54915342", "title": "I keep getting Out of Line Definition errors when it&#39;s copied and pasted?", "body": "<p>I think I figured out my problem - The #pragma once line I think has to be first in the file - Once I moved that all the errors vanished.</p>\n"}], "owner": {"reputation": 169, "user_id": 2682968, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/819460186/picture?type=large", "display_name": "Seth D. Fulmer", "link": "https://stackoverflow.com/users/2682968/seth-d-fulmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1551305678, "creation_date": 1551304725, "last_edit_date": 1551304922, "question_id": 54915160, "link": "https://stackoverflow.com/questions/54915160/i-keep-getting-out-of-line-definition-errors-when-its-copied-and-pasted", "title": "I keep getting Out of Line Definition errors when it&#39;s copied and pasted?", "body": "<p>This class is a model(DBO) class for a new C++ project I'm doing using QT.  I started coding then went back to create an ERD.  I went back then today after finishing the ERD to code and after finishing the class definitions (Header files), went through for just this file so far to define/implement the methods in the CPP file.  I keep getting Out of Line Definition.  But the methods are copied and pasted from the Header file - I know C++ well but have never had this issue and maybe there's a symbol there that shouldn't be - I have vision issues so it could be somethings' there I don't see and catch.  The header file is:</p>\n\n<pre><code>#include \"Artist.h\"\n#include&lt;QDate&gt;\n#include&lt;QList&gt;\n#include&lt;QString&gt;\n\n#pragma once\n\nnamespace net\n{\n    namespace draconia\n    {\n        class Media\n        {\n            unsigned muiMediaId;\n            QDate mDtRelease;\n            QList&lt;Artist&gt; mLstArtists;\n            QString msFilePath, msName;\n        protected:\n            QList&lt;Artist&gt; getArtistsInternal() const;\n            void setArtists(const QList&lt;Artist&gt; &amp;lstArtists);\n        public:\n            Media();\n            Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned muiReleaseYear);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QString &amp;sFilePath);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QString &amp;sFilePath);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QList&lt;Artist&gt; &amp;lstArtists);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QList&lt;Artist&gt; &amp;lstArtists);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QString &amp;sFilePath, const QList&lt;Artist&gt; &amp;lstArtists);\n            Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QString &amp;sFilePath, const QList&lt;Artist&gt; &amp;lstArtists);\n            Media(const Media &amp;refCopy);\n            virtual ~Media() = 0;\n\n            void addArtist(const Artist &amp;refArtist);\n            const QList&lt;Artist&gt; getArtists() const;\n            QString &amp;getFilePath() const;\n            unsigned getMediaId() const;\n            QString getName() const;\n            QDate getReleaseDate() const;\n            bool removeArtist(const Artist &amp;refArtist);\n            void removeArtist(const unsigned uiIndex);\n            void setFilePath(const QString &amp;sFilePath);\n            void setMediaId(const unsigned uiMediaId);\n            void setName(const QString &amp;sName);\n            void setReleaseDate(const QDate &amp;dtRelease);\n            void setReleaseDate(const unsigned uiReleaseYear);\n        };\n    }\n}\n</code></pre>\n\n<p>and the CPP file is:</p>\n\n<pre><code>#include \"Media.h\"\n\nusing namespace net::draconia;\n\nQList&lt;Artist&gt; Media::getArtistsInternal() const\n{\n    return(mLstArtists);\n}\n\nvoid Media::setArtists(const QList&lt;Artist&gt; &amp;lstArtists)\n{\n    mLstArtists.clear();\n    mLstArtists.append(lstArtists);\n}\n\nMedia::Media()\n    : muiMediaId(0)\n{ }\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(dtRelease)\n    , msName(sName)\n{ }\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(QDate(static_cast&lt;int&gt;(uiReleaseYear), 1, 1))\n    , msName(sName)\n{ }\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QString &amp;sFilePath)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(dtRelease)\n    , msFilePath(sFilePath), msName(sName)\n{ }\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QString &amp;sFilePath)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(QDate(static_cast&lt;int&gt;(uiReleaseYear), 1, 1))\n    , msFilePath(sFilePath), msName(sName)\n{ }\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QList&lt;Artist&gt; &amp;lstArtists)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(dtRelease)\n    , msName(sName)\n{\n    setArtists(lstArtists);\n}\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QList&lt;Artist&gt; &amp;lstArtists)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(QDate(static_cast&lt;int&gt;(uiReleaseYear), 1, 1))\n    , msName(sName)\n{\n    setArtists(lstArtists);\n}\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const QDate &amp;dtRelease, const QString &amp;sFilePath, const QList&lt;Artist&gt; &amp;lstArtists)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(dtRelease)\n    , msFilePath(sFilePath), msName(sName)\n{\n    setArtists(lstArtists);\n}\n\nMedia::Media(const unsigned uiMediaId, const QString &amp;sName, const unsigned uiReleaseYear, const QString &amp;sFilePath, const QList&lt;Artist&gt; &amp;lstArtists)\n    : muiMediaId(uiMediaId)\n    , mDtRelease(QDate(static_cast&lt;int&gt;(uiReleaseYear), 1, 1))\n    , msFilePath(sFilePath), msName(sName)\n{\n    setArtists(lstArtists);\n}\n\nMedia::Media(const Media &amp;refCopy)\n    : muiMediaId(refCopy.getMediaId())\n    , mDtRelease(refCopy.getReleaseDate())\n    , msFilePath(refCopy.getFilePath())\n    , msName(refCopy.getName())\n{\n    setArtists(refCopy.getArtists());\n}\n\n\nvoid Media::addArtist(const Artist &amp;refArtist)\n{\n    getArtistsInternal().append(refArtist);\n}\n\nconst QList&lt;Artist&gt; Media::getArtists() const\n{\n    return(getArtistsInternal());\n}\n\nQString &amp;Media::getFilePath() const\n{\n    return(msFilePath);\n}\n\nunsigned Media::getMediaId() const\n{\n    return(muiMediaId);\n}\n\nQString Media::getName() const\n{\n    return(msName);\n}\n\nQDate Media::getReleaseDate() const\n{\n    return(mDtRelease);\n}\n\nbool Media::removeArtist(const Artist &amp;refArtist)\n{\n    return(getArtistsInternal().removeOne(refArtist));\n}\n\nvoid Media::removeArtist(const unsigned uiIndex)\n{\n    getArtistsInternal().removeAt(uiIndex);\n}\n\nvoid Media::setFilePath(const QString &amp;sFilePath)\n{\n    msFilePath = sFilePath;\n}\n\nvoid Media::setMediaId(const unsigned uiMediaId)\n{\n    muiMediaId = uiMediaId;\n}\n\nvoid Media::setName(const QString &amp;sName)\n{\n    msName = sName;\n}\n\nvoid Media::setReleaseDate(const QDate &amp;dtRelease)\n{\n    mDtRelease = dtRelease;\n}\n\nvoid Media::setReleaseDate(const unsigned uiReleaseYear)\n{\n    mDtRelease = QDate(static_cast&lt;int&gt;(uiReleaseYear), 1, 1);\n}\n</code></pre>\n\n<p>The errors first happen on the 2nd function in the CPP file setArtists() - For whatever reason when manually typing it in, it thinks that lstArtist is a reference to int but yet the getArtists() and getArtistsInternal() works.  After that, it happens on the constructor definitions that have lstArtists as a parameter - and the first removeArtist() (with the actual reference to Artist as a parameter).  </p>\n\n<p>I don't know if maybe I'm misusing QList or something because it seems to be only on functions that use the QList.  If I need to, I can paste the class definition (header file) for Artist but I don't see it as necessary.  </p>\n\n<p>This couldn't be because of the #pragma once I put at the top, could it?  QT seems to start all class files with #ifndef and #define and ending it with #endif - but that was causing other problems for me where other classes had references to parent objects and such and the parent then had a list of the children.</p>\n\n<p>It seems to be satisfied when I make those functions (about which it complains) inline in the header file but it doesn't like them in the CPP file and I don't #include QList in the CPP file because it's included in the header file already.  </p>\n\n<p>Any thoughts?</p>\n\n<p>P.S. If you want to see it in a different light, you can check it out from: <a href=\"https://github.com/sfulmer/MediaDB\" rel=\"nofollow noreferrer\">https://github.com/sfulmer/MediaDB</a> and the files are Media.h and Media.cpp.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551303774, "post_id": 54914920, "comment_id": 96596202, "body": "What&#39;s the input?"}, {"owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551303833, "post_id": 54914920, "comment_id": 96596231, "body": "This is the exact input: Words Backwards Forwards Reverse Words Backwards Forwards Reverse Words Backwards Forwards Reverse Words Backwards Forwards Reverse Words Backwards Forwards Reverse Words Backwards Forwards Reverse Words Backwards Forwards"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 2, "creation_date": 1551303872, "post_id": 54914920, "comment_id": 96596249, "body": "nevermind, doesn&#39;t matter. read your warnings. You will be mad at yourself. :)"}, {"owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551304069, "post_id": 54914920, "comment_id": 96596340, "body": "Could you please elaborate? I&#39;m grateful for the help, but that makes no sense to my pea brain."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551304119, "post_id": 54914920, "comment_id": 96596360, "body": "When your compile, how do you make it from a cpp file into something that will execute? (or What compiler are you using?)"}, {"owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551304183, "post_id": 54914920, "comment_id": 96596390, "body": "I&#39;ve been using Dev-C++ to compile and run."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1551304210, "post_id": 54914920, "comment_id": 96596404, "body": "You tagged this question with c++ but I see cstrings and c functions. Why don&#39;t you use the easier c++ functions"}, {"owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "edited": false, "score": 0, "creation_date": 1551304270, "post_id": 54914920, "comment_id": 96596428, "body": "Probably because I know no easier way. I&#39;m not very well versed in C++. So I&#39;ve just been doing it with the little I do know."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551304317, "post_id": 54914920, "comment_id": 96596444, "body": "I&#39;m not familiar with that one. It appears to be gcc based, in which case you may need to add &quot;--Wall&quot; to the command line to get warnings. MOST compilers will tell you right out if you do something they can see is obviously problematic. Here&#39;s the relevant setting for gcc <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Warning-Options.html</a>"}, {"owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "edited": false, "score": 0, "creation_date": 1551304454, "post_id": 54914920, "comment_id": 96596505, "body": "Is there a compiler you would recommend instead? I use Dev-C++ because it was something I had used in the past."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551304672, "post_id": 54914920, "comment_id": 96596593, "body": "@NoahPersons Dev C++ is an IDE, not a compiler. You may configure it to use a different than the default toolchain as delivered with it."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551304719, "post_id": 54914920, "comment_id": 96596607, "body": "I recommend you read the warnings. I recommend you use the debugging tools. I don&#39;t care which compiler you use as long as you do that. You don&#39;t even read anything in this code, from the file you open."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551305112, "post_id": 54914920, "comment_id": 96596755, "body": "Recommendation: Write less code before testing it. You catch bugs faster that way and don&#39;t allow them to gang up on you. The time cost of finding bugs is not linear. It&#39;s often exponential. 1 bug takes one bug-hunting unit of time. 2 bugs often takes many more than just 2 units of time."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 8374839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f85f83ea0dd7fa140806d3cac72675d?s=128&d=identicon&r=PG&f=1", "display_name": "Collo", "link": "https://stackoverflow.com/users/8374839/collo"}, "is_accepted": true, "score": 1, "last_activity_date": 1551304939, "creation_date": 1551304939, "answer_id": 54915198, "question_id": 54914920, "link": "https://stackoverflow.com/questions/54914920/having-an-issue-with-a-switch-statement-inside-a-loop/54915198#54915198", "title": "Having an issue with a switch statement inside a loop", "body": "<p>You open the the file, but you never read anything from it. Your variable word will always be empty, so the length will be 0.</p>\n"}], "owner": {"reputation": 1, "user_id": 9495283, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4quA66eEwuM/AAAAAAAAAAI/AAAAAAAAB8Y/3TwxEp3kmQE/photo.jpg?sz=128", "display_name": "Noah Persons", "link": "https://stackoverflow.com/users/9495283/noah-persons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 54915198, "answer_count": 1, "score": -3, "last_activity_date": 1554158009, "creation_date": 1551303630, "question_id": 54914920, "link": "https://stackoverflow.com/questions/54914920/having-an-issue-with-a-switch-statement-inside-a-loop", "title": "Having an issue with a switch statement inside a loop", "body": "<p>So this code is just something I've been messing with, but I cant seem to get it to work right. The switch statement wont continue looping after it finishes its first case. I'm just trying to make it change letters in words essentially. I'm not quite sure, how to fix it. Any help would be appreciated. </p>\n\n<p>This keeps telling me I need more words so I am just randomly writing, please don't mind these words, they are just placeholders to make the system less angry at me for summarizing my issue into three sentences. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main()\n{\n    char ans;\n    char fileName[50];\n    string inp;\n    int length;\n    ifstream inpFile;\n    ofstream outFile(\"output.txt\");\n\n    do{\n\n        cout &lt;&lt; \"\";\n\n        cin.getline(fileName, 50);\n        inpFile.open(fileName);\n\n        if(!inpFile.is_open()){\n            exit(EXIT_FAILURE);\n        }   \n\n        string word;\n        char enc;\n        char temp;\n\n        length = word.length();\n        char * cstr = new char [length + 1];\n        strcpy(cstr, word.c_str());\n\n        for(int i = 0; i &lt; length; i++){\n\n                    switch(cstr[i]){\n\n                    case 'A':{\n                        temp = cstr[i];\n                        temp = '0';\n\n                        enc = temp;\n                        break;\n                    }\n                    case 'a':{\n                        temp = cstr[i];\n                        temp = '1';\n\n                        enc = temp;\n                        break;\n                    }\n                }\n            cout &lt;&lt; \"test1\";\n\n        }\n\n        cout &lt;&lt; \"Test2\";\n\n        delete[] cstr;\n\n    }while(ans == 'Y' || ans == 'y');\n    cout &lt;&lt; \"Test3\";\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "debugging"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551305397, "post_id": 54914872, "comment_id": 96596864, "body": "No hints as to that the error was, I suspect. What happens when you try to run <code>arm-none-eabi-gdb.exe --version</code> from the command line?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551307892, "post_id": 54914872, "comment_id": 96597749, "body": "It runs fine. I really think it\u2019s a bug in this plugin because that exe isn\u2019t supposed to be run because SEGGER has its own versions of gcc utils."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551308089, "post_id": 54914872, "comment_id": 96597816, "body": "Can you point the debugger at it? I remember using segger under eclipse, but something like ten years ago. I had to use a remote launcher that&#39;s since been replaced with a much smarter tool that&#39;s a lot more limited."}], "answers": [{"comments": [{"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551304085, "post_id": 54914957, "comment_id": 96596345, "body": "And it gave it explicitly: <code>&quot;C:\\Program Files (x86)\\CodeSourcery\\Sourcery_CodeBench_Lite_for_ARM_EABI\\bin\\&zwnj;&#8203;arm-none-eabi-gdb.ex&zwnj;&#8203;e&quot;</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551387508, "post_id": 54914957, "comment_id": 96632738, "body": "I also have PEmicro debugger and within KDS and it works fine."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1551402194, "post_id": 54914957, "comment_id": 96637159, "body": "Yes you&#39;re right. I had to hard-code <code>C:\\Freescale\\KDS_v3\\Toolchain\\bin\\arm-none-eabi-gdb.exe</code> to replace their macro."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1551303815, "creation_date": 1551303815, "answer_id": 54914957, "question_id": 54914872, "link": "https://stackoverflow.com/questions/54914872/kds-with-segger-error-while-launching-command-arm-none-eabi-gdb-version/54914957#54914957", "title": "kds with segger - Error while launching command: arm-none-eabi-gdb --version", "body": "<p>It probably does not know where your gdb is. Set the full path or add the path to the system env. </p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 54914957, "answer_count": 1, "score": 0, "last_activity_date": 1551303815, "creation_date": 1551303430, "question_id": 54914872, "link": "https://stackoverflow.com/questions/54914872/kds-with-segger-error-while-launching-command-arm-none-eabi-gdb-version", "title": "kds with segger - Error while launching command: arm-none-eabi-gdb --version", "body": "<p>I have a Segger and correctly select \"Segger\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/9xWYQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9xWYQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>yet when I click <strong>Debug</strong>, I get an error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TP49n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TP49n.png\" alt=\"enter image description here\"></a></p>\n\n<p>NXP support is not helpful: <a href=\"https://community.nxp.com/message/1118372\" rel=\"nofollow noreferrer\"><em>make sure you correctly select Seegger</em></a></p>\n"}, {"tags": ["c++", "audio", "com", "playback", "ms-media-foundation"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1551344810, "post_id": 54914845, "comment_id": 96608762, "body": "You can check this code to see if it works:  <a href=\"https://github.com/sipsorcery/mediafoundationsamples/blob/master/MFAudio/MFAudio.cpp\" rel=\"nofollow noreferrer\">github.com/sipsorcery/mediafoundationsamples/blob/master/&hellip;</a>.  Check line after the following comment &quot;My speaker has 3 audio types but I was only able to get anywhere with the third one.&quot;"}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1551388740, "post_id": 54914845, "comment_id": 96633254, "body": "@VuVirt Thanks for responding! I already tried similar code (from the linked question), which didn&#39;t work no matter which media type index I chose; but apparently this code is different since with type 3 it does output something - but it plays much too fast, probably because the types don&#39;t fully match. Of course this is already better than nothing, but unfortunately it is far from a solution."}], "answers": [{"comments": [{"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 0, "creation_date": 1551397403, "post_id": 54935782, "comment_id": 96636156, "body": "That&#39;s weird because this code doesn&#39;t do anything for me... (It runs but gives no actual audio output. Maybe you are playing some file of which the codec is incidentally directly supported by your speakers.) Anyway, the <code>Sleep</code> is pretty hacky. I edited my question with some new discovery btw; COM is weird."}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 1, "creation_date": 1551473076, "post_id": 54935782, "comment_id": 96666738, "body": "I don&#39;t have more than one sound card AFAIK. I tested with multiple audio files, MP3 and WAV (PCM 16-bit LE mono). Also see the other answer and question edits. About the sleep: I didn&#39;t use <code>MF_SINK_WRITER_DISABLE_THROTTLING</code> so this should be fine I think."}, {"owner": {"reputation": 1257, "user_id": 5110855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f29bdd015d8a9b204efd66fb798c72?s=128&d=identicon&r=PG&f=1", "display_name": "mofo77", "link": "https://stackoverflow.com/users/5110855/mofo77"}, "reply_to_user": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 1, "creation_date": 1551724742, "post_id": 54935782, "comment_id": 96736671, "body": "Yes, i didn&#39;t pay attention to the writesample behaviour. It should be fine. Good point."}], "tags": [], "owner": {"reputation": 1257, "user_id": 5110855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f29bdd015d8a9b204efd66fb798c72?s=128&d=identicon&r=PG&f=1", "display_name": "mofo77", "link": "https://stackoverflow.com/users/5110855/mofo77"}, "is_accepted": false, "score": 0, "last_activity_date": 1551813060, "last_edit_date": 1551813060, "creation_date": 1551395984, "answer_id": 54935782, "question_id": 54914845, "link": "https://stackoverflow.com/questions/54914845/how-to-play-audio-using-sink-writer-from-microsoft-media-foundation/54935782#54935782", "title": "How to play audio using Sink Writer from Microsoft Media Foundation", "body": "<p>This code works just fine for me with wav files (Win7, default sound card) :</p>\n\n<pre><code>//----------------------------------------------------------------------------------------------\n// Main.cpp\n//----------------------------------------------------------------------------------------------\n#pragma once\n#define WIN32_LEAN_AND_MEAN\n#define STRICT\n\n#pragma comment(lib, \"mfplat\")\n#pragma comment(lib, \"mfreadwrite\")\n#pragma comment(lib, \"mf\")\n#pragma comment(lib, \"mfuuid\")\n\n//----------------------------------------------------------------------------------------------\n// Microsoft Windows SDK for Windows 7\n#include &lt;WinSDKVer.h&gt;\n#include &lt;new&gt;\n#include &lt;windows.h&gt;\n#include &lt;strsafe.h&gt;\n#include &lt;mfapi.h&gt;\n#include &lt;mfidl.h&gt;\n#include &lt;mferror.h&gt;\n#include &lt;mfreadwrite.h&gt;\n\ntemplate &lt;class T&gt; inline void SAFE_RELEASE(T*&amp; p){\n\n    if(p){\n        p-&gt;Release();\n        p = NULL;\n    }\n}\n\n#define AUDIO_FILE L\"C:\\\\Project\\\\Media\\\\Audio\\\\test.wav\"\n\nHRESULT ProcessAudio(const WCHAR*);\n\nvoid main(){\n\n    HRESULT hr = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE);\n\n    if(SUCCEEDED(hr)){\n\n        hr = MFStartup(MF_VERSION, MFSTARTUP_LITE);\n\n        if(SUCCEEDED(hr)){\n\n            hr = ProcessAudio(AUDIO_FILE);\n\n            hr = MFShutdown();\n        }\n\n        CoUninitialize();\n    }\n}\n\nHRESULT ProcessAudio(const WCHAR*){\n\n    IMFSourceReader* pSourceReader = NULL;\n    IMFMediaType* pType = NULL;\n    DWORD dwMediaTypeIndex = 0;\n    IMFMediaSink* pAudioSink = NULL;\n    IMFStreamSink* pStreamSink = NULL;\n    IMFMediaTypeHandler* pMediaTypeHandler = NULL;\n    IMFSinkWriter* pSinkWriter = NULL;\n\n    HRESULT hr = MFCreateSourceReaderFromURL(AUDIO_FILE, NULL, &amp;pSourceReader);\n\n    // Check native media type\n    if(SUCCEEDED(hr))\n        hr = pSourceReader-&gt;GetNativeMediaType((DWORD)MF_SOURCE_READER_FIRST_AUDIO_STREAM, dwMediaTypeIndex, &amp;pType);\n\n    SAFE_RELEASE(pType);\n\n    // Get current media type\n    if(SUCCEEDED(hr))\n        hr = pSourceReader-&gt;GetCurrentMediaType(dwMediaTypeIndex, &amp;pType);\n\n    if(SUCCEEDED(hr))\n        hr = MFCreateAudioRenderer(NULL, &amp;pAudioSink);\n\n    if(SUCCEEDED(hr))\n        hr = pAudioSink-&gt;GetStreamSinkByIndex(0, &amp;pStreamSink);\n\n    if(SUCCEEDED(hr))\n        hr = pStreamSink-&gt;GetMediaTypeHandler(&amp;pMediaTypeHandler);\n\n    if(FAILED(hr = pMediaTypeHandler-&gt;IsMediaTypeSupported(pType, NULL))){\n\n        SAFE_RELEASE(pType);\n\n        // This is a compatible type with my soundcard\n        // MF_MT_MAJOR_TYPE                     MFMediaType_Audio\n        // MF_MT_SUBTYPE                        MFAudioFormat_PCM\n        // MF_MT_AUDIO_NUM_CHANNELS             2\n        // MF_MT_AUDIO_SAMPLES_PER_SECOND       48000\n        // MF_MT_AUDIO_BLOCK_ALIGNMENT          4\n        // MF_MT_AUDIO_AVG_BYTES_PER_SECOND     192000\n        // MF_MT_AUDIO_BITS_PER_SAMPLE          16\n        // MF_MT_ALL_SAMPLES_INDEPENDENT        1\n        // MF_MT_AUDIO_PREFER_WAVEFORMATEX      1\n\n        hr = MFCreateMediaType(&amp;pType);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetGUID(MF_MT_MAJOR_TYPE, MFMediaType_Audio);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetGUID(MF_MT_SUBTYPE, MFAudioFormat_PCM);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_NUM_CHANNELS, 2);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_SAMPLES_PER_SECOND, 48000);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_BLOCK_ALIGNMENT, 4);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_AVG_BYTES_PER_SECOND, 192000);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_BITS_PER_SAMPLE, 16);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_ALL_SAMPLES_INDEPENDENT, TRUE);\n\n        if(SUCCEEDED(hr))\n            hr = pType-&gt;SetUINT32(MF_MT_AUDIO_PREFER_WAVEFORMATEX, TRUE);\n    }\n\n    if(SUCCEEDED(hr))\n        hr = pMediaTypeHandler-&gt;SetCurrentMediaType(pType);\n\n    if(SUCCEEDED(hr))\n        hr = MFCreateSinkWriterFromMediaSink(pAudioSink, NULL, &amp;pSinkWriter);\n\n    if(SUCCEEDED(hr))\n        hr = pSinkWriter-&gt;BeginWriting();\n\n    BOOL bProcess = (hr == S_OK ? TRUE : FALSE);\n    DWORD streamIndex;\n    DWORD flags;\n    LONGLONG llTimeStamp;\n    IMFSample* pSample = NULL;\n\n    while(bProcess){\n\n        hr = pSourceReader-&gt;ReadSample((DWORD)MF_SOURCE_READER_FIRST_AUDIO_STREAM, 0, &amp;streamIndex, &amp;flags, &amp;llTimeStamp, &amp;pSample);\n\n        if(SUCCEEDED(hr) &amp;&amp; (flags == 0)){\n\n            if(pSample){\n\n                hr = pSinkWriter-&gt;WriteSample(0, pSample);\n\n                SAFE_RELEASE(pSample);\n            }\n        }\n        else{\n\n            bProcess = FALSE;\n        }\n    }\n\n    if(pSinkWriter)\n        pSinkWriter-&gt;Finalize();\n\n    if(pAudioSink)\n        pAudioSink-&gt;Shutdown();\n\n    SAFE_RELEASE(pSample);\n    SAFE_RELEASE(pSinkWriter);\n    SAFE_RELEASE(pMediaTypeHandler);\n    SAFE_RELEASE(pStreamSink);\n    SAFE_RELEASE(pAudioSink);\n    SAFE_RELEASE(pType);\n    SAFE_RELEASE(pSourceReader);\n\n    return hr;\n}\n</code></pre>\n\n<p>If you face problem with MF_E_TOPO_CODEC_NOT_FOUND, share your file. Perhaps extra code is needed in this case.</p>\n\n<p><strong>EDIT</strong></p>\n\n<ul>\n<li><p>Do you have more than one sound card ?</p></li>\n<li><p>Share your audio file, so we can see what's going on.</p></li>\n</ul>\n\n<p>My little hack with Sleep(40), is just here to tell you that doing \"while(true)\" without pausing have no sens (your processor is working too much). Off course 40 should be better decided. 40 is the minimum processing time processor preemption on windows OS. That my choice for this sample code. We can talk about the best way to choose this value. I'm waiting for your suggestion.</p>\n"}, {"comments": [{"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 0, "creation_date": 1551472531, "post_id": 54946067, "comment_id": 96666550, "body": "Woah this works, thanks so much! I do still have a couple of questions, though: (1) <a href=\"https://docs.microsoft.com/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler\" rel=\"nofollow noreferrer\">Documentation for <code>GetMediaTypeCount&#47;-ByIndex</code></a> tells me that these only deal with supported media types, so why does <code>IsMediaTypeSupported</code> still fail for some of them? (2) <code>inputType.detach()</code> doesn&#39;t release the interface right? (3) Where did you find this is what <code>IMFMediaTopology</code> does? Now I hope that the supported type is usable for my visualizer; maybe I need to convert it someway..."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "reply_to_user": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 1, "creation_date": 1551521672, "post_id": 54946067, "comment_id": 96676472, "body": "(1) I think it depends on which audio output is currently connected. (2) inputType should be released prior to next call to GetMediaTypeByIndex (3) <a href=\"https://docs.microsoft.com/en-us/windows/desktop/medfound/about-topologies\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/medfound/&hellip;</a> - &quot;The Media Session completes the topology by using an object called the topology loader. The topology loader converts partial topologies into full topologies by inserting the needed transforms. The process of conversion is called resolving the topology.&quot; Media type is float -1.0 to 1.0 easy to visualize. Consider accepting the answer and posting other questions separately."}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 0, "creation_date": 1551559704, "post_id": 54946067, "comment_id": 96686629, "body": "Thanks for the info! Sorry but I won&#39;t accept an answer until my question is really answered (I won&#39;t forget it though, I&#39;ve been here for quite a while), so here you go."}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 0, "creation_date": 1551560373, "post_id": 54946067, "comment_id": 96686796, "body": "Oh; forgot to follow up on this: <code>inputType.detach();</code> is not the right method to use here, as it does not actually Release the interface! You should use eg. <code>inputType.attach(nullptr);</code> (or if one uses <code>ATL::CComPtr</code>: <code>.Release</code> (not <code>-&gt;Release</code>)). Could you fix this for future reference?"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551691142, "post_id": 54946067, "comment_id": 96718190, "body": "It doesn&#39;t work for me (no error, just does nothing like all code exposed here and there so far). Win 10 x64 6.3.17763. Sink writers are meant for encoding, not rendering, that&#39;s the problem..."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551694335, "post_id": 54946067, "comment_id": 96719940, "body": "@SimonMourier maybe you should to manually enumerate the renderer\u2019s media types and try each one of them. Does it work with IMFTopology? Have you also tested TopoEdit?"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551698199, "post_id": 54946067, "comment_id": 96722087, "body": "TopoEdit works fine. The resolver adds a Resampler transform. I think resampling may be needed in the general case. Something like this : <a href=\"https://github.com/sipsorcery/mediafoundationsamples/blob/master/MFAudioMFT/MFAudioMFT.cpp\" rel=\"nofollow noreferrer\">github.com/sipsorcery/mediafoundationsamples/blob/master/&hellip;</a> (but it doesn&#39;t work for me either as is)."}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551730619, "post_id": 54946067, "comment_id": 96739287, "body": "@SimonMourier OP here; I found the culprit: remove the <code>winHr(writer-&gt;Flush(0));</code> at the end! (Could you update the answer again @VuVirt? ;)"}, {"owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "edited": false, "score": 0, "creation_date": 1551732263, "post_id": 54946067, "comment_id": 96739960, "body": "Oh, and btw: the <code>winHr(sample-&gt;SetSampleTime(timestamp));</code> seems to be unnecessary"}, {"owner": {"reputation": 1257, "user_id": 5110855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f29bdd015d8a9b204efd66fb798c72?s=128&d=identicon&r=PG&f=1", "display_name": "mofo77", "link": "https://stackoverflow.com/users/5110855/mofo77"}, "edited": false, "score": 0, "creation_date": 1551737175, "post_id": 54946067, "comment_id": 96741933, "body": "Yes you are right. The Flush must be removed, it cuts sound. Also it seems SetSampleTime is not necessary."}, {"owner": {"reputation": 1257, "user_id": 5110855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f29bdd015d8a9b204efd66fb798c72?s=128&d=identicon&r=PG&f=1", "display_name": "mofo77", "link": "https://stackoverflow.com/users/5110855/mofo77"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551738795, "post_id": 54946067, "comment_id": 96742523, "body": "@SimonMourier. Le Sink Writer est aussi capable de faire du rendu audio. Je viens d&#39;ailleurs de le d&#233;couvrir avec cette question. Je vais mettre &#224; jour mon code pour prendre en charge le fichier test.wav. J&#39;avoue avoir gal&#233;r&#233;, et ce n&#39;est pas non plus la m&#233;thode optimale, mais &#231;a marche sur mon ordi. Pour &#234;tre optimale, il faudrait r&#233;cup&#233;rer les capacit&#233;s de la carte son actuelle. Je peux d&#233;velopper et ajouter du code si n&#233;cessaire."}, {"owner": {"reputation": 1257, "user_id": 5110855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f29bdd015d8a9b204efd66fb798c72?s=128&d=identicon&r=PG&f=1", "display_name": "mofo77", "link": "https://stackoverflow.com/users/5110855/mofo77"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1551739822, "post_id": 54946067, "comment_id": 96742868, "body": "@SimonMourier. I changed my code to manage your test.wav file. I also included the remarks of SWdV."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1551774721, "post_id": 54946067, "comment_id": 96752685, "body": "Calls to SetSampleTime and Flush are now commented out. Thanks! Je vous remercie a tous!"}], "tags": [], "owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "is_accepted": true, "score": 1, "last_activity_date": 1551774653, "last_edit_date": 1551774653, "creation_date": 1551448408, "answer_id": 54946067, "question_id": 54914845, "link": "https://stackoverflow.com/questions/54914845/how-to-play-audio-using-sink-writer-from-microsoft-media-foundation/54946067#54946067", "title": "How to play audio using Sink Writer from Microsoft Media Foundation", "body": "<p>I modified your code to work differently in the following manner:\n1. Enumerates the Audio Sink output media types, until it finds a supported one.\n2. Sets this media type to the Reader in order to force it to use Audio Resampler DSP (this is what IMFMediaTopology does).</p>\n\n<p>Here is the code, it plays back the input wav file properly. Let me know if it works for you. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;cassert&gt;\n\n#include &lt;mfidl.h&gt;\n#include &lt;mfapi.h&gt;\n#include &lt;mfreadwrite.h&gt;\n#include &lt;Mferror.h&gt;\n#pragma comment(lib, \"mf\")\n#pragma comment(lib, \"mfplat\")\n#pragma comment(lib, \"mfreadwrite\")\n\n#include &lt;winrt/base.h&gt;\n#pragma comment(lib, \"windowsapp\")\n\nvoid winHr(const HRESULT result) { winrt::check_hresult(result); }\n\ntemplate&lt;class T&gt;\nstruct ComPtr : winrt::com_ptr&lt;T&gt;\n{\n    auto operator&amp;() noexcept { return this-&gt;put(); }\n\n    operator T*() noexcept\n    {\n        assert(this-&gt;get());\n        return this-&gt;get();\n    }\n};\n\nint main() noexcept\n{\n    winHr(CoInitializeEx(nullptr, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE));\n    winHr(MFStartup(MF_VERSION));\n\n    {\n        ComPtr&lt;IMFSourceReader&gt; reader;\n        winHr(MFCreateSourceReaderFromURL(\n            LR\"(test.wav)\",\n            nullptr, &amp;reader));\n\n        constexpr auto inStreamIndex = MF_SOURCE_READER_FIRST_AUDIO_STREAM;\n\n        // Select only the audio stream\n        winHr(reader-&gt;SetStreamSelection(MF_SOURCE_READER_ALL_STREAMS, false));\n        winHr(reader-&gt;SetStreamSelection(inStreamIndex, true));\n\n        ComPtr&lt;IMFMediaSink&gt; mediaSink;\n        winHr(MFCreateAudioRenderer(nullptr, &amp;mediaSink));\n\n        ComPtr&lt;IMFSinkWriter&gt; writer;\n\n        {\n            ComPtr&lt;IMFStreamSink&gt; streamSink;\n            winHr(mediaSink-&gt;GetStreamSinkByIndex(0, &amp;streamSink));\n\n            ComPtr&lt;IMFMediaTypeHandler&gt; typeHandler;\n            winHr(streamSink-&gt;GetMediaTypeHandler(&amp;typeHandler));\n\n            DWORD dwCount = 0;\n            ComPtr&lt;IMFMediaType&gt; inputType;\n            winHr(typeHandler-&gt;GetMediaTypeCount(&amp;dwCount));\n\n            for (INT i = 0; i &lt; dwCount; i++)\n            {\n                inputType.attach(nullptr);\n                winHr(typeHandler-&gt;GetMediaTypeByIndex(i, &amp;inputType));\n                if (SUCCEEDED(typeHandler-&gt;IsMediaTypeSupported(inputType, NULL)))\n                    break;\n            }\n\n            //ComPtr&lt;IMFMediaType&gt; inputType;\n            //winHr(reader-&gt;GetCurrentMediaType(inStreamIndex, &amp;inputType));\n\n            winHr(reader-&gt;SetCurrentMediaType(inStreamIndex, NULL, inputType));\n\n\n            //ComPtr&lt;IMFMediaType&gt; closestSupportedType;\n            //const auto result = typeHandler-&gt;IsMediaTypeSupported(inputType, &amp;closestSupportedType);\n            //if (result == MF_E_INVALIDMEDIATYPE)\n            //{\n            //  if (!closestSupportedType)\n            //  {\n            //      std::cerr &lt;&lt; \"Media type not supported\" &lt;&lt; std::endl;\n            //      winHr(mediaSink-&gt;Shutdown());\n            //      goto end; //:o\n            //  }\n            //  winHr(reader-&gt;SetCurrentMediaType(inStreamIndex, nullptr, closestSupportedType));\n            //  winHr(typeHandler-&gt;SetCurrentMediaType(closestSupportedType));\n            //  winHr(MFCreateSinkWriterFromMediaSink(mediaSink, nullptr, &amp;writer));\n            //  winHr(writer-&gt;SetInputMediaType(0, closestSupportedType, nullptr));\n            //}\n            //else \n            {\n                //winHr(result);\n                //winHr(reader-&gt;SetCurrentMediaType(inStreamIndex, nullptr, inputType));\n                winHr(typeHandler-&gt;SetCurrentMediaType(inputType));\n                winHr(MFCreateSinkWriterFromMediaSink(mediaSink, nullptr, &amp;writer));\n                winHr(writer-&gt;SetInputMediaType(0, inputType, nullptr));\n            }\n        }\n\n        winHr(writer-&gt;BeginWriting());\n        while (true)\n        {\n            ComPtr&lt;IMFSample&gt; sample;\n            DWORD streamFlags;\n            MFTIME timestamp;\n            winHr(reader-&gt;ReadSample(inStreamIndex, 0, nullptr, &amp;streamFlags, &amp;timestamp, &amp;sample));\n\n            if (streamFlags &amp; MF_SOURCE_READERF_ENDOFSTREAM)\n            {\n                winHr(writer-&gt;NotifyEndOfSegment(0));\n                break;\n            }\n            if (streamFlags &amp; MF_SOURCE_READERF_STREAMTICK)\n                winHr(writer-&gt;SendStreamTick(0, timestamp));\n\n            if (!sample) \n                continue;\n\n            // SetSampleTime is redundant\n            //winHr(sample-&gt;SetSampleTime(timestamp));\n            winHr(writer-&gt;WriteSample(0, sample));\n        }\n\n        // Flush shouldn't be called! \n        // winHr(writer-&gt;Flush(0));\n\n        std::cout &lt;&lt; \"(Press enter to stop)\" &lt;&lt; std::endl;\n        std::cin.get();\n\n        winHr(writer-&gt;Finalize());\n        writer.attach(nullptr);\n        winHr(mediaSink-&gt;Shutdown());\n    }\n\nend:\n    winHr(MFShutdown());\n    CoUninitialize();\n}\n</code></pre>\n"}], "owner": {"reputation": 1105, "user_id": 4454665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJRE8.png?s=128&g=1", "display_name": "SWdV", "link": "https://stackoverflow.com/users/4454665/swdv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 1, "accepted_answer_id": 54946067, "answer_count": 2, "score": 3, "last_activity_date": 1551813060, "creation_date": 1551303310, "last_edit_date": 1551397105, "question_id": 54914845, "link": "https://stackoverflow.com/questions/54914845/how-to-play-audio-using-sink-writer-from-microsoft-media-foundation", "title": "How to play audio using Sink Writer from Microsoft Media Foundation", "body": "<p>I'm trying to create an audio visualizer using Microsoft Media Foundation. For this I need to intercept the samples and simultaneously play them. Using a Media Session with Topology and a sample-grabber sink seems impractical and over-complicated, hence I'm trying to use a combination of a Sink Reader and Sink Writer for this (see the right half of the image on <a href=\"https://docs.microsoft.com/windows/desktop/medfound/overview-of-the-media-foundation-architecture\" rel=\"nofollow noreferrer\">Overview of the Media Foundation Architecture</a>). Unfortunately, <a href=\"https://docs.microsoft.com/windows/desktop/medfound/audio-video-playback\" rel=\"nofollow noreferrer\">Audio/Video Playback</a> does not really explain how to do this. The book <em>Developing Microsoft Media Foundation Applications</em> contains a source-to-sink loop on page 92, but that still does not really help me.</p>\n\n<p>Creating the Source Reader works fine and I'm reading nonzero samples. Writing them to the Sink Writer (which uses the Streaming Audio Renderer) does not give me any errors, but I don't hear anything. I tried multiple things like selecting other media types and explicitly selecting the rendering device (although I only have one, as it indicated), but to no avail. Note that playing audio using a Media Session works fine, though!</p>\n\n<p>I based my code on this question: <a href=\"https://stackoverflow.com/q/28235464/4454665\">Play audio from file to speaker with Media Foundation</a>.</p>\n\n<p>This is my code at this moment:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;cassert&gt;\n\n#include &lt;mfidl.h&gt;\n#include &lt;mfapi.h&gt;\n#include &lt;mfreadwrite.h&gt;\n#include &lt;Mferror.h&gt;\n#pragma comment(lib, \"mf\")\n#pragma comment(lib, \"mfplat\")\n#pragma comment(lib, \"mfreadwrite\")\n\n#include &lt;winrt/base.h&gt;\n#pragma comment(lib, \"windowsapp\")\n\nvoid winHr(const HRESULT result) { winrt::check_hresult(result); }\n\ntemplate&lt;class T&gt;\nstruct ComPtr : winrt::com_ptr&lt;T&gt;\n{\n    auto operator&amp;() noexcept { return this-&gt;put(); }\n\n    operator T*() noexcept\n    {\n        assert(this-&gt;get());\n        return this-&gt;get();\n    }\n};\n\nint main() noexcept\n{\n    winHr(CoInitializeEx(nullptr, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE));\n    winHr(MFStartup(MF_VERSION));\n\n    {\n        ComPtr&lt;IMFSourceReader&gt; reader;\n        winHr(MFCreateSourceReaderFromURL(\n            LR\"(test.wav)\",\n            nullptr, &amp;reader));\n\n        constexpr auto inStreamIndex = MF_SOURCE_READER_FIRST_AUDIO_STREAM;\n\n        // Select only the audio stream\n        winHr(reader-&gt;SetStreamSelection(MF_SOURCE_READER_ALL_STREAMS, false));\n        winHr(reader-&gt;SetStreamSelection(inStreamIndex, true));\n\n        ComPtr&lt;IMFMediaSink&gt; mediaSink;\n        winHr(MFCreateAudioRenderer(nullptr, &amp;mediaSink));\n\n        ComPtr&lt;IMFSinkWriter&gt; writer;\n\n        {\n            ComPtr&lt;IMFStreamSink&gt; streamSink;\n            winHr(mediaSink-&gt;GetStreamSinkByIndex(0, &amp;streamSink));\n\n            ComPtr&lt;IMFMediaTypeHandler&gt; typeHandler;\n            winHr(streamSink-&gt;GetMediaTypeHandler(&amp;typeHandler));\n\n            ComPtr&lt;IMFMediaType&gt; inputType;\n            winHr(reader-&gt;GetCurrentMediaType(inStreamIndex, &amp;inputType));\n\n            ComPtr&lt;IMFMediaType&gt; closestSupportedType;\n            const auto result = typeHandler-&gt;IsMediaTypeSupported(inputType, &amp;closestSupportedType);\n            if (result == MF_E_INVALIDMEDIATYPE)\n            {\n                if (!closestSupportedType)\n                {\n                    std::cerr &lt;&lt; \"Media type not supported\" &lt;&lt; std::endl;\n                    winHr(mediaSink-&gt;Shutdown());\n                    goto end; //:o\n                }\n                winHr(reader-&gt;SetCurrentMediaType(inStreamIndex, nullptr, closestSupportedType));\n                winHr(typeHandler-&gt;SetCurrentMediaType(closestSupportedType));\n                winHr(MFCreateSinkWriterFromMediaSink(mediaSink, nullptr, &amp;writer));\n                winHr(writer-&gt;SetInputMediaType(0, closestSupportedType, nullptr));\n            }\n            else {\n                winHr(result);\n                winHr(reader-&gt;SetCurrentMediaType(inStreamIndex, nullptr, inputType));\n                winHr(typeHandler-&gt;SetCurrentMediaType(inputType));\n                winHr(MFCreateSinkWriterFromMediaSink(mediaSink, nullptr, &amp;writer));\n                winHr(writer-&gt;SetInputMediaType(0, inputType, nullptr));\n            }\n        }\n\n        winHr(writer-&gt;BeginWriting());\n        while (true)\n        {\n            ComPtr&lt;IMFSample&gt; sample;\n            DWORD streamFlags;\n            MFTIME timestamp;\n            winHr(reader-&gt;ReadSample(inStreamIndex, 0, nullptr, &amp;streamFlags, &amp;timestamp, &amp;sample));\n\n            if (streamFlags &amp; MF_SOURCE_READERF_ENDOFSTREAM)\n            {\n                winHr(writer-&gt;NotifyEndOfSegment(0));\n                break;\n            }\n            if (streamFlags &amp; MF_SOURCE_READERF_STREAMTICK)\n                winHr(writer-&gt;SendStreamTick(0, timestamp));\n\n            if (!sample) continue;\n\n            winHr(sample-&gt;SetSampleTime(timestamp));\n            winHr(writer-&gt;WriteSample(0, sample));\n        }\n        winHr(writer-&gt;Flush(0));\n\n        std::cout &lt;&lt; \"(Press enter to stop)\" &lt;&lt; std::endl;\n        std::cin.get();\n\n        winHr(writer-&gt;Finalize());\n        writer.attach(nullptr);\n        winHr(mediaSink-&gt;Shutdown());\n    }\n\nend:\n    winHr(MFShutdown());\n    CoUninitialize();\n}\n</code></pre>\n\n<p><s>Just to be clear: when I run this it prints <code>(Press enter to stop)</code> and I can hear from the noise (read: distortions from electronic signals) from my headphones that I can deduce that for a short moment an audio port was opened and then closed, but no actual audio is played. How can I get this to work?</s></p>\n\n<p><s>Edit 1: I just fixed that if <code>result != MF_E_INVALIDMEDIATYPE</code> I didn't set the media type, but now I often (but not always, for some reason) get <code>MF_E_TOPO_CODEC_NOT_FOUND</code> at the line <code>winHr(writer-&gt;SetInputMediaType(0, inputType, nullptr));</code>. Why would this be? (Still no audio is played in any case.)</s></p>\n\n<p>Edit 2: Apparently it matters when I create the writer, so now I do that only at the last moment, but now I get the \"Media type not supported\" error. Maybe I need to manually pick some media type but I will look in to this later -- unless someone knows the answer.</p>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 0, "creation_date": 1551303257, "post_id": 54914694, "comment_id": 96595969, "body": "Are you compiling with optimizations and what are you using to time it?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1551303541, "post_id": 54914694, "comment_id": 96596093, "body": "Often this is because the algorithm didn&#39;t parallellize smoothly. The multiple threads fight it out over a common resource and waste more time than they save. Another common one is one is the overhead of threading exceeds the runtime of the algorithm."}, {"owner": {"reputation": 4442, "user_id": 1504964, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a06b19efdeb2d06f2897f7d25a455383?s=128&d=identicon&r=PG", "display_name": "Kyle V.", "link": "https://stackoverflow.com/users/1504964/kyle-v"}, "reply_to_user": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 1, "creation_date": 1551303563, "post_id": 54914694, "comment_id": 96596102, "body": "@WilliamMiller Yes, I&#39;m using Release build config, here is the command line: <code>&#47;GS &#47;GL &#47;analyze- &#47;W3 &#47;Gy &#47;Zc:wchar_t &#47;I&quot;C:\\SFML-2.5.1\\include&quot; &#47;Zi &#47;Gm- &#47;O2 &#47;sdl &#47;Fd&quot;Release\\vc141.pdb&quot; &#47;Zc:inline &#47;fp:precise &#47;D &quot;SFML_STATIC&quot; &#47;D &quot;_MBCS&quot; &#47;errorReport:prompt &#47;WX- &#47;Zc:forScope &#47;Gd &#47;Oy- &#47;Oi &#47;MD &#47;openmp &#47;FC &#47;Fa&quot;Release\\&quot; &#47;EHsc &#47;nologo &#47;Fo&quot;Release\\&quot; &#47;Fp&quot;Release\\GameOfLife.pch&quot; &#47;diagnostics:classic</code> I am timing it by eye, the difference is that noticeable."}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1551303676, "post_id": 54914694, "comment_id": 96596154, "body": "How long does this part of the operation take to run for a single iteration? It is entirely possible that the creation of the threads dominates the runtime, as @user4581301 is alluded"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 2, "creation_date": 1551305300, "post_id": 54914694, "comment_id": 96596827, "body": "I don&#39;t know openmp, but this doesn&#39;t look like an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to me."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1551314505, "post_id": 54914694, "comment_id": 96599453, "body": "Each step of Conway&#39;s Game of Life is fast, so you&#39;re probably spending more time synchronizing than executing code."}, {"owner": {"reputation": 4442, "user_id": 1504964, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a06b19efdeb2d06f2897f7d25a455383?s=128&d=identicon&r=PG", "display_name": "Kyle V.", "link": "https://stackoverflow.com/users/1504964/kyle-v"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1551324212, "post_id": 54914694, "comment_id": 96601557, "body": "@xaxxon added full source in the OP as a link"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1551337906, "post_id": 54914694, "comment_id": 96605691, "body": "@KyleV. the full <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> needs to be in the question.   links are not acceptable for the fundamental contents of the question.  Links can go away, but the post needs to continue to be useful for people coming to the question later for similar issues."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1551340001, "post_id": 54914694, "comment_id": 96606614, "body": "What is the serial version you compare it to? Does it use the same code without enabling OpenMP or is the code different? <code>std::advance</code> on the iterator of an <code>std::unordered_set</code> in a loop is very bad. It has linear complexity because it is not a <code>RandomAccessIterator</code> - thus the loop has quadratic complexity versus a serial implementation that - presumably - does not use <code>std::advance</code>."}, {"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 0, "creation_date": 1551435108, "post_id": 54914694, "comment_id": 96647613, "body": "You parallelize every iteration, when every iteration is just one pixel, meaning that it just checks surrounding neighbours and decides whether to turn the pixel on or off. That&#39;s nothing. You most likely spend more time switching between threads than actually solving the problem. Consider parallelizing over lines, or better yet, bigger 2D chunks of your grid (for example 8 lines for a thread), that will result in less thread switches and better throughput."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1551439929, "post_id": 54914694, "comment_id": 96650173, "body": "The compiler you have chosen will analyze the sequential version of the code to determine whether the loops may be fused (combined into a single loop).  The compiler optimization reports will show this.  If this happens, combining the loops will be even more important with parallelization, but the parallelization directives prevent it."}], "answers": [{"comments": [{"owner": {"reputation": 4442, "user_id": 1504964, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a06b19efdeb2d06f2897f7d25a455383?s=128&d=identicon&r=PG", "display_name": "Kyle V.", "link": "https://stackoverflow.com/users/1504964/kyle-v"}, "edited": false, "score": 0, "creation_date": 1551324355, "post_id": 54916608, "comment_id": 96601580, "body": "&quot;...not be optimal if you define an iterator inside the loop&quot; Is it possible to iterate an <code>unordered_map</code> using a for loop with an index? I thought I could only use the <code>[]</code> operator by passing in an object of the templated type. Also, sorry, added a link to full source code in my OP."}], "tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1551363126, "last_edit_date": 1551363126, "creation_date": 1551313822, "answer_id": 54916608, "question_id": 54914694, "link": "https://stackoverflow.com/questions/54914694/multithreaded-function-performance-worse-than-single-threaded/54916608#54916608", "title": "Multithreaded function performance worse than single threaded", "body": "<p>First off, if you want any kind of performance, you must do as little work as possible in a critical section. I'd start by changing the following:</p>\n\n<pre><code>std::vector&lt;Cell&gt; toDie;\nstd::vector&lt;Cell&gt; toLive;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>std::vector&lt;std::vector&lt;Cell&gt;&gt; toDie;\nstd::vector&lt;std::vector&lt;Cell&gt;&gt; toLive;\n</code></pre>\n\n<p>Then, in your critical section, you can just do:</p>\n\n<pre><code>toDie.push_back(std::move(myToDie));\ntoLive.push_back(std::move(myToLive));\n</code></pre>\n\n<p>Arguably, a vector of vector isn't cute, but this will prevent deep-copying inside the CS which is unnecessary time consumption.</p>\n\n<p>[Update]\nIMHO there's no point in using multithreading if you are using non-contiguous data structures, at least not in that way. The fact is you'll spend most of your time waiting on cache misses because that's what associative containers do, and little doing the actual work.\nI don't know how this game works. It feels like if I had to do something with numerous updates and render, I would have the updates done as quickly as possible on the 'main' thread', and I would have another (detached) thread for the renderer. You could then just give the renderer the results after every \"update\", and perform another update while it's rendering.</p>\n\n<p>Also, I'm definitely not an expert in hashing, but <code>hash&lt;int&gt;()(k.x * 3 + k.y * 5)</code> seems like a high-collision hashing. You can certainly try something else like what's proposed <a href=\"https://stackoverflow.com/questions/26206843/efficient-way-to-hash-a-2d-point\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 428, "user_id": 6598327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IAKEPWBcktM/AAAAAAAAAAI/AAAAAAAAAVs/Z-0Ylpo9L_Y/photo.jpg?sz=128", "display_name": "Purple Ice", "link": "https://stackoverflow.com/users/6598327/purple-ice"}, "edited": false, "score": 1, "creation_date": 1551435435, "post_id": 54938998, "comment_id": 96647761, "body": "Whether implementation specific speculations are correct or not, this is the real answer. Even if threads get reused, game of life is so simple that switching between threads might take more time than checking a single cell."}], "tags": [], "owner": {"reputation": 1247, "user_id": 9107647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43594ef3d74c11a31be7f9d5ebddc0?s=128&d=identicon&r=PG&f=1", "display_name": "Humphrey Winnebago", "link": "https://stackoverflow.com/users/9107647/humphrey-winnebago"}, "is_accepted": false, "score": 2, "last_activity_date": 1551421245, "creation_date": 1551421245, "answer_id": 54938998, "question_id": 54914694, "link": "https://stackoverflow.com/questions/54914694/multithreaded-function-performance-worse-than-single-threaded/54938998#54938998", "title": "Multithreaded function performance worse than single threaded", "body": "<blockquote>\n  <p>Why am I getting worse performance with my multithreaded implementation?</p>\n</blockquote>\n\n<p>Classic question :)</p>\n\n<p>You loop through only the alive cells. That's actually pretty interesting. A naive implementation of Conway's Game of Life would look at every cell. Your version optimizes for a fewer number of alive than dead cells, which I think is common later in the game. I can't tell from your excerpt, but I assume it trades off by possibly doing redundant work when the ratio of alive to dead cells is higher.</p>\n\n<p>A caveat of <code>omp parallel</code> is that there's no guarantee that the threads won't be created/destroyed during entry/exit of the parallel section. It's implementation dependent. I can't seem to find any information on MSVC's implementation. If anyone knows, please weight in.</p>\n\n<p>So that means that your threads could be created/destroyed every update loop, which is heavy overhead. For this to be worth it, the amount of work should be orders of magnitude more expensive than the overhead.</p>\n\n<p>You can profile/measure the code to determine overhead and work time. It should also help you see where the real bottlenecks are.</p>\n\n<p>Visual Studio has a profiler with a nice GUI. You need to compile your code with release optimizations but also include the debug symbols (those are excluded in the default release configuration). I haven't looked into how to set this up manually because I usually use CMake and it sets up a RelWithDebInfo configuration automatically.</p>\n\n<p>Use <code>high_resolution_clock</code> to time sections that are hard to measure with the profiler.</p>\n\n<p>If you can use C++17, it has a standard parallel for_each (the ExecutionPolicy overload). Most of the algorithmy standards functions do. <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/algorithm/for_each</a>. They're so new that I barely know anything about them (they might also have the same issues as OpenMP).</p>\n\n<blockquote>\n  <p>seems like it's getting slower over time.</p>\n</blockquote>\n\n<p>Could it be that you're not cleaning up one of your vectors?</p>\n"}], "owner": {"reputation": 4442, "user_id": 1504964, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a06b19efdeb2d06f2897f7d25a455383?s=128&d=identicon&r=PG", "display_name": "Kyle V.", "link": "https://stackoverflow.com/users/1504964/kyle-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551421245, "creation_date": 1551302492, "last_edit_date": 1551324163, "question_id": 54914694, "link": "https://stackoverflow.com/questions/54914694/multithreaded-function-performance-worse-than-single-threaded", "title": "Multithreaded function performance worse than single threaded", "body": "<p>I wrote an <code>update()</code> function which ran on a single thread, then I wrote the below function <code>updateMP()</code> which does the same thing except I divide the work in my two for loops here amongst some threads:</p>\n\n<pre><code>void GameOfLife::updateMP()\n{\n    std::vector&lt;Cell&gt; toDie;\n    std::vector&lt;Cell&gt; toLive;\n\n#pragma omp parallel\n    {\n        // private, per-thread variables\n        std::vector&lt;Cell&gt; myToDie;\n        std::vector&lt;Cell&gt; myToLive;\n\n#pragma omp for\n        for (int i = 0; i &lt; aliveCells.size(); i++) {\n            auto it = aliveCells.begin();\n            std::advance(it, i);\n\n            int liveCount = aliveCellNeighbors[*it];\n            if (liveCount &lt; 2 || liveCount &gt; 3) {\n                myToDie.push_back(*it);\n            }\n        }\n\n#pragma omp for\n        for (int i = 0; i &lt; aliveCellNeighbors.size(); i++) {\n            auto it = aliveCellNeighbors.begin();\n            std::advance(it, i);\n\n            if (aliveCells.find(it-&gt;first) != aliveCells.end()) // is this cell alive?\n                continue; // if so skip because we already updated aliveCells\n\n            if (aliveCellNeighbors[it-&gt;first] == 3) {\n                myToLive.push_back(it-&gt;first);\n            }\n        }\n\n#pragma omp critical\n        {\n            toDie.insert(toDie.end(), myToDie.begin(), myToDie.end());\n            toLive.insert(toLive.end(), myToLive.begin(), myToLive.end());\n        }\n    }\n\n    for (const Cell&amp; deadCell : toDie) {\n        setDead(deadCell);\n    }\n\n    for (const Cell&amp; liveCell : toLive) {\n        setAlive(liveCell);\n    }\n}\n</code></pre>\n\n<p>I noticed that it performs worse than the single threaded <code>update()</code> and seems like it's getting slower over time.</p>\n\n<p>I think I might be doing something wrong by having two uses of <code>omp for</code>? I am new to OpenMP so I am still figuring out how to use it.</p>\n\n<p>Why am I getting worse performance with my multithreaded implementation?</p>\n\n<p>EDIT: Full source here: <a href=\"https://github.com/k-vekos/GameOfLife/tree/hashing?files=1\" rel=\"nofollow noreferrer\">https://github.com/k-vekos/GameOfLife/tree/hashing?files=1</a> </p>\n"}, {"tags": ["c++", "vector", "nlp", "chatbot"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1551302952, "post_id": 54914679, "comment_id": 96595853, "body": "Not all your code: <code>..\\main.cpp:5:10: fatal error: FinalProject.hpp: No such file or directory</code>. We&#39;d rather have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> than all your code, actually."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1551303640, "last_edit_date": 1551303640, "creation_date": 1551303103, "answer_id": 54914806, "question_id": 54914679, "link": "https://stackoverflow.com/questions/54914679/finding-keyword-in-strings-c/54914806#54914806", "title": "Finding keyword in strings c++", "body": "<p>The problem with</p>\n\n<pre><code>std::find(keywords.begin(), keywords.end(), KQuery)\n</code></pre>\n\n<p>is it is going to see if the entire string in <code>KQuery</code> matches one of your keywords.  Since <code>KQuery</code> has a sentence in it, it isn't going to find a match.  What you need to do is loop through all the keywords and see if <code>KQuery.find(keyword)</code> returns a valid result.  </p>\n\n<p>You can do that using <code>std::find_if</code> and a lambda like</p>\n\n<pre><code>std::find_if(keywords.begin(), keywords.end(),\n             [&amp;](auto const&amp; keyword){ return KQuery.find(keyword) != std::string::npos; });\n</code></pre>\n\n<p>This will return an iterator to the first keyword it finds in <code>KQuery</code> or <code>keywords.end()</code> if none of the keywords are found.</p>\n"}], "owner": {"reputation": 1, "user_id": 10972328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc17c2f782f4c88f4808b10555a860d?s=128&d=identicon&r=PG&f=1", "display_name": "nigestern", "link": "https://stackoverflow.com/users/10972328/nigestern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1551303640, "creation_date": 1551302433, "question_id": 54914679, "link": "https://stackoverflow.com/questions/54914679/finding-keyword-in-strings-c", "title": "Finding keyword in strings c++", "body": "<p>I'm still fairly new to C++ and programming so I might just be missing something big here. </p>\n\n<p>I'm trying to create a chatbot for a library, deals with opening times ect and other things. I want the chatbot to be able to pickup key words in a input and then be able to call the right function that will be able to give some text back to them.</p>\n\n<p>For example:</p>\n\n<p>user: what time is the library open till?\n//chatbot picks up the key word 'open' and returns the right function\nchatbot: the libraries open between 6 and 5</p>\n\n<p>It shouldn't be as hard as I am finding it to be able to get the chatbot to do this. </p>\n\n<p>The function I'm having trouble with:</p>\n\n<pre><code>std::string GetKeywords(){\nstd::string KQuery = GetQuery();\n\n\nstd::vector&lt;std::string&gt; keywords{\"open\", \"opening\", \"times\", \"close\", \"closing\", \"shut\"};\n\n\n    if(std::find(keywords.begin(), keywords.end(), KQuery) != keywords.end()){\n        std::cout &lt;&lt; \"Library is open when I say it is\" &lt;&lt; std::endl;\n    }\nreturn 0;\n};\n</code></pre>\n\n<p>This is returning a memory error and is the only place in my code which throws an issue.  </p>\n\n<p>All my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#include \"FinalProject.hpp\"\n\n//introducing funtions\nvoid PrintIntro();\nstd::string GetQuery();\nstd::string RunScripts();\nstd::string GetKeywords();;\n\n// introducing chatbot\nRunScript ChatBot;\n\n\nint main(){\n\nPrintIntro();\nGetQuery();\nGetKeywords();\n\n};\n\n\n\nvoid PrintIntro(){\n    //printing introductory text to ask the user for input\nstd::cout &lt;&lt; \"Hi, I'm Librarius, I'm here to help you with University     library queries\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"I can help you with the following: \\n Spaces to study \\n     Opening times \\n Taking out books \\n Returning books\\n\" &lt;&lt; std:: endl;\nstd::cout &lt;&lt; \"Ask away!\" &lt;&lt; std::endl;\nreturn;\n};\n\n\n\nstd::string GetQuery(){\n//getting input from the user\nstd::string Query = \"\";\nstd::getline(std::cin, Query);\n\nif(Query.empty()){\n    //checking to see if the user hasnt entered anything\n    std::cout &lt;&lt; \"Hey! Why didnt you enter anything?! I don't want to waste my time!\" &lt;&lt; std::endl;\n};\n\nreturn Query;\n};\n\nstd::string GetKeywords(){\nstd::string KQuery = GetQuery();\n\n\nstd::vector&lt;std::string&gt; keywords{\"open\", \"opening\", \"times\", \"close\", \"closing\", \"shut\"};\n\n\n    if(std::find(keywords.begin(), keywords.end(), KQuery) != keywords.end()){\n        std::cout &lt;&lt; \"Library is open when I say it is\" &lt;&lt; std::endl;\n    }\n\n\n\nreturn 0;\n};\n\n//using the input got from the user to decide which script to run\n\n//TODO analyse the users keywords and decide on a script to run\n\n//TODO return an appropriate script\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "struct", "compiler-errors", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 8278951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66df540b6bb7a9ddf4854bc5228fc37?s=128&d=identicon&r=PG", "display_name": "Rahul Goswami", "link": "https://stackoverflow.com/users/8278951/rahul-goswami"}, "edited": false, "score": 0, "creation_date": 1551302882, "post_id": 54914687, "comment_id": 96595824, "body": "Thank you. It works. I think <code>Node ret</code> also needs to be changed to <code>MyStruct::Node ret</code>."}, {"owner": {"reputation": 456, "user_id": 8278951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66df540b6bb7a9ddf4854bc5228fc37?s=128&d=identicon&r=PG", "display_name": "Rahul Goswami", "link": "https://stackoverflow.com/users/8278951/rahul-goswami"}, "edited": false, "score": 0, "creation_date": 1551302924, "post_id": 54914687, "comment_id": 96595841, "body": "But is there no way I could do it <i>inside</i> MyStruct, as stated in question? Edit: answer updated."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1551302988, "last_edit_date": 1551302988, "creation_date": 1551302468, "answer_id": 54914687, "question_id": 54914647, "link": "https://stackoverflow.com/questions/54914647/operator-overloading-of-struct-inside-another-struct-gives-error/54914687#54914687", "title": "Operator overloading of struct inside another struct gives error", "body": "<blockquote>\n  <p>How can I overload operator of Node outside the Node structure but inside MyStruct?</p>\n</blockquote>\n\n<p>You can't do that. Any overload operators defined outside <code>Node</code> and inside <code>MyStruct</code> is treated as an overload operator of <code>MyStruct</code>. This is where a <code>namespace</code> is different from a <code>struct</code>.</p>\n\n<p>You can use:</p>\n\n<pre><code>struct MyStruct {\n  struct Node {\n    int a;\n  };\n};\n\nMyStruct::Node operator+(MyStruct::Node const&amp; A, MyStruct::Node const&amp; B) {\n   MyStruct::Node ret;\n   ret.a = A.a + B.a;\n   return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 8278951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66df540b6bb7a9ddf4854bc5228fc37?s=128&d=identicon&r=PG", "display_name": "Rahul Goswami", "link": "https://stackoverflow.com/users/8278951/rahul-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 54914687, "answer_count": 1, "score": 0, "last_activity_date": 1551302988, "creation_date": 1551302252, "question_id": 54914647, "link": "https://stackoverflow.com/questions/54914647/operator-overloading-of-struct-inside-another-struct-gives-error", "title": "Operator overloading of struct inside another struct gives error", "body": "<pre><code>struct MyStruct {\n  struct Node {\n    int a;\n  };\n  Node operator + (const Node &amp;A, const Node &amp;B) {\n    Node ret;\n    ret.a = A.a + B.a;\n    return ret;\n  };\n};\n</code></pre>\n\n<p>The above code gives error:<br>\n <code>\u2018MyStruct::Node MyStruct::operator+(const MyStruct::Node&amp;, const MyStruct::Node&amp;)\u2019 must take either zero or one argument</code>.</p>\n\n<p>While the following codes compiles correctly -</p>\n\n<pre><code>struct Node {\n  int a;\n};\nNode operator + (const Node &amp;A, const Node &amp;B) {\n  Node ret;\n  ret.a = A.a + B.a;\n  return ret;\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct MyStruct {\n  struct Node {\n    int a;\n    Node operator + (const Node &amp;B) {\n      a += B.a;\n      return *this;\n    };\n  };\n};\n</code></pre>\n\n<p>How can I overload operator of <code>Node</code> outside the <code>Node</code> structure but inside <code>MyStruct</code>?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551304952, "post_id": 54914753, "comment_id": 96596686, "body": "Side note: +Foo::bufSize has the same effect, but less typing and less room for error (could be used for other types as well)"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 0, "last_activity_date": 1551302763, "creation_date": 1551302763, "answer_id": 54914753, "question_id": 54914642, "link": "https://stackoverflow.com/questions/54914642/why-a-linker-error-concerning-a-static-constant-depends-on-optimization-level/54914753#54914753", "title": "Why a linker error concerning a static constant depends on optimization level?", "body": "<p>The variable <code>Foo::bufSize</code> is odr-used because passing it to the <code>make_unique</code> function causes it to be passed by forwarding reference, which requires it to have an address. (Note that writing <code>(int)Foo::bufSize</code> would prevent it from being odr-used.)</p>\n\n<p>However, since the compiler can see the definition of <code>make_unique</code> and knows that <code>Bar</code> takes its constructor argument by value, at some optimization level, it may be clever enough to eliminate the call to <code>make_unique</code>, simply inlining the value <code>4096U</code> in a call to the constructor of <code>Bar</code>, or may even eliminate the <code>Bar</code> object altogether as the initialization of <code>barSize</code> is a dead store. In such a case, it would not need to emit a reference to <code>Foo::bufSize</code>, and no linker error would occur.</p>\n\n<p>The compiler and linker are not required to tell you that you violated the ODR, since ODR violations render your program \"ill-formed, no diagnostic required\".</p>\n"}], "owner": {"reputation": 3, "user_id": 11127014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2cffa0863dd90004107ee23298e228?s=128&d=identicon&r=PG&f=1", "display_name": "AKr143", "link": "https://stackoverflow.com/users/11127014/akr143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54914753, "answer_count": 1, "score": 0, "last_activity_date": 1551302763, "creation_date": 1551302242, "question_id": 54914642, "link": "https://stackoverflow.com/questions/54914642/why-a-linker-error-concerning-a-static-constant-depends-on-optimization-level", "title": "Why a linker error concerning a static constant depends on optimization level?", "body": "<p>I'm using std::make_unique (std::make_shared) to instantiate a class that takes a parameter. This parameter shall be initialized by a static constant.</p>\n\n<p>If this static constant is initialized by a constant initializer (inside class definition) and not defined correctly according requirement from standard (outside class definition) then optimization -O0 shows a linker error but any optimization level (-O2, -O3, -Os) doesn't show any error. The compiled program runs.</p>\n\n<p>I know that the missing static constant definition is an error.\nThanks to <a href=\"http://%3Chttps://stackoverflow.com/questions/3531060/how-to-initialize-a-static-const-member-in-c%3E\" rel=\"nofollow noreferrer\">this question</a> and <a href=\"http://%3Chttps://stackoverflow.com/questions/2605520/c-where-to-initialize-static-const?noredirect=1&amp;lq=1%3E\" rel=\"nofollow noreferrer\">this question</a>.</p>\n\n<p><strong>Why the linker error shows up only with -O0 if I remove the line \"size_t const Foo::bufSize;\"? Is this an error within gcc?</strong> </p>\n\n<p>I've tested this code with:\nGCC 5.3.0 for x86 Windows (MinGW)\nGCC 6.3.0 for x86 Linux (Debian Stretch)</p>\n\n<p>My simplified example code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;memory&gt;\n\nclass Bar {\n  public:\n    Bar(size_t const size)\n    : barSize(size) { std::cout &lt;&lt; \"Bar::Bar: Size: \" &lt;&lt; barSize &lt;&lt; std::endl; }\n\n    ~Bar(void) = default;\n  private:\n   size_t barSize;\n};\n\n#define USE_CONST_INITIALIZER 1\n\nclass Foo {\n  public:\n#if (USE_CONST_INITIALIZER == 1)\n    static size_t const bufSize = 4096U;\n#else\n    static size_t const bufSize;\n#endif\n\n    Foo(void)\n    : spBuffer(std::make_unique&lt;Bar&gt;(Foo::bufSize)) // -Os compiles and links, -O0 shows linker error\n    //: spBuffer(new Bar(Foo::bufSize)) // no errors, -Os and -O0 compiles and links\n    {\n      std::cout &lt;&lt; \"Foo::Foo: constructed.\" &lt;&lt; std::endl;\n    }\n\n    ~Foo(void) = default;\n\n  private:\n    std::unique_ptr&lt;Bar&gt; spBuffer;\n};\n\n#if (USE_CONST_INITIALIZER == 1)\nsize_t const Foo::bufSize;    // This definition (btw. required by standard) is essential if compiled with -O0\n#else\nsize_t const Foo::bufSize = 4096U;\n#endif\n\nint main(void) {\n  std::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\n  Foo foo;\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "fileinputstream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551302304, "post_id": 54914619, "comment_id": 96595566, "body": "You don&#39;t even test if your files could be successfully opened."}, {"owner": {"reputation": 1, "user_id": 11127464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a4692cc2cc1555dfc945c908af7eab?s=128&d=identicon&r=PG&f=1", "display_name": "Kenan Baira", "link": "https://stackoverflow.com/users/11127464/kenan-baira"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551303403, "post_id": 54914619, "comment_id": 96596028, "body": "did loads of codes without checking can you tell me how please to answer you back Thanks"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551303704, "post_id": 54914619, "comment_id": 96596163, "body": "<code>while(!file.eof())</code> is a very common error. <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Explanation here</a>. For one thing it ONLY checks that the end of the file has been reached. If anything else goes wrong the program misses it. If I&#39;m not mistaken this includes the file not being open."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 1, "creation_date": 1551304194, "post_id": 54914619, "comment_id": 96596394, "body": "If the program is just sitting there doing nothing, put a print statement inside your loop or use a debugger to step through the code. You&#39;ll probably learn something."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551306970, "post_id": 54915373, "comment_id": 96597431, "body": "I cannot support this answer. It wraps a bandaid over a and carries through a very simple mistake made by the asker. <code>while (!file &gt;&gt; pennis &gt;&gt; nickle &gt;&gt; dime &gt;&gt; quarter)</code> as recommended by <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> would have caught and exposed a missing file."}], "tags": [], "owner": {"reputation": 99, "user_id": 11069041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UHVPnzy0XwM/AAAAAAAAAAI/AAAAAAAAAPM/1QSUXLA9I9I/photo.jpg?sz=128", "display_name": "Bhaumik Mistry", "link": "https://stackoverflow.com/users/11069041/bhaumik-mistry"}, "is_accepted": false, "score": -1, "last_activity_date": 1551305785, "creation_date": 1551305785, "answer_id": 54915373, "question_id": 54914619, "link": "https://stackoverflow.com/questions/54914619/problem-while-using-input-outout-from-files-c/54915373#54915373", "title": "Problem while using input outout from files c++", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;iomanip&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream file;\n    ofstream out;\n\n    file.open(\"coinsCoint.txt\");\n\n    int pennis = 0, nickle = 0, dime = 0, quarter = 0, sum = 0;\n    float total = 0.0;\n\n    /* check if file is opened */\n    if (file.is_open()){\n\n        while (!file.eof())\n        {\n            file &gt;&gt; pennis &gt;&gt; nickle &gt;&gt; dime &gt;&gt; quarter;\n            cout &lt;&lt; \"pennis \" &lt;&lt; pennis &lt;&lt; endl;\n            cout &lt;&lt; \"nickle \" &lt;&lt; nickle &lt;&lt; endl;\n            cout &lt;&lt; \"dime \" &lt;&lt; dime &lt;&lt; endl;\n            cout &lt;&lt; \"quarter \" &lt;&lt; quarter &lt;&lt; endl;\n\n            sum += pennis + nickle * 5 + dime * 10 + quarter * 25;\n            total = sum / 100.0;\n            cout &lt;&lt; \"total \" &lt;&lt; total;\n        }\n        file.close();\n    }\n    /* return if error in file open */\n    else {\n        cout&lt;&lt; \"can not open given file\";\n        return 0;\n    }\n    out.open(\"1234567.txt\");\n\n    if (out.is_open()){\n        out &lt;&lt; \"Total amount collected is: $\" &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt;\n            setprecision(2) &lt;&lt; total;\n        out.close();\n    }\n    return 0;\n}\n\n</code></pre>\n\n<p>A similar tutorial <a href=\"http://tutorial\" rel=\"nofollow noreferrer\">https://www.uow.edu.au/~lukes/TEXTBOOK/notes-cpp/io/readtextfile.html</a></p>\n\n<p>You should always check of the file has been opened correctly by <code>is_open()</code></p>\n\n<p>You need to use <code>cout &lt;&lt;</code> to print to console the 'Black screen' </p>\n\n<p>the file looks like</p>\n\n<pre><code>1\n2\n3\n4\n</code></pre>\n\n<p>the out put should be something like</p>\n\n<pre><code>pennis 1\nnickle 2\ndime 3\nquarter 4\ntotal 1.41Press &lt;RETURN&gt; to close this window...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11127464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a4692cc2cc1555dfc945c908af7eab?s=128&d=identicon&r=PG&f=1", "display_name": "Kenan Baira", "link": "https://stackoverflow.com/users/11127464/kenan-baira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1551305785, "creation_date": 1551302124, "question_id": 54914619, "link": "https://stackoverflow.com/questions/54914619/problem-while-using-input-outout-from-files-c", "title": "Problem while using input outout from files c++", "body": "<p>When implementing this code</p>\n\n<p>and the program runs when the black screen pops up it stays up nothing else waited a while and nothing happened didn't finish didn't give me process returned 0 to know it's done the output file is empty if someone can tell me what is wrong here</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;iomanip&gt;\n\nusing namespace std;\n\nint main()\n{\nifstream file;\nofstream out;\n\nfile.open(\"coinsCoint.txt\");\nout.open(\"1234567.txt\");\n\nint pennis,nickle,dime,quarter,sum=0;\nfloat total;\n\nwhile(!file.eof())\n{\n    file &gt;&gt; pennis &gt;&gt; nickle &gt;&gt; dime &gt;&gt; quarter;\n\n    sum+=pennis+nickle*5+dime*10+quarter*25;\n\n    total=sum/100.0;\n\n}\n\nout &lt;&lt; \"Total amount collected is: $\" &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; \nsetprecision(2) &lt;&lt; total;\n\nfile.close();\nout.close();\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "overriding"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551301375, "post_id": 54914337, "comment_id": 96595139, "body": "forgot <code>virtual</code>?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1551301614, "post_id": 54914337, "comment_id": 96595242, "body": "You haven&#39;t shown the definition of the classes <code>Object</code> and <code>Player</code>, I&#39;m wondering the same as Matthieu."}, {"owner": {"reputation": 49, "user_id": 10404482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ec0d8630b74c3e625659ce0329396e?s=128&d=identicon&r=PG&f=1", "display_name": "Poulpynator", "link": "https://stackoverflow.com/users/10404482/poulpynator"}, "edited": false, "score": 0, "creation_date": 1551301748, "post_id": 54914337, "comment_id": 96595310, "body": "Yep it&#39;s work (I wasn&#39;t even knowing that), but I prefer avoid virtual"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1551301974, "post_id": 54914337, "comment_id": 96595418, "body": "You can&#39;t, that&#39;s the point of <code>virtual</code>..."}, {"owner": {"reputation": 49, "user_id": 10404482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ec0d8630b74c3e625659ce0329396e?s=128&d=identicon&r=PG&f=1", "display_name": "Poulpynator", "link": "https://stackoverflow.com/users/10404482/poulpynator"}, "edited": false, "score": 0, "creation_date": 1551303134, "post_id": 54914337, "comment_id": 96595926, "body": "Apparently template can be a solution, anyway I overide other methods without <code>virtual</code> before and I don&#39;t understand why in this case it&#39;s not working"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1551305411, "post_id": 54914337, "comment_id": 96596869, "body": "Please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1551714490, "post_id": 54914337, "comment_id": 96731246, "body": "Could you post the code where you&#39;re using <code>Player</code> methods?"}], "owner": {"reputation": 49, "user_id": 10404482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45ec0d8630b74c3e625659ce0329396e?s=128&d=identicon&r=PG&f=1", "display_name": "Poulpynator", "link": "https://stackoverflow.com/users/10404482/poulpynator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551308533, "creation_date": 1551300966, "last_edit_date": 1551308533, "question_id": 54914337, "link": "https://stackoverflow.com/questions/54914337/inheritance-and-methods-overriding", "title": "Inheritance and methods overriding", "body": "<p>I am making a collision system in C++ with SFML. I have a base <strong>object</strong> class with the following methods :</p>\n\n<pre><code>class Object : public sf::CircleShape {\nprotected:\n    bool collision;\n\n    void onCollision();\n    void afterCollision();\npublic:\n    bool checkCollision(Object&amp; object);\n    bool reactCollision(bool _collision);\n};\n\nbool Object::checkCollision(Object&amp; object) {\n    //Calcul distance with object and radius    \n    bool _collision = (distance &lt;= radius)? true : false;\n\n    this-&gt;reactCollision(_collision)\n    return _collision;\n}\n\nbool Object::reactCollision(bool _collision) {\n    //If collision state change compare to previous\n    if(_collision != collision) {\n        if(_collision) {\n            this-&gt;onCollision();\n        }\n        else {\n            this-&gt;afterCollision();\n        }\n\n        collision = _collision;\n    }\n    return _collision;\n}\n\nvoid Object::onCollision() {\n    this-&gt;setFillColor(sf::Color::Red);\n}\nvoid Object::afterCollision() {\n    this-&gt;setFillColor(sf::Color::White);\n}\n</code></pre>\n\n<p>And then a <strong>player</strong> class who implement <strong>object</strong> and overide two methods:</p>\n\n<pre><code>class Player : public Object {\nprotected:\n    void onCollision();\n    void afterCollision();\n};\n\nvoid Player::onCollision() {\n    this-&gt;setFillColor(sf::Color::Magenta);\n}\nvoid Player::afterCollision() {\n    this-&gt;setFillColor(sf::Color::Green);\n}\n</code></pre>\n\n<p>The problem : <strong>player</strong> use the parent base methods instead of his owns specialized methods. If I implement <em>reactCollision()</em> and <em>checkCollision()</em> in the player class, it's working but that not the goal.</p>\n\n<p>I would like to modify <em>onCollision()</em> in the children's classes of <strong>object</strong> without implementing the same code from <em>reactCollision()</em> and <em>checkCollision()</em> in the children classes.</p>\n"}, {"tags": ["c++", "opencv", "opencv-mat"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551298383, "post_id": 54913669, "comment_id": 96593813, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/43089181/custom-defined-type-for-cvmat-in-opencv\" title=\"custom defined type for cvmat in opencv\">stackoverflow.com/questions/43089181/&hellip;</a>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1551298416, "post_id": 54913669, "comment_id": 96593827, "body": "FYI, your <code>struct data</code> is equivalent to <code>cv::CV_16SC3</code>, which is a member of <code>cv::DataType</code>."}, {"owner": {"reputation": 1, "user_id": 5364815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cfa3013d284c5d63bccea84af6f7791?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5364815/max"}, "edited": false, "score": 0, "creation_date": 1551464554, "post_id": 54913669, "comment_id": 96663320, "body": "Thank you all for your answers. It helped me resolve my issue."}], "owner": {"reputation": 1, "user_id": 5364815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cfa3013d284c5d63bccea84af6f7791?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5364815/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551298009, "creation_date": 1551298009, "question_id": 54913669, "link": "https://stackoverflow.com/questions/54913669/how-to-make-cvmat-objects", "title": "How to make cv::Mat_ objects", "body": "<p>I need to use class cv::Mat_ from OpenCV library for performing some data processing. </p>\n\n<p>I have a struct type such as this</p>\n\n<pre><code>struct data{short a; short b; short c; }\n</code></pre>\n\n<p>If I try to create a cv::Mat_ object like this, </p>\n\n<pre><code>cv::Mat_&lt;data&gt;d_cells(10,50);\n</code></pre>\n\n<p>I get an error in Visual Studio, </p>\n\n<blockquote>\n  <p>'channel_type': is not a member of 'cv::DataType&lt;_Tp>'</p>\n</blockquote>\n\n<p>I've tried reading documentation and reading other posts regarding the same error, but it didn't solve my problem. I am new to c++.</p>\n\n<p>Could someone help me? </p>\n"}, {"tags": ["c++", "multithreading", "progress-bar"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1551296691, "post_id": 54913246, "comment_id": 96593048, "body": "May depend on the kind of <i>progress bar</i> you are using. Does it have an interface to convey to the maximum in form of an estimated time property? What time resolution should be used (realtime isn&#39;t really a thing, every kind of <i>realtime</i> is based on a certain resolution, the operating system is able to guarantee)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551297180, "post_id": 54913246, "comment_id": 96593276, "body": "It is programmed to be from 0.0f to 1.0f. I think that time might be in a milliseconds and I&#39;d convert it to 0.0f -&gt; 1.0f"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551297200, "post_id": 54913246, "comment_id": 96593294, "body": "I am afraid you have to be more specific about your GUI framework, what specific <i><code>ProgressBar</code></i> you are using, how you configure it, and how you&#39;re planning to update it. I think that should be the minimum code to be included in your question as showing an attempt."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1551297252, "post_id": 54913246, "comment_id": 96593317, "body": "Change <code>do sth</code> to periodically report progress.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "edited": false, "score": 0, "creation_date": 1551297748, "post_id": 54913246, "comment_id": 96593517, "body": "Ok, I thought progress bar is a progress bar, but if it is a case. I have already updated the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1551297804, "post_id": 54913246, "comment_id": 96593549, "body": "@rustyx how to do this? Could you write something more, please?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "edited": false, "score": 0, "creation_date": 1551297923, "post_id": 54913382, "comment_id": 96593608, "body": "So, I should periodically report progress as if rustyx suggested. How to do this, though."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551298234, "post_id": 54913382, "comment_id": 96593751, "body": "@JarekBisnesu If you are writing everything yourself, you need to add the capability for callbacks so that the thread can send messages to the progress bar to keep the bar up to date. If you are using a framework, odds are good this plumbing is built in (.Net <code>BackgroundWorker</code> for example)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "edited": false, "score": 0, "creation_date": 1551298442, "post_id": 54913382, "comment_id": 96593842, "body": "I am more into writing everything myself, because I want to learn something and know how it works than just use it. I will try to think (and google) out how to add the capability for callbacks, I&#39;ll let you know later."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1551298497, "post_id": 54913382, "comment_id": 96593867, "body": "What GUI library or framework are you using? Any answer would depend on that."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1551298785, "post_id": 54913382, "comment_id": 96594010, "body": "Maybe you want boost::signals2 for this: <a href=\"https://theboostcpplibraries.com/boost.signals2-multithreading\" rel=\"nofollow noreferrer\">theboostcpplibraries.com/boost.signals2-multithreading</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1551301392, "post_id": 54913382, "comment_id": 96595149, "body": "@drescherjm I&#39;d rather want to write own one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551301393, "post_id": 54913382, "comment_id": 96595151, "body": "@user4581301 should I create a class like ProgressCallback with for example float progress inside and for every, for instance, millisecond, stop the thread, return the callback, update progress bar and then run a thread again but now start writing to data from the point that I stopped writing to it?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551301944, "post_id": 54913382, "comment_id": 96595402, "body": "@JarekBisnesu You don&#39;t necessarily have to go as far as a class. A simple function is more than enough most of the time. How much do you know about thread synchronization? That&#39;s going to be the hard part. It is really easy for the background thread to provide an update in the middle of a progress bar draw operation and result in bad behaviour."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551302329, "post_id": 54913382, "comment_id": 96595577, "body": "@user4581301 I know mutex, guard lock, unique lock, condition variables and maybe more which I do not remember right now, but might be remined while writing. Should I know something more?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551302537, "post_id": 54913382, "comment_id": 96595691, "body": "@JarekBisnesu That&#39;s enough to get you started, but also look into <a href=\"https://stackoverflow.com/a/2223270/4581301\">message loops</a>."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1551298440, "last_edit_date": 1551298440, "creation_date": 1551296869, "answer_id": 54913382, "question_id": 54913246, "link": "https://stackoverflow.com/questions/54913246/how-to-measure-thread-time-for-progress-bar/54913382#54913382", "title": "How to measure thread time for progress bar?", "body": "<p>All you can do for a progress bar is show an estimate or how long you have progressed based on the work you have already done (with an estimate (or maybe exact knowledge) of the total work to do.</p>\n\n<p>All you know is what work has been done and the time that took. The time it takes to do everything is always going to be an estimate. You can usually do pretty good by basing the estimate on the already completed work, but not always.</p>\n\n<p>Making an exact progress bar is (in most cases) Impossible. Best you can do is a guesstimate.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10701979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551298665, "creation_date": 1551296303, "last_edit_date": 1551298665, "question_id": 54913246, "link": "https://stackoverflow.com/questions/54913246/how-to-measure-thread-time-for-progress-bar", "title": "How to measure thread time for progress bar?", "body": "<p>I want to follow a thread progress. I have already implemented progress bar graphically, but I am wondering how to efficiently measure progress of the thread in a real time.</p>\n\n<p>Progress bar</p>\n\n<pre><code>template&lt;typename T&gt;\ninline T Saturate(T value, T min = static_cast&lt;T&gt;(0.0f), T max = static_cast&lt;T&gt;(1.0f))\n{\n    return value &lt; static_cast&lt;T&gt;(min) ? static_cast&lt;T&gt;(min) : value &gt; static_cast&lt;T&gt;(max) ? static_cast&lt;T&gt;(max) : value;\n}\n\nvoid ProgressBar(float progress, const Vector2&amp; size)\n{\n    Panel* window = getPanel();\n\n    Vector2 position = //some position                                                                                                                              \n    progress = Saturate(progress);\n\n    window-&gt;renderer-&gt;FillRect({ position, size }, 0xff00a5ff);\n    window-&gt;renderer-&gt;FillRect(Rect(position.x, position.y, Lerp(0.0f, size.w, progress), size.h), 0xff0000ff);\n\n    //progress will be shown as a %\n    std::string progressText;       \n    //ToString(value, how many decimal places)                                                                                                                        \n    progressText = ToString(progress * 100.0f, 2) + \"%\";                                                \n\n    const float textWidth = font-&gt;getWidth(progressText) * context.fontScale,\n                textX = Clamp(Lerp(position.x, position.x + size.w, progress), position.x, position.x + size.w - textWidth);\n    window-&gt;renderer-&gt;DrawString(progressText, Vector2(textX, position.y + font-&gt;getAscender(progressText) * context.fontScale * 0.5f), 0xffffffff, context.fontScale, *font.get());\n}\n</code></pre>\n\n<p>and somewhere in a game loop, example usage</p>\n\n<pre><code>static float prog = 0.0f;\nfloat progSpeed = 0.01f;\nstatic float progDir = 1.0f;\nprog += progSpeed * (1.0f / 60.0f) * progDir;\n\nProgressBar(prog, { 100.0f, 30.0f });\n</code></pre>\n\n<p>I know how to measure execution time:</p>\n\n<pre><code>uint t1 = getTime();\n//... do sth\nuint t2 = getTime();\nuint executionTime = t2 - t1;\n</code></pre>\n\n<p>but of course progress bar will be updated after execution, so it won't be shown in a real time.</p>\n\n<p>Should I use a new thread? Are there any other methods to do this?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551296013, "post_id": 54913129, "comment_id": 96592743, "body": "You may want to, at some point, consider <code>const std::string&amp;</code> ."}, {"owner": {"reputation": 77, "user_id": 11126897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hfkL5.jpg?s=128&g=1", "display_name": "black_gay", "link": "https://stackoverflow.com/users/11126897/black-gay"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551297390, "post_id": 54913129, "comment_id": 96593374, "body": "Ive tried it already, and still the slot is not fired. I suppose the reason may be that the first version of connect introduces implicit conversion <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">wiki.qt.io/New_Signal_Slot_Syntax</a> and the older version doesnt. But i dont see how."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551297482, "post_id": 54913129, "comment_id": 96593414, "body": "My comment was not about solving your problem at all - just something to consider in the future."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1551301035, "post_id": 54913129, "comment_id": 96594996, "body": "I don&#39;t think queuing an <code>std::string</code> is enabled by default for the old signal/slot syntax (which should be avoided anyway) -- you should probably see an error message on the console.  Try passing <code>QString</code> instead."}, {"owner": {"reputation": 77, "user_id": 11126897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hfkL5.jpg?s=128&g=1", "display_name": "black_gay", "link": "https://stackoverflow.com/users/11126897/black-gay"}, "edited": false, "score": 0, "creation_date": 1551302243, "post_id": 54913129, "comment_id": 96595541, "body": "The old system supported any type i guess, for example this code works fine <a href=\"https://pastebin.com/4ueBxHfs\" rel=\"nofollow noreferrer\">pastebin.com/4ueBxHfs</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1551304511, "post_id": 54913129, "comment_id": 96596528, "body": "Typo: change <code>SIGNAL(textUpdateSign(std::string )</code> to <code>SIGNAL(textUpdateSignal(std::string )</code>"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1551304738, "post_id": 54913129, "comment_id": 96596614, "body": "Assuming your code does not actually have all those <code>&gt;</code> symbols in it, it is best to present code without those. A reader may wish to copy+paste it so they can run/debug it themselves, and if they have to repair it before hand, it may put them off doing so."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 11126897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hfkL5.jpg?s=128&g=1", "display_name": "black_gay", "link": "https://stackoverflow.com/users/11126897/black-gay"}, "edited": false, "score": 0, "creation_date": 1551304018, "post_id": 54914667, "comment_id": 96596317, "body": "You &#39;re right, the autocompletion failed, thanks"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1551304570, "post_id": 54914667, "comment_id": 96596559, "body": "The typos are off-topic in SO since they do not contribute anything to the community, what you should do is point it out in a comment and mark it to close it if you can."}, {"owner": {"reputation": 48, "user_id": 1467844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSQFn.png?s=128&g=1", "display_name": "CanOSpam", "link": "https://stackoverflow.com/users/1467844/canospam"}, "edited": false, "score": 0, "creation_date": 1551304604, "post_id": 54914667, "comment_id": 96596574, "body": "Happy to help! My first assumption if a signal/slot isn&#39;t working is that there&#39;s a typo because Qt is pretty unhelpful with that."}, {"owner": {"reputation": 48, "user_id": 1467844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSQFn.png?s=128&g=1", "display_name": "CanOSpam", "link": "https://stackoverflow.com/users/1467844/canospam"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1551304637, "post_id": 54914667, "comment_id": 96596585, "body": "@eyllanesc I&#39;ll do that next time, thanks."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 77, "user_id": 11126897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hfkL5.jpg?s=128&g=1", "display_name": "black_gay", "link": "https://stackoverflow.com/users/11126897/black-gay"}, "edited": false, "score": 1, "creation_date": 1551304728, "post_id": 54914667, "comment_id": 96596611, "body": "@black_gay The disadvantage of the old connection style is that connection errors are not reported at compile time, so Qt recommends using the new syntax"}], "tags": [], "owner": {"reputation": 48, "user_id": 1467844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSQFn.png?s=128&g=1", "display_name": "CanOSpam", "link": "https://stackoverflow.com/users/1467844/canospam"}, "is_accepted": true, "score": 0, "last_activity_date": 1551302345, "creation_date": 1551302345, "answer_id": 54914667, "question_id": 54913129, "link": "https://stackoverflow.com/questions/54913129/passing-a-variable-through-signal-and-slot-system-in-qt/54914667#54914667", "title": "Passing a variable through signal and slot system in Qt", "body": "<p>I think you have a typo in your connect statement. Qt can be frustrating that way. <code>SIGNAL(textUpdateSign(std::string )</code> should probably be <code>SIGNAL(textUpdateSignal(std::string )</code>.</p>\n"}], "owner": {"reputation": 77, "user_id": 11126897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hfkL5.jpg?s=128&g=1", "display_name": "black_gay", "link": "https://stackoverflow.com/users/11126897/black-gay"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1551304639, "accepted_answer_id": 54914667, "answer_count": 1, "score": -1, "last_activity_date": 1551305746, "creation_date": 1551295809, "last_edit_date": 1551305746, "question_id": 54913129, "link": "https://stackoverflow.com/questions/54913129/passing-a-variable-through-signal-and-slot-system-in-qt", "closed_reason": "Not suitable for this site", "title": "Passing a variable through signal and slot system in Qt", "body": "<p>So I want to pass a std::string variable through the signal and slot system in Qt; I have a class on heap called RecordTalks which emits a signal when received message from chat is longer than 25 signs.\nThe code is as follows:</p>\n\n<pre><code>#include \"recordtalks.h\"\n\n// records chat to files RecordTalks::RecordTalks(QObject *parent) {\n\n}\n\nRecordTalks::~RecordTalks() {\n    std::cout &lt;&lt; \"destructor\" &lt;&lt; \"\\n\"; }\n\nvoid RecordTalks::run(QString data) {\n    std::cout &lt;&lt; \"&gt;&gt;&gt; whole data is: \" &lt;&lt; data.toStdString() &lt;&lt;  \" ------------------\\n\";\n    std::string text = data.toStdString();\n\n    extractNick(text);\n    extractRoom(text);\n    //std::cout &lt;&lt; \"save in recordTalks is: \" &lt;&lt; save &lt;&lt; \"\\n\";\n    if((nick.size()!=0 &amp;&amp; room.size()!=0))\n    {\n        extractText(data);\n        pushToVector(removeDigitsAndSpecials(nick), subText);\n    }\n    else\n       return; }\n\nvoid RecordTalks::run() {\n    save=false;\n    save = console.saveNowState();\n    if(save==true)\n    {\n        saveToFile(allTexts, \"BOT\"); //trigger line saving to file\n        file.close();\n        removeDuplicatedNicks();\n        createNickFiles(nicks_v);\n        match_nicks_and_allTexts(allTexts);\n        closeNickFiles();\n\n        nicks_v.clear();\n        nickAndFile_pair_vec.clear();\n        text.clear();\n        allTexts.clear();\n        nick.clear();\n        room.clear();\n        subText.clear();\n        save=false;\n    } \n}\n\nvoid RecordTalks::extractText(QString &amp;data) {\n    std::string text = data.toStdString(); // tu zmiana\n    size_t pos, pos2;\n\n    if((pos=text.find(\"PRIVMSG #\"))!=std::string::npos)\n    {\n        if((pos2=text.find(\":\",pos))!=std::string::npos)\n        {\n            subText = text.substr(pos2+1, text.size()-(pos2+1)  );\n            if((pos=subText.find(\"\\u0001ACTION \"))!=std::string::npos)\n            {\n                subText = subText.substr(pos+8 , subText.size()-3-(pos+8));\n            }\n            else\n                std::cout &lt;&lt; \"subText: \" &lt;&lt; subText  &lt;&lt; \"\\n\";\n         }\n    }\n    else  //if nothing to write to log:\n    {\n        return ;\n    } \n}\n\nvoid RecordTalks::extractNick(std::string &amp;text) {\n    Extract_NickAndRoom e;\n    QString temp = QString::fromStdString(text);\n    nick = e.extractNick(temp);\n    //std::cout &lt;&lt; \"nick is: \" &lt;&lt; nick &lt;&lt; \"\\n\";\n\n}\n\nvoid RecordTalks::extractRoom(std::string &amp;text) {\n    Extract_NickAndRoom e;\n    QString temp = QString::fromStdString(text);\n    room = e.extractRoom(temp);\n    //std::cout &lt;&lt; \"room is: \" &lt;&lt; room &lt;&lt; \"\\n\"; }\n\n\nvoid RecordTalks::pushToVector(std::string nick, std::string &amp;subText)\n//general vector with texts {\n    if(subText.size()&gt;25 ) //if line of text from irc is bigger than 25 signs\n    {\n        std::pair&lt;std::string, std::string&gt; para = std::make_pair(nick, subText);\n        allTexts.push_back(para);  // pair --&gt; vector\n\n\n        emit textUpdateSignal(subText);\n        std::cout &lt;&lt; \"EMITTTTTTTTTTTTTTTTTTT \" &lt;&lt; \"\\n\";\n        //std::cout &lt;&lt; \"&gt;&gt;&gt; subText: \" &lt;&lt; subText &lt;&lt; \"  nick: \" &lt;&lt; nick &lt;&lt; \" &lt;&lt;&lt;\" &lt;&lt; \"\\n\";\n    }\n\n    if(allTexts.size()==60)\n    {\n        saveToFile(allTexts, \"BOT\"); //trigger line saving to file\n        file.close();\n        removeDuplicatedNicks();\n        createNickFiles(nicks_v);\n        match_nicks_and_allTexts(allTexts);\n        closeNickFiles();\n\n        nicks_v.clear();\n        nickAndFile_pair_vec.clear();\n        text.clear();\n        allTexts.clear();\n        nick.clear();\n        room.clear();\n        subText.clear();\n        save=false;\n    } \n}\n\nvoid RecordTalks::saveToFile( std::vector&lt; std::pair&lt;std::string,\nstd::string&gt; &gt; &amp;allTexts, std::string nickFileName) {\n    std::string address = \"D:\\\\Qt_workspace\\\\weatherBot\\\\logs\\\\\" + nickFileName + \".txt\";\n    file.open(address, std::ios::out | std::ios::app);\n\n    for (int i = 0; i &lt; allTexts.size(); ++i)\n    {\n        file &lt;&lt; allTexts[i].second; //writes text to file, not the nicks\n    } \n}\n\n\n\n\nvoid RecordTalks::createNickFiles(std::vector&lt;std::string&gt; &amp;nicks_v) {\n   /* make vector of pair nick and file, so we can identify the file name and then\n       put text-matching-to-file-nick with file name */\n    for (int i = 0; i &lt; nicks_v.size(); ++i)\n    {\n        std::fstream file2(\"D:\\\\Qt_workspace\\\\weatherBot\\\\logs\\\\\"+ nicks_v[i] + \".txt\",\n                           std::ios::out | std::ios::app);\n        std::pair&lt;std::string, std::fstream&gt; nickAndFile_pair;\n        nickAndFile_pair = std::make_pair(removeDigitsAndSpecials(nicks_v[i]),\n                                          std::move(file2));\n        nickAndFile_pair_vec.push_back(std::move(nickAndFile_pair));\n    } \n}// nicks_v[i] put inside function removeDigitsAndSpecials(std::string&amp; nick)\n\n\nvoid RecordTalks::match_nicks_and_allTexts(std::vector&lt;\nstd::pair&lt;std::string, std::string&gt; &gt; allTexts) {\n    for (int i = 0; i &lt; nickAndFile_pair_vec.size(); ++i)\n    {\n        for (int j = 0; j &lt; allTexts.size(); ++j)\n        {\n            if(nickAndFile_pair_vec[i].first == allTexts[j].first)\n            {\n                nickAndFile_pair_vec[i].second &lt;&lt; allTexts[j].second;\n                //nickAndFile_pair_vec[j].second.flush();\n            }\n        }\n    }\n\n    std::cout &lt;&lt; \"allTexts size in match_nicks_and_allTexts is: \";\n    std::cout &lt;&lt; allTexts.size() &lt;&lt; \"\\n\"; \n}\n\n\nvoid RecordTalks::removeDuplicatedNicks() {\n    std::vector&lt; std::pair&lt;std::string, std::string&gt; &gt; temp = allTexts;\n    std::cout &lt;&lt; \"temp size: \" &lt;&lt; temp.size() &lt;&lt; \"\\n\";\n\n    for (int i = 0; i &lt; temp.size(); ++i)\n    {\n        for (int j = i+1; j &lt; temp.size(); ++j)\n        {\n            if(temp[i].first == temp[j].first  &amp;&amp;  i+1&lt; temp.size())\n            {\n                temp.erase(temp.begin()+j);\n                j--;\n            }\n        }\n    }\n\n\n    for (int i = 0; i &lt; temp.size(); ++i)\n    {\n        nicks_v.push_back(temp[i].first);\n    }\n    std::cout &lt;&lt; \"nicks_v.size: \" &lt;&lt; nicks_v.size() &lt;&lt; \"\\n\";\n\n}\n\nvoid RecordTalks::closeNickFiles() //closes separate nick files {\n    for (int i = 0; i &lt; nickAndFile_pair_vec.size(); ++i)\n    {\n        nickAndFile_pair_vec[i].second.close();\n    }\n    std::cout &lt;&lt; \"Files closed...\" &lt;&lt; \"\\n\"; }\n\n\nstd::string RecordTalks::removeDigitsAndSpecials(std::string&amp; nick) {\n    for (int i = 0; i &lt; nick.size(); ++i)\n    {\n        if(std::isalpha(nick[i]))\n        {\n\n        }\n\n        else if(std::isdigit(nick[i]))\n        {\n             nick.erase(nick.begin()+i);\n             std::cout &lt;&lt; \"removing: \" &lt;&lt; nick[i] &lt;&lt; \"\\n\";\n             i--;\n        }\n        else\n        {\n            nick.erase(nick.begin()+i);\n            std::cout &lt;&lt; \"removing: \" &lt;&lt; nick[i] &lt;&lt; \"\\n\";\n            i--;\n        }\n    }\n    return nick; \n}\n</code></pre>\n\n<p>Then in another class i have the connect function. When i write it in this form: </p>\n\n<pre><code>connect(recordTalks, &amp;RecordTalks::textUpdateSignal, this, &amp;Socket::updateDatabaseSLOT); \n</code></pre>\n\n<p>the slot receives the signal. But when i write the function this way:</p>\n\n<pre><code>connect(recordTalks, SIGNAL(textUpdateSign(std::string)), this, \n        SLOT(updateDatabaseSLOT(std::string)));\n</code></pre>\n\n<p>the Slot is not fired. So my question is, what is the reason of that. In other cases the latter version works just fine.</p>\n\n<p>The slot looks like this:</p>\n\n<pre><code>void Socket::updateDatabaseSLOT(std::string textUpdate)\n{\n    std::cout &lt;&lt; \"updates text: &lt;&lt; textUpdate &lt;&lt; \"\\n\";\n\n     database.push_back(textUpdate);\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-precedence"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1551296112, "post_id": 54913115, "comment_id": 96592785, "body": "Everybody who wrote code where it matters should be at least penalized."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1551296198, "post_id": 54913115, "comment_id": 96592817, "body": "I&#39;m trying to understand how a unary postfix operator could be right associative. It makes my brain hurt."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1551296462, "post_id": 54913115, "comment_id": 96592942, "body": "@FredLarson yea <code>ptr[i]++</code> would work pretty strange way"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551297729, "post_id": 54913115, "comment_id": 96593504, "body": "You can always just go to the source: <a href=\"https://timsong-cpp.github.io/cppwp/expr.post#1.sentence-1\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/expr.post#1.sentence-1</a>"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1551298108, "post_id": 54913115, "comment_id": 96593691, "body": "As I understand it, associativity is a property of binary operators. Perhaps you could give an example expression that would have different (and sane!) evaluations for different associativities of the postfix increment operator?"}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "edited": false, "score": 0, "creation_date": 1551304013, "post_id": 54913619, "comment_id": 96596312, "body": "Thank you first. Second: The very book on O&#39;relleiy <a href=\"https://learning.oreilly.com/library/view/c-primer-fifth/9780133053043/ch04lev1sec12.html#ch04lev1sec12\" rel=\"nofollow noreferrer\">learning.oreilly.com/library/view/c-primer-fifth/97801330530&zwnj;&#8203;43/&hellip;</a>&quot; is with the same mistake. It is not only about Postfix incr/decr but also about explicit cast..."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 5, "last_activity_date": 1551298808, "last_edit_date": 1551298808, "creation_date": 1551297749, "answer_id": 54913619, "question_id": 54913115, "link": "https://stackoverflow.com/questions/54913115/is-postfix-increment-and-decrement-left-to-right-associative-or-the-contrary/54913619#54913619", "title": "Is postfix increment and decrement left to right associative or the contrary?", "body": "<p><a href=\"https://timsong-cpp.github.io/cppwp/n3337/gram.expr\" rel=\"noreferrer\">The C++ grammar</a> defines a postfix expression like this:</p>\n\n<pre><code>postfix-expression:\n    primary-expression\n    ...\n    postfix-expression ++\n    ....\n</code></pre>\n\n<p>In parsing <code>a ++ ++</code>, <code>a</code> is a primary-expression, so <code>a ++</code> is a postfix-expression. The final <code>++</code> applies to the result of that postfix-expression.</p>\n\n<p>In short, <code>++</code> groups left to right.</p>\n\n<p>The same thing applies to all of what we usually think of as postfix operators: they apply to a postfix-expression, so they group left to right.</p>\n\n<p>As mentioned in a comment, going the other way would make <code>ptr[i]++</code> rather funky.</p>\n\n<p>Looking at a (probably illegal) PDF version of that book that I found online, I suspect the the entries for postfix++ and postfix-- are cut-and-paste typos. Both of those operators are supposedly described on page 147, as are prefix++ and prefix--, but the only discussion there is about prefix++ and prefix--.</p>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "edited": false, "score": 0, "creation_date": 1551302850, "post_id": 54913731, "comment_id": 96595809, "body": "I said Postfix increment and decrement. Artur I have the &quot;C++ Primer, Fifth Edition Stanley B. Lippman Jos&#233;e Lajoie Barbara E. Moo&quot; did you check it? on page 228 not 288?"}, {"owner": {"reputation": 6250, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "reply_to_user": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "edited": false, "score": 0, "creation_date": 1551328001, "post_id": 54913731, "comment_id": 96602403, "body": "Checked it many times. Lippman 5th edition page 228 is about &#39;6.3.3 Returning pointer to an array&#39; and in 4th edition of the same book on same page there is &quot;7.1.2 Function Parameter List&quot; section. Are you saying about english versions of the book?"}, {"owner": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "edited": false, "score": 0, "creation_date": 1551378947, "post_id": 54913731, "comment_id": 96628743, "body": "Yes. the book is in English."}, {"owner": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "edited": false, "score": 0, "creation_date": 1551379120, "post_id": 54913731, "comment_id": 96628828, "body": "What is its original language?"}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "edited": false, "score": 0, "creation_date": 1551422592, "post_id": 54913731, "comment_id": 96641834, "body": "would you find the table of &quot;operators and precedence and associativity&quot; in your book?"}, {"owner": {"reputation": 6250, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "edited": false, "score": 0, "creation_date": 1551426011, "post_id": 54913731, "comment_id": 96643092, "body": "4th edition (isbn: 0201721481) page 170, 171 and in 5th edition (isbn13: 978-0-321-71411-4, isbn10: 0-321-71411-3 ) pages 166,167."}], "tags": [], "owner": {"reputation": 6250, "user_id": 488700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620a68b8a42a5af384929133de068c63?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/488700/artur"}, "is_accepted": false, "score": -1, "last_activity_date": 1551328036, "last_edit_date": 1551328036, "creation_date": 1551298350, "answer_id": 54913731, "question_id": 54913115, "link": "https://stackoverflow.com/questions/54913115/is-postfix-increment-and-decrement-left-to-right-associative-or-the-contrary/54913731#54913731", "title": "Is postfix increment and decrement left to right associative or the contrary?", "body": "<p>Prefix operators are Right to Left associative:</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/operator_precedence</a></p>\n\n<p>Neither C++ Primer 5th edition from Prata nor from Lippman have any operator priority table on page 228.</p>\n"}, {"tags": [], "owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "is_accepted": false, "score": 0, "last_activity_date": 1551306869, "creation_date": 1551306869, "answer_id": 54915589, "question_id": 54913115, "link": "https://stackoverflow.com/questions/54913115/is-postfix-increment-and-decrement-left-to-right-associative-or-the-contrary/54915589#54915589", "title": "Is postfix increment and decrement left to right associative or the contrary?", "body": "<p>There's no book safe from Errata. Each version of a book adds some enhancements and corrects some mistakes. The author is always appreciating Errata reporting. Anyway: The post-fix increment and -decrement are Left-To-Right associative.</p>\n\n<pre><code>int x = 5;\nx++;\n</code></pre>\n\n<p>As you can see from the expression above: the operand <code>x</code>is at the <code>lhs</code> of the operator <code>++</code> thus you easily can understand it.</p>\n\n<pre><code>++x;\n</code></pre>\n\n<p>Now the operand <code>x</code> is on the right thus Pre-increment/decrement is Right-To-Left.</p>\n"}], "owner": {"reputation": 590, "user_id": 9154738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36980213b38a6581d264e31ad3ee585a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex24", "link": "https://stackoverflow.com/users/9154738/alex24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 4, "answer_count": 3, "score": -1, "last_activity_date": 1551328036, "creation_date": 1551295768, "question_id": 54913115, "link": "https://stackoverflow.com/questions/54913115/is-postfix-increment-and-decrement-left-to-right-associative-or-the-contrary", "title": "Is postfix increment and decrement left to right associative or the contrary?", "body": "<p>In \"C++ primer 5th edition\" on <code>page 228</code> The table <code>Table 4.4. Operator Precedence</code> shows operators and associativitiy of operands.</p>\n\n<p>What I am confused about is in this table says that Prefix increment/decrement is Right-To-Left associative and also Postfix increment/decrement also Right-To-Left So there's the letter \"R\" that means right to left. But in <code>www.cppreference.com</code> I see that postfix increment/decrement are Left-To-Right associative.</p>\n\n<p>If someone makes things clear up through giving an example containing Compound expression, then is really appreciated.</p>\n"}, {"tags": ["c++", "postgresql", "libpq", "bytea"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551296216, "post_id": 54913100, "comment_id": 96592827, "body": "&quot;using modified code snipped from here&quot; - cobbling code together from various sources without <i>really</i> knowing what the code does/what one is doing, rarely ends well. Just saying."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9353549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff57a388c6feeeac7b0d6d56afe394d?s=128&d=identicon&r=PG", "display_name": "Eugene Kotyashov", "link": "https://stackoverflow.com/users/9353549/eugene-kotyashov"}, "edited": false, "score": 0, "creation_date": 1551366607, "post_id": 54913366, "comment_id": 96621978, "body": "Yes, you&#39;re right, I will probably go for text format transfer"}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 0, "last_activity_date": 1551296800, "creation_date": 1551296800, "answer_id": 54913366, "question_id": 54913100, "link": "https://stackoverflow.com/questions/54913100/how-to-insert-array-of-bytes-in-postgresql-table-via-libpq-c-api/54913366#54913366", "title": "How to insert array of bytes in PostgreSQL table via libpq C++ API", "body": "<p>If you want to pass a <code>bytea[]</code> in binary format, you have to use the binary array format as read by <a href=\"https://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=src/backend/utils/adt/arrayfuncs.c;h=5b2917d1594d330950524ce2d88eff27c938c433;hb=HEAD#l1259\" rel=\"nofollow noreferrer\"><code>array_recv</code></a> and written by <a href=\"https://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=src/backend/utils/adt/arrayfuncs.c;h=5b2917d1594d330950524ce2d88eff27c938c433;hb=HEAD#l1542\" rel=\"nofollow noreferrer\"><code>array_send</code></a>.</p>\n\n<p>You cannot just pass a C array.</p>\n"}], "owner": {"reputation": 3, "user_id": 9353549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff57a388c6feeeac7b0d6d56afe394d?s=128&d=identicon&r=PG", "display_name": "Eugene Kotyashov", "link": "https://stackoverflow.com/users/9353549/eugene-kotyashov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 54913366, "answer_count": 1, "score": 0, "last_activity_date": 1551343368, "creation_date": 1551295705, "last_edit_date": 1551343368, "question_id": 54913100, "link": "https://stackoverflow.com/questions/54913100/how-to-insert-array-of-bytes-in-postgresql-table-via-libpq-c-api", "title": "How to insert array of bytes in PostgreSQL table via libpq C++ API", "body": "<p>I am trying to update table</p>\n\n<pre><code>CREATE TABLE some_table\n(\n    id integer NOT NULL,\n    client_fid bigint NOT NULL,\n    index bytea[],\n    update_time timestamp without time zone\n)\nWITH (\n    OIDS = FALSE\n</code></pre>\n\n<p>using modified code snipped from here <a href=\"https://stackoverflow.com/questions/49156762/how-to-insert-text-array-in-postgresql-table-in-binary-format-using-libpq\">How to insert text array in PostgreSQL table in binary format using libpq?</a></p>\n\n<pre><code>#define BYTEAARRAYOID 1001\n#define BYTEAOID 17\n</code></pre>\n\n<p>Here is a pgvals_t structure definition</p>\n\n<pre><code>struct pgvals_t\n{\n    /* number of array dimensions */\n    int32_t ndims;\n    /* flag describing if array has NULL values */\n    int32_t hasNull;\n    /* Oid of data stored in array. In our case is 25 for TEXT */\n    Oid oidType;\n    /* Number of elements in array */\n    int32_t totalLen;\n    /* Not sure for this one. \n     I think it describes dimensions of elements in case of arrays storing arrays */\n    int32_t subDims;\n\n    /* Here our data begins */\n\n} __attribute__ ((__packed__));\n</code></pre>\n\n<p>I've removed dataBegins pointer from struct as it affects data layout in memo</p>\n\n<pre><code>std::size_t nElems = _data.size();\n        uint32_t valsDataSize = sizeof(prx::pgvals_t) + sizeof(int32_t) * nElems +\n                            sizeof(uint8_t)*nElems;\n\n        void *pData = malloc(valsDataSize);\n        prx::pgvals_t* pvals = (prx::pgvals_t*)pData;\n        /* our array has one dimension */\n        pvals-&gt;ndims = ntohl(1);\n        /* our array has no NULL elements */\n        pvals-&gt;hasNull = ntohl(0);\n        /* type of our elements is bytea */\n        pvals-&gt;oidType = ntohl(BYTEAOID);\n        /* our array has nElems elements */\n        pvals-&gt;totalLen = ntohl(nElems);\n        pvals-&gt;subDims = ntohl(1);\n\n        int32_t elemLen = ntohl(sizeof(uint8_t));\n        std::size_t offset = sizeof(elemLen) + sizeof(_data[0]);\n        char * ptr = (char*)(pvals + sizeof(prx::pgvals_t));\n        for(auto byte : _data){\n\n            memcpy(ptr, &amp;elemLen, sizeof(elemLen));\n            memcpy(ptr + sizeof(elemLen), &amp;byte, sizeof(byte));\n            ptr += offset;\n        }\n\n        Oid paramTypes[] = { BYTEAARRAYOID };\n\n        char * paramValues[] = {(char* )pData};\n        int paramLengths[] =  { (int)valsDataSize };\n        int paramFormats[] = {1};\n        PGresult *res = PQexecParams(m_conn, _statement.c_str(),\n            1,             \n            paramTypes,\n            paramValues,\n            paramLengths,\n            paramFormats,\n            1\n        );\n        if (PQresultStatus(res) != PGRES_COMMAND_OK) {\n            std::string errMsg = PQresultErrorMessage(res);\n            PQclear(res);\n        throw std::runtime_error(errMsg);\n    }\n    free(pData);\n</code></pre>\n\n<p>The binary data is contained in std::vector variable and  am using the following query in a <em>_statement</em> variable of type std::string</p>\n\n<pre><code>INSERT INTO some_table \\\n(id, client_id, \\\"index\\\", update_time) \\\nVALUES \\\n (1, 2, $1, NOW())\n</code></pre>\n\n<p>Now after call to PQExecParams I am get an exception with message\n     <em>\"incorrect binary data format in bind parameter 1\"</em></p>\n\n<p>What can be the problem here?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551297954, "post_id": 54913466, "comment_id": 96593626, "body": "~Is this using index sequence combined with expression folding?~ I see now your comment"}, {"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551299922, "post_id": 54913466, "comment_id": 96594520, "body": "I see the conversion happening, but how to call Execute with such conversion? Using one more parameter pack?"}, {"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551300397, "post_id": 54913466, "comment_id": 96594721, "body": "tnx for help so far. What I wanted to do is call Execute() on all arguments. In handleImpl, I tried to use parameter pack to do this <code>Execute({(parameter&lt;Args&gt;{}(args[S]), ...)});</code>. This compile, but I am not sure if it is proper. tnx for assistance so far!"}, {"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551302102, "post_id": 54913466, "comment_id": 96595474, "body": "@GuillaumeRaciocot does not seem to compile but this works by using from original answer and converting to packed arguments <code>Execute({(convert&lt;Args&gt;{}(args[S]), ...)})</code>. Edit: actually this not work with multiple template arguments"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551302896, "post_id": 54913466, "comment_id": 96595829, "body": "@ObveyMyshka updated the example. It works for me with multiple parameter."}, {"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551304442, "post_id": 54913466, "comment_id": 96596500, "body": "@GuillaumeRaciocot I think the issue is that I am using struct to do conversion and you are using function. You are right your example do work but I did not check him properly. Sorry"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551304842, "post_id": 54913466, "comment_id": 96596652, "body": "@ObveyMyshka try my edits, I now use the struct just like you."}, {"owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "edited": false, "score": 0, "creation_date": 1551306130, "post_id": 54913466, "comment_id": 96597136, "body": "@GuillaumeRaciocot works :) tnx for your help! would upvote if i had enough points"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1551304814, "last_edit_date": 1551304814, "creation_date": 1551297214, "answer_id": 54913466, "question_id": 54913085, "link": "https://stackoverflow.com/questions/54913085/convert-c-array-to-variadic-template-argument/54913466#54913466", "title": "Convert C Array to Variadic Template Argument", "body": "<p>With variadic templates, you can have multiple packs to expand in one pattern.</p>\n\n<p>You can use that to have both an index into the <code>args</code> array and the type in the parameter pack.</p>\n\n<p>Here's the solution:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename T&gt;\nstruct Convert {\n    auto operator()(char const*) -&gt; T {\n        return T{};\n    }\n};\n\ntemplate&lt;typename... Args&gt;\nstruct Command {\n    bool execute(Args...) {\n        return true;\n    }\n\n    bool handle(int argc, char const** args) {\n        // This should be a precondition\n        if (argc != sizeof...(Args)) { \n            return false;\n        }\n\n        auto sequence = std::index_sequence_for&lt;Args...&gt;{};\n        return handleImpl(sequence, args);\n    }\n\n    template&lt;std::size_t... S&gt;\n    bool handleImpl(std::index_sequence&lt;S...&gt;, char const** args) {\n        // both S and Args expanded\n        return execute(Convert&lt;Args&gt;{}(args[S])...);\n    }\n};\n\nint main() {\n    Command&lt;int, std::string, double&gt; c;\n\n    char const* args[] = {\"1\", \"blah\", \"1.2\"};\n\n    c.handle(3, args);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/t-CmCV\" rel=\"nofollow noreferrer\">Live Example</a></p>\n"}], "owner": {"reputation": 23, "user_id": 11127010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1292a72d3022fa7b08908ea210e5a?s=128&d=identicon&r=PG&f=1", "display_name": "Obvey Myshka", "link": "https://stackoverflow.com/users/11127010/obvey-myshka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 54913466, "answer_count": 1, "score": 2, "last_activity_date": 1551304814, "creation_date": 1551295656, "question_id": 54913085, "link": "https://stackoverflow.com/questions/54913085/convert-c-array-to-variadic-template-argument", "title": "Convert C Array to Variadic Template Argument", "body": "<p>I have been exploring CPP and would like to know if something as this is possible:</p>\n\n<p>A variadic template class that converts an array of N elements to a function call with a variadic list of arguments.</p>\n\n<p>For example, if given an array such</p>\n\n<pre><code>argc = 3, args = { \"hello\", \"10\", \"0.5\" }\n</code></pre>\n\n<p>my wish is to be able to call like this</p>\n\n<pre><code>Something&lt;std::string, int, float&gt;(3, args);\n</code></pre>\n\n<p>this will do some processing to call function with the converted arguments</p>\n\n<p>Previous resources I have explored are trying to use C++14's expression folding or trying to use a recursive template. I think that one must use a parameter pack and some definition to convert this. Here is my code so far</p>\n\n<p>Assuming want to convert array of C-strings to argument, I have created many conversion structs</p>\n\n<p>Here I have a struct to convert char* (the element of array) to some unknown argument</p>\n\n<pre><code>// generic conversion\ntemplate &lt;typename T&gt;\nstruct convert {\n  T operator()(char const*) const;\n};\n\n// specific convert char* to std::string\ntemplate &lt;&gt;\nstruct convert&lt;std::string&gt; {\n  std::string operator()(char const* str) const {\n    return std::string(str);\n  }\n};\n\n// many different convert&lt;&gt; structs for different types...\n</code></pre>\n\n<p>Now here is where the issue lives. In this class I try to build representation of arbitrary converter of N elements of C-string</p>\n\n<pre><code>class Handler {\npublic:\n  virtual bool Handle(int argc, char const** argv);\n};\n\ntemplate &lt;typename... Args&gt;\nclass Command : public Handler {\nprotected:\n  bool Execute(Args... args);\n\npublic:\n  bool Handle(int argc, char const** argv) override {\n    if (argc != sizeof...(Args))\n      return false;\n    // HELP call convert&lt;&gt; on each type in args then call Execute();\n  }\n};\n</code></pre>\n\n<p>For mine HELP, I explore other question to try parameter unpack or expression folding, but it do not like him.</p>\n\n<p>For example one implementation of command is</p>\n\n<pre><code>class Help : public Command&lt;std::string&gt; {\npublic:\n  bool Execute(std::string sub) {\n\n  }\n};\n</code></pre>\n\n<p>I try also to use CPP14 index sequence, but mine issue is for having two \"arrays\" in index sequence to iterate. char** and variadic templates.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1551295370, "post_id": 54912893, "comment_id": 96592463, "body": "Seems like this is an algorithm question.  The model for S.O. is for you to submit a small code snippet that is giving you trouble and to ask for help on that section of the code.  Algorithms are covered at <a href=\"https://cs.stackexchange.com/help/on-topic\">cs.stackexchange.com/help/on-topic</a>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551296410, "post_id": 54912893, "comment_id": 96592917, "body": "To be honest, this sounds like an <b>extremely</b> difficult problem for a self-confessed amateur. I think most professionals would regard this as challenging. Finding an algorithm that &#39;saves the most space&#39; is the challenging part."}, {"owner": {"reputation": 45, "user_id": 10107873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e835d18ecb99a5b58d38a23b71ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan S", "link": "https://stackoverflow.com/users/10107873/jordan-s"}, "edited": false, "score": 0, "creation_date": 1551299259, "post_id": 54912893, "comment_id": 96594212, "body": "That is enough to be considered helpful, thank you! I will work to learn about algorithms and when I come up with some code that gets me close to my desired program I will ask in that forum for more help."}], "owner": {"reputation": 45, "user_id": 10107873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e835d18ecb99a5b58d38a23b71ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan S", "link": "https://stackoverflow.com/users/10107873/jordan-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551295253, "creation_date": 1551294911, "last_edit_date": 1551295253, "question_id": 54912893, "link": "https://stackoverflow.com/questions/54912893/patterning-cout-by-inches-feet-of-pallets-c-help", "title": "Patterning COUT by inches/feet of pallets (C++ help)", "body": "<p>doin a little project to try and better my C++ knowledge, I might be doing it wrong and any guidance in the right direction would be more than appreciated. Just a heads up I am an amateur when it comes to C++..</p>\n\n<p>What im trying to do: \nMake a program that calculates pallets in a commercial truck, our standard truck dimensions are 96 inches (or 8 ft) in width and 636 inches (or 53 ft) in length.</p>\n\n<p>Pallet sizes can vary, and I need two dims from them (length/width). </p>\n\n<p>When it comes to standard pallets (40 inches by 48 inches) you can fit 30 pallets total: 15 of them side by side.</p>\n\n<p>If one pallet is 53x50 and one is 47x51, these two wouldn't fit together because it exceeds the limit of 96 OR less inches.</p>\n\n<p>I need this program to make it so it adds all different types of sizes and shows it in a rectangle \"cout\" format by placing pallets together to fit in the way that saves the most space. </p>\n\n<p>I assume this would require if, then statements when outputting dims into the \"trailer\"</p>\n\n<p>Example:</p>\n\n<p>If I had 7 pallets total with the following dims (in inches):</p>\n\n<p>101x57, 45x31, 101x43, 107x43, 124x61, 96x18, 56x49</p>\n\n<p>Out put in the box \"trailer\" would be:</p>\n\n<p>EDIT: edited output of the trailer example</p>\n\n<pre><code>--------------------\n| 101x57     45x31 |\n|                  |\n|           107x43 |\n|                  |\n| 101x43           |\n|            96x18 |\n|                 \n| 124x61     56x49 |   \n|                  |\n|                  |\n|                  |\n|                  |\n|                  |\n--------------------\n</code></pre>\n\n<p>This is the most efficient way to pattern them with saving the most space.</p>\n\n<p>// CODE BELOW: I know its not much, but I just started and I'm already stuck :/</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\ndouble p1d1, p1d2, p2d1, p2d2, p3d1, p3d2, p4d1, p4d2, p5d1, p5d2, p6d1, p6d2, p7d1, p7d2, p8d1, p8d2;\ndouble palletSize2;\n\nconst double pRSize = 96.001;\n\nint main()\n{\n\n    cout &lt;&lt; \"Partial Counter 1.0\" &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter pallet sizes one at a time \" &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #1 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dims: \";\n    cin &gt;&gt; p1d1 &gt;&gt; p1d2;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p1d2;\n    cout &lt;&lt; \"Pallet #1 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #2 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p2d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p2d2;\n    cout &lt;&lt; \"Pallet #2 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #3 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p3d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p3d2;\n    cout &lt;&lt; \"Pallet #3 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #4 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p4d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p4d2;\n    cout &lt;&lt; \"Pallet #4 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #5 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p5d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p5d2;\n    cout &lt;&lt; \"Pallet #5 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #6 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p6d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p6d2;\n    cout &lt;&lt; \"Pallet #6 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #7 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p7d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p7d2;\n    cout &lt;&lt; \"Pallet #7 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter Pallet #8 dims\" &lt;&lt; endl;\n    cout &lt;&lt; \"Dim 1: \";\n    cin &gt;&gt; p8d1;\n    cout &lt;&lt; \"Dim 2: \";\n    cin &gt;&gt; p8d2;\n    cout &lt;&lt; \"Pallet #8 Dims = \" &lt;&lt; p1d1 &lt;&lt; \"x\" &lt;&lt; p1d2 &lt;&lt; endl;\n\n\n    cout &lt;&lt; \" ------------------------------\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \"|                              |\" &lt;&lt; endl;\n    cout &lt;&lt; \" -----------------------------\" &lt;&lt; endl;\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "duktape"], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 2, "last_activity_date": 1551295651, "creation_date": 1551295651, "answer_id": 54913082, "question_id": 54912650, "link": "https://stackoverflow.com/questions/54912650/how-create-inserted-object-use-duktape/54913082#54913082", "title": "How create inserted object use duktape?", "body": "<p>I put the following code into the Duktape <code>hello</code> example and it produced the right result:</p>\n\n<pre><code>auto obj_idx = duk_push_object( ctx );\n\nduk_push_string( ctx, \"key\" );\nduk_push_string( ctx, \"value\" );\nduk_put_prop( ctx, obj_idx );\nduk_push_string( ctx, \"key2\" );\nduk_push_string( ctx, \"value\" );\nduk_put_prop( ctx, obj_idx );\n\nauto nested_idx = duk_push_object(ctx);\nduk_push_int(ctx, 2019);\nduk_put_prop_string(ctx, nested_idx, \"year\");\n\nduk_put_prop_string(ctx, obj_idx, \"nested\");\n\nduk_put_global_string( ctx, \"obj\" );\n\nduk_eval_string(ctx, \"print(JSON.stringify(obj))\");\n</code></pre>\n\n<p>The key thing to remember is that <code>duk_put_prop</code> and <code>duk_put_prop_string</code> take one value off the stack, while <code>duk_push_*</code> pushes a value on the stack.</p>\n"}], "owner": {"reputation": 121, "user_id": 8422277, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YqyG1Q-VQdY/AAAAAAAAAAI/AAAAAAAAABY/iSKK_PzbT0Q/photo.jpg?sz=128", "display_name": "  kirill-782", "link": "https://stackoverflow.com/users/8422277/kirill-782"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 54913082, "answer_count": 1, "score": -2, "last_activity_date": 1551295651, "creation_date": 1551293892, "question_id": 54912650, "link": "https://stackoverflow.com/questions/54912650/how-create-inserted-object-use-duktape", "title": "How create inserted object use duktape?", "body": "<p>Have this code:</p>\n\n<pre><code>auto obj_idx = duk_push_object( ctx );\n\nduk_push_string( ctx, \"key\" );\nduk_push_string( ctx, \"value\" );\nduk_put_prop( ctx, obj_idx );\nduk_push_string( ctx, \"key2\" );\nduk_push_string( ctx, \"value\" );\nduk_put_prop( ctx, obj_idx );\n\nduk_put_global_string( ctx, \"obj\" );\n</code></pre>\n\n<p>How insert new object in obj? No matter how hard I try to insert a nested object, it doesn\u2019t work. Either crash or not inserted.</p>\n\n<pre><code>{\n\"key\": \"value\",\n\"key2\": \"value\",\n\"newObj\": {\n    \"newKey\": \"value\"\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1551296433, "post_id": 54912640, "comment_id": 96592927, "body": "First find the <code>opencv2</code> folder in your include directories. Then see if the file <code>highgui.hpp</code> exists."}, {"owner": {"reputation": 1160, "user_id": 10809912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JKD6.jpg?s=128&g=1", "display_name": "Rifat Alptekin &#199;etin", "link": "https://stackoverflow.com/users/10809912/rifat-alptekin-%c3%87etin"}, "edited": false, "score": 0, "creation_date": 1551296608, "post_id": 54912640, "comment_id": 96593007, "body": "can you try include with full path? like #include &lt;c:/../opencv2/highgui.hpp&gt;"}, {"owner": {"reputation": 347, "user_id": 10018194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nLoEGLQJ0Tk/AAAAAAAAAAI/AAAAAAAAE28/SBEgKEU8JqA/photo.jpg?sz=128", "display_name": "danyialKhan", "link": "https://stackoverflow.com/users/10018194/danyialkhan"}, "edited": false, "score": 0, "creation_date": 1551296697, "post_id": 54912640, "comment_id": 96593051, "body": "If &#39;<b>highgui.hpp</b>&#39; exist then i have to add path to &#39;<b>bashrc</b>&#39;??"}, {"owner": {"reputation": 347, "user_id": 10018194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nLoEGLQJ0Tk/AAAAAAAAAAI/AAAAAAAAE28/SBEgKEU8JqA/photo.jpg?sz=128", "display_name": "danyialKhan", "link": "https://stackoverflow.com/users/10018194/danyialkhan"}, "edited": false, "score": 0, "creation_date": 1551297102, "post_id": 54912640, "comment_id": 96593241, "body": "I tried to include full path in <b>#include &lt;/home/danyial/opencv/modules/highgui/include/opencv2/highgu&zwnj;&#8203;i.hpp&gt;</b> but now it throws another error:"}, {"owner": {"reputation": 347, "user_id": 10018194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nLoEGLQJ0Tk/AAAAAAAAAAI/AAAAAAAAE28/SBEgKEU8JqA/photo.jpg?sz=128", "display_name": "danyialKhan", "link": "https://stackoverflow.com/users/10018194/danyialkhan"}, "edited": false, "score": 0, "creation_date": 1551297170, "post_id": 54912640, "comment_id": 96593272, "body": "In file included from main.cpp:1:0: <b>/home/danyial/opencv/modules/highgui/include/opencv2/highgui&zwnj;&#8203;.hpp:46:28: fatal error: opencv2/core.hpp: No such file or directory  #include &quot;opencv2/core.hpp&quot;</b>                             ^ compilation terminated."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1551297526, "post_id": 54912640, "comment_id": 96593432, "body": "You need to add <code>&#47;home&#47;danyial&#47;opencv&#47;modules&#47;highgui&#47;include&#47;</code> to your compiler include paths. Related: <a href=\"https://stackoverflow.com/questions/12654013/how-to-make-g-search-for-header-files-in-a-specific-directory/12654056\" title=\"how to make g search for header files in a specific directory\">stackoverflow.com/questions/12654013/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 13161299, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f9e69229f92bfee211b44a7966f25139?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/13161299/pedro"}, "is_accepted": false, "score": 1, "last_activity_date": 1585638745, "last_edit_date": 1585638745, "creation_date": 1585626597, "answer_id": 60943162, "question_id": 54912640, "link": "https://stackoverflow.com/questions/54912640/main-cpp110-fatal-error-opencv2-highgui-hpp-no-such-file-or-directory/60943162#60943162", "title": "main.cpp:1:10: fatal error: opencv2/highgui.hpp: No such file or directory", "body": "<p>In the compiling command add a \"4\" next to \"opencv\" (or the number of your version of OpenCV):</p>\n\n<pre><code>$ g++ main.cpp -o output \\`pkg-config --cflags --libs opencv4\\`\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 10018194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nLoEGLQJ0Tk/AAAAAAAAAAI/AAAAAAAAE28/SBEgKEU8JqA/photo.jpg?sz=128", "display_name": "danyialKhan", "link": "https://stackoverflow.com/users/10018194/danyialkhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3289, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1585638745, "creation_date": 1551293867, "question_id": 54912640, "link": "https://stackoverflow.com/questions/54912640/main-cpp110-fatal-error-opencv2-highgui-hpp-no-such-file-or-directory", "title": "main.cpp:1:10: fatal error: opencv2/highgui.hpp: No such file or directory", "body": "<p>I have install opencv in ubuntu 18.04 and it was installed successfully, I have tried this command:\n<strong>$ pkg-config --modversion opencv</strong>\n and its output is: <strong>4.0.1-dev</strong>\nafter this i have tried to rum c++ code:</p>\n\n<pre><code>#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main( int argc, char** argv ) {\n\n  cv::Mat image;\n  image = cv::imread(\"sample.jpeg\" , CV_LOAD_IMAGE_COLOR);\n\n  if(! image.data ) {\n      std::cout &lt;&lt;  \"Could not open or find the image\" &lt;&lt; std::endl ;\n      return -1;\n    }\n\n  cv::namedWindow( \"Display window\", cv::WINDOW_AUTOSIZE );\n  cv::imshow( \"Display window\", image );\n\n  cv::waitKey(0);\n  return 0;\n}\n</code></pre>\n\n<p>with this command: :<strong>~/cpp_test$ g++ main.cpp -o output <code>pkg-config --cflags --libs opencv</code></strong>\nbut it throws a fatal error: </p>\n\n<pre><code>main.cpp:1:10: fatal error: opencv2/highgui.hpp: No such file or directory\n #include &lt;opencv2/highgui.hpp&gt;\n          ^~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>I have reviewed some similar questions but i did not find my answer, i think this is because of environment variables and i do not know which variables i have to set.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1551293912, "post_id": 54912617, "comment_id": 96591794, "body": "<code>AnimalData data; data.PrintAll();</code> -&gt; <code>AnimalData::PrintAll();</code>?"}, {"owner": {"reputation": 4173, "user_id": 480304, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/803531d777bada5c2d8f27a8b42c2b62?s=128&d=identicon&r=PG", "display_name": "Flinsch", "link": "https://stackoverflow.com/users/480304/flinsch"}, "edited": false, "score": 0, "creation_date": 1551343607, "post_id": 54912617, "comment_id": 96608142, "body": "Please let your teacher know that he has to learn how to give proper names to functions, variables, etc."}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 5343120, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6ko5d.png?s=128&g=1", "display_name": "Harrand", "link": "https://stackoverflow.com/users/5343120/harrand"}, "is_accepted": false, "score": 1, "last_activity_date": 1551294842, "creation_date": 1551294842, "answer_id": 54912873, "question_id": 54912617, "link": "https://stackoverflow.com/questions/54912617/basic-derived-class-member-override-challenge-activity-11-3/54912873#54912873", "title": "Basic derived class member override. Challenge Activity 11.3", "body": "<p>You appear to have a small misunderstanding about how to invoke methods of the superclass AnimalData in PetData:</p>\n\n<pre><code>void PrintAll(){\n      AnimalData data;\n      data.PrintAll();\n      cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n      }\n</code></pre>\n\n<p>This creates a new instance of the class AnimalData, and invokes PrintAll() on that object. Because the fullName and ageYears aren't initialised in this new object, you get the unexpected output. To invoke the same method of the superclass, the syntax is <code>Superclass::Methodname()</code>. So the correct version of <code>AnimalData::PrintAll()</code> is as follows:</p>\n\n<pre><code>void PrintAll(){\n      AnimalData::PrintAll();\n      cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n      }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551295256, "post_id": 54912878, "comment_id": 96592419, "body": "You know that when you give people false (as in incorrect) statement as a first thing, and than debunk it, people forget the debunk, but just remember the first thing? (I mean, you give the incorrect infinite recursion solution first, and I am pretty sure it is going to stuck). It is better to put it in the end of the answer, explaining why this wouldn&#39;t work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551296115, "post_id": 54912878, "comment_id": 96592787, "body": "@SergeyA Agreed and fixed."}, {"owner": {"reputation": 71, "user_id": 8605299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c462f9bc2c6e09cd19c4d917d961c4bd?s=128&d=identicon&r=PG&f=1", "display_name": "String_Chez", "link": "https://stackoverflow.com/users/8605299/string-chez"}, "edited": false, "score": 0, "creation_date": 1551299899, "post_id": 54912878, "comment_id": 96594510, "body": "This is such a useful explanation, thank you SO much"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 3, "last_activity_date": 1551297848, "last_edit_date": 1551297848, "creation_date": 1551294851, "answer_id": 54912878, "question_id": 54912617, "link": "https://stackoverflow.com/questions/54912617/basic-derived-class-member-override-challenge-activity-11-3/54912878#54912878", "title": "Basic derived class member override. Challenge Activity 11.3", "body": "<p>in </p>\n\n<pre><code>void PrintAll(){\n    AnimalData data;\n    data.PrintAll();\n    cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n}\n</code></pre>\n\n<p><code>AnimalData data;</code> creates a new, default-initialized <code>AnimalData</code> that is entirely separate from the <code>AnimalData</code> that is part of the current <code>PetData</code>. Since you want to use the <code>AnimalData</code> you already have, discard this line and remove <code>data</code> from the next. This is where things can go very wrong, so I'm going to skip directly to the correct answer: To get the <code>PrintData</code> function for <code>AnimalData</code>, you need to be explicit:</p>\n\n<pre><code>void PrintAll(){\n    AnimalData::PrintAll();\n    cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n}\n</code></pre>\n\n<h1>Why You Cannot Simply Remove <code>data</code></h1>\n\n<p>If you remove the object to invoke <code>PrintAll</code> on, <code>data</code>, </p>\n\n<pre><code>void PrintAll(){\n    PrintAll();\n    cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n}\n</code></pre>\n\n<p><code>this</code> is assumed. <code>this</code> is a <code>PetData</code>, and for <code>PetData</code> the best match for the <code>PrintAll</code> function is the current function. The result is infinite <a href=\"https://en.wikipedia.org/wiki/Recursion_(computer_science)\" rel=\"nofollow noreferrer\">recursion</a>.</p>\n\n<p>The real lesson to be learned here is to be careful when re-using an identifier. In this case, <code>PetData::PrintAll</code> shadows <code>AnimalData::PrintAll</code>, replacing it inside <code>PetData</code>. The function is not <code>virtual</code>, and you do not want <code>virtual</code> in this case, so you do not get an override. You can easily and accidentally do this with functions and variables, leading to confusion about which one is being used by the program. </p>\n\n<h1>A (possibly) Better Way to Structure This Program</h1>\n\n<p>Take advantage of both inheritance and polymorphism</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass AnimalData\n{\npublic:\n    virtual ~AnimalData() {}; // with polymorphism you must make sure the \n                              // correct destructor is always called.\n                              // Derived classes will override this \n                              // destructor whether you explicitly define \n                              // them or not. \n    void SetName(string givenName)\n    {\n        fullName = givenName;\n    }\n    void SetAge(int numYears)\n    {\n        ageYears = numYears;\n    }\n\n    // virtual function. Derived classes can, but do not have to, replace \n    // this function with a version better suited to the derived class\n    virtual void PrintAll()\n    {\n        cout &lt;&lt; \"Name: \" &lt;&lt; fullName;\n        cout &lt;&lt; \", Age: \" &lt;&lt; ageYears;\n    }\n\nprivate:\n    int ageYears;\n    string fullName;\n};\n\nclass PetData: public AnimalData\n{\npublic:\n    void SetID(int petID)\n    {\n        idNum = petID;\n    }\n\n    // Replacing virtual function. Note if the base class function is \n    // virtual, then child class overrides are automatically virtual\n    void PrintAll() override // override keyword notifies with a compiler \n                             // error if the function does NOT override when \n                             // it should.\n    {\n        AnimalData::PrintAll(); // call base class version for basic data\n        cout &lt;&lt; \", ID: \" &lt;&lt; idNum; // adding derived class-specific stuff\n    }\n\nprivate:\n    int idNum;\n};\n\n// can add WildData here to handle wild animals.\n\nint main()\n{\n    PetData userPet;\n\n    userPet.SetName(\"Fluffy\");\n    userPet.SetAge(5);\n    userPet.SetID(4444);\n    userPet.PrintAll();\n    cout &lt;&lt; endl;\n\n    // add an vanilla animal for demo\n    AnimalData generic;\n    generic.SetName(\"Fang\");\n    generic.SetAge(7);\n    generic.PrintAll();\n    cout &lt;&lt; endl;\n\n    // demonstrate polymorphism\n    AnimalData * ptr = &amp; generic;\n    ptr-&gt;PrintAll();\n    cout &lt;&lt; endl;\n\n    ptr = &amp; userPet;\n    ptr-&gt;PrintAll(); // runtime calls the correct PrintAll function\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1551294904, "creation_date": 1551294904, "answer_id": 54912890, "question_id": 54912617, "link": "https://stackoverflow.com/questions/54912617/basic-derived-class-member-override-challenge-activity-11-3/54912890#54912890", "title": "Basic derived class member override. Challenge Activity 11.3", "body": "<p>Here's your problem.</p>\n\n<pre><code>void PrintAll(){\n  AnimalData data;\n  data.PrintAll();\n  cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n  }\n</code></pre>\n\n<p>This function creates a new object of class <code>AnimalData</code> (which will be constructed according to the default constructor) and then calls the <code>AnimalData::PrintAll</code> method on that object. What you wanted to do was call the <code>AnimalData::PrintAll</code> method on <em>this</em> object.</p>\n\n<pre><code>void PrintAll(){\n  AnimalData::PrintAll(); // call base class method\n  cout &lt;&lt; \", ID: \" &lt;&lt; idNum;\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14649967, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158546777537419/picture?type=large", "display_name": "Colomusicman", "link": "https://stackoverflow.com/users/14649967/colomusicman"}, "is_accepted": false, "score": 0, "last_activity_date": 1605555417, "last_edit_date": 1605555417, "creation_date": 1605549489, "answer_id": 64863233, "question_id": 54912617, "link": "https://stackoverflow.com/questions/54912617/basic-derived-class-member-override-challenge-activity-11-3/64863233#64863233", "title": "Basic derived class member override. Challenge Activity 11.3", "body": "<p>So this one was alot simpler than I thought. It's really a matter of calling the printAll method from PetData, and appending the ID num.</p>\n<pre><code>public void printAll(){\n    super.printAll();\n    System.out.print(&quot;, ID: &quot; + idNum);\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8605299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c462f9bc2c6e09cd19c4d917d961c4bd?s=128&d=identicon&r=PG&f=1", "display_name": "String_Chez", "link": "https://stackoverflow.com/users/8605299/string-chez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4754, "favorite_count": 0, "accepted_answer_id": 54912878, "answer_count": 4, "score": 2, "last_activity_date": 1605572966, "creation_date": 1551293777, "last_edit_date": 1605572966, "question_id": 54912617, "link": "https://stackoverflow.com/questions/54912617/basic-derived-class-member-override-challenge-activity-11-3", "title": "Basic derived class member override. Challenge Activity 11.3", "body": "<p>I have a challenge for the school that states</p>\n<p>Define a member function <code>PrintAll()</code> for <code>class PetData</code> that prints output as follows. Hint: Make use of the base class's <code>PrintAll()</code> function.<br>\n<strong>Name: Fluffy, Age: 5, ID: 4444</strong></p>\n<p>Then they give me the code below with a small snippet that I can alter. Between\n<code>// FIXME: Add PrintAll()</code> member function\nand\n<code>/* Your solution goes here  */</code>\nis the code I added but I'm not getting the correct result.</p>\n<p><strong>MyCode</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// FIXME: Add PrintAll() member function\nvoid PrintAll() {\n    AnimalData data;\n    data.PrintAll();\n    cout &lt;&lt; &quot;, ID: &quot; &lt;&lt; idNum;\n}\n/* Your solution goes here  */\n</code></pre>\n<p><strong>Full Code</strong><br></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass AnimalData {\npublic:\n   void SetName(string givenName) {\n      fullName = givenName;\n   };\n   void SetAge(int numYears) {\n      ageYears = numYears;\n   };\n   // Other parts omitted\n\n   void PrintAll() {\n      cout &lt;&lt; &quot;Name: &quot;  &lt;&lt; fullName;\n      cout &lt;&lt; &quot;, Age: &quot; &lt;&lt; ageYears;\n   };\n\nprivate:\n   int    ageYears;\n   string fullName;\n};\n\nclass PetData: public AnimalData {\npublic:\n   void SetID(int petID) {\n      idNum = petID;\n   };\n\n   // FIXME: Add PrintAll() member function\n   void PrintAll(){\n      AnimalData data;\n      data.PrintAll();\n      cout &lt;&lt; &quot;, ID: &quot; &lt;&lt; idNum;\n      }\n   /* Your solution goes here  */\n\nprivate:\n   int idNum;\n};\n\nint main() {\n   PetData userPet;\n\n   userPet.SetName(&quot;Fluffy&quot;);\n   userPet.SetAge (5);\n   userPet.SetID  (4444);\n   userPet.PrintAll();\n   cout &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n<p><strong>Results I'm getting</strong><br>\nName: , Age: -502747520, ID: 4444</p>\n<p><strong>Results I want</strong><br>\nName: Fluffy, Age: 5, ID: 4444</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 3803, "user_id": 10699171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0279e27531fe2baa3d7b5896c536c188?s=128&d=identicon&r=PG&f=1", "display_name": "J.D.", "link": "https://stackoverflow.com/users/10699171/j-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1551302734, "creation_date": 1551302734, "answer_id": 54914743, "question_id": 54912558, "link": "https://stackoverflow.com/questions/54912558/detect-filled-rectangles-in-image/54914743#54914743", "title": "detect filled rectangles in image", "body": "<p>You can isolate each contour by drawing the contour on a mask. Then you can use that mask on the image to calculate the average color. A high average indicates that the contour contains mostly white, so it is likely a contour you want.</p>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8ZaeW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8ZaeW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code:</p>\n\n<pre><code>    import numpy as np \n    import cv2\n    #load the image\n    img = cv2.imread(\"form.png\") \n    # create grayscale\n    gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)\n    #Find contours (external only):  \n    im, contours, hierarchy = cv2.findContours(gray, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)  \n    #draw contours on original image\n    for cnt in contours:\n        # disregard small contours cause by logo and noise\n        if cv2.contourArea(cnt) &gt; 10000:\n            #isolate contour and calculate average pixel value\n            mask = np.zeros(gray.shape[:2],np.uint8)\n            cv2.drawContours(mask,[cnt],0,255,-1)\n            mean_val = cv2.mean(gray,mask = mask)\n            # a high value indicates the contour contains mostly white, so draw the contour (I used the boundingRect)\n            if mean_val[0] &gt; 200:\n                x,y,w,h = cv2.boundingRect(cnt)\n                cv2.rectangle(img, (x,y),(x+w,y+h), (0,0,255), thickness=4)\n    # show/save image\n    cv2.imshow(\"Image\", mask)\n    cv2.imwrite(\"result.jpg\", img)\n\n    cv2.waitKey(0)\n    cv2.destroyAllWindows()\n</code></pre>\n\n<p>Note: you can also load the image as grayscale and skip creating one, but I used it here so I could draw more obvious red boxes.<br>\nAlso be aware the code given might not generalize well, but it shows the concept.</p>\n"}], "owner": {"reputation": 24613, "user_id": 555222, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcd4c7151c0b298d4fb46001df735f6b?s=128&d=identicon&r=PG", "display_name": "clarkk", "link": "https://stackoverflow.com/users/555222/clarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 54914743, "answer_count": 1, "score": 0, "last_activity_date": 1551303266, "creation_date": 1551293554, "last_edit_date": 1551303266, "question_id": 54912558, "link": "https://stackoverflow.com/questions/54912558/detect-filled-rectangles-in-image", "title": "detect filled rectangles in image", "body": "<p>How to detect filled rectangles in image?</p>\n\n<p>I need to get the bounding box for the 4 white (filled with white) rectangles in the right side of the image, but not the big rectangle in the middle with a white outline</p>\n\n<p><a href=\"https://i.stack.imgur.com/fm6Mg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fm6Mg.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "regex", "qt"], "comments": [{"owner": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "edited": false, "score": 0, "creation_date": 1551297891, "post_id": 54912543, "comment_id": 96593589, "body": "I don&#39;t think this is possible without combining the expressions into one. The straightforward way to simultaneously match multiple expressions is to combine them with <code>|</code> (and if you need to know which one had a match, you can put each expression into its own named capture group). There could be hope that you could apply logical &#39;or&#39; to the objects representing compiled expressions; but although it makes sense to have this operation, I don&#39;t know of any library that allows to do it."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551313776, "post_id": 54912543, "comment_id": 96599301, "body": "It is impossible. Probably you wanted to know if it can be done using one regex expression, then, it is possible."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 5245916, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/889acd29350258819c1485cda3c06f50?s=128&d=identicon&r=PG&f=1", "display_name": "Naumann", "link": "https://stackoverflow.com/users/5245916/naumann"}, "is_accepted": false, "score": 1, "last_activity_date": 1551300202, "creation_date": 1551300202, "answer_id": 54914164, "question_id": 54912543, "link": "https://stackoverflow.com/questions/54912543/qt-validate-string-against-multiple-regular-expressions-simultaneously/54914164#54914164", "title": "(Qt) Validate string against multiple regular expressions simultaneously", "body": "<p>The only option would be to create a single regular expression by combining s_expGP, s_expGPNew, s_expPersonal and the rest if that is possible, otherwise I don't think there could be any other way.</p>\n"}, {"tags": [], "owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "is_accepted": false, "score": 0, "last_activity_date": 1551350734, "creation_date": 1551350734, "answer_id": 54923817, "question_id": 54912543, "link": "https://stackoverflow.com/questions/54912543/qt-validate-string-against-multiple-regular-expressions-simultaneously/54923817#54923817", "title": "(Qt) Validate string against multiple regular expressions simultaneously", "body": "<p>If you have a big number of regexp to test or if you may need to verify the string more than once. You can create a function like this </p>\n\n<pre><code>bool isValid(const QVector&lt;QRegExp&gt;&amp; regExps, const QString&amp; input)\n{\n    for(QRegExp exp : regExps)\n    {\n        if(!exp.exactMatch(input))\n            return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>Or use a static QVector like you have static regexp.</p>\n"}], "owner": {"reputation": 482, "user_id": 931018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/30938d1617ae3fea32e8fd9e948b488c?s=128&d=identicon&r=PG", "display_name": "user931018", "link": "https://stackoverflow.com/users/931018/user931018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551350734, "creation_date": 1551293480, "last_edit_date": 1551307696, "question_id": 54912543, "link": "https://stackoverflow.com/questions/54912543/qt-validate-string-against-multiple-regular-expressions-simultaneously", "title": "(Qt) Validate string against multiple regular expressions simultaneously", "body": "<p>I'm checking a string which contains vehicle registration information against regular expressions for validity. I have several regular expression for each criteria I need. How can I validate the string against all my reg expressions without having to combine them into one expression or do something like this to determine if it's valid?</p>\n\n<pre><code>if( s_expGP.exactMatch(lineEdit-&gt;text()) ||\n    s_expGPNew.exactMatch(lineEdit-&gt;text()) ||\n    s_expPersonal.exactMatch(lineEdit-&gt;text()) ||\n    s_expGov.exactMatch(lineEdit-&gt;text()) )\n{\n    //do stuff\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "c++-concepts"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1551303516, "post_id": 54912314, "comment_id": 96596080, "body": "This recursively defines the type <code>T</code> has a <code>&lt;&lt;</code> defined only if it doesn&#39;t have <code>&lt;&lt;</code> defined.  That seems dangerous, because once the <code>&lt;&lt;</code> definition has been added, the type <i>no longer qualifies</i> as having a <code>&lt;&lt;</code> defined."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1551309331, "post_id": 54912314, "comment_id": 96598183, "body": "@Yakk-AdamNevraumont that&#39;s my worrying exactly. Not sure how the standard/proposal deals with this."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1551292461, "creation_date": 1551292461, "answer_id": 54912314, "question_id": 54912163, "link": "https://stackoverflow.com/questions/54912163/narrowing-down-a-c-concept-to-exclude-certain-types/54912314#54912314", "title": "Narrowing down a C++ concept to exclude certain types", "body": "<pre><code>template&lt;Iterable T&gt;\n    requires !requires(std::ostream o, T a) { operator&lt;&lt;(o, a); }\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const T&amp; t) {\n    for(const auto&amp; it: t) {\n        out &lt;&lt; it &lt;&lt; \" \" ;\n    }\n    return out;\n}\n</code></pre>\n\n<p>Add a requirement that the type does not already have an <code>operator&lt;&lt;</code> defined. I am not 100% sure this should work, but it does work on <a href=\"https://godbolt.org/z/9j2vAH\" rel=\"nofollow noreferrer\">gcc</a>. </p>\n\n<p>(simply <code>o &lt;&lt; a</code> crashes gcc)</p>\n"}], "owner": {"reputation": 178, "user_id": 5396095, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IDb1FSLNLzk/AAAAAAAAAAI/AAAAAAAAAC0/yy90p8_VuMM/photo.jpg?sz=128", "display_name": "Mohammad Nasirifar", "link": "https://stackoverflow.com/users/5396095/mohammad-nasirifar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 54912314, "answer_count": 1, "score": 4, "last_activity_date": 1551292461, "creation_date": 1551291909, "question_id": 54912163, "link": "https://stackoverflow.com/questions/54912163/narrowing-down-a-c-concept-to-exclude-certain-types", "title": "Narrowing down a C++ concept to exclude certain types", "body": "<p>Suppose I would want to overload the left shift operator for <code>ostream</code>s and all containers.</p>\n\n<p>This is what I'm currently have (compile with <code>-fconcepts</code>):</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Container&gt;\nconcept bool Iterable = requires(Container t) {\n        { *t.begin()++, t.end() };\n};\n\ntemplate&lt;Iterable T&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const T&amp; t) {\n    for(const auto&amp; it: t) {\n        out &lt;&lt; it &lt;&lt; \" \" ;\n    }\n    return out;\n}\n\nint main() {\n    std::vector&lt;int&gt; a = {1, 2, 3};\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n\n    std::string str = \"something\";\n    // std::cout &lt;&lt; str &lt;&lt; std::endl; // compile error if the template is defined\n    return 0;\n}\n</code></pre>\n\n<p>The problem however, is that this there is already a version of the <code>ostream&amp;&lt;&lt;</code> for <code>std::string</code>.</p>\n\n<p>Is there a general (something like a <code>requires not</code> expression) or specific (maybe similar to partial specialization by which I can exclude concrete classes) way to exclude something in a concept?</p>\n\n<p>If not, what is the correct way around this?</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1551299524, "post_id": 54912038, "comment_id": 96594326, "body": "Note that <code>LOGPIXELSY</code> will always return 96 for compatibility unless you have your app flagged as dpi-aware."}], "answers": [{"comments": [{"owner": {"reputation": 7510, "user_id": 1132334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8o6Nl.png?s=128&g=1", "display_name": "Cee McSharpface", "link": "https://stackoverflow.com/users/1132334/cee-mcsharpface"}, "edited": false, "score": 1, "creation_date": 1601995071, "post_id": 54912192, "comment_id": 113575628, "body": "There is something counterintuitive: when I call <code>SetProcessDpiAwarenessContext(DPI_AWARENESS_CONTEXT_PER_MONI&zwnj;&#8203;TOR_AWARE_V2);</code> first in main, it reports a factor 1.0 for all monitors. If I don&#39;t, the factors match those of each monitor as shown in the control panel."}], "tags": [], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "is_accepted": true, "score": 3, "last_activity_date": 1551292016, "creation_date": 1551292016, "answer_id": 54912192, "question_id": 54912038, "link": "https://stackoverflow.com/questions/54912038/querying-windows-display-scaling/54912192#54912192", "title": "Querying Windows display scaling", "body": "<p><a href=\"https://stackoverflow.com/a/36864741/3764804\">This</a> answer solved it:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\nint main()\n{\n    auto activeWindow = GetActiveWindow();\n    HMONITOR monitor = MonitorFromWindow(activeWindow, MONITOR_DEFAULTTONEAREST);\n\n    // Get the logical width and height of the monitor\n    MONITORINFOEX monitorInfoEx;\n    monitorInfoEx.cbSize = sizeof(monitorInfoEx);\n    GetMonitorInfo(monitor, &amp;monitorInfoEx);\n    auto cxLogical = monitorInfoEx.rcMonitor.right - monitorInfoEx.rcMonitor.left;\n    auto cyLogical = monitorInfoEx.rcMonitor.bottom - monitorInfoEx.rcMonitor.top;\n\n    // Get the physical width and height of the monitor\n    DEVMODE devMode;\n    devMode.dmSize = sizeof(devMode);\n    devMode.dmDriverExtra = 0;\n    EnumDisplaySettings(monitorInfoEx.szDevice, ENUM_CURRENT_SETTINGS, &amp;devMode);\n    auto cxPhysical = devMode.dmPelsWidth;\n    auto cyPhysical = devMode.dmPelsHeight;\n\n    // Calculate the scaling factor\n    auto horizontalScale = ((double) cxPhysical / (double) cxLogical);\n    auto verticalScale = ((double) cyPhysical / (double) cyLogical);\n\n    std::cout &lt;&lt; \"Horizonzal scaling: \" &lt;&lt; horizontalScale &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Vertical scaling: \" &lt;&lt; verticalScale;\n}\n</code></pre>\n"}], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 1, "accepted_answer_id": 54912192, "answer_count": 1, "score": 3, "last_activity_date": 1599315169, "creation_date": 1551291414, "last_edit_date": 1551292031, "question_id": 54912038, "link": "https://stackoverflow.com/questions/54912038/querying-windows-display-scaling", "title": "Querying Windows display scaling", "body": "<p>I want to query the <code>Windows</code> display scaling setting programmatically:\n<a href=\"https://i.stack.imgur.com/apDWo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/apDWo.png\" alt=\"\"></a>\nIn this case, I want it to return <code>125</code> since I configured my display to be at <code>125%</code> scaling. According to <a href=\"https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/dpi-related-apis-and-registry-settings#scale\" rel=\"nofollow noreferrer\">this</a> article, the following <code>Windows API C++</code> code can be used:</p>\n\n<pre><code>// Get desktop dc\ndesktopDc = GetDC(NULL);\n// Get native resolution\nhorizontalDPI = GetDeviceCaps(desktopDc,LOGPIXELSX);\nverticalDPI = GetDeviceCaps(desktopDc,LOGPIXELSY);\n</code></pre>\n\n<p>However, this code always return <code>96</code> and <code>96</code> for the horizontal as well as vertical <code>DPI</code> which translates to <code>100%</code> scaling (according to the provided table):\n<a href=\"https://i.stack.imgur.com/z7xxJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z7xxJ.png\" alt=\"\"></a></p>\n\n<p>This output is wrong since I still get the same result with <code>125%</code> scaling. How can it be done? I'm programming in <code>Java</code> so I can execute <code>C++</code> using <a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\"><code>JNA</code></a>. <code>Windows API</code> solutions are preferred but everything else like a <code>.bat</code> script or <code>registry</code> query is also fine as long as it's reliable for all <code>Windows</code> versions from <code>7</code> to <code>10</code>.</p>\n"}, {"tags": ["c++", "macos", "boost"], "comments": [{"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551290062, "post_id": 54911422, "comment_id": 96589984, "body": "As far as I can tell I believe I am. How can I check for certain? I ran <code>grep BOOST_LIB_VERSION &#47;usr&#47;local&#47;include&#47;boost&#47;version.hpp</code> and I got back <code>#define BOOST_LIB_VERSION &quot;1_69&quot;</code>@CinderBiscuits"}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551290446, "post_id": 54911422, "comment_id": 96590172, "body": "@G.M. I placed <code>#include &lt;csignal&gt;</code> before the <code>boost</code> include and I still have the same errors. Is there a linker flag that I am supposed to include with <code>csignal</code>?"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1551290753, "post_id": 54911422, "comment_id": 96590310, "body": "Try <code>clang++ -std=c++11 test.cpp -lpthread -lc++</code> You shouldn&#39;t have to link anything specific to boost as Boost.Process is a header-only library, but you do need to link to the standard library which is either libc++ or libstdc++. (<code>-lc++</code> and <code>-lstdc++</code> respectively.)"}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1551290970, "post_id": 54911422, "comment_id": 96590425, "body": "@CinderBiscuits tried the recommended flags and I still get the same error. I even did a fresh installation of boost just to make sure I have 1.69.0 installed."}], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 1, "creation_date": 1551291641, "post_id": 54912043, "comment_id": 96590722, "body": "Thank you, I will see if removing those <code>::</code> will help this program compile at least. If it is bad enough, I will revert back to an older version of boost. Thank you so much for you help!"}], "tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": true, "score": 3, "last_activity_date": 1551291831, "last_edit_date": 1592644375, "creation_date": 1551291426, "answer_id": 54912043, "question_id": 54911422, "link": "https://stackoverflow.com/questions/54911422/are-some-libraries-in-boost-1-69-not-compatible-with-macos/54912043#54912043", "title": "Are some libraries in Boost 1.69 not compatible with MacOS?", "body": "<p>You are correct. <a href=\"https://github.com/boostorg/process/issues/55\" rel=\"nofollow noreferrer\">As of 1.69.0 Boost.Process is broken on MacOS.</a> For the gritty details, follow the link to the bug report.</p>\n<p>There is a workaround given in the bug report to get it compiling on MacOS:</p>\n<blockquote>\n<p>Turns out that MacOS isn't the only platform that defines <code>sigemptyset</code>, <code>sigaddset</code>. That is an easy fix since all you need to do is drop the <code>::</code> qualifier. As for the <code>sigtimedwait</code>, that too isn't common on all platforms. Strangely, stripping the <code>::</code> qualifier from that one gets the code to compile. I am guessing that template is never instantiated so the fact the method does not exits isn't causing us problems.</p>\n<p>I can supply a patch but it is nothing more than stripping <code>::</code> from those 3 identifiers.</p>\n</blockquote>\n<p>A comprehensive patch is included <a href=\"https://github.com/flintproject/Flint/commit/8a8b67bd01ce05fe878b40dc86cce8e3d1fdacd8\" rel=\"nofollow noreferrer\">in the Flint project</a>. Note that Flint is MIT licensed if you choose to include their patch in your code</p>\n"}], "owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "accepted_answer_id": 54912043, "answer_count": 1, "score": 5, "last_activity_date": 1551291831, "creation_date": 1551289198, "question_id": 54911422, "link": "https://stackoverflow.com/questions/54911422/are-some-libraries-in-boost-1-69-not-compatible-with-macos", "title": "Are some libraries in Boost 1.69 not compatible with MacOS?", "body": "<p>I am trying to compile a program that I have had no issues compiling with Ubuntu 18.04 and Windows 10. However, when I try to compile it on OSX High Sierra I am given errors and they are only related to boost.</p>\n\n<p>This is an example:</p>\n\n<pre><code>#include &lt;boost/process.hpp&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n  std::cout &lt;&lt; \"This is a test.\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I have then tried to compile the program with both <code>g++</code> and <code>clang</code> like this:</p>\n\n<pre><code>g++ -std=c++11 test.cpp -lpthread\n</code></pre>\n\n<p>I then get this massive error:</p>\n\n<pre><code>In file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:24:\nIn file included from /usr/local/include/boost/process/async_system.hpp:22:\nIn file included from /usr/local/include/boost/process/child.hpp:21:\nIn file included from /usr/local/include/boost/process/detail/child_decl.hpp:30:\n/usr/local/include/boost/process/detail/posix/wait_for_exit.hpp:60:7: error: expected unqualified-id\n    ::sigemptyset(&amp;sigset);\n      ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/signal.h:125:26: note: expanded from macro 'sigemptyset'\n#define sigemptyset(set)        (*(set) = 0, 0)\n                                ^\nIn file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:24:\nIn file included from /usr/local/include/boost/process/async_system.hpp:22:\nIn file included from /usr/local/include/boost/process/child.hpp:21:\nIn file included from /usr/local/include/boost/process/detail/child_decl.hpp:30:\n/usr/local/include/boost/process/detail/posix/wait_for_exit.hpp:61:7: error: expected unqualified-id\n    ::sigaddset(&amp;sigset, SIGCHLD);\n      ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/signal.h:122:31: note: expanded from macro 'sigaddset'\n#define sigaddset(set, signo)   (*(set) |= __sigbits(signo), 0)\n                                ^\nIn file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:24:\nIn file included from /usr/local/include/boost/process/async_system.hpp:22:\nIn file included from /usr/local/include/boost/process/child.hpp:21:\nIn file included from /usr/local/include/boost/process/detail/child_decl.hpp:30:\n/usr/local/include/boost/process/detail/posix/wait_for_exit.hpp:87:26: error: no member named 'sigtimedwait' in the global namespace\n        auto ret_sig = ::sigtimedwait(&amp;sigset, nullptr, &amp;ts);\n                       ~~^\nIn file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:25:\nIn file included from /usr/local/include/boost/process/group.hpp:32:\n/usr/local/include/boost/process/detail/posix/wait_group.hpp:64:7: error: expected unqualified-id\n    ::sigemptyset(&amp;sigset);\n      ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/signal.h:125:26: note: expanded from macro 'sigemptyset'\n#define sigemptyset(set)        (*(set) = 0, 0)\n                                ^\nIn file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:25:\nIn file included from /usr/local/include/boost/process/group.hpp:32:\n/usr/local/include/boost/process/detail/posix/wait_group.hpp:65:7: error: expected unqualified-id\n    ::sigaddset(&amp;sigset, SIGCHLD);\n      ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/signal.h:122:31: note: expanded from macro 'sigaddset'\n#define sigaddset(set, signo)   (*(set) |= __sigbits(signo), 0)\n                                ^\nIn file included from test.cpp:1:\nIn file included from /usr/local/include/boost/process.hpp:25:\nIn file included from /usr/local/include/boost/process/group.hpp:32:\n/usr/local/include/boost/process/detail/posix/wait_group.hpp:90:17: error: no member named 'sigtimedwait' in the global namespace\n        ret = ::sigtimedwait(&amp;sigset, nullptr, &amp;ts);\n              ~~^\n6 errors generated.\n</code></pre>\n\n<p>I could be missing a compiler flag, I have tried <code>-lboost_system</code> but that gave the same exact errors. If this specific library is not compatible with OSX then I will try and find a work around, but this library is already embedded in the code that I am currently working with. </p>\n\n<p>Are there any known fixes for this?</p>\n"}, {"tags": ["c++", "x86", "simd", "intrinsics", "avx2"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1551289571, "post_id": 54911407, "comment_id": 96589739, "body": "Why are you using <code>_mm256_load_si256</code>, which may cause faults, instead of <code>_mm256_loadu_si256</code>?"}, {"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1551289621, "post_id": 54911407, "comment_id": 96589774, "body": "i didn&#39;t know that would cause faults, i will change to _mm256_loadu_si256 next time."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1551653731, "post_id": 54911407, "comment_id": 96708303, "body": "That might cause fault but modern compilers are smart and they align it. BTW, in order to avoid segmentation fault you can align your array to 32-byte boundary with searching align google for your platform including OS and Compiler."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1551303730, "post_id": 54912113, "comment_id": 96596180, "body": "<code>__m256d temp2 = _mm256_cvtepi32_pd( temp );</code> when I run this I get the error <code>error: cannot convert \u2018__m256i {aka __vector(4) long long int}\u2019 to \u2018__m128i {aka __vector(2) long long int}\u2019 for argument \u20181\u2019 to \u2018__m256d _mm256_cvtepi32_pd(__m128i)\u2019    __m256d temp3 = _mm256_cvtepi32_pd( temp1 );</code> I think its because the function requires a __128i variable but temp1 is a __258i variable. Do you know a fast way to convert from __258i to __128i? So that I would only use the first 4 integers first and then the second 4"}, {"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1551306852, "post_id": 54912113, "comment_id": 96597385, "body": "thank you very much that worked. One last question. when I store the integers as double with these simd functions, my values change from 12345678 to 1.23456... even though my value is not above 2^52 ( which when I looked up was the highest integer a double can store). Is there a way I can fix this?"}, {"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1551306933, "post_id": 54912113, "comment_id": 96597411, "body": "Maybe what if i explain what im trying to achieve it would make more sense. I am trying to do integer division in simd but since theres no function for it i am trying to first cast my integers to doubles and then do the divison and cast it back again. Is there a way I can do this?"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1551308915, "post_id": 54912113, "comment_id": 96598076, "body": "@OgiciBumKacar See another update, I\u2019ve verified the registers contain correct numbers.  About division, the easy way is use Intel compiler, it has <code>_mm256_div_epi32</code> function implemented in its runtime library.  Yes, you can do with doubles if that\u2019s what you need."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 1, "creation_date": 1551308946, "post_id": 54912113, "comment_id": 96598086, "body": "Also, if you know divisors in advance and they\u2019re same across all lanes, there\u2019s better way, use godbolt.org then manually translate from assembly to vector intrinsics. E.g. this is how to divide by 12345678: <a href=\"https://godbolt.org/z/bmMO3S\" rel=\"nofollow noreferrer\">godbolt.org/z/bmMO3S</a> <code>imul</code> -&gt; <code>_mm256_mullo_epi32</code>, <code>sar</code> -&gt; <code>_mm256_srai_epi32</code>, <code>shr</code> -&gt; <code>_mm256_srli_epi32</code>, <code>add</code> -&gt; <code>_mm256_add_epi32</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1551331763, "post_id": 54912113, "comment_id": 96603363, "body": "@Soonts: or if you don&#39;t care about MSVC, you can use GNU C native vector syntax to let gcc/clang/ICC emit the vector shifts for you, with <code>typedef int v8si __attribute__((vector_size(32)))</code>.  Then you can do <code>v8si v=a __m256i var;  v &#47;= 123;</code>  See for example <a href=\"//unix.stackexchange.com/a/324520\">What&#39;s the fastest way to generate a 1 GB text file containing random digits?</a> where I used this for <code>&#47;</code> and <code>%</code> by 10 in <code>vec_store_digit_and_space()</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1551332029, "post_id": 54912113, "comment_id": 96603428, "body": "And BTW, you&#39;d probably be better off with two 128-bit loads to feed the two <code>vcvtdq2pd</code> instructions, so they could just use memory source operands.  That&#39;s 1 micro-fused uop on Skylake, but the XMM-&gt;YMM version is 2 uops (shuffle + FMA port to line up the integer inputs with the double outputs).  <a href=\"https://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a> The load port can shuffle sufficiently for free, so you definitely want to hint the compiler into doing it that way unless surrounding code is totally bottlenecked on port 2/3 throughput."}], "tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": false, "score": 1, "last_activity_date": 1551307212, "last_edit_date": 1551307212, "creation_date": 1551291726, "answer_id": 54912113, "question_id": 54911407, "link": "https://stackoverflow.com/questions/54911407/simd-m256i-to-m256d-cast-results/54912113#54912113", "title": "SIMD __m256i to __m256d cast results", "body": "<p>As a result of this operation, temp2 will contain garbage. For example, the first double lane will be 4.0146351468550722e-305.</p>\n\n<p>This is by design. <code>_mm256_castsi256_pd</code> intrinsic doesn\u2019t convert values, it only re-interprets bits in register as doubles.</p>\n\n<p>If you want these double constants in the register, just use <code>_mm256_setr_pd</code> intrinsic:</p>\n\n<pre><code>// Set double values to the constants\n__m256d temp2 = _mm256_setr_pd( 12345678, 12333333, 12344444, 12355555 );\n</code></pre>\n\n<p>Or if these values aren\u2019t constant, use _mm256_cvtepi32_pd intrinsic, here's a complete example:</p>\n\n<pre><code>alignas( 32 ) int arr[ 8 ] = { 12345678, 12333333, 12344444, 12355555,\n    12366666, 12377777, 12388888, 12399999 };\n__m256i integers = _mm256_load_si256( ( const __m256i* ) &amp;arr );\n// Convert first 4 int32 values to doubles\n__m256d lowDoubles = _mm256_cvtepi32_pd( _mm256_castsi256_si128( integers ) );\n// Convert last 4 values to doubles\n__m256d highDoubles = _mm256_cvtepi32_pd( _mm256_extracti128_si256( integers, 1 ) );\n</code></pre>\n\n<p>This will actually convert, not bit cast, the values.</p>\n\n<p>AVX registers hold 256 bits of data. This is 8 int32 values in <code>__m256i</code> type, 8 float values in <code>__m256</code> data type, but only 4 double values in <code>__m256d</code> type.</p>\n\n<p>P.S. There\u2019s also alignment bug in your code, best way to fix is add <code>alignas(32)</code> before <code>int arr[8]</code></p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1551331394, "post_id": 54912174, "comment_id": 96603260, "body": "You don&#39;t need a dead-reckoning hack, just <code>alignas(32) double result[4];</code> if you want to use alignment-required <code>store</code> instead of <code>storeu</code>, to make sure you don&#39;t have a cache-line split.  Sometimes gcc will choose to over-align arrays that are the target of an aligned store, but I guess not always."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1551331528, "post_id": 54912174, "comment_id": 96603286, "body": "And BTW, we&#39;re talking about x86 intrinsics, so yes <code>int</code> is 4 bytes, <code>double</code> is IEEE binary64, and everything is little endian.  Intel&#39;s intrinsics API isn&#39;t careful about types, so it&#39;s only compatible with ABIs where this is true.  (Which of course includes all existing x86 / x86-64 ABIs.)"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 3, "last_activity_date": 1551597360, "last_edit_date": 1551597360, "creation_date": 1551291943, "answer_id": 54912174, "question_id": 54911407, "link": "https://stackoverflow.com/questions/54911407/simd-m256i-to-m256d-cast-results/54912174#54912174", "title": "SIMD __m256i to __m256d cast results", "body": "<h1>Short answer</h1>\n\n<p>The members in <code>temp2</code> will be:</p>\n\n<pre><code>{4.014635e-305, 4.062922e-305, 4.111209e-305, 4.159495e-305}\n</code></pre>\n\n<h1>How to obtain the values</h1>\n\n<p>Just write the SIMD data into an <code>double</code> array back and print it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\n\nint main(void) {\n    int hoge[4]; /* hack that worked on tested environment to avoid Segmentation Fault */\n    double result[4];\n    int i;\n\n    int arr[8]={12345678,12333333,12344444,12355555,12366666,12377777,12388888,12399999};\n    __m256i temp = _mm256_load_si256((__m256i *) arr);\n    __m256d temp2 = _mm256_castsi256_pd (temp);\n\n    _mm256_storeu_pd(result, temp2);\n    for (i = 0; i &lt; 4; i++) printf(\"result[%d] = %.6e (%.15a)\\n\", i, result[i], result[i]);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/eP47el7bVRhQK2Db\" rel=\"nofollow noreferrer\">I ran this code on Wandbox</a> and got this output:</p>\n\n<pre><code>result[0] = 4.014635e-305 (0x1.c311500bc614e00p-1012)\nresult[1] = 4.062922e-305 (0x1.c87e300bc5c7c00p-1012)\nresult[2] = 4.111209e-305 (0x1.cdeb100bcb34a00p-1012)\nresult[3] = 4.159495e-305 (0x1.d357f00bd0a1800p-1012)\n</code></pre>\n\n<p>You can write the SIMD data to an <code>double</code> array via <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_storeu_pd&amp;expand=3311,3385,5549,5610,5610\" rel=\"nofollow noreferrer\"><code>_mm256_storeu_pd()</code></a>.</p>\n\n<p>An exception may be generated when address that is not 32-byte aligned is passed into <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_load_si256&amp;expand=3385,5549,5610,5610,3311,3311\" rel=\"nofollow noreferrer\"><code>_mm256_load_si256()</code></a>, so you should do the alignment. Actually Segmentation Fault occurred on Wandbox, so I inserted the dummy array <code>hoge</code> to do the alignment.</p>\n\n<h1>Why the values were obtained</h1>\n\n<p><a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_castsi256_pd%2520&amp;expand=3385,5549,5610,5610,3311,3311,624\" rel=\"nofollow noreferrer\"><code>_mm256_castsi256_pd()</code></a> is actually just copying the bytes and changing their interpretation.</p>\n\n<p>Assuming little-endian is used and <code>int</code> is 4-byte long,\nthe data in <code>arr</code> is like this in the byte-addressed memory:</p>\n\n<pre><code>data in arr[8]:\n|   12345678|   12333333|   12344444|   12355555|   12366666|   12377777|   12388888|   12399999|\nbyte data in arr[8] (in little endian):\n|4e 61 bc 00|15 31 bc 00|7c 5c bc 00|e3 87 bc 00|4a b3 bc 00|b1 de bc 00|18 0a bd 00|7f 35 bd 00|\ndata seen as 64-bit hex:\n|     0x00bc311500bc614e|     0x00bc87e300bc5c7c|     0x00bcdeb100bcb34a|     0x00bd357f00bd0a18|\n</code></pre>\n\n<p>Then, assuming that 64-bit <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE754</a> is used in <code>double</code>, the 64-bit data consists of 1-bit sign, 11-bit exponent and 52-bit significand.</p>\n\n<p>Taking the first element <code>0x00bc311500bc614e</code> as example, the sign bit is <code>0</code> (plus/zero), the exponent is <code>0x00b</code> (11 - 1023 = -1012) and the significand is <code>0xc311500bc614e</code>.</p>\n\n<p>This matches with what is printed via <code>%.15a</code> in the sample code above.\n(two extra <code>0</code>s are printed because printing 15 digits is specified while only data for 13 digits is reordered, so the remainder is padded with <code>0</code>.)\nThe other elements also matches like this.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1551301334, "post_id": 54912221, "comment_id": 96595116, "body": "Equivalent except without any undefined behaviour from violating strict aliasing.  Also <code>int</code> and <code>double</code> aren&#39;t the same size on any x86 C++ implementation.  <code>memcpy</code> from <code>double</code> to <code>uint64_t</code> would be a better example."}, {"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1551303060, "post_id": 54912221, "comment_id": 96595894, "body": "<code>__m256d temp2 = _mm256_cvtepi32_pd(temp);</code> Is there  a way to fastly split an __m256i variable into 2 __m128i variables so that I can use it in this function?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 2, "creation_date": 1551306797, "post_id": 54912221, "comment_id": 96597363, "body": "@OgiciBumKacar: <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=SSE,SSE2,SSE3,SSSE3,SSE4_1,SSE4_2,AVX,AVX2,Other&amp;expand=2424,6150,6150,401,2424&amp;text=vextracti1\" rel=\"nofollow noreferrer\"><code>_mm256_extracti128_si256</code></a> for the high half (1 shuffle instruction), and <code>_mm256_castsi256_si128</code> the low half (zero instructions)."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 1, "last_activity_date": 1551292113, "creation_date": 1551292113, "answer_id": 54912221, "question_id": 54911407, "link": "https://stackoverflow.com/questions/54911407/simd-m256i-to-m256d-cast-results/54912221#54912221", "title": "SIMD __m256i to __m256d cast results", "body": "<p>Operation <code>_mm256_castsi256_pd</code> does literally nothing, it is a reinterpretation - equivalent to:</p>\n\n<pre><code>  int v_i;\n  double d_i = *((double*)(int*)&amp;v_i).\n</code></pre>\n\n<p>Use <code>__m256d _mm256_cvtepi32_pd (__m128i a)</code> as it actually converts 4 integers to 4 doubles.</p>\n\n<pre><code>alignas(16) int arr[4]={12345678,12333333,12344444,12355555};\n__m128i temp = _mm_load_si128((__m128i *) arr);\n__m256d temp2 = _mm256_cvtepi32_pd(temp);\n</code></pre>\n\n<p>Note: the loading operations <code>_mm_load_si128</code> and <code>_mm256_load_si256</code> require the addresses to be properly aligned. Else use the unaligned versions <code>_mm_loadu_si128</code> and <code>_mm256_loadu_si256</code>; thought the unaligned versions are slower.</p>\n"}], "owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551597360, "creation_date": 1551289132, "last_edit_date": 1551296673, "question_id": 54911407, "link": "https://stackoverflow.com/questions/54911407/simd-m256i-to-m256d-cast-results", "title": "SIMD __m256i to __m256d cast results", "body": "<p>I am trying to cast a SIMD integer variable into a double. But I can't see what the result of this operation will be.\nExample:</p>\n\n<pre><code>int arr[8]={12345678,12333333,12344444,12355555,12366666,12377777,12388888,12399999};\n__m256i temp = _mm256_load_si256((__m256i *) arr);\n__m256d temp2 = _mm256_castsi256_pd (temp);\n</code></pre>\n\n<p>as a result of this operation what are the members in my temp2? </p>\n"}, {"tags": ["c++", "constexpr", "stdarray"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1551288570, "post_id": 54911176, "comment_id": 96589257, "body": "<code>std::array</code> are aggregates, so <code>std::array&lt;double, 10&gt; zero10 = {};</code> will perform value initialization for missing members, which is 0-initialization for <code>double</code>."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 1, "creation_date": 1551288974, "post_id": 54911176, "comment_id": 96589463, "body": "BTW I think your assign function would explode when using zero-sized std::arrays (yeah they are legal!)"}], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "edited": false, "score": 0, "creation_date": 1551288887, "post_id": 54911267, "comment_id": 96589427, "body": "Thanks! :) I got puzzled by using something like <code>std::array&lt;double, 10&gt; zeroZero10; print(zeroZero10);</code> and getting garbage output : <code>0 0 0 0 0 0 0 6.93865e-310 6.93865e-310 6.93865e-310</code>. Why isn&#39;t this construction also zero-initializing elements, if <code>{}</code> is doing that?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "edited": false, "score": 1, "creation_date": 1551288977, "post_id": 54911267, "comment_id": 96589465, "body": "@tmaric Because for &quot;Plain Old Data&quot;-like types in C++, constructing with <code>{}</code> is different than constructiong with nothing."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "edited": false, "score": 1, "creation_date": 1551288982, "post_id": 54911267, "comment_id": 96589468, "body": "@tmaric, I am not a language lawyer. I don&#39;t always understand the logic behind why a certain rule is in place. This is one of those."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "edited": false, "score": 1, "creation_date": 1551303281, "post_id": 54911267, "comment_id": 96595979, "body": "@tmaric Because &quot;you don&#39;t pay for what you don&#39;t use&quot; (C++ &quot;idiom&quot;). This rules come from aggregate initialization rule in C, extended in C++. Especially, <code>double zeroZero10[10] = {}</code> would perform zero-initialization, so it&#39;s kind of logic that <code>std::array</code> have the same behavior. You can choose between an uninitialized structure (because you don&#39;t need one) and an initialized one, which is better than not being able to choose ;)"}, {"owner": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1551339016, "post_id": 54911267, "comment_id": 96606202, "body": "@Holt: OK! So it&#39;s not an inconsistency, it&#39;s an option. Thanks!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1551288628, "creation_date": 1551288628, "answer_id": 54911267, "question_id": 54911176, "link": "https://stackoverflow.com/questions/54911176/zero-initializing-a-stdarray-of-arithmetic-value-type-at-compile-time-resu/54911267#54911267", "title": "Zero-initializing a `std::array` of arithmetic `value_type` at compile-time results in a missing constructor note", "body": "<p><code>std::array</code> does not have a default constructor. You need to use:</p>\n\n<pre><code>std::array&lt;AT, DIM&gt; result = {};\n</code></pre>\n\n<p>What's puzzling to me is why you think you need <code>zero_array</code> at all. If you use</p>\n\n<pre><code>std::array&lt;double, 10&gt; a = {};\n</code></pre>\n\n<p>you get a zero-initialized object.</p>\n"}], "owner": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 54911267, "answer_count": 1, "score": 2, "last_activity_date": 1551288628, "creation_date": 1551288251, "question_id": 54911176, "link": "https://stackoverflow.com/questions/54911176/zero-initializing-a-stdarray-of-arithmetic-value-type-at-compile-time-resu", "title": "Zero-initializing a `std::array` of arithmetic `value_type` at compile-time results in a missing constructor note", "body": "<p>To initialize an <code>std::array</code> of an arithmetic type <code>AT</code> at compile-time, I did this: </p>\n\n<pre><code>#include &lt;array&gt; \n#include &lt;iostream&gt;\n\ntemplate&lt;typename AT, auto DIM, auto N = 0&gt; \nconstexpr void assign(std::array&lt;AT, DIM&gt;&amp; arr, AT value)\n{\n    arr[N] = value; \n    if constexpr (N &lt; std::size(arr) - 1)\n        assign&lt;AT, DIM, N + 1&gt;(arr, value);\n}\n\ntemplate&lt;typename AT, auto DIM&gt;\nconstexpr std::array&lt;AT, DIM&gt; zero_array() \n{\n    std::array&lt;AT, DIM&gt; result;  \n    assign(result, AT{0});\n    return result;\n}\n\ntemplate&lt;typename Container&gt; \nvoid print(Container&amp;&amp; cont)\n{\n    for (const auto&amp; el : cont)\n        std::cout &lt;&lt; el &lt;&lt; \" \"; \n    std::cout &lt;&lt; std::endl;\n}\n\nint main()\n{\n    auto zero10 = zero_array&lt;double, 10&gt;(); \n    print(zero10); \n}\n</code></pre>\n\n<p>I <a href=\"https://godbolt.org/z/9IkURZ\" rel=\"nofollow noreferrer\">godbolted it</a>, and it seems to me it worked: </p>\n\n<p><a href=\"https://i.stack.imgur.com/ROPWq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ROPWq.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I compile it with</p>\n\n<pre><code>g++  -O3 -std=c++2a -Wall -Wpedantic -Wunused-parameter -I /usr/include main.cpp -o main\n</code></pre>\n\n<p>using <code>g++ (GCC) 8.2.1 20181127</code>, I get a \"note\" </p>\n\n<pre><code>In file included from main.cpp:1:\nmain.cpp: In instantiation of \u2018constexpr std::array&lt;AT, DIM&gt; zero_array() [with AT = double; auto DIM = 10]\u2019:\nmain.cpp:30:42:   required from here\n/usr/include/c++/8.2.1/array:94:12: note: \u2018struct std::array&lt;double, 10&gt;\u2019 has no user-provided default constructor\n     struct array\n            ^~~~~\n/usr/include/c++/8.2.1/array:110:56: note: and the implicitly-defined constructor does not initialize \u2018double std::array&lt;double, 10&gt;::_M_elems [10]\u2019\n       typename _AT_Type::_Type                         _M_elems;\n</code></pre>\n\n<p>Why is this note there? Can I ignore it? If so, how to get rid of it? </p>\n"}, {"tags": ["java", "c#", "c++", "javafx", "java-native-interface"], "comments": [{"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1551288761, "post_id": 54911014, "comment_id": 96589362, "body": "Not an answer, but <a href=\"https://docs.oracle.com/en/java/javase/11/docs/specs/jni/index.html\" rel=\"nofollow noreferrer\">this resource</a> may help."}, {"owner": {"reputation": 10057, "user_id": 2423906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkpYv.jpg?s=128&g=1", "display_name": "Sedrick", "link": "https://stackoverflow.com/users/2423906/sedrick"}, "reply_to_user": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 0, "creation_date": 1551288803, "post_id": 54911014, "comment_id": 96589386, "body": "Thanks @Slaw. I will look at it after lunch."}], "answers": [{"comments": [{"owner": {"reputation": 10057, "user_id": 2423906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkpYv.jpg?s=128&g=1", "display_name": "Sedrick", "link": "https://stackoverflow.com/users/2423906/sedrick"}, "edited": false, "score": 0, "creation_date": 1551291510, "post_id": 54911553, "comment_id": 96590654, "body": "I think it&#39;s an unmanaged DLL. It has Interop in front of the DLL&#39;s name in the object browers."}, {"owner": {"reputation": 10057, "user_id": 2423906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkpYv.jpg?s=128&g=1", "display_name": "Sedrick", "link": "https://stackoverflow.com/users/2423906/sedrick"}, "edited": false, "score": 0, "creation_date": 1551292865, "post_id": 54911553, "comment_id": 96591318, "body": "When I try to load the DLL using jni4net, I get error: <code>Exception in thread &quot;main&quot; System.BadImageFormatException: Could not load file or assembly &#39;file:&#47;&#47;&#47;C:\\path1\\path2\\BatchCat2009-21.dll&#39; or one of its dependencies. The module was expected to contain an assembly manifest.</code>"}], "tags": [], "owner": {"reputation": 69, "user_id": 6121912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wcwMi.jpg?s=128&g=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/6121912/ajinkya"}, "is_accepted": false, "score": 0, "last_activity_date": 1551289662, "creation_date": 1551289662, "answer_id": 54911553, "question_id": 54911014, "link": "https://stackoverflow.com/questions/54911014/call-functions-in-dll-using-java/54911553#54911553", "title": "Call Functions in DLL using Java", "body": "<p>You can use the jni4net, which act as bridge between .NET and Java.</p>\n\n<p>Please refer the documentation <a href=\"http://jni4net.com/\" rel=\"nofollow noreferrer\">here</a> </p>\n"}], "owner": {"reputation": 10057, "user_id": 2423906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rkpYv.jpg?s=128&g=1", "display_name": "Sedrick", "link": "https://stackoverflow.com/users/2423906/sedrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551367943, "creation_date": 1551287687, "last_edit_date": 1551367943, "question_id": 54911014, "link": "https://stackoverflow.com/questions/54911014/call-functions-in-dll-using-java", "title": "Call Functions in DLL using Java", "body": "<p>I have been looking at ways to call DLL functions in Java. I have successfully done a few tutorials. All the tutorials and examples I have seen have been very basic. Basically, calling a DLL with one function. The DLL I need to load has two public interfaces (<code>ClassBatchCat</code> and <code>ClassItemRecord</code>). See object browser below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jf6hj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jf6hj.png\" alt=\"enter image description here\"></a></p>\n\n<p>I need to access the functions associated with <code>ClassBatchCat</code>. See Image below.\n<a href=\"https://i.stack.imgur.com/YBjaw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YBjaw.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, how do I access the functions under <code>ClassBatchCatClass</code> and how do I access the return code ENUMs. \nThis is not a JavaFX question. </p>\n"}, {"tags": ["c++", "opengl", "mipmaps", "mesa"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1551290840, "post_id": 54911010, "comment_id": 96590353, "body": "The spec doesn&#39;t put too many constraints on how <code>glGenerateMipmap()</code> must operate: <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf\" rel=\"nofollow noreferrer\">8.15, page 268</a>: &quot;No particular filter algorithm is required, though a box filter is recommended as the default filter.&quot;  See also: <a href=\"http://www.number-none.com/product/Mipmapping,%20Part%201/index.html\" rel=\"nofollow noreferrer\">gamma-correct mipmaps</a> :)"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1551292882, "post_id": 54911010, "comment_id": 96591330, "body": "I think if you\u2019ll call glGetError() after glGenerateMipmap(), you\u2019ll get GL_INVALID_OPERATION error code for non-power of 2 textures."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 2, "creation_date": 1551294169, "post_id": 54911010, "comment_id": 96591908, "body": "@Soonts no, <code>glGetError()</code> returns <code>0</code> after <code>glGenerateMipmap()</code> in all cases I checked."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1551295233, "post_id": 54911010, "comment_id": 96592402, "body": "@Ruslan In this case it\u2019s probably a bug. I don\u2019t know about Linux, but on my Windows PC, ID3D11DeviceContext::GenerateMips is implemented deep inside user-mode Nvidia GPU driver. Probably the same on GL/Linux."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1551295468, "post_id": 54911010, "comment_id": 96592517, "body": "@Soonts actually I&#39;ve now tested on an NVidia GPU with <code>nvidia</code> binary driver, and here it gives me sensible values."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1551297695, "post_id": 54911010, "comment_id": 96593494, "body": "Mesa&#39;s <a href=\"https://gitlab.freedesktop.org/mesa/mesa/blob/master/src/mesa/drivers/common/meta_generate_mipmap.c#L142\" rel=\"nofollow noreferrer\">hardware</a> and <a href=\"https://gitlab.freedesktop.org/mesa/mesa/blob/master/src/mesa/main/mipmap.c#L2224\" rel=\"nofollow noreferrer\">software</a> <code>glGenerateMipmap()</code> implementations."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "reply_to_user": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 1, "creation_date": 1551343699, "post_id": 54911010, "comment_id": 96608186, "body": "@Soonts: NPOT textures are core since OpenGL 2.0. Every GPU after the Geforce FX series (NV30, around 2003) fully supports them."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1551363922, "post_id": 54911010, "comment_id": 96620283, "body": "@BDL Textures \u2014 yes. Generating mipmaps for them \u2014 no. GLES 2.0, and therefore WebGL, doesn\u2019t support them: <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glGenerateMipmap.xml\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/&hellip;</a> BTW, Geforce FX doesn\u2019t support either, the support appeared in 6: <a href=\"http://download.nvidia.com/developer/Papers/2005/NP2_Mipmapping/NP2_Mipmap_Creation.pdf\" rel=\"nofollow noreferrer\">download.nvidia.com/developer/Papers/2005/NP2_Mipmapping/&hellip;</a>"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "reply_to_user": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1551368380, "post_id": 54911010, "comment_id": 96623084, "body": "@Soonts: The question is tagged <a href=\"https://stackoverflow.com/questions/tagged/openlg\">openlg</a>. If the question would be about WebGL or OpenGL-es , then it should be tagged as such. It&#39;s just suboptimal to tell DesktopGL users not to create mipmaps from NPOT textures. Anyway, my comment was just meant as a note that further visitors will not think that DesktopGL doesn&#39;t support NPOT mipmaps. Geforce FX: I said <i>after</i> GeforceFX."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1551373673, "post_id": 54911010, "comment_id": 96626123, "body": "@BDL I\u2019m not sure I got your point. As you see from question + comments, DesktopGL clearly doesn\u2019t support generation of NPOT mipmaps on OP\u2019s Linux machine when using Intel GPU."}], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1551287661, "creation_date": 1551287661, "question_id": 54911010, "link": "https://stackoverflow.com/questions/54911010/is-deepest-mipmap-level-not-an-average-of-all-the-texels", "title": "Is deepest mipmap level not an average of all the texels?", "body": "<p>I was trying to get an average of all the texels I've drawn in a texture attached to an FBO. The texture has <code>RGBA32F</code> format, so precision loss should be minimal in any case.</p>\n\n<p>For actual computation of the average I thought to use hardware generation of mipmaps, via <code>glGenerateMipmap</code> command, and then get the deepest mipmap level \u2013 1\u00d71.</p>\n\n<p>This works nicely when the texture has power-of-two dimensions. But when it's even one pixel below that, and until some other size, I get results <em>very</em> far from average.</p>\n\n<p>See e.g. the following test program:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n// glad.h is generated by the following command:\n// glad --out-path=. --generator=c --omit-khrplatform --api=\"gl=3.3\" --profile=core --extensions=\n#include \"glad/glad.h\"\n#include &lt;GL/freeglut.h&gt;\n#include &lt;glm/glm.hpp&gt;\nusing glm::vec4;\n\nGLuint vao, vbo;\nGLuint texFBO;\nGLuint program;\nGLuint fbo;\nint width=512, height=512;\n\nvoid getMeanPixelValue(int texW, int texH)\n{\n    // Get average value of the rendered pixels as the value of the deepest mipmap level\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, texFBO);\n    glGenerateMipmap(GL_TEXTURE_2D);\n\n    using namespace std;\n    // Formula from the glspec, \"Mipmapping\" subsection in section 3.8.11 Texture Minification\n    const auto totalMipmapLevels = 1+floor(log2(max(texW,texH)));\n    const auto deepestLevel=totalMipmapLevels-1;\n\n    // Sanity check\n    int deepestMipmapLevelWidth=-1, deepestMipmapLevelHeight=-1;\n    glGetTexLevelParameteriv(GL_TEXTURE_2D, deepestLevel, GL_TEXTURE_WIDTH, &amp;deepestMipmapLevelWidth);\n    glGetTexLevelParameteriv(GL_TEXTURE_2D, deepestLevel, GL_TEXTURE_HEIGHT, &amp;deepestMipmapLevelHeight);\n    assert(deepestMipmapLevelWidth==1);\n    assert(deepestMipmapLevelHeight==1);\n\n    vec4 pixel;\n    glGetTexImage(GL_TEXTURE_2D, deepestLevel, GL_RGBA, GL_FLOAT, &amp;pixel[0]);\n\n    // Get average value in an actual summing loop over all the pixels\n    std::vector&lt;vec4&gt; data(texW*texH);\n    glGetTexImage(GL_TEXTURE_2D, 0, GL_RGBA, GL_FLOAT, data.data());\n    vec4 avg(0,0,0,0);\n    for(auto const&amp; v : data)\n        avg+=v;\n    avg/=texW*texH;\n\n    std::cerr &lt;&lt; \"Mipmap value: \" &lt;&lt; pixel[0] &lt;&lt; \", \" &lt;&lt; pixel[1] &lt;&lt; \", \" &lt;&lt; pixel[2] &lt;&lt; \", \" &lt;&lt; pixel[3] &lt;&lt; \"\\n\";\n    std::cerr &lt;&lt; \"True average: \" &lt;&lt; avg[0] &lt;&lt; \", \" &lt;&lt; avg[1] &lt;&lt; \", \" &lt;&lt; avg[2] &lt;&lt; \", \" &lt;&lt; avg[3] &lt;&lt; \"\\n\";\n}\n\nGLuint makeShader(GLenum type, std::string const&amp; srcStr)\n{\n    const auto shader=glCreateShader(type);\n    const GLint srcLen=srcStr.size();\n    const GLchar*const src=srcStr.c_str();\n    glShaderSource(shader, 1, &amp;src, &amp;srcLen);\n    glCompileShader(shader);\n    GLint status=-1;\n    glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;status);\n    assert(glGetError()==GL_NO_ERROR);\n    assert(status);\n    return shader;\n}\n\nvoid loadShaders()\n{\n    program=glCreateProgram();\n\n    const auto vertexShader=makeShader(GL_VERTEX_SHADER, R\"(\n#version 330\nin vec4 vertex;\nvoid main() { gl_Position=vertex; }\n)\");\n    glAttachShader(program, vertexShader);\n\n    const auto fragmentShader=makeShader(GL_FRAGMENT_SHADER, R\"(\n#version 330\nout vec4 color;\nvoid main()\n{\n\n    color.r = gl_FragCoord.y&lt;100 ? 1 : 0;\n    color.g = gl_FragCoord.y&lt;200 ? 1 : 0;\n    color.b = gl_FragCoord.y&lt;300 ? 1 : 0;\n    color.a = gl_FragCoord.y&lt;400 ? 1 : 0;\n}\n)\");\n    glAttachShader(program, fragmentShader);\n\n    glLinkProgram(program);\n    GLint status=0;\n    glGetProgramiv(program, GL_LINK_STATUS, &amp;status);\n    assert(glGetError()==GL_NO_ERROR);\n    assert(status);\n\n    glDetachShader(program, fragmentShader);\n    glDeleteShader(fragmentShader);\n\n    glDetachShader(program, vertexShader);\n    glDeleteShader(vertexShader);\n}\n\nvoid setupBuffers()\n{\n    glGenVertexArrays(1, &amp;vao);\n    glBindVertexArray(vao);\n    glGenBuffers(1, &amp;vbo);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    const GLfloat vertices[]=\n    {\n        -1, -1,\n         1, -1,\n        -1,  1,\n         1,  1,\n    };\n    glBufferData(GL_ARRAY_BUFFER, sizeof vertices, vertices, GL_STATIC_DRAW);\n    constexpr GLuint attribIndex=0;\n    constexpr int coordsPerVertex=2;\n    glVertexAttribPointer(attribIndex, coordsPerVertex, GL_FLOAT, false, 0, 0);\n    glEnableVertexAttribArray(attribIndex);\n    glBindVertexArray(0);\n}\n\nvoid setupRenderTarget()\n{\n    glGenTextures(1, &amp;texFBO);\n    glGenFramebuffers(1,&amp;fbo);\n    glBindTexture(GL_TEXTURE_2D,texFBO);\n    glBindTexture(GL_TEXTURE_2D,0);\n}\n\nbool init()\n{\n    if(!gladLoadGL())\n    {\n        std::cerr &lt;&lt; \"Failed to initialize GLAD\\n\";\n        return false;\n    }\n    if(!GLAD_GL_VERSION_3_3)\n    {\n        std::cerr &lt;&lt; \"OpenGL 3.3 not supported\\n\";\n        return false;\n    }\n\n    setupRenderTarget();\n    loadShaders();\n    setupBuffers();\n\n    return true;\n}\n\nbool inited=false;\nvoid reshape(int width, int height)\n{\n    ::width=width;\n    ::height=height;\n    std::cerr &lt;&lt; \"New size: \" &lt;&lt; width &lt;&lt; \"x\" &lt;&lt; height &lt;&lt; \"\\n\";\n\n    if(!inited)\n    {\n        if(!(inited=init()))\n            std::exit(1);\n    }\n    glViewport(0,0,width,height);\n\n    glBindTexture(GL_TEXTURE_2D,texFBO);\n    glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA32F,width,height,0,GL_RGBA,GL_UNSIGNED_BYTE,nullptr);\n    glBindTexture(GL_TEXTURE_2D,0);\n    glBindFramebuffer(GL_FRAMEBUFFER,fbo);\n    glFramebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D,texFBO,0);\n    const auto status=glCheckFramebufferStatus(GL_FRAMEBUFFER);\n    assert(status==GL_FRAMEBUFFER_COMPLETE);\n    glBindFramebuffer(GL_FRAMEBUFFER,0);\n}\n\nvoid display()\n{\n    if(!inited)\n    {\n        if(!(inited=init()))\n            std::exit(1);\n    }\n\n    glBindFramebuffer(GL_FRAMEBUFFER,fbo);\n\n    glUseProgram(program);\n\n    glBindVertexArray(vao);\n    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);\n    glBindVertexArray(0);\n\n    getMeanPixelValue(width, height);\n\n    // Show the texture on screen\n    glBindFramebuffer(GL_READ_FRAMEBUFFER,fbo);\n    glBindFramebuffer(GL_DRAW_FRAMEBUFFER,0);\n    glBlitFramebuffer(0,0,width,height,0,0,width,height,GL_COLOR_BUFFER_BIT,GL_NEAREST);\n\n    glFinish();\n}\n\nint main(int argc, char** argv)\n{\n    glutInitContextVersion(3,3);\n    glutInitContextProfile(GLUT_CORE_PROFILE);\n    glutInit(&amp;argc, argv);\n\n    glutInitDisplayMode(GLUT_RGB);\n\n    glutInitWindowSize(width, height);\n    glutCreateWindow(\"Test\");\n    glutDisplayFunc(display);\n    glutReshapeFunc(reshape);\n\n    glutMainLoop();\n}\n</code></pre>\n\n<p>I get the following output when I resize the window vertically:</p>\n\n<pre><code>New size: 512x512\nMipmap value: 0.195312, 0.390625, 0.585938, 0.78125\nTrue average: 0.195312, 0.390625, 0.585938, 0.78125\nNew size: 512x511\nMipmap value: 0, 0, 1, 1\nTrue average: 0.195695, 0.391389, 0.587084, 0.782779\nNew size: 512x479\nMipmap value: 0, 0.00123596, 1, 1\nTrue average: 0.208768, 0.417537, 0.626305, 0.835073\nNew size: 512x453\nMipmap value: 0, 0.125, 1, 1\nTrue average: 0.220751, 0.441501, 0.662252, 0.883002\n</code></pre>\n\n<p>The above mipmap values are not simply imprecise average \u2013 they are not even close to corresponding averages, aside from the power-of-two size!</p>\n\n<p>This is on Kubuntu 18.04 with the following information from <code>glxinfo</code>:</p>\n\n<pre><code>Vendor: Intel Open Source Technology Center (0x8086)\nDevice: Mesa DRI Intel(R) Haswell Server  (0x41a)\nVersion: 18.2.2\n</code></pre>\n\n<p>So, what's happening here? Is the deepest mipmap level not an average of all the texels in the texture? Or is it simply a bug in the OpenGL implementation?</p>\n"}, {"tags": ["c++", "makefile", "cmake"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 6, "creation_date": 1551286446, "post_id": 54910591, "comment_id": 96588130, "body": "<b><i>How can I achieve it?</i></b> I don&#39;t understand the problem. Get rid of the Makefiles and use <code>CMake</code> for all platforms and you don&#39;t have the issue."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1551286487, "post_id": 54910591, "comment_id": 96588150, "body": "I think, you are trying to shoot yourself in the leg and asking for a best advice on shotgun placement. Stick to one build system. If you are using cmake - use cmake, and if you are using gnu make - use gnu make. Don&#39;t mix and match, it will only lead to pain and suffering."}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 2, "creation_date": 1551286488, "post_id": 54910591, "comment_id": 96588151, "body": "??? Just use cmakelists"}, {"owner": {"reputation": 522, "user_id": 7810036, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6512fa2b14b58946d77c37dc1c300d16?s=128&d=identicon&r=PG&f=1", "display_name": "Surcle", "link": "https://stackoverflow.com/users/7810036/surcle"}, "edited": false, "score": 0, "creation_date": 1551286587, "post_id": 54910591, "comment_id": 96588197, "body": "<code>Makefiles</code> are highly optimized, while <code>CMakeLists.txt</code> are not."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1551286671, "post_id": 54910591, "comment_id": 96588249, "body": "Optimised in what way? Google thinks they&#39;re so slow they invented a whole new build system <a href=\"https://ninja-build.org/\" rel=\"nofollow noreferrer\">ninja-build.org</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1551286746, "post_id": 54910591, "comment_id": 96588301, "body": "BTW, CMake has ninja support."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1551286773, "post_id": 54910591, "comment_id": 96588321, "body": "@AlanBirtles google thinks a lot of things. There is nothing wrong (performance-wise) with non-recursive makefiles."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 4, "creation_date": 1551287135, "post_id": 54910591, "comment_id": 96588513, "body": "CMake is not a build manager! It is a generator of files for other build managers, so you can generate project for IDEs (Visual Studio, Xcode, CodeBlocks, ..) or generate MakeFile, or whatever you prefer and CMake supports. So I do not undestund why do you maintain <code>CMakeLists.txt</code> and <code>Makefiles</code> at the same time."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551287238, "post_id": 54910591, "comment_id": 96588562, "body": "@SergeyA you have to get to projects the size of chrome to notice a big difference but ninja is definitely a bit faster <a href=\"https://david.rothlis.net/ninja-benchmark/\" rel=\"nofollow noreferrer\">david.rothlis.net/ninja-benchmark</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551287762, "post_id": 54910591, "comment_id": 96588859, "body": "Just use CMake and generate Makefiles when (if) needed. Don&#39;t maintain separate Makefiles."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1551288005, "post_id": 54910591, "comment_id": 96588979, "body": "@AlanBirtles You definitely don&#39;t need a project the size of Chrome to notice that ninja is <i>far</i> supperior to make. The project I work on daily is ~500k lines of C++ code and building it on a 20 core/40 threads workstation - from scratch - takes ~5min with ninja, but more than 8min with make."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1551288637, "post_id": 54910591, "comment_id": 96589297, "body": "If you use cmake with the unix makefile generator, you&#39;ll be able to use make normally. However, I&#39;d suggest using ninja since makefile are generally slow"}, {"owner": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "edited": false, "score": 2, "creation_date": 1551289573, "post_id": 54910591, "comment_id": 96589740, "body": "It is unclear what is exactly the situation. Why do you need to maintain both makefiles and cmakelists?"}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 4, "last_activity_date": 1551354951, "last_edit_date": 1551354951, "creation_date": 1551287426, "answer_id": 54910941, "question_id": 54910591, "link": "https://stackoverflow.com/questions/54910591/maintaining-makefiles-and-cmakelists-txt/54910941#54910941", "title": "Maintaining Makefiles and CMakeLists.txt", "body": "<p>CMake is not a build manager!<br>\nIt is a generator of files for other build managers!</p>\n\n<p>So you can generate project for IDEs (Visual Studio, Xcode, CodeBlocks, ..) or generate MakeFile, or whatever you prefer and CMake supports. So I do not understand why do you maintain <code>CMakeLists.txt</code> and <code>Makefiles</code> at the same time.\nJust maintain <code>CMakeLists.txt</code> and then generate respective <code>Makefiles</code> from it.</p>\n\n<p>For details see <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html\" rel=\"nofollow noreferrer\">CMake Documentation - generators</a>:</p>\n\n<blockquote>\n  <h2>Command-Line Build Tool Generators</h2>\n  \n  <p>These generators support command-line build tools. In order to use them, one must launch CMake from a command-line prompt whose environment is already configured for the chosen compiler and build tool.</p>\n  \n  <ul>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/Borland%20Makefiles.html\" rel=\"nofollow noreferrer\">Borland Makefiles</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/MSYS%20Makefiles.html\" rel=\"nofollow noreferrer\">MSYS Makefiles</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/MinGW%20Makefiles.html\" rel=\"nofollow noreferrer\">MinGW Makefiles</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/NMake%20Makefiles.html\" rel=\"nofollow noreferrer\">NMake Makefiles</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/NMake%20Makefiles%20JOM.html\" rel=\"nofollow noreferrer\">NMake Makefiles JOM</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/Ninja.html\" rel=\"nofollow noreferrer\">Ninja</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/Unix%20Makefiles.html\" rel=\"nofollow noreferrer\">Unix Makefiles</a></li>\n  <li><a href=\"https://cmake.org/cmake/help/latest/generator/Watcom%20WMake.html\" rel=\"nofollow noreferrer\">Watcom WMake</a></li>\n  </ul>\n</blockquote>\n\n<p>Bottom line you should be able to generate files for IDE or Makefile for you favorite build manager without any complications.</p>\n\n<blockquote>\n  <p>In the scenario that I'm describing, <code>CMakeLists.txt</code> files will disappear, so I won't have the chance to generate solutions with them.</p>\n</blockquote>\n\n<p>WAT? You are doing something very strange and most probably wrong and you didn't provide any details abut that.</p>\n"}, {"tags": [], "owner": {"reputation": 3572, "user_id": 5710233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5LmFgRhfZNQ/AAAAAAAAAAI/AAAAAAAAABk/Etcd11tdJGc/photo.jpg?sz=128", "display_name": "Mizux", "link": "https://stackoverflow.com/users/5710233/mizux"}, "is_accepted": false, "score": 0, "last_activity_date": 1551350632, "creation_date": 1551350632, "answer_id": 54923778, "question_id": 54910591, "link": "https://stackoverflow.com/questions/54910591/maintaining-makefiles-and-cmakelists-txt/54923778#54923778", "title": "Maintaining Makefiles and CMakeLists.txt", "body": "<p>Concerning intellisense I would say:</p>\n\n<ul>\n<li><p>Visual Studio 2017 as built-in support for CMake, <a href=\"https://devblogs.microsoft.com/cppblog/cmake-support-in-visual-studio/\" rel=\"nofollow noreferrer\">see announcement</a></p></li>\n<li><p>CMake can generate a json file with all commands see <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_EXPORT_COMPILE_COMMANDS.html\" rel=\"nofollow noreferrer\"><strong>CMAKE_EXPORT_COMPILE_COMMANDS</strong></a>\nso you can use it to have smart <a href=\"https://bastian.rieck.ru/blog/posts/2015/ycm_cmake/\" rel=\"nofollow noreferrer\">clang based completion in vim</a></p></li>\n<li><p>QtCreator as built-in support for CMake so you'll have completion too.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "is_accepted": false, "score": 0, "last_activity_date": 1551397442, "creation_date": 1551397442, "answer_id": 54935988, "question_id": 54910591, "link": "https://stackoverflow.com/questions/54910591/maintaining-makefiles-and-cmakelists-txt/54935988#54935988", "title": "Maintaining Makefiles and CMakeLists.txt", "body": "<p>Extra tip at first: Do not try to mix both handmade <code>make</code> files and <code>CMake</code> over the whole time of the project.</p>\n\n<p>The normal way is to create the make files using cmake. The extra of cmake is the cross platform and in your case the <strong>nativ</strong> support by some IDEs, eg. QtCreator, CLion(awaik). For a wide range of other IDE cmake can generate the project files.</p>\n\n<p>Example Workflow using QtCreator:</p>\n\n<ul>\n<li>Create a simple CMakeLists.txt, at least with the name of the project</li>\n<li>Load this into QtCreator</li>\n<li>Add source files, update the CMakeLists.txt from within QtCreator</li>\n<li>Build from within QtCreator, repeat</li>\n</ul>\n\n<p>But the same <code>CMakeLists.txt</code> will be used to create the make file on command line. Or on your build server or CI system.</p>\n"}], "owner": {"reputation": 522, "user_id": 7810036, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6512fa2b14b58946d77c37dc1c300d16?s=128&d=identicon&r=PG&f=1", "display_name": "Surcle", "link": "https://stackoverflow.com/users/7810036/surcle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1551397442, "creation_date": 1551286324, "question_id": 54910591, "link": "https://stackoverflow.com/questions/54910591/maintaining-makefiles-and-cmakelists-txt", "title": "Maintaining Makefiles and CMakeLists.txt", "body": "<p>When you're working to very big projects with a large amount of people, maintaining both <code>Makefiles</code> and <code>CMakeLists.txt</code> could be very difficult. I know that <code>CMakeLists.txt</code> could generate <code>Makefiles</code>, but suppose that I want to compile my code by using <code>make</code> and in the same time, use an IDE to have a kind of intellisense. How can I achieve it?</p>\n\n<p>In the scenario that I'm describing, <code>CMakeLists.txt</code> files will disappear, so I won't have the chance to generate solutions with them.</p>\n"}, {"tags": ["c++", "winapi", "createthread"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1551286427, "post_id": 54910534, "comment_id": 96588121, "body": "Your trampoline should work as-is. There&#39;s something else going on."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1551286606, "post_id": 54910534, "comment_id": 96588206, "body": "The trampoline is missing WINAPI."}, {"owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 0, "creation_date": 1551286666, "post_id": 54910534, "comment_id": 96588243, "body": "Think I cracked it. I just cast the call to trampoline to type LPTHREAD_START_ROUTINE. I&#39;ll run a full debug on this bit of code before closing this question. Why does the answer always come to you just after you ask the question?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1551286770, "post_id": 54910534, "comment_id": 96588319, "body": "Never cast a declaration error away."}, {"owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "edited": false, "score": 0, "creation_date": 1551287047, "post_id": 54910534, "comment_id": 96588466, "body": "Thanks Hans. I removed it and added the WINAPI call to the function header. Worked a charm. I&#39;d never had known that. I&#39;m familiar with the basics of what adding WINAPI does, but how would I have known to add it here? Because the thread entry function is also defined as that? Because I&#39;m dealing with a windows function (CreateThread)?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1551290099, "post_id": 54910534, "comment_id": 96590005, "body": "@Ben because <code>CreateThread()</code> takes an <code>LPTHREAD_START_ROUTINE</code> as input, which is defined as a pointer to a function that uses <code>WINAPI</code> (<code>__stdcall</code>) as its calling convention.  Obviously, whatever function you pass to <code>CreateThread()</code> must match what it is expecting."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1551299643, "post_id": 54910534, "comment_id": 96594385, "body": "Note that in VC++ at least you can use a stateless lambda as the thread procedure rather than a free function, and it will pick up the calling convention automatically."}], "answers": [{"tags": [], "owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "is_accepted": true, "score": 1, "last_activity_date": 1551803989, "creation_date": 1551803989, "answer_id": 55007595, "question_id": 54910534, "link": "https://stackoverflow.com/questions/54910534/winapi-create-new-thread-on-class-member-function-incompatable-parameter-type/55007595#55007595", "title": "WINAPI: Create new thread on class member function - incompatable parameter type", "body": "<p>Answer courtesy of Hans Passant. See Comments on question:</p>\n\n<p><strong>The trampoline is missing WINAPI in its definition.</strong></p>\n"}], "owner": {"reputation": 332, "user_id": 4196087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bfd69164d18d75fcf3f6807cf8d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4196087/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 55007595, "answer_count": 1, "score": -1, "last_activity_date": 1551803989, "creation_date": 1551286115, "last_edit_date": 1551286714, "question_id": 54910534, "link": "https://stackoverflow.com/questions/54910534/winapi-create-new-thread-on-class-member-function-incompatable-parameter-type", "title": "WINAPI: Create new thread on class member function - incompatable parameter type", "body": "<p>I've been re-architecting some fairly procedural C++ into something more classy. The original code runs just fine and part of it spins up a new thread to do some file cleaning. The function that does this cleaning is the entry point for the new thread. See code below. NB: This code won't execute, but it shows the principle that worked.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n// Structure for passing application data to a new thread.\ntypedef struct threadData {\n    networkShare*   netArchive;\n    rig*            rigInfo;\n    rigDatabase*    dbConn;\n    networkConn*    netConn;\n    char*           logBuffer;\n} THREADDATA;\n\n// Global handle to a mutex object\n// Used to control access to the inter thread log buffer\nHANDLE ghMutex;\n\nDWORD WINAPI cleanLocalArchive(LPVOID lpParam) {\n    THREADDATA* p_threadData = (THREADDATA*)lpParam;\n\n    // ... Do stuff ...\n\n    return &lt;&lt;something&gt;&gt;;\n}\n\nint main(int argc, char** argv) {\n    // Variables for local archive thread\n    HANDLE h_CleanerThread = 0;\n    THREADDATA* p_threadData = NULL;\n    DWORD dwThreadId;\n\n    // Create a mutex with no initial owner\n    ghMutex = CreateMutex(\n        NULL,              // default security attributes\n        FALSE,             // initially not owned\n        NULL);             // unnamed mutex\n\n    if (ghMutex == NULL) {\n        printf(\"CreateMutex error: %d\\n\", GetLastError());\n        return 1;\n    }\n\n    // Declare the data structure for passing app setting to a new Thread and populate it.\n    p_threadData = DBG_NEW THREADDATA;\n    p_threadData-&gt;netArchive    = &amp;rigArchive;\n    p_threadData-&gt;rigInfo       = &amp;thisRig;\n    p_threadData-&gt;logBuffer     = (char*)malloc(BUF_SIZE);\n    p_threadData-&gt;dbConn        = &amp;archiveDB;\n    p_threadData-&gt;netConn       = &amp;netConnection;\n\n    // Initialise p_threadData-&gt;logBuffer in case we never put anything else in there.\n    sprintf_s(p_threadData-&gt;logBuffer, BUF_SIZE, \"\");\n\n    // Start a new thread\n    h_CleanerThread = CreateThread(\n        NULL,                   // default security attributes\n        0,                      // use default stack size  \n        cleanLocalArchive,      // thread function name\n        p_threadData,           // argument to thread function \n        0,                      // use default creation flags \n        &amp;dwThreadId);           // returns the thread identifier \n\n\n    // ... Do other stuff ...\n\n    return 0;\n}\n</code></pre>\n\n<p>I've now refactored the code into classes and the function \"cleanLocalArchive\" is a member function of the application class AircatFeeder. When I call this member function in the in CreateThread() I get various errors depending on what I do to the code:</p>\n\n<p>As-is: call line = \"cleanLocalArchive,\"</p>\n\n<pre><code>error C3867: 'AirCatFeeder::cleanLocalArchive': non-standard syntax; use '&amp;' to create a pointer to member\n</code></pre>\n\n<p>So I add in an ampersand: call line = \"&amp;cleanLocalArchive,\"</p>\n\n<pre><code>error C2276: '&amp;': illegal operation on bound member function expression\nerror C2660: 'CreateThread': function does not take 5 arguments\n</code></pre>\n\n<p>After some head scratching and Google-Foo I found <a href=\"https://www.gamedev.net/forums/topic/553051-error-c3867---trying-to-pass-member-function-as-parameter/\" rel=\"nofollow noreferrer\">this</a> link which I hoped would solve the issue. It certainly shed some light on the why. I created a wrapper function outside the class and tried calling that. The function and its call was as follows:</p>\n\n<p><strong>Function call:</strong></p>\n\n<pre><code>// Start a new thread\n    h_CleanerThread = CreateThread(\n        NULL,                       // default security attributes\n        0,                          // use default stack size  \n        trampoline,         // thread function name\n        p_threadData,               // argument to thread function \n        0,                          // use default creation flags \n        &amp;dwThreadId);               // returns the thread identifier \n</code></pre>\n\n<p><strong>Wrapper Function:</strong></p>\n\n<pre><code>DWORD trampoline(LPVOID data) {\n    AirCatFeeder* scheduler = static_cast&lt;AirCatFeeder*&gt;(data);\n    return scheduler-&gt;cleanLocalArchive(data);\n}\n</code></pre>\n\n<p>However, I still ended up with the same issues/error messages. Whether I call the member function, or the wrapper function, IntelliSense still reports a similar error message:</p>\n\n<pre><code>argument of type \"DWORD(*)(LPVOID lpParam)\" is incompatible with parameter of type \"LPTHREAD_START_ROUTINE\"\n</code></pre>\n\n<p>Hopefully it is now clear what I'm trying to achieve. Can someone please educate me on what I'm doing wrong? Thanks.</p>\n"}, {"tags": ["c++", "compiler-optimization", "rvo"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1551285744, "post_id": 54910348, "comment_id": 96587672, "body": "Obviously depends on the compiler, I would imagine yes, but you&#39;d have to test it with your compiler."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1551285762, "post_id": 54910348, "comment_id": 96587685, "body": "You could check on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1551285783, "post_id": 54910348, "comment_id": 96587705, "body": "Build with optimization enabled, and look at the generated assembly code. It could be that the compiler inlines your calls."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551286019, "post_id": 54910348, "comment_id": 96587871, "body": "If code is split in several TUs, it would be harder and require LTO."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1551286147, "post_id": 54910348, "comment_id": 96587949, "body": "Defining your functions within your class, or in the header with the <code>inline</code> keyword, will improve the chances that this will be optimized."}, {"owner": {"reputation": 3031, "user_id": 8564999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139177e603c62750b3607ca7695954af?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Larionov", "link": "https://stackoverflow.com/users/8564999/alexey-larionov"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1551286372, "post_id": 54910348, "comment_id": 96588086, "body": "@1201ProgramAlarm inlining is kind of unreliable. From my point of view compiler can see the opportunity for some kind of RVO, but does it really?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551286382, "post_id": 54910348, "comment_id": 96588093, "body": "Any compiler worth it&#39;s price will inline those calls."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1551286492, "post_id": 54910348, "comment_id": 96588153, "body": "@AlexLarionov If every Translation Unit has the definition of those functions they can be easily optimized.  If they are only defined in a .CPP file you have to rely on Link Time Optimization which is a more involved process."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551286779, "post_id": 54910348, "comment_id": 96588326, "body": "&quot;Is optimization applied to single-line functions?&quot; - Just as much as they are applied to multi-line functions. The number of <i>C++ source code</i> lines has no bearing on what optimizations the compiler will use or not use (well, that&#39;s a simplification, but <i>in general</i> true). And if you add LTO into the mix, then certainly (one line) functions can be optimized even more."}, {"owner": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551287021, "post_id": 54910348, "comment_id": 96588456, "body": "@Jarod42 I don&#39;t think copy elision requires LTO. Larger returned objects get allocated on the caller&#39;s stack (depends on the calling conventions, but that&#39;s what happens on 64-bit Windows) and the callee gets the address as an argument. The job of copy elision is to use this address for all the returned objects on the call chain, which is unrelated to inlining, LTO and stuff like that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551287143, "post_id": 54910348, "comment_id": 96588521, "body": "Why would the compiler treat 1 line functions special? They are just functions. And the single line (I&#39;m guessing &quot;statement&quot;) they contain can involve some <i>very</i> complex code that requires <i>way more</i> code-gen and optimization than a simple multi line (statement) function. The compiler has <i>no reason</i> to specialize the one-line case."}, {"owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551287846, "post_id": 54910348, "comment_id": 96588898, "body": "@SergeyA Not if <code>AddDetails</code> isn&#39;t at least declared with static scope. If exported from TU, cost model for code size can already block inlining based on overhead for parameter expansion. Constructor, operators and <code>AddDetails</code> declared in same TU, with <code>Obj</code> having default move constructor would be required for almost guaranteed inlining."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "edited": false, "score": 0, "creation_date": 1551289575, "post_id": 54910348, "comment_id": 96589742, "body": "@AlexeyB.: Indeed copy elision is special, but I read the question more generally (as <code>assign</code>/<code>operator=</code> or comparison operators where (N)RVO doesn&#39;t apply)."}], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "reply_to_user": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "edited": false, "score": 0, "creation_date": 1551287883, "post_id": 54910660, "comment_id": 96588916, "body": "@Ext3h That&#39;s not true. Copy elision will happen even when the move constructor has side effects."}], "tags": [], "owner": {"reputation": 968, "user_id": 302086, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/565290baf7f55e65e89b5b9368552b9d?s=128&d=identicon&r=PG", "display_name": "Alexey B.", "link": "https://stackoverflow.com/users/302086/alexey-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1551286489, "creation_date": 1551286489, "answer_id": 54910660, "question_id": 54910348, "link": "https://stackoverflow.com/questions/54910348/is-optimization-applied-to-single-line-functions/54910660#54910660", "title": "Is optimization applied to single-line functions?", "body": "<p>From what I understand, modern compilers are required to apply copy elision in your cases. According to <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/copy_elision</a>, when you write <code>return Obj(a.float_val + b, a.some_other_stuff)</code>, the constructor call is a prvalue; returning it will not create a temporary object, and so no move or copy will happen.</p>\n"}, {"tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": true, "score": 2, "last_activity_date": 1551287902, "last_edit_date": 1551287902, "creation_date": 1551286861, "answer_id": 54910778, "question_id": 54910348, "link": "https://stackoverflow.com/questions/54910348/is-optimization-applied-to-single-line-functions/54910778#54910778", "title": "Is optimization applied to single-line functions?", "body": "<h2>Overall</h2>\n\n<p><strong>Yes</strong> See the instructions clang generated on <a href=\"https://godbolt.org/z/VB23-W\" rel=\"nofollow noreferrer\">https://godbolt.org/z/VB23-W</a> Line 21</p>\n\n<pre><code>   movsd   xmm0, qword ptr [rsp]   # xmm0 = mem[0],zero\n   addsd   xmm0, qword ptr [rip + .LCPI3_0]\n</code></pre>\n\n<p>it just takes the applies the code of <code>AddDetails</code> directly instead of even calling your operator+. This is called inlining and worked even for this chain of value returning calls.</p>\n\n<h2>Details</h2>\n\n<p>Not only RVO optimisation can happen to single line functions but every other optimisation including inlining see <a href=\"https://godbolt.org/z/miX3u1\" rel=\"nofollow noreferrer\">https://godbolt.org/z/miX3u1</a> and <a href=\"https://godbolt.org/z/tNaSW\" rel=\"nofollow noreferrer\">https://godbolt.org/z/tNaSW</a> .</p>\n\n<p>Look at this you can see gcc and clang heavily optimises even the non inlined declared code, ( <a href=\"https://godbolt.org/z/8Wf3oR\" rel=\"nofollow noreferrer\">https://godbolt.org/z/8Wf3oR</a> )</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Obj {\n    Obj(double val) : float_val(val) {}\n    Obj operator+(float b) {\n        return AddDetails(*this, b);\n    }\n    Obj Add(float b) {\n        return AddDetails(*this, b);\n    }\n    double val() const {\n        return float_val;\n    }\nprivate:\n    double float_val{0};\n    static inline Obj AddDetails(Obj const&amp; a, float b);\n};\n\nObj Obj::AddDetails(Obj const&amp; a, float b) {\n    return Obj(a.float_val + b);\n}\n\n\nint main() {\n    Obj foo{32};\n    Obj bar{foo + 1337};\n    std::cout &lt;&lt; bar.val() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Even without inlining no extra C-Tor Calls can be seen with </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Obj {\n    Obj(double val) : float_val(val) {}\n    Obj operator+(float);\n    Obj Add(float);\n    double val() const {\n        return float_val;\n    }\nprivate:\n    double float_val{0};\n    static Obj AddDetails(Obj const&amp; a, float b);\n};\n\nObj Obj::AddDetails(Obj const&amp; a, float b) {\n    return Obj(a.float_val + b);\n}\n\nObj Obj::operator+(float b) {\n    return AddDetails(*this, b);\n}\n\nObj Obj::Add(float b) {\n    return AddDetails(*this, b);\n}\n\nint main() {\n    Obj foo{32};\n    Obj bar{foo + 1337};\n    std::cout &lt;&lt; bar.val() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<hr>\n\n<p>However some of the optimisation is done due to the compiler knowing that the value won't change so lets change the main to </p>\n\n<pre><code>int main() {\n    double d{};\n    std::cin &gt;&gt; d;\n    Obj foo{d};\n    Obj bar{foo + 1337};\n    std::cout &lt;&lt; bar.val() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>But then you can still see the optimisations on both compilers\n<a href=\"https://godbolt.org/z/M2jaSH\" rel=\"nofollow noreferrer\">https://godbolt.org/z/M2jaSH</a> and <a href=\"https://godbolt.org/z/OyQfJI\" rel=\"nofollow noreferrer\">https://godbolt.org/z/OyQfJI</a></p>\n"}], "owner": {"reputation": 3031, "user_id": 8564999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139177e603c62750b3607ca7695954af?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Larionov", "link": "https://stackoverflow.com/users/8564999/alexey-larionov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 54910778, "answer_count": 2, "score": 1, "last_activity_date": 1551287902, "creation_date": 1551285634, "question_id": 54910348, "link": "https://stackoverflow.com/questions/54910348/is-optimization-applied-to-single-line-functions", "title": "Is optimization applied to single-line functions?", "body": "<p>I don't like to repeat myself in code, but also I don't want to lose performance by simple functions. Suppose the class has <code>operator+</code> and function <code>Add</code> with same functionality (considering former as handy way of using class in expressions and latter as \"expilicit\" way to do so)</p>\n\n<pre><code>struct Obj {\n   Obj operator+(float);\n   Obj Add(float);\n   /* some other state and behaviour */\n};\n\nObj AddDetails(Obj const&amp; a, float b) {\n   return Obj(a.float_val + b, a.some_other_stuff);\n}\n\nObj Obj::operator+(float b) {\n   return AddDetails(*this, b);\n}\n\nObj Obj::Add(float b) {\n   return AddDetails(*this, b);\n}\n</code></pre>\n\n<p>For the purpose of making changes easier both functions are implemented with auxiliary function call. Therefore, any call to operator makes 2 calls what is not really pleasant. </p>\n\n<p>But is compiler smart enough to eliminate such double calls? </p>\n\n<p>I tested with simple classes (that contain built-in types and pointers) and optimizer just doesn't calculate something not needed, but how does it behave in large systems (with hot calls especially)? </p>\n\n<p>If this is where RVO takes place, then does it work in larger sequences of calls (3-4) to fold it in 1 call?</p>\n\n<p>P.S. Yes, yes, premature optimization is the root of all evil, but still I want an answer</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1551285558, "post_id": 54910294, "comment_id": 96587570, "body": "<code>In c++ i can write const int const* for a constant pointer to an int.</code> No, thats a duplicate const for the int and none for the pointer."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1551285576, "post_id": 54910294, "comment_id": 96587586, "body": "Please separate your code from the text, it is not clear what types you try to create here"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551285661, "post_id": 54910294, "comment_id": 96587625, "body": "The difference is that you can write <code>const int &amp;</code> but you can&#39;t write <code>const int const &amp;</code>."}, {"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1551285675, "post_id": 54910294, "comment_id": 96587635, "body": "@tkausl yes i meant const int const* for const int"}, {"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551285701, "post_id": 54910294, "comment_id": 96587652, "body": "@Francois you can it wont create an error!"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551285771, "post_id": 54910294, "comment_id": 96587696, "body": "@xX_EASYHDLPMCAWPGOD_Xx Most compilers will give you an error. Visual Studio gives you a warning, though it&#39;s known to allow a lot of things it shouldn&#39;t. What compiler are you using?"}, {"owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "edited": false, "score": 0, "creation_date": 1551285847, "post_id": 54910294, "comment_id": 96587749, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7526152/easy-rule-to-read-complicated-const-declarations\">Easy rule to read complicated const declarations?</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551285859, "post_id": 54910294, "comment_id": 96587754, "body": "@xX_EASYHDLPMCAWPGOD_Xx Keep in mind that it&#39;s not because a compiler doesn&#39;t complain that code is valid or correct. The compiler is <i>not</i> required to identify every error in your code."}, {"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "edited": false, "score": 0, "creation_date": 1551286145, "post_id": 54910294, "comment_id": 96587946, "body": "Yeah :/ im using VC++"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "edited": false, "score": 0, "creation_date": 1551286449, "post_id": 54910363, "comment_id": 96588133, "body": "ty too for ur answer!"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 8, "last_activity_date": 1551286298, "last_edit_date": 1551286298, "creation_date": 1551285663, "answer_id": 54910363, "question_id": 54910294, "link": "https://stackoverflow.com/questions/54910294/whats-the-difference-between-const-int-const-and-const-int-in-c/54910363#54910363", "title": "Whats the difference between const int const&amp; and const int&amp; in C++?", "body": "<p><code>const int const*</code> is not a constant pointer to a constant <code>int</code>.  To get that you need</p>\n\n<pre><code>const int * const.\n</code></pre>\n\n<p>In your case you apply both <code>const</code> to the <code>int</code> so you have a mutable pointer to a constant <code>int</code>.</p>\n\n<p>The same thing happen to <code>const int const&amp;</code>.  To make a constant reference  to a constant <code>int</code> you would need</p>\n\n<pre><code>const int &amp; const\n</code></pre>\n\n<p>but that is illegal.</p>\n\n<p>Do note that in both <code>const int const*</code> and <code>const int const&amp;</code> it's not actually legal to apply <code>const</code> twice like that.</p>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551285908, "post_id": 54910387, "comment_id": 96587797, "body": "It seems that OP&#39;s compiler does not actually yell at them for that (though I&#39;m pretty sure you&#39;re right, and it should)."}, {"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "edited": false, "score": 0, "creation_date": 1551285960, "post_id": 54910387, "comment_id": 96587834, "body": "At Vs2017 and C++ 17 i didnt get an error :/ But ty"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1551285982, "post_id": 54910387, "comment_id": 96587848, "body": "Then instead of your compiler yelling at you, you should yell at your compiler."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "edited": false, "score": 0, "creation_date": 1551286108, "post_id": 54910387, "comment_id": 96587922, "body": "@xX_EASYHDLPMCAWPGOD_Xx If you disable language extensions with <code>&#47;Za</code> you will get an error (<a href=\"https://godbolt.org/z/Q6iFr7\" rel=\"nofollow noreferrer\">example</a>) though you should still be seeing a warning without it."}, {"owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "edited": false, "score": 0, "creation_date": 1551286365, "post_id": 54910387, "comment_id": 96588082, "body": "thats a useful tip ty!"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 5, "last_activity_date": 1551285716, "creation_date": 1551285716, "answer_id": 54910387, "question_id": 54910294, "link": "https://stackoverflow.com/questions/54910294/whats-the-difference-between-const-int-const-and-const-int-in-c/54910387#54910387", "title": "Whats the difference between const int const&amp; and const int&amp; in C++?", "body": "<blockquote>\n  <p>So is const int const&amp; a reference to a const int?</p>\n</blockquote>\n\n<p>No, that's a <a href=\"https://ideone.com/sxMeqV\" rel=\"noreferrer\">compilation error</a>.</p>\n\n<p>Try compiling something like :</p>\n\n<pre><code>int z = 0;\nconst int const&amp; a= z;\n</code></pre>\n\n<p>And you'll see the compiler will yell at you.</p>\n\n<p>You can't duplicate <code>const</code> for the same type. Your premise that <code>const int const*</code> is a constant pointer to a constant <code>int</code> is wrong too.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 5245916, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/889acd29350258819c1485cda3c06f50?s=128&d=identicon&r=PG&f=1", "display_name": "Naumann", "link": "https://stackoverflow.com/users/5245916/naumann"}, "is_accepted": false, "score": 1, "last_activity_date": 1551291191, "last_edit_date": 1551291191, "creation_date": 1551290620, "answer_id": 54911828, "question_id": 54910294, "link": "https://stackoverflow.com/questions/54910294/whats-the-difference-between-const-int-const-and-const-int-in-c/54911828#54911828", "title": "Whats the difference between const int const&amp; and const int&amp; in C++?", "body": "<p>It is always a good idea to read it backwards as suggested by the <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">Clockwise/Spiral</a> rule if you get stuck in understanding such declarations.</p>\n\n<pre><code>int const *    // pointer to const int\nint * const    // const pointer to int\nint const * const   // const pointer to const int\nint * const * p3;   // pointer to const pointer to int\nconst int * const * p4;       // pointer to const pointer to const int\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 10826121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2cMQw7ELRuk/AAAAAAAAAAI/AAAAAAAAACQ/lB4jTdi0goI/photo.jpg?sz=128", "display_name": "xX_EASY HD LP MC AWP GOD_Xx", "link": "https://stackoverflow.com/users/10826121/xx-easy-hd-lp-mc-awp-god-xx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 54910387, "answer_count": 3, "score": 3, "last_activity_date": 1551291191, "creation_date": 1551285448, "last_edit_date": 1551285636, "question_id": 54910294, "link": "https://stackoverflow.com/questions/54910294/whats-the-difference-between-const-int-const-and-const-int-in-c", "title": "Whats the difference between const int const&amp; and const int&amp; in C++?", "body": "<p>In c++ i can write <code>const int const*</code> for a constant pointer to an constant int.\nI can also write <code>const int&amp;</code> for a const reference. So is <code>const int const&amp;</code> a reference to a const int?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "ffmpeg", "libav"], "comments": [{"owner": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 1, "creation_date": 1551286803, "post_id": 54910170, "comment_id": 96588341, "body": "global_quality is ignored by modern encoders, compression_level also is only used by some encoders. Look up encoder-specific tatecontrol options."}, {"owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "reply_to_user": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 0, "creation_date": 1551287376, "post_id": 54910170, "comment_id": 96588640, "body": "Could you throw in a link? I don&#39;t care much about bitrate control, I&#39;d rather have a universal single quality value to adjust."}, {"owner": {"reputation": 61761, "user_id": 5726027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a15e6b3536ef969cf3a9828a0542aac2?s=128&d=identicon&r=PG", "display_name": "Gyan", "link": "https://stackoverflow.com/users/5726027/gyan"}, "edited": false, "score": 1, "creation_date": 1551288939, "post_id": 54910170, "comment_id": 96589449, "body": "There isn&#39;t a single quality value to adjust. x264 has CRF and can&#39;t be used alongwith bitrate.. VP8/9 have CRF but some bitrate always has to be set...etc"}], "owner": {"reputation": 867, "user_id": 1121150, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ccdd15992f342d64acaae652eff3aa60?s=128&d=identicon&r=PG", "display_name": "Bim", "link": "https://stackoverflow.com/users/1121150/bim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551285157, "creation_date": 1551285157, "question_id": 54910170, "link": "https://stackoverflow.com/questions/54910170/value-range-for-avcodeccontexglobal-quality-compression-level-and-avframe", "title": "Value range for AVCodecContex::global_quality, ::compression_level and AVFrame::quality", "body": "<p>I'm trying to compress video using different codecs (WMV, MP4, H264, VP8, VP9) using FFmpeg / libav. I'm unsure on how to set the global and per-frame quality values. Even the range of values is unclear to me. The docs are not helpful.\nCurrently I'm using:</p>\n\n<pre><code>AVCodecContex::global_quality = FF_QP2LAMBDA * quality; // no idea about range, default seems to be 0\nAVCodecContex::compression_level = 0; // There is FF_COMPRESSION_DEFAULT (-1), which seems to be the default\nAVFrame::quality = FF_LAMBDA_MAX * quality; // docs say range is [1, FF_LAMBDA_MAX], default seems to be 0\n</code></pre>\n\n<p>quality is in the range [0,1], where 0 means best image quality. Only 0 seems to do anything for me and leads to ok-quality videos. All other values produce low-quality output.<br>\nAny clarification on how to set these values is welcome.</p>\n"}, {"tags": ["c++", "class", "templates", "linked-list"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1551284949, "post_id": 54910082, "comment_id": 96587155, "body": "a default constructor is one that can be called without parameters, other than that the error message is quite clear"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551285057, "post_id": 54910082, "comment_id": 96587219, "body": "I know it seems clear but I did make a default constructor(without parameters) for both node and customer class but still it gave me the same error"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1551285088, "post_id": 54910082, "comment_id": 96587244, "body": "Where did you do that?  It is not in the code you posted"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551285155, "post_id": 54910082, "comment_id": 96587289, "body": "try to compile <code>auto x = Customers();</code> you will get the same error message, because thats what your linked list is trying to do as well (actually I didnt fully read the code but that must be the case)"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551285228, "post_id": 54910082, "comment_id": 96587344, "body": "@NathanOliver No it isnt in the code above but i tried it before still didnt work"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "edited": false, "score": 0, "creation_date": 1551285255, "post_id": 54910082, "comment_id": 96587363, "body": "Wait lol lemme try again. If thats the case im a complete idiot"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551285403, "post_id": 54910082, "comment_id": 96587463, "body": "@NathanOliver You were right thats the issue. Damn silly me. But why does it even require a default constructor as Im not even calling it?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551285421, "post_id": 54910082, "comment_id": 96587469, "body": "I was about to answer. You do not need the default constructor, except for a temporary value you immediately discard. If you fix node&#39;s constructor, this will compile."}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551285427, "post_id": 54910082, "comment_id": 96587476, "body": "@NathanOliver I&#39;ll check the other post"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551285444, "post_id": 54910082, "comment_id": 96587489, "body": "It is calling the default constructor in node::node"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551285486, "post_id": 54910082, "comment_id": 96587520, "body": "As the dupe says, if you do not initialize a member in the class member initialization list part of the constructor, the compiler calls the default constructor for you.  This is required because all objects must be constructed before the body of the constructor is entered."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551285504, "post_id": 54910082, "comment_id": 96587528, "body": "the place where it is called should be hidden somewhere in the full error message (btw thats why you should have included the full error message in the question)"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551285823, "post_id": 54910082, "comment_id": 96587737, "body": "Pardon me, but do you have a few moments to talk about our lord and savior, the standard library? (now that we&#39;ve covered the actual error, this is just std::list with less capabilities and extra risk)"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551285986, "post_id": 54910082, "comment_id": 96587852, "body": "@KennyOstrom So Im trying to create another overloaded constructor for node na. So i tried &lt; node(t obj(std::string a)); &gt;. Doesnt work. What am I doing wrong?"}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551286016, "post_id": 54910082, "comment_id": 96587870, "body": "@KennyOstrom Lol yeah i know. But i just wanted to do it myself yk just for practice"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551286122, "post_id": 54910082, "comment_id": 96587930, "body": "Do not create another constructor for node. Look at the constructor for node again, and look at NathanOliver&#39;s last comment again. What&#39;s the value of &quot;this.obj&quot; before you assign something to it? (rhetorical question) Good luck."}, {"owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1551286280, "post_id": 54910082, "comment_id": 96588034, "body": "@KennyOstrom Thanks for that edit Hahaha. I kinda get it now."}], "owner": {"reputation": 21, "user_id": 7863712, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CojEZXjU9og/AAAAAAAAAAI/AAAAAAAABFQ/T-B0zHE-94k/photo.jpg?sz=128", "display_name": "Abdullah Nawaz Khan", "link": "https://stackoverflow.com/users/7863712/abdullah-nawaz-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1551285155, "answer_count": 0, "score": 1, "last_activity_date": 1551284900, "creation_date": 1551284900, "question_id": 54910082, "link": "https://stackoverflow.com/questions/54910082/unable-to-store-classes-inside-my-template-linked-list", "closed_reason": "Duplicate", "title": "Unable to store classes inside my template Linked List", "body": "<p>I am creating a linked list template class. I am able to store all the basic data types and even structs in it. But it does not allow me to store classes in it. The error it gives is \"Error C2512 'Customers': no appropriate default constructor available\". And the error points me to the constructor i made of node struct in MyLinkList.h. Help would be greatly appreciated.</p>\n\n<pre><code>//MAIN FUNCTION\n#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"MyLinkList.h\"\n#include \"Customers.h\"\n\n\nint main(){\n\n    std::string name = \"Abdullah\";\n\n    Customers c1(name);\n\n    MyLinkList&lt;Customers&gt; listA;\n\n    listA.insert(c1);\n\n    return 0;\n}\n\n\n//Linked List template header file\n\n#pragma once\n\n#include &lt;iostream&gt;\n\ntemplate &lt;class t&gt;\nclass MyLinkList {\n\nprivate:\n    struct node {\n\n        t obj;\n        node *next;\n\n        node(t obj);\n\n    };\n\n    node *head, *tail;\n\npublic:\n    MyLinkList();\n\n    void insert(t obj);\n\n    node* searchGet(t obj);\n\n    void Delete(t obj);\n\n    void sort();\n\n    void display();\n\n};\n\ntemplate &lt;class t&gt;\nMyLinkList&lt;t&gt;::node::node(t obj) {\n\n    this-&gt;obj = obj;\n    this-&gt;next = NULL;\n\n}\n\n\ntemplate &lt;class t&gt;\nMyLinkList&lt;t&gt;::MyLinkList() {\n\n    head = tail = NULL;\n\n}\n\ntemplate &lt;class t&gt;\nvoid MyLinkList&lt;t&gt;::insert(t obj) {\n\n    node *newNode = new node(obj);\n\n\n    if (head == NULL) {\n\n        head = tail = newNode;\n\n    }\n    else {\n\n        tail-&gt;next = newNode;\n        tail = newNode;\n\n    }\n\n}\n\ntemplate &lt;class t&gt;\ntypename MyLinkList&lt;t&gt;::node* MyLinkList&lt;t&gt;::searchGet(t obj) {\n\n    node *curr = head;\n\n    while (curr-&gt;obj != obj) {\n\n        curr = curr-&gt;next;\n\n    }\n\n    return curr;\n\n}\n\ntemplate &lt;class t&gt;\nvoid MyLinkList&lt;t&gt;::Delete(t obj) {\n\n    if (head != NULL) {\n\n        node *delNode = searchGet(obj);\n\n        if (delNode == NULL) {\n\n            std::cout &lt;&lt; \"\\n\\tData was not found in List..n\";\n\n        }\n        else {\n\n            if (delNode == head) {\n\n                head = head-&gt;next;\n\n                delete delNode;\n\n            }\n            else if (delNode == tail) {\n\n                node *prevNode = head;  //we will make this prevNode the tail\n\n                while (prevNode-&gt;next != delNode) {\n\n                    prevNode = prevNode-&gt;next;\n\n                }\n\n                tail = prevNode;\n                tail-&gt;next = NULL;\n\n                delete delNode;\n\n            }\n            else {\n\n                node *prevNode = head;  //we will link this with the delNode-&gt;next\n\n                while (prevNode-&gt;next != delNode) {\n\n                    prevNode = prevNode-&gt;next;\n\n                }\n\n                prevNode-&gt;next = delNode-&gt;next;\n\n                delete delNode;\n\n            }\n\n        }\n\n    }\n    else {\n\n        std::cout &lt;&lt; \"\\n\\tThe List is Empty..\\n\";\n\n    }\n}\n\ntemplate &lt;class t&gt;\nvoid MyLinkList&lt;t&gt;::sort() {\n\n    node *nodeA = head;\n    node *nodeB;\n\n    while (nodeA != NULL) {\n\n        nodeB = nodeA-&gt;next;\n\n        while (nodeB != NULL) {\n\n            if (nodeB-&gt;obj &lt; nodeA-&gt;obj) {\n\n                t temp = nodeA-&gt;obj;\n                nodeA-&gt;obj = nodeB-&gt;obj;\n                nodeB-&gt;obj = temp;\n\n            }\n\n            nodeB = nodeB-&gt;next;\n\n        }\n\n        nodeA = nodeA-&gt;next;\n\n    }\n\n}\n\ntemplate &lt;class t&gt;\nvoid MyLinkList&lt;t&gt;::display() {\n\n    node *curr = head;\n\n    while (curr != NULL) {\n\n        std::cout &lt;&lt; curr-&gt;obj &lt;&lt; std::endl;\n\n        curr = curr-&gt;next;\n\n    }\n\n}\n\n\n//Customer Header File\n#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Customers {\n\nprivate:\n\n    std::string name;\n    int customerID;\n    static int id;\n\npublic:\n\n    Customers(std::string name);\n\n    friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp; stream, const Customers&amp; c);\n\n};\n\n\n//Customer.cpp file\n#include \"pch.h\"\n#include \"Customers.h\"\n\nint Customers::id = 0;\n\nCustomers::Customers(std::string name) {\n\n    id++;\n\n    this-&gt;name = name;\n    this-&gt;customerID = id;\n\n}\n\nstd::ostream&amp; operator &lt;&lt;(std::ostream&amp; stream, const Customers&amp; c) {\n\n    return stream &lt;&lt; \"Name : \" &lt;&lt; c.name + \"\\nID   : \" &lt;&lt; c.customerID &lt;&lt; \"\\n\";\n\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551284181, "post_id": 54909496, "comment_id": 96586676, "body": "See also <a href=\"http://www.gotw.ca/gotw/076.htm\" rel=\"nofollow noreferrer\">gotw.ca/gotw/076.htm</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551284256, "post_id": 54909496, "comment_id": 96586728, "body": "We actually use this &quot;hack&quot; in <i>one</i> place in our code base to be able to call a private member function in a library that we <i>really need to</i> call ;-) But, I suspect it could also be useful in test frameworks where you may want to test protected and private members without having to inject friends and other stuff."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551284401, "post_id": 54909496, "comment_id": 96586832, "body": "If you follow a few links from the answer, you get to <a href=\"https://gist.github.com/dabrahams/1528856\" rel=\"nofollow noreferrer\">this</a> commented version, where it is elaborated that explicit instantiations are the only place where you can form member function/field pointers while ignoring access. There is even more explanation in <a href=\"https://github.com/hliberacki/cpp-member-accessor\" rel=\"nofollow noreferrer\">this</a> library linked in the comments to an answer in the question you linked."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551284879, "post_id": 54909496, "comment_id": 96587103, "body": "@MaxLanghof I actually saw those, but couldn&#39;t find the source of their claims."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1551284893, "post_id": 54909496, "comment_id": 96587114, "body": "We used to use this to workaround buggy <code>std::fstream</code> implementation in older visual studio version by accessing the underlying <code>FILE</code> handle"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551284974, "post_id": 54909496, "comment_id": 96587170, "body": "@Jarod42 <a href=\"https://godbolt.org/z/dr8bH9\" rel=\"nofollow noreferrer\">Huh?</a> Do inline variables have to be initialized?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551285198, "post_id": 54909496, "comment_id": 96587320, "body": "@PasserBy: <a href=\"http://coliru.stacked-crooked.com/a/663fc44a027de678\" rel=\"nofollow noreferrer\">Clang link error</a> and <a href=\"http://coliru.stacked-crooked.com/a/a4e55a9aa5d33392\" rel=\"nofollow noreferrer\">No errors</a>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551285674, "post_id": 54909496, "comment_id": 96587634, "body": "@Jarod42 Seems like a bug to me. [basic.def]/2 specifies declarations are also definitions unless its one of the items in the list, of which there isn&#39;t inline variable declarations."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 11, "last_activity_date": 1551284716, "last_edit_date": 1551284716, "creation_date": 1551284556, "answer_id": 54909974, "question_id": 54909496, "link": "https://stackoverflow.com/questions/54909496/access-control-in-template-parameters/54909974#54909974", "title": "Access control in template parameters", "body": "<p>From <a href=\"http://eel.is/c++draft/temp.spec#6\" rel=\"noreferrer\">[temp.spec]/6</a> (emphasis mine):</p>\n\n<blockquote>\n  <p><strong>The usual access checking rules do not apply to names in a declaration of an explicit instantiation or explicit specialization</strong>, with the exception of names appearing in a function body, default argument, base-clause, member-specification, enumerator-list, or static data member or variable template initializer.\n  [\u2009Note: In particular, the template arguments and names used in the function declarator (including parameter types, return types and exception specifications) may be private types or objects that would normally not be accessible.\n  \u2014\u2009end note\n  \u2009]</p>\n</blockquote>\n\n<p>So this technique you see abuses this rule, which is primarely there to allow implementers of a class specialize templates (such as traits) with private types or other private entities </p>\n"}], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 8, "accepted_answer_id": 54909974, "answer_count": 1, "score": 18, "last_activity_date": 1551285827, "creation_date": 1551282998, "last_edit_date": 1551285827, "question_id": 54909496, "link": "https://stackoverflow.com/questions/54909496/access-control-in-template-parameters", "title": "Access control in template parameters", "body": "<p>Inspired from <a href=\"https://stackoverflow.com/a/54907320/4832499\">this answer</a>, which claims to subvert the access control system, I wrote the following minimal version of the hack</p>\n\n<pre><code>template&lt;typename T&gt;\ninline T memptr{};\n\ntemplate&lt;auto Val&gt;\nstruct setptr\n{\n    struct setter { setter() { memptr&lt;decltype(Val)&gt; = Val; } };\n    static setter s;\n};\n\ntemplate&lt;auto Val&gt;\ntypename setptr&lt;Val&gt;::setter setptr&lt;Val&gt;::s{};\n</code></pre>\n\n<p>which is then <a href=\"https://godbolt.org/z/Tzaz1M\" rel=\"noreferrer\">used as</a></p>\n\n<pre><code>class S\n{\n    int i;\n};\n\ntemplate struct setptr&lt;&amp;S::i&gt;;\n\nauto no_privacy(S&amp; s)\n{\n    return s.*memptr&lt;int S::*&gt;;\n}\n</code></pre>\n\n<p>Why doesn't <code>template struct setptr&lt;&amp;S::i&gt;;</code> violate access control?</p>\n\n<p>Is it because <a href=\"https://timsong-cpp.github.io/cppwp/class.access#4\" rel=\"noreferrer\">[class.access]</a></p>\n\n<blockquote>\n  <p>Access control is applied uniformly to all names, whether the names are referred to from <strong>declarations or expressions</strong>.</p>\n</blockquote>\n\n<p>specifically doesn't include instantiations? In which case, why doesn't it include instantiations?</p>\n\n<p><sub><strong>Errata</strong>: Explicit instantiations are also classified as declarations.</sub></p>\n"}, {"tags": ["c++", "database", "multithreading", "sqlite", "concurrency"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551284255, "post_id": 54909446, "comment_id": 96586726, "body": "I&#39;d expect trying to read from 8 files on the same drive at the same time to be slower than reading one. The <a href=\"https://www.sqlite.org/threadsafe.html\" rel=\"nofollow noreferrer\">thread mode</a> being used makes a difference too... Make sure you&#39;re using multithread and not serialized."}, {"owner": {"reputation": 1, "user_id": 3726376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628787644/picture?type=large", "display_name": "pituke", "link": "https://stackoverflow.com/users/3726376/pituke"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1551286266, "post_id": 54909446, "comment_id": 96588025, "body": "I meant the ~20 MB/s as whole bandwidth, not for one file. While reading single file, reading speed from disk is ~200 MB/s, while reading multiple files at time, reading speed from disk is ~20 MB/s. It looks like to some kind of lock occuring. I try open sqlite files on single-threaded mode and also for multithreaded-mode. Both are without change."}], "owner": {"reputation": 1, "user_id": 3726376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628787644/picture?type=large", "display_name": "pituke", "link": "https://stackoverflow.com/users/3726376/pituke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551282881, "creation_date": 1551282881, "question_id": 54909446, "link": "https://stackoverflow.com/questions/54909446/concurrent-select-in-sqlite-is-very-slow", "title": "Concurrent select in sqlite is very slow", "body": "<p>When I execute SELECT query on single sqlite database, reading speed from my hdd reach almost ~200 MB/s. When I try to open 8 sqlite files simultaneously, run 8 threads and each of thread execute select for single sqlite, reading speed decrease to ~20 MB/s. Why is that so? Each sqlite I use as single-thread mode with \"journal_mode = wal\" and \"synchronous = off\". Do you have any idea? Thank you.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551283131, "post_id": 54909372, "comment_id": 96585952, "body": "<code>std::list&lt;Edge&gt; li = *i</code> makes a copy of the list, disconnected from the entry in <code>adjList</code>. You should take a reference instead: <code>std::list&lt;Edge&gt; &amp; li = *i</code>"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551283491, "post_id": 54909372, "comment_id": 96586199, "body": "Also, you don&#39;t have to type out all the types of your iterators, C++11 can infer types from expressions, so <code>auto iter = li.begin()</code>"}, {"owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551284072, "post_id": 54909372, "comment_id": 96586620, "body": "thank you very much for the corrections my friends, i will surely keep this information in mind in further implementation of my codes :)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551284354, "post_id": 54909645, "comment_id": 96586799, "body": "thank you very much for the answer, i will check it in a couple of hours !"}, {"owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551303381, "post_id": 54909645, "comment_id": 96596020, "body": "i don&#39;t know why, but for some reason i just can&#39;t figure out how to print the numbers.."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "reply_to_user": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551311043, "post_id": 54909645, "comment_id": 96598637, "body": "Print which numbers?"}, {"owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551351238, "post_id": 54909645, "comment_id": 96612709, "body": "Ah sorry, not the numbers, rather how the list looks like after the insertions from the user"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "reply_to_user": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551351384, "post_id": 54909645, "comment_id": 96612820, "body": "<code>for (int from = 0; from &lt; adjList.size(); from++) { for (const Edge&amp; e : adjList[i]) { cout &lt;&lt; &quot;edge from &quot; &lt;&lt; from &lt;&lt; &quot; to &quot; &lt;&lt; e.getId() &lt;&lt; endl; } }</code>"}, {"owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551357466, "post_id": 54909645, "comment_id": 96616383, "body": "thank you very much for the help my friend. i feel stupid to disturb you so much about this task.. but i don&#39;t quite get the output. For instance if i enter the number of edges to be 2. and then the input of from-to and weight is : 0 1 3,  then the output is the following: edge from 0 to 3 , weight 1 edge from 1 to 3, weight 1. So it&#39;s kinda outputting correctly but not that good and i can&#39;t find anything wrong with the code.."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "reply_to_user": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "edited": false, "score": 0, "creation_date": 1551357672, "post_id": 54909645, "comment_id": 96616497, "body": "Oh, i accidentally swapped the arguments to the <code>Edge</code> constructor. <code>weight</code> comes first."}], "tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 2, "last_activity_date": 1551283417, "creation_date": 1551283417, "answer_id": 54909645, "question_id": 54909372, "link": "https://stackoverflow.com/questions/54909372/adjacency-list-representation-of-a-weighted-graph/54909645#54909645", "title": "Adjacency list representation of a weighted graph", "body": "<p>A simple approach is to ask for the number of edges up front and then read that many space-separated triples of numbers in the format <code>from to weight</code>.\nThis can be as simple as:</p>\n\n<pre><code>int num_edges;\ncin &gt;&gt; num_edges;\nfor (int i = 0; i &lt; num_edges; i++) {\n    int from, to, weight;\n    cin &gt;&gt; from &gt;&gt; to &gt;&gt; weight;\n    adjList[from].push_back(Edge(to, weight));\n    // Uncomment this if you want an undirected graph\n    // adjList[to].push_back(Edge(from, weight));\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11125940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9880062ed183b2867096de2dc49b8295?s=128&d=identicon&r=PG&f=1", "display_name": "Somerandomguy", "link": "https://stackoverflow.com/users/11125940/somerandomguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "accepted_answer_id": 54909645, "answer_count": 1, "score": 0, "last_activity_date": 1551283417, "creation_date": 1551282660, "question_id": 54909372, "link": "https://stackoverflow.com/questions/54909372/adjacency-list-representation-of-a-weighted-graph", "title": "Adjacency list representation of a weighted graph", "body": "<p>So guys, recently i have been practicing a lot with data structures, graphs and etc. And i encountered a problem with a given code. I am implementing a graph, that is represented with an adjacency list.The problem i stumble across is when i try to implement the solution, using user input. I have tried to do it in many ways but i still stumble across some problems in the program. Because i am using a vector that takes a list of integers, whenever i try to fill the vector with a while loop(for instance) i don't know why, but i can't quite fill it up correctly. And since my mistake starts even from there i don't know how to proceed with the program. If you guys can give me some sort of hint on how i can implement my code to work with user input, or even give me a similar code that i work with i would be really grateful !</p>\n\n<p>This is my code:</p>\n\n<pre><code>const int N = 4;\n\n//purpose of the class is to tell what the weight of the given edge is\nclass Edge{\n   private:\n       double weight;\n       int vertex_id;\n\n   public:\n    //constructor that initializes the weight and vertex id\n\n    Edge(double w, int id)\n    {\n        weight = w;\n       vertex_id = id;\n    }\n\n    double getWeight() const\n        {\n            return weight;\n        }\n\n    int getId() const\n    {\n        return vertex_id;\n    }\n};\n\nint main()\n{\n    std::vector&lt;std::list&lt;Edge&gt;&gt; adjList(N); //creating our vector that will store a list of integers\n\n    adjList[0].push_back(Edge(4,1)); //pushing back the first neighbours of our Zero list\n    adjList[0].push_back(Edge(2,2)); //pushing back the second neighbours of our Zero list and so on...\n\n    adjList[1].push_back(Edge(4,0));\n    adjList[1].push_back(Edge(5,2));\n\n    adjList[2].push_back(Edge(2,0));\n    adjList[2].push_back(Edge(5,1));\n    adjList[2].push_back(Edge(1,3));\n\n    adjList[3].push_back(Edge(1,2));\n\n    std::vector&lt;std::list&lt;Edge&gt;&gt;::iterator i; //declaring our vector iterator\n\n    int c = 0; //we create a counter(and ofcourse assign zero to it)\n\n\n    //create the for loop, where the iterator starts at the begining of the vector\n    //and ends when the vector (adjList) ends\n\n\n    //*KEEP IN MIND THAT THE FIRST FOR LOOP ONLY ITERATES THROUGH THE NODES OF THE VECTOR\n    for (std::vector&lt;std::list&lt;Edge&gt;&gt;::iterator i = adjList.begin(); i != adjList.end(); i++)\n    {\n\n        cout &lt;&lt; \"Vertices connected to our node: \" &lt;&lt; c &lt;&lt; endl;\n        std::list&lt;Edge&gt; li = *i; //this pointer serves the purpose to get the list for each different node\n\n        //NOW THE SECOND FOR LOOP ITERATES THROUGH THE LISTS, THAT EACH NODE CONTAINS\n        for (std::list&lt;Edge&gt;::iterator iter = li.begin(); iter != li.end(); iter++)\n        {\n            cout &lt;&lt; \" (V = \" &lt;&lt; (*iter).getId() &lt;&lt; \" weight= \" &lt;&lt; (*iter).getWeight() &lt;&lt;\")\";\n        }\n\n        cout &lt;&lt; endl; // we end the line between the different nodes of the vector\n\n        c++; //increment our counter\n    }\n</code></pre>\n"}, {"tags": ["python", "c++", "dictionary"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551281964, "post_id": 54909080, "comment_id": 96585131, "body": "Are you sending the object from python to C++ or are you just converting some code from python to C++?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551281970, "post_id": 54909080, "comment_id": 96585137, "body": "you dont know what the python object really is, but you want the same in c++, why?"}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551282007, "post_id": 54909080, "comment_id": 96585165, "body": "@NathanOliver yeah converting from py to cpp"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551282008, "post_id": 54909080, "comment_id": 96585169, "body": "When asking for help with code that does not compile, please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error message in the question"}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551282066, "post_id": 54909080, "comment_id": 96585214, "body": "@user463035818 all I need is to for example say give me the 2nd element where the key is 1024."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551282077, "post_id": 54909080, "comment_id": 96585221, "body": "Will all of the <code>[1,2,3,4]</code> parts have the same number of elements and will the number of elements need to grow or shrink?"}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "edited": false, "score": 0, "creation_date": 1551282158, "post_id": 54909080, "comment_id": 96585290, "body": "the number of elements in the [...] parts are constant...but the keys can grow/shrink"}, {"owner": {"reputation": 61, "user_id": 10820147, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I0M6Z5lhZ8g/AAAAAAAAAAI/AAAAAAAAACI/AQVNv5CoY64/photo.jpg?sz=128", "display_name": "PyHomer", "link": "https://stackoverflow.com/users/10820147/pyhomer"}, "edited": false, "score": 0, "creation_date": 1551282162, "post_id": 54909080, "comment_id": 96585295, "body": "The python code is a dictionary. For example ADIG[1024] = [1,2,3,4] <a href=\"https://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow noreferrer\">for more</a> and possible duplicate <a href=\"https://stackoverflow.com/questions/15151480/simple-dictionary-in-c\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 7, "last_activity_date": 1551282783, "last_edit_date": 1551282783, "creation_date": 1551282188, "answer_id": 54909217, "question_id": 54909080, "link": "https://stackoverflow.com/questions/54909080/converting-a-python-dictionary-to-cpp-object/54909217#54909217", "title": "Converting a python dictionary to cpp object", "body": "<p>You almost got the syntax correct:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;vector&gt;\n\nstd::unordered_map&lt;int, std::vector&lt;int&gt;&gt; G_Calib_VoltageDigits = {\n    {1024, {1, 2, 3}},\n    {2048, {4, 5, 6}}\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/qwkqNN\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<p>Explanation: a <code>std::map</code> or a <code>std::unordered_map</code> contains elements as pair. A space cannot separate initializer arguments. The correct syntax require a set of braces for the pair, and another for the vector.</p>\n"}], "owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 54909217, "answer_count": 1, "score": 4, "last_activity_date": 1551286208, "creation_date": 1551281813, "last_edit_date": 1551286208, "question_id": 54909080, "link": "https://stackoverflow.com/questions/54909080/converting-a-python-dictionary-to-cpp-object", "title": "Converting a python dictionary to cpp object", "body": "<p>I have to convert a python object to c++ but I have no idea about python. The object looks like this:</p>\n\n<pre><code>VDIG = {\n    1024 : [1,2,3,4],\n    2048 : [5,6,7,8]\n}\n</code></pre>\n\n<p>From the look of it I think it might be a map of lists? </p>\n\n<p>What is the closes object that can be used in c++ ?</p>\n\n<p>I tried to do like this but it does not compile:</p>\n\n<pre><code>std::map&lt;int, std::list&lt;int&gt;&gt; G_Calib_VoltageDigits = {\n    1024 {1,2,3},\n    2048 {4, 5, 6}\n};\n</code></pre>\n\n<p>So my question is what is that data type in Python called and what is the best way to have a similar thing in c++?</p>\n"}, {"tags": ["c++", "struct", "c++17"], "comments": [{"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551280195, "post_id": 54908516, "comment_id": 96584016, "body": "No problem here. I just need to check if locked is true. Only then I use the handle."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 5, "creation_date": 1551280275, "post_id": 54908516, "comment_id": 96584073, "body": "Also note that <code>_FILE_MUTEX</code> is a reserved identifier. Identifiers with leading double underscore or leading underscore + capital letters are reserved for the implementation."}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551280482, "post_id": 54908516, "comment_id": 96584209, "body": "@MaxLanghof I had no ideea about the leading underscore. I though that if it used in some windows headers it would look good as a writing standard for me."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1551281030, "post_id": 54908516, "comment_id": 96584572, "body": "@sergiureznicencu Those underscored identifiers are specifically reserved to the implementation (of the standard library, language extensions, operating system headers etc.). If windows used unreserved identifiers, then its declarations could conflict with your (and everybody elses) declarations."}], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 11124251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7ec445519bd9edce9f26ba6d0ca742?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Z.", "link": "https://stackoverflow.com/users/11124251/daniel-z"}, "is_accepted": true, "score": 10, "last_activity_date": 1551282417, "last_edit_date": 1551282417, "creation_date": 1551280287, "answer_id": 54908597, "question_id": 54908516, "link": "https://stackoverflow.com/questions/54908516/returning-inline-defined-structure-with-uninitialised-member-c/54908597#54908597", "title": "Returning inline defined structure with uninitialised member. C++", "body": "<p>This is called aggregate initialization.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/aggregate_initialization</a></p>\n\n<blockquote>\n  <p>If the number of initializer clauses is less than the number of members <em>and bases (since C++17)</em> or initializer list is completely empty, the remaining members <em>and bases (since C++17)</em> are initialized <em>by their default member initializers, if provided in the class definition, and otherwise (since C++14)</em> by empty lists, in accordance with the usual list-initialization rules (which performs value-initialization for non-class types and non-aggregate classes with default constructors, and aggregate initialization for aggregates). If a member of a reference type is one of these remaining members, the program is ill-formed. </p>\n</blockquote>\n\n<p>Thus, in aggregate initialization you allowed to provide less clauses than members in structure. Every remaining member (e.g. X), that doesn't have default initializer, would be initialized as X{}.</p>\n"}], "owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 54908597, "answer_count": 1, "score": 2, "last_activity_date": 1551282417, "creation_date": 1551280035, "last_edit_date": 1551280248, "question_id": 54908516, "link": "https://stackoverflow.com/questions/54908516/returning-inline-defined-structure-with-uninitialised-member-c", "title": "Returning inline defined structure with uninitialised member. C++", "body": "<p>This questions received too little attention in forums.</p>\n\n<p>It has been asked before but no one captured this little detail. As a result I am not sure if I am doing the right thing:</p>\n\n<p><strong>Simple example</strong>:</p>\n\n<pre><code>struct TEST {\n    bool a;\n    int b;\n};\n\nTEST func() {\n    return { false };\n}\n</code></pre>\n\n<p>Is this correct? Note that int value is not initialized.\nWhile it would not be a problem to just set it to 0, more problems arise:</p>\n\n<pre><code>struct _FILE_MUTEX {\n    bool locked;\n    HANDLE handle;\n};\n</code></pre>\n\n<p>And the last member of the structure could become more and more complex from vector,arrays to function pointers.</p>\n\n<p>Can I leave some of the members empty when returning an inline-initialised structure?</p>\n"}, {"tags": ["c++", "inheritance", "operator-overloading", "virtual"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551280707, "post_id": 54908464, "comment_id": 96584356, "body": "related/dupe/you should read: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1551280593, "last_edit_date": 1551280593, "creation_date": 1551280395, "answer_id": 54908632, "question_id": 54908464, "link": "https://stackoverflow.com/questions/54908464/overloading-operator-for-derived-class-says-invalid-operands/54908632#54908632", "title": "overloading &lt;&lt; operator for derived class says invalid operands", "body": "<p>The problem is that you overload the <code>operator&lt;&lt;</code> as a <em>member</em> function. That means it can only be used as e.g.</p>\n\n<pre><code>instance_of_B &lt;&lt; std::cout;\n</code></pre>\n\n<p>which is translated into</p>\n\n<pre><code>instance_of_B.operator&lt;&lt;(std::cout);\n</code></pre>\n\n<p>If you want to overload <code>&lt;&lt;</code> as the stream output operator, it must be a <strong>non</strong>-member function, and take the stream as the first argument and the <code>A</code> (or derived) object as a second argument.</p>\n\n<p>To handle the output, you could then use a virtual member function that does it, and which is called by the non-member <code>operator&lt;&lt;</code> function.</p>\n\n<p>Perhaps something like</p>\n\n<pre><code>class A\n{\npublic:\n    ...\n\n    // Inline definitions of friend functions makes the functions non-member functions\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, A const&amp; a)\n    {\n        return a.output(os);\n    }\n\nprotected:\n    virtual std::ostream&amp; output(std::ostream&amp;) = 0;\n};\n\nclass B\n{\n    ...\n\nprotected:\n    std::ostream&amp; output(std::ostream&amp; os) override\n    {\n        return os &lt;&lt; \"Output from the B class\\n\";\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6780624, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207254380013340/picture?type=large", "display_name": "Bence Kov&#225;cs", "link": "https://stackoverflow.com/users/6780624/bence-kov%c3%a1cs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551280593, "creation_date": 1551279908, "last_edit_date": 1551280562, "question_id": 54908464, "link": "https://stackoverflow.com/questions/54908464/overloading-operator-for-derived-class-says-invalid-operands", "title": "overloading &lt;&lt; operator for derived class says invalid operands", "body": "<pre><code>class A {\n    //does stuff\n\npublic:\n    virtual std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os) = 0;\n};\n\nclass B : public A {\npublic:\n    //does similiar stuff\n\n    virtual std::ostream&amp; operator&lt;&lt; (std::ostream&amp; os) {\n        os &lt;&lt; \"x\" &lt;&lt; std::endl;\n    }\n}\n\nclass C {\npublic:\n    A* array[10];\n\n    A* &amp; operator()(int a) {\n        // in my code, it is a 2D array indexed with (),\n        // but that's irrelevant here\n        return array[a];\n    }\n}\n\nint main(){\n    C c = C();\n\n    //in for loop we say c(i) = new B();\n    for(int i=0; i&lt;10; i++){\n        std::cout &lt;&lt; *(c(i)); // error\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm guessing the problem is that my () operator returns with base pointer instead of a pointer of B and A doesnt have &lt;&lt;. But using templates for the indexing doesn't solve the problem either, it just makes it weirder.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "function", "delphi"], "answers": [{"tags": [], "owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "is_accepted": true, "score": 1, "last_activity_date": 1551283289, "last_edit_date": 1551283289, "creation_date": 1551281329, "answer_id": 54908944, "question_id": 54908415, "link": "https://stackoverflow.com/questions/54908415/convert-c-callback-function-to-delphi/54908944#54908944", "title": "Convert C++ callback function to Delphi", "body": "<p>Your translation is not correct. It should probably be:</p>\n\n<pre class=\"lang-pascal prettyprint-override\"><code>type\n  myStreamWriter_t = function(p1: PAnsiChar; p2: Integer; p3: Pointer): Integer cdecl;\n</code></pre>\n\n<p>Note that there is no Delphi equivalent for <code>const char *x</code> (non-const pointer to const chars), so just use PAnsiChar. In any Delphi from 2009 on, PChar is PWideChar, and that is not the equivalent to <code>char *</code>. </p>\n\n<p><code>const x: PAnsiChar</code> is the equivalent of <code>char * const x</code>, meaning the <strong>pointer</strong> is const, not the char(s) it points to.</p>\n\n<p>And it is very likely that your calling convention is wrong.</p>\n\n<p>Similarly, you should translate the other functions. But note that a function (method) on a struct may be called differently, i.e. using a proprietary Microsoft convention for methods (__thiscall). There is no Delphi equivalent for it.</p>\n\n<p>But probably you can't call such methods without getting into compatibility trouble anyway. <strong>You can mimic the behaviour of these classes/structs</strong>, but you <strong>will not be able to make them binary compatible in Delphi</strong>, unless you jump through several hoops and/or use assembler.</p>\n\n<p>More info on my website:</p>\n\n<ul>\n<li><a href=\"http://rvelthuis.de/articles/articles-convert.html\" rel=\"nofollow noreferrer\">Pitfalls of converting</a></li>\n<li><a href=\"http://rvelthuis.de/articles/articles-cppobjs.html\" rel=\"nofollow noreferrer\">Using C++ objects in Delphi</a></li>\n<li><a href=\"http://rvelthuis.de/articles/articles-dlls.html\" rel=\"nofollow noreferrer\">DLL dos and don'ts</a></li>\n<li><a href=\"http://rvelthuis.de/articles/articles-cobjs.html\" rel=\"nofollow noreferrer\">Using C object files in Delphi</a></li>\n</ul>\n\n<p>If you want to <strong>mimic</strong> the behaviour, you can do something like:</p>\n\n<pre class=\"lang-pascal prettyprint-override\"><code> OstreamWriter(p1: AnsiChar; p2: Integer; p3: Pointer): Integer; // no need for binary compatibility, so you can omit cdecl\n begin\n   TStream(p3).Write(p1^, StrLen(p1) + 1);\n   TStream(p3).Write(p2, SizeOf(p2));\n end;\n</code></pre>\n\n<p>But you will have to rewrite the entire C++ code. This is not something simple, if you already have problems with the code above.</p>\n"}], "owner": {"reputation": 27, "user_id": 7831221, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212412289691661/picture?type=large", "display_name": "Zak Phoenix McKracken", "link": "https://stackoverflow.com/users/7831221/zak-phoenix-mckracken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 54908944, "answer_count": 1, "score": 0, "last_activity_date": 1551283289, "creation_date": 1551279752, "question_id": 54908415, "link": "https://stackoverflow.com/questions/54908415/convert-c-callback-function-to-delphi", "title": "Convert C++ callback function to Delphi", "body": "<p>I need help in translating this C++ header into Delphi.</p>\n\n<p>It's a callback function prototype, and some inline functions (I have no clear idea why they are there, since it seems they are not used).</p>\n\n<p><strong><em>Source .h code:</em></strong></p>\n\n<pre><code>// This file defines 'myStreamWriter_t' a function pointer type.\n// The user of the C API need to specify a callback of above type which\n// will be called on xxx_print(...) with the formatted data.\n// For C++ API, a default callback is specified which writes data to\n// the stream specified in xxx::print\n\ntypedef int(*myStreamWriter_t)(const char* p1,\n                                     int p2,\n                                     void *p3);\n</code></pre>\n\n<p>The above It's quite easy: it should translate, in <em>Delphi</em>, as follows:</p>\n\n<pre><code>type\n   myStreamWriter_t = function(const p1:Pchar; \n                                     p2:integer;\n                                     p3:pointer):integer;\n</code></pre>\n\n<p><br>\nNow, there are other things that I don't know how to translate:</p>\n\n<p><strong><em>Souce .h code:</em></strong></p>\n\n<pre><code>#include &lt;ostream&gt;\n\nnamespace ns1 {\nnamespace ns2 {\n\ninline int OstreamWriter(const char *p1, int p2, void *p3);\n\nstruct StreamProxyOstream {\n\nstatic int writeToStream(const char* p1, int p2, void *p3);\n    // Format, to the specified 'p3' stream, which must be a pointer to a\n    // 'std::ostream', the specified 'p2' bytes length of the specified 'p1' data.\n};\n\n\ninline\nint StreamProxyOstream::writeToStream(const char *p1,\n                                      int         p2,\n                                      void       *p3)\n{\n    reinterpret_cast&lt;std::ostream*&gt;(p3)-&gt;write(p1, p2);\n    return 0;\n}\n\ninline\nint OstreamWriter(const char *p1, int p2, void *p3)\n{\n    return StreamProxyOstream::writeToStream(p1, p2, p3);\n}\n\n}  // close namespace ns2\n}  // close namespace ns1\n</code></pre>\n\n<p>...how to translate in Delphi the above??</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1551279288, "post_id": 54908124, "comment_id": 96583438, "body": "Your conclusion is wrong. And your assumption that <code>=</code> can only be applied to lvalues in a world where operator overloading is possible is at fault."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551279302, "post_id": 54908124, "comment_id": 96583446, "body": "In the case where the function returns <code>Foo</code> by value and you assign to it, you are just calling the <code>operator=</code> of a temporary object. You could further distinguish those cases by instead providing the different ref-qualifier versions of <code>operator=</code>, see <a href=\"https://godbolt.org/z/va16J3\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1551279477, "post_id": 54908124, "comment_id": 96583559, "body": "Another question with a similar topic (though probably not a duplicate) <a href=\"https://stackoverflow.com/questions/51172341/what-is-going-on-here-i-assign-result-to-result-in-c\" title=\"what is going on here i assign result to result in c\">stackoverflow.com/questions/51172341/&hellip;</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551279693, "post_id": 54908124, "comment_id": 96583702, "body": "Sorry, are you really sure you want to dive into valueness (which is unbelievably complicated with modern C++) at your level of experience?"}, {"owner": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551281432, "post_id": 54908124, "comment_id": 96584818, "body": "@SergeyA we have to deal with such stuff one day or another so sooner is better :)"}], "answers": [{"comments": [{"owner": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "edited": false, "score": 0, "creation_date": 1551280649, "post_id": 54908182, "comment_id": 96584308, "body": "In all the cases of the example I gave (except for case 6) the return value is neither an lvalue reference nor an rvalue reference so the returned value category is a pvalue! or am I wrong?"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 5, "last_activity_date": 1551279159, "creation_date": 1551279159, "answer_id": 54908182, "question_id": 54908124, "link": "https://stackoverflow.com/questions/54908124/what-is-the-logic-behind-the-lvalueness-and-rvalueness-of-a-value-returned-b/54908182#54908182", "title": "What is the logic behind the &quot;lvalueness&quot; and &quot;rvalueness&quot; of a value returned by a function", "body": "<p>You can't determine the value category of the return value by checking which constructors get called, because the compiler can in some cases elide copies and moves, eliminate a local variable used to hold a return value (NRVO), and convert copies into moves.</p>\n\n<p>However, the value category rule is simple:</p>\n\n<ul>\n<li>If the function's declared return type is an lvalue reference, then the return value is an lvalue.</li>\n<li>If the function's declared return type is an rvalue reference, then the return value is an xvalue.</li>\n<li>Otherwise, the return value is a prvalue.</li>\n</ul>\n\n<p>(There is an exception for functions: function values are always lvalues.)</p>\n"}, {"comments": [{"owner": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "edited": false, "score": 0, "creation_date": 1551283585, "post_id": 54908269, "comment_id": 96586278, "body": "I&#39;m totally convinced with your answer. But, if  I add the declaration  <code>Foo c(case4(a))</code>  expecting the move constructor to be called I get the copy constructor called instead as if the function returned an lvalue!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "edited": false, "score": 0, "creation_date": 1551283855, "post_id": 54908269, "comment_id": 96586473, "body": "@SoulimaneMammar What you are seeing there is copy elision.  In <code>Foo c(case4(a))</code> since the function takes by reference it has to make a copy of <code>a</code> to populate the return value.  It then elides that copy into the storage that <code>c</code> occupies.  Without copy elision you would see a copy and move: <a href=\"http://coliru.stacked-crooked.com/a/fbdee0c96bad1dd8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/fbdee0c96bad1dd8</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1551279701, "last_edit_date": 1551279701, "creation_date": 1551279396, "answer_id": 54908269, "question_id": 54908124, "link": "https://stackoverflow.com/questions/54908124/what-is-the-logic-behind-the-lvalueness-and-rvalueness-of-a-value-returned-b/54908269#54908269", "title": "What is the logic behind the &quot;lvalueness&quot; and &quot;rvalueness&quot; of a value returned by a function", "body": "<p>In all of your case functions except <code>case6()</code> you return by value so you do have an rvalue expression.</p>\n\n<p>The reason <code>case1()</code> and and <code>case2()</code> don't work but the others do is because the assignment operator for built in types only works on lvalues.  User defined types do not have such a restriction unless you add it yourself by adding a reference qualifier to the assignment operator.</p>\n\n<p>Changing your copy assignment operator to</p>\n\n<pre><code>Foo operator=(Foo&amp; other) &amp; //&lt;- notice the &amp; at the end\n{\n    std::cout &lt;&lt; \"copy assign used\" &lt;&lt; std::endl;\n    val = other.val;\n    return *this;\n}\n</code></pre>\n\n<p>will cause all cases except <code>case6()</code> to not compile as the trailing <code>&amp;</code> says you can only call the copy assignment operator on an lvalue.</p>\n"}], "owner": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54908269, "answer_count": 2, "score": 2, "last_activity_date": 1595018026, "creation_date": 1551279008, "last_edit_date": 1595018026, "question_id": 54908124, "link": "https://stackoverflow.com/questions/54908124/what-is-the-logic-behind-the-lvalueness-and-rvalueness-of-a-value-returned-b", "title": "What is the logic behind the &quot;lvalueness&quot; and &quot;rvalueness&quot; of a value returned by a function", "body": "<p>In the following code I was expecting the function <code>Foo f(Foo&amp; x)</code> to return an rvalue and to my surprise it doesn't. So I started testing some cases to find out the logic behind the &quot;lvalueness&quot; and &quot;rvlaueness&quot; of the returned value. It turns out that returning a named variable of type class is an lvalue. Perhaps I'm missing something</p>\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo\n{\n    int val;\npublic:\n    Foo(int value=10)\n    {\n        val = value;\n    };\n\n    Foo(Foo&amp; other)\n    {\n        std::cout &lt;&lt; &quot;copy ctor used&quot; &lt;&lt; std::endl;\n        val = other.val;\n    };\n    Foo(Foo&amp;&amp;)\n    {\n        std::cout &lt;&lt; &quot;move ctor used&quot; &lt;&lt; std::endl;\n    };\n    Foo operator=(Foo&amp; other) \n    {\n\n        std::cout &lt;&lt; &quot;copy assign used&quot; &lt;&lt; std::endl;\n        val = other.val;\n        return *this;\n    }\n    Foo operator=(Foo&amp;&amp; a)\n    {\n        std::cout &lt;&lt; &quot;move assign used&quot; &lt;&lt; std::endl;\n        return *this;\n    }\n    void set(int value) { val = value; };\n    int get() { return val; };\n\n};\n\n\nint z = 20;;\nint case1()\n{\n    return z;\n};\n\nint case2(int x)\n{\n    return x;\n};\n\nFoo case3(Foo x)\n{\n    return x;\n};\n\nFoo case4(Foo&amp; x)\n{\n    return x;\n};\n\nFoo y;\nFoo case5()\n{\n    return y;\n}\n\n\nFoo&amp; case6(Foo&amp; x)\n{\n    return x;\n};\n\nFoo case7()\n{\n    Foo x;\n    return x;\n}\n\n\n\nint main()\n{\n    \n    /*case1() = 50;*/ // as expected: not OK the return value is not an lvalue\n\n    int c = 40;\n    /*case2(c) = 50; */ // as expected: not OK the return value is not an lvalue\n    \n    Foo a;\n    Foo b = 30;\n    case3(a) = b; // OK: not at all expected the return value is an lvalue\n                  // I don't see the difference with case 2\n                  //copy construction of the argument and return value\n                  //copy assigning of b\n\n    case4(a) = b; //OK: behaving exactly like case 3 except for the copy construction\n                  // of the argument and the return value\n                  // copy assigning taking place as expected\n\n    case5() = b; // same as case 3\n\n    case6(a) = b; //just copy assigning taking place\n                  // the same reference to a is returned    \n\n    case7() = b;  // same as before\n    std::cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1551279028, "post_id": 54908076, "comment_id": 96583274, "body": "<code>ptr = new char[10001];</code> ? or better, use <code>std::string</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1551279086, "post_id": 54908076, "comment_id": 96583313, "body": "<code>sizeof(ptr)</code> is not what you expect neither."}, {"owner": {"reputation": 1, "user_id": 11125671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e226be1a8d8b39884d57b60b1e2d32?s=128&d=identicon&r=PG&f=1", "display_name": "NoobXDDD", "link": "https://stackoverflow.com/users/11125671/noobxddd"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551279355, "post_id": 54908076, "comment_id": 96583479, "body": "i cant use string i can only write my own"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 7, "last_activity_date": 1551279010, "creation_date": 1551279010, "answer_id": 54908126, "question_id": 54908076, "link": "https://stackoverflow.com/questions/54908076/c-dynamic-alocate-pointers/54908126#54908126", "title": "C++ dynamic alocate, pointers", "body": "<p><code>ptr = new char;</code> allocates <strong>exactly</strong> one byte for the pointer. Than <code>fgets(ptr, 100001, stdin);</code> attempts to read up to 100001 characters into it, obviously well beyond it's allocated boundary.</p>\n\n<p>The immediate solution would be to make sure you allocate the buffer with adequate size using array form of <code>new</code>, i.e. <code>ptr = new char[100001];</code>. This, in turn, will lead to changing the <code>delete</code> into it's array form as well: <code>delete[] ptr</code></p>\n\n<p>Also, keep in mind that <code>sizeof(ptr)</code> will give you the size of the pointer (4 or 8 bytes on most platforms). You would want to use <code>strlen</code> or similar to find out when the string ends.</p>\n\n<p>All suggestions above should be taken in light of the learning exercise. In real life, you should not do this, and instead use <code>std::string</code> and modern ways of string-oriented reading. (<code>std::getline</code> would be the most readily available).</p>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "is_accepted": true, "score": 0, "last_activity_date": 1551282987, "creation_date": 1551282987, "answer_id": 54909492, "question_id": 54908076, "link": "https://stackoverflow.com/questions/54908076/c-dynamic-alocate-pointers/54909492#54909492", "title": "C++ dynamic alocate, pointers", "body": "<p><code>sizeof</code> returns size in bytes of the object representation of type. <a href=\"https://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/sizeof</a></p>\n\n<p>One other point major point to note is that <code>ptr = new char</code> will only allocate exactly one byte from the heap. But in your code you are trying to read 100001 bytes and obviously this is beyond the accessible memory range of that pointer.</p>\n\n<p>you can modify the error as <code>ptr = new char[100001];</code> When you do this, there is another change that you must do in order to avoid memory leaks. </p>\n\n<p>That being, <code>delete[] ptr</code>. Because you have allocated 100001 adjacent bytes, you have to de-allocate them all.</p>\n"}], "owner": {"reputation": 1, "user_id": 11125671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e226be1a8d8b39884d57b60b1e2d32?s=128&d=identicon&r=PG&f=1", "display_name": "NoobXDDD", "link": "https://stackoverflow.com/users/11125671/noobxddd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54909492, "answer_count": 2, "score": 0, "last_activity_date": 1551282987, "creation_date": 1551278875, "last_edit_date": 1551279042, "question_id": 54908076, "link": "https://stackoverflow.com/questions/54908076/c-dynamic-alocate-pointers", "title": "C++ dynamic alocate, pointers", "body": "<p><strong>I get this error :</strong></p>\n\n<blockquote>\n  <p>\"crt detected that the application wrote to memory after end of heap\n  buffer\"</p>\n</blockquote>\n\n<p>this program should write every second sign...</p>\n\n<pre><code>char x = 1;\nwhile ( x != 0) {\n    char *ptr(0);\n    ptr = new char;\n    fgets(ptr, 100001, stdin);\n\n    for (char i = 0; i &lt; sizeof(ptr); i++) {\n        cout &lt;&lt; *(ptr + i);\n        i++;\n    }\n    cout &lt;&lt; endl;\n    delete ptr;\n    ptr = 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "pybind11"], "comments": [{"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "edited": false, "score": 2, "creation_date": 1551280512, "post_id": 54908007, "comment_id": 96584227, "body": "An object file is not enough, you need to build a dynamic library. Additionally, you need to provide the correct compiler flags and use a specific file name for the produced library. Are you able to use CMake? It can create the correct visual studio project files for you. Using pybind11 from CMake is really simple (4 lines), see <a href=\"https://pybind11.readthedocs.io/en/master/compiling.html#building-with-cmake\" rel=\"nofollow noreferrer\">pybind11.readthedocs.io/en/master/&hellip;</a>"}, {"owner": {"reputation": 111, "user_id": 5177587, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-Gju5DsF6_KM/AAAAAAAAAAI/AAAAAAAAAVk/wqmYQPfdMMU/photo.jpg?sz=128", "display_name": "aditya sista", "link": "https://stackoverflow.com/users/5177587/aditya-sista"}, "reply_to_user": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "edited": false, "score": 0, "creation_date": 1551283655, "post_id": 54908007, "comment_id": 96586322, "body": "also, I simply installed pybind11 using pip, and included the header file from there (does this work?). Also in the cmake, in the example, it includes a subdirectory which is a clone of the whole pybind 11 project, do I have to include that in the cmake? it seems unnecessary"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5177587, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-Gju5DsF6_KM/AAAAAAAAAAI/AAAAAAAAAVk/wqmYQPfdMMU/photo.jpg?sz=128", "display_name": "aditya sista", "link": "https://stackoverflow.com/users/5177587/aditya-sista"}, "edited": false, "score": 1, "creation_date": 1552307260, "post_id": 55101762, "comment_id": 96946425, "body": "Actually earlier I did not know what file types python&#39;s import statement actually reads, I also didn&#39;t know that it requires this to be compiled as a library file, after visual studio generates the dll, it can simply be renamed to change the extension to &quot;.pyd&quot;, and it works...(which is why in my question I asked what file types does an import statement read, and if I need to produce a dll etc)"}, {"owner": {"reputation": 3137, "user_id": 170413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2574774985d332827840f73fbd3622e?s=128&d=identicon&r=PG", "display_name": "eacousineau", "link": "https://stackoverflow.com/users/170413/eacousineau"}, "reply_to_user": {"reputation": 111, "user_id": 5177587, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-Gju5DsF6_KM/AAAAAAAAAAI/AAAAAAAAAVk/wqmYQPfdMMU/photo.jpg?sz=128", "display_name": "aditya sista", "link": "https://stackoverflow.com/users/5177587/aditya-sista"}, "edited": false, "score": 0, "creation_date": 1552309477, "post_id": 55101762, "comment_id": 96947655, "body": "Yup, quite understood! That could&#39;ve been gleaned either from running it with the documented build system, or from perusing other CPython extension docs relevant to MSVC."}, {"owner": {"reputation": 3137, "user_id": 170413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2574774985d332827840f73fbd3622e?s=128&d=identicon&r=PG", "display_name": "eacousineau", "link": "https://stackoverflow.com/users/170413/eacousineau"}, "reply_to_user": {"reputation": 111, "user_id": 5177587, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-Gju5DsF6_KM/AAAAAAAAAAI/AAAAAAAAAVk/wqmYQPfdMMU/photo.jpg?sz=128", "display_name": "aditya sista", "link": "https://stackoverflow.com/users/5177587/aditya-sista"}, "edited": false, "score": 1, "creation_date": 1552309505, "post_id": 55101762, "comment_id": 96947675, "body": "BTW If you have the answer yourself, you may want to consider posting and accepting it!"}], "tags": [], "owner": {"reputation": 3137, "user_id": 170413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2574774985d332827840f73fbd3622e?s=128&d=identicon&r=PG", "display_name": "eacousineau", "link": "https://stackoverflow.com/users/170413/eacousineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1552306877, "creation_date": 1552306877, "answer_id": 55101762, "question_id": 54908007, "link": "https://stackoverflow.com/questions/54908007/how-to-properly-compile-c-code-with-pybind11/55101762#55101762", "title": "how to properly compile c++ code with pybind11", "body": "<p>I would like to echo @pschill's answer:</p>\n\n<p>Try using a supported / documented build toolchain <em>first</em>, then try to do something off the beaten path:</p>\n\n<p><a href=\"https://pybind11.readthedocs.io/en/master/compiling.html\" rel=\"nofollow noreferrer\">https://pybind11.readthedocs.io/en/master/compiling.html</a></p>\n\n<p>I would suggest that you use CMake, try a subset of your example code, and then build your library with verbose options (e.g. <code>make VERBOSE=1</code>) to see what includes get added, and how the targets are generated.</p>\n\n<p>If you still want to keep your non-CMake workflow, then you can port the relevant flags over to VS2017.</p>\n\n<p>(That being said, CMake may have options to generate VS2017 project files.)</p>\n"}], "owner": {"reputation": 111, "user_id": 5177587, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-Gju5DsF6_KM/AAAAAAAAAAI/AAAAAAAAAVk/wqmYQPfdMMU/photo.jpg?sz=128", "display_name": "aditya sista", "link": "https://stackoverflow.com/users/5177587/aditya-sista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1505, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552306877, "creation_date": 1551278657, "question_id": 54908007, "link": "https://stackoverflow.com/questions/54908007/how-to-properly-compile-c-code-with-pybind11", "title": "how to properly compile c++ code with pybind11", "body": "<p>I have the following basic cpp code with pybind11:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;pybind11/pybind11.h&gt;\n\nint add(int i, int j) {\n    return i + j;\n}\n\nPYBIND11_MODULE(example, m) {\n    m.doc() = \"pybind11 example plugin\"; // optional module docstring\n\n    m.def(\"add\", &amp;add, \"A function which adds two numbers\");\n}\n</code></pre>\n\n<p>Here are the steps I followed (I am using visual studio 17 without python modules, I have python separately in anaconda envs):</p>\n\n<ul>\n<li>I manually added pybind11 header in the project's additional include directories.</li>\n<li>I set the target as x64 and Release</li>\n<li>I simply compiled the file, that created an object \"example.obj\" in the release directory</li>\n<li>I added the object file in a directory that is included in pythonpath</li>\n<li>tried import example in python, it gives no module named example error</li>\n</ul>\n\n<p>The documentation in pybind11 does not specify which file types the compiler should generate, is it supposed to be a library file or dll? Are there any special steps to be followed other than this?</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551346743, "post_id": 54907765, "comment_id": 96609906, "body": "If I could&#39;ve used <code>objectName</code>, I&#39;ve used it. Solution from the accepted answer does what I want"}], "answers": [{"comments": [{"owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "edited": false, "score": 0, "creation_date": 1551280553, "post_id": 54908277, "comment_id": 96584259, "body": "Unfortunately the following prints an empty string: <code>qDebug() &lt;&lt; engine.rootContext()-&gt;nameForObject(item);</code>"}, {"owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "reply_to_user": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "edited": false, "score": 2, "creation_date": 1551282521, "post_id": 54908277, "comment_id": 96585522, "body": "@Luke what about <code>qmlContext(item)-&gt;nameForObject(item)</code>?"}, {"owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "reply_to_user": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 0, "creation_date": 1551284356, "post_id": 54908277, "comment_id": 96586801, "body": "@GrecKo What do you mean exactly \u2013 what&#39;s <code>qmlContext</code>?"}, {"owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 2, "creation_date": 1551284800, "post_id": 54908277, "comment_id": 96587056, "body": "A non member function : <a href=\"https://doc.qt.io/qt-5/qqmlengine.html#qmlContext\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qqmlengine.html#qmlContext</a>"}, {"owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "reply_to_user": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 1, "creation_date": 1551346583, "post_id": 54908277, "comment_id": 96609803, "body": "@GrecKo Thank you very much! This works as expected: <code>qmlContext(item)-&gt;nameForObject(item);</code>"}], "tags": [], "owner": {"reputation": 363, "user_id": 4145027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9176a6d43fba0aeec2cbf7208d9813d?s=128&d=identicon&r=PG&f=1", "display_name": "Mosa", "link": "https://stackoverflow.com/users/4145027/mosa"}, "is_accepted": true, "score": 4, "last_activity_date": 1565295960, "last_edit_date": 1565295960, "creation_date": 1551279406, "answer_id": 54908277, "question_id": 54907765, "link": "https://stackoverflow.com/questions/54907765/how-to-get-qml-objects-id-property-using-c-api/54908277#54908277", "title": "How to get QML object&#39;s id property using C++ API", "body": "<p>I think what you need is:</p>\n\n<pre><code>QString QQmlContext::nameForObject(QObject *object)\n</code></pre>\n\n<p>You can find the description here:\n<a href=\"https://doc.qt.io/qt-5/qqmlcontext.html#nameForObject\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qqmlcontext.html#nameForObject</a></p>\n\n<blockquote>\n  <p>Returns the name of object in this context, or an empty string if object is not named in the context. Objects are named by setContextProperty(), or <strong><em>by ids in the case of QML created contexts</em></strong>.</p>\n</blockquote>\n\n<hr>\n\n<p>Based on comments received, a common pitfall is to call <code>nameForObject</code> using the wrong <code>QQmlContext</code>. (When that happens, you just the empty string.) To help with that, here is a more complete example:</p>\n\n<pre><code>  QQuickItem* const focus_item = my_QQuickWindow-&gt;activeFocusItem();\n  if (!focus_item) {\n    fprintf(stderr, \"no item has focus\");\n  } else {\n    // There are many contexts in a hierarchy. You have to get the right one:\n    QQmlContext* const context = qmlContext(focus_item);\n    if (!context) {\n      // Unsure if this branch of code is even reachable:\n      fprintf(stderr, \"item is not in any context?\");\n    } else {\n      const QString focus_item_id = context-&gt;nameForObject(focus_item);\n      fprintf(stderr, \"focus item: %s\\n\", focus_item_id.toStdString().c_str());\n    }\n  }\n</code></pre>\n"}], "owner": {"reputation": 1235, "user_id": 5114473, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/iTwYV.png?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/5114473/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 54908277, "answer_count": 1, "score": 2, "last_activity_date": 1565295960, "creation_date": 1551277876, "question_id": 54907765, "link": "https://stackoverflow.com/questions/54907765/how-to-get-qml-objects-id-property-using-c-api", "title": "How to get QML object&#39;s id property using C++ API", "body": "<p>I need to parse a QML tree and get <code>id</code>s of all QML objects along the way which have it. I noticed that <code>id</code>s don't behave like normal properties (see the example below) \u2013 value returned from <code>obj-&gt;property</code> call is an invalid <code>QVariant</code>.</p>\n\n<p>My question is \u2013 is there a way to retrieve object's <code>id</code>, even in some hacky (but reproductible) way?</p>\n\n<p>Simplified example:</p>\n\n<p>main.qml:</p>\n\n<pre><code>import QtQuick 2.9\nimport QtQuick.Window 2.2\n\nWindow {\n    visible: true\n\n    Item {\n        id: howToGetThis\n        objectName: \"item\"\n    }\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QTimer&gt;\n#include &lt;QDebug&gt;\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    QTimer::singleShot(1000, [&amp;]() {\n        auto item = engine.rootObjects()[0]-&gt;findChild&lt;QObject*&gt;(\"item\");\n        qDebug() &lt;&lt; item-&gt;property(\"objectName\");\n        qDebug() &lt;&lt; item-&gt;property(\"id\");\n    });\n\n    return app.exec();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>QVariant(QString, \"item\")\nQVariant(Invalid)\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6382329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695ca327637499002d6703813667b08a?s=128&d=identicon&r=PG&f=1", "display_name": "nullPointer90", "link": "https://stackoverflow.com/users/6382329/nullpointer90"}, "edited": false, "score": 0, "creation_date": 1551666950, "post_id": 54926196, "comment_id": 96710701, "body": "Hi Nuzhny! Thanks for your answer. But I mean, binary image only black region and white region (not blue rectangle). We must find max rectangle on black region. Image have blue rectangle is an example after find rectangle in black region."}], "tags": [], "owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "is_accepted": false, "score": 1, "last_activity_date": 1551358261, "creation_date": 1551358261, "answer_id": 54926196, "question_id": 54907636, "link": "https://stackoverflow.com/questions/54907636/how-to-find-rectangle-in-black-region-opencv-c/54926196#54926196", "title": "How to find rectangle in black region opencv (C++)", "body": "<p>If you know about rectangles count then it can use kmeans for clusterization points.\nFirst get only blue points and binarization they:</p>\n\n<pre><code>cv::Mat img = cv::imread(\"NQdmi.png\", cv::IMREAD_COLOR);\n\nstd::vector&lt;cv::Mat&gt; chans;\ncv::split(img, chans);\n\ncv::Mat diff;\ncv::absdiff(chans[2], chans[1], diff);\n\ncv::threshold(diff, diff, 1, 255, cv::THRESH_BINARY);\n\ncv::imshow(\"diff\", diff);\n</code></pre>\n\n<p>Only blue points:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HxZcZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HxZcZ.png\" alt=\"Binarization result\"></a></p>\n\n<p>Clusterization points and find rotated rectangles:</p>\n\n<pre><code>std::vector&lt;cv::Point2f&gt; points;\nfor (int y = 0; y &lt; diff.rows; ++y)\n{\n    for (int x = 0; x &lt; diff.cols; ++x)\n    {\n        if (diff.at&lt;uchar&gt;(y, x))\n        {\n            points.emplace_back(x, y);\n        }\n    }\n}\n\ncv::Mat pointsKmeans(points.size(), 1, CV_32FC2, &amp;points[0]);\ncv::Mat labels;\nint clusterCount = 2;\ncv::Mat centers;\n\ncv::kmeans(pointsKmeans, clusterCount, labels,\n    cv::TermCriteria(cv::TermCriteria::EPS+cv::TermCriteria::COUNT, 100, 1.0),\n       3, cv::KMEANS_PP_CENTERS, centers);\n\nstd::vector&lt;cv::Point2f&gt; points1;\nstd::vector&lt;cv::Point2f&gt; points2;\n\ncv::Mat draw = img.clone();\nfor (size_t i = 0; i &lt; points.size(); ++i)\n{\n    int clusterIdx = labels.at&lt;int&gt;(i);\n    if (clusterIdx &gt; 0)\n    {\n        cv::circle(draw, points[i], 2, cv::Scalar(255, 0, 0), cv::FILLED, cv::LINE_AA);\n        points1.push_back(points[i]);\n    }\n    else\n    {\n        cv::circle(draw, points[i], 2, cv::Scalar(0, 0, 255), cv::FILLED, cv::LINE_AA);\n        points2.push_back(points[i]);\n    }\n}\n\nauto DrawRRect = [draw](const std::vector&lt;cv::Point2f&gt;&amp; pp)\n{\n    cv::RotatedRect rr = cv::minAreaRect(pp);\n    cv::Point2f corners[4];\n    rr.points(corners);\n    cv::line(draw, corners[0], corners[1], cv::Scalar(0, 255, 0), 2);\n    cv::line(draw, corners[1], corners[2], cv::Scalar(0, 255, 0), 2);\n    cv::line(draw, corners[2], corners[3], cv::Scalar(0, 255, 0), 2);\n    cv::line(draw, corners[3], corners[0], cv::Scalar(0, 255, 0), 2);\n};\nDrawRRect(points1);\nDrawRRect(points2);\n\ncv::imshow(\"draw\", draw);\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ah33V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ah33V.png\" alt=\"Result\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 6382329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695ca327637499002d6703813667b08a?s=128&d=identicon&r=PG&f=1", "display_name": "nullPointer90", "link": "https://stackoverflow.com/users/6382329/nullpointer90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551358261, "creation_date": 1551277472, "last_edit_date": 1551280047, "question_id": 54907636, "link": "https://stackoverflow.com/questions/54907636/how-to-find-rectangle-in-black-region-opencv-c", "title": "How to find rectangle in black region opencv (C++)", "body": "<p>I'm newbie OpenCV. I am using opencv for find position attach a stamp in image. The stamp can't overlap with other object in image.</p>\n\n<p>Example binary image with white region is object on image, black region is none object\n<a href=\"https://i.stack.imgur.com/NQdmi.png\" rel=\"nofollow noreferrer\">Example image</a></p>\n\n<p>Result : Find rect in black region (in white circle) can attach stamp\n<a href=\"https://i.stack.imgur.com/otX76.png\" rel=\"nofollow noreferrer\">Result imagge</a></p>\n\n<p>Please help me find rect in black region same blue rect.\nThank you!</p>\n"}, {"tags": ["c++", "design-patterns", "ipc", "cross-reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551277361, "post_id": 54907584, "comment_id": 96582236, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\" title=\"resolve build errors due to circular dependency amongst classes\">stackoverflow.com/questions/625799/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551278152, "post_id": 54907584, "comment_id": 96582731, "body": "there are ways to &quot;make it work&quot;, but I would first consider if you can fix the design. Imho mutual dependency is something to be avoided"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551278208, "post_id": 54907584, "comment_id": 96582765, "body": "@NathanOliver The question is not clear on it, but given that it&#39;s tagged <code>design-patterns</code>, I don&#39;t think we are talking about a compiler error here."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551278269, "post_id": 54907584, "comment_id": 96582800, "body": "@MaxLanghof I get that.  That point remains that it shows how two classes can use each other in a way that it will compile."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551278318, "post_id": 54907584, "comment_id": 96582832, "body": "Isn&#39;t that an application of IOC (Inversion Of Control)?"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 9776502, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2Md4rBpQ4yU/AAAAAAAAAAI/AAAAAAAAABU/ERlwBC991io/photo.jpg?sz=128", "display_name": "Hercoa", "link": "https://stackoverflow.com/users/9776502/hercoa"}, "is_accepted": false, "score": 0, "last_activity_date": 1551310805, "creation_date": 1551310805, "answer_id": 54916201, "question_id": 54907584, "link": "https://stackoverflow.com/questions/54907584/is-there-any-good-solution-to-resolve-cross-reference-between-two-class-in-c/54916201#54916201", "title": "Is there any good solution to resolve cross-reference between two class in c++?", "body": "<p>Yes. I am looking for good pattern.</p>\n"}], "owner": {"reputation": 49, "user_id": 9776502, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2Md4rBpQ4yU/AAAAAAAAAAI/AAAAAAAAABU/ERlwBC991io/photo.jpg?sz=128", "display_name": "Hercoa", "link": "https://stackoverflow.com/users/9776502/hercoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1551310805, "creation_date": 1551277309, "last_edit_date": 1551278228, "question_id": 54907584, "link": "https://stackoverflow.com/questions/54907584/is-there-any-good-solution-to-resolve-cross-reference-between-two-class-in-c", "title": "Is there any good solution to resolve cross-reference between two class in c++?", "body": "<p>My use case is following</p>\n\n<pre><code>class Caller\n{\n  init(){ Callee.init(); }\n  callMeByCalle() { /*do something*/ }\n}\n\nclass Callee\n{\n  init(){ /*initialize to receive IPC call from another process*/ }\n  onHandlerIPC { /*call A class's callMeByCalle() in here*/ }\n}\n</code></pre>\n\n<p>Maybe I can pass the instance of A class when I call init() of Callee.\nBut I think it could cause a cross-reference problem.\nIs there any formal or famous solution for this situation?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1551277160, "post_id": 54907487, "comment_id": 96582108, "body": "And how exactly can I move it to heap or static section ? :)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 3, "creation_date": 1551277204, "post_id": 54907487, "comment_id": 96582137, "body": "<a href=\"https://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables\" rel=\"nofollow noreferrer\">Which would lead to a read/write error ... also known as ... a stack overflow :)</a>"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551277315, "post_id": 54907487, "comment_id": 96582200, "body": "Either move the definition of <code>best_cost</code> to the top level (static section) or use the <code>new</code> operator to create your structure (heap). See <a href=\"https://stackoverflow.com/questions/10238699/dynamically-allocating-3d-array\">this post</a> for more information."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1551277380, "post_id": 54907487, "comment_id": 96582254, "body": "Cheers guys. That is really a good lesson for me. I never thought about these memory problems before (came from Python lol)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1551277573, "post_id": 54907487, "comment_id": 96582391, "body": "BTW,  on linux the default stack size is 10 MB on windows it is 1 MB."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1551278968, "post_id": 54907487, "comment_id": 96583240, "body": "@Botje: No <code>new</code> please, <code>std::vector&lt;..&gt;</code> or <code>std::unique_ptr&lt;std::array&lt;..&gt;&gt;</code> instead."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551279745, "post_id": 54907487, "comment_id": 96583735, "body": "@Jarod42 Fair enough. Step one was switching to a heap allocation, changing the data structure to something other than a three-dimensional static array was step two ;)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551282026, "post_id": 54907487, "comment_id": 96585179, "body": "Both <code>std::vector&lt;std::vector&lt;std::vector&lt;std::pair&lt;int, int&gt;&gt;&gt;&gt;</code> or  <code>std::vector&lt;std::pair&lt;int, int&gt;&gt;</code> are fine for me. <code>new T</code> or <code>new T[N]</code> is not."}], "tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 5, "last_activity_date": 1551277026, "creation_date": 1551277026, "answer_id": 54907487, "question_id": 54907432, "link": "https://stackoverflow.com/questions/54907432/invalid-write-of-size-of-when-declaring-stdpair/54907487#54907487", "title": "Invalid write of size of when declaring std::pair", "body": "<p>Going by your numbers, <code>best_cost</code> is <code>(4+4)*1066*1066*8</code> = 72 MB. This is well above the default stack size limit for most platforms. Moving this allocation to the heap or the static section should allow you to safely use it.</p>\n"}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54907487, "answer_count": 1, "score": 3, "last_activity_date": 1551277026, "creation_date": 1551276855, "question_id": 54907432, "link": "https://stackoverflow.com/questions/54907432/invalid-write-of-size-of-when-declaring-stdpair", "title": "Invalid write of size of when declaring std::pair", "body": "<p>I came across a memory problem when I declare a variable:</p>\n\n<pre><code>std::pair&lt;int, int&gt; best_cost[n][m][DIR];\n</code></pre>\n\n<p>In this case, n and m are both const int 1066 and DIR is 8. By running Valgrind I get an error:</p>\n\n<pre><code>Invalid write of size 8\n==73213==    at 0x15D3B75E: simple_planner::SimplePlanner::aStar(geometry_msgs::PoseStamped_&lt;std::allocator&lt;void&gt; &gt; const&amp;, geometry_msgs::PoseStamped_&lt;std::allocator&lt;void&gt; &gt; const&amp;, std::vector&lt;geometry_msgs::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;, std::allocator&lt;geometry_msgs::PoseStamped_&lt;std::allocator&lt;void&gt; &gt; &gt; &gt;&amp;) (in /home/yyu/devel/lib/libsimple_planner.so)\n==73213==  Address 0xfe0f340 is on thread 8's stack\n</code></pre>\n\n<p>Am I declaring the variable wrong?</p>\n\n<p>My end use of this variable is to get the direction on a specific coordinate.</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1551276991, "post_id": 54907389, "comment_id": 96581985, "body": "What happens if the DPI is 100%?"}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1551277018, "post_id": 54907389, "comment_id": 96582000, "body": "Disable application scaling? i.e. Go to your build/debug or release folder and make sure the scaling is turned off from application side. You might have to play around with the options but that usually works for me."}, {"owner": {"reputation": 61736, "user_id": 43846, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TGOxx.png?s=128&g=1", "display_name": "stuartd", "link": "https://stackoverflow.com/users/43846/stuartd"}, "edited": false, "score": 1, "creation_date": 1551277144, "post_id": 54907389, "comment_id": 96582093, "body": "<i>&quot;while opening C# application through cpp project &quot;</i> - can you explain what this means?"}, {"owner": {"reputation": 31, "user_id": 11125455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qQfqxcOqQaE/AAAAAAAAAAI/AAAAAAAAACc/-9yXIe4hUUc/photo.jpg?sz=128", "display_name": "rajesh yenduri", "link": "https://stackoverflow.com/users/11125455/rajesh-yenduri"}, "edited": false, "score": 0, "creation_date": 1551278897, "post_id": 54907389, "comment_id": 96583201, "body": "if DPI is 100% it is working fine.@i486"}, {"owner": {"reputation": 31, "user_id": 11125455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qQfqxcOqQaE/AAAAAAAAAAI/AAAAAAAAACc/-9yXIe4hUUc/photo.jpg?sz=128", "display_name": "rajesh yenduri", "link": "https://stackoverflow.com/users/11125455/rajesh-yenduri"}, "edited": false, "score": 0, "creation_date": 1551279138, "post_id": 54907389, "comment_id": 96583345, "body": "I need to fix issue in DPI 150% if we disable application scaling then the DPI will 100% right then it wont resolve my issue.@Rietty"}], "answers": [{"tags": [], "owner": {"reputation": 466, "user_id": 7856646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fNlTG.png?s=128&g=1", "display_name": "feal", "link": "https://stackoverflow.com/users/7856646/feal"}, "is_accepted": false, "score": -1, "last_activity_date": 1551281786, "creation_date": 1551281786, "answer_id": 54909065, "question_id": 54907389, "link": "https://stackoverflow.com/questions/54907389/why-is-a-c-winform-shown-different-with-dpi-150-while-opening-through-cpp-proj/54909065#54909065", "title": "Why is a C# winform shown different with DPI 150% while opening through cpp project", "body": "<p>What i would guess is that you are using WinForms, which has some problems with HiDpi Scaling. If you are starting your application only as your own project by default it is marked as <strong>DPI Unaware</strong>. This means the application might look pixilated at other than 100% but the layout is ok. </p>\n\n<p>To create a hi dpi enabled WinForm app, is unfortunatley not that easy.</p>\n\n<p>(<a href=\"https://docs.microsoft.com/en-us/windows/desktop/hidpi/high-dpi-desktop-application-development-on-windows\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/hidpi/high-dpi-desktop-application-development-on-windows</a>)</p>\n\n<p>However when using your components in parts of a larger project where the DPI Mode is set by another part of the System, this can lead to layouut problems.</p>\n\n<p>If its a .NET Project you can fix this by adding the following assembly attribute:</p>\n\n<pre><code>[assembly: System.Windows.Media.DisableDpiAwareness]\n</code></pre>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 31, "user_id": 11125455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qQfqxcOqQaE/AAAAAAAAAAI/AAAAAAAAACc/-9yXIe4hUUc/photo.jpg?sz=128", "display_name": "rajesh yenduri", "link": "https://stackoverflow.com/users/11125455/rajesh-yenduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551281786, "creation_date": 1551276727, "last_edit_date": 1551278383, "question_id": 54907389, "link": "https://stackoverflow.com/questions/54907389/why-is-a-c-winform-shown-different-with-dpi-150-while-opening-through-cpp-proj", "title": "Why is a C# winform shown different with DPI 150% while opening through cpp project", "body": "<p>I am facing an issue in windows form while opening C# application through cpp project with DPI 150%.</p>\n\n<p>The issue is Controls in a form it truncating and controls sizes are not showing as it is. For example, button size is 23 px but it is showing as 14 px.</p>\n\n<p>I am not facing this issue while opening the same C# application through C# project in 4K monitor. Controls sizes are also coming proper.</p>\n\n<p>Can anyone please suggest what will be the issue and how to resolve it.</p>\n\n<p>Thanks,\nRajesh.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1551276860, "post_id": 54907347, "comment_id": 96581914, "body": "please show a [mvce], weird changes in behaviour in one place are often caused by undefined behaviour elsewhere in the code."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1551276888, "post_id": 54907347, "comment_id": 96581926, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">What is a debugger and how can it help me diagnose problems?</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551277039, "post_id": 54907347, "comment_id": 96582025, "body": "Please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. And note that the cause of the problem might not be where the crash actually happens. And besides a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, can you please include the call-stack when the crash happens, as well as the values of involved variables (most importantly what is <code>*str</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9467799, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x-KWEALBCNY/AAAAAAAAAAI/AAAAAAAAADQ/1W7YpIm7uOo/photo.jpg?sz=128", "display_name": "nngm", "link": "https://stackoverflow.com/users/9467799/nngm"}, "edited": false, "score": 0, "creation_date": 1551278239, "post_id": 54907480, "comment_id": 96582785, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": true, "score": 2, "last_activity_date": 1551276997, "creation_date": 1551276997, "answer_id": 54907480, "question_id": 54907347, "link": "https://stackoverflow.com/questions/54907347/i-have-no-idea-why-only-one-code-has-sigsegv-between-two-code-looks-same/54907480#54907480", "title": "I have no idea why only one code has SIGSEGV between two code (looks same)", "body": "<p><code>return chd[*str-'0']-&gt;add(++str);</code></p>\n\n<p>contains undefined behavoir as you are modifying and using <code>str</code> unsequenced.</p>\n\n<p>Your 'fix' has the classic behavoir of moving something around enough that the undefined behavoir is hidden. Remeber that <em>Undefined Behavoir</em> is undefined. It doens't have to crash. It doesn't even have to make sense. And most scarily it can do what you expect... for the time being at least.</p>\n\n<p>A simple change is:</p>\n\n<p><code>return chd[*str-'0']-&gt;add(str+1);</code></p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 9467799, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x-KWEALBCNY/AAAAAAAAAAI/AAAAAAAAADQ/1W7YpIm7uOo/photo.jpg?sz=128", "display_name": "nngm", "link": "https://stackoverflow.com/users/9467799/nngm"}, "edited": false, "score": 0, "creation_date": 1551278242, "post_id": 54907768, "comment_id": 96582786, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1551277879, "creation_date": 1551277879, "answer_id": 54907768, "question_id": 54907347, "link": "https://stackoverflow.com/questions/54907347/i-have-no-idea-why-only-one-code-has-sigsegv-between-two-code-looks-same/54907768#54907768", "title": "I have no idea why only one code has SIGSEGV between two code (looks same)", "body": "<p>This line has undefined behaviour</p>\n\n<pre><code>return chd[*str-'0']-&gt;add(++str);\n</code></pre>\n\n<p>because the modification and the use of <code>str</code> are unsequenced.</p>\n\n<p>The quick fix is (don't say <code>++</code> when you mean <code>+ 1</code>):</p>\n\n<pre><code>return chd[*str-'0']-&gt;add(str + 1);\n</code></pre>\n\n<p>but you can also avoid the problem by computing the relevant index just once (it sounds like this is how you fixed the problem, and it's the better solution):</p>\n\n<pre><code>int add(char* str) {\n    if (!str[0])\n        return 0;\n    char c = str[0] - '0';\n    if (chd[c] == 0)\n        chd[c] = new Node();\n    ...\n    return chd[c]-&gt;add(str + 1); // And ++str would also work...\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 9467799, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x-KWEALBCNY/AAAAAAAAAAI/AAAAAAAAADQ/1W7YpIm7uOo/photo.jpg?sz=128", "display_name": "nngm", "link": "https://stackoverflow.com/users/9467799/nngm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1551295554, "accepted_answer_id": 54907480, "answer_count": 2, "score": -3, "last_activity_date": 1551277879, "creation_date": 1551276589, "last_edit_date": 1551277068, "question_id": 54907347, "link": "https://stackoverflow.com/questions/54907347/i-have-no-idea-why-only-one-code-has-sigsegv-between-two-code-looks-same", "closed_reason": "Not suitable for this site", "title": "I have no idea why only one code has SIGSEGV between two code (looks same)", "body": "<p>First time, I coded like this (I was making a trie) and when I called add(\"911\"); I got a segmentation fault at there when *str == '1' </p>\n\n<pre><code>struct Node {\n    int check, check2;\n    Node* chd[10];\n    Node() : check(0), check2(0), chd{0, } {}\n    ~Node() {\n        for (int i = 0; i &lt; 10; i++)\n            if (chd[i])\n                delete chd[i];\n    }\n    int add(char* str) {\n        if (!str[0])\n            return 0;\n        if (chd[*str-'0'] == 0)          // here I got SIGSEGV\n            chd[*str-'0'] = new Node();\n        ...\n        return chd[*str-'0']-&gt;add(++str);\n    }\n}\n</code></pre>\n\n<p>then I fixed that part like this</p>\n\n<pre><code>        int i = *str-'0';\n        if (chd[i] == 0)\n            chd[i] = new Node();\n</code></pre>\n\n<p><strong>there was no error.</strong></p>\n\n<p><strong>What's the difference? What made the first code make error?</strong></p>\n\n<p>(I was solving ACM-ICPC > Regionals > Europe > Northwestern European Regional Contest > Nordic Collegiate Programming Contest > NCPC 2007 A)</p>\n"}, {"tags": ["c++", "boost", "boost-multi-index"], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 9516805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1805142986217597/picture?type=large", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9516805/niklas"}, "edited": false, "score": 0, "creation_date": 1551294289, "post_id": 54911664, "comment_id": 96591966, "body": "Thank you very much for this very detailed and insightful explanation of the mechanics behind the equal_range!"}, {"owner": {"reputation": 104, "user_id": 9516805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1805142986217597/picture?type=large", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9516805/niklas"}, "edited": false, "score": 0, "creation_date": 1551294669, "post_id": 54911664, "comment_id": 96592149, "body": "If I understand the circumstance that the equal_range relies on keys laying adjacently in the container correctly, this means that equal_range won&#39;t return all entries of one key when they were not added sequentially? After storing [1, 2, 2, 3, 4, 2], equal_range(2) would only return two instead of three entries?"}, {"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "reply_to_user": {"reputation": 104, "user_id": 9516805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1805142986217597/picture?type=large", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9516805/niklas"}, "edited": false, "score": 1, "creation_date": 1551299070, "post_id": 54911664, "comment_id": 96594145, "body": "@Niklas, no, all keys would be returned as insertion order is not guaranteed, precisely to keep same-key elements together"}], "tags": [], "owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "is_accepted": true, "score": 1, "last_activity_date": 1551291008, "last_edit_date": 1551291008, "creation_date": 1551290071, "answer_id": 54911664, "question_id": 54907218, "link": "https://stackoverflow.com/questions/54907218/getting-values-not-equals-x-in-boosts-multi-index-container/54911664#54911664", "title": "Getting values not equals x in boost&#39;s multi_index_container", "body": "<p>Note that <code>equal_range(k)</code> returns a <em>range</em> (a pair of iterators in this context) as it relies on the fact that elements whose key is <code>k</code> are stored adjacently along the container sequence:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gJ4oO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gJ4oO.png\" alt=\"enter image description here\"></a></p>\n\n<p>On the other hand, the elements whose key is <em>not</em> equal to <code>k</code> are not adjacent, but belong in two disjoint ranges:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IlBRF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IlBRF.png\" alt=\"enter image description here\"></a></p>\n\n<p>So there is no way <code>equal_range</code> can be twisted to return this pair of ranges. If you absolutely need to treat the two ranges as one logical range you can resort to <a href=\"https://www.boost.org/libs/range/doc/html/range/reference/utilities/join.html\" rel=\"nofollow noreferrer\">Boost.Range's <code>join</code></a>:</p>\n\n<pre><code>template&lt;typename Container,typename Key&gt;\nauto not_equal_range(const Container&amp; c,const Key&amp; k)\n{\n  auto rng=c.equal_range(k);\n  return boost::range::join(\n    boost::make_iterator_range(c.begin(),rng.first),\n    boost::make_iterator_range(rng.second,c.end()));\n}\n</code></pre>\n\n<p>Complete example follows.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/1972dbca135e3a69\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/multi_index_container.hpp&gt;\n#include &lt;boost/multi_index/hashed_index.hpp&gt;\n#include &lt;boost/multi_index/identity.hpp&gt;\n#include &lt;boost/range/iterator_range_core.hpp&gt;\n#include &lt;boost/range/join.hpp&gt;\n\ntemplate&lt;typename Container,typename Key&gt;\nauto not_equal_range(const Container&amp; c,const Key&amp; k)\n{\n  auto rng=c.equal_range(k);\n  return boost::range::join(\n    boost::make_iterator_range(c.begin(),rng.first),\n    boost::make_iterator_range(rng.second,c.end()));\n}\n\nusing namespace boost::multi_index;\nusing container=multi_index_container&lt;\n  int,\n  indexed_by&lt;\n    hashed_non_unique&lt;identity&lt;int&gt;&gt;\n  &gt;\n&gt;;\n\n#include &lt;iostream&gt;\n\nint main()\n{\n  container c={0,0,1,1,2,2,3,4,4,4,5,6,6,6,7};\n  for(auto x:not_equal_range(c,4))std::cout&lt;&lt;x&lt;&lt;\" \";\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>0 0 1 1 2 2 3 5 6 6 6 7\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 9516805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1805142986217597/picture?type=large", "display_name": "Niklas", "link": "https://stackoverflow.com/users/9516805/niklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 54911664, "answer_count": 1, "score": 0, "last_activity_date": 1551291008, "creation_date": 1551276164, "question_id": 54907218, "link": "https://stackoverflow.com/questions/54907218/getting-values-not-equals-x-in-boosts-multi-index-container", "title": "Getting values not equals x in boost&#39;s multi_index_container", "body": "<p>I'm trying to get a iterator to all values that are not equal a certain value in <code>boost::multi_index_container</code>. </p>\n\n<p>The index I want to access is a <code>hashed_non_unique</code> integer. Using <code>equal_range(0)</code> on my container which serves as a mapping database, I'm able to access all container entries that have this specific index set to zero.</p>\n\n<p>What I need is a function that returns me all entries where the index is not zero. I searched the web for hours and only <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/multi_index/doc/reference/hash_indices.html\" rel=\"nofollow noreferrer\">found</a> the overloaded function </p>\n\n<pre><code>std::pair&lt;iterator,iterator&gt; equal_range(\n    const CompatibleKey&amp; x,\n    const CompatibleHash&amp; hash,const CompatiblePred&amp; eq)const;\n</code></pre>\n\n<p>But the boost documentation only has few examples and there is none for this specific problem. I do not know what a CompatibleHash or a CompatiblePred is, but I tried with:</p>\n\n<pre><code>    m_mappingDb-&gt;get&lt;tags::myIndex&gt;().equal_range(m_mappingDb-&gt;begin(), 0, \n        [=](uint32_t lhs, uint32_t rhs) { return lhs != rhs; });\n</code></pre>\n\n<p>after finding examples of people using an lambda as sort function in the <code>multi_index_container</code>.</p>\n\n<p>When compiling, I then receive a C2664 in that lambda expression that a conversion from <code>boost::multi_index::detail::hashed_index_iterator&lt;Node,BucketArray,Category&gt;</code> to <code>uint32_t</code> is not possible. So, I'm expecting that my lambda must use iterators as parameters, but which exactly? What is Node, BucketArray and Category?</p>\n\n<p>There is another C2064 in that lambda expression that states that this is not a function that takes 1 argument. Of course, it takes 2. Do I have to compare against this instead?</p>\n\n<p>My alternative is to use <code>lower_bound</code> and <code>upper_bound</code> instead and set the lower bound to 1 and the upper bound to the maximum value of uint32_t. But, in my opinion, this is ugly as hell. There must be a correct way to implement something like a not equals function.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1551276041, "post_id": 54907138, "comment_id": 96581350, "body": "You might want to study the <i>visitor</i> and <i>observer</i> patterns."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1551277015, "post_id": 54907138, "comment_id": 96581997, "body": "Pedantically, it is UB as aliasing rule is broken. but might work in practice."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1551277130, "post_id": 54907138, "comment_id": 96582079, "body": "As hack, adding friend or public method would do the job too. (as it should not go in production, it is only for temporary testing)."}, {"owner": {"reputation": 7926, "user_id": 108616, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/dRA03.jpg?s=128&g=1", "display_name": "Tien Do", "link": "https://stackoverflow.com/users/108616/tien-do"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551277559, "post_id": 54907138, "comment_id": 96582380, "body": "@eerorika where is to strict aliasing question? (it seems rustyx removed his comment)."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1551277691, "post_id": 54907138, "comment_id": 96582453, "body": "See <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a> and <a href=\"https://timsong-cpp.github.io/cppwp/n3337/basic.lval#10\" rel=\"nofollow noreferrer\">&#91;basic.lval&#93;/10</a>. @eerorika btw not sure about the standard-layout exception."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 3, "creation_date": 1551278057, "post_id": 54907138, "comment_id": 96582671, "body": "This code is UB. It violates the <a href=\"https://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">One Definition Rule</a>. There are safer methods to &quot;hack&quot; a private member. This approach should never be used at any level of code."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1551278439, "post_id": 54907138, "comment_id": 96582921, "body": "Goes to show that not all &quot;C++ interview questions&quot; are created equal. On second thought, they&#39;re all abysmal."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1551278582, "post_id": 54907138, "comment_id": 96583020, "body": "@rustyx you appear to be right. I must have mixed strict aliasing with some other case. I think layout-compatibility would have made union punning OK (if the classes were layout-compatible)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1551283291, "post_id": 54907138, "comment_id": 96586063, "body": "@PasserBy disagree. My C++ interview questions are superb! :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551283346, "post_id": 54907138, "comment_id": 96586115, "body": "I always solve this problem with a very simple code: <code>#define class struct #define private public</code> ;)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551359936, "post_id": 54907138, "comment_id": 96617844, "body": "@SergeyA: But then, you might break layout (as you no longer mix private/public section, disallowing some potential reorganization), name mangling might also be impacted. (you also break ODR)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551363524, "post_id": 54907138, "comment_id": 96620015, "body": "@Jarod42 Yes, this is very undefined behaviorish. I only used it once in production code, because of some too-stupid-to-explain policies, but it got the job done."}], "answers": [{"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 5, "creation_date": 1551276719, "post_id": 54907320, "comment_id": 96581804, "body": "There also is libraries that exist just for that. I&#39;m particularly impressed with their macro less solution: <a href=\"https://github.com/hliberacki/cpp-member-accessor\" rel=\"nofollow noreferrer\">github.com/hliberacki/cpp-member-accessor</a>"}, {"owner": {"reputation": 7926, "user_id": 108616, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/dRA03.jpg?s=128&g=1", "display_name": "Tien Do", "link": "https://stackoverflow.com/users/108616/tien-do"}, "edited": false, "score": 0, "creation_date": 1551366348, "post_id": 54907320, "comment_id": 96621802, "body": "Why not modify header file? The interviewer might say he wants to test your knowledge about layout compatibility :)"}], "tags": [], "owner": {"reputation": 3803, "user_id": 459975, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc7ef38c9fb207c34f2903fe2876744d?s=128&d=identicon&r=PG", "display_name": "Chuu", "link": "https://stackoverflow.com/users/459975/chuu"}, "is_accepted": true, "score": 7, "last_activity_date": 1551291620, "last_edit_date": 1551291620, "creation_date": 1551276516, "answer_id": 54907320, "question_id": 54907138, "link": "https://stackoverflow.com/questions/54907138/is-it-really-a-good-technique-to-work-with-legacy-code-with-reinterpret-cast/54907320#54907320", "title": "Is it really a good technique to work with legacy code (with reinterpret_cast)?", "body": "<p>You can do this without <code>reinterpret_cast</code>.  There is a trick using templates and friends that is outlined in the following blog post that demonstrates the technique:</p>\n\n<p><a href=\"http://bloglitb.blogspot.com/2010/07/access-to-private-members-thats-easy.html\" rel=\"nofollow noreferrer\">Access to private members. That's easy!</a></p>\n\n<p>This is certainly safer than the interviewer's approach, since it eliminates human error in re-creating the class definition.  Is this approach good at all, though?  The given question has some incredibly artificial constraints that would rarely apply to a 'real' project.  If it's a C++ project and you have access to the header file, why not just add a getter?  If it's not a C++ project, why are you so constrained in your definition of the interop class?</p>\n"}], "owner": {"reputation": 7926, "user_id": 108616, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/dRA03.jpg?s=128&g=1", "display_name": "Tien Do", "link": "https://stackoverflow.com/users/108616/tien-do"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 2, "accepted_answer_id": 54907320, "answer_count": 1, "score": 2, "last_activity_date": 1551291620, "creation_date": 1551275888, "last_edit_date": 1551276552, "question_id": 54907138, "link": "https://stackoverflow.com/questions/54907138/is-it-really-a-good-technique-to-work-with-legacy-code-with-reinterpret-cast", "title": "Is it really a good technique to work with legacy code (with reinterpret_cast)?", "body": "<p>Below code came from a post about C++ interview questions <a href=\"https://www.toptal.com/c-plus-plus/interview-questions\" rel=\"nofollow noreferrer\">here</a>. I've never known this technique :) (though it's claimed a good one :)). My questions are: In which situation do we need to use it? Do you often see it in your real production/legacy code?</p>\n\n<p><strong>Question:</strong></p>\n\n<blockquote>\n  <p>Implement a method to get topSecretValue for any given Something* object. The method should be cross-platform compatible and not depend on sizeof (int, bool, string).</p>\n</blockquote>\n\n<pre><code>class Something {\n    Something() {\n        topSecretValue = 42;\n    }\n    bool somePublicBool;\n    int somePublicInt;\n    std::string somePublicString;\nprivate:\n    int topSecretValue;\n};\n</code></pre>\n\n<p><strong>Answer:</strong></p>\n\n<blockquote>\n  <p>Create another class which has all the members of Something in the same order, but has additional public method which returns the value. Your replica Something class should look like:</p>\n</blockquote>\n\n<pre><code>class SomethingReplica {\npublic:\n    int getTopSecretValue() { return topSecretValue; } // &lt;-- new member function\n    bool somePublicBool;\n    int somePublicInt;\n    std::string somePublicString;\nprivate:\n    int topSecretValue;\n};\n\nint main(int argc, const char * argv[]) {\n    Something a;\n    SomethingReplica* b = reinterpret_cast&lt;SomethingReplica*&gt;(&amp;a);\n    std::cout &lt;&lt; b-&gt;getTopSecretValue();\n}\n</code></pre>\n\n<blockquote>\n  <p>It\u2019s important to avoid code like this in a final product, but it\u2019s nevertheless a good technique when dealing with legacy code, as it can be used to extract intermediate calculation values from a library class. (Note: If it turns out that the alignment of the external library is mismatched to your code, you can resolve this using #pragma pack.)</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "constants"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551276154, "post_id": 54907110, "comment_id": 96581446, "body": "You are explicitly instantiating the class template but not its functions. I believe you would have to do the explicit instantiation of the class <i>after all its methods have been defined</i> in order for those to be also explicitly instantiated along with the class."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551276165, "post_id": 54907110, "comment_id": 96581452, "body": "There are other possible problems with the code you show, but for now you need to edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us. How do you define your member functions? Also please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551276166, "post_id": 54907110, "comment_id": 96581454, "body": "<a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Possible duplicate</a>. Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The error message is just what I would expect from the code you show, there is no definition of the method and unless you show it I wont believe you :P"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551276267, "post_id": 54907110, "comment_id": 96581509, "body": "As for your other possible problem, an explicit instantiation definition can only exists <i>once</i> in all of your program. If the definition is in a header file then it will be defined in all <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\"><i>translation units</i></a> where that header file is included."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551276396, "post_id": 54907110, "comment_id": 96581587, "body": "PS: Resource only has one &quot;s&quot;."}, {"owner": {"reputation": 1, "user_id": 10848860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddbe35da0b76196b3022f950ae16b213?s=128&d=identicon&r=PG&f=1", "display_name": "Shirenn", "link": "https://stackoverflow.com/users/10848860/shirenn"}, "edited": false, "score": 0, "creation_date": 1551276738, "post_id": 54907110, "comment_id": 96581819, "body": "Oups, french mistake"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551278278, "post_id": 54907110, "comment_id": 96582805, "body": "Works here: <a href=\"https://onlinegdb.com/HyyqgQ4LV\" rel=\"nofollow noreferrer\">Demo</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1551287559, "last_edit_date": 1592644375, "creation_date": 1551287250, "answer_id": 54910894, "question_id": 54907110, "link": "https://stackoverflow.com/questions/54907110/c-templates-and-const-type/54910894#54910894", "title": "C++ | Templates and const type", "body": "<p>On a basic level, instantiating a template class only instantiates the class definition, not the definitions of the member functions.</p>\n<p>Now, explicit instantiation of a class template <em>does</em> also explicitly instantiate the direct (non-base-class, non-template) members:</p>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/temp.explicit#10\" rel=\"nofollow noreferrer\">[temp.explicit]#10</a> (emphasis mine)</p>\n<p>An <strong>explicit instantiation that names a class template specialization</strong> is also an <strong>explicit instantiation</strong> of the same kind (declaration or definition) <strong>of each of its members</strong> (not including members inherited from base classes and members that are templates) that has not been previously explicitly specialized in the translation unit containing the explicit instantiation, provided that the associated constraints, if any, of that member are satisfied by the template arguments of the explicit instantiation ([temp.constr.decl], [temp.constr.constr]), except as described below.\n[\u2009Note: In addition, it will typically be an explicit instantiation of certain implementation-dependent data about the class.\n\u2014\u2009end note\n\u2009]</p>\n</blockquote>\n<p><sup>Note:<br />\nExpl. inst. <em>declaration</em> = <code>extern template MyClass&lt;Args&gt;;</code>, expl. inst. <em>definition</em> = <code>template MyClass&lt;Args&gt;;</code></sup></p>\n<p><strong>But</strong>, this is only done for members that are actually <strong>defined</strong> at the point of instantiation:</p>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/temp.explicit#11\" rel=\"nofollow noreferrer\">[temp.explicit]#11</a> (emphasis mine)</p>\n<p>An explicit instantiation definition that names a class template specialization explicitly instantiates the class template specialization and is an explicit instantiation definition of <strong>only those members that have been defined at the point of instantiation</strong>.</p>\n</blockquote>\n<p>Since you did the explicit instantiation definition in the header (which is included by the source file), the definitions of the member functions come <em>after</em> your explicit instantiation of the class template, so those functions are <em>not</em> also explicitly instantiated.</p>\n<p>It is therefore advisable to only perform (non-<code>extern</code>) explicit instantiation of a class template at the end of the source file that fully defines everything in it. The header file is certainly the wrong place.</p>\n"}], "owner": {"reputation": 1, "user_id": 10848860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddbe35da0b76196b3022f950ae16b213?s=128&d=identicon&r=PG&f=1", "display_name": "Shirenn", "link": "https://stackoverflow.com/users/10848860/shirenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551287559, "creation_date": 1551275797, "last_edit_date": 1551276692, "question_id": 54907110, "link": "https://stackoverflow.com/questions/54907110/c-templates-and-const-type", "title": "C++ | Templates and const type", "body": "<p>I have a declaration of a class in an .hpp file: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename Ressource, typename Identifier&gt; class RessourceHolder {\npublic:\n  void load(Identifier id, const std::string&amp; filename);\n\n  Ressource&amp; get(Identifier id);\n  const Ressource&amp; get(Identifier id) const;\n\n\nprivate:\n  void insert(Identifier id, std::unique_ptr&lt;Ressource&gt; resource);\n\n\nprivate:\n  std::map&lt;Identifier, std::unique_ptr&lt;Ressource&gt;&gt; mRessourceMap;\n};\n\ntemplate class RessourceHolder&lt;sf::Texture, Textures::ID&gt;;\ntypedef RessourceHolder&lt;sf::Texture, Textures::ID&gt; TextureHolder;\n</code></pre>\n\n<p>which include explicit instantiation for <code>RessourceHolder&lt;sf::Texture,Textures::ID&gt;</code>.</p>\n\n<p>And I have the implementation of it in a separate .cpp file.\nThe problem is the following :\nLater on I define a const <code>TextureHolder</code> and it raises the following error : <BR>\n<code>undefined reference to `RessourceHolder&lt;sf::Texture, Textures::ID&gt;::get(Textures::ID) const</code> <BR>\nWhy?</p>\n\n<p>EDIT : <BR>\nAs asked, the point where the problem arise (hpp file):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Agent{\n  public :\n  Agent(TextureHolder const&amp; textures);\n  void setTexture();\n  const TextureHolder&amp; mTextures;\n  private :\n  sf::Sprite mSprite;\n};\n</code></pre>\n\n<p>(cpp file)</p>\n\n<pre><code>Agent::Agent(TextureHolder const&amp; textures) : mTextures(textures){\n  setTexture();\n}\nvoid Agent::setTexture(){\n  mSprite.setTexture(mTextures.get(toTextureID(mType)));\n}\n</code></pre>\n\n<p>When I remove the const specifier in agent,  I don't have an error anymore</p>\n"}, {"tags": ["c++", "unordered-set"], "comments": [{"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 6, "creation_date": 1551275257, "post_id": 54906920, "comment_id": 96580890, "body": "It&#39;s an <i>unordered</i> set... what were you expecting? : ) Perhaps use an <i>ordered</i> set instead?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551275258, "post_id": 54906920, "comment_id": 96580893, "body": "Why would you expect an <i>unordered</i> set to have some kind of ordering?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551275348, "post_id": 54906920, "comment_id": 96580958, "body": "unoredered_set == set that lacks any ordering == elements can be in any order and change order"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1551558982, "post_id": 54906920, "comment_id": 96686424, "body": "@Jared this question is still listed as unanswered. Did none of the answers help?"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1551275702, "post_id": 54906960, "comment_id": 96581156, "body": "Does not look like they want to use an ordered set. The ordered set doesn&#39;t keep the order in which elements are inserted. It keeps an order based on a relation operation."}, {"owner": {"reputation": 118, "user_id": 11112562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4971cc501700088536fdec3cca97369b?s=128&d=identicon&r=PG&f=1", "display_name": "Mwak", "link": "https://stackoverflow.com/users/11112562/mwak"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551276007, "post_id": 54906960, "comment_id": 96581333, "body": "@eerorika Didn&#39;t think of it that way, I stupidely assumed they wanted to order it alphabetically. A vector could work then."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1551276079, "post_id": 54906960, "comment_id": 96581378, "body": "It&#39;s understandable. The question isn&#39;t very clear about what order they were expecting."}], "tags": [], "owner": {"reputation": 118, "user_id": 11112562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4971cc501700088536fdec3cca97369b?s=128&d=identicon&r=PG&f=1", "display_name": "Mwak", "link": "https://stackoverflow.com/users/11112562/mwak"}, "is_accepted": false, "score": 2, "last_activity_date": 1551276333, "last_edit_date": 1551276333, "creation_date": 1551275346, "answer_id": 54906960, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values/54906960#54906960", "title": "why does unordered set mix the values", "body": "<p>Looks like you want to use a <a href=\"http://www.cplusplus.com/reference/set/set/\" rel=\"nofollow noreferrer\">(ordered) set</a>.</p>\n\n<p>Edit : Looks like you don't, actually. A <code>std::vector</code> could work, but it's probably not the cleanest workaround.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1551275453, "creation_date": 1551275453, "answer_id": 54906997, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values/54906997#54906997", "title": "why does unordered set mix the values", "body": "<p>If you want to maintain the original order, but enforce uniqueness, you probably want to:</p>\n\n<ol>\n<li>read in an item.</li>\n<li>Try to insert it into the set</li>\n<li>if that succeeds, it wasn't previously in the set, so also copy it to the output</li>\n<li>Repeat</li>\n</ol>\n\n<p>If you want the outputs ordered (so, in you example, the output would be \"a b c d e z\"), then you could either insert the items in an <code>std::set</code>, or else you could use <code>std::sort</code> followed by <code>std::unique</code> to get exactly one of each unique element in the input.</p>\n"}, {"tags": [], "owner": {"reputation": 565, "user_id": 11120993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/79CdE.jpg?s=128&g=1", "display_name": "c_student", "link": "https://stackoverflow.com/users/11120993/c-student"}, "is_accepted": false, "score": 0, "last_activity_date": 1551275800, "creation_date": 1551275800, "answer_id": 54907112, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values/54907112#54907112", "title": "why does unordered set mix the values", "body": "<p>You could also use an <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">unordered map</a> and then store the item as as key to the map and the index as the corresponding value to that key.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 5, "last_activity_date": 1551289287, "last_edit_date": 1551289287, "creation_date": 1551276180, "answer_id": 54907224, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values/54907224#54907224", "title": "why does unordered set mix the values", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\">std::unordered_set</a>:</p>\n\n<blockquote>\n  <p>Internally, <strong>the elements are not sorted in any particular order</strong>, but\n  organized into buckets. Which bucket an element is placed into depends\n  entirely on the hash of its value. This allows fast access to\n  individual elements, since once a hash is computed, it refers to the\n  exact bucket the element is placed into.</p>\n</blockquote>\n\n<p>If you need the unique terminals to be ordered, use a <a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">std::set</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\n\nint main() {\n    std::vector&lt;std::string&gt;terminals = { \"e\", \"d\", \"a\", \"b\", \"c\", \"a\", \"a\", \"a\", \"a\", \"b\",\"b\", \"b\", \"b\", \"c\", \"z\" };\n\n    for(const std::string&amp; terminal : terminals) // print given vector\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n\n    // populate the set directly from the vectors iterators:\n    std::set&lt;std::string&gt; newSet(terminals.begin(), terminals.end());;\n\n    std::cout &lt;&lt; \"printing the (ordered) set:\" &lt;&lt; \"\\n\";;\n    for(const std::string&amp; terminal : newSet)\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n}\n</code></pre>\n\n<p>If you want to maintain the <em>original</em> order, you can't use either set as your final storage, but you can use a <code>std::unordered_set</code> as a cache/blacklist for values you've already inserted in your final storage.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;unordered_set&gt;\n\nint main() {\n    std::vector&lt;std::string&gt;terminals = { \"e\", \"d\", \"a\", \"b\", \"c\", \"a\", \"a\", \"a\", \"a\", \"b\",\"b\", \"b\", \"b\", \"c\", \"z\" };\n\n    for(const std::string&amp; terminal : terminals) // print given vector\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n\n    std::vector&lt;std::string&gt; newSet; // not really a set anymore\n    std::unordered_set&lt;std::string&gt; cache; // blacklist\n\n    // try to insert all terminals and only when an insert is successful,\n    // put the terminal in newSet\n\n    std::for_each(terminals.begin(), terminals.end(),\n        [&amp;](const std::string&amp; terminal) {\n            auto [it, inserted] = cache.insert(terminal);\n            if(inserted)\n                newSet.push_back(terminal);\n        }\n    );\n\n    std::cout &lt;&lt; \"printing the vector of unique terminals:\" &lt;&lt; \"\\n\";;\n    for(const std::string&amp; terminal : newSet)\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n}\n</code></pre>\n\n<p>If you want the original order <em>and</em> don't mind making changes directly to the original <code>terminals</code> vector, you can use <code>std::remove_if</code> combined with an <code>unordered_set</code> which is nice since it doesn't require a new vector. This is an annotated variant of @Marek R's answer:</p>\n\n<p>Read this first: <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">Erase\u2013remove idiom</a></p>\n\n<pre><code>int main() {\n    std::vector&lt;std::string&gt;terminals = { \"e\", \"d\", \"a\", \"b\", \"c\", \"a\", \"a\", \"a\", \"a\", \"b\",\"b\", \"b\", \"b\", \"c\", \"z\" };\n\n    for(const std::string&amp; terminal : terminals) // print given vector\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n\n    std::unordered_set&lt;std::string&gt; cache; // blacklist\n\n    // remove_if() moves all entries in your container, for which the\n    // UnaryPredicate(*) returns true, to the end of the container. It returns\n    // an iterator pointing to the first element in the vector that was\n    // moved - which is a suitable starting point for a subsequent erase().\n    //\n    // (*) UnaryPredicate: A callable that returns true or false given a single\n    //                     value.\n\n    // auto past_new_end = std::vector&lt;std::string&gt;::iterator past_new_end\n    auto past_new_end = std::remove_if(terminals.begin(), terminals.end(),\n        // this lambda is the UnaryPredicate\n        [&amp;](const std::string&amp; terminal) {\n            // insert returns a std::pair&lt;Iterator, bool&gt;\n            // where the bool (.second in the pair) is false\n            // if the value was not inserted (=it was already present)\n            return cache.insert(terminal).second == false;\n        }\n    );\n\n    std::cout &lt;&lt; \"display all the entries (now with unspecified values) \"\n                 \"that will be erased:\\n\";\n    std::copy(past_new_end, terminals.end(),\n                            std::ostream_iterator&lt;std::string&gt;(std::cout, \"&lt;\"));\n    std::cout &lt;&lt; \"\\n\";\n\n    // erase all the moved entries\n    terminals.erase(past_new_end, terminals.end());\n\n    std::cout &lt;&lt; \"printing the unique terminals:\" &lt;&lt; \"\\n\";;\n    for(const std::string&amp; terminal : terminals)\n        std::cout &lt;&lt; terminal &lt;&lt; \" \";\n    std::cout &lt;&lt; \"\\n\";;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551276852, "post_id": 54907377, "comment_id": 96581908, "body": "While this code may solve the problem the answer would be a lot better with an explanation on how/why it does.  Remember that your answer is not just for the user that asked the question but also for all the other people that find it."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1551277613, "post_id": 54907377, "comment_id": 96582416, "body": "No need to check count before inserting, insert returns a bool if the value already existed"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1551277905, "last_edit_date": 1551277905, "creation_date": 1551276674, "answer_id": 54907377, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values/54907377#54907377", "title": "why does unordered set mix the values", "body": "<blockquote>\n  <p>I am trying to remove duplicates from an vector by using an unordered_set. </p>\n</blockquote>\n\n<p>Why do you assumed that <code>unordered_set</code> conserves any kind of order?\nName clearly states that there is no any particular order.</p>\n\n<p>You should use <code>unordered_set</code> only to keep track if item was already found in sequence. Based on that you can remove item from sequence, so this should go like this:</p>\n\n<pre><code>void removeDuplicates(Data &amp;data)\n{\n    std::unordered_set&lt;std::string&gt; foundItems;\n    auto newEnd = std::remove_if(data.begin(), data.end(), [&amp;foundItems](const auto &amp;s)\n                                 {\n                                     return !foundItems.insert(s).second;\n                                 });\n    data.erase(newEnd, data.end());\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/T24UfiLQep0XUQhQ\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/T24UfiLQep0XUQhQ</a></p>\n"}], "owner": {"reputation": 73, "user_id": 6052985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e018ae9da9678c3518ac1faf2254843?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/6052985/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1551289287, "creation_date": 1551275181, "last_edit_date": 1551277277, "question_id": 54906920, "link": "https://stackoverflow.com/questions/54906920/why-does-unordered-set-mix-the-values", "title": "why does unordered set mix the values", "body": "<p>I am trying to remove duplicates from an vector by using an unordered_set. but my design creates an unordered_set that doesn't maintain the ordering correctly. in this example the \"z\" is not at the end. What am I doing wrong? thank you in advance.</p>\n\n<p>EDIT: sorry if I wasn't clear with what I was looking for. I want the output to be \"e,d,a,b,c,z\" I want to keep original ordering but remove duplicates. I currently have it working using about 3 different for loops and an extra copy of the init vector. I was just looking for a STL function that was cleaner if possible.</p>\n\n<p>output produced:\ne d a b c a a a a b b b b c z\nprinting unordered set\ne d a z b c</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;iterator&gt;     \n#include &lt;algorithm&gt;    \n#include &lt;string&gt;\n#include &lt;unordered_set&gt;\nusing namespace std;\n\nint main() {\n    vector&lt;string&gt;terminals = { \"e\", \"d\", \"a\", \"b\", \"c\", \"a\", \"a\", \"a\", \"a\", \"b\",\"b\", \"b\", \"b\", \"c\", \"z\" };\n    for (vector&lt;string&gt;::iterator it = terminals.begin(); it != terminals.end(); it++) // print given vector\n        cout &lt;&lt; *it &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n    unordered_set&lt;string&gt; newSet;\n    copy(terminals.begin(), terminals.end(), inserter(newSet, newSet.end()));\n    cout &lt;&lt; \"printing unordered set\" &lt;&lt; endl;\n    for (unordered_set&lt;string&gt;::iterator it = newSet.begin(); it != newSet.end(); it++)\n        cout &lt;&lt; *it &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n    //system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "owner": {"reputation": 172, "user_id": 9824708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125adc0a45de3434739005e29bfc732a?s=128&d=identicon&r=PG&f=1", "display_name": "Isdeniel", "link": "https://stackoverflow.com/users/9824708/isdeniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1551275275, "answer_count": 0, "score": 1, "last_activity_date": 1551275126, "creation_date": 1551275126, "question_id": 54906908, "link": "https://stackoverflow.com/questions/54906908/difference-between-using-structures-with-methods-and-with-functions-and-classes", "closed_reason": "Duplicate", "title": "Difference between using structures with methods and with functions and classes?", "body": "<p>Recently I was seeing one github project written in C++ that define objects with <code>structs</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>struct Example\n{\n    std::string message;\n\n    Example() \n    {\n        message = \"foo\";\n    }\n\n    void setMessage(std::string newMsg)\n    {\n        message = newMsg;\n    }\n\n    void getMessage(std::string newMsg)\n    {\n        return message;\n    }\n}\n</code></pre>\n\n<p>In researches, I found a definition of the difference between define object with <code>struct</code> and <code>class</code>, is: in <code>struct</code>, methods, functions, and attributes are public by default, in <code>class</code> the same are private by default.</p>\n\n<p>My questions are: What are the benefits to use structs than classes?</p>\n"}, {"tags": ["c++", "node.js", "node-gyp", "node-addon-api"], "owner": {"reputation": 141, "user_id": 7172121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vxV6xdlVOcE/AAAAAAAAAAI/AAAAAAAAB1k/N2PLwOEheZk/photo.jpg?sz=128", "display_name": "Jiri Kral", "link": "https://stackoverflow.com/users/7172121/jiri-kral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551273863, "creation_date": 1551273663, "last_edit_date": 1551273863, "question_id": 54906492, "link": "https://stackoverflow.com/questions/54906492/how-to-provide-static-c-library-functions-with-node-gyp", "title": "How to provide static C library functions with node-gyp?", "body": "<p>I try to compile node_module via node-gyp and node-addon-api. Compilation has no errors, but I can not expose functions from static library. (As same as final node file is smaller than static library abc.a)</p>\n\n<p><strong>binding.gyp</strong></p>\n\n<pre><code>{\n    \"targets\": [\n        {\n            \"target_name\": \"test\",\n            \"cflags!\": [ \"-fno-exceptions\" ],\n            \"cflags_cc!\": [ \"-fno-exceptions\" ],\n            \"sources\": [\n                \"/data/abc.h\",\n                \"main.cpp\"\n            ],\n            'include_dirs': [\n                \"&lt;!@(node -p \\\"require('node-addon-api').include\\\")\"\n            ],\n            'libraries': [\n                \"/data/abc.a\"\n            ],\n            'dependencies': [\n                \"&lt;!(node -p \\\"require('node-addon-api').gyp\\\")\"\n            ],\n            'defines': [ 'NAPI_DISABLE_CPP_EXCEPTIONS' ]\n        }\n    ]\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>/* main.cpp */\n#include &lt;napi.h&gt;\n#include \"abc.h\"\n\nNapi::Object InitAll(Napi::Env env, Napi::Object exports) {\n\n  return exports;\n}\n\nNODE_API_MODULE(testaddon, InitAll)\n</code></pre>\n\n<p><strong>main.js</strong> (for expose object)</p>\n\n<pre><code>const testAddon = require('./build/Release/apostlib');\n\nconsole.log(testAddon);\n\nmodule.exports = testAddon;\n</code></pre>\n"}, {"tags": ["c++", "c", "opencl"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 2, "creation_date": 1551272507, "post_id": 54906046, "comment_id": 96579243, "body": "This question makes no sense. Your CUDA code is using C++ language features (like member functions in classes). OpenCL is C99 based. There are no classes and structures cannot have member functions. There is no &quot;translation&quot; for insoluble problems like this"}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1551273408, "post_id": 54906046, "comment_id": 96579792, "body": "OpenCL does support limited C++ features if it is AMD GPU with high enough version support. But it is needed to build those objects with a kernel and send construction data through arrays-only(kernel parameters). Maybe only Sycl can share host object definitions with a GPU."}], "owner": {"reputation": 39, "user_id": 10085006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc15bdeca4be51b688f883ad3dea745a?s=128&d=identicon&r=PG&f=1", "display_name": "Mstislaw", "link": "https://stackoverflow.com/users/10085006/mstislaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551758692, "creation_date": 1551272204, "last_edit_date": 1551758692, "question_id": 54906046, "link": "https://stackoverflow.com/questions/54906046/how-to-translate-particle-rendering-from-cuda-code-to-opencl-kernels-if-header-f", "title": "How to translate particle rendering from CUDA code to OpenCL kernels if header files for kernels can&#39;t have function qualifiers in them?", "body": "<p>I am trying to take apart a simple particle collision OpenGL programm in order to make it use OpenCL 2.0 instead of CUDA for GPU calculations. However, my lack of experience with OpenCL ended up leaving me stuck on distribution of memory between host and kernel, apparently quite different here from what I know about CUDA.</p>\n\n<p>Code fragment below is used in my <code>renderScene()</code> function now located in <code>main.cu</code></p>\n\n<pre><code>  glColor3f(0.2f, 0.3f, 0.5f);\n  if (g_numParticles &gt; 0)\n  {\n    int blockSize = 32;\n    int gridSize = 1000;\n    int numElemsPerThread = (g_numParticles + blockSize * gridSize - 1) / (blockSize * gridSize);\n\n    cudaMemcpy(g_particlesGPU, g_particles, g_numParticles * sizeof(Particle), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_timesGPU, g_times, g_numParticles * sizeof(float), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_normalsGPU, normals, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_centersGPU, centers, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_tang1GPU, tang1, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_tang2GPU, tang2, g_m * sizeof(Point), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_wGPU, w, g_m * sizeof(float), cudaMemcpyHostToDevice);\n    cudaMemcpy(g_hGPU, h, g_m * sizeof(float), cudaMemcpyHostToDevice);\n\n\n    float4* positions;\n    cudaGraphicsMapResources(1, &amp;g_verticesCuda, 0);\n    size_t num_bytes;\n    cudaGraphicsResourceGetMappedPointer((void**)&amp;positions, &amp;num_bytes, g_verticesCuda);\n\n    moveAndDrawParticles&lt;&lt;&lt;gridSize, blockSize&gt;&gt;&gt;(g_numParticles, g_particlesGPU, g_timesGPU, g_m, g_normalsGPU, g_centersGPU, g_tang1GPU, g_tang2GPU, g_wGPU, g_hGPU, t, positions, numElemsPerThread);\n    //std::cout &lt;&lt; cudaGetLastError() &lt;&lt; std::endl;\n\n    cudaDeviceSynchronize();\n\n    cudaGraphicsUnmapResources(1, &amp;g_verticesCuda, 0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, g_vertices);\n    glVertexPointer(3, GL_FLOAT, 16, 0);\n    glEnableClientState(GL_VERTEX_ARRAY);\n    glDrawArrays(GL_POINTS, 0, g_numParticles);\n    glDisableClientState(GL_VERTEX_ARRAY);\n\n    cudaMemcpy(g_particles, g_particlesGPU, g_numParticles * sizeof(Particle), cudaMemcpyDeviceToHost);\n    cudaMemcpy(g_times, g_timesGPU, g_numParticles * sizeof(float), cudaMemcpyDeviceToHost);\n\n    for (int i = 0; i &lt; g_numParticles; ++i)\n    {\n      if (g_times[i] - t &lt; 0)\n      {\n        g_particles[i] = g_particles[g_numParticles - 1];\n        g_times[i] = g_times[g_numParticles - 1];\n        --g_numParticles;\n        --i;\n      }\n    }\n  }\n</code></pre>\n\n<p>As you can see, here I copy particle information on CUDA device, run <code>moveAndDrawParticles</code> kernel function, synchronize and copy back to host. Translation of this part seems manageable enough: slap some boilerplate code from documentation to initialize OpenCL with all the necessary buffers, replace cudaMemcpy with <code>clEnqueueRead(Write)Buffer()</code>, swap <code>moveAndDrawParticles()</code> for a dedicated <code>kernel.cl</code> that will be compiled using my OCL SDK. </p>\n\n<p>However, the latest turns out to be the point where problems make themselves visible.\nBesides <code>main.cu</code>, I use only two files - <code>particle.cu</code> and its header, <code>particle.h</code>, which you can see below</p>\n\n<pre><code>#include &lt;GL/glew.h&gt;\nstruct Point\n{\n  float x;\n  float y;\n  float z;\n  CUDA_CALLABLE Point(float _x, float _y, float _z) : x(_x), y(_y), z(_z) {}\n};\nstruct Particle\n{\n  Point pos;\n  Point v;\n  CUDA_CALLABLE Particle(Point _pos, Point _v) : pos(_pos), v(_v) {}\n};\n__global__ void moveAndDrawParticles(int n, Particle *particles, float *g_times, int m, const Point *normals, const Point *centers, const Point *tang1, const Point *tang2,\n  const float *w, const float *h, float dt, float4 *positions, int numElemsPerThread);\n</code></pre>\n\n<p>Both Point and Particle structures implemented in particle.cu are used in the host-based part of the main.cu before anything is written to the GPUs. What is more, <code>CUDA_CALLABLE</code> here stands for <code>__host__ __device__</code> and OpenCL has no similar qualifiers.\nThe last problem here is in the <code>moveAndDrawParticles()</code> function - if I turn particle.cu file into OpenCL kernel, it will be necessary to preface every input variable with an appropriate qualifier, which appears impossible to do in the header file - or, for that matter, anywhere outside of kernels themselves. </p>\n\n<p>I would be thankful for any help in clearing up these translation issues, and any pointers to errors in my reading of OpenCL documentation would also be appreciated. As the actual rendering code is quite verbose by necessity, I've omitted plenty of it in hopes that above snippets will be enough for a reasonable impression, if not a readily runnable programm.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1551272065, "post_id": 54905930, "comment_id": 96578948, "body": "So basically you want to <a href=\"https://en.cppreference.com/w/cpp/algorithm/partition\" rel=\"nofollow noreferrer\">partition</a> the original array into negative and non-negative numbers. Then <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">sort</a> each partition, the negative part using absolute values. And then append the two partitions into a new <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">&quot;array&quot;</a>."}, {"owner": {"reputation": 2671, "user_id": 6306782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MetvO.png?s=128&g=1", "display_name": "z32a7ul", "link": "https://stackoverflow.com/users/6306782/z32a7ul"}, "edited": false, "score": 0, "creation_date": 1551272673, "post_id": 54905930, "comment_id": 96579335, "body": "Is this homework?"}], "answers": [{"tags": [], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "is_accepted": false, "score": 0, "last_activity_date": 1551272408, "creation_date": 1551272408, "answer_id": 54906113, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort/54906113#54906113", "title": "C++ arrays sort", "body": "<p>I would iterate over your input and put every value >= 0 into an array POS and any value &lt; 0 into an array NEG.</p>\n\n<p>Then sort both array ascending and separately and use the absolute value to compare the elements (no effect in POS but required for NEG).</p>\n\n<p>For last push NEG to POS and you have it. </p>\n\n<p>Think thats simple and straight forward.</p>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 11124251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7ec445519bd9edce9f26ba6d0ca742?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Z.", "link": "https://stackoverflow.com/users/11124251/daniel-z"}, "is_accepted": false, "score": 5, "last_activity_date": 1551272754, "last_edit_date": 1551272754, "creation_date": 1551272443, "answer_id": 54906121, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort/54906121#54906121", "title": "C++ arrays sort", "body": "<p>Just use predicate.</p>\n\n<pre><code>std::sort(std::begin(a), std::end(a), [](int a, int b) {\n        if(a &gt;= 0) {\n            if(b &gt;= 0) return a &lt; b;\n            else return true;\n        }\n        else {\n            if(b &gt;= 0) return false;\n            else return a &gt; b;\n        }\n    });\n</code></pre>\n\n<p>Predicate returns true if a needs to go before b in array, false - otherwise.<br>\nSo, if a >= 0 and b >= 0 --- we check whether a &lt; b (sort non-negative values in ascending order).<br>\nif a >= 0 and b &lt; 0 --- then b needs to go after a, because all negative values go after non-negative.<br>\nif a &lt; 0 and b >= 0 --- then b needs to go before a.<br>\nif a &lt; 0 and b &lt; 0 --- check whether a > b (to sort in descending order).</p>\n"}, {"tags": [], "owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "is_accepted": false, "score": 1, "last_activity_date": 1551273549, "last_edit_date": 1551273549, "creation_date": 1551273089, "answer_id": 54906307, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort/54906307#54906307", "title": "C++ arrays sort", "body": "<p>I like expressive C++:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  auto a = std::array&lt;int, 7&gt;{4, -8, 7, -6, 0, -7, 5};\n\n  auto it = std::partition(std::begin(a), std::end(a),\n                           [](const int val) noexcept { return val &gt;= 0; });\n\n  std::sort(begin(a), it);\n  std::sort(it, std::end(a), std::greater&lt;int&gt;());\n\n  for(const auto&amp; elem : a) {\n    std::cout &lt;&lt; elem &lt;&lt; \"\\n\";\n  }\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1551273351, "post_id": 54906329, "comment_id": 96579745, "body": "please stay away of std::tuple as is not standard layout. +1 for the conciseness!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 1, "creation_date": 1551273692, "post_id": 54906329, "comment_id": 96579954, "body": "@KostasRim: Which is the problem with non-standard layout types ?"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1551274204, "post_id": 54906329, "comment_id": 96580251, "body": "many beginning with that it violates the memory model. Please refer: <a href=\"https://stackoverflow.com/questions/7160901/why-is-c11s-pod-standard-layout-definition-the-way-it-is\" title=\"why is c11s pod standard layout definition the way it is\">stackoverflow.com/questions/7160901/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1551274277, "post_id": 54906329, "comment_id": 96580290, "body": "@KostasRim is it possible that you misunderstood something? Standard layout types is a rather restricted set of types. If C++ would allow only those we would loose a lot for no good reason"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551274403, "post_id": 54906329, "comment_id": 96580362, "body": "@user463035818 potentially? But if breaking compatibility is one of your goals then feel free to use <code>non standard layout</code>. From my experience, its breaks more than its worth."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 3, "creation_date": 1551274528, "post_id": 54906329, "comment_id": 96580437, "body": "@KostasRim it breaks nothing, standard layout is required for very special cases only. For example <code>struct foo { int x; private: int y; };</code> is not standard layout but using it wont break anything unless you do something that is only allowed for standard layout types..."}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551277113, "post_id": 54906329, "comment_id": 96582064, "body": "@user463035818 Your example is <code>trivial layout</code> which is different than <code>non standard layout</code> :) I am a little biased here because I have seen non standard layout causing havoc in compiler dependent code but yet again I would agree to your point that if you need the feature you should use it. All in all, cppcoreguidelines do not mention much about layout (except from potentially p.9) so I guess from my side there is nothing to argue about. Thanks for the information and yes there was some misunderstanding from my side -- keep up the insightful replies :)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1551273155, "creation_date": 1551273155, "answer_id": 54906329, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort/54906329#54906329", "title": "C++ arrays sort", "body": "<p>Use appropriate predicate with <code>std::sort</code>:</p>\n\n<pre><code>std::sort(std::begin(A), std::end(A), [](int lhs, int rhs) {\n    auto score = [](int n){ return std::make_tuple(n &lt; 0, std::abs(n)); }\n    return score(lhs) &lt; score(rhs);\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 9168008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGttt.jpg?s=128&g=1", "display_name": "Justice_Lords", "link": "https://stackoverflow.com/users/9168008/justice-lords"}, "is_accepted": true, "score": 1, "last_activity_date": 1551273592, "creation_date": 1551273592, "answer_id": 54906473, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort/54906473#54906473", "title": "C++ arrays sort", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nint main()\n{\n    int n,A[100],B[100],Merge_Array[200],aux;\n    cout&lt;&lt;\"max elements\"; cin&gt;&gt;n;\n    cout&lt;&lt;\"elements are\"&lt;&lt;endl;\n    int temp,index_A=0,index_B=0;\n    for(int i=0;i&lt;n;i++)\n    {\n        cin&gt;&gt;temp;\n        if(temp&gt;=0){\n            A[index_A++]=temp; //One array for positive\n        }\n        else{\n            B[index_B++]=temp; //Another one for negative\n        }\n    }\n    //Sort positive in ascending\n    for(int i=0;i&lt;index_A;i++)\n    {\n        for(int j=i+1;j&lt;index_A;j++)\n            if(A[i]&gt;A[j])\n             {\n                    aux=A[i];\n                    A[i]=A[j];\n                    A[j]=aux;\n            }\n    }\n     //Sort negative in descending\n    for(int i=0;i&lt;index_B;i++)\n        for(int j=i+1;j&lt;index_B;j++)\n            if(B[i]&lt;B[j])\n             {\n                    aux=B[i];\n                    B[i]=B[j];\n                    B[j]=aux;\n            }\n    //Merge A and B\n    for(int i=0;i&lt;index_A;i++){\n        Merge_Array[i]=A[i];\n    }\n    for(int i=index_A,k=0;i&lt;n;i++,k++){\n        Merge_Array[i]=B[k];\n    }\n    //Print the Merged Array\n    for(int i=0;i&lt;n;i++){\n        cout&lt;&lt;Merge_Array[i];\n    }\n}\n</code></pre>\n\n<p>Hi Cristyan. All others have answered your question. But I still see you are following C type coding for C++. In C++ you are free to declare your variables anywhere <strong>not necessarily at the start of the function</strong>.</p>\n\n<p>Eg:- <strong>for(int i=0;;)</strong> is feasible.</p>\n\n<p>Moreover, you have not used <strong>dynamic arrays</strong>. I know for starters using <strong>new</strong> and <strong>delete</strong> can be intimidating. But instead, you can use vectors which offers various functionalities, so pointing you to that <a href=\"https://www.geeksforgeeks.org/vector-in-cpp-stl/\" rel=\"nofollow noreferrer\">vectors</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 11125035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WG_Ju0YDB9A/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQM2keDLmTQt0eI2h-s3AguR2ScgWA/mo/photo.jpg?sz=128", "display_name": "Cristyan", "link": "https://stackoverflow.com/users/11125035/cristyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 54906473, "answer_count": 5, "score": -2, "last_activity_date": 1551273592, "creation_date": 1551271818, "question_id": 54905930, "link": "https://stackoverflow.com/questions/54905930/c-arrays-sort", "title": "C++ arrays sort", "body": "<p>I have to solve a problem that consist of sorting a list of number in c++.\nThe condition is :</p>\n\n<ol>\n<li>the positive, and 0 must be sorted ascending  </li>\n<li>negative numbers- descending</li>\n</ol>\n\n<p>if A = {4,-8,7,-6,0,-7,5} the at the final B = {0,4,5,7,-6,-7,-8 }</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nint main()\n{\n    int i,j,n,A[100],B[100],A_nenegative[100],A_negative[100],aux,m=0,k=0;\n    cout&lt;&lt;\"max elements\"; cin&gt;&gt;n;\n    cout&lt;&lt;\"elements are\"&lt;&lt;endl;\n    for(i=0;i&lt;n;i++)\n    {\n    cin&gt;&gt;A[i];\n    }\n  for(i=0;i&lt;n;i++)\n  for(j=i+1;j&lt;n;j++)\n  if(A[i]&gt;A[j])\n  {\n    aux=A[i];\n    A[i]=A[j];\n    A[j]=aux;\n  }\n  for(i = 0; i&lt; n; i++)\n    if(A[i]&gt;=0) {\n    A_nenegative[i]=A[i];\n    B[i]=A_nenegative[i];\n    k++;\n  }\n    for(i=0;i&lt;n;i++)\n  for(j=i+1;j&lt;n;j++)\n  if(A[i]&lt;A[j])\n  {\n    aux=A[i];\n    A[i]=A[j];\n    A[j]=aux;\n  }\n    for(i=0;i&lt;n;i++)\n    if(A[i]&lt;0)\n    {\n    A_negative[i]=A[i];\n    m++;\n    }\n\n}\n</code></pre>\n\n<p>here is where i stopped. I sort  positive numbers in A_nenegative and negative numbers in A_negative. So the question is how can attribute to B first- A_nenegative and then A_negative.\nI try after sorting positive numbers immediate to attribute to B , something like that:</p>\n\n<pre><code>  for(i = 0; i&lt; n; i++)\n    if(A[i]&gt;=0) {\n    A_nenegative[i]=A[i];\n    B[i]=A_nenegative[i];\n    k++;\n  }\n</code></pre>\n\n<p>But i don't know what to do next</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1551275159, "post_id": 54905786, "comment_id": 96580835, "body": "It already works that way when you &quot;hard-code&quot; it, the IDE transforms it into a relative path.  Try it, look in the .vcxproj file afterwards."}, {"owner": {"reputation": 19, "user_id": 9887109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/9887109/derek"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1551280702, "post_id": 54905786, "comment_id": 96584351, "body": "@HansPassant I&#39;m not sure if I&#39;m understanding you, it did not seem to work. In my main project under Properties &gt; C/C++ &gt; AdditionalIncludeDirectories I tried adding the path &quot;$(SolutionDir)\\..\\NPP Utils\\NPP Utils\\src&quot;. This expands into an absolute path to my shared project. This builds, but I don&#39;t see any automatic transformation. In the .vcxproj file The AdditionalIncludeDirectories field is exactly as I typed it, even after I restarted Visual Studio. I also tried typing the absolute path to the shared library, and got the same thing. So I&#39;m not seeing any transformation."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1551282127, "post_id": 54905786, "comment_id": 96585270, "body": "That&#39;s not really &quot;hard-coded&quot; like c:\\foo\\bar.  You already used a relative path, should be just fine as-is although it isn&#39;t necessary.  Most important detail is that a maintainer can check this solution out from source control five years from now and still get a clean build.  That does tend to require either good project documentation or checking-in NPP as well.  Since nobody usually knows how to find the docs back by then, or find the right version of NPP, you do tend to favor the latter."}, {"owner": {"reputation": 19, "user_id": 9887109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/9887109/derek"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1551284036, "post_id": 54905786, "comment_id": 96586594, "body": "I also tried an absolute path like that."}], "owner": {"reputation": 19, "user_id": 9887109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/9887109/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551271395, "creation_date": 1551271395, "question_id": 54905786, "link": "https://stackoverflow.com/questions/54905786/visual-studio-c-additionalincludedirectories-relative-to-external-project", "title": "Visual Studio C++: AdditionalIncludeDirectories relative to external project?", "body": "<p>I have a project in Visual Studio that depends on a second project from another solution. I have set it up this way because the second project is a library that I want to use in multiple independent solutions.</p>\n\n<p>I need to add the external project directory to my AdditionalIncludeDirectories. I could hard code this path, but then if I moved the library solution I would have to update both the project reference and the AdditionalIncludeDirectories. Is there a way to set up the AdditionalIncludeDirectories so that it is relative to the external project directory?</p>\n\n<p>For example, $(ProjectDir) is a macro for the current project directory. Is there something I can use that is basically $(MyExternalProjectDir)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 7, "creation_date": 1551271417, "post_id": 54905785, "comment_id": 96578551, "body": "use smartpointers.....and instead of calling delete twice, dont call it at all :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551271481, "post_id": 54905785, "comment_id": 96578597, "body": "not in theory and even less in practice you should manually <code>new</code> or <code>delete</code> anything but use smart pointers or the like instead"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551271639, "post_id": 54905785, "comment_id": 96578705, "body": "Primarily you solve the issue by <i>not</i> having pointers or your own explicit memory handling. For example by using <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> instead of <code>new[]</code>/<code>delete[]</code>. If you need pointers then opt for <a href=\"https://en.cppreference.com/w/cpp/memory#Smart_pointers\" rel=\"nofollow noreferrer\">smart pointers</a>. And if you really need raw non-owning pointers wrap them yourself using <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII</a>. And <i>test, test, test!</i>"}, {"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551271719, "post_id": 54905785, "comment_id": 96578749, "body": "the question is not how to avoid twice delete-expression, the question is:  is there any method to safty handle the situation? (if it happend all the same) is there any method to safty handle the situation?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1551271761, "post_id": 54905785, "comment_id": 96578772, "body": "You mean, what you can do once it occurs?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1551271773, "post_id": 54905785, "comment_id": 96578782, "body": "To that question the only answer is: No. There&#39;s no way of handling double-free once it occurs. The &quot;proper&quot; way to handle it is to not let it happen in the first place."}, {"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551271931, "post_id": 54905785, "comment_id": 96578859, "body": "@Someprogrammerdude thank you!!!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1551273213, "post_id": 54905785, "comment_id": 96579654, "body": "Out of interest, which operating system are you targetting?"}, {"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551274162, "post_id": 54905785, "comment_id": 96580227, "body": "is it matter? if yes: linux and windows!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1551281867, "post_id": 54905785, "comment_id": 96585056, "body": "@James: With Windows 10 for example you can add a vectored exception handler, and hope that your C++ compiler doesn&#39;t optimise aggressively."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551272200, "post_id": 54905841, "comment_id": 96579038, "body": "i know how to work with pointers? i know what is smart pionters! but the question is not how to avoid twice delete-expression,or something else the question is: is there any method to safty handle the situation? (if it happend all the same) is there any method to safty handle the situation?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551282753, "post_id": 54905841, "comment_id": 96585672, "body": "See my <a href=\"/a/54905923\">comment to Cinder Biscuits</a> - in short, this fixes the easy case but not the hard one (where there are multiple places holding copies of the pointer).  The solution is to have a clear model of ownership (and smart pointers can make that easier)."}], "tags": [], "owner": {"reputation": 161307, "user_id": 67606, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e2173a4eb840daea86793815e3b1a63a?s=128&d=identicon&r=PG", "display_name": "Pablo Santa Cruz", "link": "https://stackoverflow.com/users/67606/pablo-santa-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1551271579, "creation_date": 1551271579, "answer_id": 54905841, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54905841#54905841", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>No. You can't do that. What you could do (as a good practice is):</p>\n\n<pre><code>char *some_pointer = new char[100];\n// use the pointer\nstrcpy(some_pointer, \"this is it\");\nprintf(\"%s\", some_pointer);\n// ALWAYS NULL the POINTER after DELETE\ndelete(some_pointer);\nsome_pointer = NULL;\n</code></pre>\n\n<p>So, whenever you are about to allocate memory for a pointer you could double check:</p>\n\n<pre><code>if (some_pointer != NULL) {\n   // allocate\n} else {\n   // THIS IS SOME KIND OF BUG, can't continue\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551272098, "post_id": 54905871, "comment_id": 96578977, "body": "what the hell? the question is not how to avoid twice delete-expression, the question is: is there any method to safty handle the situation? (if it happend all the same) is there any method to safty handle the situation?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 1, "creation_date": 1551272137, "post_id": 54905871, "comment_id": 96579008, "body": "@James And I answered that question. I said : No there is no method to safely handle the situation. Re-read my answer."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 5, "creation_date": 1551272397, "post_id": 54905871, "comment_id": 96579183, "body": "You&#39;re a side-effect."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 6, "last_activity_date": 1551271658, "creation_date": 1551271658, "answer_id": 54905871, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54905871#54905871", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<blockquote>\n  <p>so that the application does not crash</p>\n</blockquote>\n\n<p>This is just a side-effect, an implementation detail of the real problem. Double deleting causes undefined behavior according to the standard.</p>\n\n<p>There is no way to turn a program exhibiting undefined behavior back into one defined so no, there is no way to handle it safely.</p>\n\n<hr>\n\n<p>Ideally you shouldn't be using <code>new</code> or <code>delete</code> at all.</p>\n"}, {"comments": [{"owner": {"reputation": 1595, "user_id": 1119161, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4941b50fab94bddbe63b102f2c79d2da?s=128&d=identicon&r=PG", "display_name": "dsp_user", "link": "https://stackoverflow.com/users/1119161/dsp-user"}, "edited": false, "score": 0, "creation_date": 1551271933, "post_id": 54905923, "comment_id": 96578862, "body": "You need to write <code>delete [] myptr</code>"}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 1595, "user_id": 1119161, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4941b50fab94bddbe63b102f2c79d2da?s=128&d=identicon&r=PG", "display_name": "dsp_user", "link": "https://stackoverflow.com/users/1119161/dsp-user"}, "edited": false, "score": 0, "creation_date": 1551272041, "post_id": 54905923, "comment_id": 96578927, "body": "If it were an array as originally in my answer, yes, but it&#39;s fine as is now as is."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1551282298, "post_id": 54905923, "comment_id": 96585396, "body": "Unfortunately, the conditions where a double <code>delete</code> are most likely are those in which there are several copies of the pointer; nulling one of them will do nothing to solve the problem (I&#39;ve even seen code that nulls pointer members in destructors - must be a cargo-cult thing!)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1551283225, "post_id": 54905923, "comment_id": 96586018, "body": "No need for the <code>if</code>, since <code>delete nullptr</code> is a no-op, and the assignment likewise."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551284247, "post_id": 54905923, "comment_id": 96586720, "body": "@TobySpeight Correct on both counts. The <code>if</code> is a habit I carry over from C since <code>free()</code> does not have that safety."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551285281, "post_id": 54905923, "comment_id": 96587379, "body": "You must have a broken C library - <code>free(NULL)</code> is documented to do nothing."}, {"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1551288292, "post_id": 54905923, "comment_id": 96589137, "body": "Yes, and there have been several broken implementations over the course of time. Documentation doesn&#39;t always correlate to real world practice. At worst, you&#39;re wasting one stack frame. However, the major compilers simply optimize the null check away if you do add one since it&#39;s a very common idiom."}], "tags": [], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "is_accepted": false, "score": 2, "last_activity_date": 1551271789, "creation_date": 1551271789, "answer_id": 54905923, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54905923#54905923", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>There are situations where you may need to <code>new</code> and <code>delete</code>. \"Just use smart pointers\" can be a cop out in practice. Especially with legacy software. If you must <code>delete</code> an object, it's better to set it null afterwards, (and null check before deleting.)</p>\n\n<pre><code>someObject *myptr = new someObject;\n..... elsewhere in code to free .....\nif (myptr) {\n    delete myptr;\n    myptr = nullptr;\n}\n</code></pre>\n\n<p>This ensures the object underlying the pointer is only deleted once.</p>\n"}, {"comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1551272056, "post_id": 54905925, "comment_id": 96578937, "body": "@SombreroChicken First of all: this is XY problem. Secondly you are nitpicking and you take everything literally. Finally: this actually helps unlike &quot;you are doomed&quot;."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 4728, "user_id": 1288408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r09bq.jpg?s=128&g=1", "display_name": "Modus Tollens", "link": "https://stackoverflow.com/users/1288408/modus-tollens"}, "edited": false, "score": 1, "creation_date": 1551272795, "post_id": 54905925, "comment_id": 96579419, "body": "@ModusTollens I would agree for that example. Anyway, we&#39;re going way off track, it matters not, I&#39;ll remove my comments."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551274102, "post_id": 54905925, "comment_id": 96580175, "body": "sorry, sometimes I write something in the hope of adding something useful just to realize i caused the opposite. Deleted the comment, I really didnt mean to critize or offend you"}], "tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": false, "score": 8, "last_activity_date": 1551273344, "last_edit_date": 1551273344, "creation_date": 1551271794, "answer_id": 54905925, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54905925#54905925", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>Smart pointers were invented to deal with this problem.</p>\n\n<p>If an object <code>X</code> is owned by object <code>Y</code> then <code>Y</code> should have <code>std::unique_ptr&lt;X&gt;</code> instead of raw pointer. No delete needed, <code>X</code> will be cleaned when <code>Y</code> is destroyed (or it decides to release the pointer).</p>\n\n<p>If an object <code>X</code> is shared between some objects then each of them should have copies of <code>std::shred_ptr&lt;X&gt;</code>. Again no delete needed.</p>\n\n<p>The only thing you should think about is: who owns what and when?</p>\n\n<p><strong>EDIT:</strong> (to satisfy literal question) No, you can't do anything about it. Double delete is UB. The sixth circle of hell. Although you can try to catch segfault (which is often caused by double delete) this will only increase your torment because you are in an undefined space anyway. The only way to handle it safely is to get rid of it.</p>\n"}, {"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1551272357, "post_id": 54906084, "comment_id": 96579163, "body": "You&#39;re untidy ."}, {"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551272406, "post_id": 54906084, "comment_id": 96579189, "body": "@Bathsheba, do you understand my question?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551272454, "post_id": 54906084, "comment_id": 96579215, "body": "@James: I think so - don&#39;t you like the idea of setting the pointer to <code>nullptr</code>?"}, {"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551272714, "post_id": 54906084, "comment_id": 96579357, "body": "@Bathsheba i want to know, if in theory somebody do that (twice use delete-expression), can we safety handle it? i kow how to avoid the situations like this? you know! there is so much methodes to do this!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 2, "creation_date": 1551272954, "post_id": 54906084, "comment_id": 96579503, "body": "@James calm down a bit, your question is highly misunderstandable, becuase &quot;safty handle the situation so that the application does not crash?&quot; once you have a double free your applicaltion already crashed so you need to do something <b>before</b>, once it crashed it is too late"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1551281956, "last_edit_date": 1551281956, "creation_date": 1551272327, "answer_id": 54906084, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54906084#54906084", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>The behaviour of <code>delete p; delete p;</code> is <em>undefined</em> unless <code>p</code> is <code>nullptr</code>.</p>\n\n<p>Setting the deleted pointer to <code>nullptr</code> following the <code>delete</code> is one way: the C++ standard requires <code>delete p;</code> and <code>delete[] p;</code> to be a no-op if <code>p</code> is <code>nullptr</code>. In other words <code>delete p; p = nullptr; delete p; p = nullptr;</code> is well-defined.</p>\n\n<p>But this can lead to untidy code.</p>\n\n<p>Other than the facetious advice to take more care, using smart pointer classes such as <code>std::unique_ptr</code> and <code>std::shared_ptr</code> eliminates the need for explicit <code>delete</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "is_accepted": false, "score": -1, "last_activity_date": 1551272498, "creation_date": 1551272498, "answer_id": 54906139, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54906139#54906139", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>I fount the answer!\nTo that question the only answer is: No. It is undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551282576, "post_id": 54909028, "comment_id": 96585560, "body": "Just to clarify: the standard library <code>operator new</code> and <code>operator delete</code> <i>may</i> be implemented using <code>::malloc()</code> and <code>::free()</code>, but that&#39;s not required.  I assume that&#39;s what you mean by &quot;pretty much&quot;.  I guess the performance will be similar to running the program under Valgrind (but without the uninitialized value tracking that Valgrind performs) or other checkers (Electric Fence? I&#39;ve heard of it but never used it)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551282790, "post_id": 54909028, "comment_id": 96585697, "body": "@TobySpeight -- yes, the standard does not require using <code>malloc()</code> and <code>free()</code>. But it explicitly requires that <code>malloc()</code> and <code>free()</code> do not use <code>operator new()</code> and <code>operator delete()</code>."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1551281621, "creation_date": 1551281621, "answer_id": 54909028, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54909028#54909028", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>The way to do it is to provide your own versions of <code>operator new</code> and <code>operator delete</code>. <code>operator new</code> gets memory by calling <code>malloc()</code>, and <code>operator delete()</code> releases it by calling <code>free()</code>. That's pretty much what the standard library ones do. But yours can do more. <code>operator new()</code> gets the memory, then adds the address that it got to a list of allocated addresses. <code>operator delete()</code> first checks whether the pointer that was passed to it is in the list of allocated addresses. If so, it removes it from the list and frees the memory. If not, it throws an exception.</p>\n\n<p>You won't like the performance.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551363836, "post_id": 54923149, "comment_id": 96620228, "body": "thank you for your answer! but i need something else, i dont need to avoid twice deleting, i want to know, is there any legal way (method) to safety handle if it happened?"}, {"owner": {"reputation": 3073, "user_id": 406859, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f2f236bee1b99f9eee93b8d6c522de34?s=128&d=identicon&r=PG", "display_name": "WaffleSouffle", "link": "https://stackoverflow.com/users/406859/wafflesouffle"}, "reply_to_user": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "edited": false, "score": 0, "creation_date": 1551793024, "post_id": 54923149, "comment_id": 96763391, "body": "I&#39;m not sure I understand. I believe the code above is an attempt at demonstrating a &quot;safe&quot; double deletion - most notably the repeated <code>delete ptwice</code> lines."}], "tags": [], "owner": {"reputation": 3073, "user_id": 406859, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f2f236bee1b99f9eee93b8d6c522de34?s=128&d=identicon&r=PG", "display_name": "WaffleSouffle", "link": "https://stackoverflow.com/users/406859/wafflesouffle"}, "is_accepted": false, "score": 0, "last_activity_date": 1551348703, "creation_date": 1551348703, "answer_id": 54923149, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression/54923149#54923149", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>You can take ownership of memory management for a given type by overriding the <code>new</code> and <code>delete</code> operators. This is not straightforward (for example overriding for array allocation) and Scott Meyers Effective C++ books has some great material on this (Item 16 for example), but I believe in theory it would give you the ability to delete a pointer twice.</p>\n\n<p>I am not sure what the standard's view on this would be so I suspect as many have already said about this area of the language, deleting the same object twice would still be Undefined Behaviour.</p>\n\n<p>Still, for the sake of discussion...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_set&gt;\n\nnamespace {\n  class DeleteMeTwice\n  {\n      static std::unordered_set&lt;void *&gt; deleted;\n\n    public:\n      void * operator new (std::size_t count)\n      {\n        void * const result = ::operator new(count);\n        std::cout &lt;&lt; \"Newing: \" &lt;&lt; result &lt;&lt; \"\\n\";\n        return result;\n      }\n\n      void operator delete(void *ptr)\n      {\n        if (is_deleted(ptr))\n        {\n          std::cout &lt;&lt; \"Not deleting: \" &lt;&lt; ptr &lt;&lt; \"\\n\";\n        }\n        else\n        {\n          std::cout &lt;&lt; \"Deleting: \" &lt;&lt; ptr &lt;&lt; \"\\n\";\n          ::operator delete(ptr);\n          deleted.insert(ptr);\n        }\n      }\n\n      static bool is_deleted(void *ptr)\n      {\n        return deleted.find(ptr) != deleted.end();\n      }\n  };\n\n  std::unordered_set&lt;void *&gt; DeleteMeTwice::deleted;\n}\n\nint main(int argc, char **argv)\n{\n    DeleteMeTwice * const ptwice = new DeleteMeTwice;\n\n    delete ptwice;\n    delete ptwice;\n\n    return 0;\n}\n</code></pre>\n\n<p>Running on OSX with <code>c++ Apple LLVM version 10.0.0 (clang-1000.11.45.5)</code> returns:\n<code>\nNewing: 0x7fc384c02ab0\nDeleting: 0x7fc384c02ab0\nNot deleting: 0x7fc384c02ab0\n</code></p>\n"}], "owner": {"reputation": 41, "user_id": 8867271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wumdL.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/8867271/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 54905871, "answer_count": 8, "score": 0, "last_activity_date": 1551348703, "creation_date": 1551271394, "last_edit_date": 1551271500, "question_id": 54905785, "link": "https://stackoverflow.com/questions/54905785/is-there-any-method-to-safe-handle-twice-freeing-memory-by-delete-expression", "title": "Is there any method to safe handle twice freeing memory by delete-expression?", "body": "<p>If in theory imagine a situation where, by chance or by mistake (either through carelessness, or due to lack of experience, etc.), the memory was freed twice using delete-exprssion (yes, a good developer will not allow this, in well-designed architectural solutions, but howewer) how to (can we, or is there any method to) safty handle the situation so that the application does not crash?</p>\n"}, {"tags": ["c++", "arrays", "file", "pointers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1551271231, "post_id": 54905592, "comment_id": 96578439, "body": "you are looking for <code>std::array</code>"}, {"owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "edited": false, "score": 0, "creation_date": 1551271241, "post_id": 54905592, "comment_id": 96578450, "body": "Your <code>generate_maze</code> function is returning a pointer to a variable allocated on the stack, <code>test_maze</code>. This is undefined behaviour, as the lifetime of <code>test_maze</code> is only as long as the function enclosing its definition. Several solutions: allocate it on the heap, make it static, make it global, etc."}], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 0, "last_activity_date": 1551271277, "creation_date": 1551271277, "answer_id": 54905759, "question_id": 54905592, "link": "https://stackoverflow.com/questions/54905592/c-make-function-return-array-cross-file/54905759#54905759", "title": "C++ make function return array cross file", "body": "<p><code>generate_maze</code> returns the address of <code>test_maze[0]</code>, which is a local variable. You should never ever return addresses of (or references to) local variables from a function.</p>\n\n<p>Allocate the maze on the heap instead and return that:</p>\n\n<pre><code>char* generate_maze() {\n    char local[] = {\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0,\n    0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n    };\n    char* ret = new char[sizeof local];\n\n    memcpy(ret, local, sizeof local);\n\n    return ret;\n}\n</code></pre>\n\n<p>Alternatively, just return a <code>std::vector</code> which does its own memory management.</p>\n\n<pre><code>std::vector&lt;char&gt; generate_maze() {\n    return {0, 0, 0, ...};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 11124251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7ec445519bd9edce9f26ba6d0ca742?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Z.", "link": "https://stackoverflow.com/users/11124251/daniel-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1551271748, "last_edit_date": 1551271748, "creation_date": 1551271384, "answer_id": 54905782, "question_id": 54905592, "link": "https://stackoverflow.com/questions/54905592/c-make-function-return-array-cross-file/54905782#54905782", "title": "C++ make function return array cross file", "body": "<p><code>generate_maze()</code> returns pointer to local array, which is destroyed when function exits. <br>\nTo solve this problem, you can define test_maze static: <code>static char test_maze[]</code>.  <br><br>\nThis will create one permanent array for all <code>generaze_maze()</code> function calls. If you going to implement <code>generate_maze()</code> to return different maze arrays, better use <code>std::vector</code> or <code>std::array</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10807168, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LbA4usjpUaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jRv2UJoUZ9AY5SfwgqXB4jOCay9g/mo/photo.jpg?sz=128", "display_name": "Constantine Freak", "link": "https://stackoverflow.com/users/10807168/constantine-freak"}, "edited": false, "score": 0, "creation_date": 1551306475, "post_id": 54906636, "comment_id": 96597269, "body": "Thank you for the solution."}], "tags": [], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "is_accepted": false, "score": 3, "last_activity_date": 1551274169, "creation_date": 1551274169, "answer_id": 54906636, "question_id": 54905592, "link": "https://stackoverflow.com/questions/54905592/c-make-function-return-array-cross-file/54906636#54906636", "title": "C++ make function return array cross file", "body": "<p>The code does not work because <code>generate_maze()</code> returns a pointer to a local variable, which is destroyed on exiting the function. To make it work one <em>could</em> design <code>generate_maze()</code> to allocate an array of <code>char</code> via <code>new</code>, then the allocated array survives after <code>generate_maze()</code> is finished. But that would also require to explicitly free the memory, after <code>char *maze</code> is no longer used.</p>\n\n<p>A much better <em>c++-like</em> solution is the following.\nIf the size of the array is fixed, you should better use <code>std::array</code> to store the result of <code>generate_maze()</code>, as:</p>\n\n<pre><code>#include &lt;array&gt; \n\nstd::array&lt;char, 169&gt; generate_maze() {\n\n    return { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0,\n    0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n    };\n}\n</code></pre>\n\n<p>If the size of the array returned by <code>generate_maze()</code> is not fixed, the correct way is to use <code>std::vector</code> and declare <code>generate_maze()</code> as</p>\n\n<pre><code>#include &lt;vector&gt;\nstd::vector&lt;char&gt; generate_maze();\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10807168, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LbA4usjpUaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jRv2UJoUZ9AY5SfwgqXB4jOCay9g/mo/photo.jpg?sz=128", "display_name": "Constantine Freak", "link": "https://stackoverflow.com/users/10807168/constantine-freak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54905759, "answer_count": 3, "score": 0, "last_activity_date": 1551274169, "creation_date": 1551270745, "question_id": 54905592, "link": "https://stackoverflow.com/questions/54905592/c-make-function-return-array-cross-file", "title": "C++ make function return array cross file", "body": "<p>I'm looking to make a function return an array of set size, and assign the value of that array to another array. The function is located in one file and the array I will be assigning it's return value to is located in another. </p>\n\n<p>I'm attempting to do this in an SFML project. Whenever I call the array function, my program freezes and stops responding. </p>\n\n<p>generate_maze.cpp:</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include \"generate_maze.h\"\n\nchar* generate_maze() {\n\n    char test_maze[169] = {\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0,\n    0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0,\n    0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0,\n    0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0,\n    0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0,\n    0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n    };\n\n    return test_maze;\n\n}\n</code></pre>\n\n<p>extract of main.cpp:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n\n#include \"controls.h\"\n#include \"generate_maze.h\"\n\n...\n\nchar* maze = generate_maze();\nstd::cout &lt;&lt; (int) maze[0] &lt;&lt; std::endl;\n</code></pre>\n\n<p>generate_maze.h:</p>\n\n<pre><code>char* generate_maze();\n</code></pre>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 1, "creation_date": 1551272153, "post_id": 54905080, "comment_id": 96579016, "body": "What your code should explain? I see no place where you call to <code>setData</code>. What is  <code>EditedListModel</code>? Please provide <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Ah, and .. yes, welcome to SO -)"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1551275597, "post_id": 54905080, "comment_id": 96581098, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9500280/access-c-function-from-qml\">Access C++ function from QML</a>"}, {"owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551278989, "post_id": 54905080, "comment_id": 96583256, "body": "@folibis <code>itemSelected = checked</code> calls the <code>setData</code> method of the model"}], "owner": {"reputation": 11, "user_id": 7812225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ed1e41312138d387b5acead2b3c16f?s=128&d=identicon&r=PG&f=1", "display_name": "J. Gargul&#225;k", "link": "https://stackoverflow.com/users/7812225/j-gargul%c3%a1k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551273741, "creation_date": 1551269032, "last_edit_date": 1551273741, "question_id": 54905080, "link": "https://stackoverflow.com/questions/54905080/qabstractitemmodel-setdata-how-to-check-returned-value-in-qml", "title": "QAbstractItemModel setData - how to check returned value in Qml", "body": "<p>When I set data from QML to model, how can I check returned value of  <code>setData</code> method?</p>\n\n<p>For example:</p>\n\n<p><strong>QML:</strong></p>\n\n<pre><code>delegate:\n   CheckBox {\n   id: selCheckbox\n\n   onCheckStateChanged: { \n\n      // This call setData method\n      itemSelected = checked \n\n      // And HERE I need check returned value from setData method.\n   }\n}\n</code></pre>\n\n<p><strong>C++:</strong></p>\n\n<pre><code>class EditedListModel: public QAbstractListModel \n{\n\n    bool EditedListModel::setData( const QModelIndex &amp;index, const QVariant &amp;value, int role )\n    {\n       bool retVal = false;\n\n       if( index.isValid() )\n       {\n         // Some condition which allows item selection \n           if( ... )\n                m_ItemSelected[index.row()] = data.toBool();\n       }\n       return retVal;\n    } \n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1551271524, "post_id": 54905069, "comment_id": 96578628, "body": "Could making the LL class <code>friend</code> help?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1551276076, "post_id": 54905069, "comment_id": 96581374, "body": "It&#39;s not really clear to me exactly where the access is needed, but either using <code>protected</code> instead of <code>private</code> or as suggested by Serge, make it a <code>friend</code>."}, {"owner": {"reputation": 321, "user_id": 8694474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97659a955c605478604ad5252e73a28?s=128&d=identicon&r=PG&f=1", "display_name": "JuliusCaesar", "link": "https://stackoverflow.com/users/8694474/juliuscaesar"}, "edited": false, "score": 0, "creation_date": 1551284217, "post_id": 54905069, "comment_id": 96586700, "body": "I modified my first to to make the access more clear"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 8694474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97659a955c605478604ad5252e73a28?s=128&d=identicon&r=PG&f=1", "display_name": "JuliusCaesar", "link": "https://stackoverflow.com/users/8694474/juliuscaesar"}, "edited": false, "score": 0, "creation_date": 1551284367, "post_id": 54905956, "comment_id": 96586807, "body": "hm good point which the friend option.I didn&#39;t think of this. Thx!"}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": true, "score": 1, "last_activity_date": 1551273506, "last_edit_date": 1551273506, "creation_date": 1551271928, "answer_id": 54905956, "question_id": 54905069, "link": "https://stackoverflow.com/questions/54905069/c-designing-a-software-architecture-for-a-multilayer-communication/54905956#54905956", "title": "C++ Designing a software architecture for a multilayer communication", "body": "<p>Update: Sorry I miss understood you, here is the solution, I think you asked for:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n\ntemplate&lt;size_t user_data_length&gt;\nclass CSlave_Com_Mid_level\n{\n\npublic:\n    ///This is the structure of a single packet with is sent or received\n    struct Single_Packet_T\n    {\n        //some header Info...\n        uint8_t data[user_data_length]; ///&lt; the actual user data\n    };\n\n    /**\n     * Called be the LL Driver when new data was received\n     * @param rx_packet Received data\n     * @return true when the received data could be processed\n     */\n    bool Process_received_Packet(const Single_Packet_T&amp; rx_packet) const {\n        std::cout &lt;&lt; \"Test\\n\";\n        return false;\n    }\n\n    /**\n     * Called by the LL driver. Stores new data to sent in tx_packet\n     * @param tx_packet Storage buffer for the new TX Data\n     * @return true when the buffer was filled correctly\n     */\n    bool Get_Next_Packet_To_Send(Single_Packet_T&amp; tx_packet);\n\n\n};\n\ntemplate&lt;size_t user_data_length&gt;\nclass CSlave_Com_API;\n\ntemplate &lt;size_t message_length&gt;\nclass CSlave_Com_LL_Slave_Com\n{\npublic:\n    /**\n     *Constructor\n     * @param mid_level_reference reference to the used midlevel class instance. This instance is needed to correctly\n     *  pass the received data to the higher levels and to get the next data to be send\n     */\n    CSlave_Com_LL_Slave_Com(const CSlave_Com_API&lt;message_length&gt;&amp; mid_level_reference)\n    : mid_level_instance(mid_level_reference) {\n        typename CSlave_Com_Mid_level&lt;message_length&gt;::Single_Packet_T packet{};\n        this-&gt;mid_level_instance.Process_received_Packet(packet);\n    }\n\n    ///Destruktor\n    ~CSlave_Com_LL_Slave_Com() = default;\n\nprivate:\n    ///Midlevel Reference\n    const CSlave_Com_Mid_level&lt;message_length&gt;&amp; mid_level_instance;\n};\n\ntemplate&lt;size_t user_data_length&gt;\nclass CSlave_Com_API: protected CSlave_Com_Mid_level&lt;user_data_length&gt; {\n    friend class CSlave_Com_LL_Slave_Com&lt;user_data_length&gt;;\n};\n\nint main()\n{\n    CSlave_Com_API&lt;42UL&gt; foo{};\n    CSlave_Com_LL_Slave_Com&lt;42UL&gt; bar{foo};\n}\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 8694474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97659a955c605478604ad5252e73a28?s=128&d=identicon&r=PG&f=1", "display_name": "JuliusCaesar", "link": "https://stackoverflow.com/users/8694474/juliuscaesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54905956, "answer_count": 1, "score": 0, "last_activity_date": 1551284180, "creation_date": 1551268994, "last_edit_date": 1551284180, "question_id": 54905069, "link": "https://stackoverflow.com/questions/54905069/c-designing-a-software-architecture-for-a-multilayer-communication", "title": "C++ Designing a software architecture for a multilayer communication", "body": "<p>as you all know, every communication channel has different max data length capabilities.\nFor example the max. Data length in USB HID is 64 byte, or 256 byte for a UART modbus channel. \nHowever as a user, i do not want to care about these restrictions. My communication should be able the split large packets in multiple smaller ones (depending on the max data length of the channel). The actual split routine is the same, only the data length per single packet varies.</p>\n\n<p>That's my motivation for writing a generalised communication API.</p>\n\n<p><strong>So let's start with the higher levels:</strong></p>\n\n<pre><code>template&lt;size_t user_data_length&gt;\nclass CSlave_Com_API: protected CSlave_Com_Mid_level&lt;user_data_length&gt;\n{\n    /*\n     * all of these Functions need elements from CSlave_Com_Mid_level to\n     * work correctly\n     */\npublic:\n\n    /**\n     * This Function is called by the user thread. It need access to some elements from CSlave_Com_Mid_level.\n     * These elements are not shown here to make this problem better understandable\n     * \n     * Processes a Received Request and generates the answer. The answer is copied to pRequest as well\n     * @param pRequest Pointer to the Request\n     * @return true wenn an answer was generated\n     */\n    bool Process_Request(CRequest* const pRequest);\n\nprivate:\n\n    /**\n     * This Function is called within Process_Request (by the user thread). \n     * It need access to some elements from CSlave_Com_Mid_level.\n     * These elements are not shown here to make this problem better understandable\n     * \n     * Tells the LL Driver that the answer has been prepared (and stored to pRequest).\n     * The answer is no ready to be sent\n     * @param pRequest Pointer to the request\n     * @return true if the LL Driver has been notified correctly\n     */\n    bool Send_Answer(CRequest* const pRequest);\n\n    /**\n     * This Function is called within Process_Request (by the user thread). \n     * It need access to some elements from CSlave_Com_Mid_level.\n     * These elements are not shown here to make this problem better understandable\n     * \n     * Tells the LL driver to abort the request because something went wrong\n     * @param pRequest Pointer to the Request\n     * @return true if the LL driver has been notified correctly\n     */\n    bool Abort_Request(CRequest* const pRequest);\n};\n\ntemplate&lt;size_t user_data_length&gt;\nclass CSlave_Com_Mid_level\n{\n\npublic:\n    ///This is the structure of a single packet with is sent or received\n    struct Single_Packet_T\n    {\n        //some header Info...\n        uint8_t data[user_data_length]; ///&lt; the actual user data\n    };\n\n    /**\n     * This Function is called by the driver thread. It need access to some elements from CSlave_Com_Mid_level.\n     * These elements are not shown here to make this problem better understandable\n     * \n     * Called be the LL Driver when new data was received\n     * @param rx_packet Received data\n     * @return true when the received data could be processed\n     */\n    bool Process_received_Packet(const Single_Packet_T&amp; rx_packet);\n\n    /**\n     * This Function is called by the driver thread. It need access to some elements from CSlave_Com_Mid_level.\n     * These elements are not shown here to make this problem better understandable\n     * \n     * Called by the LL driver. Stores new data to sent in tx_packet\n     * @param tx_packet Storage buffer for the new TX Data\n     * @return true when the buffer was filled correctly\n     */\n    bool Get_Next_Packet_To_Send(Single_Packet_T&amp; tx_packet);\n\nprivate:\n    /// This queue contains all currently processed requests\n    QueueHandle_t requests;\n};\n</code></pre>\n\n<p>The idea is that you can initialise an instance of the API for each channel. i.e.</p>\n\n<pre><code>CSlave_Com_API&lt;64&gt; usb_slave_com;\nCSlave_Com_API&lt;256&gt; modbus_slave_com;\n</code></pre>\n\n<p>Now the <strong>LL</strong> is obviously very different for every channel.\nThe problem is, that i have 2 different tasks:\nThe high level task is triggered by a user request, the actual hardware communication runs in an own separate task to ensure data is only sent when the hardware is actually ready to send data.</p>\n\n<p>A <strong>sample LL class</strong> could look like that:</p>\n\n<pre><code>class CSlave_Com_LL_Slave_Com\n{\npublic:\n    /**\n     *Constructor\n     * @param mid_level_reference reference to the used midlevel class instance. This instance is needed to correctly\n     *  pass the received data to the higher levels and to get the next data to be send\n     */\n    CSlave_Com_LL_Slave_Com(const CSlave_Com_Mid_level&lt;message_length&gt;&amp; mid_level_reference);\n\n    ///Destruktor\n    ~CSlave_Com_LL_Slave_Com();\n\nprivate:\n    ///Midlevel Reference\n    const CSlave_Com_Mid_level&lt;message_length&gt;&amp; mid_level_instance;\n};\n</code></pre>\n\n<p>The problem is: My LL class needed to access the midlevel base of some API instance. However this base is protected.\nObviously i could make the mid level base public, but that would mean that the user can (accidentally) access the midlevel layer. I do not want that.</p>\n\n<p>do you have any recommendations how to solve my problem?</p>\n\n<p>thx for your help :)</p>\n"}, {"tags": ["c++", "lambda", "static", "c++17", "header-files"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1551269069, "post_id": 54905053, "comment_id": 96577188, "body": "Only if the signature is changed sufficiently enough so that nothing is <code>auto</code>, and once that happy event occurs, simply declare a <code>std::function</code>."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1551269198, "post_id": 54905053, "comment_id": 96577267, "body": "@SamVarshavchik How would I go about that without destroying all the nice flexibility of that function?"}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1551270662, "post_id": 54905053, "comment_id": 96578077, "body": "You mean something like this? in header file: <code>static auto foo;</code> and in cpp: <code>auto Bar::foo = [](auto&amp; param1, auto&amp; param2 auto&amp; param3) {         &#47;&#47; do stuff         return;     }</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1551270915, "post_id": 54905053, "comment_id": 96578248, "body": "@ImanKianrostami - have you tried if your code compile?"}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1551271299, "post_id": 54905053, "comment_id": 96578488, "body": "@max66 No, I just want to see if this is <b>SOMETHING LIKE</b> nada wants."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1551271406, "post_id": 54905053, "comment_id": 96578546, "body": "@ImanKianrostami Your idea would be okay, but doesn&#39;t compile - it returns <code>error: declaration of &#39;auto foo&#39; has no initializer</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551271659, "post_id": 54905053, "comment_id": 96578714, "body": "why not make it a static member function? The big advantage of lambdas is that you can write the definition in place where you need it, if you want to write the definition somewhere else I dont see the advantage of using a lambda"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551271826, "post_id": 54905053, "comment_id": 96578809, "body": "@user463035818 Would that be pretty? How could it look like provided that it kept its flexibility?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551272255, "post_id": 54905053, "comment_id": 96579072, "body": "tbh I doubt whether such a &quot;catch all&quot; overload is a good idea in the first place. What do you actually want to do in <code>foo</code>? From the top of my head I dont know what could be a function that can work with any combination of any 3 parameters"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551272443, "post_id": 54905053, "comment_id": 96579208, "body": "note that lambdas are merely syntactic sugar, such that you do not need to write a functor class yourself. Not sure but I think if you did manually write the functor class then you would not have the problem because in contrast to lambdas your own functor has a &quot;well behaved&quot; type in the sense that you can &quot;reuse&quot; it without problems"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551272791, "post_id": 54905053, "comment_id": 96579414, "body": "@user463035818 In my case it takes different types of containers like <code>std::vector</code>, <code>dlib::matrix</code> and does statsistical stuff with its values and changes them. I had no luck with making a template function out of it. The thing is, you can iterate over all values both, <code>std::vector</code> and <code>dlib::matrix</code> with a for each loop although <code>dlib::matrix</code> might be multi-dimensional (access by [x][y] and vector access by [x])."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1551273163, "post_id": 54905053, "comment_id": 96579625, "body": "Why do people ever define lambdas where a plain old function will do?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1551274273, "post_id": 54905053, "comment_id": 96580286, "body": "@n.m. Because the function template syntax is so verbose. Maybe?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551280968, "post_id": 54905053, "comment_id": 96584528, "body": "@eerorika The thing is, the actual template syntax is more flexible. And when you want to change your lambda a little tiny bit and it doesn&#39;t quite fit the syntax, you spend three hours to think how one can do that in the lambda syntax, write 3 SO questions, get 2 downvoted and closed, get 10 unsatisfactory replies,  and in the end change it to a normal template syntax anyway,"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551272177, "post_id": 54905929, "comment_id": 96579028, "body": "was just going to write the same, but there is not much I could add to your answer"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 3, "last_activity_date": 1551273578, "last_edit_date": 1551273578, "creation_date": 1551271814, "answer_id": 54905929, "question_id": 54905053, "link": "https://stackoverflow.com/questions/54905053/how-to-split-static-lambda-in-declaration-and-definition/54905929#54905929", "title": "How to split static lambda in declaration and definition?", "body": "<p>The basic problem is that every lambda expression has its own separate type (<a href=\"https://stackoverflow.com/a/53629850/2064761\">see also this answer</a>). Since you need to know the type to declare a variable and you need to know the lambda expression to know its type, there is no way to declare a variable to hold the result of a lambda expression without knowing the lambda expression itself.</p>\n\n<p>It is possible to declare a variable to hold your lambda and define the variable separately as long as you know the lambda expression in both places. For example:</p>\n\n<pre><code>inline auto makeFoo() {\n    return [](auto&amp; param1, auto&amp; param2, auto&amp; param3) {\n        // do stuff\n        return;\n    };\n}\n\nclass A final {\n    static decltype(makeFoo()) foo;\n};\n\ndecltype(makeFoo()) A::foo = makeFoo();\n</code></pre>\n\n<p>However, it is impossible to separate the declaration of the variable from the lambda expression (i.e., you can't have the lambda expression only in the file where you put the definition of the variable).</p>\n\n<p>A lambda expression that does not capture anything can be converted to a pointer to a function. If you don't need your lambda to capture anything (like in your example) and only needed a callable for one specific signature, you could simply declare <code>A::foo</code> to be of function pointer type and initialize the definition of <code>A::foo</code> with a matching lambda:</p>\n\n<pre><code>class A final {\n    static void (*foo)(int&amp;, float&amp;, double&amp;);\n};\n\nvoid (*A::foo)(int&amp;, float&amp;, double&amp;) = [](auto&amp; param1, auto&amp; param2, auto&amp; param3) {\n    // do stuff\n    return;\n};\n</code></pre>\n\n<p>If you really need a generic lambda (one with <code>auto</code> parameters) like suggested by your example, that won't work either and you're most likely out of luck. Having a generic call operator means that the <code>operator ()</code> function of your closure type must be a function template. Having an <code>operator ()</code> function template means that its definition must be known for anyone to actually make a call. Even if you wrote your own class instead of using a lambda expression, there would be no way to have anyone call a generic <code>operator ()</code> without knowing its definition. All you could do is declare explicit instantiations of the <code>operator ()</code> template for all the signatures you need to support and define those separately. But that, again, requires that you actually know in advance which concrete signatures you need your callable to support\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551278678, "post_id": 54906157, "comment_id": 96583088, "body": "Function template declarations can have <code>auto</code> return type: <a href=\"http://coliru.stacked-crooked.com/a/dc58a1dde68dafc0\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/dc58a1dde68dafc0</a>. This works without any additional restrictions because once you instantiate the function template, you&#39;ll need the actual definition anyway, and the return type can then be deduced for that concrete instantiation like for any other function with return type <code>auto</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551278776, "post_id": 54906157, "comment_id": 96583140, "body": "@rubenvb but if you&#39;re going to hide the definition elsewhere, then your <code>auto</code> declaration won&#39;t be of much use: <a href=\"http://coliru.stacked-crooked.com/a/c50134252a65c713\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c50134252a65c713</a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551279082, "post_id": 54906157, "comment_id": 96583309, "body": "&quot;elsewhere&quot; is not per se after the call site in preprocessed code order. But hmm I was under the impression function template definition needed to go before the first point of instantiation."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551279139, "post_id": 54906157, "comment_id": 96583346, "body": "@rubenvb in this case it may be in a separate translation unit altogether, as OP wants to define the function outside the header. Knowing that <code>auto</code> return type is OK for separate template definition within the header is a nifty thing to know though."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1551279481, "post_id": 54906157, "comment_id": 96583564, "body": "If I could accept more than one answer, I would have accepted this, too."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1551279575, "last_edit_date": 1551279575, "creation_date": 1551272550, "answer_id": 54906157, "question_id": 54905053, "link": "https://stackoverflow.com/questions/54905053/how-to-split-static-lambda-in-declaration-and-definition/54906157#54906157", "title": "How to split static lambda in declaration and definition?", "body": "<blockquote>\n  <p>How can the same thing be archieved with above lambda?</p>\n</blockquote>\n\n<p>You can't. You must always declare the type of a variable. If you define the lambda after the declaration of the variable, then the declared type cannot be deduced from the initialiser. But you cannot refer to the type of a lambda before it has been defined because the type is anonymous.</p>\n\n<p>Instead of a lambda (i.e. an anonymous function object), you could simply use a function object of a named type. You can then split the function definition. Also, you must declare the return type of the function, because it cannot be deduced without the definition of the function:</p>\n\n<pre><code>class A final {\n    constexpr struct Foo {\n        template&lt;class Param1, class Param2, class Param3&gt;\n        void operator()(Param1&amp;, Param2&amp;, Param3&amp;) const;\n    } foo{};\n};\n</code></pre>\n\n<p>However, as you may notice, the function is in fact a function template. This is because you use <code>auto</code> arguments in the lambda. If you wish to define the template  outside the header, then you must constrain the instantiations to a limited set, and explicitly instantiate those where the template is defined:</p>\n\n<pre><code>// the definition\ntemplate&lt;class Param1, class Param2, class Param3&gt;\nvoid A::Foo::operator()(Param1&amp;, Param2&amp;, Param3&amp;) const {\n    // do stuff\n    return;\n}\n\n// explicit instantiations\ntemplate void A::Foo::operator()&lt;int, int, int&gt;(int&amp;, int&amp;, int&amp;) const;\ntemplate void A::Foo::operator()&lt;int, double, float&gt;(int&amp;, double&amp;, float&amp;) const;\n</code></pre>\n\n<p>If you attempt to call with arguments that haven't been instantiated, in a translation unit where the template isn't defined, then there will be a linker error.</p>\n\n<p>If you wish to keep the arguments unconstrained, then you have conflicting requirements. Unconstrained templates can only be achieved by defining the template in the header.</p>\n\n<hr>\n\n<p>On the other hand, you might want to consider whether you need a function object in the first place. You haven't demonstrate your need for it. The above example works just as well if you were to make it a a static member function (template) instead of a function object.</p>\n"}, {"comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1551273062, "post_id": 54906187, "comment_id": 96579567, "body": "Note that this will still require the full definition of <code>Foo::operator()</code> to be known wherever <code>A::foo</code> is supposed to be called since <code>Foo::operator()</code> must be a template. You can do it, but doing so doesn&#39;t really have any advantages compared to just using a lambda like in the original post (which is no surprise since it&#39;s basically just a more explicit way to write the same thing)\u2026"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1551273170, "post_id": 54906187, "comment_id": 96579629, "body": "Interesting. Where would the types T1, T2 and T3 come into action?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1551273210, "post_id": 54906187, "comment_id": 96579653, "body": "@nada they will normally be deduced when <code>foo</code> is called."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1551273286, "post_id": 54906187, "comment_id": 96579704, "body": "@nada: typo: <code>auto</code> -&gt; <code>Tn</code>. fixed."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1551273407, "post_id": 54906187, "comment_id": 96579791, "body": "@nada note that you will not be able to move the definition of <code>Foo::operator ()</code> to a separate .cpp file unless you know exactly <i>which</i> specializations you need. Only if this is the case can you declare explicit instantiations and define them in your .cpp file\u2026"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1551273241, "last_edit_date": 1551273241, "creation_date": 1551272678, "answer_id": 54906187, "question_id": 54905053, "link": "https://stackoverflow.com/questions/54905053/how-to-split-static-lambda-in-declaration-and-definition/54906187#54906187", "title": "How to split static lambda in declaration and definition?", "body": "<p>You might still create the functor the old way:</p>\n\n<pre><code>struct Foo\n{\n    template &lt;typename T1, typename T2, typename T3&gt;\n    void operator ()(T1&amp; param1, T2&amp; param2, T3&amp; param3) const;\n};\n\ntemplate &lt;typename T1, typename T2, typename T3&gt;\nvoid Foo::operator ()(T1&amp; param1, T2&amp; param2, T3&amp; param3) const\n{\n    /*..*/\n}\n\nclass A final {\n    // inline could be removed of course for splitting\n    static const Foo foo;\n};\n\n// in .cpp\nconst Foo A::foo{};\n</code></pre>\n"}], "owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 54905929, "answer_count": 3, "score": 0, "last_activity_date": 1551279575, "creation_date": 1551268929, "last_edit_date": 1551269236, "question_id": 54905053, "link": "https://stackoverflow.com/questions/54905053/how-to-split-static-lambda-in-declaration-and-definition", "title": "How to split static lambda in declaration and definition?", "body": "<p>I have a static lambda inside a class, that is declared and defined in a header file as:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A final {\n    // inline could be removed of course for splitting\n    static inline auto foo = [](auto&amp; param1, auto&amp; param2 auto&amp; param3) {\n        // do stuff\n        return;\n    }\n}\n// compiles fine\n</code></pre>\n\n<p>With static variables such as <code>static int x = 42</code> I can split declaration and definition like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// bar.h:\nclass Bar {\n    static int x;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// bar.cpp:\n#include \"bar.h\"\nint Bar::x = 42;\n</code></pre>\n\n<p>How can the same thing be archieved with above lambda? Changing the signature would be OK of course.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1586, "user_id": 6225741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f147a4cf533863ff2f12762e3c6192?s=128&d=identicon&r=PG", "display_name": "Nayfe", "link": "https://stackoverflow.com/users/6225741/nayfe"}, "edited": false, "score": 0, "creation_date": 1551269045, "post_id": 54904891, "comment_id": 96577170, "body": "Maybe you can look this <a href=\"https://stackoverflow.com/questions/49710006/fast-color-quantization-in-opencv\">thread</a> and this <a href=\"https://www.pyimagesearch.com/2014/07/07/color-quantization-opencv-using-k-means-clustering/\" rel=\"nofollow noreferrer\">blog</a>"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1551273043, "post_id": 54904891, "comment_id": 96579549, "body": "and <a href=\"https://stackoverflow.com/a/35482205/5008845\">stackoverflow.com/a/35482205/5008845</a>"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1551274736, "post_id": 54904891, "comment_id": 96580576, "body": "One problem is that you won&#39;t be able to use <code>imwrite</code> to save such image."}], "answers": [{"comments": [{"owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1595937973, "post_id": 54906864, "comment_id": 111640941, "body": "Remark: For those who want to port to android/ios, may use png++ or libpng :) <a href=\"https://stackoverflow.com/questions/61355551/how-to-create-and-write-an-indexed-png-image-in-c-or-c\" title=\"how to create and write an indexed png image in c or c\">stackoverflow.com/questions/61355551/&hellip;</a>"}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 2, "last_activity_date": 1551284906, "last_edit_date": 1551284906, "creation_date": 1551275004, "answer_id": 54906864, "question_id": 54904891, "link": "https://stackoverflow.com/questions/54904891/convert-rgb-color-image-to-indexed-color-image-type-in-opencv-c/54906864#54906864", "title": "Convert RGB Color Image to Indexed Color Image Type in OpenCV C++", "body": "<p>I do not believe <strong>OpenCV</strong>'s <code>imwrite()</code> supports writing a palettised PNG. One option may be to write as any other format you like and convert to a palettised PNG with <strong>ImageMagick</strong> afterwards.</p>\n\n<p><strong>ImageMagick</strong> is included in most Linux distros and is available for macOS and Windows.</p>\n\n<p>So, in Terminal, or Command Prompt on Windows:</p>\n\n<pre><code>magick input.png PNG8:result.png\n</code></pre>\n\n<p>Prior to v7 of <strong>ImageMagick</strong> that would be:</p>\n\n<pre><code>convert input.png PNG8:result.png\n</code></pre>\n\n<p>The <code>PNG8:</code> prefix forces a palettised result.</p>\n\n<hr>\n\n<p>If you don't want to have to go around converting your files explicitly afterwards, you could write them using <strong>OpenCV</strong>'s <code>imwrite()</code> as PNG files in the filesystem and then use C++'s <code>system()</code> to get <strong>ImageMagick</strong> to convert them:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n...\n\nimwrite('result.png', image);\n\n// Delegate conversion to palette image to ImageMagick\nsystem(\"magick result.png PNG8:result.png');\n</code></pre>\n\n<hr>\n\n<p>For the more anxious/astute readers:</p>\n\n<ul>\n<li><p>yes, unlike with other Unix utilities, it is ok to use the same file for input as output with <strong>ImageMagick</strong> and there is no fear of corruption because the file is read in its entirety before being processed and then written out,</p></li>\n<li><p>yes, <strong>ImageMagick</strong> will implicitly take care of the quantisation necessary to reduce the colours in the image to a palette version,</p></li>\n<li><p>yes, you can force other types of <code>PNG</code> file with other prefixes, e.g. <code>RGB24:result.png</code> will result in RGB888 output, <code>RGB32:result.png</code> will result in RGBA8888 output, <code>RGB48:result.png</code> will result in 16-bit red, 16-bit green and 16-bit blue and so on.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "reply_to_user": {"reputation": 16889, "user_id": 9193372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIoyD.png?s=128&g=1", "display_name": "Syscall", "link": "https://stackoverflow.com/users/9193372/syscall"}, "edited": false, "score": 1, "creation_date": 1616754444, "post_id": 66814380, "comment_id": 118107695, "body": "@Syscall let me edit it"}], "tags": [], "owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "is_accepted": false, "score": 0, "last_activity_date": 1616754589, "last_edit_date": 1616754589, "creation_date": 1616751689, "answer_id": 66814380, "question_id": 54904891, "link": "https://stackoverflow.com/questions/54904891/convert-rgb-color-image-to-indexed-color-image-type-in-opencv-c/66814380#66814380", "title": "Convert RGB Color Image to Indexed Color Image Type in OpenCV C++", "body": "<p>I write down my own encoder/decoder for indexed color image, by <em>manually</em> encode/decode the BMP and PNG format. It works well for me (in production environment).</p>\n<p>The idea of the code: Manually look at the blocks inside BMP/PNG (e.g. the PLTE block in png). The sample code is below, and you can also write/modify to your own.</p>\n<p>The usage of the code:</p>\n<pre><code>// sample usage\nint main() {\n  Mat image_index = ...;\n  Mat palette = ...;\n  vector&lt;uchar&gt; encoded_bytes = imencode_palette_bmp(image_index, palette);\n}\n</code></pre>\n<p>Full code (gist): <a href=\"https://gist.github.com/fzyzcjy/8b1736a294aab81eb86243bfb6fdc260\" rel=\"nofollow noreferrer\">https://gist.github.com/fzyzcjy/8b1736a294aab81eb86243bfb6fdc260</a></p>\n"}], "owner": {"reputation": 315, "user_id": 8880499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VepTD.jpg?s=128&g=1", "display_name": "SamSic", "link": "https://stackoverflow.com/users/8880499/samsic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 0, "accepted_answer_id": 54906864, "answer_count": 2, "score": 2, "last_activity_date": 1616754589, "creation_date": 1551268392, "question_id": 54904891, "link": "https://stackoverflow.com/questions/54904891/convert-rgb-color-image-to-indexed-color-image-type-in-opencv-c", "title": "Convert RGB Color Image to Indexed Color Image Type in OpenCV C++", "body": "<p>I want to convert rgb image to indexed color type.</p>\n\n<p>Here is my Code C++. This is convert to gray scale.</p>\n\n<p>what should I do?</p>\n\n<pre><code>Mat black_background = imread(\"image_path\", IMREAD_COLOR); \n\nMat output;\ncvtColor(black_background, output, cv::COLOR_RGB2GRAY);\n\nimwrite(\"save_path\", output);\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "computer-vision", "image-stitching"], "comments": [{"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551269100, "post_id": 54904718, "comment_id": 96577194, "body": "I don&#39;t sure but: warper-&gt;buildMaps(..., xmap, ymap,...). And multiple p_new =  cv::Point2f(xmap.at&lt;float&gt;(p), ymap.at&lt;float&gt;(p))."}, {"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551269169, "post_id": 54904718, "comment_id": 96577251, "body": "And you have cv::resize before warp. It need to multiple first on scale factor"}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "reply_to_user": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551272925, "post_id": 54904718, "comment_id": 96579488, "body": "@Nuzhny Thank you, where can I find an example on how to use <code>buildMaps</code> and then <code>xmap</code>, <code>ymap</code>? And what do you think the variable <code>result_mask</code> is for?"}, {"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551273341, "post_id": 54904718, "comment_id": 96579739, "body": "I seed example in opencv tests: <a href=\"https://github.com/opencv/opencv/blob/b39cd06249213220e802bb64260727711d9fc98c/modules/stitching/test/ocl/test_warpers.cpp#L94\" rel=\"nofollow noreferrer\">github.com/opencv/opencv/blob/&hellip;</a>"}, {"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551273752, "post_id": 54904718, "comment_id": 96579979, "body": "About result_mask I don&#39;t know. It need to see it"}], "answers": [{"comments": [{"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1551540202, "post_id": 54953792, "comment_id": 96681321, "body": "Thanks a lot! Maybe I still miss something? I&#39;m not experienced in C++, I just code an extension for Node.js, then I&#39;ll return to my JS code. I tried to call your function <a href=\"https://github.com/opencv/opencv/blob/3.4/samples/cpp/stitching_detailed.cpp#L777\" rel=\"nofollow noreferrer\">at this place</a> with this code: <code>Point2f pt(10, 20); Point2f result_pt = calcWarpedPoint(pt, K, cameras[img_idx].R, warper, corners, sizes); cout &lt;&lt; &quot;Coordinate for image &quot; &lt;&lt; img_idx &lt;&lt; &quot;: pt 10, 20 -&gt; &quot; &lt;&lt; result_pt.x &lt;&lt; &quot;, &quot; &lt;&lt; result_pt.y &lt;&lt; std::endl;</code> \u2026 but I obtain crazy values: 569.722, -11462 (image 0) and 659.049, -11460.8 (img1)."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1551540525, "post_id": 54953792, "comment_id": 96681412, "body": "Could you give an example of code that calls your function <code>calcWarpedPoint</code>?"}, {"owner": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "reply_to_user": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1551591031, "post_id": 54953792, "comment_id": 96692167, "body": "@Paleo I update the full code (tested on OpenCV 4.0.1)."}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "edited": false, "score": 0, "creation_date": 1551627354, "post_id": 54953792, "comment_id": 96700428, "body": "Thank you! After recompiling with Opencv 4, it works. :)"}, {"owner": {"reputation": 63, "user_id": 8635876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3284fb2b2f3fbdb9f52aa21c569773da?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/8635876/jess"}, "edited": false, "score": 0, "creation_date": 1583898626, "post_id": 54953792, "comment_id": 107263997, "body": "Hey @Kinght, tried using your code with latest openCV 4.2.0 and I am getting issues with the bundle adjuster (although the issue could originate from earlier in the code). Do you know if this works with latest version?"}], "tags": [], "owner": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "is_accepted": true, "score": 8, "last_activity_date": 1551600581, "last_edit_date": 1551600581, "creation_date": 1551483788, "answer_id": 54953792, "question_id": 54904718, "link": "https://stackoverflow.com/questions/54904718/compute-coordinates-from-source-images-after-stitching/54953792#54953792", "title": "Compute coordinates from source images after stitching", "body": "<p>When I was a school boy, I found<code>opencv/samples/cpp/stitching_detailed.cpp</code> in OpenCV samples folder. At that time, my programming skills were very poor. I can't understand it even though I racked my brains. This question attracts my attention, and arouses my memory. <code>After a whole night of hard work and debugging, I finally get it</code>.</p>\n\n<hr>\n\n<p>Basic steps:</p>\n\n<ol>\n<li>Given the three images: <a href=\"https://i.stack.imgur.com/Yz3U1.png\" rel=\"noreferrer\">blue.png</a>, <a href=\"https://i.stack.imgur.com/AbUTH.png\" rel=\"noreferrer\">green.png</a>, and <a href=\"https://i.stack.imgur.com/9wcGc.png\" rel=\"noreferrer\">red.png</a></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/7SOqm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7SOqm.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>We can get the stitching result(<code>result.png</code>) using the <a href=\"https://github.com/opencv/opencv/blob/4.0.1/samples/cpp/stitching_detailed.cpp\" rel=\"noreferrer\">stitching_detailed.cpp</a>.\n.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/pyxrz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pyxrz.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/BHFzG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BHFzG.png\" alt=\"enter image description here\"></a> </p>\n\n<pre><code>blender-&gt;blend(result, result_mask);\nimwrite(\"result.png\", result);\nimwrite(\"result_mask.png\", result_mask);\n</code></pre>\n\n<ol start=\"3\">\n<li>I choose the <code>centers</code> from the three images, and calculate the <code>corresponding coordinates</code> (warped) on the stitching image, and <code>draw in solid</code> as follow:</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/Oufo4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Oufo4.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<pre><code>Warping images (auxiliary)...\nCompensating exposure...\n\nBlending ...\n\nWarp each center point, and draw solid circle.\n[408, 204] =&gt; [532, 224]\n[408, 204] =&gt; [359, 301]\n[408, 204] =&gt; [727, 320]\n\nCheck `result.png`, `result_mask.png` and `result2.png`!\n\nDone!\n</code></pre>\n\n<hr>\n\n<p>This is the function <code>calcWarpedPoint</code> I wrote to calculate the warped point on the stitching image:</p>\n\n<pre><code>cv::Point2f calcWarpedPoint(\n    const cv::Point2f&amp; pt,\n    InputArray K,                // Camera K parameter             \n    InputArray R,                // Camera R parameter                \n    Ptr&lt;RotationWarper&gt; warper,  // The Rotation Warper    \n    const std::vector&lt;cv::Point&gt; &amp;corners,\n    const std::vector&lt;cv::Size&gt; &amp;sizes)\n{\n    // Calculate the wrapped point using camera parameter.\n    cv::Point2f  dst = warper-&gt;warpPoint(pt, K, R);\n\n    // Calculate the stitching image roi using corners and sizes.\n    // the corners and sizes have already been calculated.\n    cv::Point2f  tl = cv::detail::resultRoi(corners, sizes).tl();\n\n    // Finally adjust the wrapped point to the stitching image.\n    return cv::Point2f(dst.x - tl.x, dst.y - tl.y);\n}\n</code></pre>\n\n<hr>\n\n<p>This is example code snippet\uff1a</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nWarp each center point, and draw solid circle.\\n\";\nstd::vector&lt;cv::Scalar&gt; colors = { {255,0,0}, {0, 255, 0}, {0, 0, 255} };\nfor (int idx = 0; idx &lt; img_names.size(); ++idx) {\n    img = cv::imread(img_names[idx]);\n    Mat K;\n    cameras[idx].K().convertTo(K, CV_32F);\n    Mat R = cameras[idx].R;\n\n    cv::Point2f cpt = cv::Point2f(img.cols / 2, img.rows / 2);\n    cv::Point pt = calcWarpedPoint(cpt, K, R, warper, corners, sizes);\n    cv::circle(result, pt, 5, colors[idx], -1, cv::LINE_AA);\n    std::cout &lt;&lt; cpt &lt;&lt; \" =&gt; \" &lt;&lt; pt &lt;&lt; std::endl;\n}\n\nstd::cout &lt;&lt; \"\\nCheck `result.png`, `result_mask.png` and `result2.png`!\\n\";\nimwrite(\"result2.png\", result);\n</code></pre>\n\n<hr>\n\n<h2>The full code:</h2>\n\n<pre><code>/*\n* Author   : Kinght-\u91d1(https://stackoverflow.com/users/3547485/)\n* Created  : 2019/03/01 23:00 (CST)\n* Finished : 2019/03/01 07:50 (CST)\n*\n* Modified on opencv401/samples/cpp/stitching_detailed.cpp\n* From  https://github.com/opencv/opencv/blob/4.0.1/samples/cpp/stitching_detailed.cpp\n*\n* \n* Description: A simple opencv(4.0.1) image stitching code for Stack Overflow answers.\n* For https://stackoverflow.com/questions/54904718/compute-coordinates-from-source-images-after-stitching/54953792#comment96681412_54953792\n*\n*/\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"opencv2/opencv_modules.hpp\"\n#include &lt;opencv2/core/utility.hpp&gt;\n#include \"opencv2/imgcodecs.hpp\"\n#include \"opencv2/highgui.hpp\"\n#include \"opencv2/stitching/detail/autocalib.hpp\"\n#include \"opencv2/stitching/detail/blenders.hpp\"\n#include \"opencv2/stitching/detail/camera.hpp\"\n#include \"opencv2/stitching/detail/exposure_compensate.hpp\"\n#include \"opencv2/stitching/detail/matchers.hpp\"\n#include \"opencv2/stitching/detail/motion_estimators.hpp\"\n#include \"opencv2/stitching/detail/seam_finders.hpp\"\n#include \"opencv2/stitching/detail/warpers.hpp\"\n#include \"opencv2/stitching/warpers.hpp\"\n\nusing namespace std;\nusing namespace cv;\nusing namespace cv::detail;\n\n//! img_names are the input image (full) paths\n// You can download from using the links from the answer.\n//! Blue: https://i.stack.imgur.com/Yz3U1.png\n//! Green: https://i.stack.imgur.com/AbUTH.png\n//! Red: https://i.stack.imgur.com/9wcGc.png\nvector&lt;String&gt; img_names = {\"D:/stitching/blue.png\", \"D:/stitching/green.png\", \"D:/stitching/red.png\"};\n\n//! The function to calculate the warped point on the stitching image.\ncv::Point2f calcWarpedPoint(\n    const cv::Point2f&amp; pt,\n    InputArray K,                // Camera K parameter\n    InputArray R,                // Camera R parameter\n    Ptr&lt;RotationWarper&gt; warper,  // The Rotation Warper\n    const std::vector&lt;cv::Point&gt; &amp;corners,\n    const std::vector&lt;cv::Size&gt; &amp;sizes)\n{\n    // Calculate the wrapped point\n    cv::Point2f  dst = warper-&gt;warpPoint(pt, K, R);\n\n    // Calculate the stitching image roi using corners and sizes,\n    // the corners and sizes have already been calculated.\n    cv::Point2f  tl = cv::detail::resultRoi(corners, sizes).tl();\n\n    // Finally adjust the wrapped point\n    return cv::Point2f(dst.x - tl.x, dst.y - tl.y);\n}\n\n\nint main(int argc, char* argv[])\n{\n    double work_megapix = 0.6;\n    double seam_megapix = 0.1;\n    double compose_megapix = -1;\n    float conf_thresh = 1.f;\n    float match_conf = 0.3f;\n    float blend_strength = 5;\n\n\n    // Check if have enough images\n    int num_images = static_cast&lt;int&gt;(img_names.size());\n    if (num_images &lt; 2)\n    {\n        std::cout &lt;&lt; \"Need more images\\n\";\n        return -1;\n    }\n\n    double work_scale = 1, seam_scale = 1, compose_scale = 1;\n    bool is_work_scale_set = false, is_seam_scale_set = false, is_compose_scale_set = false;\n\n    //(1) \u521b\u5efa\u7279\u5f81\u67e5\u627e\u5668\n    Ptr&lt;Feature2D&gt; finder = ORB::create();\n\n    // (2) \u8bfb\u53d6\u56fe\u50cf\uff0c\u9002\u5f53\u7f29\u653e\uff0c\u5e76\u8ba1\u7b97\u56fe\u50cf\u7684\u7279\u5f81\u63cf\u8ff0\n    Mat full_img, img;\n    vector&lt;ImageFeatures&gt; features(num_images);\n    vector&lt;Mat&gt; images(num_images);\n    vector&lt;Size&gt; full_img_sizes(num_images);\n    double seam_work_aspect = 1;\n\n    for (int i = 0; i &lt; num_images; ++i)\n    {\n        full_img = imread(img_names[i]);\n        full_img_sizes[i] = full_img.size();\n\n        if (full_img.empty())\n        {\n            cout &lt;&lt; \"Can't open image \" &lt;&lt; img_names[i] &lt;&lt; std::endl;\n            return -1;\n        }\n        if (!is_work_scale_set)\n        {\n            work_scale = min(1.0, sqrt(work_megapix * 1e6 / full_img.size().area()));\n            is_work_scale_set = true;\n        }\n        resize(full_img, img, Size(), work_scale, work_scale, INTER_LINEAR_EXACT);\n\n        if (!is_seam_scale_set)\n        {\n            seam_scale = min(1.0, sqrt(seam_megapix * 1e6 / full_img.size().area()));\n            seam_work_aspect = seam_scale / work_scale;\n            is_seam_scale_set = true;\n        }\n\n        computeImageFeatures(finder, img, features[i]);\n        features[i].img_idx = i;\n        std::cout &lt;&lt; \"Features in image #\" &lt;&lt; i + 1 &lt;&lt; \": \" &lt;&lt; features[i].keypoints.size() &lt;&lt; std::endl;\n\n        resize(full_img, img, Size(), seam_scale, seam_scale, INTER_LINEAR_EXACT);\n        images[i] = img.clone();\n    }\n\n    full_img.release();\n    img.release();\n\n\n    // (3) \u521b\u5efa\u56fe\u50cf\u7279\u5f81\u5339\u914d\u5668\uff0c\u8ba1\u7b97\u5339\u914d\u4fe1\u606f\n    vector&lt;MatchesInfo&gt; pairwise_matches;\n    Ptr&lt;FeaturesMatcher&gt;  matcher = makePtr&lt;BestOf2NearestMatcher&gt;(false, match_conf);\n    (*matcher)(features, pairwise_matches);\n    matcher-&gt;collectGarbage();\n\n    //! (4) \u5254\u9664\u5916\u70b9\uff0c\u4fdd\u7559\u6700\u786e\u4fe1\u7684\u5927\u6210\u5206\n    // Leave only images we are sure are from the same panorama\n    vector&lt;int&gt; indices = leaveBiggestComponent(features, pairwise_matches, conf_thresh);\n    vector&lt;Mat&gt; img_subset;\n    vector&lt;String&gt; img_names_subset;\n    vector&lt;Size&gt; full_img_sizes_subset;\n    for (size_t i = 0; i &lt; indices.size(); ++i)\n    {\n        img_names_subset.push_back(img_names[indices[i]]);\n        img_subset.push_back(images[indices[i]]);\n        full_img_sizes_subset.push_back(full_img_sizes[indices[i]]);\n    }\n\n    images = img_subset;\n    img_names = img_names_subset;\n    full_img_sizes = full_img_sizes_subset;\n\n    // Check if we still have enough images\n    num_images = static_cast&lt;int&gt;(img_names.size());\n    if (num_images &lt; 2)\n    {\n        std::cout &lt;&lt; \"Need more images\\n\";\n        return -1;\n    }\n\n    //!(5) \u4f30\u8ba1 homography\n    Ptr&lt;Estimator&gt; estimator = makePtr&lt;HomographyBasedEstimator&gt;();\n    vector&lt;CameraParams&gt; cameras;\n    if (!(*estimator)(features, pairwise_matches, cameras))\n    {\n        cout &lt;&lt; \"Homography estimation failed.\\n\";\n        return -1;\n    }\n\n    for (size_t i = 0; i &lt; cameras.size(); ++i)\n    {\n        Mat R;\n        cameras[i].R.convertTo(R, CV_32F);\n        cameras[i].R = R;\n        std::cout &lt;&lt; \"\\nInitial camera intrinsics #\" &lt;&lt; indices[i] + 1 &lt;&lt; \":\\nK:\\n\" &lt;&lt; cameras[i].K() &lt;&lt; \"\\nR:\\n\" &lt;&lt; cameras[i].R &lt;&lt; std::endl;\n    }\n\n    //(6) \u521b\u5efa\u7ea6\u675f\u8c03\u6574\u5668\n    Ptr&lt;detail::BundleAdjusterBase&gt; adjuster = makePtr&lt;detail::BundleAdjusterRay&gt;();\n    adjuster-&gt;setConfThresh(conf_thresh);\n    Mat_&lt;uchar&gt; refine_mask = Mat::zeros(3, 3, CV_8U);\n    refine_mask(0, 0) = 1;\n    refine_mask(0, 1) = 1;\n    refine_mask(0, 2) = 1;\n    refine_mask(1, 1) = 1;\n    refine_mask(1, 2) = 1;\n    adjuster-&gt;setRefinementMask(refine_mask);\n    if (!(*adjuster)(features, pairwise_matches, cameras))\n    {\n        cout &lt;&lt; \"Camera parameters adjusting failed.\\n\";\n        return -1;\n    }\n\n    // Find median focal length\n    vector&lt;double&gt; focals;\n    for (size_t i = 0; i &lt; cameras.size(); ++i)\n    {\n        focals.push_back(cameras[i].focal);\n    }\n\n    sort(focals.begin(), focals.end());\n    float warped_image_scale;\n    if (focals.size() % 2 == 1)\n        warped_image_scale = static_cast&lt;float&gt;(focals[focals.size() / 2]);\n    else\n        warped_image_scale = static_cast&lt;float&gt;(focals[focals.size() / 2 - 1] + focals[focals.size() / 2]) * 0.5f;\n\n\n    std::cout &lt;&lt; \"\\nWarping images (auxiliary)... \\n\";\n\n    vector&lt;Point&gt; corners(num_images);\n    vector&lt;UMat&gt; masks_warped(num_images);\n    vector&lt;UMat&gt; images_warped(num_images);\n    vector&lt;Size&gt; sizes(num_images);\n    vector&lt;UMat&gt; masks(num_images);\n\n    // Preapre images masks\n    for (int i = 0; i &lt; num_images; ++i)\n    {\n        masks[i].create(images[i].size(), CV_8U);\n        masks[i].setTo(Scalar::all(255));\n    }\n\n    // Warp images and their masks\n    Ptr&lt;WarperCreator&gt; warper_creator = makePtr&lt;cv::CylindricalWarper&gt;();\n    if (!warper_creator)\n    {\n        cout &lt;&lt; \"Can't create the warper \\n\";\n        return 1;\n    }\n\n    //! Create RotationWarper\n    Ptr&lt;RotationWarper&gt; warper = warper_creator-&gt;create(static_cast&lt;float&gt;(warped_image_scale * seam_work_aspect));\n\n    //! Calculate warped corners/sizes/mask\n    for (int i = 0; i &lt; num_images; ++i)\n    {\n        Mat_&lt;float&gt; K;\n        cameras[i].K().convertTo(K, CV_32F);\n        float swa = (float)seam_work_aspect;\n        K(0, 0) *= swa; K(0, 2) *= swa;\n        K(1, 1) *= swa; K(1, 2) *= swa;\n        corners[i] = warper-&gt;warp(images[i], K, cameras[i].R, INTER_LINEAR, BORDER_REFLECT, images_warped[i]);\n        sizes[i] = images_warped[i].size();\n        warper-&gt;warp(masks[i], K, cameras[i].R, INTER_NEAREST, BORDER_CONSTANT, masks_warped[i]);\n    }\n\n    vector&lt;UMat&gt; images_warped_f(num_images);\n    for (int i = 0; i &lt; num_images; ++i)\n        images_warped[i].convertTo(images_warped_f[i], CV_32F);\n\n    std::cout &lt;&lt; \"Compensating exposure... \\n\";\n\n    //! \u8ba1\u7b97\u66dd\u5149\u5ea6\uff0c\u8c03\u6574\u56fe\u50cf\u66dd\u5149\uff0c\u51cf\u5c11\u4eae\u5ea6\u5dee\u5f02\n    Ptr&lt;ExposureCompensator&gt; compensator = ExposureCompensator::createDefault(ExposureCompensator::GAIN_BLOCKS);\n    if (dynamic_cast&lt;BlocksCompensator*&gt;(compensator.get()))\n    {\n        BlocksCompensator* bcompensator = dynamic_cast&lt;BlocksCompensator*&gt;(compensator.get());\n        bcompensator-&gt;setNrFeeds(1);\n        bcompensator-&gt;setNrGainsFilteringIterations(2);\n        bcompensator-&gt;setBlockSize(32, 32);\n    }\n\n    compensator-&gt;feed(corners, images_warped, masks_warped);\n\n    Ptr&lt;SeamFinder&gt; seam_finder = makePtr&lt;detail::GraphCutSeamFinder&gt;(GraphCutSeamFinderBase::COST_COLOR);\n    seam_finder-&gt;find(images_warped_f, corners, masks_warped);\n\n    // Release unused memory\n    images.clear();\n    images_warped.clear();\n    images_warped_f.clear();\n    masks.clear();\n\n    Mat img_warped, img_warped_s;\n    Mat dilated_mask, seam_mask, mask, mask_warped;\n    Ptr&lt;Blender&gt; blender;\n    double compose_work_aspect = 1;\n\n    for (int img_idx = 0; img_idx &lt; num_images; ++img_idx)\n    {\n        // Read image and resize it if necessary\n        full_img = imread(img_names[img_idx]);\n        if (!is_compose_scale_set)\n        {\n            is_compose_scale_set = true;\n            compose_work_aspect = compose_scale / work_scale;\n\n            // Update warped image scale\n            warped_image_scale *= static_cast&lt;float&gt;(compose_work_aspect);\n            warper = warper_creator-&gt;create(warped_image_scale);\n\n            // Update corners and sizes\n            for (int i = 0; i &lt; num_images; ++i)\n            {\n                cameras[i].focal *= compose_work_aspect;\n                cameras[i].ppx *= compose_work_aspect;\n                cameras[i].ppy *= compose_work_aspect;\n\n                Size sz = full_img_sizes[i];\n                if (std::abs(compose_scale - 1) &gt; 1e-1)\n                {\n                    sz.width = cvRound(full_img_sizes[i].width * compose_scale);\n                    sz.height = cvRound(full_img_sizes[i].height * compose_scale);\n                }\n\n                Mat K;\n                cameras[i].K().convertTo(K, CV_32F);\n                Rect roi = warper-&gt;warpRoi(sz, K, cameras[i].R);\n\n                corners[i] = roi.tl();\n                sizes[i] = roi.size();\n            }\n        }\n\n        if (abs(compose_scale - 1) &gt; 1e-1)\n            resize(full_img, img, Size(), compose_scale, compose_scale, INTER_LINEAR_EXACT);\n        else\n            img = full_img;\n        full_img.release();\n        Size img_size = img.size();\n\n        Mat K, R;\n        cameras[img_idx].K().convertTo(K, CV_32F);\n        R = cameras[img_idx].R;\n\n        // Warp the current image : img =&gt; img_warped\n        warper-&gt;warp(img, K, cameras[img_idx].R, INTER_LINEAR, BORDER_REFLECT, img_warped);\n\n        // Warp the current image mask\n        mask.create(img_size, CV_8U);\n        mask.setTo(Scalar::all(255));\n        warper-&gt;warp(mask, K, cameras[img_idx].R, INTER_NEAREST, BORDER_CONSTANT, mask_warped);\n\n        compensator-&gt;apply(img_idx, corners[img_idx], img_warped, mask_warped);\n        img_warped.convertTo(img_warped_s, CV_16S);\n        img_warped.release();\n        img.release();\n        mask.release();\n\n        dilate(masks_warped[img_idx], dilated_mask, Mat());\n        resize(dilated_mask, seam_mask, mask_warped.size(), 0, 0, INTER_LINEAR_EXACT);\n        mask_warped = seam_mask &amp; mask_warped;\n\n        if (!blender)\n        {\n            blender = Blender::createDefault(Blender::MULTI_BAND, false);\n            Size dst_sz = resultRoi(corners, sizes).size();\n            float blend_width = sqrt(static_cast&lt;float&gt;(dst_sz.area())) * blend_strength / 100.f;\n            if (blend_width &lt; 1.f){\n                blender = Blender::createDefault(Blender::NO, false);\n            }\n            else\n            {\n                MultiBandBlender* mb = dynamic_cast&lt;MultiBandBlender*&gt;(blender.get());\n                mb-&gt;setNumBands(static_cast&lt;int&gt;(ceil(log(blend_width) / log(2.)) - 1.));\n            }\n            blender-&gt;prepare(corners, sizes);\n        }\n\n        blender-&gt;feed(img_warped_s, mask_warped, corners[img_idx]);\n    }\n\n    /* ===========================================================================*/\n    // Blend image\n    std::cout &lt;&lt; \"\\nBlending ...\\n\";\n    Mat result, result_mask;\n    blender-&gt;blend(result, result_mask);\n    imwrite(\"result.png\", result);\n    imwrite(\"result_mask.png\", result_mask);\n\n    std::cout &lt;&lt; \"\\nWarp each center point, and draw solid circle.\\n\";\n    std::vector&lt;cv::Scalar&gt; colors = { {255,0,0}, {0, 255, 0}, {0, 0, 255} };\n    for (int idx = 0; idx &lt; img_names.size(); ++idx) {\n        img = cv::imread(img_names[idx]);\n        Mat K;\n        cameras[idx].K().convertTo(K, CV_32F);\n        Mat R = cameras[idx].R;\n\n        cv::Point2f cpt = cv::Point2f(img.cols / 2, img.rows / 2);\n        cv::Point pt = calcWarpedPoint(cpt, K, R, warper, corners, sizes);\n        cv::circle(result, pt, 5, colors[idx], -1, cv::LINE_AA);\n        std::cout &lt;&lt; cpt &lt;&lt; \" =&gt; \" &lt;&lt; pt &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"\\nCheck `result.png`, `result_mask.png` and `result2.png`!\\n\";\n    imwrite(\"result2.png\", result);\n\n    std::cout &lt;&lt; \"\\nDone!\\n\";\n    /* ===========================================================================*/\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Some links maybe useful:</p>\n\n<ol>\n<li><p><code>stitching_detailed.cpp</code> : <a href=\"https://github.com/opencv/opencv/blob/4.0.1/samples/cpp/stitching_detailed.cpp\" rel=\"noreferrer\">https://github.com/opencv/opencv/blob/4.0.1/samples/cpp/stitching_detailed.cpp</a></p></li>\n<li><p><code>waper-&gt;warp(), warpPoint(), warpRoi()</code> <a href=\"https://github.com/opencv/opencv/blob/master/modules/stitching/src/warpers.cpp#L153\" rel=\"noreferrer\">https://github.com/opencv/opencv/blob/master/modules/stitching/src/warpers.cpp#L153</a> </p></li>\n<li><p><code>resultRoi()</code> <a href=\"https://github.com/opencv/opencv/blob/master/modules/stitching/src/util.cpp#L116\" rel=\"noreferrer\">https://github.com/opencv/opencv/blob/master/modules/stitching/src/util.cpp#L116</a></p></li>\n</ol>\n\n<hr>\n\n<p>Other links maybe interesting:</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/52460962/converting-opencv-remap-code-from-c-to-python/52462982#52462982\">Converting opencv remap code from c++ to python</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/34981144/split-text-lines-in-scanned-document/48268334#48268334\">Split text lines in scanned document</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/48205993/how-do-i-use-the-relationships-between-flann-matches-to-determine-a-sensible-hom/48207339#48207339\">How do I use the relationships between Flann matches to determine a sensible homography?</a></p></li>\n</ol>\n"}], "owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 2, "accepted_answer_id": 54953792, "answer_count": 1, "score": 9, "last_activity_date": 1551600581, "creation_date": 1551267842, "last_edit_date": 1551511964, "question_id": 54904718, "link": "https://stackoverflow.com/questions/54904718/compute-coordinates-from-source-images-after-stitching", "title": "Compute coordinates from source images after stitching", "body": "<p>I use an algorithm of panorama stitching from opencv, in order to stitch 2 or 3 images into one new result image.</p>\n\n<p>I have coordinates of points in each source image. I need to calculate what are the new coordinates for these points in the result image.</p>\n\n<p>I describe below the algorithm. My code is similar to a sample <em>\"stitching_detailed\"</em> from opencv (branch 3.4). A <code>result_mask</code> of type <code>Mat</code> is produced, maybe it is the solution? But I don't know how to use it. I found <a href=\"https://stackoverflow.com/questions/22966074/how-to-find-new-image-corner-points-after-a-perspective-transform\">a related question here</a> but not on stitching.</p>\n\n<p>Any idea?</p>\n\n<h3>Here is the algorithm (for detailed code: <a href=\"https://github.com/opencv/opencv/blob/3.4/samples/cpp/stitching_detailed.cpp\" rel=\"nofollow noreferrer\">stitching_detailed.cpp</a>):</h3>\n\n<p>Find <code>features</code> for each image:</p>\n\n<pre><code>Ptr&lt;FeaturesFinder&gt; finder = makePtr&lt;SurfFeaturesFinder&gt;()\nvector&lt;ImageFeatures&gt; features(num_images);\nfor (int i = 0; i &lt; num_images; ++i)\n{\n  (*finder)(images[i], features[i]);\n}\n</code></pre>\n\n<p>Make <code>pairwise_matches</code>:</p>\n\n<pre><code>vector&lt;MatchesInfo&gt; pairwise_matches;\nPtr&lt;FeaturesMatcher&gt; matcher = makePtr&lt;BestOf2NearestMatcher&gt;(false, match_conf);\n(*matcher)(features, pairwise_matches);\n</code></pre>\n\n<p>Reorder the images:</p>\n\n<pre><code>vector&lt;int&gt; indices = leaveBiggestComponent(features, pairwise_matches, conf_thresh);\n# here some code to reorder 'images'\n</code></pre>\n\n<p>Estimate an homography in <code>cameras</code>:</p>\n\n<pre><code>vector&lt;CameraParams&gt; cameras;\nPtr&lt;Estimator&gt; estimator = makePtr&lt;HomographyBasedEstimator&gt;();\n(*estimator)(features, pairwise_matches, cameras);\n</code></pre>\n\n<p>Convert to <code>CV_32F</code>:</p>\n\n<pre><code>for (size_t i = 0; i &lt; cameras.size(); ++i)\n{\n  Mat R;\n  cameras[i].R.convertTo(R, CV_32F);\n  cameras[i].R = R;\n}\n</code></pre>\n\n<p>Execute a <code>BundleAdjuster</code>:</p>\n\n<pre><code>Ptr&lt;detail::BundleAdjusterBase&gt; adjuster = makePtr&lt;detail::BundleAdjusterRay&gt;();\nadjuster-&gt;setConfThresh(conf_thresh);\nadjuster-&gt;setRefinementMask(refine_mask);\n(*adjuster)(features, pairwise_matches, cameras);\n</code></pre>\n\n<p>Compute a value for <code>warped_image_scale</code>:</p>\n\n<pre><code>for (int i = 0; i &lt; cameras.size(); ++i)\n  focals.push_back(cameras[i].focal);\nfloat warped_image_scale = static_cast&lt;float&gt;(focals[focals.size() / 2 - 1] + focals[focals.size() / 2]) * 0.5f;\n</code></pre>\n\n<p>Do wave correction:</p>\n\n<pre><code>vector&lt;Mat&gt; rmats;\nfor (size_t i = 0; i &lt; cameras.size(); ++i)\n  rmats.push_back(cameras[i].R.clone());\nwaveCorrect(rmats, wave_correct);\nfor (size_t i = 0; i &lt; cameras.size(); ++i)\n  cameras[i].R = rmats[i];\n</code></pre>\n\n<p>Create a <code>warper</code>:</p>\n\n<pre><code>Ptr&lt;WarperCreator&gt; warper_creator = makePtr&lt;cv::SphericalWarper&gt;();\nPtr&lt;RotationWarper&gt; warper = warper_creator-&gt;create(static_cast&lt;float&gt;(warped_image_scale * seam_work_aspect));\n</code></pre>\n\n<p>Create a blender and feed it:</p>\n\n<pre><code>Ptr&lt;Blender&gt; blender;\n\nfor (size_t i = 0; i &lt; cameras.size(); ++i)\n{\n  full_img = input_imgs[img_idx];\n  if (!is_compose_scale_set)\n  {\n    is_compose_scale_set = true;\n    compose_scale = /* \u2026 */\n  }\n  if (abs(compose_scale - 1) &gt; 1e-1)\n    resize(full_img, img, Size(), compose_scale, compose_scale, INTER_LINEAR_EXACT);\n  else\n    img = full_img;\n\n  // Warp the current image\n  warper-&gt;warp(img, K, cameras[img_idx].R, INTER_LINEAR, BORDER_REFLECT, img_warped);\n\n  // Warp the current image mask\n  mask.create(img_size, CV_8U);\n  mask.setTo(Scalar::all(255));\n  warper-&gt;warp(mask, K, cameras[img_idx].R, INTER_NEAREST, BORDER_CONSTANT, mask_warped);\n\n  // Compensate exposure\n  compensator-&gt;apply(img_idx, corners[img_idx], img_warped, mask_warped);\n\n  dilate(masks_warped[img_idx], dilated_mask, Mat());\n  resize(dilated_mask, seam_mask, mask_warped.size(), 0, 0, INTER_LINEAR_EXACT);\n  mask_warped = seam_mask &amp; mask_warped;\n\n  if (!blender)\n  {\n    blender = Blender::createDefault(blend_type, try_gpu);\n    Size dst_sz = resultRoi(corners, sizes).size();\n    float blend_width = sqrt(static_cast&lt;float&gt;(dst_sz.area())) * blend_strength / 100.f;\n    MultiBandBlender *mb = dynamic_cast&lt;MultiBandBlender *&gt;(blender.get());\n    mb-&gt;setNumBands(static_cast&lt;int&gt;(ceil(log(blend_width) / log(2.)) - 1.));\n    blender-&gt;prepare(corners, sizes);\n  }\n\n  // Blend the current image\n  blender-&gt;feed(img_warped_s, mask_warped, corners[i]);\n}\n</code></pre>\n\n<p>Then, use the blender:</p>\n\n<pre><code>Mat result, result_mask;\nblender-&gt;blend(result, result_mask);\n// The result image is in 'result'\n</code></pre>\n"}, {"tags": ["python", "c++", "boost", "boost-python", "numpy-ndarray"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1551268100, "post_id": 54904448, "comment_id": 96576641, "body": "<a href=\"https://www.boost.org/doc/libs/release/libs/python/doc/html/numpy/tutorial/simple.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/release/libs/python/doc/html/numpy/tutori&zwnj;&#8203;al/&hellip;</a>"}, {"owner": {"reputation": 587, "user_id": 5489190, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tjkTd.png?s=128&g=1", "display_name": "Karls", "link": "https://stackoverflow.com/users/5489190/karls"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 1, "creation_date": 1551268641, "post_id": 54904448, "comment_id": 96576946, "body": "If you mean setting headers, I did it. I know this tutorial however it doesn&#39;t help with my issue. It&#39;s more general about working with arrays, and in my case I think the problem is on the extracting step. I can comment all starting from <code>int input_size = ret.shape(0);</code>, and it still fails with the same error."}, {"owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "edited": false, "score": 0, "creation_date": 1551270755, "post_id": 54904448, "comment_id": 96578132, "body": "Provide <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a>."}, {"owner": {"reputation": 587, "user_id": 5489190, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tjkTd.png?s=128&g=1", "display_name": "Karls", "link": "https://stackoverflow.com/users/5489190/karls"}, "edited": false, "score": 0, "creation_date": 1551271283, "post_id": 54904448, "comment_id": 96578477, "body": "OK. Question edited."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1551271445, "post_id": 54904448, "comment_id": 96578571, "body": "@Karls Minor detail - you forgot to define <code>t_end</code> in the C++ sample."}, {"owner": {"reputation": 587, "user_id": 5489190, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tjkTd.png?s=128&g=1", "display_name": "Karls", "link": "https://stackoverflow.com/users/5489190/karls"}, "edited": false, "score": 0, "creation_date": 1551271834, "post_id": 54904448, "comment_id": 96578815, "body": "It&#39;s just my mistake, it is in final code. Edited once again. I hope now MVCE is complete."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 3, "creation_date": 1551272232, "post_id": 54904448, "comment_id": 96579060, "body": "You forget to initialize the numpy module before using it. Add <code>numpy::initialize();</code> after the call to <code>Py_Initialize();</code>."}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 5489190, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tjkTd.png?s=128&g=1", "display_name": "Karls", "link": "https://stackoverflow.com/users/5489190/karls"}, "edited": false, "score": 0, "creation_date": 1551273481, "post_id": 54906222, "comment_id": 96579828, "body": "Thank you, now it works. I was in the wrong conviction, that Py_Initialize(); would also initialise derivatives. This small detale was out of my mind when I was reading tutorial."}], "tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": true, "score": 2, "last_activity_date": 1551272786, "creation_date": 1551272786, "answer_id": 54906222, "question_id": 54904448, "link": "https://stackoverflow.com/questions/54904448/boost-python-nullptr-while-extracting-ndarray/54906222#54906222", "title": "boost python - nullptr while extracting ndarray", "body": "<p>That error occurs since you're using the <code>numpy</code> module without first initializing it.</p>\n\n<p>Notice the beginning of the official <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/python/doc/html/numpy/tutorial/simple.html\" rel=\"nofollow noreferrer\">tutorial</a>:</p>\n\n<blockquote>\n  <p>Initialise the Python runtime, and the numpy module. Failure to call these results in segmentation errors:</p>\n\n<pre><code>namespace np = boost::python::numpy;\nint main(int argc, char **argv)\n{\n  Py_Initialize();\n  np::initialize();\n</code></pre>\n</blockquote>\n\n<p>Your code is lacking the call to <code>np::initialize();</code>.</p>\n"}], "owner": {"reputation": 587, "user_id": 5489190, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tjkTd.png?s=128&g=1", "display_name": "Karls", "link": "https://stackoverflow.com/users/5489190/karls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 54906222, "answer_count": 1, "score": 1, "last_activity_date": 1551272786, "creation_date": 1551266904, "last_edit_date": 1551271681, "question_id": 54904448, "link": "https://stackoverflow.com/questions/54904448/boost-python-nullptr-while-extracting-ndarray", "title": "boost python - nullptr while extracting ndarray", "body": "<p>I have a C++ code which execute python script with boost_python package. Everything is fine, as longa as I extract int, string, or other not-array variables from python. However I have to extract a <code>numpy::ndarray</code> and convert it to <code>cpp vector</code>. I tried as follow:</p>\n\n<p><code>main.cpp</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n\nusing namespace boost::python;\n\nint main()\ndouble t_end=7\n    try\n    {\n    Py_Initialize();\n    object module = import(\"__main__\");\n    object name_space = module.attr(\"__dict__\");\n    exec_file(\"MyModule.py\", name_space, name_space);\n\n    object MyFunc = name_space[\"MyFunc\"];\n    object result = MyFunc(t_end);\n\n    auto result_array = extract&lt;numpy::ndarray&gt;(result);\n    const numpy::ndarray&amp; ret = result_array();\n    int input_size = ret.shape(0);\n    double* input_ptr = reinterpret_cast&lt;double*&gt;(ret.get_data());\n    std::vector&lt;double&gt; v(input_size);\n    for (int i = 0; i &lt; input_size; ++i)\n        v[i] = *(input_ptr + i);\n}\ncatch (error_already_set)\n{\n    PyErr_Print();\n}\n\nPy_Finalize();\n</code></pre>\n\n<p>And example py script:</p>\n\n<p><code>MyModule.py</code></p>\n\n<pre><code>import numpy as np\ndef MyFunc(t_end):\n    result = np.array([2,3,1,t_end])\n    return results\n</code></pre>\n\n<p>However it ends with error:</p>\n\n<blockquote>\n  <p>read access violation <strong>BOOST_NUMPY_ARRAY_API</strong> was nullptr</p>\n</blockquote>\n\n<p>I also was trying to declare numpy::ndarray directly like <code>numpy::ndarray result_array = extract&lt;numpy::ndarray&gt;(result);</code> But the error is exactly the same. I've checked if my <code>ndarray</code> is not empty by printing it directly from python, and it is not. At the python step all seems to be correct. So what is causing the violation and how to fix it?</p>\n"}, {"tags": ["c++", "point-cloud-library", "clusterpoint"], "comments": [{"owner": {"reputation": 3238, "user_id": 7404943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364eff21ecce181be48b17e7208397e2?s=128&d=identicon&r=PG&f=1", "display_name": "barbsan", "link": "https://stackoverflow.com/users/7404943/barbsan"}, "edited": false, "score": 1, "creation_date": 1551339254, "post_id": 54904369, "comment_id": 96606298, "body": "Are these 2 names identical, or second name had to be <code>cluster_cloud_2.pcd</code>? Could you post full error message? It would be better if you could include actual piece of code instead of pseudocode"}, {"owner": {"reputation": 1, "user_id": 9890856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2367a93867bdae2c1b4b7dcf9450fd99?s=128&d=identicon&r=PG&f=1", "display_name": "Moazza", "link": "https://stackoverflow.com/users/9890856/moazza"}, "reply_to_user": {"reputation": 3238, "user_id": 7404943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364eff21ecce181be48b17e7208397e2?s=128&d=identicon&r=PG&f=1", "display_name": "barbsan", "link": "https://stackoverflow.com/users/7404943/barbsan"}, "edited": false, "score": 0, "creation_date": 1551431983, "post_id": 54904369, "comment_id": 96645829, "body": "The names are different as you have pointed out. i have figured out my mistake . the answer is   ss &lt;&lt; &quot;cloud_cluster_&quot; &lt;&lt; i &lt;&lt; &quot;.pcd&quot;; \treader.read&lt;pcl::PointXYZ&gt; (ss.str (), *cloud_cluster, 0);  Thanks for your time"}], "owner": {"reputation": 1, "user_id": 9890856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2367a93867bdae2c1b4b7dcf9450fd99?s=128&d=identicon&r=PG&f=1", "display_name": "Moazza", "link": "https://stackoverflow.com/users/9890856/moazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551339039, "creation_date": 1551266659, "last_edit_date": 1551339039, "question_id": 54904369, "link": "https://stackoverflow.com/questions/54904369/point-cloud-library-cluster-extraction", "title": "Point cloud Library Cluster Extraction", "body": "<p>I am using point cloud library, here I have made clusters of my cloud. \nNow I need to load clusters one by one in my program for further analysis</p>\n\n<pre><code>for (i=0; i&lt;= total number of clusters ;i++)\n{\n    cloud=cluster_cloud_i;\n    further processing ..\n}\n</code></pre>\n\n<p>I am unable to find any method to load <code>cluster_cloud_i</code> , it gives me syntax error. For instance, I have two clusters named <code>cluster_cloud_1.pcd</code> and <code>cluster_cloud_1.pcd</code> .</p>\n\n<p>Please help me to resolve this issue</p>\n"}, {"tags": ["c++", "json", "nlohmann-json"], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 1, "last_activity_date": 1551267162, "creation_date": 1551267162, "answer_id": 54904518, "question_id": 54904361, "link": "https://stackoverflow.com/questions/54904361/creating-a-json-database-with-user-input/54904518#54904518", "title": "Creating a json database with user input", "body": "<p>You have a <em>sequence</em> container in your desired output, but <em>associative</em> container in your code.</p>\n\n<p>Try something like</p>\n\n<pre><code>json inputAirport;\ninputAirport[\"shortVersion\"] = inputShortVersion;\ninputAirport[\"city\"] = inputCity;\ninputAirport[\"address\"] = inputAddress;\n\nairports[\"airports\"].push_back(inputAirport);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 10984529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252d327a280e65cd24f88e1d46be31d7?s=128&d=identicon&r=PG&f=1", "display_name": "dasmy", "link": "https://stackoverflow.com/users/10984529/dasmy"}, "edited": false, "score": 0, "creation_date": 1551267403, "post_id": 54904573, "comment_id": 96576260, "body": "@Caleth was faster... :-)"}, {"owner": {"reputation": 3, "user_id": 11124700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7b564dad19d73ff17ec3d88f9dd942?s=128&d=identicon&r=PG&f=1", "display_name": "Supreez", "link": "https://stackoverflow.com/users/11124700/supreez"}, "edited": false, "score": 0, "creation_date": 1551268401, "post_id": 54904573, "comment_id": 96576815, "body": "@Caleth &#39;s works perfectly, but yours should too, thanks anyways!"}], "tags": [], "owner": {"reputation": 469, "user_id": 10984529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252d327a280e65cd24f88e1d46be31d7?s=128&d=identicon&r=PG&f=1", "display_name": "dasmy", "link": "https://stackoverflow.com/users/10984529/dasmy"}, "is_accepted": false, "score": 1, "last_activity_date": 1551267348, "creation_date": 1551267348, "answer_id": 54904573, "question_id": 54904361, "link": "https://stackoverflow.com/questions/54904361/creating-a-json-database-with-user-input/54904573#54904573", "title": "Creating a json database with user input", "body": "<p>Apparently, you are creating a json object instead of a json array. To get an array, you could try along the lines of the following:</p>\n\n<pre><code>airports[\"airports\"] = nlohmann::json::array()\n\nnew_airport = nlohmann::json::object()\nnew_airport[\"shortVersion\"] = inputShortVersion;\nnew_airport[\"city\"] = inputCity;\nnew_airport[\"address\"] = inputAddress;\n\nairports[\"airports\"].emplace_back(new_airport);\n</code></pre>\n\n<p>This can be written shorter with braced initalizer lists at the cost of readability:</p>\n\n<pre><code>airports[\"airports\"] = nlohmann::json::array()\n\nairports[\"airports\"].emplace_back(\n    {\n        {\"shortVersion\", inputShortVersion},\n        {\"city\", inputCity},\n        {\"address\", inputAddress}\n    });\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11124700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7b564dad19d73ff17ec3d88f9dd942?s=128&d=identicon&r=PG&f=1", "display_name": "Supreez", "link": "https://stackoverflow.com/users/11124700/supreez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54904518, "answer_count": 2, "score": 0, "last_activity_date": 1551267348, "creation_date": 1551266639, "question_id": 54904361, "link": "https://stackoverflow.com/questions/54904361/creating-a-json-database-with-user-input", "title": "Creating a json database with user input", "body": "<p>I need to create my .json array to look like this:</p>\n\n<pre><code>  {\n  \"airports\": [{\n          \"address\": \"Horley, Gatwick RH6 0NP, UK\",\n          \"city\": \"London\",\n          \"shortVersion\": \"LGW\"\n      },\n      {\n          \"address\": \"Marupe, LV-1053\",\n          \"city\": \"Riga\",\n          \"shortVersion\": \"RIX\"\n      }\n  ]\n}\n</code></pre>\n\n<p>But I have it looking right now like this:</p>\n\n<pre><code>{\n  \"airports\": {\n    \"(LGW)\": {\n      \"address\": \"Horley, Gatwick RH6 0NP, UK\",\n      \"city\": \"London\",\n      \"shortVersion\": \"(LGW)\"\n    },\n    \"(RIX)\": {\n      \"address\": \"Marupe, LV-1053\",\n      \"city\": \"Riga\",\n      \"shortVersion\": \"(RIX)\"\n    }\n  }\n}\n</code></pre>\n\n<p>The code I have for user input right now is this:</p>\n\n<pre><code>airports[\"airports\"][inputShortVersion][\"shortVersion\"] = inputShortVersion;\nairports[\"airports\"][inputShortVersion][\"city\"] = inputCity;\nairports[\"airports\"][inputShortVersion][\"address\"] = inputAddress;\n</code></pre>\n\n<p>I've searched for a whole day on how to do this, but closest I got to was where it does create the above array but after input it overwrites the last airport data.</p>\n\n<p>I'm using nlohmann json library.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 1694302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e12e17a0affc86ad42f8c4e58545ed9?s=128&d=identicon&r=PG", "display_name": "Marcel Petrick", "link": "https://stackoverflow.com/users/1694302/marcel-petrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1551269776, "last_edit_date": 1551269776, "creation_date": 1551269202, "answer_id": 54905131, "question_id": 54904358, "link": "https://stackoverflow.com/questions/54904358/qt-signals-and-slots-slider-and-progress-bar/54905131#54905131", "title": "Qt signals and slots. Slider and progress bar", "body": "<p>Welcome aboard.</p>\n\n<p>I am surprised that you want to do a calculation inside the connect. This is not how it works.\nPlease add a slot (method) like</p>\n\n<pre><code>void slotSetValue(int input)\n{\n  ui-progressBar-&gt;setValue(100 - input);\n}\n</code></pre>\n\n<p>and connect like\n<code>connect(ui-&gt;horizontalSlider,SIGNAL(valueChanged(int)), this,slotSetValue(int)));</code></p>\n\n<p>Fine-tuning for your code may be needed.</p>\n\n<p>ps. I recommend to use the Qt5-connects, which are compile-time-checked.</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1551286739, "last_edit_date": 1551286739, "creation_date": 1551269750, "answer_id": 54905289, "question_id": 54904358, "link": "https://stackoverflow.com/questions/54904358/qt-signals-and-slots-slider-and-progress-bar/54905289#54905289", "title": "Qt signals and slots. Slider and progress bar", "body": "<p>You normally do :</p>\n\n<pre><code>connect(ui-&gt;horizontalSlider, &amp;QSlider::valueChanged, \nui-&gt;horizontalSlider, &amp;QSlider::setValue);\n</code></pre>\n\n<p>but your logic is not correct because you are connecting a <strong>valueChanged</strong> with a <strong>setValue</strong> , that will crash your app since an overflow will happen...</p>\n\n<p>on the other hand, connect used to only pipe signals and slots, you can not do math in the signals/functions involved in that, at least not like that... you will need a lambda or something similiar in the  middle</p>\n"}], "owner": {"reputation": 9, "user_id": 8886481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62fa52b8617eaece9fbb30494adbfdf8?s=128&d=identicon&r=PG&f=1", "display_name": "ahmo ahmic", "link": "https://stackoverflow.com/users/8886481/ahmo-ahmic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551286739, "creation_date": 1551266625, "last_edit_date": 1551282526, "question_id": 54904358, "link": "https://stackoverflow.com/questions/54904358/qt-signals-and-slots-slider-and-progress-bar", "title": "Qt signals and slots. Slider and progress bar", "body": "<pre><code>connect(ui-&gt;horizontalSlider, SIGNAL(valueChanged(int)), \n        ui-&gt;progressBar, SLOT(setValue(ui-&gt;horizontalSlider-&gt;value()-100)));\n</code></pre>\n\n<p>I tried to connect signals and slots when the value of slider for example is 30, the value of the progress bar should be 70 but nothing is changed, I can't find mistake.</p>\n"}, {"tags": ["c++", "macos", "gdb"], "comments": [{"owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 0, "creation_date": 1551267562, "post_id": 54904331, "comment_id": 96576351, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49001329/gdb-doesnt-work-on-macos-high-sierra-10-13-3\">gdb doesn&#39;t work on macos High Sierra 10.13.3</a>"}, {"owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 2, "creation_date": 1551267809, "post_id": 54904331, "comment_id": 96576480, "body": "There is evidence suggesting the latest builds of gdb don&#39;t work on macOS. I believe downgrading to 8.0.1 (by following this <a href=\"https://stackoverflow.com/a/49104154/9238288\">stackoverflow.com/a/49104154/9238288</a> answer) will solve your issue."}], "owner": {"reputation": 43, "user_id": 6179493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c63aba944280a108c74bf28400020437?s=128&d=identicon&r=PG&f=1", "display_name": "Takayama", "link": "https://stackoverflow.com/users/6179493/takayama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551276721, "creation_date": 1551266547, "last_edit_date": 1551276721, "question_id": 54904331, "link": "https://stackoverflow.com/questions/54904331/strange-gdb-behavior-on-macos", "title": "Strange GDB behavior on macOS", "body": "<p>I am trying to get <code>gdb</code> to work on macOS.  I followed the instructions <a href=\"https://sourceware.org/gdb/wiki/PermissionsDarwin\" rel=\"nofollow noreferrer\">here</a>, and now no longer receive an error regarding the Code Signature.</p>\n\n<p>However, when I try to use <code>gdb</code>, I consistently observe the following behavior.</p>\n\n<ol>\n<li>I compile a <code>hello.cpp</code> file with <code>g++ -g -o hello hello.cpp</code></li>\n<li>I run <code>gdb</code> in the directory where I compiled the file.</li>\n<li>I enter <code>file hello</code> into the <code>(gdb)</code> prompt.</li>\n<li>I enter <code>break main</code>.</li>\n<li>I enter <code>run</code>.</li>\n</ol>\n\n<p>GDB now prints out </p>\n\n<pre><code>Starting program: (CWD)/hello\n[New Thread 0xXXXXX of process DDDDD]\n</code></pre>\n\n<p>where </p>\n\n<p><code>(CWD)</code> is the current working directory (where the executable lives)</p>\n\n<p><code>XXXXX</code> is some hexadecimal number and </p>\n\n<p><code>DDDDD</code> is another number.</p>\n\n<p>From here on, all I seem to be able to do is kill the terminal tab.  Neither <code>Ctrl-C</code>, <code>Ctrl-D</code> nor anything else I enter seems to have any effect.</p>\n\n<h2>Some Details:</h2>\n\n<ul>\n<li>I installed <code>gdb</code> using home-brew, the installed version is 8.2.1</li>\n<li>I did <code>echo set startup-with-shell off &gt;&gt; ~/.gdbinit</code></li>\n<li>The same happens when using the built-in Terminal or iTerm2</li>\n<li><code>lldb</code> works on the same executable</li>\n</ul>\n\n<h2>hello.cpp</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "ubuntu-16.04", "gstreamer"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1551265547, "post_id": 54903980, "comment_id": 96575149, "body": "How have you installed GStreamer? What is your OS?"}, {"owner": {"reputation": 41, "user_id": 7368355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eddd4783ac7b9ea0898217cd9321ae9?s=128&d=identicon&r=PG", "display_name": "Piotr S", "link": "https://stackoverflow.com/users/7368355/piotr-s"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1551267982, "post_id": 54903980, "comment_id": 96576575, "body": "Sorry, forgot to add that crucial informations."}], "owner": {"reputation": 41, "user_id": 7368355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eddd4783ac7b9ea0898217cd9321ae9?s=128&d=identicon&r=PG", "display_name": "Piotr S", "link": "https://stackoverflow.com/users/7368355/piotr-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551267910, "creation_date": 1551265369, "last_edit_date": 1551267910, "question_id": 54903980, "link": "https://stackoverflow.com/questions/54903980/qt-multimedia-library-gstreamer-is-not-defined", "title": "Qt Multimedia: Library &#39;gstreamer&#39; is not defined", "body": "<p>I have problem building QtMultimedia with GStreamer:</p>\n\n<pre><code>user@user-VirtualBox:~/sources/qt/build$ /usr/local/Qt-5.12.1/bin/qmake -r GST_VERSION=1.0 ../qt-everywhere-src-5.12.1/qtmultimedia/qtmultimedia.pro \nInfo: creating stash file /home/user/sources/qt/build/.qmake.stash\nInfo: creating cache file /home/user/sources/qt/build/.qmake.cache\n\nRunning configuration tests...\nChecking for ALSA... no\nChecking for GStreamer 1.0... yes\nChecking for GStreamer App 1.0... yes\nChecking for GStreamer encoding-profile.h... yes\nChecking for GStreamer Photography 1.0... no\nChecking for Video for Linux... yes\nChecking for OpenAL... no\nChecking for PulseAudio &gt;= 0.9.10... no\nChecking for libresourceqt5... no\nDone running configuration tests.\n\nConfigure summary:\n\nQt Multimedia:\n  ALSA ................................... no\n  GStreamer 1.0 .......................... yes\n  GStreamer 0.10 ......................... no\n  Video for Linux ........................ yes\n  OpenAL ................................. no\n  PulseAudio ............................. no\n  Resource Policy (libresourceqt5) ....... no\n  Windows Audio Services ................. no\n  DirectShow ............................. no\n  Windows Media Foundation ............... no\n\nQt is now configured for building. Just run 'make'.\nOnce everything is built, you must run 'make install'.\nQt will be installed into '/usr/local/Qt-5.12.1'.\n\nPrior to reconfiguration, make sure you remove any leftovers from\nthe previous build.\n\nReading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/src.pro [/home/user/sources/qt/build/src]\n Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/multimedia/multimedia.pro [/home/user/sources/qt/build/src/multimedia]\n Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/qtmultimediaquicktools/qtmultimediaquicktools.pro [/home/user/sources/qt/build/src/qtmultimediaquicktools]\n Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/imports/imports.pro [/home/user/sources/qt/build/src/imports]\n  Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/imports/multimedia/multimedia.pro [/home/user/sources/qt/build/src/imports/multimedia]\n Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/multimediawidgets/multimediawidgets.pro [/home/user/sources/qt/build/src/multimediawidgets]\n Reading /home/user/sources/qt/qt-everywhere-src-5.12.1/qtmultimedia/src/gsttools/gsttools.pro [/home/user/sources/qt/build/src/gsttools]\nProject ERROR: Library 'gstreamer' is not defined.\n</code></pre>\n\n<p>I believe that I've installed all required GStreamer components, but it looks like the GStreamer library was't found. Any ideas?</p>\n\n<p>OS: <strong>Ubuntu 16.04</strong><br/><br/>\nInstalled <strong>GStreamer</strong> related packages:\n<br/>gir1.2-gst-plugins-bad-1.0/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gir1.2-gst-plugins-base-0.10/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gir1.2-gst-plugins-base-1.0/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gir1.2-gstreamer-0.10/xenial,now 0.10.36-1.5ubuntu1 i386 [installed,automatic]\n<br/>gir1.2-gstreamer-1.0/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>gstreamer-qapt/xenial-updates,now 3.0.2-0ubuntu1.2 i386 [installed,automatic]\n<br/>gstreamer0.10-alsa/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer0.10-doc/xenial,now 0.10.36-1.5ubuntu1 all [installed]\n<br/>gstreamer0.10-gconf/xenial-updates,xenial-security,now 0.10.31-3+nmu4ubuntu2.16.04.3 i386 [installed]\n<br/>gstreamer0.10-gnomevfs/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer0.10-nice/xenial,now 0.1.13-0ubuntu2 i386 [installed]\n<br/>gstreamer0.10-plugins-base/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer0.10-plugins-base-apps/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer0.10-plugins-base-dbg/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer0.10-plugins-base-doc/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 all [installed]\n<br/>gstreamer0.10-plugins-good/xenial-updates,xenial-security,now 0.10.31-3+nmu4ubuntu2.16.04.3 i386 [installed]\n<br/>gstreamer0.10-plugins-good-dbg/xenial-updates,xenial-security,now 0.10.31-3+nmu4ubuntu2.16.04.3 i386 [installed]\n<br/>gstreamer0.10-plugins-good-doc/xenial-updates,xenial-security,now 0.10.31-3+nmu4ubuntu2.16.04.3 all [installed]\n<br/>gstreamer0.10-pulseaudio/xenial-updates,xenial-security,now 0.10.31-3+nmu4ubuntu2.16.04.3 i386 [installed]\n<br/>gstreamer0.10-qapt/xenial-updates,now 3.0.2-0ubuntu1.2 all [installed]\n<br/>gstreamer0.10-tools/xenial,now 0.10.36-1.5ubuntu1 i386 [installed]\n<br/>gstreamer0.10-x/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-alsa/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-clutter/xenial,now 2.0.18-1 i386 [installed]\n<br/>gstreamer1.0-clutter-3.0/xenial,now 3.0.18-1 i386 [installed]\n<br/>gstreamer1.0-crystalhd/xenial,now 1:0.0~git20110715.fdd2f19-11build1 i386 [installed]\n<br/>gstreamer1.0-doc/xenial-updates,now 1.8.3-1~ubuntu0.1 all [installed]\n<br/>gstreamer1.0-dvswitch/xenial,now 0.1.1-1 i386 [installed]\n<br/>gstreamer1.0-espeak/xenial,now 0.4.0-1 i386 [installed]\n<br/>gstreamer1.0-fluendo-mp3/xenial,now 0.10.32.debian-1 i386 [installed]\n<br/>gstreamer1.0-hybris/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-libav/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-libav-dbg/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-nice/xenial,now 0.1.13-0ubuntu2 i386 [installed]\n<br/>gstreamer1.0-packagekit/xenial-updates,now 0.8.17-4ubuntu6~gcc5.4ubuntu1.4 i386 [installed]\n<br/>gstreamer1.0-plugins-bad/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-bad-dbg/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-bad-doc/xenial-updates,now 1.8.3-1ubuntu0.2 all [installed]\n<br/>gstreamer1.0-plugins-bad-faad/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-bad-videoparsers/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-base/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-base-apps/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-base-dbg/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>gstreamer1.0-plugins-base-doc/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 all [installed]\n<br/>gstreamer1.0-plugins-good/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.4 i386 [installed]\n<br/>gstreamer1.0-plugins-good-dbg/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.4 i386 [installed]\n<br/>gstreamer1.0-plugins-good-doc/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.4 all [installed]\n<br/>gstreamer1.0-plugins-ugly/xenial-updates,now 1.8.3-1ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-plugins-ugly-amr/xenial-updates,now 1.8.3-1ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-plugins-ugly-dbg/xenial-updates,now 1.8.3-1ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-plugins-ugly-doc/xenial-updates,now 1.8.3-1ubuntu0.1 all [installed]\n<br/>gstreamer1.0-pocketsphinx/xenial,now 0.8.0+real5prealpha-1ubuntu2 i386 [installed]\n<br/>gstreamer1.0-pulseaudio/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.4 i386 [installed]\n<br/>gstreamer1.0-tools/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-vaapi/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>gstreamer1.0-vaapi-doc/xenial-updates,now 1.8.3-1~ubuntu0.1 all [installed]\n<br/>gstreamer1.0-x/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>libclutter-gst-3.0-0/xenial,now 3.0.18-1 i386 [installed]\n<br/>libgstreamer-plugins-bad1.0-0/xenial-updates,now 1.8.3-1ubuntu0.2 i386 [installed,automatic]\n<br/>libgstreamer-plugins-base0.10-0/xenial-updates,xenial-security,now 0.10.36-2ubuntu0.1 i386 [installed,automatic]\n<br/>libgstreamer-plugins-base1.0-0/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>libgstreamer-plugins-base1.0-dev/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.2 i386 [installed]\n<br/>libgstreamer-plugins-good1.0-0/xenial-updates,xenial-security,now 1.8.3-1ubuntu0.4 i386 [installed]\n<br/>libgstreamer0.10-0/xenial,now 0.10.36-1.5ubuntu1 i386 [installed,automatic]\n<br/>libgstreamer0.10-dev/xenial,now 0.10.36-1.5ubuntu1 i386 [installed,automatic]\n<br/>libgstreamer1.0-0/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>libgstreamer1.0-0-dbg/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>libgstreamer1.0-dev/xenial-updates,now 1.8.3-1~ubuntu0.1 i386 [installed]\n<br/>libqt5gstreamer-1.0-0/xenial,now 1.2.0-3 i386 [installed]\n<br/>libqtgstreamer-1.0-0/xenial,now 1.2.0-3 i386 [installed]\n<br/>libreoffice-avmedia-backend-gstreamer/xenial-updates,xenial-security,now 1:5.1.6~rc2-0ubuntu1~xenial6 i386 [installed]</p>\n"}, {"tags": ["c++", "c++11", "bit-fields"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551265650, "post_id": 54903942, "comment_id": 96575207, "body": "I dont see what is wrong with the first attempt. The curly braces are not superfluous and with uniform initialization the became rather natural for initialization"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1551266391, "post_id": 54903942, "comment_id": 96575640, "body": "Reading <code>raw</code> when inactive is UB btw..."}, {"owner": {"reputation": 3717, "user_id": 4759726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abcd6ee7f47949d1bc8978fa317105d2?s=128&d=identicon&r=PG", "display_name": "Wombatz", "link": "https://stackoverflow.com/users/4759726/wombatz"}, "edited": false, "score": 0, "creation_date": 1551266533, "post_id": 54903942, "comment_id": 96575717, "body": "i should include in the question, that the struct definition is also something i want to change"}, {"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "edited": false, "score": 1, "creation_date": 1551267104, "post_id": 54903942, "comment_id": 96576084, "body": "You can&#39;t generally detect overflow at compile time if you&#39;re using variables (holding arbitrary values) instead of compile-time constants."}, {"owner": {"reputation": 3717, "user_id": 4759726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abcd6ee7f47949d1bc8978fa317105d2?s=128&d=identicon&r=PG", "display_name": "Wombatz", "link": "https://stackoverflow.com/users/4759726/wombatz"}, "reply_to_user": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "edited": false, "score": 0, "creation_date": 1551268104, "post_id": 54903942, "comment_id": 96576643, "body": "@AlexeyFrunze that&#39;s why i added the bitwise and. Without it, a warning should be generated, but with the correct bitmask it should work."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1551268669, "post_id": 54903942, "comment_id": 96576965, "body": "The requirements mentioned in your last code section can&#39;t be fulfilled without relying on some very particular details of your compiler (or using e.g. an aggressive linter). You should look into writing your own custom bitfield that validates parameters like you want (or just automatically does the <code>&amp;</code>), and maybe a user-defined literal alongside it (well, that&#39;s outside the realm of C++ 11), because anything else won&#39;t really get you there."}], "owner": {"reputation": 3717, "user_id": 4759726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abcd6ee7f47949d1bc8978fa317105d2?s=128&d=identicon&r=PG", "display_name": "Wombatz", "link": "https://stackoverflow.com/users/4759726/wombatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551269280, "creation_date": 1551265265, "last_edit_date": 1551269280, "question_id": 54903942, "link": "https://stackoverflow.com/questions/54903942/clean-syntax-for-filling-bitfield-structs-from-function-parameters", "title": "Clean syntax for filling Bitfield structs from function parameters", "body": "<p>I must send some data over a network where the package parts are not byte aligned. All packages are 8 byte long and an example package type might look like this:</p>\n\n<pre><code>union Packed\n{\n    struct\n    {\n        uint64_t a : 5;\n        uint64_t b : 10;\n        bool c : 1;\n    };\n    uint64_t raw;\n};\n</code></pre>\n\n<p>So the first 5 bits are field <code>a</code> the next 10 bits are field <code>b</code> and the last bit is field <code>c</code>. Now I need a <code>send</code> function that can send this and possibly other package types. The function should accept the fields as parameters. The low-level send function accepts a single <code>uint64_t</code>.</p>\n\n<p><strong>Edit</strong> <em>As pointed out in the comments, it is not safe to read from <code>raw</code> after writing to <code>a</code>, <code>b</code> or <code>c</code>. To make it clear: this is also something i would like to change, but i included it at the top, because the union is used for all of my attempts.</em></p>\n\n<p>My requirements are:</p>\n\n<ul>\n<li>An overflow should be detected at compile time</li>\n<li>The syntax should not be too bulky (subjective, but i will show what i want)</li>\n</ul>\n\n<h3>My first attempt</h3>\n\n<pre><code>void send_struct(const Packed&amp; packed)\n{\n    raw_send(packed.raw);\n}\n\nint main()\n{\n    send_struct({1000, 2, true});  // conversion changes value\n\n    Packed packed = {1000, 2, true};  // conversion changes value\n    send_struct(packed);\n}\n</code></pre>\n\n<p>The warnings are generated which satisfies my first requirement, but i don't like the syntax: The curly braces look superfluous and manually creating a struct first is cumbersome.</p>\n\n<p>With some warnings enable i even have to use <em>two</em> layers of curly braces, because the struct is nested inside the union.</p>\n\n<h3>Second attempt</h3>\n\n<pre><code>template &lt;typename ...Args&gt;\nvoid send_var(Args... args)\n{\n    Packed packed {args...};\n\n    raw_send(packed.raw);\n};\n\nint main()\n{\n    send_var(1000u, 2u, true);\n}\n</code></pre>\n\n<p>Here, i like the syntax, but no warnings are generated, presumably because the bit width is lost somewhere.</p>\n\n<h3>Third attempt</h3>\n\n<pre><code>struct A\n{\n    uint64_t data : 5;\n};\n\nstruct B\n{\n    uint64_t data : 10;\n};\n\nvoid send_separate(A a, B b, bool c)\n{\n    Packed packed {a.data, b.data, c};\n\n    raw_send(packed.raw);\n}\n\nint main()\n{\n    send_separate({1000u}, {2u}, true);  // conversion changes value\n    send_separate(1000u, 2u, true);  // compile error\n}\n</code></pre>\n\n<p>The first usage is ugly again: too many curly braces and the second one does not compile, because the structs cannot be  implicitly constructed with a single value.</p>\n\n<h3>Question</h3>\n\n<p>How can i implement a function and a safe package definition such that the following function call compiles <strong>and</strong> shows a warning, because the value <code>1000</code> does not fit into 5 bit.</p>\n\n<pre><code>send(1000u, 2u, true);\n</code></pre>\n\n<p>I actually only care about the call site. The function and union definitions may be more complicated.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Using variables for the function parameters <s>must</s> <em>should</em> work, too.</p>\n\n<pre><code>uint64_t a, b;\nsend(a, b, true);  // compiles, but may generate a warning\nsend(a &amp; 0x1f, b &amp; 0x3ff, true);  // compiles preferably without a warning\n</code></pre>\n\n<p>The software will be used on linux only, is compiled with <code>gcc</code> or <code>clang</code> using at lease these warnings: <code>-Wall -Wextra -pedantic</code> plus the flag that allows anonymous structs and unions.</p>\n"}, {"tags": ["c++", "android-studio", "android-ndk"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551264912, "post_id": 54903803, "comment_id": 96574763, "body": "your preprocessor will know if <code>SOMETHING</code> is defined or not, though I also dont know the name of the component resopnsible for graying out the code"}, {"owner": {"reputation": 1795, "user_id": 6099096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/623gR.jpg?s=128&g=1", "display_name": "Inline", "link": "https://stackoverflow.com/users/6099096/inline"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551264996, "post_id": 54903803, "comment_id": 96574823, "body": "@user463035818 Clang compiles everything how it should compile, but Android Studio grays code out, where it shouldn&#39;t. Preprocessor works, like it should work. IMHO It is definitely problem with IDE."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1551265035, "post_id": 54903803, "comment_id": 96574847, "body": "yes thats more or less what i was saying, its not the preprocessor, but something in your IDE"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551265121, "post_id": 54903803, "comment_id": 96574904, "body": "ah now I think I do understand what you mean in the question. You want to disable (not at the preprocessor but in your IDE) dead code analysis for macros (which are processed correctly by the preprocessor). Sorry, my misunderstanding"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551265244, "post_id": 54903803, "comment_id": 96574973, "body": "funny that SO foramtting seems to gray out in the same way as your IDE does ;). Are you sure <code>SOMETHING</code> is defined when you reach the <code>#if SOMETHING</code> ?"}, {"owner": {"reputation": 1795, "user_id": 6099096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/623gR.jpg?s=128&g=1", "display_name": "Inline", "link": "https://stackoverflow.com/users/6099096/inline"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551265434, "post_id": 54903803, "comment_id": 96575088, "body": "@user463035818 Yes. I don&#39;t really care about this Android Studio feature, I really like to turn it off."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1551272351, "post_id": 54903803, "comment_id": 96579155, "body": "The question is really all about Android Studio, and not really about C++ (just incidentally about C++, since that&#39;s the code being used in Android Studio)."}], "owner": {"reputation": 1795, "user_id": 6099096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/623gR.jpg?s=128&g=1", "display_name": "Inline", "link": "https://stackoverflow.com/users/6099096/inline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551265720, "creation_date": 1551264831, "last_edit_date": 1551265720, "question_id": 54903803, "link": "https://stackoverflow.com/questions/54903803/how-to-disable-dead-code-analysis-for-preprocessor", "title": "How to disable dead code analysis for preprocessor?", "body": "<p>How to disable dead code analysis for preprocessor? Our project has some macro magic, which Android Studio doesn't understand. Code is grayed out where is shouldn't be.</p>\n\n<pre><code>#if SOMETHING\n// Here code is gray, but it shouldn't be.\n#else\n....\n#endif\n</code></pre>\n\n<p>One more solid example is this. It doesn't gray out only for <code>__arch64__</code>, but project compiles for all architectures. </p>\n\n<pre><code>#if defined(__x86_64__)\n        .. // x64 specific\n#elif defined(__i386__)\n        .. // RIP: x86_64 specific\n#elif defined(__aarch64__)\n        .. // etc..\n#endif\n</code></pre>\n\n<p>Another solid example is this trick. We have <code>unity_build.cpp</code> file where all transition units all included. There is preprocessor magic in every transition unit.</p>\n\n<pre><code>#ifndef MYPROJ_UNITY_BUILD\n... // Transition unit code.\n#endif\n</code></pre>\n\n<p>And in <code>unity_build.cpp</code></p>\n\n<pre><code>#ifdef MYPROJ_UNITY_BUILD\n    #undef MYPROJ_UNITY_BUILD\n#else\n    #define MYPROJ_UNITY_BUILD 1\n#endif\n#include \"first-transition-unit.cpp\"\n#include \"second-transition-unit.cpp\"\n</code></pre>\n\n<p>Android Studio grays out code in every transition unit.</p>\n"}, {"tags": ["c++", "c", "tcp", "server", "pipe"], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 4175326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4063dc584aafb9bb0bd60d7213becc23?s=128&d=identicon&r=PG&f=1", "display_name": "Dariusz Ostolski", "link": "https://stackoverflow.com/users/4175326/dariusz-ostolski"}, "is_accepted": false, "score": 2, "last_activity_date": 1551265023, "creation_date": 1551265023, "answer_id": 54903870, "question_id": 54903744, "link": "https://stackoverflow.com/questions/54903744/replicate-broken-pipe-error-with-tcp-socket/54903870#54903870", "title": "Replicate broken pipe error with tcp socket", "body": "<p>You may use kill to send specific signal to a process, e.g.:</p>\n\n<pre><code>kill -s PIPE 3363\n\n</code></pre>\n\n<p>The other solution is to create a client that will exit early i.e. it will close socket before your call to send.</p>\n"}], "owner": {"reputation": 19, "user_id": 3965288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d58b6d92cfeaf9b9eed9d7379de8c81?s=128&d=identicon&r=PG&f=1", "display_name": "pm40", "link": "https://stackoverflow.com/users/3965288/pm40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "closed_date": 1551265310, "answer_count": 1, "score": -1, "last_activity_date": 1551265102, "creation_date": 1551264631, "question_id": 54903744, "link": "https://stackoverflow.com/questions/54903744/replicate-broken-pipe-error-with-tcp-socket", "closed_reason": "Duplicate", "title": "Replicate broken pipe error with tcp socket", "body": "<p>I have a a tcp server.\nThis is the code </p>\n\n<p><a href=\"https://pastebin.com/paesU39X\" rel=\"nofollow noreferrer\">https://pastebin.com/paesU39X</a></p>\n\n<p>I had the following error during debugging:</p>\n\n<pre><code>Thread 10 \"testserver\" received signal SIGPIPE, Broken pipe.\n[Switching to Thread 0x7f71feeec0 (LWP 5475)]\n0x0000007fb6f13f70 in __libc_send (sockfd=50, buffer=0x7f71fee1e0, len=0,    flags=0)\nat ../sysdeps/unix/sysv/linux/generic/send.c:27\n27  ../sysdeps/unix/sysv/linux/generic/send.c: No such file or directory.\n</code></pre>\n\n<p>How can I replicate the broken pipe error to test a solution?</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "visual-studio", "pointers"], "comments": [{"owner": {"reputation": 480, "user_id": 6948160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129c8f620f47a08105f596962677b4e3?s=128&d=identicon&r=PG&f=1", "display_name": "Gojita", "link": "https://stackoverflow.com/users/6948160/gojita"}, "edited": false, "score": 0, "creation_date": 1551264684, "post_id": 54903664, "comment_id": 96574637, "body": "growArray should take a Contact** if you want to update the pointer in your main function. And you should pass &amp;contacts when you call it from main"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 480, "user_id": 6948160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129c8f620f47a08105f596962677b4e3?s=128&d=identicon&r=PG&f=1", "display_name": "Gojita", "link": "https://stackoverflow.com/users/6948160/gojita"}, "edited": false, "score": 0, "creation_date": 1551265824, "post_id": 54903664, "comment_id": 96575309, "body": "@Gojita No, <code>growArray</code> should have a <code>Contact*&amp;</code>, not a <code>**</code>, that&#39;s a different contract. Anyway, OP should use a vector and not reimplement it."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551265084, "post_id": 54903730, "comment_id": 96574877, "body": "But I am reassigning the contacts to the newArray immediately inside the growArray funciton. Isn&#39;t it supposed to work now? Look I am new to C++, if my question seems silly, I appologize. But what&#39;s the way around this situation ayway?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551265153, "post_id": 54903730, "comment_id": 96574920, "body": "@AbusayeedRoni have you read the paragraph starting by &quot;There are basically two solutions&quot;?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551265519, "post_id": 54903730, "comment_id": 96575135, "body": "@AbusayeedRoni Check the demonstration of the issue I&#39;ve added to the answer."}, {"owner": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551265658, "post_id": 54903730, "comment_id": 96575210, "body": "yeah that works :) Thanks. But can you tell a bit about how *&amp;contacts really work?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551265867, "post_id": 54903730, "comment_id": 96575333, "body": "@AbusayeedRoni In your C++ book look at how parameters are passed to functions (hint they are <i>copied</i>), and then look up references and how that changes things."}, {"owner": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "edited": false, "score": 0, "creation_date": 1551266119, "post_id": 54903730, "comment_id": 96575484, "body": "@ john Thanks for the heads-up"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 2, "last_activity_date": 1551265495, "last_edit_date": 1551265495, "creation_date": 1551264578, "answer_id": 54903730, "question_id": 54903664, "link": "https://stackoverflow.com/questions/54903664/getting-write-access-violation-when-trying-to-re-allocate-memory/54903730#54903730", "title": "Getting write access violation when trying to re-allocate memory", "body": "<p>In</p>\n\n<pre><code>growArray(currentLength, contacts);\n</code></pre>\n\n<p>a <em>copy</em> of the pointer <code>contacts</code> is modified inside the function; but outside, the pointer's value stays the same. After <code>growArray</code> returns, <code>contacts</code> points to deleted memory, hence UB, hence the crash.</p>\n\n<p>==> <a href=\"http://coliru.stacked-crooked.com/a/3a37a6a5562fa063\" rel=\"nofollow noreferrer\">Full program demonstration of the issue</a> &lt;==</p>\n\n<p>There are basically two solutions: the bad one and the good one. The bad one is to change the signature of <code>growArray</code> to take a reference to the pointer:</p>\n\n<pre><code>void growArray(int &amp;currentLength, Contact *&amp;contacts)\n</code></pre>\n\n<p>The good one is to stop this manually allocated memory non-sense and use a <code>std::vector&lt;Contact&gt;</code>!</p>\n"}], "owner": {"reputation": 57, "user_id": 6879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8128518b20c73b2424b127b318978a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Abusayeed Roni", "link": "https://stackoverflow.com/users/6879927/abusayeed-roni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54903730, "answer_count": 1, "score": 1, "last_activity_date": 1551265495, "creation_date": 1551264370, "question_id": 54903664, "link": "https://stackoverflow.com/questions/54903664/getting-write-access-violation-when-trying-to-re-allocate-memory", "title": "Getting write access violation when trying to re-allocate memory", "body": "<p>I am writing a program that takes some contact information from user and grows the array dynamically when it gets full. But when I am trying to run the program I get Write access violation popping up a line from \"iosfwd standard header\". I don't know where I went wrong. Please do help.</p>\n\n<p>My code looks like this: </p>\n\n<pre><code># include \"pch.h\"\n# include &lt;iostream&gt;\n# include &lt;string&gt;\n\nusing namespace std;\n\nstruct Contact {\n    string name;\n    string number;\n    string address;\n    string exit;\n};\nvoid userPrompt(Contact &amp;contact) {\n    cout &lt;&lt; \"Name: \";\n    getline(cin, contact.name);\n    cout &lt;&lt; \"Phone number: \";\n    getline(cin, contact.number);\n    cout &lt;&lt; \"Address: \";\n    getline(cin, contact.address);\n    cout &lt;&lt; \"Exit? (y/n): \";\n    getline(cin, contact.exit);\n}\nvoid printContact(Contact &amp;contact) {\n    cout &lt;&lt; \"Name: \" &lt;&lt; contact.name &lt;&lt; endl;\n    cout &lt;&lt; \"Phone number: \" &lt;&lt; contact.number &lt;&lt; endl;\n    cout &lt;&lt; \"Address: \" &lt;&lt; contact.address &lt;&lt; \"\\n\" &lt;&lt; endl;\n}\nvoid growArray(int &amp;currentLength, Contact *contacts) {\n    int multiplyer = 2;\n    Contact *new_array = new Contact[currentLength * multiplyer];\n    for (int i = 0; i &lt; currentLength; i++) {\n        new_array[i] = contacts[i];\n    }\n    delete[] contacts;\n    contacts = new_array;\n    currentLength *= multiplyer;\n}\nvoid showAllContacts(Contact *contacts, int length) {\n    for (int i = 0; i &lt; length; i++) {\n        if (contacts[i].name.length() != 0) {\n            printContact(contacts[i]);\n        }\n    }\n}\nint main() {\n\n    // Prompt the user to fill in the address book.\n    // If the array gets full, make it bigger.\n\n    Contact *contacts = new Contact[1];\n    int currentLength = 1;\n    int i = 0;\n    while (true) {\n        userPrompt(contacts[i]);\n        if (contacts[i].exit == \"y\" or contacts[i].exit == \"Y\") {\n            break;\n        }\n        i++;\n        if (i == currentLength) {\n            growArray(currentLength, contacts);\n        }\n    }\n\n    // Show the address book\n\n    showAllContacts(contacts, currentLength);\n}\n</code></pre>\n\n<p>But when I am running the code it throws exception like this:\n<a href=\"https://i.stack.imgur.com/WXZV8.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>\"Write Access Violation\"\nI think the bug is in the growArray function. But I can't fugure out where did I screw up. Please do help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1551264359, "post_id": 54903581, "comment_id": 96574392, "body": "And what do you expect? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (for instance the <code>Dice</code> is useless)."}, {"owner": {"reputation": 187, "user_id": 6304872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1041e437eb37b26740296f440411dee4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexVB", "link": "https://stackoverflow.com/users/6304872/alexvb"}, "edited": false, "score": 0, "creation_date": 1551264400, "post_id": 54903581, "comment_id": 96574420, "body": "Which line is supposed to increment the variable?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1551264477, "post_id": 54903581, "comment_id": 96574476, "body": "Typo: <code>=+</code> -&gt; <code>+=</code>"}, {"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551264497, "post_id": 54903581, "comment_id": 96574495, "body": "@Matthieu Brucher i except the score to be the sum of the values i get the function rollDice"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551264543, "post_id": 54903581, "comment_id": 96574529, "body": "A Player is NOT a Die..."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1551264656, "post_id": 54903581, "comment_id": 96574621, "body": "The singular is Die, anyway"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 5, "creation_date": 1551264727, "post_id": 54903581, "comment_id": 96574660, "body": "&quot;I can&#39;t interpret exactly what are the values that I get because the input values are created randomly&quot; then do not use random values for testing and debugging. Random values and testing dont go very well together, as reproducability is of major importance. Also note that the values are just pseudo random, ie for the same seed you get exactly the same sequence"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551290559, "post_id": 54903581, "comment_id": 96590227, "body": "You can make the results less random by providing a specific seed instead of using <code>rd()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551264531, "post_id": 54903666, "comment_id": 96574522, "body": "I fixed that but i still don&#39;t get the wright results"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551264724, "post_id": 54903666, "comment_id": 96574658, "body": "See also the fix @Useless provided. Added it to this answer, too."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1551264546, "last_edit_date": 1551264546, "creation_date": 1551264374, "answer_id": 54903666, "question_id": 54903581, "link": "https://stackoverflow.com/questions/54903581/increment-of-member-variable-when-member-function-executes/54903666#54903666", "title": "Increment of member variable when member function executes", "body": "<p>You have a typo in</p>\n\n<pre><code>this-&gt;pScore =+ distr(eng);\n</code></pre>\n\n<p>such that <code>pScore</code> is not increased but set to this value.</p>\n\n<p>You probably meant</p>\n\n<pre><code>this-&gt;pScore += distr(eng);\n</code></pre>\n\n<p>And you should reuse the randomly generated number rather than generating different numbers in the course of <code>rollDice</code>:</p>\n\n<pre><code>this-&gt;playerDiceRolled = distr(eng);\nstd::cout &lt;&lt; \"player rolled:\" &lt;&lt;  this-&gt;playerDiceRolled &lt;&lt; \"\\n\";\nthis-&gt;pScore += this-&gt;playerDiceRolled;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551264719, "post_id": 54903676, "comment_id": 96574653, "body": "<i>&quot;so you got three different values&quot;</i>. 1/36 to have same results ;-)"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551264892, "post_id": 54903676, "comment_id": 96574754, "body": "I should probably say &quot;three different samples, which may or may not have the same value&quot; ..."}, {"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551264954, "post_id": 54903676, "comment_id": 96574790, "body": "@Useless thank you that was the case. also to_string(playerDiceRolled) to preview it"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 3, "last_activity_date": 1551264797, "last_edit_date": 1551264797, "creation_date": 1551264410, "answer_id": 54903676, "question_id": 54903581, "link": "https://stackoverflow.com/questions/54903581/increment-of-member-variable-when-member-function-executes/54903676#54903676", "title": "Increment of member variable when member function executes", "body": "<pre><code>this-&gt;playerDiceRolled = distr(eng);\nstd::cout &lt;&lt; \"player rolled:\" &lt;&lt; distr(eng) &lt;&lt; \"\\n\";\nthis-&gt;pScore =+ distr(eng);\n</code></pre>\n\n<p>The distribution generates a new and different pseudo-random number every time you call it. You called it three times, so you got three different values.</p>\n\n<p>If you just duplicate the <code>cout</code> line - or step through your program in a debugger - you'll see this in action.</p>\n\n<p>Try something like this instead</p>\n\n<pre><code>this-&gt;playerDiceRolled = distr(eng);\nstd::cout &lt;&lt; \"player rolled:\" &lt;&lt; playerDiceRolled &lt;&lt; \"\\n\";\nthis-&gt;pScore += playerDiceRolled;\n</code></pre>\n\n<p>(including the += fix Stephan noticed and I completely missed).</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1551265314, "post_id": 54903950, "comment_id": 96575019, "body": "Answering your own question is completely fine, though to make it a proper answer you should explain a bit what you changed in the code and why"}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1551265628, "post_id": 54903950, "comment_id": 96575195, "body": "I suggest that you consider using proper logic here as I explained in my answer."}], "tags": [], "owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "is_accepted": false, "score": -1, "last_activity_date": 1551265279, "creation_date": 1551265279, "answer_id": 54903950, "question_id": 54903581, "link": "https://stackoverflow.com/questions/54903581/increment-of-member-variable-when-member-function-executes/54903950#54903950", "title": "Increment of member variable when member function executes", "body": "<p>Thank you everyone I fixed it</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;random&gt;\nusing namespace std;\n\n\n\nclass Dice\n{\npublic:\n    virtual void rollDice() = 0;\n\n};\n\n\n\nclass Player : public Dice\n{\npublic:\n    Player(){ };\n    Player(int id, string name ,int score = 0) : pId(id), pName(name) , pScore(score) { };\n    void rollDice();\n    int desplayScore() { return pScore;}\n\nprivate:\n    int pId;\n    std::string pName;\n    int pScore;\n    unsigned char playerDiceRolled;\n};\n\nvoid Player::rollDice()\n{\n    std::random_device rd;\n    std::mt19937 eng(rd());\n    std::uniform_int_distribution&lt;&gt; distr(1, 6);\n    this-&gt;playerDiceRolled = distr(eng);\n    std::cout &lt;&lt; \"player rolled:\" &lt;&lt; to_string(playerDiceRolled) &lt;&lt; \"\\n\";\n    this-&gt;pScore += playerDiceRolled;\n}\nint main()\n{\n\n    Player A(1, \"Player\");\n\n    A.rollDice();\n    A.rollDice();\n    std::cout &lt;&lt; A.desplayScore();\n    return 0;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551265998, "post_id": 54903970, "comment_id": 96575406, "body": "thank you that looks much better. maybe you can also tell me someway or maybe books concerning the logic of a program"}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "reply_to_user": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551266572, "post_id": 54903970, "comment_id": 96575742, "body": "Google is your friend on that. Tons of websites for that subject. Just looking on them I can name some: <a href=\"https://www.learncpp.com\" rel=\"nofollow noreferrer\">learncpp.com</a> , <a href=\"https://www.tutorialspoint.com\" rel=\"nofollow noreferrer\">tutorialspoint.com</a> , <a href=\"https://www.studytonight.com\" rel=\"nofollow noreferrer\">studytonight.com</a> , ..."}], "tags": [], "owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "is_accepted": true, "score": 1, "last_activity_date": 1551265976, "last_edit_date": 1551265976, "creation_date": 1551265345, "answer_id": 54903970, "question_id": 54903581, "link": "https://stackoverflow.com/questions/54903581/increment-of-member-variable-when-member-function-executes/54903970#54903970", "title": "Increment of member variable when member function executes", "body": "<p>You are using <code>distr(eng)</code> three times which will produce three different outputs According to <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>Also your logic is wrong here. <code>Player</code> class should not inherent from <code>Dice</code> but should have an object of it. I changed you code to this: <em>(note moving</em> <code>roll</code> <em>functionality to Dice class and calling it from</em> <code>Player::rollDice</code><em>)</em></p>\n\n<pre><code>class Dice\n{\n    public:\n        unsigned char roll() {\n\n            std::random_device rd;\n            std::mt19937 eng(rd());\n            std::uniform_int_distribution&lt;&gt; distr(1, 6);\n            return distr(eng);\n        }\n};\n\n\n\nclass Player\n{\n    public:\n        Player(){ };\n        Player(int id, string name ,int score = 0) : pId(id), pName(name) , pScore(score) { \n        };\n    void rollDice();\n    int desplayScore() { return pScore;}\n\nprivate:\n    int pId;\n    std::string pName;\n    int pScore;\n    unsigned char playerDiceRolled;\n    Dice mDice;\n};\n\nvoid Player::rollDice()\n{\n    this-&gt;playerDiceRolled = mDice.roll();\n    std::cout &lt;&lt; \"player rolled:\" &lt;&lt; playerDiceRolled &lt;&lt; \"\\n\";\n    this-&gt;pScore += playerDiceRolled;\n}\nint main()\n{\n\n    Player A(1, \"Player\");\n\n    A.rollDice();\n    A.rollDice();\n    std::cout &lt;&lt; A.desplayScore();\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1551296495, "accepted_answer_id": 54903970, "answer_count": 4, "score": -3, "last_activity_date": 1551265976, "creation_date": 1551264124, "last_edit_date": 1551264342, "question_id": 54903581, "link": "https://stackoverflow.com/questions/54903581/increment-of-member-variable-when-member-function-executes", "closed_reason": "Not suitable for this site", "title": "Increment of member variable when member function executes", "body": "<p>I have a function member of a class which should increment a member variable when executes but the problem is that it doesn't work properly. I can't interpret exactly what are the values that I get because the input values are created randomly</p>\n\n<pre><code>class Dice\n{\npublic:\n    virtual void rollDice() = 0;\n\n};\n\n\n\nclass Player : public Dice\n{\npublic:\n    Player(){ };\n    Player(int id, string name ,int score = 0) : pId(id), pName(name) , pScore(score) { };\n    void rollDice();\n    int desplayScore() { return pScore;}\n\nprivate:\n    int pId;\n    std::string pName;\n    int pScore;\n    unsigned char playerDiceRolled;\n};\n\nvoid Player::rollDice()\n{\n    std::random_device rd;\n    std::mt19937 eng(rd());\n    std::uniform_int_distribution&lt;&gt; distr(1, 6);\n    this-&gt;playerDiceRolled = distr(eng);\n    std::cout &lt;&lt; \"player rolled:\" &lt;&lt; distr(eng) &lt;&lt; \"\\n\";\n    this-&gt;pScore =+ distr(eng);\n}\nint main()\n{\n\n    Player A(1, \"Player\");\n\n    A.rollDice();\n    A.rollDice();\n    std::cout &lt;&lt; A.desplayScore();\n    return 0;\n\n}\n</code></pre>\n\n<p>The results are different depending on the random values but they are not the right ones.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1551263668, "post_id": 54903297, "comment_id": 96573918, "body": "Maybe <code>QueryWorkingSet</code>?"}, {"owner": {"reputation": 566, "user_id": 1478396, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e46fa9f212dee2aea16c633a395e357?s=128&d=identicon&r=PG", "display_name": "Kriszti&#225;n Szab&#243;", "link": "https://stackoverflow.com/users/1478396/kriszti%c3%a1n-szab%c3%b3"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1551263926, "post_id": 54903297, "comment_id": 96574086, "body": "Already looked into that, but documentation on that is just as bad. It&#39;s absolutely unclear to me how I can calculate the private working set size based on the returned  <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/psapi/ns-psapi-_psapi_working_set_ex_block\" rel=\"nofollow noreferrer\">working set blocks</a>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1551264156, "post_id": 54903297, "comment_id": 96574236, "body": "<a href=\"https://stackoverflow.com/a/42986966/6401656\">stackoverflow.com/a/42986966/6401656</a>"}, {"owner": {"reputation": 566, "user_id": 1478396, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e46fa9f212dee2aea16c633a395e357?s=128&d=identicon&r=PG", "display_name": "Kriszti&#225;n Szab&#243;", "link": "https://stackoverflow.com/users/1478396/kriszti%c3%a1n-szab%c3%b3"}, "edited": false, "score": 0, "creation_date": 1551266929, "post_id": 54903297, "comment_id": 96575978, "body": "But is it possible to call <code>ZwQueryInformationProcess</code> outside of a kernel driver/library? Because if not then this is not a solution to me. I was going to mention no NT calls, but I&#39;m not sure if there&#39;s a way to get around that."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1551269010, "post_id": 54903297, "comment_id": 96577143, "body": "If you want to rule out all viable solutions, then you can just give up"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1551272751, "post_id": 54903297, "comment_id": 96579384, "body": "<code>ZwQueryInformationProcess</code> this is <b>user mode</b> api exported from <i>ntdll.dll</i>. call it like any usual api"}], "owner": {"reputation": 566, "user_id": 1478396, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e46fa9f212dee2aea16c633a395e357?s=128&d=identicon&r=PG", "display_name": "Kriszti&#225;n Szab&#243;", "link": "https://stackoverflow.com/users/1478396/kriszti%c3%a1n-szab%c3%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "closed_date": 1551265745, "answer_count": 0, "score": 0, "last_activity_date": 1551263284, "creation_date": 1551263284, "question_id": 54903297, "link": "https://stackoverflow.com/questions/54903297/c-query-private-working-set-size-using-winapi", "closed_reason": "Duplicate", "title": "C++ Query private working set size using WinAPI?", "body": "<p>I would like to query the private working set size of a given process only using WinAPI - no WMI. I can already query the memory information using <code>GetProcessMemoryInfo()</code>, but this only contains the working set size, not the <strong>private</strong> working set size.</p>\n\n<p>I've found several approaches but all of them involve WMI, which I would like to avoid using. Also found comments suggesting that you can query memory information using <code>VirtualQuery</code> and calculate the value yourself, but non of them describe how, and documentation on this is just awful.</p>\n"}, {"tags": ["c++", "zeromq"], "comments": [{"owner": {"reputation": 1359, "user_id": 113316, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4772c3b95b4065144bb7f26dd24eae37?s=128&d=identicon&r=PG", "display_name": "rajeshnair", "link": "https://stackoverflow.com/users/113316/rajeshnair"}, "edited": false, "score": 1, "creation_date": 1551263173, "post_id": 54903131, "comment_id": 96573597, "body": "Which port are you trying to listen to? Please note that ports below 1024 (also known as well-known ports) can only be listened by root users"}, {"owner": {"reputation": 1271, "user_id": 1892308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137a2ad54fa9e20dd810a7f3f030a311?s=128&d=identicon&r=PG", "display_name": "Istopopoki", "link": "https://stackoverflow.com/users/1892308/istopopoki"}, "reply_to_user": {"reputation": 1359, "user_id": 113316, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4772c3b95b4065144bb7f26dd24eae37?s=128&d=identicon&r=PG", "display_name": "rajeshnair", "link": "https://stackoverflow.com/users/113316/rajeshnair"}, "edited": false, "score": 0, "creation_date": 1551264561, "post_id": 54903131, "comment_id": 96574550, "body": "I did various tries between 5555-5566"}, {"owner": {"reputation": 669, "user_id": 4730143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MdoCSHEG328/AAAAAAAAAAI/AAAAAAAABG4/MkU9k_rS51c/photo.jpg?sz=128", "display_name": "James Harvey", "link": "https://stackoverflow.com/users/4730143/james-harvey"}, "edited": false, "score": 0, "creation_date": 1551349154, "post_id": 54903131, "comment_id": 96611398, "body": "Create a minimal test program, just a <code>main()</code> using zeromq with the bind. See if that has the same issue. Maybe there is some other socket connection (inproc/ipc etc) going on in the program. Either way you will get more help if you can post a minimal example of the issue."}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "edited": false, "score": 0, "creation_date": 1554393961, "post_id": 54903131, "comment_id": 97745386, "body": "Impossible to say without looking at the code."}], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 1892308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137a2ad54fa9e20dd810a7f3f030a311?s=128&d=identicon&r=PG", "display_name": "Istopopoki", "link": "https://stackoverflow.com/users/1892308/istopopoki"}, "is_accepted": true, "score": 0, "last_activity_date": 1554472998, "creation_date": 1554472998, "answer_id": 55537155, "question_id": 54903131, "link": "https://stackoverflow.com/questions/54903131/zmq-error-address-already-in-use-depending-on-user/55537155#55537155", "title": "ZMQ error : address already in use, depending on user", "body": "<p>Question is closed : I just reinstalled everything from scratch, restarted the server and it worked.</p>\n"}], "owner": {"reputation": 1271, "user_id": 1892308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137a2ad54fa9e20dd810a7f3f030a311?s=128&d=identicon&r=PG", "display_name": "Istopopoki", "link": "https://stackoverflow.com/users/1892308/istopopoki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "closed_date": 1554487780, "accepted_answer_id": 55537155, "answer_count": 1, "score": 0, "last_activity_date": 1554472998, "creation_date": 1551262815, "last_edit_date": 1551263007, "question_id": 54903131, "link": "https://stackoverflow.com/questions/54903131/zmq-error-address-already-in-use-depending-on-user", "closed_reason": "Not suitable for this site", "title": "ZMQ error : address already in use, depending on user", "body": "<p>I use ZMQ in a C++ program.</p>\n\n<p>The program compiles successfully, but throws an exception when launched with my <strong>web_admin</strong> user :</p>\n\n<pre><code>terminate called after throwing an instance of 'zmq::error_t'\nwhat():  Address already in use\n</code></pre>\n\n<p>What I really don't understand, is that if I launch the program as root, no error is raised.</p>\n\n<p>The executable has the following permissions :</p>\n\n<pre><code>-rwxr-xr-x 1 web_admin root       487347 f\u00e9vr. 27 00:28 isochrones\n</code></pre>\n\n<p>Also, I have checked using the command :</p>\n\n<pre><code>netstat -ltnp\n</code></pre>\n\n<p>that the corresponding port is <strong>not</strong> in use.</p>\n\n<p>Any idea why launching the program with web_admin fails, but succeeds with root ?</p>\n"}, {"tags": ["c++", "visual-c++", "error-handling", "dump"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1551263113, "post_id": 54903105, "comment_id": 96573561, "body": "Do you compile in release or debug ? <code>_HAS_ITERATOR_DEBUGGING</code> is compiler specific BTW, you would have <code>NDEBUG</code> which is standard (for <code>assert</code>)..."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1551263410, "post_id": 54903105, "comment_id": 96573763, "body": "<i>&quot;the App&#39;s crash-dump feature was prevented by std::unordered_map which tried to show a message-box&quot;</i> &lt;-- this is suspicious."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1551263421, "post_id": 54903105, "comment_id": 96573771, "body": "BTW, UB would not necessary crash (or crash the way expected by your crash-dump)."}, {"owner": {"reputation": 2844, "user_id": 8740349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRL1s.jpg?s=128&g=1", "display_name": "Top-Master", "link": "https://stackoverflow.com/users/8740349/top-master"}, "edited": false, "score": 0, "creation_date": 1551265109, "post_id": 54903105, "comment_id": 96574897, "body": "your guess is right I was compiling in debug mode while trying to fix the issue, but I want to disable any error-dialog even when compiling in debug mode since that is not allowed in Windows-Service anyway..."}, {"owner": {"reputation": 2844, "user_id": 8740349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRL1s.jpg?s=128&g=1", "display_name": "Top-Master", "link": "https://stackoverflow.com/users/8740349/top-master"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551327245, "post_id": 54903105, "comment_id": 96602230, "body": "@Jarod42, I have edited the question, since indeed disabling the error-dialog did just hide the issue from our view (since it did not cause any crash or exception-throw)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551345513, "post_id": 54903105, "comment_id": 96609132, "body": "So you might customize error handler as I suggest in my answer. if you throw from the handler (which is a C-function, you probably need to change also some build option (<code>&#47;EH</code>))."}], "answers": [{"comments": [{"owner": {"reputation": 2844, "user_id": 8740349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRL1s.jpg?s=128&g=1", "display_name": "Top-Master", "link": "https://stackoverflow.com/users/8740349/top-master"}, "edited": false, "score": 0, "creation_date": 1551353327, "post_id": 54904057, "comment_id": 96613995, "body": "thanks, by using <code>_set_invalid_parameter_handler</code> (with a custom-handler which throws an exception) and undoing my changes to <code>_HAS_ITERATOR_DEBUGGING</code> macro, at last the crash-dump does work !!!"}, {"owner": {"reputation": 2844, "user_id": 8740349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRL1s.jpg?s=128&g=1", "display_name": "Top-Master", "link": "https://stackoverflow.com/users/8740349/top-master"}, "edited": false, "score": 0, "creation_date": 1551353508, "post_id": 54904057, "comment_id": 96614108, "body": "at the time that the issue happened we were unable to attach any debugger anyway (so crash-dump was our only option)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1551265943, "last_edit_date": 1551265943, "creation_date": 1551265598, "answer_id": 54904057, "question_id": 54903105, "link": "https://stackoverflow.com/questions/54903105/is-replacing-all-standard-error-dialogs-with-debug-breaks-or-error-throws-possib/54904057#54904057", "title": "Is replacing all standard error-dialogs with debug-breaks or error-throws possible?", "body": "<p>You probably want to use <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/set-invalid-parameter-handler-set-thread-local-invalid-parameter-handler?view=vs-2017\" rel=\"nofollow noreferrer\"><code>_set_invalid_parameter_handler</code></a> to overwrite default handler which terminates the program and displays a runtime error message.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/crtsetreportmode?view=vs-2017\" rel=\"nofollow noreferrer\"><code>_CrtSetReportMode</code></a> is also useful to avoid dialog from <code>_CrtDbgReport</code> (used in several checks).</p>\n"}], "owner": {"reputation": 2844, "user_id": 8740349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FRL1s.jpg?s=128&g=1", "display_name": "Top-Master", "link": "https://stackoverflow.com/users/8740349/top-master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54904057, "answer_count": 1, "score": 1, "last_activity_date": 1551327056, "creation_date": 1551262748, "last_edit_date": 1551327056, "question_id": 54903105, "link": "https://stackoverflow.com/questions/54903105/is-replacing-all-standard-error-dialogs-with-debug-breaks-or-error-throws-possib", "title": "Is replacing all standard error-dialogs with debug-breaks or error-throws possible?", "body": "<p><strong>I would like to replace any standard error-dialog with <code>throw</code> or <code>debug-break</code></strong> (with standard I mean anything which is not explicitly written by me) since like in the reason-section described, it would cause debugging of a Windows-Service sometimes to be impossible.</p>\n\n<p>to accomplish this I did try defining something like:</p>\n\n<pre><code>-D \"_HAS_ITERATOR_DEBUGGING=0\"\n</code></pre>\n\n<p>but above did just disable the error-dialogs and is really not enough to track down the issues, so I would like it to <code>throw-exception</code> or to <code>debug-break</code> instead of showing the error-dialog.</p>\n\n<p>is there anything else you would suggest me to define or do?</p>\n\n<h2>Reason:</h2>\n\n<p>While developing a Windows-Service, I had some hard times to find a bug which was causing the server to crash:</p>\n\n<ul>\n<li>there was an <a href=\"https://en.wikipedia.org/wiki/Off-by-one_error\" rel=\"nofollow noreferrer\">Off-by-one</a> error in <code>std::unordered_map</code> usage</li>\n<li>the App's <a href=\"https://stackoverflow.com/a/54211155/8740349\">crash-dump</a> feature was prevented by <code>std::unordered_map</code> which tried to show an error message-box (since compiled in debug-mode)</li>\n<li>but the program did crash without giving any feedback, basically because a windows-service is not allowed to show any error-dialog (except by using \"<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea\" rel=\"nofollow noreferrer\">WTSSendMessage</a>(...)\")</li>\n<li>even when the debugger was attached, still nothing...</li>\n<li>Only using <code>git</code> history and rechecking all recent changes was it possible to find the issue</li>\n</ul>\n\n<h2>Reproduce:</h2>\n\n<p>by running below in a service (compiled in debug-mode) you can reproduce this issue:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n\n// will cause crash by trying to increment iterator pointing to end\ninline static void simulateCrash() {\n    typedef std::unordered_map&lt;quint32, quint32&gt; Hash;\n    Hash list;\n    list[0xC001] = 0xDEAD;\n    Hash::iterator it = list.begin();\n    it = list.erase(it);\n    ++it; // should crash here\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1551267206, "post_id": 54903008, "comment_id": 96576143, "body": "Some of your lines are wider than 79 characters. Use <code>std::string</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1551268768, "post_id": 54903008, "comment_id": 96577017, "body": "<code>while (!eof)</code> is <a href=\"/q/5605125\">almost always wrong</a>."}, {"owner": {"reputation": 27, "user_id": 10295596, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L29R_CLo0JE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM8XXgXL_fDcnZf7iMs3ZvOxN2yvA/mo/photo.jpg?sz=128", "display_name": "Hoang Son", "link": "https://stackoverflow.com/users/10295596/hoang-son"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1551370665, "post_id": 54903008, "comment_id": 96624496, "body": "@molbdnilo thanks for your help"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10295596, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L29R_CLo0JE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM8XXgXL_fDcnZf7iMs3ZvOxN2yvA/mo/photo.jpg?sz=128", "display_name": "Hoang Son", "link": "https://stackoverflow.com/users/10295596/hoang-son"}, "edited": false, "score": 0, "creation_date": 1551264274, "post_id": 54903313, "comment_id": 96574330, "body": "Thanks for your help . I&#39;ve edited my code but the program still didn&#39;t read correctly my confirugation file. I&#39;ve add my configuration file to my post and I hope you can help me by  solve the  remain problem."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 27, "user_id": 10295596, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L29R_CLo0JE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM8XXgXL_fDcnZf7iMs3ZvOxN2yvA/mo/photo.jpg?sz=128", "display_name": "Hoang Son", "link": "https://stackoverflow.com/users/10295596/hoang-son"}, "edited": false, "score": 0, "creation_date": 1551265317, "post_id": 54903313, "comment_id": 96575023, "body": "@HoangSon What happens that is wrong and what did you expect to happen?"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1551371956, "last_edit_date": 1551371956, "creation_date": 1551263319, "answer_id": 54903313, "question_id": 54903008, "link": "https://stackoverflow.com/questions/54903008/reading-configuration-file-json-in-c-didnt-stop/54903313#54903313", "title": "Reading configuration file json in c++ didn&#39;t stop", "body": "<p>The file name is incorrect</p>\n\n<pre><code>file.open(\"D://New folder//testcase//Project3//conf.json\",ios::in ); \n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>file.open(\"D:/New folder/testcase/Project3/conf.json\",ios::in ); \n</code></pre>\n\n<p>or</p>\n\n<pre><code>file.open(\"D:\\\\New folder\\\\testcase\\\\Project3\\\\conf.json\",ios::in ); \n</code></pre>\n\n<p>And the while loop is incorrect</p>\n\n<pre><code>while (!file.eof())\n{\n    file.getline(a, 80);\n\n    cout &lt;&lt; a &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>while (file.getline(a, 80))\n{\n    cout &lt;&lt; a &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>See here <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a></p>\n\n<p>Finally it's always a good idea to check if a file open succeeded</p>\n\n<pre><code>file.open(\"D:/New folder/testcase/Project3/conf.json\",ios::in ); \nif (!file.is_open())\n{\n    cout &lt;&lt; \"can't open file !!!\\n\";\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10295596, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L29R_CLo0JE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM8XXgXL_fDcnZf7iMs3ZvOxN2yvA/mo/photo.jpg?sz=128", "display_name": "Hoang Son", "link": "https://stackoverflow.com/users/10295596/hoang-son"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 54903313, "answer_count": 1, "score": -1, "last_activity_date": 1551371956, "creation_date": 1551262419, "last_edit_date": 1551263994, "question_id": 54903008, "link": "https://stackoverflow.com/questions/54903008/reading-configuration-file-json-in-c-didnt-stop", "title": "Reading configuration file json in c++ didn&#39;t stop", "body": "<p>Like the title, I'm having some problems with my codes. It seems like the program doesn't stop. I think the problem is c++ couldn't read .json file because I've tested with text file, the program didn't make error, then I test with unexist file and the program loop like when I test with .json file. So I think c++ couldn't read unexist file and seem like .json have the same problem. \nPlease help me. I just begin learnning c++ so if you can solve problem, I hope you can show me why my code is wrong and recommend the solutions. Here my code </p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nvoid main()\n{\n    fstream file; \n    char a[80], b; \n    string c; \n    file.open(\"D://New folder//testcase//Project3//conf.json\",ios::in ); \n    while (!file.eof())\n    {\n        file.getline(a, 80);\n\n        cout &lt;&lt; a &lt;&lt; \"\\n\";\n    }\n    if (file.fail()) cout &lt;&lt; \"Abc\"; \n    file.close();  \n    cin &gt;&gt; b; \n}\n</code></pre>\n\n<p>Here's my configuration file </p>\n\n<pre><code>{\n  \"name\": \"PF182-A01\",\n  \"version\": \"1.0.0\",\n  \"author\": \"Duc Dung Nguyen\",\n  \"email\": \"nddung (at) hcmut.edu.vn\",\n\n  \"WelcomeText\": {\n    \"line1\": \"******************************************************************************\",\n    \"line2\": \"*                  Welcome to CSE-HealthCare System                          *\",\n    \"line3\": \"*     This is a simple application designed for the first assignment of PF   *\",\n    \"line4\": \"* course (CO1011, Semester 182). The student must demonstrate the ability to *\",\n    \"line5\": \"* write a program for a given problem. The student need to analyze the       *\",\n    \"line6\": \"* requirements of the problem before implementing the application.           *\",\n    \"line7\": \"******************************************************************************\",\n    \"line8\": \"Email: nddung@hcmut.edu.vn\",\n    \"line9\": \"(c) 2019 Duc Dung Nguyen All Rights Reserved.\"\n  },\n  \"Menu\": {\n    \"opt1\": \"Introduction\",\n    \"opt2\": \"Login\",\n    \"opt3\": \"Registration\",\n    \"opt4\": \"Help\",\n    \"opt5\": \"Exit\"\n  },\n  \"IntroTime\": 3,\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "design-patterns", "vector", "dry"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1551262470, "post_id": 54902983, "comment_id": 96573141, "body": "How about a container wrapping <code>vector&lt;vector&lt; &gt;&gt;</code>? Or maybe just use some existing matrix classes?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1551262583, "post_id": 54902983, "comment_id": 96573211, "body": "Yep, don&#39;t reinvent the wheel. Also all matrix libraries use contiguous arrays."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551262621, "post_id": 54902983, "comment_id": 96573238, "body": "Remember that array indexing is just pointer arithmetic. And that an array of arrays is really just a single large contiguous area of memory. You can create this large area yourself (using e.g. a <code>std::vector</code>) and do your own arithmetic to get the correct cell in that area. There are plenty of examples all over the Internet if you just search a little, but also easy to figure out yourself using just pen and paper."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1551262952, "post_id": 54902983, "comment_id": 96573439, "body": "@VTT, <code>vector&lt;vector&lt;T&gt;&gt;</code> wouldn&#39;t work because we don&#39;t have a single type <code>T</code>. And <code>vector</code> of some structure with my rows would be too slow, even with a custom allocator. Also because I need rows to lay in continuous memory, while a structure would interleave the columns of a row."}, {"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 0, "creation_date": 1551264455, "post_id": 54902983, "comment_id": 96574460, "body": "@SergeRogatch What about using <code>std::vector&lt;std:variant&gt;</code> ? This would account for the different types. You just need to write nice access function. Thus, you have a contiguous memory layout and different type are possible."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9400869"}, "edited": false, "score": 0, "creation_date": 1551265917, "post_id": 54902983, "comment_id": 96575361, "body": "The number and types of rows are fixed? maybe a <code>std::tuple</code> is the structure you are looking for. <code>std::tuple&lt;__m256d*,__m256i*,uint64_t *, uint8_t *&gt; _pRows</code>. Then you would need some template magic and can iterate over the tuple at compile-time."}, {"owner": {"reputation": 1595, "user_id": 1119161, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4941b50fab94bddbe63b102f2c79d2da?s=128&d=identicon&r=PG", "display_name": "dsp_user", "link": "https://stackoverflow.com/users/1119161/dsp-user"}, "edited": false, "score": 0, "creation_date": 1551266778, "post_id": 54902983, "comment_id": 96575881, "body": "@Serge Rogatch, seems to me that a factory pattern would be more appropriate here (not templated allocate/reallocate)"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551262327, "creation_date": 1551262327, "question_id": 54902983, "link": "https://stackoverflow.com/questions/54902983/efficient-multi-row-vector", "title": "Efficient multi-row vector", "body": "<p>I need an efficient implementation of a vector with multiple rows, each having the same number of columns, which is not too ugly in C++. Currently I have the following:</p>\n\n<pre><code>class BaseVector {\nprotected: // variables\n  int64_t _capacity;\n  int64_t _nColumns;\n\nprotected:\n  template&lt;typename taItem&gt; void Allocate(taItem * &amp;p, const int64_t nItems) {\n    p = static_cast&lt;taItem*&gt;(MemPool::Instance().Acquire(sizeof(taItem)*nItems));\n    if (p == nullptr) {\n      __debugbreak();\n    }\n  }\n  template&lt;typename taItem&gt; void Reallocate(taItem * &amp;p, const int64_t newCap) {\n    taItem *np;\n    Allocate(np, newCap);\n    Utils::AlignedNocachingCopy(np, p, _nColumns * sizeof(taItem));\n    MemPool::Instance().Release(p, _capacity * sizeof(taItem));\n    p = np;\n  }\n  // Etc for Release() operation\n\npublic:\n  explicit BaseVector(const int64_t initCap) : _capacity(initCap), _nColumns(0) { }\n  void Clear() { _nColumns = 0; }\n  int64_t Size() const { return _nColumns; }\n};\n\nclass DerivedVector : public BaseVector {\n    __m256d *_pRowA;\n    __m256i *_pRowB;\n    uint64_t *_pRowC;\n    uint8_t *_pRowD;\n    // Etc. for other rows\npublic:\n    DerivedVector(const int64_t nColumns) : BaseVector(nColumns) {\n        Allocate(_pRowA, nColumns);\n        Allocate(_pRowB, nColumns);\n        Allocate(_pRowC, nColumns);\n        Allocate(_pRowD, nColumns);\n        // Etc. for the other rows\n    }\n    void IncSize() {\n        if(_nColumns &gt;= _capacity) {\n            const int64_t newCap = _capacity + (_capacity &gt;&gt; 1) + 1;\n            Reallocate(_pRowA, newCap);\n            Reallocate(_pRowB, newCap);\n            Reallocate(_pRowC, newCap);\n            Reallocate(_pRowD, newCap);\n            // Etc. for other rows\n            _capacity = newCap;\n        }\n        _nColumns++; \n    }\n    ~DerivedVector() {\n        // Call here the Release() operation for all rows\n    }\n};\n</code></pre>\n\n<p>The problem with this approach is that there can be 30 rows, so I have to type manually (and repeat myself) 30 times <code>Allocate</code>, 30 times <code>Reallocate</code>, 30 times <code>Release</code>, etc.</p>\n\n<p>So is there a way in C++ to keep this code DRY and fast? I am ok with macros, but not heavy polymorphism in each access to a cell in the vector because this would kill performance.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1551262012, "post_id": 54902816, "comment_id": 96572823, "body": "where do you <code>free</code> the <code>result </code>?"}, {"owner": {"reputation": 4465, "user_id": 4093378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-fQvO8M4nxAQ/AAAAAAAAAAI/AAAAAAAAB-E/YauVVLfKB5U/photo.jpg?sz=128", "display_name": "Indiana Kernick", "link": "https://stackoverflow.com/users/4093378/indiana-kernick"}, "edited": false, "score": 1, "creation_date": 1551262248, "post_id": 54902816, "comment_id": 96572988, "body": "Really should be using <code>char result[32]</code> instead"}, {"owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1551262253, "post_id": 54902816, "comment_id": 96572991, "body": "@Blaze Never, and doing so fixes my issue. Having read up on <code>free</code> I understand why now. I&#39;m coming mainly from a Python background so this is all new to me. Cheers"}, {"owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "reply_to_user": {"reputation": 4465, "user_id": 4093378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-fQvO8M4nxAQ/AAAAAAAAAAI/AAAAAAAAB-E/YauVVLfKB5U/photo.jpg?sz=128", "display_name": "Indiana Kernick", "link": "https://stackoverflow.com/users/4093378/indiana-kernick"}, "edited": false, "score": 0, "creation_date": 1551262444, "post_id": 54902816, "comment_id": 96573123, "body": "@Kerndog73 what are the pros and cons of using <code>malloc</code> vs <code>char result[]</code>?"}, {"owner": {"reputation": 4465, "user_id": 4093378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-fQvO8M4nxAQ/AAAAAAAAAAI/AAAAAAAAB-E/YauVVLfKB5U/photo.jpg?sz=128", "display_name": "Indiana Kernick", "link": "https://stackoverflow.com/users/4093378/indiana-kernick"}, "edited": false, "score": 1, "creation_date": 1551262492, "post_id": 54902816, "comment_id": 96573153, "body": "@AdamMitchell Maybe I&#39;ll write an answer"}], "answers": [{"comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1551290863, "post_id": 54903362, "comment_id": 96590364, "body": "Plz add that he should check if malloc() == NULL"}], "tags": [], "owner": {"reputation": 4465, "user_id": 4093378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-fQvO8M4nxAQ/AAAAAAAAAAI/AAAAAAAAB-E/YauVVLfKB5U/photo.jpg?sz=128", "display_name": "Indiana Kernick", "link": "https://stackoverflow.com/users/4093378/indiana-kernick"}, "is_accepted": true, "score": 4, "last_activity_date": 1551263482, "creation_date": 1551263482, "answer_id": 54903362, "question_id": 54902816, "link": "https://stackoverflow.com/questions/54902816/arduino-seems-to-crash-when-uint32-t-45/54903362#54903362", "title": "Arduino seems to crash when uint32_t &gt; 45", "body": "<p>Each time <code>loop</code> is called, 32 bytes of memory is allocated. An Arduino Uno doesn't have much memory so it quickly runs out. You need to deallocate the memory when you're finished using. Here's an analogy.</p>\n\n<p>RAM is a piece of string. This string has a fixed length. You can cut off a piece of this string and use it for whatever you like. This is allocation. If you keep cutting of 32 bytes from your string you'll eventually run out. You need to tape the piece of string back onto the main string when you're finished using it. This is deallocation.</p>\n\n<p>That was a pretty crappy analogy but I hope you got the idea! To solve the immediate problem you can simply append <code>free(result)</code> to the end of the function to deallocate every time you allocate. To really solve the problem properly, you should allocate on the stack instead of the heap. When you allocate on the stack, the memory is automatically deallocated at the end of the scope. To allocate 32 bytes on the stack, you would simply do this:</p>\n\n<pre><code>char result[32];\n</code></pre>\n\n<p>The memory in <code>result</code> is only valid within it's enclosing scope (the <code>loop</code> function). The above snippet is basically equivalent to this:</p>\n\n<pre><code>char result_0;\nchar result_1;\nchar result_2;\n// ...\nchar result_29;\nchar result_30;\nchar result_31;\n</code></pre>\n\n<p>Stack allocation is much faster than heap allocation (<code>malloc</code> and <code>free</code>) because the compiler knows exactly how much memory you're using. This has its downsides though. In order to stack allocate memory, the compiler needs to know how much memory you're using! You can't do this:</p>\n\n<pre><code>int size = get_a_number_from_somewhere();\nchar result[size];\n</code></pre>\n\n<p>because the compiler doesn't know how much memory to allocate. This however:</p>\n\n<pre><code>int size = get_a_number_from_somewhere();\nchar *result = malloc(size);\n// ...\nfree(result);\n</code></pre>\n\n<p>is totally fine.</p>\n\n<p>In general, you should stack allocate when the amount of memory you need is a compile-time constant (e.g. <code>32</code>) and heap allocate otherwise. Every time you write <code>malloc</code>, think carefully about where the corresponding <code>free</code> should go.</p>\n"}, {"tags": [], "owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "is_accepted": false, "score": 1, "last_activity_date": 1551289715, "last_edit_date": 1551289715, "creation_date": 1551265100, "answer_id": 54903894, "question_id": 54902816, "link": "https://stackoverflow.com/questions/54902816/arduino-seems-to-crash-when-uint32-t-45/54903894#54903894", "title": "Arduino seems to crash when uint32_t &gt; 45", "body": "<p>malloc() is allowed, but not very useful on an Arduino with very limited RAM.</p>\n\n<p>An Arduino does not have an operating system, which could interfere if there's not enough memory to allocate. (And what should it do, anyway, to keep the Arduino running forever?)</p>\n\n<p>If you have a Java background, avoid the <code>new</code> keyword as well, which causes the same issues. </p>\n\n<p>If you need memory, get it as early as possible (best at compile time) and keep it.</p>\n\n<p><em>Of course, the <code>free(result)</code> response is correct as well.</em></p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 0, "creation_date": 1551289587, "post_id": 54905077, "comment_id": 96589751, "body": "Why use String ? <code>Serial.print(counter);</code> does exactly what you want."}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "reply_to_user": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 0, "creation_date": 1551289831, "post_id": 54905077, "comment_id": 96589874, "body": "I do no... Why are he using a char? My point was, he don&#39;t need use char he could use string =p"}], "tags": [], "owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "is_accepted": false, "score": 0, "last_activity_date": 1551269034, "creation_date": 1551269034, "answer_id": 54905077, "question_id": 54902816, "link": "https://stackoverflow.com/questions/54902816/arduino-seems-to-crash-when-uint32-t-45/54905077#54905077", "title": "Arduino seems to crash when uint32_t &gt; 45", "body": "<p>Why you don't use <code>String()</code>, like the code bellow:</p>\n\n<pre><code>uint32_t counter = 0;\n\nvoid setup() {\n    Serial.begin(9600);\n    while(!Serial);\n}\n\nvoid loop() {\n\n    Serial.print(\"{\\\"n\\\": \");\n    Serial.print(String(counter));\n    Serial.println(\" }\");\n\n    delay(100);\n    counter++;\n}\n</code></pre>\n"}], "owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 54903362, "answer_count": 3, "score": 3, "last_activity_date": 1551289715, "creation_date": 1551261862, "question_id": 54902816, "link": "https://stackoverflow.com/questions/54902816/arduino-seems-to-crash-when-uint32-t-45", "title": "Arduino seems to crash when uint32_t &gt; 45", "body": "<p>I have the below program running on an Uno clone. </p>\n\n<pre><code>uint32_t counter = 0;\n\nvoid setup() {\n    Serial.begin(9600);\n    while(!Serial);\n}\n\nvoid loop() {\n    char *result = malloc(32);\n    sprintf(result, \"%024u\", counter);\n\n    Serial.print(\"{\\\"n\\\": \");\n    Serial.print(result);\n    Serial.println(\" }\");\n\n    delay(100);\n    counter++;\n}\n</code></pre>\n\n<p>Everything works fine and the string is printed and counter incremented as expected. Below is an example of the output:</p>\n\n<pre><code>{\"n\": 000000000000000000000000 }\n{\"n\": 000000000000000000000001 }\n{\"n\": 000000000000000000000002 }\n{\"n\": 000000000000000000000003 }\n....\n</code></pre>\n\n<p>However, every time that <code>counter &gt; 45</code>, the program stops printing over UART, here's what the output looks like at this point:</p>\n\n<pre><code>{\"n\": 000000000000000000000044 }\n{\"n\": 000000000000000000000045 }\n{\"n\":  }\n</code></pre>\n\n<p>Any insight as to what could be causing this issue is greatly appreciated.</p>\n"}, {"tags": ["c++", "c", "printf"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551260972, "post_id": 54902438, "comment_id": 96572185, "body": "Why the cast to <code>char*</code> and the use of <code>%s</code>? Are you saying that <code>ID</code> holds string data really even though it is declared as <code>uint64_t[10]</code>?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261274, "post_id": 54902438, "comment_id": 96572378, "body": "<code>using sprintf.</code> - The data are numbers between 0 and 2^64 - 1. In what <i>format</i> do you want to store the data? As a string representing a binary number? As a string with a base 10 number? As a string with a hexadecimal number? As a string with a octal numbers? Or do you want to copy the bytes that consist of the number exactly into other memory address?"}, {"owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "edited": false, "score": 0, "creation_date": 1551261322, "post_id": 54902438, "comment_id": 96572401, "body": "ID is set from my app, so if I set ID as Hello from my app, ID will look like -   ID[0]=&#39;H&#39;, ID[1] = &#39;e&#39;,ID[2] = &#39;l&#39;, ID[3] = &#39;l&#39;, ID[4] = &#39;0&#39;; each of them is index is unsigned long long"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1551261624, "post_id": 54902438, "comment_id": 96572583, "body": "@blazingcannon This information should be in the question. It&#39;s vital to understand what you want to do."}, {"owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261648, "post_id": 54902438, "comment_id": 96572594, "body": "@KamilCuk - Like I&#39;ve given an example above, I just want Hello to get appended to my dispvar as characters."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1551261648, "post_id": 54902438, "comment_id": 96572596, "body": "Can you give example input and example output? As in <code>ID[0] = 48, ID[1] = 49, ID[3] = 50</code> and <code>dispvar=&quot;123&quot;</code> ? <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ascii table</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551261993, "post_id": 54902438, "comment_id": 96572818, "body": "The whole point of using sprintf is for it to do the string conversion. If the data was in string format in the first place, you wouldn&#39;t need it. Thus the <code>%s</code> format specifier and the <code>char*</code> cast is nonsense. The correct format specifier to use for printing uint64_t is <code>&quot;%&quot;PRIu64</code> from inttypes.h."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1551262157, "post_id": 54902438, "comment_id": 96572930, "body": "@Lundin But (for some unknown reason) the OP really does have character data in the ID array"}, {"owner": {"reputation": 1317, "user_id": 545546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce09f7d092cbe5f4cdf3977c736eac81?s=128&d=identicon&r=PG", "display_name": "sdkljhdf hda", "link": "https://stackoverflow.com/users/545546/sdkljhdf-hda"}, "edited": false, "score": 0, "creation_date": 1551264131, "post_id": 54902438, "comment_id": 96574222, "body": "<code>auto p = dispvar + sprintf(dispvar, &quot;\\n Device ID is &quot;); std::copy(std::begin(ID), std::end(ID), p);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1551261725, "creation_date": 1551261725, "answer_id": 54902768, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char/54902768#54902768", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>The ID values apparently contain character data with a terminating zero, at least that's what I'm assuming below.</p>\n\n<pre><code>char buffer[11];\nfor (int i = 0; i &lt; 10; ++i)\n    buffer[i] = ID[i];\nbuffer[10] = '\\0';\nsprintf(dispvar,\"\\n Device ID is %s\", buffer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1551262207, "post_id": 54902857, "comment_id": 96572962, "body": "The <code>if (ID[i] == &#39;\\0&#39;)</code> shouldn&#39;t be necessary. If it was, you should iterate <code>while(ID[i] != &#39;\\0&#39;)</code> instead."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1551261977, "creation_date": 1551261977, "answer_id": 54902857, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char/54902857#54902857", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>There is a little need for conversion, because the data are stored in <code>uint64_t</code> array.</p>\n\n<pre><code>// first populate the dispvar with initial string\nint idx = sprintf(dispvar, \"\\n Device ID is \");\n\n// we have the array\nuint64_t ID[10] = { 'H', 'e', 'l', 'l', 'o', '\\0' };\n// for each element in ID\nfor (size_t i = 0; i &lt; sizeof(ID)/sizeof(*ID); ++i) {\n      // assert(isprint(ID[i])); // extra assertion\n      // we put the ID[i] into our dispvar\n      dispvar[idx++] = ID[i];\n      // null terminte character is also copied. We need to break.\n      if (ID[i] == '\\0') {\n           break;\n      }\n}\n\n// should work as expected\nprintf(\"%s\\n\", dispvar);\n</code></pre>\n\n<p>There is no way you could do this using <code>sprintf</code>. You also can copy the array into a char buffer manually and then call <code>sprintf</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 10083150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e42245d85c73dca35779b6446beae2d?s=128&d=identicon&r=PG&f=1", "display_name": "blazingcannon", "link": "https://stackoverflow.com/users/10083150/blazingcannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 54902857, "answer_count": 2, "score": 0, "last_activity_date": 1551439468, "creation_date": 1551260833, "last_edit_date": 1551439468, "question_id": 54902438, "link": "https://stackoverflow.com/questions/54902438/how-to-use-sprintf-to-append-array-of-uint-64-type-to-an-array-of-char", "title": "How to use sprintf to append array of uint_64 type to an array of char?", "body": "<p>I want to append the data in <code>ID[10]</code> to <code>dispvar</code> using sprintf. But the problem is that ID is of <code>uint64_t</code> type and <code>dispvar</code> is of type <code>char</code>. So when I try the below code, I get only the first value stored in <code>ID</code> appended to <code>dispvar</code>. How can I append the entire content of <code>ID</code> to <code>dispvar</code>? </p>\n\n<pre><code>char dispvar[150]={0};\n\nunion Device_Details{\n    struct DeviceDetails{\n        uint64_t FirmwareID[10];\n        uint64_t No_of_Mot;\n        uint64_t ID[10];\n        uint64_t RTC_Data[7];\n        uint64_t BatStat;       \n    }Device;\n    uint64_t Buffer[11];\n}DeviceData;\n\nsprintf(dispvar,\"\\n Device ID is %s\", ( char *)ID);\n</code></pre>\n\n<p>ID is set from my app, so if I set ID as Hello from my app, ID will look like - ID[0]='H',ID[1] = 'e',ID[2] = 'l', ID[3] = 'l', ID[4] = '0'; each of them is index of unsigned long long type.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZkReg.jpg\" rel=\"nofollow noreferrer\">IMAGE</a></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 3, "creation_date": 1551261236, "post_id": 54902254, "comment_id": 96572355, "body": "The constructor <code>LineTrend(QWidget *parent);</code> or the call <code>LineTrend::editHtmlFile</code> but because you did not post what is in them, I cannot be more precise."}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1551262197, "post_id": 54902254, "comment_id": 96572956, "body": "The member functions in the derived class don&#39;t need to be virtual - unless the derived class is a base of another class, in which case its&#39; dtor should also be virtual. Also, if you wanted to utilize polymorphism, shouldn&#39;t you create the object like this: <code>TrendConfig *foo = new LineTrend(this)</code>. Might as well switch to smart pointers. But I agree with @Quimby, that we need more details to figure out what&#39;s going on. I guess you could comment out line by line the body of the ctor and see where the problem is."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1551262795, "post_id": 54902254, "comment_id": 96573344, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, something in your code is taking time, what it is we can&#39;t tell without seeing it"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551271031, "post_id": 54902254, "comment_id": 96578327, "body": "It&#39;s plausible 8s is just how long it takes to do all the requisite processing"}], "owner": {"reputation": 15, "user_id": 9717442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d869eb704e43d1baf18622a500c478?s=128&d=identicon&r=PG&f=1", "display_name": "Aplues", "link": "https://stackoverflow.com/users/9717442/aplues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551314214, "creation_date": 1551260315, "last_edit_date": 1551282488, "question_id": 54902254, "link": "https://stackoverflow.com/questions/54902254/new-a-object-takes-a-lot-of-time", "title": "new a object takes a lot of time", "body": "<p>I needed to implement an interface software, but there was a bad lag after clicking a button.After investigation, the problem was found in this step.\nI am trying new a object but this step takes About 8000 milliseconds.</p>\n\n<pre><code>LineTrend *lineTrend = new LineTrend(this);\nstrFileData = lineTrend-&gt;editHtmlFile(ui, strFileData);\n</code></pre>\n\n<p>The code for this class</p>\n\n<pre><code>#include \"TrendConfig.h\"\n#include &lt;QMessageBox&gt;\n\nclass LineTrend : public TrendConfig\n{\n    Q_OBJECT\n\npublic:\n    LineTrend(QWidget *parent);\n    ~LineTrend();\n\npublic:\n    virtual QString editHtmlFile(const Ui::TrendConfigClass &amp;ui, QString &amp;strFileData);\n    virtual QString editHtmlTemplateFile(const Ui::TrendConfigClass &amp;ui);\n    virtual QString editHtmlTemplateFile(const Ui::TrendConfigClass &amp;ui, QTreeWidgetItem *itemPre);\n\n};\n</code></pre>\n\n<p>This is part of the base class code</p>\n\n<pre><code>class TrendConfig : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    TrendConfig(QWidget *parent = Q_NULLPTR);\n    virtual ~TrendConfig();\n\n    virtual QString editHtmlFile(const Ui::TrendConfigClass &amp;ui, QString &amp;strFileData) { return NULL;};\n    virtual QString editHtmlTemplateFile(const Ui::TrendConfigClass &amp;ui){ return NULL;};\n    virtual QString editHtmlTemplateFile(const Ui::TrendConfigClass &amp;ui,QTreeWidgetItem *itemPre){ return NULL;};\n}\n</code></pre>\n\n<p>The implementation function looks like this</p>\n\n<pre><code>LineTrend::LineTrend(QWidget *parent)\n    : TrendConfig(parent)\n{\n}\n\nLineTrend::~LineTrend()\n{\n}\n\nQString LineTrend::editHtmlFile(const Ui::TrendConfigClass &amp;ui, QString &amp;strFileData)\n{\n    //\u83b7\u5f97\u8d8b\u52bf\u7ec4\u540d\u5e76\u66ff\u6362\n    QTreeWidgetItem *item = ui.trendWidget-&gt;currentItem();\n    if (item != NULL)\n    {\n        QString strQtTrendGroupName = item-&gt;text(0);\n        strFileData.replace(\"trendGroup\", strQtTrendGroupName);\n\n        //\u751f\u6210\u968f\u673a\u6570\u636e\n        QString strQtTrendData;\n\n        QTreeWidgetItemIterator it(ui.listWidget);\n        while (*it)\n        {\n            QString strQtAppendTrendData = QString(\"{ data: [%1, %2, %3, %4, %5, %6, %7],type: 'line'},\")\n                .arg(qrand()).arg(qrand()).arg(qrand()).arg(qrand()).arg(qrand()).arg(qrand()).arg(qrand());\n            strQtTrendData.append(strQtAppendTrendData);\n            it++;\n        }\n\n        //\u53bb\u6389\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\n        strQtTrendData = strQtTrendData.left(strQtTrendData.length() - 1);\n\n        //\u66ff\u6362\u8d8b\u52bf\u6570\u636e\n        strFileData.replace(\"trendData\", strQtTrendData);\n\n        return strFileData;\n    }\n    else\n    {\n        QMessageBox::information(this, GBK::ToUnicode(\"\u4fe1\u606f\u63d0\u793a\"), GBK::ToUnicode(\"\u8bf7\u9009\u62e9\u8d8b\u52bf\u7ec4\u9009\u9879\uff0c\u5426\u5219\u65e0\u6cd5\u8fdb\u884c\u9884\u89c8\"));\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>What causes that new a object taks so much time.and how can it be improved\uff1fthanks</p>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1551260676, "post_id": 54902245, "comment_id": 96571966, "body": "You do not need to <code>ofs.close()</code> manually. The destructor of <code>std::*fstream</code> closes the linked file automatically."}, {"owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1551261932, "post_id": 54902245, "comment_id": 96572776, "body": "I see, thank you @L. F."}], "answers": [{"comments": [{"owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "edited": false, "score": 0, "creation_date": 1551262136, "post_id": 54902315, "comment_id": 96572909, "body": "Thank you.I have already check std::basic_ios, I don&#39;t feel really comfortable using this right now but I work on it."}, {"owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "edited": false, "score": 0, "creation_date": 1551262980, "post_id": 54902315, "comment_id": 96573463, "body": "I also believe that you info will help me to sort it out so it&#39;s marked like Solved.However if someone has any ideas, I&#39;ll be happy to review them."}, {"owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "edited": false, "score": 0, "creation_date": 1551263186, "post_id": 54902315, "comment_id": 96573608, "body": "Just for reference I copy this here, it might be useful as well <a href=\"https://stackoverflow.com/questions/41564040/evaluating-stream-operator-as-boolean\" title=\"evaluating stream operator as boolean\">stackoverflow.com/questions/41564040/&hellip;</a>"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1551263112, "last_edit_date": 1551263112, "creation_date": 1551260514, "answer_id": 54902315, "question_id": 54902245, "link": "https://stackoverflow.com/questions/54902245/check-the-copy-of-contents-into-a-file-when-using-stdofstream/54902315#54902315", "title": "Check the copy of contents into a file when using std:ofstream", "body": "<p>Many operations on a stream, including the <code>&lt;&lt;</code> operators (in your case the non-member <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\"><code>operator&lt;&lt;</code> function</a>), returns the stream itself. And the stream objects have <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">a boolean conversion operator</a> that you can use in a condition to check if the stream is in a <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/good\" rel=\"nofollow noreferrer\">good state</a> or not.</p>\n\n<p>For example like</p>\n\n<pre><code>if (ofs &lt;&lt; \" more lorem ipsum\")\n{\n    // Output operation okay\n}\n</code></pre>\n\n<p>This is most commonly used for input.</p>\n\n<hr>\n\n<p>There's also the possibility to <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/exceptions\" rel=\"nofollow noreferrer\">set an exception mask</a> which will cause the streams to throw exceptions on specific states.</p>\n\n<p>Exceptions are disabled by default.</p>\n"}], "owner": {"reputation": 849, "user_id": 4086095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CMn9X.jpg?s=128&g=1", "display_name": "Tsakiroglou Fotis", "link": "https://stackoverflow.com/users/4086095/tsakiroglou-fotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 54902315, "answer_count": 1, "score": 2, "last_activity_date": 1551263112, "creation_date": 1551260288, "question_id": 54902245, "link": "https://stackoverflow.com/questions/54902245/check-the-copy-of-contents-into-a-file-when-using-stdofstream", "title": "Check the copy of contents into a file when using std:ofstream", "body": "<p>I am trying to update some code and change a fopen() file operation with std:ofstream.During an fopen file operation fputs() is used to write contents into a fail.Checking the return of fputs ::(<code>fputs() return a nonnegative number on success, or EOF on error</code>). I need to check the copy of contents into the file. </p>\n\n<p>This example is taken from  : <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/open/\" rel=\"nofollow noreferrer\">cplusplus.com</a></p>\n\n<pre><code>// ofstream::open / ofstream::close\n#include &lt;fstream&gt;      // std::ofstream\n\n\n\nint main () {\n\n  std::ofstream ofs;\n  ofs.open (\"test.txt\", std::ofstream::out | std::ofstream::app);\n\n  ofs &lt;&lt; \" more lorem ipsum\";\n\n  ofs.close();\n\n  return 0;\n}\n</code></pre>\n\n<p>I am trying to find a way to check <code>ofs &lt;&lt; \" more lorem ipsum\";</code> operation.Is there any kind of return of this operation?Does this throws something?</p>\n\n<p>Warmest Regards.</p>\n"}, {"tags": ["c++", "qt", "opengl", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551271357, "post_id": 54902244, "comment_id": 96578521, "body": "Ok, your code from Github didn&#39;t compile due to some error so I can only assume what it do. So ... don&#39;t you have to set <code>QQuickItem::ItemHasContents</code> to be sure that your item will be rendered by the scene graph? Why don&#39;t you follow the Qt recommendation: <i>The best rule of thumb is to only use classes with the &quot;QSG&quot; prefix inside the QQuickItem::updatePaintNode() function</i>? And I really can&#39;t find a code where you refer to the item size inside the <code>update()</code> function. And I&#39;m not sure that matrix contains the item size ... did you check what <code>getModelMatrix()</code> returns?"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551280787, "post_id": 54902244, "comment_id": 96584415, "body": "@folibis I don&#39;t have any idea of what QSG means and how to use it. Do you have an article of some sort? I also didn&#39;t know about updatePaintNode and ItemHasContents, I was using the signal <code>afterRendering</code>. If you tell me which error you had, I&#39;ll fix it. Also, yes, the rendering works. I also don&#39;t know how or if the matrix contain the item size, that&#39;s one thing I was expecting to be answered. Thank you so much!"}, {"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551298438, "post_id": 54902244, "comment_id": 96593838, "body": "The simple example there is in Qtquickltem <a href=\"https://doc.qt.io/qt-5/qquickitem.html#updatePaintNode\" rel=\"nofollow noreferrer\">docs</a>. That&#39;s the common way to create visual items in QtQuick. The transform matrix doesn&#39;t contain the item size, but only transform types line Rotation, Scale etc. You have to rely on the width() and height() to get the item size."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1551305732, "post_id": 54902244, "comment_id": 96596990, "body": "@folibis I don&#39;t understand this example I&#39;d need a more complete one to look. This doesn&#39;t look like it&#39;s rendering OpenGL. Anyways, what is the transform() function for QQuickItem then? It gets transformations for what, exactly?"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 1373559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/527b0f906285a792f832846d6160a364?s=128&d=identicon&r=PG", "display_name": "step_jac", "link": "https://stackoverflow.com/users/1373559/step-jac"}, "is_accepted": false, "score": 1, "last_activity_date": 1551728486, "last_edit_date": 1551728486, "creation_date": 1551727630, "answer_id": 54990246, "question_id": 54902244, "link": "https://stackoverflow.com/questions/54902244/how-to-make-my-opengl-video-have-the-same-size-and-position-of-my-qquickitem/54990246#54990246", "title": "How to make my OpenGL video have the same size and position of my QQuickItem?", "body": "<p>Given that you are outputting Normalized Device coordinates, you should just need to set glViewPort and scissor test to the item's x(), y(), width(), height() (no transform needed on vertices). As far as the green you are seeing, this is because none of your YUV textyres have actual data. As a result, in your pixel shader yuv contains (0, -0.5, -0.5) which when transformed by your YUV to RGB matrix yields rgb(0.0, 0.487625, -1.016055) which is a half intensity green.</p>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "edited": false, "score": 0, "creation_date": 1551982768, "post_id": 54990481, "comment_id": 96850734, "body": "why glViewport is useful for debugging?"}, {"owner": {"reputation": 81, "user_id": 4989895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xplo7.jpg?s=128&g=1", "display_name": "Ramin Zaghi", "link": "https://stackoverflow.com/users/4989895/ramin-zaghi"}, "reply_to_user": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "edited": false, "score": 0, "creation_date": 1551999402, "post_id": 54990481, "comment_id": 96857767, "body": "glViewport() together with glClear() is useful only in the sense that it can help to see/test the regions that must or must not be cleared. It can help distinguish between window, garbage and cleared regions. Just a good starting point for development in my opinion. That\u2019s all."}], "tags": [], "owner": {"reputation": 81, "user_id": 4989895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xplo7.jpg?s=128&g=1", "display_name": "Ramin Zaghi", "link": "https://stackoverflow.com/users/4989895/ramin-zaghi"}, "is_accepted": true, "score": 1, "last_activity_date": 1551728717, "creation_date": 1551728717, "answer_id": 54990481, "question_id": 54902244, "link": "https://stackoverflow.com/questions/54902244/how-to-make-my-opengl-video-have-the-same-size-and-position-of-my-qquickitem/54990481#54990481", "title": "How to make my OpenGL video have the same size and position of my QQuickItem?", "body": "<p>From your question and your code it is a little unclear what you were \"expecting\" to see but I do see a few issues which might help you:</p>\n\n<ol>\n<li><p>I don't think your render loop is actually called. You must do this in your constructor: <code>setFlag(ItemHasContents);</code></p></li>\n<li><p>Make sure you do pass some texture/video data into your <code>glTexImage2D()</code> calls otherwise you will get some garbage (random green garbage?)</p></li>\n<li><p>You may want to have a look at <code>QQuickItem::widthChanged</code> and <code>QQuickItem::heightChanged</code> signals</p></li>\n<li><p>Make sure you have that <code>glViewport()</code> as well as <code>glClear()</code> calls when debugging to avoid confusions - you can delete them later when you don't need them anymore</p></li>\n</ol>\n"}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 54990481, "answer_count": 2, "score": 0, "last_activity_date": 1551728717, "creation_date": 1551260278, "question_id": 54902244, "link": "https://stackoverflow.com/questions/54902244/how-to-make-my-opengl-video-have-the-same-size-and-position-of-my-qquickitem", "title": "How to make my OpenGL video have the same size and position of my QQuickItem?", "body": "<p>Following my latest question: <a href=\"https://stackoverflow.com/questions/54872975/my-opengl-qquickitem-wont-have-the-size-i-want\">My OpenGL QQuickItem won&#39;t have the size I want</a>, I'm now trying,, instead of having an arbitrary size for my OpenGL video,  to fit it inside my QQuickItem. </p>\n\n<p>I've heard that <code>QQuickItem::transform()</code> will give me a list of transformation matrices. I'm <strong>assuming</strong> that this list contains all the transformations needed to arrive at a square the size and position of my QQuickItem. &lt;&lt;&lt;&lt; Is this true? If so, the transformations are from what coordinates and viewport dimensions?</p>\n\n<p>Given that as true, I've made the following minimal verifiable and compilable example that tries to make the green screen fit into the size of my QQuickItem. But currently, it just takes the entire screen.</p>\n\n<p>I used the function <code>getModelMatrix()</code> that you can find below, to get all the transformations and make a matrix out of it. Then I apply these transformations to my vertex shader by doing </p>\n\n<pre><code>gl_Position = u_transform * vertexIn;\n</code></pre>\n\n<p>As I said, the result is a green screen. However, it has the same dimensions of my window, instead of having the dimensions 640x480 and x,y=0, as specified in <code>main.qml</code></p>\n\n<p>You can find a minimal compilable and verifiable example here: <a href=\"https://github.com/lucaszanella/openglqtquickexample/tree/88fe0092d663dd92c551c72acccd0bf058fe7e5b\" rel=\"nofollow noreferrer\">https://github.com/lucaszanella/openglqtquickexample/tree/88fe0092d663dd92c551c72acccd0bf058fe7e5b</a></p>\n\n<p><strong>OpenGlVideoQtQuick.cpp:</strong></p>\n\n<pre><code>#include \"OpenGlVideoQtQuick.h\"\n\n#define GET_STR(x) #x\n#define A_VER 3\n#define T_VER 4\n\n//Simple shader. Outpus the same location as input, I guess\nconst char *vString2 = GET_STR(\n    attribute vec4 vertexIn;\n    attribute vec2 textureIn;\n    varying vec2 textureOut;\n    uniform mat4 u_transform;   \n    void main(void)\n    {\n        gl_Position = u_transform * vertexIn;\n        textureOut = textureIn;\n    }\n);\n\nconst char *tString2 = GET_STR(\n    varying vec2 textureOut;\n    uniform sampler2D tex_y;\n    uniform sampler2D tex_u;\n    uniform sampler2D tex_v;\n    void main(void)\n    {\n        vec3 yuv;\n        vec3 rgb;\n        yuv.x = texture2D(tex_y, textureOut).r;\n        yuv.y = texture2D(tex_u, textureOut).r - 0.5;\n        yuv.z = texture2D(tex_v, textureOut).r - 0.5;\n        rgb = mat3(1.0, 1.0, 1.0,\n            0.0, -0.39465, 2.03211,\n            1.13983, -0.58060, 0.0) * yuv;\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n\n);\n\nOpenGlVideoQtQuick::OpenGlVideoQtQuick():\n    openGlVideoQtQuickRenderer(nullptr)\n{\n    connect(this, &amp;QQuickItem::windowChanged, this, &amp;OpenGlVideoQtQuick::handleWindowChanged);\n\n    update();\n}\n\nvoid OpenGlVideoQtQuick::handleWindowChanged(QQuickWindow *win)\n{\n    if (win) {\n        connect(win, &amp;QQuickWindow::beforeSynchronizing, this, &amp;OpenGlVideoQtQuick::sync, Qt::DirectConnection);\n        win-&gt;setClearBeforeRendering(false);\n    }\n}\n\nQMatrix4x4 OpenGlVideoQtQuick::getModelMatrix() {\n    QMatrix4x4 result;\n\n    // Compose model matrix from our transform properties in the QML\n    QQmlListProperty&lt;QQuickTransform&gt; transformations = transform();\n    const int count = transformations.count(&amp;transformations);\n    for (int i=0; i&lt;count; i++) {\n        QQuickTransform *transform = transformations.at(&amp;transformations, i);\n        transform-&gt;applyTo(&amp;result);\n    }\n\n    return result;\n}\n\n\nvoid OpenGlVideoQtQuick::update()\n{\n    if (window())\n        window()-&gt;update();\n}\n\n\nOpenGlVideoQtQuickRenderer::~OpenGlVideoQtQuickRenderer()\n{\n    delete program;\n}\n\n\n\nvoid OpenGlVideoQtQuick::sync()\n{\n    if (!openGlVideoQtQuickRenderer) {\n        openGlVideoQtQuickRenderer = new OpenGlVideoQtQuickRenderer();\n        connect(window(), &amp;QQuickWindow::beforeRendering, openGlVideoQtQuickRenderer, &amp;OpenGlVideoQtQuickRenderer::render, Qt::DirectConnection);\n        connect(window(), &amp;QQuickWindow::afterRendering, this, &amp;OpenGlVideoQtQuick::update, Qt::DirectConnection);\n    } \n    this-&gt;openGlVideoQtQuickRenderer-&gt;qQuickVideoMatrix = getModelMatrix();\n}\n\nstatic const GLfloat ver[] = {\n    -1.0f,-1.0f,\n     1.0f,-1.0f,\n    -1.0f, 1.0f,\n     1.0f, 1.0f\n};\n\nstatic const GLfloat tex[] = {\n    0.0f, 1.0f,\n    1.0f, 1.0f,\n    0.0f, 0.0f,\n    1.0f, 0.0f\n};\n\n\nvoid OpenGlVideoQtQuickRenderer::render()\n{\n    if (this-&gt;firstRun) {\n        std::cout &lt;&lt; \"Creating QOpenGLShaderProgram \" &lt;&lt; std::endl;\n        this-&gt;firstRun = false;\n        program = new QOpenGLShaderProgram();\n        initializeOpenGLFunctions();\n\n        std::cout &lt;&lt; \"Fragment Shader compilation: \" &lt;&lt; program-&gt;addShaderFromSourceCode(QOpenGLShader::Fragment, tString2) &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Vertex Shader compilation: \" &lt;&lt; program-&gt;addShaderFromSourceCode(QOpenGLShader::Vertex, vString2) &lt;&lt; std::endl;\n\n        program-&gt;bindAttributeLocation(\"vertexIn\",A_VER);\n        program-&gt;bindAttributeLocation(\"textureIn\",T_VER);\n        std::cout &lt;&lt; \"program-&gt;link() = \" &lt;&lt; program-&gt;link() &lt;&lt; std::endl;\n\n        glGenTextures(3, texs);//TODO: ERASE THIS WITH glDeleteTextures\n    }\n    program-&gt;bind();\n    program-&gt;setUniformValue(\"u_transform\", this-&gt;qQuickVideoMatrix);\n\n\n    //glViewport(50, 50, 50, 50);\n\n    glVertexAttribPointer(A_VER, 2, GL_FLOAT, 0, 0, ver);\n    glEnableVertexAttribArray(A_VER);\n\n    glVertexAttribPointer(T_VER, 2, GL_FLOAT, 0, 0, tex);\n    glEnableVertexAttribArray(T_VER);\n\n    unis[0] = program-&gt;uniformLocation(\"tex_y\");\n    unis[1] = program-&gt;uniformLocation(\"tex_u\");\n    unis[2] = program-&gt;uniformLocation(\"tex_v\");\n\n    //Y\n    glBindTexture(GL_TEXTURE_2D, texs[0]);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, width, height, 0, GL_RED, GL_UNSIGNED_BYTE, 0);\n\n    //U\n    glBindTexture(GL_TEXTURE_2D, texs[1]);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, width/2, height / 2, 0, GL_RED, GL_UNSIGNED_BYTE, 0);\n\n    //V\n    glBindTexture(GL_TEXTURE_2D, texs[2]);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, width / 2, height / 2, 0, GL_RED, GL_UNSIGNED_BYTE, 0);\n\n\n\n    glDrawArrays(GL_TRIANGLE_STRIP,0,4);\n\n    program-&gt;disableAttributeArray(A_VER);\n    program-&gt;disableAttributeArray(T_VER);\n    program-&gt;release();\n\n}\n</code></pre>\n\n<p><strong>OpenGlVideoQtQuick.h</strong>:</p>\n\n<pre><code>#ifndef OpenGlVideoQtQuick_H\n#define OpenGlVideoQtQuick_H\n\n#include &lt;QtQuick/QQuickItem&gt;\n#include &lt;QtGui/QOpenGLShaderProgram&gt;\n#include &lt;QtGui/QOpenGLFunctions&gt;\n#include &lt;QtQuick/qquickwindow.h&gt;\n#include &lt;QtGui/QOpenGLShaderProgram&gt;\n#include &lt;QtGui/QOpenGLContext&gt;\n#include &lt;QString&gt;\n#include &lt;iostream&gt;\n#include &lt;QTimer&gt;\n\n\n\nclass OpenGlVideoQtQuickRenderer : public QObject, protected QOpenGLFunctions\n{\n    Q_OBJECT\n\npublic:\n    OpenGlVideoQtQuickRenderer() {        \n    }\n    ~OpenGlVideoQtQuickRenderer();\n    QMatrix4x4 qQuickVideoMatrix;\n\n\n\npublic slots:\n    void render();\n\nprivate:\n    QOpenGLShaderProgram* program;\n    GLuint unis[3] = {0};\n    GLuint texs[3] = {0};\n    unsigned char *datas[3] = { 0 };\n    bool firstRun = true;\n    //TODO: make this variable according to video data\n    int width = 1920;\n    int height = 1080;\n};\n\nclass OpenGlVideoQtQuick : public QQuickItem\n{\n    Q_OBJECT\n\npublic:\n    OpenGlVideoQtQuick();\n    QMatrix4x4 getModelMatrix();\n\n\nprivate slots:\n    void handleWindowChanged(QQuickWindow *win);\npublic slots:\n    void sync();\n    void update();//Updates the window\n\nprivate:\n    OpenGlVideoQtQuickRenderer *openGlVideoQtQuickRenderer;\n\n};\n\n#endif // OpenGlVideoQtQuick_H\n</code></pre>\n\n<p><strong>main.qml:</strong></p>\n\n<pre><code>import QtQuick 2.0\nimport OpenGLComponents 1.0\nItem {\n    width: 1280\n    height: 720\n    OpenGlVideoQtQuick {\n        width: 640\n        height: 480\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "macros", "unreal-engine4"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1551259589, "post_id": 54901994, "comment_id": 96571289, "body": "It&#39;s token concatenation, read up on it here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.4/cpp/Concatenation.html#Concatenation\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-3.4.4/cpp/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1551260788, "post_id": 54902166, "comment_id": 96572051, "body": "Not strings, tokens."}], "tags": [], "owner": {"reputation": 449, "user_id": 11023821, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HrnttopymvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOB1QpahG9yHX8Gry2E7eOa2kyR7A/mo/photo.jpg?sz=128", "display_name": "Ralf Ulrich", "link": "https://stackoverflow.com/users/11023821/ralf-ulrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1551262221, "last_edit_date": 1551262221, "creation_date": 1551260025, "answer_id": 54902166, "question_id": 54901994, "link": "https://stackoverflow.com/questions/54901994/meaning-of-the-syntax-contextregistrar-contexttype/54902166#54902166", "title": "Meaning of the syntax &quot;ContextRegistrar_##ContextType&quot;", "body": "<p>This is the way to concatenate tokens in macros, see <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Concatenation.html\" rel=\"nofollow noreferrer\">Concatenation</a>.</p>\n\n<p>Thus, in your case: <code>REGISTER_CONTEXT(Bar)</code> in your program will expand to <code>ContextRegistrar_Bar</code> as part of the macro. </p>\n"}, {"tags": [], "owner": {"reputation": 1317, "user_id": 545546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce09f7d092cbe5f4cdf3977c736eac81?s=128&d=identicon&r=PG", "display_name": "sdkljhdf hda", "link": "https://stackoverflow.com/users/545546/sdkljhdf-hda"}, "is_accepted": true, "score": 1, "last_activity_date": 1551264568, "creation_date": 1551264568, "answer_id": 54903725, "question_id": 54901994, "link": "https://stackoverflow.com/questions/54901994/meaning-of-the-syntax-contextregistrar-contexttype/54903725#54903725", "title": "Meaning of the syntax &quot;ContextRegistrar_##ContextType&quot;", "body": "<p>## is a token pasting operator in C and C++ preprocessor. You can create new tokens using it. For example:</p>\n\n<p>#define MACRO(x) x ## 1</p>\n\n<p>This macro creates a new token that is same as its argument x, but with 1 appended to it. If you invoke it like <code>MACRO(1)</code> the result would be integer literal 11, result of <code>MACRO(a)</code> would be a1 which you could use as a name of variable, function, class, etc.</p>\n\n<p>In your example the <code>REGISTER_CONTEXT(UBlueprintContext);</code> would produce the following code:</p>\n\n<pre><code>static const FContextRegistrar ContextRegistrar_UBlueprintContext( UBlueprintContext::StaticClass() );\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11044405, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SbV7xUpC1xY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP-RXfmz8zARs51Yq0OtI9niawjTA/mo/photo.jpg?sz=128", "display_name": "Tayk", "link": "https://stackoverflow.com/users/11044405/tayk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 54903725, "answer_count": 2, "score": 0, "last_activity_date": 1551264568, "creation_date": 1551259486, "last_edit_date": 1551260041, "question_id": 54901994, "link": "https://stackoverflow.com/questions/54901994/meaning-of-the-syntax-contextregistrar-contexttype", "title": "Meaning of the syntax &quot;ContextRegistrar_##ContextType&quot;", "body": "<p>I am struggling to understand what the following <em>#define</em> does exactly.</p>\n\n<pre><code>#define REGISTER_CONTEXT( ContextType ) static const FContextRegistrar ContextRegistrar_##ContextType( ContextType::StaticClass() );\nREGISTER_CONTEXT(UBlueprintContext);\n</code></pre>\n\n<p>As far as i know it adds a <em>UClass</em> to an array, so that it can be used by a other function and iterated through. But what does the </p>\n\n<blockquote>\n  <p>ContextRegistrar_##ContextType</p>\n</blockquote>\n\n<p>do in this context? Can anyone give me a hint please?\nThis is causing me an runtime crash and I couldn't find something similar.</p>\n\n<p>This is the corresponding struct:</p>\n\n<pre><code>struct FContextRegistrar\n{\n    static TArray&lt;TSubclassOf&lt;UBlueprintLibraryBase&gt;&gt;&amp; GetTypes()\n    {\n        static TArray&lt;TSubclassOf&lt;UBlueprintLibraryBase&gt;&gt; Types;\n        return Types;\n    }\n\n    FContextRegistrar( TSubclassOf&lt;UBlueprintLibraryBase&gt; ClassType )\n    {\n        GetTypes().Add( ClassType );\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "colors", "rgb", "color-space", "hsl"], "comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1551264499, "post_id": 54901900, "comment_id": 96574499, "body": "<code>2 &#47; 3</code> and <code>1 &#47; 3</code> will not give the result you are expecting. Use <code>1.0</code> to make sure division is done on float. A small comment: use <code>double</code> not <code>float</code> but if you need to save a lot of data. Calculations are done as <code>double</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1551275407, "post_id": 54901900, "comment_id": 96580998, "body": "For your own sanity, when dealing in float use float literals.  So <code>2.0f &#47; 3.0f</code> instead of <code>2 &#47; 3</code>.  Likewise for all the other numbers -- even though they don&#39;t <i>need</i> it, it will keep things straight for you and any other developer who has to maintain the code."}, {"owner": {"reputation": 95, "user_id": 10953075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25e8929a9ff44c2d1a32727ffc43fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Major Despard", "link": "https://stackoverflow.com/users/10953075/major-despard"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1551745266, "post_id": 54901900, "comment_id": 96744168, "body": "@Rabbid76 Oh yes thank you! I wasn&#39;t around for a few days. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1551548975, "creation_date": 1551548975, "answer_id": 54961312, "question_id": 54901900, "link": "https://stackoverflow.com/questions/54901900/hsl-to-rgb-colorspace-function-that-ive-written-not-working-properly/54961312#54961312", "title": "HSL to RGB colorspace function that I&#39;ve written not working properly", "body": "<p>In C++ (or C) the result of a division operator is not automatically an floating point value. I the divided and and the divisor both have an integral data type, then the result of the division is integral, too. At leas one side of the division has to be a floating point type, to gain a floating point result. \nSee <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">Arithmetic operators</a> for a detailed information about the conversion rules of binary arithmetic operations.</p>\n\n<p><code>1</code>, <code>2</code> and <code>3</code> are <a href=\"https://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">integer literal</a>s, so the data type of this constants is an integral data type (<code>int</code>).</p>\n\n<p>Altogether, while the result of <code>1 / 3</code> is 0 and the result of <code>2 / 3</code> is 0, the result of <code>1.0 / 3.0</code> is <code>0.333333</code> and the result of <code>2.0 / 3.0</code> is <code>0.666667</code>.</p>\n\n<p>Note this rule does not just apply to the division i applies to any other arithmetic operation, too. But in case of e.g. subtraction, addition, multiplication it doesn't matter, because these operations generate (mathematically) integral results, when they are applied to (mathematically) integral values.  </p>\n\n<p>This means, that the following expressions does not do what you expect it to do:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m1 + (m2 - m1) * (2 / 3 - hue) * 6\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>color.H + 1 / 3\n</code></pre>\n\n<p>Because they are the same as: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m1 + (m2 - m1) * (0 - hue) * 6\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>color.H + 0\n</code></pre>\n\n<p>Change the integral constants to floating point constants, to solve your issue. The working functions may look like this: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>float Hue2RGB(float m1, float m2, float hue)\n{\n    hue = hue &lt; 0 ? hue+1 : hue &gt; 1 ? hue-1 : hue;\n\n    if (hue * 6 &lt; 1)\n        return m1 + (m2 - m1) * hue * 6;\n    else if (hue * 2 &lt; 1)\n        return m2;\n    else if (hue * 3 &lt; 2)\n        return m1 + (m2 - m1) * (2.0 / 3.0 - hue) * 6;\n    else\n        return m1;\n}\n\ncolor_RGB HSL2RGB(color_HSL color)\n{\n    color.H = color.H / 360;\n\n    float m2 = color.L &lt;= 0.5 ? color.L * (color.S + 1) : color.L + color.S - color.L * color.S;\n    float m1 = color.L * 2 - m2;\n\n    color_RGB return_color;\n    return_color.R = Hue2RGB(m1, m2, color.H + 1.0 / 3.0);\n    return_color.G = Hue2RGB(m1, m2, color.H);\n    return_color.B = Hue2RGB(m1, m2, color.H - 1.0 / 3.0);\n    return_color.a = 1.0;\n\n    return return_color;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10953075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b25e8929a9ff44c2d1a32727ffc43fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Major Despard", "link": "https://stackoverflow.com/users/10953075/major-despard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 54961312, "answer_count": 1, "score": 0, "last_activity_date": 1551548975, "creation_date": 1551259226, "question_id": 54901900, "link": "https://stackoverflow.com/questions/54901900/hsl-to-rgb-colorspace-function-that-ive-written-not-working-properly", "title": "HSL to RGB colorspace function that I&#39;ve written not working properly", "body": "<p>I have written an HSL to RGB function, based on a few tutorials I found online, and mostly based on a Lua library called <em>Colors</em>, however, it doesn't work properly. Could you help me get it up and running?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>float Hue2RGB(float m1, float m2, float hue)\n    {\n        if (hue &lt; 0) { hue += 1; };\n        if (hue &gt; 1) { hue -= 1; };\n\n        if (hue * 6 &lt; 1)\n        {\n            return m1 + (m2 - m1) * hue * 6;\n        }\n        else if (hue * 2 &lt; 1)\n        {\n            return m2;\n        }\n        else if (hue * 3 &lt; 2)\n        {\n            return m1 + (m2 - m1) * (2 / 3 - hue) * 6;\n        }\n        else\n            return m1;\n    }\n\ncolor_RGB HSL2RGB(color_HSL color)\n    {\n        color.H = color.H / 360;\n        float m1, m2;\n        if (color.L &lt;= 0.5)\n        {\n            m2 = color.L * (color.S + 1);\n        }\n        else\n        {\n            m2 = color.L + color.S - color.L * color.S;\n        }\n\n        m1 = color.L * 2 - m2;\n\n        color_RGB return_color;\n        return_color.R = Hue2RGB(m1, m2, color.H + 1 / 3);\n        return_color.G = Hue2RGB(m1, m2, color.H);\n        return_color.B = Hue2RGB(m1, m2, color.H - 1 / 3);\n        return_color.a = 1.0;\n\n        return return_color;\n    }\n</code></pre>\n\n<p>I have an RGB to HSL that works properly, so I use that to test this function. Here's the result that I see in my debugger:</p>\n\n<pre><code>{R=0.294117659 G=0.0980392247 B=0.125490203 ...}\n</code></pre>\n\n<p>Convert to HSL</p>\n\n<pre><code>{H=351.600006 S=0.499999970 L=0.196078449 }\n</code></pre>\n\n<p>Convert to RGB again:</p>\n\n<pre><code>{R=0.0980392098 G=0.0980392098 B=0.0980392098 ...}\n</code></pre>\n\n<p>I've been struggling with this problem for a few days now, and this website I hear helps people. Thank you. </p>\n\n<p>PS: Here's my other function, RGB to HSL. I have tested it, many times, it works properly:</p>\n\n<pre><code>color_HSL RGB2HSL(color_RGB color)\n    {\n        float min = std::fmin(std::fmin(color.R, color.G), color.B);\n        float max = std::fmax(std::fmax(color.R, color.G), color.B);\n\n        float delta = max - min;\n\n        float H = 0, S = 0, L = ((min + max) / 2);\n\n        if (L &gt; 0 &amp;&amp; L &lt; 0.5)\n        {\n            S = delta / (max + min);\n        }\n        if (L &gt; 0.5 &amp;&amp; L &lt; 1)\n        {\n            S = delta / (2 - max - min);\n        }\n\n        if (delta &gt; 0)\n        {\n\n            if (max == color.R &amp;&amp; max != color.G) { H += (color.G - color.B) / delta; }\n            if (max == color.G &amp;&amp; max != color.B) { H += 2 + (color.B - color.R) / delta; }\n            if (max == color.R &amp;&amp; max != color.R) { H += 4 + (color.R - color.G) / delta; }\n\n            H = H / 6;\n        }\n\n        if (H &lt; 0) { H += 1; };\n        if (H &gt; 1) { H -= 1; };\n\n        color_HSL return_color;\n        return_color.H = H * 360;\n        return_color.S = S;\n        return_color.L = L;\n\n        return return_color;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "ide", "c-preprocessor"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551260141, "post_id": 54901860, "comment_id": 96571624, "body": "If your IDE can understand how the file will be compiled, then it should be able to do that. Probably CLion can do that as well."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1551260216, "post_id": 54901860, "comment_id": 96571678, "body": "Most modern IDEs do have some form of syntax highlighting that recognises preprocessor directives.   I&#39;m not aware of any that will do what you want.  Practically, the logic to identify code that has been removed by the preprocessor would be computationally too expensive to run in an IDE (slow down echoing of input, etc) and probably get things wrong too often to be useful.  A number of IDEs do handle some simple cases (e.g. greying out text wrapped in <code>#ifdef 0</code> and <code>#endif</code>) but you&#39;re seeking much more than that.  Main tip:  don&#39;t rely excessively on the preprocessor."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1551260531, "post_id": 54901860, "comment_id": 96571880, "body": "@Peter At least Visual Studio 2015 and later do this properly. I don&#39;t agree that letting the preprocessor run over a source file (and, implicitly, its includes) is costly. Of course you don&#39;t want to do it after every key stroke but this is pretty trivial stuff to get right."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1551260704, "post_id": 54901860, "comment_id": 96571992, "body": "I don&#39;t understand the question with regards to Visual Studio. It <a href=\"https://i.stack.imgur.com/68jN0.png\" rel=\"nofollow noreferrer\">already does exactly what you ask for</a>, so what&#39;s the question? Going by <a href=\"https://stackoverflow.com/questions/14586672/disable-or-fix-ifdef-sensitive-colouring-and-intellisense-in-visual-studio\">this</a> random Q/A, it exists since at least VS2005 and works much better since VS2010."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551261398, "post_id": 54901860, "comment_id": 96572436, "body": "@MaxLanghof - I didn&#39;t say running the preprocessor is costly.   I said that the logic to characterise how it changes the code would be, in order to identify and display/highlight the deltas.   For simple cases, yeah okay.   But for macros that do token pasting, stringification, and the like, the notion of &quot;removed&quot; is a lot more nebulous.  And there are many other things the preprocessor can do."}, {"owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551262061, "post_id": 54901860, "comment_id": 96572856, "body": "@MaxLanghof that&#39;s an answer!  Will try to add it in my project settings."}, {"owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1551262140, "post_id": 54901860, "comment_id": 96572911, "body": "@Peter Calculating everything is perhaps expensive, but the main usecase is checking the effect of single defines."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 9, "last_activity_date": 1551261302, "last_edit_date": 1551261302, "creation_date": 1551259191, "answer_id": 54901889, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54901889#54901889", "title": "How can C/C++ #define directives be visualised?", "body": "<p>One way is to see the source after the preprocessing, using <em>gcc</em> (for C) or <em>g++</em> (for c++) just use the option <code>-E</code></p>\n\n<p>For instance having the file <code>p.cc</code></p>\n\n<pre><code>#ifdef FOO\n# define BAR 1\n#else\n# define BAR 2\n#endif\n\nint main()\n{\n  return BAR;\n}\n</code></pre>\n\n<p>if I do without defining  <em>FOO</em> I have :</p>\n\n<pre><code>/tmp % gcc -E p.cc\n# 1 \"p.cc\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"p.cc\"\n\nint main()\n{\n  return 2;\n}\n</code></pre>\n\n<p>if I do defining  <em>FOO</em> I have :</p>\n\n<pre><code>/tmp % gcc -DFOO -E p.cc\n# 1 \"p.cc\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"p.cc\"\n\nint main()\n{\n  return 1;\n}\n</code></pre>\n\n<hr>\n\n<p>Note : you probably have <code>#include</code> in your source so after the preprocessing you get a lot of lines coming from the included files, for the question <a href=\"https://stackoverflow.com/questions/54891248/how-to-show-preprocessed-code-ignoring-includes-with-gcc/54891562\">How to show 'preprocessed' code ignoring includes with GCC</a> I put an answer to bypass them.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1551263878, "last_edit_date": 1551263878, "creation_date": 1551262420, "answer_id": 54903009, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54903009#54903009", "title": "How can C/C++ #define directives be visualised?", "body": "<p>Visual Studio does this already by default, at least since VS2005 and much better since VS2010 (going by <a href=\"https://stackoverflow.com/questions/14586672/disable-or-fix-ifdef-sensitive-colouring-and-intellisense-in-visual-studio\">this</a> Q/A):</p>\n\n<p><a href=\"https://i.stack.imgur.com/68jN0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/68jN0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Edit: Added in response to another answer:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fx3Du.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fx3Du.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551263897, "post_id": 54903116, "comment_id": 96574065, "body": "How is your example a problem for the feature in question? <a href=\"https://i.stack.imgur.com/Fx3Du.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/Fx3Du.png</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551264025, "post_id": 54903116, "comment_id": 96574150, "body": "It just requires the entire preprocessed form to be available."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1551264313, "post_id": 54903116, "comment_id": 96574359, "body": "That is also true for both intellisense-esque things and the actual compiler (and in both cases preprocessing a single TU should not take a significant amount of time). But I guess we both have different ideas of what &quot;visualize <code>#define</code>s&quot; implies."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551264333, "post_id": 54903116, "comment_id": 96574374, "body": "Yes, certainly."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1551264317, "last_edit_date": 1551264317, "creation_date": 1551262785, "answer_id": 54903116, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised/54903116#54903116", "title": "How can C/C++ #define directives be visualised?", "body": "<blockquote>\n  <p>How can i visualise C/C++ #define's?</p>\n</blockquote>\n\n<p>Short answer: in general <strong>you cannot</strong> (and notice that you don't define what \"visualize\" means in your question). You really want to look at the preprocessed form. With <a href=\"https://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> you practically get it with <code>gcc -C -E</code>.</p>\n\n<p>As a provocative example, <code>__TIME__</code> or <code>__LINE__</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow noreferrer\"><em>preprocessor magic predefined macro</em></a> (and so is the <code>__COUNT__</code> which is a GCC extension). You are allowed to code</p>\n\n<pre><code>#if __LINE__ % 2 == 0\nprintf(\"hello from line %d\\n\", __LINE__);\n#endif\n</code></pre>\n\n<p>and the behavior depends upon where that weird code is located (on an even-numbered line, or an odd-numbered one).</p>\n\n<p>Ok, that example is contrived, but legal. Check by reading the C11 standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>.</p>\n\n<p>You could also imagine some <code>#if __TIME__[1] == '2'</code> but probably that won't compile (because preprocessor expressions cannot use the <code>[]</code> indexing). However, some <code>if (_TIME__[5] == '2') printf(\"hello\\n\");</code> would compile (and be optimized differently, depending on the moment you are compiling it).</p>\n\n<p>And in practice, code nearly as contrived as the one above does exist. A good example of C code using a lot various preprocessor features is the Linux <a href=\"https://www.kernel.org/\" rel=\"nofollow noreferrer\">kernel source</a> code (you might be interested by <a href=\"http://coccinelle.lip6.fr/\" rel=\"nofollow noreferrer\">coccinelle</a>, a tool knowing that). The first step of its build (using <code>make config</code> or <code>make menuconfig</code>) generates a lot of headers defining the features of your particular kernel. There are many thousands of such configuration options (my <code>/boot/config-4.19.0-3-amd64</code> has 7352 configuration choices, and each of them translates to some preprocessor macro used in <code>#if</code>).</p>\n"}], "owner": {"reputation": 1659, "user_id": 76608, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c63f79977d96c05797657de07362d6a6?s=128&d=identicon&r=PG", "display_name": "Olav", "link": "https://stackoverflow.com/users/76608/olav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 54903009, "answer_count": 3, "score": 1, "last_activity_date": 1551264317, "creation_date": 1551259091, "last_edit_date": 1551263509, "question_id": 54901860, "link": "https://stackoverflow.com/questions/54901860/how-can-c-c-define-directives-be-visualised", "title": "How can C/C++ #define directives be visualised?", "body": "<p>I am looking for ways to visualize the effects of #define's - For example that code not seen by the compiler is shown in a different color.</p>\n\n<p>Primarily visual studio, but nice to know about other environments?\nIdeally, also code seen by the compiler, but will not be run.</p>\n"}]