[{"tags": ["c++"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 8, "creation_date": 1423092068, "post_id": 28333432, "comment_id": 45013811, "body": "endl on the last cout"}, {"owner": {"reputation": 1411, "user_id": 1280316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da539d158d4c32771a7d550eb23613cc?s=128&d=identicon&r=PG", "display_name": "Chemik", "link": "https://stackoverflow.com/users/1280316/chemik"}, "edited": false, "score": 1, "creation_date": 1423092740, "post_id": 28333432, "comment_id": 45014032, "body": "One good advice for beginner - debugger is your best friend."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1411, "user_id": 1280316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da539d158d4c32771a7d550eb23613cc?s=128&d=identicon&r=PG", "display_name": "Chemik", "link": "https://stackoverflow.com/users/1280316/chemik"}, "edited": false, "score": 0, "creation_date": 1423092813, "post_id": 28333432, "comment_id": 45014048, "body": "@Chemik Doesn&#39;t help so much for this case."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 1411, "user_id": 1280316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da539d158d4c32771a7d550eb23613cc?s=128&d=identicon&r=PG", "display_name": "Chemik", "link": "https://stackoverflow.com/users/1280316/chemik"}, "edited": false, "score": 1, "creation_date": 1423092866, "post_id": 28333432, "comment_id": 45014067, "body": "@Chemik very true, however in this particular case don&#39;t know how much would have helped. If you don&#39;t know what a buffered output is or what a flush is... don&#39;t know how much debugging would have helped. But you are right, debugging is a must."}, {"owner": {"reputation": 1411, "user_id": 1280316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da539d158d4c32771a7d550eb23613cc?s=128&d=identicon&r=PG", "display_name": "Chemik", "link": "https://stackoverflow.com/users/1280316/chemik"}, "edited": false, "score": 0, "creation_date": 1423092929, "post_id": 28333432, "comment_id": 45014086, "body": "My comment was reaction on &quot;running through the code on paper&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 3, "creation_date": 1423092721, "post_id": 28333589, "comment_id": 45014023, "body": "And as somebody who is not new to c++ knows, printing an <code>endl</code> causes a flush."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423094751, "post_id": 28333589, "comment_id": 45014622, "body": "By default, attempting to read <code>std::cin</code> will cause <code>std::cout</code> to be flushed. <a href=\"http://stackoverflow.com/questions/14052627/why-do-we-need-to-tie-cin-and-cout\">See here</a>. (So, only the final <code>cout</code> needs to be explicitly flushed)"}, {"owner": {"reputation": 136, "user_id": 4530731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/193a709d34cb39ecd7e02bba04af425d?s=128&d=identicon&r=PG&f=1", "display_name": "Vityou", "link": "https://stackoverflow.com/users/4530731/vityou"}, "edited": false, "score": 0, "creation_date": 1423108601, "post_id": 28333589, "comment_id": 45017966, "body": "So your saying if I don&#39;t &quot;flush&quot; it (fancy word no comprendo) with <code>std::endl</code> it might work.  Can you explain what flushing and buffering mean."}, {"owner": {"reputation": 136, "user_id": 4530731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/193a709d34cb39ecd7e02bba04af425d?s=128&d=identicon&r=PG&f=1", "display_name": "Vityou", "link": "https://stackoverflow.com/users/4530731/vityou"}, "edited": false, "score": 0, "creation_date": 1423108662, "post_id": 28333589, "comment_id": 45017981, "body": "Sorry if I sound ignorant I am used to python."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1423092625, "creation_date": 1423092625, "answer_id": 28333589, "question_id": 28333432, "link": "https://stackoverflow.com/questions/28333432/c-wont-print-the-last-value-but-will-print-it-later-confusing/28333589#28333589", "title": "C++ wont print the last value, but will print it later (confusing)", "body": "<p>If you need a stream to be flushed at a particular place, you need to flush it. Otherwise, it can be internally buffered and flushed later.</p>\n"}], "owner": {"reputation": 136, "user_id": 4530731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/193a709d34cb39ecd7e02bba04af425d?s=128&d=identicon&r=PG&f=1", "display_name": "Vityou", "link": "https://stackoverflow.com/users/4530731/vityou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 28333589, "answer_count": 1, "score": 0, "last_activity_date": 1423092625, "creation_date": 1423091834, "question_id": 28333432, "link": "https://stackoverflow.com/questions/28333432/c-wont-print-the-last-value-but-will-print-it-later-confusing", "title": "C++ wont print the last value, but will print it later (confusing)", "body": "<p>Hello if I input some numbers into this:</p>\n\n<pre><code>int main() {\n    int currval = 0, val = 0;\n    if (std::cin &gt;&gt; currval) {\n        int cnt = 1;\n        while (std::cin &gt;&gt; val) {\n            if (val == currval) {\n                ++cnt;\n            }\n            else {\n                std::cout &lt;&lt; currval &lt;&lt; \" occurs \" &lt;&lt; cnt &lt;&lt; \" times. \" &lt;&lt; std::endl;\n                currval = val;\n                cnt = 1;\n            }\n        }\n        std::cout &lt;&lt; currval &lt;&lt; \" occurs \" &lt;&lt; cnt &lt;&lt; \" times. \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>it wont output how many times the last value appears. I tried running through the code on paper and I found that it should print how many times the last number occurs.  Its weird because if I enter some more numbers after it finds how many time each of the first group of numbers appear, it will print how many time the last value of the first group appears in the second print thing. you can compile and run it and see if you get different results.  I am new to c++ so anything will help.\n Thanks.</p>\n"}, {"tags": ["c++", "cmake", "qt-creator"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2288008"}, "edited": false, "score": 0, "creation_date": 1423997843, "post_id": 28333416, "comment_id": 45366561, "body": "I think it&#39;s Qt Creator bug. Visual Studio IDE works fine for me."}], "owner": {"reputation": 233, "user_id": 3790956, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f7a18673c6063138c09aed7556e7ac5b?s=128&d=identicon&r=PG&f=1", "display_name": "wondering", "link": "https://stackoverflow.com/users/3790956/wondering"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 804, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1423125991, "creation_date": 1423091721, "last_edit_date": 1423125991, "question_id": 28333416, "link": "https://stackoverflow.com/questions/28333416/how-to-include-generated-source-files-in-cmake-to-show-them-in-an-ide", "title": "How to include generated source files in CMake to show them in an IDE?", "body": "<p>I created the following CMakeLists.txt which features two targets (source files <code>Client.cpp</code> and <code>Server.cpp</code>, both depending on two generated files, namely <code>Printer.h</code> and <code>Printer.cpp</code>. These files are generated from <code>Printer.ice</code> by ZeroC Ice executable <code>slice2cpp</code>.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.1.1)\nproject(IceTest)\n\nset(CMAKE_VERBOSE_MAKEFILE true)\n\nfile(GLOB ice_SLICE\n    \"${PROJECT_SOURCE_DIR}/ice/*.ice\"\n)\n\nstring(REPLACE \".ice\" \".h\" ice_HDR ${ice_SLICE})\nstring(REPLACE \".ice\" \".cpp\" ice_SRC ${ice_SLICE})\n\nfile(GLOB server_HDR\n    \"server/*.h\"\n)\n\nfile(GLOB server_SRC\n    \"server/*.cpp\"\n)\n\nfile(GLOB client_HDR\n    \"client/*.h\"\n)\n\nfile(GLOB client_SRC\n    \"client/*.cpp\"\n)\n\nfind_package(Ice REQUIRED Ice IceUtil)\n\nadd_custom_command(\n    OUTPUT ${ice_HDR} ${ice_SRC}\n    COMMAND ${Ice_SLICE2CPP_EXECUTABLE} ${ice_SLICE}\n    WORKING_DIRECTORY ${PROJECT_SOURCE_DIR}/ice\n)\n\nadd_custom_target(\n    Slice2Cpp\n    DEPENDS ${ice_HDR} ${ice_SRC}\n    COMMENT \"Running Slice2Cpp...\"\n    SOURCES ${ice_SLICE}\n)\n\nadd_custom_target(\n    IceGenerated\n    DEPENDS Slice2Cpp\n    SOURCES ${ice_HDR} ${ice_SRC}\n)\n\ninclude_directories(IceTestServer ${PROJECT_SOURCE_DIR}/ice ${PROJECT_SOURCE_DIR}/server ${Ice_INCLUDE_DIRS})\ninclude_directories(IceTestClient ${PROJECT_SOURCE_DIR}/ice ${PROJECT_SOURCE_DIR}/client ${Ice_INCLUDE_DIRS})\n\nadd_executable(IceTestServer ${ice_HDR} ${ice_SRC} ${server_HDR} ${server_SRC})\nadd_executable(IceTestClient ${ice_HDR} ${ice_SRC} ${client_HDR} ${client_SRC})\n\nadd_dependencies(IceTestServer IceGenerated)\nadd_dependencies(IceTestClient IceGenerated)\n\ntarget_link_libraries(IceTestServer ${Ice_LIBRARIES} pthread)\ntarget_link_libraries(IceTestClient ${Ice_LIBRARIES} pthread)\n</code></pre>\n\n<p>The directory structure is as following:</p>\n\n<pre><code>IceTest\n|-- CMakeLists.txt\n|-- client\n    |-- Client.cpp\n|-- ice\n    |-- Printer.ice\n    |-- Printer.cpp    &lt;--- Generated\n    |-- Printer.h      &lt;--- Generated\n|-- server\n    |-- Server.cpp\n</code></pre>\n\n<p>In my <code>CMakeLists.txt</code> I tried to include the generated file <code>Printer.h</code> and <code>Printer.cpp</code> into the IDE (here, QtCreator). The documentation states that add <code>SOURCES</code> of a custom target (<code>IceGenerated</code>) are added to the IDE for convenience. However, this is not the case for my target: The generated files are not visible from the IDE (they are generated and added to the executable though). What am I doing wrong?</p>\n"}, {"tags": ["c++", "matlab", "math", "floating-point", "rounding"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1423099027, "post_id": 28333142, "comment_id": 45015731, "body": "I don&#39;t have experience using the Tuckerman test, but as I understand, it is to be applied mathematically, not to be evaluated in the target floating-point arithmetic precision. Consider: <code>g=0x1.2572d20000000p+35 (5112b969); g*(g-ulp)=0x1.506005e8cea00p+70 &lt; arg=0x1.5060060000000p+70 &lt;= g*(g+ulp)=0x1.50600a7e99e80p+70  T;;;; g=0x1.2572d00000000p+35 (5112b968); g*(g-ulp)=0x1.5060015303600p+70 &lt; arg=0x1.5060060000000p+70 &lt;= g*(g+ulp)=0x1.506005e8cea00p+70  F</code>."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1423099849, "post_id": 28333142, "comment_id": 45015940, "body": "All that seems needed to apply the test correctly is to compute the two products <code>g*(g-ulp)</code> and <code>g*(g+ulp)</code> to twice the width of the tentative result <code>g</code>. In a hardware multiplier, the full double-wide product should be available prior to final rounding, so the additional hardware needed (a double-width comparator) will be at a minimum if its not already there for other reasons."}, {"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1423103594, "post_id": 28333142, "comment_id": 45016733, "body": "@njuffa, Assuming I don&#39;t have the hardware to perform the computation in a wider precision (which is the case with what I&#39;m working on), is it possible to perform tuckerman rounding?"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1423104072, "post_id": 28333142, "comment_id": 45016838, "body": "I don&#39;t know. It seems to me that if the preliminary result is within 1 ulp of the final result, the leading bits in the comparisons should cancel and you could get away with comparing only the low-order bits of the two products with the argument. That way you would not need double-wide intermediate results. Do you have a way of generating these low-order bits? Some context to your question might be useful: What do you have available in terms of hardware and software?"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1423105433, "post_id": 28333142, "comment_id": 45017180, "body": "Here is a different angle you could try. Tuckerman rounding was introduced in R. Agarwal et al., &quot;New scalar and vector elementary functions for the IBM System/370&quot;, IBM J. Res. Develop., Vol. 30, No. 2, March 1986, p. 126. The paper specifically mentions that the products g*(g+ulp) and g*(g-ulp) are computed with the <i>truncating</i> (not rounding!) multiplier of the System/370, without requiring any extra precision."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1423107052, "post_id": 28333142, "comment_id": 45017585, "body": "Using the truncating multiplication fixes the specific case mentioned in the question: <code>g=5112b969; mul_rz(g,g-ulp)=62a83002 &lt; arg=62a83003 &lt;= mul_rz(g,g+ulp)=62a83005  T;;;; g=5112b968; mul_rz(g,g-ulp)=62a83000 &lt; arg=62a83003 &lt;= mul_rz(g,g+ulp)=62a83002  F</code>. So this looks like an approach worth looking into."}], "answers": [{"comments": [{"owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "edited": false, "score": 0, "creation_date": 1423596464, "post_id": 28336663, "comment_id": 45209829, "body": "Thank you! This worked perfectly! Rounding to zero was the trick I needed"}], "tags": [], "owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "is_accepted": true, "score": 2, "last_activity_date": 1423113296, "creation_date": 1423113296, "answer_id": 28336663, "question_id": 28333142, "link": "https://stackoverflow.com/questions/28333142/how-to-perform-tuckerman-rounding-for-floating-point-square-root/28336663#28336663", "title": "How to Perform Tuckerman Rounding for Floating Point Square Root", "body": "<p>The original publication that introduced Tuckerman rounding for the square root was:</p>\n\n<p><em>Ramesh C. Agarwal, James W. Cooley, Fred G. Gustavson, James B. Shearer, Gordon Slishman, Bryant Tuckerman, \n\"New scalar and vector elementary functions for the IBM System/370\", IBM J. Res. Develop., Vol. 30, No. 2, March 1986, pp. 126-144.</em></p>\n\n<p>This paper specifically points out that the multiplications used to compute the products <code>g*(g-ulp)</code> and <code>g*(g+ulp)</code> are truncating, not rounding multiplications:</p>\n\n<p><em>\"However, these inequalities can be shown to be equivalent to</em></p>\n\n<p>y<sub>-</sub> <code>*</code> y &lt; x &lt;= y <code>*</code> y<sub>+</sub> ,</p>\n\n<p><em>where <code>*</code> denotes System/360/370 multiplication (which truncates the result), so that the tests are easily carried out\nwithout the need for extra precision. (Note the asymmetry: one &lt;, one &lt;=.) If the left inequality fails, y is too large; if the\nright inequality fails, y is too small.\"</em></p>\n\n<p>The following C99 code shows how Tuckerman rounding is successfully utilized to deliver correctly rounded results in a single-precision square root function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fenv.h&gt;\n#include &lt;math.h&gt;\n\n#pragma STDC FENV_ACCESS ON\nfloat mul_fp32_rz (float a, float b)\n{\n    float r;\n    int orig_rnd = fegetround();\n    fesetround (FE_TOWARDZERO);\n    r = a * b;\n    fesetround (orig_rnd);\n    return r;\n}\n\nfloat my_sqrtf (float a)\n{\n    float b, r, v, w, p, s;\n    int e, t, f;\n\n     if ((a &lt;= 0.0f) || isinff (a) || isnanf (a)) {\n         if (a &lt; 0.0f) {\n             r = 0.0f / 0.0f;\n         } else {\n             r = a + a;\n         }\n     } else {\n         /* compute exponent adjustments */\n         b = frexpf (a, &amp;e);\n         t = e - 2*512;\n         f = t / 2;\n         t = t - 2 * f;\n         f = f + 512;\n         /* map argument into the primary approximation interval [0.25,1) */\n         b = ldexpf (b, t);\n         /* initial approximation to reciprocal square root */\n         r =        -6.10005470e+0f;\n         r = r * b + 2.28990124e+1f;\n         r = r * b - 3.48110069e+1f;\n         r = r * b + 2.76135244e+1f;\n         r = r * b - 1.24472151e+1f;\n         r = r * b + 3.84509158e+0f;\n         /* round rsqrt approximation to 11 bits */\n         r = rintf (r * 2048.0f); \n         r = r * (1.0f / 2048.0f);\n         /* Use A. Schoenhage's coupled iteration for the square root */\n         v = 0.5f * r;\n         w = b * r;             \n         w = (w * -w + b) * v + w;\n         v = (r * -w + 1.0f) * v + v;\n         w = (w * -w + b) * v + w;\n         /* Tuckerman rounding: mul_rz (w, w-ulp) &lt; b &lt;= mul_rz (w, w+ulp) */\n         p = nextafterf (w, 0.0f);\n         s = nextafterf (w, 2.0f);\n         if (b &lt;= mul_fp32_rz (w, p)) {  \n             w = p;\n         } else if (b &gt; mul_fp32_rz (w, s)) {\n             w = s;\n         }\n         /* map back from primary approximation interval by jamming exponent */\n         r = ldexpf (w, f);\n     }\n     return r;\n }\n\n int main (void)\n {\n     volatile union {\n         float f;\n         unsigned int i;\n     } arg, res, ref;\n     arg.i = 0;\n     do {\n         res.f = my_sqrtf (arg.f);\n         ref.f = sqrtf (arg.f);\n         if (res.i != ref.i) {\n              printf (\"!!!! error @ arg=%08x: res=%08x ref=%08x\\n\",\n                      arg.i, res.i, ref.i);\n              break;\n         }\n         arg.i++;\n    } while (arg.i);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 3278, "user_id": 688463, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/66ab26dddf702d1ccc572ee7c95121b1?s=128&d=identicon&r=PG", "display_name": "Veridian", "link": "https://stackoverflow.com/users/688463/veridian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "accepted_answer_id": 28336663, "answer_count": 1, "score": 0, "last_activity_date": 1423113296, "creation_date": 1423090469, "question_id": 28333142, "link": "https://stackoverflow.com/questions/28333142/how-to-perform-tuckerman-rounding-for-floating-point-square-root", "title": "How to Perform Tuckerman Rounding for Floating Point Square Root", "body": "<p>I am trying to perform a Tuckerman Rounding Test in order to determine the correctly rounded to nearest result.</p>\n\n<p>I created a program in C++ to compare two solutions to a square root of a number and perform a tuckerman test on them.  However, the C++ math library solution fails to pass the tuckerman test, so I'm wondering what could be wrong?</p>\n\n<p>Here is my output:</p>\n\n<pre><code>Square root program started\nInput value is 62a83003\n\n===Tuckerman Test with MATLAB result===\nSquare root result from MATLAB = 5112b968\ng*(g-ulp) = 62a83001\nb = 62a83003\ng*(g+ulp) = 62a83003\n=====&gt;Passes Tuckerman test\n\n\n===Tuckerman Test with correct result===\nCorrect square root result = 5112b969\ng*(g-ulp) = 62a83003\nb = 62a83003\ng*(g+ulp) = 62a83005\n=====&gt;Fails Tuckerman test\n</code></pre>\n\n<p>Here is my code (C++):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nunion newfloat{\n    float f;\n    unsigned int i;\n};\n\nint main ()\n{\n// Declare new floating point numbers\nnewfloat input;\nnewfloat result, resultm1, resultp1;\nnewfloat correct_result, correct_resultm1, correct_resultp1;\nnewfloat resultm1_times_result, resultp1_times_result;\nnewfloat correct_resultm1_times_result, correct_resultp1_times_result;\n\n// Print message at start of program\ncout &lt;&lt; \"Square root program started\" &lt;&lt; endl;\ninput.i = 0x62A83003; // Input we are trying to find the square root of\ncout &lt;&lt; \"Input value is \" &lt;&lt; hex &lt;&lt; input.i &lt;&lt; \"\\n\" &lt;&lt;  endl; // Print input value\n\nresult.i = 0x5112B968; // Result from MATLAB\nresultm1.i = result.i - 1; // value minus 1 ulp\nresultp1.i = result.i + 1; // value plus 1 ulp\n\ncorrect_result.f = sqrt(input.f);          // Compute correct square root\ncorrect_resultm1.i = correct_result.i - 1; // correct value minus 1 ulp\ncorrect_resultp1.i = correct_result.i + 1; // correct value plus 1 ulp\n\nresultm1_times_result.f = result.f * resultm1.f; // Compute g(g-ulp) for matlab result\nresultp1_times_result.f = result.f * resultp1.f; // Compute g(g+ulp) for matlab result\n\ncorrect_resultm1_times_result.f = correct_result.f * correct_resultm1.f; // Compute g*(g-ulp) for correct result\ncorrect_resultp1_times_result.f = correct_result.f * correct_resultp1.f; // Compute g*(g+ulp) for correct result\n\n\n// Print output from MATLAB algorithm and perform tuckerman test\ncout &lt;&lt; \"===Tuckerman Test with MATLAB result===\" &lt;&lt; endl;\ncout &lt;&lt; \"Square root result from MATLAB = \" &lt;&lt; result.i &lt;&lt; endl;\ncout &lt;&lt; \"g*(g-ulp) = \" &lt;&lt; hex &lt;&lt; resultm1_times_result.i &lt;&lt; endl;\ncout &lt;&lt; \"b = \" &lt;&lt; hex &lt;&lt; input.i &lt;&lt; endl;\ncout &lt;&lt; \"g*(g+ulp) = \" &lt;&lt; hex &lt;&lt; resultp1_times_result.i &lt;&lt; endl;\nif ((resultm1_times_result.f &lt; input.f) &amp;&amp; (input.f &lt;= resultp1_times_result.f))\n  cout &lt;&lt; \"=====&gt;Passes Tuckerman test\" &lt;&lt; endl;\nelse\n  cout &lt;&lt; \"=====&gt;Fails Tuckerman test\" &lt;&lt; endl;\n\n\ncout &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n// Print output from C++ sqrt math library and perform tuckerman test\ncout &lt;&lt; \"===Tuckerman Test with correct result===\" &lt;&lt; endl;\ncout &lt;&lt; \"Correct square root result = \" &lt;&lt; hex &lt;&lt; correct_result.i &lt;&lt; endl;\ncout &lt;&lt; \"g*(g-ulp) = \" &lt;&lt; hex &lt;&lt; correct_resultm1_times_result.i &lt;&lt; endl;\ncout &lt;&lt; \"b = \" &lt;&lt; hex &lt;&lt; input.i &lt;&lt; endl;\ncout &lt;&lt; \"g*(g+ulp) = \" &lt;&lt; hex &lt;&lt; correct_resultp1_times_result.i &lt;&lt; endl;\nif ((correct_resultm1_times_result.f &lt; input.f) &amp;&amp; (input.f &lt;= correct_resultp1_times_result.f))\n  cout &lt;&lt; \"=====&gt;Passes Tuckerman test\" &lt;&lt; endl;\nelse\n  cout &lt;&lt; \"=====&gt;Fails Tuckerman test\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 5, "creation_date": 1423090404, "post_id": 28333049, "comment_id": 45013123, "body": "You&#39;re invalidating your iterator by removing it from the map."}, {"owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1423090553, "post_id": 28333049, "comment_id": 45013191, "body": "Is there any way to remove an element with some itterator? I need 2 find an element, attach them, and them made them removed from my maps."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1423090660, "post_id": 28333049, "comment_id": 45013248, "body": "Sure. Use <code>i = keymap.erase(i);</code> and don&#39;t increment the iterator."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423091082, "post_id": 28333175, "comment_id": 45013440, "body": "and so it still doesn&#39;t work. Same mistake."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423091294, "post_id": 28333175, "comment_id": 45013519, "body": "@MishaTihonov, did you make sure to remove the <code>++i</code> in the <code>for</code> line?"}, {"owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423091399, "post_id": 28333175, "comment_id": 45013561, "body": "@R Sahu  so now ive just copied ur code to be sure. Still nothing."}, {"owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423091949, "post_id": 28333175, "comment_id": 45013763, "body": "@R Sahu, it crashes on while-line. Before erasing."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423092055, "post_id": 28333175, "comment_id": 45013804, "body": "@MishaTihonov, that makes sense now. See my update."}, {"owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "edited": false, "score": 0, "creation_date": 1423092561, "post_id": 28333175, "comment_id": 45013974, "body": "@R Sahu, yeap, ure right. I had mistake there. Just changed my while into      while (tmp == mytextmap.end()) and now it works. Thank you!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1423091758, "last_edit_date": 1423091758, "creation_date": 1423090651, "answer_id": 28333175, "question_id": 28333049, "link": "https://stackoverflow.com/questions/28333049/map-iterator-not-deferencable/28333175#28333175", "title": "Map iterator not deferencable", "body": "<p>After the line</p>\n\n<pre><code>keymap.erase(i);\n</code></pre>\n\n<p>the iterator, <code>i</code>, is invalid.</p>\n\n<p>Try:</p>\n\n<pre><code>for (auto i = keymap.begin(); i != keymap.end(); )\n{\n   int j = ((i-&gt;second) / sumkey)*sum;\n   auto tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n   while (tmp-&gt;second != j)\n   {\n      j--;\n      tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n   }\n   key[(*tmp).second] = i-&gt;second;\n   auto next = i;\n   std::advance(next, 1);\n   keymap.erase(i);\n   i = next;\n   mytextmap.erase(tmp);\n}\n</code></pre>\n\n<p>If you are using a C++11 compiler, you can use:</p>\n\n<pre><code>for (auto i = keymap.begin(); i != keymap.end(); )\n{\n   int j = ((i-&gt;second) / sumkey)*sum;\n   auto tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n   while (tmp-&gt;second != j)\n   {\n      j--;\n      tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n   }\n   key[(*tmp).second] = i-&gt;second;\n   i = keymap.erase(i);\n   mytextmap.erase(tmp);\n}\n</code></pre>\n\n<p><strong>Update, in response to OP's comment</strong></p>\n\n<p>I think the problem lies in the lines:</p>\n\n<pre><code>   while (tmp-&gt;second != j)\n   {\n      j--;\n      tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n   }\n   key[(*tmp).second] = i-&gt;second;\n</code></pre>\n\n<p>What happens when <code>tmp == mytextmap.end()</code>?</p>\n\n<p>I don't understand what you are trying to accomplish in those lines. I suggest you add some checks that make sure that you don't access <code>tmp</code> when <code>tmp == mytextmap.end()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4530662, "user_type": "registered", "profile_image": "https://graph.facebook.com/765690593515299/picture?type=large", "display_name": "Misha  Tihonov", "link": "https://stackoverflow.com/users/4530662/misha-tihonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1423090782, "accepted_answer_id": 28333175, "answer_count": 1, "score": -2, "last_activity_date": 1521475729, "creation_date": 1423090023, "last_edit_date": 1521475729, "question_id": 28333049, "link": "https://stackoverflow.com/questions/28333049/map-iterator-not-deferencable", "closed_reason": "Duplicate", "title": "Map iterator not deferencable", "body": "<p>I have to find in <code>mytextmap</code> the closest value to <code>keymap</code>, for all <code>keymap</code>'s elements and attach it to each other in a new <code>map &lt;char, char&gt;</code> called <code>key</code>(key of <code>key</code> is key of <code>keymap</code>, value is key of <code>mytextmap</code>).  </p>\n\n<p>Here my attempt: </p>\n\n<pre><code>for (auto i = keymap.begin(); i != keymap.end();){\n    int j = ((i-&gt;second) / sumkey)*sum;\n    auto tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n    while (tmp-&gt;second != j)\n    {\n        j--;\n        tmp = find_value(mytextmap.begin(), mytextmap.end(), j);\n    }\n    key[(*tmp).second] = i-&gt;second;\n    i=keymap.erase(i);\n    mytextmap.erase(tmp);\n}\n</code></pre>\n\n<p>find_value - returns an itterator for element in (map.begin(), map.end()) with value(like j in my code). </p>\n\n<p>There is an error, somewhere. Crash error: \"expression map/set iterator not dereferencable.<br>\nProblem is not in erase(already fixed).  On while-line it crahes. Sting before works, string after - no.</p>\n"}, {"tags": ["c++", "boost-python"], "answers": [{"tags": [], "owner": {"reputation": 2027, "user_id": 461271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c1b5bf6676f583a34a50404ce809670?s=128&d=identicon&r=PG", "display_name": "Aleksey Vitebskiy", "link": "https://stackoverflow.com/users/461271/aleksey-vitebskiy"}, "is_accepted": false, "score": 1, "last_activity_date": 1423096117, "creation_date": 1423096117, "answer_id": 28334152, "question_id": 28333027, "link": "https://stackoverflow.com/questions/28333027/boost-python-and-templates/28334152#28334152", "title": "boost python and templates", "body": "<p>You have to remember that templated classes don't actually exist until you specialize the template, this means that unless you pre-specialize your iterator no symbols are exported, so nothing to link to.  You'd have to pre-specialize your iterator for every combination of types you plan on using and then separately expose each specialization to Python.</p>\n\n<p>Another solution, is <a href=\"http://www.cplusplus.com/articles/oz18T05o/\" rel=\"nofollow\">type erasure</a>.  You'd need to modify your iterator to have a non-templated base class.  The portion of your class that requires templates would inherit from your non-templated base.  You'll then be able to wrap the base class, but templated stuff would be inaccessible in Python.</p>\n\n<p>In general, I try to avoid templates in the public interface of any library I create for external consumption.  You can template all you want in your implementation, but your public interface has to produce actual linker symbols.</p>\n"}], "owner": {"reputation": 917, "user_id": 2406467, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/852672aa770bb5f53d45556fb956b0f3?s=128&d=identicon&r=PG", "display_name": "user2406467", "link": "https://stackoverflow.com/users/2406467/user2406467"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423096117, "creation_date": 1423089948, "question_id": 28333027, "link": "https://stackoverflow.com/questions/28333027/boost-python-and-templates", "title": "boost python and templates", "body": "<p>I have a piece of C++ code that I'm trying to wrap using boost python that looks roughly like this:</p>\n\n<p>header file:</p>\n\n<pre><code>template&lt;class CatalogClass, class MemberClass&gt;\nclass MyIterator\n{\n    public:\n        MyIterator(SomeOtherArg&amp; arg);\n\n    private:\n        Blah&lt;CatalogClass,MemberClass&gt;* mIterator;\n</code></pre>\n\n<p>cpp file:</p>\n\n<pre><code>template&lt;class CatalogClass, class MemberClass&gt;\nMyIterator&lt;CatalogClass, MemberClass&gt;::MyIterator(SomeOtherArg&amp; arg)\n{\n    mIterator = new Blah&lt;CatalogClass,MemberClass&gt;(arg);\n}\n</code></pre>\n\n<p>Boost cpp:</p>\n\n<pre><code>class_&lt;MyIterator&lt;CatalogClass,MemberClass&gt;&gt;(\"MyIterator\", init&lt;SomeOtherArg&amp;&gt;())\n;\n</code></pre>\n\n<p>My reason for the parameterization is so that the MyIterator can be used by a variety of classes, and thus, I don't need to rewrite this iterator for every class that derives from CatalogClass/MemberClass.  However, I get an error on compilation/linking that says:</p>\n\n<pre><code>Undefined symbols for architecture x86_64: MyIterator&lt;CatalogClass,MemberClass&gt;::MyIterator(SomeOtherArg&amp;): referenced from boost::python::objects::value_holder&lt;MyIterator&lt;CatalogClass, MemberClass&gt; &gt;::value_holder&lt;boost::python::objects::reference_to_value&lt;SomeOtherArg&amp;&gt; &gt;(_object*, boost::python::objects::reference_to_value&lt;SomeOtherArg&amp;&gt;) in Test.o\n</code></pre>\n\n<p>Where else is it expecting me to define this?  Thanks!</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1423089925, "post_id": 28332933, "comment_id": 45012898, "body": "Check where you use <code>fout</code> and <code>fin</code>.  Add <code>#include &lt;string&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1423090978, "last_edit_date": 1423090978, "creation_date": 1423090092, "answer_id": 28333065, "question_id": 28332933, "link": "https://stackoverflow.com/questions/28332933/c-fstream-not-working-properly/28333065#28333065", "title": "C++ fstream not working properly", "body": "<pre><code>if(fout.is_open()) { // &lt;&lt;&lt; should be fin\n    while(getline(fin,s)) {\n        cout&lt;&lt;\"here\";\n        cout&lt;&lt;s&lt;&lt;endl;\n    }\n\n    fout.close(); // &lt;&lt;&lt; also fin is needed here!\n}\n</code></pre>\n\n<p>You're confusing <code>fin</code> and <code>fout</code> in your code. </p>\n\n<p>See the fixed version <a href=\"http://coliru.stacked-crooked.com/a/1272b7e54a5ce474\" rel=\"nofollow\">here</a> please (note I've just used a predefined string instead of user input):</p>\n\n<pre><code>fin.open(\"test.txt\");\nif(fin.is_open()) {\n    while(getline(fin,s)) {\n        cout&lt;&lt;\"here\";\n        cout&lt;&lt;s&lt;&lt;endl;\n    }\n    fin.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 5788, "user_id": 1840899, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/eb783ff1068a7c9d2fbcc5b3b879a4ff?s=128&d=identicon&r=PG", "display_name": "sheetal_158", "link": "https://stackoverflow.com/users/1840899/sheetal-158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 28333065, "answer_count": 1, "score": -3, "last_activity_date": 1423090978, "creation_date": 1423089611, "last_edit_date": 1423090101, "question_id": 28332933, "link": "https://stackoverflow.com/questions/28332933/c-fstream-not-working-properly", "title": "C++ fstream not working properly", "body": "<p>This program is executing without giving any error. But nothing seems to be written or read from test.txt. </p>\n\n<p>Please help me spot the mistake. I feel I have implemented ofstream and ifstream correctly. I am unable to spot what I am missing.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\n\nint main(int argc, const char * argv[]) {\n\n   ofstream fout;\n   ifstream fin;\n   string s;\n   cout&lt;&lt;\"Enter a string: \";\n   getline(cin,s);\n\n   fout.open(\"test.txt\");\n   if(fout.is_open())\n   {\n      fout&lt;&lt;s;\n      fout.close();\n   }\n   else\n   {\n      cout&lt;&lt;\"Error \";\n   }\n\n   fin.open(\"test.txt\");\n\n   if(fout.is_open())\n   {\n      while(getline(fin,s))\n      {\n         cout&lt;&lt;\"here\";\n         cout&lt;&lt;s&lt;&lt;endl;\n      }\n      fout.close();\n   }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "c++11", "vtable"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1423089786, "post_id": 28332918, "comment_id": 45012821, "body": "No. The compiler doesn&#39;t even know that <code>Bar</code> exists (assuming the most common case of it being in another translation unit with whole-program optimization disabled) when it&#39;s determining how to compile code that calls <code>Foo::fn</code>. Why are you worried about vtable size?"}, {"owner": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "edited": false, "score": 0, "creation_date": 1423089808, "post_id": 28332918, "comment_id": 45012836, "body": "I suspect the vtable stays the same size but the final marks it so the compiler will not allow overrides in derived classes"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1423089984, "post_id": 28332918, "comment_id": 45012928, "body": "There are typically no vtables in instances of classes. Instances contain vptrs."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1423090615, "post_id": 28332918, "comment_id": 45013225, "body": "A better question might be to ask when the vtable can be ignored. E.g. <code>void (Bar &amp;b) { b.fn(); }</code>. This can ignore the vtable as it knows that <code>b.fn()</code> must call <code>B::fn</code>."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1423090770, "post_id": 28332918, "comment_id": 45013305, "body": "No it won&#39;t make the vtable smaller. Even if you&#39;ve declared it final, it still needs to be in the vtable since you may invoke it through a base class."}], "answers": [{"comments": [{"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1423096687, "post_id": 28333192, "comment_id": 45015133, "body": "I think this pretty much covers what I was looking for, assuming that I&#39;m correct about you stating that <code>final</code> is only used to ensure subclasses can&#39;t override the function, but doesn&#39;t affect the outcome post-compilation. It sounds like I may be misusing my terminology... I&#39;m inferring from your answer that vtables are kept with the class. What is stored with the actual instances?"}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1423096908, "post_id": 28333192, "comment_id": 45015196, "body": "Never mind - found what I was looking for. Edited question to follow."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 2, "creation_date": 1423098520, "post_id": 28333192, "comment_id": 45015602, "body": "The class contains a pointer to the vtable(s) for the instance. [You can have multiple vtables in cases where there is multiple inheritance]"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 3, "last_activity_date": 1423090734, "creation_date": 1423090734, "answer_id": 28333192, "question_id": 28332918, "link": "https://stackoverflow.com/questions/28332918/virtual-function-efficiency-and-the-final-keyword/28333192#28333192", "title": "Virtual function efficiency and the &#39;final&#39; keyword", "body": "<p>I've not EVER cared about the size of the vtable. It is typically relatively small, and there is only one per class declaration. What is much more bothersome is extra space taken up in the class instances, since, except for singleons, class instances are often many of. So adding extra elements into a class, in some way or another, will definitely affect the amount of memory. If it's REALLY bothering you that the vtable is too large, then doing some redesign so that there aren't so many different virtual member functions (perhaps splitting the class hierarchy into several classes) or fewer derived classes. But really, even if you have hundreds of classes, each with a hundred virtual member functions, it's still relatively small - 200 classes with 100 members would take up 20000 * 8 bytes per entry [64-bit architecture] -> 160KB. Surely the 20000 functions [yes, in theory, you only need ONE new function per derived class to need a new vtable, but that is rather a silly design, so unlikely in reality]</p>\n\n<p>The purpose of the <code>final</code> keyword is to ensure that you don't derive from it further - this is useful for example if you have a basic class hierarchy where some particular function should not be \"changed\". Say for example you have:</p>\n\n<pre><code>class user_base\n{\n    public:\n      virtual bool check_password(); {... magical code .. };\n      virtual bool is_super_user() = 0;\n};\n\nclass superuser : public user_base\n{\n    public:\n      virtual bool check_password() final  \n        { .... magical code ...\n          ... extra checks to ensure no remote login... \n        }\n      virtual bool is_super_user() final { return true; }\n\n };\n\n class user : public user_base\n {\n  public:\n      virtual bool is_super_user() final { return false; }\n };\n</code></pre>\n\n<p>You have to trick around a bit to ensure that <code>user_base</code> isn't used as a base-class for a <code>fake_super_user</code>, and of course, there are other BIG security issues with such a design, but it gives you some idea.</p>\n"}, {"comments": [{"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1423764740, "post_id": 28352929, "comment_id": 45291395, "body": "My knowledge of assembly is somewhat minimal, but this seems to be what I was looking for... In essence, this shows that the call to <code>Bar::fn</code> is more efficient when the instance of <code>Bar</code> is stored as a <code>Bar</code>, but there is no gain when it is stored as a <code>Foo</code>, correct?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 1, "creation_date": 1423768713, "post_id": 28352929, "comment_id": 45293641, "body": "@Conduit Correct. In general, there is no way for a compiler to statically determine that a <code>Foo*</code> or <code>Foo&amp;</code> actually refers to a <code>Bar</code> instance."}, {"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1423768825, "post_id": 28352929, "comment_id": 45293706, "body": "Makes sense given a little thought. Exactly what I was looking for then - thanks!"}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 4, "last_activity_date": 1423166345, "creation_date": 1423166345, "answer_id": 28352929, "question_id": 28332918, "link": "https://stackoverflow.com/questions/28332918/virtual-function-efficiency-and-the-final-keyword/28352929#28352929", "title": "Virtual function efficiency and the &#39;final&#39; keyword", "body": "<p>If <code>fn</code> is defined as <code>final</code> in <code>Bar</code>, the compiler can dispatch calls to <code>fn</code> through a pointer or reference to <code>Bar</code> statically since it knows that <code>Bar::fn</code> is the final overrider. For example, this program fragment:</p>\n\n<pre><code>struct Foo {\n  virtual void fn();\n};\n\nstruct Bar : Foo {\n  void fn() final override;\n};\n\nvoid with_foo(Foo&amp; o) { o.fn(); }\nvoid with_bar(Bar&amp; o) { o.fn(); }\n</code></pre>\n\n<p>compiles to (<a href=\"http://goo.gl/Cxb1XO\" rel=\"nofollow\">See gcc.godbolt.org for details</a>):</p>\n\n<pre><code>with_foo(Foo&amp;):\n    subq    $8, %rsp\n    movq    (%rdi), %rax\n    call    *(%rax)\n    addq    $8, %rsp\n    ret\n\nwith_bar(Bar&amp;):\n    subq    $8, %rsp\n    call    Bar::fn()\n    addq    $8, %rsp\n    ret\n</code></pre>\n\n<p>the call in <code>with_foo</code> is dynamically dispatched (<code>call *(%rax)</code> is an indirect call) through the vtable, but the call in <code>with_bar</code> statically dispatches to <code>Bar::fn()</code>.</p>\n\n<p>The simplest method to make <code>Bar::fn</code> be the final overrider of <code>Foo::fn</code> without changing behavior is to define it to statically call <code>Foo::fn</code>:</p>\n\n<pre><code>struct Bar : Foo {\n  void fn() final override { Foo::fn(); }\n};\n</code></pre>\n"}], "owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 1, "accepted_answer_id": 28352929, "answer_count": 2, "score": 1, "last_activity_date": 1423166345, "creation_date": 1423089551, "last_edit_date": 1423098230, "question_id": 28332918, "link": "https://stackoverflow.com/questions/28332918/virtual-function-efficiency-and-the-final-keyword", "title": "Virtual function efficiency and the &#39;final&#39; keyword", "body": "<p>Consider a program that has a class <code>Foo</code> containing a function <code>Foo::fn</code> declared like this:</p>\n\n<pre><code>virtual void fn();\n</code></pre>\n\n<p>and a subclass of <code>Foo</code> called <code>Bar</code>. Will declaring <code>Bar::fn</code> like this:</p>\n\n<pre><code>virtual void fn() override final;\n</code></pre>\n\n<p>cause calls to <code>fn</code> in <code>Bar</code> or subclasses of <code>Bar</code> to be any more efficient, or will it just keep subclasses of <code>Bar</code> from overriding <code>fn</code>? If calls are made more efficient using <code>final</code>, what is the simplest, most efficient method to define <code>Bar::fn</code> such that its functionality is exactly that of <code>Foo::fn</code>?</p>\n"}, {"tags": ["c++", "qt", "styles", "qscrollarea"], "comments": [{"owner": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "edited": false, "score": 1, "creation_date": 1423089592, "post_id": 28332799, "comment_id": 45012730, "body": "The QScrollBar is just a widget member of the scroll area. Can you resize the horizontal scroll bar when you get a size event in your scroll area? If so, you could add extra rendering to the scroll area paint event to draw your percent and resolution"}, {"owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "reply_to_user": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "edited": false, "score": 0, "creation_date": 1423093926, "post_id": 28332799, "comment_id": 45014387, "body": "The QScrollbar get smaller, but it is alignment to left border. And I don&#180;t know how to place there an new widget (also at his right side..)"}], "answers": [{"tags": [], "owner": {"reputation": 35314, "user_id": 344347, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1d83837bce9d9a2656c4f5704d40c430?s=128&d=identicon&r=PG", "display_name": "Pavel Strakhov", "link": "https://stackoverflow.com/users/344347/pavel-strakhov"}, "is_accepted": true, "score": 1, "last_activity_date": 1423097613, "creation_date": 1423097613, "answer_id": 28334402, "question_id": 28332799, "link": "https://stackoverflow.com/questions/28332799/add-widget-next-to-qscrollbar/28334402#28334402", "title": "Add widget next to qscrollbar", "body": "<p>The main idea is to create an overlay obscuring default horizontal scroll bar and displaing your own bottom line instead.</p>\n\n<ol>\n<li>Create a widget representing the bottom line, i.e. a widget with labels displaying some information and a horizontal QScrollBar, all together put in a hbox layout.</li>\n<li>Put this widget in the scroll area without adding it to a layout by making QScrollArea direct parent widget of this widget.</li>\n<li>Use <code>move()</code> and <code>resize()</code> on the bottom line widget to position it properly on initialization. Also resize and reposition it on scroll area resize (you can use event filters or inheritance to get to resize events).</li>\n<li>Make sure that scroll area's <code>horizontalScrollBarPolicy</code> is <code>Qt::ScrollBarAlwaysOn</code> so that scroll area's internal layout always keeps space enough for bottom line widget to fit in.</li>\n<li>Also make sure that bottom line widget has the same height as default scroll bar. It should be easy as long as you remove spacing and margins in the hbox layout and labels (or other widgets) don't require more vertical space than a scroll bar.</li>\n<li>Use <code>horizontalScrollBar()</code> to get scroll area's internal <code>QScrollBar</code> and syncronize it with your own bar. <code>QScrollBar</code> has <code>rangeChanged()</code> and <code>valueChanged()</code> signals so you can connect to them and update your bar properly. When user changes value of your scroll bar and triggers its <code>valueChanged()</code> signal, you should set the same value for the internal scrollbar. You can protect from infinite recursion in there by using a flag that indicates that this is your own change. </li>\n</ol>\n"}], "owner": {"reputation": 1675, "user_id": 1611317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/367f6a8d2c0d2847a3f54711f94f5a09?s=128&d=identicon&r=PG", "display_name": "Viatorus", "link": "https://stackoverflow.com/users/1611317/viatorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 28334402, "answer_count": 1, "score": 0, "last_activity_date": 1423097613, "creation_date": 1423089056, "question_id": 28332799, "link": "https://stackoverflow.com/questions/28332799/add-widget-next-to-qscrollbar", "title": "Add widget next to qscrollbar", "body": "<p>How do I place a widget next to a QScrollbar like here seen:\n<img src=\"https://i.stack.imgur.com/zCg2w.png\" alt=\"enter image description here\"></p>\n\n<p>I use a QScrollArea and overwrite the Horizontal-QScrollBar. First I thought, I could use the paintEvent to draw a text like the \"100 %\" next to the bar. But I can only overwrite the existing painting.</p>\n\n<p>Now I think, the only opportunity would be to implement the hole QScorllBarPrivate from the source code... anyone any idea?</p>\n"}, {"tags": ["c++", "multithreading", "boost", "mutex", "boost-mutex"], "answers": [{"comments": [{"owner": {"reputation": 1683, "user_id": 1098041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3277172b7213117c165e42611c0749a?s=128&d=identicon&r=PG", "display_name": "F&#233;lix Cantournet", "link": "https://stackoverflow.com/users/1098041/f%c3%a9lix-cantournet"}, "edited": false, "score": 0, "creation_date": 1423090137, "post_id": 28332607, "comment_id": 45012993, "body": "Exactly : a mutex doesn&#39;t protect any variable or value or memory space. a Mutex is a set of doors with one single key. You put doors all around the area you want to protect and are guaranteed that only 1 thread can open any door at any moment."}, {"owner": {"reputation": 678, "user_id": 54745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bb4c4997bcc7a8477271e602f226801?s=128&d=identicon&r=PG", "display_name": "Jason Harrison", "link": "https://stackoverflow.com/users/54745/jason-harrison"}, "edited": false, "score": 0, "creation_date": 1423093956, "post_id": 28332607, "comment_id": 45014401, "body": "I think my understanding of mutexes is accurate enough."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 678, "user_id": 54745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bb4c4997bcc7a8477271e602f226801?s=128&d=identicon&r=PG", "display_name": "Jason Harrison", "link": "https://stackoverflow.com/users/54745/jason-harrison"}, "edited": false, "score": 0, "creation_date": 1423094049, "post_id": 28332607, "comment_id": 45014424, "body": "@JasonHarrison Ok! Just a hunch of course, based on the few things you mentioned (it was ambiguous, so I believe you if you say you do). Feel free to disregard that part."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1423088674, "last_edit_date": 1423088674, "creation_date": 1423088364, "answer_id": 28332607, "question_id": 28332530, "link": "https://stackoverflow.com/questions/28332530/do-all-threads-in-boostthread-group-share-the-same-thread-with-respect-to-boos/28332607#28332607", "title": "Do all threads in boost::thread_group share the same thread with respect to boost::recursive_mutex", "body": "<p>A boost thread_group is a group of threads.</p>\n\n<p>All the threads are, by definition, distinct and unique.</p>\n\n<hr>\n\n<p>So, if your mutex fails to... \"mut-ex\" (mutually exclude) this indicates a programmer error elsewhere.</p>\n\n<p>On a whim, I'd suggest that perhaps your expectations of mutexes (recursive or not) is not accurate (in similar way as the expectations of a thread group were)?</p>\n\n<p>The thing you might have missed is that <strong>all</strong> parties accessing the shared objects /must/ acquire the mutex at all times of these accesses. It is <em>not enough</em> to have one thread \"guard\" the shared objects, to magically keep other threads out.</p>\n\n<p>Mutexes are a co\u00f6perative proposition. The term \"critical section\" is actually a bit nicer in this respect: you \"mark\" the critical sections in code, as opposed to \"marking\" the critical data (whatever that would be).</p>\n"}], "owner": {"reputation": 678, "user_id": 54745, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9bb4c4997bcc7a8477271e602f226801?s=128&d=identicon&r=PG", "display_name": "Jason Harrison", "link": "https://stackoverflow.com/users/54745/jason-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423088674, "creation_date": 1423088057, "question_id": 28332530, "link": "https://stackoverflow.com/questions/28332530/do-all-threads-in-boostthread-group-share-the-same-thread-with-respect-to-boos", "title": "Do all threads in boost::thread_group share the same thread with respect to boost::recursive_mutex", "body": "<p>I suspect that based on the behavior of my code that if I have a boost::thread_group accessing an object protected by a boost::recursive_mutex that the mutex does not prevent threads from within the group from simultaneously entering the protected area.</p>\n\n<p>This is confusing because I see all of the threads listed in the debugger (xcode).</p>\n\n<p>Is this a known issue?  I couldn't find any documentation on it.</p>\n"}, {"tags": ["c#", "c++", "lua", "porting", "lua-5.2"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423087955, "post_id": 28332452, "comment_id": 45012017, "body": "The registry is not the same as the global table. The global table was <code>LUA_GLOBALSINDEX</code> in lua 5.1."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1423088031, "post_id": 28332452, "comment_id": 45012050, "body": "Have you looked at <a href=\"http://www.lua.org/manual/5.2/manual.html#8.3\" rel=\"nofollow noreferrer\">Changes in the API</a>?"}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423088339, "post_id": 28332452, "comment_id": 45012195, "body": "@Etan - I did come across that page, but it doesnt provide a translation, only recommendation to get the global environment from the registry.  I very easily could be confusing the registry and global tables."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423088566, "post_id": 28332452, "comment_id": 45012308, "body": "It does explicitly indicate that you get one from the other so, while yes some confusion is possible, it is fairly clear that they aren&#39;t the same. Also <code>LUA_REGISTRYINDEX</code> hasn&#39;t gone anywhere so your questions about replacing that with something else are unnecessary."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1423088636, "post_id": 28332452, "comment_id": 45012344, "body": "Replacing a <code>get</code> call with a <code>set</code> call isn&#39;t exactly a meaningful statement either (item <code>11</code>) and <code>luaL_getmetatable</code> <a href=\"http://www.lua.org/manual/5.2/manual.html#luaL_getmetatable\" rel=\"nofollow noreferrer\">still exists in lua 5.2</a>."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423088989, "post_id": 28332452, "comment_id": 45012471, "body": "Right, <code>LUA_REGISTRYINDEX</code> was a constant value, so before we could just hardcode it, but that is no longer the case in 5.2.  <code>luaL_getmetatable</code> is a #define and not accessible through P/Invoke.  <code>11)</code> is actually number <code>9)</code> so I&#39;ve removed it (I had a helper function called the same thing that pointed to <code>lua_getfield...</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423089213, "post_id": 28332452, "comment_id": 45012575, "body": "<code>LUA_REGISTRYINDEX</code> is still a define in 5.2 from what I can see."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423089246, "post_id": 28332452, "comment_id": 45012590, "body": "Yes, <code>luaL_getmetatable</code> is a define. So you can&#39;t use that but you can use what it is a define for, no? Which is <a href=\"http://www.lua.org/source/5.2/lauxlib.h.html#luaL_getmetatable\" rel=\"nofollow noreferrer\"><code>(lua_getfield(L, LUA_REGISTRYINDEX, (n)))</code></a>."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423089500, "post_id": 28332452, "comment_id": 45012695, "body": "But again, I dont know what <code>LUA_REGISTRYINDEX</code> is.  Its no longer <code>-10000</code>.  So before I could do <code>lua_getfield(L, -10000, n)</code>, but now I cant.  because its a <code>pseudo-index</code>."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423089834, "post_id": 28332452, "comment_id": 45012856, "body": "It was <b>always</b> a <a href=\"http://www.lua.org/manual/5.1/manual.html#3.3\" rel=\"nofollow noreferrer\"><code>pseudo-index</code></a>. Have you looked at the <a href=\"http://www.lua.org/source/5.2/lua.h.html#LUA_REGISTRYINDEX\" rel=\"nofollow noreferrer\">5.2 define for it</a>?"}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423090244, "post_id": 28332452, "comment_id": 45013053, "body": "If I hardcode LUA_REGISTRYINDEX to <code>-1001000</code>, the first call to <code>lua_pushvalue(luaState, LUA_GLOBALSINDEX);</code> throws a <code>AccessViolationException</code>.  However in 5.1, when the value was <code>-10000</code> it worked."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423090468, "post_id": 28332452, "comment_id": 45013155, "body": "If I hardocde LUA_REGISTRYINDEX to <code>-16000</code>, the first call to <code>lua_settable(luaState, LUA_REGISTRYINDEX);</code> throws a <code>AccessViolationException</code>.  This also worked in 5.1."}, {"owner": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1423090649, "post_id": 28332452, "comment_id": 45013244, "body": "4 and 5 are the same example, is this a copy paste error?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423090714, "post_id": 28332452, "comment_id": 45013274, "body": "You need to find out what <code>LUAI_BITSINT</code> is set to to find out what the value of <code>LUAI_MAXSTACK</code> is before you can find out what <code>LUA_REGISTRYINDEX</code> is."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1423090864, "post_id": 28332452, "comment_id": 45013345, "body": "@greatwolf - Yeah I think I just copied it twice, updated."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423090896, "post_id": 28332452, "comment_id": 45013365, "body": "@Etan - The examples in my comments are with both of the possible options.  Hardcoding to either one doesnt seem to work.  Just for completeness, its set to <code>#define LUAI_BITSINT\t32</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423091617, "post_id": 28332452, "comment_id": 45013641, "body": "Ah, I missed the difference there. Apologies. Compile a small program against the appropriate header that prints out the value and see what it is?"}, {"owner": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1423091699, "post_id": 28332452, "comment_id": 45013666, "body": "Also try preprocessing c source it&#39;ll show exactly what those constants are."}, {"owner": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1423091795, "post_id": 28332452, "comment_id": 45013693, "body": "I&#39;m still a little unclear why, you need to hardcode those pseudo-indices since that&#39;s kind of fragile. It should be treated as implementation detail."}, {"owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "reply_to_user": {"reputation": 18839, "user_id": 234175, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37f386df1c4e98d9ce0350431f590f2a?s=128&d=identicon&r=PG", "display_name": "greatwolf", "link": "https://stackoverflow.com/users/234175/greatwolf"}, "edited": false, "score": 0, "creation_date": 1423106183, "post_id": 28332452, "comment_id": 45017362, "body": "@greatwolf - I&#39;m not trying to hardcore them, I&#39;m looking for how to update the code so it no longer uses those values"}], "answers": [{"tags": [], "owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "is_accepted": true, "score": 1, "last_activity_date": 1423587052, "last_edit_date": 1423587052, "creation_date": 1423586616, "answer_id": 28437044, "question_id": 28332452, "link": "https://stackoverflow.com/questions/28332452/porting-from-lua-5-1-to-5-2/28437044#28437044", "title": "Porting from Lua 5.1 to 5.2", "body": "<p>I believe I've managed to upgrade this, so I'll add the details of what I did below and the conversion.  I created a C wrapper into the LUA lower level API to export the functionality I needed:</p>\n\n<p>1a) Replaced</p>\n\n<pre><code>lua_settable(luaState, LUA_REGISTRYINDEX); // LUA_REGISTRYINDEX no longer accessible\n</code></pre>\n\n<p>1b) With</p>\n\n<pre><code>lua_settablereg(luaState);\n</code></pre>\n\n<p>2a) Replaced</p>\n\n<pre><code>lua_gettable(luaState, LUA_REGISTRYINDEX); // LUA_REGISTRYINDEX no longer accessible\n</code></pre>\n\n<p>2b) With</p>\n\n<pre><code>lua_gettablereg(luaState);\n</code></pre>\n\n<p>3a) Replaced</p>\n\n<pre><code>lua_pushvalue(luaState, LUA_GLOBALSINDEX);\n</code></pre>\n\n<p>3b) With</p>\n\n<pre><code>lua_pushglobaltablefunction(luaState)\n</code></pre>\n\n<p>4a) Replaced</p>\n\n<pre><code>lua_replace(luaState, LUA_GLOBALSINDEX);\n</code></pre>\n\n<p>4b) With</p>\n\n<pre><code>lua_popglobaltablefunction(luaState)\n</code></pre>\n\n<p>5a) Replaced</p>\n\n<pre><code>luaL_ref(luaState, (int)LuaIndexes.LUA_REGISTRYINDEX); // also luaL_unref\n</code></pre>\n\n<p>5b) With</p>\n\n<pre><code>luaL_refreg(luaState); // also luaL_unrefreg\n</code></pre>\n\n<p>6a) Replaced</p>\n\n<pre><code>lua_rawgeti(luaState, LUA_REGISTRYINDEX, reference);\n</code></pre>\n\n<p>6b) With</p>\n\n<pre><code>lua_rawgetireg(luaState, reference);\n</code></pre>\n\n<p>7a) Replaced</p>\n\n<pre><code>lua_pcall(luaState, nArgs, nResults, errfunc);\n</code></pre>\n\n<p>7b) With</p>\n\n<pre><code>lua_pcalla(luaState, nArgs, nResults, errfunc);\n</code></pre>\n\n<p>8a) Replaced</p>\n\n<pre><code>lua_getfield(luaState, LUA_REGISTRYINDEX, meta);\n</code></pre>\n\n<p>8b) With</p>\n\n<pre><code>lua_getfieldreg(luaState, string meta);\n</code></pre>\n\n<p>9a) Replaced</p>\n\n<pre><code>lua_rawset(luaState, LUA_REGISTRYINDEX);\n</code></pre>\n\n<p>9b) With</p>\n\n<pre><code>lua_rawsetreg(luaState);\n</code></pre>\n\n<p>Definitions look like this:</p>\n\n<pre><code>__declspec(dllexport) void lua_pushglobaltablefunction(lua_State *L) \n{\n   lua_pushglobaltable(L);\n}\n\n__declspec(dllexport) void lua_popglobaltablefunction(lua_State *L) \n{\n   lua_rawseti(L, LUA_REGISTRYINDEX, LUA_RIDX_GLOBALS);\n}\n\n__declspec(dllexport) int luaL_regref(lua_State *L) \n{\n   return luaL_ref(L, LUA_REGISTRYINDEX);\n}\n\n__declspec(dllexport) void luaL_unregref(lua_State *L, int reference)\n{\n   luaL_unref(L, LUA_REGISTRYINDEX, reference);\n}\n\n__declspec(dllexport) void lua_settablereg(lua_State *L)\n{\n   lua_settable(L, LUA_REGISTRYINDEX);\n}\n\n__declspec(dllexport) void lua_gettablereg(lua_State *L)\n{\n   lua_gettable(L, LUA_REGISTRYINDEX);\n}\n\n__declspec(dllexport) void lua_rawsetreg(lua_State *L)\n{\n   lua_rawset(L, LUA_REGISTRYINDEX);\n}\n\n__declspec(dllexport) void lua_rawgetreg(lua_State *L)\n{\n   lua_rawget(L, LUA_REGISTRYINDEX);\n}\n\n__declspec(dllexport) void lua_rawgetireg(lua_State *L, int reference)\n{\n   lua_rawgeti(L, LUA_REGISTRYINDEX, reference);\n}\n\n__declspec(dllexport) void lua_getfieldreg(lua_State *L,const char *fieldname)\n{\n   lua_getfield(L, LUA_REGISTRYINDEX, fieldname);\n}\n\n__declspec(dllexport) int luaL_loadbuffername(lua_State *L,const char *buff, int size,const char * name)\n{\n   return luaL_loadbuffer(L,buff,size,name);\n}\n\n__declspec(dllexport) double lua_tonum(lua_State *L, int index)\n{\n   return lua_tonumber(L, index);\n}\n\n__declspec(dllexport) int lua_pcalla(lua_State *L,int nArgs,int nResults,int errfunc)\n{\n   return lua_pcall(L,nArgs,nResults,errfunc);\n}\n</code></pre>\n"}], "owner": {"reputation": 45722, "user_id": 95573, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8ceec9f7f83e3c12a72b6442393bde2a?s=128&d=identicon&r=PG", "display_name": "SwDevMan81", "link": "https://stackoverflow.com/users/95573/swdevman81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 1, "accepted_answer_id": 28437044, "answer_count": 1, "score": 4, "last_activity_date": 1423587052, "creation_date": 1423087798, "last_edit_date": 1423164209, "question_id": 28332452, "link": "https://stackoverflow.com/questions/28332452/porting-from-lua-5-1-to-5-2", "title": "Porting from Lua 5.1 to 5.2", "body": "<p>I'm having some issues porting some older Lua 5.1 code to Lua 5.2.  I would like to be able to use the stock Lua 5.2 dll/lib, so any porting would need to be completed using the existing API for Lua 5.2.  To make it a little more complicated, I'm using <code>DllImport</code> to P/Invoke some of the Lua API calls.  This means any of the <code>#define</code> shortcuts offered will not work.  For example using <code>lua_pushglobaltable</code> wont be possible.  Most of the updates are needed because <code>LUA_REGISTRYINDEX</code> is not longer accessible. </p>\n\n<p>What I have so far is the following:</p>\n\n<hr>\n\n<p>1a) Replace</p>\n\n<pre><code>lua_pushstring(luaState, \"tablename\");\nlua_settable(luaState, LUA_REGISTRYINDEX); // LUA_REGISTRYINDEX no longer accessible\n</code></pre>\n\n<p>1b) With</p>\n\n<pre><code>lua_setglobal(luaState, \"tablename\");\n</code></pre>\n\n<hr>\n\n<p>2a) Replace</p>\n\n<pre><code>lua_pushstring(luaState, \"tablename\");\nlua_gettable(luaState, LUA_REGISTRYINDEX); // LUA_REGISTRYINDEX no longer accessible\n</code></pre>\n\n<p>2b) With</p>\n\n<pre><code>lua_getglobal(luaState, \"tablename\");\n</code></pre>\n\n<hr>\n\n<p>3a) Replace</p>\n\n<pre><code>lua_pushvalue(luaState, LUA_GLOBALSINDEX);\n</code></pre>\n\n<p>3b) With</p>\n\n<pre><code>// not sure, something equivalent to lua_pushglobaltable(L)\n</code></pre>\n\n<hr>\n\n<p>4a) Replace</p>\n\n<pre><code>lua_replace(luaState, LUA_GLOBALSINDEX);\n</code></pre>\n\n<p>4b) With</p>\n\n<pre><code>// I dont even have a guess here\n</code></pre>\n\n<hr>\n\n<p>5a) Replace</p>\n\n<pre><code>luaL_ref(luaState, (int)LuaIndexes.LUA_REGISTRYINDEX); // also luaL_unref\n</code></pre>\n\n<p>5b) With</p>\n\n<pre><code>luaL_ref(luaState, &lt;some arbitrary constant&gt;); // this is probably wrong\n</code></pre>\n\n<hr>\n\n<p>6a) Replace</p>\n\n<pre><code>lua_rawgeti(luaState, LUA_REGISTRYINDEX, reference);\n</code></pre>\n\n<p>6b) With</p>\n\n<pre><code>lua_rawgeti(luaState, &lt;same arbitrary constant&gt;, reference); // this is probably wrong\n</code></pre>\n\n<hr>\n\n<p>7a) Replace</p>\n\n<pre><code>lua_pcall(IntPtr luaState, int nArgs, int nResults, int errfunc);\n</code></pre>\n\n<p>7b) With</p>\n\n<pre><code>lua_pcallk(IntPtr luaState, int nArgs, int nResults, int errfunc, int ctx, [MarshalAs(UnmanagedType.FunctionPtr)]LuaCSFunction function);\nlua_pcallk(luaState, nArgs, nResults, errfunc, 0, null);\n</code></pre>\n\n<hr>\n\n<p>8a) Replace</p>\n\n<pre><code>lua_getfield(luaState, LUA_REGISTRYINDEX, meta);\n</code></pre>\n\n<p>8b) With</p>\n\n<pre><code>luaL_setmetatable(IntPtr luaState, string meta);\n</code></pre>\n\n<hr>\n\n<p>9a) Replace</p>\n\n<pre><code>lua_rawset(luaState, LUA_REGISTRYINDEX);\n</code></pre>\n\n<p>9b) With</p>\n\n<pre><code>lua_settable(luaState, -3);\n</code></pre>\n\n<p>Right now everything compiles, but I get memory access violation exceptions, which means I probably substituted something incorrectly.  Any help would be appreciated.</p>\n"}, {"tags": ["c++", "io", "ofstream"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 8, "creation_date": 1423087332, "post_id": 28332253, "comment_id": 45011714, "body": "The thing that disturbs me most is how you abuse the constructor to manipulate <code>static</code> data members."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1423087490, "post_id": 28332253, "comment_id": 45011800, "body": "@5gon12eder that would be fun to do in languages without free functions. <code>class imAFunction {...}</code> ?"}, {"owner": {"reputation": 3124, "user_id": 354633, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kx0E0.jpg?s=128&g=1", "display_name": "antred", "link": "https://stackoverflow.com/users/354633/antred"}, "edited": false, "score": 0, "creation_date": 1423087767, "post_id": 28332253, "comment_id": 45011930, "body": "Well, you could always evaluate the stream object in a boolean context to see if it is in a good state and only write if it is. Like so <code>if ( Logger::log() ) { Logger::log() &lt;&lt; &quot;blah blah&quot;; }</code>.  But anyway, without having checked the reference, yeah I think writing to a stream that isn&#39;t opened / in a good state should be safe.  EDIT: Then again, maybe not: <a href=\"http://stackoverflow.com/questions/20693758/are-there-consequences-to-writing-to-an-unopened-stream\" title=\"are there consequences to writing to an unopened stream\">stackoverflow.com/questions/20693758/&hellip;</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423088901, "post_id": 28332253, "comment_id": 45012438, "body": "@Quentin: I admit to having done that on several occasions to abuse template specializations: <code>template&lt;&gt; class imAFunction&lt;int&gt; {int v; imAFunction(int e):v(e+2){} operator int() const {return v;} };</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423089136, "post_id": 28332253, "comment_id": 45012537, "body": "@MooingDuck static functions inside specializable wrappers are overrated I guess."}], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423089392, "post_id": 28332481, "comment_id": 45012647, "body": "@MooingDuck You&#39;re fully right in the case of  <code>Logger(true)</code>.  However in the case of  <code>Logger(false)</code> it would be needed to close it the stream if it was previously opened; otherwise the logger might continue to write."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1423090143, "last_edit_date": 1495541191, "creation_date": 1423087912, "answer_id": 28332481, "question_id": 28332253, "link": "https://stackoverflow.com/questions/28332253/writing-to-not-opened-ofstream/28332481#28332481", "title": "Writing to not opened ofstream", "body": "<p>There are a couple of issues with your logger. </p>\n\n<p>If you use <a href=\"http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/\" rel=\"nofollow noreferrer\"><code>operator&lt;&lt;</code></a> on the deactivated logger, nothing happens, but the status of the <code>out</code> stream is set to failure and it will keep it until you reset it.  This means that if subsequently you'd reactiveate your logger, nothing would be written to it anymore.  </p>\n\n<p>THe same if you'd reactivate a logger while it's already active: the <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/open/\" rel=\"nofollow noreferrer\"><code>out.open()</code></a> would also fail and nothing would be written anymore.  </p>\n\n<p>If you want to keep this design, you'll have to update your logger, and check in your constructor if <code>out</code> is already open (using <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/is_open/\" rel=\"nofollow noreferrer\"><code>out.is_open()</code></a>), and if needed <a href=\"http://www.cplusplus.com/reference/ios/ios/clear/\" rel=\"nofollow noreferrer\"><code>clear()</code></a> the error flags. </p>\n\n<p><strong><em>Addendum:</em></strong> \nIf you are worried about performance of all these <code>&lt;&lt;</code> that would unnecessarily process hypothetical output when the logger is deactivated, then you could consider using a custom <code>operator&lt;&lt;</code> for your logger class, that would take into consideration <code>mIsActive</code>.  This <a href=\"https://stackoverflow.com/a/3662908/3723423\">SO answer</a> on another question shows how it could work.   </p>\n"}, {"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088304, "creation_date": 1423088304, "answer_id": 28332584, "question_id": 28332253, "link": "https://stackoverflow.com/questions/28332253/writing-to-not-opened-ofstream/28332584#28332584", "title": "Writing to not opened ofstream", "body": "<p>Your approach has too much overhead in any case. Just use an ostream:</p>\n\n<pre><code>std::ostream logger(0);\n</code></pre>\n\n<p>In order to write to it, use inserters as usual, but you can also check if anything is connected at all to avoid the overhead:</p>\n\n<pre><code>if(logger)\n    logger &lt;&lt; \"some output\" &lt;&lt; endl;\n</code></pre>\n\n<p>Now, in order to direct the output somewhere, you attach a streambuffer:</p>\n\n<pre><code>logger.rdbuf(cout.rdbuf()); // redirect to stdout\n</code></pre>\n\n<p>You can also use a file as target:</p>\n\n<pre><code>logger.rdbuf(new filebuf(\"log.text\", ios_base::out)); // redirect to a file\n</code></pre>\n\n<p>Disclaimer: I haven't looked up the exact parameters for the filebuf creation, but still hope you get the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 0, "last_activity_date": 1423089226, "creation_date": 1423089226, "answer_id": 28332838, "question_id": 28332253, "link": "https://stackoverflow.com/questions/28332253/writing-to-not-opened-ofstream/28332838#28332838", "title": "Writing to not opened ofstream", "body": "<p>I have run a very simple benchmark:</p>\n\n<pre><code>void\ndo_log(std::ostream&amp; os)\n{\n  for (long i = 0L; i &lt; 100000000L; ++i)\n    os &lt;&lt; i &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Passing it a default-constructed <code>std::ofstream</code> (not connected to any file)</p>\n\n<pre><code>std::ofstream sink {};\ndo_log(sink);\n</code></pre>\n\n<p>makes the program (compiled using GCC 4.9 with <code>-O3</code> optimization level) take 3.1 seconds to complete.  If instead, I connect the output to <code>/dev/null</code></p>\n\n<pre><code>std::ofstream sink {\"/dev/null\"};\ndo_log(sink);\n</code></pre>\n\n<p>it takes 14.2 seconds, more than four times longer.  So, yes, writing to an invalid stream seems to be quite efficient.</p>\n\n<p>Note however, that the above code differs from your example.  If I write it as</p>\n\n<pre><code>void\ndo_log(std::ostream&amp; os)\n{\n  for (long i = 0L; i &lt; 100000000L; ++i)\n    os &lt;&lt; i &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>instead, it takes 3.7 seconds if the stream is disconnected (which makes sense because anything written to it is discarded anyway) but 35.5 seconds if connected to <code>/dev/null</code>.  Therefore, if you are concerned about performance, the first thing you should probably get rid of is the repetitive output flushing if you don't absolutely need it.</p>\n"}], "owner": {"reputation": 1263, "user_id": 2466619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b48616162f6ad348a0c242b57ff381f?s=128&d=identicon&r=PG", "display_name": "peter55555", "link": "https://stackoverflow.com/users/2466619/peter55555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1423090143, "creation_date": 1423087006, "last_edit_date": 1423087595, "question_id": 28332253, "link": "https://stackoverflow.com/questions/28332253/writing-to-not-opened-ofstream", "title": "Writing to not opened ofstream", "body": "<p>I need very simple logger to my application. But sometimes I don't want to use this logger to speed up my application.</p>\n\n<p>My logger looks like:</p>\n\n<pre><code>class Logger\n{\n    public:\n        Logger(bool isActive = true)\n        {\n            mIsActive = isActive;\n            if (isActive)\n            {\n                out.open(pathToLogFile);\n            }\n        }\n\n        static std::ofstream&amp; log()\n        {\n            return out;\n        }\n    private:\n        static bool mIsActive;\n        static std::ofstream out;\n};\n</code></pre>\n\n<p>In my application I use it as:</p>\n\n<pre><code>Logger(true);  // in one place\nLogger::log() &lt;&lt; \"Log\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>What if I don't want to use this logger?</p>\n\n<pre><code>Logger(false);  // in one place. it doesn't open any file.\nLogger::log() &lt;&lt; \"Log\" &lt;&lt; std::endl; // it shouldn't write anywhere\n</code></pre>\n\n<p>What is behavior of &lt;&lt; operator if I haven't opened file? Is it safe? Is it very fast? Is it good idea??</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1423086783, "post_id": 28332147, "comment_id": 45011425, "body": "No, non-type template parameters have to have a fixed type. Why do you want to do this?"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1423087675, "post_id": 28332147, "comment_id": 45011884, "body": "what about <code>template&lt;typename T, void(T::*medhod)()&gt;</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1423088441, "post_id": 28332147, "comment_id": 45012244, "body": "@erenon I assume you mean <code>template &lt;typename T, T method&gt;</code>, but then the caller has to specify the type, e.g. <code>works_almost&lt;decltype(&amp;Foo::b), &amp;Foo::b&gt;(&amp;some_foo, 42);</code>. But that seems redundant."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1423089342, "post_id": 28332147, "comment_id": 45012628, "body": "Maybe with C++1Z: <code>template &lt;using typename R, using typename... Args, R(Foo::*method)(Args...)&gt;</code>"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1423101255, "post_id": 28332147, "comment_id": 45016235, "body": "Ugh, <code>using typename</code>, who likes that? Those keywords are already oversubscribed. Why not <code>template &lt;auto Method&gt;</code>?"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1423171167, "post_id": 28332147, "comment_id": 45052067, "body": "@Barry: no, I meant what I&#39;ve written."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 0, "creation_date": 1423171261, "post_id": 28332147, "comment_id": 45052112, "body": "@erenon Then that doesn&#39;t address the question at all. I wanted an arbitrarily typed class method - you&#39;re restricting to just nullary, void."}], "answers": [{"tags": [], "owner": {"reputation": 849, "user_id": 2571986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bb5434084a3e368a1032d0232e6f64a?s=128&d=identicon&r=PG&f=1", "display_name": "tsuki", "link": "https://stackoverflow.com/users/2571986/tsuki"}, "is_accepted": false, "score": 0, "last_activity_date": 1433859205, "last_edit_date": 1433859205, "creation_date": 1433850244, "answer_id": 30731053, "question_id": 28332147, "link": "https://stackoverflow.com/questions/28332147/template-non-type-pointer-to-arbitrary-class-method/30731053#30731053", "title": "Template non-type pointer to arbitrary class method", "body": "<p>Would this work for you?</p>\n\n<pre><code>template&lt; typename T, T &gt;\nclass works_for_anything_t;\n\ntemplate&lt; typename R, typename... Args, R (*f)(Args...) &gt;\nclass works_for_anything_t&lt; R (*)(Args...), f &gt;{\npublic:\n  R operator()( Args... args ){ return f(args...); }\n};\n\ntemplate&lt; typename T, typename R, typename... Args, R (T::*f)(Args...) &gt;\nclass works_for_anything_t&lt; R (T::*)(Args...), f &gt;{\npublic:\n  R operator()( T&amp; v, Args... args ) { return (v.*f)(args...); }\n\n  works_for_anything_t(T&amp; v)\n   : v_(v) {  }\nprivate:\n  T&amp; v_;\n};\n\ntemplate&lt; typename T, typename R, typename... Args, R (T::*f)(Args...) const &gt;\nclass works_for_anything_t&lt; R (T::*)(Args...) const, f &gt;{\npublic:\n  R operator()( const T&amp; v, Args... args ) const { return (v.*f)(args...); }\n\n  works_for_anything_t(const T&amp; v)\n   : v_(v) {  }\nprivate:\n  const T&amp; v_;\n};\n\n#define works_for_anything(f) works_for_anything_t&lt;decltype(&amp;f), &amp;f&gt;\n\nstruct Foo {\n    void a();\n    void b(const int&amp; );\n    int c();\n};\n\nint test();\n\nint main() {\n  Foo foo;\n  works_for_anything(Foo::b){foo}( 42 );\n  works_for_anything(test){}();\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1433859205, "creation_date": 1423086593, "question_id": 28332147, "link": "https://stackoverflow.com/questions/28332147/template-non-type-pointer-to-arbitrary-class-method", "title": "Template non-type pointer to arbitrary class method", "body": "<p>Let's say I have:</p>\n\n<pre><code>struct Foo {\n    void a();\n    void b(const int&amp; );\n    int c();\n};\n</code></pre>\n\n<p>I can create a function that takes as an argument an arbitrary pointer-to-<code>Foo</code> method:</p>\n\n<pre><code>template &lt;typename R, typename... Formal, typename... Args&gt;\nR call(Foo* f, R (Foo::*method)(Formal...), Args&amp;&amp;... args) {\n    return (f-&gt;*method)(std::forward&lt;Args&gt;(args)...);\n}\n\nint gratuitous = call(&amp;some_foo, &amp;Foo::c);\n</code></pre>\n\n<p>And I can create a function that takes a specific type of pointer-to-<code>Foo</code> method as a template:</p>\n\n<pre><code>template &lt;void (Foo::*method)()&gt;\nvoid only_for_a(Foo *f) {\n    (f-&gt;*method)();\n}\n\nonly_for_a&lt;&amp;Foo::a&gt;(&amp;some_foo);\n</code></pre>\n\n<p>But is there a way to create a function that I can template on <em>any</em> pointer to class method? I want to be able to do:</p>\n\n<pre><code>works_for_anything&lt;&amp;Foo::a&gt;(&amp;some_foo);\nworks_for_anything&lt;&amp;Foo::b&gt;(&amp;some_foo, 42);\nint result = works_for_anything&lt;&amp;Foo::c&gt;(&amp;some_foo);\n</code></pre>\n"}, {"tags": ["c++", "optional", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1424210298, "post_id": 28332609, "comment_id": 45453542, "body": "Could this run into quality of implementation issues, where an <code>int</code> is passed to an optional, and it is converted to a <code>nullopt_t</code> and used to construct the optional, and unexpected things result?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1424250207, "post_id": 28332609, "comment_id": 45467397, "body": "@Yakk If the value type of the optional can be constructed from an int, then overload resolution will make sure that the right constructor (template) is chosen. If not... Then you&#39;re correct. Making the above constructor explicit should solve that problem."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 5, "last_activity_date": 1423088737, "last_edit_date": 1423088737, "creation_date": 1423088372, "answer_id": 28332609, "question_id": 28332078, "link": "https://stackoverflow.com/questions/28332078/experimentaloptional-nullopt-t-constructor/28332609#28332609", "title": "experimental::optional nullopt_t constructor", "body": "<p>A minimal implementation is</p>\n\n<pre><code>struct nullopt_t {\n    constexpr nullopt_t(int) {}\n};\n</code></pre>\n\n<p>No default constructor will be implicitly declared, [class.ctor]/4:</p>\n\n<blockquote>\n  <p>If there is no user-declared constructor for class <code>X</code>, a constructor\n  having no parameters is implicitly declared as defaulted (8.4).</p>\n</blockquote>\n\n<p>... and <code>nullopt_t</code> can be constructed from <code>int</code>, a literal type.<br>\nNote that in your code a default constructor exists, though being defined as deleted. </p>\n\n<p>The above definition does meet the requirements for a literal type:</p>\n\n<blockquote>\n  <p>A type is a <em>literal type</em> if it is:  <br> (10.5) \u2014 a class type (Clause 9)\n  that has all of the following properties:</p>\n  \n  <ul>\n  <li>it has a trivial destructor,</li>\n  <li>it is an aggregate type (8.5.1) or has at least one <code>constexpr</code> constructor [..] that is not a copy or move constructor, and</li>\n  <li>all of its non-static data members and base classes are of non-volatile literal types.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 1, "accepted_answer_id": 28332609, "answer_count": 1, "score": 6, "last_activity_date": 1423088737, "creation_date": 1423086352, "last_edit_date": 1495540404, "question_id": 28332078, "link": "https://stackoverflow.com/questions/28332078/experimentaloptional-nullopt-t-constructor", "title": "experimental::optional nullopt_t constructor", "body": "<p><a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3793.html#optional.nullopt\" rel=\"nofollow noreferrer\">Here</a> is described the <code>nullopt_t</code> and <code>nullopt</code> for the <code>optional</code> object proposed for c++:</p>\n\n<blockquote>\n<pre><code>struct nullopt_t{see below}; \nconstexpr nullopt_t nullopt(unspecified);\n</code></pre>\n  \n  <p>[...]\n  Type nullopt_t shall not have a default constructor. It shall be a\n  literal type. Constant nullopt shall be initialized with an argument\n  of literal type.</p>\n</blockquote>\n\n<p>The reason for this is explained in the <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3793.html#rationale.reset_syntax\" rel=\"nofollow noreferrer\">The op = {} syntax</a> chapter of the document: for the <code>op = {}</code> to be unambiguous some tricks have to be adopted, one of which is that <code>nullopt_t</code> must not be default constructible.</p>\n\n<p>My question is about what does the literal type means here? I found this <a href=\"https://stackoverflow.com/questions/18581443/need-clarification-on-definition-of-literal-type\">SO post</a>. So it looks to me that just another empty class would do. Could it  also be a constructor taking a <code>int</code>?</p>\n\n<p>What would be a minimal conforming <code>nullopt_t</code> class look like?</p>\n\n<p>Something like this:</p>\n\n<pre><code>struct nullopt_t_construct_tag_t{};\n\nstruct nullopt_t {\n  nullopt_t() = delete; // I know declaring it as deleted is redundant\n  constexpr nullopt_t(nullopt_t_construct_tag_t) {};\n};\n\nconstexpr nullopt_t nullopt(nullopt_t_construct_tag_t{});\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>struct nullopt_t {\n  nullopt_t() = delete;\n  constexpr nullopt_t(int) {};\n};\n\nconstexpr nullopt_t nullopt(0);\n</code></pre>\n"}, {"tags": ["c++", "exception", "reference"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423086533, "post_id": 28332052, "comment_id": 45011307, "body": "Think about it: It&#39;s like taking a parameter, when would you accept a polymorphic parameter by value?"}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 6, "last_activity_date": 1423086387, "creation_date": 1423086387, "answer_id": 28332088, "question_id": 28332052, "link": "https://stackoverflow.com/questions/28332052/catching-objects-by-reference/28332088#28332088", "title": "Catching objects by reference", "body": "<p>It's recommended that you catch exceptions by reference for two reasons:</p>\n\n<ol>\n<li><p>Catching the exception by value will end up making a copy of the thrown exception object (the same way that passing a parameter will make a copy of that object). Even though exception handling can be a bit slow, it's still worth trying to avoid this inefficiency.</p></li>\n<li><p>If you throw an exception of a derived type and catch the base type by value, you will <em>slice</em> the exception the same way that passing a derived type into a function by value will slice that object. This can lead to incorrect or unusual behavior in the program.</p></li>\n</ol>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 3, "last_activity_date": 1423086438, "creation_date": 1423086438, "answer_id": 28332101, "question_id": 28332052, "link": "https://stackoverflow.com/questions/28332052/catching-objects-by-reference/28332101#28332101", "title": "Catching objects by reference", "body": "<p>I can't think of any advantage to catching by value, and it leads to the possibility of object slicing where the object is converted to the base class and information is lost. I'd catch by reference, always.</p>\n\n<p>It's possible to modify the caught object and re-throw it for example, so you don't <em>have</em> to make it a <code>const</code> reference. But that's a good idea too.</p>\n"}], "owner": {"reputation": 2972, "user_id": 324922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/arX7j.jpg?s=128&g=1", "display_name": "Day_Dreamer", "link": "https://stackoverflow.com/users/324922/day-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 28332101, "answer_count": 2, "score": 1, "last_activity_date": 1423086443, "creation_date": 1423086227, "last_edit_date": 1423086443, "question_id": 28332052, "link": "https://stackoverflow.com/questions/28332052/catching-objects-by-reference", "title": "Catching objects by reference", "body": "<p>I am new to C++. I saw some code examples that use <code>catch</code> blocks in which the exception is caught by value. For example:</p>\n\n<pre><code>catch(SomeClass e)\n</code></pre>\n\n<p>I've also seen some examples that catch by reference:</p>\n\n<pre><code>catch(const std:: out_of_range&amp; e)\n</code></pre>\n\n<p>I assume that in case that exceptions are caught by reference, it should be by <code>const</code> reference.</p>\n\n<p>My question is, when it is recommended to use each way, and what are the advantages/disadvanges in each way?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "windows", "qt", "clion"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1423085652, "post_id": 28331722, "comment_id": 45010839, "body": "You can not use visual studio binaries for mingw. Use a mingw build of Qt."}, {"owner": {"reputation": 2209, "user_id": 2692914, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c7f5455232d8a359af4e7f79e7e78f0?s=128&d=identicon&r=PG&f=1", "display_name": "lmiguelmh", "link": "https://stackoverflow.com/users/2692914/lmiguelmh"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1423086052, "post_id": 28331722, "comment_id": 45011048, "body": "Oh thanks! I didn&#39;t notice that... I will look for that mingw build of Qt"}, {"owner": {"reputation": 2209, "user_id": 2692914, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c7f5455232d8a359af4e7f79e7e78f0?s=128&d=identicon&r=PG&f=1", "display_name": "lmiguelmh", "link": "https://stackoverflow.com/users/2692914/lmiguelmh"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1423171198, "post_id": 28331722, "comment_id": 45052076, "body": "@drescherjm please add your comment as an answer and I will accept it... maybe I will add some edits to your answer to clarify some problems that I had. Thanks a lot."}], "answers": [{"comments": [{"owner": {"reputation": 2209, "user_id": 2692914, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c7f5455232d8a359af4e7f79e7e78f0?s=128&d=identicon&r=PG&f=1", "display_name": "lmiguelmh", "link": "https://stackoverflow.com/users/2692914/lmiguelmh"}, "edited": false, "score": 0, "creation_date": 1438296441, "post_id": 28354448, "comment_id": 51405921, "body": "for clarification: qDebug doesn&#39;t print in stdout because this is not a console applicattion, see <code>add_executable(cl_hello_world2 WIN32 ${SOURCE_FILES})</code> the <i>WIN32</i> label is defined for non-console applications"}], "tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": true, "score": 3, "last_activity_date": 1423175333, "last_edit_date": 1423175333, "creation_date": 1423171957, "answer_id": 28354448, "question_id": 28331722, "link": "https://stackoverflow.com/questions/28331722/undefined-qt5-references-in-c-using-cmake-mingw-in-windows-with-clion/28354448#28354448", "title": "Undefined Qt5 references in C++ using CMake (mingw) in Windows with CLion", "body": "<p>Your problem is you are attempting to use a Visual Studio build of Qt with mingw. You need to use a mingw build of Qt.  </p>\n\n<p><strong>Edit</strong></p>\n\n<ol>\n<li><p>If you are going to use MinGW, download the right Qt Version at <a href=\"http://www.qt.io/download-open-source/\" rel=\"nofollow noreferrer\">http://www.qt.io/download-open-source/</a> <em>Qt 5.4.0 for Windows 32-bit (MinGW 4.9.1, 852 MB)</em>. At the moment of installation don't forget to select MinGW 4.9.1 component.</p></li>\n<li><p>Follow this step if you are going to use CLion: In File : Settings or Ctrl + Alt + S, choose the correct path of MinGW as shown:</p></li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/0fJpS.png\" alt=\"CLion toolchain configuration\"></p>\n\n<ol start=\"3\">\n<li><p>In <em>CMakeLists.txt</em> change the line:\n<code>set(CMAKE_PREFIX_PATH D:/Qt/Qt5.4.0/5.4/msvc2012_opengl)</code> for where your Qt path is: <code>set(CMAKE_PREFIX_PATH D:/Qt/Qt5.4.0MinGw/5.4/mingw491_32)</code></p></li>\n<li><p>Now if you compile and run from the IDE you will get the error: <code>Process finished with exit code -1073741515 (0xC0000135)</code>. You need the Qt libraries in your path or in the directory where your exe is. I had to copy <code>icudt53.dll icuin53.dll icuuc53.dll libgcc_s_dw2-1.dll libstdc++-6.dll libwinpthread-1.dll Qt5Cored.dll Qt5Guid.dll Qt5Widgetsd.dll</code> in my directory (the \"d\" is for \"debug\").</p></li>\n<li><p>If you run this <a href=\"http://qt-project.org/wiki/Qt_for_beginners_Hello_World\" rel=\"nofollow noreferrer\">sample code for Qt beginners</a> from CLion you will get this!</p></li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/qLGA5.png\" alt=\"Running Qt MinGW and CMake from CLion\"></p>\n\n<p>About my initial code I do not understand what is happening but I can't figure it out why qDebug doesn't print in stdout... </p>\n"}], "owner": {"reputation": 2209, "user_id": 2692914, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7c7f5455232d8a359af4e7f79e7e78f0?s=128&d=identicon&r=PG&f=1", "display_name": "lmiguelmh", "link": "https://stackoverflow.com/users/2692914/lmiguelmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4223, "favorite_count": 1, "accepted_answer_id": 28354448, "answer_count": 1, "score": 2, "last_activity_date": 1451579329, "creation_date": 1423084940, "last_edit_date": 1451579329, "question_id": 28331722, "link": "https://stackoverflow.com/questions/28331722/undefined-qt5-references-in-c-using-cmake-mingw-in-windows-with-clion", "title": "Undefined Qt5 references in C++ using CMake (mingw) in Windows with CLion", "body": "<p>I am trying to <a href=\"http://doc.qt.io/qt-5/cmake-manual.html\" rel=\"nofollow\">learn Qt5 with CMake</a> in the new <a href=\"https://www.jetbrains.com/clion/\" rel=\"nofollow\">CLion C/C++ IDE</a>, I am relatively new with these tools. So, I have this <em>real simple</em> code <code>main.cpp</code>:</p>\n\n<pre><code>#include &lt;QDebug&gt;\nint main() {\n    qDebug(\"Hello World!\");\n    return 0;\n}\n</code></pre>\n\n<p>I've followed the documentation and ended with this <code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.11)\nproject(cl_hello_world2)\n\nset(CMAKE_PREFIX_PATH D:/Qt/Qt5.4.0/5.4/msvc2012_opengl)\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\nset(CMAKE_AUTOMOC ON)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nset(CMAKE_VERBOSE_MAKEFILE ON)\n\nfind_package(Qt5Widgets)\n\nset(SOURCE_FILES main.cpp)\nadd_executable(cl_hello_world2 WIN32 ${SOURCE_FILES})\n\ntarget_link_libraries(cl_hello_world2 Qt5::Widgets)\n</code></pre>\n\n<p>After hours and hours of trying, I keep having these <code>undefined reference</code> errors:</p>\n\n<pre><code>CMakeFiles\\cl_hello_world2.dir/objects.a(main.cpp.obj): In function `main':\nE:/Qt/test/cl-hello-world2/main.cpp:4: undefined reference to `_imp___ZNK14QMessageLogger5debugEPKcz'\n</code></pre>\n\n<p>This is the compiler command that CMake is executing:</p>\n\n<pre><code>D:\\PROGRA~2\\CODEBL~1\\MinGW\\bin\\G__~1.EXE   -std=c++11 -g    -mwindows -Wl,--whole-archive CMakeFiles\\cl_hello_world2.dir/objects.a -Wl,--no-whole-archive  -o cl_hello_world2.exe -Wl,--out-implib,libcl_hello_world2.dll.a -Wl,--major-image-version,0,--minor-image-version,0  D:\\Qt\\Qt5.4.0\\5.4\\msvc2012_opengl\\lib\\Qt5Widgetsd.lib D:\\Qt\\Qt5.4.0\\5.4\\msvc2012_opengl\\lib\\Qt5Guid.lib D:\\Qt\\Qt5.4.0\\5.4\\msvc2012_opengl\\lib\\Qt5Cored.lib D:\\Qt\\Qt5.4.0\\5.4\\msvc2012_opengl\\lib\\qtmaind.lib -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32\n</code></pre>\n\n<p>I don't know if this line is syntactically correct, but the library <code>D:\\Qt\\Qt5.4.0\\5.4\\msvc2012_opengl\\lib\\Qt5Widgetsd.lib</code> exists... </p>\n\n<p>I've try with Qt5.3.2 and Qt 5.4.0. Maybe you know some other way to add the library for the linking or maybe I've made a mistake...</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423084245, "post_id": 28331491, "comment_id": 45010115, "body": "It&#39;s undefined behavior, that&#39;s all."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423084249, "post_id": 28331491, "comment_id": 45010117, "body": "Also <a href=\"http://stackoverflow.com/questions/1553382/is-delete-equal-to-delete/1553407#1553407\" title=\"is delete equal to delete\">stackoverflow.com/questions/1553382/is-delete-equal-to-delet&zwnj;&#8203;e/&hellip;</a>"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1423084253, "post_id": 28331491, "comment_id": 45010118, "body": "it is not correct, but it will work anyways, on <i>some</i> platforms. Dont use"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423084590, "post_id": 28331491, "comment_id": 45010298, "body": "<i>&quot; I saw something like this in our company code.&quot;</i> That sounds highly questionable, and should be fixed."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423085230, "post_id": 28331520, "comment_id": 45010613, "body": "(or even correct, sensible, defined, reproducible, or any combination thereof)"}], "tags": [], "owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "is_accepted": false, "score": 1, "last_activity_date": 1423084256, "creation_date": 1423084256, "answer_id": 28331520, "question_id": 28331491, "link": "https://stackoverflow.com/questions/28331491/c-delete-a-newed-array-by-using-delete/28331520#28331520", "title": "c++ delete a newed array by using delete[]", "body": "<p>No that is not the correct method of freeing up the memory.</p>\n\n<p>Keep in mind that because something doesn't crash the system doesn't mean it's good practice</p>\n"}], "owner": {"reputation": 6557, "user_id": 2495795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/13606de0b736d7191e2cf2bfea1d4fda?s=128&d=identicon&r=PG", "display_name": "BufBills", "link": "https://stackoverflow.com/users/2495795/bufbills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1423084256, "answer_count": 1, "score": -2, "last_activity_date": 1423084256, "creation_date": 1423084159, "question_id": 28331491, "link": "https://stackoverflow.com/questions/28331491/c-delete-a-newed-array-by-using-delete", "closed_reason": "Duplicate", "title": "c++ delete a newed array by using delete[]", "body": "<p>I know in c++ delete a newed array by using delete[].\nWhat I am wondering is, what if I just do delete without [].\nI saw something like this in our company code. And it does no crash the system.\nIs this also right?</p>\n\n<pre><code>u_char* binBuf2 = new u_char[bitCount + 1];\ndelete binBuf2;\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["c#", "c++", "c", "dll", "log4net"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1423084463, "post_id": 28331470, "comment_id": 45010237, "body": "Look at <code>SetStdHandle</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423092501, "post_id": 28331470, "comment_id": 45013950, "body": "How do you know if the DLL was written in C or C++?"}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 0, "creation_date": 1423142382, "post_id": 28331470, "comment_id": 45034227, "body": "I have the source for the top couple layers of DLLs as I wrote them.   Under the covers those DLLs eventually load DLLs for CURL and FFMPEG and such.   However, the top two layers of DLLs are mine and written in C and C++.   I can modify them if the solution requires it."}], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": true, "score": 3, "last_activity_date": 1423255805, "last_edit_date": 1423255805, "creation_date": 1423255500, "answer_id": 28374485, "question_id": 28331470, "link": "https://stackoverflow.com/questions/28331470/can-i-redirect-output-from-a-c-dll-into-my-c-log4net-output/28374485#28374485", "title": "Can I redirect output from a C DLL into my c# log4net output", "body": "<p>Turns out those did the trick once I figured out how to use them.   I setup two named pipes(or two ends of the same pipe?).  One I connected to stdout and had it do a log message in log4net of whatever came through the pipe.</p>\n\n<pre><code>internal static void InfoLogWriter(Object threadContext)\n{\n    mLog.Info(\"InfoLogWriterthread started\");\n    int id = Process.GetCurrentProcess().Id; // make this instance unique\n    var serverPipe = new NamedPipeServerStream(\"consoleRedirect\" + id, PipeDirection.In, 1);\n    NamedPipeClientStream clientPipe = new NamedPipeClientStream(\".\", \"consoleRedirect\" + id, PipeDirection.Out, PipeOptions.WriteThrough);\n    mLog.Info(\"Connecting Client Pipe.\");\n    clientPipe.Connect();\n    mLog.Info(\"Connected Client Pipe, redirecting stdout\");\n    HandleRef hr11 = new HandleRef(clientPipe, clientPipe.SafePipeHandle.DangerousGetHandle());\n    SetStdHandle(-11, hr11.Handle); // redirect stdout to my pipe\n    mLog.Info(\"Redirection of stdout complete.\");\n    mLog.Info(\"Waiting for console connection\");\n    serverPipe.WaitForConnection(); //blocking\n    mLog.Info(\"Console connection made.\");\n    using (var stm = new StreamReader(serverPipe))\n    {\n        while (serverPipe.IsConnected)\n        {\n            try\n            {\n                string txt = stm.ReadLine();\n                if (!string.IsNullOrEmpty(txt))\n                    mLog.InfoFormat(\"DLL MESSAGE : {0}\", txt);\n            }\n            catch (IOException)\n            {\n                break; // normal disconnect\n            }\n        }\n    }\n    mLog.Info(\"Console connection broken.   Thread Stopping.\");\n}\n</code></pre>\n\n<p>Also have a function to push all that to another thread so it doesn't block my main thread when it hits the various blocking calls.</p>\n\n<pre><code>internal static void RedirectConsole()\n{\n    mLog.Info(\"RedirectConsole called.\");\n    ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(InfoLogWriter));\n    // TODO enqueue and item for error messages too.\n}\n</code></pre>\n\n<p>I'm having trouble with it disconnecting and have to reconnect the pipes, but I'll figure out a reconnect solution.   I'm guessing that happens when DLLs get swapped back out of memory or perhaps when I need to read but there isn't anything currently ready to be read?  I've also got to setup another pair to snag stderr and redirect it as well, using Error logs for that one.   Probably want to get rid of the magic number (-11) and use the normal enums as well (STD_ERROR_HANDLE, etc)</p>\n"}], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1692, "favorite_count": 3, "accepted_answer_id": 28374485, "answer_count": 1, "score": 5, "last_activity_date": 1423255805, "creation_date": 1423084081, "last_edit_date": 1423084976, "question_id": 28331470, "link": "https://stackoverflow.com/questions/28331470/can-i-redirect-output-from-a-c-dll-into-my-c-log4net-output", "title": "Can I redirect output from a C DLL into my c# log4net output", "body": "<p>I have a C# application which in turn loads a C or C++ dll (which in turn loads other  C/C++ dlls).   Within the C# application I use a log4net logger to capture all the output into a series of log files.   My application runs as a windows service so there is no console/output window for normal printfs or output written into stdout/stderr to go to.   </p>\n\n<p>Is there a way to setup the C# application to direct stdout/stderr (from the DLLs) and turn each line into a log4net output.   Or is there some way within the C/C++ DLL to connect the stdout/stderr streams to the log4net output?   </p>\n\n<p>I found some solution (here : <a href=\"http://bytes.com/topic/c-sharp/answers/822341-dllimport-stdout-gets-eaten\" rel=\"nofollow\">http://bytes.com/topic/c-sharp/answers/822341-dllimport-stdout-gets-eaten</a>) that indicated I needed to put a call into my C DLL like this : <code>setvbuf(stdout, NULL, _IONBF, 0);</code>   Though, I don't know what that does, it doesn't do what I want.   I assume I'd also need a similar line for stderr.   In either case, google seemed to think those lines simply take care of buffering and not redirection into log4net.</p>\n\n<p>I assume I need some sort of function override which snags the console writes (from a loaded DLL in another language) and converts them into <code>mLog.InfoFormat(\"{0}\", consoleString);</code> sorts of calls.  I'm new to c# and not even sure what terms to google in order to find such an override (if its even possible).</p>\n\n<p>Not sure if this complicates the problem, but my C# application is multithreaded and some of the DLLs have multiple threads as well.   I assume that just means I need a lock of some sort inside the method that handles the console output and writes it into the log4net framework(maybe) or maybe the normal serialization of log4net will handle it for me.   </p>\n"}, {"tags": ["c++", "vlfeat"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423084178, "post_id": 28331356, "comment_id": 45010085, "body": "<i>&quot;how I can iteratively build const data&quot;</i> The data storage doesn&#39;t need to  be <code>const</code> in 1st place. The <code>const</code> attribute at the function parameter just means that function won&#39;t change it."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1423084849, "post_id": 28331356, "comment_id": 45010415, "body": "@KeithThompson I switched it"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423086818, "post_id": 28331356, "comment_id": 45011448, "body": "It simply assures who ever tries to use that function that &quot;I, this function, will not attempt to write to that pointer&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1423084915, "post_id": 28331482, "comment_id": 45010444, "body": "<code>const_cast</code> -- the bane of our existence."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 2, "creation_date": 1423085034, "post_id": 28331482, "comment_id": 45010512, "body": "@BillyONeal the weapon you unsheathe with a tear, knowing it shouldn&#39;t have gone that way."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 1, "creation_date": 1423085043, "post_id": 28331482, "comment_id": 45010520, "body": "@Billy C-style and function style casts are worse, because they can virtually cast <i>anything</i> to <i>anything</i>. And at least <code>const_cast</code> can be found via grep. Try to grep a C-style cast :("}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 10, "last_activity_date": 1423084784, "last_edit_date": 1423084784, "creation_date": 1423084116, "answer_id": 28331482, "question_id": 28331356, "link": "https://stackoverflow.com/questions/28331356/purpose-of-void-const-argument-in-function/28331482#28331482", "title": "Purpose of void const * argument in function", "body": "<p><code>const</code>, despite the best efforts from the standardization commitee to confuse you, does not mean \"constant\". It means \"read-only\".</p>\n\n<p>By declaring its parameter as a pointer-to-<code>const</code>, this function states that your data won't be copied on its way in, but the function's code will only be able to read it, not modify it.</p>\n\n<p>So just build your matrix the regular way (non-<code>const</code>, since <strong>you</strong> need to complete it with loops), and pass it in, confident that it will return unchanged.</p>\n\n<p>Unless... the function's code <em>casts away the const</em>. Which should get the guy who wrote it fired in no time.</p>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": false, "score": 2, "last_activity_date": 1423084963, "creation_date": 1423084963, "answer_id": 28331728, "question_id": 28331356, "link": "https://stackoverflow.com/questions/28331356/purpose-of-void-const-argument-in-function/28331728#28331728", "title": "Purpose of void const * argument in function", "body": "<p>The <code>const</code> only means that the <code>vl_kmeans_init_centers_with_rand_data</code> is not allowed to modify that data. I.e. <em>you</em> don't have to use a <code>const</code> array, you can pass a \"normal\" (mutable) one. <code>const</code> can always be added by an implicit conversion - just not the other way around.</p>\n\n<p>(Allowed to add const: A function may always promise not to modify an object, even it could be modified. Not allowed to remove const: A function may not modify an object, or give it to another function that expects a modifiable object, if the original function has been given the object under the promise that it will not modify the object.)</p>\n\n<p>The <code>void</code>, when used as type for a pointer, means \"anything\". I.e. you can convert an int-pointer to a void-pointer, a double-pointer to a void-pointer - anything-you-like-pointer to a void-pointer. And the reason for this is, most of the time, that the function taking a void-pointer argument can process different data-types. In this case, <code>VlKMeans</code> has a member <code>dataType</code> which probably controls how the <code>vl_kmeans_init_centers_with_rand_data</code> function will interpret the <code>data</code> argument.</p>\n\n<p>Assuming that e.g. <code>dataType</code> is set to <code>VL_TYPE_DOUBLE</code>, this should work:</p>\n\n<pre><code>std::vector&lt;double&gt; data(numData);\n// fill 'data' with data\nvl_kmeans_init_centers_with_rand_data(vlkMeans, &amp;data[0], dimension, numData, numCenters);\n</code></pre>\n"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5057, "favorite_count": 2, "accepted_answer_id": 28331482, "answer_count": 2, "score": 2, "last_activity_date": 1423084963, "creation_date": 1423083669, "last_edit_date": 1423084822, "question_id": 28331356, "link": "https://stackoverflow.com/questions/28331356/purpose-of-void-const-argument-in-function", "title": "Purpose of void const * argument in function", "body": "<p>I'm trying to use a library function from VLFeat that calls for data to be a const void *. I don't really understand how to create the data and then pass it in.</p>\n\n<p><a href=\"http://www.vlfeat.org/api/kmeans_8c.html#ae32387a856746fe4c39ae10fd533c8d3\" rel=\"nofollow\">This is the function call</a>:</p>\n\n<pre><code>void vl_kmeans_init_centers_with_rand_data  (VlKMeans * self, void const * data,\n    vl_size dimension, vl_size numData, vl_size numCenters)\n</code></pre>\n\n<p>The data argument is the one that throws me. I tried building a random data matrix to test the <a href=\"http://www.vlfeat.org/api/kmeans.html\" rel=\"nofollow\">kmeans clustering function</a>, but I can't figure out how to use the data. In other words, this function requires this argument. But for it to be useful, I have to understand what how to cast/create/load the data to make it work. That means, I need to understand the purpose of the <code>const void *</code> type in the argument.</p>\n\n<p>Any help would be highly appreciated.</p>\n\n<p>Note: I do understand what const means, but, for example, I can't figure out how I can iteratively build const data (i.e. fill a matrix with dual for loops)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2012"], "comments": [{"owner": {"reputation": 591, "user_id": 2581859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0355777daf13e0dd83915340a06a469c?s=128&d=identicon&r=PG&f=1", "display_name": "pwwpche", "link": "https://stackoverflow.com/users/2581859/pwwpche"}, "edited": false, "score": 0, "creation_date": 1423106186, "post_id": 28331296, "comment_id": 45017363, "body": "Could you upload your image here?"}, {"owner": {"reputation": 353, "user_id": 3294342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d1e7d1a4b5852ff0b47bb08a75001b2?s=128&d=identicon&r=PG", "display_name": "Doombot", "link": "https://stackoverflow.com/users/3294342/doombot"}, "reply_to_user": {"reputation": 591, "user_id": 2581859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0355777daf13e0dd83915340a06a469c?s=128&d=identicon&r=PG&f=1", "display_name": "pwwpche", "link": "https://stackoverflow.com/users/2581859/pwwpche"}, "edited": false, "score": 0, "creation_date": 1423106553, "post_id": 28331296, "comment_id": 45017454, "body": "While I know this might reduce my chances to get an answer, I am not allowed to show the images for the moment. I added a precision to the question, though..."}, {"owner": {"reputation": 591, "user_id": 2581859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0355777daf13e0dd83915340a06a469c?s=128&d=identicon&r=PG&f=1", "display_name": "pwwpche", "link": "https://stackoverflow.com/users/2581859/pwwpche"}, "edited": false, "score": 0, "creation_date": 1423108227, "post_id": 28331296, "comment_id": 45017844, "body": "Maybe you can upload your keypoints and descriptors of your image somewhere instead of uploading your original image. btw, you can find implementation of OpenCV findHomography <a href=\"https://github.com/Itseez/opencv/blob/master/modules/calib3d/src/fundam.cpp\" rel=\"nofollow noreferrer\">here</a> and RANSAC method <a href=\"https://github.com/Itseez/opencv/blob/master/modules/calib3d/src/ptsetreg.cpp\" rel=\"nofollow noreferrer\">here</a> at line 161"}, {"owner": {"reputation": 353, "user_id": 3294342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d1e7d1a4b5852ff0b47bb08a75001b2?s=128&d=identicon&r=PG", "display_name": "Doombot", "link": "https://stackoverflow.com/users/3294342/doombot"}, "reply_to_user": {"reputation": 591, "user_id": 2581859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0355777daf13e0dd83915340a06a469c?s=128&d=identicon&r=PG&f=1", "display_name": "pwwpche", "link": "https://stackoverflow.com/users/2581859/pwwpche"}, "edited": false, "score": 0, "creation_date": 1423108364, "post_id": 28331296, "comment_id": 45017878, "body": "Oh thanks stupidly I compiled OpenCV from Github but didn&#39;t think to look for the source code there... I guess I&#39;ll have my answer here. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 3294342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d1e7d1a4b5852ff0b47bb08a75001b2?s=128&d=identicon&r=PG", "display_name": "Doombot", "link": "https://stackoverflow.com/users/3294342/doombot"}, "edited": false, "score": 0, "creation_date": 1423145075, "post_id": 28341211, "comment_id": 45036092, "body": "Thanks! And now I will take the habit to look at the bug report zone too in my searches!"}, {"owner": {"reputation": 14484, "user_id": 2291710, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0232aab5638a75f2286dccc43ecf4df3?s=128&d=identicon&r=PG&f=1", "display_name": "Delgan", "link": "https://stackoverflow.com/users/2291710/delgan"}, "edited": false, "score": 0, "creation_date": 1520949196, "post_id": 28341211, "comment_id": 85518973, "body": "This is now part of the <a href=\"https://docs.opencv.org/3.3.0/d9/d0c/group__calib3d.html#ga4abc2ece9fab9398f2e560d53c8c9780\" rel=\"nofollow noreferrer\">documentation</a>: &quot;Note that whenever an H matrix cannot be estimated, an empty one will be returned.&quot;"}], "tags": [], "owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "is_accepted": true, "score": 8, "last_activity_date": 1423131051, "creation_date": 1423131051, "answer_id": 28341211, "question_id": 28331296, "link": "https://stackoverflow.com/questions/28331296/opencv-findhomography-generating-an-empty-matrix/28341211#28341211", "title": "OpenCV: findHomography generating an empty matrix", "body": "<p>Well you see, <code>cv::findHomography()</code> function could return empty homography matrix (0 cols x 0 rows) starting approximately from 2.4.5 release.\nAccording to some opinion this seems happen only when <code>cv::RANSAC</code> flag is passed.</p>\n\n<p>See the issue reported <a href=\"http://code.opencv.org/issues/3057\">here</a>:</p>\n\n<blockquote>\n  <p>It likely happened because we put in new experimental version of\n  Levenberg-Marquardt solver, which does not work that well (maybe due\n  to some bugs)</p>\n</blockquote>\n\n<p>I suggest to check the computed homography before using it anywhere:</p>\n\n<pre><code>cv::Mat h = cv::findHomography(...)\nif (!h.empty())\n{\n    // Use it\n}\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 3294342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d1e7d1a4b5852ff0b47bb08a75001b2?s=128&d=identicon&r=PG", "display_name": "Doombot", "link": "https://stackoverflow.com/users/3294342/doombot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2523, "favorite_count": 0, "accepted_answer_id": 28341211, "answer_count": 1, "score": 1, "last_activity_date": 1456674398, "creation_date": 1423083487, "last_edit_date": 1456674398, "question_id": 28331296, "link": "https://stackoverflow.com/questions/28331296/opencv-findhomography-generating-an-empty-matrix", "title": "OpenCV: findHomography generating an empty matrix", "body": "<p>When using <code>findHomography()</code>:</p>\n\n<pre><code>Mat H = findHomography( obj, scene, cv::RANSAC , 3, hom_mask, 2000, 0.995 );\n</code></pre>\n\n<p>Sometimes, for some image, the resulting H matrix stays empty (H is a UINT8, 1x0x0). However, there is clearly a match between both images (and it looks like good keypoint matches are detected), and just a moment before, with two similar images with similar keypoint responses, a relevant matrix was generated. Input parameters \"obj\" and \"scene\" are both a vector of <code>Point2f</code> containing various coordinates.</p>\n\n<p>Is this a common issue? Or do you think a bug might lurk somewhere? Personally, I have processed hundreds of images where a match exists and while I have seen sometime poor matches, it is the first time I get an empty matrix...</p>\n\n<p><strong>EDIT :</strong> This said, even if my eyes think that there should be a match in the image pairs, I realize that it might confuses some portion of the image with an other one and that maybe there is indeed no \"good\" match.</p>\n\n<p>So my question would be: How does <code>findHomography()</code> behave when it is unable to find a suitable Homography? Does it return an empty matrix or will it always give a homography, albeit a very poor one? I just want to know if I encounter standard behaviour or if there is a bug in my own code.</p>\n"}, {"tags": ["c++", "c", "linux", "windows", "uniqueidentifier"], "comments": [{"owner": {"reputation": 1159, "user_id": 1027402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFqLH.jpg?s=128&g=1", "display_name": "Onur Turhan", "link": "https://stackoverflow.com/users/1027402/onur-turhan"}, "edited": false, "score": 0, "creation_date": 1423083203, "post_id": 28331147, "comment_id": 45009585, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/17447659/port-window-api-getvolumeinformation-to-linux\">Port Window Api---GetVolumeInformation to Linux</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423092603, "post_id": 28331147, "comment_id": 45013990, "body": "Do the partitions on the hard drive have serial numbers?  My understanding is that the drive has a serial number only; not any partitions within the hard drive."}], "answers": [{"tags": [], "owner": {"reputation": 714, "user_id": 3874231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a56419c2e9770759b2ecf14ffd8beb6?s=128&d=identicon&r=PG&f=1", "display_name": "wojtow", "link": "https://stackoverflow.com/users/3874231/wojtow"}, "is_accepted": true, "score": 2, "last_activity_date": 1423084766, "creation_date": 1423084766, "answer_id": 28331670, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28331670#28331670", "title": "Get HD/Partition serial number", "body": "<p>In linux, you could use the blkid command to get the UUID of the partition:</p>\n\n<pre><code># blkid /dev/sda1\n/dev/sda1: UUID=\"15677362-cef3-4a53-aca3-3bace1b0d92a\" TYPE=\"ext4\"\n</code></pre>\n\n<p>This info is stored in the formatting of specific partition types like ext4, xfs  and changes when reformatted.   There is no info available for unformatted partitions. </p>\n\n<p>If you need to call it from code, calling out to a shell to run this command isn't exactly the prettiest way to do it, but it could work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc,char ** argv) {\n\n  /* device you are looking for */   \n  char device[]=\"/dev/sda1\";\n\n  /* buffer to hold info */\n  char buffer[1024];\n\n  /* format into a single command to be run */\n  sprintf(buffer,\"/sbin/blkid -o value %s\",device);\n\n  /* run the command via popen */\n  FILE *f=popen(buffer,\"r\");\n\n  /* probably should check to make sure f!=null */\n\n  /* read the first line of output */\n  fgets(buffer,sizeof(buffer),f);\n\n  /* print the results (note, newline is included in string) */\n  fprintf(stdout,\"uuid is %s\",buffer);\n\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1616, "user_id": 702327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/67dba488b21196a26ab69be47a2911df?s=128&d=identicon&r=PG", "display_name": "useraged", "link": "https://stackoverflow.com/users/702327/useraged"}, "is_accepted": false, "score": 2, "last_activity_date": 1423085084, "creation_date": 1423085084, "answer_id": 28331752, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28331752#28331752", "title": "Get HD/Partition serial number", "body": "<p>You can use <a href=\"http://www.freedesktop.org/software/systemd/libudev/\" rel=\"nofollow\">udev</a> to get the serial number of the device. (You'll need to know the device name though)</p>\n\n<pre><code>struct udev *context = udev_new();\nstruct udev_device *device = udev_device_new_from_syspath(context, \"/sys/block/sda\");\nconst char *id = udev_device_get_property_value(device, \"ID_SERIAL\");\n// Cleanup\nudev_device_unref(device);\nudev_unref(context);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1423089621, "creation_date": 1423089621, "answer_id": 28332935, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number/28332935#28332935", "title": "Get HD/Partition serial number", "body": "<p>Partitions have (at least) three identities in linux:</p>\n\n<ul>\n<li>The raw device identifier (think <code>cat /proc/partitions</code>) - this is not a unique serial number</li>\n<li>The <code>UUID</code> of the partition - can be found with <code>blkid</code>, and stored within the partition itself. You can also manually parse <code>/dev/.blkid.tab</code> - the format being obvious.</li>\n<li>The disk label - also stored within the partition. EG:</li>\n</ul>\n\n<pre>\nlsblk -o name,mountpoint,label,uuid\nNAME   MOUNTPOINT LABEL UUID\nsda\n\u251c\u2500sda1 /                315eaf50-adcc-4f0d-b767-f008f3f1c194\n\u251c\u2500sda2\n\u2514\u2500sda5 [SWAP]           1ff31705-f488-44a4-ba5f-e2fe9eff4b96\nsr0\n</pre>\n\n<p>Of these, the second is closest to what you want. To read it programatically, use <code>libblkid</code>.</p>\n"}], "owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 1, "accepted_answer_id": 28331670, "answer_count": 3, "score": 1, "last_activity_date": 1423089621, "creation_date": 1423082970, "question_id": 28331147, "link": "https://stackoverflow.com/questions/28331147/get-hd-partition-serial-number", "title": "Get HD/Partition serial number", "body": "<p>When Using Windows I can get a (more or less unique) serial number of a HDD partition by using command</p>\n\n<pre><code>GetVolumeInformation()\n</code></pre>\n\n<p>My question: is there something similar available for Linux? Means a number that would change only when somebody formats a partition and that can be retrieved programmatically?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "io", "ifstream"], "answers": [{"tags": [], "owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "is_accepted": true, "score": 54, "last_activity_date": 1587478147, "last_edit_date": 1592644375, "creation_date": 1423082448, "answer_id": 28331018, "question_id": 28331017, "link": "https://stackoverflow.com/questions/28331017/rewind-an-ifstream-object-after-hitting-the-end-of-file/28331018#28331018", "title": "Rewind an ifstream object after hitting the end of file", "body": "<h1>Solution</h1>\n<p>Use <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/clear\" rel=\"noreferrer\">clear</a> for cleaning the state of the ifstream before call <code>seekg</code>. <strong>Be sure to check first if you don't will need to know the state later.</strong></p>\n<pre><code>in.clear();\nin.seekg(0);\n</code></pre>\n<h1>Explanation</h1>\n<p><a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/seekg\" rel=\"noreferrer\">seekg</a> sets the cursor position, but doesn't <strong>clear</strong> state bit <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"noreferrer\">failbit</a> so, the <a href=\"http://en.cppreference.com/w/cpp/io/basic_ifstream\" rel=\"noreferrer\">ifstream</a> instance &quot;thinks&quot; there is something wrong yet.</p>\n<p>From the standar specification:</p>\n<blockquote>\n<p><strong>std::basic_istream::seekg</strong> behaves as <a href=\"http://en.cppreference.com/w/cpp/concept/UnformattedInputFunction\" rel=\"noreferrer\">UnformattedInputFunction</a>, except that gcount() is not affected.</p>\n</blockquote>\n<p>And we can read in <a href=\"http://en.cppreference.com/w/cpp/concept/UnformattedInputFunction\" rel=\"noreferrer\">UnformattedInputFunction</a>:</p>\n<blockquote>\n<p>The following standard library functions are <strong>UnformattedInputFunctions</strong>:</p>\n<p><strong>basic_istream::seekg</strong>, except <strong>that it first clears eofbit</strong> and does not modify gcount</p>\n</blockquote>\n<p>In the question example if you print the state before and after the seekg you get:</p>\n<pre><code>cout &lt;&lt; &quot;State before seekg: &quot; &lt;&lt; in.rdstate() &lt;&lt; endl;   // Prints 3 (11 in binary) failbit and eofbit activated.\nin.seekg(0);\ncout &lt;&lt; &quot;State after seekg: &quot; &lt;&lt; in.rdstate() &lt;&lt; endl;    // Prints 2 (10 in binary) just failbit activated.\n</code></pre>\n<p>That's why!!</p>\n<p>seekg doesn't clear <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"noreferrer\">failbit</a> and for some implementation reason, it doesn't works with such bit activated.</p>\n<h2>My guess</h2>\n<p>Why <code>seekg</code> does not work when <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"noreferrer\">failbit</a> is activated?</p>\n<p>It has to do with the fact this bit is not only activated when the stream reach the end of the file. And it might be situations in which after failbit is activated, using <code>seekg</code> is error prone or might shows undefined behaviour.</p>\n"}], "owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17081, "favorite_count": 11, "accepted_answer_id": 28331018, "answer_count": 1, "score": 24, "last_activity_date": 1602253684, "creation_date": 1423082448, "last_edit_date": 1602253684, "question_id": 28331017, "link": "https://stackoverflow.com/questions/28331017/rewind-an-ifstream-object-after-hitting-the-end-of-file", "title": "Rewind an ifstream object after hitting the end of file", "body": "<p>Having a text file with a few characters (lets say 10), you can try to read 1000 characters from it.</p>\n<pre><code>char *buf = new char[1000];\nifstream in(&quot;in.txt&quot;);\nin.read(buf, 1000);\n</code></pre>\n<p>This, of course, will set the <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"nofollow noreferrer\">eofbit</a> flag (and the <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"nofollow noreferrer\">failbit</a> too), however, you will be able to obtain the desired characters.</p>\n<p>Now, suppose you want to read the file again (from the beginning):</p>\n<pre><code>in.seekg(0);        // Sets input position indicator. \nin.read(buf, 100);  // Try to read again.\n</code></pre>\n<p>This does not work: because if you call:</p>\n<pre><code>int count = in.gcount()  // Charecters readed from input.\n</code></pre>\n<p>you will notice that <code>count == 0</code>. Meaning it has not read anything at all.</p>\n<p>Hence the question: How can you rewind the file after you get to the end of the file?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1423082514, "post_id": 28330978, "comment_id": 45009189, "body": "<b><i>My question is what is the need for the seed ?</i></b> If you do not seed or seed with a fixed value you will get the same set of random numbers each time you run your application."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1423082648, "post_id": 28330978, "comment_id": 45009268, "body": "I feel the need... the need... <b>for seed!</b> <a href=\"http://en.wikiquote.org/wiki/Top_Gun\" rel=\"nofollow noreferrer\">*</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423082789, "post_id": 28330978, "comment_id": 45009357, "body": "@MarkRansom and <i>I feel the need... the need... for s(p)eed !!</i>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423082900, "post_id": 28330978, "comment_id": 45009416, "body": "Do you know <a href=\"http://stackoverflow.com/questions/22915400\"><b>what</b> a seed is</a>?  I suspect that if you knew <i>what</i>, you would know <i>the need</i>."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1423082934, "post_id": 28331042, "comment_id": 45009436, "body": "Sir, please correct me if i&#39;m wrong, but isn&#39;t it like it <b>is</b> actually seeded automatically with a value <code>1</code> [without an explicit seed]."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1423083481, "post_id": 28331042, "comment_id": 45009730, "body": "Yes indeed - it is seeded with a known constant (1)."}], "tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": false, "score": 3, "last_activity_date": 1423083538, "last_edit_date": 1423083538, "creation_date": 1423082529, "answer_id": 28331042, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331042#28331042", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>I guess your question is why isn't it seeded automatically with an unpredictable value (like the current time). </p>\n\n<p>Having the random number generator generate the same sequence every time a program starts can be handy for debugging.</p>\n"}, {"tags": [], "owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "is_accepted": false, "score": 1, "last_activity_date": 1423082616, "creation_date": 1423082616, "answer_id": 28331059, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331059#28331059", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>Random number generation is the result of an iterative process. Each time you call rand the following happens:</p>\n\n<pre><code>seed := create_new_seed(seed);\nreturn random_number_from_seed(seed);\n</code></pre>\n\n<p>(Note that <code>create_new_seed</code> and <code>random_number_from_seed</code> are pure functions, they only use their parameters and do not access any globals).</p>\n\n<p>This means that if the seed is always 0, then the series of values returned by <code>rand</code> calls will always be the same. In order to allow for different values, a different seed is used in each run. One thing that changes between runs and can easily be used is the start time of the program.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1423083282, "last_edit_date": 1423083282, "creation_date": 1423082670, "answer_id": 28331072, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28331072#28331072", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>The <code>rand()</code> function is a <em>pseudo-random number generator</em>, i.e.,</p>\n\n<blockquote>\n  <p>The rand() function returns a pseudo-random integer in the range 0 to RAND_MAX inclusive</p>\n</blockquote>\n\n<p>The generation of the pseudo-random number depends on the <em>seed</em>. If you don't provide a different value as <em>seed</em>, you'll get the <em>same</em> random number on  every invocation(s) of your application. That's why, the <code>srand()</code> is used to <em>randomize</em> the seed itself. </p>\n\n<p>Most common practice : <code>srand(time(NULL))</code> [Suitable for single-run evaluations].</p>\n\n<blockquote>\n  <p>what is the need for the <em>[explicit]</em> seed ?</p>\n</blockquote>\n\n<p>Worthy to mention, from the <a href=\"http://linux.die.net/man/3/srand\" rel=\"nofollow\">man page</a></p>\n\n<blockquote>\n  <p>If no seed value is provided, the rand() function is automatically seeded with a value of 1.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1423121088, "creation_date": 1423121088, "answer_id": 28338342, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand/28338342#28338342", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>If you do not add srand(), each time you run your program, rand will generate the same random numbers.</p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1504, "favorite_count": 0, "accepted_answer_id": 28331072, "answer_count": 4, "score": -1, "last_activity_date": 1423121088, "creation_date": 1423082356, "question_id": 28330978, "link": "https://stackoverflow.com/questions/28330978/why-is-srand-required-to-be-called-before-generating-a-random-number-using-rand", "title": "why is srand required to be called before generating a random number using rand", "body": "<p>calling srand on the lines of <code>srand(time(NULL));</code> is required to setup the seed for <code>rand()</code> to generate a random number.\nMy question is what is the need for the seed ?</p>\n"}, {"tags": ["c++", "exception", "constructor"], "comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 1, "creation_date": 1423081901, "post_id": 28330841, "comment_id": 45008850, "body": "The return type of a constructor is the type itself.  <code>A()</code> returns an instance of <code>A</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1423082154, "post_id": 28330841, "comment_id": 45008993, "body": "<i>Is it a call to the class c&#39;tor and then an object of that class is thrown?</i>: Yes."}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1423082465, "post_id": 28330841, "comment_id": 45009163, "body": "@RSahu More specifically, it calls the constructor and then throws the object which was initialized by that call to the constructor."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1423082284, "creation_date": 1423082284, "answer_id": 28330961, "question_id": 28330841, "link": "https://stackoverflow.com/questions/28330841/throw-syntax-in-exception-c/28330961#28330961", "title": "throw syntax in exception c++", "body": "<p>Yes.</p>\n\n<p>More specifically, this constructs a temporary and throws it.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 0, "last_activity_date": 1423082799, "creation_date": 1423082799, "answer_id": 28331105, "question_id": 28330841, "link": "https://stackoverflow.com/questions/28330841/throw-syntax-in-exception-c/28331105#28331105", "title": "throw syntax in exception c++", "body": "<p>First, you should throw some instance derived from std::exception (Although you might throw integers, c-strings, ..., which is usually bad). In some cases you might throw a special exception (std:bad_alloc is one example).</p>\n\n<p>Then, you always throw a temporary instance (which has to be constructed) by invocation of a constructor: <code>throw SomeClass();</code></p>\n"}], "owner": {"reputation": 2972, "user_id": 324922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/arX7j.jpg?s=128&g=1", "display_name": "Day_Dreamer", "link": "https://stackoverflow.com/users/324922/day-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 28330961, "answer_count": 2, "score": 0, "last_activity_date": 1423082799, "creation_date": 1423081790, "last_edit_date": 1423081822, "question_id": 28330841, "link": "https://stackoverflow.com/questions/28330841/throw-syntax-in-exception-c", "title": "throw syntax in exception c++", "body": "<p>Maybe that's a stupid question, I'm new to C++:</p>\n\n<p>I read a little about the exception mechanism, and in some code I encountered the line:</p>\n\n<pre><code>throw SomeClass();\n</code></pre>\n\n<p>what does it mean?\nIs it a call to the class c'tor and then an object of that class is thrown?</p>\n\n<p>In other examples I saw it was always that \"throw\" threw an instance (specific string or int, and in here I'm confused because I know c'tor doesn't have return type.</p>\n\n<p>I don't understand the \"logic\" behind this expression...</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 2, "creation_date": 1423083009, "post_id": 28330795, "comment_id": 45009481, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4697180/template-function-as-a-template-argument\">Template function as a template argument</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423083614, "post_id": 28331209, "comment_id": 45009801, "body": "Upvote for the link. Leaving this unaccepted to see if someone would suggest a good alternative."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1423083170, "last_edit_date": 1495542511, "creation_date": 1423083170, "answer_id": 28331209, "question_id": 28330795, "link": "https://stackoverflow.com/questions/28330795/specify-a-template-argument-which-could-bind-to-a-function-template/28331209#28331209", "title": "Specify a template argument which could bind to a function template", "body": "<p>You'll find useful information in <a href=\"https://stackoverflow.com/questions/4697180/template-function-as-a-template-argument\">this question/answer</a>, but what comes out of it is that you can't pass function templates as template (template) parameters, so passing <code>std::for_each</code> that way is not possible.</p>\n"}, {"comments": [{"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423084386, "post_id": 28331508, "comment_id": 45010197, "body": "Thanks! This doesn&#39;t help me with the goal specified in the latter half of my problem though."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423084527, "post_id": 28331508, "comment_id": 45010264, "body": "Having to write a wrapper for each function I want to support defeats the purpose of <code>Apply</code> as a higher-order function meant to wrap other functions. If it were possible to write an <code>Apply</code> taking a template template function argument, I would be able to say <code>Apply&lt;for_each&gt;</code>, <code>Apply&lt;transform&gt;</code> and so on."}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423084726, "post_id": 28331508, "comment_id": 45010356, "body": "@Pradhan But why? Just call <code>std::for_each</code> or <code>std::transform</code> directly."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423084806, "post_id": 28331508, "comment_id": 45010395, "body": "To avoid specifying iterators when I want to loop over the full range. <code>boost::algorithm</code> would have a bunch of them available, but I wanted to see if it was possible to solve in this way. It isn&#39;t a big deal if you are dealing with named ranges, but it is a pain if you just want to use an unnamed temporary. I can&#39;t write <code>std::for_each(SomeRangeReturningFunc(...).begin(), &lt;what here?&gt;, unary_op)</code>."}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1423084950, "post_id": 28331508, "comment_id": 45010466, "body": "@Pradhan So you basically want to call std <code>std::for_each</code> / <code>std::transform</code> without calling <code>a.begin()</code> and <code>a.end()</code>?"}], "tags": [], "owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "is_accepted": false, "score": 1, "last_activity_date": 1423084205, "last_edit_date": 1495541571, "creation_date": 1423084205, "answer_id": 28331508, "question_id": 28330795, "link": "https://stackoverflow.com/questions/28330795/specify-a-template-argument-which-could-bind-to-a-function-template/28331508#28331508", "title": "Specify a template argument which could bind to a function template", "body": "<p>You can use a wrapper class as seen <a href=\"https://stackoverflow.com/questions/4697180/template-function-as-a-template-argument#answer-4697356\">here</a>:</p>\n\n<pre><code>template &lt;template &lt;typename, typename&gt; class Func, typename InpIt, typename UnaryFunction&gt;\nUnaryFunction Apply(InpIt first, InpIt last, UnaryFunction f)\n{\n    return Func&lt;InpIt, UnaryFunction&gt;::f(first, last, f);\n}\n\ntemplate&lt;typename T, typename T2&gt;\nstruct for_each_wrapper\n{\n    static T2 f(T ta, T tb, T2 t2)\n    {\n        return std::for_each(ta, tb, t2);\n    }\n};\n\nint main()\n{\n    vector&lt;int&gt; a(5);\n    Apply&lt;for_each_wrapper&gt;(\n        a.begin(),\n        a.end(),\n        [](int i)\n    {\n        std::cout &lt;&lt; i &lt;&lt; endl;\n    });\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1423084753, "creation_date": 1423081610, "last_edit_date": 1423084753, "question_id": 28330795, "link": "https://stackoverflow.com/questions/28330795/specify-a-template-argument-which-could-bind-to-a-function-template", "title": "Specify a template argument which could bind to a function template", "body": "<p>I am trying to write a higher-order function which would wrap around the standard library functions taking input and output iterators. Here's a failed attempt:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\ntemplate &lt;template &lt;typename, typename&gt; class Func, typename InpIt, typename UnaryFunction&gt;\ndecltype(Func&lt;InpIt, UnaryFunction&gt;(declval&lt;InpIt&gt;(), declval&lt;InpIt&gt;(), declval&lt;UnaryFunction&gt;())) Apply(InpIt first, InpIt last, UnaryFunction f)\n{\n  return Func&lt;InpIt, UnaryFunction&gt;(first, last, f);\n}\n\nint main()\n{\n  vector&lt;int&gt; a(5);\n  Apply&lt;for_each&gt;(a.begin(),\n                  a.end(),\n                  [](int i)\n                  {\n    cout &lt;&lt; i &lt;&lt; endl;\n  });\n  return 0;\n}\n</code></pre>\n\n<p>Clang 3.5 fails with</p>\n\n<pre><code>high.cpp:16:3: error: no matching function for call to 'Apply'\n  Apply&lt;for_each&gt;(a.begin(),\n  ^~~~~~~~~~~~~~~\nhigh.cpp:8:100: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'Func'\ndecltype(Func&lt;InpIt, UnaryFunction&gt;(declval&lt;InpIt&gt;(), declval&lt;InpIt&gt;(), declval&lt;UnaryFunction&gt;())) Apply(InpIt first, InpIt last, UnaryFunction f)\n</code></pre>\n\n<p>What is the right way to express this? Also, what I would ideally want is to be able to simply say something like</p>\n\n<pre><code>template &lt;MagicIncantation Func, typename Range, typename ... Args&gt;\nMoreMagic Apply(Range&amp;&amp; rng, Args&amp;&amp; ... args)\n{\n  using std::begin; using std::end;\n  Func(begin(rng), end(rng), args...);\n}\n</code></pre>\n\n<p>allowing one to avoid specifying iterators when you want to iterate over the full range.</p>\n"}, {"tags": ["c++", "casting", "runtime-error", "borland-c++"], "comments": [{"owner": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 1, "creation_date": 1423081912, "post_id": 28330783, "comment_id": 45008854, "body": "You should step through your program using a debugger following the path that brings you to the crashing task to determine which line is causing a problem.  I don&#39;t use Borland Builder for C++ so I&#39;m not sure about your actual question though."}, {"owner": {"reputation": 1, "user_id": 4530301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f38b56a94fdf2beea293ae8dd6bc92?s=128&d=identicon&r=PG&f=1", "display_name": "Matia Ward", "link": "https://stackoverflow.com/users/4530301/matia-ward"}, "reply_to_user": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 0, "creation_date": 1423172364, "post_id": 28330783, "comment_id": 45052697, "body": "That makes sense, but I need help with where to find this information at within the program."}, {"owner": {"reputation": 6250, "user_id": 2359643, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/05ea83110037dc15d8d22e722fd184f4?s=128&d=identicon&r=PG", "display_name": "JNYRanger", "link": "https://stackoverflow.com/users/2359643/jnyranger"}, "edited": false, "score": 0, "creation_date": 1423174046, "post_id": 28330783, "comment_id": 45053535, "body": "Again, I personally don&#39;t know anything about Borland Builder, but if it doesn&#39;t support giving you a line number when crashing/experiencing a runtime error during a debug session, then doing a step through will be the only way to locate the error.  First place to start is with the queries within that &#39;specific task&#39; and see where you may be storing a guid/string.  Good luck!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1423450004, "post_id": 28330783, "comment_id": 45139347, "body": "This is an SQL error message.  The database has no concept of your code or its line numbers.  So no, it cannot report that info to you.  You are going to have to track down which SQL query you are executing that is failing, and then you can look at the input you are sending to it. In SQLServer, a uniqueidentifier must be given a character string that conforms to the supported GUID format that is <a href=\"https://msdn.microsoft.com/en-us/library/ms187942.aspx\" rel=\"nofollow noreferrer\">documented on MSDN</a>."}], "owner": {"reputation": 1, "user_id": 4530301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f38b56a94fdf2beea293ae8dd6bc92?s=128&d=identicon&r=PG&f=1", "display_name": "Matia Ward", "link": "https://stackoverflow.com/users/4530301/matia-ward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423084037, "creation_date": 1423081550, "last_edit_date": 1423084037, "question_id": 28330783, "link": "https://stackoverflow.com/questions/28330783/borland-c-builder-6-error-reporting", "title": "Borland C++ Builder 6 Error Reporting", "body": "<p>My program is compiling just fine, and most of my functions in the program work, but when I complete a specific task in my program I get an error:</p>\n\n<pre><code>\"Conversion failed when converting from a character string to uniqueidentifier\". \n</code></pre>\n\n<p>My program is huge and has plenty of SQL queries that this could relate to. It would make this process much quicker if this error could give me a line number. Is this possible in Borland?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1423080914, "post_id": 28330581, "comment_id": 45008358, "body": "Are you asking how you would loop through a 2d array and put user input into the array?"}, {"owner": {"reputation": 1733, "user_id": 1413374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d08a695cf9f4c757fd16d2dc447d9f2?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1413374/sebastian"}, "edited": false, "score": 0, "creation_date": 1423081223, "post_id": 28330581, "comment_id": 45008522, "body": "Is that even correct syntax? T(I[500],j[15])"}, {"owner": {"reputation": 1, "user_id": 4530238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787e216fc1717a88fcf4f624ad59b486?s=128&d=identicon&r=PG&f=1", "display_name": "John Hill", "link": "https://stackoverflow.com/users/4530238/john-hill"}, "edited": false, "score": 0, "creation_date": 1423081395, "post_id": 28330581, "comment_id": 45008607, "body": "int T[500] [15]. like I said, im relatively new to this lol.."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1423086060, "post_id": 28330581, "comment_id": 45011053, "body": "What about learning a bit of the language, and coming back to post what you have tried and doesn&#39;t work ?"}, {"owner": {"reputation": 1, "user_id": 4530238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787e216fc1717a88fcf4f624ad59b486?s=128&d=identicon&r=PG&f=1", "display_name": "John Hill", "link": "https://stackoverflow.com/users/4530238/john-hill"}, "edited": false, "score": 0, "creation_date": 1423088627, "post_id": 28330581, "comment_id": 45012337, "body": "Quentin, well I have researched for a couple of days on arrays and none of what ive read is what I need to do. So I wont even know the correct way to even set it up."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423083580, "post_id": 28331134, "comment_id": 45009772, "body": "Bad usual failure not to check the extraction from an input stream (but it&#39;s a sketch)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1423082911, "creation_date": 1423082911, "answer_id": 28331134, "question_id": 28330581, "link": "https://stackoverflow.com/questions/28330581/populating-a-2d-array-with-my-own-input-variables-in-c/28331134#28331134", "title": "Populating a 2D array with my own input variables in C++", "body": "<p>To declare a 2d array and get user input you would do something like this:</p>\n\n<pre><code>const int ROWS = 10;\nconst int COLS = 10;\n\nint numbers[ROWS][COLS];\n\nfor (int i = 0 i &lt; ROWS; i++)\n{\n    for (int j = 0; j &lt; COLS; j++)\n    {\n        std::cout &lt;&lt; \"Enter Element (\" &lt;&lt; i &lt;&lt; \",\" &lt;&lt; j &lt;&lt; \"): \";\n        std::cin &gt;&gt; numbers[i][j]\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4530238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787e216fc1717a88fcf4f624ad59b486?s=128&d=identicon&r=PG&f=1", "display_name": "John Hill", "link": "https://stackoverflow.com/users/4530238/john-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2016, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1423082911, "creation_date": 1423080783, "question_id": 28330581, "link": "https://stackoverflow.com/questions/28330581/populating-a-2d-array-with-my-own-input-variables-in-c", "title": "Populating a 2D array with my own input variables in C++", "body": "<p>I am new to C++ and have been hitting a snag for a couple of days. I need to figure out a way to input my own values into the array rows and columns as I go. For array T(I[500],j[15]), I need to input the row that is being looped and then add another loop inside that one for the columns of that row. PLEASE HELP!!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1423080773, "post_id": 28330521, "comment_id": 45008260, "body": "You should grab a <a href=\"http://stackoverflow.com/q/388242/1782465\">good book</a> and look up concepts like loops and the <code>return</code> statement."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 2, "creation_date": 1423080972, "post_id": 28330521, "comment_id": 45008394, "body": "Unless you intend to open the backpack automatically after you attack the rat, you will probably want a <code>break</code> statement after <code>attackRat()</code>. Generally, it&#39;s good practice to have a <code>break</code> statement at the end of each case within a switch unless you have a very good reason for not doing so."}, {"owner": {"reputation": 992, "user_id": 349433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6574721bf87d4a3b419209f4ddb807?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/349433/josh"}, "edited": false, "score": 3, "creation_date": 1423080994, "post_id": 28330521, "comment_id": 45008403, "body": "Aside from the question, you almost certainly want a <code>break;</code> at at the end of each <code>case</code> section. Without that, if the user chooses to attack the rat, they will <i>also</i> open a backback."}, {"owner": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "edited": false, "score": 0, "creation_date": 1423082674, "post_id": 28330521, "comment_id": 45009286, "body": "Thank you for the help but I still don&#39;t understand what is wrong with the programme."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1423085168, "post_id": 28330521, "comment_id": 45010583, "body": "Only call srand ONCE in your program."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1423085300, "post_id": 28330521, "comment_id": 45010650, "body": "I rolled back your last edit. <b>Do not</b> edit your title to indicate it&#39;s <i>Still Unsolved</i> (or <i>Solved</i>, for that matter). If your question is solved, accept the answer that provided the solution. If it is unsolved, simply <i>don&#39;t accept an answer</i>. Editing the title to show the status is inappropriate."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 0, "creation_date": 1423080929, "post_id": 28330589, "comment_id": 45008367, "body": "@6502 Actually, it will (partly by chance) work in all cases - there&#39;s no code between the recursive call to <code>attackRat()</code> and the function&#39;s end."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1423080970, "post_id": 28330589, "comment_id": 45008392, "body": "I refuse to post an answer involving longjmp."}, {"owner": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "edited": false, "score": 0, "creation_date": 1423082276, "post_id": 28330589, "comment_id": 45009061, "body": "I tried that and it went back to the start of the program :/"}, {"owner": {"reputation": 5421, "user_id": 1594449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d73160b862fef962b8981a8ae620c?s=128&d=identicon&r=PG", "display_name": "gknicker", "link": "https://stackoverflow.com/users/1594449/gknicker"}, "edited": false, "score": 0, "creation_date": 1423084887, "post_id": 28330589, "comment_id": 45010430, "body": "hmm - try printing something to show where it landed after returning (see my edit)"}, {"owner": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "edited": false, "score": 0, "creation_date": 1423085696, "post_id": 28330589, "comment_id": 45010857, "body": "I printed something to where I want it to land but it goes back way before that"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "edited": false, "score": 0, "creation_date": 1423228745, "post_id": 28330589, "comment_id": 45074353, "body": "@ElliotMorgan You should really start by following a good book or tutorial. You can&#39;t learn proper programming by almost randomly hacking away at code without understanding it."}, {"owner": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "edited": false, "score": 0, "creation_date": 1423260870, "post_id": 28330589, "comment_id": 45091715, "body": "I have a couple books but it doesn&#39;t really mention it. I&#39;ve tried googling it and looking at tutorials but I literally can&#39;t find anything."}], "tags": [], "owner": {"reputation": 5421, "user_id": 1594449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d73160b862fef962b8981a8ae620c?s=128&d=identicon&r=PG", "display_name": "gknicker", "link": "https://stackoverflow.com/users/1594449/gknicker"}, "is_accepted": false, "score": 4, "last_activity_date": 1423084844, "last_edit_date": 1423084844, "creation_date": 1423080805, "answer_id": 28330589, "question_id": 28330521, "link": "https://stackoverflow.com/questions/28330521/how-do-i-return-to-the-the-line-after-where-a-function-is-called/28330589#28330589", "title": "How do I return to the the line after where a function is called?", "body": "<p>Just return from <code>attackRat()</code>:</p>\n\n<pre><code>// Does something go here to return it to the bit I want?\nreturn;\n</code></pre>\n\n<p>Then once you're back in <code>ratCave()</code>:</p>\n\n<pre><code>// I want the program to come here once the rat is dead.\ncout &lt;&lt; \"\\nYup, the rat's dead and we're back in the rat cave.\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 4, "last_activity_date": 1423080931, "creation_date": 1423080931, "answer_id": 28330619, "question_id": 28330521, "link": "https://stackoverflow.com/questions/28330521/how-do-i-return-to-the-the-line-after-where-a-function-is-called/28330619#28330619", "title": "How do I return to the the line after where a function is called?", "body": "<p>Instead of calling <code>attackRat()</code> from inside <code>attackRat</code> itself to do a loop use a normal loop with:</p>\n\n<pre><code>for(;;) {\n   ... code to repeat forever ...\n}\n</code></pre>\n\n<p>then you can use <code>return</code> to go back to who called the function</p>\n"}], "owner": {"reputation": 133, "user_id": 4012869, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000171221219/picture?type=large", "display_name": "Elliot Morgan", "link": "https://stackoverflow.com/users/4012869/elliot-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1423348383, "creation_date": 1423080566, "last_edit_date": 1423085199, "question_id": 28330521, "link": "https://stackoverflow.com/questions/28330521/how-do-i-return-to-the-the-line-after-where-a-function-is-called", "title": "How do I return to the the line after where a function is called?", "body": "<p>Sorry for being a noob. How do I return to the line of code just after where <code>attackRat()</code> is called? After the rat is dead I want the program to come to here, how do I do that? Thanks and sorry if I'm being stupid.</p>\n\n<pre><code>void ratCave() {\n\n    location = \"rat cave\";\n    system(\"cls\");\n    cout &lt;&lt; \"\\n You arrive at the cave where two rats greet you at the entrance.\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n What would you like to do?\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n 1. Attack the rats\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n 2. Open backpack\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n&gt; \";\n    cin &gt;&gt; input;\n    switch (input) {\n\n        case 1:\n        attackRat();    \n        // I want the program to come here once the rat is dead.\n\n        case 2:\n        backpack();\n\n    }\n}\n\nvoid attackRat() {\n\n    srand (time(NULL));\n\n    damage = rand() % 10 + 10;\n    ratDamage = rand() % 5 + 5;\n\n    if (start == 1) {\n\n        ratHealth = rand() % 20 + 30;\n        turn = rand() % 2;\n\n        if (turn == 1) {\n            system(\"cls\");\n            cout &lt;&lt; \"\\n The rat have the first turn.\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\n \";\n            system(\"pause\");\n\n            health = health - ratDamage;\n            system(\"cls\");\n            cout &lt;&lt; \"\\n The rat attacks you for \" &lt;&lt; ratDamage &lt;&lt; \" health!\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\n \";\n            system(\"pause\");    \n        }\n\n        else {\n            system(\"cls\");\n            cout &lt;&lt; \"\\n You have the first turn.\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\n \";\n            system(\"pause\");    \n        }\n    }\n\n    start = 0;\n\n    system(\"cls\");\n    cout &lt;&lt; \"\\n Your health: \" &lt;&lt; health &lt;&lt; endl;\n    cout &lt;&lt; \"\\n Rat health:  \" &lt;&lt; ratHealth &lt;&lt; endl;\n    cout &lt;&lt; \"\\n What do you do?\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n [1] Attack rat\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n [2] Use a potion\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n&gt; \";\n    cin &gt;&gt; input;\n    switch (input) {\n\n        case 1:\n        ratHealth = ratHealth - damage;\n        system(\"cls\");\n        cout &lt;&lt; \"\\n You attack the rat for \" &lt;&lt; damage &lt;&lt; \" damage!\" &lt;&lt; endl;\n        cout &lt;&lt; \"\\n \";\n        system(\"pause\");\n\n        if (ratHealth &lt; 1) {\n            ratHealth = 0;\n            system(\"cls\");\n            cout &lt;&lt; \"\\n You killed the rat!\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\n \";\n            system(\"pause\");\n            // Does something go here to return it to the bit I want?\n        }\n\n        health = health - ratDamage;\n        system(\"cls\");\n        cout &lt;&lt; \"\\n The rat attacks you for \" &lt;&lt; ratDamage &lt;&lt; \" damage!\" &lt;&lt; endl;\n        cout &lt;&lt; \"\\n \";\n        system(\"pause\");\n\n        if (health == 0) {\n            system(\"cls\");\n            cout &lt;&lt; \"\\n You died!\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\n \";\n            system(\"pause\");\n            exit(0);    \n        }\n\n        case 2:\n        attackRat();\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 1, "creation_date": 1423081890, "post_id": 28330480, "comment_id": 45008843, "body": "This is the <a href=\"http://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow noreferrer\">Traveling Salesman Problem</a>, which is NP-Complete, so there is no known efficient solution to it, but there are some known heuristics and approximations if you can sattle for &quot;good enough&quot;, and not optimal"}, {"owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1423117397, "post_id": 28330480, "comment_id": 45020606, "body": "@amit I had edited the post and added a code too. but it does not provide correct answer. What can be reason ?"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "edited": false, "score": 0, "creation_date": 1423080856, "post_id": 28330550, "comment_id": 45008312, "body": "But Dijsktra dont do this. Its single source shortest path algorithm and don&#39;t ensure that overall sum of length is minimum"}, {"owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "edited": false, "score": 0, "creation_date": 1423080875, "post_id": 28330550, "comment_id": 45008330, "body": "Do check the requirement of the question"}, {"owner": {"reputation": 242, "user_id": 4447005, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/58c7182138fa431670bb5df387118097?s=128&d=identicon&r=PG&f=1", "display_name": "freeDom-", "link": "https://stackoverflow.com/users/4447005/freedom"}, "reply_to_user": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "edited": false, "score": 0, "creation_date": 1423090311, "post_id": 28330550, "comment_id": 45013082, "body": "If I get you right then Dijkstra can of course handle it. Or why do you think it is called Dijkstra&#39;s shortest path? Please be more specific and best add a picture of the example graph if you can. This will explain your problem far better than any word!"}], "tags": [], "owner": {"reputation": 242, "user_id": 4447005, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/58c7182138fa431670bb5df387118097?s=128&d=identicon&r=PG&f=1", "display_name": "freeDom-", "link": "https://stackoverflow.com/users/4447005/freedom"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080696, "creation_date": 1423080696, "answer_id": 28330550, "question_id": 28330480, "link": "https://stackoverflow.com/questions/28330480/minimum-length-to-travel-all-nodes/28330550#28330550", "title": "Minimum length to travel all nodes", "body": "<p>Have a lock at <a href=\"http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\" rel=\"nofollow\">Dijkstra algorithm</a> or A* (advanced Dijkstra). There is some pseudocode on the wiki page and you will find a lot of implementations around in any language you wish... I think it is one of the most important pathfindign algorithms.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "edited": false, "score": 0, "creation_date": 1423082299, "post_id": 28330879, "comment_id": 45009075, "body": "How is this travelling salesman problem. Assume that number of nodes are only 20. Please provide a pseudocode for it."}, {"owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "edited": false, "score": 0, "creation_date": 1423117362, "post_id": 28330879, "comment_id": 45020597, "body": "I had made a small and precise code for TSP but getting wrong answer on above example.Can you please check it once"}], "tags": [], "owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1423081931, "creation_date": 1423081931, "answer_id": 28330879, "question_id": 28330480, "link": "https://stackoverflow.com/questions/28330480/minimum-length-to-travel-all-nodes/28330879#28330879", "title": "Minimum length to travel all nodes", "body": "<p>This is a variation of the NP-Hard <a href=\"http://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow\">travelling salesman</a> problem. The only difference is that your start node is fixed and you seem to be able to visit nodes more than once.</p>\n\n<p>There are a lot of algorithms that you can use. Unfortunately, none are very efficient for large number of nodes. If you don't need the absolute best solution, there are approximate algorithms that can help.</p>\n"}], "owner": {"reputation": 91, "user_id": 4413267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18ed9b723f1988c3976c3f09d664a8f?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4413267/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 701, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1423117281, "creation_date": 1423080423, "last_edit_date": 1423117281, "question_id": 28330480, "link": "https://stackoverflow.com/questions/28330480/minimum-length-to-travel-all-nodes", "title": "Minimum length to travel all nodes", "body": "<p>We are given a graph containing N nodes with M edges between them and each edge is having some weight associated with it.Now we need to travel through all the vertices in such a way that total length traveled is minimum. \nWe assume that we need to start from Node 1 always.</p>\n\n<p>Like say we have 2 nodes and 2 edges. </p>\n\n<p>Edge 1 : It is between 1 and 2 and length is 4</p>\n\n<p>Edge 2 : It is between 1 and 3 and length is 2</p>\n\n<p>Then here minimum length need to be traveled is 8 as one will start from node 1. Then to node 3 then back to node 1 and then to node 2.</p>\n\n<p>How to do this problem ? Please help.</p>\n\n<p>As being discussed in comments and answer provided that its TSP I coded it,but can anyone help me find why this code gives INT_MIN as answer </p>\n\n<pre><code>#define MAXN 20\nbool visited[MAXN][(1&lt;&lt;MAXN)+5];\nint value[MAXN][(1&lt;&lt;MAXN)+5]; \nint weight[MAXN][MAXN] = {{0, 2, 4},{2, 0, -1},{4, -1, 0}};\nint DP(int currentPos,int currentMask,int N){\nif(currentMask==(1&lt;&lt;N)-1){\n    visited[currentPos][currentMask]=true;\n    return value[currentPos][currentMask];\n}\nif(visited[currentPos][currentMask]){\n    return value[currentPos][currentMask];\n}\nint ans=INT_MAX;\nint cost;\nvisited[currentPos][currentMask]=true;\nfor (int i=0;i&lt;N;i++){\n    if(weight[currentPos][i]!=-1 &amp;&amp; ((currentMask)&amp;(1&lt;&lt;i))==0){\n        cost=DP(i,(currentMask)|(1 &lt;&lt; i),N)+weight[currentPos][i];\n        ans=min(ans,cost);\n    }\n}\nreturn value[currentPos][currentMask]=ans;\n\n}\nint main ()\n{\n    memset (visited, false, sizeof (visited));\n    printf (\"Cost : %d\\n\", DP (0, 1,3));\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-studio-2012", "move-semantics", "rvalue-reference"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1423080734, "post_id": 28330471, "comment_id": 45008244, "body": "VS2012 is too old, try at least VS2013 and preferably the Community Preview for 2015"}], "answers": [{"comments": [{"owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "edited": false, "score": 0, "creation_date": 1423081095, "post_id": 28330636, "comment_id": 45008466, "body": "Does the thread copy/move the internal copies into the functors parameters?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423081164, "post_id": 28330636, "comment_id": 45008489, "body": "@MooingDuck: Why would it be?  This is the behavior specified for <code>std::thread</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423081575, "post_id": 28330636, "comment_id": 45008696, "body": "@MooingDuck: Arguably, since these are copies made expressly for the use of the new thread, it should use <code>std::move</code> on ALL the arguments regardless of the original value category."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 4, "creation_date": 1423081790, "post_id": 28330636, "comment_id": 45008799, "body": "But wait, <code>DECAY_COPY</code> returns a raw <code>T</code> (no references, no nothing).  Calling <code>INVOKE</code> with a raw <code>T</code> is calling it in a bind-to-rvalue context.  It doesn&#39;t say &quot;I will call <code>DECAY_COPY</code>, store the result, and pass that stored result on&quot;, it says &quot;I will invoke with a <code>DECAY_COPY</code>&quot;.  If this argument is right, your analysis is upside down, and MSVC has a bug.  It is also a practical error, because the parameters stored in <code>thread</code> will never be used again, so having them bind to lvalue non-const references is conceptually wrong, and binding to rvalues is right."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423084978, "post_id": 28330636, "comment_id": 45010484, "body": "@Yakk: Actually, it does say that DECAY_COPY is performed on a different thread from the call to <code>f</code>.  See my above comment where I said that moving these objects would be the &quot;right&quot; thing to do... but the Standard doesn&#39;t specify that."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1423087983, "post_id": 28330636, "comment_id": 45012032, "body": "@benvoigt what thread it is performed in has nothing to do with the semantics of the INVOKE.  Imagine that clause (the different thread) did not exist: would it be clear what the semantics of the INVOKE would mean (ie, what overloads are valid, etc)?  How does it happening in a different thread change this?  It does not.  It makes the implementation tricky, but it doesn&#39;t permit what MSVC does.  It binding to rvalues and NOT lvalues is both mandated by the standard, <i>and</i> the right thing to do."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": -1, "last_activity_date": 1423081333, "last_edit_date": 1592644375, "creation_date": 1423080988, "answer_id": 28330636, "question_id": 28330471, "link": "https://stackoverflow.com/questions/28330471/visual-studio-implementation-of-move-semantics-and-rvalue-reference/28330636#28330636", "title": "visual studio implementation of &quot;move semantics&quot; and &quot;rvalue reference&quot;", "body": "<p>What is returned from <code>std::move</code> is indeed an rvalue reference, but that doesn't matter because the <code>thread</code> constructor does not use perfect forwarding for its arguments.  First it copies/moves them to storage owned by the new thread.  Then, inside the new thread, the supplied function is called using the copies.</p>\n<p>Since the copies are not temporary objects, this step won't bind to rvalue-reference parameters.</p>\n<p>What the Standard says (30.3.1.2):</p>\n<blockquote>\n<p>The new thread of execution executes</p>\n<pre><code>INVOKE( DECAY_COPY(std::forward&lt;F&gt;(f)),  DECAY_COPY(std::forward&lt;Args&gt;(args))... )\n</code></pre>\n<p>with  the  calls  to\n<code>DECAY_COPY</code> being  evaluated  in  the  constructing  thread.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>In several places in this Clause the operation <code>DECAY_COPY(x)</code> is used. All such uses mean call the function <code>decay_copy(x)</code> and use the result, where <code>decay_copy</code> is defined as follows:</p>\n<pre><code>template &lt;class T&gt; decay_t&lt;T&gt; decay_copy(T&amp;&amp; v)\n{ return std::forward&lt;T&gt;(v); }\n</code></pre>\n</blockquote>\n<p>The value category is lost.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423085257, "post_id": 28330984, "comment_id": 45010632, "body": "Since the copy is made in a separate thread, and <b>is not destroyed at the end of the full-expression</b>, doesn&#39;t that imply the copies are not prvalues?  And it doesn&#39;t seem to fit into any of the cases that would make them xvalues...  so then they aren&#39;t rvalues at all and cannot bind to rvalue references."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1423088156, "post_id": 28330984, "comment_id": 45012106, "body": "@BenVoigt That is an implementation detail.  The standard mandates that  <code>INVOKE( DECAY_COPY(std::forward&lt;F&gt;(f)),  DECAY_COPY(std::forward&lt;Args&gt;(args))... )</code> be called by the created thread.  The compiler is free to do anything as-if that happened.  As the return value of <code>DECAY_COPY()</code> cannot bind to lvalues, and can bind to rvalues, MSVC not doing what the standard mandates.  Luckily it is impossible to detect that the arguments to a function call are prvalues, so <code>std::move</code> produces the required result without compiler extensions (I think)."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423164854, "post_id": 28330984, "comment_id": 45048757, "body": "But the parameters passed to INVOKE are not temporaries.  Logically the Standard should call this case out as an x value but it hasn&#39;t done so."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423166103, "post_id": 28330984, "comment_id": 45049437, "body": "@BenVoigt no, the parameters passed to INVOKE are temporaries.  That is what the standard says.  It says <code>INVOKE( DECAY_COPY(std::forward&lt;F&gt;(f)), DECAY_COPY(std::forward&lt;Args&gt;(args))... )</code>.  <code>DECAY_COPY</code> returns a temporary, period.  So under the standard, the function must operate on a temporary, or behave identical to as-if it was operating on a temporary.  What more, that temporary must have been created <b>in the calling thread</b>, but the <code>INVOKE</code> must occur in the created thread!  There is no way to do this in C++11, <i>but</i> under the as-if rule the compiler can fake it with a <code>std::move</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423166298, "post_id": 28330984, "comment_id": 45049539, "body": "Now, practically, the as-if implementation (where the <code>std::thread</code> creates a tuple of decayed arguments in the free store, then forwards the arguments into it, then passes that tuple to the worker thread, then the worker thread <code>move</code>s the arguments out) is the practical one, as barring the creation of a thread and passing a function pointer to start executing and a <code>void*</code> to the thread, most everything can be done as a library without language extensions.  I&#39;m just stating that the standard is clear about the semantics -- invoke of a temporary copy of f with temporary copies of each arg."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423166591, "post_id": 28330984, "comment_id": 45049695, "body": "Hmm I guess a closer reading of 12.2 supports that: &quot;The temporary to which the reference is bound or the temporary that is the complete object of a subobject to which the reference is bound persists for the lifetime of the reference except: <b>A temporary object  bound to a reference parameter in a function call persists until the completion of the full-expression containing the call.</b>&quot;  And the function call is in the child thread."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1423167215, "post_id": 28330984, "comment_id": 45050039, "body": "@BenVoigt yep, but no C++ compiler supports &quot;create temporaries in one thread, and use them in another&quot;.  So reading it as &quot;well, that is impossible&quot; is quite reasonable: it just disagrees with the crazy requirement the standard places on the code!  If there was any way to distinguish between a temporary and the output of <code>std::move</code> when passed to <code>operator()</code> this would be effectively a defect in the standard, but I don&#39;t think there is any way.  So the &quot;sensible&quot; forwarding and move implementation fakes it well enough..."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 6, "last_activity_date": 1423082886, "last_edit_date": 1423082886, "creation_date": 1423082373, "answer_id": 28330984, "question_id": 28330471, "link": "https://stackoverflow.com/questions/28330471/visual-studio-implementation-of-move-semantics-and-rvalue-reference/28330984#28330984", "title": "visual studio implementation of &quot;move semantics&quot; and &quot;rvalue reference&quot;", "body": "<p>This appears to be a bug in MSVC2012.  (and on quick inspection, MSVC2013 and MSVC2015)</p>\n\n<p><code>thread</code> does not use perfect forwarding directly, as storing a reference to data (temporary or not) in the originating thread and using it in the spawned thread would be extremely error prone and dangerous.</p>\n\n<p>Instead, it copies each argument into <code>decay_t&lt;?&gt;</code>'s internal data.</p>\n\n<p>The bug is that when it calls the worker function, it simply passes that internal copy to your procedure.  Instead, it should <em>move</em> that internal data into the call.</p>\n\n<p>This does not seem to be fixed in compiler version 19, which I think is MSVC2015 (did not double check), based off compiling your code over here</p>\n\n<p>This is both due to the wording of the standard (it is supposed to invoke a <code>decay_t&lt;F&gt;</code> with <code>decay_t&lt;Ts&gt;...</code> -- which means rvalue binding, not lvalue binding), and because the local data stored in the thread will never be used again after the invocation of your procedure (so logically it should be treated as expiring data, not persistent data).</p>\n\n<p>Here is a work around:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct thread_rvalue_fix_wrapper {\n  F f;\n  template&lt;class...Args&gt;\n  auto operator()(Args&amp;...args)\n  -&gt; typename std::result_of&lt;F(Args...)&gt;::type\n  {\n      return std::move(f)( std::move(args)... );\n  }\n};\ntemplate&lt;class F&gt;\nthread_rvalue_fix_wrapper&lt; typename std::decay&lt;F&gt;::type &gt;\nthread_rvalue_fix( F&amp;&amp; f ) { return {std::forward&lt;F&gt;(f)}; }\n</code></pre>\n\n<p>then</p>\n\n<pre><code>thread th(thread_rvalue_fix(&amp;toSin), /*std::ref(list)*/std::move(list));\n</code></pre>\n\n<p>should work.  (tested in MSVC2015 online compiler linked above)  Based off personal experience, it should also work in MSVC2013.  I don't know about MSVC2012.</p>\n"}], "owner": {"reputation": 63, "user_id": 4530116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912ae3ac06bd84c89202dcbf925c4961?s=128&d=identicon&r=PG&f=1", "display_name": "exponential", "link": "https://stackoverflow.com/users/4530116/exponential"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1423082886, "creation_date": 1423080387, "question_id": 28330471, "link": "https://stackoverflow.com/questions/28330471/visual-studio-implementation-of-move-semantics-and-rvalue-reference", "title": "visual studio implementation of &quot;move semantics&quot; and &quot;rvalue reference&quot;", "body": "<p>I came across a Youtube video on c++11 concurrency (part 3) and the following code, which compiles and generates correct result in the video. </p>\n\n<p>However, I got a compile error of this code using Visual Studio 2012. The compiler complains about the argument type of <code>toSin(list&lt;double&gt;&amp;&amp;)</code>. If I change the argument type to <code>list&lt;double&gt;&amp;</code>, the code compiled. </p>\n\n<p>My question is what is returned from <code>move(list)</code> in the <code>_tmain()</code>, is it a rvalue reference or just a reference? </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;list&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nvoid toSin(list&lt;double&gt;&amp;&amp; list)\n{\n    //this_thread::sleep_for(chrono::seconds(1));\n    for_each(list.begin(), list.end(), [](double &amp; x)\n    {\n        x = sin(x);\n    });\n\n    for_each(list.begin(), list.end(), [](double &amp; x)\n    {\n        int count = static_cast&lt;int&gt;(10*x+10.5);\n        for (int i=0; i&lt;count; ++i)\n        {\n            cout.put('*');\n        }\n        cout &lt;&lt; endl;\n    });\n}    \n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    list&lt;double&gt; list;\n\n    const double pi = 3.1415926;\n    const double epsilon = 0.00000001;\n    for (double x = 0.0; x&lt;2*pi+epsilon; x+=pi/16)\n    {\n        list.push_back(x);\n    }\n\n    thread th(&amp;toSin, /*std::ref(list)*/std::move(list));\n    th.join();    \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "multithreading", "exception", "dllimport"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1423080667, "post_id": 28330422, "comment_id": 45008208, "body": "Show how you call the function."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423081086, "post_id": 28330422, "comment_id": 45008461, "body": "Perhaps you aren&#39;t allowed to call the function from a thread other than the main thread. You should work this out by writing some C++ code so that you are sure that the p/invoke is not confounding. I mean, if the p/invoke is wrong, how can you expect us to help? You only showed one half of the interface."}, {"owner": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423081344, "post_id": 28330422, "comment_id": 45008579, "body": "the problem is that i don&#39;t have access to the code inside the dll its a part of project that i am doing for a startup company. i can say that i worked with a Similar function within the same dll and it worked fine under the same workflow."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423081975, "post_id": 28330422, "comment_id": 45008892, "body": "You may as well give up if you don&#39;t know the interface. Or do you mean you don&#39;t have the implementation. If you have the interface, can&#39;t we see it?"}, {"owner": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423082619, "post_id": 28330422, "comment_id": 45009254, "body": "i added the interface, and you are  right i dont have the implementation."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423083271, "post_id": 28331162, "comment_id": 45009616, "body": "are you sure it should be &quot;Out&quot; insted of &quot;In&quot; before the &quot;MarshalAs&quot; ?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423083350, "post_id": 28331162, "comment_id": 45009671, "body": "I&#39;ve no idea. That&#39;s a question that you need to answer! Which way does the data flow?"}, {"owner": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423083832, "post_id": 28331162, "comment_id": 45009904, "body": "ok, i got it sorry its &quot;In&quot; sensors is passed into the function. how can i pass a null pointer to the last to integers address?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423084957, "post_id": 28331162, "comment_id": 45010470, "body": "You cant pass null to a C++ reference"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "edited": false, "score": 0, "creation_date": 1423086111, "post_id": 28331162, "comment_id": 45011082, "body": "If it is int* rather than int&amp; then you can declare params as IntPtr and pass IntPtr.Zero. I sense confusion though. Perhaps on the part of the dll developer."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423083326, "last_edit_date": 1423083326, "creation_date": 1423082996, "answer_id": 28331162, "question_id": 28330422, "link": "https://stackoverflow.com/questions/28330422/system-access-violation-exception-while-calling-c-function-from-a-thread-in-c/28331162#28331162", "title": "system.access.violation exception while calling c++ function from a thread in c#", "body": "<blockquote>\n  <p>I am not passing the two last arguments (<code>int&amp;</code>) as agreed with the man who wrote the DLL.</p>\n</blockquote>\n\n<p>Well, there's the problem. You cannot omit parameters. It should be:</p>\n\n<pre><code>[DllImport(@\"eyeWhere.dll\", CallingConvention = CallingConvention.Cdecl, \n    CharSet = CharSet.Unicode)]\npublic static extern int Eye_GetPositionS(\n    string filename, \n    [In, MarshalAs(UnmanagedType.LPArray, SizeConst = 9)] \n    double[] sensors,\n    ref int map_x,\n    ref int map_y\n);\n</code></pre>\n\n<p>You simply cannot omit these parameters, no matter what the guy who wrote the DLL says. Perhaps he means that the parameters are really <code>int*</code> and you can pass <code>nullptr</code>.</p>\n\n<p>I've used <code>ref</code> for these parameters, but perhaps they should be <code>out</code>. You presumably know which is appropriate. </p>\n\n<p>Likewise I'm guessing at the intent of the <code>sensors</code> parameter. If the data flows out rather than in, then use <code>Out</code>. If the data flows in both directions, use <code>[In, Out, ...]</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4350000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5530d16cbd8695ec511f8d7c166844b0?s=128&d=identicon&r=PG", "display_name": "Elad Yona", "link": "https://stackoverflow.com/users/4350000/elad-yona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423083326, "creation_date": 1423080233, "last_edit_date": 1423082539, "question_id": 28330422, "link": "https://stackoverflow.com/questions/28330422/system-access-violation-exception-while-calling-c-function-from-a-thread-in-c", "title": "system.access.violation exception while calling c++ function from a thread in c#", "body": "<p>i am importing c++ function from a dll to my winform c# app:</p>\n\n<pre><code>[DllImport(@\"eyeWhere.dll\", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]\npublic static extern int Eye_GetPositionS(string filename, [MarshalAs(UnmanagedType.LPArray, SizeConst = 9)] double[] sensors);\n</code></pre>\n\n<p>when i call the function from the constructor its working fine.</p>\n\n<p>the problem is when i am calling it from a new thread opened within the<br>\n\"fleck websocket server\" <a href=\"https://github.com/statianzo/Fleck\" rel=\"nofollow\">Fleck</a>, \"onMessage\" Action,<br>\nthen it throws the \"system.access.violation\" exception.</p>\n\n<p>i managed to narrow down the problem to the double array that i am passing,\nit seems like the pointer to it is corrupted.</p>\n\n<p>i cant find the source of the problem one thing is sure the function from the dll is working as i tested it.  </p>\n\n<p>function call(two stages):</p>\n\n<ol>\n<li>open new thread within \"fleck\":</li>\n</ol>\n\n<p><code>socket.OnMessage = message =&gt;\n            {Thread locationThread = new Thread( unused =&gt; processLocation(fileName,socket,sensorsList,sensors) );\n                                locationThread.Start();}</code></p>\n\n<ol start=\"2\">\n<li>the actual function:</li>\n</ol>\n\n<p><code>private void processLocation(string fileName, IWebSocketConnection sock, List&lt;Sensor&gt; sensorsList, double[] sensors)\n        { \n           int map_position = Eye_GetPositionS(fileName,sensors);<br>\n                string locationString = \"floor:1,mx:\" + (map_position / 10000) +    \",my:\" + (map_position % 10000);\n                // send location string to user\n                sock.Send(LOCATION_CODE + \"-\" + locationString);}</code></p>\n\n<p>the interface is:</p>\n\n<p><code>extern \"C\" __declspec(dllexport) int Eye_GetPositionS(const wchar_t *fname_mob, double sensors[9], int &amp;map_x, int &amp;map_y)</code> </p>\n\n<p>i am not passing the two last arguments (int&amp;) as agreed with the man who wrote the dll. </p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1423079995, "post_id": 28330260, "comment_id": 45007800, "body": "Or you could just count the number of 1&#39;s and compute the number of possible (start-index, end-index) pairs in the usual way."}, {"owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423080014, "post_id": 28330260, "comment_id": 45007807, "body": "Are you looking for unique substrings? Otherwise the problem is pretty trivial: you would need to count the number of 1s. Let say that number is <code>n</code>. Now, in how many ways can you pick a start and end?"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1423080358, "post_id": 28330260, "comment_id": 45008017, "body": "Just compute <code>nCr</code> where <code>n</code> is the number of <code>1s</code> and <code>r=2</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "edited": false, "score": 0, "creation_date": 1423080143, "post_id": 28330363, "comment_id": 45007885, "body": "I need the substrings themselves"}, {"owner": {"reputation": 330, "user_id": 2892280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f114732d296420e6a0c139492cddff5?s=128&d=identicon&r=PG&f=1", "display_name": "bajuwa", "link": "https://stackoverflow.com/users/2892280/bajuwa"}, "reply_to_user": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "edited": false, "score": 2, "creation_date": 1423080197, "post_id": 28330363, "comment_id": 45007920, "body": "Then please state that in the question.  As of when everyone was answering this question you stated you needed the number of substrings, not the strings themselves."}], "tags": [], "owner": {"reputation": 330, "user_id": 2892280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f114732d296420e6a0c139492cddff5?s=128&d=identicon&r=PG&f=1", "display_name": "bajuwa", "link": "https://stackoverflow.com/users/2892280/bajuwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080085, "creation_date": 1423080085, "answer_id": 28330363, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/28330363#28330363", "title": "How to find all substrings that start and end with 1?", "body": "<p>If you just need the number of substrings, and not the substrings themselves, you could probably pull it off by counting the number of pairs after doing an initial O(n) sum of the number of 1's you encounter</p>\n"}, {"comments": [{"owner": {"reputation": 2547, "user_id": 1503898, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CX5eA.jpg?s=128&g=1", "display_name": "Amxx", "link": "https://stackoverflow.com/users/1503898/amxx"}, "edited": false, "score": 1, "creation_date": 1423081222, "post_id": 28330381, "comment_id": 45008521, "body": "+ for the complexity discution."}, {"owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423117656, "post_id": 28330381, "comment_id": 45020722, "body": "Your solution is <code>O(N * k^2)</code>; you should also take the length of the substrings into account."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423143771, "post_id": 28330381, "comment_id": 45035125, "body": "@VincentvanderWeele The total length of all the substrings is only <code>O(N * k)</code>, so each one would be <code>O(N &#47; k)</code> - which gets us to <code>O(Nk)</code>, not <code>O(N*k^2)</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423146516, "post_id": 28330381, "comment_id": 45037165, "body": "@VincentvanderWeele Still it&#39;s a good point, <code>O(Nk)</code> is strictly greater than <code>O(k^2)</code> and makes the restrictions for making an <code>O(N)</code> solution even more onerous... updating my answer."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1423146638, "last_edit_date": 1423146638, "creation_date": 1423080133, "answer_id": 28330381, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/28330381#28330381", "title": "How to find all substrings that start and end with 1?", "body": "<blockquote>\n  <p>Obviously there is an <code>O(N^2)</code> solution, but I'm looking for a solution with complexity on the order of <code>O(N)</code>. Is it possible?</p>\n</blockquote>\n\n<p>Let <code>k</code> be the number of <code>1</code>s in our input string. Then there are <code>O(k^2)</code> such substrings. Enumerating them must take at least <code>O(k^2)</code> time. If <code>k ~ N</code>, then enumerating them must take <code>O(N^2)</code> time. </p>\n\n<p>The only way to get an <code>O(N)</code> solution is if we add the requirement that <code>k</code> is <code>o(sqrt(N))</code>. There cannot be an <code>O(N)</code> solution in the general case with no restriction on <code>k</code>.</p>\n\n<p>An actual <code>O(k^2)</code> solution is straightforward:</p>\n\n<pre><code>std::string input = ...;\n\nstd::vector&lt;size_t&gt; ones;\nones.reserve(input.size());\n\n// O(N) find the 1s\nfor (size_t idx = 0; idx &lt; input.size(); ++idx) {\n    if (input[idx] == '1') {\n        ones.push_back(idx);\n    }\n}\n\n// O(k^2) walk the indices\nfor (size_t i = 0; i &lt; ones.size(); ++i) {\n    for (size_t j = i+1; j &lt; ones.size(); ++j) {\n        std::cout &lt;&lt; input.substr(i, j - i + 1) &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p><strong>Update</strong> We have to account for the <em>lengths</em> of the substrings as well as the <em>number</em> of them. The total length of all the strings is <code>O(k * N)</code>, which is strictly greater than the previously claimed bound of <code>O(k^2)</code>. Thus, the <code>o(sqrt(N))</code> bound on <code>k</code> is insufficient - we actually need <code>k</code> to be <code>O(1)</code> in order to yield an <code>O(N)</code> solution. </p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1423080571, "post_id": 28330385, "comment_id": 45008153, "body": "The OP has changed the requirements of the question.  Your answer really doesn&#39;t apply anymore."}], "tags": [], "owner": {"reputation": 3159, "user_id": 4450134, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0207987892f359cb7d9b56e8aa4fc75c?s=128&d=identicon&r=PG&f=1", "display_name": "HavelTheGreat", "link": "https://stackoverflow.com/users/4450134/havelthegreat"}, "is_accepted": false, "score": 2, "last_activity_date": 1423080762, "last_edit_date": 1423080762, "creation_date": 1423080145, "answer_id": 28330385, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/28330385#28330385", "title": "How to find all substrings that start and end with 1?", "body": "<p>You can find the same in <code>O(n)</code> with the following steps : <br><ol>\n1. Count the number of 1's. <br>\n2. Let # of 1's be <code>x</code>, we return <code>x(x-1)/2</code>. <br>\n</ol>\nThis quite trivially counts the number of possible pairs of 1's. <br>\nThe code itself is probably worth trying yourself!\n<br>\n<strong><em>EDIT:</em></strong>\n<br>\nIf you want to return the substrings themselves, you must restrict the number of 1's in your substring in order to get some sort of <code>O(N)</code> solution <em>(or really <code>O(x)</code> where <code>x</code> is your # of 1's)</em> , as enumerating them in itself cannot be reduced in a general case from <code>O(N^2)</code> time complexity. </p>\n"}, {"comments": [{"owner": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423080473, "post_id": 28330429, "comment_id": 45008086, "body": "The number of substrings is <code>O(k^2)</code> when there are <code>k</code> 1s in the string. This is not the same as <code>O(n^2)</code>."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 12311, "user_id": 2095090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3vmqn.jpg?s=128&g=1", "display_name": "Vincent van der Weele", "link": "https://stackoverflow.com/users/2095090/vincent-van-der-weele"}, "edited": false, "score": 0, "creation_date": 1423121419, "post_id": 28330429, "comment_id": 45022180, "body": "I kind of disagree with you, here; I think for OP <code>N</code> is the number of ones in the string; I agree that introducing <code>x</code> for <code>N</code> is totally confusing, though. Adding my definition, fixing naming."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1423121499, "last_edit_date": 1423121499, "creation_date": 1423080264, "answer_id": 28330429, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/28330429#28330429", "title": "How to find all substrings that start and end with 1?", "body": "<p>Assuming <code>N</code> is supposed to be the number of <code>1</code>s in your string (or at least proportional to it, which is reasonable assuming a constant probability of <code>1</code> for each character):</p>\n\n<p>If you need the substrings themselves, there's going to be <code>N(N-1)/2</code>, which is quadratic, so it's completely impossible to be less complex than quadratic. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7461384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e1e4eb7f28fe45010b90ab6b30f904b?s=128&d=identicon&r=PG&f=1", "display_name": "kavitha", "link": "https://stackoverflow.com/users/7461384/kavitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1485242928, "last_edit_date": 1485242928, "creation_date": 1485240464, "answer_id": 41821707, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/41821707#41821707", "title": "How to find all substrings that start and end with 1?", "body": "<pre><code>import java.util.*;\n\npublic class DistictSubstrings {\n\npublic static void main(String args[]) {\n// a hash set\n\nScanner in = new Scanner(System.in);\nSystem.out.print(\"Enter The string\");\nString s = in.nextLine();\nint L = s.length();\nSet&lt;String&gt; hs = new HashSet&lt;String&gt;();\n// add elements to the hash set\nfor (int i = 0; i &lt; L; ++i) {\n\n\n  for (int j = 0; j &lt; L-i ; ++j) {\n    if(s.charAt(j)=='1'&amp;&amp;s.charAt(j+i)=='1')\n    {\n    hs.add(s.substring(j, j+i + 1));\n    }\n\n }\n}\nIterator it=hs.iterator();\n    System.out.println(\"the string starts and endswith 1\");\n    System.out.println(hs.size());\nwhile(it.hasNext())\n{\nSystem.out.println(it.next()+\" \");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4457, "user_id": 6614295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2237f8dfeaec1273a07c97b3e1ebbde9?s=128&d=identicon&r=PG&f=1", "display_name": "jotasi", "link": "https://stackoverflow.com/users/6614295/jotasi"}, "edited": false, "score": 1, "creation_date": 1488361200, "post_id": 42527966, "comment_id": 72192086, "body": "This actually seems to be the <code>O(N^2)</code> solution. Ahmed specifically asked if there is a better performing (<code>O(N)</code>) solution."}], "tags": [], "owner": {"reputation": 1, "user_id": 7640354, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6486fddf5459261f030ee18eb224f76e?s=128&d=identicon&r=PG", "display_name": "Alok", "link": "https://stackoverflow.com/users/7640354/alok"}, "is_accepted": false, "score": 0, "last_activity_date": 1488363153, "last_edit_date": 1488363153, "creation_date": 1488360558, "answer_id": 42527966, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/42527966#42527966", "title": "How to find all substrings that start and end with 1?", "body": "<pre><code>String s=\"1001010001\";\nfor(int i=0;i&lt;=s.length()-1;i++)\n{\n    for(int j=0;j&lt;=s.length()-1;j++)\n    {\n        if(s.charAt(j)=='1' &amp;&amp; s.charAt(i)=='1' &amp;&amp; i&lt;j)\n        {\n            System.out.println(s.substring(i,j+1));\n        }               \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 122, "user_id": 3185802, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001975980708/picture?type=large", "display_name": "Veeramani Natarajan", "link": "https://stackoverflow.com/users/3185802/veeramani-natarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1506430334, "creation_date": 1506430334, "answer_id": 46427136, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/46427136#46427136", "title": "How to find all substrings that start and end with 1?", "body": "<p>The following python code will help you to find all substrings that starts and ends with 1. </p>\n\n<pre><code># -*- coding: utf-8 -*-\n\"\"\"\nCreated on Tue Sep 26 14:25:14 2017\n\n@author: Veeramani Natarajan\n\"\"\"\n# Python Implementation to find all substrings that start and end with 1\n\n# Function to calculate the count of sub-strings \ndef calcCount(mystring):\n    cnt=-1\n    index=0    \n    while(index&lt;len(mystring)):\n        if(mystring[index]=='1'):\n            cnt += 1\n        index += 1\n    return cnt\n\n\nmystring=\"0010110010\";\nindex=0;\noverall_cnt=0\n\nwhile(index&lt;len(mystring)):\n    if(mystring[index]=='1'):\n        partcount=calcCount(mystring[index:len(mystring)])\n        overall_cnt=overall_cnt+partcount\n#        print(\"index is\",index)\n#        print(\"passed string\",mystring[index:len(mystring)])\n#        print(\"Count\",partcount,\"overall\",overall_cnt)\n    index=index+1\n# print the overall sub strings count\nprint (overall_cnt)   \n</code></pre>\n\n<p><strong><em>Note:\nThough this is not O(N) solution,  i believe it will help someone to understand the python implementation of the above problem statement.</em></strong></p>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 3512369, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3b70522213339802d94d05dbe4db73b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag S Sharma", "link": "https://stackoverflow.com/users/3512369/anurag-s-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1568971889, "creation_date": 1568971889, "answer_id": 58025638, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1/58025638#58025638", "title": "How to find all substrings that start and end with 1?", "body": "<p>O(n) solution is definitely possible using DP.\nWe take an array of pairs where the first element in each pair denotes the number of substrings upto that index and the second element denotes the number of substrings starting with 1 <strong>up to but not including that index</strong>. (So, if the char at that index is 1, the second element won't count the substring [1, 1])\nWe simply iterate through the array and build the solution incrementally as we do in DP and after the end of the loop, we have the final value in the pair's first element in the last index of our array. Here's the code:</p>\n\n<pre><code>int getoneonestrings(const string &amp;str)\n{\n    int n = str.length();\n    if (n == 1)\n    {\n        return 0;\n    }\n    vector&lt; pair&lt;int, int&gt; &gt; dp(n, make_pair(0, 0));\n    for (int i = 1; i &lt; n; i++)\n    {\n        if (str[i] == '0')\n        {\n            dp[i].first = dp[i - 1].first;\n        }\n        else\n        {\n            dp[i].first = dp[i - 1].first + dp[i - 1].second +\n                (str[i - 1] == '1' ? 1 : 0);\n        }\n        dp[i].second = dp[i - 1].second + (str[i - 1] == '1' ? 1 : 0);\n    }\n    return dp[n - 1].first;\n}\n</code></pre>\n"}], "owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2060, "favorite_count": 0, "accepted_answer_id": 28330381, "answer_count": 8, "score": 2, "last_activity_date": 1568971889, "creation_date": 1423079739, "last_edit_date": 1423080617, "question_id": 28330260, "link": "https://stackoverflow.com/questions/28330260/how-to-find-all-substrings-that-start-and-end-with-1", "title": "How to find all substrings that start and end with 1?", "body": "<p>You are given a string of 0\u2019s and 1\u2019s you have to find all substrings in the string which starts and end with a 1.</p>\n\n<p>For example, given 0010110010, output should be the six strings:</p>\n\n<pre><code>101\n1011\n1011001\n11\n11001\n1001\n</code></pre>\n\n<p>Obviously there is an <code>O(N^2)</code> solution, but I'm looking for a solution with complexity on the order of <code>O(N)</code>. Is it possible?</p>\n"}, {"tags": ["c++", "class", "constructor", "sparse-matrix", "stdvector"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1423079191, "post_id": 28329952, "comment_id": 45007370, "body": "That&#39;s a lot of code. Have you tried simplifying it until the problem disappears, to narrow down the possible cause (and have less code for other people to wade through)? Still, thanks for an overall well-structured question, even with comments in code!"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 3, "creation_date": 1423079377, "post_id": 28329952, "comment_id": 45007486, "body": "How are you measuring the time of the first block with and without the second part?"}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 1, "creation_date": 1423079610, "post_id": 28329952, "comment_id": 45007608, "body": "It is very hard to tell how you measured it. I&#39;m not convinced there wasn&#39;t a mistake in measuring. That said, did you try allocating it with <code>new</code> instead? My guess is that the variable layout in the stack frame is such that when you add that large-ish object, the other locals wind up not all fitting in a cache line. If this is the case, the dynamic code should about as fast as the commented-out version."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 2, "creation_date": 1423080490, "post_id": 28329952, "comment_id": 45008092, "body": "Any chance the declaration uses some outputs from the first section, preventing the compiler from optimizing out some of the computations?"}, {"owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "edited": false, "score": 0, "creation_date": 1423083061, "post_id": 28329952, "comment_id": 45009507, "body": "For measuring the execution time I executed the code until the declaration of <code>similarity_matrix_reduced</code> (excluded) with all the following code commented out and I compared it with the execution adding the declaration. Clearly, the compiler might be applying different optimizations in the two cases but I think that this cannot explain such a slow-down (more than x100) of the previous part. Furthermore, the initialization of <code>similarity_matrix_reduced</code> is independent on previous data. Finally, shouldn&#39;t std::vector be initialized in the heap (even without new)?"}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1423083714, "post_id": 28329952, "comment_id": 45009846, "body": "@PierpaoloNecchi: Sure, the data would be dynamic, but the minimum of 8 bytes for the pointer to the data and the size would not be, and you have 4 of them in that object. I don&#39;t know how big cache lines are these days, but 64 bytes was common at one time, and that is at least 36 bytes in that object. More on a 64-bit platform."}, {"owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1423131462, "post_id": 28329952, "comment_id": 45027468, "body": "@Dark Falcon: I think you might be right. I have another version of the program where I implemented sparse matrices using a &quot;vector-of-vectors&quot; structure and I do not run into this problem. Probably because I only need one pointer for each sparse matrix that I initialize. I am going to see how to implement the class using <code>new</code>."}, {"owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "edited": false, "score": 0, "creation_date": 1423139480, "post_id": 28329952, "comment_id": 45032361, "body": "I opened another question related to this problem here <a href=\"http://stackoverflow.com/questions/28344014/efficient-sparse-matrix-implementation-in-c-for-mpi-parallel-program\" title=\"efficient sparse matrix implementation in c for mpi parallel program\">stackoverflow.com/questions/28344014/&hellip;</a>. I would be grateful if you check it out and share your insights"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1423224583, "post_id": 28329952, "comment_id": 45072120, "body": "Ummm... what compiler and optimization flags do you use?  I saw code examples for which optimizer assigned registers differently between 32 and 64 bit architecture, and on 32bit setting <code>-O2</code> actually broke compilation (<code>-O1</code> worked ok). Maybe in your case optimization on 32bit actually messes up the 1st part of code. My bet is the optimizer."}, {"owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1423232203, "post_id": 28329952, "comment_id": 45076346, "body": "@luk32: I thought about that possibility and tested with and without optimization flags. The problem persists. I think that I have a hidden problem on the first part of the algorithm that always affects the 32-bit version and &quot;sometimes&quot; affects the 64-bit version. As I wrote in the last update, I tried to implement the sparse_matrix class using a smart_pointer to avoid the 4 vectors headers in the cache as it was suggested. This modificiation had no effect on the execution time"}], "owner": {"reputation": 165, "user_id": 4454384, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/756937784/picture?type=large", "display_name": "Pierpaolo Necchi", "link": "https://stackoverflow.com/users/4454384/pierpaolo-necchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1423220941, "creation_date": 1423078748, "last_edit_date": 1423220941, "question_id": 28329952, "link": "https://stackoverflow.com/questions/28329952/declaring-an-object-variable-makes-all-the-previous-instructions-slower", "title": "Declaring an object variable makes all the previous instructions slower", "body": "<p>I ran into a fastidious problem and I have no idea of what is causing it. I hope you can help me find a solution. </p>\n\n<p><strong>Framework</strong>: I implemented a sparse_matrix class using the CSR representation and I used this object as the basis for a recommendation system. The class is defined as follows:</p>\n\n<pre><code>class sparse_matrix_csr\n{\n    public:\n        sparse_matrix_csr();\n        sparse_matrix_csr(const std::vector&lt;int&gt; &amp;row_indices);\n        sparse_matrix_csr(const std::vector&lt;int&gt; &amp;row_indices, const size_t nb_columns);\n\n        // other member functions omitted\n\n    private:\n        std::vector&lt;int&gt; _row_indices;\n        std::vector&lt;int&gt; _row_start_indices;\n        std::vector&lt;int&gt; _column_indices;\n        std::vector&lt;double&gt; _values;\n        bool _column_sorted_by_index;\n};\n</code></pre>\n\n<p>The <code>_row_indices</code> vector contains the indices of the rows of the matrix. <code>_row_start_indices</code> contains the index of the first element of a given row in the <code>_column_indices</code>, which contains the column indices, and <code>_values</code> vector, which contains the elements of the matrix. In particular, the constructor <code>sparse_matrix_csr(const std::vector&lt;int&gt; &amp;row_indices, const size_t nb_columns)</code> is implemented as follows: </p>\n\n<pre><code>sparse_matrix_csr::sparse_matrix_csr(const std::vector&lt;int&gt; &amp;row_indices,\n                                     const size_t nb_columns):\n    _row_indices(row_indices),\n    _row_start_indices(row_indices.size()),\n    _column_indices(row_indices.size() * nb_columns, 0),\n    _values(row_indices.size() * nb_columns, 0.0),\n    _column_sorted_by_index(true)\n{\n    for (size_t i = 0; i &lt; _row_start_indices.size(); ++i)\n        _row_start_indices[i] = i * nb_columns;\n}\n</code></pre>\n\n<p>This constructor takes in the indices of the rows of the sparse matrix and the number of elements that will be contained in each row. In fact, in the application I am considering, I have same matrices that are sparse only wrt the rows. </p>\n\n<p><strong>Problem</strong>: The algorithm is structured as follows</p>\n\n<pre><code>\\\\ Instruction block 1\n{\n    \\\\ Do something \n}\n\nsparse_matrix_csr mat(list_indices, nb_columns); \n\n\\\\ Instruction block 2\n{\n    \\\\ Do something\n}\n</code></pre>\n\n<p>If I run the first block of instructions alone (commenting out all that follows), my algorithm runs smoothly. However, if I uncomment the second part of the algorithm, the first part of the algorithm slows down a lot. I have been able to identify the critical line for this slow-down in the declaration of <code>mat</code>. However, I cannot explain this retro-action on the first part of the algorithm. The full algorithm is reported at the end of my question.</p>\n\n<p><strong>My considerations</strong>: I have never observed such a retro-action and therefore I am a little confused. One possibility that I have considered is that I have a problem in memory management which causes the slow-down of the previous part of the algorithm. I am currently working on some matrices that have around 2e6 elements, i.e. around 4e6 values stored in 2 vectors. I read on another post on stack overflow that the data contained in a std::vector are allocated in the heap. Is that always true? even if I initialize a vector with a given size as I do in the sparse matrix constructors above? </p>\n\n<p>If you need some clarification, do not hesitate! </p>\n\n<p>Thanks in advance, \nPierpaolo </p>\n\n<hr>\n\n<p>Full algorithm:</p>\n\n<pre><code>void collaborative_filtering_mpi (std::string ratings_file, std::string targets_file,\n                                  std::string output_file, int k_neighbors, double shrinkage_factor,\n                                  bool output_debug_data)\n{\n    std::cout &lt;&lt; \"COLLABORATIVE FILTERING ALGORITHM - k = \" &lt;&lt; k_neighbors\n              &lt;&lt; \" , d = \" &lt;&lt; shrinkage_factor &lt;&lt; std::endl;\n    stopwatch sw_total;\n    sw_total.start();\n\n//-------------------------------------\n// STEP 1: Read data from input files\n//-------------------------------------\n\nstd::cout &lt;&lt; \"1) Read input files: \";\nstopwatch sw;\nsw.start();\n\n//-------------------------------\n// 1.1) Read user rating matrix\n//-------------------------------\n\n// Initialization\nsparse_matrix_csr user_item_rating_matrix(ratings_file, true, true, true); // file is sorted, skip header\n\n//-------------------------------------------------\n// 1.2) Read targets (user, item) to be predicted\n//-------------------------------------------------\n\n// Initialization\nsparse_matrix_csr targets(targets_file, true, false, false); // do not read ratings column\n\nsw.stop();\ndouble time_input = sw.get_duration();\nstd::cout &lt;&lt;  time_input &lt;&lt; std::endl;\n\n//-----------------------------------------\n// STEP 2: Pre-computations\n//-----------------------------------------\n\nstd::cout &lt;&lt; \"2) Pre-computations: \";\nsw.start();\n\n//-----------------------------------------------------------------------\n// 2.1) Sort user_item_rating_matrixand compute relevant sizes of the problem\n//-----------------------------------------------------------------------\n\n// Sort: if file is sorted, sort should do nothing.\nuser_item_rating_matrix.sort_columns_by_index();\n\n// Compute list of users and list of items\nstd::vector&lt;int&gt; list_users;\nuser_item_rating_matrix.rows(list_users);\nstd::vector&lt;int&gt; list_items;\nuser_item_rating_matrix.columns(list_items);\n\n// [DEBUG]: print user_rating_matrix\nif (output_debug_data)\n{\n    std::ofstream ofs_debug(\"data_debug/debug_user_rating_matrix.txt\");\n    ofs_debug &lt;&lt; user_item_rating_matrix;\n    ofs_debug.close();\n}\n\n//-------------------------------------------------------------\n// 2.2) Compute inverse user rating matrix (indexed by column)\n//-------------------------------------------------------------\n\n// Initialize item_user_rating_matrix:  it is a sparse matrix with\n// items on the rows, users on the columns and rating as values.\n// This variable will be helpful when computing similarities.\nsparse_matrix_csr item_user_rating_matrix;\n\n// Compute item_user_rating&lt;_matrix by transposing the user_rating_matrix\ntranspose (user_item_rating_matrix, item_user_rating_matrix);\n\n// [DEBUG]: print item_user_matrix_on_file\nif (output_debug_data)\n{\n    std::ofstream ofs_debug(\"data_debug/debug_item_user_matrix.txt\");\n    ofs_debug &lt;&lt; item_user_rating_matrix;\n    ofs_debug.close();\n}\n\n//-----------------------------------------------\n// 2.3) sort targets and compute relevant sizes\n//-----------------------------------------------\n\n// Compute list of target items\nstd::vector&lt;int&gt; list_target_items;\ntargets.columns(list_target_items);\n\n// [DEBUG]: print targets\nif (output_debug_data)\n{\n    std::ofstream ofs_debug(\"data_debug/debug_targets.txt\");\n    ofs_debug &lt;&lt; targets;\n    ofs_debug.close();\n}\n\n//--------------------------------------------------------------\n// 2.4) Compute difference between list_items and list_targets\n//--------------------------------------------------------------\n\nstd::vector&lt;int&gt; list_non_target_items;\ncompute_difference_vector (list_items, list_target_items, list_non_target_items);\n\n// [DEBUG]\nif (output_debug_data)\n{\n    std::ofstream ofs_debug(\"data_debug/debug_difference_vector.txt\");\n\n    ofs_debug &lt;&lt; \"list_items - size: \" &lt;&lt; list_items.size() &lt;&lt; std::endl;\n    for (std::vector&lt;int&gt;::const_iterator iter = list_items.begin(); iter != list_items.end(); ++iter)\n        ofs_debug &lt;&lt; (*iter) &lt;&lt; \",\";\n    ofs_debug &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    ofs_debug &lt;&lt; \"list_target_items - size: \" &lt;&lt; list_target_items.size() &lt;&lt; std::endl;\n    for (std::vector&lt;int&gt;::const_iterator iter = list_target_items.begin(); iter != list_target_items.end(); ++iter)\n        ofs_debug &lt;&lt; (*iter) &lt;&lt; \",\";\n    ofs_debug &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    ofs_debug &lt;&lt; \"list_non_target_items - size: \" &lt;&lt; list_non_target_items.size() &lt;&lt; std::endl;\n    for (std::vector&lt;int&gt;::const_iterator iter = list_non_target_items.begin(); iter != list_non_target_items.end(); ++iter)\n        ofs_debug &lt;&lt; (*iter) &lt;&lt; \",\";\n    ofs_debug &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    ofs_debug.close();\n}\n\n//--------------------------------------------\n// 2.5) Compute average rating for each user\n//--------------------------------------------\n\ndictionary&lt;int, double&gt; average_rating_vector;\ncompute_average_rating(user_item_rating_matrix, average_rating_vector);\n\nif (output_debug_data)\n{\n    std::ofstream ofs_debug(\"data_debug/debug_average_rating_vector.txt\");\n    for (dictionary&lt;int, double&gt;::const_iterator iter = average_rating_vector.begin();\n         iter != average_rating_vector.end(); ++iter)\n        ofs_debug &lt;&lt; (*iter).get_key() &lt;&lt; \": \" &lt;&lt; (*iter).get_value() &lt;&lt; std::endl;\n    ofs_debug.close();\n}\n\nsw.stop();\nstd::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n//-------------------------------------\n// STEP 3: Similarity matrix\n//-------------------------------------\n\nstd::cout &lt;&lt; \"3) Compute similarity matrix: \";\nsw.start();\n\n// Initialize similarity_matrix with target items on the rows.\nsparse_matrix_csr similarity_matrix(list_target_items,\n                                    list_target_items.size() + list_non_target_items.size());\n\n// compute similarity matrix\ncompute_similarity_matrix_mpi(similarity_matrix,\n                              item_user_rating_matrix,\n                              average_rating_vector,\n                              list_target_items,\n                              list_non_target_items,\n                              shrinkage_factor);\n\n// [DEBUG]: print similarity matrix sorted by similarity\nif (output_debug_data)\n{\n    std::ofstream ofs(\"data_debug/debug_similarity_matrix.txt\");\n    ofs &lt;&lt; similarity_matrix;\n    ofs.close();\n}\n\nsw.stop();\nstd::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n//---------------------------------------------------------------\n// STEP 4: Find top-K similar elements with positive similarity\n//---------------------------------------------------------------\n\nstd::cout &lt;&lt; \"4) Find top-K similar elements:\" &lt;&lt; std::endl;\nsw.start();\n\nif (k_neighbors &gt; 0)\n{\n    //---------------------------------------------------\n    // 4.1) Sort similarity matrix by rating (row-wise)\n    //---------------------------------------------------\n\n    std::cout &lt;&lt; \"   .... Sort similarity matrix by rating: \";\n    sw.start();\n\n    // Sort all the rows of the similarity_matrix by similarity.\n    // If two items have the same rating, sort them in descending order of item.\n    //similarity_matrix.sort_columns_by_value();\n    similarity_matrix.sort_columns_by_value();\n\n    // [DEBUG]: print similarity matrix sorted by similarity\n    if (output_debug_data)\n    {\n        std::ofstream ofs (\"data_debug/debug_similarity_matrix_sorted_by_rating.txt\");\n        ofs &lt;&lt; similarity_matrix;\n        ofs.close();\n    }\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n    //--------------------------------------------------------\n    // 4.2) Cut the useless columns of the similarity matrix\n    //--------------------------------------------------------\n\n    std::cout &lt;&lt; \"   .... Reduce similarity matrix: \";\n    sw.start();\n\n    sparse_matrix_csr similarity_matrix_reduced(list_target_items,\n                                                k_neighbors);\n\n    reduce_similarity_matrix_mpi (similarity_matrix,\n                                  similarity_matrix_reduced,\n                                  k_neighbors);\n\n    // [DEBUG]: print similarity matrix sorted by similarity\n    if (output_debug_data)\n    {\n        std::ofstream ofs (\"data_debug/debug_similarity_matrix_reduced.txt\");\n        ofs &lt;&lt; similarity_matrix_reduced;\n        ofs.close();\n    }\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n    //---------------------------------------------------\n    // 4.3) Sort the reduced similarity matrix by items\n    //---------------------------------------------------\n\n    std::cout &lt;&lt; \"   .... Sort similarity matrix by index: \";\n    sw.start();\n\n    // Sort all the rows of the similarity_matrix by index.\n    similarity_matrix_reduced.sort_columns_by_index();\n\n    // [DEBUG]: print similarity matrix sorted by similarity\n    if (output_debug_data)\n    {\n        std::ofstream ofs (\"data_debug/debug_similarity_matrix_sorted.txt\");\n        ofs &lt;&lt; similarity_matrix_reduced;\n        ofs.close();\n    }\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n    //-----------------------------------------\n    // STEP 5: Compute predictions for targets\n    //-----------------------------------------\n\n    std::cout &lt;&lt; \"5) Compute predictions: \";\n    sw.start();\n\n    compute_predicted_ratings_mpi (targets,\n                                   user_item_rating_matrix,\n                                   similarity_matrix_reduced);\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n}\nelse\n{\n    //---------------------------------------------------\n    // 4.3) Sort the reduced similarity matrix by items\n    //---------------------------------------------------\n\n    std::cout &lt;&lt; \"   .... Sort similarity matrix by index: \";\n    sw.start();\n\n    // Sort all the rows of the similarity_matrix by index.\n    // similarity_matrix.sort_columns_by_index();\n    similarity_matrix.sort_columns_by_index();\n\n    // [DEBUG]: print similarity matrix sorted by similarity\n    if (output_debug_data)\n    {\n        std::ofstream ofs (\"data_debug/debug_similarity_matrix_sorted.txt\");\n        ofs &lt;&lt; similarity_matrix;\n        ofs.close();\n    }\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n\n    //-----------------------------------------\n    // STEP 5: Compute predictions for targets\n    //-----------------------------------------\n\n    std::cout &lt;&lt; \"5) Compute predictions: \";\n    sw.start();\n\n    compute_predicted_ratings_mpi (targets,\n                                   user_item_rating_matrix,\n                                   similarity_matrix);\n\n    sw.stop();\n    std::cout &lt;&lt; sw.get_duration() &lt;&lt; std::endl;\n}\n\n//-----------------------------------------------------\n// STEP 6: Print the prediction matrix in output file\n//-----------------------------------------------------\n\nstd::cout &lt;&lt; \"6) Print predictions on file: \";\nsw.start();\n\nstd::ofstream ofs_output(output_file);\ntargets.print(ofs_output);\n\nsw.stop();\ndouble time_output = sw.get_duration();\nstd::cout &lt;&lt; time_output &lt;&lt; std::endl;\n\nsw_total.stop();\ndouble time_total = sw_total.get_duration();\nstd::cout &lt;&lt; \"&gt;&gt; Total computation time: \" &lt;&lt; time_total &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"&gt;&gt; Total computation time - no input/output: \" &lt;&lt; (time_total - time_input - time_output) &lt;&lt; std::flush;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE - 05 February 2015:</strong> I don't know what happened, but the code is now running fine on my 64-bit machine. However, it is still very slow on a 32-bit VM that I need to use to run my code. I measured the size of a sparse_matrix object using <code>sizeof</code> and it occupies 52 bit. I think this might be causing a cache problem (credit goes to @Dark Falcon). Do you have any ideas on how I could solve this problem and make my algorithm run efficiently on the 32-bit VM?    </p>\n\n<hr>\n\n<p><strong>UPDATE - 06 February 2015:</strong> Well, the problem comes and go. I tried to change the implementation of the sparse_matrix_csr class wrapping the data in a <code>shared_ptr</code> in the following way:</p>\n\n<pre><code>class sparse_matrix_csr\n{   \n    public: \n        \\\\ public methods omitted\n    private:\n        class sparse_matrix_csr_data\n            {\n                public:\n                    sparse_matrix_csr_data() {}\n                    sparse_matrix_csr_data(const std::vector&lt;int&gt; &amp;row_indices): _row_indices(row_indices) {}\n                    sparse_matrix_csr_data(const std::vector&lt;int&gt; &amp;row_indices, const size_t nb_columns);\n                    sparse_matrix_csr_data(const std::string file, bool file_is_sorted, bool skip_header, bool read_values);\n\n                    // data\n                    std::vector&lt;int&gt; _row_indices;\n                    std::vector&lt;int&gt; _row_start_indices;\n                    std::vector&lt;int&gt; _column_indices;\n                    std::vector&lt;double&gt; _values;\n                    bool _column_sorted_by_index;\n            };\n\n        std::shared_ptr&lt;sparse_matrix_csr_data&gt; _data;\n};\n</code></pre>\n\n<p>This modification did not improve things. I am currently having problems both on the 32-bit VM and the 64-bit laptop. I have no idea about what is causing the program to be so slow. </p>\n"}, {"tags": ["c++", "typedef"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423078076, "post_id": 28329698, "comment_id": 45006811, "body": "Depends on whether the typedef is public. Also, <code>auto</code> is your friend."}, {"owner": {"reputation": 57337, "user_id": 69742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6fc5e3f98fb1113576b50672ae42c05c?s=128&d=identicon&r=PG", "display_name": "Earlz", "link": "https://stackoverflow.com/users/69742/earlz"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423078121, "post_id": 28329698, "comment_id": 45006840, "body": "@T.C. the typedef is in the public section, so yea... and yea but you can&#39;t use auto for everything"}], "answers": [{"comments": [{"owner": {"reputation": 57337, "user_id": 69742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6fc5e3f98fb1113576b50672ae42c05c?s=128&d=identicon&r=PG", "display_name": "Earlz", "link": "https://stackoverflow.com/users/69742/earlz"}, "edited": false, "score": 0, "creation_date": 1423078339, "post_id": 28329790, "comment_id": 45006961, "body": "Ah, this works! I swear I tried this and it didn&#39;t work, but I think when I tried that I used the wrong name or something."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 6, "last_activity_date": 1423078234, "last_edit_date": 1423078234, "creation_date": 1423078219, "answer_id": 28329790, "question_id": 28329698, "link": "https://stackoverflow.com/questions/28329698/possible-to-access-a-typedef-declared-within-a-class-declaration/28329790#28329790", "title": "Possible to access a typedef declared within a class declaration?", "body": "<p>You can do it if the typedef is public</p>\n\n<pre><code>class foo\n{\npublic:\n    typedef std::vector&lt;bar&gt; barContainer;\n//...\n}\n\nfoo::barContainer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1423078379, "creation_date": 1423078379, "answer_id": 28329834, "question_id": 28329698, "link": "https://stackoverflow.com/questions/28329698/possible-to-access-a-typedef-declared-within-a-class-declaration/28329834#28329834", "title": "Possible to access a typedef declared within a class declaration?", "body": "<pre><code> classname::typedefname\n</code></pre>\n\n<p>should work like a charm; GNU Radio does this all over the place:</p>\n\n<p><a href=\"https://github.com/gnuradio/gnuradio/blob/master/gnuradio-runtime/lib/basic_block.cc#L45\" rel=\"nofollow\">basic_block</a></p>\n\n<pre><code>basic_block::basic_block(const std::string &amp;name,\n    io_signature::sptr input_signature,\n    io_signature::sptr output_signature)\n</code></pre>\n\n<p><a href=\"https://github.com/gnuradio/gnuradio/blob/master/gnuradio-runtime/include/gnuradio/io_signature.h#L45\" rel=\"nofollow\">io_signature</a></p>\n\n<pre><code>typedef boost::shared_ptr&lt;io_signature&gt; sptr;\n</code></pre>\n"}], "owner": {"reputation": 57337, "user_id": 69742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6fc5e3f98fb1113576b50672ae42c05c?s=128&d=identicon&r=PG", "display_name": "Earlz", "link": "https://stackoverflow.com/users/69742/earlz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1584, "favorite_count": 1, "accepted_answer_id": 28329790, "answer_count": 2, "score": 1, "last_activity_date": 1423078379, "creation_date": 1423077951, "question_id": 28329698, "link": "https://stackoverflow.com/questions/28329698/possible-to-access-a-typedef-declared-within-a-class-declaration", "title": "Possible to access a typedef declared within a class declaration?", "body": "<p>I'm writing a program in C++ and an external header file I'm using makes very liberal use of typedefs within class declarations. </p>\n\n<p>So, when I go to lookup the return type of a function, I'll see <code>GlobalVariableList FooBar()</code>, but then to actually store the type it returns, I can't just use <code>GlobalVariableType</code> because its a typedef of <code>iplist&lt;GlobalVariabl&gt;</code> declared within the class I'm referencing in the header file. </p>\n\n<p>Is it possible access a class's typedef declared within it at all from outside of the class? </p>\n"}, {"tags": ["c++", "visual-studio", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2551689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae340e049abecfb4a117ad7a907bd1?s=128&d=identicon&r=PG", "display_name": "opatry", "link": "https://stackoverflow.com/users/2551689/opatry"}, "edited": false, "score": 0, "creation_date": 1423089661, "post_id": 28330627, "comment_id": 45012767, "body": "I already try that but it didn&#39;t work since the file isn&#39;t referenced by the Visual Project. I need the same result as the following steps: <code>right click on project &gt; add &gt; an existing file &gt; path to my dll</code>"}], "tags": [], "owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080958, "creation_date": 1423080958, "answer_id": 28330627, "question_id": 28329651, "link": "https://stackoverflow.com/questions/28329651/cmake-to-add-arbitrary-file-to-visual-studio-project/28330627#28330627", "title": "CMake to add arbitrary file to Visual Studio project", "body": "<p>Use <code>FILE(COPY ...)</code> to copy the DLL into the correct directory in your build tree, if you run directly out of the build tree.  Use <code>INSTALL()</code> to install the file along with everything else.</p>\n"}], "owner": {"reputation": 131, "user_id": 2551689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae340e049abecfb4a117ad7a907bd1?s=128&d=identicon&r=PG", "display_name": "opatry", "link": "https://stackoverflow.com/users/2551689/opatry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423080958, "creation_date": 1423077736, "question_id": 28329651, "link": "https://stackoverflow.com/questions/28329651/cmake-to-add-arbitrary-file-to-visual-studio-project", "title": "CMake to add arbitrary file to Visual Studio project", "body": "<p>I'm trying to reference extra files (in fact DLL) from my Visual Studio project generated from CMake.</p>\n\n<p>If I add my files from the Visual Studio UI, the XML project file produces something like:</p>\n\n<pre><code>&lt;None Include=\"C:\\foo.dll\" /&gt;\n</code></pre>\n\n<p>Then, this file is properly deployed when debugging my (C++) application on my Windows Phone.</p>\n\n<p>I didn't find anything allowing me to do that directly from CMake.\nMy attempts so far were to use <code>source_group</code> combined with <code>add_executable</code> which produces the expected <code>&lt;None Include=\"C:\\foo.dll\" /&gt;</code> but produces a link error (obviously).</p>\n\n<p>Nothing working using <code>source_files_properties</code> either.</p>\n\n<p>My final goal is to deploy an executable relying on those DLL but not linking directly against them (so, CMake's <code>target_link_libraries</code> doesn't help me), only loading them at runtime using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh447159(v=vs.85).aspx\" rel=\"nofollow\">LoadPackagedLibrary</a>.</p>\n\n<p>Has anybody an idea to do so?</p>\n"}, {"tags": ["c++", "linux", "dlopen"], "comments": [{"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 3, "creation_date": 1423082672, "post_id": 28329504, "comment_id": 45009282, "body": "If you type <code>ldd &#47;full&#47;path&#47;libsiftgpu.so</code>, you should find a list of all libraries imported by <code>libsiftgpu.so</code>. Any which don&#39;t have an absolute path will have to be located and added to your <code>LD_LIBRARY_PATH</code>. There&#39;s probably more to it than that, but alas I&#39;ve not done much work with libraries on Linux."}, {"owner": {"reputation": 1058, "user_id": 1359564, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d5b0507c349ff65138e027ab82729ced?s=128&d=identicon&r=PG&f=1", "display_name": "JR Smith", "link": "https://stackoverflow.com/users/1359564/jr-smith"}, "reply_to_user": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 1, "creation_date": 1423177826, "post_id": 28329504, "comment_id": 45055063, "body": "I ran ldd and libcudart.so.6.5 appears with an absolute path. However, that file is a symbolic link pointing to libcudart.so.6.5.14 (which happens to be in the same directory. If my executable needs to point to the real file and not the link, I&#39;m not sure how to adjust that."}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 1, "creation_date": 1423199782, "post_id": 28329504, "comment_id": 45060961, "body": "On OS X, see <code>install_name_tool</code>. On Linux, see <a href=\"http://nixos.org/patchelf.html\" rel=\"nofollow noreferrer\">nixos.org/patchelf.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1058, "user_id": 1359564, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d5b0507c349ff65138e027ab82729ced?s=128&d=identicon&r=PG&f=1", "display_name": "JR Smith", "link": "https://stackoverflow.com/users/1359564/jr-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1423250663, "creation_date": 1423250663, "answer_id": 28373241, "question_id": 28329504, "link": "https://stackoverflow.com/questions/28329504/linux-dlerror-returning-error-message-from-dlopen-that-i-cant-explain/28373241#28373241", "title": "Linux dlerror returning error message from dlopen that I can&#39;t explain", "body": "<p>This turned out to be a case of the executable pointing to the 32-bit library when it should have pointed to the 64-bit library. I gave points to everyone who commented.</p>\n"}], "owner": {"reputation": 1058, "user_id": 1359564, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d5b0507c349ff65138e027ab82729ced?s=128&d=identicon&r=PG&f=1", "display_name": "JR Smith", "link": "https://stackoverflow.com/users/1359564/jr-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2389, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1423250663, "creation_date": 1423077207, "question_id": 28329504, "link": "https://stackoverflow.com/questions/28329504/linux-dlerror-returning-error-message-from-dlopen-that-i-cant-explain", "title": "Linux dlerror returning error message from dlopen that I can&#39;t explain", "body": "<p>I am having trouble with the dlopen function in C++/Linux.</p>\n\n<pre><code>void * hsiftgpu = dlopen(\"/full/path/libsiftgpu.so\", RTLD_LAZY);\n</code></pre>\n\n<p>I would assume that any errors that come out of dlerror() would tell me about not being able to find/open libsiftgpu.so. Here is the code where I check for errors:</p>\n\n<pre><code>if(hsiftgpu == NULL){\n    std::cout &lt;&lt; \"Could not load libsiftgpu.so\" &lt;&lt; '\\n';\n    fprintf(stderr, \"dlopen failed: %s\\n\", dlerror());\n    return 0;\n}\n</code></pre>\n\n<p>Instead, it tells me this:</p>\n\n<pre><code>dlopen failed: libcudart.so.6.5: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>I'm not super familiar with file handling in Linux, so I could be missing something obvious. I'm wondering if I need to reset something before calling dlopen, or perhaps libsiftgpu.so is calling libcudart.so.6.5? Either way, this error message doesn't make much sense to me.</p>\n\n<p>I have tried adding the path to the LD_LIBRARY_PATH (even though it's not recommend for security, I just wanted to see if it would work) and /etc/lib.conf.so/ I also checked to make sure that both the executable and the .so library are compiled in the same ELF-64 format.</p>\n\n<p>I have run out of ideas of things to check, and I can't explain the error message. Any guidance or possible explanations are appreciated.</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 4, "creation_date": 1423077296, "post_id": 28329478, "comment_id": 45006383, "body": "I have read your question a few times, and I don&#39;t really get what you are asking. First of all: how is <code>C</code> defined?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423077370, "post_id": 28329478, "comment_id": 45006423, "body": "You mean you want the end user to write <code>C2&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt;  foo;</code> rather than <code>C2&lt;T1, T2, T3&gt; foo;</code>? What should happen if they write <code>C2&lt;Bar, Baz&gt; foo;</code>?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1423077748, "post_id": 28329478, "comment_id": 45006629, "body": "<code>template&lt;class, class&gt; class C2; &#47;* undefined *&#47; template&lt;class T1, class T2, class T3&gt; class C2&lt;A&lt;T1&gt;, B&lt;T2, T3&gt; &gt; : public C&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt; { &#47;* definition *&#47; };</code>"}, {"owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 0, "creation_date": 1423078008, "post_id": 28329478, "comment_id": 45006771, "body": "You may be able to hack this together with static assertions and type traits (<a href=\"http://www.cplusplus.com/reference/type_traits/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/type_traits</a>), although I am really not sure. I also do not see the point of doing this."}], "answers": [{"comments": [{"owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 0, "creation_date": 1423078489, "post_id": 28329750, "comment_id": 45007035, "body": "It is indeed as you say, but please explain why this works. For the first sight it didn&#39;t even seem valid for me ..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 0, "creation_date": 1423078744, "post_id": 28329750, "comment_id": 45007158, "body": "@G&#225;borAngyal, see the updated answer.Hope the additional comments makes it clearer."}, {"owner": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 0, "creation_date": 1423078849, "post_id": 28329750, "comment_id": 45007220, "body": "Oh. So its a template specializing a template. Very clever!"}, {"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "reply_to_user": {"reputation": 1912, "user_id": 3580498, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/tngH3.jpg?s=128&g=1", "display_name": "G&#225;bor Angyal", "link": "https://stackoverflow.com/users/3580498/g%c3%a1bor-angyal"}, "edited": false, "score": 0, "creation_date": 1423079763, "post_id": 28329750, "comment_id": 45007674, "body": "@G&#225;borAngyal It&#39;s called partial specialization."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1423078677, "last_edit_date": 1423078677, "creation_date": 1423078115, "answer_id": 28329750, "question_id": 28329478, "link": "https://stackoverflow.com/questions/28329478/c-inherit-class-with-templates/28329750#28329750", "title": "C++: Inherit class with templates", "body": "<p>This works for me:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A {};\n\ntemplate &lt;class T1, class T2&gt;\nclass B {};\n\ntemplate &lt; typename T1, class T2&gt;\nclass C {};\n\n// forward declare C2 but don't define it.    \ntemplate &lt; typename T1, class T2 &gt; class C2;\n\n// Create the only specialization that depends on using A and B.\ntemplate &lt; typename T1, class T2, class T3 &gt;\nclass C2&lt;A&lt;T1&gt;, B&lt;T2, T3&gt; &gt;: public C&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt;\n{};\n\nint main()\n{\n   C2&lt;A&lt;int&gt;, B&lt;double, float&gt;&gt; c1; // OK.\n                                    // This creates an instance of the\n                                    // only specialization that has\n                                    // been defined.\n\n   C2&lt;int, double&gt; c2;              // Not OK.\n                                    // The generic template class has\n                                    // been forward declared but has not\n                                    // not been defined.\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4530050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b92ed9d46e05404fc3c482ad5243782?s=128&d=identicon&r=PG&f=1", "display_name": "hipsor", "link": "https://stackoverflow.com/users/4530050/hipsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 28329750, "answer_count": 1, "score": 0, "last_activity_date": 1423078677, "creation_date": 1423077107, "last_edit_date": 1423077559, "question_id": 28329478, "link": "https://stackoverflow.com/questions/28329478/c-inherit-class-with-templates", "title": "C++: Inherit class with templates", "body": "<p>I know how to inherit classes with templates in general.  But when it comes to nested classes/templates, I have no clue and can't find anything on the Internet (perhaps because I don't know the keywords for it).</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A;\n\ntemplate &lt;class T1, class T2&gt;\nclass B;\n\ntemplate &lt; typename T1, class T2, class T3 &gt;\nclass C2:\n    public C&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt;\n{};\n</code></pre>\n\n<p>I want <code>C2</code> to be defined the same way <code>C</code> is defined, i.e. <code>C2&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt;</code> and not <code>C2&lt;T1, T2, T3&gt;</code>. But I  don't know any syntax or workaround how to achieve that.</p>\n\n<p>Edit: T.C. is right, I want the end user to write only <code>C2&lt; A&lt;T1&gt;, B&lt;T2, T3&gt; &gt; foo;</code>, <code>C2&lt;foo, bar&gt; foo;</code> should not be allowed.</p>\n"}, {"tags": ["c++", "root-framework"], "comments": [{"owner": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459859594, "post_id": 28329457, "comment_id": 60467194, "body": "If the answer below solves your problem, please consider marking it as accepted."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459887634, "post_id": 28329457, "comment_id": 60487227, "body": "It does not solve the problem therefore I will not be marking it as accepted. Thank you for your concern"}, {"owner": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459888587, "post_id": 28329457, "comment_id": 60487775, "body": "In what was does it not solve your problem?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459888813, "post_id": 28329457, "comment_id": 60487912, "body": "It does not solve the problem. That is the way in which it does not solve the problem"}, {"owner": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459889190, "post_id": 28329457, "comment_id": 60488094, "body": "I only meant that if you could be more specific about your problem, I might be able to help :). I use both of these methods regularly and they generally work fine."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 370, "user_id": 2060855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/884b35f276681b92539237b7e6f91a1e?s=128&d=identicon&r=PG", "display_name": "Nathanael Farley", "link": "https://stackoverflow.com/users/2060855/nathanael-farley"}, "edited": false, "score": 0, "creation_date": 1459889264, "post_id": 28329457, "comment_id": 60488140, "body": "Right... Well I&#39;ll have to put my solution on here at some point"}], "answers": [{"comments": [{"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423167101, "post_id": 28332810, "comment_id": 45049980, "body": "How do I use mass and charge etc? EG, how would i cout the values in that while loop?"}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423167820, "post_id": 28332810, "comment_id": 45050354, "body": "Everything is written in the answer: when you create a <code>TTreeReaderVaue</code> wrapper around the variable, you can use it as though it were a pointer: <code>cout &lt;&lt; *mass &lt;&lt; &quot; &quot; &lt;&lt; *charge &lt;&lt; ...</code>. That&#39;s for the first case, in the second one you would just use the variables."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423169147, "post_id": 28332810, "comment_id": 45051069, "body": "Ah I see so .Next() moves to get the next variable. I assume it returns true when there is valid next data? Is there any way to go back, say .Previous()?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423169466, "post_id": 28332810, "comment_id": 45051241, "body": "Unfortunately it doesn&#39;t work. I attempted to use your first method, cout&#39;ing all the variables in the while loop... but no output is produced, suggesting the file is empty. (It is not.)"}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423171093, "post_id": 28332810, "comment_id": 45052031, "body": "It seems <code>TTreeReader</code> is a root6 interface I don&#39;t have experience with yet. You should mention what root version you are using, and try the second method I showed. With that you should be able to go back and forth by simply selecting the appropriate entry. Also do the following so that I can help you further: 1. open the file in the interpreter as a <code>TFile</code> and do a <code>file.ls()</code>. 2. for everything mentioned there do <code>file.Get(&quot;name_of_thing&quot;)</code> and call <code>Print()</code> on the pointer that is returned. Append both things to the question, because otherwise its impossible to debug file problems."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423414873, "post_id": 28332810, "comment_id": 45129318, "body": "Hi, sorry for the slow reply - I am using a version of Root 6, the latest &quot;pro&quot; version. Here is the output from the opening as TFile:  TFile**\t\tPhaseSpaceSimulation.root\t  TFile*\t\tPhaseSpaceSimulation.root\t   KEY: TTree\tPhaseSpaceTree;1\tTree containing data for decays"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423415240, "post_id": 28332810, "comment_id": 45129424, "body": "Your second section of code, which I have just tried to use, does not run: should <code>tree-&gt;GetEntries</code>, in the for loop initialization be <code>tree-&gt;GetEntries()</code>. I tried both - the first gives a compiler error, the second gives a SEGFAULT."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1423429664, "post_id": 28332810, "comment_id": 45134381, "body": "Yes it should be <code>tree-&gt;GetEntries()</code>. Can you run the script under a debugger and figure out why the segfault?  Also do <code>TTree* tree = (TTree*) file.Get(&quot;PhaseSpaceTree&quot;); tree-&gt;Print()</code> to figure out the structure of the tree."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 1, "creation_date": 1423429863, "post_id": 28332810, "comment_id": 45134457, "body": "Could be that the variables (mass/charge) need to be <code>double</code> instead of <code>float</code>."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 1, "creation_date": 1423430349, "post_id": 28332810, "comment_id": 45134623, "body": "Oh yeah, seems to be working now, used the second method. Thank you for your help - I will have to wait until next weekend to work on this again as I have gotten behind with other work, so I&#39;ll update and hopefully upvote and accept in the near future. Thanks again"}, {"owner": {"reputation": 367, "user_id": 4809113, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/208955965798be1ef60282ba6ca6e360?s=128&d=identicon&r=PG&f=1", "display_name": "proton", "link": "https://stackoverflow.com/users/4809113/proton"}, "edited": false, "score": 0, "creation_date": 1499264090, "post_id": 28332810, "comment_id": 76832878, "body": "what is the advantage of using TTreeReader?"}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 1, "creation_date": 1499281463, "post_id": 28332810, "comment_id": 76844080, "body": "Type safety. Using <code>SetBranchAddress</code> ROOT cannot verify that there is enough space at the address that is passed to it, this can easily segfault when mistakes are made."}], "tags": [], "owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "is_accepted": false, "score": 5, "last_activity_date": 1423429693, "last_edit_date": 1423429693, "creation_date": 1423089092, "answer_id": 28332810, "question_id": 28329457, "link": "https://stackoverflow.com/questions/28329457/cern-root-how-to-read-contents-from-a-ttree-root-file-into-array/28332810#28332810", "title": "Cern ROOT - How to read contents from a TTree root file into array", "body": "<p>This page seems to show nicely how this can be done: <a href=\"https://root.cern.ch/root/htmldoc/TTreeReader.html\" rel=\"noreferrer\">https://root.cern.ch/root/htmldoc/TTreeReader.html</a></p>\n\n<p>The shortest usage example for your case would be:</p>\n\n<pre><code>TFile file(\"filename.root\");\nTTreeReader reader(\"treename\", &amp;file);\nTTreeReaderValue&lt;float&gt; mass(reader, \"mass\"); // template type must match datatype\nTTreeReaderValue&lt;float&gt; charge(reader, \"charge\"); // name must match branchname\n...\nwhile (reader.Next()) {\n    // use *mass, *charge, ...\n}\n</code></pre>\n\n<p>In the <em>olden</em> days, there used to be a more manual way of doing the same thing. You had to redirect the branches of the tree to your local variables. This method looks like this:</p>\n\n<pre><code>TTree* tree = (TTree*) file.Get(\"treename\");\nfloat mass, charge, ...;\ntree-&gt;SetBranchAddress(\"mass\", &amp;mass);\ntree-&gt;SetBranchAddress(\"charge\", &amp;charge);\n...\nfor (int i = 0, N = tree-&gt;GetEntries(); i &lt; N; ++i) {\n    tree-&gt;GetEntry(i);\n    // use mass, charge\n}\n</code></pre>\n\n<p>From the TBrowser you can read off the names of the branches that you need to supply as the second paramter to <code>TTreeReaderValue</code> or <code>SetBranchAddress</code>.</p>\n\n<p>Basically you should think of <code>TTree</code> as a collection of entries (classical <em>trees</em>). Each of the entries is made up of branches (<em>nodes</em>). This is how you read it.</p>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19971, "favorite_count": 5, "answer_count": 1, "score": 3, "last_activity_date": 1461007684, "creation_date": 1423077054, "last_edit_date": 1461007684, "question_id": 28329457, "link": "https://stackoverflow.com/questions/28329457/cern-root-how-to-read-contents-from-a-ttree-root-file-into-array", "title": "Cern ROOT - How to read contents from a TTree root file into array", "body": "<p>I am trying to read data in from a Cern ROOT TTree file. I have not used root before and I am struggling a bit with this. I am familiar with C++, so can sort the array side of things, but I have been through several tutorial pages online and haven't got anywhere.</p>\n\n<p>How do I read data from a TTree file? I assume it would be done by iterating over the tree's nodes (again, I'm not exactly sure how the file is organized?) inside a for loop?</p>\n\n<p>Here is an example of the sort of reference I have been trying to follow.</p>\n\n<p><a href=\"https://root.cern.ch/drupal/content/using-macro-read-ttree\" rel=\"nofollow\">https://root.cern.ch/drupal/content/using-macro-read-ttree</a></p>\n\n<p>As I understand it this is a generic question, but TTree's are not generic? (Since they could contain different variable names, I think?)</p>\n\n<p>So, further information, which I think is important is:</p>\n\n<p>By opening the root object browser <code>TBrowser b</code> - and browsing to the '.root' file, (and double clicking it) I can see that there are 12 variables in the file. For example, one is called 'mass', 'charge', etc...</p>\n\n<p>Hope that's enough info? If not I can provide more.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 2, "creation_date": 1423077323, "post_id": 28329445, "comment_id": 45006403, "body": "Please show some code."}, {"owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "reply_to_user": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1423079550, "post_id": 28329445, "comment_id": 45007583, "body": "@Matt I updated with some more information, though I don&#39;t have any finished code,  as the question is about <i>how</i> to best design this, not about a problem with one particular solution."}, {"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 1, "creation_date": 1423080245, "post_id": 28329445, "comment_id": 45007947, "body": "Why do you need inheritance? What&#39;s the point of comparing a file to a song?"}, {"owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "edited": false, "score": 0, "creation_date": 1423081722, "post_id": 28329445, "comment_id": 45008763, "body": "The question <i>is</i> whether I should use inheritance or not, and if so, how to structure it: &quot;Other options may well include an altogether different design, by the way. This base class/subclass design was just the first thing I thought of.&quot;  However, if I don&#39;t, how do I index/cache everything, objects of different types, in a single array? I could theoretically store one array per kind of object, but then I&#39;d need to perform one search per type, combine the results in some way, sort them together, and then display them; that&#39;s probably both more difficult and a bit messier IMO."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1423102576, "post_id": 28329445, "comment_id": 45016498, "body": "See also <a href=\"http://www.boost.org/libs/variant/\" rel=\"nofollow noreferrer\">Boost.Variant</a> for a solution to avoiding polymorphism altogether (I&#39;m a bit disappointed none of the existing answers mentioned this)."}], "answers": [{"comments": [{"owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "edited": false, "score": 0, "creation_date": 1423078469, "post_id": 28329597, "comment_id": 45007027, "body": "These classes don&#39;t &quot;do&quot; much, though, they are mostly used to store data, so virtual functions are probably not applicable. In some cases, all I need is the icon and name, in which case I can just use a base class pointer/reference. In other cases, I need the specific information stored, such as a file path if it&#39;s a file, the album name if it&#39;s a song, the URL if it&#39;s a bookmark, and so on. It&#39;s possible that the information is not always a string, too."}], "tags": [], "owner": {"reputation": 1733, "user_id": 1413374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d08a695cf9f4c757fd16d2dc447d9f2?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1413374/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1423077574, "creation_date": 1423077574, "answer_id": 28329597, "question_id": 28329445, "link": "https://stackoverflow.com/questions/28329445/can-i-avoid-dynamic-cast-when-subclasses-define-new-member-variables/28329597#28329597", "title": "Can I avoid dynamic_cast when subclasses define new member variables?", "body": "<p>Instead of using dynamic_cast, the preferred way is to put the parts that must be done differently for different classes into virtual functions. The term to look for, and learn about, is \"polymorphism\".</p>\n\n<p>P.S. Maybe it's not a good idea to use inheritance at all - there may be songs which also are files. Composition might work better.</p>\n"}, {"comments": [{"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423080875, "post_id": 28329633, "comment_id": 45008329, "body": "How are polymorphic types more of a problem in C++ than in, say, Java?"}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1423081905, "post_id": 28329633, "comment_id": 45008852, "body": "I disagree with this premise.  Whatever is &quot;consuming&quot; the data stored by an instance of a subclass in this hierarchy should be calling a virtual function to do whatever it needs to &quot;consume&quot; it.  If it needs to be serialized (saved to disk), then each subclass should implement its own version of a virtual function such as serialize() or save() to write XML or JSON or whatever representation is desired."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423088178, "post_id": 28329633, "comment_id": 45012117, "body": "@DDrmmr They aren&#39;t. Or C# or Smalltalk, for that matter. That whole language family is roughtly the same in this respect."}, {"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423122369, "post_id": 28329633, "comment_id": 45022633, "body": "@Sneftel Then why do you say it&#39;s a problem for C++, specifically?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423129391, "post_id": 28329633, "comment_id": 45026235, "body": "@DDrmmr Erm, because C++ is the language the OP is using, as opposed to an OO language which doesn&#39;t suffer from this problem."}, {"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423133909, "post_id": 28329633, "comment_id": 45028855, "body": "@Sneftel That&#39;s the opposite of what you just said. Either way, please clarify your answer."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1423135377, "post_id": 28329633, "comment_id": 45029731, "body": "@DDrmmr I honestly don&#39;t understand what you think the contradiction is. C++, Smalltalk, and other languages in that family have problems with runtime polymorphism in data storage types. CLisp, Dylan, and other languages in <i>that</i> family do not. As a result, one tends to do more explicit downcasting in C++ than in Dylan."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 0, "last_activity_date": 1423077703, "creation_date": 1423077703, "answer_id": 28329633, "question_id": 28329445, "link": "https://stackoverflow.com/questions/28329445/can-i-avoid-dynamic-cast-when-subclasses-define-new-member-variables/28329633#28329633", "title": "Can I avoid dynamic_cast when subclasses define new member variables?", "body": "<p>Polymorphic data storage types are a bit of a problem for C++, since good OOP style dictates that the polymorphic behavior should be housed in the subclasses themselves... that is, say, <code>IndexedObject</code> would have a pure-virtual <code>play()</code> function, and <code>IndexedSong</code>'s implementation would play a song, <code>IndexedVideo</code>'s would play a video, and so on. But if it's something else consuming the data, it's difficult to make a nice, abstract interface for that. </p>\n\n<p><code>dynamic_cast</code>, enumerations specifying the type, etc. are almost always employed in this situation.</p>\n"}, {"tags": [], "owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "is_accepted": true, "score": 3, "last_activity_date": 1423080799, "creation_date": 1423080799, "answer_id": 28330587, "question_id": 28329445, "link": "https://stackoverflow.com/questions/28329445/can-i-avoid-dynamic-cast-when-subclasses-define-new-member-variables/28330587#28330587", "title": "Can I avoid dynamic_cast when subclasses define new member variables?", "body": "<p>For your code, you could define a virtual function in the base class, and let the sub classes implement that function, which can avoid dynamic_cast. The code will be like this:</p>\n\n<pre><code>class IndexedObject {\n    string name;\n    image icon;\npublic:\n    virtual void display() = 0;\n};\n\nclass IndexedSong : public IndexedObject {\n    string artist;\n    string title;\n    public:\n       virtual void display()\n       {/////}\n};\n\nclass IndexedBookmark : public IndexedObject {\n    some_url_type url;\n   public:\n       virtual void display()\n       {/////}\n};\n\nvoid displayObject(const IndexedObject &amp;obj) {\n\n    obj.display()\n}\n</code></pre>\n\n<p>The <a href=\"http://www.objectmentor.com/resources/articles/ocp.pdf\" rel=\"nofollow\">Open-Closed principle</a> is to deal with this case, you can find more details in the url and it talks about how to not use dynamic_cast.</p>\n"}], "owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 28330587, "answer_count": 3, "score": 0, "last_activity_date": 1423080799, "creation_date": 1423077019, "last_edit_date": 1423079495, "question_id": 28329445, "link": "https://stackoverflow.com/questions/28329445/can-i-avoid-dynamic-cast-when-subclasses-define-new-member-variables", "title": "Can I avoid dynamic_cast when subclasses define new member variables?", "body": "<p>I'm trying to write an application in a \"modern\" C++ style, while at the same time trying to learn how to do so, and have gotten stuck on a design issue that should be fairly basic.</p>\n\n<p>The application indexes various things, such as files/folders, music (via some music player API, not the filesystem) and perhaps in the future bookmarks and so on.<br>\nThe issue comes in representing these things. My plan was to use a base class, e.g. <code>IndexedObject</code>, which I then subclass into something like <code>IndexedFile</code>, <code>IndexedSong</code> and so on.</p>\n\n<p>These kinds of objects need to have some members in common, and some not. All kinds need an icon and a name to display in the application, so those clearly go in <code>IndexedObject</code>. However, an indexed file needs a full path, whereas an indexed song needs artist, album and title, but we might not know its path (it might not even be located on disk). Storing all of this in a single class seems very ugly, and in that case, I would still need a \"type\" member to figure out what a particular class instance is supposed to represent.  </p>\n\n<p>For the parts of the program where I have an <code>IndexedObject</code> but need to access the information only a particular subclass such as <code>IndexedFile</code> knows about, is there a better option than using <code>dynamic_cast</code>, or is this exactly when it should be used?<br>\nBy \"better\", I mean for any reasonable definition of better, such as having higher performance, being safer, and so on. Other options may well include an altogether different design, by the way. This base class/subclass design was just the first thing I thought of.</p>\n\n<p>Update:</p>\n\n<p>A few commenters asked to provide code. However, I don't really have much code that is relevant to this particular question; the question is how I should design and code this (whether the subclass approach is even the right one). I could be super-specific in what I need, but then the answers would become near-useless for anyone other than myself.<br>\nI could provide a bit of extra detail about what the goal is, though, so read on if you want that.</p>\n\n<p>The program indexes the various things mentioned in the background, and stores them in an some container type (QVector in my case) for easy retrieval. The user brings the app up via some hotkey, and types in search terms. For each typed letter, the app filters the index, and displays the matches.  </p>\n\n<p>For each match found, the UI needs to know its type. If it's a song, perhaps we want to format that as \"<em>artist</em> - <em>track name</em> (from <em>album</em>)\" or something; if it's a bookmark, perhaps show the domain name and part of the URL, and so on.</p>\n\n<p>So in other words, <strong>if</strong> I use the subclass method, I might do something like:</p>\n\n<pre><code>// The real code would of course have a bit more meat with some basic methods\n\nclass IndexedObject {\n    string name;\n    image icon;\n};\n\nclass IndexedSong : public IndexedObject {\n    string artist;\n    string title;\n};\n\nclass IndexedBookmark : public IndexedObject {\n    some_url_type url;\n};\n\nvoid displayObject(const IndexedObject &amp;obj) {\n\n    // Pseudo-C++ follows\n    if (obj is IndexedSong) {\n        display icon, artist and title\n    }\n    else if (obj is IndexedBookmark) {\n        display icon, name and URL;\n    }\n}\n</code></pre>\n\n<p>... the issue with this example is that the question isn't how to use dynamic_cast, which the example above seems to imply I must, but whether there is an <em>entirely different way</em> to solve this problem that avoids dynamic_cast altogether.</p>\n"}, {"tags": ["c++", "physics"], "comments": [{"owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 3, "creation_date": 1423077890, "post_id": 28329435, "comment_id": 45006716, "body": "I&#39;m voting to close this question as off-topic because it&#39;s more about physics than programming.  physics.stackexchange.com might be a better place for this question."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 0, "creation_date": 1423079035, "post_id": 28329435, "comment_id": 45007304, "body": "I agree with @JimLewis, you need to know what equation you&#39;re implementing before you start. If you can&#39;t infer what value is coming in as wrong by the output, then you should break the problem into sub sine-waves that you can predict the results to and then combine them."}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1423079608, "post_id": 28329435, "comment_id": 45007607, "body": "<a href=\"http://chrishecker.com/Rigid_body_dynamics\" rel=\"nofollow noreferrer\">These might be useful</a>"}, {"owner": {"reputation": 608, "user_id": 1117380, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8d86a2f2bee17d3ad720944ede1d77d9?s=128&d=identicon&r=PG", "display_name": "Kapoios", "link": "https://stackoverflow.com/users/1117380/kapoios"}, "edited": false, "score": 0, "creation_date": 1423079982, "post_id": 28329435, "comment_id": 45007792, "body": "A better place for this question is <a href=\"https://scicomp.stackexchange.com/\">scicomp.stackexchange.com</a>."}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1423088091, "post_id": 28329435, "comment_id": 45012078, "body": "Apart from the physics it&#39;s also a debuging help question.  And there we require a statement of what was intended and what went wrong - which is missing."}], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 0, "last_activity_date": 1423196653, "creation_date": 1423196653, "answer_id": 28358561, "question_id": 28329435, "link": "https://stackoverflow.com/questions/28329435/calculating-a-mass-resistance-to-acceleration/28358561#28358561", "title": "Calculating a mass resistance to acceleration", "body": "<p>This:</p>\n\n<pre><code>//Large amplitude pendulum acceleration formula\nlong double dAcceleration = -dMass*dGravity/dLength*sin(myAngle);\n</code></pre>\n\n<p>is incorrect. It should be this:</p>\n\n<pre><code>//Large amplitude pendulum acceleration formula\nlong double dAcceleration = -dGravity/dLength*sin(myAngle);\n</code></pre>\n\n<p>That's right, mass doesn't enter into it (unless you start to consider air resistance).</p>\n"}], "owner": {"reputation": 559, "user_id": 2036498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe8df12d972a24c7925b00634f79517?s=128&d=identicon&r=PG", "display_name": "user2036498", "link": "https://stackoverflow.com/users/2036498/user2036498"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 28358561, "answer_count": 1, "score": -1, "last_activity_date": 1423196653, "creation_date": 1423076980, "question_id": 28329435, "link": "https://stackoverflow.com/questions/28329435/calculating-a-mass-resistance-to-acceleration", "title": "Calculating a mass resistance to acceleration", "body": "<p>Im not sure if this is the right place for this question, but I need to calculate the velocity of a large amplitude pendulum, with my current code it results in a sinusoidal graph.</p>\n\n<p>The problem is that the period of the pendulum becomes smaller if I increase the mass, which shouldn't happen in a real pendulum because the period is independent of mass; The acceleration increases with mass but resistance to acceleration does too, and I don't know how to code this.</p>\n\n<p>I have tried looking into angular momentum but my knowledge of physics is very limited. I have this:</p>\n\n<pre><code>long double timeFrame = 0.01;\n    if(getNewAngle==true)\n{\n    //Convert to radians.\n    myAngle = Angle*M_PI/180;\n    getNewAngle = false;\n    //Velocity starts at 0.\n    myVelocity = 0;\n}\n//Setup starting variables.\nlong double dLength = std::stod(Length,0);\nlong double dGravity = std::stod(Gravity,0);\nlong double dMass = std::stod(Mass,0);\nlong double dPeriod = std::stod(Period,0);\n\n//Large amplitude pendulum acceleration formula\nlong double dAcceleration = -dMass*dGravity/dLength*sin(myAngle);\n//Angular displacement formula;\nlong double dDisplacement = myVelocity*timeFrame+0.5*dAcceleration*pow(timeFrame,2);\nmyVelocity = dDisplacement/timeFrame;\nmyAngle = myAngle + dDisplacement;\n</code></pre>\n"}, {"tags": ["c++", "monads"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423077183, "post_id": 28329387, "comment_id": 45006309, "body": "You may want to develop what&#39;s missing for those that can do C++ but have no idea what a &quot;maybe monad&quot; is."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423078718, "post_id": 28329387, "comment_id": 45007144, "body": "Thanks ! At first glance, shouldn&#39;t the functor returned by <code>fmap_maybe</code> take <code>t</code> by reference ?"}, {"owner": {"reputation": 12389, "user_id": 1233508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/93MDM.jpg?s=128&g=1", "display_name": "DCoder", "link": "https://stackoverflow.com/users/1233508/dcoder"}, "edited": false, "score": 0, "creation_date": 1423081985, "post_id": 28329387, "comment_id": 45008896, "body": "<code>fmap_maybe</code> creates a new <code>terminal_maybe</code> instead of mutating the one you passed in, therefore the original value of <code>t</code> (<code>forty</code>) will not change. Put the result of the whole <code>fmap_maybe</code> sequence into a variable, then use an &quot;unwrapper&quot; function to get the value out of it. Quick and dirty example: <a href=\"http://ideone.com/DaCiA2\" rel=\"nofollow noreferrer\">ideone.com/DaCiA2</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 12389, "user_id": 1233508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/93MDM.jpg?s=128&g=1", "display_name": "DCoder", "link": "https://stackoverflow.com/users/1233508/dcoder"}, "edited": false, "score": 0, "creation_date": 1423082090, "post_id": 28329387, "comment_id": 45008962, "body": "@DCoder well that comforts me then."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1423082039, "creation_date": 1423082039, "answer_id": 28330911, "question_id": 28329387, "link": "https://stackoverflow.com/questions/28329387/how-do-i-get-the-value-out-of-my-maybe-monad/28330911#28330911", "title": "How do I get the value OUT of my maybe&lt;&gt; monad?", "body": "<p>This works, but I don't know if it makes sense from a FP point of view.</p>\n\n<pre><code>auto unwrap = [](auto const &amp;f) {\n    return f;\n};\n\nint main( int argc, char* argv[] )\n{\n    auto plus_2 = [] ( auto arg ) { return arg + 2; };\n    auto minus_2 = [] ( auto arg ) { return arg - 2; };\n\n    maybe&lt;int&gt; forty = just(40);\n\n    auto const &amp;outv = terminal_maybe(forty)\n        (fmap_maybe( plus_2 ))\n        (fmap_maybe( plus_2 ))\n        (unwrap);\n\n    std::printf(\"result = %d\\n\",outv.argument);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 40758, "user_id": 3886, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd04cb73de5ffd81321a85c45dc75724?s=128&d=identicon&r=PG", "display_name": "dicroce", "link": "https://stackoverflow.com/users/3886/dicroce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 2, "accepted_answer_id": 28330911, "answer_count": 1, "score": 4, "last_activity_date": 1423083684, "creation_date": 1423076786, "last_edit_date": 1423083684, "question_id": 28329387, "link": "https://stackoverflow.com/questions/28329387/how-do-i-get-the-value-out-of-my-maybe-monad", "title": "How do I get the value OUT of my maybe&lt;&gt; monad?", "body": "<p>For educational reasons, I'm trying to implement a maybe monad in C++14. My (perhaps overly simplistic) understanding of monads is that they let you define a computation as a series of composable function calls. The wikipedia article on monads calls them \"programmable semicolons\" because they let you define what happens between what would otherwise be a set of discreet function calls. The maybe monad is a monad that interrupts computation if a failure occurs.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct maybe\n{\n    maybe( const T&amp; t ) : argument( t ), valid( true ) {}\n    maybe() : argument(), valid( false ) {}\n\n    T argument;\n    bool valid;\n};\n\ntemplate&lt;class T&gt;\nmaybe&lt;T&gt; just( const T&amp; t ) { return maybe&lt;T&gt;(t); }\n\ntemplate&lt;class T&gt;\nmaybe&lt;T&gt; nothing() { return maybe&lt;T&gt;(); }\n\nauto terminal_maybe = [] ( auto term ) {\n    return [=] ( auto func ) {\n        return func( term );\n    };\n};\n\nauto fmap_maybe = [] ( auto f ) {\n    return [=] ( auto t ) {\n        if( t.valid ) {\n            try {\n                t.argument = f( t.argument );\n                printf(\"argument = %d\\n\",t.argument);\n            }\n            catch(...) {\n                t.valid = false;\n            }\n        }\n\n        return (t.valid) ? terminal_maybe( just( t.argument ) ) : terminal_maybe( nothing&lt;decltype(t.argument)&gt;() );\n    };\n};\n\nint main( int argc, char* argv[] )\n{\n    auto plus_2 = [] ( auto arg ) { return arg + 2; };\n    auto minus_2 = [] ( auto arg ) { return arg - 2; };\n\n    maybe&lt;int&gt; forty = just(40);\n\n    terminal_maybe(forty)\n        (fmap_maybe( plus_2 ))\n        (fmap_maybe( plus_2 ));\n\n    printf(\"result = %d\\n\",forty.argument);\n\n    return 0;\n}\n</code></pre>\n\n<p>As you can see I am super close! I can chain multiple calls together monadically (and I can tell from printf that my value does what I expect (increments from 40 to 42 and then from 42 to 44)). The problem is that I have no way to get the final value OUT! I tried making terminal_maybe accept a reference (auto&amp;) and that forced me to modify fmap's return statement (to just return terminal_maybe( t ) rather than a new maybe). But it still didn't have the correct value for the final printf.</p>\n"}, {"tags": ["c++", "windows", "qt", "linker", "gsl"], "comments": [{"owner": {"reputation": 2418, "user_id": 2505590, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/e5sYJ.jpg?s=128&g=1", "display_name": "baci", "link": "https://stackoverflow.com/users/2505590/baci"}, "edited": false, "score": 1, "creation_date": 1423105279, "post_id": 28329360, "comment_id": 45017145, "body": "add folder that contains gsl.dll to your environment variable PATH, or copy dll next to your executable. use <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependency walker</a> to find out any other missing dynamic libraries."}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 2045625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f86c398e854da573878630f5c2b0f9?s=128&d=identicon&r=PG", "display_name": "maythe4thbewithu", "link": "https://stackoverflow.com/users/2045625/maythe4thbewithu"}, "is_accepted": false, "score": 0, "last_activity_date": 1429023896, "last_edit_date": 1495540789, "creation_date": 1429023524, "answer_id": 29630730, "question_id": 28329360, "link": "https://stackoverflow.com/questions/28329360/crash-when-using-gsl-with-qt/29630730#29630730", "title": "Crash when using GSL with Qt", "body": "<p>I have the same problem and I checked my .exe by using <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependency walker</a> (Thanks @canberk)</p>\n\n<p>It tells me that some delay-load dll is missing (that's why the build is OK)</p>\n\n<p>those dll are the same as <a href=\"https://stackoverflow.com/questions/17023419/win-7-64-bit-dll-problems\">this article</a></p>\n\n<p>After install <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=40784\" rel=\"nofollow noreferrer\">Visual C++ Redistributable Packages for Visual Studio 2013</a>\n(I install both x86 and x64)</p>\n\n<p>And <strong>restart Qt</strong> and <strong>clean the project</strong>, the problem is solved.</p>\n"}], "owner": {"reputation": 49, "user_id": 3394626, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003307701614/picture?type=large", "display_name": "user3394626", "link": "https://stackoverflow.com/users/3394626/user3394626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460560384, "creation_date": 1423076678, "last_edit_date": 1460560384, "question_id": 28329360, "link": "https://stackoverflow.com/questions/28329360/crash-when-using-gsl-with-qt", "title": "Crash when using GSL with Qt", "body": "<p>I am trying to use <code>GSL</code> in Qt/C++. I compiled the library using MinGW in Windows following <a href=\"http://apps.jcns.fz-juelich.de/redmine/projects/bornagain/wiki/Windows_build?version=41\" rel=\"nofollow\">this tutorial</a>.</p>\n\n<p>I did not copy the directory, <code>GSL</code> is in c:/gsl-1.16</p>\n\n<p>I linked in Qt like this: </p>\n\n<pre><code>win32{\nINCLUDEPATH += C:/gsl-1.16/include /\nINCLUDEPATH += C:/gsl-1.16/lib\nLIBS += -LC:/gsl-1.16/bin -llibgsl-0 -llibgslcblas-0\nLIBS += -L/usr/local/lib example.o -lgsl -lgslcblas -lm\n}\n</code></pre>\n\n<p>And it recognizes the <code>#include &lt;gsl/...&gt;</code>.</p>\n\n<p>But when I use a <code>GSL</code> object, the application just crashes at the start but it builds well.</p>\n\n<p>Am I forgetting something or doing something wrong?</p>\n"}, {"tags": ["c++", "class", "types", "unsigned"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1423076158, "post_id": 28329176, "comment_id": 45005778, "body": "As far as I know, you can not make unsigned user-types in C++"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 5, "creation_date": 1423076176, "post_id": 28329176, "comment_id": 45005790, "body": "What about making it a template? <code>bbool&lt;unsigned&gt;</code> is possible."}, {"owner": {"reputation": 97, "user_id": 4051305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69ef08825d03a0d0a2417ea5f6569b1?s=128&d=identicon&r=PG&f=1", "display_name": "Karim", "link": "https://stackoverflow.com/users/4051305/karim"}, "edited": false, "score": 0, "creation_date": 1423076229, "post_id": 28329176, "comment_id": 45005825, "body": "is there any other way? other than &quot;unsigned&quot;  or etc."}, {"owner": {"reputation": 97, "user_id": 4051305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69ef08825d03a0d0a2417ea5f6569b1?s=128&d=identicon&r=PG&f=1", "display_name": "Karim", "link": "https://stackoverflow.com/users/4051305/karim"}, "edited": false, "score": 0, "creation_date": 1423076304, "post_id": 28329176, "comment_id": 45005876, "body": "i think i will go for the template"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1423079306, "post_id": 28329176, "comment_id": 45007437, "body": "<code>unsigned</code> is just an abbreviation of <code>unsigned int</code>, <code>short</code> for <code>short int</code> etc. And the only non-int type that can be modified like this is <code>signed&#47;unsigned char</code>. These are all fundamental types, not class types. (In C++, all classes are types but not all types are classes)"}], "owner": {"reputation": 97, "user_id": 4051305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69ef08825d03a0d0a2417ea5f6569b1?s=128&d=identicon&r=PG&f=1", "display_name": "Karim", "link": "https://stackoverflow.com/users/4051305/karim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423077150, "creation_date": 1423076071, "question_id": 28329176, "link": "https://stackoverflow.com/questions/28329176/how-to-make-a-type-that-supports-short-or-unsigned-etc-modifiers-c", "title": "how to make a type that supports short or unsigned..etc modifiers c++", "body": "<p>I am trying to make type in c++ and what am trying to do is:\nhere is an example:\nthis is a type i made called bbool.</p>\n\n<pre><code>class bbool\n    {\npublic:\n    bbool();\n    bbool(unsigned short int);\nprivate:\n    bool x = false,\n        y = false,\n        z = false;\n    unsigned short int a, b;\n    void check(unsigned short int);\n};\n\nvoid bbool::check(unsigned short int c){\n    if ( c &lt; 0 || c &gt;= 3 ){\n        throw invalid_argument(\"Wrong value::Not 1, 2 or 3\");\n    }\n}\n\nbbool::bbool(){\n\n}\n\nbbool::bbool(unsigned short int c){\n    check(c);\n    switch ( c )\n    {\n        case 0:\n            x = true;\n            break;\n        case 1:\n            y = true;\n            break;\n        case 2:\n            z = true;\n            break;\n        }\n   }\n</code></pre>\n\n<p>and what I want to be able to do is if possible</p>\n\n<pre><code>unsigned bbool x;\n</code></pre>\n\n<p>and to be able to define what the modifires unsigned or short or .. etc do.  i found \"that i must to make a group!!??\" (not so sure what it means). and btw is the \"unsigned typeA\" different than \"typeA\" (not in value like (int x\npositive or negative value or unsigned postive only) like if it have a different class)</p>\n\n<p>thanks in advance and please forgive me if it is not a good question.</p>\n"}, {"tags": ["c#", "c++", ".net", "acl"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1423079710, "post_id": 28329059, "comment_id": 45007646, "body": "You can&#39;t do this, as the function requires admin privileges. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365860%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">documentation</a> clearly states this in the description of the <code>ERROR_ACCESS_DENIED</code> return value, and in the seventh through ninth paragraphs of the Remarks section. You can require your app to prompt for admin credentials using a manifest, but you can&#39;t use the API call without those credentials."}, {"owner": {"reputation": 1754, "user_id": 842512, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b073dd8a50f7155a74a0e23812301494?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/842512/john"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1423079971, "post_id": 28329059, "comment_id": 45007787, "body": "What then is the best way to run certain code (add an entry to a routing table) from app run in standard user account? It should be done transparently for the end user (without login/password prompting, UAC prompting etc). If I know login/pass for user account begin in admin group, Can I for instance create startup app which run the main one in elevated mode?"}], "owner": {"reputation": 1754, "user_id": 842512, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b073dd8a50f7155a74a0e23812301494?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/842512/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423077742, "creation_date": 1423075653, "last_edit_date": 1423077742, "question_id": 28329059, "link": "https://stackoverflow.com/questions/28329059/how-to-use-createipforwardentry-under-standard-user-account", "title": "How to use: CreateIpForwardEntry under standard user account?", "body": "<p>Is is possible to add policy, configure the system or to do something so that the program which runs under standard user account could manipulate in routing table using CreateIpForwardEntry method?</p>\n\n<p>I wouldn't like to elevate the application in UAC, rather do something to allow the software to make some changes ....</p>\n\n<p>Thank You</p>\n"}, {"tags": ["c++", "arrays", "memory", "destructor", "delete-operator"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1423075595, "post_id": 28329015, "comment_id": 45005493, "body": "<code>delete [] subDirectories</code>. Make sure <code>subDirectories</code> was created with <code>new[]</code>, otherwise you have undefined behavior."}, {"owner": {"reputation": 4284, "user_id": 3837231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdHnA.jpg?s=128&g=1", "display_name": "NetVipeC", "link": "https://stackoverflow.com/users/3837231/netvipec"}, "edited": false, "score": 5, "creation_date": 1423075926, "post_id": 28329015, "comment_id": 45005661, "body": "If it&#39;s C++ should definitively avoid C style array and use std containers like <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": false, "score": 6, "last_activity_date": 1423079249, "last_edit_date": 1423079249, "creation_date": 1423075866, "answer_id": 28329112, "question_id": 28329015, "link": "https://stackoverflow.com/questions/28329015/how-do-you-delete-an-empty-array-of-objects/28329112#28329112", "title": "How do you delete an empty array of objects?", "body": "<p>Write:</p>\n\n<pre><code>delete [] subDirectories; \n</code></pre>\n\n<p>Make sure <code>subDirectories</code> is allocated using <code>new []</code>.</p>\n\n<p>Anyway, stop doing that either. Use <code>std::vector&lt;std::unique_ptr&lt;Directory&gt;&gt;</code> instead, Or <code>std::vector&lt;std::shared_ptr&lt;Directory&gt;&gt;</code> if the elements are to be shared. Either way let the library manage memory for you.</p>\n"}], "owner": {"reputation": 17, "user_id": 4497302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ed1f35e7548e7edbccf43bc310799d0?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/4497302/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436106495, "creation_date": 1423075521, "last_edit_date": 1436106495, "question_id": 28329015, "link": "https://stackoverflow.com/questions/28329015/how-do-you-delete-an-empty-array-of-objects", "title": "How do you delete an empty array of objects?", "body": "<p>I am trying to create a constructor that deletes a directory objects name, then the subdirectories within the directory, and finally the directory itself. The <code>delete [] *subDirectories</code> line however causes segfaults whenever used.</p>\n\n<p>Subdirectories are allocated by</p>\n\n<pre><code>subDirectories[subDirectoryCount++] = new Directory(arguments[1], umask, time, this); \n\nDirectory::~Directory()\n{\n    delete [] name;\n\n    for (int i = 0; i &lt; subDirectoryCount; i++)\n       delete subDirectories[i];\n    delete [] *subDirectories;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "intellisense"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1423076038, "post_id": 28329002, "comment_id": 45005715, "body": "Works fine in VS2013.  Let&#39;s call it a 2012 specific bug."}, {"owner": {"reputation": 2695, "user_id": 3096657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100001008411462/picture?type=large", "display_name": "wondra", "link": "https://stackoverflow.com/users/3096657/wondra"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423076380, "post_id": 28329002, "comment_id": 45005915, "body": "@HansPassant thanks for this info (that answered is pretty much), should I delete this question then?"}], "answers": [{"comments": [{"owner": {"reputation": 2695, "user_id": 3096657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100001008411462/picture?type=large", "display_name": "wondra", "link": "https://stackoverflow.com/users/3096657/wondra"}, "edited": false, "score": 0, "creation_date": 1423078737, "post_id": 28329794, "comment_id": 45007153, "body": "Well, even though the type is unknown, should be guaranteed to find-able and etc., that&#39;s what generic containers are for, isn&#39;t it?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 2695, "user_id": 3096657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100001008411462/picture?type=large", "display_name": "wondra", "link": "https://stackoverflow.com/users/3096657/wondra"}, "edited": false, "score": 1, "creation_date": 1423078806, "post_id": 28329794, "comment_id": 45007198, "body": "@wondra: The Intellisense compiler implements the core language, it doesn&#39;t know about the libraries."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 0, "last_activity_date": 1423078236, "creation_date": 1423078236, "answer_id": 28329794, "question_id": 28329002, "link": "https://stackoverflow.com/questions/28329002/why-intellisense-does-not-work-for-mapint-t/28329794#28329794", "title": "Why Intellisense does not work for map&lt;int, T *&gt;?", "body": "<p>The issue is probably that <code>std::map&lt;int , T *&gt;</code> is an unknown type here. There might be a specialization. And from personal experience, specializations tend to confuse Intellisense.</p>\n"}], "owner": {"reputation": 2695, "user_id": 3096657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/100001008411462/picture?type=large", "display_name": "wondra", "link": "https://stackoverflow.com/users/3096657/wondra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 28329794, "answer_count": 1, "score": -1, "last_activity_date": 1423090379, "creation_date": 1423075472, "last_edit_date": 1423090379, "question_id": 28329002, "link": "https://stackoverflow.com/questions/28329002/why-intellisense-does-not-work-for-mapint-t", "title": "Why Intellisense does not work for map&lt;int, T *&gt;?", "body": "<p>I am surprised, by following behaviour of intellisense, why:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Bar {\n    std::map&lt;int , int *&gt; map;\n    std::map&lt;int , T *&gt; map2;\n    std::vector&lt;int *&gt; vec;\n    std::vector&lt;T *&gt; vec2;\n\n    T * doBar(void)\n    {\n        map./*displays everything*/\n    ---&gt;map2./*displays only 4 members: at, swap and two operators*/   \n        vec./*displays everything*/   \n        vec2./*displays everything*/       \n        return null;\n    }\n};\n</code></pre>\n\n<p>is this a bug? Or there is some particular reason behind showing only 4 members when the second is T/T*? Logic would tell me there is no reason to hide methods like <code>find</code> or <code>erase</code> for any types even when they are templated <code>second</code>s.  <br>\nCompiling code with not-displayed functions does not throw any errors and appears to work correctly. I am using Visual Studio 2012. <em>(and already deleted intellisense database several times)</em><br><br>\n<em>EDIT: it indeed appears to be VS2012 specific bug, just confirmed it works in with VS2013</em></p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423076641, "post_id": 28328948, "comment_id": 45006047, "body": "Unlikely. The error does not match your code. Also doesn&#39;t the definition of <code>gen</code> suffer from MVP?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1423076762, "post_id": 28328948, "comment_id": 45006098, "body": "@LightnessRacesinOrbit Only if <code>rd</code> is a typename."}], "answers": [{"comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1423075660, "post_id": 28328983, "comment_id": 45005528, "body": "Or use a non static data member initializer <code>std::uniform_int_distribution&lt;&gt; dis = std::uniform_int_distribution&lt;&gt;{0, 19};</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1423075805, "post_id": 28328983, "comment_id": 45005596, "body": "@Praetorian It&#39;s kinda hard to use <code>std::uniform_int_distribution</code> before C++11 :)"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423075902, "post_id": 28328983, "comment_id": 45005646, "body": "@T.C. Hehe. There&#39;s <code>tr1&#47;random</code> but IIRC it was called something slightly different then."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423081166, "post_id": 28328983, "comment_id": 45008490, "body": "Is it guaranteed that <code>uniform_int_distribution</code> has a move constructor?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423081438, "post_id": 28328983, "comment_id": 45008628, "body": "But that means this answer is incorrect, no?  @eswaat"}, {"owner": {"reputation": 2547, "user_id": 1503898, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CX5eA.jpg?s=128&g=1", "display_name": "Amxx", "link": "https://stackoverflow.com/users/1503898/amxx"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423083306, "post_id": 28328983, "comment_id": 45009640, "body": "@Yakk Answer edit to use <code>std::uniform_int_distribution&lt;&gt;::param_type</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423101035, "post_id": 28328983, "comment_id": 45016183, "body": "@Yakk Distributions are guaranteed CopyConstructible and CopyAssignable. ([rand.req.dist]/p4)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423101403, "post_id": 28328983, "comment_id": 45016257, "body": "@t.c. thanks, that was what I was asking: I did not know.  Docs at cppreference is lacking looks like"}], "tags": [], "owner": {"reputation": 2547, "user_id": 1503898, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/CX5eA.jpg?s=128&g=1", "display_name": "Amxx", "link": "https://stackoverflow.com/users/1503898/amxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1423102727, "last_edit_date": 1423102727, "creation_date": 1423075433, "answer_id": 28328983, "question_id": 28328948, "link": "https://stackoverflow.com/questions/28328948/use-stduniform-int-distribution-and-define-its-range-later/28328983#28328983", "title": "Use std::uniform_int_distribution and define its range later", "body": "<p>You can just do</p>\n\n<pre><code>group.dis = std::uniform_int_distribution&lt;&gt;(0,19);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>group.dis.param(std::uniform_int_distribution&lt;&gt;::param_type(0,19));\n</code></pre>\n\n<p>Another way would be to add a method to your struct</p>\n\n<pre><code>struct group_s {\n    int k;\n    std::uniform_int_distribution&lt;&gt; dis;\n    void set(int a, int b) { dis = std::uniform_int_distribution&lt;&gt;(a,b); }\n} group;\n\n\ngroup.set(0,19);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423081512, "post_id": 28329064, "comment_id": 45008665, "body": "a quick glance at cppreference doesn&#39;t show a move constructor guaranteed for <code>std::uniform_int_distribution&lt;&gt;</code>.  Do you have evidence to the contrary?"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1423075672, "creation_date": 1423075672, "answer_id": 28329064, "question_id": 28328948, "link": "https://stackoverflow.com/questions/28328948/use-stduniform-int-distribution-and-define-its-range-later/28329064#28329064", "title": "Use std::uniform_int_distribution and define its range later", "body": "<p>You should do </p>\n\n<pre><code>group.dis = std::uniform_int_distribution&lt;&gt;(0,19);\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>group.dis(0,19);\n</code></pre>\n\n<p>Also, your code seems to be taken without reference directly from <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow\">here</a>, so a link as kind of a tributal citation would have been in order.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423081380, "post_id": 28329163, "comment_id": 45008596, "body": "I am curious, why <code>group.dis.param({0, 19});</code> doesn&#39;t seem to work.  Bug?  <code>std::uniform_int_distribution&lt;&gt;{0,2}</code> seems to work."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423100961, "post_id": 28329163, "comment_id": 45016161, "body": "@Yakk Presumably the constructor is <code>explicit</code>, like <code>std::uniform_int_distribution</code>&#39;s constructor taking two integers."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 5, "last_activity_date": 1423076883, "last_edit_date": 1423076883, "creation_date": 1423076014, "answer_id": 28329163, "question_id": 28328948, "link": "https://stackoverflow.com/questions/28328948/use-stduniform-int-distribution-and-define-its-range-later/28329163#28329163", "title": "Use std::uniform_int_distribution and define its range later", "body": "<p>Use <code>param()</code>:</p>\n\n<pre><code>using param_t = std::uniform_int_distribution&lt;&gt;::param_type;\n\ngroup.dis.param(param_t(0, 19));\n</code></pre>\n\n<p>If the parameters change every time you use the distribution, then you can also consider using the two-parameter overload of <code>operator()</code> instead:</p>\n\n<pre><code>std::cout &lt;&lt; group.dis(gen, param_t(0, 19)) &lt;&lt; ' ';\n</code></pre>\n\n<p>As distribution objects are allowed to store extra bits of entropy obtained during a previous <code>operator()</code> call, this approach can be more efficient than constructing a new distribution object and assigning it.</p>\n\n<p>Note that the cppreference page is incomplete and doesn't document the requirements the standard imposes on <code>param_type</code>. Given a distribution type <code>D</code> and its associated <code>param_type</code> <code>P</code>,</p>\n\n<blockquote>\n  <p>For each of the constructors of <code>D</code> taking arguments corresponding to\n  parameters of the distribution, <code>P</code> shall have a corresponding\n  constructor subject to the same requirements and taking arguments\n  identical in number, type, and default values. Moreover, for each of\n  the member functions of <code>D</code> that return values corresponding to\n  parameters of the distribution, <code>P</code> shall have a corresponding member\n  function with the identical name, type, and semantics.</p>\n</blockquote>\n\n<p>(\u00a726.5.1.6 [rand.req.dist]/p9)</p>\n"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1819, "favorite_count": 1, "accepted_answer_id": 28328983, "answer_count": 3, "score": 4, "last_activity_date": 1423102727, "creation_date": 1423075307, "last_edit_date": 1423076651, "question_id": 28328948, "link": "https://stackoverflow.com/questions/28328948/use-stduniform-int-distribution-and-define-its-range-later", "title": "Use std::uniform_int_distribution and define its range later", "body": "<p>I have problem where I want to create a <code>std::uniform_int_distribution</code> in a struct and then give its range later. Below is what I want.</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nstd::random_device rd;\nstd::mt19937 gen(rd());\n\nstruct group_s {\n   int k;\n   std::uniform_int_distribution&lt;&gt; dis;\n} group;\n\n\nint main()\n{  \n    group.dis(0,19);\n    std::cout &lt;&lt; group.dis(gen) &lt;&lt; ' ';\n}\n</code></pre>\n\n<p>I am getting the following error: </p>\n\n<pre><code>no match for call to '(std::uniform_int_distribution&lt;&gt;) (int, int)'\n  cpu_group.dis(0,19);\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["c++", "qt", "qcustomplot"], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1423075724, "post_id": 28329046, "comment_id": 45005558, "body": "Thanks, that worked, do you know why the update(), repaint() doesn&#39;t work?"}, {"owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 4, "creation_date": 1423076018, "post_id": 28329046, "comment_id": 45005706, "body": "Update or repaint does not make use of the internal structures, buffers,... of QCustomPlot. You should call <code>replot</code> to make everything ready. It internally calls <code>update</code>."}], "tags": [], "owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "is_accepted": true, "score": 3, "last_activity_date": 1423075611, "creation_date": 1423075611, "answer_id": 28329046, "question_id": 28328941, "link": "https://stackoverflow.com/questions/28328941/qcustomplot-widget-doesnt-show-graph-update/28329046#28329046", "title": "QCustomPlot/Widget doesn&#39;t show graph/update", "body": "<p>You should use <code>replot()</code> function to update the plot :</p>\n\n<pre><code>customPlot-&gt;replot();\n</code></pre>\n\n<p>It causes a complete replot into the internal buffer. This method must be called when you make changes on the axis ranges or data points of graphs. This makes the changes visible.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2402, "favorite_count": 1, "accepted_answer_id": 28329046, "answer_count": 1, "score": 3, "last_activity_date": 1430629917, "creation_date": 1423075294, "last_edit_date": 1430629917, "question_id": 28328941, "link": "https://stackoverflow.com/questions/28328941/qcustomplot-widget-doesnt-show-graph-update", "title": "QCustomPlot/Widget doesn&#39;t show graph/update", "body": "<p>I am using <code>QSplitter</code> where the right pane is <code>QCustomPlot</code> which shows a graph when I click in the left pane (a tree view). The problem is the graph doesn't show up or updates until I resize the splitter. I am using Qt example code:</p>\n\n<pre><code>void MyDialog::setupPlot(QCustomPlot *customPlot)\n{\n    QString demoName = \"Quadratic Demo\";\n    // generate some data:\n    QVector&lt;double&gt; x(101), y(101); // initialize with entries 0..100\n    for (int i=0; i&lt;101; ++i)\n    {\n        x[i] = i/50.0 - 1; // x goes from -1 to 1\n        y[i] = x[i]*x[i];  // let's plot a quadratic function\n    }\n    // create graph and assign data to it:\n    customPlot-&gt;addGraph();\n    customPlot-&gt;graph(0)-&gt;setData(x, y);\n    // give the axes some labels:\n    customPlot-&gt;xAxis-&gt;setLabel(\"x\");\n    customPlot-&gt;yAxis-&gt;setLabel(\"y\");\n    // set axes ranges, so we see all data:\n    customPlot-&gt;xAxis-&gt;setRange(-1, 1);\n    customPlot-&gt;yAxis-&gt;setRange(0, 1);\n}\n</code></pre>\n\n<p>The plot of course shows up when I call this function in the constructor (like it is in the example) but not if call this in button clicked.</p>\n\n<p>What do I need to do to make sure the graph is plotted when I call this function?</p>\n"}, {"tags": ["c++", "arrays", "random"], "comments": [{"owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "edited": false, "score": 0, "creation_date": 1423075075, "post_id": 28328796, "comment_id": 45005223, "body": "Is there an error or do you only want hints on how to improve the performance of the detection?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423075099, "post_id": 28328796, "comment_id": 45005242, "body": "Can you rephrase (clarify) &quot;objects being placed inside each other&quot; and &quot;I need to randomize any matches&quot;?"}, {"owner": {"reputation": 1, "user_id": 4529934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec884f83b3e8bee51144aab8dbbae66?s=128&d=identicon&r=PG&f=1", "display_name": "Flaminx", "link": "https://stackoverflow.com/users/4529934/flaminx"}, "edited": false, "score": 0, "creation_date": 1423128173, "post_id": 28328796, "comment_id": 45025510, "body": "So basically I need it to go through the array, find duplicates and replace them so every object placed has a unique position, for example if the array at position [0] [1] is the same as [4][1] then it will generate a new random number and check for duplicates, if none are found it will check [1] [1] with all other entries to find duplicates and so on. The problem is that the objects still spawn inside each other and any help would be appreciated because I&#39;m stumped at this point"}, {"owner": {"reputation": 1, "user_id": 4529934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec884f83b3e8bee51144aab8dbbae66?s=128&d=identicon&r=PG&f=1", "display_name": "Flaminx", "link": "https://stackoverflow.com/users/4529934/flaminx"}, "edited": false, "score": 0, "creation_date": 1423128488, "post_id": 28328796, "comment_id": 45025670, "body": "Just to clarify the objects spawn at [0][1][2] , 1 being Z and 2 being X so each array entry has a sub array with X and Z coordinates to use"}], "owner": {"reputation": 1, "user_id": 4529934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec884f83b3e8bee51144aab8dbbae66?s=128&d=identicon&r=PG&f=1", "display_name": "Flaminx", "link": "https://stackoverflow.com/users/4529934/flaminx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423074793, "creation_date": 1423074793, "question_id": 28328796, "link": "https://stackoverflow.com/questions/28328796/replacing-duplicates-in-a-randomized-2-dimensional-array", "title": "Replacing duplicates in a randomized 2 dimensional array", "body": "<p>I am having some trouble with my class project, essentially what I want to do is spawn objects randomly which so far is working perfectly, they are spawned from an 2d array that stores X and Z which have been randomly generated within reasonable distance. The issue I am having is objects being placed inside each other due to lack of duplicate detection. I need to go through the 2d array, see if any X and Y co-ords match and randomize any matches found. Sorry if this doesn't make a lot of sense, i'm not too good at explaining things but perhaps you could take a look at my current detection method and give me some tips?</p>\n\n<pre><code>for (int k = 0; k &lt;= NumofShrooms - 1; k++)\n{\n    for (int i = 0; i &lt;= NumofShrooms - 1;)\n    {\n        if (k == i)\n        {\n            i++;\n        }\n\n        if (SpawnArray[k][2] == SpawnArray[i][2])\n        {\n            SpawnArray[k][2] = rand() % 16 + 1;\n            i = 0;\n        }\n        else i++;\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 2404, "user_id": 1464336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/43a3e2f5a681022f037622f3715d5326?s=128&d=identicon&r=PG", "display_name": "Suedocode", "link": "https://stackoverflow.com/users/1464336/suedocode"}, "edited": false, "score": 0, "creation_date": 1423077530, "post_id": 28328794, "comment_id": 45006496, "body": "Rules are assigned on the spot and expand any variables at that point.  There&#39;s a magical keyword that&#39;s like <code>.SECONDEXPANSION</code>, but honestly I have no idea what it does despite trying to figure it out several times."}], "answers": [{"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 1, "last_activity_date": 1423080691, "creation_date": 1423080691, "answer_id": 28330548, "question_id": 28328794, "link": "https://stackoverflow.com/questions/28328794/makefile-delay-variable-expansion/28330548#28330548", "title": "makefile delay variable expansion", "body": "<p>Aggieboy's comment is correct as to the issue: if you include the makefile first then the rule using <code>$(DEPS)</code> is already expanded before you add extra things to it, so it doesn't see the extra things.  My advice for people writing this sort of makefile environment with common include files is that the included files that define any rules should always be at the end.</p>\n\n<p>It's true the <code>.SECONDEXPANSION</code> will solve this problem, if you want to go that way, and it's not actually that hard to understand.  If the <a href=\"http://www.gnu.org/software/make/manual/html_node/Secondary-Expansion.html\" rel=\"nofollow\">description in the manual</a> is too hard to read, it might be useful to look at <a href=\"http://make.mad-scientist.net/category/metaprogramming/\" rel=\"nofollow\">this discussion of expansion in GNU make</a>, in particular the one on <a href=\"http://make.mad-scientist.net/secondary-expansion/\" rel=\"nofollow\">secondary expansion</a>.</p>\n\n<p>I don't typically recommend this because although it will solve <em>this</em> problem, you'll hit the same issue with the next rule... you'll basically have to use secondary expansion for all your rules if you want to allow <code>include</code> files in any order WRT variable assignments.  And, secondary expansion only works for variables used in prerequisite lists.  You're out of luck if you want to defer expansion of variables used in/as targets.</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "accepted_answer_id": 28330548, "answer_count": 1, "score": 1, "last_activity_date": 1423080691, "creation_date": 1423074792, "question_id": 28328794, "link": "https://stackoverflow.com/questions/28328794/makefile-delay-variable-expansion", "title": "makefile delay variable expansion", "body": "<p>I have some rules in my root makefile that look something like this:</p>\n\n<pre><code>DEPS += a\nDEPS += b\n...\n\n$(THE_BINARY) : $(DEPS)\n</code></pre>\n\n<p>Individual app makefiles <code>include</code> this root makefile after providing some required variables. I want to make it so that apps can add to the <code>DEPS</code> variable too. This works:</p>\n\n<pre><code>DEPS += some_other_dep\ninclude root.make\n</code></pre>\n\n<p>but this doesn't:</p>\n\n<pre><code>include root.make\nDEPS += some_other_dep\n</code></pre>\n\n<p>Is this because <code>($DEPS)</code> is expanded at the point where the rule is assigned, and not at the end? Is there a way to write the root makefile in such a way that both <code>DEPS += ...</code> lines do the same thing?</p>\n"}, {"tags": ["c++", "opencv", "bit-shift"], "comments": [{"owner": {"reputation": 9792, "user_id": 1180117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/75c3146c3b87a3d4d01d9f7b07521b8f?s=128&d=identicon&r=PG", "display_name": "kiranpradeep", "link": "https://stackoverflow.com/users/1180117/kiranpradeep"}, "edited": false, "score": 0, "creation_date": 1423102246, "post_id": 28328754, "comment_id": 45016439, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19068085/shift-image-content-with-opencv\">Shift image content with OpenCV</a>"}, {"owner": {"reputation": 16103, "user_id": 15485, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NoiuG.png?s=128&g=1", "display_name": "Alessandro Jacopson", "link": "https://stackoverflow.com/users/15485/alessandro-jacopson"}, "reply_to_user": {"reputation": 9792, "user_id": 1180117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/75c3146c3b87a3d4d01d9f7b07521b8f?s=128&d=identicon&r=PG", "display_name": "kiranpradeep", "link": "https://stackoverflow.com/users/1180117/kiranpradeep"}, "edited": false, "score": 1, "creation_date": 1423132022, "post_id": 28328754, "comment_id": 45027810, "body": "@Kiran <a href=\"http://stackoverflow.com/questions/19068085/shift-image-content-with-opencv\" title=\"shift image content with opencv\">stackoverflow.com/questions/19068085/&hellip;</a> asks to fill the image with zeros, not to fill the image with something like <code>BORDER_WRAP</code> so in my opinion that question is slightly different from mine. Furthermore <a href=\"http://stackoverflow.com/q/19068085/15485\">stackoverflow.com/q/19068085/15485</a> does not seem concerned with efficiency and performance."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11144818, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fb404983503f0c17c1ff4c5bd2133969?s=128&d=identicon&r=PG", "display_name": "user11144818", "link": "https://stackoverflow.com/users/11144818/user11144818"}, "is_accepted": false, "score": 0, "last_activity_date": 1551639146, "creation_date": 1551639146, "answer_id": 54972475, "question_id": 28328754, "link": "https://stackoverflow.com/questions/28328754/efficient-c-way-to-shift-a-cvmat-with-opencv/54972475#54972475", "title": "Efficient C++ way to shift a cv::Mat with OpenCV", "body": "<p>If size of your array is not so big and rows=1 then you can repeat your array like this\n0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9\nThen for shifting it shift array's datapointer</p>\n"}], "owner": {"reputation": 16103, "user_id": 15485, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NoiuG.png?s=128&g=1", "display_name": "Alessandro Jacopson", "link": "https://stackoverflow.com/users/15485/alessandro-jacopson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1560, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1551639146, "creation_date": 1423074686, "question_id": 28328754, "link": "https://stackoverflow.com/questions/28328754/efficient-c-way-to-shift-a-cvmat-with-opencv", "title": "Efficient C++ way to shift a cv::Mat with OpenCV", "body": "<p>What is an efficient way to \"shift\" an OpenCV <code>cv::Mat</code>?</p>\n\n<p>With shift I mean that if I have a row like this</p>\n\n<pre><code>0, 1, 2, 3, 4, 5, 6, 7, 8, 9\n</code></pre>\n\n<p>and I shift it by 3 positions, I will get a row like this</p>\n\n<pre><code>3, 4, 5, 6, 7, 8, 9, 0, 1, 2\n</code></pre>\n\n<p>Now I am using this function:</p>\n\n<pre><code>void shift( const cv::Mat&amp; in, cv::Mat&amp; out, int shift )\n{\n   if ( shift &lt; 0 || shift &gt; in.cols ) return;\n\n   if ( shift == 0 || shift==in.cols ) {\n      out = in.clone();\n   } else {\n      cv::hconcat(in(cv::Rect(shift,0,in.cols-shift,in.rows)),in(cv::Rect(0,0,shift,in.rows)),out);\n   }\n}\n</code></pre>\n\n<p>but I am looking for a more efficient way.</p>\n"}, {"tags": ["c++", "windows", "command-prompt", "netsh", "runas"], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1423075839, "creation_date": 1423075839, "answer_id": 28329100, "question_id": 28328666, "link": "https://stackoverflow.com/questions/28328666/command-prompt-runas-useradmin-user-command-not-executing-properly/28329100#28329100", "title": "Command prompt &quot;runas user:&lt;admin-user&gt; &lt;command&gt;&quot; not executing properly", "body": "<p>Welcome to the world of windows administrative scripts ! When using <code>runas</code> you only ask windows to change user, but you cannot ask for elevated privileges.</p>\n\n<p>The only way I've ever found for that is to use a shortlink. Under the file explorer, you create a shortlink to a <code>.bat</code> or better <code>.cmd</code> file. Then you go to the properties of the shortlink, tab <code>shortlink</code>, there should be an <code>Advanced</code> button where you can check <code>Run as administrator</code>.</p>\n\n<p>Then you can start all that from a command prompt or even from another batch file with :</p>\n\n<pre><code>link_name.lnk\n</code></pre>\n\n<p>Beware, real name may not be what I wrote above : I only have a french system on which the keywords are <code>Propri\u00e9t\u00e9s</code>, <code>Raccourci</code>, <code>Avanc\u00e9 ...</code> and <code>Ex\u00e9cuter en tant qu'administrateur</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 4529828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e6220281a420766027c1ea74fd7658?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Horn", "link": "https://stackoverflow.com/users/4529828/chris-horn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 28329100, "answer_count": 1, "score": 0, "last_activity_date": 1423075839, "creation_date": 1423074376, "question_id": 28328666, "link": "https://stackoverflow.com/questions/28328666/command-prompt-runas-useradmin-user-command-not-executing-properly", "title": "Command prompt &quot;runas user:&lt;admin-user&gt; &lt;command&gt;&quot; not executing properly", "body": "<p>I would like to be able to call netsh from my C++ program.  I have been trying to use system() to accomplish this.  I am not aware of any options for system() that would give the resulting command prompt admin privileges, so I have been attempting to use the runas command.  I have been testing the command in a basic command prompt:</p>\n\n<pre><code>runas /user:&lt;admin-user&gt; \"netsh int ip set address \\\"Local Area Connection\\\" static &lt;IP address&gt;\"\n</code></pre>\n\n<p>While the netsh command itself works perfectly in a command prompt that has been run as administrator, the runas version of the command does not seem to work from a normal command prompt.  Any suggestions?</p>\n"}, {"tags": ["c++", "qt", "screenshot"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 3081843, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c56ecc2e17201e43b1c27bcd1933ea42?s=128&d=identicon&r=PG&f=1", "display_name": "Terrordrone", "link": "https://stackoverflow.com/users/3081843/terrordrone"}, "is_accepted": false, "score": 2, "last_activity_date": 1423215105, "creation_date": 1423215105, "answer_id": 28362551, "question_id": 28328653, "link": "https://stackoverflow.com/questions/28328653/taking-screenshot-of-multiple-screens-with-qdesktopwidget-in-qt/28362551#28362551", "title": "taking screenshot of multiple screens with QDesktopWidget in Qt", "body": "<p>I did not intend to use this, because it is obsolete, but I managed to do what I want only in this way:</p>\n\n<pre><code>QDesktopWidget* dw = QApplication::desktop()    \nQPixmap pixmap = QPixmap::grabWindow( dw-&gt;winId(), 0, 0, dw-&gt;width(), dw-&gt;height() );\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3081843, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c56ecc2e17201e43b1c27bcd1933ea42?s=128&d=identicon&r=PG&f=1", "display_name": "Terrordrone", "link": "https://stackoverflow.com/users/3081843/terrordrone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423215105, "creation_date": 1423074338, "question_id": 28328653, "link": "https://stackoverflow.com/questions/28328653/taking-screenshot-of-multiple-screens-with-qdesktopwidget-in-qt", "title": "taking screenshot of multiple screens with QDesktopWidget in Qt", "body": "<p>I'm using Qt-5.2 and Win7.</p>\n\n<p>The application uses two monitors and I would like to take a screenshot that contains both screens.\nQGuiApplication::screens() gives back the list of the two QScreen objects, and when I took screenshot of the primary screen, then it was OK. But now I need a screenshot of both, so QDesktopWidget seemed to be a good choice. The QDesktopWidget object is a virtual one, so it handles the two screens in a virtual desktop.</p>\n\n<p>When I use this, the the pixmap is properly generated.</p>\n\n<pre><code>QPixmap pm = some_widget-&gt;grab();\n</code></pre>\n\n<p>But when I try this with the desktop widget, I get only a grey image.</p>\n\n<pre><code>QPixmap pm = QApplication::desktop()-&gt;grab();\n</code></pre>\n\n<p>Any idea? Thanks!</p>\n"}, {"tags": ["c++", "file", "text", "end-of-line"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423074278, "post_id": 28328605, "comment_id": 45004800, "body": "<code>fseek()</code> and <code>ftell()</code> will help you"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1423074407, "post_id": 28328605, "comment_id": 45004876, "body": "Store the lines in a file and update them from there. Then write them all back to the file."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4528655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a62dc449f3617f70ddb95d021db2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Firzan Armani", "link": "https://stackoverflow.com/users/4528655/firzan-armani"}, "edited": false, "score": 0, "creation_date": 1423074712, "post_id": 28328682, "comment_id": 45005036, "body": "Could you direct me to an example? Thanks!"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 1, "user_id": 4528655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a62dc449f3617f70ddb95d021db2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Firzan Armani", "link": "https://stackoverflow.com/users/4528655/firzan-armani"}, "edited": false, "score": 0, "creation_date": 1423074785, "post_id": 28328682, "comment_id": 45005078, "body": "@FirzanArmani: You&#39;ve provided very few details. I&#39;ve raised the type of issues that need to be considered (files size, file format, etc.). You&#39;ve responded but I still don&#39;t have any additional information about your requirements. It would be more productive for you to think about it and then ask more specific questions about where you get stuck."}, {"owner": {"reputation": 1, "user_id": 4528655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a62dc449f3617f70ddb95d021db2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Firzan Armani", "link": "https://stackoverflow.com/users/4528655/firzan-armani"}, "edited": false, "score": 0, "creation_date": 1423076192, "post_id": 28328682, "comment_id": 45005799, "body": "@Johnathan Wood Ahh sorry about that, I just started learning C++ recently in school and this is for an idea I had. I presume the .txt file wouldn&#39;t be that big as it is just a small program to demonstrate its functionality. I&#39;d like to know about the approach of loading the txt file into memory, modifying and then overwriting the txt file, especially since this is beyond what I&#39;ve learned so far. What should I search up on to look up on this?"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 1, "user_id": 4528655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a62dc449f3617f70ddb95d021db2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Firzan Armani", "link": "https://stackoverflow.com/users/4528655/firzan-armani"}, "edited": false, "score": 0, "creation_date": 1423080300, "post_id": 28328682, "comment_id": 45007979, "body": "@FirzanArmani: There are a few different class of routines to use. I&#39;m old school and might just use <code>fopen()</code> to open the file, <code>fgets()</code> to read each line of the file. You could then store or scan this data, modifying any data as needed, and then use <code>fopen()</code> to create a new file, an <code>fputs()</code> to write each line of the new file."}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 2, "last_activity_date": 1423074419, "creation_date": 1423074419, "answer_id": 28328682, "question_id": 28328605, "link": "https://stackoverflow.com/questions/28328605/c-text-file-writing-to-the-end-of-a-specific-line/28328682#28328682", "title": "C++ Text File: Writing to the end of a specific line", "body": "<p>If I understand the question, this is not possible. The problem is that if you make one line longer, it would overwrite the next line. You seem to be expecting the following lines to shift down to make room but that's not how it works.</p>\n\n<p>Unless your file is huge, the best approach is to load the file into memory, modify the data in memory, and then create a new file to save the results. (You can save to the same file if needed.)</p>\n\n<p>Other algorithms involve using blocks of a fixed size, having a  linked list in your file, but it sounds like you want you file to be normal text and so those likely wouldn't work.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1423075237, "creation_date": 1423075237, "answer_id": 28328920, "question_id": 28328605, "link": "https://stackoverflow.com/questions/28328605/c-text-file-writing-to-the-end-of-a-specific-line/28328920#28328920", "title": "C++ Text File: Writing to the end of a specific line", "body": "<p>You should never try to edit a text file <em>in place</em>. The most common way is to write the edited file in a temporary location, and at the end rename it to the old name (after removing the original file).</p>\n\n<p>The other way is (provided the file is small enough) to load everything in memory and to rewrite the file from the beginning. But never do that on sensitive files because if your program (or your computer or electric power) crashes in the middle, you file will be definitively lost.</p>\n"}], "owner": {"reputation": 1, "user_id": 4528655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a62dc449f3617f70ddb95d021db2e7?s=128&d=identicon&r=PG&f=1", "display_name": "Firzan Armani", "link": "https://stackoverflow.com/users/4528655/firzan-armani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423075237, "creation_date": 1423074191, "last_edit_date": 1423074287, "question_id": 28328605, "link": "https://stackoverflow.com/questions/28328605/c-text-file-writing-to-the-end-of-a-specific-line", "title": "C++ Text File: Writing to the end of a specific line", "body": "<p>I'm trying to create a program where I can write a string to the end of a certain line in a text file.</p>\n\n<p>For example, this is the text file with just a bunch of random numbers:</p>\n\n<pre><code>12 23\n53 23\n</code></pre>\n\n<p>Now what if I had a program that adds another two-digit number to the end of the first line (or any specified line), keeping in mind that the line will keep expanding if I kept running the program over again.</p>\n\n<p>So after running the program, the text file would look something like this:</p>\n\n<pre><code>12 23 34\n53 23\n</code></pre>\n\n<p>What are some ways to solve this?</p>\n"}, {"tags": ["c++", "templates", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 4, "creation_date": 1423074217, "post_id": 28328554, "comment_id": 45004764, "body": "Both constructors give an error for me, and it&#39;s because you&#39;re trying to copy a <code>std::unique_ptr</code>, which is impossible. You have to either move from it or bind it to a reference."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1423074309, "post_id": 28328554, "comment_id": 45004820, "body": "You&#39;ll need to use <code>auto c = std::move(children);</code> in both places. And we can&#39;t tell you why it compiles in once place and not the other because you haven&#39;t provided an <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE</a>."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1423074368, "post_id": 28328554, "comment_id": 45004848, "body": "@Praetorian: How is this not a SSCCE? It&#39;s short, it&#39;s compilable.  Sadly it&#39;s missing the correct <code>#include &lt;...&gt;</code> lines, but this is <b>far</b> more than we normally get."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423074719, "post_id": 28328554, "comment_id": 45005042, "body": "g++ 4.8..2 shows an error in the default constructor, too"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423075614, "post_id": 28328554, "comment_id": 45005504, "body": "@Nick: The problem is that the code you provided doesn&#39;t give the errors you describe in any compiler I can find.  Not clang, not GCC, and not MSVC even.  The second C in SSCCE stands for &quot;Correct&quot; and one thing that means is &quot;the example... causes the exact error message about which needs solving.&quot; <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>  Without this, we&#39;ll end up solving the code here with a fix that doesn&#39;t help you at all."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1423074306, "creation_date": 1423074306, "answer_id": 28328641, "question_id": 28328554, "link": "https://stackoverflow.com/questions/28328554/unable-to-access-private-member-template-and-stdunique-ptr/28328641#28328641", "title": "Unable to access private member - template and std::unique_ptr", "body": "<p>You have:</p>\n\n<pre><code>auto c = children;\n</code></pre>\n\n<p>Where:</p>\n\n<pre><code>std::array&lt;std::unique_ptr&lt;T&gt;, N&gt; children;            \n</code></pre>\n\n<p>That would require copying <code>unique_ptr</code>s, and <code>unique_ptr</code> is not copyable. You can take a reference to <code>children</code> though:</p>\n\n<pre><code>auto&amp; c = children; // OK \n</code></pre>\n"}], "owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 1, "accepted_answer_id": 28328641, "answer_count": 1, "score": 3, "last_activity_date": 1423074891, "creation_date": 1423073980, "last_edit_date": 1423074891, "question_id": 28328554, "link": "https://stackoverflow.com/questions/28328554/unable-to-access-private-member-template-and-stdunique-ptr", "title": "Unable to access private member - template and std::unique_ptr", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;memory&gt;\n\ntemplate&lt;typename T, size_t Level&gt;\nclass Foo\n{\n    friend class Foo&lt;T, Level + 1&gt;;\n    typedef std::unique_ptr&lt;T&gt; ElmPtr;\n    typedef std::unique_ptr&lt;Foo&lt;ElmPtr, Level - 1&gt;&gt; NodePtr;        \n\n    public:\n    Foo() {\n        // no errors\n        auto c = children;\n    }\n\n    Foo(int n) {\n        // !!! compiler error !!!\n        auto c = children;\n    }\n\n    std::array&lt;NodePtr, 4&gt; children;            \n};\n\ntemplate&lt;typename T&gt;\nclass Foo&lt;T, 0&gt;\n{\n    friend class Foo&lt;T, 1&gt;;\n\n    public:\n    Foo() {}\n};\n\nint main()\n{\n    Foo&lt;int, 1&gt; foo1;\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>error C2248: 'std::unique_ptr&lt;_Ty>::unique_ptr' : cannot access\n  private member declared in class 'std::unique_ptr&lt;_Ty>'</p>\n</blockquote>\n\n<p>Why? How can I fix this problem?</p>\n"}, {"tags": ["c++", "signal-processing"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1423074177, "post_id": 28328536, "comment_id": 45004739, "body": "This seems to be a math question more than a programming one."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1423074441, "post_id": 28328536, "comment_id": 45004893, "body": "I know next to nothing about signal processing, but can&#39;t you do it by generating two waves, and adding (or subtracting) them? See e.g. <a href=\"http://www.doctronics.co.uk/images/sig_18.gif\" rel=\"nofollow noreferrer\">this image</a> (on how to generate square wave, but could be used to generate any kind of shape I guess)."}, {"owner": {"reputation": 10528, "user_id": 15852, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/be9efe0d1a8a6a184b5ccbe667883215?s=128&d=identicon&r=PG", "display_name": "Kieveli", "link": "https://stackoverflow.com/users/15852/kieveli"}, "edited": false, "score": 3, "creation_date": 1423075068, "post_id": 28328536, "comment_id": 45005220, "body": "I&#39;ve done a little signal processing, and I don&#39;t know how harmonics (sounds at different frequencies) would consistently affect your amplitude.  Different frequencies would be additive and subtractive at different points."}, {"owner": {"reputation": 10528, "user_id": 15852, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/be9efe0d1a8a6a184b5ccbe667883215?s=128&d=identicon&r=PG", "display_name": "Kieveli", "link": "https://stackoverflow.com/users/15852/kieveli"}, "edited": false, "score": 0, "creation_date": 1423076099, "post_id": 28328536, "comment_id": 45005746, "body": "I made an image of a 2f harmonic, and show how the amplitude gets bigger, and smaller at the same time: <a href=\"http://i.imgur.com/Sc89xMo.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/Sc89xMo.jpg</a>"}, {"owner": {"reputation": 10528, "user_id": 15852, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/be9efe0d1a8a6a184b5ccbe667883215?s=128&d=identicon&r=PG", "display_name": "Kieveli", "link": "https://stackoverflow.com/users/15852/kieveli"}, "edited": false, "score": 1, "creation_date": 1423076393, "post_id": 28328536, "comment_id": 45005926, "body": "Now.. if you and two sounds at the same frequency with an inverted sync... the second inverted sound being a smaller amplitude, you would effectively get a reduced amplitude... but in code - why not just make your m_amplitude smaller?"}, {"owner": {"reputation": 123, "user_id": 2280874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/780f99c01af92cbe685b97493325791a?s=128&d=identicon&r=PG", "display_name": "ratman2050", "link": "https://stackoverflow.com/users/2280874/ratman2050"}, "edited": false, "score": 0, "creation_date": 1423088907, "post_id": 28328536, "comment_id": 45012440, "body": "Yes, you were right, it does have to do with the frequency."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423079505, "post_id": 28329924, "comment_id": 45007555, "body": "Don&#39;t the trig functions start to lose accuracy as you get further from 2*pi? You might find a phase error creeping in as time progresses."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423086688, "post_id": 28329924, "comment_id": 45011383, "body": "True. At around sin(2^55) you can&#39;t have any accuracy at all. I suspect this isn&#39;t a major problem if you&#39;re still struggling with basic trig. If I would need to come up with a method to fix this, I&#39;d probably go hardcore math : <code>sin(x+dx)=sin x cos dx + cos x sin dx;   cos(x+dx)=cos x cos dx - sin x sin dx</code>. You can incrementally calculate <code>sin(x+dx)</code> by keeping track of <code>sin(x)</code> as well as <code>cos(x)</code>. You still have some rounding errors creep in, so you may need to normalize to <code>sin(x)^2 + cos(x)^2 = 1</code>. But you just need an accurate <code>sin(dx)</code> here, which typically is <i>very</i> accurate."}, {"owner": {"reputation": 123, "user_id": 2280874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/780f99c01af92cbe685b97493325791a?s=128&d=identicon&r=PG", "display_name": "ratman2050", "link": "https://stackoverflow.com/users/2280874/ratman2050"}, "edited": false, "score": 0, "creation_date": 1423090086, "post_id": 28329924, "comment_id": 45012978, "body": "Yes, I think you are correct. Any reason why you used 4 and 6?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 123, "user_id": 2280874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/780f99c01af92cbe685b97493325791a?s=128&d=identicon&r=PG", "display_name": "ratman2050", "link": "https://stackoverflow.com/users/2280874/ratman2050"}, "edited": false, "score": 0, "creation_date": 1423095442, "post_id": 28329924, "comment_id": 45014818, "body": "@ratman2050: The first harmonic has the double frequency, so <code>2 * (2 * M_PI * m_freq1)</code> = <code>4 * ...</code>, and the second has <code>3 * ( 2 * M_PI * ...</code>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1423078634, "creation_date": 1423078634, "answer_id": 28329924, "question_id": 28328536, "link": "https://stackoverflow.com/questions/28328536/how-to-add-harmonics-to-sine-waves/28329924#28329924", "title": "How to Add Harmonics to Sine Waves", "body": "<p>Harmonics are unrelated in <em>amplitude</em>. Instead, a harmonic is a wave that has <code>N=2,3,4...</code>  times the <em>frequency</em>. Mixing the different waves is just a matter of adding the components.</p>\n\n<p>Thus, for two harmonics the code is:</p>\n\n<pre><code>audio[0] = short(m_amplitude[0] * sin(time * 2 * M_PI * m_freq1))\n         + short(m_amplitude[1] * sin(time * 4 * M_PI * m_freq1))\n         + short(m_amplitude[2] * sin(time * 6 * M_PI * m_freq1));\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 2280874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/780f99c01af92cbe685b97493325791a?s=128&d=identicon&r=PG", "display_name": "ratman2050", "link": "https://stackoverflow.com/users/2280874/ratman2050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 0, "accepted_answer_id": 28329924, "answer_count": 1, "score": 0, "last_activity_date": 1423078634, "creation_date": 1423073918, "last_edit_date": 1423075207, "question_id": 28328536, "link": "https://stackoverflow.com/questions/28328536/how-to-add-harmonics-to-sine-waves", "title": "How to Add Harmonics to Sine Waves", "body": "<p>Without posting the entire header and cpp files I have some code here that generates sine waves:</p>\n\n<pre><code>void CAudioGenerate::GenereateSinewave() \n{\n   if(!GenerateBegin())\n      return;\n\n   short audio[2];\n\n   for(double time=0.;  time &lt; m_duration;  time += 1. / m_sampleRate)\n   {                 \n      audio[0] = short(m_amplitude * sin(time * 2 * M_PI * m_freq1));\n      audio[1] = short(m_amplitude * sin(time * 2 * M_PI * m_freq1));\n\n      GenerateWriteFrame(audio);\n\n// Progress\n      if(!GenerateProgress(time / m_duration))\n         break;\n   }\n\n\n   // Close generator\n   GenerateEnd();\n}\n</code></pre>\n\n<p>I want to add some harmonics that reduce the amplitude by 1/2, 1/3, and 1/4. I think that I have to change m_amplitude but I'm not entirely sure which is the correct way. </p>\n\n<p>I thought about adding <code>m_amplitude = m_amplitude*(1/time)</code> but that didn't work. </p>\n"}, {"tags": ["c++", "visual-studio-2010", "debugging", "pdb-files"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423074796, "post_id": 28328171, "comment_id": 45005084, "body": "Why don&#39;t you just fix the real problem and change the project&#39;s OutputDirectory setting so it gets built to the directory you want?  No more copying, no need for /pdbaltpath, no need to try to tell the debugger about it."}, {"owner": {"reputation": 355, "user_id": 3734978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d47293bcb6ec0d5aa9016d084761e08?s=128&d=identicon&r=PG&f=1", "display_name": "prydain", "link": "https://stackoverflow.com/users/3734978/prydain"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423076992, "post_id": 28328171, "comment_id": 45006213, "body": "That&#39;s not the real problem. The DLL gets recompiled at runtime with msbuild which overrides the one in $(OuputDir) which is only possible if the running porgramm has a copy loaded."}, {"owner": {"reputation": 17943, "user_id": 396383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9WwJr.jpg?s=128&g=1", "display_name": "Thomson", "link": "https://stackoverflow.com/users/396383/thomson"}, "edited": false, "score": 0, "creation_date": 1429602649, "post_id": 28328171, "comment_id": 47663280, "body": "Is &#39;MyProject/Debug&#39; the working directory for debugger? The debugger may start to resolve symbols from its working directory."}], "owner": {"reputation": 355, "user_id": 3734978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7d47293bcb6ec0d5aa9016d084761e08?s=128&d=identicon&r=PG&f=1", "display_name": "prydain", "link": "https://stackoverflow.com/users/3734978/prydain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423072719, "creation_date": 1423072719, "question_id": 28328171, "link": "https://stackoverflow.com/questions/28328171/pdbaltpath-ignored-by-visual-studio-2010", "title": "/PDBALTPATH ignored by Visual Studio 2010", "body": "<p>I am compiling a DLL project with the additional option /PDBALTPATH:%_PDB% which should only emit the file name for the pdb file without path information. Looking at the DLL with a hex editor only \"MyDLL.pdb\" is emitted.</p>\n\n<p>In code I copy the DLL and pdb from MyProject/Debug/MyDLL.pdb to MyProject/Debug/Temp/MyDLL.pdb and use LoadLibrary to load it. The problem is the debugger uses the MyProject/Debug/MyDLL.pdb file instead of the one in the Temp dir. If I delete the pdb file in the Debug dir the debugger uses the one in the Temp dir which is what I want.</p>\n\n<p>What can I do to get the desired behavior without deleting the pdb in /Debug/ which causes the linker to do a full link every build.</p>\n"}, {"tags": ["javascript", "html", "c++", "qt", "dom"], "comments": [{"owner": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 0, "creation_date": 1423072068, "post_id": 28327892, "comment_id": 45003552, "body": "What have you tried to achieve what you&#39;re trying to do? Gotta show what you&#39;ve tried to get an answer. We&#39;re here to help you debug code, not write it for you."}, {"owner": {"reputation": 1, "user_id": 4529751, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382281505415955/picture?type=large", "display_name": "Tim Blackbeard", "link": "https://stackoverflow.com/users/4529751/tim-blackbeard"}, "reply_to_user": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 1, "creation_date": 1423072772, "post_id": 28327892, "comment_id": 45003983, "body": "I want programmatically execute search. Where did I ask your to write code for me? I asked how I can fill that field with first element of drop-down list, because I can&#39;t find way to access that element through JS, because it&#39;s load dynamically and there is no such element in source code."}, {"owner": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 1, "creation_date": 1423072838, "post_id": 28327892, "comment_id": 45004022, "body": "Yeah, you need to provide code that you have written yourself to show what you&#39;ve tried to achieve your goal. Again, we&#39;re not here to write code for you or to set you on the right path. You have to show what you&#39;ve attempted to achieve your result, and we can help you debug your code from there."}, {"owner": {"reputation": 1, "user_id": 4529751, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382281505415955/picture?type=large", "display_name": "Tim Blackbeard", "link": "https://stackoverflow.com/users/4529751/tim-blackbeard"}, "reply_to_user": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 0, "creation_date": 1423073282, "post_id": 28327892, "comment_id": 45004249, "body": "I added the code, but as I said I work from C++ Qt."}, {"owner": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 0, "creation_date": 1423073456, "post_id": 28327892, "comment_id": 45004338, "body": "In response to your edited comment, by posting a question without code, it generally comes off as the person is asking or people to write code for them to achieve their goal. Further, you&#39;re citing an issue with your code, but how can we help you troubleshoot your code if we can&#39;t see it? Providing a sample of your code, specifically the part that has the problem, is basically rule number one here, otherwise it makes it look like you&#39;ve made no effort to achieve your goal and simply want people to do your work for you."}, {"owner": {"reputation": 1, "user_id": 4529751, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382281505415955/picture?type=large", "display_name": "Tim Blackbeard", "link": "https://stackoverflow.com/users/4529751/tim-blackbeard"}, "reply_to_user": {"reputation": 3837, "user_id": 2199064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDj01.jpg?s=128&g=1", "display_name": "MattD", "link": "https://stackoverflow.com/users/2199064/mattd"}, "edited": false, "score": 0, "creation_date": 1423073612, "post_id": 28327892, "comment_id": 45004429, "body": "I understood my mistake and give now full information :)"}], "owner": {"reputation": 1, "user_id": 4529751, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382281505415955/picture?type=large", "display_name": "Tim Blackbeard", "link": "https://stackoverflow.com/users/4529751/tim-blackbeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423073361, "creation_date": 1423071794, "last_edit_date": 1423073361, "question_id": 28327892, "link": "https://stackoverflow.com/questions/28327892/javascript-access-click-drop-down-element", "title": "Javascript access click drop-down element", "body": "<p>Note: I'm very low in JS and DOM and I work with it through C++ Qt.</p>\n\n<p>I need to click programmatically first drop-down element in Facebook search:\n<a href=\"http://pastexen.com/i/0XnZWs4QNx.png\" rel=\"nofollow\">http://pastexen.com/i/0XnZWs4QNx.png</a>\nbut seems that elements loads dynamically and I can't access them with JS and evaluate click. What can I do? How can I access that element? Help me, I have no more ideas.</p>\n\n<p>P.S. And maybe you know better ways to get Facebook search results with that five options?</p>\n\n<pre><code>_browser-&gt;load(FB_SIMPLE_SEARCH);\nwaitUntilTimeOutOrLoaded();\nQWebElement elem_doc = _browser-&gt;page()-&gt;mainFrame()-&gt;documentElement();\nQWebElement elem_univer = elem_doc.findFirst(\"input[class=\\\"inputtext textInput\\\"]\");\nelem_univer.setAttribute(\"value\", _ui-&gt;lineEditUniver-&gt;text());\n_dont_stop = true;\nwaitUntilTimeOutOrLoaded();\nelem_univer.setFocus();\n_dont_stop = true;\nwaitUntilTimeOutOrLoaded();\nqDebug() &lt;&lt; _browser-&gt;page()-&gt;mainFrame()-&gt;documentElement().findFirst(\"li[class=page]\").isNull();\nqDebug() &lt;&lt; _browser-&gt;page()-&gt;mainFrame()-&gt;findFirstElement(\"li[class=page]\").isNull();\nqDebug() &lt;&lt; _browser-&gt;page()-&gt;mainFrame()-&gt;documentElement().findFirst(\"li[class=\\\"page selected\\\"]\").isNull();\nqDebug() &lt;&lt; _browser-&gt;page()-&gt;mainFrame()-&gt;findFirstElement(\"li[class=\\\"page selected\\\"]\").isNull();\n</code></pre>\n\n<p>All four is NULL.\nWhen in _browser all ok and element is visible:\n<a href=\"http://pastexen.com/i/bbb8zgEKZF.png\" rel=\"nofollow\">http://pastexen.com/i/bbb8zgEKZF.png</a></p>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423072131, "post_id": 28327691, "comment_id": 45003589, "body": "Explain this in more defails - I have completely no idea what you&#39;re trying to achieve. The first thought is that you are probably trying to &quot;overload&quot; a macro, that is, you want that it do different things depending on what name you pass as &#39;name&#39; to &#39;PROTOTYPENAMED&#39; macro. How would you like to use the&quot;second version&quot;of that macro and what result would you like to achieve?"}, {"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "reply_to_user": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423073794, "post_id": 28327691, "comment_id": 45004528, "body": "@Ethouris read an question again, macro overloading is unexpected behaviour. <i>I might want to write</i> <code>#define PROTOTYPENAMED(ANOTHERFUNCTION) WhatsThat()</code> <i>to generate</i> <code>#define ANOTHERFUNCTION_ABC WhatsThat()</code>"}, {"owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "edited": false, "score": 0, "creation_date": 1423159091, "post_id": 28327691, "comment_id": 45045384, "body": "So, yes, as Basile said, it&#39;s not possible to achieve in C/C++ preprocessor. This better be some completely generator-based thing. I personally use Tcl for that, not only because I like it, but that it can simply contain the whole text in {...} without any special &quot;escapes&quot;. Then you can either contain $variables inside or have some unique-impossible-in-normal-program statmenents that will be next replaced by simple search-replace (&quot;string map&quot; command in Tcl) - such as @KEY@ used in *.in files."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 4, "last_activity_date": 1423071606, "last_edit_date": 1423071606, "creation_date": 1423071239, "answer_id": 28327732, "question_id": 28327691, "link": "https://stackoverflow.com/questions/28327691/generate-a-name-for-macro-with-another-macro-c-preprocessor/28327732#28327732", "title": "generate a name for macro with another macro (c preprocessor)", "body": "<p>Not doable with the standard C/C++ preprocessor. However, you might feed your compiler using some C++ or C source generator, like e.g. the <a href=\"http://en.nothingisreal.com/wiki/GPP\" rel=\"nofollow\">GPP</a> or the <a href=\"https://www.gnu.org/software/m4/\" rel=\"nofollow\">GNU m4</a> preprocessors, or some script -e.g. in Python, <code>awk</code>, <code>guile</code>, ...- (or program) of yours.</p>\n\n<p><sup>For example, <a href=\"https://en.wikipedia.org/wiki/Yacc\" rel=\"nofollow\"><code>yacc</code></a> or <code>bison</code> and <a href=\"http://www.antlr.org/\" rel=\"nofollow\">ANTLR</a> generate C++ code. And <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> is compiled into C++ code.</sup></p>\n\n<p>Of course, you need to configure your builder accordingly, e.g. add some more <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow\">GNU make</a> rules.</p>\n"}], "owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2611, "favorite_count": 0, "closed_date": 1423073192, "accepted_answer_id": 28327732, "answer_count": 1, "score": 1, "last_activity_date": 1423076671, "creation_date": 1423071094, "last_edit_date": 1495541571, "question_id": 28327691, "link": "https://stackoverflow.com/questions/28327691/generate-a-name-for-macro-with-another-macro-c-preprocessor", "closed_reason": "Duplicate", "title": "generate a name for macro with another macro (c preprocessor)", "body": "<p>I can generate name for a function using an macro which is taken from <a href=\"https://stackoverflow.com/questions/1253934/c-pre-processor-defining-for-generated-function-names\">C pre-processor defining for generated function names</a> .</p>\n\n<pre><code>#define POSTFIX _ABC //_ABC should be mentioned only there\n#define PROTOTYPENAME(symbol) symbol ## POSTFIX\n#define PROTOTYPENAMED(sym) PROTOTYPENAME(sym)\n\nint PROTOTYPENAMED(Function)(int a, int b, int c);\n</code></pre>\n\n<p>Above would result as</p>\n\n<pre><code>int Function_ABC(int a, int b, int c);\n</code></pre>\n\n<p>If I want to generate equivalent for <code>#define ANOTHERFUNCTION_ABC WhatsThat()</code> I might want to write</p>\n\n<pre><code>#define PROTOTYPENAMED(ANOTHERFUNCTION) WhatsThat()\n</code></pre>\n\n<p>but this will redefine a <code>PROTOTYPENAMED</code> macro. Is there a way to do it correctly without writing <code>_ABC</code> everywhere?</p>\n\n<p>PS. I am using Visual Studio 2013 and code should work in C and C++.</p>\n\n<p>Edit:\nalk: this question contains more useful answer how to do this using another tools. You should not mark this question as dublicate.</p>\n\n<p>Edit 2:\nI was thinking about alternatives that do not need an external tools. Maybe it is not needed to declare it as macro? If we assume <code>WhatsThat()</code> is returning <code>int</code>, it is not forbidden to write <code>int PROTOTYPENAMED(ANOTHERFUNCTION) = WhatsThat();</code>.</p>\n"}, {"tags": ["c++", "linux", "networking", "service"], "comments": [{"owner": {"reputation": 253206, "user_id": 12960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53d539b59c19087182f0b1c53bb52de?s=128&d=identicon&r=PG", "display_name": "Brian Agnew", "link": "https://stackoverflow.com/users/12960/brian-agnew"}, "edited": false, "score": 2, "creation_date": 1423070565, "post_id": 28327501, "comment_id": 45002651, "body": "What&#39;s the specific question ?"}], "answers": [{"tags": [], "owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "is_accepted": true, "score": 1, "last_activity_date": 1423070901, "creation_date": 1423070901, "answer_id": 28327640, "question_id": 28327501, "link": "https://stackoverflow.com/questions/28327501/linux-handling-a-signal-on-a-specific-thread-in-a-multi-threaded-program/28327640#28327640", "title": "Linux handling a signal on a specific thread in a multi-threaded program", "body": "<p>Your question isn't very clear, but I'll take a stab at what I <em>think</em> you're getting at.</p>\n\n<p>Signals are like interrupts, and the routine that catches them are like interrupt service routines (the analogy may or may not be perfect). You'd probably note the fact that the signal happened within the handler, then signal another thread via a synchronization method of some kind (semaphore, for example).</p>\n\n<p>Doing a quick Google search turns up many pages on the subject. <a href=\"http://www.alexonlinux.com/signal-handling-in-linux\" rel=\"nofollow\">Here's one.</a></p>\n"}, {"tags": [], "owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "is_accepted": false, "score": 1, "last_activity_date": 1423072862, "creation_date": 1423072862, "answer_id": 28328219, "question_id": 28327501, "link": "https://stackoverflow.com/questions/28327501/linux-handling-a-signal-on-a-specific-thread-in-a-multi-threaded-program/28328219#28328219", "title": "Linux handling a signal on a specific thread in a multi-threaded program", "body": "<p>... and the question is: how can I catch SIGTERM in the main program, but make the threads \"deaf\" to that signal? <em>I guess</em>.</p>\n\n<p>The <em>pthread_sigmask</em> function can be used to allow/deny particular signals to be/from being delivered to the thread. Not all signals can be blocked this way, but SIGTERM can. To construct the required sigset_t object you can use <em>sigemptyset</em> and <em>sigaddset</em> functions. You can see the manpage or click here: <a href=\"http://cursuri.cs.pub.ro/~apc/2003/resources/pthreads/uguide/users-96.htm\" rel=\"nofollow\">http://cursuri.cs.pub.ro/~apc/2003/resources/pthreads/uguide/users-96.htm</a></p>\n\n<p>Note that this function works on \"current thread\" so it should be called as the first thing that the thread-callback-function does (not \"before running the thread\").</p>\n"}], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28327640, "answer_count": 2, "score": 0, "last_activity_date": 1423072862, "creation_date": 1423070395, "question_id": 28327501, "link": "https://stackoverflow.com/questions/28327501/linux-handling-a-signal-on-a-specific-thread-in-a-multi-threaded-program", "title": "Linux handling a signal on a specific thread in a multi-threaded program", "body": "<p>I have a program that I want to accept and handle incoming TCP connections until it gets a terminate signal. There are additional threads doing data processing that I don't have full control over but am able to cleanly stop/abort if I want the program to exit.</p>\n\n<pre><code>while (true)\n{\n    select(...)?\n    if (got-terminate-signal)\n    {\n        break;\n    }\n    else\n    {\n        ...do stuff with sockets based on select...\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1423070269, "post_id": 28327388, "comment_id": 45002451, "body": "Where is your call to <code>EndPaint</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1423070624, "post_id": 28327388, "comment_id": 45002689, "body": "Also, unless there is something logically wrong with the actual paint code, what you posted is not enough with respect to Windows message processing.  We don&#39;t see if you called <code>DefWindowProc</code> for unprocessed messages, we don&#39;t know where <code>WM_PAINT</code> processing ends, etc.  You make a mistake in processing messages, then all sorts of weird or undesired effects can happen, regardless of how flawless the paint code may look."}, {"owner": {"reputation": 59, "user_id": 4328862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/518009903/picture?type=large", "display_name": "Juan Mar", "link": "https://stackoverflow.com/users/4328862/juan-mar"}, "edited": false, "score": 0, "creation_date": 1423070630, "post_id": 28327388, "comment_id": 45002695, "body": "I Used block because the grid is a symetrical 333 * 333 ... the cxBlock and cyBlock are been used only for activators to change the booleans. would this really be an issue? in testing every &#39;box&#39; in the grid returns what they should to the booleans."}, {"owner": {"reputation": 59, "user_id": 4328862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/518009903/picture?type=large", "display_name": "Juan Mar", "link": "https://stackoverflow.com/users/4328862/juan-mar"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1423070876, "post_id": 28327388, "comment_id": 45002863, "body": "@PaulMcKenzie added the entire wndprc"}, {"owner": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 0, "creation_date": 1423071549, "post_id": 28327388, "comment_id": 45003249, "body": "I always find it useful to create some template RAII wrappers for CloseHandle, EndPaint etc.."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1423079113, "post_id": 28327388, "comment_id": 45007340, "body": "Wait, did you abandon the problem of centering the grid last time?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1423085785, "post_id": 28327388, "comment_id": 45010908, "body": "Can you post a screenshot showing what you see? Your code won&#39;t compile as is and it&#39;s hard to work out what your actual problem is from your description."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1423103242, "post_id": 28327388, "comment_id": 45016652, "body": "Where is the code that triggers a repaint when you toggle the value of a cell?"}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423194525, "post_id": 28358204, "comment_id": 45059683, "body": "Don&#39;t forget a brush too."}], "tags": [], "owner": {"reputation": 32374, "user_id": 4, "user_type": "moderator", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/C5gBG.jpg?s=128&g=1", "display_name": "Joel Spolsky", "link": "https://stackoverflow.com/users/4/joel-spolsky"}, "is_accepted": true, "score": 2, "last_activity_date": 1423194077, "creation_date": 1423194077, "answer_id": 28358204, "question_id": 28327388, "link": "https://stackoverflow.com/questions/28327388/tic-tac-toe-winapi-painting/28358204#28358204", "title": "Tic Tac Toe: Winapi painting", "body": "<p>You need to call SelectObject to select a suitable pen into the DC or else LineTo will randomly use whatever pen was leftover there (which might be invisible or something).</p>\n"}], "owner": {"reputation": 59, "user_id": 4328862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/518009903/picture?type=large", "display_name": "Juan Mar", "link": "https://stackoverflow.com/users/4328862/juan-mar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 28358204, "answer_count": 1, "score": 0, "last_activity_date": 1430846652, "creation_date": 1423070022, "last_edit_date": 1430846652, "question_id": 28327388, "link": "https://stackoverflow.com/questions/28327388/tic-tac-toe-winapi-painting", "title": "Tic Tac Toe: Winapi painting", "body": "<p>I am having trouble painting in my client area whenever I turn a bool true, trying to make a Tic Tac Toe, and once I get the initial painting properly I can keep going.</p>\n\n<p>The main problem is that it is not painting the lower rows properly, or they are painted after a 3 or 4 click, At the moment I don't care about circles, just want to know what I am  have wrong.</p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n        static BOOL fState[DIVISIONS][DIVISIONS];\n        bool  XorO = false;\n        static int  cxBlock, cyBlock;`\n\n        HDC         hdc;\n        int         x, y, iPosX , iPosY;\n        PAINTSTRUCT ps;\n        RECT        rect;\n\n        static const int grid = 1000;\n        static const int block = grid / DIVISIONS;\n        static const int width = 1200;\n        static const int height =1200;\n\n        switch (message)\n        {\n        case WM_SIZE:\n\n                cxBlock = LOWORD (lParam) / DIVISIONS ;\n                cyBlock = HIWORD (lParam) / DIVISIONS ;\n\n            return 0;\n\n        case WM_LBUTTONDOWN:\n            x = LOWORD(lParam)/ cxBlock;\n            y = HIWORD(lParam)/cyBlock;\n\n            if (x &lt; DIVISIONS &amp;&amp; y &lt; DIVISIONS)\n            {\n                //Click in the first cuadrant x = 0 and y = 0 , so both false\n                //second x = 1, y = 0\n                //third x 2 , y = 0 and so on.\n                fState[x][y] ^= 1;\n                rect.left = x * block;\n                rect.top = y * block;\n                rect.right = (x + 1) * block;\n                rect.bottom = (y + 1) * block;\n\n                InvalidateRect(hwnd, &amp;rect, FALSE);\n\n            }\n            else\n                MessageBeep(0); \n\n            return 0;\n\n        case WM_PAINT:\n\n            hdc = BeginPaint(hwnd, &amp;ps);\n\n\n            //paint X or ellipses here\n            for (x = 0; x &lt; DIVISIONS; x++)\n                for (y = 0; y &lt; DIVISIONS; y++)\n                {\n\n                    if (fState[x][y] )\n                    {\n                        MoveToEx(hdc, x     * block, y       *  block, NULL);\n                        LineTo(hdc,  (x + 1) * block, (y + 1) *  block);\n                        MoveToEx(hdc, x     * block, (y + 1) *  block, NULL);\n                        LineTo(hdc,  (x + 1) * block, y       *  block);\n                    }\n                }\n\n\n            //main grid\n            for (int i = block; i &lt; grid - 1; i += block) {\n                MoveToEx(hdc, i, 0, NULL); \n                LineTo(hdc, i, grid);\n                MoveToEx(hdc, 0, i, NULL);\n                LineTo(hdc, grid, i);\n\n\n            }\n\n            EndPaint(hwnd, &amp;ps);\n            return 0;\n\n        case WM_DESTROY:\n            PostQuitMessage(0);\n            return 0;\n        }\n        return DefWindowProc(hwnd, message, wParam, lParam);\n    }\n</code></pre>\n\n<p>I even tried to make the painting more direct and primitive by making a single if statement for each scenario but, once the program runs , it does not paint correctly on the second and third line. or if I click space 2,2 (the last one on the grid) it does not paint until i click somewhere else...</p>\n"}, {"tags": ["c++", "regex", "algorithm"], "comments": [{"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1423071094, "post_id": 28327377, "comment_id": 45002980, "body": "No, you would need some algorithm/library to merge those regex together."}, {"owner": {"reputation": 33, "user_id": 4525164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/35f63af6b0c1b249d97a4a681a00564b?s=128&d=identicon&r=PG&f=1", "display_name": "Failed Web Dev", "link": "https://stackoverflow.com/users/4525164/failed-web-dev"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1423071476, "post_id": 28327377, "comment_id": 45003204, "body": "Is there no such thing in the standard library or Boost?"}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423076436, "post_id": 28327377, "comment_id": 45005947, "body": "What do you intend to do in the case that, e.g., placing <code>str_1</code> into a position where <code>regex_1</code> matched creates a match for one of the other regexes that wasn&#39;t there to begin with...? Do you only want to replace matches that were there in the original string, or do you want to replace newly-created matches as well (in which case the order you process them in is significant, and a merged regex is not a likely possibility)?"}], "answers": [{"comments": [{"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1423071954, "post_id": 28327798, "comment_id": 45003485, "body": "Disjunction is an alternative, but depending on the implementation, it is unlikely that you get better than scanning with n regex in the failing case. The advantage here is that you only need to deal with one regex object."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1423073535, "post_id": 28327798, "comment_id": 45004379, "body": "@nhahtdh: depends on how frequent the patterns are in the target. If they are very sparse, the disjunction is probably a win, since the non-matching segments of the target only needs to be scanned once. If you had a good DFA implementation, it would definitely be a win, but you probably don&#39;t."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1423073574, "last_edit_date": 1423073574, "creation_date": 1423071506, "answer_id": 28327798, "question_id": 28327377, "link": "https://stackoverflow.com/questions/28327377/is-there-a-way-to-make-an-arbitrary-number-of-regex-replacements-in-a-single-ite/28327798#28327798", "title": "Is there a way to make an arbitrary number of regex replacements in a single iteration?", "body": "<p>It depends on what result you expect.</p>\n\n<p>If what you are looking for is to find sequential non-overlapping occurrences of any of the <code>N</code> patterns, then the multiple iterator solution is not only inefficient; it is incorrect.</p>\n\n<p>On the other hand, if you wanted to rescan for patterns after replacement, then you could order the scans (as in the example), but it would be only a partial rescan. A precise and efficient solution is possible but not easy with the C++ regex library; a precise and not-so-efficient solution is to repeatedly find and replace the first of the disjunction of the patterns until no pattern can be found.</p>\n\n<p>Either way, you would want a regex which represents the disjunction (set of alternatives) of the candidate patterns, and which lets you identify which pattern matched. If you don't depend heavily on captures, you could do this by creating the disjunct (with string concatenation on the patterns):</p>\n\n<pre><code>(pattern1)|(pattern2)|...|(patternN)\n</code></pre>\n\n<p>And after the match, you only need to determine which capture has a defined value by iterating through the submatches and looking at their <code>matched</code> members. Internal captures are possible, of course, but the numbering of captures makes the construct a bit fragile. It is possible to programmatically determine the number of captures in a regex (see <code>basic_regex::mark_count</code>), so you could create a multipattern search-and-replace object without <em>too</em> much work.</p>\n"}], "owner": {"reputation": 33, "user_id": 4525164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/35f63af6b0c1b249d97a4a681a00564b?s=128&d=identicon&r=PG&f=1", "display_name": "Failed Web Dev", "link": "https://stackoverflow.com/users/4525164/failed-web-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423073574, "creation_date": 1423069993, "last_edit_date": 1423072348, "question_id": 28327377, "link": "https://stackoverflow.com/questions/28327377/is-there-a-way-to-make-an-arbitrary-number-of-regex-replacements-in-a-single-ite", "title": "Is there a way to make an arbitrary number of regex replacements in a single iteration?", "body": "<p>Say I have a string <code>s</code> and want to make N replacements: </p>\n\n<pre><code>[regex_1] --&gt; [str_1]\n\n[regex_2] --&gt; [str_2]\n\n...\n\n[regex_N] --&gt; [str_N]\n</code></pre>\n\n<p>Is there a more efficient way than creating <code>N</code> <code>regex_iterator</code> objects? Because if I did something like </p>\n\n<pre><code>std::vector&lt;std::regex_iterator&gt; reps = { \n   std::regex_iterator(s.begin(), s.end(), [regex_1]), \n   std::regex_iterator(s.begin(), s.end(), [regex_2]), \n   ..., \n   std::regex_iterator(s.begin(), s.end(), [regex_N])};\n</code></pre>\n\n<p>then the <code>N</code> initialization of all those <code>regex_iterator</code> objects will each involve iterating over the characters of <code>s</code>, which is needless repetition. </p>\n"}, {"tags": ["c++", "visual-studio-2012", "macros", "msbuild"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 2878447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/933337e8e39763de579f8a4a25a12f99?s=128&d=identicon&r=PG&f=1", "display_name": "Scorpion", "link": "https://stackoverflow.com/users/2878447/scorpion"}, "edited": false, "score": 0, "creation_date": 1423140112, "post_id": 28339030, "comment_id": 45032761, "body": "somehow it worked when i wrote it like you did! thanks a lot!!"}], "tags": [], "owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "is_accepted": true, "score": 1, "last_activity_date": 1423123715, "creation_date": 1423123715, "answer_id": 28339030, "question_id": 28327273, "link": "https://stackoverflow.com/questions/28327273/using-a-vs-macro-for-setting-preprocessordefinitions/28339030#28339030", "title": "Using a VS Macro for setting PreprocessorDefinitions", "body": "<p>Both setting <code>PreprocessorDefinitions</code> and using the <code>/D</code> option should work fine, but it's hard to tell why they do not for your case. Possibly you are setting the options for a different build configuration than the one you are using, or you have a typo somewhere.</p>\n\n<p>For example: right-click a project in VS, select correct <em>Configuration</em> and <em>Platform</em> then go to <em>Properties->C/C++->Preprocessor</em> and enter </p>\n\n<pre><code>%(PreProcessorDefinitions);$(ProjectName)_DEFINED\n</code></pre>\n\n<p>as the value for <em>Preprocessor Definitions</em></p>\n\n<p>Now if your project is named <em>MyProject</em> then the preprocessor symbol <code>MyProject_DEFINED</code> will be defined. Note the use of <code>%(PreProcessorDefinitions)</code> which is to make sure definitions set earlier in the build process are inherited.\nIf you open the project in a text editor it will look like this (here showing the part for Debug|Win32 builds):</p>\n\n<pre><code>&lt;ItemDefinitionGroup Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;\n  &lt;ClCompile&gt;\n    &lt;PreProcessorDefinitions&gt;%(PreProcessorDefinitions);$(ProjectName)_DEFINED&lt;/PreProcessorDefinitions&gt;\n  &lt;/ClCompile&gt;\n&lt;/ItemDefinitionGroup&gt;\n</code></pre>\n\n<p>If you need the definition for every platform/configuration, copy/paste the above and remove the <code>Condition</code> part.</p>\n"}], "owner": {"reputation": 49, "user_id": 2878447, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/933337e8e39763de579f8a4a25a12f99?s=128&d=identicon&r=PG&f=1", "display_name": "Scorpion", "link": "https://stackoverflow.com/users/2878447/scorpion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3188, "favorite_count": 0, "accepted_answer_id": 28339030, "answer_count": 1, "score": 0, "last_activity_date": 1423123715, "creation_date": 1423069621, "question_id": 28327273, "link": "https://stackoverflow.com/questions/28327273/using-a-vs-macro-for-setting-preprocessordefinitions", "title": "Using a VS Macro for setting PreprocessorDefinitions", "body": "<p>so i want to set proprocessor definitions by using Visual Studio macros like this:</p>\n\n<pre><code>&lt;PreprocessorDefinitions&gt;$(ProjectName)_DEFINE&lt;/PreprocessorDefinitions&gt;\n</code></pre>\n\n<p>so I can use it in a src file like that:</p>\n\n<pre><code>#ifdef MyProjectName_DEFINE\n#define helloWorld\n#endif\n</code></pre>\n\n<p>plz help me. i could not find anything in the web except something with the /D parameter, so i tried: /D$(ProjectName)_EXPORT but it still didnt work :(</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "qt", "qml", "qqmlapplicationengine"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1423086315, "post_id": 28327168, "comment_id": 45011200, "body": "You can manually create/destroy QML components from within QML&#39;s Javascript context: <a href=\"http://doc.qt.io/qt-5/qtqml-javascript-dynamicobjectcreation.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtqml-javascript-dynamicobjectcreation.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080483, "last_edit_date": 1423080483, "creation_date": 1423079590, "answer_id": 28330216, "question_id": 28327168, "link": "https://stackoverflow.com/questions/28327168/qt-qml-how-do-i-switch-to-or-open-another-qml-file-without-restarting-my-ap/28330216#28330216", "title": "Qt/QML: How do I &quot;switch to&quot; or &quot;open&quot; another QML file without restarting my app?", "body": "<p>The most basic solution would be to just use a <code>Loader</code> in your application window. Set it use your <code>main.qml</code> on instantiation, and then when the user selects a book, set the <code>Loader</code>'s source to the book's QML file.</p>\n\n<p>However it would better to load the 'screens' dynamically, then you could use transitioning effects before destroying the previous screen.</p>\n"}], "owner": {"reputation": 18611, "user_id": 195347, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nk1XC.jpg?s=128&g=1", "display_name": "BastiBen", "link": "https://stackoverflow.com/users/195347/bastiben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1018, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423080483, "creation_date": 1423069311, "question_id": 28327168, "link": "https://stackoverflow.com/questions/28327168/qt-qml-how-do-i-switch-to-or-open-another-qml-file-without-restarting-my-ap", "title": "Qt/QML: How do I &quot;switch to&quot; or &quot;open&quot; another QML file without restarting my app?", "body": "<p>I have a little application that loads a QML file from a server and displays some kind of \"book shelf\" to the user.</p>\n\n<p>The user can pick one of the displayed books and C++ will download a ZIP file in the background, unpacks it. The result is a folder for each book on the file system with a \"main.qml\" file which is basically a self-contained version of the book, allowing the user to browse/zoom/etc.</p>\n\n<p>I'm using <code>ApplicationWindow</code> to display the book shelf in its QML file, and now I'm wondering what would be the <em>best</em> approach to \"switch\" to the book and display it in the ApplicationWindow. By <em>best</em> I mean, it would be nice if the book shelf is pretty much \"unloaded\" from memory to free resources for the book display.</p>\n\n<p>How would I do this? </p>\n\n<p>My rough ideas, which don't feel quite \"right\" were:</p>\n\n<ul>\n<li>Use <code>QQmlApplicationEngine::load()</code> to load another URL?</li>\n<li>Add the book's QML component as a topmost child object to the shelf; but this would result in lots of wasted resources.</li>\n<li>...?</li>\n</ul>\n\n<p>Any suggestions are appreciated!</p>\n"}, {"tags": ["c++", "r", "printf", "suppress"], "comments": [{"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1423069363, "post_id": 28327013, "comment_id": 45001867, "body": "Can you should us the C++ code?"}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 2906449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/256dbab35a6daf11922bcb673c2d9089?s=128&d=identicon&r=PG&f=1", "display_name": "chakalakka", "link": "https://stackoverflow.com/users/2906449/chakalakka"}, "edited": false, "score": 0, "creation_date": 1485766879, "post_id": 39463473, "comment_id": 71044355, "body": "I want to use suppressMessages, because that is what any user of this code would do. The code is part of an R-package and thus any user would use suppressMessages to suppress output."}, {"owner": {"reputation": 2477, "user_id": 3362993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c21264f32615c8d355688bb5786f73d7?s=128&d=identicon&r=PG&f=1", "display_name": "jsta", "link": "https://stackoverflow.com/users/3362993/jsta"}, "edited": false, "score": 0, "creation_date": 1570021225, "post_id": 39463473, "comment_id": 102781998, "body": "What if the output needs to be a data.frame not a character vector?"}], "tags": [], "owner": {"reputation": 1716, "user_id": 5720379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c4ba1008af1d8bae31bb331dd3b2be?s=128&d=identicon&r=PG", "display_name": "Adrian Baddeley", "link": "https://stackoverflow.com/users/5720379/adrian-baddeley"}, "is_accepted": false, "score": 1, "last_activity_date": 1473747991, "creation_date": 1473747991, "answer_id": 39463473, "question_id": 28327013, "link": "https://stackoverflow.com/questions/28327013/r-suppressmessages-from-rprintf-in-c/39463473#39463473", "title": "R: suppressMessages from Rprintf in C++", "body": "<p>Use <code>capture.output</code> in place of <code>suppressMessages</code>:</p>\n\n<pre><code> b &lt;- capture.output( test.print() )\n</code></pre>\n\n<p>Then the output is stored in character vector <code>b</code> instead of being printed.</p>\n"}], "owner": {"reputation": 359, "user_id": 2906449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/256dbab35a6daf11922bcb673c2d9089?s=128&d=identicon&r=PG&f=1", "display_name": "chakalakka", "link": "https://stackoverflow.com/users/2906449/chakalakka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1473747991, "creation_date": 1423068927, "last_edit_date": 1423160581, "question_id": 28327013, "link": "https://stackoverflow.com/questions/28327013/r-suppressmessages-from-rprintf-in-c", "title": "R: suppressMessages from Rprintf in C++", "body": "<p>I am writing an R-package with some C++ code running lengthy calculations. Inside the C++ code, I am using Rprintf() to output information. I tried suppressing the output from R with suppressMessages(), but this doesn't work, the messages still appear inside the R session.</p>\n\n<p>I found some similar questions, where people were using printf instead of Rprintf, but I am already using Rprintf. I also tried R_ShowMessage(), which is also immediately displayed and not suppressed by suppressMessages().</p>\n\n<p>Here is some example C++ code:</p>\n\n<pre><code>#include &lt;R.h&gt;\nextern \"C\" {\nvoid R_testprint()\n{\n    Rprintf(\"Try to suppress me!\\n\");\n    R_ShowMessage(\"Try to suppress me, too!\");\n}\n}\n</code></pre>\n\n<p>And the function that calls this code:</p>\n\n<pre><code>test.print &lt;- function(string) {\n    res &lt;- .C(\"R_testprint\")\n}\n</code></pre>\n\n<p>Now, the following R code will not suppress the output:</p>\n\n<pre><code>&gt; suppressMessages( test.print() )\nTry to suppress me!\nTry to suppress me, too!\n</code></pre>\n\n<p>I am using R version 3.1.0</p>\n\n<p>I appreciate any help!</p>\n"}, {"tags": ["c++", "xcode", "macos", "boost"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423068917, "post_id": 28326973, "comment_id": 45001557, "body": "Run the program using <code>DYLD_LIBRARY_PATH=fyp .&#47;the_program_you_want_to_run</code>."}, {"owner": {"reputation": 1152, "user_id": 2514972, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/lCksb.jpg?s=128&g=1", "display_name": "VenushkaT", "link": "https://stackoverflow.com/users/2514972/venushkat"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423069007, "post_id": 28326973, "comment_id": 45001616, "body": "@TheParamagneticCroissant can you please explain more. i think it might help others as well"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1423069249, "post_id": 28326973, "comment_id": 45001780, "body": "what happens is you tell the linker to look for libraries in the local <code>fyp</code> directory. So the linker does, and it finds the library in the directory, links it against your executable, and writes its path into the executable. Now when you load the executable, the dynamic linker doesn&#39;t know that it has to look for libraries in the <code>fyp</code> directory, so it can&#39;t find the dylib, so it fails. Now if you tell it to look in <code>fyp</code>  by adjusting the <code>DYLD_LIBRARY_PATH</code> environment variable, it will work."}, {"owner": {"reputation": 1152, "user_id": 2514972, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/lCksb.jpg?s=128&g=1", "display_name": "VenushkaT", "link": "https://stackoverflow.com/users/2514972/venushkat"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423199661, "post_id": 28326973, "comment_id": 45060924, "body": "@TheParamagneticCroissant  i cheked that please find my edited question.It also not working. any help is really appriated. thank you"}], "owner": {"reputation": 1152, "user_id": 2514972, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/lCksb.jpg?s=128&g=1", "display_name": "VenushkaT", "link": "https://stackoverflow.com/users/2514972/venushkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1443, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423199577, "creation_date": 1423068787, "last_edit_date": 1495540613, "question_id": 28326973, "link": "https://stackoverflow.com/questions/28326973/mac-linking-dynamic-library-boost-image-not-found", "title": "Mac linking dynamic library (boost -image not found)", "body": "<p>Im developing C++ application using xcode. And i built boost C++ successfully. overcome the Error image not found. I have first verified my dynamic libraries not having the path where these are located in.(i used otool -L) in oder to overcome it i followed <a href=\"https://stackoverflow.com/questions/8902420/how-can-i-get-xcode-to-link-and-debug-an-app-with-boost-filesystem\">This Link</a> Please find below the steps i used </p>\n\n<p><strong>fyp</strong> is my xcode project executable (exec)</p>\n\n<ol>\n<li><p>First i gave path to libboost_filesystem.dylib to do that i used</p>\n\n<p><strong>install_name_tool -change libboost_filesystem.dylib /usr/local/lib/a/lib/libboost_filesystem.dylib fyp</strong></p></li>\n<li><p>I varified it by using </p></li>\n</ol>\n\n<p><strong>otool -L fyp | grep libboost_filesystem.dylib</strong></p>\n\n<pre><code>**out put**-/usr/local/lib/a/lib/libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)\n</code></pre>\n\n<ol start=\"3\">\n<li><p>And i link libboost_system.dylib into libboost_filesystem.dylib to do that i used </p>\n\n<p><strong>install_name_tool -change libboost_system.dylib /usr/local/lib/a/lib/libboost_system.dylib /usr/local/lib/a/lib/libboost_filesystem.dylib</strong></p></li>\n<li><p>I tried again otool -L fyp | grep libboost_filesystem.dylib</p></li>\n</ol>\n\n<p><strong>libboost_filesystem.dylib (compatibility version 0.0.0, current version 0.0.0)</strong></p>\n\n<p>The Path i gave in step 1 is gone. Now im having the same error.which is </p>\n\n<pre><code>dyld: Library not loaded: libboost_filesystem.dylib\n  Referenced from: /Users/venushka/Library/Developer/Xcode/DerivedData/fyp-hdmbzawysyuciselqwbvjgjuhxbo/Build/Products/Debug/fyp\n  Reason: image not found\n</code></pre>\n\n<p>how do i overocome this issue and work with this dynamic libararies. Any advance is appriated.</p>\n\n<p><img src=\"https://i.stack.imgur.com/P6NjC.png\" alt=\"Terminal\"></p>\n\n<p>In oder to do that i used bash script . But again i'm getting the error</p>\n\n<pre><code>dyld: Library not loaded: libboost_filesystem.dylib\n  Referenced from: /Users/venushka/Library/Developer/Xcode/DerivedData/fyp-hdmbzawysyuciselqwbvjgjuhxbo/Build/Products/Debug/fyp\n  Reason: image not found\n</code></pre>\n\n<p>The bash script </p>\n\n<pre><code> install_name_tool -change libboost_filesystem.dylib $executable_path/libboost_filesystem.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_system.dylib $executable_path/libboost_system.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_thread.dylib $executable_path/libboost_thread.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_regex.dylib $executable_path/libboost_regex.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_log.dylib $executable_path/libboost_log.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_timer.dylib $executable_path/libboost_timer.dylib $FYP_PATH/fyp\n\n    install_name_tool -change libboost_thread.dylib $executable_path/libboost_thread.dylib $executable_path/libboost_system.dylib\n\n    install_name_tool -change libboost_system.dylib $executable_path/libboost_system.dylib $executable_path/libboost_filesystem.dylib\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423068660, "post_id": 28326857, "comment_id": 45001363, "body": "<code>bool n=(a&lt;b); foo&lt;n&gt;();</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423068713, "post_id": 28326857, "comment_id": 45001405, "body": "@ForceBru The question wasn&#39;t about how to fix the code to be worked, but about understanding why one wasn&#39;t working."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 2, "creation_date": 1423068714, "post_id": 28326857, "comment_id": 45001406, "body": "Or just <code>foo&lt;(a&lt;b)&gt;();</code>, but I think OP is asking about the rules under which the syntax he attempted is not permissible. This has to do with the parsing of stuff like <code>vector&lt;vector&lt;int&gt;&gt;</code>, but the precise rules I don&#39;t know off hand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1423068890, "post_id": 28326857, "comment_id": 45001543, "body": "@Wintermute <a href=\"http://coliru.stacked-crooked.com/a/9bcbdb4c7354766d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9bcbdb4c7354766d</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423068974, "post_id": 28326857, "comment_id": 45001602, "body": "Why do you think <code>a&lt;b</code> is a compile-time constant expression?"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1423069045, "post_id": 28326857, "comment_id": 45001643, "body": "Ah. Yes, as multiple people have noticed by now, those simply are not compile time constants and therefore cannot be used as template arguments. I didn&#39;t notice that the first time."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1423069832, "post_id": 28326857, "comment_id": 45002154, "body": "Also, the clang error message in the coliru demo correctly underlines <code>foo&lt;a&lt;b&gt;</code> as the function name, so the basic parse is working as expected; <code>a&lt;b</code> is the (invalid) template argument."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 7, "last_activity_date": 1423069048, "last_edit_date": 1423069048, "creation_date": 1423068767, "answer_id": 28326963, "question_id": 28326857, "link": "https://stackoverflow.com/questions/28326857/is-it-possible-to-pass-an-expression-containing-lt-or-gt-operators-as-a-template/28326963#28326963", "title": "Is it possible to pass an expression containing lt or gt operators as a template parameter?", "body": "<p>Yes, this is possible, as long as the expression is a compile-time constant expression.</p>\n\n<p>All you need to do is to make your <code>int</code> a <code>constexpr</code>. You may want to add parentheses around your expression for the human readers of your code (compiler will have no problem parsing <code>foo&lt;a&lt;b&gt;</code> correctly, while humans would think there's a missing <code>&gt;</code> at the end):</p>\n\n<pre><code>constexpr int a = 4;\nconstexpr int b = 5;\nint main(){ foo&lt;(a&lt;b)&gt;(); return 0;}\n</code></pre>\n\n<p><a href=\"http://ideone.com/4grxGp\" rel=\"nofollow\">Demo.</a></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1423068789, "creation_date": 1423068789, "answer_id": 28326974, "question_id": 28326857, "link": "https://stackoverflow.com/questions/28326857/is-it-possible-to-pass-an-expression-containing-lt-or-gt-operators-as-a-template/28326974#28326974", "title": "Is it possible to pass an expression containing lt or gt operators as a template parameter?", "body": "<p><code>a&lt;b</code> is a compile time constant only if both <code>a</code> and <code>b</code> are compile time constants.</p>\n\n<p>This works for me:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;bool&gt;\nvoid foo(){ };\n\nconst int a = 4;\nconst int b = 5;\nint main(){ foo&lt;a&lt;b&gt;();}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423069048, "creation_date": 1423068472, "question_id": 28326857, "link": "https://stackoverflow.com/questions/28326857/is-it-possible-to-pass-an-expression-containing-lt-or-gt-operators-as-a-template", "title": "Is it possible to pass an expression containing lt or gt operators as a template parameter?", "body": "<p>I thought the following programm is well-formed:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;bool&gt;\nvoid foo(){ };\n\nint a = 4;\nint b = 5;\nint main(){ foo&lt;a&lt;b&gt;(); }\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e05c636ebe48eaf3\" rel=\"nofollow\"><strong>DEMO</strong></a></p>\n\n<p>The reason I was thinking that way was (<code>N4296::14.2/3 [temp.names]</code>):</p>\n\n<blockquote>\n  <p>After name lookup (3.4) finds that a name is a <code>template-name</code> or that\n  an <code>operator-function-id</code> or a <code>literal operator-id</code> refers to a set of\n  overloaded functions any member of which is a function template, if\n  this is followed by a <code>&lt;</code>, the <code>&lt;</code> is always taken as the delimiter of a\n  <code>template-argument-list</code> and never as the less-than operator. When\n  parsing a <code>template-argument-list</code>, the first non-nested <code>&gt;</code> is taken\n  as the ending delimiter rather than a greater-than operator.</p>\n</blockquote>\n\n<p>In that example we can see that the first <code>&lt;</code> in the <code>foo&lt;a&lt;b&gt;()</code> expression is being treated as a start point of the template arguments. The template arguments is up to the first <code>&gt;</code>, so <code>a&lt;b</code> should be considered as just an argument. But it wasn't, what's wrong?</p>\n"}, {"tags": ["c++", "linux", "makefile"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1423068041, "post_id": 28326607, "comment_id": 45000932, "body": "Notice which function the linker is crying about? <code>atan</code>. That should be a red flag that you are not linking against the maths lib (<code>-lm</code>)."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423068101, "post_id": 28326607, "comment_id": 45000977, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6534191/undefined-reference-to-only-some-math-h-functions\">undefined reference to &quot;only some math.h&quot; functions</a>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423068124, "post_id": 28326607, "comment_id": 45000991, "body": "Where did <code>highgui.so</code>, <code>imgproc.so</code>, and <code>core.so</code> come from? A different (newer) system? Are you using <code>atan</code> in your code?"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 1, "creation_date": 1423068126, "post_id": 28326607, "comment_id": 45000994, "body": "this really doesn&#39;t have anything to do with c++."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1423068214, "post_id": 28326607, "comment_id": 45001062, "body": "it&#39;s also very strange that you are trying to produce <code>.o</code> object files, but you are actually compiling to full-blown executables and link to libs\u2026 that&#39;s not how objects files should be created/used\u2026"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1423068282, "post_id": 28326607, "comment_id": 45001107, "body": "<code>orsProcessor.o</code> is not the name of the target that is built, it&#39;s the object file in that the linker finds unresolved dependencies. Building <code>orsProcessor.o</code> does not involve the linker (see the <code>cflags</code> variable), so <code>-lm</code> is useless there. Add it to the recipe for <code>ors</code>."}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 1, "creation_date": 1423068323, "post_id": 28326607, "comment_id": 45001138, "body": "Replacing <code>cc=g++</code> by <code>CC=g++</code> or using <code>$(CXX)</code> instead of <code>$(CC)</code> to link should work (and allow to remove the <code>-lstdc++</code> and <code>-lm</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 891558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xfazQ.jpg?s=128&g=1", "display_name": "user891558", "link": "https://stackoverflow.com/users/891558/user891558"}, "is_accepted": false, "score": 0, "last_activity_date": 1423278506, "creation_date": 1423278506, "answer_id": 28378120, "question_id": 28326607, "link": "https://stackoverflow.com/questions/28326607/c-ubuntu-makefile-error/28378120#28378120", "title": "C++ Ubuntu makefile error", "body": "<p>Thanks.\nI got an answer. I was missing -lm at the end of the first two statements. I added them and the errors got resolved.\nThanks,\nKushal</p>\n"}], "owner": {"reputation": 23, "user_id": 891558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xfazQ.jpg?s=128&g=1", "display_name": "user891558", "link": "https://stackoverflow.com/users/891558/user891558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1423278506, "creation_date": 1423067737, "last_edit_date": 1423067965, "question_id": 28326607, "link": "https://stackoverflow.com/questions/28326607/c-ubuntu-makefile-error", "title": "C++ Ubuntu makefile error", "body": "<p>I have a C++ application and I have created makefile for it. how,ever I am getting the following error:</p>\n\n<pre><code>/usr/bin/ld: orsProcessor.o: undefined reference to symbol 'atan@@GLIBC_2.2.5'\n//lib/x86_64-linux-gnu/libm.so.6: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\nmake: *** [ors] Error 1\n</code></pre>\n\n<p>I am stuck from the past 4 hours. Can someone help me please.?</p>\n\n<p>And my Makefile looks like this:</p>\n\n<pre><code>cc=g++\ncflags = -c\n\nall: ors\n\nors: orsMain.o orsClassifier.o orsObjectData.o orsProcessor.o\n    $(CC) orsMain.o orsClassifier.o orsObjectData.o orsProcessor.o -o ors -lstdc++\n\norsMain.o: orsMain.cpp\n      $(CC) -lhighgui.so -limgproc.so -lcore.so $(cflags) orsMain.cpp -o orsMain.o -lstdc++\n\norsClassifier.o: orsClassifier.cpp\n         $(CC) -lhighgui.so -limgproc.so -lcore.so $(cflags) orsClassifier.cpp -o orsClassifier.o -lstdc++ -lm\n\norsObjectData.o: orsObjectData.cpp\n         $(CC) -lhighgui.so -limgproc.so -lcore.so $(cflags) orsObjectData.cpp -o orsObjectData.o -lstdc++ -lm\n\n\norsProcessor.o: orsProcessor.cpp\n        $(CC) -lhighgui.so -limgproc.so -lcore.so $(cflags)  orsProcessor.cpp -o orsProcessor.o -lstdc++ -lm\n\nclean:\n    rm -rf *.o *~ ors\n\n#ORSObjectRecognition.o: ORSObjectRecognition.cpp\n#           $(CC) $(cflags) ORSObjectRecognition.cpp\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1423068129, "post_id": 28326604, "comment_id": 45000995, "body": "Nothing seems to be wrong in the posted code. Perhaps you can post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1423068166, "post_id": 28326604, "comment_id": 45001025, "body": "are you calling the two methods on the same <code>videoPlay</code> instance ?"}, {"owner": {"reputation": 19, "user_id": 3287517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0794852e5142537c6b922f7cccb44e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Day", "link": "https://stackoverflow.com/users/3287517/kai-day"}, "edited": false, "score": 0, "creation_date": 1423068204, "post_id": 28326604, "comment_id": 45001053, "body": "I am Sander. I&#39;m really stumped, it&#39;s driving me mad!"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1423068342, "post_id": 28326604, "comment_id": 45001156, "body": "if you can&#39;t accurately give us what it is that you want to do or clarify this segment of code&#39;s purpose, I am afraid we can not help you."}, {"owner": {"reputation": 19, "user_id": 3287517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0794852e5142537c6b922f7cccb44e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Day", "link": "https://stackoverflow.com/users/3287517/kai-day"}, "edited": false, "score": 0, "creation_date": 1423068517, "post_id": 28326604, "comment_id": 45001277, "body": "I call videoplayobject.selectBall() in a mouseclick call back. It then sets sB to the ball (if any) that the mouse pointer is inside. Then I press &quot;1&quot; on the keyboard and inside a switch statement after a waitkey addLabel method is called. It should use sB to index into the houghCircles vector at the number set in selectBall, but instead it is going back to the original value that sB is instatiated to. For some reason sB is not properly being set inside selectBall()"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3287517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0794852e5142537c6b922f7cccb44e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Day", "link": "https://stackoverflow.com/users/3287517/kai-day"}, "edited": false, "score": 0, "creation_date": 1423069666, "post_id": 28327156, "comment_id": 45002048, "body": "It appears to be that my mouseCallback isn&#39;t using the right instance of videoPlay. Thank you very much for your help! I&#39;d +rep if I could."}], "tags": [], "owner": {"reputation": 1374, "user_id": 3398271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c998619fa2ed255eec79fed92f3c2edd?s=128&d=identicon&r=PG&f=1", "display_name": "Attilio", "link": "https://stackoverflow.com/users/3398271/attilio"}, "is_accepted": true, "score": 0, "last_activity_date": 1423069284, "creation_date": 1423069284, "answer_id": 28327156, "question_id": 28326604, "link": "https://stackoverflow.com/questions/28326604/c-changing-class-variable-inside-class-method/28327156#28327156", "title": "C++ changing class variable inside class method", "body": "<p>I would check that the two callbacks are using the same instance of <code>videoPlay</code>. You can do it e.g. like this within the two methods:</p>\n\n<pre><code>cout &lt;&lt; \"this = '\" &lt;&lt; this &lt;&lt; \"'\" &lt;&lt; endl;\n</code></pre>\n\n<p>(Sorry I think this would be better as a comment, but I don't have enough rep. yet to add comments...)</p>\n"}], "owner": {"reputation": 19, "user_id": 3287517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0794852e5142537c6b922f7cccb44e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Day", "link": "https://stackoverflow.com/users/3287517/kai-day"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 28327156, "answer_count": 1, "score": -2, "last_activity_date": 1450868813, "creation_date": 1423067733, "last_edit_date": 1450868813, "question_id": 28326604, "link": "https://stackoverflow.com/questions/28326604/c-changing-class-variable-inside-class-method", "title": "C++ changing class variable inside class method", "body": "<p>Class definition:</p>\n\n<pre><code>    class videoPlay {\npublic:\n    VideoCapture video;\n    int cannyThreshold;\n    int houghThreshold;\n    int clickX;\n    int clickY;\n    int sB;\n    int clickRadius;\n    bool playVideo;\n    bool edgeDetection;\n    Mat selectedBall;\n    Mat frame;\n    Mat origFrame;\n    vector&lt;Vec3f&gt; houghCircles;\n\n    videoPlay( VideoCapture video ) : video(video) {}\n    void nextFrame();\n    void houghTransform();\n    void detectEdges();\n    void drawFrame();\n    void mouseActionListener(int event, int x, int y, int flags, void* userdata);\n    void selectBall();\n    void addLabel(int num);\n};\n</code></pre>\n\n<p>The two methods</p>\n\n<pre><code>void videoPlay::selectBall( ) {\n    frame = origFrame.clone();\n    for(int i = 0; i &lt; houghCircles.size(); i++) {\n        int x = houghCircles[i][0];\n        int y = houghCircles[i][1];\n        int radius = cvRound(houghCircles[i][2]);\n\n        float circleEq = pow(clickX - x, 2) + pow(clickY - y, 2);\n        Point center(cvRound(x), cvRound(y));\n\n        if(circleEq &lt;= pow(radius, 2)) {\n            circle(frame, center, radius, Scalar(255, 0, 255), 4, 8, 0);\n            sB = i;\n            cout &lt;&lt; sB &lt;&lt; \" - \" &lt;&lt; i &lt;&lt; endl;\n        } else {\n            circle(frame, center, radius, Scalar(0, 0, 255), 2, 8, 0);\n        }\n    }\n}\n\nvoid videoPlay::addLabel(int num) {\n    cout &lt;&lt; sB &lt;&lt; endl;\n    int x = (int)houghCircles[sB][0];\n    int y = (int)houghCircles[sB][1];\n    putText(frame, \"1\", Point(x, y), 1, 1, Scalar(255, 255, 0), 1, 8, 0);\n}\n</code></pre>\n\n<p>I call <code>videoplayobject.selectBall()</code> in a <code>mouseclick</code> call back. It then sets <code>sB</code> to the ball (if any) that the mouse pointer is inside. Then I press <kbd>1</kbd> on the keyboard and inside a <code>switch statement</code> after a waitkey <code>addLabel</code> method is called. It should use <code>sB</code> to index into the <code>houghCircles</code> vector at the number set in <code>selectBall</code>, but instead it is going back to the original value that <code>sB</code> is instantiated to. For some reason <code>sB</code> is not properly being set inside <code>selectBall()</code> </p>\n\n<p><code>sB</code> is set to say 2 in the <code>selectBall</code> method, but when <code>addLabel</code> comes to use <code>sB</code> to index into a vector then <code>sB</code> doesn't == what it was set to in <code>selectBall</code>. Am I doing something very stupid?</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["c#", "c++", "c"], "comments": [{"owner": {"reputation": 79886, "user_id": 113141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe0ff83b10821b15e0f7fd6385be24ef?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/113141/justin"}, "edited": false, "score": 1, "creation_date": 1423067320, "post_id": 28326342, "comment_id": 45000386, "body": "This isn&#39;t really the place to ask philosophical questions about the history of specific programming language features."}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "edited": false, "score": 1, "creation_date": 1423067381, "post_id": 28326342, "comment_id": 45000439, "body": "I&#39;m voting to close this question as off-topic because this a question easily answerd by looking at a wikipedia entry on the subject."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 2, "creation_date": 1423067521, "post_id": 28326342, "comment_id": 45000533, "body": "As usually I asked google about my questions. Today discovered wikipedia"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1423067687, "post_id": 28326342, "comment_id": 45000658, "body": "In hindsight, I rather like this question. I&#39;ve edited it; hopefully to improve a little. (And so I can convert my downvote to an upvote ;-) )"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1423067832, "post_id": 28326342, "comment_id": 45000765, "body": "@Bathsheba although, the question shows no research effort (reason to downvote) and I don&#39;t understand how it would be useful (reason for downvote)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1423067875, "post_id": 28326342, "comment_id": 45000801, "body": "I found the answers it generated informative. And it might come in handy in a pub quiz one day."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 1, "creation_date": 1423068921, "post_id": 28326342, "comment_id": 45001563, "body": "Just found reason for ++ operator: ++ is easier to write, then variable = variable + 1;"}], "answers": [{"comments": [{"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 1, "creation_date": 1423067662, "post_id": 28326403, "comment_id": 45000639, "body": "@Bathsheba - note that question is tagged with C#/C++ (along with C) and there is no way <code>++</code> is atomic there due to ability to have custom operators..."}, {"owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "edited": false, "score": 0, "creation_date": 1423069706, "post_id": 28326403, "comment_id": 45002074, "body": "In assembler for x86 processors there is function INC, so ++ can be implemented as atomic"}], "tags": [], "owner": {"reputation": 76699, "user_id": 240733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0b55ab48c85a40ac1960c1fc4d5e2f99?s=128&d=identicon&r=PG&f=1", "display_name": "stakx - no longer contributing", "link": "https://stackoverflow.com/users/240733/stakx-no-longer-contributing"}, "is_accepted": true, "score": 7, "last_activity_date": 1423067772, "last_edit_date": 1423067772, "creation_date": 1423067253, "answer_id": 28326403, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix/28326403#28326403", "title": "Origin of ++ postfix and prefix", "body": "<p>Citing from the <a href=\"http://en.wikipedia.org/wiki/B_%28programming_language%29\" rel=\"nofollow\">Wikipedia article on the B programming language</a>:</p>\n\n<blockquote>\n  <p><em>\"B also introduced the increment and decrement operators (<code>++</code> and <code>--</code>); Their prefix or postfix position determines whether the value is taken prior or post alteration of the operand.\"</em></p>\n</blockquote>\n\n<p>I see no point in duplicating the whole Wikipedia article. Just go there for more details.</p>\n\n<p>By the way, while the B language might have <em>introduced</em> these specific forms for the increment and decrement operations, it's unlikely that B also <em>invented</em> the operations themselves. I suspect that even early CPUs had dedicated increment and decrement operations (next to the more general add and subtract operations).</p>\n"}, {"tags": [], "owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "is_accepted": false, "score": 8, "last_activity_date": 1423067406, "last_edit_date": 1592644375, "creation_date": 1423067406, "answer_id": 28326463, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix/28326463#28326463", "title": "Origin of ++ postfix and prefix", "body": "<p>From Dennis M. Ritchie, <a href=\"http://cm.bell-labs.com/who/dmr/chist.html\" rel=\"noreferrer\">The Development of the C Language</a>,  HOPL II, 1993:</p>\n<blockquote>\n<p>For example, B introduced generalized assignment operators, using x=+y to add y to x. The notation came from Algol 68 [Wijngaarden 75] via McIlroy, who had incorporated it into his version of TMG. (In B and early C, the operator was spelled =+ instead of += ; this mistake, repaired in 1976, was induced by a seductively easy way of handling the first form in B's lexical analyzer.)</p>\n<p>Thompson went a step further by inventing the ++ and -- operators, which increment or decrement; their prefix or postfix position determines whether the alteration occurs before or after noting the value of the operand.</p>\n</blockquote>\n"}], "owner": {"reputation": 4537, "user_id": 677824, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/V0zui.jpg?s=128&g=1", "display_name": "Yuriy Zaletskyy", "link": "https://stackoverflow.com/users/677824/yuriy-zaletskyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "closed_date": 1423067381, "accepted_answer_id": 28326403, "answer_count": 2, "score": 0, "last_activity_date": 1423067772, "creation_date": 1423067086, "last_edit_date": 1423067663, "question_id": 28326342, "link": "https://stackoverflow.com/questions/28326342/origin-of-postfix-and-prefix", "closed_reason": "Needs more focus", "title": "Origin of ++ postfix and prefix", "body": "<p>Who knows about origin and reasons of ++ postfix and sufix form. I know that they are available even in C. But who invented them; perhaps even in other languages?</p>\n"}, {"tags": ["c#", "c++", "winforms", "opengl", "sdl"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1423067968, "post_id": 28326192, "comment_id": 45000872, "body": "I don&#39;t know SDL, but you can definitely get a handle to a WinForms object, so you should be able to use the handle value in SDL. As for the bitmap, yes you can manipulate the pixels, there are several questions here on this topic."}], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 356630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88786f5ef8d4b38a9c2738615051cb19?s=128&d=identicon&r=PG", "display_name": "Lawrence Kok", "link": "https://stackoverflow.com/users/356630/lawrence-kok"}, "is_accepted": true, "score": 1, "last_activity_date": 1423236736, "creation_date": 1423236736, "answer_id": 28369214, "question_id": 28326192, "link": "https://stackoverflow.com/questions/28326192/c-hybrid-native-managed-sdl-opengl-c-winforms/28369214#28369214", "title": "C++ hybrid (native managed) +sdl + opengl &amp; c# winforms", "body": "<p>Given that your target platform is Windows, there is a very easy way to insert your opengl rendering into your windows form application. You can simply make a window with your favorite package of choice, sdl, sfml, plain winapi code. When you obtain the handle of the window in question, just change the style of the window so that it becomes a child window, and put it as a child window of your window of choice. As for the parent window, what I like to do is subclass special panel-type control for this purpose. </p>\n\n<p>After that you can just use the composition of the controls as normal. Only the airspace problems might influence the presentation (<a href=\"https://msdn.microsoft.com/en-us/library/aa970688%28v=vs.110%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/aa970688%28v=vs.110%29.aspx</a>).</p>\n"}], "owner": {"reputation": 15, "user_id": 1047191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d4c0d3744461d3e4e4ec040ea4de5f?s=128&d=identicon&r=PG", "display_name": "nope", "link": "https://stackoverflow.com/users/1047191/nope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 28369214, "answer_count": 1, "score": 1, "last_activity_date": 1423733668, "creation_date": 1423066664, "last_edit_date": 1423733668, "question_id": 28326192, "link": "https://stackoverflow.com/questions/28326192/c-hybrid-native-managed-sdl-opengl-c-winforms", "title": "C++ hybrid (native managed) +sdl + opengl &amp; c# winforms", "body": "<p>I'm working on a interactive rendering software using opengl in sdl written in c++.\nThe project evolving, I wanted to have a HIM/GUI to manipulate my rendering engine.</p>\n\n<p>So I started to search some easy/fast HIM coding ways to do it.\nFinnaly I decided to use winforms and c# to create HIM, because its offer a way to design and code easily a HIM.</p>\n\n<p>At first i started to create an hybrid dll with native and managed c++. OK.\nAfter I try to use this dll inside a c# application. OK.</p>\n\n<p>Now my goal is: insert the opengl rendering inside the winforms application.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Can I bind my SDLcontext/SDLwindows(C++) to a winforms object?</li>\n<li>Can I bind a c# bitmap to an array of byte from my dll ? (aim to update pixels of it by the dll)\n<ul>\n<li>if ok: do I have to call a function to refresh my GUI(winforms) on pixel change ?</li>\n</ul></li>\n<li>Do you think it will be interesting to drop SDL and use only winforms for this kind of work ?</li>\n<li>Any suggestion ?</li>\n</ul>\n\n<p><strong>EDIT: add information about my investigation</strong></p>\n\n<p>Thanks to Lawrence Kok I pursue my research.</p>\n\n<p>So I tried to bind my SDL windows to a Panel form</p>\n\n<pre><code>private void LaunchEngine(string str)\n{\n  unsafe\n  {\n    byte[] bytes = Encoding.ASCII.GetBytes(str);\n    sbyte[] sbyt = (sbyte[])(Array)bytes;\n    fixed (sbyte* p = sbyt)\n    {\n      // Engine is a managed class that bridge my c++ to c#\n      // all it's function are static\n      Engine.LOAD_CONTENT_FROM_FILE(p);\n      Engine.PRINTCONFIGURATION();\n      if (Engine.LOAD_ENGINE_DATA() &amp;&amp; Engine.INITIALISE_ENGINE_DATA())\n      {\n        // Bind attempt here           \n        _SdlWindowHandle = Engine.GETHANDLE();\n        SetWindowPos(_SdlWindowHandle, this.Handle, 0, 0, 0, 0, (SetWindowPosFlags.SWP_NOSIZE | SetWindowPosFlags.SWP_SHOWWINDOW));\n\n        // Make the SDL Window the child of our Panel\n        SetParent(_SdlWindowHandle, m_SdlPanel.Handle);\n        ShowWindow(_SdlWindowHandle, ShowWindowCommand.SW_SHOWNORMAL);\n\n        // In futur i will put this loop in another thread\n        // but for now I'm trying to validate my prototype\n        for (; ; )\n        {\n          Engine.UPDATE_ENGINE_DATA();\n          Engine.DRAW_ENGINE_DATA();\n        }\n      }\n    }\n  }\n</code></pre>\n\n<p>Actually, the change the parent of my sdl windows, close it, and my engine is running, but my panel is completely blank.</p>\n\n<p>I think I'm missing something here but i can't figured what.</p>\n\n<p>here is how i get the SDL window handle (from SDL2)</p>\n\n<pre><code>// coming from c++ native library\n// and represent by Engine.GETHANDLE();\n// from managed c++ lib\nHWND SDLWindowManager::GetHandle()\n{\n  SDL_SysWMinfo info;\n  SDL_VERSION(&amp;info.version);\n\n  /*if (SDL_GetWMInfo(&amp;info) &lt; 0)\n   return 0;*/\n\n  SDL_GetWindowWMInfo(_mainWindow, &amp;info);\n  return info.info.win.window;\n}\n</code></pre>\n\n<p><strong>EDIT: problem solved</strong></p>\n\n<p>I forget to add the panel to winforms control:</p>\n\n<pre><code>public Form1()\n{\n  InitializeComponent();\n\n  m_SdlPanel = new Panel();\n  m_SdlPanel.Size = new Size(512, 512);\n  m_SdlPanel.Location = new Point(0, 0);\n  Controls.Add(m_SdlPanel);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "pointers", "qlayout"], "comments": [{"owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "edited": false, "score": 0, "creation_date": 1501863182, "post_id": 28326090, "comment_id": 77983686, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17703513/about-deleting-removing-widgets-and-layouts-in-qt-4\">About deleting, removing widgets and layouts in Qt 4</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423069729, "post_id": 28326658, "comment_id": 45002086, "body": "May be QListView will work, but I need to make it work with QLayout currently. Any pointer?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423075117, "post_id": 28326658, "comment_id": 45005248, "body": "@Cupidvogel So the clear answer is that you must use <code>removeWidget</code> and then you or whatever previous owner the widget had will clean it up. Then you&#39;ll need to call <code>update</code> and whatever other adjustments are required to get the layout to look right again. Let me just beg you one more time, &quot;Don&#39;t do this, please, for your sake, for anyone else who has to look at the codebase&#39;s sake, and for my sake as someone who just hates making things wrong.&quot;"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 1, "creation_date": 1423075817, "post_id": 28326658, "comment_id": 45005602, "body": "Ok then, it would be cruel to not pay heed to your sincere request.. :) Gonna use QListView. Let me see how I can make that work.."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423076432, "post_id": 28326658, "comment_id": 45005946, "body": "@Cupidvogel You should know that I feel happier and like the world is a better place! Qt&#39;s <code>QListView</code> is their simplest <code>QAbstractItemView</code>, but you still will need to dip into the <code>SelectionModel</code> and the <code>QAbstractItemModel</code> at times. This is a paradigm that you will use over and over in Qt, so don&#39;t think that you are wasting your time as you learn. <a href=\"http://doc.qt.io/qt-5/qtwidgets-itemviews-puzzle-example.html\" rel=\"nofollow noreferrer\">This example</a> will probably be particularly useful to you as you get started. If you have questions along the way post a link to them here and I&#39;ll come try to answer."}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423077131, "post_id": 28326658, "comment_id": 45006289, "body": "Thanks a lot! Will do.. :)"}, {"owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423122167, "post_id": 28326658, "comment_id": 45022520, "body": "How do I clear a QListView? And by the way, should I be using a QListView or QListWidget?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "edited": false, "score": 0, "creation_date": 1423139569, "post_id": 28326658, "comment_id": 45032418, "body": "@Cupidvogel 1) <a href=\"http://doc.qt.io/qt-5/qlistwidget.html#details\" rel=\"nofollow noreferrer\">Qt says</a>: <code>QListWidget</code> is a convenience class that provides a list view similar to the one supplied by <code>QListView</code>, but with a classic item-based interface for adding and removing items. <code>QListWidget</code> uses an internal model to manage each <code>QListWidgetItem</code> in the list. For a more flexible list view widget, use the <code>QListView</code> class with a standard model. 2) Clearing a <code>QListView</code> requires getting the <code>QAbstractItemModel</code> and calling <a href=\"http://doc.qt.io/qt-5/qabstractitemmodel.html#removeColumn\" rel=\"nofollow noreferrer\"><code>removeColumn</code></a>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 4, "last_activity_date": 1423067880, "creation_date": 1423067880, "answer_id": 28326658, "question_id": 28326090, "link": "https://stackoverflow.com/questions/28326090/how-to-remove-widgets-from-layout-in-qt/28326658#28326658", "title": "How to remove widgets from layout in Qt", "body": "<p>It seems that you have some misconceptions about ownership. A <code>QLayout</code> takes ownership of any item that is added to it: <a href=\"http://doc.qt.io/qt-5/qlayout.html#addItem\" rel=\"nofollow\">http://doc.qt.io/qt-5/qlayout.html#addItem</a></p>\n\n<p>That means the <code>QLayout</code> is responsible for deleting these items. If you delete them then the <code>QLayout</code> will also try to delete them and then you get the crash you're seeing now.</p>\n\n<p><code>QLayout</code> doesn't have good functionality for deleting contents and re-adding them (for example <a href=\"http://doc.qt.io/qt-5/qlayout.html#removeWidget\" rel=\"nofollow\"><code>removeWidget</code></a> probably doesn't work as you would hope.) But there's a reason for this.</p>\n\n<p><em><code>QLayout</code> is not intended to be used as a list view.</em></p>\n\n<p>What you do want is a, wait for it, <a href=\"http://doc.qt.io/qt-5/qlistview.html\" rel=\"nofollow\"><code>QListView</code></a>. Which will even handle the scroll functionality for you, <em>and</em> make adding and removing elements a possibility.</p>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 10305444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdffaf7c0a3d7d398e9b004acd125cd6?s=128&d=identicon&r=PG", "display_name": "Maifee Ul Asad", "link": "https://stackoverflow.com/users/10305444/maifee-ul-asad"}, "is_accepted": false, "score": 0, "last_activity_date": 1607521702, "creation_date": 1607521702, "answer_id": 65218073, "question_id": 28326090, "link": "https://stackoverflow.com/questions/28326090/how-to-remove-widgets-from-layout-in-qt/65218073#65218073", "title": "How to remove widgets from layout in Qt", "body": "<p>Actually you can solve this issue easily, even if you are using <code>QGridLayout</code> or any other <code>Layout</code>s :</p>\n<pre><code>    subLayout-&gt;removeWidget(m_visibleCheckBox);//removes and then it causes some zigzag drawing at (0,0)\n\n    m_visibleCheckBox-&gt;setVisible(false);//asks to redraw the component internally\n\n    setLayout(subLayout);//for safety as we may use that layout again and again\n</code></pre>\n<p><strong>If you just use the first line it will cause this :</strong></p>\n<p><a href=\"https://i.stack.imgur.com/BWiNz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BWiNz.png\" alt=\"qt removeWidget best way\" /></a></p>\n"}], "owner": {"reputation": 8515, "user_id": 1469954, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0gcMu.jpg?s=128&g=1", "display_name": "SexyBeast", "link": "https://stackoverflow.com/users/1469954/sexybeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5137, "favorite_count": 0, "accepted_answer_id": 28326658, "answer_count": 2, "score": 3, "last_activity_date": 1607521702, "creation_date": 1423066393, "question_id": 28326090, "link": "https://stackoverflow.com/questions/28326090/how-to-remove-widgets-from-layout-in-qt", "title": "How to remove widgets from layout in Qt", "body": "<p>I have a piece of code which does this: a method named <code>prepareUI</code> makes the UI ready to be able to load search results that are fed into it. A method named <code>onClear</code> that is called when the results that are already showing needs to be cleared. And a method named <code>populateSearchResults</code> that takes the search data and loads the UI with it. The container that holds the data is a publicly available pointer, since it is needed to clear the results from <code>onClear</code>:</p>\n\n<pre><code>void MyClass::prepareSearchUI() {\n        //there may be many search results, hence need a scroll view to hold them\n        fResultsViewBox = new QScrollArea(this);\n        fResultsViewBox-&gt;setGeometry(28,169,224,232);\n        fSearchResultsLayout = new QGridLayout();\n}\n\nvoid MyClass::onClear() {\n    //I have tried this, this causes the problem, even though it clears the data correctly\n    delete fSearchResultContainer;\n    //tried this, does nothing\n    QLayoutItem *child;\n    while ((child = fSearchResultsLayout-&gt;takeAt(0)) != 0)  {\n        ...\n        delete child;\n    }\n}\n\nvoid MyClass::populateWithSearchesults(std::vector&lt;std::string&gt; &amp;aSearchItems) {\n    fSearchResultContainer = new QWidget();\n    fSearchResultContainer-&gt;setLayout(fSearchResultsLayout);\n\n    for (int rowNum = 0; rowNum &lt; aSearchItems.size(); rowNum++) {\n        QHBoxLayout *row = new QHBoxLayout();\n        //populate the row with some widgets, all allocated through 'new', without specifying any parent, like\n        QPushButton *loc = new QPushButton(\"Foo\");\n        row-&gt;addWidget(loc);\n        fSearchResultsLayout-&gt;addLayout(row, rowNum, 0,1,2);    \n    }\n    fResultsViewBox-&gt;setWidget(fSearchResultContainer);\n}\n</code></pre>\n\n<p>Problem is, when I call <code>onClear</code> which internally calls <code>delete</code>, it does remove all the results that were showing. But after that, if I call <code>populateWithSearchesults</code> again, my app crashes, and the stack trace shows this method as where it crashed.</p>\n\n<p>How do I fix this problem?</p>\n"}, {"tags": ["c++", "comma"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1423066439, "post_id": 28326062, "comment_id": 44999732, "body": "What boolean expressions are you combining? <code>0</code>, <code>1</code>, <code>3</code>, etc. are integers, not booleans."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1423066653, "post_id": 28326062, "comment_id": 44999878, "body": "@Barmar I imply the use of integers as booleans where 0 is false and !0 is true. But looking at the answers you are right - this has nothing to do with booleans."}], "answers": [{"tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 10, "last_activity_date": 1423066382, "creation_date": 1423066382, "answer_id": 28326085, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why/28326085#28326085", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<p>The comma operator returns the righthand side.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Comma_operator\">Wikipedia</a>: </p>\n\n<blockquote>\n  <p>In the C and C++ programming languages, the comma operator (represented by the token ,) is a binary operator that evaluates its first operand and discards the result, and then evaluates the second operand and returns this value (and type).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 10092, "user_id": 2389720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EiqDl.jpg?s=128&g=1", "display_name": "axelduch", "link": "https://stackoverflow.com/users/2389720/axelduch"}, "is_accepted": false, "score": 4, "last_activity_date": 1423066718, "last_edit_date": 1423066718, "creation_date": 1423066418, "answer_id": 28326098, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why/28326098#28326098", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<p>This is because it returns the last value of your expression sequence, in your examples:</p>\n\n<pre><code>    cout &lt;&lt; \"(0, 1) =&gt; \" &lt;&lt; (0, 1) &lt;&lt; endl;\n1-------------------------------^\n    cout &lt;&lt; \"(1, 0) =&gt; \" &lt;&lt; (1, 0) &lt;&lt; endl;\n0-------------------------------^\n    cout &lt;&lt; \"(1, 1) =&gt; \" &lt;&lt; (1, 1) &lt;&lt; endl;\n1-------------------------------^\n    cout &lt;&lt; \"(0, 0) =&gt; \" &lt;&lt; (0, 0) &lt;&lt; endl;\n0-------------------------------^\n    cout &lt;&lt; \"(0, 3) =&gt; \" &lt;&lt; (0, 3) &lt;&lt; endl;\n3-------------------------------^\n    cout &lt;&lt; \"(5, 0) =&gt; \" &lt;&lt; (5, 0) &lt;&lt; endl;\n0-------------------------------^\n    cout &lt;&lt; \"(7, 1) =&gt; \" &lt;&lt; (7, 1)\n1-------------------------------^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1423066850, "post_id": 28326101, "comment_id": 45000024, "body": "Perhaps worth pointing out that while they look the same, a comma expression and a function call are <i>not</i> the same thing. In particular, order of evaluation of function arguments is entirely undefined."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 7, "last_activity_date": 1423066423, "creation_date": 1423066423, "answer_id": 28326101, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why/28326101#28326101", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<p>An expression that looks like this</p>\n\n<pre><code>(a, b)\n</code></pre>\n\n<p>is a <a href=\"http://en.wikipedia.org/wiki/Comma_operator\" rel=\"noreferrer\"><em>comma expression</em></a>, its value is its result is its rightmost operand, i.e.</p>\n\n<pre><code>(a, b, ..., z)\n</code></pre>\n\n<p>would produce the value of <code>z</code>.</p>\n\n<p>Note that all expressions in the chain get evaluated, including these with <em>side effects</em>. Moreover, comma acts as a <em>sequence point</em>, meaning that the side effects are applied before evaluating the next operand.</p>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 9, "last_activity_date": 1423068943, "last_edit_date": 1423068943, "creation_date": 1423066803, "answer_id": 28326246, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why/28326246#28326246", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<blockquote>\n  <p>What is the output, is it the same on all systems?</p>\n</blockquote>\n\n<p>The output is as you describe: the second of the two values. It's well defined.</p>\n\n<blockquote>\n  <p>Why is that statement possible?</p>\n</blockquote>\n\n<p>Because the <em>comma operator</em> allows you to evaluate more than one thing in a single expression.</p>\n\n<blockquote>\n  <p>is there documentation on it?</p>\n</blockquote>\n\n<p>It's documented in the C++ standard, [expr.comma]. In C++11, that's 5.18.</p>\n\n<p>To summarise, the comma operator:</p>\n\n<ul>\n<li>evaluates the expression before the comma;</li>\n<li>discards that value;</li>\n<li>evaluates the expression after the comma;</li>\n<li>yields that value as the overall expression value.</li>\n</ul>\n\n<p>You can see that from your output: in each case, the output is the value after the comma.</p>\n\n<p>It's completely pointless in this case; but is useful if the first expression has side-effects which you want to sequence before the second, in a situation that only allows a single expression. For example:</p>\n\n<pre><code>for (int i = 0, j = n; i &lt; j; ++i, --j)\n</code></pre>\n\n<p>The operator allows the final expression to do two things, even though you can only put one expression there.</p>\n"}, {"comments": [{"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1423068393, "post_id": 28326739, "comment_id": 45001193, "body": "Welcome to stackoverflow."}], "tags": [], "owner": {"reputation": 120, "user_id": 4134552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645b3763f7c8b570211004bbee91465f?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp Programmer", "link": "https://stackoverflow.com/users/4134552/cpp-programmer"}, "is_accepted": false, "score": 2, "last_activity_date": 1423068108, "creation_date": 1423068108, "answer_id": 28326739, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why/28326739#28326739", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<p>In C++, a comma operator gives the compiler the order of evaluation. Usually the compiler is free to evaluate any expression the way it likes. But the comma operator evaluates  its left hand operand before the right hand operand and returns the value of the right hand operand. </p>\n\n<p>In a chain of operands linked by the comma operator, the returned value is the rightmost operand. </p>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4610, "favorite_count": 0, "accepted_answer_id": 28326246, "answer_count": 5, "score": 8, "last_activity_date": 1423068943, "creation_date": 1423066333, "last_edit_date": 1423067413, "question_id": 28326062, "link": "https://stackoverflow.com/questions/28326062/what-is-the-output-of-cout-a-b-and-why", "title": "What is the output of &quot;cout &lt;&lt; (a, b)&quot; and why?", "body": "<p><s>It is possible to combine boolean expressions with a comma separator.</s> I have seen it in a code and i am not sure what this resolves to. I wrote some sample code.</p>\n\n<pre><code>int BoolStatement(void)\n{\n    using std::cout;\n    using std::endl;\n\n    cout &lt;&lt; \"(0, 0) =&gt; \" &lt;&lt; (0, 0) &lt;&lt; endl;\n    cout &lt;&lt; \"(0, 1) =&gt; \" &lt;&lt; (0, 1) &lt;&lt; endl;\n    cout &lt;&lt; \"(1, 0) =&gt; \" &lt;&lt; (1, 0) &lt;&lt; endl;\n    cout &lt;&lt; \"(1, 1) =&gt; \" &lt;&lt; (1, 1) &lt;&lt; endl;\n    cout &lt;&lt; \"(0, 0) =&gt; \" &lt;&lt; (0, 0) &lt;&lt; endl;\n    cout &lt;&lt; \"(0, 3) =&gt; \" &lt;&lt; (0, 3) &lt;&lt; endl;\n    cout &lt;&lt; \"(5, 0) =&gt; \" &lt;&lt; (5, 0) &lt;&lt; endl;\n    cout &lt;&lt; \"(7, 1) =&gt; \" &lt;&lt; (7, 1) &lt;&lt; endl;\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output of this is:</p>\n\n<pre><code>(0, 0) =&gt; 0\n(0, 1) =&gt; 1\n(1, 0) =&gt; 0\n(1, 1) =&gt; 1\n(0, 0) =&gt; 0\n(0, 3) =&gt; 3\n(5, 0) =&gt; 0\n(7, 1) =&gt; 1\n</code></pre>\n\n<p>I am not sure if that is only true for my system and if this call is actually the same as a boolean combination of statements.</p>\n\n<p>What is the output, is it the same on all systems?\nWhy is that statement possible and is there documentation on it?</p>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 2, "creation_date": 1423066003, "post_id": 28325928, "comment_id": 44999420, "body": "The second will lead to larger bytecode (if you don&#39;t have a very smart compiler) and contains duplicate code, so prefer the first one."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 4, "creation_date": 1423066026, "post_id": 28325928, "comment_id": 44999432, "body": "Fast when running? Fast when compiling? Fast when typing?"}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 1, "creation_date": 1423066034, "post_id": 28325928, "comment_id": 44999438, "body": "I don&#39;t prefer any, use a map/an array or some other data structure."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1423066060, "post_id": 28325928, "comment_id": 44999456, "body": "Is this a bottleneck in our code? Have you measured?"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1423066085, "post_id": 28325928, "comment_id": 44999478, "body": "It would be interesting if someone did..."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 3, "creation_date": 1423066266, "post_id": 28325928, "comment_id": 44999600, "body": "I&#39;m voting to close this question as off-topic because it is pure speculation."}, {"owner": {"reputation": 11, "user_id": 4040276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466c7a253119c538042505ad113c781b?s=128&d=identicon&r=PG&f=1", "display_name": "Veljko", "link": "https://stackoverflow.com/users/4040276/veljko"}, "edited": false, "score": 0, "creation_date": 1423066338, "post_id": 28325928, "comment_id": 44999652, "body": "This is the only &quot;memory&quot; intensive block in the code and I&#39;m trying to  reduce the memory usage to minimum."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1423066366, "post_id": 28325928, "comment_id": 44999676, "body": "@JoachimPileborg: Pardon my being blunt, but unless you&#39;re asking that <i>purely</i> rhetorically, that&#39;s a silly question. This is some logic followed by writing to a stream. Essentially the only reasonable possibility is that the writing to a stream part <i>will</i> be the bottleneck, and it&#39;s identical between the two code snippets."}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1423066682, "post_id": 28325928, "comment_id": 44999907, "body": "What leads you to conclude that this code is &quot;memory&quot; intensive?  Define &quot;memory&quot; intensive.  Did you mean &quot;takes up a lot of memory?&quot; Or maybe &quot;causes lots of cache misses?&quot; Or something like that?"}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423066802, "post_id": 28326040, "comment_id": 44999987, "body": "First one obviously made it easier to do branch prediction. It only requires one register to store the condition and that condition only leads to one block of code. Stream is a bad example here because it&#39;s a heavy function and makes most other optimizations pointless."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423067020, "post_id": 28326040, "comment_id": 45000152, "body": "@user3528438: Sorry, but I don&#39;t quite understand. How does OPs first option benefit branch-prediction, if it will be compiled the same as as the second? And I treated the stream-insertion as simply an example-operation, though otherwise it will swamp everything else, true."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423067554, "post_id": 28326040, "comment_id": 45000560, "body": "&quot;cout &lt;&lt; &quot;DA&quot;;&quot; is a heavy function call and the the code will be compiled to a conditional jump, in this case, optimizations in the condition expression does not make much sense, and I suspect the compiler will make much effort actually doing optimization. But if the condition leads to something lighter weight, like a few arithmetic operations, it&#39;s completely different story."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 6, "last_activity_date": 1423067276, "last_edit_date": 1423067276, "creation_date": 1423066236, "answer_id": 28326040, "question_id": 28325928, "link": "https://stackoverflow.com/questions/28325928/faster-less-memory-if/28326040#28326040", "title": "Faster, less memory if?", "body": "<p>Both will lead to exactly the same compiled code, if your compiler is worth anything.<br>\nMaybe with the exception if you disable all optimization, a case which is simply not interesting to optimize.</p>\n\n<p>Thus, use the clearer code, which if in doubt is the shorter one:<br>\nUse the first variation.</p>\n\n<p>If you want to optimize things, consider computing <code>X[i]</code> and <code>Y[i]</code> only once if they are expensive (unlikely).<br>\nAlso, you could sort according to likelihood (though probably also not worth it if few enough tests).<br>\nWhat you could also try is changing short-circuiting operators for non-short-circuiting, to avoid jumps (this can backfire).</p>\n\n<p>As an aside, in this case the stream-insertion probably relegates the condition-testing to insignificance, performance-wise.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1423066302, "creation_date": 1423066302, "answer_id": 28326055, "question_id": 28325928, "link": "https://stackoverflow.com/questions/28325928/faster-less-memory-if/28326055#28326055", "title": "Faster, less memory if?", "body": "<p>Personally I'd go for the first one for the sake of clarity and little duplication.</p>\n\n<p>Also take advantage of short-cutting: put the most likely cases first.</p>\n\n<p>If X and Y are instances of a class with an expensive overloaded <code>[]</code> operator, then precompute <code>X[i]</code> and <code>Y[i]</code>. Note that <code>[]</code> is as cheap as variable access for trival types. If X and Y are instances of a template, then <em>always</em> precompute just in case <code>[]</code> is expensive for a particular type.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1423067295, "creation_date": 1423067295, "answer_id": 28326420, "question_id": 28325928, "link": "https://stackoverflow.com/questions/28325928/faster-less-memory-if/28326420#28326420", "title": "Faster, less memory if?", "body": "<p>Let me start by saying that nothing you can do here is likely to make any noticeable difference in speed or memory usage. The simple fact is that the time taken for the logic leading up to the write to <code>cout</code> is going to be completely lost in the noise. The write to <code>cout</code> itself is going to be such a huge majority of the time, <em>and</em> (at least usually) vary so widely that the time for the rest of the logic is 100% irrelevant.</p>\n\n<p>That said, you can almost certainly reduce the rest of the logic a little bit. The first check for x[i] == 0 &amp;&amp; y[i] == 0 can be reduced to <code>x[i] | y[i] == 0</code>. It looks like the remainder can be reduced to <code>unsigned(x[i])+4u &lt; 5u &amp;&amp; x[i] + y[i] == 2</code>.</p>\n\n<p>That reduces 6 conditions down to 3 conditions + a tiny bit of math. If this were in a tight loop without any I/O, I'd expect it to be noticeably faster (but with the result being a write to a stream, you probably won't even be able to <em>measure</em> a difference dependably, not to mention noticing the difference).</p>\n"}], "owner": {"reputation": 11, "user_id": 4040276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466c7a253119c538042505ad113c781b?s=128&d=identicon&r=PG&f=1", "display_name": "Veljko", "link": "https://stackoverflow.com/users/4040276/veljko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 28326040, "answer_count": 3, "score": -5, "last_activity_date": 1423067295, "creation_date": 1423065899, "last_edit_date": 1423065986, "question_id": 28325928, "link": "https://stackoverflow.com/questions/28325928/faster-less-memory-if", "title": "Faster, less memory if?", "body": "<p>I was wondering what was faster and used less memory, I would assume its this block but they might be the same:</p>\n\n<pre><code>if((X[i] == 0 &amp;&amp; Y[i] == 0) ||\n    (X[i] == 1 &amp;&amp; Y[i] == 1) ||\n    (X[i] == 0 &amp;&amp; Y[i] == 2) ||\n    (X[i] == -1 &amp;&amp; Y[i] == 3) ||\n    (X[i] == -2 &amp;&amp; Y[i] == 2) ||\n    (X[i] == -3 &amp;&amp; Y[i] == 1) ||\n    (X[i] == -4 &amp;&amp; Y[i] == 0)) cout &lt;&lt; \"DA\";\n</code></pre>\n\n<p>or maybe its this block:</p>\n\n<pre><code>if(X[i] == 0 &amp;&amp; Y[i] == 0) cout &lt;&lt; \"DA\";\nelse if(X[i] == 1 &amp;&amp; Y[i] == 1) cout &lt;&lt; \"DA\";\nelse if(X[i] == 0 &amp;&amp; Y[i] == 2) cout &lt;&lt; \"DA\";\nelse if(X[i] == -1 &amp;&amp; Y[i] == 3) cout &lt;&lt; \"DA\";\nelse if(X[i] == -2 &amp;&amp; Y[i] == 2) cout &lt;&lt; \"DA\";\nelse if(X[i] == -3 &amp;&amp; Y[i] == 1) cout &lt;&lt; \"DA\";\nelse if(X[i] == -4 &amp;&amp; Y[i] == 0) cout &lt;&lt; \"DA\";\n</code></pre>\n\n<p>or is there a faster method ? Thanks.</p>\n"}, {"tags": ["c++", "kinect", "kinect-sdk"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4529228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153715126885260/picture?type=large", "display_name": "Eva Chew", "link": "https://stackoverflow.com/users/4529228/eva-chew"}, "edited": false, "score": 0, "creation_date": 1423110516, "post_id": 28326436, "comment_id": 45018499, "body": "Thank you very much! That&#39;s the problem to set the filePointer to NULL. I made it as below and it works now!      if(filePointer)  \t{\t \t\tfilePointer = NULL; \t}     fopen_s(&amp;filePointer, &quot;C:/User/Users/Documents/Shasa/Kinect3D.txt&quot;, &quot;w+&quot;);  Thank you!"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 31, "user_id": 4529228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153715126885260/picture?type=large", "display_name": "Eva Chew", "link": "https://stackoverflow.com/users/4529228/eva-chew"}, "edited": false, "score": 0, "creation_date": 1423124865, "post_id": 28326436, "comment_id": 45023780, "body": "@EvaChew You can use <code>fopen_s</code> alone, because <code>fopen_s</code> don&#39;t care if <code>filePointer</code> is NULL or not. Also, <code>fopen_s</code> will return an error code if it fails, or 0 if successful. It can be a good idea to check this value."}, {"owner": {"reputation": 31, "user_id": 4529228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153715126885260/picture?type=large", "display_name": "Eva Chew", "link": "https://stackoverflow.com/users/4529228/eva-chew"}, "edited": false, "score": 0, "creation_date": 1423125502, "post_id": 28326436, "comment_id": 45024104, "body": "Got it. Thanks for the help! Could you help me in my other problem like this? <a href=\"http://stackoverflow.com/questions/28336226/how-to-initialize-two-kinect-simultaneously-skeletalviewer\" title=\"how to initialize two kinect simultaneously skeletalviewer\">stackoverflow.com/questions/28336226/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1423067335, "creation_date": 1423067335, "answer_id": 28326436, "question_id": 28325927, "link": "https://stackoverflow.com/questions/28325927/how-to-get-x-y-z-coordinates-of-skeletal-joints-from-latest-skeletalviewer/28326436#28326436", "title": "How to get (x, y, z) coordinates of skeletal joints from latest SkeletalViewer? (C++)", "body": "<p><code>skel.SkeletonPositions[i].x</code> is correct. Using <code>&amp; skel</code> instead of <code>* pskel</code> will only change <code>pskel-&gt;XXX</code> to <code>skel.XXX</code>.</p>\n\n<p>The problem would be here :</p>\n\n<pre><code>fopen_s(filePointer, \"C:/User/Users/Documents/Shasa/Kinect3D.txt\", \"w+\");\nfilePointer = NULL;\n</code></pre>\n\n<p>That should be :</p>\n\n<pre><code>fopen_s(&amp;filePointer, \"C:/User/Users/Documents/Shasa/Kinect3D.txt\", \"w+\");\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4529228, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153715126885260/picture?type=large", "display_name": "Eva Chew", "link": "https://stackoverflow.com/users/4529228/eva-chew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 637, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423067335, "creation_date": 1423065894, "question_id": 28325927, "link": "https://stackoverflow.com/questions/28325927/how-to-get-x-y-z-coordinates-of-skeletal-joints-from-latest-skeletalviewer", "title": "How to get (x, y, z) coordinates of skeletal joints from latest SkeletalViewer? (C++)", "body": "<p>I am a student and currently work on a project using multiple kinect cameras. I have to start out my project by acquiring the skeletal joint data from each of the kinect cameras and store them into two text files separately by using SkeletalViewer. </p>\n\n<p>I have made some modifications on SkeletalViewer.h as below:</p>\n\n<pre><code>public: \nFILE* filePointer;\nchar mText[1024];\n</code></pre>\n\n<p>And further modification in NuiImpl.cpp as below:</p>\n\n<pre><code>HRESULT CSkeletalViewerApp::Nui_Init() {\n\n    fopen_s(filePointer, \"C:/User/Users/Documents/Shasa/Kinect3D.txt\", \"w+\");\n    filePointer = NULL;\n     .\n     .\n     .\n}\n\nvoid CSkeletalViewerApp::Nui_DrawSkeleton( const NUI_SKELETON_DATA &amp; skel, int windowWidth, int windowHeight )\n{   \n    int i;\n\n    for (i = 0; i &lt; NUI_SKELETON_POSITION_COUNT; i++)\n    {\n        m_Points[i] = SkeletonToScreen(skel.SkeletonPositions[i], windowWidth, windowHeight);\n\n        memset(mText, 0, 1024);\n\n        sprintf(mText, \"(%0.3f,%0.3f,%0.3f)\", skel.SkeletonPositions[i].x, skel.SkeletonPositions[i].y, skel.SkeletonPositions[i].z);\n\n        if (filePointer) {\n            fputs((const char*)mText, filePointer);\n        }\n    }\n\n    if (filePointer) {\n        fputs(\"\\n\", filePointer);\n    }\n     .\n     .\n     .\n}\n</code></pre>\n\n<p>The result is the text file is made but the content is blank. I read through some of the solutions online but the previous version of <strong>Nui_DrawSkeleton function</strong> using <strong>NUI_SKELETON_DATA * pSkel</strong> as argument but this new version is different using <strong>NUI_SKELETON_DATA &amp; skel</strong>. Is it correct to use <strong>skel.SkeletonPositions[i].x, skel.SkeletonPositions[i].y, skel.SkeletonPositions[i].z</strong>?</p>\n\n<p>May I seek for anyone's help who can help me to see which cause my error and how to modify it? Thank you!</p>\n"}, {"tags": ["c#", "c++", "arrays"], "comments": [{"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1423066826, "post_id": 28325836, "comment_id": 45000003, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4335481/how-to-marshal-an-array-of-structure-in-c\">How to marshal an array of structure In C#?</a>"}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1423067079, "post_id": 28325836, "comment_id": 45000193, "body": "Can you post the C method declaration so we can check if the DllImport is written correctly?"}, {"owner": {"reputation": 1, "user_id": 4529314, "user_type": "registered", "profile_image": "https://graph.facebook.com/796087203773382/picture?type=large", "display_name": "Tuan Viet", "link": "https://stackoverflow.com/users/4529314/tuan-viet"}, "edited": false, "score": 0, "creation_date": 1423069951, "post_id": 28325836, "comment_id": 45002238, "body": "This is structure in C++   I32 __stdcall VelocityPlanning( U32               PosCount    , POS_DATA_2D<i>PosArray, PNT_DATA_2D</i>      PntArray  );"}, {"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1423172353, "post_id": 28325836, "comment_id": 45052689, "body": "That C++ doesn&#39;t look like it is accepting an array.  It looks like it is accepting a single POS_DATA_2D object, passed by value on the stack.  But your C# code clearly is passing a pointer to an array element.  I can&#39;t tell entirely without seeing the definition of POS_DATA_2D in the C++ code.  Can you post that too?  Also: Make sure you check the structure size and alignment."}, {"owner": {"reputation": 1, "user_id": 4529314, "user_type": "registered", "profile_image": "https://graph.facebook.com/796087203773382/picture?type=large", "display_name": "Tuan Viet", "link": "https://stackoverflow.com/users/4529314/tuan-viet"}, "edited": false, "score": 0, "creation_date": 1423574111, "post_id": 28325836, "comment_id": 45195254, "body": "This is truct of POS_DATA_2D     public struct POS_DATA_2D     {     public UInt32 u32_opt;     public Int32 i32_x;       public Int32 i32_y;     public Int32 i32_theta;     }"}], "owner": {"reputation": 1, "user_id": 4529314, "user_type": "registered", "profile_image": "https://graph.facebook.com/796087203773382/picture?type=large", "display_name": "Tuan Viet", "link": "https://stackoverflow.com/users/4529314/tuan-viet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423065640, "creation_date": 1423065640, "question_id": 28325836, "link": "https://stackoverflow.com/questions/28325836/use-c-array-crashed-when-access-element-in-c-api", "title": "Use C# array crashed when access element in c++ api", "body": "<p>I have 2 arrays in C# and one API in c++ (provided library, no source)</p>\n\n<pre><code>public struct POS_DATA_2D\n{\n    public UInt32 u32_opt;\n    public Int32 i32_x;\n    public Int32 i32_y;\n    public Int32 i32_theta;\n}\npublic struct PNT_DATA_2D\n{\n    public UInt32 u32_opt;\n    public Int32 i32_x;\n    public Int32 i32_y;\n    public Int32 i32_theta;\n    public Int32 i32_acc;\n    public Int32 i32_dec;\n    public Int32 i32_vi; \n    public Int32 i32_vm;\n    public Int32 i32_ve;\n}\nint cnt = 58;\nPOS_DATA_2D[] pPosarr = new POS_DATA_2D[cnt];\nPNT_DATA_2D[] pPntarr = new PNT_DATA_2D[cnt];\n</code></pre>\n\n<p>The problem is when I call the below API the program crashed. I guessed it accessed array element which isn't correct.</p>\n\n<pre><code>ADCNC_W32.APS168.VelocityPlanning(cnt, ref pPosarr[0], ref pPntarr[0]);\n</code></pre>\n\n<p>The description of that API</p>\n\n<pre><code> [DllImport(\"ADCNC.dll\")]public static extern Int32 \nVelocityPlanning(\n    System.UInt32 PosCount    // [IN ] position array count, [1,4294967295]\n ,  ref POS_DATA_2D PosArray    // [IN ] position array start pointer, [!NULL]\n ,  ref PNT_DATA_2D PntArray    // [OUT] point array start pointer, [!NULL]\n );\n</code></pre>\n\n<p>Please help me to point out the incorrect points. Thanks!</p>\n"}, {"tags": ["c++", "visual-studio-2010", "imagemagick"], "comments": [{"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423066669, "post_id": 28325730, "comment_id": 44999895, "body": "Place <code>doc.pdf</code> in the same directory as the executable and try to open <code>Magick::readImages( &amp;imageList, &quot;doc.pdf&quot; );</code>, if this works than its your path"}, {"owner": {"reputation": 744, "user_id": 2273792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45615e9d84a67b9d270e3978da537e82?s=128&d=identicon&r=PG", "display_name": "Juan Garcia", "link": "https://stackoverflow.com/users/2273792/juan-garcia"}, "reply_to_user": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 1, "creation_date": 1423068968, "post_id": 28325730, "comment_id": 45001597, "body": "@JamesMore I was try it but investigating, the problem is related about ghostscript that I have not installed on my machine. I&#39;m right?"}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423069401, "post_id": 28325730, "comment_id": 45001891, "body": "Try to open a different file format and see it it stills fails. What is your definition of <code>&amp;imageList</code>?"}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 1, "creation_date": 1423070592, "post_id": 28325730, "comment_id": 45002666, "body": "It looks like you need to install ghostscript as Magick uses ghostscript to read .pdf files as you said, <a href=\"http://stackoverflow.com/questions/4885194/pdf-to-image-magick?rq=1\">PDF to Image Magic++</a>"}, {"owner": {"reputation": 744, "user_id": 2273792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45615e9d84a67b9d270e3978da537e82?s=128&d=identicon&r=PG", "display_name": "Juan Garcia", "link": "https://stackoverflow.com/users/2273792/juan-garcia"}, "reply_to_user": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423123361, "post_id": 28325730, "comment_id": 45023101, "body": "<code>&amp;imageList is a std::vector&lt;Image&gt; imageList;</code> and of course, vector is included. As you say, the problem is about I&#39;m not using ghostscript."}], "owner": {"reputation": 744, "user_id": 2273792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/45615e9d84a67b9d270e3978da537e82?s=128&d=identicon&r=PG", "display_name": "Juan Garcia", "link": "https://stackoverflow.com/users/2273792/juan-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1544, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423065339, "creation_date": 1423065339, "question_id": 28325730, "link": "https://stackoverflow.com/questions/28325730/magickreadimage-return-exception-system-cannot-find-the-file-specified-pdf-fi", "title": "Magick::readImage return exception System cannot find the file specified (pdf file)", "body": "<p>Using ImageMagick in Visual Studio 2010, the readImage method can't load one pdf file, returning std::exception. This is the code:</p>\n\n<pre><code>try\n{\n   Magick::readImages( &amp;imageList, \"C:\\\\Users\\\\user\\\\Desktop\\\\doc.pdf\" );\n}\ncatch(std::exception &amp;ex)\n{\n    std::cout &lt;&lt; ex.what()&lt;&lt; std::endl;\n}\ncatch(...){\n    std::cout &lt;&lt; \"No chatched\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The file exist and path is well formed. The output is:</p>\n\n<pre><code>PDFDelegateFailed `The system cannot find the file specified.\n</code></pre>\n\n<p>Its pass when I execute from cmd.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1423065469, "post_id": 28325589, "comment_id": 44999026, "body": "Why do you dereference <code>szBuf</code> when calling <code>ReadFile()</code>? By passing szBuf directly you implicitly do <code>&amp;szBuf[0]</code> which should be the correct approach to call this function."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423065627, "post_id": 28325589, "comment_id": 44999164, "body": "You forgot to properly initialize ovRead, use <code>OVERLAPPED ovRead = {};</code>"}, {"owner": {"reputation": 123, "user_id": 3053321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de4cf8589c7dc7b08baab0178338c9f8?s=128&d=identicon&r=PG&f=1", "display_name": "user188757", "link": "https://stackoverflow.com/users/3053321/user188757"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423066398, "post_id": 28325589, "comment_id": 44999705, "body": "@HansPassant you were correct, that was my error. Post it as an answer and I will accept it."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423067460, "post_id": 28325589, "comment_id": 45000495, "body": "You can ask David to update his answer."}], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1423065504, "post_id": 28325711, "comment_id": 44999063, "body": "You mean to pass <code>&amp;szBuf[0]</code> *"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1423065562, "post_id": 28325711, "comment_id": 44999112, "body": "@Vinzenz Silly typo, <code>szBuf</code> is what I meant, now fixed, thanks"}, {"owner": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1423065649, "post_id": 28325711, "comment_id": 44999174, "body": "yes, but you wrote <code>&amp;szBuf</code> instead of <code>szBuf</code>. Also its just a language thing. In the end <code>szBuf</code> and <code>&amp;szBuf[0]</code> are the same ;)"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423065650, "post_id": 28325711, "comment_id": 44999176, "body": "There is no &quot;must&quot;, it is only a recommendation."}, {"owner": {"reputation": 123, "user_id": 3053321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de4cf8589c7dc7b08baab0178338c9f8?s=128&d=identicon&r=PG&f=1", "display_name": "user188757", "link": "https://stackoverflow.com/users/3053321/user188757"}, "edited": false, "score": 0, "creation_date": 1423065730, "post_id": 28325711, "comment_id": 44999225, "body": "I agree, I have probably not understood it fully. But that is the end means. Thanks for the quick response, I will look into changing the code."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1423065868, "post_id": 28325711, "comment_id": 44999318, "body": "@Vinzenz I made a mistake. I wrote something I did not intend to do. Thank you for pointing out my mistake. I fixed it."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423065930, "post_id": 28325711, "comment_id": 44999364, "body": "@HansPassant The documentation says <i>Use NULL for this parameter if this is an asynchronous operation to avoid potentially erroneous results.</i> which leaves little room for manoeuvre in my view."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 4, "last_activity_date": 1423068176, "last_edit_date": 1423068176, "creation_date": 1423065287, "answer_id": 28325711, "question_id": 28325589, "link": "https://stackoverflow.com/questions/28325589/win-api-readfile-returns-getlasterror-error-invalid-parameter/28325711#28325711", "title": "WIN API ReadFile() returns GetLastError() ERROR_INVALID_PARAMETER", "body": "<pre><code>ReadFile(cThis-&gt;m_hSerial, &amp;szBuf, nSize, &amp;dwBytesRead, &amp;ovRead)\n</code></pre>\n\n<p>You are asking for an asynchronous operation, but also asking the function to tell you how many bytes have been read. You passed <code>&amp;dwBytesRead</code> as the penultimate parameter. When you are performing overlapped reading, pass <code>NULL</code> for this parameter. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365467.aspx\" rel=\"nofollow\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Use NULL for this parameter if this is an asynchronous operation to avoid potentially erroneous results.</p>\n</blockquote>\n\n<p>It is also a mistake to pass <code>&amp;szBuf</code> in the code above. You mean to pass <code>szBuf</code>.</p>\n\n<p>You also fail to initialize the <code>OVERLAPPED</code> struct. Do so like this:</p>\n\n<pre><code>OVERLAPPED ovRead = {};\n</code></pre>\n\n<p>A bigger problem is that you ask for asynchronous access, but then write the code as it it were synchronous. As soon as <code>ReadFile</code> returns you attempt to get meaningful information out of <code>dwBytesRead</code> and you close the event that you put in the overlapped struct.</p>\n\n<p>If you are really going code this asynchronously, you need to re-write the code to be asynchronous. On the face of it, it looks as though you have not fully understood the implications of overlapped I/O and you should perhaps switch to non-overlapped, synchronous I/O.</p>\n"}], "owner": {"reputation": 123, "user_id": 3053321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de4cf8589c7dc7b08baab0178338c9f8?s=128&d=identicon&r=PG&f=1", "display_name": "user188757", "link": "https://stackoverflow.com/users/3053321/user188757"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1786, "favorite_count": 0, "accepted_answer_id": 28325711, "answer_count": 1, "score": 3, "last_activity_date": 1423068176, "creation_date": 1423064980, "question_id": 28325589, "link": "https://stackoverflow.com/questions/28325589/win-api-readfile-returns-getlasterror-error-invalid-parameter", "title": "WIN API ReadFile() returns GetLastError() ERROR_INVALID_PARAMETER", "body": "<p>I wrote this code below and it worked fine under code::blocks using mingw gcc 4.7 to compile it. I have since decided to start using Visual Studio 2013 express. Now I am getting an error when ReadFile() is called. Which seems to be an invalid parameter. I can't see the error hoping someone here can spot it.</p>\n\n<p>This is all wrapped inside a class Serial. From what I can see in the IDE the memory reference for m_hSerial is correct when compared to the reference CreateFile() returns to the handle.</p>\n\n<pre><code>m_hSerial = CreateFile(m_pchPort,\n                       GENERIC_READ | GENERIC_WRITE,\n                       0,\n                       0,\n                       OPEN_EXISTING,\n                       FILE_FLAG_OVERLAPPED,\n                       0);\n</code></pre>\n\n<p>I call the WorkThread like so</p>\n\n<pre><code>m_hThread = (HANDLE)_beginthreadex(0, 0, &amp;WorkThread, (void*) this, 0, 0);\n</code></pre>\n\n<p>Here is the WorkThread code</p>\n\n<pre><code>unsigned int __stdcall Serial::WorkThread(void* pvParam)\n{\n// This is a pointer to the 'this' serial class.\n// Needed to be able to set members of the class in a static class function\nSerial * cThis = (Serial*) pvParam;\n// Set up the overlapped event\nOVERLAPPED ov;\nmemset(&amp;ov, 0, sizeof(ov));\nov.hEvent = CreateEvent(0, true, 0, 0);\nDWORD dwEventMask = 0;\nDWORD dwWait;\nHANDLE aHandles[2];\naHandles[0] = cThis-&gt;m_hThreadTerminator;\naHandles[1] = ov.hEvent;\n\nSetEvent(cThis-&gt;m_hThreadRunning);\nwhile (true)\n{\n    if (!WaitCommEvent(cThis-&gt;m_hSerial, &amp;dwEventMask, &amp;ov))\n    {\n        assert(GetLastError() == ERROR_IO_PENDING);\n\n    }\n\n    dwWait = WaitForMultipleObjects(2, aHandles, FALSE, INFINITE);\n    switch(dwWait)\n    {\n        case WAIT_OBJECT_0:\n        {\n            _endthreadex(1);\n        }\n        case WAIT_OBJECT_0 + 1:\n        {\n            if (dwEventMask &amp; EV_TXEMPTY)\n            {\n                ResetEvent(ov.hEvent);\n            }\n            else if (dwEventMask &amp; EV_RXCHAR)\n            {\n                // read data here\n                DWORD dwBytesRead = 0;\n                DWORD dwErrors;\n                COMSTAT cStat;\n                OVERLAPPED ovRead;\n                ovRead.hEvent = CreateEvent(0, true, 0, 0);\n\n                // Get the Bytes in queue\n                ClearCommError(cThis-&gt;m_hSerial, &amp;dwErrors, &amp;cStat);\n                DWORD nSize = cStat.cbInQue;\n                // EM_REPLACESEL needs a LPARAM null terminated string, make room and set the CString NULL\n                char *szBuf = new char[nSize+1];\n                memset(szBuf, 0x00, sizeof(szBuf));\n\n                if (!ReadFile(cThis-&gt;m_hSerial, &amp;szBuf, nSize, &amp;dwBytesRead, &amp;ovRead))\n                    DWORD err = GetLastError();\n                if (dwBytesRead == nSize)\n                    SendMessage(cThis-&gt;m_hHwnd, WM_SERIAL, 0, LPARAM(&amp;szBuf));\n\n                CloseHandle(ovRead.hEvent); // clean up!!!\n                delete[] szBuf;\n            }\n            // Reset the overlapped event\n            ResetEvent(ov.hEvent);\n        }\n        break;\n    }//switch\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "templates", "variadic"], "comments": [{"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1423067871, "post_id": 28325544, "comment_id": 45000798, "body": "Looks like a unit test for some compilers templating engine."}], "answers": [{"comments": [{"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1423078243, "post_id": 28326287, "comment_id": 45006906, "body": "This excellent solution gets my vote, of course.  But it&#39;s not working with different pack templates.  For example, when I try to reverse <code>Pack&lt;int, char, Group&lt;long, short, Wrap&lt;std::string, short, long&gt;, int&gt;, double, long&gt;</code>, I don&#39;t get the desired <code>Pack&lt;long, double, Group&lt;int, Wrap&lt;long, short, std::string&gt;, short, long&gt;, char, int&gt;</code>.  The same problem goes with my rotation example.  This was the point in using the template-template <code>P</code> in the solution."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1423078511, "post_id": 28326287, "comment_id": 45007043, "body": "@prestokeys It works just fine with different pack types. The problem is that your code will treat  <code>std::string</code> as a pack and reverse/rotate its template arguments as well; I&#39;m just following suit."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1423080088, "post_id": 28326287, "comment_id": 45007852, "body": "Ok, got rid of that part with another specialization <code>struct TransformNestedPack&lt;std::string, N, Parameters...&gt; { using type = std::string; };</code>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1423067750, "last_edit_date": 1423067750, "creation_date": 1423066910, "answer_id": 28326287, "question_id": 28325544, "link": "https://stackoverflow.com/questions/28325544/transforming-every-inner-pack-of-a-nested-pack/28326287#28326287", "title": "Transforming every inner pack of a nested pack", "body": "<p>First, instead of leaving the primary template of <code>TransformNestedPack</code> undefined, make it return the type unchanged if it is not a pack:</p>\n\n<pre><code>template &lt;typename T, int, int...&gt; struct TransformNestedPack {\n    using type = T; // do nothing for non-packs\n};\n</code></pre>\n\n<p>Then transforming a pack consists of 1) recursively applying <code>TransformNestedPack</code> to every type in the pack and 2) applying <code>PackTransformation</code> to the resulting pack of transformed types itself. Hence:</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class P, typename... Types, int N, int... Parameters&gt;\nstruct TransformNestedPack&lt;P&lt;Types...&gt;, N, Parameters...&gt; \n      : PackTransformation&lt;P&lt;typename TransformNestedPack&lt;Types, N, Parameters...&gt;::type...&gt;, \n                             N, Parameters...&gt; {};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3c11652c8e535c86\" rel=\"nofollow\">Demo</a>.</p>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28326287, "answer_count": 1, "score": 2, "last_activity_date": 1423067750, "creation_date": 1423064866, "question_id": 28325544, "link": "https://stackoverflow.com/questions/28325544/transforming-every-inner-pack-of-a-nested-pack", "title": "Transforming every inner pack of a nested pack", "body": "<p>Here, as an example, I will try to rotate the templates arguments in a pack to the left by N, but I want this done to every inner pack of a nested pack as well.  The code below only works if that inner pack is the first type in the pack though and I need to know how to check every type in the pack if it is nested and then apply the transformation to each.  <code>TransformNestedPack</code> is what I'm working on.  The reason for <code>PackTransformation</code> is so that <code>TransformNestedPack</code> can be reused for any transformation (rotation is just an example I'm using).  So I'm trying to perfect <code>TransformNestedPack</code> using the general transformation <code>PackTransformation</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// Rotating a pack N to the left.\ntemplate &lt;int, typename&gt; struct Rotate;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename First, typename... Rest&gt;\nstruct Rotate&lt;0, P&lt;First, Rest...&gt;&gt; {\n    using type = P&lt;First, Rest...&gt;;\n};\n\ntemplate &lt;int N, int K&gt;\nstruct PositiveModulo : std::integral_constant&lt;int, (N % K + K) % K&gt; {};\n\ntemplate &lt;int N, template &lt;typename...&gt; class P, typename First, typename... Rest&gt;\nstruct Rotate&lt;N, P&lt;First, Rest...&gt;&gt; :\n    Rotate&lt;PositiveModulo&lt;N-1, sizeof...(Rest)+1&gt;::value, P&lt;Rest..., First&gt;&gt; {};\n\nenum {Rot, Rev, /* ... */};  // enum values for each type of pack transformation.\n\ntemplate &lt;typename, int, int...&gt; struct PackTransformation;\n\n// Specializations of PackTransformation to carry out each type of pack transformation.\ntemplate &lt;template &lt;typename...&gt; class P, int N, typename... Types&gt;\nstruct PackTransformation&lt;P&lt;Types...&gt;, Rot, N&gt; {\n    using type = typename Rotate&lt;N, P&lt;Types...&gt;&gt;::type;\n};\n// Similarly struct PackTransformation&lt;P&lt;Types...&gt;, Rev&gt; will reverse P&lt;Types...&gt;, etc...\n\n// Attempt to have PackTransformation applied to each inner pack in a nested pack:\ntemplate &lt;typename, int, int...&gt; struct TransformNestedPack;\n\n// Normal transformation, because the first type is not a pack:\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, int N, int... Parameters&gt;\nstruct TransformNestedPack&lt;P&lt;Types...&gt;, N, Parameters...&gt; : PackTransformation&lt;P&lt;Types...&gt;, N, Parameters...&gt; {};\n\n// Specialization for when the first type is a pack:\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, typename... Rest, int N, int... Parameters&gt;\nstruct TransformNestedPack&lt;P&lt;P&lt;Types...&gt;, Rest...&gt;, N, Parameters...&gt; :\n    PackTransformation&lt;P&lt;typename TransformNestedPack&lt;P&lt;Types...&gt;, N, Parameters...&gt;::type, Rest...&gt;, N, Parameters...&gt; {};\n// The problem above is that it checks only the first type.  It needs to check EVERY type.\n\ntemplate &lt;typename...&gt; struct Pack {};\n\nint main() {\n    using NestedPack = Pack&lt;Pack&lt;int, double, char, long&gt;, char, long, short&gt;;\n    PackTransformation&lt;NestedPack, Rot, 2&gt;::type a;  // Rotates NestedPack to the left by 2, but not the inner pack.\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; std::is_same&lt; decltype(a),\n        Pack&lt;long, short, Pack&lt;int, double, char, long&gt;, char&gt;\n    &gt;::value &lt;&lt; std::endl;  // true\n\n    TransformNestedPack&lt;NestedPack, Rot, 2&gt;::type b;\n    std::cout &lt;&lt; std::is_same&lt; decltype(b),\n        Pack&lt;long, short, Pack&lt;char, long, int, double&gt;, char&gt;\n    &gt;::value &lt;&lt; std::endl;  // true\n    // The above currently works only if there is one nested pack and that nested pack is the first type.\n}\n</code></pre>\n\n<p>I just need to generalize the above by checking every type if it is a pack, not just the first one.</p>\n"}, {"tags": ["c++", "boost", "boost-range"], "comments": [{"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 0, "creation_date": 1423067492, "post_id": 28325504, "comment_id": 45000517, "body": "to some extent - VS2012"}, {"owner": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 0, "creation_date": 1423067629, "post_id": 28325504, "comment_id": 45000617, "body": "I don&#39;t know how much C++11 does VS2012 support, but if it has trailing return type and <code>auto</code>, you&#39;re pretty much set."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 0, "creation_date": 1423067710, "post_id": 28325504, "comment_id": 45000671, "body": "And how I supposed to declare the retVal local variable?"}, {"owner": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 1, "creation_date": 1423067812, "post_id": 28325504, "comment_id": 45000747, "body": "<code>auto retVal = &#47;* first boost::join call *&#47; ;</code> Then adjust the loop accordingly. EDIT Nevermind, you&#39;re using <code>retVal</code> in the call itself. :/"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 0, "creation_date": 1423067899, "post_id": 28325504, "comment_id": 45000820, "body": "huh, quite ugly solution, but may work. EDIT: you damn right, thats the problem, the first call to join"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1423095161, "post_id": 28325504, "comment_id": 45014743, "body": "Hehe. I <a href=\"http://stackoverflow.com/questions/27012395/appending-ranges-in-loop#comment42553452_27012781\"><b>knew</b> you would come to tackle this problem</a> for real once. Not three months :)"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1423108810, "post_id": 28325504, "comment_id": 45018027, "body": "yeah, just wanted to update that question - any_range is no-no solution. and of course none of tests revealed the problem, it popped out of nowhere in production :)"}], "answers": [{"comments": [{"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1423075525, "post_id": 28327868, "comment_id": 45005459, "body": "sounds interesting, will check it tomorrow. I was hopping I&#39;m missing something fundamental in joined_range usage and there is a simple solution. Looks like I was wrong."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 1, "last_activity_date": 1423071701, "last_edit_date": 1495542776, "creation_date": 1423071701, "answer_id": 28327868, "question_id": 28325504, "link": "https://stackoverflow.com/questions/28325504/how-to-join-multiple-boost-ranges-and-return-as-a-result-from-function-w-o-using/28327868#28327868", "title": "How to join multiple boost ranges and return as a result from function w/o using boost::any_range", "body": "<p>Since you have (or can generate) a range of ranges of the same type, you need a <em>flattening range</em>. Using Jesse Good's <code>flatten</code> from <strong><a href=\"https://stackoverflow.com/questions/13790935/iterating-over-a-range-of-ranges\">Iterating over a range of ranges</a></strong>:</p>\n\n<pre><code>return flatten(boost::irange(0, 10)\n    | boost::adaptors::transform(\n        [this](int i){ return m_someDataContainer.equal_range(i); }));\n</code></pre>\n\n<p>Unfortunately I think that this will probably leave the iterators dangling, so you should adapt the <code>flatten</code> there to copy the range into its return value; you can do this with multiple inheritance:</p>\n\n<pre><code>template&lt;typename Cont&gt; using FlatIteratorRange\n    = boost::iterator_range&lt;flattening_iterator&lt;decltype(std::declval&lt;Cont&gt;().begin())&gt;;\n\ntemplate&lt;typename Cont&gt;\nstruct FlatRange\n    : private Cont\n    , public FlatIteratorRange&lt;Cont&gt;\n{\n    explicit FlatRange(Cont const&amp; c)\n        : Cont(c)\n        , FlatIteratorRange&lt;Cont&gt;(\n            flat_iter(this-&gt;Cont::begin(), this-&gt;Cont::end()),\n            flat_iter(this-&gt;Cont::end()));\n    {}\n}\n\ntemplate&lt;typename Cont&gt;\nauto flatten(Cont const&amp; c) -&gt; FlatRange&lt;Cont&gt;\n{\n    return FlatRange&lt;Cont&gt;(c);\n}\n</code></pre>\n"}], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 1, "accepted_answer_id": 28327868, "answer_count": 1, "score": 1, "last_activity_date": 1423071701, "creation_date": 1423064747, "last_edit_date": 1423069790, "question_id": 28325504, "link": "https://stackoverflow.com/questions/28325504/how-to-join-multiple-boost-ranges-and-return-as-a-result-from-function-w-o-using", "title": "How to join multiple boost ranges and return as a result from function w/o using boost::any_range", "body": "<p>Example:<br></p>\n\n<pre><code>SomeType bar::foo() const {\n  SomeType retVal;\n  for (auto i = 0u; i &lt; 10; ++i) {\n    retVal = boost::range::join(retVal, m_someDataContainer.equal_range(i));\n  }\n  return retVal;\n}\n</code></pre>\n\n<p><br>\nLets say, for simplicity, the m_someDataContainer and the bar class are defined as following:</p>\n\n<pre><code>typedef boost::multi_index_container&lt;\n    int, bmi::indexed_by&lt;bmi::hashed_unique&lt;bmi::tag&lt;struct someTag&gt;,\n                                           bmi::identity&lt;int&gt;&gt;&gt;&gt; Data;\nclass bar {\npublic:\n  SomeType foo() const;\n\nprivate:\n  Data m_someDataContainer;\n};\n</code></pre>\n\n<p>The questions are:\nHow do I figure out the return type of foo() and how do I join these ranges without using boost::any_range</p>\n\n<p>EDIT1: Looks like it is quite impossible, calling join in loop on previous joined value makes the result type a nested type of joined_range of joined_range of joined_range ... and so on, which, I guess cannot be deduced easily if at all</p>\n"}, {"tags": ["c++", "multidimensional-array", "vector"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1423064705, "post_id": 28325432, "comment_id": 44998523, "body": "so what&#39;s wrong with <code>ptr-&gt;at(index1)[index2]</code>? BTW, you <b>do</b> realize that the <code>-&gt;</code> operator also dereferences the pointer? Also, <code>ptr-&gt;operator[](index1)[index2]</code> would work too."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1423064768, "post_id": 28325432, "comment_id": 44998554, "body": "You have a pointer to &quot;something&quot;. You&#39;re not getting at that &quot;something&quot; without dereferencing, Liking it makes no difference."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1423065889, "post_id": 28325432, "comment_id": 44999332, "body": "The most effective way to avoid dereferencing pointers, in my personal experience, is to not use pointers."}], "answers": [{"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 4, "last_activity_date": 1423066284, "last_edit_date": 1423066284, "creation_date": 1423064914, "answer_id": 28325561, "question_id": 28325432, "link": "https://stackoverflow.com/questions/28325432/accessing-multidimensional-c-stdvector/28325561#28325561", "title": "Accessing multidimensional C++ std::vector", "body": "<p>You have to dereference the pointer to access the outer vector, just as you do with the one-dimensional vector (using <code>-&gt;</code> rather than <code>*</code>). You can use <code>at</code> rather than <code>operator[]</code> on either vector if you like.</p>\n\n<pre><code>ptr_to_vec-&gt;at(index1).at(index2);\n</code></pre>\n\n<blockquote>\n  <p>I would like to avoid pointer dereferencing in the code.</p>\n</blockquote>\n\n<p>You can only do that by avoiding pointers. That's a good idea if you can  - using a reference, or directly accessing a variable - but there's not enough information to tell whether that's an option in your case.</p>\n"}, {"tags": [], "owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1423065618, "creation_date": 1423065618, "answer_id": 28325826, "question_id": 28325432, "link": "https://stackoverflow.com/questions/28325432/accessing-multidimensional-c-stdvector/28325826#28325826", "title": "Accessing multidimensional C++ std::vector", "body": "<p>Is there any reason you need to use a pointer to a <code>vector</code>?  If you are just using it as a stack variable there really isn't any reason to use a pointer, and if you are passing it to a function or class you could use a reference instead (<code>void func(vector&lt;vector&lt;T&gt; &gt; &amp;vec)</code> or <code>myclass(vector&lt;vector&lt;T&gt; &gt; &amp;vec)</code>).  From a syntax point of view, this would mean no dereferencing.</p>\n"}], "owner": {"reputation": 3, "user_id": 4428548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48bd8f66d65d40233997c11bf05eea73?s=128&d=identicon&r=PG&f=1", "display_name": "Gian.A.", "link": "https://stackoverflow.com/users/4428548/gian-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 28325561, "answer_count": 2, "score": -3, "last_activity_date": 1423066284, "creation_date": 1423064560, "last_edit_date": 1423065477, "question_id": 28325432, "link": "https://stackoverflow.com/questions/28325432/accessing-multidimensional-c-stdvector", "title": "Accessing multidimensional C++ std::vector", "body": "<p>Question:</p>\n\n<p>If I have a pointer to 1D std::vector I can access its content through function <code>at(index)</code> like</p>\n\n<pre><code>std::vector&lt;T&gt; *ptr_to_vec;\nT vec_value = ptr_to_vec-&gt;at(index);\n</code></pre>\n\n<p>Is there a way of using this for multidimensional std::vector as well, or I am stuck with pointer dereferencing?</p>\n\n<pre><code>std::vector&lt;vector&lt;T&gt; &gt; *ptr_to_2Dvec;\nT 2Dvec_value = (*ptr_to_2Dvec)[index1][index2];\n</code></pre>\n\n<p>I would like to avoid pointer dereferencing in the code.</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1423064666, "post_id": 28325381, "comment_id": 44998490, "body": "You should probably check that the writing actually succeeds."}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1423064853, "post_id": 28325381, "comment_id": 44998612, "body": "Interestingly, changing from <code>unsigned char</code> template parameter to just <code>char</code> (as <code>std::fstream</code> is typedefed) solves the issue. I&#39;m not 100% sure why though; I&#39;d have to delve into the STL bowels to figure that one out."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1423064970, "post_id": 28325381, "comment_id": 44998693, "body": "Standard streams are only guaranteed to have specializations with <code>char</code> and <code>wchar_t</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1423065160, "post_id": 28325381, "comment_id": 44998825, "body": "You don&#39;t need to flush and close, the stream does that when it dies."}, {"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423065516, "post_id": 28325381, "comment_id": 44999072, "body": "The template argument should be <code>char</code> not <code>unsigned char</code> if your printing characters, see <a href=\"http://stackoverflow.com/questions/75191/what-is-an-unsigned-char\">what is an unsigned char</a>"}, {"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1423065733, "post_id": 28325381, "comment_id": 44999229, "body": "works with Visual Studio 2013"}, {"owner": {"reputation": 91, "user_id": 2964394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325cd64431ad1a4afcc230d0ec39d824?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/2964394/lukas"}, "reply_to_user": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423066667, "post_id": 28325381, "comment_id": 44999891, "body": "@JamesMoore it is unsigned char in order to be able to use binary data. I cut out all that stuff to have a lightweight example. The real code works with binary data and I don&#39;t only store characters, I store literally everything since it is intended to become a database when it&#39;s finished. I would use char if I knew a cast from unsigned to signed that works lossless in terms of a 1:1 binary layout of the data."}, {"owner": {"reputation": 91, "user_id": 2964394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325cd64431ad1a4afcc230d0ec39d824?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/2964394/lukas"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1423066763, "post_id": 28325381, "comment_id": 44999957, "body": "@molbdnilo I added the flush because I thought it was worth trying. So in order to prevent comments like &#39;try flushing&#39; I left it in here :P"}, {"owner": {"reputation": 91, "user_id": 2964394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325cd64431ad1a4afcc230d0ec39d824?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/2964394/lukas"}, "reply_to_user": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423066942, "post_id": 28325381, "comment_id": 45000100, "body": "@JamesMoore I just read <a href=\"http://stackoverflow.com/questions/5040920/converting-from-signed-char-to-unsigned-char-and-back-again\">this</a>. It describes how to cast <code>char</code> to <code>unsigned char</code> and vice versa."}, {"owner": {"reputation": 91, "user_id": 2964394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325cd64431ad1a4afcc230d0ec39d824?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/2964394/lukas"}, "edited": false, "score": 0, "creation_date": 1423067129, "post_id": 28325381, "comment_id": 45000217, "body": "Never the less I think not being able to use anything except <code>char</code> and <code>wchar_t</code> somewhat violates the paradigm of streams."}], "answers": [{"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1423073274, "last_edit_date": 1423073274, "creation_date": 1423071064, "answer_id": 28327683, "question_id": 28325381, "link": "https://stackoverflow.com/questions/28325381/stdbasic-fstreamput-has-no-effect/28327683#28327683", "title": "std::basic_fstream::put() has no effect", "body": "<p>Quoting <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/put\" rel=\"nofollow\">std::basic_ostream::put</a></p>\n\n<blockquote>\n  <p>Unlike formatted output functions, this function does not set the failbit if the output fails.  </p>\n</blockquote>\n\n<p>Even if you check the stream state there won't be any error shown. However, if you try to write something with a <em>formatted</em> output operation, a <code>std::bad_cast</code> exception will be thrown because, among the possible reasons, there is no facet corresponding for that locale, which is checked when that operation is done.   </p>\n\n<p>Raw operations do not care about localization therefore it can't fail for that reason, while it would if e.g the raw write failed.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/locale/has_facet\" rel=\"nofollow\">std::has_facet</a></p>\n\n<blockquote>\n  <p><strong>Exceptions</strong><br>\n  std::bad_cast if std::has_facet(loc) == false.</p>\n</blockquote>\n\n<p>Indeed, <code>std::ctype</code> is specialized for <code>char</code> and <code>wchar_t</code> not <code>unsigned char</code> which you will have to manually do. For <code>en_GB.utf8</code>, <code>std::has_facet&lt;std::ctype&lt;unsigned char&gt;&gt;( std::locale(\"en_GB.utf8\") ) == false</code></p>\n"}], "owner": {"reputation": 91, "user_id": 2964394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325cd64431ad1a4afcc230d0ec39d824?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/2964394/lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1423150436, "creation_date": 1423064445, "last_edit_date": 1423150436, "question_id": 28325381, "link": "https://stackoverflow.com/questions/28325381/stdbasic-fstreamput-has-no-effect", "title": "std::basic_fstream::put() has no effect", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main(int argc, char *argv[]) {\n    if (argc != 2) {\n        std::cout &lt;&lt; \"Usage: basics &lt;file&gt;\" &lt;&lt; std::endl;\n        return 0;\n    }\n\n    std::basic_fstream&lt;unsigned char&gt; stream;\n\n    stream.open(argv[1], std::fstream::out);\n    stream.put('T');\n    stream.put('E');\n    stream.put('S');\n    stream.put('T');\n    stream.flush();\n    stream.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>The file is being created but there is nothing inside it when I open it in an editor.\nMy compiler is <code>gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1)</code>.<br>\nWhat's wrong with it?</p>\n"}, {"tags": ["c++", "matlab", "simulink", "mex", "s-function"], "comments": [{"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 2, "creation_date": 1423066239, "post_id": 28325342, "comment_id": 44999577, "body": "Pretty much option 1.  Building a separate library is what I usually suggest.  Or to build the MEX file itself <a href=\"http://stackoverflow.com/a/27391300/2778484\">in Visual Studio</a>."}, {"owner": {"reputation": 134, "user_id": 3335057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-A_lvTWqQHa4/AAAAAAAAAAI/AAAAAAAAGMA/tL8HfxTnGoE/photo.jpg?sz=128", "display_name": "audrow", "link": "https://stackoverflow.com/users/3335057/audrow"}, "edited": false, "score": 0, "creation_date": 1494634697, "post_id": 28325342, "comment_id": 74928749, "body": "How did this work out? What did you end up doing? I&#39;m trying to do something similar."}, {"owner": {"reputation": 305, "user_id": 871495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ab768e231301c71407f72849cfa097b0?s=128&d=identicon&r=PG", "display_name": "Gustav-Gans", "link": "https://stackoverflow.com/users/871495/gustav-gans"}, "edited": false, "score": 0, "creation_date": 1502649993, "post_id": 28325342, "comment_id": 78285131, "body": "I ended up with a script that creates me that command line every time"}], "owner": {"reputation": 305, "user_id": 871495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ab768e231301c71407f72849cfa097b0?s=128&d=identicon&r=PG", "display_name": "Gustav-Gans", "link": "https://stackoverflow.com/users/871495/gustav-gans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1314, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1423064320, "creation_date": 1423064320, "question_id": 28325342, "link": "https://stackoverflow.com/questions/28325342/matlab-c-s-function-with-multiple-source-files", "title": "Matlab C++ S-Function with multiple source files", "body": "<p>I have a simulink model with a c++ s-function.\nThis s-function needs access to a lot of (>50) classes. Each class is consists of a header (<em>.h) and a source (</em>.cpp) file.\nI have also divided my code into multiple directories:</p>\n\n<pre><code>root\n-sfun.cpp\n-folder1\n--file1.h\n--file1.cpp\n--file2.h\n--file2.cpp\n-folder2\n--file3.h\n--file3.cpp\n...\n</code></pre>\n\n<p>For the compilation of the s-function I am using the mex-function:</p>\n\n<pre><code>mex -Ifolder1 -Ifolder2 -outdir bin sfun.cpp folder1/file1.cpp folder1/file2.cpp folder1/file3.cpp\n</code></pre>\n\n<p>(<a href=\"http://de.mathworks.com/help/matlab/ref/mex.html\" rel=\"nofollow\">http://de.mathworks.com/help/matlab/ref/mex.html</a>)</p>\n\n<p>But this gets very long and ugly with more and more files because I need to specify each header folder and earch source file separately.\nIs there a better way to create a mex file that needs access to lots of source files?</p>\n\n<p>I have the following ideas, but I am not sure what could be the correct and easiest way:</p>\n\n<ol>\n<li><p>Add all header and source files (fileX.h/ fileX.cpp) to an visual studio project and compile them to a *.lib file. Then compile only the sfun.cpp with the mex tool and provide access to the *.lib file</p></li>\n<li><p>Move all header and source files into one directory. This would shorten the command line as follows:</p>\n\n<pre><code>mex -outdir bin sfun.cpp file1.cpp file2.cpp file3.cpp\n</code></pre></li>\n<li><p>Making everything inline so that there is no need for a source file. (very ugly solution)</p></li>\n<li><p>Is there some kind of a makefile for the mex compiler?</p></li>\n<li><p>Include not only the header files but also the source files via a #include directive.</p></li>\n</ol>\n\n<p>At the moment I am not convinced of any of these ideas and I would appreciate any help.</p>\n\n<p>Thanks</p>\n\n<p>Edit1:\nOne annotation: This project should be ported to a dspace pc in a later stage. Do I need to consider something special in this case?</p>\n"}, {"tags": ["c++", "iterator", "boost-multi-index"], "answers": [{"comments": [{"owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "edited": false, "score": 0, "creation_date": 1423064649, "post_id": 28325424, "comment_id": 44998477, "body": "Thanks Barry. Is &#39;last&#39; iterator going to remain the same until the while loop ends? I stored coll.end() before the loop begins so I am wondering whether is it going to keep the same value after an &#39;erase&#39;"}, {"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "reply_to_user": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "edited": false, "score": 0, "creation_date": 1423065358, "post_id": 28325424, "comment_id": 44998957, "body": "@AbruzzoForteeGentile answer is yes, <code>end()</code> is a valid iterator (just like an iterator pointing to an actual element) and always remains valid after erasure."}, {"owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "reply_to_user": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1423066369, "post_id": 28325424, "comment_id": 44999679, "body": "@Joaquin. Hi, I need a bit of clarity (sorry to be a bit pedantic here); in my post I meant if the value stored in &#39;last&#39; remains valid after &#39;erase&#39;. I am sure that  a call t o &#39;end()&#39; will always be valid."}, {"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "reply_to_user": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "edited": false, "score": 0, "creation_date": 1423075488, "post_id": 28325424, "comment_id": 45005440, "body": "@AbruzzoForteeGentile the value stored in <code>last</code> remains valid."}, {"owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "reply_to_user": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1423220635, "post_id": 28325424, "comment_id": 45070125, "body": "@Joaquin: Thanks a lot!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1423064535, "creation_date": 1423064535, "answer_id": 28325424, "question_id": 28325299, "link": "https://stackoverflow.com/questions/28325299/about-erasing-an-interator-of-a-boost-multiindex/28325424#28325424", "title": "about erasing an interator of a boost multiindex", "body": "<p>The reason that <code>erase</code> for containers returns an iterator is to use that result:</p>\n\n<pre><code>first = coll.erase(first);\n</code></pre>\n\n<p>Then you don't have to worry about how the underlying implementation handles <code>erase</code> or whether it shifts elements around. (In a <code>vector</code>, for instance, your code would've skipped an element in your iteration) However, the <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/multi_index/doc/tutorial/indices.html#rnd_vs_vector\" rel=\"nofollow\">documentation</a> does state that:</p>\n\n<blockquote>\n  <p>It is tempting to see random access indices as an analogue of std::vector for use in Boost.MultiIndex, but this metaphor can be misleading, as both constructs, though similar in many respects, show important semantic differences. An advantage of random access indices is that their iterators, as well as references to their elements, are stable, that is, they remain valid after any insertions or deletions.</p>\n</blockquote>\n\n<p>Still, just seeing <code>coll.erase(first++)</code> is a flag for me, so prefer to do it the other way. </p>\n"}], "owner": {"reputation": 12965, "user_id": 245416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2dd35668d8f2c8931d75793fc3a52cf6?s=128&d=identicon&r=PG", "display_name": "Abruzzo Forte e Gentile", "link": "https://stackoverflow.com/users/245416/abruzzo-forte-e-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 28325424, "answer_count": 1, "score": 0, "last_activity_date": 1423064535, "creation_date": 1423064196, "question_id": 28325299, "link": "https://stackoverflow.com/questions/28325299/about-erasing-an-interator-of-a-boost-multiindex", "title": "about erasing an interator of a boost multiindex", "body": "<p>I'd like to delete some element out of a <code>boost multi-index</code> container by erasing iterators while visiting the collection.</p>\n\n<p>What I am not sure about is if any iterator invalidation is involved and  whether my code below would invalidate <code>first</code>and <code>last</code> iterators.</p>\n\n<p>If the code below is incorrect, which is the best way considering the specific index (<code>ordered_unique</code>) below?</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;stdint.h&gt;\n #include &lt;boost/multi_index_container.hpp&gt;\n #include &lt;boost/multi_index/ordered_index.hpp&gt;\n #include &lt;boost/multi_index/key_extractors.hpp&gt;\n #include &lt;boost/shared_ptr.hpp&gt;\n\n  using namespace std;\n\n  class MyClass{\n  public:  \n    MyClass(int32_t id) : id_(id) {}\n    int32_t id() const\n    { return id_; }\n  private:  \n    int32_t id_;\n  };\n\n  typedef boost::shared_ptr&lt;MyClass&gt; MyClass_ptr;\n\n  typedef boost::multi_index_container&lt;\n      MyClass_ptr,\n      boost::multi_index::indexed_by&lt;\n        boost::multi_index::ordered_unique&lt;\n          boost::multi_index::const_mem_fun&lt;MyClass,int32_t,&amp;MyClass::id&gt;\n        &gt;\n      &gt;\n    &gt; Coll;\n\n  int main() {\n\n    Coll coll;\n    // ..insert some entries 'coll.insert(MyClass_ptr(new MyClass(12)));'\n\n    Coll::iterator first = coll.begin();\n    Coll::iterator last  = coll.end();\n\n    while(first != last) {\n      if((*first)-&gt;id() == 3)\n        coll.erase(first++);\n      else \n        ++first;    \n    }  \n }\n</code></pre>\n"}, {"tags": ["c++", "containers", "invalidation"], "comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 1, "creation_date": 1423064227, "post_id": 28325260, "comment_id": 44998185, "body": "Paragraphs, capitalization? Proper spacing, perhaps?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1423064329, "post_id": 28325260, "comment_id": 44998252, "body": "&quot;...only the last position of a container is invalidated.&quot; - *What container?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423064411, "post_id": 28325260, "comment_id": 44998313, "body": "&quot;How can we be sure?&quot; -- because that&#39;s what the standard states. Because it does, implementors have to respect that condition. (Technically, the begin() iterator does not <i>need</i> to change for insert() or erase(), and thus it is more efficient to do so anyway.)  Note that the statement isn&#39;t true for all containers anyway. <code>std::map::erase()</code> only invalidates iterators of the <i>erased</i> element, for example."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1423064451, "post_id": 28325260, "comment_id": 44998350, "body": "<code>std::vector&lt;int&gt; v; v.resize(v.capacity()+1, 1);</code> <code>v.begin()</code> <i>is</i> invalidated (and will almost certainly be different in practice)."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423064478, "post_id": 28325260, "comment_id": 44998371, "body": "@DevSolar Where does the standard state that? The begin iterator can be invalidated, just like any other iterator. <b>Edit</b>: Oh I see, there&#39;s some fuzzy &quot;beginning of the container&quot; concept at play."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1423064624, "post_id": 28325260, "comment_id": 44998458, "body": "You are confusing the <code>begin()</code> iterator, which <i>can</i> be invalidated, with the address of the container itself, which cannot really change."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1423064692, "post_id": 28325260, "comment_id": 44998514, "body": "The book probably also didn&#39;t say that you shouldn&#39;t cache the iterator for the third element. Don&#39;t treat lack of warnings as approval."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1423064988, "post_id": 28325260, "comment_id": 44998708, "body": "@juanchopanza: I find clear documentation on iterator validity e.g. <a href=\"http://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\">here</a> or (even though I hesitate to link there) <a href=\"http://www.cplusplus.com/reference/map/map/insert/\" rel=\"nofollow noreferrer\">here</a>. Would you care to give an example where the standard states that <code>begin()</code> gets invalidated on a <code>insert()</code> or <code>erase()</code> operation? -- But I see where my statement could be read to be ambiguous. <b>Always check the documentation on the function you are using.</b> Which iterators are invalidated and which aren&#39;t is <i>documented</i>, and for a reason..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423065227, "post_id": 28325260, "comment_id": 44998871, "body": "@DevSolar <code>v.erase(v.begin());</code> and any call to <code>v.insert</code> that causes a re-allocation."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1423065591, "post_id": 28325260, "comment_id": 44999134, "body": "@juanchopanza: Yep, that&#39;s the one case where it actually does, because <code>std::vector::erase()</code> is <b>documented</b> to &quot;invalidate iterators and references <i>at or after the point of the erase</i>&quot;. But that&#39;s neither what the OP meant, nor what <i>I</i> meant in my initial comment: We can be sure about the validity or invalidity of iterators because the standard <i>defines</i> it, and thus implementors are required to <i>adhere</i> to it (and programmers to <i>check</i> it). My most profuse apologies for making a three-sentence comment instead of writing up a scientific tract including inline citations."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423065880, "post_id": 28325260, "comment_id": 44999325, "body": "@Codepolymer Uly: You might want to read <a href=\"http://stackoverflow.com/questions/6438086\">this SO question</a> or check <a href=\"http://www.cppreference.com\" rel=\"nofollow noreferrer\">online documentation</a> for the specifics of the various operations on containers."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423066543, "post_id": 28325260, "comment_id": 44999801, "body": "@DevSolar: but in the case of <code>insert</code> on a <code>std::vector</code>, the standard indicates that all references, pointers and iterators are invalidated if reallocation occurs. You can guarantee that reallocation during the insert doesn&#39;t occur by calling <code>reserve</code> prior to the insert (but the reserve may reallocate, of course, so you&#39;d need to cache the value of <code>begin</code> afterwards). (23.3.6.3/6, 23.3.6.5/1) Or am I, too, misunderstanding your point?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1423067512, "post_id": 28325260, "comment_id": 45000528, "body": "@rici: <i>sigh</i>... my point was thus: If a function <code>X()</code> of the standard is documented to do A but not B, we can rely on A happening and B not happening because that&#39;s what the standard documented, and an implementation not adhering to this would be in fault. And before you all raise <i>another</i> ticket on this, yes, there are things that have been <i>documented</i> but <i>not</i> implemented, <code>export</code> being the most cited example, so the usual &quot;exceptions nonwithstanding&quot; applies. So. Have I made myself clear now?  ?:-\\"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1423067788, "post_id": 28325260, "comment_id": 45000719, "body": "@DevSolar: More or less, and anyway it&#39;s a comment, but I think it would have been clearer to answer &quot;How can we be sure...?&quot; with &quot;Actually, we can&#39;t be sure that the address of the beginning of a container remains constant because the standard says it will be invalidated in some circumstances.&quot; But whatever."}], "answers": [{"tags": [], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": true, "score": 2, "last_activity_date": 1423064939, "creation_date": 1423064939, "answer_id": 28325570, "question_id": 28325260, "link": "https://stackoverflow.com/questions/28325260/why-c-doesnt-invalidate-begin-when-using-containers/28325570#28325570", "title": "Why C++ doesn&#39;t invalidate begin() when using containers", "body": "<p>Every container has its own specification as to what operations invalidate which iterators. The specifications are based on the expected implementations.</p>\n\n<p>For example, <code>erase()</code> on a vector will invalidate only iterators past the new end, because all <code>erase()</code> does is destroy objects beyond the new end and update the vector's size: that means that the objects before the new end are not destroyed and they stay at the same memory locations, so iterators and pointers to those objects remain the same.</p>\n\n<p>On the other hand, <code>insert()</code> on a vector will cause the internal buffer to be reallocated if the new <code>size()</code> is larger than the current <code>capacity()</code>, which means all the objects may be moved and thus all the iterators and pointers into the vector would get invalidated, including <code>begin()</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4529230, "user_type": "registered", "profile_image": "https://graph.facebook.com/397456513763794/picture?type=large", "display_name": "Codepolymer Uly", "link": "https://stackoverflow.com/users/4529230/codepolymer-uly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1423065706, "accepted_answer_id": 28325570, "answer_count": 1, "score": -3, "last_activity_date": 1423064939, "creation_date": 1423064102, "last_edit_date": 1423064299, "question_id": 28325260, "link": "https://stackoverflow.com/questions/28325260/why-c-doesnt-invalidate-begin-when-using-containers", "closed_reason": "Needs details or clarity", "title": "Why C++ doesn&#39;t invalidate begin() when using containers", "body": "<p>As I read that using containers' insert() or erase() method can invalidate the container and therefore it's better to not cache the end of a container using iterators before performing the insert () or erase() operation, I am confused about why only the last position of a container is invalidated but not the 1st one. (No advice is told in book that we should not cache an iterator referring the begin() of a container).</p>\n\n<p>It may seem a dumb question but doesn't \"invalidate\" mean a total change of addresses for elements in the container? How can we be sure that the address of beginning of container remains always the same?</p>\n"}, {"tags": ["c++", "oop", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "edited": false, "score": 0, "creation_date": 1423064387, "post_id": 28325238, "comment_id": 44998293, "body": "Is <code>gRenderer</code> NULL when you pass it into <code>SDL_CreateTextureFromSurface</code>?"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 0, "creation_date": 1423064717, "post_id": 28325238, "comment_id": 44998525, "body": "You probably only want one renderer."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1423064840, "post_id": 28325238, "comment_id": 44998599, "body": "Pass the variable to the class constructor or to the relevant functions."}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 1118417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79db119f25b719062a2950491360bae0?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1118417/tarc"}, "is_accepted": false, "score": 2, "last_activity_date": 1423065986, "last_edit_date": 1495541572, "creation_date": 1423064907, "answer_id": 28325558, "question_id": 28325238, "link": "https://stackoverflow.com/questions/28325238/accessing-a-variable-outside-a-class/28325558#28325558", "title": "Accessing a variable outside a class", "body": "<p>In order to access it, its file must be included in the file it will be used. Therefore, you should move the variable declaration to a header file (like <code>main.h</code>) and include it in <code>main.ccp</code> and in the files it will be used.</p>\n\n<p>To do so, though, in the header file you should declare it as <em>extern</em>, and in <code>main.cpp</code>, defined normally:</p>\n\n<pre><code>main.h\nextern SDL_Renderer* gRenderer;\n\nmain.cpp\nSDL_Renderer* gRenderer = NULL;\n</code></pre>\n\n<p>That way, the variable is defined and can be used across multiple files normally, retaining its value.</p>\n\n<p>If you want more information:\n<a href=\"https://stackoverflow.com/questions/1433204/how-do-i-use-extern-to-share-variables-between-source-files-in-c\">How do I use extern to share variables between source files?</a></p>\n"}], "owner": {"reputation": 93, "user_id": 3316177, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/c83n5.png?s=128&g=1", "display_name": "Shago", "link": "https://stackoverflow.com/users/3316177/shago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423156291, "creation_date": 1423064058, "last_edit_date": 1423156291, "question_id": 28325238, "link": "https://stackoverflow.com/questions/28325238/accessing-a-variable-outside-a-class", "title": "Accessing a variable outside a class", "body": "<p>I have a variable in a <code>main.cpp</code> file like this:</p>\n\n<pre><code>SDL_Renderer* gRenderer = NULL;\n</code></pre>\n\n<p>and I have a class that is in separate files (a <code>.h</code> and a <code>.cpp</code> file). \nInside the <code>.cpp</code> file I want to access <code>gRenderer</code> like this:</p>\n\n<pre><code>newTexture = SDL_CreateTextureFromSurface( gRenderer, loadedSurface );\n</code></pre>\n\n<p>I have tried putting an <code>SDL_Renderer</code> inside the class but when I compile it gives me only one warning that it is unused and when I run the program I get a message from SDL_GetError() : </p>\n\n<blockquote>\n  <p>\"Unable to create texture from colors.png! SDL Error: Invalid\n  renderer\"</p>\n</blockquote>\n\n<p>How can I do that inside the class that is in the separate files?</p>\n"}, {"tags": ["c++", "camera"], "comments": [{"owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "edited": false, "score": 0, "creation_date": 1423064033, "post_id": 28325126, "comment_id": 44998061, "body": "btw, I know why it is screwed, the cross product of 0.0.1 and the normalize of 0.,0.,+50 is 0.,0.,0. . But I dont know how to avoid it, and what to do in such cases. Maybe im doing the camera wrong?"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1423065094, "post_id": 28325126, "comment_id": 44998782, "body": "What are you trying to use the crossproduct for? Your <code>y</code> variable means nothing in the sense of view matrices here. Your camera should have definite &quot;direction&quot; (i.e. the direction it is facing) and &quot;right&quot; vectors. You can then take the cross-product of those to derive the camera&#39;s &quot;up&quot; vector."}, {"owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "reply_to_user": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 0, "creation_date": 1423129830, "post_id": 28325126, "comment_id": 45026500, "body": "correct me if im wrong, but I calculate &quot;right&quot; vector using cross product from known Up and Camera (Eye - Target).   ev = eye - obj;  ev.Normalize(); z=ev;  x_tmp.CrossProduct(&amp;up,&amp;z);  is it correct?"}], "owner": {"reputation": 1012, "user_id": 3919121, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b623e00f7668e7d6e74fa445d899d525?s=128&d=identicon&r=PG&f=1", "display_name": "diego.martinez", "link": "https://stackoverflow.com/users/3919121/diego-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423063775, "creation_date": 1423063775, "question_id": 28325126, "link": "https://stackoverflow.com/questions/28325126/camera-matrix-invalid-when-aligned-with-up-vector", "title": "Camera matrix invalid when aligned with up vector", "body": "<p>I'm currently implementing cameras on my engine and I'm having an issue when the camera is looking from top to the floor (example, eye position 0.,0.,50. and target is 0.,0.,0.) my up vector is 0.,0.,1..</p>\n\n<p>Then when I do the maths, the crossproduct of position and up gives 0.,0.,0. and then the view is screwed and nothing is rendered. If I move the camera, everything works as expected.</p>\n\n<p>How can I solve this?</p>\n\n<pre><code>if (node==NULL || target==NULL) return;\n\nnode-&gt;Update();\neye=node-&gt;GetWorldMatrix()*GRPVECTOR(0.0,0.0,0.0); //converts from matrix to vector my vector transformation\n\ntarget-&gt;Update();\nobj=target-&gt;GetWorldMatrix()*GRPVECTOR(0.0,0.0,0.0);\n\n\nGRPVECTOR ev;\nGRPVECTOR z;\nGRPVECTOR x_tmp;\nGRPVECTOR x;\nGRPVECTOR y;\n\nev = eye - obj;\n\nev.Normalize();\nz=ev;\n\nx_tmp.CrossProduct(&amp;up,&amp;z);             \nif (x_tmp.GetLengthf()==0.0f)\n    return;  //my view is screwed, I return \n\nx_tmp.Normalize();\nx=x_tmp;\n\ny.CrossProduct(&amp;z,&amp;x);\n\nthis-&gt;viewmatrix.matrix[0][0] = x.vector[0];\nthis-&gt;viewmatrix.matrix[0][1] = y.vector[0];\nthis-&gt;viewmatrix.matrix[0][2] = z.vector[0];\nthis-&gt;viewmatrix.matrix[0][3] = 0.0f;\n\nthis-&gt;viewmatrix.matrix[1][0] = x.vector[1];\nthis-&gt;viewmatrix.matrix[1][1] = y.vector[1];\nthis-&gt;viewmatrix.matrix[1][2] = z.vector[1];\nthis-&gt;viewmatrix.matrix[1][3] = 0.0f;\n\nthis-&gt;viewmatrix.matrix[2][0] = x.vector[2];\nthis-&gt;viewmatrix.matrix[2][1] = y.vector[2];\nthis-&gt;viewmatrix.matrix[2][2] = z.vector[2];\nthis-&gt;viewmatrix.matrix[2][3] = 0.0f;\n\nthis-&gt;viewmatrix.matrix[3][0] = -x.vector[0] * eye.vector[0] + -x.vector[1] * eye.vector[1] + -x.vector[2] * eye.vector[2];\nthis-&gt;viewmatrix.matrix[3][1] = -y.vector[0] * eye.vector[0] + -y.vector[1] * eye.vector[1] + -y.vector[2] * eye.vector[2];\nthis-&gt;viewmatrix.matrix[3][2] = -z.vector[0] * eye.vector[0] + -z.vector[1] * eye.vector[1] + -z.vector[2] * eye.vector[2];\nthis-&gt;viewmatrix.matrix[3][3] = 1.0f;\n\nGRPMATRIX Translate;\nTranslate.BuildTranslationMatrix(-obj.vector[0],-obj.vector[1],-obj.vector[2]); \nthis-&gt;viewmatrix.GetMulplicationMatrix(&amp;this-&gt;viewmatrix,&amp;Translate);\n</code></pre>\n"}, {"tags": ["c++", "memory"], "answers": [{"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 3, "creation_date": 1423063789, "post_id": 28325091, "comment_id": 44997892, "body": "<code>reinterpret_cast</code> ? it seems like a line that you would want to jump out more"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1423063886, "post_id": 28325091, "comment_id": 44997958, "body": "It&#39;s just a matter of taste - for casting simple types such as this I generally prefer the more succinct C-style casts, but feel free to use a C++style cast if you prefer."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 7, "last_activity_date": 1423064042, "last_edit_date": 1423064042, "creation_date": 1423063701, "answer_id": 28325091, "question_id": 28325028, "link": "https://stackoverflow.com/questions/28325028/c-setting-struct-address/28325091#28325091", "title": "C++ Setting Struct Address", "body": "<p>Just initialise the <code>GPIO</code> member variable in your constructor, as follows:</p>\n\n<pre><code>        GPIO = (PortGPIOs *) 0x48001000;\n</code></pre>\n\n<p>[Note: use a C++-style cast if you prefer - the end result is the same.]</p>\n"}], "owner": {"reputation": 131, "user_id": 1043360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4a6f345e1ad5f95e6ff10f1123dfae95?s=128&d=identicon&r=PG", "display_name": "slasher53", "link": "https://stackoverflow.com/users/1043360/slasher53"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 28325091, "answer_count": 1, "score": 0, "last_activity_date": 1423064042, "creation_date": 1423063532, "question_id": 28325028, "link": "https://stackoverflow.com/questions/28325028/c-setting-struct-address", "title": "C++ Setting Struct Address", "body": "<p>With the following Code I'm trying to get the struct in hwPort to start at the memory address 0x48001000. How would I do this as I'm currently stuck</p>\n\n<pre><code>    struct PortGPIOs\n    {\n            volatile uint32_t MODER;        /*!&lt; GPIO port mode register,               Address offset: 0x00      */\n            volatile uint32_t OTYPER;       /*!&lt; GPIO port output type register,        Address offset: 0x04      */\n            volatile uint32_t OSPEEDR;      /*!&lt; GPIO port output speed register,       Address offset: 0x08      */\n            volatile uint32_t PUPDR;        /*!&lt; GPIO port pull-up/pull-down register,  Address offset: 0x0C      */\n            volatile uint32_t IDR;          /*!&lt; GPIO port input data register,         Address offset: 0x10      */\n            volatile uint32_t ODR;          /*!&lt; GPIO port output data register,        Address offset: 0x14      */\n            volatile uint16_t BSRRL;        /*!&lt; GPIO port bit set/reset low register,  Address offset: 0x18      */\n            volatile uint16_t BSRRH;        /*!&lt; GPIO port bit set/reset high register, Address offset: 0x1A      */\n            volatile uint32_t LCKR;         /*!&lt; GPIO port configuration lock register, Address offset: 0x1C      */\n            volatile uint32_t AFR[2];       /*!&lt; GPIO alternate function registers,     Address offset: 0x20-0x24 */\n            volatile uint32_t BRR;          /*!&lt; GPIO bit reset register,               Address offset: 0x28 */\n    };\n\n    class hwPort {\n        public:\n            hwPort(PortGPIOs *, uint32_t, uint32_t, uint32_t);\n            uint32_t read();\n            void readOr(uint32_t);\n            void readAnd(uint32_t);\n            void write(uint32_t);\n            void writeOr(uint32_t);\n            void writeAnd(uint32_t);\n        private:\n            PortGPIOs *GPIO;\n    };\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "ocr", "tesseract"], "comments": [{"owner": {"reputation": 234, "user_id": 4277588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bdd5495061e6d4e44b5d6e07655108?s=128&d=identicon&r=PG&f=1", "display_name": "cortex42", "link": "https://stackoverflow.com/users/4277588/cortex42"}, "edited": false, "score": 2, "creation_date": 1423068084, "post_id": 28324985, "comment_id": 45000967, "body": "look here: <a href=\"http://stackoverflow.com/questions/27018224/what-preprocessing-operations-are-performed-by-tesseract-ocr/27230986\" title=\"what preprocessing operations are performed by tesseract ocr\">stackoverflow.com/questions/27018224/&hellip;</a>"}, {"owner": {"reputation": 1372, "user_id": 256480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5469c4b822cf3ebc8afb6a00ab409550?s=128&d=identicon&r=PG", "display_name": "Rachel", "link": "https://stackoverflow.com/users/256480/rachel"}, "edited": false, "score": 4, "creation_date": 1423119127, "post_id": 28324985, "comment_id": 45021207, "body": "Tesseract does some internal image processing. You can check this page to learn more: <a href=\"https://code.google.com/p/tesseract-ocr/wiki/ImproveQuality\" rel=\"nofollow noreferrer\">code.google.com/p/tesseract-ocr/wiki/ImproveQuality</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8426582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1375e2b996f68c6c492438fdb218bd20?s=128&d=identicon&r=PG", "display_name": "Yasin Arabi", "link": "https://stackoverflow.com/users/8426582/yasin-arabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1602606246, "creation_date": 1602606246, "answer_id": 64339277, "question_id": 28324985, "link": "https://stackoverflow.com/questions/28324985/does-tesseract-ocr-perform-any-image-pre-processing/64339277#64339277", "title": "Does tesseract-ocr perform any image pre-processing?", "body": "<p>Tesseract uses Leptonica library for doing various pre-processing operations like Otsu binarization algorithm, dilation, erosion and so on.\nBut because the operations are not dependent to your data, they will cause bad results in some cases.\nFor more information read <a href=\"https://github.com/tesseract-ocr/tessdoc/blob/master/ImproveQuality.md\" rel=\"nofollow noreferrer\">this page</a>.</p>\n"}], "owner": {"reputation": 560, "user_id": 3639087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/w7BB0.jpg?s=128&g=1", "display_name": "Raghav", "link": "https://stackoverflow.com/users/3639087/raghav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1267, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1602606246, "creation_date": 1423063418, "last_edit_date": 1423629937, "question_id": 28324985, "link": "https://stackoverflow.com/questions/28324985/does-tesseract-ocr-perform-any-image-pre-processing", "title": "Does tesseract-ocr perform any image pre-processing?", "body": "<p>I am currently working with the Tesseract OCR engine and I'm using it in conjunction with OpenCV for pre-processing the image before sending it to the OCR engine. However, I was wondering if Tesseract itself is performing some image pre-processing before extracting the text. If so, what are the methods that Tesseract implements?</p>\n\n<p>My objective is to ensure I don't perform redundant pre-processing methods. Some of the pre-processing methods I perform are adaptiveThreshold and GaussianBlur.</p>\n\n<p>Any help/guidance would be much appreciated! </p>\n\n<p>EDIT:\nI understand Tesseract does basic image pre-processing. I would like to know if it is possible to bypass these methods and directly feed in an image that I processed manually. (Again, in order to avoid redundant processing on the image)?</p>\n"}, {"tags": ["c++", "memory", "delete-operator"], "answers": [{"tags": [], "owner": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "is_accepted": false, "score": 2, "last_activity_date": 1423063065, "creation_date": 1423063065, "answer_id": 28324867, "question_id": 28324764, "link": "https://stackoverflow.com/questions/28324764/access-in-deallocated-memory/28324867#28324867", "title": "Access in deallocated memory", "body": "<p>It happens because of bad luck. You are invoking undefined behavior by using an invalid pointer. You are not guaranteed a runtime error, you're not guaranteed of anything. It's undefined.</p>\n\n<p>The practical reason it doesn't crash for you is because <code>Delay()</code> doesn't actually access any member variables. So basically, <code>Delay()</code> could also be written as a free-standing function (out of the class).</p>\n\n<p>Regarding <code>IsBadReadPtr</code>, show some code to demonstrate what you're talking about. But keep in mind that <code>IsBadReadPtr</code> is an OS-level call, while <code>new</code> and <code>delete</code> are language constructs. Just as you cannot mix <code>new</code> and <code>free</code>, you can't rely on interoperability between <code>new</code>/<code>delete</code> and <code>IsBadReadPtr</code>.</p>\n\n<p>Edit: I say bad luck because your code has serious problems, but it's invisible because of chance. It's better luck if the app crashes, revealing the bugs.</p>\n"}], "owner": {"reputation": 1, "user_id": 4442289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e1f2312fdbe11b78aee6295429e49?s=128&d=identicon&r=PG&f=1", "display_name": "goldstar", "link": "https://stackoverflow.com/users/4442289/goldstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1423063619, "answer_count": 1, "score": -2, "last_activity_date": 1436106520, "creation_date": 1423062791, "last_edit_date": 1436106520, "question_id": 28324764, "link": "https://stackoverflow.com/questions/28324764/access-in-deallocated-memory", "closed_reason": "Duplicate", "title": "Access in deallocated memory", "body": "<p>I found strange problem which there are no runtime error while accessing in deallocated memory.</p>\n\n<pre><code>class Test {\npublic:\n  Test(int idx) : c(idx) {}\n  ~Test() {\n    std::cout &lt;&lt; \"destructor\\n\";\n  }\n  void Delay() {\n    Sleep(500);\n    std::cout &lt;&lt; \"delay \" &lt;&lt; c &lt;&lt; \"\\n\";\n  }\nprotected:\n  int c;\n};\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n  for (int idx = 0; idx &lt; 100; idx++) {\n    Test* test = new Test(idx);\n    Test*temp = test;\n    delete test; test = NULL;\n    temp-&gt;Delay();\n  }\n\n  std::cout &lt;&lt; \"Exit\\n\";\n\n  Sleep(1000);\n  return 0;\n}\n</code></pre>\n\n<p>The variable \"test\" is deallocated, and temp has previous memory address of \"test\".\nBut calling Delay() function with \"temp\" doesn't a runtime error.\nHow can I understand it?</p>\n\n<p>In Delay() function, checking IsBadXXXPtr() function found that no memory error.</p>\n\n<p>What's wrong?</p>\n"}, {"tags": ["c++", "gcc", "intel", "static-members", "constexpr"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1423062630, "post_id": 28324686, "comment_id": 44997092, "body": "GCC&#39;s right. It&#39;s correct to use <code>s.se</code> but <code>std::cout</code>"}, {"owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1423062809, "post_id": 28324686, "comment_id": 44997220, "body": "<code>ce</code> is static, <code>s::ce</code> is right. It has to do with <code>constexpr</code>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1423062846, "post_id": 28324686, "comment_id": 44997245, "body": "@ForceBru, The dot operator works on objects, not types."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423062875, "post_id": 28324686, "comment_id": 44997261, "body": "@user2052436, why are u using GCC but not g++? That&#39;s C++ isn&#39;t it?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423062908, "post_id": 28324686, "comment_id": 44997288, "body": "@ForceBru, GCC is the GNU Compiler Collection. It includes gcc and g++, which are C and C++ compilers respectively."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1423063156, "post_id": 28324686, "comment_id": 44997445, "body": "@ForceBru: Actually you can compile C++ source with <code>gcc</code> just fine. You need to manually link the C++ standard library, though (<code>-lstdc++</code>)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1423063209, "post_id": 28324686, "comment_id": 44997484, "body": "Both are right. This is an ODR violation that does not require a diagnostic."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1423063384, "post_id": 28324686, "comment_id": 44997601, "body": "@chris, I meant something like <code>S test; test.ce;</code>. My previous comment was pretty silly :)"}, {"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1423063661, "post_id": 28324686, "comment_id": 44997796, "body": "What does Intel compiler with this code? The <code>f</code> function gets inlined? If it is not inlined, then how the reference is passed? I saw similar problem with gcc when using -fno-inline parameter."}, {"owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "reply_to_user": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1423064798, "post_id": 28324686, "comment_id": 44998576, "body": "@ibre5041 I am not sure what icc does. I use only one flag: <code>-std=c++11</code>. How can I find out if it inlined the function?"}, {"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1423065019, "post_id": 28324686, "comment_id": 44998732, "body": "I&#39;m not 100% sure. Use <code>-c</code> to only compile the source and to create obj <code>.o</code> file. The use <code>nm</code> to dump symbols in it and <code>objdump</code> to disassemble it. I guess that no text is generated for the <code>f</code> function and its code is directly inlined into the <code>main</code> function. You can also try to use option <code>-fno-inline</code> and <code>-O0</code> (no optimalizations) for Intel compiler and see what happens."}], "answers": [{"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1423064883, "post_id": 28324791, "comment_id": 44998633, "body": "Can we be so bold as to say that <code>static</code> in-class declarations have an implicit <code>extern</code> in front of them?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1423065287, "post_id": 28324791, "comment_id": 44998906, "body": "@AaronMcDaid: Generally speaking, yes, static member declarations have external linkage."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 4, "last_activity_date": 1423063372, "last_edit_date": 1423063372, "creation_date": 1423062862, "answer_id": 28324791, "question_id": 28324686, "link": "https://stackoverflow.com/questions/28324686/intel-vs-gcc-on-constexpr/28324791#28324791", "title": "Intel vs GCC on constexpr", "body": "<p>I think GCC is right. BTW, CLang 3.5.1 gives the same error.</p>\n\n<p>The thing is that constant static variables are allowed not to be defined only if their address is not taken and they are not bound to references.</p>\n\n<p>Your example bounds a reference to it, so the explicit definition is needed.</p>\n\n<p>From the C++11 draft (9.4.2.3), conveniently edited:</p>\n\n<blockquote>\n  <p>A static data member of literal type can be declared in the class definition with the constexpr specifier; [...] The member shall still be defined in a namespace scope if it is odr-used (3.2) in the program [...].</p>\n</blockquote>\n\n<p>And in 3.2:</p>\n\n<blockquote>\n  <p>A variable [...] whose name appears as a potentially-evaluated expression is odr-used unless it is an object that satisfies the requirements for appearing in a constant expression (5.19) and the lvalue-to-rvalue conversion (4.1) is immediately applied.</p>\n</blockquote>\n\n<p>That lvalue-to-rvalue conversion stuff is, roughly speaking, done everytime the variable is used except when binding a reference or as argument to the unary take-address operator <code>&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "edited": false, "score": 0, "creation_date": 1423063916, "post_id": 28324855, "comment_id": 44997979, "body": "Just checked: if I add out-of-class <code>const int test::ce;</code> as you suggested, icc works and g++ fails with <code>error: redeclaration &#39;S::ce&#39;</code>. If I add <code>constexpr int test::ce;</code>, then both work."}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "reply_to_user": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "edited": false, "score": 0, "creation_date": 1423066903, "post_id": 28324855, "comment_id": 45000069, "body": "Oops, sorry about the <code>test::</code> thing \u2014 I&#39;d copied code from a test program without actually checking it back against your question.  But <code>const int S::ce;</code> works for me; you shouldn&#39;t need <code>constexpr</code> in the out-of-class definition."}, {"owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "edited": false, "score": 0, "creation_date": 1423067707, "post_id": 28324855, "comment_id": 45000669, "body": "It works for me if <code>S::ce</code> is declared as <code>const</code>. But if it is declared as <code>constexpr</code>, then out-of-class definition has to be <code>constexpr</code> as well. Otherwise, both icc and g++ fail. I.e., definition and declaration must match exactly, cannot have <code>const</code> at one place and <code>constexpr</code> at the other. Is it different for your compiler version?"}], "tags": [], "owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "is_accepted": true, "score": 4, "last_activity_date": 1423064801, "last_edit_date": 1423064801, "creation_date": 1423063037, "answer_id": 28324855, "question_id": 28324686, "link": "https://stackoverflow.com/questions/28324686/intel-vs-gcc-on-constexpr/28324855#28324855", "title": "Intel vs GCC on constexpr", "body": "<p>Because the function <code>f</code> takes a reference argument, there has to be a definition of <code>S::ce</code> that a reference can point to at runtime; the compiler can't just replace the argument with a literal 42.  So you have to add an out-of-class definition:</p>\n\n<pre><code>const int S::ce;\n</code></pre>\n\n<p>just like you would with a non-<code>constexpr</code> variable.  This allocates a memory location for the value at runtime, for use by references and other things that couldn't be computed at compile time.</p>\n\n<p>See <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=50785\" rel=\"nofollow\">this GCC bug report</a> (which has comments explaining why it isn't actually a bug) for more information.</p>\n"}], "owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 28324855, "answer_count": 2, "score": 3, "last_activity_date": 1423066171, "creation_date": 1423062565, "last_edit_date": 1423066171, "question_id": 28324686, "link": "https://stackoverflow.com/questions/28324686/intel-vs-gcc-on-constexpr", "title": "Intel vs GCC on constexpr", "body": "<p>The following code compiles ok with Intel-2015 but fails with gcc 4.8.3\nWho is right?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f( int const&amp; x ) { std::cout &lt;&lt; x &lt;&lt; std::endl; }\n\nstruct S\n{\n    static constexpr int ce = 42;\n};\n\nint main()\n{\n    f(S::ce);\n\n    return 0;\n}\n</code></pre>\n\n<p>g++ error:</p>\n\n<pre><code>/tmp/ccOIxa2V.o: In function `main':\ntest_constexpr.cpp:(.text+0x36): undefined reference to `S::ce'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c++", "bitmap", "mfc", "drawing", "gdi"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1423066188, "post_id": 28324540, "comment_id": 44999549, "body": "How are you obtaining the DC?  You haven&#39;t shown any pertinent code."}, {"owner": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1423070486, "post_id": 28324540, "comment_id": 45002597, "body": "i have edited the post to show my DC"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "edited": false, "score": 0, "creation_date": 1423063355, "post_id": 28324688, "comment_id": 44997580, "body": "well that would help me draw on a copy of the image.. i still need to put the device context with the copied bitmap into a CImage object so i can use the CImage.save"}], "tags": [], "owner": {"reputation": 156, "user_id": 2482170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f2d475c69d58c1fe667ab8ad142747?s=128&d=identicon&r=PG", "display_name": "Kryomaani", "link": "https://stackoverflow.com/users/2482170/kryomaani"}, "is_accepted": false, "score": 0, "last_activity_date": 1423062566, "creation_date": 1423062566, "answer_id": 28324688, "question_id": 28324540, "link": "https://stackoverflow.com/questions/28324540/draw-lines-using-device-context-over-a-cimage-object/28324688#28324688", "title": "Draw lines using Device Context over a CImage object", "body": "<p>Are you looking for <a href=\"https://msdn.microsoft.com/en-us/library/c431046z.aspx\" rel=\"nofollow\">CImage:BitBlt</a>? It is used to copy a bitmap from the source device context to current device context.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "edited": false, "score": 0, "creation_date": 1423074224, "post_id": 28327871, "comment_id": 45004769, "body": "the GetDC() only gives me an HDC handle to device context  i need to use functions like moveto() and lineto() and its availabe only with the CDC how can i use those fuctions with the GetDC()?"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "reply_to_user": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "edited": false, "score": 0, "creation_date": 1423074364, "post_id": 28327871, "comment_id": 45004845, "body": "You can construct a DC from the HDC.  Look at the methods of CDC.  You&#39;ll find <i>FromHandle</i> allows you to create a CDC."}, {"owner": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "edited": false, "score": 0, "creation_date": 1423076059, "post_id": 28327871, "comment_id": 45005727, "body": "i wrote:     HDC Hdc =image.GetDC();   \t\t    CDC dc; \t\t    pdc=dc.FromHandle(Hdc); \t\t    dc.MoveTo(curser); \t\t    dc.LineTo(point); but asserion ERROR occured and when debugging i noticed the Hdc is unused &quot; Unable to read Memory&quot;   :D  well that&#39;s strange :D"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "reply_to_user": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "edited": false, "score": 0, "creation_date": 1423076322, "post_id": 28327871, "comment_id": 45005884, "body": "You didn&#39;t read the documentation closely.  <i>FromHandle</i> returns a pointer to a CDC, <i>not</i> an actual CDC.  You need to change the way you call the methods by using the pointer instead."}], "tags": [], "owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": true, "score": 0, "last_activity_date": 1423071706, "creation_date": 1423071706, "answer_id": 28327871, "question_id": 28324540, "link": "https://stackoverflow.com/questions/28324540/draw-lines-using-device-context-over-a-cimage-object/28327871#28327871", "title": "Draw lines using Device Context over a CImage object", "body": "<p>From what you've shown, it appears you are using the wrong DC.  You seem to be using the DC for the dialog (ie. CCLientDC) and <strong>not</strong> the actual CImage.  You should be constructing the DC from </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/k23hdhzz.aspx\" rel=\"nofollow\">CImage::GetDC ()</a>.</p>\n\n<p>That DC will have the currently selected bitmap.</p>\n"}], "owner": {"reputation": 13, "user_id": 4500107, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/S2syG.jpg?s=128&g=1", "display_name": "Mohab Mesherf", "link": "https://stackoverflow.com/users/4500107/mohab-mesherf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 28327871, "answer_count": 2, "score": 0, "last_activity_date": 1423071706, "creation_date": 1423062210, "last_edit_date": 1423070580, "question_id": 28324540, "link": "https://stackoverflow.com/questions/28324540/draw-lines-using-device-context-over-a-cimage-object", "title": "Draw lines using Device Context over a CImage object", "body": "<p>Im building a MFC c++ application in which i let the user read an image, draw lines on it and then save it.</p>\n\n<p>so i have a \"CImage\" object which is called \"Image\" in which the user loads the image to.</p>\n\n<p>and i have a device context object and i was able to draw lines on it\n<em>the device context object that is</em> in run-time using \"OnLButtonDown\" and \"OnLButtonUp\" event handlers.</p>\n\n<p>i then let the user save the image using \"CImage.save\" .. the image is saved but the device context drawn lines aren't there which is to be expected ..\nbut I DO want them to appear in the saved image..</p>\n\n<p>the question is how can i get the device context Object to affect my CImage Object? </p>\n\n<p>this is the event handler for mouse button down</p>\n\n<pre><code>void CProFilterDlg::OnLButtonDown(UINT nFlags, CPoint point)\n{\n    curser =point;\n    if (draw &amp;&amp; Boundry.PtInRect(point) )\n    {\n        CDialogEx::OnLButtonDown(nFlags, point);\n    }\n\n}\n</code></pre>\n\n<p>and this one when the mouse button is up</p>\n\n<pre><code>void CProFilterDlg::OnLButtonUp(UINT nFlags, CPoint point)\n{\n    if (draw &amp;&amp; Boundry.PtInRect(curser) &amp;&amp; Boundry.PtInRect(point))\n    {\n        CClientDC dc(this);\n        dc.MoveTo(curser);\n        dc.LineTo(point);\n        CDialogEx::OnLButtonUp(nFlags, point);\n    }\n\n\n}\n</code></pre>\n\n<p>this is where i load my Cimage object</p>\n\n<pre><code>void CProFilterDlg::OnBnClickedBtnBrowse()\n{\n    CFileDialog Browse(true);\n    if(Browse.DoModal() == IDOK)\n    {\n         ImagePath = Browse.GetPathName();\n    }\n\n        image.Load(ImagePath);\n}\n</code></pre>\n\n<p>and this is where i save my CImage</p>\n\n<pre><code>void CProFilterDlg::OnBnClickedSave()\n{\n    CFileDialog Save(true);\n    if(Save.DoModal() == IDOK)\n    {\n        ImagePath = Save.GetPathName();\n    }\n    image.Save(ImagePath,Gdiplus::ImageFormatBMP);\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "xml-parsing"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423062662, "post_id": 28324502, "comment_id": 44997108, "body": "Remove <code>cout &lt;&lt; contents.rdbuf();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3220360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IZPgA.jpg?s=128&g=1", "display_name": "Rock", "link": "https://stackoverflow.com/users/3220360/rock"}, "edited": false, "score": 0, "creation_date": 1423869416, "post_id": 28324742, "comment_id": 45339748, "body": "The above solution from James Moore should work, but doesn&#39;t I get std::exception instead.   I did find a solution at work.. Need to upload that standalone example."}], "tags": [], "owner": {"reputation": 437, "user_id": 1801491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee9e87d4fffa93a3bbd34fcca33ac023?s=128&d=identicon&r=PG", "display_name": "James Moore", "link": "https://stackoverflow.com/users/1801491/james-moore"}, "is_accepted": false, "score": 2, "last_activity_date": 1423062739, "creation_date": 1423062739, "answer_id": 28324742, "question_id": 28324502, "link": "https://stackoverflow.com/questions/28324502/c-parsing-nmap-xml-output-and-similar-with-boost-xml-parser/28324742#28324742", "title": "C++ Parsing nmap xml output and similar with Boost xml_parser", "body": "<p>In your definition:</p>\n\n<pre><code>BOOST_FOREACH(ptree::value_type &amp;v, pt.get_child(\"runstats\"))\n</code></pre>\n\n<p>You need to put the root node before <code>runstats</code>, try:</p>\n\n<pre><code>BOOST_FOREACH(ptree::value_type &amp;v, pt.get_child(\"nmaprun.runstats\"))\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3220360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IZPgA.jpg?s=128&g=1", "display_name": "Rock", "link": "https://stackoverflow.com/users/3220360/rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423062739, "creation_date": 1423062119, "question_id": 28324502, "link": "https://stackoverflow.com/questions/28324502/c-parsing-nmap-xml-output-and-similar-with-boost-xml-parser", "title": "C++ Parsing nmap xml output and similar with Boost xml_parser", "body": "<p>For the xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt;\n&lt;?xml-stylesheet href=\"file:///usr/share/nmap/nmap.xsl\" type=\"text/xsl\"?&gt;\n&lt;!-- Nmap 5.21 scan initiated Tue Feb  3 12:01:07 2015 as: nmap -v -R -sP -PS80 -&amp;#45;traceroute -oX /tmp/SCB_nmap_tcp_traceroute.xml 54.209.104.11 --&gt;\n&lt;nmaprun scanner=\"nmap\" args=\"nmap -v -R -sP -PS80 -&amp;#45;traceroute -oX /tmp/SCB_nmap_tcp_traceroute.xml 54.209.104.11\" start=\"1422964867\" startstr=\"Tue Feb  3 12:01:07 2015\" version=\"5.21\" xmloutputversion=\"1.03\"&gt;\n&lt;verbose level=\"1\" /&gt;\n&lt;debugging level=\"0\" /&gt;\n&lt;taskbegin task=\"Ping Scan\" time=\"1422964867\" /&gt;\n&lt;taskend task=\"Ping Scan\" time=\"1422964867\" extrainfo=\"1 total hosts\" /&gt;\n&lt;taskbegin task=\"Parallel DNS resolution of 1 host.\" time=\"1422964867\" /&gt;\n&lt;taskend task=\"Parallel DNS resolution of 1 host.\" time=\"1422964867\" /&gt;\n&lt;taskbegin task=\"Traceroute\" time=\"1422964867\" /&gt;\n&lt;taskend task=\"Traceroute\" time=\"1422964873\" /&gt;\n&lt;host starttime=\"1422964867\" endtime=\"1422964867\"&gt;&lt;status state=\"up\" reason=\"reset\"/&gt;\n&lt;address addr=\"54.209.104.11\" addrtype=\"ipv4\" /&gt;\n&lt;hostnames&gt;\n&lt;hostname name=\"ec2-54-209-104-11.compute-1.amazonaws.com\" type=\"PTR\"/&gt;\n&lt;/hostnames&gt;\n&lt;trace port=\"80\" proto=\"tcp\"&gt;\n&lt;hop ttl=\"17\" ipaddr=\"54.209.104.11\" rtt=\"256.20\" host=\"ec2-54-209-104-11.compute-1.amazonaws.com\"/&gt;\n&lt;/trace&gt;\n&lt;times srtt=\"256382\" rttvar=\"192360\" to=\"1025822\" /&gt;\n&lt;/host&gt;\n&lt;runstats&gt;&lt;finished time=\"1422964873\" timestr=\"Tue Feb  3 12:01:13 2015\" elapsed=\"6.48\"/&gt;&lt;hosts up=\"1\" down=\"0\" total=\"1\" /&gt;\n&lt;!-- Nmap done at Tue Feb  3 12:01:13 2015; 1 IP address (1 host up) scanned in 6.48 seconds --&gt;\n&lt;/runstats&gt;&lt;/nmaprun&gt;\n</code></pre>\n\n<p>I tried to parse using Boost as follows:</p>\n\n<pre><code>int main ( int, char ** )\ntry\n{\n        // Will hold file contents.\n    stringstream contents;\n\n        // Open the file for the shortest time possible.\n    { ifstream file(\"./SCB_nmap_tcp_traceroute.xml\", ios::binary);\n\n            // Make sure we have something to read.\n        if ( !file.is_open() ) {\n            throw (\"Could not open file.\");\n        }\n\n            // Copy contents \"as efficiently as possible\".\n        contents &lt;&lt; file.rdbuf();\n    }\n\n        // Do something \"useful\" with the file contents.\n    cout &lt;&lt; contents.rdbuf();\n    using boost::property_tree::ptree;\n    ptree pt;\n    read_xml(contents, pt);\n\n        BOOST_FOREACH(ptree::value_type &amp;v, pt.get_child(\"runstats\"))\n                cout&lt;&lt;\"Found trace\"&lt;&lt;endl;\n</code></pre>\n\n<p>I am geting a no such node, core dumped for \"nmaprun\", \"trace\" and \"runstats\" via BOOST_FOREACH. Please advice.</p>\n\n<p>terminate called after throwing an instance of 'boost::exception_detail::clone_impl >'\n  what():  No such node (runstats)\nAborted (core dumped)</p>\n"}, {"tags": ["c++", "templates", "c++11", "friend"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "is_accepted": true, "score": 7, "last_activity_date": 1423061755, "creation_date": 1423061755, "answer_id": 28324380, "question_id": 28324308, "link": "https://stackoverflow.com/questions/28324308/template-class-specialization-and-friend-classes/28324380#28324380", "title": "Template class specialization and friend classes", "body": "<p>You have a typo in your specialization:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Foo&lt;T, 0&gt;\n{     //  ^^^ &lt;= add this\n   friend class Foo&lt;T, 1&gt;;\n};\n</code></pre>\n"}], "owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1423062117, "accepted_answer_id": 28324380, "answer_count": 1, "score": 0, "last_activity_date": 1423061755, "creation_date": 1423061520, "question_id": 28324308, "link": "https://stackoverflow.com/questions/28324308/template-class-specialization-and-friend-classes", "closed_reason": "Not suitable for this site", "title": "Template class specialization and friend classes", "body": "<p>I am in the following situation:</p>\n\n<pre><code>template&lt;typename T, int N&gt;\nclass Foo\n{\n};\n\n// specialization for 0\ntemplate&lt;typename T&gt;\nclass Foo&lt;0&gt;\n{\n   friend class Foo&lt;T, 1&gt;;\n};\n</code></pre>\n\n<p>That is, I need that <code>Foo&lt;T, 1&gt;</code> is friend of <code>Foo&lt;T, 0&gt;</code>, but I have a compiler error. Is this possible?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "openssl"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1423061871, "post_id": 28324278, "comment_id": 44996616, "body": "Because German error messages may be difficult to understand for non-German native speakers: Those linker errors are complaining about undefined references to <code>BIO_new_mem_buf</code>, <code>RSA_private_decrypt</code>, <code>PEM_read_bio_RSAPrivateKey</code>, and <code>cipherEngine::rsaPrivateDecrypt</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1423061961, "post_id": 28324278, "comment_id": 44996675, "body": "You appear to be missing the crypto module from your link line. I&#39;ve not done it on windows, but if the naming scheme is anything indication, the library would be something like: <code>lib64&#47;crypto32MTd.lib</code>"}], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 978965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/96aea860b927344972db4d03bd7de274?s=128&d=identicon&r=PG", "display_name": "rivimey", "link": "https://stackoverflow.com/users/978965/rivimey"}, "is_accepted": false, "score": 0, "last_activity_date": 1423061928, "creation_date": 1423061928, "answer_id": 28324440, "question_id": 28324278, "link": "https://stackoverflow.com/questions/28324278/linking-openssl-to-visual-studio-2013-lnk2019/28324440#28324440", "title": "linking openssl to visual studio 2013 LNK2019", "body": "<p>When adding external libraries to VS I usually try to include the library source and build them within my own tree. This avoids the problem I think you are seeing, which is that the precompiled library has been compiled with slightly different options than your main project. The different options render the library unusable to you.</p>\n\n<p>If you really don't want to compile the lib within your project, try investigating those symbols further to identify the compile variant.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4035821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeedf1bef3ba2b49338cdd7d06f74c21?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeBlack", "link": "https://stackoverflow.com/users/4035821/drakeblack"}, "is_accepted": false, "score": 0, "last_activity_date": 1423427910, "creation_date": 1423427910, "answer_id": 28399108, "question_id": 28324278, "link": "https://stackoverflow.com/questions/28324278/linking-openssl-to-visual-studio-2013-lnk2019/28399108#28399108", "title": "linking openssl to visual studio 2013 LNK2019", "body": "<p>I forgot to define the class, the function <code>rsaPrivateDecrypt</code> belongs to (shame on me). The second thing was to use the 32Bit libs instead of the 64Bit libs.  </p>\n"}], "owner": {"reputation": 43, "user_id": 4035821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeedf1bef3ba2b49338cdd7d06f74c21?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeBlack", "link": "https://stackoverflow.com/users/4035821/drakeblack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1077, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423427910, "creation_date": 1423061435, "question_id": 28324278, "link": "https://stackoverflow.com/questions/28324278/linking-openssl-to-visual-studio-2013-lnk2019", "title": "linking openssl to visual studio 2013 LNK2019", "body": "<p>I'm developing on a visual studio 2013 application and therefore I need to include openssl libraries. </p>\n\n<p>What have I done so far:</p>\n\n<ul>\n<li><p>I downloaded the precompiled openssl libraries for VS2013 openssl-1.0.1l-vs2013.7z from here: <a href=\"http://www.npcglib.org/~stathis/blog/precompiled-openssl/\" rel=\"nofollow\">http://www.npcglib.org/~stathis/blog/precompiled-openssl/</a> (newest stable entry MSVC2013)</p></li>\n<li><p>included openssl's include dir to C/C++/General/Additional Include Directories</p></li>\n<li><p>added <code>lib64/libeay32MTd.lib</code> and <code>lib64/ssleay32MTd.lib</code> to Linker/Input/Additional Dependencies</p></li>\n<li><p>I call openssl headers this way: <code>#include &lt;openssl\\pem.h&gt;</code> (as example)</p></li>\n</ul>\n\n<p>I am using VS 2013 on a 64 Bit Windows maschine with the multithreading runtime library (/MTd). Every time I want to build my project it gives me the following errors:</p>\n\n<p><strong>error LNK2019:</strong> Verweis auf nicht aufgel\u00f6stes externes Symbol \"_BIO_new_mem_buf\" in Funktion \"__catch$?decrypt@cipherEngine@@QAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PADH@Z$4\".</p>\n\n<p><strong>error LNK2019:</strong> Verweis auf nicht aufgel\u00f6stes externes Symbol \"_RSA_private_decrypt\" in Funktion \"__catch$?decrypt@cipherEngine@@QAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PADH@Z$4\".</p>\n\n<p><strong>error LNK2019:</strong> Verweis auf nicht aufgel\u00f6stes externes Symbol \"_PEM_read_bio_RSAPrivateKey\" in Funktion \"__catch$?decrypt@cipherEngine@@QAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PADH@Z$4\".</p>\n\n<p><strong>error LNK2019:</strong> Verweis auf nicht aufgel\u00f6stes externes Symbol \"\"public: class std::basic_string,class std::allocator > __thiscall cipherEngine::rsaPrivateDecrypt(class std::basic_string,class std::allocator >)\" (?rsaPrivateDecrypt@cipherEngine@@QAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V23@@Z)\" in Funktion \"\"public: bool __thiscall cipherEngine::alterKey(class std::basic_string,class std::allocator >)\" (?alterKey@cipherEngine@@QAE_NV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)\".</p>\n\n<p><strong>fatal error LNK1120:</strong> 4 nicht aufgel\u00f6ste Externe</p>\n\n<p>Anyone who knows the \"missing link\"?</p>\n"}, {"tags": ["c++", "callback"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1423061556, "post_id": 28324232, "comment_id": 44996390, "body": "You might want to read about <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio.html\" rel=\"nofollow noreferrer\">Boost ASIO</a>."}], "answers": [{"comments": [{"owner": {"reputation": 716, "user_id": 3245611, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/14HnM.jpg?s=128&g=1", "display_name": "Mark Miles", "link": "https://stackoverflow.com/users/3245611/mark-miles"}, "edited": false, "score": 0, "creation_date": 1423062622, "post_id": 28324404, "comment_id": 44997088, "body": "Yes, that indeed works! Can you please explain why you&#39;re saying that it&#39;s not really a callback?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 716, "user_id": 3245611, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/14HnM.jpg?s=128&g=1", "display_name": "Mark Miles", "link": "https://stackoverflow.com/users/3245611/mark-miles"}, "edited": false, "score": 0, "creation_date": 1423064354, "post_id": 28324404, "comment_id": 44998264, "body": "@MarkMiles I think of a callback as like &quot;ok, I got some data, now you go do something with it.&quot; This is more of a &quot;I need to ask you for something&quot; - so it&#39;s not <i>quite</i> the same thing."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1423061829, "creation_date": 1423061829, "answer_id": 28324404, "question_id": 28324232, "link": "https://stackoverflow.com/questions/28324232/c-setting-up-a-callback-function/28324404#28324404", "title": "C++ setting up a callback function", "body": "<p>You probably want to use a <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow\"><code>std::function&lt;std::string(std::string)&gt;</code></a>:</p>\n\n<pre><code>class myWebServer {\n    // not really a \"callback\"?\n    std::function&lt;std::string(std::string)&gt; callback;\n\npublic:\n    template &lt;typename F&gt;\n    void setCallback(F&amp;&amp; f) { callback = std::forward&lt;F&gt;(f); }\n\n    void runServer() {\n      // ...\n      std::string foo = callback(\"hello\");\n      // do something with foo\n    }\n};\n</code></pre>\n\n<p>And then, you can do:</p>\n\n<pre><code>myServer.setCallback([&amp;](std::string query){\n    return myProgram.ProcessASP(query);\n});\n</code></pre>\n"}], "owner": {"reputation": 716, "user_id": 3245611, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/14HnM.jpg?s=128&g=1", "display_name": "Mark Miles", "link": "https://stackoverflow.com/users/3245611/mark-miles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 28324404, "answer_count": 1, "score": 0, "last_activity_date": 1423061829, "creation_date": 1423061268, "question_id": 28324232, "link": "https://stackoverflow.com/questions/28324232/c-setting-up-a-callback-function", "title": "C++ setting up a callback function", "body": "<p>I am working at a program which runs a custom webserver that should output some active HTML content:</p>\n\n<pre><code>// This is the webserver library...\nclass myWebServer\n{\npublic:\n    myWebServer() {}\n    ~myWebServer() {}\n\n    // ...\n\n    void sendPageToClient()\n    {\n        // ... \"client\" is the TCP socket\n        // ... \"html\" should contain the output of myMainProgram::ProcessASP\n\n        client-&gt;send(html);\n    }\n\n    void runServer()\n    {\n        while (1)\n        {\n            // listens to TCP socket\n            client-&gt;listen();\n\n            // receive query from browser\n            // send HTML using sendPageToClient()\n            // ...\n            sendPageToClient();\n        }\n    }\n};\n\n\n// This is the main program class...\nclass myMainProgram\n{\npublic:\n    myMainProgram() {}\n    ~myMainProgram() {}\n\n    // ...\n\n    string ProcessASP(string query)\n    {\n        return\n        \"&lt;html&gt;The query string you have passed contains:&lt;br&gt;\"\n        + query +\n        \"&lt;/html&gt;\";\n    }\n\n    void runProgram()\n    {\n        // do something\n    }\n};\n\n\n// This is a multi-threaded application\nvoid main()\n{\n    myMainProgram   myProgram;\n    myWebServer myServer;\n\n    myProgram.runProgram();\n    myServer.runServer();\n};\n</code></pre>\n\n<p>How can I set up a callback function that from the class <code>myWebServer</code> calls <code>myMainProgram::ProcessASP</code> passing parameters and receiving its output?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "wear-os"], "comments": [{"owner": {"reputation": 530, "user_id": 1373568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuGBO.jpg?s=128&g=1", "display_name": "Aladin Q", "link": "https://stackoverflow.com/users/1373568/aladin-q"}, "edited": false, "score": 2, "creation_date": 1423071265, "post_id": 28324222, "comment_id": 45003080, "body": "Yes, it&#39;s like for regular Android, since there is only ARM at this time on physical Android Wear device, you don&#39;t have to target MIPS or x86."}, {"owner": {"reputation": 2286, "user_id": 496342, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d4ca57040f7ca86a3a051bbdaf9d19?s=128&d=identicon&r=PG", "display_name": "loomi", "link": "https://stackoverflow.com/users/496342/loomi"}, "reply_to_user": {"reputation": 530, "user_id": 1373568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuGBO.jpg?s=128&g=1", "display_name": "Aladin Q", "link": "https://stackoverflow.com/users/1373568/aladin-q"}, "edited": false, "score": 0, "creation_date": 1424696720, "post_id": 28324222, "comment_id": 45642164, "body": "Cool! That&#39;s good. Do you know about an example somewhere?"}], "answers": [{"tags": [], "owner": {"reputation": 889, "user_id": 526829, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a7c65a36f2593730673a930b2a665361?s=128&d=identicon&r=PG", "display_name": "leremjs", "link": "https://stackoverflow.com/users/526829/leremjs"}, "is_accepted": true, "score": 4, "last_activity_date": 1444672270, "creation_date": 1444672270, "answer_id": 33087266, "question_id": 28324222, "link": "https://stackoverflow.com/questions/28324222/is-it-possible-to-use-the-android-ndk-for-android-wear-apps/33087266#33087266", "title": "Is it possible to use the Android NDK for Android Wear apps?", "body": "<p>I just tried it, and can confirm that is possible to call native code through JNI on Android Wear.  It works exactly the same as it does on regular Android.</p>\n"}], "owner": {"reputation": 2286, "user_id": 496342, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0d4ca57040f7ca86a3a051bbdaf9d19?s=128&d=identicon&r=PG", "display_name": "loomi", "link": "https://stackoverflow.com/users/496342/loomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "accepted_answer_id": 33087266, "answer_count": 1, "score": 0, "last_activity_date": 1444672270, "creation_date": 1423061242, "question_id": 28324222, "link": "https://stackoverflow.com/questions/28324222/is-it-possible-to-use-the-android-ndk-for-android-wear-apps", "title": "Is it possible to use the Android NDK for Android Wear apps?", "body": "<p>I look forward to create an android wear application with some 3d content. That for I like to reuse libraries written in C/C++. Is it generally possible to create an Wear APP with the NDK? Do you know about any primer or example code which does so?</p>\n"}, {"tags": ["c++", "c++11", "boost-asio", "shared-ptr", "boost-bind"], "comments": [{"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 1, "creation_date": 1423060730, "post_id": 28323997, "comment_id": 44995830, "body": "What is the protype of <code>MyClass::handler</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "is_accepted": true, "score": 5, "last_activity_date": 1423060707, "creation_date": 1423060707, "answer_id": 28324028, "question_id": 28323997, "link": "https://stackoverflow.com/questions/28323997/compilation-failure-when-using-stdshared-ptr-instead-of-boostshared-ptr/28324028#28324028", "title": "Compilation failure when using std::shared_ptr instead of boost::shared_ptr", "body": "<p>Looks like problem is, that you <code>handler</code> function receives <code>boost::shared_ptr</code>, not <code>std::shared_ptr</code> and <code>boost::shared_ptr</code> is not constructible from <code>std::shared_ptr</code>.</p>\n"}], "owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 28324028, "answer_count": 1, "score": 0, "last_activity_date": 1423060707, "creation_date": 1423060610, "question_id": 28323997, "link": "https://stackoverflow.com/questions/28323997/compilation-failure-when-using-stdshared-ptr-instead-of-boostshared-ptr", "title": "Compilation failure when using std::shared_ptr instead of boost::shared_ptr", "body": "<p>The code below successfully sends an async message to the given endpoint.</p>\n\n<pre><code>// message is a boost::shared_ptr&lt;std::string&gt;\n\n// open a UDP socket\nboost::asio::ip::udp::socket socket(ioService);\nsocket.open(boost::asio::ip::udp::v4());\n\n// create the remote endpoint\nboost::asio::ip::udp::endpoint remoteEndpoint(boost::asio::ip::address_v4::from_string(address), port);\n\n// asynchronously send a datagram to the remote endpoint\nsocket.async_send_to(boost::asio::buffer(*message),\n                     remoteEndpoint,\n                     boost::bind(&amp;MyClass::handler,\n                                 this,\n                                 message,\n                                 boost::asio::placeholders::error,\n                                 boost::asio::placeholders::bytes_transferred));\n\nsocket.close();\n</code></pre>\n\n<p>However, if I change the type of <code>message</code> to a <code>std::shared_ptr&lt;std::string&gt;</code> rather than a <code>boost::shared_ptr&lt;std::string&gt;</code> then the call to <code>async_send_to</code> doesn't compile.</p>\n\n<p>The error is:</p>\n\n<pre><code>boost/boost/bind/bind.hpp:457:9: No matching function for call to object of type 'boost::_mfi::mf3&lt;void, MyClass, const boost::shared_ptr&lt;std::__1::basic_string&lt;char&gt; &gt; &amp;, const boost::system::error_code &amp;, unsigned long&gt;'.\n</code></pre>\n\n<p>Can someone explain what is wrong? Is it possibly because I'm using boost::bind? </p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1423060201, "post_id": 28323808, "comment_id": 44995455, "body": "Is the <code>python-dev</code> / <code>python-devel</code> package installed on this system?"}, {"owner": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "reply_to_user": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1423082999, "post_id": 28323808, "comment_id": 45009469, "body": "yes of course, if i remove this listener part i can compile and use other swig functions defined"}], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "edited": false, "score": 0, "creation_date": 1423151384, "post_id": 28343081, "comment_id": 45040567, "body": "thanks! i have another small question if you can help in my python code i do the flowing: py_sim = bms.PyListener(func) ms_node.setCallBack(py_sim) and then i leave this function and swig thinks that py_sim is no longer used so he deletes it and then the c++ code crashs i tried playing with newobject derective with no luck"}, {"owner": {"reputation": 1173, "user_id": 356951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e340acbf9b8c82ca618a0cb4216a2c4d?s=128&d=identicon&r=PG", "display_name": "sambha", "link": "https://stackoverflow.com/users/356951/sambha"}, "reply_to_user": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "edited": false, "score": 0, "creation_date": 1423160072, "post_id": 28343081, "comment_id": 45045928, "body": "@rafiwiener Aren&#39;t you better off storing the module &amp; function as char* instead? Something like: <code>cb = PyObject_GetAttrString( module, function); PyObject* result = PyObject_CallObject(cb, args);</code>"}, {"owner": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "reply_to_user": {"reputation": 1173, "user_id": 356951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e340acbf9b8c82ca618a0cb4216a2c4d?s=128&d=identicon&r=PG", "display_name": "sambha", "link": "https://stackoverflow.com/users/356951/sambha"}, "edited": false, "score": 0, "creation_date": 1423175224, "post_id": 28343081, "comment_id": 45054041, "body": "@sambha whats the advantage of doing that over my implementation?"}, {"owner": {"reputation": 1173, "user_id": 356951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e340acbf9b8c82ca618a0cb4216a2c4d?s=128&d=identicon&r=PG", "display_name": "sambha", "link": "https://stackoverflow.com/users/356951/sambha"}, "reply_to_user": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "edited": false, "score": 0, "creation_date": 1423180077, "post_id": 28343081, "comment_id": 45055851, "body": "@rafiwiener I am just trying to see if the crash can be avoided. I cannot envision all that you are doing. I have a similar callback setup but I do the func pointer extraction in my C code (from python I pass strings for module.function) than passing the python function obj. Also I see Py_XINCREF in register_new &amp; you have to explicitly call it. Should it be done in the c&#39;tor instead?"}, {"owner": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "edited": false, "score": 0, "creation_date": 1423387913, "post_id": 28343081, "comment_id": 45121718, "body": "i need to call the incref so python won&#39;t destroy this object. i see no reason why to cast it to char and then back to pyobject to avoid the crash i add the holder of the py object to the class that calls it as an attribute then swig doesn&#39;t delete it. the right way to handle this is to call the <b>disown()</b> method but i couldn&#39;t find the way to call it"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 0, "last_activity_date": 1423136690, "creation_date": 1423136690, "answer_id": 28343081, "question_id": 28323808, "link": "https://stackoverflow.com/questions/28323808/error-in-inheritance-c-using-swig/28343081#28343081", "title": "error in inheritance c++ using swig", "body": "<p>Since you're both declaring and defining a new class at the same time you need to enclose that inside <code>%inline</code> within the SWIG interface, e.g.</p>\n\n<pre><code>%inline %{\n    class PyListener : public Listener {\n        PyObject * function;\n    public:\n        PyListener() {};\n        PyListener(PyObject * func) : function(func) {};\n        void register_new() {Py_XINCREF(function);};\n        ~PyListener () {Py_XDECREF(function);};\n         void run(Msg &amp;m) {\n            PyGILState_STATE gstate;\n            gstate = PyGILState_Ensure();\n            PyObject *pValue = PyCObject_FromVoidPtr((void*)&amp;m,NULL);\n            PyObject *pArgs = PyTuple_New(1);\n            PyTuple_SetItem(pArgs, 0, pValue);\n            PyObject_CallObject(function, pArgs);\n            PyGILState_Release(gstate);\n        };\n    };\n%}\n</code></pre>\n\n<p>This causes SWIG to not only wrap the type, but pass the declaration/definition through to the generated C++ code as well. That's needed because <code>PyListener</code> is specific to your SWIG interface so isn't known in any of your other header files.</p>\n"}], "owner": {"reputation": 507, "user_id": 664174, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c13e6c35c5ce38bcbba7b14b2230b2b5?s=128&d=identicon&r=PG", "display_name": "rafi wiener", "link": "https://stackoverflow.com/users/664174/rafi-wiener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 28343081, "answer_count": 1, "score": 1, "last_activity_date": 1423136690, "creation_date": 1423060011, "question_id": 28323808, "link": "https://stackoverflow.com/questions/28323808/error-in-inheritance-c-using-swig", "title": "error in inheritance c++ using swig", "body": "<p>i have a have a c++ code that is been wrapped by swig and used by python.\ni want to create a way to run a callback python code inside the c++ code.\nso i'v created a \"abstract\" class (it's not abstract yet) and i'm sublassing it in c++ inside the .i file.</p>\n\n<p>here is some code snippet that i wrote</p>\n\n<p>.h file</p>\n\n<pre><code>class Listener {\npublic:\n    Listener();\n    virtual void register_new();\n    virtual void run(Msg &amp;m);\n    virtual ~Listener();\n};\n</code></pre>\n\n<p>.i file</p>\n\n<pre><code>%feature(\"director\") PyListener;\nusing namespace std;\n%{\n#include \"../core/listener.h\"\n%}\n\n%include \"../core/listener.h\"\n\nclass PyListener : public Listener {\n    PyObject * function;\npublic:\n    PyListener() {};\n    PyListener(PyObject * func) : function(func) {};\n    void register_new() {Py_XINCREF(function);};\n    ~PyListener () {Py_XDECREF(function);};\n     void run(Msg &amp;m) {\n        PyGILState_STATE gstate;\n        gstate = PyGILState_Ensure();\n        PyObject *pValue = PyCObject_FromVoidPtr((void*)&amp;m,NULL);\n        PyObject *pArgs = PyTuple_New(1);\n        PyTuple_SetItem(pArgs, 0, pValue);\n        PyObject_CallObject(function, pArgs);\n        PyGILState_Release(gstate);\n    };\n};\n</code></pre>\n\n<p>but during compilation a get </p>\n\n<pre><code>/bin/sh ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../.. -I. -I./../core -I./../../../include -I/opt/regression/usr/include/ -I./../../include_dep/ -I/usr/include/python2.6  -fPIC    -g -O2 -MT sim_wrap.lo -MD -MP -MF .deps/sim_wrap.Tpo -c -o sim_wrap.lo sim_wrap.cxx\nlibtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I. -I./../core -I./../../../include -I/opt/regression/usr/include/ -I./../../include_dep/ -I/usr/include/python2.6 -fPIC -g -O2 -MT sim_wrap.lo -MD -MP -MF .deps/sim_wrap.Tpo -c sim_wrap.cxx  -fPIC -DPIC -o .libs/sim_wrap.o\nsim_wrap.cxx: In function \u2018PyObject* _wrap_new_PyListener__SWIG_0(PyObject*, PyObject*)\u2019:\nsim_wrap.cxx:36391: error: \u2018PyListener\u2019 was not declared in this scope\nsim_wrap.cxx:36391: error: \u2018result\u2019 was not declared in this scope\nsim_wrap.cxx:36394: error: expected primary-expression before \u2018)\u2019 token\nsim_wrap.cxx:36394: error: expected \u2018;\u2019 before \u2018new\u2019\n...\n</code></pre>\n"}, {"tags": ["c++", "http", "proxy", "winhttp"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061220, "post_id": 28323736, "comment_id": 44996162, "body": "I&#39;m pretty sure Chrome shares proxy settings with IE. FireFox has its own settings store; I suppose you could try and dig proxy settings out of prefs.js"}, {"owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061252, "post_id": 28323736, "comment_id": 44996175, "body": "WinHttp Communication uses only Internet Explorer?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061301, "post_id": 28323736, "comment_id": 44996203, "body": "WinHTTP is independent from Internet Explorer - neither uses the other."}, {"owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061369, "post_id": 28323736, "comment_id": 44996253, "body": "Yes, i get proxy setting correctly by chrome, but, when i start my communication (my proxy need authentification), if the passord is not in Internet Explorer i have 407 Http Response. I would like to use chrome for my communication"}, {"owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061418, "post_id": 28323736, "comment_id": 44996293, "body": "Ok, it&#39;s just to be sure :). And do you know librairy to communicate via Chrome?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061549, "post_id": 28323736, "comment_id": 44996385, "body": "No I do not. I don&#39;t believe Chrome provides an API for external applications (it does provide an API for Chrome extensions and Chrome apps; perhaps whatever it is you are trying to do can be implemented as one of those)."}, {"owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061740, "post_id": 28323736, "comment_id": 44996521, "body": "Thank you, so it&#39;s the same for Mozilla, it doesn&#39;t provide an API for http communication?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423061869, "post_id": 28323736, "comment_id": 44996615, "body": "Correct, to the best of my knowledge."}, {"owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423062148, "post_id": 28323736, "comment_id": 44996789, "body": "So to do http/https client/server communication, we must use Internet Explorer and cannot use Chrome or Mozilla or other browser?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1423062496, "post_id": 28323736, "comment_id": 44997010, "body": "I&#39;m not sure what you mean by &quot;use Internet Explorer&quot;. Windows operating system provides two HTTP stacks for use by applications - WinInet and WinHttp. Internet Explorer is an application like any other; it happens to be using WinInet. You can choose to use it, too, or use WinHTTP, or implement your own HTTP stack if you are so inclined. FireFox and Chrome chose the latter option."}], "owner": {"reputation": 45, "user_id": 3778975, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0673da798289257cb96dfddba8d15a68?s=128&d=identicon&r=PG&f=1", "display_name": "YannaY", "link": "https://stackoverflow.com/users/3778975/yannay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423059787, "creation_date": 1423059787, "question_id": 28323736, "link": "https://stackoverflow.com/questions/28323736/winhttp-get-proxy-settings-from-chrome", "title": "WinHttp, get proxy settings from Chrome", "body": "<p>I'm developping a \"web-service\" (http/https encapsulation). I developped my client with WinHttp.lib and my server with HttpServer Api.</p>\n\n<p>My client system has proxy to go out of its system. Thanks to WinHttpGetIEProxyConfigForCurrentUser, i get proxy setting and the communication runs. But, <strong>how can i get the proxy settings from Chrome or Mozilla?</strong> </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "windows", "winapi", "createprocessasuser", "local-system-account"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1423086089, "post_id": 28323598, "comment_id": 45011069, "body": "Has the user account &quot;test&quot; ever been logged in interactively?  If the user profile hasn&#39;t been fully configured, this sort of behaviour is to be expected."}, {"owner": {"reputation": 61, "user_id": 3611538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f771831598888c891a3fc9b56f31cdf?s=128&d=identicon&r=PG&f=1", "display_name": "caschulz88", "link": "https://stackoverflow.com/users/3611538/caschulz88"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1423123834, "post_id": 28323598, "comment_id": 45023309, "body": "That doesn&#39;t metter at all. Even if the user account has been logged in interactively and the profile is fully configured the styles are not applied somehow. Do you think it might be something with extra permissions that are needed since some version of Windows 7? But the strange thing is that it never works on Windows 7 in VM (VirtualBox), but mostly it works on Windows 7 native machines."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1423168367, "post_id": 28323598, "comment_id": 45050662, "body": "Why are you messing around with ACEs, the CWD, or impersonation?  You don&#39;t need any of that just to call <code>CreateProcessAsUser()</code>.  And if you have the user&#39;s credentials, consider using <code>CreateProcessWithLogonW()</code> instead, which handles user logon and profile loading for you."}, {"owner": {"reputation": 61, "user_id": 3611538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f771831598888c891a3fc9b56f31cdf?s=128&d=identicon&r=PG&f=1", "display_name": "caschulz88", "link": "https://stackoverflow.com/users/3611538/caschulz88"}, "edited": false, "score": 0, "creation_date": 1424343289, "post_id": 28323598, "comment_id": 45513698, "body": "Hey, this is not the case if you are trying to execute the command from local system user as running in a service. Then CreateProvessWithLogonW is not possible and always returns error code 5 (access denied)."}, {"owner": {"reputation": 1520, "user_id": 4932710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58fa7e4daa95c3de8b354093b08b9f33?s=128&d=identicon&r=PG", "display_name": "Dave Sibiski", "link": "https://stackoverflow.com/users/4932710/dave-sibiski"}, "edited": false, "score": 0, "creation_date": 1553050424, "post_id": 28323598, "comment_id": 97238074, "body": "@caschulz88 Did you ever find a solution to this?"}], "owner": {"reputation": 61, "user_id": 3611538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f771831598888c891a3fc9b56f31cdf?s=128&d=identicon&r=PG&f=1", "display_name": "caschulz88", "link": "https://stackoverflow.com/users/3611538/caschulz88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1222, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436967024, "creation_date": 1423059392, "question_id": 28323598, "link": "https://stackoverflow.com/questions/28323598/createprocessasuser-from-local-system-admin-does-not-apply-windows-style", "title": "CreateProcessAsUser from Local System Admin does not apply Windows style", "body": "<p>i have a problem in an application using Windows API CreateProcessAsUser from local system admin in order to run an application as a different user. Everything works fine so far, but the Windows window and frame style are not applied somehow. The window always looks like a Windows 2000 window with huge frames. I also attached some screenshot</p>\n\n<p><img src=\"https://i.stack.imgur.com/EzExh.png\" alt=\"Broken style window\"></p>\n\n<p>I also wrote some example code of how we do all the magic in C++ without taking care of handles and stuff.</p>\n\n<p>Just make sure that you have locally some user \"test\" with password \"test\" set and try to run the posted source code as local system administrator. Other user will cause an error code 1413 if you try to execute the code.</p>\n\n<p>The problem occurres mainly on Windows 7 VMs in VirtualBox, on some Windows 7 systems and on all Windows 8.1 systems. Very strange. Can anyone help me to solve this problem? Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;UserEnv.h&gt;\n#include &lt;WinWlx.h&gt;\n\nint AddAceToWindowStation( HWINSTA  hwinsta, PSID psid )\n{\n    DWORD lengthNeeded;\n\n    SECURITY_INFORMATION secInfo = DACL_SECURITY_INFORMATION;\n    if( !GetUserObjectSecurity( hwinsta, &amp;secInfo, NULL, NULL, &amp;lengthNeeded ) )\n    {\n        if ( GetLastError() != 122 )\n        {\n            std::cout &lt;&lt; \"GetUserObjectSecurity1 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n            return 0;\n        }\n    }\n\n    PSECURITY_DESCRIPTOR pSecDescriptor = ( PSECURITY_DESCRIPTOR ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        lengthNeeded );\n\n    if ( pSecDescriptor == NULL )\n    {\n        std::cout &lt;&lt; \"Allocating memory for pSecDescriptor failed: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    PSECURITY_DESCRIPTOR pSecDescriptorNew = ( PSECURITY_DESCRIPTOR ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        lengthNeeded );\n\n    if ( pSecDescriptorNew == NULL )\n    {\n        std::cout &lt;&lt; \"Allocating memory for pSecDescriptorNew failed: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !GetUserObjectSecurity( hwinsta, &amp;secInfo, pSecDescriptor, lengthNeeded, &amp;lengthNeeded ) )\n    {\n        std::cout &lt;&lt; \"GetUserObjectSecurity2 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !InitializeSecurityDescriptor( pSecDescriptorNew, SECURITY_DESCRIPTOR_REVISION ) )\n    {\n        std::cout &lt;&lt; \"InitializeSecurityDescriptor error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    BOOL DaclPresent;\n    PACL pOldDacl;\n    BOOL DaclDefaulted;\n    if ( !GetSecurityDescriptorDacl( pSecDescriptor, &amp;DaclPresent, &amp;pOldDacl, &amp;DaclDefaulted ) )\n    {\n        std::cout &lt;&lt; \"GetSecurityDescriptorDacl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    // Get size information for DACL\n    ACL_SIZE_INFORMATION AclInfo;\n    AclInfo.AceCount = 0; // Assume NULL DACL.\n    AclInfo.AclBytesFree = 0;\n    AclInfo.AclBytesInUse = sizeof( ACL );\n\n    if ( pOldDacl == NULL )\n        DaclPresent = FALSE;\n\n    // If not NULL DACL, gather size information from DACL.\n    if ( DaclPresent )\n    {\n        if ( !GetAclInformation( pOldDacl, &amp;AclInfo,\n            sizeof( ACL_SIZE_INFORMATION ), AclSizeInformation ) )\n        {\n            std::cout &lt;&lt; \"GetAclInformation error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n            return 0;\n        }\n    }\n\n    DWORD cbNewACL = AclInfo.AclBytesInUse + sizeof( ACCESS_ALLOWED_ACE ) + sizeof( ACL ) + sizeof( ACL ) + sizeof( ACCESS_ALLOWED_ACE ) + sizeof( ACL ) + sizeof( ACL );\n\n    PACL pNewACL = ( PACL ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        cbNewACL );\n\n    if ( !InitializeAcl( pNewACL, cbNewACL, ACL_REVISION ) )\n    {\n        std::cout &lt;&lt; \"InitializeAcl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    LPVOID         pTempAce = NULL;\n\n    // Copy old Ace to new DACL\n    if ( DaclPresent &amp;&amp; AclInfo.AceCount )\n    {\n        std::cout &lt;&lt; \"AclInfo.AceCount:\" &lt;&lt; AclInfo.AceCount &lt;&lt; std::endl;\n        for ( int i = 0; i &lt; AclInfo.AceCount; ++i )\n        {\n            if ( !GetAce( pOldDacl, i, &amp;pTempAce ) )\n            {\n                std::cout &lt;&lt; \"GetAce[\" &lt;&lt; i &lt;&lt; \"] error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n                return 0;\n            }\n\n            if ( !AddAce( pNewACL, ACL_REVISION, MAXDWORD, pTempAce,\n                ( ( PACE_HEADER ) pTempAce )-&gt;AceSize ) )\n            {\n                std::cout &lt;&lt; \"AddAce[\" &lt;&lt; i &lt;&lt; \"] error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n                return 0;\n            }\n        }\n    }\n\n    if ( !AddAccessAllowedAceEx( pNewACL, ACL_REVISION, CONTAINER_INHERIT_ACE | INHERIT_ONLY_ACE | OBJECT_INHERIT_ACE, GENERIC_READ | GENERIC_WRITE | GENERIC_EXECUTE | GENERIC_ALL, psid ) )\n    {\n        std::cout &lt;&lt; \"AddAccessAllowedAceEx1 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !AddAccessAllowedAceEx( pNewACL, ACL_REVISION, NO_PROPAGATE_INHERIT_ACE, WINSTA_ENUMDESKTOPS | WINSTA_READATTRIBUTES | WINSTA_ACCESSCLIPBOARD | WINSTA_CREATEDESKTOP | WINSTA_WRITEATTRIBUTES | WINSTA_ACCESSGLOBALATOMS | WINSTA_EXITWINDOWS | WINSTA_ENUMERATE | WINSTA_READSCREEN | STANDARD_RIGHTS_REQUIRED, psid ) )\n    {\n        std::cout &lt;&lt; \"AddAccessAllowedAceEx2 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !SetSecurityDescriptorDacl( pSecDescriptorNew, TRUE, pNewACL, FALSE ) )\n    {\n        std::cout &lt;&lt; \"SetSecurityDescriptorDacl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !SetUserObjectSecurity( hwinsta, &amp;secInfo, pSecDescriptorNew ) )\n    {\n        std::cout &lt;&lt; \"SetUserObjectSecurity error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    return 1;\n}\n\nint AddAceToDesktop( HDESK  hdesk, PSID psid )\n{\n    DWORD lengthNeeded;\n\n    SECURITY_INFORMATION secInfo = DACL_SECURITY_INFORMATION;\n    if ( !GetUserObjectSecurity( hdesk, &amp;secInfo, NULL, NULL, &amp;lengthNeeded ) )\n    {\n        if ( GetLastError() != 122 )\n        {\n            std::cout &lt;&lt; \"GetUserObjectSecurity1 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n            return 0;\n        }\n    }\n\n    PSECURITY_DESCRIPTOR pSecDescriptor = ( PSECURITY_DESCRIPTOR ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        lengthNeeded );\n\n    if ( pSecDescriptor == NULL )\n    {\n        std::cout &lt;&lt; \"Allocating memory for pSecDescriptor failed: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    PSECURITY_DESCRIPTOR pSecDescriptorNew = ( PSECURITY_DESCRIPTOR ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        lengthNeeded );\n\n    if ( pSecDescriptorNew == NULL )\n    {\n        std::cout &lt;&lt; \"Allocating memory for pSecDescriptorNew failed: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !GetUserObjectSecurity( hdesk, &amp;secInfo, pSecDescriptor, lengthNeeded, &amp;lengthNeeded ) )\n    {\n        std::cout &lt;&lt; \"GetUserObjectSecurity2 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !InitializeSecurityDescriptor( pSecDescriptorNew, SECURITY_DESCRIPTOR_REVISION ) )\n    {\n        std::cout &lt;&lt; \"InitializeSecurityDescriptor error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    BOOL DaclPresent;\n    PACL pOldDacl;\n    BOOL DaclDefaulted;\n    if ( !GetSecurityDescriptorDacl( pSecDescriptor, &amp;DaclPresent, &amp;pOldDacl, &amp;DaclDefaulted ) )\n    {\n        std::cout &lt;&lt; \"GetSecurityDescriptorDacl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    // Get size information for DACL\n    ACL_SIZE_INFORMATION AclInfo;\n    AclInfo.AceCount = 0; // Assume NULL DACL.\n    AclInfo.AclBytesFree = 0;\n    AclInfo.AclBytesInUse = sizeof( ACL );\n\n    if ( pOldDacl == NULL )\n        DaclPresent = FALSE;\n\n    // If not NULL DACL, gather size information from DACL.\n    if ( DaclPresent )\n    {\n        if ( !GetAclInformation( pOldDacl, &amp;AclInfo,\n            sizeof( ACL_SIZE_INFORMATION ), AclSizeInformation ) )\n        {\n            std::cout &lt;&lt; \"GetAclInformation error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n            return 0;\n        }\n    }\n\n    DWORD cbNewACL = AclInfo.AclBytesInUse + sizeof( ACCESS_ALLOWED_ACE ) + sizeof( ACL ) + sizeof( ACL );\n\n    PACL pNewACL = ( PACL ) HeapAlloc(\n        GetProcessHeap(),\n        HEAP_ZERO_MEMORY,\n        cbNewACL );\n\n    if ( !InitializeAcl( pNewACL, cbNewACL, ACL_REVISION ) )\n    {\n        std::cout &lt;&lt; \"InitializeAcl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    LPVOID         pTempAce = NULL;\n\n    // Copy old Ace to new DACL\n    if ( DaclPresent &amp;&amp; AclInfo.AceCount )\n    {\n        std::cout &lt;&lt; \"AclInfo.AceCount:\" &lt;&lt; AclInfo.AceCount &lt;&lt; std::endl;\n        for ( int i = 0; i &lt; AclInfo.AceCount; ++i )\n        {\n            if ( !GetAce( pOldDacl, i, &amp;pTempAce ) )\n            {\n                std::cout &lt;&lt; \"GetAce[\" &lt;&lt; i &lt;&lt; \"] error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n                return 0;\n            }\n\n            if ( !AddAce( pNewACL, ACL_REVISION, MAXDWORD, pTempAce,\n                ( ( PACE_HEADER ) pTempAce )-&gt;AceSize ) )\n            {\n                std::cout &lt;&lt; \"AddAce[\" &lt;&lt; i &lt;&lt; \"] error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n                return 0;\n            }\n        }\n    }\n\n    if ( !AddAccessAllowedAce( pNewACL, ACL_REVISION, DESKTOP_READOBJECTS | DESKTOP_CREATEWINDOW | DESKTOP_CREATEMENU | DESKTOP_HOOKCONTROL | DESKTOP_JOURNALRECORD | DESKTOP_JOURNALPLAYBACK | DESKTOP_ENUMERATE | DESKTOP_WRITEOBJECTS | DESKTOP_SWITCHDESKTOP | STANDARD_RIGHTS_REQUIRED, psid ) )\n    {\n        std::cout &lt;&lt; \"AddAccessAllowedAce error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !SetSecurityDescriptorDacl( pSecDescriptorNew, TRUE, pNewACL, FALSE ) )\n    {\n        std::cout &lt;&lt; \"SetSecurityDescriptorDacl error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    if ( !SetUserObjectSecurity( hdesk, &amp;secInfo, pSecDescriptorNew ) )\n    {\n        std::cout &lt;&lt; \"SetUserObjectSecurity error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return 0;\n    }\n\n    return 1;\n}\n\nint AddAceToBaseNameObjectsDirectory( PSID psid, TOKEN_INFORMATION_CLASS tClass )\n{\n    return 0;\n}\n\nint main( int argc, TCHAR *argv[] )\n{\n    HANDLE userToken;\n\n    if ( !LogonUser( L\"test\", L\"\", L\"test\", LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, &amp;userToken ) )\n    {\n        std::cout &lt;&lt; \"LogonUser error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    HANDLE token;\n\n    if ( !DuplicateTokenEx( userToken, MAXIMUM_ALLOWED, NULL, SecurityImpersonation, TokenPrimary, &amp;token ) )\n    {\n        std::cout &lt;&lt; \"DuplicateTokenEx error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    PROFILEINFO profileInfo;\n    profileInfo.lpUserName = L\"test\";\n    profileInfo.dwFlags = NULL;\n    profileInfo.lpProfilePath = L\"C:\\\\Users\\\\test\";\n\n    LoadUserProfile( token, &amp;profileInfo );\n\n    LUID tcb_privilege_flag;\n\n    if ( !LookupPrivilegeValue( NULL, SE_SECURITY_NAME, &amp;tcb_privilege_flag ) )\n    {\n        std::cout &lt;&lt; \"LookupPrivilegeValue error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    TOKEN_PRIVILEGES tp;\n\n    tp.PrivilegeCount = 1;\n    tp.Privileges[0].Luid = tcb_privilege_flag;\n    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;\n\n    if ( !AdjustTokenPrivileges( token, FALSE, &amp;tp, sizeof( TOKEN_PRIVILEGES ), ( PTOKEN_PRIVILEGES ) NULL, ( PDWORD ) NULL ) )\n    {\n        std::cout &lt;&lt; \"AdjustTokenPrivileges error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    HWINSTA hwinstasave = GetProcessWindowStation();\n    HWINSTA hwinsta = OpenWindowStation( L\"winsta0\", FALSE, READ_CONTROL | WRITE_DAC );\n\n    HDESK hdesk = OpenDesktop( L\"default\", NULL, FALSE, READ_CONTROL | WRITE_DAC | DESKTOP_WRITEOBJECTS | DESKTOP_READOBJECTS );\n\n    DWORD token_group_size;\n\n    if ( !GetTokenInformation( token, TokenGroups, NULL, 0, &amp;token_group_size ) )\n    {\n        if ( GetLastError() != 122 )\n        {\n            std::cout &lt;&lt; \"GetTokenInformation1 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n            return -1;\n        }\n    }\n\n    PTOKEN_GROUPS pTokenGroup = ( PTOKEN_GROUPS ) new BYTE[token_group_size];\n    memset( pTokenGroup, 0, token_group_size );\n\n    if ( !GetTokenInformation( token, TokenGroups, pTokenGroup, token_group_size, &amp;token_group_size ) )\n    {\n        std::cout &lt;&lt; \"GetTokenInformation2 error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    PSID pSid = NULL;\n    for ( int i = 0; i &lt; pTokenGroup-&gt;GroupCount; ++i )\n    {\n        if ( ( pTokenGroup-&gt;Groups[i].Attributes &amp; SE_GROUP_LOGON_ID ) == SE_GROUP_LOGON_ID )\n        {\n            pSid = pTokenGroup-&gt;Groups[i].Sid;\n        }\n    }\n\n    if ( pSid == NULL )\n    {\n        std::cout &lt;&lt; \"Unable to get logonSID error! No entry found!!!\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    if ( !AddAceToWindowStation( hwinsta, pSid ) )\n    {\n        std::cout &lt;&lt; \"AddAceToWindowStation error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    if ( !AddAceToDesktop( hdesk, pSid ) )\n    {\n        std::cout &lt;&lt; \"AddAceToDesktop error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    //if ( !AddAceToBaseNameObjectsDirectory( pSid, TokenSessionId ) )\n    //{\n    //  std::cout &lt;&lt; \"AddAceToBaseNameObjectsDirectory error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n    //  return -1;\n    //}\n\n    if ( !ImpersonateLoggedOnUser( token ) )\n    {\n        std::cout &lt;&lt; \"ImpersonateLoggedOnUser error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    STARTUPINFO startupInfo;\n\n    memset( &amp;startupInfo, 0, sizeof( startupInfo ) );\n\n    startupInfo.dwFlags = STARTF_USESHOWWINDOW;\n    startupInfo.wShowWindow = SW_SHOWNORMAL;\n    startupInfo.lpDesktop = L\"winsta0\\\\default\";\n    startupInfo.cb = sizeof( startupInfo );\n\n    PROCESS_INFORMATION procInfo;\n\n    memset( &amp;procInfo, 0, sizeof( procInfo ) );\n\n    if ( !SetCurrentDirectory( L\"C:\\\\Windows\" ) )\n    {\n        std::cout &lt;&lt; \"SetCurrentDirectory error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    if ( !CreateProcessAsUserW( token, L\"Notepad.exe\", L\"Notepad.exe\", NULL, NULL, FALSE, DETACHED_PROCESS, NULL, NULL, &amp;startupInfo, &amp;procInfo ) )\n    {\n        std::cout &lt;&lt; \"CreateProcessAsUser error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n\n    if ( !WaitForSingleObject( token, INFINITE ) )\n    {\n        std::cout &lt;&lt; \"WaitForSingleObject error: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        return -1;\n    }\n}\n</code></pre>\n"}]