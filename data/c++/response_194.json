[{"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1538006344, "post_id": 52527477, "comment_id": 91994626, "body": "I have no earthly idea why anyone would downvote this question. I don&#39;t know how you can do it programatically. I know there are log entries for nap events in the system log, but that would seem a pretty ghetto solution. Genuinely curious myself."}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1538013579, "post_id": 52528185, "comment_id": 91996209, "body": "Yes, I did look into that, and I think tracking my app&#39;s occlusion-state would be helpful.  The problem is, AFAICT the only way to get my app&#39;s occlusion-state is via callback methods called on the NSApplicationDelegate object, which Qt doesn&#39;t give me access to (it&#39;s declared only in their private header files).  I&#39;m not terribly fluent in Objective C++; is there a way to install a second NSApplicationDelegate, or to forward a callback on the original NSApplicationDelegate over to an object that I have control of?"}, {"owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1538015907, "post_id": 52528185, "comment_id": 91996612, "body": "Well, I don&#39;t know much about Qt, but can you use <code>NSNotificationCenter</code>? I just did a test and it works to add observer to <code>NSApplicationDidChangeOcclusionStateNotification</code> and <code>NSWindowDidChangeOcclusionStateNotification</code> respectively, using for example <code>addObserverForName:object:queue:block</code>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1538026222, "post_id": 52528185, "comment_id": 91999189, "body": "I was able to get NSNotificationCenter to work, but it turns out to be overkill for my needs -- in the end all I needed was a function that returned a boolean, so I went with:  <code>bool is_application_occluded() {if ([NSApp occlusionState] &amp; NSApplicationOcclusionStateVisible) return false; else return true;}</code>"}, {"owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1538066287, "post_id": 52528185, "comment_id": 92022962, "body": "Oh nice one! Yes, I forgot you were just asking for method to call rather than a notification. Glad you got it figured out!"}], "tags": [], "owner": {"reputation": 11609, "user_id": 233944, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/231ea4f1017c30d4fabcda7671c91f27?s=128&d=identicon&r=PG", "display_name": "TheNextman", "link": "https://stackoverflow.com/users/233944/thenextman"}, "is_accepted": true, "score": 1, "last_activity_date": 1538012006, "creation_date": 1538012006, "answer_id": 52528185, "question_id": 52527477, "link": "https://stackoverflow.com/questions/52527477/how-can-i-query-to-find-out-if-my-macos-x-app-is-in-app-nap-mode/52528185#52528185", "title": "How can I query to find out if my MacOS/X app is in app-nap mode?", "body": "<p>I'm not sure there's a specific answer to your question (I don't think the API you talk about actually exists).</p>\n\n<p>You could start by reading <a href=\"https://developer.apple.com/library/archive/documentation/Performance/Conceptual/power_efficiency_guidelines_osx/AppNap.html\" rel=\"nofollow noreferrer\">Energy Efficiency Guide for Mac Apps</a>, especially the section \"Enhancing App Nap\":</p>\n\n<blockquote>\n  <p>By default, your app becomes eligible for App Nap if it\u2019s not actively\n  engaged with the user and hasn\u2019t updated a visible window for some\n  length of time. However, your app knows the most about the importance\n  of its activity, and shouldn\u2019t rely on App Nap to put it into an idle\n  state. The most effective way to enhance App Nap is for your app to\n  listen for notifications that it\u2019s no longer in active use and to\n  suspend energy-intensive work as quickly as possible</p>\n</blockquote>\n\n<p>Given the scenario you describe (pausing network requests to update status indicators), check out <a href=\"https://developer.apple.com/library/archive/documentation/Performance/Conceptual/power_efficiency_guidelines_osx/WorkWhenVisible.html#//apple_ref/doc/uid/TP40013929-CH18-SW1\" rel=\"nofollow noreferrer\">Notify Your App When Visibility Changes</a>.</p>\n\n<p>It has examples of the application delegate methods <code>applicationDidChangeOcclusionState:</code> and <code>windowDidChangeOcclusionState:</code>. When your app or the relevant window is occluded, you could pause your network activity, and resume it when the occlusion state goes back to visible.</p>\n\n<p>The guide mentioned above also links to similar documentation for checking the active state of your app.</p>\n\n<p>If your app is not visible, and not active, it's a candidate for App Nap. At that point, what difference does it make in your case if the app is actually napping yet? If your aim is to be energy efficient, pause your network activity once the app is not visible - since no-one can see your status indicator anyway!</p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 52528185, "answer_count": 1, "score": 2, "last_activity_date": 1538012006, "creation_date": 1538005634, "question_id": 52527477, "link": "https://stackoverflow.com/questions/52527477/how-can-i-query-to-find-out-if-my-macos-x-app-is-in-app-nap-mode", "title": "How can I query to find out if my MacOS/X app is in app-nap mode?", "body": "<p>I've got a C++ app (Qt-based) running on MacOS (10.10 and newer), and I'd like it to modify its behavior slightly when it is running under MacOS's <a href=\"https://arstechnica.com/gadgets/2013/10/os-x-10-9/13/\" rel=\"nofollow noreferrer\">app-nap mode</a>.  (In particular, there are some periodic network queries it does in order to update status indicators in its GUI, but if the application is napping I'd prefer that it stop doing them until after it has woken up from its nap).</p>\n\n<p>If I had a function like this:</p>\n\n<pre><code> bool IsThisProcessNapping();  // returns true iff we're in app-nap mode\n</code></pre>\n\n<p>... I think I could implement the behavior I want, but I don't know of any such function.  Does it exist under some other name?</p>\n\n<p>(Note that I don't want to just disable app-nap, since I want my program to be energy-efficient if possible)</p>\n"}, {"tags": ["c++", "c++11", "eof"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1538003139, "post_id": 52527161, "comment_id": 91993957, "body": "You don&#39;t ever seem to set a node&#39;s <code>next</code> to anything but <code>NULL</code>. The list will always appear to have at most 1 element."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1538003172, "post_id": 52527161, "comment_id": 91993968, "body": "You should read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">this question</a>."}, {"owner": {"reputation": 51, "user_id": 9331866, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1a11926866ec731ba0e5a8e477da8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Tripp", "link": "https://stackoverflow.com/users/9331866/devin-tripp"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1538003200, "post_id": 52527161, "comment_id": 91993976, "body": "I think you&#39;re right, might be a simple mistake. :( been looking at this for hours lol, Actually it doesn&#39;t need to point to anything I don&#39;t think."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1538003488, "post_id": 52527161, "comment_id": 91994051, "body": "You only ever allocate 2 nodes so I&#39;m not sure how you plan to store 3 values. There should be an allocation inside the loop somehow"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1538004182, "post_id": 52527161, "comment_id": 91994218, "body": "When you find yourself looking for hours, stop.Consult your design documents to see where you may have gone wrong. If you have no design, why are you writing code? If you don&#39;t know what you are writing and why, you are almost always wasting your time. If you do manage to write code, how will you know if it works correctly without the program goals clearly outlined with testable metrics?"}, {"owner": {"reputation": 51, "user_id": 9331866, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1a11926866ec731ba0e5a8e477da8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Tripp", "link": "https://stackoverflow.com/users/9331866/devin-tripp"}, "edited": false, "score": 0, "creation_date": 1538013521, "post_id": 52527161, "comment_id": 91996197, "body": "The reason shouldn&#39;t need to be explained, but if you must know I am trying to better my education in programming, and I believe practicing data models is a good tactic. As to why everyone loves to downvote what&#39;s wrong with you? what&#39;s wrong with my question? it was simple. I found out exactly where the issue was the leg work was done. I simply needed help with a programming problem, and everyone just throws negativity on this site. So amazing how much negativity is here. You hate over nothing. Just needed help on learning data structures. I appreciate the help. It also showed me different"}, {"owner": {"reputation": 51, "user_id": 9331866, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1a11926866ec731ba0e5a8e477da8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Tripp", "link": "https://stackoverflow.com/users/9331866/devin-tripp"}, "edited": false, "score": 0, "creation_date": 1538013550, "post_id": 52527161, "comment_id": 91996200, "body": "ways I could write the same code, and that I am very thankful for. as for the haters please unplug your computer"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1538027756, "post_id": 52527161, "comment_id": 91999812, "body": "The problem with this question is twofold: The question is lacking a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I wouldn&#39;t downvote in this case because all of the information needed to answer the question was in the snippet you provided. This is uncommon, and, unfortunately, sets up the other likely downvote reason: The question was <i>too</i> simple. To some this means you didn&#39;t invest enough effort. But it often means your effort was wasted. I recommend spending time practicing logic, program design, and debugging as well as writing code.Start with a good plan and the program&#39;s much more likely to work. If not, debug."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1538004482, "last_edit_date": 1538004482, "creation_date": 1538004153, "answer_id": 52527294, "question_id": 52527161, "link": "https://stackoverflow.com/questions/52527161/why-is-this-load-function-only-grabbing-the-first-thing-in-the-file/52527294#52527294", "title": "Why is this load function only grabbing the first thing in the file?", "body": "<pre><code>#include &lt;fstream&gt;\n\nusing namespace std;\n\nstruct node\n{\n    node *next;\n    node *prev;\n    double data;\n\n    node(node *next, node *prev, double data)   // give node a constructor to not \n    : next{ next }, prev{ prev }, data{ data }  // clutter code with assignments\n    {}\n};\n\n// assuming load is some member function of a list that has a head and a tail\nvoid load() {\n    ifstream fload{ \"DoubleList.dat\" };  // use constructor to open file\n    if (!fload.is_open())\n        return;  // early exit if file could not be opened\n\n    node *root = nullptr;\n    node *curr = root;\n\n    double value;\n    while (fload &gt;&gt; value)  // as long as doubles can be successfully extracted\n    {\n        if (!root) {  // if our list doesn't have a root yet\n            curr = root = new node(nullptr, nullptr, value);\n            head = tail = curr;\n            continue;\n        }\n\n        curr-&gt;next = new node(nullptr, curr, value);  // construct the next node\n        tail = curr = curr-&gt;next;  // and make it the current one.\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1538007571, "post_id": 52527298, "comment_id": 91994956, "body": "Two notes for future readers about <code>node **n = &amp;head;</code>. <code>head</code> is nothing but a node-less <code>next</code>. By abstracting the minor differences away you can use the same code for <code>head</code> and <code>next</code>, eliminating lots of nearly identical code. Second <code>n</code> contains a pointer to the last node&#39;s <code>next</code> (or <code>head</code>). This means you don&#39;t have to keep track of the last node to update its <code>next</code>. This saves you from needing extra variables and book-keeping code."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1538004471, "last_edit_date": 1538004471, "creation_date": 1538004163, "answer_id": 52527298, "question_id": 52527161, "link": "https://stackoverflow.com/questions/52527161/why-is-this-load-function-only-grabbing-the-first-thing-in-the-file/52527298#52527298", "title": "Why is this load function only grabbing the first thing in the file?", "body": "<p>You are allocating only 2 <code>node</code>s.  If the file has less than 2 values, you leak memory.  If the file has more than 2 values, you are not allocating a new <code>node</code> for <em>every</em> value.</p>\n\n<p>Don't rely on <code>eof()</code>, either.  Let <code>operator&gt;&gt;</code> tell you if it successfully read a value or not.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>void load() {\n    // TODO: make sure the list is freed and head/tail are null before continuing!\n\n    ifstream fload;\n    fload.open(\"DoubleList.dat\");\n\n    node **n = &amp;head;\n    T data; // &lt;-- use whatever your actual node data type is...\n\n    while (fload &gt;&gt; data) {\n        *n = new node;\n        (*n)-&gt;data = data;\n        (*n)-&gt;next = NULL;\n        (*n)-&gt;prev = tail;\n        tail = *n;\n        n = &amp;(tail-&gt;next);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9331866, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1a11926866ec731ba0e5a8e477da8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Tripp", "link": "https://stackoverflow.com/users/9331866/devin-tripp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1538004482, "creation_date": 1538003053, "last_edit_date": 1538003246, "question_id": 52527161, "link": "https://stackoverflow.com/questions/52527161/why-is-this-load-function-only-grabbing-the-first-thing-in-the-file", "title": "Why is this load function only grabbing the first thing in the file?", "body": "<p>I know this has something to do with eof, but I don't know how streams work exactly, i'd understand better if someone could tell me whats going on.</p>\n\n<p>say I have 3 numbers {1, 2, 3}\nthe load function puts the variables into the nodes, but when I go to print all the nodes only 1 will print.</p>\n\n<pre><code>void load() {\n    ifstream fload;\n    node *n = new node;\n    node *temp = new node;\n    fload.open(\"DoubleList.dat\");\n    if (fload) {\n        fload &gt;&gt; n-&gt;data;\n        n-&gt;next = NULL;\n        n-&gt;prev = NULL;\n        head = n;\n        tail = n;\n        curr = n;\n        while (!fload.eof()) {\n            fload &gt;&gt; temp-&gt;data;\n            temp-&gt;next = NULL;\n            temp-&gt;prev = curr;\n            curr = temp;\n            tail = temp;\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "unique-ptr"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1538002447, "post_id": 52527051, "comment_id": 91993785, "body": "Neither of those codes allocates a <code>std::string</code> array with one element."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1538002484, "post_id": 52527051, "comment_id": 91993792, "body": "You must use <code>new[]</code> if allocating for array form of unique_ptr"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 3, "creation_date": 1538003172, "post_id": 52527051, "comment_id": 91993967, "body": "If the API just used <code>std::vector</code>, this would be way easier."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1538003319, "post_id": 52527051, "comment_id": 91994002, "body": "It&#39;d be nice if you could do something like <code>make_unique&lt;std::string[2]&gt;(&quot;foo&quot;, &quot;bar&quot;)</code>, but the standard has outlawed that"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1538003690, "post_id": 52527051, "comment_id": 91994107, "body": "@o11c this seems like a good use case for <a href=\"https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one\">span</a>, then the caller is not forced to use a particular container (be it <code>unique_ptr[]</code>, or <code>vector</code> etc.)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538060750, "post_id": 52527051, "comment_id": 92019752, "body": "@M.M perhaps, though that would require <code>AddString()</code> to make a copy of whatever data is passed in, instead of take owrnship of it."}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1538003019, "creation_date": 1538003019, "answer_id": 52527156, "question_id": 52527051, "link": "https://stackoverflow.com/questions/52527051/proper-unique-ptr-declaration-of-1-element-allocated-array/52527156#52527156", "title": "Proper unique_ptr declaration of 1 element allocated array", "body": "<p>The problem is that you use non-array <code>new</code> to allocate memory managed by <code>unique_ptr&lt;T[]&gt;</code> which will then go on to use array <code>delete[]</code>, causing undefined behaviour.</p>\n\n<p>The syntax could be:</p>\n\n<pre><code>badparam.AddString(\"filename\", std::unique_ptr&lt;std::string[]&gt;(new std::string[1]{\"test\"}), 1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10421169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5dae935544a6fd9e012cdec74ee3b41?s=128&d=identicon&r=PG&f=1", "display_name": "viliam", "link": "https://stackoverflow.com/users/10421169/viliam"}, "edited": false, "score": 0, "creation_date": 1538060049, "post_id": 52527205, "comment_id": 92019277, "body": "Thanks! This syntax is exactly what I was searching for. I need C++11 for now so I&#39;d need to write my own make_unique, but that&#39;s not so bad. The string[0] is my facepalm moment for the day..."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1538003457, "creation_date": 1538003457, "answer_id": 52527205, "question_id": 52527051, "link": "https://stackoverflow.com/questions/52527051/proper-unique-ptr-declaration-of-1-element-allocated-array/52527205#52527205", "title": "Proper unique_ptr declaration of 1 element allocated array", "body": "<p>The array specialization of <code>std::unique_ptr</code> requires the array to be allocated with <code>new[]</code>, as it uses <code>delete[]</code> by default to free the array.</p>\n\n<p>In your first example, you are allocating a single <code>std::string</code> object with <code>new</code>, not a 1-element array with <code>new[]</code>.</p>\n\n<p>In your second example, you are allocating a 0-element <code>std::string</code> array, but you need a 1-element array instead.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>std::unique_ptr&lt;std::string[]&gt; strings(new std::string[1]); // &lt;-- NOT 0!\n// Or, if you are using C++14:\n// auto strings = std::make_unique&lt;string[]&gt;(1);\nstrings[0] = \"test\";\ntestparam.AddString(\"filename\", std::move(strings), 1);\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>testparam.AddString(\"filename\", std::unique_ptr&lt;std::string[]&gt;(new std::string[1]{\"test\"}), 1);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10421169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5dae935544a6fd9e012cdec74ee3b41?s=128&d=identicon&r=PG&f=1", "display_name": "viliam", "link": "https://stackoverflow.com/users/10421169/viliam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 52527205, "answer_count": 2, "score": 1, "last_activity_date": 1538071460, "creation_date": 1538002302, "last_edit_date": 1538071460, "question_id": 52527051, "link": "https://stackoverflow.com/questions/52527051/proper-unique-ptr-declaration-of-1-element-allocated-array", "title": "Proper unique_ptr declaration of 1 element allocated array", "body": "<p>I need to use an API as part of a project that includes a class called <code>ParamSet</code> with a method that is defined as the following: </p>\n\n<pre><code>void AddString(const std::string &amp;, std::unique_ptr&lt;std::string[]&gt; v, int nValues);\n</code></pre>\n\n<p>The purpose of the method is to add an array of strings to the object to describe some parameter. For example a <code>ParamSet</code> object could require a \"filename\" parameter that points to an array of a <code>nValues</code> strings. </p>\n\n<p>However, when I try and pass the method a <code>unique_ptr</code> to an array containing only 1 string, the code seg faults upon calling the destructor for the <code>ParamSet</code> object unless I define the <code>unique_ptr</code> in a specific way. </p>\n\n<p>The following code causes a seg-fault upon calling <code>Clear()</code> or on <code>return</code>. </p>\n\n<pre><code>ParamSet badparam;\nbadparam.AddString(\"filename\", unique_ptr&lt;string[]&gt; (new string(\"test\")), 1);\nbadparam.Clear(); // &lt;------ CAUSES SEG FAULT\n</code></pre>\n\n<p>However the following does not cause a seg fault.</p>\n\n<pre><code>ParamSet testparam;\nstd::unique_ptr&lt;std::string[]&gt; strings(new std::string[0]); // DOH, should be string[1]\nstrings[0] = std::string(\"test\");\ntestparam.AddString(\"filename\", std::move(strings), 1);\ntestparam.Clear(); // &lt;------ NO SEG FAULT\n</code></pre>\n\n<p>I don't understand why creating the <code>unique_ptr</code> in the line calling <code>AddString</code> leads to a seg fault, but creating it outside of the call to does not. </p>\n"}, {"tags": ["c++", "algorithm", "key", "containers", "matching"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1538001514, "post_id": 52526885, "comment_id": 91993562, "body": "create two maps. A  maps from key to col1, B from key to col2. then just compare A[key] == B[key] if key  exists in both"}, {"owner": {"reputation": 103, "user_id": 4652030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee009885792d76b53a414e053da32c3?s=128&d=identicon&r=PG&f=1", "display_name": "Latot", "link": "https://stackoverflow.com/users/4652030/latot"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1538001904, "post_id": 52526885, "comment_id": 91993642, "body": "you mean do the same with map instead vector?, in that case i don&#39;t think will be faster, this algorithm is really slow...."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1538001986, "post_id": 52526885, "comment_id": 91993664, "body": "It should be O(n lgn) rather than O(n^2)"}, {"owner": {"reputation": 103, "user_id": 4652030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee009885792d76b53a414e053da32c3?s=128&d=identicon&r=PG&f=1", "display_name": "Latot", "link": "https://stackoverflow.com/users/4652030/latot"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1538002079, "post_id": 52526885, "comment_id": 91993689, "body": "Testing it, is still very slow..., compare maps or vectors....."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1538002179, "post_id": 52526885, "comment_id": 91993715, "body": "You&#39;re not doing it right, then. The correct algorithm will iterate over both maps, simultaneously, instead of iterating over the first one, and then checking the second map, each time. This is wrong. You need to iterate over both maps at the same time. If you still have questions, you should ask your instructor for help, the one who gave you this assignment. This is what instructors are paid to do, to help students with their homework assignments."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1538002224, "post_id": 52526885, "comment_id": 91993726, "body": "What you can do is used an unordered_map when the data is being initially inserted. If the key doesnt exists, add. If the key already exists, compare if the new values is diff from the current. This should still run in O(n lgn), with smaller constant since the map grows as its added. This will most likely still be slow since there is a lot of data, how much slower/faster is the key. What times are you getting on your benchmarks?"}], "answers": [{"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1538003686, "post_id": 52527103, "comment_id": 91994103, "body": "Why do you need two maps?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1538004123, "post_id": 52527103, "comment_id": 91994206, "body": "@PaulSanders I used maps because OP has data that shows that the keys are not consecutive.  For example there is no key 3.  With <code>vector&lt;int&gt;</code> you can&#39;t represent this. Also, OP suggests that data could be different from integer, which is not the problem in case of maps."}, {"owner": {"reputation": 103, "user_id": 4652030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee009885792d76b53a414e053da32c3?s=128&d=identicon&r=PG&f=1", "display_name": "Latot", "link": "https://stackoverflow.com/users/4652030/latot"}, "edited": false, "score": 0, "creation_date": 1538179558, "post_id": 52527103, "comment_id": 92066219, "body": "Thx for your answare, seems there is not a built-in function for this (thinking in tables of different length), and this would be better, i know how invert the maps, but use multimap is new for me, that will be my exercise, Thx helping :D"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1538004268, "last_edit_date": 1538004268, "creation_date": 1538002674, "answer_id": 52527103, "question_id": 52526885, "link": "https://stackoverflow.com/questions/52526885/compare-elements-between-them-and-get-the-keys-of-common-values/52527103#52527103", "title": "Compare elements between them and get the keys of common values", "body": "<p>In fact you compare all the values between them and want to know the keys of that value in each collection.  </p>\n\n<p>In this case, I'd suggest to simply invert the key and the value in each map.  This would lead to the following struvture: </p>\n\n<pre><code>      Vals\nRevKey1 RevVal1 RevKey2 RevVal2\n4       1         5     1\n6       2         9     2\n8       4         4     4\n10      6        10     6\n</code></pre>\n\n<p>You'd then just have to iterate over the first map, and look for the same key in the second map:</p>\n\n<pre><code>map&lt;int,int&gt; col1;\nmap&lt;int,int&gt; col2;\nmap&lt;int,pair&lt;int,int&gt;&gt; common ; \n...\nfor (auto&amp; x: col1) {\n    auto y= col2.find(x.first); \n    if (y!=col2.end()) \n        common[x.first]=make_pair(x.second,y-&gt;second);\n}\ncout&lt;&lt;\"Result:\"&lt;&lt;endl;\nfor (auto&amp; x:common ) \n    cout &lt;&lt; x.first &lt;&lt; \"&lt;-\" &lt;&lt; x.second.first &lt;&lt; \" in col1 and \" &lt;&lt;x.second.second &lt;&lt; \" in col2\"&lt;&lt;endl;\n</code></pre>\n\n<p><a href=\"https://ideone.com/cLgfoG\" rel=\"nofollow noreferrer\">Online demo</a></p>\n\n<p><em>Remark: I let you as an exercise the inversion of the mapping relation expressed in existing maps.  I also let you extend this algorithm to cope with multimaps, in case of several keys having the same value.</em>   </p>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1538004381, "last_edit_date": 1538004381, "creation_date": 1538002936, "answer_id": 52527140, "question_id": 52526885, "link": "https://stackoverflow.com/questions/52526885/compare-elements-between-them-and-get-the-keys-of-common-values/52527140#52527140", "title": "Compare elements between them and get the keys of common values", "body": "<p>The following (very simple) code seems to cut the mustard:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct p\n{\n    p (int p1, int p2) : p1 (p1), p2 (p2) { }\n    int p1;\n    int p2;\n};\n\nstd::vector&lt;int&gt; table1;\nstd::vector&lt;int&gt; table2;\nstd::vector&lt;p&gt; common;\n\n#define N   100000\n\nint main ()\n{\n    table1.reserve (N);\n    table2.reserve (N);\n\n    for (int i = 0; i &lt; N; ++i)\n        table1.emplace_back (rand ());\n\n    for (int i = 0; i &lt; N; ++i)\n        table2.emplace_back (rand ());\n\n    std::map &lt;int, int&gt; map1;\n    for (int i = 0; i &lt; N; ++i)\n        map1 [table1 [i]] = i;\n\n    common.reserve (N);\n\n    int n = table2.size();\n    for (int i = 0; i &lt; n; i++)\n    {\n        auto f = map1.find (table2 [i]);\n        if (f != map1.end ())\n            common.emplace_back (i, f-&gt;second);\n    }\n\n    for (auto x : common)\n       std::cout &lt;&lt; x.p1 &lt;&lt; \", \" &lt;&lt; x.p2 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>12727, 93810\n12766, 48493\n16044, 71990\n43202, 35849\n46218, 81007\n82512, 70112\n98740, 72244\n</code></pre>\n\n<p>Note the use of <code>reserve</code> and <code>emplace_back</code> for the vectors.</p>\n\n<p>Run it at <a href=\"https://wandbox.org/permlink/zG1PyWYjNcKEbuvJ\" rel=\"nofollow noreferrer\">Wandbox</a></p>\n\n<p>I tried increasing N to 1000000 and it still worked.  An unordered (hashed) map might be faster.</p>\n"}], "owner": {"reputation": 103, "user_id": 4652030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cee009885792d76b53a414e053da32c3?s=128&d=identicon&r=PG&f=1", "display_name": "Latot", "link": "https://stackoverflow.com/users/4652030/latot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538004800, "creation_date": 1538001105, "last_edit_date": 1538004800, "question_id": 52526885, "link": "https://stackoverflow.com/questions/52526885/compare-elements-between-them-and-get-the-keys-of-common-values", "title": "Compare elements between them and get the keys of common values", "body": "<p>I have pairs of data, key and value in two different collections.  I need compare the values of both collections, and create a collection containing the pairs of the keys for values that are equal.  </p>\n\n<p>For example, with the following dataset:</p>\n\n<pre><code>      Vals\nKey Col1 Col2\n1    4     5\n2    6     9\n4    8     4\n6    10    10\n</code></pre>\n\n<p>the common values would be 4 and 10.  So he idea is get a new collection with the pairs, in this case (key col1, key col2) {{1, 4}, {6, 6}}</p>\n\n<p>I need a fastest way to do this, every collection can have easly 100k of data, and iterating with a for-loop is too slow, I try with vector.</p>\n\n<p>Both collection do not necessarily have the same keys (like map), and the data could be something else than an int (I use binary data, and usually the keys are ints (unsinged long).</p>\n\n<p>Here is my example code (very very slow code):</p>\n\n<pre><code>struct p {\n    unsigned long int p1;\n    unsigned long int p2;\n};\n\nvector&lt;int&gt; table1 = tables1(n); /* bigger n -&gt; more samples */\nvector&lt;int&gt; table2 = tables2(n); /* n = 10000 generate 150k per table */\n\nvector&lt;p&gt; common;\n\nfor (unsigned long int i = 0;i &lt; table1.size(); i++) {\n    for (unsigned long int j = 0; j &lt; table2.size(); j++) {\n        if (table1[i] == table2[j]) {common.push_back ({i, j};}\n    }\n}\n</code></pre>\n\n<p>Is there a way maybe with map, set, or something to do this faster?\n(i'm starting with c++)</p>\n"}, {"tags": ["c++", "visual-studio-2010", "memory-leaks", "mfc", "clistctrl"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1538004249, "post_id": 52526831, "comment_id": 91994237, "body": "<i>here I get all the data from the current record in mylist</i> Could the problem lie there?  The MFC calls you are making are just wrappers round the various <code>LVM_xxx</code> messages (eg LVM_DELETEALLITEMS).  They don&#39;t actually do anything."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 4, "creation_date": 1538036053, "post_id": 52526831, "comment_id": 92004045, "body": "<code>DeleteAllItems</code> does a &#39;shallow&#39; delete. Notably, it won&#39;t delete whatever <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/commctrl/ns-commctrl-taglvitemw\" rel=\"nofollow noreferrer\">LVITEM</a>&#39;s <i>lParam</i> member points to. Same goes for <i>piColFmt</i>. The code posted doesn&#39;t appear to be leaking any resources. We need to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1538038285, "post_id": 52526831, "comment_id": 92005273, "body": "Which &quot;out of memory dialog&quot; are you refering to? There must be something in the code you didn&#39;t show here."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1538052785, "post_id": 52526831, "comment_id": 92014242, "body": "No, the out of memory dialog is one that MFC pops up.  I have seen similar dialogs like when I have tried creating a dialog with an IDD definition that exists in resource.h but for which a dialog definition doesn&#39;t exist in the .rc file.  They do this in order to avoid crashing the application, and yet to still inform the user that something has gone wrong."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1538052921, "post_id": 52526831, "comment_id": 92014333, "body": "IInspectable - thanks for the link.  I will take a look at that and let you know about my findings."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1538036088, "post_id": 52526951, "comment_id": 92004065, "body": "While true, it doesn&#39;t give an answer to the question, why the code <i>does</i> eventually run out of memory."}], "tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 1, "last_activity_date": 1618696936, "last_edit_date": 1618696936, "creation_date": 1538001612, "answer_id": 52526951, "question_id": 52526831, "link": "https://stackoverflow.com/questions/52526831/mfc-c-clistctrl-deleting-all-items-does-not-reclaim-memory/52526951#52526951", "title": "MFC C++ CListCtrl - deleting all items does not reclaim memory", "body": "<p>Heap memory is not usually returned to the OS when free() (or delete) is called.  It is retained in the heap. See also <a href=\"https://stackoverflow.com/questions/52417318/why-does-the-free-function-not-return-memory-to-the-operating-system/52417370\">this answer</a>.  So on the first populate/delete-all operation you will see allocated memory increase.  But on subsequent cycles, the memory use should be fairly stable.</p>\n<p>Microsoft's MFC libraries have been around for more than a decade, if there was a memory leak in <a href=\"https://msdn.microsoft.com/en-us/library/hfshke78.aspx#clistctrl__deleteallitems\" rel=\"nofollow noreferrer\">CListCtrl::DeleteAllItems()</a> it would have been found in the 90's.</p>\n<p>You can check the memory usage in-program <a href=\"https://docs.microsoft.com/en-gb/windows/desktop/psapi/collecting-memory-usage-information-for-a-process\" rel=\"nofollow noreferrer\">with a few API calls</a>.</p>\n<p>The memory leak is probably caused by this line:</p>\n<pre><code>ok = m_ListCtrl.SetItemData(row, (DWORD_PTR)iSecs);\n</code></pre>\n<p>In MFC Item Data is the responsibility of the user to clean up.  You will need to iterate through every item in your list freeing (or deleteing) the user-data before calling the API to delete the list item(s).  Of course you can free the allocated data some other way too.</p>\n<p>As your program continually adds and removes items from the list, it is leaking the ItemData(s) associated with each list entries.</p>\n"}], "owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1618696936, "creation_date": 1538000784, "question_id": 52526831, "link": "https://stackoverflow.com/questions/52526831/mfc-c-clistctrl-deleting-all-items-does-not-reclaim-memory", "title": "MFC C++ CListCtrl - deleting all items does not reclaim memory", "body": "<p>Not at all an expert in MFC, but I have been put on a project to revamp the GUI in one of our applications.  I am building a dialog with a CListCtrl and seeing memory issues, even though the list I am displaying will contain usually no more than about 200 rows.  There are 4 columns, and I'm attaching an associated int value with each row using SetItemData in order to do filtering.</p>\n\n<p>When I filter, I repopulate the list by first calling DeleteAllItems() and then looping to populate with only the data that passes my filter.  When I watch in the Performance tab in the system Task Manager dialog, I see memory taken up when the dialog opens.  Seems like more than I would imagine, but anyway.  When I filter, if nothing is shown as a result of the chosen filter, the memory is never reclaimed by the system, according to Task Manager Performance tab.  When I change the filter to show some rows, I see more memory taken.  I never see memory given back to the system.  If I continue to filter, I will eventually see the memory usage go almost to full usage, and I will get an Out of memory dialog that MFC puts up.</p>\n\n<p>I have seen this out of memory dialog also when I am just scrolling up and down a lot in a full (unfiltered) view of the data.  For each scrolling, the list control is somewhat slow to repaint, and the memory usage in the Performance tab goes up, even though I'm not adding any data.</p>\n\n<p>Does anyone have a feeling for what might be going on here?  I'm stumped at the moment.  The following is basically what I'm doing in my code.  I am not otherwise managing the view:</p>\n\n<pre><code>m_ListCtrl.DeleteAllItems();\nfor (int i=0; i&lt;mylist.size(); i++)\n{\n    // here I get all the data from the current record in mylist, one of them being an int value iSecs.\n    ...\n\n    // insert data item\n    int row = m_ListCtrl.InsertItem(i, sTimeStamp.c_str());\n    BOOL ok = m_ListCtrl.SetItem(i, 1, sErrorCode.c_str());\n    ok = m_ListCtrl.SetItem(i, 2, sErrorLevel.c_str());\n    ok = m_ListCtrl.SetItem(i, 3, sDescription.c_str());\n    // set the timestamp seconds as item data for later filtering for display\n    ok = m_ListCtrl.SetItemData(row, (DWORD_PTR)iSecs);\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 6, "creation_date": 1538000522, "post_id": 52526760, "comment_id": 91993321, "body": "change <code>Node *head;</code> to <code>Node *head = NULL;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1538000596, "post_id": 52526760, "comment_id": 91993337, "body": "&quot;I decided to practice my linked list knowledge and decided to create one in C++! &quot; - oh, why??? Why not actually use the list classes in  the C++ Standard Library to produce a useful program - you will learn a lot more by doing that than producing yet another awful linked list implementation."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1538000727, "post_id": 52526760, "comment_id": 91993370, "body": "I strongly recommend stepping through your code with a debugger."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1538000889, "post_id": 52526760, "comment_id": 91993416, "body": "<i>I decided to practice my linked list knowledge and decided to create one in C++</i> -- The problem is that you need to <i>know</i> C++ thoroughly to implement a linked list properly.  You need to know how to properly manage memory, not just the basics of a linked list that you will find in a text book.  If it were Java or C#, maybe, but C++ has that extra hurdle of proper memory management, rule of 3 or 5, etc."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538005869, "post_id": 52526760, "comment_id": 91994547, "body": "@NeilButterworth - I think its perfectly fine to do this as an excercize in writing a utility class. Eventually OP will end up with an understanding of why things like generics, smart pointers,.... exist (I hope). For real linked lists of course OP should use std::list. Maybe a little ambitious for first c++ program"}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 10417028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dD0kjb8H6n8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUXWH5lGqtRA5MHFI9NToNRJXWgYA/mo/photo.jpg?sz=128", "display_name": "Soft Vanilla", "link": "https://stackoverflow.com/users/10417028/soft-vanilla"}, "is_accepted": false, "score": 4, "last_activity_date": 1538005625, "last_edit_date": 1538005625, "creation_date": 1538005392, "answer_id": 52527443, "question_id": 52526760, "link": "https://stackoverflow.com/questions/52526760/a-normal-linked-list/52527443#52527443", "title": "A normal Linked List", "body": "<p>make sure to initialize <code>Node *head</code> to <code>NULL</code>.</p>\n\n<p>After insert <code>temp</code>(which is value 10), <code>temp-&gt;next</code> value becomes undefined value, because <code>Node *head</code> is undefined value.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1538014856, "last_edit_date": 1538014856, "creation_date": 1538012712, "answer_id": 52528261, "question_id": 52526760, "link": "https://stackoverflow.com/questions/52526760/a-normal-linked-list/52528261#52528261", "title": "A normal Linked List", "body": "<p>Your <code>LinkedList</code> class is not initializing its <code>head</code> member.  You need to add a constructor to initialize <code>head</code> to NULL.</p>\n\n<p>Also, the class is leaking memory, as there is no destructor to free the nodes when a <code>LinkedList</code> instance is destroyed, and <code>deleteNode()</code> doesn't free the node being removed, either.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Node\n{\n    int val;\n    Node *next;\n\n    Node(int val) : val(val), next(NULL) { }\n};\n\nclass LinkedList\n{\nprivate:\n    Node *head;\n\n    // if you are NOT using C++11 or later, add these\n    // until you are reading to tackle copy semantics!\n    /*\n    LinkedList(const LinkedList &amp;);\n    LinkedList&amp; operator=(const LinkedList &amp;);\n    */\n\npublic:\n    LinkedList() : head(NULL) {} // &lt;-- add this!\n\n    ~LinkedList() // &lt;-- add this!\n    {\n        Node *current = head;\n        while (current)\n        {\n             Node *next = current-&gt;next;\n             delete current;\n             current = next;\n        }\n    }\n\n    void insertAtHead(Node *temp)\n    {\n        if (!head) \n        {\n            head = temp;\n        }\n        else\n        {\n            temp-&gt;next = head;\n            head = temp;\n        }\n    }\n\n    void printList()\n    {\n        Node *current = head;\n        while (current)\n        {\n            cout &lt;&lt; current-&gt;val &lt;&lt; endl;\n            current = current-&gt;next;\n        }\n    }\n\n    void insertAtBack(Node *temp)\n    {\n        if (!head)\n        {\n            head = temp;\n            return;\n        }\n\n        Node *current = head;\n        while (current-&gt;next) {\n            current = current-&gt;next;\n        }\n        current-&gt;next = temp;\n    }\n\n    void deleteNode(Node *temp)\n    {\n        if (!head)\n        {\n            cout &lt;&lt; \"Empty List\";\n            return;\n        }\n\n        if (head == temp)\n        {\n            head = temp-&gt;next;\n            delete temp;\n            return;\n        }\n\n        Node *current = head;\n        while (current-&gt;next)\n        {\n            if (current-&gt;next == temp)\n            {\n                current-&gt;next = temp-&gt;next;\n                delete temp;\n                return;\n            }\n            current = current-&gt;next;\n        }\n    }\n\n    // if you ARE using C++11 or later, add these until\n    // you are reading to tackle copy and move semantics!\n    /*\n    LinkedList(const LinkedList &amp;) = delete;\n    LinkedList(LinkedList &amp;&amp;) = delete;\n    LinkedList&amp; operator=(const LinkedList &amp;) = delete;\n    LinkedList&amp; operator=(LinkedList &amp;&amp;) = delete;\n    */\n};\n\nint main()\n{\n    Node *temp = new Node(10);\n    Node *temp2 = new Node(4);\n    Node *temp3 = new Node(17);\n    Node *temp4 = new Node(22);\n    Node *temp5 = new Node(1);\n\n    LinkedList x;\n    x.insertAtHead(temp);\n    x.insertAtHead(temp2);\n    x.insertAtBack(temp3);\n    // x.insertAtBack(temp4);\n    // x.insertAtBack(temp5);\n    // x.deleteNode(temp);\n\n    x.printList();\n\n    return 0;\n}\n</code></pre>\n\n<p>Which can then be simplified further:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Node\n{\n    int val;\n    Node *next;\n\n    Node(int val, Node *next = NULL) : val(val), next(next) { }\n};\n\nclass LinkedList\n{\nprivate:\n    Node *head;\n\n    // if you are NOT using C++11 or later, add these\n    // until you are reading to tackle copy semantics!\n    /*\n    LinkedList(const LinkedList &amp;);\n    LinkedList&amp; operator=(const LinkedList &amp;);\n    */\n\npublic:\n    LinkedList() : head(NULL) {} // &lt;-- add this!\n\n    ~LinkedList() // &lt;-- add this!\n    {\n        Node *current = head;\n        while (current)\n        {\n             Node *next = current-&gt;next;\n             delete current;\n             current = next;\n        }\n    }\n\n    Node* insertAtHead(int value)\n    {\n        Node *temp = new Node(value, head);\n        if (!head) \n            head = temp;\n        return temp;\n    }\n\n    void printList()\n    {\n        Node *current = head;\n        while (current)\n        {\n            cout &lt;&lt; current-&gt;val &lt;&lt; endl;\n            current = current-&gt;next;\n        }\n    }\n\n    Node* insertAtBack(int value)\n    {\n        Node **current = &amp;head;\n        while (*current)\n            current = &amp;((*current)-&gt;next);\n        *current = new Node(value);\n        return *current;\n    }\n\n    /*\n    void deleteNode(Node *temp)\n    {\n        Node *current = head, *previous = NULL;\n        while (current)\n        {\n            if (current == temp)\n            {\n                if (previous)\n                    previous-&gt;next = temp-&gt;next;\n                if (head == temp)\n                    head = temp-&gt;next;\n                delete temp;\n                return true;\n            }\n            previous = current;\n            current = current-&gt;next;\n        }\n        cout &lt;&lt; \"Not found\" &lt;&lt; endl;\n        return false;\n    }\n    */\n\n    bool deleteValue(int value)\n    {\n        Node *current = head, *previous = NULL;\n        while (current)\n        {\n            if (current-&gt;val == value)\n            {\n                if (previous)\n                    previous-&gt;next = temp-&gt;next;\n                if (head == temp)\n                    head = temp-&gt;next;\n                delete temp;\n                return true;\n            }\n            previous = current;\n            current = current-&gt;next;\n        }\n        cout &lt;&lt; \"Not found\" &lt;&lt; endl;\n        return false;\n    }\n\n    // if you ARE using C++11 or later, add these until\n    // you are reading to tackle copy and move semantics!\n    /*\n    LinkedList(const LinkedList &amp;) = delete;\n    LinkedList(LinkedList &amp;&amp;) = delete;\n    LinkedList&amp; operator=(const LinkedList &amp;) = delete;\n    LinkedList&amp; operator=(LinkedList &amp;&amp;) = delete;\n    */\n};\n\nint main()\n{\n    LinkedList x;\n    x.insertAtHead(10);\n    x.insertAtHead(4);\n    x.insertAtBack(17);\n    // x.insertAtBack(22);\n    // x.insertAtBack(1);\n    // x.deleteValue(10);\n\n    x.printList();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6702160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a001c3e665a9e43936a9f43b7c38c8fc?s=128&d=identicon&r=PG&f=1", "display_name": "dpopo", "link": "https://stackoverflow.com/users/6702160/dpopo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538014856, "creation_date": 1538000288, "last_edit_date": 1538012461, "question_id": 52526760, "link": "https://stackoverflow.com/questions/52526760/a-normal-linked-list", "title": "A normal Linked List", "body": "<p>I decided to practice my linked-list knowledge, and decided to create one in C++!</p>\n\n<p>I ran this code on two different online compilers - one worked, and the other is giving me a segfault.  I cannot figure out what the problem is within my code, and am wondering if you can help me. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Node {\n    int val;\n    Node *next;\n    Node(int val){\n        this-&gt;val = val;\n        this-&gt;next = NULL;\n    }\n};\n\nclass LinkedList {\npublic:\n    Node *head;\n\n    void insertAtHead(Node *temp)\n    {\n        if (head == NULL) \n        {\n            head = temp;\n        }\n        else\n        {\n            temp-&gt;next = head;\n            head = temp;\n        }\n    }\n\n    void printList()\n    {\n        Node *temp = head;\n        while (temp != NULL)\n        {\n            cout &lt;&lt; temp-&gt;val &lt;&lt; endl;\n            temp = temp-&gt;next;\n        }\n    }\n\n    void insertAtBack(Node *temp)\n    {\n        if (head == NULL)\n        {\n            head = temp;\n            return;\n        }\n\n        Node *current = head;\n        while (current-&gt;next != NULL){\n            current = current-&gt;next;\n        }\n        current-&gt;next = temp;\n    }\n\n    void deleteNode(Node *temp)\n    {\n        if (head == NULL)\n        {\n            cout &lt;&lt; \"Empty List\";\n            return;\n        }\n        if (head-&gt;val == temp-&gt;val)\n        {\n            head = head-&gt;next;\n            return;\n        }\n\n        Node *current = head;\n        while (current-&gt;next != NULL)\n        {\n            if (current-&gt;next-&gt;val == temp-&gt;val)\n            {\n                current-&gt;next = current-&gt;next-&gt;next;\n                return;\n            }\n            current = current-&gt;next;\n        }\n    }\n};\n\nint main()\n{\n    Node *temp = new Node(10);\n    Node *temp2 = new Node(4);\n    Node *temp3 = new Node(17);\n    Node *temp4 = new Node(22);\n    Node *temp5 = new Node(1);\n    LinkedList x;\n    x.insertAtHead(temp);\n    x.insertAtHead(temp2);\n    x.insertAtBack(temp3);\n    // x.insertAtBack(temp4);\n    // x.insertAtBack(temp5);\n    // x.deleteNode(temp);\n    x.printList();\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem I am encountering is when I use the <code>insertAtBack()</code> method.  It gives me a segfault, but I do not see what's wrong with the logic.  It is pretty straight forward. The <code>insertAtFront()</code> method works, but once I call <code>insertAtBack()</code> my code fails.</p>\n"}, {"tags": ["c++", "dictionary", "vector", "std-pair"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537999916, "post_id": 52526656, "comment_id": 91993147, "body": "Show the code that is  trying to iterate through the map"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538015175, "post_id": 52526813, "comment_id": 91996472, "body": "If your compiler has <code>auto</code> available, then it also has <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">ranged-based <code>for</code> loops</a> available, so you should use that instead of using iterators directly: <code>for(auto &amp;v : mapName) { for(auto &amp;p : v.second) { &#47;* use p as needed ...*&#47; } }</code>"}], "tags": [], "owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "is_accepted": false, "score": 0, "last_activity_date": 1538000681, "creation_date": 1538000681, "answer_id": 52526813, "question_id": 52526656, "link": "https://stackoverflow.com/questions/52526656/accessing-values-of-a-map-that-containing-a-vector-pair/52526813#52526813", "title": "Accessing values of a map that containing a vector pair", "body": "<p>I do not exactly know what you are trying to achieve, but I assume you have a construct that looks something like this:</p>\n\n<pre><code>for(auto i = mapName.begin(); i != mapName.end(); i++)\n{\n\n}\n</code></pre>\n\n<p>and in that loop you simply want to access the vector? That would be done using <code>i-&gt;second</code>. If you do not like that syntax you could always use a reference (something like <code>auto &amp;vec = i-&gt;second</code> and then only use <code>vec</code> afterwards).</p>\n\n<p>If you want to iterate over the pairs in the vector itself, you would need to use something like this:</p>\n\n<pre><code>for(auto i = mapName.begin(); i != mapName.end(); i++)\n{\n    for(auto j = i-&gt;second.begin(); j != i-&gt;second.end(); j++)\n    {\n\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1538000930, "creation_date": 1538000930, "answer_id": 52526855, "question_id": 52526656, "link": "https://stackoverflow.com/questions/52526656/accessing-values-of-a-map-that-containing-a-vector-pair/52526855#52526855", "title": "Accessing values of a map that containing a vector pair", "body": "<p>Here's a neat and tidy way to iterate through the map:</p>\n\n<pre><code>for (auto x : mapName)\n{\n    vectorPair&amp; vp = x.second;        // or auto&amp;\n    ...\n}\n</code></pre>\n\n<p>Live demo at <a href=\"https://wandbox.org/permlink/u6bnYkOOVjWsBckq\" rel=\"nofollow noreferrer\">Wandbox</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10416464"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1551811140, "creation_date": 1537999652, "last_edit_date": 1551811140, "question_id": 52526656, "link": "https://stackoverflow.com/questions/52526656/accessing-values-of-a-map-that-containing-a-vector-pair", "title": "Accessing values of a map that containing a vector pair", "body": "<p>I declared a map that contains a vector pair like</p>\n\n<pre><code>typedef vector&lt;pair&lt;string,int&gt;&gt; vectorPair;\nmap&lt;string,vectorPair&gt; mapName;\n</code></pre>\n\n<p>I've been trying to iterate through the map with an iterator and I'm confused as to how I access the vector pair from Iterator->first or Iterator->second. Is there a better way to do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537999335, "post_id": 52526538, "comment_id": 91992972, "body": "This won&#39;t compile, so what it does is moot."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537999632, "post_id": 52526538, "comment_id": 91993050, "body": "The only thing that doesn&#39;t compile is there are 2 <code>main()</code> functions.  Remove the second one, then <a href=\"https://ideone.com/2wVOEe\" rel=\"nofollow noreferrer\">the code compiles</a>, it just doesn&#39;t function correctly due to a logic bug in the loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537999722, "post_id": 52526538, "comment_id": 91993077, "body": "@Remy how about <code>Base_case_A</code> in <code>main</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538000233, "post_id": 52526538, "comment_id": 91993242, "body": "@NeilButterworth that is the erroneous <code>main()</code> that needs to be removed. The other <code>main()</code> is the correct one to keep.  I&#39;ve edited the question to remove it now"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538000303, "post_id": 52526538, "comment_id": 91993258, "body": "@Remy Which one is &quot;the erroneous main&quot;?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538000337, "post_id": 52526538, "comment_id": 91993267, "body": "@NeilButterworth the one that doesn&#39;t belong in this code, the one I&#39;ve already removed.  The other <code>main()</code> initializes the <code>std::map</code> and triggers the loop, so it is obviously the correct one that belongs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538000449, "post_id": 52526538, "comment_id": 91993299, "body": "@Remy I love it when people assume things here rather than asking the OP what they mean."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1538000621, "post_id": 52526538, "comment_id": 91993345, "body": "@NeilButterworth It really wasn&#39;t hard to figure out which one the OP meant to have"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1538000538, "last_edit_date": 1538000538, "creation_date": 1537999396, "answer_id": 52526612, "question_id": 52526538, "link": "https://stackoverflow.com/questions/52526538/c-code-does-not-accumulate-sum-in-variable-during-for-loop-and-provides-only-f/52526612#52526612", "title": "C++ Code does not accumulate sum in variable during for loop and provides only final iteration value", "body": "<p><code>Score_Compute()</code> takes a <code>std::string</code> as input, but when the loop calls <code>Score_Compute(x)</code>, <code>x</code> is a <code>char[2]</code> containing 2 <code>char</code> values neither of which are a null terminator.</p>\n\n<p>When a <code>char[]</code> is passed as-is to a <code>std::string</code>, the <code>char[]</code> decays to <code>char*</code>, which <code>std::string</code> then assumes to be null-terminated, which yours is not.</p>\n\n<p>So, the <code>std::string</code> that <code>Score_Compute()</code> receives will be wrong, usually containing <em>random data</em> after the characters you did specify (assuming the code doesn't just crash altogether while searching for a null terminator that doesn't exist), and so it will not match any entries in your <code>std::map</code>, causing <code>Score_Compute()</code> to return 0.</p>\n\n<p>To fix the logic, you need to change the declaration of <code>x</code> to <code>char x[3];</code> and then add <code>x[2] = '\\0';</code> before converting to <code>std::string</code>:</p>\n\n<pre><code>char x[3]; // &lt;-- fix this!\nx[0] = StringA[i];\nx[1] = '-';\nx[2] = '\\0'; // &lt;-- add this!\n</code></pre>\n\n<p>Otherwise, you have to specify the correct length when converting to <code>std::string</code>:</p>\n\n<pre><code>Score_Compute(string(x, 2));\n</code></pre>\n\n<p>Alternatively, simply change <code>x</code> to be a <code>std::string</code> to begin with:</p>\n\n<pre><code>string x(2, '\\0');\nx[0] = StringA[i];\nx[1] = '-';\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>string x;\ns.resize(2);\nx[0] = StringA[i];\nx[1] = '-';\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>string x = \" -\";\nx[0] = StringA[i];\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5228094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1310cecdc225fc918f5de1c0b82e574c?s=128&d=identicon&r=PG&f=1", "display_name": "Rejoy Mathews", "link": "https://stackoverflow.com/users/5228094/rejoy-mathews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 52526612, "answer_count": 1, "score": -1, "last_activity_date": 1538000538, "creation_date": 1537998958, "last_edit_date": 1538000274, "question_id": 52526538, "link": "https://stackoverflow.com/questions/52526538/c-code-does-not-accumulate-sum-in-variable-during-for-loop-and-provides-only-f", "title": "C++ Code does not accumulate sum in variable during for loop and provides only final iteration value", "body": "<p>My problem is that the variable 'scoreA' should be the accumulation of all the values generated during each iteration of the for loop. However, I am not getting the accumulated value and get only the value at the final iteration. Could someone Kindly help me out as I am new to C++. I have defined scoreA outside the for loop so my understanding is that the value of scoreA should be the accumulated value for all the iterations. But my guess is that it is being reassigned to 0 because of which it is unable to accumulate the value.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;map&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\n  map&lt;string,int&gt; Score_Scheme;\n  string StringA = \"aaaa\";\n\nint Score_Compute(string StringA);\nint Base_case_A(int lenA);\n\nint main ()\n{\n  Score_Scheme[\"ac\"] = -1;\n  Score_Scheme[\"ag\"] = -2;\n  Score_Scheme[\"at\"] = -1;\n  Score_Scheme[\"a-\"] = -3;\n  Score_Scheme[\"cg\"] = -3;\n  Score_Scheme[\"ct\"] = -2;\n  Score_Scheme[\"c-\"] = -4;\n  Score_Scheme[\"gt\"] = -2;\n  Score_Scheme[\"g-\"] = -2;\n  Score_Scheme[\"t-\"] = -1;\n  Score_Scheme[\"--\"] = 0;\n  Score_Scheme[\"aa\"] = 5;\n  Score_Scheme[\"cc\"] = 5;\n  Score_Scheme[\"gg\"] = 5;\n  Score_Scheme[\"tt\"] = 5;\n  Score_Scheme[\"ca\"] = -1;\n  Score_Scheme[\"ga\"] = -2;\n  Score_Scheme[\"ta\"] = -1;\n  Score_Scheme[\"-a\"] = -3;\n  Score_Scheme[\"gc\"] = -3;\n  Score_Scheme[\"tc\"] = -2;\n  Score_Scheme[\"-c\"] = -4;\n  Score_Scheme[\"tg\"] = -2;\n  Score_Scheme[\"-g\"] = -2;\n  Score_Scheme[\"-t\"] = -1;\n\n\n  int len_StringA = StringA.size ();\n  cout&lt;&lt;\"length of A is:\"&lt;&lt;len_StringA&lt;&lt;\"\\n\";\n\n  Base_case_A(len_StringA);\n\n  return 0;\n}\n\nint Base_case_A(int lenA)\n{\n    int scoreA  = 0;\n        for(int i = 0;i&lt;lenA;i++)\n        {   \n            char x[2];\n            x[0] = StringA[i];\n            x[1] = '-';\n            scoreA=scoreA+Score_Compute(x);\n            cout&lt;&lt;i&lt;&lt;\":\"&lt;&lt;scoreA&lt;&lt;\"\\n\";\n        }\n    cout&lt;&lt;scoreA&lt;&lt;\"\\n\";\n    return 0;\n}\n\nint Score_Compute(string stringA)\n{\n    return Score_Scheme[stringA];\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1538015456, "post_id": 52526511, "comment_id": 91996521, "body": "Can you please provide a complete example? I tried a simple example where I call <code>typeid(int).name()</code> and it&#39;s resolved fine for me."}, {"owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "reply_to_user": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1538033252, "post_id": 52526511, "comment_id": 92002550, "body": "The entire line that it is used on is this one:  std::cout &lt;&lt; typeid(decltype(std::int32_t() + std::declval&lt;T&gt;())).name() &lt;&lt; &quot;\\n&quot;;"}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 1, "creation_date": 1538067740, "post_id": 52526511, "comment_id": 92023650, "body": "A complete example means the entire file (and its dependencies (not counting standard library headers), although hopefully you&#39;ve reduced the example so that it doesn&#39;t have dependencies besides standard library headers). In this case, the definition of <code>T</code> is likely to be highly relevant to your issue."}], "owner": {"reputation": 1200, "user_id": 9298910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9819944a4b6fdd239fcefe369a25a129?s=128&d=identicon&r=PG&f=1", "display_name": "Lehks", "link": "https://stackoverflow.com/users/9298910/lehks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537998825, "creation_date": 1537998825, "question_id": 52526511, "link": "https://stackoverflow.com/questions/52526511/eclipse-cdt-typeid-name", "title": "Eclipse CDT typeid().name()", "body": "<p>Whenever I use </p>\n\n<pre><code>typeid(&lt;some type&gt;).name()\n</code></pre>\n\n<p>in Eclipse CDT, Eclipe's Version of IntelliSense would point out that it does not know the function <code>name()</code>. I do include <code>&lt;typeinfo&gt;</code>.</p>\n\n<p>Although not a major issue, it is annoying that Eclipse always shows an error in each file that I use <code>name()</code> even if the program does compile. Is there any way to tell Eclipse about <code>name()</code>?</p>\n"}, {"tags": ["c++", "assembly", "x86-64", "masm"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537999663, "post_id": 52526488, "comment_id": 91993060, "body": "Which line is the error on?  On the string?  Use <code>db</code>, you don&#39;t want the <code>10, 0</code> elements padded to qwords even if it did accept this the way NASM does."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537999840, "post_id": 52526488, "comment_id": 91993113, "body": "Also, you need to <code>sub rsp, 32</code>to reserve shadow space <i>after</i> pushing 3 registers, if you want to restore them after.  Otherwise those 24 bytes are the bottom of the shadow space the called function (<code>printf</code>) sees.  But that&#39;s pointless because you&#39;re not restoring them after the call.  So you violate the calling convention by clobbering <code>rbx</code>; use a different reg. Also, you&#39;ll need <code>call _printf</code> because that&#39;s how Windows decorates C names."}, {"owner": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537999857, "post_id": 52526488, "comment_id": 91993121, "body": "@PeterCordes yes in the string declaration... with that i have the following  error A2006: undefined symbol : string"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "edited": false, "score": 0, "creation_date": 1538000199, "post_id": 52526723, "comment_id": 91993232, "body": "Thanks, now it works but e and sum are not working fine. I don&#39;t really understand the last paragraph, though :S. Don&#39;t I still need to allocate shadow space for printf to use it??"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "edited": false, "score": 0, "creation_date": 1538000434, "post_id": 52526723, "comment_id": 91993295, "body": "@MartaLobo: Yes, any function you call is allowed to stomp all over 32 bytes above the return address.  You need to make sure those bytes aren&#39;t holding anything valuable.  Now that it assembles, use a debugger to find out what your code is doing when you single step.  But I notice you start with <code>add rax, rcx</code> instead of <code>mov</code>, and RAX initially holds whatever garbage your caller left there."}, {"owner": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "edited": false, "score": 0, "creation_date": 1538004880, "post_id": 52526723, "comment_id": 91994366, "body": "Yes, I noticed that, and I added a couple xor to reset the registers. Now the only problem I have left is how to get &#39;e&#39; from the stack and add it propperly..."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "edited": false, "score": 0, "creation_date": 1538005119, "post_id": 52526723, "comment_id": 91994406, "body": "@MartaLobo: have you tried just looking at optimized compiler output for the C function?  Put your function on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> and compile it with x86-64 MSVC <code>-Ox</code>.  Don&#39;t forget about the shadow space your own caller leaves above the return address before the stack args."}, {"owner": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "edited": false, "score": 0, "creation_date": 1538042214, "post_id": 52526723, "comment_id": 92007709, "body": "Thank you very much, that website is very very useful!"}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1585192304, "last_edit_date": 1585192304, "creation_date": 1538000047, "answer_id": 52526723, "question_id": 52526488, "link": "https://stackoverflow.com/questions/52526488/printf-on-masm-x64-with-multiple-parameters/52526723#52526723", "title": "Printf on masm x64 with multiple parameters", "body": "<p>If that error is on the line with the string, use <code>db</code> instead of <code>dq</code>: you don't want the <code>10, 0</code> elements padded to qwords even if it did accept the quoted part as a string the way NASM does.</p>\n\n<p>I think MASM allows quoted constants for <code>db</code>, so that should get it to assemble.</p>\n\n<hr>\n\n<p>And then we have multiple other bugs at runtime:</p>\n\n<p>Also, you need to <code>sub rsp, 32</code>to reserve shadow space <em>after</em> pushing 3 registers, if you want to restore them after.  Otherwise those 24 bytes are the bottom of the shadow space the called function (<code>printf</code>) sees.</p>\n\n<p>But that's pointless because you're not restoring them after the call.  So you violate the calling convention by clobbering <code>rbx</code>; It doesn't look like you're doing anything with them after the call, so just use a call-clobbered reg, or better calculate the value in the right arg-passing register in the first place.</p>\n"}], "owner": {"reputation": 175, "user_id": 7940226, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9rVIS.jpg?s=128&g=1", "display_name": "Marta Lobo", "link": "https://stackoverflow.com/users/7940226/marta-lobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 52526723, "answer_count": 1, "score": 0, "last_activity_date": 1585192304, "creation_date": 1537998700, "last_edit_date": 1585164582, "question_id": 52526488, "link": "https://stackoverflow.com/questions/52526488/printf-on-masm-x64-with-multiple-parameters", "title": "Printf on masm x64 with multiple parameters", "body": "<p>I need to create a function in asm (on Windows) that replicates the following behaviour: </p>\n\n<pre><code>_int64 q(_int64 a, _int64 b, _int64 c, _int64 d, _int64 e) {\n     _int64 sum = a + b + c + d + e;\n      printf(\"a = %I64d b = %I64d c = %I64d d = %I64d e = %I64d sum = %I64d\\n\", a, b, c, d, e, sum);\n      return sum;\n}\n</code></pre>\n\n<p>I know I need to allocate shadow space for printf and also that I need to store some parameters in the stack, because only the first 4 parameters are in registers (rcx, rdx, r8 and r9)</p>\n\n<p>My problem comes with the string format and the stack management.\nMy code so far looks like this:</p>\n\n<pre><code>.data   \nstring1 dq 'a = %I64d b = %I64d c = %I64d d = %I64d e = %I64d sum = %I64d', 10, 0       ; The printf format, \"\\n\",'0'\n\n.code\n    public      q                               ;a in rcx, b in rdx, c in r8, d in r9, e in stack\n    q:          push rbp\n                mov rbp, rsp                    \n                sub rsp, 32                     ;allocating shadow space for printf\n                                                ;for calling printf, we need to have [string] in rcx, \n                                                ;a in rdx, b in r8, c in r9, d in stack1, e in stack2, and sum in stack3\n                add rax, rcx                    ;first make the sum\n                add rax, rdx                    \n                add rax, r8\n                add rax, r9\n                mov rbx, [rbp + 8]              ;getting e from the stack\n                add rax, rbx                    ;final add, in rax now is sum\n                push rax                        ;changing parameters in registers (last 3 in stack)\n                push rbx\n                push r9\n                mov r9, r8                      ;c in r9\n                mov r8, rdx                     ;b in r8\n                mov rdx, rcx                    ;a in rdx\n                lea rcx, [string]               ;string in rcx\n                call printf\n                mov rsp, rbp                    ;back to previous pointer\n                pop rbp                         ;release resources\n                ret 0\n    end\n</code></pre>\n\n<p>At this moment it does not compile, with an  </p>\n\n<blockquote>\n  <p>error A2084: constant value too large</p>\n</blockquote>\n\n<p>I don't know if I need to change the format or split it in 2, in that case I need to storage some other parameter in the stack, and then I am not very sure how to proceed...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537998788, "post_id": 52526433, "comment_id": 91992808, "body": "As the writer of the accepted  answer for the dupe, which perhaps doesn&#39;t make things completely clear, it&#39;s text mode."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538002194, "post_id": 52526433, "comment_id": 91993717, "body": "@NeilButterworth maybe you could edit that answer to make it completely clear :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538002611, "post_id": 52526433, "comment_id": 91993831, "body": "@M.M Reviewing it, I can&#39;t think how to make it clearer, only longer."}], "owner": {"reputation": 406, "user_id": 4907188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5dc1020895c2f6aecf9480a995ec281e?s=128&d=identicon&r=PG&f=1", "display_name": "Terry Qiao", "link": "https://stackoverflow.com/users/4907188/terry-qiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "closed_date": 1537998539, "answer_count": 0, "score": 0, "last_activity_date": 1537998314, "creation_date": 1537998314, "question_id": 52526433, "link": "https://stackoverflow.com/questions/52526433/what-is-the-default-mode-of-ofstream-in-c-binary-or-text", "closed_reason": "Duplicate", "title": "what is the default mode of &#39;ofstream&#39; in C++, binary or text?", "body": "<pre><code>std::ofstream of(filename.c_str())\nof &lt;&lt; \"contents\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Is the default mode binary of text?</p>\n"}, {"tags": ["c++", "templates", "linker", "template-specialization"], "answers": [{"tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 1, "last_activity_date": 1538000421, "creation_date": 1538000421, "answer_id": 52526782, "question_id": 52526405, "link": "https://stackoverflow.com/questions/52526405/do-specialized-templates-require-a-dedicated-declaration/52526782#52526782", "title": "Do specialized templates require a dedicated declaration?", "body": "<p>The part that you have to look at from the post you've linked is:</p>\n\n<blockquote>\n  <p>If a template, a member template or a member of a class template is explicitly specialized then <strong>that specialization shall be declared before the first use of that specialization that would cause an implicit instantiation to take place, in every translation unit in which such a use occurs</strong> [...]</p>\n</blockquote>\n\n<p>You can create such declaration through explicit instantiation declaration which tells the compiler that the explicit specialization is located somewhere else.</p>\n\n<p>in the header file you can declare the explicit instantiation as</p>\n\n<pre><code>extern template void myFunction(int)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9153716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6089bccdda067973a24db0a47656be28?s=128&d=identicon&r=PG&f=1", "display_name": "giantsqueed", "link": "https://stackoverflow.com/users/9153716/giantsqueed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538000421, "creation_date": 1537998177, "question_id": 52526405, "link": "https://stackoverflow.com/questions/52526405/do-specialized-templates-require-a-dedicated-declaration", "title": "Do specialized templates require a dedicated declaration?", "body": "<p>I want a templated function that is only defined for certain types, so I write:</p>\n\n<pre><code>/* --- header file with just a declaration --- */\ntemplate&lt;class T&gt;\nvoid myFunction(T arg);\n\n/* --- cpp file with specialized definition --- */\ntemplate&lt;&gt;\nvoid myFunction&lt;int&gt;(int arg){\n    // mybody\n}\n</code></pre>\n\n<p>But I am a bit confused, reading through for example <a href=\"https://stackoverflow.com/a/24683940/9153716\">this answer</a>.\nIs the declaration in the header file good enough for the linker to always link to the same specialization (static linkage)? Or do I need to add another:</p>\n\n<pre><code>template&lt;&gt;\nvoid myFunction&lt;int&gt;(int arg);\n</code></pre>\n\n<p>in the header to?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537998326, "post_id": 52526393, "comment_id": 91992667, "body": "Why not just <code>template&lt;typename C&gt;void test(C v1, C v2) {}</code>?"}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537998403, "post_id": 52526393, "comment_id": 91992689, "body": "Because I really want test(&lt;C1&lt;T&gt; v1, C2&lt;T&gt; v2), 2 different containers containing the same values."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537998505, "post_id": 52526393, "comment_id": 91992713, "body": "They would be.  You wouyld be able to call <code>test(vector&lt;int&gt;, set&lt;int&gt;)</code>.  It would only compile if the same container type is used.  I think I get where you are going though and will write up an answer that will show you how you can constrain the template."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537998597, "post_id": 52526393, "comment_id": 91992742, "body": "@NathanOliver I think you misread.  I want to allow it to be called with different containers."}, {"owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "edited": false, "score": 0, "creation_date": 1537998653, "post_id": 52526393, "comment_id": 91992760, "body": "Passing an iterator would suffice for the function&#39;s purpose? Suppose you&#39;re using std::vector and std::list, they implement ForwardIterator and you can use the post-increment operator on it."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "edited": false, "score": 0, "creation_date": 1537998867, "post_id": 52526393, "comment_id": 91992828, "body": "Both containers implement similar enough interfaces but no inheritance and there are no iterators."}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1537999137, "post_id": 52526393, "comment_id": 91992915, "body": "Not a duplicate, but similar question which provides an answer, at least for the <code>std::vector</code> container: <a href=\"https://stackoverflow.com/questions/16864476/failed-template-argument-deduction-when-using-template-template-parameters\" title=\"failed template argument deduction when using template template parameters\">stackoverflow.com/questions/16864476/&hellip;</a> The <code>std::set</code> may be similar..."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1537999836, "post_id": 52526393, "comment_id": 91993112, "body": "Maybe just use SFINAE to put a restriction that the content types are the same?  Something like <code>template &lt;typename C1, typename C2&gt; std::enable_if_t&lt;std::is_same_v&lt;typename C1::value_type, typename C2::value_type&gt;, void&gt; test(const C1&amp; v1, const C2&amp; v2)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1538788296, "last_edit_date": 1538788296, "creation_date": 1537999438, "answer_id": 52526620, "question_id": 52526393, "link": "https://stackoverflow.com/questions/52526393/nested-templates-function-taking-2-containers-with-the-same-inner-type/52526620#52526620", "title": "nested templates function taking 2 containers with the same inner type", "body": "<p>You need at least 2 template parameters:</p>\n\n<ol>\n<li>Container type</li>\n<li>Contained type</li>\n</ol>\n\n<p>Since you're using an STL container and <strong>passing the contained type apart from the container</strong>, the compiler <strong>cannot infer</strong> the other parameters (e.g., allocator <code>std::allocator&lt;T&gt;</code>, compare <code>std::less&lt;T&gt;</code>). But you can forward all nested templated parameters using a variadic template. Example:</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class C, typename... T&gt;\nstruct wrapper {\n    typedef C&lt;T...&gt; type;\n};\nwrapper&lt;std::vector, int&gt;::type foo;\nwrapper&lt;std::set   , int&gt;::type bar;\n</code></pre>\n\n<p>You can <a href=\"https://www.ideone.com/46cM6D\" rel=\"nofollow noreferrer\">see it in ideone</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "is_accepted": false, "score": 2, "last_activity_date": 1537999756, "creation_date": 1537999756, "answer_id": 52526679, "question_id": 52526393, "link": "https://stackoverflow.com/questions/52526393/nested-templates-function-taking-2-containers-with-the-same-inner-type/52526679#52526679", "title": "nested templates function taking 2 containers with the same inner type", "body": "<p>Your first attempt was nearly right. You got the error because the standard containers like <code>vector</code> accept more than one template parameter. For example, this is <code>std::vector</code>:</p>\n\n<pre><code>template&lt;\n    class T,\n    class Allocator = std::allocator&lt;T&gt;\n&gt; class vector;\n</code></pre>\n\n<p>You never usually use the second parameter, and it has a default, but it's still present, so your template template parameter <code>template &lt;typename&gt; typename C</code> can't match. Instead, you can do this:</p>\n\n<pre><code>template&lt;template &lt;typename...&gt; typename C, typename... Ts&gt;\nvoid test(C&lt;Ts...&gt; v1, C&lt;Ts...&gt; v2) {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1537999922, "creation_date": 1537999922, "answer_id": 52526697, "question_id": 52526393, "link": "https://stackoverflow.com/questions/52526393/nested-templates-function-taking-2-containers-with-the-same-inner-type/52526697#52526697", "title": "nested templates function taking 2 containers with the same inner type", "body": "<p>I believe what you are looking for is</p>\n\n<pre><code>template&lt;template &lt;typename...&gt; typename Cont1, \n         template &lt;typename...&gt; typename Cont2,\n         typename... T&gt;\nvoid test(Cont1&lt;T...&gt; a, Cont2&lt;T...&gt; b) { }\n</code></pre>\n\n<p>In the above <code>template &lt;typename...&gt; typename Cont1</code> declares one template template type and <code>template &lt;typename...&gt; typename Cont2</code> declares another one so you can have two different container types.  The both share <code>T...</code> so each template container needs to have a matching template parameter list.  This means</p>\n\n<pre><code>test(std::map&lt;int, int&gt;{}, std::map&lt;int, int&gt;{});\ntest(std::set&lt;int&gt;{}, std::set&lt;int&gt;{});\ntest(std::vector&lt;int&gt;{}, std::set&lt;int&gt;{});\n</code></pre>\n\n<p>all work but</p>\n\n<pre><code>test(std::map&lt;int, int&gt;{}, std::vector&lt;int&gt;{});\ntest(std::map&lt;int, int&gt;{}, std::set&lt;int&gt;{});\n</code></pre>\n\n<p>wouldn't.</p>\n"}], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1538788296, "creation_date": 1537998099, "last_edit_date": 1537998854, "question_id": 52526393, "link": "https://stackoverflow.com/questions/52526393/nested-templates-function-taking-2-containers-with-the-same-inner-type", "title": "nested templates function taking 2 containers with the same inner type", "body": "<p>I am trying to write function which is roughly similar to a function that takes two instances of containers (let's say for now they are the same), containing same type and merges them.  So here's my function for vectors:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid test(std::vector&lt;T&gt; v1, std::vector&lt;T&gt; v2) {\n  std::cout &lt;&lt; \"called nested for c\\n\";\n}\n</code></pre>\n\n<p>and it works.</p>\n\n<p>Now I want to have one that would work for sets or vectors.  And I try this:</p>\n\n<pre><code>template&lt;typename T, template &lt;typename&gt; typename C &gt;\nvoid test(C&lt;T&gt; v1, C&lt;T&gt; v2) {\n  std::cout &lt;&lt; \"called nested for c&lt;t&gt;\\n\";\n}\n</code></pre>\n\n<p>and get</p>\n\n<blockquote>\n  <p>nestedt.cc:33:6: note:   template argument deduction/substitution\n  failed: nestedt.cc:43:12: error: wrong number of template arguments\n  (3, should be 1)    test(s, s);\n              ^ nestedt.cc:32:51: note: provided for \u2018template class C\u2019  template typename C >\n                                                     ^</p>\n</blockquote>\n\n<p>I try </p>\n\n<pre><code>template&lt; template &lt;typename T&gt; typename C &gt;\nvoid test(C&lt;T&gt; v1, C&lt;T&gt; v2) {}\n\nstd::set&lt;int&gt; s = {1,2};\ntest(s, s);\n</code></pre>\n\n<p>and that doesn't work:</p>\n\n<blockquote>\n  <p>nestedt.cc:32:6: note:   template argument deduction/substitution\n  failed: nestedt.cc:42:12: note:   cannot convert \u2018s\u2019 (type\n  \u2018std::set\u2019) to type \u2018int\u2019    test(s, s);\n              ^</p>\n</blockquote>\n\n<p>So I try</p>\n\n<pre><code>template&lt;typename C, typename T &gt;\nvoid test(C&lt;T&gt; v1, C&lt;T&gt; v2) {}\n</code></pre>\n\n<p>and get</p>\n\n<blockquote>\n  <p>nestedt.cc:32:6: note: candidate: template void\n  test(C, C)  void test(C v1, C v2) {\n        ^ nestedt.cc:32:6: note:   template argument deduction/substitution failed: nestedt.cc:42:12: note:   couldn't\n  deduce template parameter \u2018T\u2019    test(s, s);\n              ^</p>\n</blockquote>\n\n<p>I feel like I'm not even close to understanding how templates actually work in C++ and it is so sad.\nAlso in reality I want the containers to be different.  And ideally be able to somehow specify a limited set of allowed containers.  And they are not really std:: containers.</p>\n\n<p>Note that the final goal is to be able to take 2 different containers, so something like <code>test(vector&lt;int&gt;, set&lt;int&gt;)</code>.  And modifying the containers is kind of impossible.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537996222, "post_id": 52526058, "comment_id": 91991967, "body": "Please edit your question to include all the header files needed to make this code compilable."}, {"owner": {"reputation": 67, "user_id": 8133802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c311f8b13f8ddbba2426f8a78e5e59d5?s=128&d=identicon&r=PG&f=1", "display_name": "Morti", "link": "https://stackoverflow.com/users/8133802/morti"}, "edited": false, "score": 1, "creation_date": 1537996386, "post_id": 52526058, "comment_id": 91992007, "body": "Thanks Neil, I did it."}], "answers": [{"tags": [], "owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "is_accepted": true, "score": 2, "last_activity_date": 1537996386, "creation_date": 1537996386, "answer_id": 52526097, "question_id": 52526058, "link": "https://stackoverflow.com/questions/52526058/palindrome-recursive-version/52526097#52526097", "title": "Palindrome recursive version", "body": "<p>Because you return <code>true</code>, not the result of the recursive call. Change it to this:</p>\n\n<pre><code>return palindrome_recursive(word);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 2, "creation_date": 1537996568, "post_id": 52526118, "comment_id": 91992063, "body": "How is that different from my answer? :D"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1537996735, "post_id": 52526118, "comment_id": 91992115, "body": "@MaxVollmer it is not. There was no answer visible when I clicked &quot;Post Your Answer&quot;."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 1, "creation_date": 1537996781, "post_id": 52526118, "comment_id": 91992141, "body": "No worries, I assumed as much. (That downvote didn&#39;t come from me, btw.)"}, {"owner": {"reputation": 67, "user_id": 8133802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c311f8b13f8ddbba2426f8a78e5e59d5?s=128&d=identicon&r=PG&f=1", "display_name": "Morti", "link": "https://stackoverflow.com/users/8133802/morti"}, "edited": false, "score": 0, "creation_date": 1537996883, "post_id": 52526118, "comment_id": 91992177, "body": "Thanks both of you :)"}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 0, "last_activity_date": 1537996536, "creation_date": 1537996536, "answer_id": 52526118, "question_id": 52526058, "link": "https://stackoverflow.com/questions/52526058/palindrome-recursive-version/52526118#52526118", "title": "Palindrome recursive version", "body": "<p>Here, you are returning <code>true</code> regardless of what <code>palindrome_recursive</code> returns.</p>\n\n<pre><code>palindrome_recursive(word);\nreturn true;\n</code></pre>\n\n<p>Change it to:</p>\n\n<pre><code>return palindrome_recursive(word);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8133802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c311f8b13f8ddbba2426f8a78e5e59d5?s=128&d=identicon&r=PG&f=1", "display_name": "Morti", "link": "https://stackoverflow.com/users/8133802/morti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52526097, "answer_count": 2, "score": -1, "last_activity_date": 1537996536, "creation_date": 1537996174, "last_edit_date": 1537996349, "question_id": 52526058, "link": "https://stackoverflow.com/questions/52526058/palindrome-recursive-version", "title": "Palindrome recursive version", "body": "<p>I have written a recursive function to find whether a word is palindrome or not, but I don't understand why function returns a TRUE value at the end of recursion while it prints FALSE before that.</p>\n\n<p>here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\nbool palindrome_recursive(string word){\n\n    string::size_type wordLength = word.length();\n    if(wordLength == 0){\n        cout &lt;&lt; \"TRUE\" &lt;&lt;endl;\n        return true;\n    }\n    if(word.at(0) != word.at(wordLength-1)){\n        cout &lt;&lt; \"FALSE\" &lt;&lt;endl;\n        return false;\n    }\n    word.erase(wordLength-1);\n    word.erase(0,1);\n    cout &lt;&lt; word &lt;&lt; endl;\n    palindrome_recursive(word);\n    return true;\n\n}\n\n\nint main()\n{\n    std::cout &lt;&lt; \"Enter a word: \";\n    std::string word;\n    std::cin &gt;&gt; word;\n\n    if(palindrome_recursive(word)){\n        std::cout &lt;&lt; word &lt;&lt; \" is a palindrome\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; word &lt;&lt; \" is not a palindrome\" &lt;&lt; std::endl;\n    }\n}  \n</code></pre>\n"}, {"tags": ["c++", "multithreading", "testing", "race-condition"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1537995565, "post_id": 52525944, "comment_id": 91991725, "body": "You really can&#39;t.  Sure, you can write code that has a race condition, but that code will have undefined behavior and could do anything including working correctly so you can&#39;t tell that you actually have a data race."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 5, "creation_date": 1537995674, "post_id": 52525944, "comment_id": 91991766, "body": "This is a tough problem, because as soon as you do anything that makes two threads act in concert you&#39;ve introduced synchronization and eliminated the data race. The best you can do is shoot lots of bullets and hope that something hits the target."}, {"owner": {"reputation": 31, "user_id": 8463522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1a850dfde01be7479fcf6b6addd5a8?s=128&d=identicon&r=PG&f=1", "display_name": "user678253", "link": "https://stackoverflow.com/users/8463522/user678253"}, "edited": false, "score": 0, "creation_date": 1537995717, "post_id": 52525944, "comment_id": 91991784, "body": "Yeah I was hoping somebody had some trick or idea. I figured the only way of doing it is a shotgun approach and even then its not a guarantee."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 4, "creation_date": 1537995735, "post_id": 52525944, "comment_id": 91991791, "body": "That&#39;s the trouble with race conditions. There is no guarantee."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1537997249, "post_id": 52525944, "comment_id": 91992317, "body": "I spent nearly a year trying to track down a race condition in a banking application I wrote - I would have loved to be able to make that condition reproducable. When I actually identified it, I felt so stupid. But there is no way really of reproducing, testing or guaranteeing this stuff (before anyone says, &quot;short of using Haskell&quot;)."}, {"owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "edited": false, "score": 0, "creation_date": 1538008686, "post_id": 52525944, "comment_id": 91995209, "body": "<code>rc = new RaceCondition();</code> :)"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1538010431, "post_id": 52525944, "comment_id": 91995581, "body": "Re, &quot;I figured [on] a shotgun approach...&quot; When you fire a shotgun at a paper target, the target space has two dimensions: It&#39;s the space of locations on the paper.  When you try to elicit bad behavior from a multi-threaded program, the target space has far more than just two dimensions. They include the name and version of what operating system you are using, and what compiler you used, and what run-time support you are using... If you try it ten million times on your computer, and it never fails, that doesn&#39;t prove that it won&#39;t fail the first time you try it on somebody else&#39;s computer."}, {"owner": {"reputation": 31, "user_id": 8463522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1a850dfde01be7479fcf6b6addd5a8?s=128&d=identicon&r=PG&f=1", "display_name": "user678253", "link": "https://stackoverflow.com/users/8463522/user678253"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1538069746, "post_id": 52525944, "comment_id": 92024588, "body": "@SolomonSlow  That&#39;s a good point. Thankfully I have a target platform that will never change for this code so at least my dimensions are constant."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1600186142, "post_id": 52526260, "comment_id": 113005921, "body": "<code>std::this_thread::yield();</code> between the increment and decrement should make it <i>drastically</i> more likely to trigger though"}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1537997273, "creation_date": 1537997273, "answer_id": 52526260, "question_id": 52525944, "link": "https://stackoverflow.com/questions/52525944/how-to-create-a-race-condition-in-c/52526260#52526260", "title": "How to create a race condition in C++", "body": "<p>The best you can do is hammer heavily at the code and check all the little signs you may get of an issue. If there's a race-condition, you should be able to write code that will eventually trigger it. Consider:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;assert.h&gt;\n\nint x = 0;\n\nvoid foo()\n{\n    while (true)\n    {\n        x = x + 1;\n        x = x - 1;\n        assert(x == 0);\n    }\n}\n\nint main()\n{\n    std::thread t(foo);\n    std::thread t2(foo);\n\n    t.join();\n    t2.join();\n}\n</code></pre>\n\n<p>Everywhere I test it, it asserts pretty quickly. I could then add critical sections until the assert is gone.</p>\n\n<p>But in fact, there's no guarantee that it ever will assert. But I've used this technique repeatedly on large-scale production code. You may just need to hammer at your code for a long while, to be sure.</p>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "is_accepted": false, "score": -1, "last_activity_date": 1537998312, "last_edit_date": 1537998312, "creation_date": 1537997832, "answer_id": 52526344, "question_id": 52525944, "link": "https://stackoverflow.com/questions/52525944/how-to-create-a-race-condition-in-c/52526344#52526344", "title": "How to create a race condition in C++", "body": "<p>Have a struct having a field of array of integers of zero, probably 300-500 kB long. Then from two threads, copy two other structs (one having 1s another having 2s) to it, just before some atomic memory issuing barriers(to be sure undefined behavior area has finished, from main thread by checking atomic variable's value).</p>\n\n<p>This should have a high chance of undefined behavior and maybe you could see mixed 1s, 2s (and even 0s?) in it to know it happened.</p>\n\n<p>But when you delete all control stuff such as atomics, then new shape can be also another undefined behavior and behave different.</p>\n"}, {"tags": [], "owner": {"reputation": 1247, "user_id": 9107647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43594ef3d74c11a31be7f9d5ebddc0?s=128&d=identicon&r=PG&f=1", "display_name": "Humphrey Winnebago", "link": "https://stackoverflow.com/users/9107647/humphrey-winnebago"}, "is_accepted": false, "score": -1, "last_activity_date": 1538007558, "last_edit_date": 1538007558, "creation_date": 1538007155, "answer_id": 52527638, "question_id": 52525944, "link": "https://stackoverflow.com/questions/52525944/how-to-create-a-race-condition-in-c/52527638#52527638", "title": "How to create a race condition in C++", "body": "<p>A great way to do this is by inserting well-timed <code>sleep</code> calls. You can use this, for example, to force combinations of events in an order you want to test (Thread 1 does something, then Thread 2 does something, then Thread 1 does something else). A downside is that you have to have an idea of where to put the <code>sleep</code> calls. After doing this for a little bit you should start to get a feel it, but some good intuition helps in the beginning.</p>\n\n<p>You may be able to conditionally call <code>sleep</code> or hit a breakpoint from a specific thread if you can get a handle to the thread id.</p>\n\n<p>Also, I'm pretty sure that Visual Studio and (I think) GDB allow you to freeze some threads and/or run specific ones.</p>\n"}], "owner": {"reputation": 31, "user_id": 8463522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1a850dfde01be7479fcf6b6addd5a8?s=128&d=identicon&r=PG&f=1", "display_name": "user678253", "link": "https://stackoverflow.com/users/8463522/user678253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 0, "accepted_answer_id": 52526260, "answer_count": 3, "score": 1, "last_activity_date": 1600185865, "creation_date": 1537995450, "question_id": 52525944, "link": "https://stackoverflow.com/questions/52525944/how-to-create-a-race-condition-in-c", "title": "How to create a race condition in C++", "body": "<p>I want to test some Object's function for thread safety in a race condition. In order to test this I would like to call a function simultaneously from two (or more) different threads. How can I write code that guarantee that the function calls will occur at the same time or at least close enough that it will have the desired effect?</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1537995606, "post_id": 52525798, "comment_id": 91991736, "body": "What do you think <code>while (cin &gt;&gt; vsize)</code> does? Hint: it <b>doesn&#39;t</b> scan untill an enter has been pressed"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1537996618, "post_id": 52526086, "comment_id": 91992073, "body": "but why does it behave like that? I also suspected this, but according to <a href=\"https://stackoverflow.com/questions/19483126/whats-the-difference-between-whilecin-and-whilecin-num\" title=\"whats the difference between whilecin and whilecin num\">stackoverflow.com/questions/19483126/&hellip;</a>     , if cin&#39;s buffer become empty it should terminate or did I get that wrong?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1537997097, "post_id": 52526086, "comment_id": 91992258, "body": "@noobnomore you got that wrong, <code>cin &gt;&gt; x</code> will <i>pause</i> if it&#39;s buffer is empty, but it won&#39;t return until either it&#39;s read x or it knows it can&#39;t (because of end of file, i/o error or format error)"}, {"owner": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1537998725, "post_id": 52526086, "comment_id": 91992788, "body": "but the answer says &quot;terminate&quot; and I also read in Andrew Koening &quot;Accelerated C++&quot; that he used: while(cin &gt;&gt; x){ ++count; sum += x;} in 3.1 and it worked. That&#39;s why I&#39;m having hard time with the answer. Sorry for bothering you, but could you maybe elaborate a bit more?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538003598, "post_id": 52526086, "comment_id": 91994078, "body": "@noobnomore If you do <code>while(cin &gt;&gt; x)</code> then  cin will read the entire file because cin will only return false when it reaches the end of the file.  But you want to read a specified number of items (however many are on the rest of the line) so reading the whole file isn&#39;t right."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538003678, "post_id": 52526086, "comment_id": 91994100, "body": "@noobnomore The other way to do this if you don&#39;t want to read the count at the start of the line is to use std::getline to read one line at a time and then stick that in a std::stringstream and read the individual items from there.  But that is way more work than just using the count at the start of the line."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538003970, "post_id": 52526086, "comment_id": 91994165, "body": "@noobnomore  The answer in the link you gave says &quot;as soon as cin is closed, the loop terminates&quot;  When it says &quot;closed&quot; it means that cin ran out of data (either because of the end of the file or some other error)"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538008341, "post_id": 52526086, "comment_id": 91995133, "body": "@noobnomore They&#39;re referring to forcing an EOF using something like CTRL + Z. If you don&#39;t do that, the program will just wait for you to enter more stuff."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "reply_to_user": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538031686, "post_id": 52526086, "comment_id": 92001755, "body": "@noobnomore The code <code>while(cin &gt;&gt; x){ ++count; sum += x;}</code> is a perfectly good way of reading <b>all</b> the numbers available and summing them. But you want to read a <b>fixed</b> number of items so a while loop is not approriate."}, {"owner": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "edited": false, "score": 0, "creation_date": 1538320050, "post_id": 52526086, "comment_id": 92093307, "body": "Thank you guys for the explanations :), it&#39;s clear now. And sorry for the late answer."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1537996308, "creation_date": 1537996308, "answer_id": 52526086, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors/52526086#52526086", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<pre><code>    while (cin &gt;&gt; vsize) {\n        cout &lt;&lt; \"Element is: \" &lt;&lt; vsize &lt;&lt; \"\\n\";\n        vec1.push_back(vsize);\n    };\n</code></pre>\n\n<p>should be something like</p>\n\n<pre><code>    for (int i = 0; i &lt; vsize; ++i) {\n        int elem;\n        cin &gt;&gt; elem;\n        cout &lt;&lt; \"Element is: \" &lt;&lt; elem &lt;&lt; \"\\n\";\n        vec1.push_back(elem);\n    }\n</code></pre>\n\n<p><code>while (cin &gt;&gt; vsize)</code> isn't going to stop asking for input until you get end of file or an error. But you know how many inputs to expect so code that in a for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 8900758, "user_type": "registered", "profile_image": "https://graph.facebook.com/1846812712055853/picture?type=large", "display_name": "Isuru Dharmadasa", "link": "https://stackoverflow.com/users/8900758/isuru-dharmadasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1549948288, "creation_date": 1549948288, "answer_id": 54643207, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors/54643207#54643207", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<p>My answer.</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n    int n,q;\n    cin &gt;&gt; n &gt;&gt; q ;\n\n    vector&lt;int&gt; a[n];\n\n    int k;\n    for(int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt; k; \n        for (int j = 0; j &lt; k; j++)\n        {\n            int val_a_i_j;\n            cin &gt;&gt; val_a_i_j;\n            a[i].push_back(val_a_i_j);\n        }\n    };\n\n    for (int i = 0; i &lt; q; i++)\n    {\n        int a_i, j;\n        cin &gt;&gt; a_i &gt;&gt; j;\n        cout &lt;&lt; a[a_i][j] &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 2, "creation_date": 1561607185, "post_id": 56783560, "comment_id": 100121612, "body": "Hi, welcome to stack overflow. For a useful answer explain why this is an answer to the question."}], "tags": [], "owner": {"reputation": 1, "user_id": 11701013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5f32ff978b51d39bcbb7ff8dc09687?s=128&d=identicon&r=PG&f=1", "display_name": "garima", "link": "https://stackoverflow.com/users/11701013/garima"}, "is_accepted": false, "score": 0, "last_activity_date": 1561607112, "last_edit_date": 1561607112, "creation_date": 1561606779, "answer_id": 56783560, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors/56783560#56783560", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main() {\n    int a , b;\n    cin &gt;&gt; a &gt;&gt; b;\n    vector&lt;int&gt; arr[a];\n    for(int i= 0 ; i &lt; a ; i++)\n    {\n       int m;\n       cin &gt;&gt; m;\n       int o;\n       for(int j=0;j&lt;m;j++)\n       {\n          cin &gt;&gt; o;\n          arr[i].push_back(o);\n       }\n    }\n    int r,s;\n    for(int k=1;k&lt;b;k++)\n    {\n      cin&gt;&gt;r&gt;&gt;s;\n      cout &lt;&lt;a[r][s]&lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2245, "user_id": 7389970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RoG3W.png?s=128&g=1", "display_name": "Shlok Nangia", "link": "https://stackoverflow.com/users/7389970/shlok-nangia"}, "edited": false, "score": 0, "creation_date": 1589262240, "post_id": 61744543, "comment_id": 109215317, "body": "Hi ,please explain why this is an answer to the question."}, {"owner": {"reputation": 2691, "user_id": 3115822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djEOC.png?s=128&g=1", "display_name": "borchvm", "link": "https://stackoverflow.com/users/3115822/borchvm"}, "edited": false, "score": 0, "creation_date": 1589263845, "post_id": 61744543, "comment_id": 109215912, "body": "While this code may provide a solution to the question, it&#39;s better to add context as to why/how it works. This can help future users learn, and apply that knowledge to their own code. You are also likely to have positive feedback from users in the form of upvotes, when the code is explained."}], "tags": [], "owner": {"reputation": 1, "user_id": 13523155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa0a714677872c8ee0e32755e453869?s=128&d=identicon&r=PG", "display_name": "Harshita Rajput", "link": "https://stackoverflow.com/users/13523155/harshita-rajput"}, "is_accepted": false, "score": 0, "last_activity_date": 1589261897, "creation_date": 1589261897, "answer_id": 61744543, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors/61744543#61744543", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n\nint main() \n{\n    int n, q;\n    cin &gt;&gt; n &gt;&gt; q;\n    vector&lt;int&gt;* a;\n    a= new vector&lt;int&gt;[n];\n    int p;\n    int k;\n    for (p = 0;p &lt; n;p++) {\n        cin &gt;&gt; k;\n        for (int i = 0; i &lt; k; i++) {\n            int o;\n            cin &gt;&gt;o;\n            a[p].push_back(o);\n        }\n    }\n    int r, s;\n    for (p = 0;p &lt; q;p++)\n    {\n        cin &gt;&gt; r &gt;&gt; s;\n        cout &lt;&lt; a[r][s]&lt;&lt;endl;\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14343794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82852f869d34215dce3da6f60930208b?s=128&d=identicon&r=PG&f=1", "display_name": "Narsimha Kuna", "link": "https://stackoverflow.com/users/14343794/narsimha-kuna"}, "is_accepted": false, "score": 0, "last_activity_date": 1601129334, "last_edit_date": 1601129334, "creation_date": 1601098373, "answer_id": 64074232, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors/64074232#64074232", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<p>This problem is about handling vectors of the vector.</p>\n<pre><code>int main() {\n  \n    int n,q;\n    cin&gt;&gt;n&gt;&gt;q;\n    vector&lt;vector&lt;int&gt; &gt; a;//creating vectors of vector\n    int k;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        cin &gt;&gt;k;\n        vector &lt;int&gt; row; // creating vector\n\n        for (int j = 0; j &lt; k; j++)\n        {\n            int val;\n            cin&gt;&gt; val;\n            row.push_back(val);\n        }\n        a.push_back(row);\n    }\n    \n    for (int l=0; l &lt; q; l++)\n    {\n       int i,j;\n       cin&gt;&gt;i&gt;&gt;j;\n       // checking boundary conditions\n       if ((i &gt;= 0 &amp;&amp; i &lt; a.size() ) &amp;&amp; (j &gt;=0 &amp;&amp; j &lt; a[i].size()))\n       {\n          cout&lt;&lt;a[i][j]&lt;&lt;endl;\n       }\n      \n    } \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10420894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f9f7a22978d81860e0b3181432b32a?s=128&d=identicon&r=PG&f=1", "display_name": "noobnomore", "link": "https://stackoverflow.com/users/10420894/noobnomore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4014, "favorite_count": 0, "answer_count": 5, "score": -3, "last_activity_date": 1601129334, "creation_date": 1537994680, "last_edit_date": 1537995429, "question_id": 52525798, "link": "https://stackoverflow.com/questions/52525798/c-variable-sized-arrays-from-hackerrank-with-vectors", "title": "c++ variable sized arrays from Hackerrank with vectors", "body": "<p>I wanted to solve a challenge named \"Variable sized Arrays\" on Hackerrank and I wanted to do that using vectors. The Code I wrote, doesn't work properly and I tried debugging it, but I'm getting nowhere. I'll be grateful for \nHere's the challenge:</p>\n\n<blockquote>\n  <p>Consider an n-element array,a, where each index i in the array contains a reference K<sub>i</sub>to an array of  integers (where the value of  K<sub>i</sub> varies from array to array). See the Explanation section below for a diagram.</p>\n  \n  <p>Given a, you must answer q queries. Each query is in the format i j, where i denotes an index in array  and j denotes an index in the array located at a[i] . For each query, find and print the value of element j in the array  at location  on a[i]a new line.</p>\n  \n  <p>Input Format</p>\n  \n  <p>The first line contains two space-separated integers denoting the respective values of n (the number of variable-length arrays) and q (the number of queries). \n  Each line  of the  subsequent lines contains a space-separated sequence in the format k a[i]0 a[i]1 \u2026 a[i]k-1 describing the k-element array located at a[i].\n  Each of the q subsequent lines contains two space-separated integers describing the respective values of i (an index in array a) and j (an index in the array referenced by a[i]) for a query.</p>\n  \n  <p>Sample Input<br/>\n  2 2<br/>\n  3 1 5 4<br/>\n  5 1 2 8 9 3<br/>\n  0 1<br/>\n  1 3<br/></p>\n  \n  <p>Sample Output<br/>\n  5<br/>\n  9<br/></p>\n</blockquote>\n\n<p>So here's my code for this (I'll leave it with the couts for debugging):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing std::cin;\nusing std::cout;\nusing std::vector;\nusing std::endl;\n\nint main() {\n\n    int numberOfQueries = 0;\n    int numberOfArrays = 0;\n    cout &lt;&lt; \"Enter Nr.Of Arrays followed by Nr.Of Queries:\";\n    cin &gt;&gt; numberOfArrays &gt;&gt; numberOfQueries;\n    cout &lt;&lt; \"Nr.Of Arrays: \" &lt;&lt; numberOfArrays &lt;&lt; endl;\n    cout &lt;&lt; \"Nr.Of Queries: \" &lt;&lt; numberOfQueries &lt;&lt; endl;\n    vector&lt;vector&lt;int&gt;&gt;multiArray;\n    cout &lt;&lt; \"MultiArray size: \" &lt;&lt; multiArray.size();\n    while (numberOfArrays != 0) {\n        int vsize = 0;\n        cout &lt;&lt; \"\\nenter array starting by its size: \";\n        cin &gt;&gt; vsize;\n        cout &lt;&lt; \" Size entered  is: \" &lt;&lt; vsize &lt;&lt; endl;\n        vector&lt;int&gt; vec1(vsize);\n        cout &lt;&lt; \"Array Size is: \" &lt;&lt; vec1.size() &lt;&lt; endl;\n        //int element = 0;\n        while (cin &gt;&gt; vsize) {\n            cout &lt;&lt; \"Element is: \" &lt;&lt; vsize &lt;&lt; \"\\n\";\n            vec1.push_back(vsize);\n        };\n        multiArray.push_back(vec1);\n        numberOfArrays--;\n        cout &lt;&lt; \"MultiArray size: \" &lt;&lt; multiArray.size();\n        cout &lt;&lt; \"Nr.Of Arrays: \" &lt;&lt; numberOfArrays &lt;&lt; endl;\n    };\n    while (numberOfQueries &gt; 0) {\n        int i = 0, j = 0;\n        cout &lt;&lt; \"\\nQuery indexes:\";\n        cin &gt;&gt; i &gt;&gt; j;\n        cout &lt;&lt; multiArray[i][j];\n        numberOfQueries--;\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "jna"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1537994623, "post_id": 52525748, "comment_id": 91991350, "body": "Related: <a href=\"https://stackoverflow.com/q/15430260/1531971\">stackoverflow.com/q/15430260/1531971</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537994654, "post_id": 52525748, "comment_id": 91991364, "body": "Post some real code - that C++ sample isn&#39;t C++."}, {"owner": {"reputation": 3, "user_id": 10420767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade084e13af49e0a61b04798771cd79e?s=128&d=identicon&r=PG&f=1", "display_name": "HP.", "link": "https://stackoverflow.com/users/10420767/hp"}, "edited": false, "score": 0, "creation_date": 1537995457, "post_id": 52525748, "comment_id": 91991683, "body": "@NeilButterworth I tried to simplify the code here in order to not clutter the post. My Java callback does get called, and I have verified it via log statements.  Should I post the all the code from loading the library in Java as well as the C++ function that gets called from Java?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537995839, "post_id": 52525748, "comment_id": 91991837, "body": "There is simplify, and then just plain wrong - for example, <code>SimpleStruct[] mySimpleStructs;</code> is not valid C++, and it wouldn&#39;t be if it were rearranged."}, {"owner": {"reputation": 3, "user_id": 10420767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade084e13af49e0a61b04798771cd79e?s=128&d=identicon&r=PG&f=1", "display_name": "HP.", "link": "https://stackoverflow.com/users/10420767/hp"}, "edited": false, "score": 0, "creation_date": 1537997480, "post_id": 52525748, "comment_id": 91992389, "body": "Thanks for pointing it out. I have cleaned it up."}, {"owner": {"reputation": 3, "user_id": 10420767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade084e13af49e0a61b04798771cd79e?s=128&d=identicon&r=PG&f=1", "display_name": "HP.", "link": "https://stackoverflow.com/users/10420767/hp"}, "edited": false, "score": 0, "creation_date": 1537997789, "post_id": 52525748, "comment_id": 91992488, "body": "@jdv The post you referenced is returning the struct from C++ to Java. I want to return a struct from Java callback to C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1538057991, "post_id": 52525748, "comment_id": 92017832, "body": "My point is that that JNA uses Pointer and Structure for interchange of non-primitive types."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1538425872, "post_id": 52525748, "comment_id": 92131547, "body": "You&#39;d be better off having the native code pass a struct* to the callback, then have the callback fill in the struct contents as needed.  That way there&#39;s no confusion about who owns the memory, and JNA will automatically sync the Java Structure to the native struct memory."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10420767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade084e13af49e0a61b04798771cd79e?s=128&d=identicon&r=PG&f=1", "display_name": "HP.", "link": "https://stackoverflow.com/users/10420767/hp"}, "edited": false, "score": 0, "creation_date": 1538744172, "post_id": 52598517, "comment_id": 92261888, "body": "I passed reference to the struct in the callback and was able to get the values as expected back in the native code. Thanks very much for your help."}], "tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": true, "score": 0, "last_activity_date": 1538426119, "creation_date": 1538426119, "answer_id": 52598517, "question_id": 52525748, "link": "https://stackoverflow.com/questions/52525748/returning-struct-from-java-callback-to-c/52598517#52598517", "title": "Returning struct from java callback to c++", "body": "<p>Each JNA <code>Structure</code> allocates its own memory, which may be GC'd as soon as it goes out of scope.</p>\n\n<p>You need to either have your native code pass the memory to the Java code to be populated (rather than allocating one and returning it), or keep a strong reference to <em>every</em> <code>Structure</code> that is returned from the Java code to prevent GC.</p>\n\n<p>You might also try calling <code>Structure.write()</code> just before return; normally Java synchs structures automatically, but there may be a bug doing so when returning a Structure from a callback.</p>\n"}], "owner": {"reputation": 3, "user_id": 10420767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade084e13af49e0a61b04798771cd79e?s=128&d=identicon&r=PG&f=1", "display_name": "HP.", "link": "https://stackoverflow.com/users/10420767/hp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 52598517, "answer_count": 1, "score": 0, "last_activity_date": 1538426119, "creation_date": 1537994419, "last_edit_date": 1537997422, "question_id": 52525748, "link": "https://stackoverflow.com/questions/52525748/returning-struct-from-java-callback-to-c", "title": "Returning struct from java callback to c++", "body": "<p>In my software application I am using a native library in C++ from Java using JNA. I need a callback function that returns a complex java object to C++.</p>\n\n<p>This might be a simple problem, but I have no experience with C++ or JNA, and I am unable to successfully return the java object to C++.</p>\n\n<p>Most examples I have come across for JNA callback functions are simple, and either they don't return anything or return a simple native type.</p>\n\n<p>My native code looks like the following</p>\n\n<pre><code>typedef const char* SMC_String;\nint doNativeProcessing(SMC_String identifier, SMC_String lastName, SMC_String firstName)\n\ntypedef struct SimpleStruct\n{\n  int myInt;\n  SMC_String myString;\n} SimpleStruct;\n\ntypedef SimpleStruct* (*GetSimpleStruct_Callback)(SMC_String identifier);\n...\n\n// function that gets called from Java\nint doNativeProcessing(SMC_String identifier, SMC_String lastName, SMC_String firstName)\n{\n  cout &lt;&lt; \"In native function\" &lt;&lt; endl;\n  ...do some processing...\n  callMyCallback();\n  return 0;\n}\n\n// function that calls the callback \nvoid callMyCallback()\n{\n  SimpleStruct *retSimpleStruct = GetSimpleStruct_Callback(\"id\");\n  cout &lt;&lt; \"returned int: \" &lt;&lt; retSimpleStruct-&gt;myInt &lt;&lt; endl;\n  cout &lt;&lt; \"returned string: \" &lt;&lt; retSimpleStruct-&gt;myString &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Java code:</p>\n\n<pre><code>public class SimpleStruct extends Structure {\n  public static class ByReference extends SimpleStruct implements Structure.ByReference\n  {}\n\n  public SimpleStruct() {\n    super();\n  }\n\n  @Override\n  protected List&lt;String&gt; getFieldOrder() {\n    return Arrays.asList(\"myInt\", \"myString\");\n  }\n\n  public int myInt;\n  public String myString;\n}\n...\npublic class GetSimpleStructCB implements Callback {\n    public SimpleStruct.ByReference callback(final String requestId) {\n      System.out.println(\"In Java callback\");\n\n      final SimpleStruct.ByReference retVal = new SimpleStruct.ByReference();\n      retVal.myInt = 25;\n      retVal.myString = \"Hello World!\";\n      return retVal;\n    }\n}\n\npublic static void main(String[] args) {\n    nativeLibrary = (NativeLibrary) Native.loadLibrary(\"my_native_dll\", NativeLibrary.class);\n    nativeLibrary.doNativeProcessing(\"id\", \"Doe\", \"John\");\n}\n</code></pre>\n\n<p>When I run the application, the output is  </p>\n\n<pre><code>In native function\nIn Java callback\nreturned int: 0  \nreturned string: &lt;blank value&gt;  \n</code></pre>\n\n<p>instead of the expected  </p>\n\n<pre><code>In native function\nIn Java callback\nreturned int: 25  \nreturned string: Hello World!  \n</code></pre>\n\n<p>Could you please help me figure out what I am doing wrong? Your help is much appreciated.</p>\n\n<p>Regards,\nH.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1537992903, "post_id": 52525381, "comment_id": 91990633, "body": "You&#39;re right, this is a very easy fix.  One that is probably easy to see when you step thru the code in your debugger.  Learning to use the debugger is of far more benefit to you than asking repeated questions here about your code as it evolves."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10361701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bd2ef01cade72310f1ec1409eed7fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/10361701/john-smith"}, "edited": false, "score": 0, "creation_date": 1537993083, "post_id": 52525442, "comment_id": 91990719, "body": "Thank you! I knew it was something simple"}, {"owner": {"reputation": 960, "user_id": 2938004, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/738a1943d6e297f81a33d8b712dfdf12?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Jha", "link": "https://stackoverflow.com/users/2938004/sagar-jha"}, "reply_to_user": {"reputation": 19, "user_id": 10361701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bd2ef01cade72310f1ec1409eed7fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/10361701/john-smith"}, "edited": false, "score": 1, "creation_date": 1537993175, "post_id": 52525442, "comment_id": 91990758, "body": "As an aside, name your reverse function <code>reverseArray</code> or something similar. It does not sort the given array, so naming it <code>insertionSortRev</code> is misleading."}], "tags": [], "owner": {"reputation": 960, "user_id": 2938004, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/738a1943d6e297f81a33d8b712dfdf12?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Jha", "link": "https://stackoverflow.com/users/2938004/sagar-jha"}, "is_accepted": true, "score": 2, "last_activity_date": 1537992909, "creation_date": 1537992909, "answer_id": 52525442, "question_id": 52525381, "link": "https://stackoverflow.com/questions/52525381/does-not-return-last-element-after-reversing/52525442#52525442", "title": "Does not return last element after reversing", "body": "<p>An array of size <code>s</code> is indexed from <code>0</code> to <code>s-1</code>. In your reverse function, write <code>end = numWords - 1;</code> instead of <code>end = numWords</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 10361701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bd2ef01cade72310f1ec1409eed7fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/10361701/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 52525442, "answer_count": 1, "score": -1, "last_activity_date": 1537992909, "creation_date": 1537992617, "last_edit_date": 1537992901, "question_id": 52525381, "link": "https://stackoverflow.com/questions/52525381/does-not-return-last-element-after-reversing", "title": "Does not return last element after reversing", "body": "<p>So I have to make a program where I first put in an array of strings and then insertion sort it, output that, then reverse the array and output it again. I'm just having one little problem. The last element (after reversing, originally the first element) doesn't print? I'm betting this is an easy fix, but does anyone know how to fix it? Any help is appreciated! Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nstring insertionSort(string[], int);\nstring reverseSort(string[], int);\n\nstring insertionSort(string words[], int numWords) {\nint i = 0;\nint j = 0;\nstring temp = \"\";\n\nfor (i = 0; i &lt; numWords; i++) {\n  j = i;\n  while (j &gt; 0 &amp;&amp; words[j] &lt; words[j - 1]) {\n     temp = words[j];\n     words[j] = words[j - 1];\n     words[j - 1] = temp;\n     j--;\n    }\n}\nreturn temp;\n}\n\nstring insertionSortRev(string words[], int numWords) { //reverse array\nint start = 0;\nint end = numWords;\nstring temp = \"\";\n\nwhile (start &lt; end) {\n  string temp = words[start];\n  words[start] = words[end];\n  words[end] = temp;\n  start++;\n  end--;\n  }\n  return temp;\n  }\n\n\nint main() {\nstring words[] = {\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"};\nint numWords = 0;\n\ncin &gt;&gt; numWords;\n\nfor (int i = 0; i &lt; numWords; i++) {\ncin &gt;&gt; words[i];\n}\n\ncout &lt;&lt; \"UNSORTED: \";\nfor (int i = 0; i &lt; numWords; i++) {\ncout &lt;&lt; words[i] &lt;&lt; \" \";\n}\ncout &lt;&lt; endl;\n\ninsertionSort(words, numWords);\n\n cout &lt;&lt; \"SORTED: \";\n for(int z = 0; z &lt; numWords; z++) {\n    cout &lt;&lt; words[z] &lt;&lt; \" \";\n }\n cout &lt;&lt; endl;\n\n insertionSortRev(words, numWords);\n\n cout &lt;&lt; \"REVERSED: \";\n for (int k = 0; k &lt; numWords; k++) {\n cout &lt;&lt; words[k] &lt;&lt; \" \";\n }\n cout &lt;&lt; endl;\n\n return 0;\n\n }\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string", "char"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1537993131, "post_id": 52525380, "comment_id": 91990739, "body": "You want a vector of strings."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537993277, "post_id": 52525380, "comment_id": 91990795, "body": "@NeilButterworth There is no evidence in the code shown that a <code>std::vector</code> is better suited for the intended purpose than an array."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1537994920, "post_id": 52525380, "comment_id": 91991488, "body": "I really like the way you are trying to write your program a bit at a time, instead of writing everything at once. Just don&#39;t fall into the trap of thinking that because your program compiles it&#39;s going to work. Write a small bit of code, get it to compile, test it and fix any bugs. Only then repeat."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537995542, "post_id": 52525380, "comment_id": 91991715, "body": "@Swordfish Vectors are almost always preferable to arrays, because they carry their size around with them, and thus can easily be passed as function parameters."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537995784, "post_id": 52525380, "comment_id": 91991822, "body": "@NeilButterworth Since the array of cities one can depart from is unlikely to change during runtime I&#39;d rather suggest <code>std::array&lt;std::string&gt;</code> or ``std::array&lt;char const *&gt;`."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537995983, "post_id": 52525380, "comment_id": 91991886, "body": "@Swordfish On the contrary, many, many things (in fact most things) change at runtime.  In the case of an airline application, airports can close or open, or be subject to transient special offers, etc. Anyway, that doesn&#39;t alter the fact that if you pass a vector to a function, the function knows the size of the vector, but that is not so for arrays, which was my point. I do wonder, when you say things like this,  if you have ever written a large C++ application."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537996577, "post_id": 52525380, "comment_id": 91992064, "body": "@NeilButterworth I wrote my comment keeping in mind that boodaloo1s program is most likely one of a beginner learning C++ and won&#39;t be used in a scenario where &quot;airports can close or open, or be subject to transient special offers, etc&quot;. &quot;if you pass a vector to a function, the function knows the size of the vector, but that is not so for arrays, which was my point.&quot; <code>std::array</code> knows its size."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537997041, "post_id": 52525380, "comment_id": 91992233, "body": "@Swordfish  std::arrays don&#39;t carry their size with them - they only have one size - just like C-style arrays. I have no idea why you are so opposed to the idea of using vectors, which is cleaner, simpler, easier, better etc."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1537994680, "post_id": 52525481, "comment_id": 91991378, "body": "In addition to the problems that are mentioned above, it&#39;s pretty clear that when you wrote this <code>std::string dcity[] = { &quot;Seattle Detroit Seattle Chicago Houston Seattle&quot; };</code> what you really should have written is this <code>std::string dcity[] = { &quot;Seattle&quot;, &quot;Detroit&quot;, &quot;Seattle&quot;, &quot;Chicago&quot;, &quot;Houston&quot;, &quot;Seattle&quot; };</code> Strings don&#39;t automaticaly split on spaces, you need to write multiple strings separated by commas."}], "tags": [], "owner": {"reputation": 148, "user_id": 9269593, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zv54uCikGI8/AAAAAAAAAAI/AAAAAAAACN4/gvmh_rIwPWk/photo.jpg?sz=128", "display_name": "Kiky Rodriguez", "link": "https://stackoverflow.com/users/9269593/kiky-rodriguez"}, "is_accepted": false, "score": 2, "last_activity_date": 1537993072, "creation_date": 1537993072, "answer_id": 52525481, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable/52525481#52525481", "title": "C++ storing an element of a string array into a variable", "body": "<p>Since C++ is a strongly-typed language, it doesn't like type mismatches.\nYou've declare your variable in the following way:</p>\n\n<p><code>char departureLocation;</code></p>\n\n<p>This means departureLocation is a variable of type char, or a single character. So 'C' can go into departureLocation but \"Chicago\" cannot, as it is more that one character.</p>\n\n<p>You've also declared your array like so:</p>\n\n<p><code>std::string dcity[] =</code></p>\n\n<p>Here, you have defined the type of the array as std::string. So elements of the array are strings, not chars.</p>\n\n<p>The short answer is that you need to change the type of departureLocation to a string when you declare it, instead of a char. Something like:</p>\n\n<p><code>std::string departureLocation;</code></p>\n\n<p>I also didn't see any include statements in your code above. For C++ to recognize the string class, you'll need to make sure the following is at the top of your code somewhere:</p>\n\n<p><code>#include &lt;string&gt;</code></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1537993671, "post_id": 52525500, "comment_id": 91990973, "body": "It&#39;s an array of <i>one</i> string."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1537997394, "last_edit_date": 1537997394, "creation_date": 1537993163, "answer_id": 52525500, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable/52525500#52525500", "title": "C++ storing an element of a string array into a variable", "body": "<p><code>dcity</code> is an array of <code>std::string</code>s. <code>departureLocation</code> is a <code>char</code> which can only hold one character. To store (copy) an element of the array <code>dcity</code>, <code>departureLocation</code> must be of type <code>std::string</code> (or any other type that can be constructed fron a <code>std::string</code>):</p>\n\n<pre><code>std::string dcity[] = { \"Seattle Detroit Seattle Chicago Houston Seattle\" };\nstd::string departureLocation = dcity[0];\n</code></pre>\n\n<p>Be aware thet <code>dcity</code> is an array consisting of only one element. Maybe you want an array where each city is a seperate array element:</p>\n\n<pre><code>std::string dcity[] = { \"Seattle\", \"Detroit\", \"Seattle\",\n                        \"Chicago\", \"Houston\", \"Seattle\" };\nstd::string departureLocation = dcity[2];\n</code></pre>\n\n<blockquote>\n<pre><code>std::cin &gt;&gt; selection;\nstd::cout &lt;&lt; dcity[selection-1];\n</code></pre>\n</blockquote>\n\n<p>Also you should do some error checking before using user input as an array index:</p>\n\n<pre><code>if (!(std::cin &gt;&gt; selection) || selection &lt; 1 || selection &gt; sizeof(dcity) / sizeof(*dcity)) {\n    std::cerr &lt;&lt; \"Input error!\\n\";\n    return EXIT_FAILURE;\n}\nstd::string departureLocation = dcity[selection - 1];\n</code></pre>\n\n<p>If you don't need independent copies of your array elements you could also use a reference to <code>std::string</code>:</p>\n\n<pre><code>std::string &amp;departureLocation = dcity[selection - 1];\n</code></pre>\n\n<p>Be aware that changes to the string using <code>departureLocation</code> will now reflect on the array element <code>departureLocation</code> references. If you don't want to allow changes, use a <code>const</code> reference:</p>\n\n<pre><code>std::string const &amp;departureLocation = dcity[selection - 1];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537994811, "post_id": 52525561, "comment_id": 91991433, "body": "I can&#39;t be certain, but I suspect the downvotes are because you changed more of the asker&#39;s code than you explained. Unexplained code leads to cutting and pasting and Cargo Cult behaviour where programmers imitate what you are doing without understanding why they are doing it."}], "tags": [], "owner": {"reputation": 118, "user_id": 9894471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a000s.png?s=128&g=1", "display_name": "mostsignificant", "link": "https://stackoverflow.com/users/9894471/mostsignificant"}, "is_accepted": false, "score": -1, "last_activity_date": 1537993535, "creation_date": 1537993535, "answer_id": 52525561, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable/52525561#52525561", "title": "C++ storing an element of a string array into a variable", "body": "<p>You could to store the selection in a std::string, because char can only store a single character. Be also careful of where you access your array to not go out of bounds (what happens if somebody enters 1000 etc.) and that non-programmer users index lists starting with 1. You can try this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    const auto Cities = { \"Seattle\", \"Detroit\", \"Seattle\", \"Chicago\", \"Houston\", \"Seattle\" };\n    std::cout &lt;&lt; \"Please choose a number from the list (1-\" &lt;&lt; Cities.size() &lt;&lt; \"): \";\n\n    int selection = 0;\n    std::cin &gt;&gt; selection;\n    if (selection &lt; 1 || selection &gt; Cities.size()) {\n        std::cout &lt;&lt; \"\\ninvalid selection!\\n\";\n        return -1;\n    }\n\n    const std::string departureLocation = *(Cities.begin() + selection - 1);\n    std::cout &lt;&lt; \"\\nyou selected: \" &lt;&lt; departureLocation;\n\n    return 0;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1537994810, "post_id": 52525814, "comment_id": 91991429, "body": "You don&#39;t really need to write a loop to perform the assignment to <code>depaturelocation</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9110300"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1537995627, "post_id": 52525814, "comment_id": 91991749, "body": "Yeah it&#39;s not necssary, you can directly assign value to depaturelocation"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9110300"}, "is_accepted": false, "score": 0, "last_activity_date": 1537994729, "creation_date": 1537994729, "answer_id": 52525814, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable/52525814#52525814", "title": "C++ storing an element of a string array into a variable", "body": "<p>First of all the compiler thinks that there is only one element in the array because arrays in c++ should have commas between each element and each string must be enclosed inside double quotes.The second error is that you are trying to save data of type string into a variable having data type char.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;iostream&gt;\n\nusing namespace std;\nint main()\n{\n\nint selection=0;\nstring depaturelocation;\nstring dcity[]={\"Seattle\",\"Detroit\",\"Seattle\",\"Chicago\",\"Houstan\",\"Seattle\"};\nint size=sizeof(dcity)/sizeof(dcity[0]);\nfor(int i=0;i&lt;size;i++)\n{\n   cout&lt;&lt;i+1&lt;&lt;\" : \"&lt;&lt;dcity[i]&lt;&lt;endl;\n}\ncout&lt;&lt;\"please enter the destination no:\";\ncin&gt;&gt;selection;\n\nfor(int i=0;i&lt;size;i++)\n{\n    if(selection-1==i)\n    {\n        depaturelocation=dcity[i];\n    }\n}\ncout&lt;&lt;\"destination:\"&lt;&lt;depaturelocation;\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537995611, "post_id": 52525892, "comment_id": 91991740, "body": "Don&#39;t use C strings when there is no benefit using them. Also there is no such thing as variable length arrays in C++."}, {"owner": {"reputation": 27, "user_id": 10420831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecc0721b27264c1b031b155d46b313c?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushal", "link": "https://stackoverflow.com/users/10420831/kaushal"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537995901, "post_id": 52525892, "comment_id": 91991860, "body": "Thanks for your comment. But can you explain why C strings should not be used when there is no major benefit. And I did not say anything regarding variable length arrays in my post."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537996020, "post_id": 52525892, "comment_id": 91991900, "body": "&quot;And I did not say anything regarding variable length arrays in my post.&quot; You did use them: &quot;<code>char departureLocation[dcity[selection-1].length()+1];</code>&quot;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1538003042, "post_id": 52525892, "comment_id": 91993939, "body": "Variable length Arrays are allowed by extension in some compilers, but the results can be unfortunate. They break the compile-time behaviour of <code>sizeof</code> for example. Prefer to use a <code>vector</code>."}], "tags": [], "owner": {"reputation": 27, "user_id": 10420831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ecc0721b27264c1b031b155d46b313c?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushal", "link": "https://stackoverflow.com/users/10420831/kaushal"}, "is_accepted": false, "score": 0, "last_activity_date": 1537995209, "creation_date": 1537995209, "answer_id": 52525892, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable/52525892#52525892", "title": "C++ storing an element of a string array into a variable", "body": "<p>Your code needs little modification. \n1. An array is initialized by giving its component values separated by a comma. Note each individual element should be of the same type as that of the declared array. \n2. The C++ is very strict with the type matching. We can assign objects only of the same type. In the above code, a string object is being assigned to a character variable which is against the rule. A C string is an array of characters terminated by null character (\\0). In C++, string is more advanced and it is an object which has very useful member function. For e.g. to get length of the string, just say obj.length(). We need to have character array since in string there can be more than one char element. We need to have c-string of the string object to get into an array of characters. Please see below the modified code. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\nusing namespace std;    //std::  is not required in front of cout \nint main()\n{\n    int selection = 0;\n\n    string dcity[] = { \"Seattle\", \"Detroit\" ,\"Seattle\", \"Chicago\", \"Houston\",\"Seattle\" };\n    cout &lt;&lt; \"Please choose a number from the list\";\n    cin &gt;&gt; selection;\n    cout &lt;&lt; dcity[selection-1] &lt;&lt; endl;\n\n    char departureLocation[dcity[selection-1].length()+1];\n    strcpy(departureLocation,dcity[selection-1].c_str());\n    cout &lt;&lt; departureLocation;\n   // cout &lt;&lt; *c;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 9749276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffaa9177af9cff3d66ab5188957ca5a?s=128&d=identicon&r=PG&f=1", "display_name": "bziggy", "link": "https://stackoverflow.com/users/9749276/bziggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3704, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1537997394, "creation_date": 1537992614, "question_id": 52525380, "link": "https://stackoverflow.com/questions/52525380/c-storing-an-element-of-a-string-array-into-a-variable", "title": "C++ storing an element of a string array into a variable", "body": "<p>I am currently coding in C++ and am fairly new to it. I am running into issues with converting an element of an array of strings into a variable. The cout statement dcity[selection-1] works as intended. However, I am unable to store dcity[selection-1] into a variable named departureLocation. Visual Studios gives me the error that there is no suitable conversion function from a string to a char. Does anyone have advice on how to properly store this? Thanks!</p>\n\n<pre><code>int main()\n{\n\nint selection = 0;\nchar departureLocation;\n\n\nstd::string dcity[] = { \"Seattle Detroit Seattle Chicago Houston Seattle\" };\nstd::cout &lt;&lt; \"Please choose a number from the list\";\nstd::cin &gt;&gt; selection;\nstd::cout &lt;&lt; dcity[selection-1];\n\n\ndepartureLocation=dcity[selection-1]\n\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537992200, "post_id": 52525264, "comment_id": 91990290, "body": "Did you turn optimizations on when you tested the speed?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 4, "creation_date": 1537992385, "post_id": 52525264, "comment_id": 91990392, "body": "All those calls to <code>string::erase</code> will move a lot of data.  Rethink how you&#39;re doing what you&#39;re doing, so that you don&#39;t have to change the original string.  Can you use an index to track what part of the string you&#39;re looking at, rather than using the first character?"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 5, "last_activity_date": 1537992625, "creation_date": 1537992625, "answer_id": 52525383, "question_id": 52525264, "link": "https://stackoverflow.com/questions/52525264/how-can-i-speed-up-parsing-of-large-strings/52525383#52525383", "title": "How can I speed up parsing of large strings?", "body": "<p>Use <code>string_view</code> or a hand rolled one.</p>\n\n<p>Don't modify the string loaded.</p>\n\n<pre><code>  original_string.erase(0, occurance_index + 1);\n</code></pre>\n\n<p>is code smell and going to be expensive with a large original string.</p>\n\n<p>If you are going to modify something, do it in one pass.  Don't repeatedly delete from the front of it -- that is O(n^2).  Instead, procceed along it and shove \"finished\" stuff into an output accumulator.</p>\n\n<p>This will involve changing how your code works.</p>\n"}, {"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 4, "creation_date": 1537993311, "post_id": 52525478, "comment_id": 91990810, "body": "I wouldn&#39;t condone using strstr here. But there is a find overload which takes an initial index, which will be almost as efficient."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1538004835, "post_id": 52525478, "comment_id": 91994361, "body": "I totally agree with you about considering the <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow noreferrer\">find()</a> overload - great suggestion!  Personally, I have no problem using C functions &quot;just because they&#39;re &#39;C&#39;&quot;, but that&#39;s a matter of taste and opinion.  A taste C++ bigots would have a very hard time with ;)"}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 1, "last_activity_date": 1537993048, "creation_date": 1537993048, "answer_id": 52525478, "question_id": 52525264, "link": "https://stackoverflow.com/questions/52525264/how-can-i-speed-up-parsing-of-large-strings/52525478#52525478", "title": "How can I speed up parsing of large strings?", "body": "<ol>\n<li><p>You're reading your data into a string.  \"Length of string\" should not be a problem. So far, so good...</p></li>\n<li><p>You're using \"string.find().\".  That's not necessarily a <em>bad</em> choice.</p></li>\n<li><p>You're using \"string.erase()\".  That's probably the main source of your problem.</p></li>\n</ol>\n\n<p>SUGGESTIONS:</p>\n\n<ul>\n<li><p>Treat the original string as \"read-only\".  Don't call erase(), don't modify it.</p></li>\n<li><p>Personally, I'd consider reading your text into a C string (a text buffer), then parsing the text buffer, using <a href=\"https://linux.die.net/man/3/strstr\" rel=\"nofollow noreferrer\">strstr()</a>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1537996383, "creation_date": 1537996383, "answer_id": 52526096, "question_id": 52525264, "link": "https://stackoverflow.com/questions/52525264/how-can-i-speed-up-parsing-of-large-strings/52526096#52526096", "title": "How can I speed up parsing of large strings?", "body": "<p>Here is a more efficient version of <code>ExtractStringBetweenDelimiters</code>. Note that this version does not mutate the original buffer. You would perform subsequent queries on the returned string.</p>\n\n<pre><code>std::string trim(std::string buffer, char what)\n{\n    auto not_what = [&amp;what](char ch)\n    {\n        return ch != what;\n    };\n    auto first = std::find_if(buffer.begin(), buffer.end(), not_what);\n    auto last = std::find_if(buffer.rbegin(), std::make_reverse_iterator(first), not_what).base();\n    return std::string(first, last);\n}\n\n    std::string ExtractStringBetweenDelimiters(\n        std::string const&amp; buffer,\n        const char opening_delimiter,\n        const char closing_delimiter)\n    {\n        std::string result;\n\n        auto first = std::find(buffer.begin(), buffer.end(), opening_delimiter);\n        if (first != buffer.end())\n        {\n            auto last = std::find(buffer.rbegin(), std::make_reverse_iterator(first),\n                                         closing_delimiter).base();\n            if(last &gt; first)\n            {\n                result.assign(first + 1, last);\n                result = trim(std::move(result), '\\n');\n            }\n        }\n        return result;\n    }\n</code></pre>\n\n<p>If you have access to <code>string_view</code> (c++17 for std::string_view or boost::string_view) you could return one of these from both functions for extra efficiency.</p>\n\n<p>It's worth mentioning that this method of parsing a structured file is going to cause you problems down the line if any of the serialised strings contains a delimiter, such as a '{'. </p>\n\n<p>In the end you'll want to write or use someone else's parser. </p>\n\n<p>The <code>boost::spirit</code> library is a little complicated to learn, but creates very efficient parsers for this kind of thing.</p>\n"}], "owner": {"reputation": 301, "user_id": 8825121, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/64b07523f29bb03455569640c4146f52?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/8825121/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1537996383, "creation_date": 1537992088, "question_id": 52525264, "link": "https://stackoverflow.com/questions/52525264/how-can-i-speed-up-parsing-of-large-strings", "title": "How can I speed up parsing of large strings?", "body": "<p>So I've made a program that reads in various config files. Some of these config files can be small, some can be semi-large (largest one is 3,844 KB).</p>\n\n<p>The read in file is stored in a string (in the program below it's called sample).</p>\n\n<p>I then have the program extract information from the string based on various formatting rules. This works well, the only issue is that when reading larger files it is very slow....</p>\n\n<p>I was wondering if there was anything I could do to speed up the parsing or if there was an existing library that does what I need (extract string up until a delimiter &amp; extract string string in between 2 delimiters on the same level). Any assistance would be great.</p>\n\n<p>Here's my code &amp; a sample of how it should work...</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::string ExtractStringUntilDelimiter(\n   std::string&amp; original_string,\n   const std::string&amp; delimiter,\n   const int delimiters_to_skip = 1)\n{\n   std::string needle = \"\";\n\n   if (original_string.find(delimiter) != std::string::npos)\n   {\n      int total_found = 0;\n\n      auto occurance_index = static_cast&lt;size_t&gt;(-1);\n\n      while (total_found != delimiters_to_skip)\n      {\n         occurance_index = original_string.find(delimiter);\n         if (occurance_index != std::string::npos)\n         {\n            needle = original_string.substr(0, occurance_index);\n            total_found++;\n         }\n         else\n         {\n            break;\n         }\n      }\n\n      // Remove the found string from the original string...\n      original_string.erase(0, occurance_index + 1);\n   }\n   else\n   {\n      needle = original_string;\n      original_string.clear();\n   }\n\n   if (!needle.empty() &amp;&amp; needle[0] == '\\\"')\n   {\n      needle = needle.substr(1);\n   }\n   if (!needle.empty() &amp;&amp; needle[needle.length() - 1] == '\\\"')\n   {\n      needle.pop_back();\n   }\n\n   return needle;\n}\n\nvoid ExtractInitialDelimiter(\n   std::string&amp; original_string,\n   const char delimiter)\n{\n   // Remove extra new line characters\n   while (!original_string.empty() &amp;&amp; original_string[0] == delimiter)\n   {\n      original_string.erase(0, 1);\n   }\n}\n\nvoid ExtractInitialAndFinalDelimiters(\n   std::string&amp; original_string,\n   const char delimiter)\n{\n   ExtractInitialDelimiter(original_string, delimiter);\n\n   while (!original_string.empty() &amp;&amp; original_string[original_string.size() - 1] == delimiter)\n   {\n      original_string.erase(original_string.size() - 1, 1);\n   }\n}\n\nstd::string ExtractStringBetweenDelimiters(\n   std::string&amp; original_string,\n   const std::string&amp; opening_delimiter,\n   const std::string&amp; closing_delimiter)\n{\n   const size_t first_delimiter = original_string.find(opening_delimiter);\n   if (first_delimiter != std::string::npos)\n   {\n      int total_open = 1;\n      const size_t opening_index = first_delimiter + opening_delimiter.size();\n\n      for (size_t i = opening_index; i &lt; original_string.size(); i++)\n      {\n         // Check if we have room for opening_delimiter...\n         if (i + opening_delimiter.size() &lt;= original_string.size())\n         {\n            for (size_t j = 0; j &lt; opening_delimiter.size(); j++)\n            {\n               if (original_string[i + j] != opening_delimiter[j])\n               {\n                  break;\n               }\n               else if (j == opening_delimiter.size() - 1)\n               {\n                  total_open++;\n               }\n            }\n         }\n\n\n         // Check if we have room for closing_delimiter...\n         if (i + closing_delimiter.size() &lt;= original_string.size())\n         {\n            for (size_t j = 0; j &lt; closing_delimiter.size(); j++)\n            {\n               if (original_string[i + j] != closing_delimiter[j])\n               {\n                  break;\n               }\n               else if (j == closing_delimiter.size() - 1)\n               {\n                  total_open--;\n               }\n            }\n         }\n\n\n         if (total_open == 0)\n         {\n            // Extract result, and return it...\n            std::string needle = original_string.substr(opening_index, i - opening_index);\n            original_string.erase(first_delimiter, i + closing_delimiter.size());\n\n            // Remove new line symbols\n            ExtractInitialAndFinalDelimiters(needle, '\\n');\n            ExtractInitialAndFinalDelimiters(original_string, '\\n');\n\n            return needle;\n         }\n      }\n   }\n\n   return \"\";\n}\n\nint main()\n{\n   std::string sample = \"{\\n\"\n      \"Line1\\n\"\n      \"Line2\\n\"\n      \"{\\n\"\n         \"SubLine1\\n\"\n         \"SubLine2\\n\"\n      \"}\\n\"\n   \"}\";\n\n   std::string result = ExtractStringBetweenDelimiters(sample, \"{\", \"}\");\n   std::string LineOne = ExtractStringUntilDelimiter(result, \"\\n\");\n   std::string LineTwo = ExtractStringUntilDelimiter(result, \"\\n\");\n\n   std::string SerializedVector = ExtractStringBetweenDelimiters(result, \"{\", \"}\");\n   std::string SubLineOne = ExtractStringUntilDelimiter(SerializedVector, \"\\n\");\n   std::string SubLineTwo = ExtractStringUntilDelimiter(SerializedVector, \"\\n\");\n\n   // Just for testing...\n   printf(\"LineOne: %s\\n\", LineOne.c_str());\n   printf(\"LineTwo: %s\\n\", LineTwo.c_str());\n   printf(\"\\tSubLineOne: %s\\n\", SubLineOne.c_str());\n   printf(\"\\tSubLineTwo: %s\\n\", SubLineTwo.c_str());\n   system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda", "fft", "fftw", "cufft"], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 5305415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207692192173718/picture?type=large", "display_name": "Dmitry Shurov", "link": "https://stackoverflow.com/users/5305415/dmitry-shurov"}, "edited": false, "score": 0, "creation_date": 1537993041, "post_id": 52525273, "comment_id": 91990703, "body": "Thanks, having different compilation units seems to be a pretty good solution! I looked into both headers and they only declare functions, can&#39;t find anything special there. All the definitions are kept in the dynamic libraries so it seems that I can&#39;t even change the names of the functions declared in the headers. Probably I could build my own version of FFTW from the source code and change the names of the functions but it does not seem to be an elegant solution..."}, {"owner": {"reputation": 422, "user_id": 5305415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207692192173718/picture?type=large", "display_name": "Dmitry Shurov", "link": "https://stackoverflow.com/users/5305415/dmitry-shurov"}, "edited": false, "score": 1, "creation_date": 1537994029, "post_id": 52525273, "comment_id": 91991129, "body": "Just want to confirm that it really works:) Fast and easy, thank you for the answer!"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 4, "last_activity_date": 1537992143, "creation_date": 1537992143, "answer_id": 52525273, "question_id": 52525199, "link": "https://stackoverflow.com/questions/52525199/is-there-a-way-to-use-both-fftw-and-cufftw-in-one-c-program/52525273#52525273", "title": "Is there a way to use both FFTW and cuFFTW in one C++ program?", "body": "<p>Even without looking at the library headers: Yes.</p>\n\n<p>A simplistic solution would be having different compilation units each include just one of the libraries, and only exposing your own custom functions/classes/etc. to the rest of the application. This way the two libraries' headers will not interfere with each other.</p>\n\n<p>However, it's quite possible that there's a better solution. I would look at <code>cufftw.h</code> to see what exactly nVIDIA is doing in there and how exactly it \"replaces\" CPU functions.</p>\n"}], "owner": {"reputation": 422, "user_id": 5305415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207692192173718/picture?type=large", "display_name": "Dmitry Shurov", "link": "https://stackoverflow.com/users/5305415/dmitry-shurov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 52525273, "answer_count": 1, "score": 0, "last_activity_date": 1537992230, "creation_date": 1537991787, "last_edit_date": 1537992230, "question_id": 52525199, "link": "https://stackoverflow.com/questions/52525199/is-there-a-way-to-use-both-fftw-and-cufftw-in-one-c-program", "title": "Is there a way to use both FFTW and cuFFTW in one C++ program?", "body": "<p>I'm writing a piece of code that uses FFTW3 library and wish to port it to GPU using CUDA. The easiest way to do this is to use cuFFTW compatibility library, but, as the documentation states, it's meant to completely replace the CPU version of FFTW with its GPU equivalent. After adding <code>cufftw.h</code> header it replaces all the CPU functions and the code runs on GPU.</p>\n\n<p>But is there a way to have <strong>both</strong> CPU and GPU versions of FFTW in my code so I can switch between them during runtime, e.g. via a checkbox in a user interface? Or is the only way to to this is to use native cuFFT API?</p>\n"}, {"tags": ["c++", "type-erasure"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1537992542, "post_id": 52525173, "comment_id": 91990468, "body": "It&#39;s not clear what you mean here. Do you want to have <code>object_t::draw</code> return different values based on what parameter it is given? Do you want every <code>T</code> given to an <code>object_t</code> to be able to take <i>any</i> <code>ArgType</code>, or do you want each <code>T</code> to be able to map a specific <code>ArgType</code> to a specific <code>RType</code>? If the latter is the case, do you want <code>object_t</code> to be a template on <code>ArgType</code>, or do you expect <code>object_t::draw</code> to force the contained object to be able to take any <code>ArgType</code>?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1537992595, "post_id": 52525173, "comment_id": 91990490, "body": "You can&#39;t without using (ii), or using the flexibility offered by the covariant return type rule."}, {"owner": {"reputation": 41, "user_id": 8313373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcs2J.jpg?s=128&g=1", "display_name": "Ricardo Perl", "link": "https://stackoverflow.com/users/8313373/ricardo-perl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537999870, "post_id": 52525173, "comment_id": 91993129, "body": "@Fran&#231;oisAndrieux Sorry this was not clear to me. For now, any version would be fine."}, {"owner": {"reputation": 41, "user_id": 8313373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcs2J.jpg?s=128&g=1", "display_name": "Ricardo Perl", "link": "https://stackoverflow.com/users/8313373/ricardo-perl"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1538000334, "post_id": 52525173, "comment_id": 91993265, "body": "@NicolBolas I edit the question. I hope the issue is now clear."}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 0, "last_activity_date": 1538528136, "creation_date": 1538528136, "answer_id": 52618271, "question_id": 52525173, "link": "https://stackoverflow.com/questions/52525173/how-to-allow-custom-return-types-of-member-functions-for-type-erasure-in-c/52618271#52618271", "title": "How to allow custom return types of member functions for type erasure in C++?", "body": "<p>Certainly any one overload of <code>object_t::foo</code> must have a single return type, and for good reason: if a client could receive an object of a type that only exists in some other translation unit that creates an <code>object_t</code>, how could the compiler possibly generate code to handle that?  If there were some type into which all the various return types could be converted, you could use that as the outer return type, but that\u2019s surely too limiting.</p>\n\n<p>You could, of course, provide a <code>foo</code> function <em>template</em> that at least <em>accepted</em> any type, but how would you implement it?  Function templates cannot be <code>virtual</code>, for the similar reason that the size of the (typical) vtable could not be known from any one translation unit.  You can route each of several known types to its own virtual function, but the list of such functions must be known in advance; alternatively, you can again rely on converting any argument to some known type, but the client of the template could just do that themselves.</p>\n\n<p>The only other choice is to define an <em>interface</em> for the argument and return value to provide and write all implementation classes and client code against it.  That is of course how many scripting languages work: in essence, each built-in function in CPython has the signature</p>\n\n<pre><code>PyObject* func(PyObject*);\n</code></pre>\n\n<p>and thus even a stateful C++-accessible manipulator of arbitrary Python data could be stored in a <code>std::function&lt;PyObject*(PyObject*)&gt;</code> without defining your own type-erased class.</p>\n"}], "owner": {"reputation": 41, "user_id": 8313373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcs2J.jpg?s=128&g=1", "display_name": "Ricardo Perl", "link": "https://stackoverflow.com/users/8313373/ricardo-perl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1538528136, "creation_date": 1537991660, "last_edit_date": 1538000279, "question_id": 52525173, "link": "https://stackoverflow.com/questions/52525173/how-to-allow-custom-return-types-of-member-functions-for-type-erasure-in-c", "title": "How to allow custom return types of member functions for type erasure in C++?", "body": "<p>Over the last years, <b>type erasure</b> or <b>concept-based runtime polymorphism</b> became quite popular, see e.g. the talks by <b>Sean Parent</b> <a href=\"https://www.youtube.com/watch?v=QGcVXgEVMJg\" rel=\"nofollow noreferrer\">Better Code: Runtime Polymorphism</a>, <a href=\"https://www.youtube.com/watch?v=bIhUE5uUFOA\" rel=\"nofollow noreferrer\">Inheritance Is The Base Class of Evil</a> or <a href=\"https://www.youtube.com/watch?v=W2tWOdzgXHA\" rel=\"nofollow noreferrer\">C++ Seasoning</a> resp. the implementations by <a href=\"http://stlab.adobe.com/group__poly__related.html\" rel=\"nofollow noreferrer\">Adobe</a>, <a href=\"https://github.com/facebook/folly/blob/master/folly/docs/Poly.md\" rel=\"nofollow noreferrer\">Facebook</a>, <a href=\"https://www.boost.org/doc/libs/1_55_0/doc/html/boost_typeerasure.html\" rel=\"nofollow noreferrer\">Boost.TypeErasure</a>, <a href=\"https://github.com/boost-experimental/te\" rel=\"nofollow noreferrer\">Boost.te</a> or <a href=\"https://github.com/ldionne/dyno\" rel=\"nofollow noreferrer\">dyno</a>. </p>\n\n<p>Here is an example from Sean Parent's talk:</p>\n\n<pre><code>class object_t {\n    struct concept_t {\n        virtual ~concept_t() = default;\n        virtual void draw_(ostream&amp;, size_t) const = 0;\n    };\n    template &lt;typename T&gt;\n    struct model final : concept_t {\n        model(T x) : data_(move(x)) { }\n        void draw_(ostream&amp; out, size_t position) const override \n        { draw(data_, out, position); }\n        T data_;\n    };\n    shared_ptr&lt;const concept_t&gt; self_;\npublic:\n    template &lt;typename T&gt;\n    object_t(T x) : self_(make_shared&lt;model&lt;T&gt;&gt;(move(x))){ }\n    friend void draw(const object_t&amp; x, ostream&amp; out, size_t position)\n    { x.self_-&gt;draw_(out, position); }    \n};\n</code></pre>\n\n<p>In the example above any class <code>T</code> has to provide a function</p>\n\n<pre><code>void draw(T data, std::ostream out, size_t position);\n</code></pre>\n\n<p>which is simple to achieve for any <code>T</code> since the return type is <code>void</code> and the arguments signatures are all known a compile time. Same would be true, if the return type would by int, double, std::string etc.</p>\n\n<p>Here is the actual question: <b>How to do this for a custom return type <code>RType</code> resp. argument type <code>ArgType</code>?</b></p>\n\n<pre><code>class object_t {\n    struct concept_t {\n        virtual ~concept_t() = default;\n        virtual void draw_(ostream&amp;, size_t) const = 0;\n        virtual RType foo (ArgType arg) const = 0; // new function\n    };\n    template &lt;typename T&gt;\n    struct model final : concept_t {\n        model(T x) : data_(move(x)) { }\n        void draw_(ostream&amp; out, size_t position) const override \n        { draw(data_, out, position); }\n        RType foo (ArgType arg) const override \n        { return data_.foo(arg);}; // new function\n        T data_;\n    };\n    shared_ptr&lt;const concept_t&gt; self_;\npublic:\n    template &lt;typename T&gt;\n    object_t(T x) : self_(make_shared&lt;model&lt;T&gt;&gt;(move(x))){ }\n    friend void draw(const object_t&amp; x, ostream&amp; out, size_t position)\n    { x.self_-&gt;draw_(out, position); }    \n    RType foo (ArgType arg) const \n    { return self_-&gt;foo(arg);}; // new function\n};\n</code></pre>\n\n<p>(i) If <code>RType</code> or <code>ArgType</code> would be an explicit type, i.e. there exists a type <code>class MyClass{};</code> we could define <code>using RType = MyClass;</code> or <code>using ArgType = MyClass</code> and everything is fine.</p>\n\n<p>(ii) If <code>RType</code> or <code>ArgType</code> would be a concept-based polymorphic type such as <code>object_t</code> it is also fine. <i>But this would mean that the codebase would be full of interface classes such as <code>object_t</code>. Don't get me wrong this would be a fair price to pay, but it will take some time to get used to it and structure a codebase to do so.</i></p>\n\n<p><b>Now the problematic part: Can I make the example work if I have something like this <code>using RType = typename T::RType</code> or <code>using ArgType = typename T::ArgType</code> for a class <code>T</code>??? </b></p>\n\n<p>I.e.</p>\n\n<pre><code>class T {\npublic:\n    using ArgType = /*...*/;\n    using RType = /*...*/;\n/*...*/\n}; \n</code></pre>\n\n<p><b> Edit: </b></p>\n\n<p>The final goal is to have two classes</p>\n\n<pre><code>class MyClass {\n    using ArgType = /* e.g. int*/; \n    using RType = /* e.g. double*/;\n    RType foo (ArgType arg) const {/*...*/;}\n};\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class YourClass {\n    using ArgType = /* e.g. size_t*/; \n    using RType = /* e.g. float*/;\n    RType foo (ArgType arg) const {/*...*/;}\n};\n</code></pre>\n\n<p>such that we can use both with <code>object_t</code>, i.e.</p>\n\n<pre><code>object_t myObj(MyClass(/*...*/));\nobject_t yourObj(YourClass(/*...*/));\n// use provided functionality\n// ... myObj.foo(...)\n// ... yourObj.foo(...)\n</code></pre>\n"}, {"tags": ["c++", "iostream", "stringstream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537991339, "post_id": 52525076, "comment_id": 91989901, "body": "Do you know how <code>std::string</code>/<code>std::vector</code> work?  Same thing here since a <code>stringstream</code> is implemented via a <code>std::string</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1537991348, "post_id": 52525076, "comment_id": 91989907, "body": "Why wouldn&#39;t a <code>stringstream</code> maintain a <code>std::string</code> under the hood? It already contains the code to reallocate when it needs to."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1537991387, "post_id": 52525076, "comment_id": 91989931, "body": "Streams maintain a streambuf. Stringstreams maintain a <a href=\"https://en.cppreference.com/w/cpp/io/basic_stringbuf\" rel=\"nofollow noreferrer\">stringbuf</a>. &quot;Typical implementations of std::basic_stringbuf hold an object of type std::basic_string or equivalent resizeable sequence container directly as a data member ...&quot;"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1537991444, "post_id": 52525076, "comment_id": 91989956, "body": "<code>std::basic_stringstring</code> uses a <code>std::basic_stringbuf</code> as its internal buffer. <code>std::stringbuf</code> uses a <code>std::string</code> for the character sequence."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537991526, "post_id": 52525076, "comment_id": 91989995, "body": "FWIW, If you want a string with all the spaces removed you can just do <code>dataset.erase(std::remove(dataset.begin(), dataset.end(), &#39; &#39;), dataset.end());</code>"}, {"owner": {"reputation": 579, "user_id": 7096651, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-kukJg6_RD_A/AAAAAAAAAAI/AAAAAAAAAXM/WZnOuABNBkg/photo.jpg?sz=128", "display_name": "Parker Queen", "link": "https://stackoverflow.com/users/7096651/parker-queen"}, "edited": false, "score": 0, "creation_date": 1537991526, "post_id": 52525076, "comment_id": 91989996, "body": "So in essence, using a stringstream is no better than using the 2nd method I pasted and possibly worse, since if the stream hits the size, it resizes and copies the data to a possibly new data structure. While the 2nd method just shrinks it once and copies the required data?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537991572, "post_id": 52525076, "comment_id": 91990019, "body": "Yeah, a stringstream is total overkill here and wont give you any benefit."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1537991627, "post_id": 52525076, "comment_id": 91990053, "body": "<code>std::stringstream</code> is all kinds of inefficient. They are nice to use when speed is not a factor though."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1537992157, "post_id": 52525076, "comment_id": 91990266, "body": "@ParkerQueen The main benefit of <code>stringstream</code> is when you want more complex formatting, you can use all the special values that work with <code>&lt;&lt;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1537992238, "post_id": 52525076, "comment_id": 91990306, "body": "And of course, it&#39;s useful when you have generic output code, and you simply want to redirect it to a string."}], "owner": {"reputation": 579, "user_id": 7096651, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh5.googleusercontent.com/-kukJg6_RD_A/AAAAAAAAAAI/AAAAAAAAAXM/WZnOuABNBkg/photo.jpg?sz=128", "display_name": "Parker Queen", "link": "https://stackoverflow.com/users/7096651/parker-queen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "closed_date": 1537991468, "answer_count": 0, "score": 1, "last_activity_date": 1537991193, "creation_date": 1537991193, "question_id": 52525076, "link": "https://stackoverflow.com/questions/52525076/how-does-c-maintain-streams-under-the-hood", "closed_reason": "Duplicate", "title": "How does C++ maintain streams under the hood?", "body": "<p>I am working on a program where I tried to use stringstream and became a little confused about how actually streams work under the hood.</p>\n\n<p>Consider this for example:</p>\n\n<pre><code>    char * dataset = new char[3000];\n    stringstream buff;\n    for (unsigned int i = 0; i &lt; 3000; ++i)\n        if (dataset[i] != 32)\n            buff.put(dataset[i]);\n    delete[] dataset;\n    string temp = buff.str();\n</code></pre>\n\n<p>Another way of doing this would be:</p>\n\n<pre><code>    char * dataset = new char[3000];\n\n    //Count the number of spaces\n    unsigned int unwanted = 0;\n    for (unsigned int i = 0; i &lt; 3000; ++i)\n        if (dataset[i] == 32)\n            ++unwanted;\n\n    //Copy all characters other than spaces\n    char * temp = new char[3000 - unwanted];\n    for (unsigned int i = 0, j = 0; i &lt; 3000 - unwanted; ++j)\n        if (dataset[j] != 32)\n            temp[i++] = dataset[j];\n    delete[] dataset;\n    dataset = temp;\n</code></pre>\n\n<p>Now the confusion here is this:</p>\n\n<p>How can streams keep on accepting the characters and not care about the size? I mean I just keep on putting a character and it keeps on adding to the stream buffer. My intuition also tells me that streams probably don't maintain a string or a similar data structure under the hood that they can expand if they hit the size limit.</p>\n\n<p>So what exactly is driving these streams? I mean what kind of data structure is working under these streams. And do we even have a stream size limit or can we just keep on adding without caring about exceeding the size?</p>\n\n<p>Lastly, from the above two methods, which one would be a better one. I tried profiling both for a 147K characters array and the second one seemed to be better working.</p>\n"}, {"tags": ["c++", "c++11", "iostream"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10420694, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsRGZjyA1eI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmQP_UM1VgUZmphMK7tc5yA-TMKA/mo/photo.jpg?sz=128", "display_name": "Hossam Heroe", "link": "https://stackoverflow.com/users/10420694/hossam-heroe"}, "edited": false, "score": 1, "creation_date": 1537994509, "post_id": 52525354, "comment_id": 91991304, "body": "thanks alot that seemed to be the problem now it&#39;s working just fine :))"}, {"owner": {"reputation": 314, "user_id": 8576366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTEwi.jpg?s=128&g=1", "display_name": "Pablo Oliva", "link": "https://stackoverflow.com/users/8576366/pablo-oliva"}, "edited": false, "score": 0, "creation_date": 1538146189, "post_id": 52525354, "comment_id": 92054214, "body": "Consider upvoting in addition to accepting the answer."}, {"owner": {"reputation": 3, "user_id": 10420694, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsRGZjyA1eI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmQP_UM1VgUZmphMK7tc5yA-TMKA/mo/photo.jpg?sz=128", "display_name": "Hossam Heroe", "link": "https://stackoverflow.com/users/10420694/hossam-heroe"}, "edited": false, "score": 0, "creation_date": 1538154070, "post_id": 52525354, "comment_id": 92058176, "body": "i did but it won&#39;t change the publicly display since i got less than 15 reputations ^^"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 1, "last_activity_date": 1537992504, "creation_date": 1537992504, "answer_id": 52525354, "question_id": 52525064, "link": "https://stackoverflow.com/questions/52525064/ostream-not-printing-the-result-of-adding-two-valarrays-using-operator-overload/52525354#52525354", "title": "ostream not printing the result of adding two valarrays (using operator overloading)", "body": "<p>In <code>operator+</code> definition you are not setting <code>row</code> and <code>col</code> members for <code>ans</code> object so change your code as follows</p>\n\n<pre><code>matrix operator+(matrix mat1, matrix mat2)\n{\n    matrix ans;\n    ans.data.resize(mat1.row*mat1.col);\n    ans.row = mat1.row; // &lt;---\n    ans.col = mat1.col; // &lt;---\n    for(int i=0;i&lt;mat1.row*mat1.col;++i)\n    {\n        ans.data[i]=(mat1.data[i]+mat2.data[i]);\n    }\n    return ans;\n}\n</code></pre>\n\n<p>Without setting these members their values are indeterminate, and probably </p>\n\n<pre><code>for(int i=0;i&lt;mat.col*mat.row;++i)\n</code></pre>\n\n<p>condition <code>i&lt;mat.col*mat.row</code> in <code>operator&lt;&lt;</code> returns false in first iteration, that is why you didn't see any output.</p>\n"}], "owner": {"reputation": 3, "user_id": 10420694, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsRGZjyA1eI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmQP_UM1VgUZmphMK7tc5yA-TMKA/mo/photo.jpg?sz=128", "display_name": "Hossam Heroe", "link": "https://stackoverflow.com/users/10420694/hossam-heroe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 52525354, "answer_count": 1, "score": 0, "last_activity_date": 1537995007, "creation_date": 1537991122, "last_edit_date": 1537995007, "question_id": 52525064, "link": "https://stackoverflow.com/questions/52525064/ostream-not-printing-the-result-of-adding-two-valarrays-using-operator-overload", "title": "ostream not printing the result of adding two valarrays (using operator overloading)", "body": "<p>I am still learning about operator overloading and wanted to add two matrices using valarrays, but when i print their addition nothing happens, so here is the code.</p>\n\n<pre><code>// A structure to store a matrix\nstruct matrix\n{\n    valarray&lt;int&gt; data; //valarray that will simulate matrix\n    int row, col;\n};\n\nmatrix operator+(matrix mat1, matrix mat2);\n\nint main() {\n    int data1 [] = {1, 2, 3, 4, 5, 6, 7, 8};\n    int data2 [] = {13, 233, 3, 4, 5, 6, 7, 8};\n\n    matrix mat1, mat2,ans;\n    createMatrix(4, 2, data1, mat1);\n    createMatrix(4, 2, data2, mat2);\n    cout &lt;&lt; mat1 + mat2;\n    return 0;\n}\n\n//Creating the matrix\nvoid createMatrix(int row, int col, int num[], matrix&amp; mat) {\n    mat.row = row;\n    mat.col = col;\n    mat.data.resize (row * col);\n    for (int i = 0; i &lt; row * col; i++)\n        mat.data [i] = num [i];\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, matrix mat) {\n    for (int i = 0; i &lt; mat.col * mat.row; ++i) {\n        out &lt;&lt; mat.data[i] &lt;&lt; \" \";\n        if ((i + 1) % mat.col == 0)\n            cout &lt;&lt; endl;\n    }\n    return out;\n}\n// Adding them\nmatrix operator+(matrix mat1, matrix mat2) {\n    matrix ans;\n    ans.data.resize(mat1.row * mat1.col);\n    for(int i = 0; i &lt; mat1.row * mat1.col; ++i)\n        ans.data[i] = (mat1.data[i] + mat2.data[i]);\n    return ans;\n}\n</code></pre>\n\n<p>There seem to be no error but when I run this it prints nothing.</p>\n"}, {"tags": ["c++", "string", "vector", "data-structures", "split"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1537988775, "post_id": 52524496, "comment_id": 91988678, "body": "What about simply using <a href=\"https://en.cppreference.com/w/cpp/regex/basic_regex\" rel=\"nofollow noreferrer\"><code>std::regex</code></a>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537989984, "post_id": 52524496, "comment_id": 91989278, "body": "If you knew nothing about regex, but had a little savvy in elementary data structures, you could try a <code>std::stack</code> and knowing when to<code>push</code> and <code>pop</code> could be used, and then there is no need for strtok.  Your attempt using &quot;brute force&quot; parsing is a naive approach."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537990119, "post_id": 52524496, "comment_id": 91989339, "body": "@PaulMcKenzie Sakefully, the OP doesn&#39;t use <code>strtok()</code> in their code at all, or did I miss something?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537990165, "post_id": 52524496, "comment_id": 91989363, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 The OP mentioned <code>strtok</code> in his post."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1538149072, "post_id": 52524496, "comment_id": 92055811, "body": "It&#39;s unclear what you want to do with nested brackets. For example, what would be the result of <code>(a b c) (d [e f] g)</code>?"}, {"owner": {"reputation": 11, "user_id": 9035910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c9d9c6000fab57f36669bb4044b710?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Le", "link": "https://stackoverflow.com/users/9035910/gavin-le"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1538191465, "post_id": 52524496, "comment_id": 92067639, "body": "@JimMischel exactly! My project is tokenize a string. For example, as my string up there, my project will figure out the string inside the round Bracket will be a COMMAND, the string inside of double square bracket will be LINK, and the other will be TEXT. So, when I print out its will be: Command: (a b c) Text: d e f Link: [[g h i]]"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1538197880, "post_id": 52524496, "comment_id": 92068408, "body": "So the strings are always of the form <code>(COMMAND) TEXT [[LINK]]</code>? Can the brackets exist anywhere other than as delimiters? That is, would <code>this [ is a bracket</code> be a valid <code>TEXT</code> string?"}, {"owner": {"reputation": 11, "user_id": 9035910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c9d9c6000fab57f36669bb4044b710?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Le", "link": "https://stackoverflow.com/users/9035910/gavin-le"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1538231878, "post_id": 52524496, "comment_id": 92075671, "body": "@JimMischel It will be any form. But the concept will be the same. The COMMAND alway begin with the &#39;( and close with&#39;)&#39;, same as LINK, anything outside of brackets is TEXT. But it will only take the first bracket. For example, if found &#39;(&#39; after, a &#39;[&#39;, will skip that pair of (), go find the next &#39;]&#39;."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1538244224, "post_id": 52524496, "comment_id": 92078813, "body": "I suggest that you write down a formal definition of your rules before you try writing code that will parse your strings. What you&#39;ve supplied so far, and your coding attempt, show that you don&#39;t fully understand the problem you&#39;re trying to solve."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537994426, "post_id": 52525421, "comment_id": 91991277, "body": "This is a good effort, however when answers get posted, a little background on how the solution works (a rundown on the algorithm, links to further reading, etc.) is better than just posting the code."}], "tags": [], "owner": {"reputation": 118, "user_id": 9894471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a000s.png?s=128&g=1", "display_name": "mostsignificant", "link": "https://stackoverflow.com/users/9894471/mostsignificant"}, "is_accepted": false, "score": 1, "last_activity_date": 1537992810, "creation_date": 1537992810, "answer_id": 52525421, "question_id": 52524496, "link": "https://stackoverflow.com/questions/52524496/how-to-split-string-by-multiple-bracket-types-but-still-keep-the-brackets-in-c/52525421#52525421", "title": "How to split string by multiple bracket types but still keep the brackets in C++?", "body": "<p>This is a possible solution with a stack for parsing and throwing a parsing_error if there are opening brackets missing closing brackets or the closing bracket mismatches the opening one. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stack&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nconst auto Brackets = { std::make_pair('(', ')'), std::make_pair('[', ']') };\n\nconst auto is_opening_bracket = [](const char c) {\n    return std::find_if(Brackets.begin(), Brackets.end(),\n            [c](const auto&amp; p) { return p.first == c; } ) != Brackets.end();\n};\nconst auto is_closing_bracket = [](const char c) {\n    return std::find_if(Brackets.begin(), Brackets.end(),\n            [c](const auto&amp; p) { return p.second == c; } ) != Brackets.end();\n};\n\nconst auto get_opening_bracket = [](const char c) {\n    const auto p = std::find_if(Brackets.begin(), Brackets.end(), [c](const auto&amp; p) { return p.second == c; });\n    if (p == Brackets.end())\n        return '0';\n\n    return p-&gt;first;\n};\n\nstruct parsing_error {};\n\nint main() {\n    const std::string str = \"(a b c)d e f[[g h i]]\";\n\n    std::stack&lt;char&gt; brackets;\n    std::vector&lt;std::string&gt; tokens;\n    std::string token;\n\n    for (const auto c : str) {\n        if (is_opening_bracket(c)) {\n            if (!token.empty() &amp;&amp; brackets.empty()) {\n                tokens.push_back(token);\n                token.clear();\n            }\n\n            brackets.push(c);\n            token += c;\n        } else if (is_closing_bracket(c)) {\n            if (brackets.top() != get_opening_bracket(c))\n                throw parsing_error();\n\n            brackets.pop();\n            token += c;\n\n            if (brackets.empty()) {\n                tokens.push_back(token);\n                token.clear();\n            }\n        } else {\n            token += c;\n        }\n\n    }\n\n    if (!brackets.empty())\n        throw parsing_error();\n\n    for (const auto&amp; token : tokens)\n        std::cout &lt;&lt; token &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9035910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c9d9c6000fab57f36669bb4044b710?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin Le", "link": "https://stackoverflow.com/users/9035910/gavin-le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537992810, "creation_date": 1537988651, "last_edit_date": 1537990562, "question_id": 52524496, "link": "https://stackoverflow.com/questions/52524496/how-to-split-string-by-multiple-bracket-types-but-still-keep-the-brackets-in-c", "title": "How to split string by multiple bracket types but still keep the brackets in C++?", "body": "<p>Is there a way to split a string into small part and store into vector.</p>\n\n<p>For example:</p>\n\n<p>A string: <code>str = \"(a b c) d e f [[g h i]]\"</code>. The output expected is: </p>\n\n<pre><code>(a b c)\nd e f\n[[g h i]]\n</code></pre>\n\n<p>Sample code:</p>\n\n<pre><code>vector&lt;string&gt; token;\nstring str = \"(a b c)d e f[[g h i]]\";\nstring bracketS = \"()[]\";\nistringstream ss(str);\nstring section;\nstring tok;\n\nwhile (getline(ss,section)) {\n    size_t start = 0;\n    size_t end = section.find_first_of(bracketS);\n    while (end != string::npos) {\n        tok = section.substr(start, end - start);\n        token.push_back(tok);\n        start = end + 1;\n        end = section.find_first_of(bracketS, start);\n    }\n}\n</code></pre>\n\n<p>And output is without the brackets:</p>\n\n<pre><code>      a b c\n      d e f\n      g h i \n</code></pre>\n\n<p>Tried to adjust my <code>section.substr(start-1, end - start+2)</code>\nThen my output is:</p>\n\n<pre><code>(a b c)\n) d e f [\n[g h i]\n</code></pre>\n\n<p>Why the middle vector is wrong.</p>\n\n<p>Also tried do strtok. But the output is the same as the first one.</p>\n\n<p>Is there any other way to do it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1537989285, "post_id": 52524481, "comment_id": 91988946, "body": "the method you are calling as an Rvalue is type &#39;void&#39; and will not generate a value to stand on the Rside of the (pre-increment) operator"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537989373, "post_id": 52524481, "comment_id": 91988991, "body": "Recommended reading: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>"}, {"owner": {"reputation": 646, "user_id": 2012725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/31339f862c8a45653f7fceeafa97baed?s=128&d=identicon&r=PG", "display_name": "Yucel_K", "link": "https://stackoverflow.com/users/2012725/yucel-k"}, "edited": false, "score": 0, "creation_date": 1537990174, "post_id": 52524481, "comment_id": 91989368, "body": "haven&#39;t gone through all the code but prefix operator is an rvalue <code>(++t1).display(); cout &lt;&lt; endl;</code> should make that an lvalue"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8707d1e30eec08f2696fc29f92e56794?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Fursenko", "link": "https://stackoverflow.com/users/8454638/oleg-fursenko"}, "edited": false, "score": 1, "creation_date": 1538068805, "post_id": 52540789, "comment_id": 92024130, "body": "Thank you. This solved the problem. As for returning a random object, you are most definitely right here. I thought of it myself. My book hasn&#39;t introduced the concept of pointers yet, so this must be the reason it hasn&#39;t explained how to return self from member functions yet."}], "tags": [], "owner": {"reputation": 73, "user_id": 10425030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/801109f3f391e3195e824b9b997a61a8?s=128&d=identicon&r=PG&f=1", "display_name": "Instant Choco", "link": "https://stackoverflow.com/users/10425030/instant-choco"}, "is_accepted": true, "score": 2, "last_activity_date": 1538063452, "creation_date": 1538063452, "answer_id": 52540789, "question_id": 52524481, "link": "https://stackoverflow.com/questions/52524481/error-expression-must-have-arithmetic-unscoped-enum-or-pointer-type-with-oper/52540789#52540789", "title": "Error: expression must have arithmetic, unscoped enum, or pointer type with operator overload", "body": "<p>You're trying to increment void, which is the return type of display().</p>\n\n<p>This makes clear that ++ is directed at the object.</p>\n\n<pre><code>int main()\n{\n    Time t1(0,0,0);\n    (++t1).display(); cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Also, I am not sure why you're creating a random object for the prefix operator++. Why not return the same object by reference like the fundamental types?</p>\n\n<pre><code>    Time&amp; operator++()\n{\n    this-&gt;secs++;\n    resolve_overflow();\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8454638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8707d1e30eec08f2696fc29f92e56794?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Fursenko", "link": "https://stackoverflow.com/users/8454638/oleg-fursenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 0, "accepted_answer_id": 52540789, "answer_count": 1, "score": -2, "last_activity_date": 1538063452, "creation_date": 1537988566, "question_id": 52524481, "link": "https://stackoverflow.com/questions/52524481/error-expression-must-have-arithmetic-unscoped-enum-or-pointer-type-with-oper", "title": "Error: expression must have arithmetic, unscoped enum, or pointer type with operator overload", "body": "<p>I overload prefix and postfix increment and decrement operators. I am able to call them, and they work just fine in assignment operations and just 'by themselves'.\nHowever, I can't call a member function from objects used with such <em>prefixed</em> operators. Everything works well with postfix notation though.\nThe compiler gives me 2 errors:</p>\n\n<ul>\n<li>expression must have arithmetic, unscoped enum, or pointer type</li>\n<li>'++'/'--' needs l-value</li>\n</ul>\n\n<p>I can't understand why it is so.</p>\n\n<p>Thank you.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std; //I know I shouldn't do this in real projects\nclass Time\n{\npublic:\n    Time() : hrs(0), mins(0), secs(0) {};\n    Time(int m_hrs, int m_mins, int m_secs) : hrs(m_hrs), mins(m_mins), secs(m_secs) {};\n    void display()\n    {\n        cout &lt;&lt; hrs &lt;&lt; ':' &lt;&lt; mins &lt;&lt; ':' &lt;&lt; secs;\n    } const \n    Time operator+(Time time) const\n    {\n        int tmp_hrs = hrs + time.hrs;\n        int tmp_mins = mins + time.mins;\n        int tmp_secs = secs + time.secs;\n        if (tmp_secs &gt;= 60)\n        {\n            tmp_secs -= 60;\n            tmp_mins++;\n        }\n        if (tmp_mins &gt;= 60)\n        {\n            tmp_mins -= 60;\n            tmp_hrs++;\n        }\n        if (tmp_hrs &gt;= 24)\n        {\n            tmp_hrs -= 24;\n        }\n        return { tmp_hrs, tmp_mins, tmp_secs };\n    }\n    Time operator++()\n    {\n        Time tmp(hrs, mins, secs);\n        tmp.secs++;\n        tmp.resolve_overflow();\n        hrs = tmp.hrs;\n        mins = tmp.mins;\n        secs = tmp.secs;\n        return tmp;\n    }\n    Time operator++(int)\n    {\n        Time to_return(hrs, mins, secs);\n        Time tmp(hrs, mins, secs);\n        tmp.secs++;\n        tmp.resolve_overflow();\n        hrs = tmp.hrs;\n        mins = tmp.mins;\n        secs = tmp.secs;\n        return to_return;\n    }\n    Time operator--()\n    {\n        Time tmp(hrs, mins, secs);\n        tmp.secs--;\n        tmp.resolve_underflow();\n        hrs = tmp.hrs;\n        mins = tmp.mins;\n        secs = tmp.secs;\n        return tmp;\n    }\n    Time operator--(int)\n    {\n        Time to_return(hrs, mins, secs);\n        Time tmp(hrs, mins, secs);\n        tmp.secs--;\n        tmp.resolve_underflow();\n        hrs = tmp.hrs;\n        mins = tmp.mins;\n        secs = tmp.secs;\n        return to_return;\n    }\n\nprivate:\n    int hrs;\n    int mins;\n    int secs;\nvoid resolve_overflow()\n{\n    if (secs &gt;= 60)\n    {\n        secs -= 60;\n        mins++;\n    }\n    if (mins &gt;= 60)\n    {\n        mins -= 60;\n        hrs++;\n    }\n    if (hrs &gt;= 24)\n    {\n        hrs -= 24;\n    }\n}\nvoid resolve_underflow()\n{\n    if (secs &lt; 0)\n    {\n        secs = 59;\n        mins--;\n    }\n    if (mins &lt; 0)\n    {\n        mins = 59;\n        hrs--;\n    }\n    if (hrs &lt; 0)\n    {\n        hrs = 23;\n    }\n}\n};\n\n\nint main()\n{\n    Time t1(0,0,0);\n    ++t1.display(); cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "char"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537988806, "post_id": 52524464, "comment_id": 91988698, "body": "Your warning is saying that you are converting a string literal to <code>char*</code>. This is something that isn&#39;t supported in c++ anymore. They should only be assigned to <code>const char*</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537988910, "post_id": 52524464, "comment_id": 91988761, "body": "The easiest solution would be to just make <code>Lib::msg</code> be an <code>std::string</code>."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1537988985, "post_id": 52524464, "comment_id": 91988807, "body": "<code>char* send()</code> you are not returning anything from that method"}, {"owner": {"reputation": 960, "user_id": 2938004, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/738a1943d6e297f81a33d8b712dfdf12?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Jha", "link": "https://stackoverflow.com/users/2938004/sagar-jha"}, "edited": false, "score": 0, "creation_date": 1537989090, "post_id": 52524464, "comment_id": 91988853, "body": "Sorry, changed to <code>void send()</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537989283, "post_id": 52524464, "comment_id": 91988944, "body": "You are given a buffer. You&#39;re going to have to copy data into it at some point to make the buffer useful."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6692857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728ae05bb030f9ab7c34550db3fb7575?s=128&d=identicon&r=PG&f=1", "display_name": "Merlin", "link": "https://stackoverflow.com/users/6692857/merlin"}, "is_accepted": true, "score": 2, "last_activity_date": 1537989443, "creation_date": 1537989443, "answer_id": 52524708, "question_id": 52524464, "link": "https://stackoverflow.com/questions/52524464/write-to-a-c-char-array/52524708#52524708", "title": "Write to a C++ char array", "body": "<p>If you get the <code>char*</code> from a library and you do not have any control over that part you will need to copy some data. That is kind of inevitable, when you get the location in memory dictated by the library. Note that the first method is also a copy, just a manual one.<br>\nI would work with <code>std::string</code> within your end of the code and then copy the memory over to the buffer.<br>\nSo I guess Method 3 is probably the best one, but I really hope the library provides you with the buffer size as well and you should make sure you do not copy too much into it.</p>\n"}], "owner": {"reputation": 960, "user_id": 2938004, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/738a1943d6e297f81a33d8b712dfdf12?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Jha", "link": "https://stackoverflow.com/users/2938004/sagar-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 52524708, "answer_count": 1, "score": -2, "last_activity_date": 1537989443, "creation_date": 1537988484, "last_edit_date": 1537989066, "question_id": 52524464, "link": "https://stackoverflow.com/questions/52524464/write-to-a-c-char-array", "title": "Write to a C++ char array", "body": "<p>I have a library that exports a <code>char*</code> in which I can generate a message and then call send to send the message (over the network). How can I write a very simple message to the exported buffer in the code?</p>\n\n<p>I wrote four different methods to write the message, none of which is ideal:</p>\n\n<pre><code>class Lib {\n  char msg[100];\n\npublic:\n  Lib() {\n    // nullify the buffer\n    msg[0] = 0;\n  }\n\n  char* get_buffer() {\n    return msg;\n  }\n\n  void send() {\n    std::cout &lt;&lt; \"Message is: \" &lt;&lt; msg &lt;&lt; std::endl;\n    // nullify the buffer for the next send\n    msg[0] = 0;\n  }\n\n};\n\nint main () {\n  {\n    Lib lib;\n    char* buf = lib.get_buffer();\n\n    // Method 1 is tedious\n    buf[0] = 'H';\n    buf[1] = 'e';\n    buf[2] = 'l';\n    buf[3] = 'l';\n    buf[4] = 'o';\n    buf[5] = 0;\n\n    lib.send();\n  }\n\n  {\n    Lib lib;\n    char* buf = lib.get_buffer();\n\n    // Method 2 doesn't work\n    buf = \"Hello\";\n\n    lib.send();\n  }\n\n  {\n    Lib lib;\n    char* buf = lib.get_buffer();\n\n    // Method 3 involves a copy\n    string str = \"Hello\";\n    str.copy(buf, str.size());\n\n    lib.send();\n  }\n\n  {\n    Lib lib;\n    char* buf = lib.get_buffer();\n\n    // Method 4 involves a copy\n    char* c_arr = \"Hello\";\n    std::memcpy(buf, c_arr, 6);\n\n    lib.send();\n  }\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Message is: Hello\nMessage is: \nMessage is: Hello\nMessage is: Hello\n</code></pre>\n\n<p>The first method seems tedious to me. The second method doesn't work because <code>buf</code> then points to a fresh location in memory that contains \"Hello\". The third and fourth method involve creation of a temporary memory buffer and memory copy.</p>\n\n<p>I would like something similar to <code>buf = {'H', 'e', 'l', 'l','o'};</code>, but that works only at construction time.</p>\n\n<p>Not to mention that I have one compilation warning each in Method 2 and Method 4 with <code>g++-7.3</code>:</p>\n\n<pre><code>warning: ISO C++ forbids converting a string constant to \u2018char*\u2019 [-Wwrite-strings]\n</code></pre>\n"}, {"tags": ["c++", "encryption", "openssl"], "answers": [{"tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": true, "score": 3, "last_activity_date": 1538024600, "last_edit_date": 1538024600, "creation_date": 1538023926, "answer_id": 52529647, "question_id": 52524418, "link": "https://stackoverflow.com/questions/52524418/openssl-api-with-aes-encryption-with-gcm-galois-counter-mode/52529647#52529647", "title": "OpenSSL API with AES encryption with GCM (Galois Counter Mode)", "body": "<p>This GCM mode of operation is not supported as a cipher to encrypt the private key. With the <code>openssl genpkey</code> tool, version <code>1.0.2n</code>, for generating PKCS#8-formatted private keys, the following command shows that same error message that you encounter:</p>\n\n<pre><code>$ openssl genpkey -algorithm rsa -aes-128-gcm\n..............++++++\n.......++++++\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\nError writing key\n140736195879880:error:0D0A7072:asn1 encoding routines:PKCS5_pbe2_set_iv:error setting cipher params:p5_pbev2.c:131:\n140736195879880:error:2307D00D:PKCS12 routines:PKCS8_encrypt:ASN1 lib:p12_p8e.c:86:\n</code></pre>\n\n<p>Trying the same thing with <code>1.1.1</code> looks a little cleaner, but still no luck:</p>\n\n<pre><code>$openssl genpkey -algorithm rsa -aes-128-gcm\ngenpkey: cipher mode not supported\n</code></pre>\n\n<p>For that version, the code for the <code>genpkey</code> tool at the main program level explicitly tests the provided cipher <a href=\"https://github.com/openssl/openssl/blob/OpenSSL_1_1_1-pre9/apps/genpkey.c#L123\" rel=\"nofollow noreferrer\">here</a> to check for unsupported modes:</p>\n\n<pre><code>        if (EVP_CIPHER_mode(cipher) == EVP_CIPH_GCM_MODE ||\n            EVP_CIPHER_mode(cipher) == EVP_CIPH_CCM_MODE ||\n            EVP_CIPHER_mode(cipher) == EVP_CIPH_XTS_MODE ||\n            EVP_CIPHER_mode(cipher) == EVP_CIPH_OCB_MODE) {\n            BIO_printf(bio_err, \"%s: cipher mode not supported\\n\", prog);\n</code></pre>\n\n<p>Indeed, for verification purposes, this command works for CBC mode of operation:</p>\n\n<pre><code>$ openssl genpkey -algorithm rsa -aes-128-cbc\n.................++++++\n..........................................................++++++\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n-----BEGIN ENCRYPTED PRIVATE KEY-----\nMIICzzBJBgkqhkiG9w0BBQ0wPDAbBgkqhkiG9w0BBQwwDgQI/XYjzz9DQGgCAggA\nMB0GCWCGSAFlAwQBAgQQPCvupCCVI57DabGCXHCBbwSCAoCCHMMWy4IHvsdkABw2\n&lt;truncated&gt;\n</code></pre>\n\n<p>You wrote:</p>\n\n<blockquote>\n  <p>However, if it didn't support GCM mode I would expect to get a compile\n  time error telling me that EVP_aes_256_gcm() is not even defined,\n  rather than a run-time error like this.</p>\n</blockquote>\n\n<p>It is not that it does not support GCM mode in general, but it does not support GCM mode for encryption of the private key when doing PKCS#8. That limitation can not be known at compile time.</p>\n"}, {"comments": [{"owner": {"reputation": 3017, "user_id": 2648551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWyXK.jpg?s=128&g=1", "display_name": "colidyre", "link": "https://stackoverflow.com/users/2648551/colidyre"}, "edited": false, "score": 0, "creation_date": 1583097506, "post_id": 60479609, "comment_id": 106992587, "body": "<i>So what am I doing wrong here?</i> is the question. This does not answer it."}], "tags": [], "owner": {"reputation": 319, "user_id": 12609778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e342bbd0f1b939613c1aef619bcf2596?s=128&d=identicon&r=PG&f=1", "display_name": "dgrandm", "link": "https://stackoverflow.com/users/12609778/dgrandm"}, "is_accepted": false, "score": -1, "last_activity_date": 1583095621, "creation_date": 1583095621, "answer_id": 60479609, "question_id": 52524418, "link": "https://stackoverflow.com/questions/52524418/openssl-api-with-aes-encryption-with-gcm-galois-counter-mode/60479609#60479609", "title": "OpenSSL API with AES encryption with GCM (Galois Counter Mode)", "body": "<p>I suggest trying BoringSSL library, is a fork of OpenSSL branch by Google. Apparently they use AES 265-bit in GCM for encrypting cookies starting Chrome version 80 on Windows (Feb, 2020)</p>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "accepted_answer_id": 52529647, "answer_count": 2, "score": 2, "last_activity_date": 1583095621, "creation_date": 1537988324, "last_edit_date": 1537988775, "question_id": 52524418, "link": "https://stackoverflow.com/questions/52524418/openssl-api-with-aes-encryption-with-gcm-galois-counter-mode", "title": "OpenSSL API with AES encryption with GCM (Galois Counter Mode)", "body": "<p>I'm using the OpenSSL API in C++ to perform basic encryption/decryption of private keys.  I was experimenting with different encryption modes, and for some reason I get an error when using GCM (<a href=\"https://en.wikipedia.org/wiki/Galois/Counter_Mode\" rel=\"nofollow noreferrer\">Galois Counter Mode</a>) encryption with AES.  Other modes, such as CBC, work fine.</p>\n\n<p>The relevant code (edited for clarity) is:</p>\n\n<pre><code>void encrypt_private_key(\n  EVP_PKEY* key_handle,\n  const char* password, \n  std::size_t password_length\n)\n{\n  std::unique_ptr&lt;BIO, decltype(&amp;BIO_free)&gt; bio_ptr(BIO_new(BIO_s_mem()), &amp;BIO_free);\n  if (!bio_ptr) { /* handle error */ }\n\n  const EVP_CIPHER* enc = EVP_aes_256_gcm();\n  int result = PEM_write_bio_PKCS8PrivateKey(\n    bio_ptr.get(), \n    key_handle, \n    enc, \n    const_cast&lt;char*&gt;(password),\n    password_length, \n    nullptr, \n    nullptr\n  );\n\n  if (result != 1) { /* handle error code */ }\n\n  // ... do stuff with encrypted key\n}\n</code></pre>\n\n<p>Here, I get an error code.  When I print the error code using <code>ERR_reason_error_string()</code>, I get the message <code>\"error setting cipher params\"</code></p>\n\n<p>Note that if I change the cipher from <code>EVP_aes_256_gcm()</code> to <code>EVP_aes_256_cbc()</code>, it works fine.</p>\n\n<p>Reading the <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/EVP_des_ede3_cbc.html#GCM-and-OCB-Modes\" rel=\"nofollow noreferrer\">relevant docs</a>, I see that GCM mode can take some extra parameters and tuning using the <code>EVP_CIPHER_CTX_ctrl</code> function.  However, AFAIK this seems to be optional.  I see no documented reason why <code>EVP_aes_256_gcm()</code> shouldn't work normally with no additional parameters being set, apart from what is passed to <code>PEM_write_bio_PKCS8PrivateKey</code>.</p>\n\n<p>So what am I doing wrong here?  </p>\n\n<p>Why do I get an error when trying to use GCM mode with AES encryption?  Could it be OpenSSL simply doesn't implement this?  (I'm using an older version of OpenSSL here - OpenSSL 1.0 - so this could be the issue.  However, if it didn't support GCM mode I would expect to get a compile time error telling me that <code>EVP_aes_256_gcm()</code> is not even defined, rather than a run-time error like this.)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1537986091, "post_id": 52523935, "comment_id": 91987371, "body": "Append <code>.txt</code> to what they type. Although with that said the extension never guarantees content."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537986295, "post_id": 52523935, "comment_id": 91987465, "body": "Do <code>file += &quot;.txt&quot;;</code>"}, {"owner": {"reputation": 21, "user_id": 10420418, "user_type": "registered", "profile_image": "https://graph.facebook.com/2186152108123018/picture?type=large", "display_name": "Rosario Monroy", "link": "https://stackoverflow.com/users/10420418/rosario-monroy"}, "edited": false, "score": 0, "creation_date": 1537986320, "post_id": 52523935, "comment_id": 91987486, "body": "i have tried to add that outfile.open(file.c_str().txt)"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1537986335, "post_id": 52523935, "comment_id": 91987493, "body": "What is your question?  Are you asking what to do when the file name does not end in <code>.txt</code>?  Are you asking how to check if it ends in <code>.txt</code>?  Are you asking how to append <code>.txt</code> to the end of the file name?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 1, "creation_date": 1537986344, "post_id": 52523935, "comment_id": 91987499, "body": "<b><i>i have tried to add that outfile.open(file.c_str().txt)</i></b> That is not the correct way of appending to a string. Append to the string before you try to open. @138 showed you how."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537986409, "post_id": 52523935, "comment_id": 91987538, "body": "@RosarioMonroy <code>file.c_str()</code> returns a const char * type. Which is not a struct/class so you cannot use dot operator on it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537993105, "post_id": 52523935, "comment_id": 91990725, "body": "@RosarioMonroy please don&#39;t change the question after it is answered to a totally different topic. Ask a completely new question instead. Remember that StackOverflow is not a forum. The purpose of your question is to help future readers with the same problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537993491, "post_id": 52523935, "comment_id": 91990884, "body": "Also when you do ask a new question please be more detailed with it than your attempted edit. You will probably have to show some code for that new question."}, {"owner": {"reputation": 21, "user_id": 10420418, "user_type": "registered", "profile_image": "https://graph.facebook.com/2186152108123018/picture?type=large", "display_name": "Rosario Monroy", "link": "https://stackoverflow.com/users/10420418/rosario-monroy"}, "edited": false, "score": 0, "creation_date": 1539209668, "post_id": 52523935, "comment_id": 92423382, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537986711, "post_id": 52524076, "comment_id": 91987704, "body": "One negative to this approach is if the user typed an extension now it will have two however for this example its probably good enough (and the reason why I suggested it in the first place)."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537986818, "post_id": 52524076, "comment_id": 91987751, "body": "I agree. I&#39;m assuming this is for a intro c++ class/project. A real project should <i>ALWAYS</i>  verify any user input."}, {"owner": {"reputation": 21, "user_id": 10420418, "user_type": "registered", "profile_image": "https://graph.facebook.com/2186152108123018/picture?type=large", "display_name": "Rosario Monroy", "link": "https://stackoverflow.com/users/10420418/rosario-monroy"}, "edited": false, "score": 1, "creation_date": 1537986993, "post_id": 52524076, "comment_id": 91987847, "body": "That will do it. Thank you."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 21, "user_id": 10420418, "user_type": "registered", "profile_image": "https://graph.facebook.com/2186152108123018/picture?type=large", "display_name": "Rosario Monroy", "link": "https://stackoverflow.com/users/10420418/rosario-monroy"}, "edited": false, "score": 1, "creation_date": 1537987180, "post_id": 52524076, "comment_id": 91987954, "body": "@RosarioMonroy There are more sophisticated solutions for that problem, e.g. instead of blindly appending <code>.txt</code> as the filename extension, check if it wasn&#39;t like that from the user input already. With the current C++ standard you can simply use a <code>std::string</code> as a parameter for <code>std::fstream::open()</code> function BTW, the usage of <code>.c_str()</code> is obsolete."}], "tags": [], "owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "is_accepted": true, "score": 2, "last_activity_date": 1537987019, "last_edit_date": 1537987019, "creation_date": 1537986587, "answer_id": 52524076, "question_id": 52523935, "link": "https://stackoverflow.com/questions/52523935/asking-user-for-output-filename-in-c/52524076#52524076", "title": "asking user for output filename in C++", "body": "<pre><code>string ext = \".txt\"; //file extension\n\ncout &lt;&lt; \"What name would you like for your output file?\\n\";\ngetline(cin, file);\n//highly recommend checking user input (for extensions, invalid symbols etc..)\nfile += ext; //appends ext to file  \n\noutfile.open(file.c_str());\n</code></pre>\n\n<p>see <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/string/string/</a> for other operations allowed on std::string</p>\n"}], "owner": {"reputation": 21, "user_id": 10420418, "user_type": "registered", "profile_image": "https://graph.facebook.com/2186152108123018/picture?type=large", "display_name": "Rosario Monroy", "link": "https://stackoverflow.com/users/10420418/rosario-monroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 52524076, "answer_count": 1, "score": -2, "last_activity_date": 1539209709, "creation_date": 1537985937, "last_edit_date": 1539209709, "question_id": 52523935, "link": "https://stackoverflow.com/questions/52523935/asking-user-for-output-filename-in-c", "title": "asking user for output filename in C++", "body": "<pre><code>cout &lt;&lt; \"What name would you like fo you output file?\\n\";\ngetline(cin, file);\n\noutfile.open(file.c_str());   \n</code></pre>\n\n<p>This works fine but I need save my file be save as <code>.txt</code> format</p>\n"}, {"tags": ["c++", "lambda", "c++17", "variadic-templates", "generic-lambda"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1537988642, "post_id": 52523816, "comment_id": 91988615, "body": "Anybody can shine some light on the initialization here? Why doesn&#39;t <code>overloads(&#47;* some lambdas *&#47;);</code> work, but <code>overloads{&#47;* some lambdas *&#47;};</code> does? Notice the uniform initialization vs parentheses initialization."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1537996154, "post_id": 52523816, "comment_id": 91991943, "body": "@Fureeish <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">aggregate initialization</a> is available by default (on qualifying classes) and is different from a normal constructor call. Its worth noting that this only works in C++17 since inheritance would disallow aggregate initialization prior to that."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1537996320, "post_id": 52523816, "comment_id": 91991991, "body": "@kmdreko well, the fact that is different is obvious, since I observed that it behaves differently. I appreciate the link, but I would like to know why the normal constructor call doesn&#39;t work. This doesn&#39;t answer the question. Maybe I should ask one, if my research fails"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1538142643, "post_id": 52523816, "comment_id": 92052200, "body": "I&#39;ve improved my answer trying to show another interesting point that I&#39;ve initially missed but Nemo pointed to me in a comment."}, {"owner": {"reputation": 11283, "user_id": 5825294, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Un5fU.png?s=128&g=1", "display_name": "Enlico", "link": "https://stackoverflow.com/users/5825294/enlico"}, "edited": false, "score": 0, "creation_date": 1599154947, "post_id": 52523816, "comment_id": 112693799, "body": "The same code can also be found in <a href=\"https://livebook.manning.com/book/functional-programming-in-c-plus-plus/about-this-book/\" rel=\"nofollow noreferrer\">Functional Programming in C++</a>."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1599933241, "post_id": 52523917, "comment_id": 112931468, "body": "And custom CTAD no longer required in C++20."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 34, "last_activity_date": 1540488121, "last_edit_date": 1540488121, "creation_date": 1537985834, "answer_id": 52523917, "question_id": 52523816, "link": "https://stackoverflow.com/questions/52523816/confusing-templates-in-c17-example-of-stdvisit/52523917#52523917", "title": "Confusing templates in C++17 example of std::visit", "body": "<blockquote>\n  <p>What are the two lines declaring overloaded, just above int main(), mean? </p>\n</blockquote>\n\n<p>The first one</p>\n\n<pre><code>template&lt;class... Ts&gt;\nstruct overloaded : Ts... \n { using Ts::operator()...; };\n</code></pre>\n\n<p>is a classic class/struct declaration/definition/implementation. Valid from C++11 (because use variadic templates).</p>\n\n<p>In this case, <code>overloaded</code> inherits from all template parameters and enables (<code>using</code> row) all inherited <code>operator()</code>. This is an example of <a href=\"https://isocpp.org/blog/tag/crtp/P100\" rel=\"noreferrer\">Variadic CRTP</a>.</p>\n\n<p>Unfortunately the variadic <code>using</code> is available only starting from C++17. </p>\n\n<p>The second one</p>\n\n<pre><code>template&lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;\n</code></pre>\n\n<p>is a \"deduction guide\" (see <a href=\"https://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"noreferrer\">this page</a> for more details) and it's a new C++17 feature.</p>\n\n<p>In your case, the deduction guide says that when you write something as</p>\n\n<pre><code>auto ov = overloaded{ arg1, arg2, arg3, arg4 };\n</code></pre>\n\n<p>or also</p>\n\n<pre><code>overloaded ov{ arg1, args, arg3, arg4 };\n</code></pre>\n\n<p><code>ov</code> becomes an <code>overloaded&lt;decltype(arg1), decltype(arg2), decltype(arg3), decltype(arg4)&gt;</code></p>\n\n<p>This permits you to write something as</p>\n\n<pre><code>overloaded\n{\n    [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; },\n    [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; },\n    [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; },\n}\n</code></pre>\n\n<p>that in C++14 was </p>\n\n<pre><code>auto l1 = [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; };\nauto l2 = [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; };\nauto l3 = [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; }\n\noverloaded&lt;decltype(l1), decltype(l2), decltype(l3)&gt; ov{l1, l2, l3};\n</code></pre>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>As pointed by Nemo (thanks!) in the example code in your question there is another interesting new C++17 feature: the aggregate initialization of base classes.</p>\n\n<p>I mean... when you write</p>\n\n<pre><code>overloaded\n{\n    [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; },\n    [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; },\n    [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; }\n }\n</code></pre>\n\n<p>you're passing three lambda functions to initialize three base classes of <code>overloaded</code>.</p>\n\n<p>Before C++17, you could do this only if you wrote an explicit constructor to do it. Starting from C++17, it works automatically.</p>\n\n<p>At this point, it seems to me that it can be useful to show a simplified full example of your <code>overloaded</code> in C++17 and a corresponding C++14 example.</p>\n\n<p>I propose the following C++17 program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename ... Ts&gt;\nstruct overloaded : public Ts ...\n { using Ts::operator()...; };\n\ntemplate &lt;typename ... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;\n\nint main ()\n{\n    overloaded ov\n    {\n        [](auto arg) { std::cout &lt;&lt; \"generic: \" &lt;&lt; arg &lt;&lt; std::endl; },\n        [](double arg) { std::cout &lt;&lt; \"double: \" &lt;&lt; arg &lt;&lt; std::endl; },\n        [](long arg) { std::cout &lt;&lt; \"long: \" &lt;&lt; arg &lt;&lt; std::endl; }\n    };\n    ov(2.1);\n    ov(3l);\n    ov(\"foo\");      \n }\n</code></pre>\n\n<p>and the best C++14 alternative (following also the bolov's suggestion of a \"make\" function and his recursive <code>overloaded</code> example) that I can imagine.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename ...&gt;\nstruct overloaded;\n\ntemplate &lt;typename T0&gt;\nstruct overloaded&lt;T0&gt; : public T0\n{\n    template &lt;typename U0&gt;\n    overloaded (U0 &amp;&amp; u0) : T0 { std::forward&lt;U0&gt;(u0) }\n    { }\n};\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct overloaded&lt;T0, Ts...&gt; : public T0, public overloaded&lt;Ts ...&gt;\n{\n    using T0::operator();\n    using overloaded&lt;Ts...&gt;::operator();\n\n    template &lt;typename U0, typename ... Us&gt;\n    overloaded (U0 &amp;&amp; u0, Us &amp;&amp; ... us)\n      : T0{std::forward&lt;U0&gt;(u0)}, overloaded&lt;Ts...&gt; { std::forward&lt;Us&gt;(us)... }\n    { }\n };\n\ntemplate &lt;typename ... Ts&gt;\nauto makeOverloaded (Ts &amp;&amp; ... ts)\n{\n    return overloaded&lt;Ts...&gt;{std::forward&lt;Ts&gt;(ts)...};\n}\n\nint main ()\n{\n    auto  ov\n    {\n        makeOverloaded\n        (\n            [](auto arg) { std::cout &lt;&lt; \"generic: \" &lt;&lt; arg &lt;&lt; std::endl; },\n            [](double arg) { std::cout &lt;&lt; \"double: \" &lt;&lt; arg &lt;&lt; std::endl; },\n            [](long arg) { std::cout &lt;&lt; \"long: \" &lt;&lt; arg &lt;&lt; std::endl; }\n        )\n    };\n    ov(2.1);\n    ov(3l);\n    ov(\"foo\");      \n }\n</code></pre>\n\n<p>I suppose that it's matter of opinion, but it seems to me that the C++17 version is a lot simpler and more elegant.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1537987331, "post_id": 52523943, "comment_id": 91988024, "body": "You missed the worst part! <code>using Head::operator(); using Overload&lt;Tail..&gt;::operator();</code>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1537988415, "post_id": 52523943, "comment_id": 91988509, "body": "@Barry clang compiles it without <code>using</code>, so I just assumed it&#39;s something about inheriting one by one that makes that possible. After your comment I double checked and <code>gcc</code> complains about ambiguity, so maybe it&#39;s a clang &quot;feature&quot;. Will correct in answer."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1537988636, "post_id": 52523943, "comment_id": 91988608, "body": "Yeah, alternatively a clang bug :-)"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1537999608, "post_id": 52523943, "comment_id": 91993040, "body": "Right, the &quot;using&quot; lines are necessary in both the OP and this <code>Overload&lt;Head, Tail...&gt;</code> because the rules for class member lookup say that if a member is found declared in multiple different base classes (and they can only be found if not hidden by other ordinary or &quot;using&quot; declarations), then the name lookup is ambiguous, even if all the members are all functions with different signatures."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1538142503, "post_id": 52523943, "comment_id": 92052110, "body": "Nice answer (I&#39;ve partially copied part of it in the last version of my answer) but can be simplified a little the <code>overloaded&lt;F&gt;</code> specialization (the ground case of the recursion): the <code>using F::operator();</code> is superfluous because there isn&#39;t a <code>overloaded&lt;Tail...&gt;</code>, with an <code>operator()</code>, that can interfere."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 21, "last_activity_date": 1537988554, "last_edit_date": 1537988554, "creation_date": 1537985960, "answer_id": 52523943, "question_id": 52523816, "link": "https://stackoverflow.com/questions/52523816/confusing-templates-in-c17-example-of-stdvisit/52523943#52523943", "title": "Confusing templates in C++17 example of std::visit", "body": "<p>Ahh, I love this.</p>\n\n<p>It's a way to concisely declare a struct with a call operator overloaded on the set of the template arguments call operators.</p>\n\n<pre><code>template&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\n</code></pre>\n\n<p><code>overloaded</code> inherits from <code>Ts...</code> and uses all of their <code>operator()</code></p>\n\n<pre><code>template&lt;class... Ts&gt; overloaded(Ts...)-&gt;overloaded&lt;Ts...&gt;;\n</code></pre>\n\n<p>This is a deduction guide so you don't specify the template parameters</p>\n\n<p>The usage is as you see in the example.</p>\n\n<p>It's a nice utility to create an overloaded set of multiple lambdas (and other function types).</p>\n\n<hr>\n\n<p>Previous to C++17 you would have to use recursion to create <code>overload</code>. Not pretty:</p>\n\n<pre><code>template &lt;class... Fs&gt; struct Overload : Fs...\n{\n};\n\ntemplate &lt;class Head, class... Tail&gt;\nstruct Overload&lt;Head, Tail...&gt; : Head, Overload&lt;Tail...&gt;\n{\n    Overload(Head head, Tail... tail)\n        : Head{head}, Overload&lt;Tail...&gt;{tail...}\n    {}\n\n    using Head::operator();\n    using Overload&lt;Tail...&gt;::operator();\n};\n\n\ntemplate &lt;class F&gt; struct Overload&lt;F&gt; : F\n{\n    Overload(F f) : F{f} {}\n\n    using F::operator();\n};\n\n\ntemplate &lt;class... Fs&gt; auto make_overload_set(Fs... fs)\n{\n    return Overload&lt;Fs...&gt;{fs...};\n}\n\nauto test()\n{\n    auto o = make_overload_set(\n         [] (int) { return 24; },\n         [] (char) { return 11; });\n\n    o(2); // returns 24\n    o('a'); // return 11\n}\n</code></pre>\n\n<p>The main nuisance is that <code>Overload</code> because inherits is not an aggregate, so you need to do the recursion trick to create a constructor with all the types. In C++17 <code>overloaded</code> is an aggregate (yey) so constructing one works out of the box :). You also need to specify <code>using::operator()</code> for each of them.</p>\n"}], "owner": {"reputation": 628, "user_id": 6199585, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-IdPVJXFKZrI/AAAAAAAAAAI/AAAAAAAAApE/iIo85sk1fRM/photo.jpg?sz=128", "display_name": "Boris", "link": "https://stackoverflow.com/users/6199585/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2758, "favorite_count": 12, "accepted_answer_id": 52523917, "answer_count": 2, "score": 35, "last_activity_date": 1565725752, "creation_date": 1537985451, "last_edit_date": 1565725752, "question_id": 52523816, "link": "https://stackoverflow.com/questions/52523816/confusing-templates-in-c17-example-of-stdvisit", "title": "Confusing templates in C++17 example of std::visit", "body": "<p>When looking at <code>std::visit()</code> page in cppreference,\n<a href=\"https://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/utility/variant/visit</a>, I encountered the code I can't make sense of... </p>\n\n<p>Here's the abbreviated version:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n#include &lt;variant&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; overloaded(Ts...)-&gt;overloaded&lt;Ts...&gt;;\n\nint main() {\n    std::vector&lt;std::variant&lt;int,long,double,std::string&gt;&gt; vec = { 10, 15l, 1.5, \"hello\" };\n    for (auto&amp; v : vec) {\n        std::visit(overloaded{\n            [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; },\n            [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; },\n            [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; },\n            }, v);\n    }\n}\n</code></pre>\n\n<p>What do the two lines declaring <code>overloaded</code>, just above <code>int main()</code>, mean? </p>\n\n<p>Thank you for explaining!</p>\n\n<p><strong>2019 Addition</strong><br>\nAfter the two gentlemen below provided detailed explanations (thank you so much!), I've stumbled upon the same code in the very fine book <em>C++17 in Detail - \nLearn the Exciting Features of The New C++ Standard!</em> by Bart\u0142omiej Filipek. Such a well written book!</p>\n"}, {"tags": ["c++", "terminal", "visual-studio-code", "sfml"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537985105, "post_id": 52523618, "comment_id": 91986923, "body": "You should note that questions posted here will be seen by a significant number of regular users within seconds. Take more care before hitting the post button next time. Regarding your question: Are you sure you have installed all of these necessary dependencies at your development system?"}, {"owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537985285, "post_id": 52523618, "comment_id": 91987014, "body": "Yeah sorry about that, thanks for the advice. I am using VS code and there is no extension for SFML or anything so I am trying to compile and run this program manually through the terminal."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1537985721, "post_id": 52523618, "comment_id": 91987205, "body": "fyi looks like you are using clang (g++ is probably symlinked to it)"}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "edited": false, "score": 0, "creation_date": 1537986704, "post_id": 52523618, "comment_id": 91987697, "body": "It looks like the last code snippet is completely unnecessary. It is a copy of the previous two."}, {"owner": {"reputation": 68, "user_id": 5393811, "user_type": "registered", "profile_image": "https://graph.facebook.com/1038389976179612/picture?type=large", "display_name": "Jefferson Puchalski", "link": "https://stackoverflow.com/users/5393811/jefferson-puchalski"}, "edited": false, "score": 0, "creation_date": 1537988576, "post_id": 52523618, "comment_id": 91988576, "body": "It&#39;s a linkage error, can be many errors, a nice ways is check if you have all includes or library installed, and check if the flag with -l is realy that. In documentation the flags are  ``` lsfml-graphics -lsfml-window -lsfml-system ``` and if your lib is in non default place you need tell inside -L option"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "edited": false, "score": 0, "creation_date": 1538022369, "post_id": 52524462, "comment_id": 91998082, "body": "thanks for the help, didn&#39;t know you didn&#39;t need file extension :D"}], "tags": [], "owner": {"reputation": 111, "user_id": 6692857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728ae05bb030f9ab7c34550db3fb7575?s=128&d=identicon&r=PG&f=1", "display_name": "Merlin", "link": "https://stackoverflow.com/users/6692857/merlin"}, "is_accepted": true, "score": 0, "last_activity_date": 1538083683, "last_edit_date": 1538083683, "creation_date": 1537988480, "answer_id": 52524462, "question_id": 52523618, "link": "https://stackoverflow.com/questions/52523618/compiling-sfml-with-g-compiler-through-the-terminal/52524462#52524462", "title": "compiling SFML with g++ compiler through the terminal", "body": "<p>Not really too sure and I don't have a Mac, so I cannot really test it, but I think you might be able to just drop the dylib file ending and the lib in front and just use that after -l, like you do with the other ones.</p>\n\n<p>Something along the lines of this:<br>\n<code>g++ -g -I/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/include -L/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/lib -lsfml-graphics -lsfml-window-d -lsfml-system-d virtual_field.cpp -o virtual_field\n</code></p>\n\n<p><strong>Edit</strong></p>\n\n<p>I looked up the section on the man page for <code>ld</code>, which does the actual linking and it says:</p>\n\n<blockquote>\n  <p>-l namespec<br>\n  --library=namespec  </p>\n  \n  <p>Add the archive or object file specified by namespec to the list of files to  link.  This option may be used any number of times.  If\n  namespec is of the form :filename, ld will search the library path for\n  a file called filename, otherwise it will search the library path for\n  a file called libnamespec.a.</p>\n  \n  <p>On systems which support shared libraries, ld may also search for files other than libnamespec.a.  Specifically, on ELF and SunOS\n  systems, ld will search a directory for a library called\n  libnamespec.so before searching for one called libnamespec.a.  (By\n  convention, a \".so\" extension indicates a shared library.)  Note that\n  this behavior does not apply to :filename, which always specifies a\n  file called filename.</p>\n</blockquote>\n\n<p>So you could have used the format <code>-l:libsfml-graphics.2.4.2.dylib</code> it seems. Note that this is from the man page of ld running on a GNU/linux system, so they do not mention dylib, as it seems to be a Mac specific file format.</p>\n"}], "owner": {"reputation": 33, "user_id": 10420298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e59FL.png?s=128&g=1", "display_name": "cjm_", "link": "https://stackoverflow.com/users/10420298/cjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 52524462, "answer_count": 1, "score": -1, "last_activity_date": 1538083683, "creation_date": 1537984649, "last_edit_date": 1537984820, "question_id": 52523618, "link": "https://stackoverflow.com/questions/52523618/compiling-sfml-with-g-compiler-through-the-terminal", "title": "compiling SFML with g++ compiler through the terminal", "body": "<p>here is what I typed in the terminal:</p>\n\n<pre><code>g++ -g -I/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/include -L/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/lib -l libsfml-graphics.2.4.2.dylib -lsfml-window-d -lsfml-system-d virtual_field.cpp -o virtual_field\n</code></pre>\n\n<p>I am having trouble with this because it is telling me that that it cant find the libraries which included.</p>\n\n<pre><code>ld: library not found for -llibsfml-graphics.2.4.2.dylib\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>here is the whole thing if you need more context:</p>\n\n<pre><code>Carloss-MacBook-Pro:src cjm10000$ g++ -g -I/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/include -L/Users/cjm10000/Desktop/7701X/code/include/SFML-2.4.2-osx-clang/lib -l libsfml-graphics.2.4.2.dylib -lsfml-window-d -lsfml-system-d virtual_field.cpp -o virtual_field\nld: library not found for -llibsfml-graphics.2.4.2.dylib\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c++", "templates", "sfinae"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1537984723, "post_id": 52523456, "comment_id": 91986740, "body": "What&#39;s the diffrence between a method and function?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1537984872, "post_id": 52523456, "comment_id": 91986807, "body": "<a href=\"https://www.cprogramming.com/tutorial/template_specialization.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/template_specialization.html</a>"}, {"owner": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1537984938, "post_id": 52523456, "comment_id": 91986837, "body": "Clang doesn&#39;t like <code>template&lt;&gt; size_t recv&lt;size_t&gt;()</code> because <code>error: no function template matches function template specialization &#39;recv&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985370, "post_id": 52523740, "comment_id": 91987055, "body": "Would <code>template&lt;typename T&gt; T recv() {}</code> allow arbitrary types (ones that do not have specialized templates) to work? Ideally it should throw a compile error if I <code>recv&lt;float&gt;()</code>, because I have not supported that datatype."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985522, "post_id": 52523740, "comment_id": 91987117, "body": "Depends On what You want... Why did You add <code>{}</code>?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985548, "post_id": 52523740, "comment_id": 91987128, "body": "And You can specialize for float to throw an exception."}, {"owner": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985585, "post_id": 52523740, "comment_id": 91987140, "body": "Could I disallow that at compile-time?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985603, "post_id": 52523740, "comment_id": 91987150, "body": "How do You mean disallow?"}, {"owner": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 0, "creation_date": 1537985627, "post_id": 52523740, "comment_id": 91987157, "body": "Ideally <code>recv&lt;float&gt;()</code> should throw a compile-error."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "edited": false, "score": 2, "creation_date": 1537985693, "post_id": 52523740, "comment_id": 91987191, "body": "@charmoniumQ yes, make the primary template deleted: <code>template&lt;typename T&gt; T recv() = delete;</code>"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1537985741, "post_id": 52523740, "comment_id": 91987218, "body": "There is no such thing as throwing a compile error. At runtime You throw an exception. At compile time You can use <a href=\"https://en.cppreference.com/w/c/error/static_assert\" rel=\"nofollow noreferrer\">static_assert</a>"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1537985795, "post_id": 52523740, "comment_id": 91987236, "body": "@bolov Should be <code>template&lt;&gt; recv&lt;float&gt;() = delete;</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537985881, "post_id": 52523740, "comment_id": 91987280, "body": "@RobertAndrzejuk No, OP want&#39;s compilation to fail on all types that don&#39;t have their own specialization of <code>recv</code>. <code>float</code> was an example."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537986112, "post_id": 52523740, "comment_id": 91987378, "body": "@RobertAndrzejuk The intention is in <i>&quot;Would <code>template&lt;typename T&gt; T recv() {}</code> allow arbitrary types (ones that do not have specialized templates) to work?&quot;</i> The following <i>&quot; Ideally it should throw a compile error if I <code>recv&lt;float&gt;()</code>&quot;</i> is an example."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1537986725, "post_id": 52523740, "comment_id": 91987707, "body": "Updated answer to reflect the comments."}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1537991118, "last_edit_date": 1537991118, "creation_date": 1537985100, "answer_id": 52523740, "question_id": 52523456, "link": "https://stackoverflow.com/questions/52523456/template-specialize-a-method/52523740#52523740", "title": "Template specialize a method", "body": "<p>If You want to make ONLY specializations, then:</p>\n\n<p>First create the primary definition of the template:</p>\n\n<pre><code>template&lt;typename T&gt;\nT recv();\n</code></pre>\n\n<p>Then only create the specializations:</p>\n\n<pre><code>template&lt;&gt;\nchar recv&lt;char&gt;() {return '\\0';}\n\n// likewise, but for int\ntemplate&lt;&gt;\nint recv&lt;int&gt;() {return 0;}\n</code></pre>\n\n<p>If somebody uses the templates which have a missing specialization then the linker will show an error message about missing functions.</p>\n\n<p>Therefore You have to delete, either specific specializations:</p>\n\n<pre><code>template&lt;&gt; \nfloat recv&lt;float&gt;() = delete;\n</code></pre>\n\n<p>or all other specializations, but then this definition has to replace the primary definition:</p>\n\n<pre><code>template&lt;typename T&gt; \nT recv() = delete;\n</code></pre>\n"}], "owner": {"reputation": 4210, "user_id": 1078199, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bd82fe90f48f98ed74852edf3c7d531?s=128&d=identicon&r=PG", "display_name": "charmoniumQ", "link": "https://stackoverflow.com/users/1078199/charmoniumq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52523740, "answer_count": 1, "score": 2, "last_activity_date": 1537991118, "creation_date": 1537983970, "last_edit_date": 1537985273, "question_id": 52523456, "link": "https://stackoverflow.com/questions/52523456/template-specialize-a-method", "title": "Template specialize a method", "body": "<p>I have a method which is templated, and I want add a specialization. For a function, I would write</p>\n\n<pre><code>template&lt;&gt; T function&lt;typename T&gt;() { /* ... */ }\n</code></pre>\n\n<p>How do I do this for a method?</p>\n\n<p>Here is a minimal failing example where I need to specialize <code>recv</code> for <code>&lt;char&gt;</code>.</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass recver_t {\npublic:\n\n    // recv should work for chars, ints, and lists of those.\n\n    template &lt;typename list_t, typename elem_t&gt;\n    list_t recv() {\n        list_t list;\n        for (int i = 0; i &lt; 10; ++i) {\n            list.push_back(recv&lt;elem_t&gt;());\n        }\n        return list;\n    }\n\n    // How to specify this template?\n    // It needs to be a template taking 1 typename, but specialized for &lt;char&gt;\n    // I need the template spec because I am overloading by return-type.\n    char recv() {return '\\0';}\n\n    // likewise, but for int\n    //int recv() {return 0;}\n};\n\nint main() {\n    recver_t recver;\n    // std::vector&lt;char&gt; result = recver.recv&lt;std::vector, char&gt;();\n    // EDIT: should be this\n    std::vector&lt;char&gt; result = recver.recv&lt;std::vector&lt;char&gt;, char&gt;();\n}\n</code></pre>\n\n<ul>\n<li>I might omit the template-spec and rely on C++'s function overloading, but this won't work because I am overloading by return-type.</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1537983013, "post_id": 52523215, "comment_id": 91985994, "body": "which line causes the error?"}, {"owner": {"reputation": 83, "user_id": 9586877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b431bb06cd505b5454d6fe6d63136e01?s=128&d=identicon&r=PG&f=1", "display_name": "yosemite", "link": "https://stackoverflow.com/users/9586877/yosemite"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1537983078, "post_id": 52523215, "comment_id": 91986028, "body": "arr[list_counter] = ehh.substr(f,i-1-f+1);"}, {"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "edited": false, "score": 1, "creation_date": 1537983079, "post_id": 52523215, "comment_id": 91986029, "body": "&#39;arr&#39; is a string, not an array of strings. arra[list_counter] is likely issue"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1537983091, "post_id": 52523215, "comment_id": 91986036, "body": "<code>string::substr</code>returns a <code>std::string</code> and you are assigning it to a <code>char&amp;</code> through <code>operator[]</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1537983288, "post_id": 52523215, "comment_id": 91986117, "body": "Your missing the <code>#include &lt;string&gt;</code> header."}, {"owner": {"reputation": 83, "user_id": 9586877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b431bb06cd505b5454d6fe6d63136e01?s=128&d=identicon&r=PG&f=1", "display_name": "yosemite", "link": "https://stackoverflow.com/users/9586877/yosemite"}, "edited": false, "score": 0, "creation_date": 1537983330, "post_id": 52523215, "comment_id": 91986135, "body": "Fixed it, Thanks guys!! (the array was just a string)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537983336, "post_id": 52523215, "comment_id": 91986142, "body": "Consider passing the arguments by reference so that a <i>copy</i> is not passed to the function."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1537983374, "post_id": 52523215, "comment_id": 91986162, "body": "Also, you are not returning anything, yet your function says it returns a <code>std::string</code>.  Thus calling this function leads to undefined behavior due to a lack of a return value."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1537983413, "post_id": 52523215, "comment_id": 91986180, "body": "@ThomasMatthews bad advise, function returns a string (actually it misses return statement)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537983447, "post_id": 52523215, "comment_id": 91986194, "body": "You should assign <code>ehh.length()</code> to a constant temporary variable so that you are not calling the <code>length()</code> function every iteration.  The length of <code>ehh</code> is not changing within the loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1537983511, "post_id": 52523215, "comment_id": 91986224, "body": "@Slava, the first statement is <code>ehh+=&quot;.&quot;;</code>, which implies that the original string is being modified (at least that could be one understanding)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537983547, "post_id": 52523215, "comment_id": 91986239, "body": "@ThomasMatthews bad advise again, it is perfectly fine to call <code>std::string::length()</code> in a loop - it has constant complexity."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1537983590, "post_id": 52523215, "comment_id": 91986259, "body": "@ThomasMatthews OP adds &#39;.&#39; to that string so his algo would work with it, he has no intention to return that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1537983656, "post_id": 52523215, "comment_id": 91986288, "body": "&quot;What am I doing wrong?&quot; it is easier to say what you are doing right rather than what you are doing wrong here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1537983875, "post_id": 52523215, "comment_id": 91986371, "body": "@yosemite The best advice I can give is: Learn how to decipher those kind of <i>cryptic</i> error messages, or use a compiler that provides better ones."}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 1, "last_activity_date": 1537983141, "creation_date": 1537983141, "answer_id": 52523269, "question_id": 52523215, "link": "https://stackoverflow.com/questions/52523215/c-code-error-what-am-i-doing-wrong-here/52523269#52523269", "title": "c++ code error. What am i doing wrong here?", "body": "<p>The error appears to occur on the line</p>\n\n<pre><code>arr[list_counter] = ehh.substr(f,i-1-f+1);\n</code></pre>\n\n<p>Here, <code>arr</code> is a string, and so <code>arr[list_counter]</code> is a single character. But you are attempting to assign to it the result of <code>ehh.substr(f,i-1-f+1)</code> which is a string.</p>\n\n<p>I cannot advise you how to fix this because I'm not sure what you are trying to do. Note that there is another issue: you are attempting to assign a value to a parameter which is passed into the function by value. This will not affect the variable's value in the calling function. Most likely you should build up a result in the function and <code>return</code> a value rather than change its parameter's value.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537986242, "post_id": 52523476, "comment_id": 91987441, "body": "Nitpicking, but you could also mention the use of post increment rather than preincrement (doesn&#39;t matter for <code>int</code>s but does matter for some custom types, so one may as well get into the good pre-inc habit . You could also mention that the input strings are passed by value rather than as <code>const&amp;</code> or <code>string_view</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537987411, "post_id": 52523476, "comment_id": 91988059, "body": "@JesperJuhl passing first argument by value in this case is fine as OP modifies it (if it is good modifying it to algo to work is different question). Preincrement   vspost increment would be really nitpicking in this case"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1537986225, "last_edit_date": 1537986225, "creation_date": 1537984057, "answer_id": 52523476, "question_id": 52523215, "link": "https://stackoverflow.com/questions/52523215/c-code-error-what-am-i-doing-wrong-here/52523476#52523476", "title": "c++ code error. What am i doing wrong here?", "body": "<blockquote>\n  <p>What am I doing wrong?</p>\n</blockquote>\n\n<p>Oh well, let's start</p>\n\n<ol>\n<li>Your code is using <code>std::string</code> but you are missing <code>#include &lt;string&gt;</code> directive</li>\n<li>Your function returns <code>std::string</code> but there is no return statement</li>\n<li>You pass parameter <code>arr</code> but do not use it but trying to assign values to it</li>\n<li>You access elements in <code>arr</code> without checking that index is valid</li>\n<li>You are trying to assign <code>std::string</code> to lvalue of type <code>char</code></li>\n<li>This is not error, but you would get warning of comparing <code>signed int i</code> with unsigned value that <code>std::string::length()</code> returns</li>\n</ol>\n\n<p>I hope I did not miss anything</p>\n"}], "owner": {"reputation": 83, "user_id": 9586877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b431bb06cd505b5454d6fe6d63136e01?s=128&d=identicon&r=PG&f=1", "display_name": "yosemite", "link": "https://stackoverflow.com/users/9586877/yosemite"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1537984816, "answer_count": 2, "score": -5, "last_activity_date": 1537986225, "creation_date": 1537982868, "last_edit_date": 1537983787, "question_id": 52523215, "link": "https://stackoverflow.com/questions/52523215/c-code-error-what-am-i-doing-wrong-here", "closed_reason": "Not suitable for this site", "title": "c++ code error. What am i doing wrong here?", "body": "<p>I am new to C++, I'm creating a function that breaks down an ip address and puts the values between \".\" into an array. I get this error: </p>\n\n<pre><code>Assigning to 'std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::value_type' (aka 'char') from incompatible type 'std::__1::basic_string&lt;char&gt;'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>//  main.cpp\n//  Subnet calculator\n\n#include &lt;iostream&gt;\nusing namespace std;\n\nstring ip2arr(string ehh, string arr);\n\nint main(void){\n\n}\n\nstring ip2arr(string ehh, string arr){\n    ehh+=\".\";\n    int list_counter = 0;\n    for (int i = 0, f = 0; i &lt; ehh.length(); i++) {\n        if (ehh[i] == '.') {\n            arr[list_counter] = ehh.substr(f,i-1-f+1);\n            list_counter++;\n            f = i+1;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1537983714, "post_id": 52523078, "comment_id": 91986316, "body": "<code>$(RELEASE)&#47;$$@</code> is a violation of <a href=\"http://make.mad-scientist.net/papers/rules-of-makefiles/#rule2\" rel=\"nofollow noreferrer\">Paul&#39;s 2nd Rule</a>. Other than that, putting library names directly on the command line is what the compiler does internally anyway."}, {"owner": {"reputation": 530, "user_id": 2904770, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fvre9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/2904770/phil"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1537989255, "post_id": 52523078, "comment_id": 91988926, "body": "Thanks I suspected this trickery may be the root of my problem!"}], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 1943799, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rxDHC.jpg?s=128&g=1", "display_name": "spartygw", "link": "https://stackoverflow.com/users/1943799/spartygw"}, "edited": false, "score": 0, "creation_date": 1537983574, "post_id": 52523325, "comment_id": 91986251, "body": "Wow. I&#39;ve been using and writing makefiles for 25 years and even read the O&#39;Reilly book once. This is the first time I think I&#39;ve ever heard of the order-only prereq. Very useful!"}, {"owner": {"reputation": 530, "user_id": 2904770, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fvre9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/2904770/phil"}, "edited": false, "score": 0, "creation_date": 1537999807, "post_id": 52523325, "comment_id": 91993106, "body": "This works exactly as you suggest - thanks.  I had never see this technique in make, it&#39;s in my notebook now.  It&#39;s not the solution I need as I had simply misunderstood how to reference libraries on the linker line that had been built as targets themselves, but it is a useful technique nonetheless."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 2, "last_activity_date": 1537983406, "creation_date": 1537983406, "answer_id": 52523325, "question_id": 52523078, "link": "https://stackoverflow.com/questions/52523078/makefile-creates-two-libraries-one-depends-on-other/52523325#52523325", "title": "Makefile Creates Two Libraries - One Depends On Other", "body": "<blockquote>\n  <p>So my question is how do I introduce the idea of a dependency between two libraries, without polluting the linker line with the value of the dependent library?</p>\n</blockquote>\n\n<p>You can specify an <a href=\"https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html\" rel=\"nofollow noreferrer\">\"order-only prerequisite\"</a> which means that the rule for creating libA.so must complete before creating libB.so:</p>\n\n<pre><code>libB.so : | libA.so\n</code></pre>\n\n<p>The difference from a normal prerequisite is that if libA.so is newer than libB.so then libB.so won't be re-built. When looking at the prerequisites for libB.so Make only cares if libA.so exists, not how old it is.</p>\n\n<p>If that's not useful for you (because you want libB.so to be rebuilt when libA.so changes) then you can just filter it out of the prerequisites by using <code>$(filter-out libA.so,$^)</code></p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 6692857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728ae05bb030f9ab7c34550db3fb7575?s=128&d=identicon&r=PG&f=1", "display_name": "Merlin", "link": "https://stackoverflow.com/users/6692857/merlin"}, "is_accepted": false, "score": 1, "last_activity_date": 1537983778, "creation_date": 1537983778, "answer_id": 52523404, "question_id": 52523078, "link": "https://stackoverflow.com/questions/52523078/makefile-creates-two-libraries-one-depends-on-other/52523404#52523404", "title": "Makefile Creates Two Libraries - One Depends On Other", "body": "<p>You do already get the object files using the <code>source-to-object</code> function. Can you not just use that instead of <code>$$^</code>, or am I missing something here? </p>\n"}, {"tags": [], "owner": {"reputation": 530, "user_id": 2904770, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fvre9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/2904770/phil"}, "is_accepted": true, "score": 0, "last_activity_date": 1538322584, "creation_date": 1538322584, "answer_id": 52579506, "question_id": 52523078, "link": "https://stackoverflow.com/questions/52523078/makefile-creates-two-libraries-one-depends-on-other/52579506#52579506", "title": "Makefile Creates Two Libraries - One Depends On Other", "body": "<p>The problem was my understanding of the linker command, and the moving of the output target as stated by @o11c in the comments under the original question.</p>\n\n<p>Having libA.so on the linker line is fine.</p>\n\n<p>I've added a subsequent cp command to copy the the $@ to $(RELEASE) so that targets are kept where make expects.</p>\n\n<pre><code>$1: $(call source-to-object,$2)\n    $(CXX) $(CXXFLAGS) -shared $$^ -o $$@ $(LDFLAGS) $(LDLIBS)\n    $(CP) $$@ $(RELEASE)\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 2904770, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fvre9.jpg?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/2904770/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "accepted_answer_id": 52579506, "answer_count": 3, "score": 2, "last_activity_date": 1538322623, "creation_date": 1537982367, "last_edit_date": 1538322623, "question_id": 52523078, "link": "https://stackoverflow.com/questions/52523078/makefile-creates-two-libraries-one-depends-on-other", "title": "Makefile Creates Two Libraries - One Depends On Other", "body": "<p>I have a parent C++ Makefile that builds 2 libraries, from two source subdirectories.</p>\n\n<p>Library B depends on Library A.</p>\n\n<p>The cpp files is compiled via the standard implicit rule.</p>\n\n<p>The linker step is completed by having a function that takes the sources, replaces the .cpp with a .o and then creates a dependency:</p>\n\n<pre><code># $(call source-to-object, source-file-list)\nsource-to-object = $(subst .c,.o,$(filter %.c,$1)) \\\n                   $(subst .cpp,.o,$(filter %.cpp,$1))\n\n\n# $(call make-library, library-name, source-file-list, customldopt)\ndefine make-library\n  libraries += $1\n  sources += $2\n\n  $1: $(call source-to-object,$2)\n        $(CXX) $(CXXFLAGS) -shared $$^ -o $(RELEASE)/$$@ -L$(RELEASE) $(LDFLAGS) $(LDLIBS) $(addprefix -l,$3)\nendef\n</code></pre>\n\n<p>This works fine until I want to introduce a dependency between the 2 libraries.  I'm doing this by hardcoding:</p>\n\n<pre><code>libB.so: libA.so\n</code></pre>\n\n<p><del>The problem here is that the <code>$$^</code> will now not cleanly contain a list of object files, but will also include the libA.so - which has no place being in the linker line in the same place as the object files?</del></p>\n\n<p><del>So my question is how do I introduce the idea of a dependency between two libraries, without polluting the linker line with the value of the dependent library?\n</del> </p>\n\n<p><em>This statement is not correct, you <strong>do</strong> want the library to be referenced on the linker line in the same form as it is represented as a target - see my answer</em></p>\n\n<p>I can of course just have -lA in the linker line for libB.so, just like you would for a 3rd party dependency - but this does not guarantee it will be built before it is referenced?</p>\n\n<p>One thing I have noticed is that if I change <code>$(RELEASE)/$$@</code> to just <code>$$@</code> then it works:</p>\n\n<pre><code>g++ -fPIC -shared path/to/some_source.o libA.so -o libB.so \n</code></pre>\n\n<p>This is a problem as I need the output of both libraries in the $RELEASE directory, and I'm not convinced the <code>libA.so</code> in the above linker line is ever correct?</p>\n\n<p>It's becoming a bit of a mess - any advice?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1537981679, "post_id": 52522873, "comment_id": 91985339, "body": "Where did you get that code from?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1537981845, "post_id": 52522873, "comment_id": 91985413, "body": "Are you asking why there is no linebreak after <code>template &lt;typename T&gt;</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537986562, "post_id": 52522873, "comment_id": 91987619, "body": "I agree that it doesn&#39;t appear that the template is used anywhere in that function.  Perhaps the creator of the video is preparing for some neat trick later. Perhaps they are a Cargo Cult Programmer parroting something they saw years ago and do not understand. I&#39;d have to watch the video to get a better feel."}, {"owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1537987320, "post_id": 52522873, "comment_id": 91988021, "body": "@user4581301 Thanks, just making sure I&#39;m not blind and missing something. It seemed like a typo but I wasn&#39;t sure if this was some rarely used nuance of the language."}, {"owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537989047, "post_id": 52522873, "comment_id": 91988839, "body": "@SamVarshavchik I know what a template is first of all. I know what it&#39;s used for as well. What I don&#39;t understand is its use in this case. See my edit. It&#39;s not the return type, parameter type or used in the function anywhere so it&#39;s a seemingly random and useless template delcaration in my eyes."}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "edited": false, "score": 0, "creation_date": 1537984608, "post_id": 52523101, "comment_id": 91986686, "body": "I understand what a template does, what I was asking was why it was declared here when the return type is already <code>ComponentID</code> aka <code>std::size_t</code> and <code>T</code> isn&#39;t used for a parameter or anything inside the function. So is this just some useless template that the video maker put in as a typo or what? As far as I can see there&#39;s no reason for the <code>template</code> declaration to be there."}, {"owner": {"reputation": 646, "user_id": 2012725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/31339f862c8a45653f7fceeafa97baed?s=128&d=identicon&r=PG", "display_name": "Yucel_K", "link": "https://stackoverflow.com/users/2012725/yucel-k"}, "reply_to_user": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "edited": false, "score": 0, "creation_date": 1537986423, "post_id": 52523101, "comment_id": 91987550, "body": "you could have been clearer in your question before your edit -.-"}], "tags": [], "owner": {"reputation": 646, "user_id": 2012725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/31339f862c8a45653f7fceeafa97baed?s=128&d=identicon&r=PG", "display_name": "Yucel_K", "link": "https://stackoverflow.com/users/2012725/yucel-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1537987329, "last_edit_date": 1537987329, "creation_date": 1537982416, "answer_id": 52523101, "question_id": 52522873, "link": "https://stackoverflow.com/questions/52522873/template-declaration-in-function-declaration-that-already-has-a-return-type/52523101#52523101", "title": "Template declaration in function declaration that already has a return type?", "body": "<p>Templates are used in order to adapt the function or a class to support more than one build in or custom type.  by doing so you can have different types used in the same code, ultimately reducing the duplicate code.</p>\n\n<p>imagine that your getComponentID() had to return an int and also in another scenario need it to return a double. if  <code>getcomponentid()</code> wasn't a template function, you had to overload the function to handle both int and double return types. Since you are using templates you don't need to deal with that. the compiler will handle it for you.  </p>\n\n<p>one thing to note though, templates can slow down your compilation time.</p>\n\n<p><a href=\"http://www.cplusplus.com/doc/oldtutorial/templates/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/oldtutorial/templates/</a> </p>\n\n<p>Following up on your edit:</p>\n\n<p>he is not returning a template type. instead of doing;</p>\n\n<pre><code>template&lt;typename T&gt;\ninline ComponentID getComponentID()\n{\n...\n...\n}\n</code></pre>\n\n<p>he is putting everything in one line.as follows.</p>\n\n<pre><code>template &lt;typename T&gt; inline ComponentID getComponentID()\n</code></pre>\n\n<p>yours truly, \nsome stranger from the net -.-</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1537993963, "creation_date": 1537993963, "answer_id": 52525657, "question_id": 52522873, "link": "https://stackoverflow.com/questions/52522873/template-declaration-in-function-declaration-that-already-has-a-return-type/52525657#52525657", "title": "Template declaration in function declaration that already has a return type?", "body": "<p>The goal is to have unique incremental ID by type.</p>\n\n<p>So with</p>\n\n<pre><code>ComponentID getComponentID()\n{\n    static ComponentID lastID = 0;\n    return lastID++;\n}\n\ntemplate &lt;typename T&gt;\nComponentID getComponentID() noexcept\n{\n    static ComponentID typeID = getComponentID();\n\n    return typeID; // () was a typo indeed\n}\n</code></pre>\n\n<p>We will have </p>\n\n<pre><code>struct Component1 {};\nstruct Component2 {};\n\n\ngetComponent&lt;Component1&gt;(); // Will return 0\ngetComponent&lt;Component2&gt;(); // will return 1\ngetComponent&lt;Component1&gt;(); // Will return 0\ngetComponent&lt;Component2&gt;(); // will return 1\n</code></pre>\n"}], "owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 52525657, "answer_count": 2, "score": -3, "last_activity_date": 1541000184, "creation_date": 1537981569, "last_edit_date": 1541000184, "question_id": 52522873, "link": "https://stackoverflow.com/questions/52522873/template-declaration-in-function-declaration-that-already-has-a-return-type", "title": "Template declaration in function declaration that already has a return type?", "body": "<p>So I'm following a C++/SDL2 programming tutorial series for 2D gaming. I was following along on <a href=\"https://www.youtube.com/watch?v=XsvI8Sng6dk&amp;list=PLhfAbcv9cehhkG7ZQK0nfIGJC_C-wSLrx&amp;index=9\" rel=\"nofollow noreferrer\">this</a> video and he wrote this bit of code.</p>\n\n<pre><code>using ComponentID = std::size_t;\n\ninline ComponentID getComponentID()\n{\n    static ComponentID lastID = 0;\n    return lastID++;\n}\n\ntemplate &lt;typename T&gt; inline ComponentID getComponentID() noexcept\n{\n    static ComponentID typeID = getComponentID();\n    //typeID below is being used like a function???\n    return typeID(); //&lt;- error and won't compile, I believe this was a typo\n}\n</code></pre>\n\n<p>I don't understand why <code>template&lt;typename T&gt;</code> is put on that line for <code>inline ComponentID getComponentID() noexcept</code>. Why is that there? Obviously, there's no semicolon after a template declaration so I suppose it can be put on the same line but why? Is there something I'm missing? I haven't finished the video yet as this perplexed me and didn't wanna just go through the whole video copying code and not understanding it. Any hints?</p>\n\n<p><strong>EDIT:</strong> I know how templates work, I don't need a lesson on that. But there's already a return type in the declaration of that function which is what I was asking about. Not for strangers to teach me about the C++ language.</p>\n\n<pre><code>template &lt;typename T&gt; inline ComponentID getComponentID() noexcept\n</code></pre>\n\n<p><strong>ComponentID</strong> aka <code>std::size_t</code> already specifies the return type does it not? <code>T</code>'s definition is put on the same line and is not used in that function. This is what I'm asking about. Did I miss something? Because I didn't think you could have multiple return types for a function. So since it isn't the return type and it isn't used in the function itself or as a type for a parameter what is its use in this context?</p>\n"}, {"tags": ["c++", "c++11", "stdmap"], "comments": [{"owner": {"reputation": 76, "user_id": 9625335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9624c95ef9b1c3caf539f28d57f3f366?s=128&d=identicon&r=PG&f=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/9625335/marc"}, "edited": false, "score": 2, "creation_date": 1537983776, "post_id": 52522613, "comment_id": 91986339, "body": "may be a duplicate of <a href=\"https://stackoverflow.com/questions/42209189/add-values-to-a-multiset-in-a-boostbimap\" title=\"add values to a multiset in a boostbimap\">stackoverflow.com/questions/42209189/&hellip;</a> Did you have a look at boost bimap? <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/bimap/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_68_0/libs/bimap/doc/html/index.html</a>"}, {"owner": {"reputation": 368, "user_id": 10420024, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x2G0btRVmxo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUCNtJ_HlrHG6xp0qDDRMlbClw76w/mo/photo.jpg?sz=128", "display_name": "ava", "link": "https://stackoverflow.com/users/10420024/ava"}, "reply_to_user": {"reputation": 76, "user_id": 9625335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9624c95ef9b1c3caf539f28d57f3f366?s=128&d=identicon&r=PG&f=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/9625335/marc"}, "edited": false, "score": 0, "creation_date": 1537984237, "post_id": 52522613, "comment_id": 91986532, "body": "I have mentioned i am stick to c++11 because boost library is not allowed"}, {"owner": {"reputation": 76, "user_id": 9625335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9624c95ef9b1c3caf539f28d57f3f366?s=128&d=identicon&r=PG&f=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/9625335/marc"}, "edited": false, "score": 0, "creation_date": 1537984434, "post_id": 52522613, "comment_id": 91986616, "body": "Thanks for updating the question accordingly (boost was not mentioned there, before). There is not necessarily a causal relationship between boost and c++11, though. boost has been around before c++11 was a thing"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1538004513, "post_id": 52522613, "comment_id": 91994300, "body": "if you can search by key or by value what about just using the map&lt;string,vector&lt;string&gt;&gt; and putting both the brand and the owner in as keys and keeping both vectors up to date.  Only one map so less memory than two maps but still two insertions instead of one.  I think it is a good compromise.  You could prepend the key with &quot;brand:&quot; or &quot;owner:&quot; if you are worried that an owner might have the same name as a brand."}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 10420024, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x2G0btRVmxo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUCNtJ_HlrHG6xp0qDDRMlbClw76w/mo/photo.jpg?sz=128", "display_name": "ava", "link": "https://stackoverflow.com/users/10420024/ava"}, "edited": false, "score": 0, "creation_date": 1537983998, "post_id": 52523355, "comment_id": 91986425, "body": "interested in access speed and insertion speed"}, {"owner": {"reputation": 828, "user_id": 4227687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8636f232a295774e9fec619e0169dbab?s=128&d=identicon&r=PG", "display_name": "Amedeo", "link": "https://stackoverflow.com/users/4227687/amedeo"}, "reply_to_user": {"reputation": 368, "user_id": 10420024, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x2G0btRVmxo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUCNtJ_HlrHG6xp0qDDRMlbClw76w/mo/photo.jpg?sz=128", "display_name": "ava", "link": "https://stackoverflow.com/users/10420024/ava"}, "edited": false, "score": 1, "creation_date": 1537984886, "post_id": 52523355, "comment_id": 91986813, "body": "Keeping it simple, the second solution is better for access and insertion speed. You want to avoid a full scan of the map (that requires an amount of time that increases with the number of elements in the map)."}], "tags": [], "owner": {"reputation": 828, "user_id": 4227687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8636f232a295774e9fec619e0169dbab?s=128&d=identicon&r=PG", "display_name": "Amedeo", "link": "https://stackoverflow.com/users/4227687/amedeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1537983557, "creation_date": 1537983557, "answer_id": 52523355, "question_id": 52522613, "link": "https://stackoverflow.com/questions/52522613/efficient-way-to-map-unique-and-duplicate-value-where-key-or-value-can-be-acces/52523355#52523355", "title": "Efficient way to map unique and duplicate value. Where key or value can be access", "body": "<p>The best approach depends on your needs. Are you interested in access speed or insertion speed? Or are you interested in reducing the used memory space?</p>\n\n<p>The first solution that you propose (a map with key=brand and value=owner) uses less memory but requires a full scan to perform a search by owner.</p>\n\n<p>The second solution: </p>\n\n<ul>\n<li>a map with key=brand and value=owner</li>\n<li>a map with key=brand and value= list of owners</li>\n</ul>\n\n<p>is faster for both search by owner and search by brand. However, it requires more memory and you also need to perform 2 insertions for each new pair. </p>\n"}, {"tags": [], "owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "is_accepted": false, "score": 1, "last_activity_date": 1537984037, "creation_date": 1537984037, "answer_id": 52523474, "question_id": 52522613, "link": "https://stackoverflow.com/questions/52522613/efficient-way-to-map-unique-and-duplicate-value-where-key-or-value-can-be-acces/52523474#52523474", "title": "Efficient way to map unique and duplicate value. Where key or value can be access", "body": "<p>Best is highly relative :)</p>\n\n<p>You can use <a href=\"https://en.cppreference.com/w/cpp/container/multimap\" rel=\"nofollow noreferrer\">std::multimap</a> for the same. </p>\n\n<pre><code>std::multimap&lt;std::string,std::string&gt; my_map;\nmy_map.insert(std::make_pair(\"owner_name\", \"brand_name\"));\n</code></pre>\n\n<p>Now you can search based on <code>key</code> or <code>value</code> depending upon what you need. </p>\n"}], "owner": {"reputation": 368, "user_id": 10420024, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x2G0btRVmxo/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUCNtJ_HlrHG6xp0qDDRMlbClw76w/mo/photo.jpg?sz=128", "display_name": "ava", "link": "https://stackoverflow.com/users/10420024/ava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 52523355, "answer_count": 2, "score": 5, "last_activity_date": 1537984280, "creation_date": 1537980411, "last_edit_date": 1537984280, "question_id": 52522613, "link": "https://stackoverflow.com/questions/52522613/efficient-way-to-map-unique-and-duplicate-value-where-key-or-value-can-be-acces", "title": "Efficient way to map unique and duplicate value. Where key or value can be access", "body": "<p>There are n no of string which need to map with another string.</p>\n\n<pre><code>Ex :     Bacardi_old - &gt; Facundo \n         Smirnoff_old -&gt; Pyotr \n         Seagram_old  -&gt; Joseph\n         This keep on ..... may be around 1000\n</code></pre>\n\n<p>There are some string which need to map with duplicate string.</p>\n\n<pre><code>Ex :     Bacardi_new  -&gt; Facundo \n         Smirnoff_new -&gt; Facundo \n         Seagram_new  -&gt; Facundo \n</code></pre>\n\n<p>Requirement: As Below case</p>\n\n<p>case 1: when brand name input. Owner name as output.</p>\n\n<pre><code>input : Bacard_old\noutput: Facundo\n</code></pre>\n\n<p>case 2: When owner name input brand name as output.</p>\n\n<pre><code>input : Facundo\noutput : Bacardi_old, Bacardi_new ,Smirnoff_new ,Seagram_new \n</code></pre>\n\n<p>My Approach:</p>\n\n<p>1.I have a map as below :</p>\n\n<pre><code>std::map&lt;std::string,std::vector&lt;std::string&gt;&gt; Mymap;\n</code></pre>\n\n<p>2.Should  i create two map one unique mapping and another for duplicate</p>\n\n<pre><code>std::map&lt;std::string,std::string&gt;Mymap\nstd::map&lt;std::string,std::vector&lt;std::string&gt;&gt;Mymap\n</code></pre>\n\n<p>Is the second option good than first in terms of all the aspect.\nPlease suggest the best approach.</p>\n\n<p>Note : I am stick with c++11. No boost library.</p>\n"}, {"tags": ["c++", "ffmpeg", "frame", "libavcodec", "libav"], "owner": {"reputation": 31, "user_id": 8862830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ee061000f831240671ad30d071cf7e?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Osman \u015eAHAN", "link": "https://stackoverflow.com/users/8862830/ali-osman-%c5%9eahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1537984374, "creation_date": 1537978431, "last_edit_date": 1537984374, "question_id": 52522137, "link": "https://stackoverflow.com/questions/52522137/ffmpeg-mpg-to-jpg", "title": "Ffmpeg mpg to jpg", "body": "<p>I want to convert the frames of a mpg video file to jpeg images.</p>\n\n<p>The code below is what I've tried</p>\n\n<pre><code>int save_frame_as_jpeg(AVCodecContext *pCodecCtx, AVFrame *pFrame, int FrameNo) {\n\n    //AVCodec *jpegCodec = avcodec_find_encoder(AV_CODEC_ID_JPEG2000);\n    AVCodec *jpegCodec = avcodec_find_encoder(AV_CODEC_ID_MJPEG);\n    if (!jpegCodec) {\n        return -1;\n    }\n    AVCodecContext *jpegContext = avcodec_alloc_context3(jpegCodec);\n    if (!jpegContext) {\n        return -1;\n    }\n\n    jpegContext-&gt;pix_fmt = pCodecCtx-&gt;pix_fmt;\n    jpegContext-&gt;height = pFrame-&gt;height;\n    jpegContext-&gt;width = pFrame-&gt;width;\n    jpegContext-&gt;time_base = pCodecCtx-&gt;time_base;\n\n    if (avcodec_open2(jpegContext, jpegCodec, NULL) &lt; 0) {\n        return -1;\n    }\n    FILE *JPEGFile;\n    char JPEGFName[256];\n\n    //AVPacket packet = { .data = NULL,.size = 0 };\n    AVPacket packet;\n    av_init_packet(&amp;packet);\n    int gotFrame;\n\n    if (( avcodec_send_packet(jpegContext, &amp;packet)) &lt; 0) {\n        return -1;\n    }\n    if (( avcodec_receive_frame(jpegContext, pFrame)) &lt; 0) {\n        return -1;      \n    }\n    sprintf(JPEGFName, \"dvr-%06d.jpg\", FrameNo);\n    JPEGFile = fopen(JPEGFName, \"wb\");\n    fwrite(packet.data, 1, packet.size, JPEGFile);\n    fclose(JPEGFile);\n\n    av_packet_unref(&amp;packet);\n    avcodec_close(jpegContext);\n    return 0;\n}\n\nstatic void decode(AVCodecContext *dec_ctx, AVFrame *frame, AVPacket *pkt)\n{\n\n\n    char buf[1024];\n    int ret;\n\n    ret = avcodec_send_packet(dec_ctx, pkt);\n    if (ret &lt; 0) {\n        fprintf(stderr, \"Error sending a packet for decoding\\n\");\n        exit(1);\n    }\n\n    while (ret &gt;= 0) {\n        ret = avcodec_receive_frame(dec_ctx, frame);\n        if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF)\n            return;\n        else if (ret &lt; 0) {\n            fprintf(stderr, \"Error during decoding\\n\");\n            exit(1);\n        }\n\n        printf(\"saving frame %3d\\n\", dec_ctx-&gt;frame_number);\n        fflush(stdout);\n\n        FILE *iFile = fopen(buf, \"rb\");\n        fseek(iFile, 0, SEEK_END);\n        size_t fileLen = ftell(iFile);\n        fseek(iFile, 0, SEEK_SET);\n\n        unsigned char* fileData = new unsigned char[fileLen];\n        fread(fileData, 1, fileLen, iFile);\n        fclose(iFile);\n\n        getchar();\n    }\n}\n\nint main()\n{\n\n    av_register_all();\n    avcodec_register_all();\n    avdevice_register_all();\n    avfilter_register_all();\n\n    const char *filename = \"video.mpg\";\n\n    AVFormatContext *format_context = NULL;\n\n    int ret = -1;\n    ret = avformat_open_input(&amp;format_context, filename, NULL, NULL);\n    if (ret &lt; 0) {\n        printf(\"cannot open file. filename=%s, ret=%08x\\n\", filename, AVERROR(ret));\n        return -1;\n    }\n\n    ret = avformat_find_stream_info(format_context, NULL);\n    if (ret &lt; 0) {\n        printf(\"avformat_find_stream_info error. ret=%08x\\n\", AVERROR(ret));\n        return -1;\n    }\n\n    AVStream *video_stream = NULL;\n    for (unsigned int i = 0; i &lt; format_context-&gt;nb_streams; i++) {\n        if (format_context-&gt;streams[i]-&gt;codecpar-&gt;codec_type == AVMediaType::AVMEDIA_TYPE_VIDEO) {\n            // found Video stream\n            video_stream = format_context-&gt;streams[i];\n            break;\n        }\n    }\n    if (video_stream == NULL) {\n        printf(\"video_stream not found\\n\");\n        return -1;\n    }\n\n    AVCodec *video_codec = avcodec_find_decoder(video_stream-&gt;codecpar-&gt;codec_id);\n    if (video_codec == NULL) {\n        printf(\"avcodec_find_decoder codec not found. codec_id=%d\\n\", video_stream-&gt;codecpar-&gt;codec_id);\n        return -1;\n    }\n\n    AVCodecContext *video_codec_context = avcodec_alloc_context3(video_codec);\n    if (video_codec_context == NULL) {\n        printf(\"avcodec_alloc_context3 error.\\n\");\n        return -1;\n    }\n\n    ret = avcodec_open2(video_codec_context, video_codec, NULL);\n    if (ret &lt; 0) {\n        printf(\"avcodec_open2 error. ret=%08x\\n\", AVERROR(ret));\n        return -1;\n    }\n\n    AVFrame *frame = av_frame_alloc();\n    AVPacket packet;\n    int frame_number = 0;\n    while (1) {\n        // read ES\n        if ((ret = av_read_frame(format_context, &amp;packet)) &lt; 0) {\n            printf(\"av_read_frame eof or error. ret=%08x\\n\", AVERROR(ret));\n            break; // eof or error\n        }\n        if (packet.stream_index == video_stream-&gt;index) {\n            // decode Video ES\n            if ((ret = avcodec_send_packet(video_codec_context, &amp;packet)) &lt; 0) {\n                printf(\"avcodec_send_packet error. ret=%08x\\n\", AVERROR(ret));\n            }\n            if ((ret = avcodec_receive_frame(video_codec_context, frame)) &lt; 0) {\n                if (ret != AVERROR(EAGAIN)) {\n                    printf(\"avcodec_receive_frame error. ret=%08x\\n\", AVERROR(ret));\n                    break;\n                }\n            }\n            else {\n\n                if (packet.size)\n                    decode(video_codec_context, frame, &amp;packet);\n\n                printf(\"decode finished. frame_number=%d\\n\", ++frame_number);\n\n                save_frame_as_jpeg(video_codec_context, frame, frame_number);\n                getchar();\n            }\n        }\n        else {\n            // does not Video ES.\n        }\n        av_packet_unref(&amp;packet);\n    }\n\n    getchar(); // wait user input\n\n    return 0;\n}\n</code></pre>\n\n<p>This the error surfaced</p>\n\n<blockquote>\n  <p>[mjpeg @ 000002889038fb80] Specified pixel format yuv420p is invalid\n  or not supported</p>\n</blockquote>\n\n<p>error this line:</p>\n\n<p><code>avcodec_open2(jpegContext, jpegCodec, NULL)</code></p>\n\n<p>I can't understand the error.Could someone help me?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "pass-by-reference", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1537977215, "post_id": 52521615, "comment_id": 91983082, "body": "1) All debugger sees is a <code>T*</code>, and doesn&#39;t know whether it&#39;s a pointer to a single <code>T</code>, or an array of those, so it shows you the value of <code>*array</code>. 2) &quot;<i>When printed, the array appears to be filled with random ASCII characters</i>&quot; No, it doesn&#39;t appear that way. If you actually printed, the array, you would see that. The code that joins the array into a string, does it. <code>text += array.array[i]</code> does not, actually, convert the number to a string."}], "answers": [{"comments": [{"owner": {"reputation": 1187, "user_id": 7401478, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a728eb7daf01c4691e8db8d6676a2d95?s=128&d=identicon&r=PG&f=1", "display_name": "user7401478", "link": "https://stackoverflow.com/users/7401478/user7401478"}, "edited": false, "score": 0, "creation_date": 1537977130, "post_id": 52521731, "comment_id": 91983025, "body": "Thank you for your answer! Any idea why the array elements are invisible in the debugger, and only first one is shown?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 1187, "user_id": 7401478, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a728eb7daf01c4691e8db8d6676a2d95?s=128&d=identicon&r=PG&f=1", "display_name": "user7401478", "link": "https://stackoverflow.com/users/7401478/user7401478"}, "edited": false, "score": 1, "creation_date": 1537977228, "post_id": 52521731, "comment_id": 91983093, "body": "@WearyAdventurer Debugger has no idea it&#39;s an array, it treats a pointer-typed variable as a pointer to a single item."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1537976968, "creation_date": 1537976968, "answer_id": 52521731, "question_id": 52521615, "link": "https://stackoverflow.com/questions/52521615/c-how-to-allocate-and-fill-dynamic-array-of-a-struct-passed-by-reference/52521731#52521731", "title": "C++: How to allocate and fill dynamic array of a struct passed by reference?", "body": "<blockquote>\n  <p>When printed, the array appears to be filled with random ASCII characters</p>\n</blockquote>\n\n<p>This is because you have an error in your <code>array_join</code> function:</p>\n\n<pre><code>text += array.array[i];\n</code></pre>\n\n<p>This would append an <code>int</code> re-interpreted as <code>char</code>, <em>not</em> a decimal representation of the number.</p>\n\n<p>Use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a> to fix the problem:</p>\n\n<pre><code>text += std::to_string(array.array[i]);\n</code></pre>\n\n<p>If you are restricted to a C++ version prior to C++11, use <a href=\"https://en.cppreference.com/w/cpp/io/basic_stringstream\" rel=\"nofollow noreferrer\"><code>std::stringstream</code></a> instead.</p>\n"}], "owner": {"reputation": 1187, "user_id": 7401478, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a728eb7daf01c4691e8db8d6676a2d95?s=128&d=identicon&r=PG&f=1", "display_name": "user7401478", "link": "https://stackoverflow.com/users/7401478/user7401478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 1, "accepted_answer_id": 52521731, "answer_count": 1, "score": 1, "last_activity_date": 1537976968, "creation_date": 1537976567, "question_id": 52521615, "link": "https://stackoverflow.com/questions/52521615/c-how-to-allocate-and-fill-dynamic-array-of-a-struct-passed-by-reference", "title": "C++: How to allocate and fill dynamic array of a struct passed by reference?", "body": "<p>I have a very simple structure for adding <code>size</code> field to dynamic arrays:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct sized_array {\n    int size;\n    T* array;\n};\n</code></pre>\n\n<p>I cannot use <code>std::vector</code> or <code>std::array</code>. The function to fill the array initializes the <code>sized_array.array</code> field and fills it with random integers:</p>\n\n<pre><code>void array_fill(sized_array&lt;int&gt; &amp;array, int size = ARRAY_SIZE) {\n    array.array = new int[size];\n    array.size  = size;\n    for (int i = 0; i &lt; size; i++) {\n        array.array[i] = random_in_range(RANDOM_MIN, RANDOM_MAX);\n    }\n}\n</code></pre>\n\n<p>The other functions, <code>array_join</code> and <code>array_print</code> print the contents of an array:</p>\n\n<pre><code>string array_join(sized_array&lt;int&gt; &amp;array, string delimiter) {\n    string text = \"\";\n\n    for (int i = 0; i &lt; array.size; i++) {\n        text += array.array[i];\n        if (i &lt; array.size) text += delimiter;\n    }\n\n    return text;\n}\n\nvoid array_print(sized_array&lt;int&gt; &amp;array) {\n    cout &lt;&lt; \"array(\" &lt;&lt; array.size &lt;&lt; \") = [\";\n    cout &lt;&lt; array_join(array, \", \") &lt;&lt; \"]\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The array variable is declared like so, and the program runs this code:</p>\n\n<pre><code>sized_array&lt;int&gt; number_array;\n\nint main() {\n    srand(time(NULL));\n\n    array_fill(number_array);\n    array_print(number_array);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>When debugging, the array shows this value when first initialized, then appears to take the first returned value of <code>random_in_range</code> and never change, staying at one element -- the first returned value.</p>\n\n<p><a href=\"https://i.stack.imgur.com/J9XHf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J9XHf.png\" alt=\"enter image description here\"></a></p>\n\n<p>When printed, the array appears to be filled with random ASCII characters, and the first element is never the one it was (even though the debugger displayed it had one element).</p>\n\n<p>What is the cause of this and how to avoid this problem?</p>\n"}, {"tags": ["c++", "qt5", "qtabwidget", "qplaintextedit"], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 0, "last_activity_date": 1537976519, "creation_date": 1537976519, "answer_id": 52521604, "question_id": 52521447, "link": "https://stackoverflow.com/questions/52521447/changing-qt5-tab-names-dynamically/52521604#52521604", "title": "Changing qt5 tab names dynamically", "body": "<p><a href=\"http://doc.qt.io/qt-5/qtabwidget.html#setTabText\" rel=\"nofollow noreferrer\"><code>QTabWidet::setTabText</code></a> does what you want.</p>\n\n<p>E.g:</p>\n\n<pre><code>ui-&gt;tabWidget-&gt;setTabText(index, \"new text\");\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10419712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb17b643364d1c284293ac1931a4b4ca?s=128&d=identicon&r=PG&f=1", "display_name": "neveragain", "link": "https://stackoverflow.com/users/10419712/neveragain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52521604, "answer_count": 1, "score": 0, "last_activity_date": 1537976519, "creation_date": 1537976009, "question_id": 52521447, "link": "https://stackoverflow.com/questions/52521447/changing-qt5-tab-names-dynamically", "title": "Changing qt5 tab names dynamically", "body": "<p>Say I have a tabwidget in my ui file\nthis is how im adding tabs right now:</p>\n\n<pre><code>QPlainTextEdit *tab = new QPlaintextEdit;\nint index = ui-&gt;tabWidget-&gt;addTab(tab, \"changeme\");\n</code></pre>\n\n<p>Now I'm wondering if it's possible to change the name of the tab on the go, \nfor example when subclassing QPLainTextEdit in a class and connecting a signal to it when the text changes then i'd like to add a little star to the tab to indicate that the file has been modified, is it even possible?</p>\n"}, {"tags": ["c++", "c++17", "llvm-clang", "variant"], "answers": [{"comments": [{"owner": {"reputation": 3550, "user_id": 816999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/190b7d54fa9bbcc29622ebd09fab3a2c?s=128&d=identicon&r=PG", "display_name": "Yongwei Wu", "link": "https://stackoverflow.com/users/816999/yongwei-wu"}, "edited": false, "score": 3, "creation_date": 1542338149, "post_id": 52521544, "comment_id": 93541733, "body": "It seems an intentional breakage on the Apple side to encourage the upgrade of Mojave. Official LLVM (which can be installed by Homebrew) has no problems at all."}, {"owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "reply_to_user": {"reputation": 3550, "user_id": 816999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/190b7d54fa9bbcc29622ebd09fab3a2c?s=128&d=identicon&r=PG", "display_name": "Yongwei Wu", "link": "https://stackoverflow.com/users/816999/yongwei-wu"}, "edited": false, "score": 0, "creation_date": 1542354911, "post_id": 52521544, "comment_id": 93546482, "body": "I guess that means you cannot use std::variant on 10.13 targets."}, {"owner": {"reputation": 3550, "user_id": 816999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/190b7d54fa9bbcc29622ebd09fab3a2c?s=128&d=identicon&r=PG", "display_name": "Yongwei Wu", "link": "https://stackoverflow.com/users/816999/yongwei-wu"}, "edited": false, "score": 5, "creation_date": 1542367878, "post_id": 52521544, "comment_id": 93552717, "body": "Yes, if the code is intended to work with the default compiler. As I do not mainly develop <i>for</i> Mac, just <i>on</i> Mac, I am free to use other compilers. It is still a big pity that Apple is being mean and allows a fully normal non-OS-dependent feature to work only on the latest macOS/iOS/\u2026 version."}], "tags": [], "owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "is_accepted": true, "score": 3, "last_activity_date": 1543479780, "last_edit_date": 1543479780, "creation_date": 1537976306, "answer_id": 52521544, "question_id": 52521388, "link": "https://stackoverflow.com/questions/52521388/stdvariantget-does-not-compile-with-apple-llvm-10-0/52521544#52521544", "title": "std::variant&lt;&gt;::get() does not compile with Apple LLVM 10.0", "body": "<p>As it turned out the project was set to macOS 10.14, but not the actual build target, which was still on 10.13. Once I reverted that to inherit the deployment target, the test code started to compile fine.</p>\n\n<p>It's an interesting twist, given that XCode 10 (and hence LLVM 10.0) can be installed and used to build C++17 apps on 10.13.</p>\n"}, {"comments": [{"owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "edited": false, "score": 2, "creation_date": 1545473452, "post_id": 53887048, "comment_id": 94635438, "body": "Good explanation - now we know <b>why</b> this limitation exists (and a workaround)!"}, {"owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1618472622, "post_id": 53887048, "comment_id": 118612607, "body": "can we use <code>std::get_if</code> to <i>simulate</i> the behavior of <code>std::get</code>? The former one is quite verbose :("}, {"owner": {"reputation": 2120, "user_id": 9167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7936df8ed092bb16463bde29df803d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/9167702/tobi"}, "reply_to_user": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1618474235, "post_id": 53887048, "comment_id": 118613252, "body": "@ch271828n What do you mean by <i>simulate</i>? You can factor this out into your <code>own::get</code> function template. But which exception would that throw?"}, {"owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1618477548, "post_id": 53887048, "comment_id": 118614714, "body": "@Tobi just throw something like runtime_error is enough for me. but I am a bit worried about the <b>reference vs pointer</b> - I have to dereference the pointer and return it as a <i>reference</i> - is this safe? Is my naive implemention correct or not? -&gt; <a href=\"https://gist.github.com/fzyzcjy/8633198b2cb03fe8585870d1a554d101\" rel=\"nofollow noreferrer\">gist.github.com/fzyzcjy/8633198b2cb03fe8585870d1a554d101</a>"}, {"owner": {"reputation": 2120, "user_id": 9167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7936df8ed092bb16463bde29df803d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/9167702/tobi"}, "reply_to_user": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1618493699, "post_id": 53887048, "comment_id": 118621751, "body": "Looks good to me, @ch271828n. But in general you would have to provide all four overloads (type/index template argument) x (const/non-const variant argument)."}, {"owner": {"reputation": 5405, "user_id": 4619958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cVA9W.png?s=128&g=1", "display_name": "ch271828n", "link": "https://stackoverflow.com/users/4619958/ch271828n"}, "edited": false, "score": 0, "creation_date": 1618494864, "post_id": 53887048, "comment_id": 118622367, "body": "@Tobi Thanks very much!"}], "tags": [], "owner": {"reputation": 2120, "user_id": 9167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7936df8ed092bb16463bde29df803d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/9167702/tobi"}, "is_accepted": false, "score": 23, "last_activity_date": 1551968336, "last_edit_date": 1551968336, "creation_date": 1545405121, "answer_id": 53887048, "question_id": 52521388, "link": "https://stackoverflow.com/questions/52521388/stdvariantget-does-not-compile-with-apple-llvm-10-0/53887048#53887048", "title": "std::variant&lt;&gt;::get() does not compile with Apple LLVM 10.0", "body": "<p>All <code>std::variant</code> functionality that might throw <code>std::bad_variant_access</code> is marked as available starting with macOS 10.14 (and corresponding iOS, tvOS and watchOS) in the standard header files. This is because the virtual <code>std::bad_variant_access::what()</code> method is not <code>inline</code> and thus defined in the <code>libc++.dylib</code> (provided by the OS).</p>\n\n<p>If you want to use <code>std::variant</code> in apps running on older OSes, just use <a href=\"https://en.cppreference.com/w/cpp/utility/variant/get_if\" rel=\"noreferrer\"><code>std::get_if</code></a>. In your example:</p>\n\n<pre><code>if (auto* p = std::get_if&lt;int&gt;(&amp;w)) {\n  // use *p\n} else {\n  // error handling\n}\n</code></pre>\n\n<p>You can also check in advance with <a href=\"https://en.cppreference.com/w/cpp/utility/variant/index\" rel=\"noreferrer\"><code>w.index()</code></a> and <a href=\"https://en.cppreference.com/w/cpp/utility/variant/holds_alternative\" rel=\"noreferrer\"><code>std:: holds_alternative &lt;int&gt;(w)</code></a>.</p>\n\n<p><strong>EDIT</strong>:\nAlso see my <a href=\"https://stackoverflow.com/questions/52310835/xcode-10-call-to-unavailable-function-stdvisit/53868971#53868971\">answer</a> to the similar problem with <code>std::visit</code> (unfortunately with a less handy workaround)</p>\n"}], "owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2821, "favorite_count": 0, "accepted_answer_id": 52521544, "answer_count": 2, "score": 15, "last_activity_date": 1567932643, "creation_date": 1537975851, "last_edit_date": 1567932643, "question_id": 52521388, "link": "https://stackoverflow.com/questions/52521388/stdvariantget-does-not-compile-with-apple-llvm-10-0", "title": "std::variant&lt;&gt;::get() does not compile with Apple LLVM 10.0", "body": "<p>I'm playing with the C++17 std::variant type and tried to compile the <a href=\"https://en.cppreference.com/w/cpp/utility/variant/get\" rel=\"noreferrer\">cppreference example code</a> for <code>get()</code>:</p>\n\n<pre><code>#include &lt;variant&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::variant&lt;int, float&gt; v{12}, w;\n    int i = std::get&lt;int&gt;(v);\n    w = std::get&lt;int&gt;(v);\n    w = std::get&lt;0&gt;(v); // same effect as the previous line\n\n//  std::get&lt;double&gt;(v); // error: no double in [int, float]\n//  std::get&lt;3&gt;(v);      // error: valid index values are 0 and 1\n\n    try {\n      std::get&lt;float&gt;(w); // w contains int, not float: will throw\n    }\n    catch (std::bad_variant_access&amp;) {}\n}\n</code></pre>\n\n<p>in XCode 10. My project is set to C++17, but I get compiler errors:</p>\n\n<blockquote>\n  <p>Call to unavailable function 'get': introduced in macOS 10.14</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>'bad_variant_access' is unavailable: introduced in macOS 10.14</p>\n</blockquote>\n\n<p>which is surprising in 2 ways: it should compile if <code>std::variant</code> is supported and the hint about macOS 10.14 is weird, given that I'm on that version and it has nothing to do with the supported C++ dialect (and the project's deployment target is 10.14).</p>\n\n<p>Is this something I'm doing wrong or a bug in clang?</p>\n"}, {"tags": ["c++", "struct", "initialization", "memset"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1537975591, "post_id": 52521261, "comment_id": 91982104, "body": "Give the struct a proper constructor (or use in-class initializers for the default values) and stop using <code>malloc</code> in C++."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1537975607, "post_id": 52521261, "comment_id": 91982118, "body": "&quot;<i>How can I initialize this struct using malloc and update this value accessing to an attribute name?</i>&quot; Why do you even use <code>malloc</code>? What&#39;s wrong with using constructors, and <code>new</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 5, "creation_date": 1537975643, "post_id": 52521261, "comment_id": 91982144, "body": "Why are you using <code>malloc</code> in a C++ program?  If any of those members of <code>WEATHER_STRUCT</code> change to non-POD types, that <code>malloc</code> call will not create the object and you now have to hunt down a hard-to-find bug."}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537976007, "post_id": 52521261, "comment_id": 91982373, "body": "Ok, I can not use new because the stuct is so long. But this I used malloc, but now I know that is not a good choise. Should I use constructor for this example?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537976053, "post_id": 52521261, "comment_id": 91982396, "body": "<i>Ok, I can not use new because the stuct is so long.</i> -- ????????  Do you know what <code>new</code> does?"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537976143, "post_id": 52521261, "comment_id": 91982453, "body": "Can you give me a little example please? I thank that initialize a big struct using new was a bad choise."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537976273, "post_id": 52521261, "comment_id": 91982536, "body": "@JoseJimRin <i>I thank that initialize a big struct using new was a bad choise</i>  -- Again, Huh?  Why did you think <code>malloc</code> was going to be any different (right now) than <code>new</code>?  Where are you getting this (poor) advice from?"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537976359, "post_id": 52521261, "comment_id": 91982596, "body": "I do not know Paul, by this I posted this question :S"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537976567, "post_id": 52521261, "comment_id": 91982718, "body": "Well, you should know what <code>new</code> does before making assumptions as to what it does.  The answers below show how to ditch <code>malloc</code> and just use <code>new</code> to create the object, and also how not to use <code>new</code> at all and just create the object outright.  Using <code>C</code> constructs in a C++ program is a dangerous game if you do not know what you&#39;re doing."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1537976634, "post_id": 52521261, "comment_id": 91982754, "body": "Why is your array <code>packetID</code> only <code>1</code> element long?"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537976685, "post_id": 52521261, "comment_id": 91982782, "body": "Because I need to use only 1 byte to send this information in a socket. (Is the Header)"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1537979008, "post_id": 52521261, "comment_id": 91984012, "body": "You do know that there are fixed with integer types in C++! <a href=\"https://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/integer</a>"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537979182, "post_id": 52521261, "comment_id": 91984105, "body": "Yes but if I uses unsigned char i do not need to use &lt;cstdint&gt; library"}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537977153, "post_id": 52521520, "comment_id": 91983039, "body": "If I use this solution compiler says me that &quot;expression must be an L-value modifiable&quot;"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537978225, "post_id": 52521520, "comment_id": 91983608, "body": "@JoseJimRin On which line?"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537978244, "post_id": 52521520, "comment_id": 91983618, "body": "It seems like i need to write *p -&gt; packetID = &#39;1&#39;, this works for me."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537979154, "post_id": 52521520, "comment_id": 91984091, "body": "@JoseJimRin <code>p-&gt;packetID[0] = 1;</code>"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537979304, "post_id": 52521520, "comment_id": 91984155, "body": "OK, thanks, But if I have 2 bytes to represent an information. And I need to put a value 300. *p -&gt; packetID = &#39;300&#39;; Is the correct option?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537980384, "post_id": 52521520, "comment_id": 91984710, "body": "@JoseJimRin <code>packetID</code> is 1 byte, can contain values in range [0, 255]."}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1538035848, "post_id": 52521520, "comment_id": 92003937, "body": "Yes sorry, if I have 2 bytes to represent values. For example, packetSize. packetSize = &#39;300&#39;; Is the correct option? @MaximEgorushkin"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1538039123, "post_id": 52521520, "comment_id": 92005743, "body": "@JoseJimRin What encoding does your protocol use?"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1537979144, "last_edit_date": 1537979144, "creation_date": 1537976234, "answer_id": 52521520, "question_id": 52521261, "link": "https://stackoverflow.com/questions/52521261/struct-initialization-using-attribute-value-name/52521520#52521520", "title": "(Struct *) Initialization using attribute value name?", "body": "<p>In C++ you can use <code>new</code> to allocate and initialize:</p>\n\n<pre><code>wheather_struct *p = new wheather_struct();\n</code></pre>\n\n<p>Note the parenthesis at the end - this is <a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value initialization</a> - fills members of built-in types with 0.</p>\n\n<p>And then:</p>\n\n<pre><code>p-&gt;packetID[0] = 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537977262, "post_id": 52521537, "comment_id": 91983108, "body": "Compiler do not let me to put brackets {} in the struct definition."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537977423, "post_id": 52521537, "comment_id": 91983213, "body": "@JoseJimRin You probably need to set the <code>C</code> version on your compiler to <code>C++11</code> or above. What compiler are you using?"}, {"owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537977806, "post_id": 52521537, "comment_id": 91983426, "body": "Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.XX.YYYYY.ZZ for 80x86"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "edited": false, "score": 0, "creation_date": 1537978327, "post_id": 52521537, "comment_id": 91983673, "body": "@JoseJimRin I think you can use <code>&#47;std:c++11</code> or <code>&#47;std:c++latest</code> on the command line."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 1, "last_activity_date": 1537976599, "last_edit_date": 1537976599, "creation_date": 1537976283, "answer_id": 52521537, "question_id": 52521261, "link": "https://stackoverflow.com/questions/52521261/struct-initialization-using-attribute-value-name/52521537#52521537", "title": "(Struct *) Initialization using attribute value name?", "body": "<p>You can add initializers <code>{}</code> to your arrays to initialize them to zeros like this:</p>\n\n<pre><code>struct wheather_struct // no need for typedef in C++\n{\n   unsigned char packetID[1]{};\n   unsigned char packetSize[2]{};\n   unsigned char subPacketID[1]{};\n   unsigned char subPacketOffset[2]{};\n};\n</code></pre>\n\n<p>Then use <code>new</code> to dynamically create an object:</p>\n\n<pre><code>auto w = new weather_struct;\n\nw-&gt;packetID[0] = 'A';\n</code></pre>\n\n<p>Don't forget to <em>delete</em> it later:</p>\n\n<pre><code>delete w;\n</code></pre>\n\n<p>But (much better) use a smart pointer:</p>\n\n<pre><code>auto w = std::make_unique&lt;weather_struct&gt;(); // will delete itself\n\nw-&gt;packetID[0] = 'A';\n\n// no need to delete it\n</code></pre>\n\n<p>Or (even better) just use it as a value object (not always possible):</p>\n\n<pre><code>weather_struct w; \n\nw.packetID[0] = 'A';\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 8938992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4y1q.png?s=128&g=1", "display_name": "JoseJimRin", "link": "https://stackoverflow.com/users/8938992/josejimrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52521520, "answer_count": 2, "score": 0, "last_activity_date": 1537979331, "creation_date": 1537975459, "last_edit_date": 1537979331, "question_id": 52521261, "link": "https://stackoverflow.com/questions/52521261/struct-initialization-using-attribute-value-name", "title": "(Struct *) Initialization using attribute value name?", "body": "<p>I have defined this struct:</p>\n\n<pre><code>typedef struct WHEATHER_STRUCT\n{\n   unsigned char packetID[1];\n   unsigned char packetSize[2];\n   unsigned char subPacketID[1];\n   unsigned char subPacketOffset[2];\n   ...\n} wheather_struct;\n</code></pre>\n\n<p>How can I initialize this struct (using constructor or new) accessing by an attribute name? For example:</p>\n\n<pre><code>wheather_struct.packetID = 1;\n</code></pre>\n\n<blockquote>\n  <p>Finally</p>\n</blockquote>\n\n<p>I tried this solution and it works for me, but do you think it is a good choice?</p>\n\n<pre><code>WHEATHER_STRUCT * wheather_struct = new WHEATHER_STRUCT();\n*weather_struct-&gt;packetID = '1';\n</code></pre>\n\n<p>And for a float attribute:</p>\n\n<pre><code>wheather_struct-&gt;floatAttribute= 111.111\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5244399"}, "edited": false, "score": 3, "creation_date": 1537975538, "post_id": 52521254, "comment_id": 91982060, "body": "Try putting <code>std::endl</code> to your print statement.  This may be caused by missing IO flushing."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1537975603, "post_id": 52521254, "comment_id": 91982116, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "edited": false, "score": 0, "creation_date": 1537975700, "post_id": 52521254, "comment_id": 91982185, "body": "I think your program simply crashes, as suggested by NathanOliver you need to use a debugger / set breakpoints to understand what is happening. A possibility is that you have exceptions enabled and an exception occured (use a try / catch block in main to check that)."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1537976649, "post_id": 52521254, "comment_id": 91982763, "body": "When I compile the code, the compiler (clang++) is outputting 5 warnings and 8 errors.  That is disconcerting, and may be related to the problems encountered.  I&#39;m not sure how you got this code to compile.  Try using a debugger and stepping through your executable."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1537978095, "post_id": 52521254, "comment_id": 91983552, "body": "<code>while (!file.eof()) {</code> is a common mistake. <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 3, "creation_date": 1537979444, "post_id": 52521254, "comment_id": 91984230, "body": "Compiling your code I see a problem. <code>gh.cpp:77:9: warning: variable &#39;l&#39; is used uninitialized whenever &#39;if&#39; condition is false</code> An unititalized variable read is UB. This means your code is broken. You should turn the compiler warning level up and treat warnings as errors."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1537982077, "post_id": 52521254, "comment_id": 91985521, "body": "Side note: UB is shorthand for Undefined Behaviour. Undefined Behaviour is pretty much what it sounds like, behaviour that the C++ standard does not specify. When you give the compiler code that is syntactically correct but can&#39;t possibly work, the C++ standard often doesn&#39;t specify what the program should do because anything it tries to do is likely the wrong choice or detecting that it happened is an unnecessary tax on the resources of a program that is written correctly. One of the reasons C++ is often faster than other common languages is it assumes you got the code right, not wrong."}, {"owner": {"reputation": 13, "user_id": 10243341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z4E3-EkI3Bg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOU3870RmheqYfTk0f9qitYeYhsJg/mo/photo.jpg?sz=128", "display_name": "yun1001", "link": "https://stackoverflow.com/users/10243341/yun1001"}, "edited": false, "score": 0, "creation_date": 1538018124, "post_id": 52521254, "comment_id": 91997103, "body": "Thanks for all the help, I changed (!file.eof()) and removed the data.size[] in the loop which prints the vector, it works nicely now."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5948557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfj0N.jpg?s=128&g=1", "display_name": "JohnCanessa", "link": "https://stackoverflow.com/users/5948557/johncanessa"}, "is_accepted": false, "score": 0, "last_activity_date": 1549984632, "creation_date": 1549984632, "answer_id": 54653272, "question_id": 52521254, "link": "https://stackoverflow.com/questions/52521254/program-ends-before-executing-cout-the-end/54653272#54653272", "title": "Program ends before executing cout &lt;&lt; &quot;The End&quot;;", "body": "<p>As pointed out you could append &lt;&lt; endl to the cout &lt;&lt; \"The End\"; statement and should output to the console.\nThe reason for this is that typically endl flushes the contents of the stream.\nThat would also add the '\\n' character; which in this case should not matter.\nYou can always append &lt;&lt; flush to the statement and should output the contents of the stream to the console.</p>\n"}], "owner": {"reputation": 13, "user_id": 10243341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z4E3-EkI3Bg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOU3870RmheqYfTk0f9qitYeYhsJg/mo/photo.jpg?sz=128", "display_name": "yun1001", "link": "https://stackoverflow.com/users/10243341/yun1001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549984632, "creation_date": 1537975448, "question_id": 52521254, "link": "https://stackoverflow.com/questions/52521254/program-ends-before-executing-cout-the-end", "title": "Program ends before executing cout &lt;&lt; &quot;The End&quot;;", "body": "<p>Was testing this function in another cpp but it didn't work so I put it in a new cpp for testing, below is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\ntypedef vector&lt;string&gt; vstring;\nvector&lt;vstring&gt; data;\n\nvoid createDisplay(); \n\nbool checkFile(); //checks if the txt file is empty or not, if yes display \"no data\"\n\nint main()\n{\n    checkFile();\n    createDisplay();\n\n    cout &lt;&lt; \"The End\";     //this doesn't shows up\n\n    return 0;\n}\n\nvoid createDisplay() //writes data from a txt file to 2d vector\n {                   //(12 rows fixated, total data are all multiples of 12) \n                    //and display all of its contents\n    int i, j, k ,l;\n\n    ifstream file;\n    file.open(\"data.txt\");\n\n    while (!file.eof()) {\n        for (int i = 0; i &lt; 3; i++){\n            vector&lt;string&gt; tmpVec;\n            string tmpString;\n\n                for (int j = 0; j &lt; 12; j++){\n                getline(file, tmpString);\n                tmpVec.push_back(tmpString);\n                }\n            data.push_back(tmpVec);\n        }\n    }   \n\n\n    string line, tempStr;\n\n    while (getline(file, line)) \n    {\n\n        data.push_back(vstring());\n        istringstream strm(line);\n        while (strm &gt;&gt; tempStr)\n        data.back().push_back(tempStr);\n    }\n\n\n    string list[12] =        //list of items, tried splitting into two functions from here\n    {\n        \"[1]    A: \",\n        \"[2]    B: \",\n        \"[3]    C: \",\n        \"[4]    D: \",\n        \"[5]    E: \",\n        \"[6]    F: \",\n        \"[7]    G: \",\n        \"[8]    H: \",\n        \"[9]    I: \",\n        \"[10]   J: \",\n        \"[11]   K: \",\n        \"[12]   L: \"\n    };\n\n    if (checkFile() == true)\n    {\n        for(k=0; k&lt;12; k++)\n        {\n            cout &lt;&lt; list[k] &lt;&lt; \"No data\" &lt;&lt; endl;\n        }\n    }\n    else \n    {\n        for(k=0;k&lt;data[l].size();k++)\n        {\n            cout &lt;&lt; list[k] ;\n\n            for(l=0;l&lt;data.size();l++)\n            {\n                cout &lt;&lt; left &lt;&lt; setw(25) &lt;&lt; data[l][k]  ;\n            }\n            cout &lt;&lt;endl;\n        }\n    }\n}\n\nbool checkFile()  //checks if the txt file is empty or not, if yes display \"no data\"\n{\n    ifstream file;\n    file.open(\"data.txt\");\n\n    if (file.peek() == ifstream::traits_type::eof())\n        return true;\n    else\n        return false;\n}\n</code></pre>\n\n<p>Tested some cases,</p>\n\n<p>Case 1: There is data in the txt file, data is successfully written into the vector, all data are displayed nicely, then programs stuns for a while, \"The End\" does not appear and the program ends.</p>\n\n<p>Case 2: There is no data in the txt file, checkFile() works and displays \"no data\", \"The End\" appears.</p>\n\n<p>I tried splitting createDisplay() into 2, one writing data into the vector, one displays content of vector, this round the program just stuns for a moment and ends without showing anything</p>\n"}, {"tags": ["c++", "smart-pointers"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1537975277, "post_id": 52521166, "comment_id": 91981903, "body": "1) Did you try stepping through your code with a debugger? 2) &quot;<i>I tried to use the &amp; operator, but got i wrong.</i>&quot; One cannot learn C++ by guessing. Consider learning from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. 3) Your <code>operator=</code> exhibits undefined behavior, due to not returning in all code paths."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1537975337, "post_id": 52521166, "comment_id": 91981945, "body": "Even if <code>*_counter++;</code> in your first constructor <i>wasn&#39;t</i> referring to an <i>indeterminate</i> location (a bug in itself), the syntax is wrong if you want to increment the pointed-to value. That statement post-increments the pointer; not the value."}, {"owner": {"reputation": 41, "user_id": 9760389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7924834ddbb81212bd481795cf2f374?s=128&d=identicon&r=PG&f=1", "display_name": "Truut", "link": "https://stackoverflow.com/users/9760389/truut"}, "edited": false, "score": 0, "creation_date": 1537975393, "post_id": 52521166, "comment_id": 91981983, "body": "yeah i used the Debugger and got the read access error. The smartPointer got the right value, but i dont know how to return it instead of the adress."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1537975445, "post_id": 52521166, "comment_id": 91982013, "body": "Where do you initialize <code>_counter</code> to actually point to something?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1537975667, "post_id": 52521166, "comment_id": 91982160, "body": "I think you keep incrementing the pointer rather than the <i>pointed to</i> object. <code>sp._counter += 1</code> should be <code>*sp._counter += 1</code> etc..."}, {"owner": {"reputation": 41, "user_id": 9760389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7924834ddbb81212bd481795cf2f374?s=128&d=identicon&r=PG&f=1", "display_name": "Truut", "link": "https://stackoverflow.com/users/9760389/truut"}, "edited": false, "score": 0, "creation_date": 1537975855, "post_id": 52521166, "comment_id": 91982271, "body": "When i try to initialize _counter with *_counter = 1 in the Constructur i get an read access error again."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537976119, "post_id": 52521166, "comment_id": 91982433, "body": "That&#39;s because <code>_counter</code> is a pointer that was never set to some determinate address (see my first comment, first sentence, which explicitly mentions this as a bug). Smart pointers have a shared &quot;data&quot; block that at a <i>minimum</i> track the reference count. You have a pointer ready to point to that block, but never bothered to initialize it to something worth pointing to."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537976316, "post_id": 52521166, "comment_id": 91982565, "body": "same in different words: <code>int *_counter;</code> is just a pointer, but in your code there is no counter where this pointer would point to. You need to create that counter and destroy it when no longer needed. If you werent trying to implement a smart_pointer I would suggest to use a smart pointer instead of a raw one for <code>counter</code> ;)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1537981399, "post_id": 52521166, "comment_id": 91985203, "body": "...why is <code>counter</code> a pointer at all? If you want to count up and down, you don&#39;t need a pointer. You just need an integer."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 1, "last_activity_date": 1537980007, "last_edit_date": 1537980007, "creation_date": 1537979696, "answer_id": 52522438, "question_id": 52521166, "link": "https://stackoverflow.com/questions/52521166/smartpointer-template/52522438#52522438", "title": "SmartPointer Template", "body": "<p>Well this sticks out:</p>\n\n<pre><code>SmartPointer(T *obj) {\n    cout &lt;&lt; \"Konstruktor SmartPointer \\n\";\n    _object = obj;\n    *_counter++;      // I don't see _counter being initialized.\n                      // So here you are incrementing the content of some\n                      // random memory location.\n}\n</code></pre>\n\n<p>This looks wrong:</p>\n\n<pre><code>SmartPointer&amp; operator=(SmartPointer&amp; sp) {\n    ....\n    if (*_counter &gt; 0) {\n        removeOne();\n        sp._object = _object;\n        sp._counter += 1;\n\n        // Hold on you have not updated this object.\n        //\n        // You have made the other smart pointer point at your object\n        // (which oucld have been deleted) but keep the reference\n        // count for the old object and incremented it!!!!\n        return *this;\n    }\n}\n</code></pre>\n\n<p>I wrote something about smart pointer. I think you definately need to read.</p>\n\n<p><a href=\"https://lokiastari.com/blog/2014/12/30/c-plus-plus-by-example-smart-pointer/index.html\" rel=\"nofollow noreferrer\">Smart-Pointer - Unique Pointer</a><br>\n<a href=\"https://lokiastari.com/blog/2015/01/15/c-plus-plus-by-example-smart-pointer-part-ii/index.html\" rel=\"nofollow noreferrer\">Smart-Pointer - Shared Pointer</a><br>\n<a href=\"https://lokiastari.com/blog/2015/01/23/c-plus-plus-by-example-smart-pointer-part-iii/index.html\" rel=\"nofollow noreferrer\">Smart-Pointer - Constructors</a></p>\n"}], "owner": {"reputation": 41, "user_id": 9760389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7924834ddbb81212bd481795cf2f374?s=128&d=identicon&r=PG&f=1", "display_name": "Truut", "link": "https://stackoverflow.com/users/9760389/truut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52522438, "answer_count": 1, "score": 0, "last_activity_date": 1537980007, "creation_date": 1537975155, "question_id": 52521166, "link": "https://stackoverflow.com/questions/52521166/smartpointer-template", "title": "SmartPointer Template", "body": "<p>I'm trying to implement a SmartPointer template Class. Basically shared_ptr, when i'm right.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass SmartPointer\n{\n    T *_object;\n    int *_counter;\n\n    void removeOne() {\n            *_counter -= 1;\n\n        if (*_counter == 0) {\n            delete _object;\n\n        }\n    }\n\npublic:\n    SmartPointer(T *obj) {\n        cout &lt;&lt; \"Konstruktor SmartPointer \\n\";\n        _object = obj;\n        *_counter++;\n    }\n\n    SmartPointer(SmartPointer&amp; sp) {\n        cout &lt;&lt; \"Kopier-Konstruktor SmartPointer \\n\";\n        _object = sp._object;\n        sp._counter += 1;\n        _counter = sp._counter;\n    }\n\n    ~SmartPointer() {\n        cout &lt;&lt; \"Destruktor SmartPointer \\n\";\n        removeOne();\n    }\n\n    SmartPointer&amp; operator=(SmartPointer&amp; sp) {\n        cout &lt;&lt; \"Zuweisungsoperator SmartPointer \\n\";\n\n        if (this == &amp;sp) {\n            return *this;\n        }\n        if (*_counter &gt; 0) {\n            removeOne();\n            sp._object = _object;\n            sp._counter += 1;\n\n            return *this;\n        }\n    }\n\n    int getCounter() {\n        return *_counter;\n     }\n\n    T* operator*() {\n        return _object;\n    }\n};\n\ntemplate &lt;typename T&gt;\nint fkt(SmartPointer&lt;T&gt; x) {\n    cout &lt;&lt; \"fkt:value = \" &lt;&lt; *x &lt;&lt; endl;\n    cout &lt;&lt; \"fkt:count = \" &lt;&lt; x.getCounter() &lt;&lt; endl;\n    return x.getCounter();\n}\n\nint main() {\n\n    SmartPointer&lt;double&gt; sp(new double(7.5));\n    fkt(sp);\n\n    return 0;\n}\n</code></pre>\n\n<p>My Problem is that get an read access error for the getCounter function and that the * operator just returns the address.\nHow can i make it work?\nI tried to use the &amp; operator, but got i wrong. </p>\n\n<p>Glad for every help!</p>\n"}, {"tags": ["c++", "linux", "gcc", "raspberry-pi3", "toolchain"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537975469, "post_id": 52521138, "comment_id": 91982026, "body": "You could install a modern compiler on the Pi (it probably already has one if it&#39;s running a reasonably up-to-date distribution) and then simply compile the code <i>on the Pi</i>."}, {"owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537975996, "post_id": 52521138, "comment_id": 91982360, "body": "That is the point, because on the Pi my project will take 12+ hours to compile, and each change of code will be painful."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1537976331, "post_id": 52521138, "comment_id": 91982576, "body": "That&#39;s painful. But if it takes 12 hours I would imagine you have some build system issues you could address to make it faster. Like: Install and use <code>ccache</code> it helps enormously with subsequent builds. Make sure your build system dependencies are correct so you only rebuild what&#39;s needed. Make extensive use of forward declarations, extern templates etc, where possible, rather than including full definitions. Don&#39;t include unneeded headers. Etc etc. Doing those things would also speed up your non-Pi builds."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1537976840, "post_id": 52521138, "comment_id": 91982851, "body": "C++ builds are very easy to make slow, but can be made fast(er) (significantly so) with some effort. The ~500K line code base I work with used to take ~40min to build on a 32core machine 6 years ago. We&#39;ve gotten that down to ~10min for a full build (on a 20 core machine), 3min for most rebuilds with minor changes. It took some work, but the end result was a massive improvement."}, {"owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1537977789, "post_id": 52521138, "comment_id": 91983415, "body": "The code compiling opencv from scratch (latest code, and it constantly change), and have some amount of templates, too, which increases time. Anyway, it is easier to compile on Raspberry Pi, but the time is precious"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1551936410, "post_id": 52521138, "comment_id": 96825101, "body": "Have you tried -march? Did it work?"}, {"owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "edited": false, "score": 0, "creation_date": 1552921611, "post_id": 52521138, "comment_id": 97183624, "body": "No, because someone told me that it can&#39;t work, because anyway will be a lot of problems on linking stage"}], "answers": [{"tags": [], "owner": {"reputation": 712, "user_id": 10158117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f798f83b3be0e79e542116d9b86a72e?s=128&d=identicon&r=PG", "display_name": "abhiTronix", "link": "https://stackoverflow.com/users/10158117/abhitronix"}, "is_accepted": true, "score": 1, "last_activity_date": 1552034166, "last_edit_date": 1552034166, "creation_date": 1551853308, "answer_id": 55016815, "question_id": 52521138, "link": "https://stackoverflow.com/questions/52521138/cross-compilation-special-cross-compiler-or-just-gcc-with-option-march/55016815#55016815", "title": "Cross compilation: special cross compiler or just gcc with option -march?", "body": "<p>If you want full Cross Compiler c++17 standard for your Raspberry Pi, you can try my Latest Pre-Built/Pre-Compiled Open-Sourced GCC Toolchains for Raspberry Pi along with well-documented instructions from this <a href=\"https://github.com/abhiTronix/raspberry-pi-cross-compilers\" rel=\"nofollow noreferrer\">Github Repo</a>:</p>\n\n<p><strong>The GCC versions available as of now are as follows:</strong></p>\n\n<ul>\n<li>GCC 6.3.0 </li>\n<li>GCC 7.4.0 </li>\n<li>GCC 8.2.0 </li>\n<li>GCC 8.3.0</li>\n</ul>\n\n<p><strong>And, the Supported Environments:</strong></p>\n\n<ul>\n<li><strong>Cross-Compiler:</strong> All Linux Distros (x32/x64) are currently supported.</li>\n<li><strong>Native-Compiler:</strong> All Raspberry Pi version/model with Raspbian OS is supported. Other OS may/may-not work.</li>\n</ul>\n\n<p><strong>also the currently Supported Languages are:</strong></p>\n\n<ul>\n<li>C++</li>\n<li>C</li>\n<li>Fortran</li>\n</ul>\n"}], "owner": {"reputation": 403, "user_id": 2325656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JQsF5.png?s=128&g=1", "display_name": "stackoverflower", "link": "https://stackoverflow.com/users/2325656/stackoverflower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 1, "accepted_answer_id": 55016815, "answer_count": 1, "score": 5, "last_activity_date": 1552034166, "creation_date": 1537975083, "question_id": 52521138, "link": "https://stackoverflow.com/questions/52521138/cross-compilation-special-cross-compiler-or-just-gcc-with-option-march", "title": "Cross compilation: special cross compiler or just gcc with option -march?", "body": "<p>I need to compile a program for Raspberry PI 3+ on Linux machine, and code must be compliant with c++17 standard. Official toolchain is outdated and lack c++17 compilation option. Two solutions that I can see right now are:</p>\n\n<p>1) gcc has an option -march, which described here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html\" rel=\"noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html</a></p>\n\n<p>2) Installing arm-linux-gbueabi-gcc package, as proposed here: <a href=\"https://stackoverflow.com/questions/52249105/cross-compiling-for-raspberry-pi-with-modern-gcc\">Cross-compiling for Raspberry pi with modern gcc</a></p>\n\n<p>What is the difference between two options? Is there some other possibilities that will work?</p>\n"}, {"tags": ["c++", "powershell", "callback", "com"], "answers": [{"comments": [{"owner": {"reputation": 47535, "user_id": 6920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW7bk.jpg?s=128&g=1", "display_name": "x0n", "link": "https://stackoverflow.com/users/6920/x0n"}, "edited": false, "score": 0, "creation_date": 1538008194, "post_id": 52521421, "comment_id": 91995099, "body": "This won&#39;t work. There will be no runspace on the thread to execute the scriptblock when the callback occurs."}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "reply_to_user": {"reputation": 47535, "user_id": 6920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW7bk.jpg?s=128&g=1", "display_name": "x0n", "link": "https://stackoverflow.com/users/6920/x0n"}, "edited": false, "score": 0, "creation_date": 1538008628, "post_id": 52521421, "comment_id": 91995196, "body": "@x0n usually the scriptblock gets typecast to whatever it needs to be as a delegate."}, {"owner": {"reputation": 47535, "user_id": 6920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW7bk.jpg?s=128&g=1", "display_name": "x0n", "link": "https://stackoverflow.com/users/6920/x0n"}, "edited": false, "score": 0, "creation_date": 1538008742, "post_id": 52521421, "comment_id": 91995216, "body": "Yes, a delegate to ScriptBlock.Invoke, which expects to find a Runspace in a TLS (thread local storage) slot to actually do the interpretation of the script. Since the callback doesn&#39;t occur on a powershell threadpool thread, there won&#39;t be a runspace, and you&#39;ll get an error stating this quite unambiguously. You might be lucky if there&#39;s no marshalling between threads, and you run powershell.exe in STA mode, and the call to DoSomeActions is synchronous."}, {"owner": {"reputation": 1700, "user_id": 372832, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/0IBMR.jpg?s=128&g=1", "display_name": "AcidJunkie", "link": "https://stackoverflow.com/users/372832/acidjunkie"}, "edited": false, "score": 0, "creation_date": 1538034496, "post_id": 52521421, "comment_id": 92003208, "body": "Does not work unfortunately. The callback method object does not implement the COM interface <code>IDispatch</code>. I guess i have to create a custom class in the script which implements the COM interface <code>IActionCallbackData</code> :/"}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "reply_to_user": {"reputation": 1700, "user_id": 372832, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/0IBMR.jpg?s=128&g=1", "display_name": "AcidJunkie", "link": "https://stackoverflow.com/users/372832/acidjunkie"}, "edited": false, "score": 0, "creation_date": 1538047656, "post_id": 52521421, "comment_id": 92011142, "body": "@AcidJunkie you can call the constructor to an IDispatch type without needing the extra interface. Give me a few and I&#39;ll circle back"}], "tags": [], "owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "is_accepted": false, "score": 0, "last_activity_date": 1537980632, "last_edit_date": 1537980632, "creation_date": 1537975948, "answer_id": 52521421, "question_id": 52520664, "link": "https://stackoverflow.com/questions/52520664/callback-to-a-powershell-function-of-a-com-object/52521421#52521421", "title": "Callback to a powershell function of a COM object", "body": "<p>Taking your vbs example:</p>\n\n<pre><code>Sub ProgressCallback (data)\n     WScript.Echo data.Message\nEnd sub\n\nSet myObj= CreateObject(\"MyClass.MyClass\")\nmyObj.RegisterCallback GetRef(\"ProgressCallback\")\n\nmyObj.DoSomeActions //this method will call ProgressCallback()\n</code></pre>\n\n<p>You should be able to do this in powershell as such:</p>\n\n<pre><code>$obj = New-Object -ComObject MyClass.MyClass\n$obj.RegisterCallback({param($data) $data.Message})\n$obj.DoSomeActions()\n</code></pre>\n\n<hr>\n\n<p>If your goal is to define it as a function (in that you will be re-using it elsewhere), you have to access the <code>Function</code> drive to get the scriptblock definition:</p>\n\n<pre><code>function ProgressCallback\n{\n    param($data)\n\n    $data.Message\n}\n$obj.RegisterCallback($Function:ProgressCallback)\n</code></pre>\n"}], "owner": {"reputation": 1700, "user_id": 372832, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/0IBMR.jpg?s=128&g=1", "display_name": "AcidJunkie", "link": "https://stackoverflow.com/users/372832/acidjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1537980632, "creation_date": 1537973655, "question_id": 52520664, "link": "https://stackoverflow.com/questions/52520664/callback-to-a-powershell-function-of-a-com-object", "title": "Callback to a powershell function of a COM object", "body": "<p>A long time ago i created a COM class which does some things and also provides a callback registration:</p>\n\n<pre><code>HRESULT RegisterCallback([in] IUnknown* callbackFunction);\n</code></pre>\n\n<p>The <code>callbackFunction</code> can either be of type <code>IDispatch</code> or <code>ICallbackHandler</code></p>\n\n<pre><code>interface IActionCallbackHandler : IUnknown {\n    [id(1)] HRESULT ActionCallback(IActionCallbackData* data);\n};\n</code></pre>\n\n<p><code>IDispatch</code> was used to register VBScript sub routines as callback method e.g.:</p>\n\n<pre><code>Sub ProgressCallback (data)\n     WScript.Echo data.Message\nEnd sub\n\nSet myObj= CreateObject(\"MyClass.MyClass\")\nmyObj.RegisterCallback GetRef(\"ProgressCallback\")\n\nmyObj.DoSomeActions //this method will call ProgressCallback()\n</code></pre>\n\n<p>However, the engineers try to get rid of VBScript and replace everything by powershell. Everything works in powershell except the callback. So there's no progress and nothing they can log.</p>\n\n<p>How can i achieve this callback in powershell? It would be perfect to reference a powershell function the same way as in VBScript. This way, they could use still their logging objects etc.</p>\n"}, {"tags": ["c++", "parameter-passing", "user-input"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1537973575, "post_id": 52520598, "comment_id": 91980824, "body": "<code>userNumber</code> is an <code>int</code>. You can&#39;t store a string of text in an <code>int</code> (<code>&quot;Corey&quot;</code> is not an <code>int</code>). The text is still in the input buffer when you get the next input and it still fails to read as an <code>int</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1537973598, "post_id": 52520598, "comment_id": 91980845, "body": "When you are prompted to enter your name, do you actually type in your name? That won&#39;t work, because you are attempting to read it into an <code>int</code> variable, <code>int userName</code>. Only a &quot;name&quot; that is parseable as an int would work."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1537973813, "post_id": 52520598, "comment_id": 91980991, "body": "A read of a non-numeric string into an <code>int</code> fails, so the <code>int</code> remains uninitialized (i.e. contains garbage)."}], "answers": [{"tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 4, "last_activity_date": 1537981642, "last_edit_date": 1537981642, "creation_date": 1537977775, "answer_id": 52521964, "question_id": 52520598, "link": "https://stackoverflow.com/questions/52520598/user-input-as-argument-c/52521964#52521964", "title": "User Input as Argument C++", "body": "<p>Because <code>userName</code> is an <code>int</code> and you are trying to use <code>std::cin</code> to read a sequence of non-numeric characters into it, the operation fails and leaves <code>std::cin</code> in a <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/iostate#The_failbit\" rel=\"nofollow noreferrer\"><code>fail()</code>ed state</a> and so none of the following <code>operator&gt;&gt;</code> calls on <code>std::cin</code> will succeed in extracting further input characters.</p>\n\n<blockquote>\n  <p>It does't let me input a number at that part and it just prints out a\n  random number.</p>\n</blockquote>\n\n<p>Until C++11 the behavior was to leave the <em>rhs</em> unmodified, which in your case is an uninitialized <code>int</code>, hence the garbage you see when printing.</p>\n\n<p>You can see all of that in the reference of <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt\" rel=\"nofollow noreferrer\"><code>std::basic_istream::operator&gt;&gt;()</code></a>:</p>\n\n<blockquote>\n  <ul>\n  <li>If extraction fails (e.g. if a letter was entered where a digit is expected), \n  <code>value</code> is left unmodified and <code>failbit</code> is set. (until C++11)</li>\n  <li>If extraction fails, zero is written to value and <code>failbit</code> is set. If extraction results in the value too large or too small to fit in <code>value</code>, <code>std::numeric_limits&lt;T&gt;::max()</code> or <code>std::numeric_limits&lt;T&gt;::min()</code> is written and <code>failbit</code> flag is set. (since C++11)</li>\n  </ul>\n</blockquote>\n\n<p>You can still recover from such <code>fail()</code> state in the stream by clearing its error state flags and ignoring what's in the buffer:</p>\n\n<pre><code>int main()\n{\n    std::cout &lt;&lt; \"Please input your name: \" &lt;&lt; std::endl; // ask user name\n    int userName;                                         // variable to store user name\n    std::cin &gt;&gt; userName;                                 // get user name\n\n    if (!std::cin) // Check if `fail()`\n    {\n        std::cout &lt;&lt; \"input stream failure :-(\" &lt;&lt; '\\n';\n\n        // Clearing flags and input buffer\n        std::cin.clear();\n        std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Your name input was: \" &lt;&lt; userName &lt;&lt; '\\n';\n    }\n\n    printUserNumber(askUserNumber());                       // call to askUserNumber to get user input to print to screen\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>Please input your name: \ninput stream failure :-(\nPlease input a number: \nYour number input was: 7\n</code></pre>\n\n<p>The solution to get your desired behavior is simply to make <code>userName</code> a <code>std::string</code> for example. In which case <a href=\"https://wandbox.org/permlink/PmckXB5zU4RwdQjX\" rel=\"nofollow noreferrer\">the above code produces the output:</a></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>Please input your name: \nYour name input was: Corey\nPlease input a number: \nYour number input was: 7\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10419120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Tb0tEUUKMy8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWbNt9zKDU7s3D4czdFnucRcD9qzg/mo/photo.jpg?sz=128", "display_name": "Corey Smith", "link": "https://stackoverflow.com/users/10419120/corey-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 52521964, "answer_count": 1, "score": 2, "last_activity_date": 1537981642, "creation_date": 1537973484, "question_id": 52520598, "link": "https://stackoverflow.com/questions/52520598/user-input-as-argument-c", "title": "User Input as Argument C++", "body": "<p>I am new to coding and was wondering why my code is not acting the way I intended. I build the code as a training program to help me practice what i have learned. The code seems to work fine, as expected, when I comment out lines 19 - 23,the multi line comment section, but when I don't that's when it starts to act unexpectedly.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint askUserNumber ()\n{\n    std::cout &lt;&lt; \"Please input a number: \" &lt;&lt; std::endl;  //ask user to input number\n    int userNumber;                                       //define integer to store input\n    std::cin &gt;&gt; userNumber;                               // get input from user\n\n    return (userNumber);                                  // return input to caller\n}\n\nvoid printUserNumber (int userNumber)\n{\n    std::cout &lt;&lt; \"Your number input was: \" &lt;&lt; userNumber &lt;&lt; std::endl; //print input to user screen\n}\n\nint main ()\n{\n    /*\n    std::cout &lt;&lt; \"Please input your name: \" &lt;&lt; std::endl;      // ask user name\n    int userName;                                         // variable to store user name\n    std::cin &gt;&gt; userName;                                 // get user name\n    */\n\n    printUserNumber(askUserNumber());                       // call to askUserNumber to get user input to print to screen\n    return(0);\n}\n</code></pre>\n\n<p>Results(Without Commenting out code):</p>\n\n<p>Please input your name:  <br/>\nCorey <br/>\nPlease input a number: <br/>\nYour number input was: \"someGarbageNumber\" <br/></p>\n\n<p>It does't let me input a number at that part and it just prints out a random number. <br/></p>\n\n<p>Results(With Commenting out code): <br/></p>\n\n<p>Please input a number: <br/>\n7 <br/>\nYour number input was: 7 <br/></p>\n\n<p>This time it runs perfectly and there are no problems. I don't understand why the three lines asking for the users name cause it to not allow me to input a number when the function call for printUserNumber(askUserNumber()) gets to the point that it prints \"Please input a number:\" and doesn't allow me to input one. Thank you for any responses. I hope I wrote my question in a good format, and explained my problem in a clear and straight forward way. Hopefully the results will section will also allow for some clarity. Looking forward to a solution thanks again. </p>\n"}, {"tags": ["c++", "function", "switch-statement"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537973343, "post_id": 52520475, "comment_id": 91980668, "body": "Where do you set the balance with the return of <code>deposit</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537973441, "post_id": 52520475, "comment_id": 91980728, "body": "You are <i>printing</i> the new balance and hoping somebody or something will magically cause it to be <i>remembered</i>. It won&#39;t happen because there&#39;s no magic."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1537973451, "post_id": 52520475, "comment_id": 91980733, "body": "This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> at least not <b>Minimal</b>. So much <code>cin</code> and <code>cout</code> for showing that your <code>deposit()</code> is called inside <code>cout</code> without storing the result anywhere..."}, {"owner": {"reputation": 29, "user_id": 10062898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aahFMtni0NI/AAAAAAAAAAI/AAAAAAAAAAw/6jglUMkuy4k/photo.jpg?sz=128", "display_name": "sweetdish", "link": "https://stackoverflow.com/users/10062898/sweetdish"}, "edited": false, "score": 0, "creation_date": 1537973519, "post_id": 52520475, "comment_id": 91980787, "body": "In the function instead of manually calculating it, I used function then called it in my ATM Case 2. Is that correct?"}, {"owner": {"reputation": 2119, "user_id": 5879778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ELi77pnET0A/AAAAAAAAAAI/AAAAAAAAAEQ/7gEOlIOZ6ow/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5879778/chris"}, "edited": false, "score": 0, "creation_date": 1537973636, "post_id": 52520475, "comment_id": 91980874, "body": "No. In <code>deposit()</code> you&#39;re simply returning the <code>newbal</code> and printing <code>newbal</code> with cout. Instead, you should be setting <code>newbal</code> to <code>x</code>, so when the next time it runs, the balance is updated."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1537973671, "post_id": 52520475, "comment_id": 91980898, "body": "1. Remove all the <code>&#47;&#47;----------------</code> comments 2. For each case create a function, for example <code>void atm_case_4(void) { cout &lt;&lt;&quot;\\n\\nThank You!&quot; &lt;&lt; endl; }</code> and call the function in that case. 3. That way the functions names are really comments and the code is well organized. 4. Fix the code with modifying x in the deposit case and leaving y as zero.  <code>cin &gt;&gt; y; x += y; y = 0;</code> or better <code>cin &gt;&gt; y; x = deposit(x, y); y = 0;</code>. Or make withdraw and deposit take a reference to x and change it in them."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537973678, "post_id": 52520475, "comment_id": 91980906, "body": "@sweetdish You have two functions, where each of them are two lines.  Then you have a gigantic <code>main</code> function full of comments and unnecessary &quot;menu&quot; code, and it is difficult to see where you&#39;re calling these 2 tiny functions.  How about cutting your <code>main</code> function to 10 lines or less, and just call those functions?"}, {"owner": {"reputation": 2119, "user_id": 5879778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ELi77pnET0A/AAAAAAAAAAI/AAAAAAAAAEQ/7gEOlIOZ6ow/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5879778/chris"}, "edited": false, "score": 3, "creation_date": 1537973722, "post_id": 52520475, "comment_id": 91980934, "body": "Side note: I would get in a habit of giving your variables some meaningful names. Variables like <code>x</code> and <code>y</code> don&#39;t really have any substance to them unless they&#39;re actually x/y coordinates."}, {"owner": {"reputation": 29, "user_id": 10062898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aahFMtni0NI/AAAAAAAAAAI/AAAAAAAAAAw/6jglUMkuy4k/photo.jpg?sz=128", "display_name": "sweetdish", "link": "https://stackoverflow.com/users/10062898/sweetdish"}, "edited": false, "score": 0, "creation_date": 1537974044, "post_id": 52520475, "comment_id": 91981150, "body": "Oh okay, i really made a mistake. I can really shorten up my codes by using void functions. Thanks, I know that you can call a function to calculate but not print text. I&#39;ll shorten it.  Also I have remove all the commends and took ur advice"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 2, "last_activity_date": 1537975364, "last_edit_date": 1537975364, "creation_date": 1537974789, "answer_id": 52521046, "question_id": 52520475, "link": "https://stackoverflow.com/questions/52520475/variable-always-resets-to-default-in-functions/52521046#52521046", "title": "Variable always resets to default in Functions", "body": "<p>Its really hard to spot the important pieces, but basically your problem can be boiled down to something like </p>\n\n<pre><code>int add(int x,int y) { return a+b; }\nint sub(int x,int y) { return a-b; }\n\nint main() {\n    int initial = 0;\n    // add 10 then subtract 5\n    std::cout &lt;&lt; add(initial,10) &lt;&lt; '\\n';  // prints 10\n    std::cout &lt;&lt; sub(initial,5) &lt;&lt; '\\n';   // prints -5\n}\n</code></pre>\n\n<p>When what you actually want is something like </p>\n\n<pre><code>int main() { \n    int initial = 0;\n    // add 10 then subtract 5 and update initial\n    initial = add(initial,10);\n    std::cout &lt;&lt; initial &lt;&lt; '\\n';\n    initial = sub(initial,5); \n    std::cout &lt;&lt; initial &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Your methods correctly calculates the new amount, but when you call those methods you ignore the return value when instead you want to update some variable. </p>\n\n<p>Some other suggestions (in random order): </p>\n\n<ul>\n<li>use meaningful names. <code>x</code> and <code>y</code> do not convey any meaning, compare <code>int deposit(int current_balance, int amount)</code> to <code>int deposit(int x,int y)</code> </li>\n<li>use functions to split your code into smaller pieces (eg it would be a good idea to seperate input, output and logic). Whenever you find yourself writing a comment describing what a block of code is doing, this block of code is a good candidate for a function that gets a proper name instead of a comment</li>\n<li>dont use <code>std::endl</code> when you want to end a line (<code>std::endl</code> ends the line <strong>and flushes</strong> the stream, which is most of the time not what you want), use <code>\\n</code> instead</li>\n<li>dont use <code>using namespace std;</code>. It wont do much harm in your current code, but read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">here</a> why you never should do it in a header, and better dont get used to bad habits from the start.</li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 10062898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aahFMtni0NI/AAAAAAAAAAI/AAAAAAAAAAw/6jglUMkuy4k/photo.jpg?sz=128", "display_name": "sweetdish", "link": "https://stackoverflow.com/users/10062898/sweetdish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52521046, "answer_count": 1, "score": 0, "last_activity_date": 1537975364, "creation_date": 1537973139, "question_id": 52520475, "link": "https://stackoverflow.com/questions/52520475/variable-always-resets-to-default-in-functions", "title": "Variable always resets to default in Functions", "body": "<p>I am building an ATM sort of program where you can deposit and withdraw balance with the use of functions. I noticed at first that after i deposit first time, it works fine but after the second time using deposit it doesn't add it to the current balance but the balance before it.</p>\n\n<p>For example:\n<br><b>(1st Attempt)</b>\n<br>*Balance = 1000\n<br>*I deposit 500\n<br>*Balance is now = 1500\n<br><br>\n<b>(2nd Attempt)<br></b>\n*I deposit 700\n<br>*Balance is now 1700</p>\n\n<p>Instead of making it to <b>2200</b>, it resets back to <b>1000</b> before went for my second attempt resulting in a result of <b>1700</b>.\nCan anyone please explain what went wrong in the code? I am willing to not only get the correct code but to also learn how it was done.</p>\n\n<p>This is for my training in c++.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint deposit(int x, int y)\n{\n    int newbal = x + y;\n    return newbal;\n}\n\nint withdraw(int x, int y)\n{\n    int newbal = x - y;\n    return newbal;\n}\nint main()\n{\n    int menu;\n    int selection;\n    double x = 1000, y;\n    int trans;\n    char user[20], pass[20], pktc[3];\n    string newuser, newpass;\n\n    do{\n    system (\"CLS\");\n    cout &lt;&lt; \"Welcome To Bank\" &lt;&lt; endl;\n    cout &lt;&lt; \"[1] Register\" &lt;&lt; endl;\n    cout &lt;&lt; \"[2] Login\" &lt;&lt; endl;\n    cout &lt;&lt; \"[3] Exit\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\n\\nEnter command: \" &lt;&lt;endl;\n    cin &gt;&gt; menu;\n    switch(menu)\n    {\n\n//----------------------------------------------------------------CASE 1------------------------------------------------------------------------------//\n//----------------------------------------------------------------REGISTER----------------------------------------------------------------------------//\n\n        case 1:\n        system (\"CLS\");\n        cout &lt;&lt; \"&lt;-------REGISTER-------&gt;\\n\\n\";\n        cout &lt;&lt; \"Enter Name: \";\n        cin &gt;&gt; user;\n        newuser = user;\n        cout &lt;&lt; \"Enter Password: \";\n        cin &gt;&gt; pass;\n        newpass = pass;\n        cout &lt;&lt;\"REGISTERED SUCCESSFULLY!\" &lt;&lt; endl;\n        cout &lt;&lt;\"\\n\\nPress Any key to contniue\" &lt;&lt; endl;\n        cin &gt;&gt; pktc;\n        system (\"CLS\");\n\n        break;\n\n//------------------------------------------------------------END OF REGISTER--------------------------------------------------------------------------//   \n\n\n\n//----------------------------------------------------------------CASE 2------------------------------------------------------------------------------//\n//-----------------------------------------------------------------LOGIN------------------------------------------------------------------------------//\n\n        case 2:\n        system (\"CLS\");\n        cout &lt;&lt; \"&lt;-------LOGIN-------&gt;\\n\\n\";\n        cout &lt;&lt; \"Enter Username: \";\n        cin &gt;&gt; newuser;\n        cout &lt;&lt; \"Enter Password: \";\n        cin &gt;&gt; newpass;\n        if(newuser != user || newpass != pass)\n        {\n\n//-------------------------------------------------------------FAILED LOGIN----------------------------------------------------------------------------//\n\n            cout &lt;&lt; \"\\nInvalid account\" &lt;&lt; endl;\n            cout &lt;&lt;\"\\n\\nPress Any key to contniue\" &lt;&lt; endl;\n            cin &gt;&gt; pktc;\n            system (\"CLS\");\n        }\n        else if (newuser == user || newpass == pass)\n        {\n\n//----------------------------------------------------------------CASE 2.1------------------------------------------------------------------------------//\n//------------------------------------------------------------SUCCESFULL LOGIN--------------------------------------------------------------------------//\n\n        system (\"CLS\");\n        cout &lt;&lt; \"\\n\\n&lt;-------------------------------WELCOME-------------------------------&gt;\\n\\n\" &lt;&lt; endl;\n        cout&lt;&lt;\"\\nWelcome To Banco De Nelio\";\n        cout&lt;&lt;\"\\nUSERNAME:  \"&lt;&lt; user &lt;&lt; endl;\n        cout&lt;&lt;\"\\n\\n TIP ATM MACHINE\";\n        cout&lt;&lt;\"\\n   1. Balance\";\n        cout&lt;&lt;\"\\n   2. Deposit\";\n        cout&lt;&lt;\"\\n   3. Withdraw\";\n        cout&lt;&lt;\"\\n   4. Exit\";\n\ndo{\n\ncout&lt;&lt;\"\\n\\nChoose Transaction[1-3]:\";\ncin&gt;&gt;trans;\n\nswitch(trans)\n    {\n\n//----------------------------------------------------------------ATM CASE 1------------------------------------------------------------------------------//\n//--------------------------------------------------------------CHECK BALANCE--------------------------------------------------------------------------//\n\n        case 1:\n        system (\"CLS\");\n        cout &lt;&lt; \"\\n\\n&lt;-------------------------------WELCOME-------------------------------&gt;\\n\\n\" &lt;&lt; endl;\n        cout&lt;&lt;\"\\nWelcome To Banco De Nelio\";\n        cout&lt;&lt;\"\\nUSERNAME:  \"&lt;&lt; user &lt;&lt; endl;\n        cout&lt;&lt;\"\\n\\n TIP ATM MACHINE\";\n        cout&lt;&lt;\"\\n   1. Balance\";\n        cout&lt;&lt;\"\\n   2. Deposit\";\n        cout&lt;&lt;\"\\n   3. Withdraw\";\n        cout&lt;&lt;\"\\n   4. Exit\";\n        cout&lt;&lt;\"\\n\\nYour total balance is: \"&lt;&lt; deposit(x, y) ;\n        break;\n\n//----------------------------------------------------------------ATM CASE 2------------------------------------------------------------------------------//\n//--------------------------------------------------------------BEFORE DEPOSIT--------------------------------------------------------------------------//\n\n        case 2:\n        system (\"CLS\");\n        cout &lt;&lt; \"\\n\\n&lt;-------------------------------WELCOME-------------------------------&gt;\\n\\n\" &lt;&lt; endl;\n        cout&lt;&lt;\"\\nWelcome To Banco De Nelio\";\n        cout&lt;&lt;\"\\nUSERNAME:  \"&lt;&lt; user &lt;&lt; endl;\n        cout&lt;&lt;\"\\n\\n TIP ATM MACHINE\";\n        cout&lt;&lt;\"\\n   1. Balance\";\n        cout&lt;&lt;\"\\n   2. Deposit\";\n        cout&lt;&lt;\"\\n   3. Withdraw\";\n        cout&lt;&lt;\"\\n   4. Exit\";\n        cout&lt;&lt;\"\\n\\nEnter the amount:\" ; \n        cin&gt;&gt;y;\n\n//--------------------------------------------------------------AFTER DEPOSIT--------------------------------------------------------------------------//\n\n        system (\"CLS\");\n        cout &lt;&lt; \"\\n\\n&lt;-------------------------------WELCOME-------------------------------&gt;\\n\\n\" &lt;&lt; endl;\n        cout&lt;&lt;\"\\nWelcome To Banco De Nelio\";\n        cout&lt;&lt;\"\\nUSERNAME:  \"&lt;&lt; user &lt;&lt; endl;\n        cout&lt;&lt;\"\\n\\n TIP ATM MACHINE\";\n        cout&lt;&lt;\"\\n   1. Balance\";\n        cout&lt;&lt;\"\\n   2. Deposit\";\n        cout&lt;&lt;\"\\n   3. Withdraw\";\n        cout&lt;&lt;\"\\n   4. Exit\";\n        cout&lt;&lt;\"\\n\\nYour total balance now is: \" &lt;&lt; deposit(x, y) &lt;&lt;endl;\n        break;\n\n//----------------------------------------------------------------ATM CASE 3------------------------------------------------------------------------------//\n//--------------------------------------------------------------WITHDRAW BALANCE--------------------------------------------------------------------------//\n\n        case 3:\n        cout&lt;&lt;\"\\nEnter the amount:\" ;\n        cin&gt;&gt;y;\n        if ( y &gt; x)\n        {\n            cout&lt;&lt;\"\\nYou cannot withdraw \" &lt;&lt; y;\n            cout&lt;&lt;\" because the amount is higher than your balance\" &lt;&lt; endl;\n            break;\n        }\n        else\n            x = x - y;\n            cout&lt;&lt;\"\\nYour Total Balance is now \" &lt;&lt; withdraw(x, y) &lt;&lt; endl;\n            break;\n\n//----------------------------------------------------------------ATM CASE 4------------------------------------------------------------------------------//\n//-------------------------------------------------------------------BACK--------------------------------------------------------------------------------//\n\n        case 4:\n            cout&lt;&lt;\"\\n\\nThank You!\" &lt;&lt; endl;\n            break;\n        default:\n            cout&lt;&lt;\"\\nYou did not enter any valid number\" &lt;&lt; endl;\n            break;\n        }\n    }while (trans&lt;=3);\n        }\n        break;\n\n//----------------------------------------------------------------CASE 3------------------------------------------------------------------------------//\n//-----------------------------------------------------------------EXIT-------------------------------------------------------------------------------//\n\n        case 3:\n        system (\"CLS\");\n        cout &lt;&lt; \"Thank you for using me!\\n\";\n        return 0;\n//-------------------------------------------------------------END OF EXIT----------------------------------------------------------------------------//\n    }\n\n}while (menu&lt;=3);\n}\n</code></pre>\n\n<p>i am not sure if the problem here is the function or a conflict in switch statement.\nThanks In Advance</p>\n\n<p><b>EDIT</b> Please register first :)</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 2, "last_activity_date": 1537974011, "creation_date": 1537974011, "answer_id": 52520795, "question_id": 52520438, "link": "https://stackoverflow.com/questions/52520438/how-to-read-data-written-by-googleprotobufiocodedoutputstreamwritevarint/52520795#52520795", "title": "How to read data written by google::protobuf::io::CodedOutputStream::WriteVarint32ToArray", "body": "<p><code>CodedInputStream::ReadVarint32</code>. There's no <code>static</code> version, you would need to actually instantiate a <code>CodedInputStream</code> backed by your array; there's a constructor taking pointer and size.</p>\n"}], "owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 52520795, "answer_count": 1, "score": 1, "last_activity_date": 1537974011, "creation_date": 1537973017, "question_id": 52520438, "link": "https://stackoverflow.com/questions/52520438/how-to-read-data-written-by-googleprotobufiocodedoutputstreamwritevarint", "title": "How to read data written by google::protobuf::io::CodedOutputStream::WriteVarint32ToArray", "body": "<p>I'm using this method in <code>google::protobuf::io::CodedOutputStream</code> to write variable length encoded integers to a buffer:</p>\n\n<pre><code>static uint8 * WriteVarint32ToArray(uint32 value, uint8 * target)\n</code></pre>\n\n<p>What is the corresponding method to read the same value?</p>\n\n<p>I see these in the documentation:</p>\n\n<pre><code>static const uint8 * ReadLittleEndian32FromArray(const uint8 * buffer, uint32 * value)\nstatic const uint8 * ReadLittleEndian64FromArray(const uint8 * buffer, uint64 * value)\n</code></pre>\n\n<p>But none that seems to do what I need. I was expecting a <code>ReadVarint32FromArray</code> but this seems unavailable. Since I read an write a memory buffer and not a stream, i need a static method like the one uesd for writing.</p>\n\n<p>The documentation: <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.coded_stream\" rel=\"nofollow noreferrer\">https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.coded_stream</a></p>\n"}, {"tags": ["c++", "memory-management", "new-operator"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537973037, "post_id": 52520420, "comment_id": 91980426, "body": "C++ is not Java.  <code>new</code> returns a pointer."}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 0, "creation_date": 1537973076, "post_id": 52520420, "comment_id": 91980459, "body": "Should be <code>Node* n = new Node(10,10);</code>"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1537973080, "post_id": 52520420, "comment_id": 91980461, "body": "<code>Node n = new Node(10,10);</code> --&gt; <code>Node* n = new Node(10,10);</code>"}, {"owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "edited": false, "score": 0, "creation_date": 1537973087, "post_id": 52520420, "comment_id": 91980466, "body": "Aah. Stupidity. thanks."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537973752, "post_id": 52520420, "comment_id": 91980957, "body": "Add an <code>explicit</code> to the constructor to avoid the implicit conversion from <code>int</code>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1537973832, "post_id": 52520420, "comment_id": 91981002, "body": "...and if that <code>index</code> really is to be an index, consider making it <code>unsigned</code> to avoid all those warnings coming up e.g. when comparing it to some other size / index value (which <i>are</i> usually <code>unsigned</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1537973494, "post_id": 52520518, "comment_id": 91980763, "body": "A location in memory doesn&#39;t look like an int."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1537973502, "post_id": 52520518, "comment_id": 91980772, "body": "OT: looks like the compiler is trying to create a Node from int using its constructor. Unless you really want <code>Node n = 5;</code> to succeed, make the constructor <code>explicit</code>"}], "tags": [], "owner": {"reputation": 54, "user_id": 3653254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/poS6V.jpg?s=128&g=1", "display_name": "NikNye", "link": "https://stackoverflow.com/users/3653254/niknye"}, "is_accepted": false, "score": 1, "last_activity_date": 1537974567, "last_edit_date": 1537974567, "creation_date": 1537973237, "answer_id": 52520518, "question_id": 52520420, "link": "https://stackoverflow.com/questions/52520420/invalid-conversion-from-class-pointer-to-int/52520518#52520518", "title": "Invalid conversion from class pointer to int", "body": "<p>When using the new argument you need to use a pointer.  The line</p>\n\n<pre><code>Node n = new Node(10,10);\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>Node* n = new Node(10,10);\n</code></pre>\n\n<p>The error message is because the value returned from new is a numeric location in memory and the closest datatype the compiler knows to represent this is an int.</p>\n"}, {"comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1537973636, "post_id": 52520617, "comment_id": 91980873, "body": "Better yet, use a smart pointer and never call <code>new</code> and <code>delete</code>. Also always useful to look here: <a href=\"https://stackoverflow.com/q/388242/485343\">stackoverflow.com/q/388242/485343</a>"}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 2, "last_activity_date": 1537973544, "creation_date": 1537973544, "answer_id": 52520617, "question_id": 52520420, "link": "https://stackoverflow.com/questions/52520420/invalid-conversion-from-class-pointer-to-int/52520617#52520617", "title": "Invalid conversion from class pointer to int", "body": "<h2>If you want it on the stack</h2>\n\n<pre><code>Node n(10, 10);\n</code></pre>\n\n<p>The object will be made on the stack. It goes out of scope at the end of the function, or even before it (for instance if it was declared in a loop).</p>\n\n<h2>If you want it on the heap</h2>\n\n<pre><code>Node *n = new Node(10, 10);\n</code></pre>\n\n<p>The object is allocated on the heap, and a pointer to it is on the stack. It behaves more you'd expect it with Java's \"references\". The object will not be deleted when the pointer goes out of scope. Instead, <code>delete</code> has to be called at some point or else the memory will be leaked (unlike with Java's \"references\", which are garbage collected).</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 5, "last_activity_date": 1537975499, "last_edit_date": 1537975499, "creation_date": 1537974075, "answer_id": 52520811, "question_id": 52520420, "link": "https://stackoverflow.com/questions/52520420/invalid-conversion-from-class-pointer-to-int/52520811#52520811", "title": "Invalid conversion from class pointer to int", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow noreferrer\"><code>new</code></a> returns a pointer. You can't assign a pointer to <code>n</code>, it's a <code>Node</code>. The quick fix would be to change the offending line to <code>Node * n = new Node(10,10);</code> or <code>auto n = new Node(10,10);</code>.</p>\n\n<p><em>However</em> using <code>new</code> is no longer the recommended solution for the dynamic creation of objects in modern c++. Prefer <code>auto n = std::make_unique&lt;Node&gt;(10, 10);</code> instead which makes <code>n</code> a <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">smart pointer</a>. By using smart pointers, you relieve yourself from having to manually track ownership and from having to remember to <code>delete</code> your object exactly once. You also make your code much more robust in case of unexpected exceptions. You'll need to <code>#include &lt;memory&gt;</code>. See <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\"><code>std::make_unique</code></a> and <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow noreferrer\"><code>std::make_shared</code></a> :</p>\n\n<pre><code>#include &lt;memory&gt;\n\nint main()\n{\n    auto n = std::make_unique&lt;Node&gt;(10,10);\n    return 0;\n}\n</code></pre>\n\n<p>Though in this case, it doesn't seem like dynamic allocation is required. Simply using <code>Node n{10, 10};</code> would be sufficient.</p>\n"}], "owner": {"reputation": 20358, "user_id": 216190, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5a13963fd8a6734ffd1aed8fc76e58ec?s=128&d=identicon&r=PG", "display_name": "Kraken", "link": "https://stackoverflow.com/users/216190/kraken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "closed_date": 1537992133, "accepted_answer_id": 52520811, "answer_count": 3, "score": 0, "last_activity_date": 1568972459, "creation_date": 1537972965, "last_edit_date": 1568972459, "question_id": 52520420, "link": "https://stackoverflow.com/questions/52520420/invalid-conversion-from-class-pointer-to-int", "closed_reason": "Not suitable for this site", "title": "Invalid conversion from class pointer to int", "body": "<p>I am unable to figure out what the problem is in the code below</p>\n\n<pre><code>class Node\n{\n    private:\n        int index, value;\n\n    public:\n        Node(int index=0, int value=0):index(index),value(value){}\n\n        int getIndex()\n        {\n            return index;\n        }\n\n        int getValue()\n        {\n            return value;\n        }\n};\n\n\nint main()\n{\n    Node n = new Node(10,10);\n    return 0;\n}\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>invalid conversion from Node* to int</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1537974834, "post_id": 52520408, "comment_id": 91981645, "body": "tldr; gcc bug, clang does the right thing here"}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1537974769, "answer_count": 0, "score": 1, "last_activity_date": 1537974807, "creation_date": 1537972937, "last_edit_date": 1537974807, "question_id": 52520408, "link": "https://stackoverflow.com/questions/52520408/deduction-guide-and-specialization-to-find-out-if-the-template-parameters-were-s", "closed_reason": "Duplicate", "title": "Deduction guide and specialization to find out if the template parameters were specified: not working", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;class... T&gt;\nstruct structure\n{\n    template &lt;class... Args&gt;\n    constexpr structure(Args&amp;&amp;...) noexcept {\n        std::cout &lt;&lt; \"structure&lt;T...&gt;\" &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;class... T&gt;\nstruct structure&lt;void, T...&gt;\n{\n    template &lt;class... Args&gt;\n    constexpr structure(Args&amp;&amp;...) noexcept {\n        std::cout &lt;&lt; \"structure&lt;void, T...&gt;\" &lt;&lt; std::endl;\n    }\n};\n\ntemplate &lt;class... Args&gt;\nstructure(Args&amp;&amp;...) -&gt; structure&lt;void, Args...&gt;;\n\nint main(int argc, char* argv[])\n{\n    structure&lt;int&gt; s1(42);\n    structure s2(42);\n    return 0;\n}\n</code></pre>\n\n<p>It produces the following output:</p>\n\n<pre><code>structure&lt;T...&gt;\nstructure&lt;T...&gt;\n</code></pre>\n\n<p>while I would have expected:</p>\n\n<pre><code>structure&lt;T...&gt;\nstructure&lt;void, T...&gt;\n</code></pre>\n\n<p>Why is the deduction guide failing in that context? Or at least not working as I would have expected.</p>\n"}, {"tags": ["c++", "c++14", "language-lawyer", "c++17", "decltype"], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1537973234, "last_edit_date": 1592644375, "creation_date": 1537972974, "answer_id": 52520422, "question_id": 52520276, "link": "https://stackoverflow.com/questions/52520276/is-decltype-of-a-non-static-member-function-ill-formed/52520422#52520422", "title": "Is decltype of a non-static member function ill-formed?", "body": "<p>The simple reason is that the use of <code>S::f</code> is constrained for class members.</p>\n<blockquote>\n<p><strong>[expr.prim.id]</strong></p>\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.prim.id#2\" rel=\"noreferrer\">2</a> An id-expression that denotes a non-static data member or\nnon-static member function of a class can only be used:</p>\n<ul>\n<li>as part of a class member access in which the object expression refers to the member's class or a class derived from that class, or</li>\n<li>to form a pointer to member ([expr.unary.op]), or</li>\n<li>if that id-expression denotes a non-static data member and it appears in an unevaluated operand.</li>\n</ul>\n</blockquote>\n<p>The last bullet, the one related to your code, only applies to non-static data member. There is no provision for functions.</p>\n<p>I can only speculate as to why it's not allowed, <a href=\"https://stackoverflow.com/questions/47263793/is-there-a-reason-we-cannot-name-a-non-static-member-function-in-an-unevaluated\">though I previously asked that question</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1538066860, "post_id": 52540280, "comment_id": 92023240, "body": "Hi. Thank you for your help. Note though this question is tagged <a href=\"https://stackoverflow.com/questions/tagged/language-lawyer\">language-lawyer</a>. It generally means we&#39;re not looking for a solution or a workaround, but for a reason/a quote from the Standard."}], "tags": [], "owner": {"reputation": 57, "user_id": 7443483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3afe4db4a322c6e4e1d7f0db991926?s=128&d=identicon&r=PG&f=1", "display_name": "Will Wray", "link": "https://stackoverflow.com/users/7443483/will-wray"}, "is_accepted": false, "score": 0, "last_activity_date": 1538061555, "creation_date": 1538061555, "answer_id": 52540280, "question_id": 52520276, "link": "https://stackoverflow.com/questions/52520276/is-decltype-of-a-non-static-member-function-ill-formed/52540280#52540280", "title": "Is decltype of a non-static member function ill-formed?", "body": "<p>It's worth a note that <code>decltype(&amp;S::f)</code> works here as pointer-to-member-function type,\n<br>again unless the <code>f</code> names a set of overloaded (member) functions.</p>\n\n<p>The function type itself can be extracted from the pointer-to-member-function type.\n<br>If the member function is cv-or-ref qualified then it has an <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0172r0.html\" rel=\"nofollow noreferrer\">abominable function type</a>.\n<br>The std traits are lacking here - a library like <a href=\"https://www.boost.org/doc/libs/develop/libs/callable_traits/doc/html/\" rel=\"nofollow noreferrer\">Boost.CallableTraits</a> helps.</p>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 2, "accepted_answer_id": 52520422, "answer_count": 2, "score": 7, "last_activity_date": 1538061555, "creation_date": 1537972511, "last_edit_date": 1537973870, "question_id": 52520276, "link": "https://stackoverflow.com/questions/52520276/is-decltype-of-a-non-static-member-function-ill-formed", "title": "Is decltype of a non-static member function ill-formed?", "body": "<p>I'm not sure to perfectly understand <a href=\"http://eel.is/c++draft/dcl.type#simple-4.3\" rel=\"noreferrer\"><code>[dcl.type]/4.3</code></a>:</p>\n\n<blockquote>\n  <p>For an expression <code>e</code>, the type denoted by <code>decltype(e)</code> is defined as follows:</p>\n  \n  <ul>\n  <li>[...]</li>\n  <li>(4.3) otherwise, if <code>e</code> is an unparenthesized id-expression or an unparenthesized class member access, <code>decltype(e)</code> is the type of the entity named by <code>e</code>. If there is no such entity, or <strong>if <code>e</code> names a set of overloaded functions, the program is ill-formed</strong>;</li>\n  <li>[...]</li>\n  </ul>\n</blockquote>\n\n<p>For me, the emphasized part both apply to <em>id-expression</em> and <em>class member access</em>, right?</p>\n\n<p>Playing with my favorite compiler, I get the following.</p>\n\n<h3>\u2713 Accepted by the compiler</h3>\n\n<pre><code>namespace N { void f() {} }\nusing type = decltype(N::f);\ntype* pf = N::f;\n</code></pre>\n\n<p>Ok I guess; <code>N::f</code> is an unparenthesized id-expression and does not name a set of overloaded functions.</p>\n\n<h3>\u2717 Rejected by the compiler</h3>\n\n<pre><code>namespace N { void f() {} void f(int) {} }\nusing type = decltype(N::f); // error: decltype cannot resolve address of overloaded function\ntype* pf = N::f;\n</code></pre>\n\n<p>Ok; <code>N::f</code> does name a set of overloaded functions.</p>\n\n<h3>\u2717 Rejected by the compiler</h3>\n\n<pre><code>struct S { void f(){} };\nusing type = decltype(S::f); // error: invalid use of non-static member function 'void S::f()'\ntype* pf = &amp;S::f;\n</code></pre>\n\n<p>Hum? <code>S::f</code> would name a set of one overloaded function?</p>\n\n<hr>\n\n<p>All in all, is my understanding of <code>[dcl.type]/4.3</code> just bad? is gcc trunk wrong? both? none? kamoulox?</p>\n"}, {"tags": ["c++", "configuration", "doxygen", "meson-build"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537972706, "post_id": 52520146, "comment_id": 91980193, "body": "I don&#39;t know about meson. But what happens when you use in the meson build: <code>run_target(&#39;docs&#39;, command : &#39;where doxygen &#39;)</code>"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973129, "post_id": 52520146, "comment_id": 91980504, "body": "@albert - I get: <code>Could not execute command &quot;where doxygen &quot;. File not found.</code> <code>FAILED: meson-docs</code>"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973322, "post_id": 52520146, "comment_id": 91980653, "body": "@albert - However, if I run <code>where doxygen</code> through bash, I get: <code>where: command not found</code>"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973340, "post_id": 52520146, "comment_id": 91980664, "body": "Sorry, the command should have been <code>which</code> not <code>where</code> (mixed up 2 operating systems)"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973526, "post_id": 52520146, "comment_id": 91980791, "body": "Same result: <code>Could not execute command &quot;which doxygen &quot;. File not found.</code> . But now it works from the command line."}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973668, "post_id": 52520146, "comment_id": 91980896, "body": "It is the latest version: 0.47.2"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973806, "post_id": 52520146, "comment_id": 91980988, "body": "With: <code>run_target(&#39;docs&#39;, command : &#39;ls&#39;)</code> it works correctly, and prints the directory contents."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973881, "post_id": 52520146, "comment_id": 91981039, "body": "<code>ls</code> is a build in command. What is the outcome of the <code>echo $PATH</code> ?"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537973956, "post_id": 52520146, "comment_id": 91981097, "body": "<code>echo $PATH</code> does not work: <code>Could not execute command &quot;echo $PATH&quot;. File not found.</code> Same with a simple <code>echo</code>, so the error does not depend on $PATH."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537974100, "post_id": 52520146, "comment_id": 91981187, "body": "Sorry beats me, nearly looks like the spaces are filtered out (try as command <code>ls -ls</code>."}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537974188, "post_id": 52520146, "comment_id": 91981239, "body": "<code>Could not execute command &quot;ls -ls &quot;. File not found.</code>"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537974227, "post_id": 52520146, "comment_id": 91981266, "body": "Something for a meson expert..."}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1537974296, "post_id": 52520146, "comment_id": 91981311, "body": "@albert - Thank you for your help."}], "answers": [{"comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 1, "creation_date": 1538044832, "post_id": 52534082, "comment_id": 92009323, "body": "The highlighting of the word <b>list</b> does shine a good light on it as well as the example you give."}], "tags": [], "owner": {"reputation": 9057, "user_id": 356838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90065346901c2d8730bedf54a2d248df?s=128&d=identicon&r=PG", "display_name": "pmod", "link": "https://stackoverflow.com/users/356838/pmod"}, "is_accepted": true, "score": 5, "last_activity_date": 1538044808, "last_edit_date": 1538044808, "creation_date": 1538041563, "answer_id": 52534082, "question_id": 52520146, "link": "https://stackoverflow.com/questions/52520146/cannot-run-doxygen-from-meson-on-a-c-project/52534082#52534082", "title": "Cannot run Doxygen from Meson on a C++ project", "body": "<p>According to reference <a href=\"https://mesonbuild.com/Reference-manual.html\" rel=\"nofollow noreferrer\">manual</a>, </p>\n\n<blockquote>\n  <p><strong>command</strong> is a <strong>list</strong> containing the command to run and the arguments to\n  pass to it. Each list item may be a string or a target</p>\n</blockquote>\n\n<p>So, in your case the whole string is treated by meson as command, i.e. tool name, not as command + arguments. So, try this:</p>\n\n<pre><code>run_target('docs', command : ['doxygen', meson.source_root() + '/Doxyfile'])\n</code></pre>\n\n<p>Or it could be better to use directly the result of <strong>find_program()</strong>:</p>\n\n<pre><code>doxygen = find_program('doxygen', required : false)\nif doxygen.found()\n  message('Doxygen found')\n  run_target('docs', command : [doxygen, meson.source_root() + '/Doxyfile'])    \nelse\n  warning('Documentation disabled without doxygen')\nendif\n</code></pre>\n\n<p>Note that if you want to improve docs generation with support of Doxyfile.in, take a look at <a href=\"https://mesonbuild.com/Reference-manual.html#custom_target\" rel=\"nofollow noreferrer\">custom_target()</a> instead and example like <a href=\"https://gitlab.freedesktop.org/libinput/libinput/blob/a52f0db3c54b093a2c44dce37ea6dd5582a19c5a/doc/api/meson.build\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}], "owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 3, "accepted_answer_id": 52534082, "answer_count": 1, "score": 4, "last_activity_date": 1538044808, "creation_date": 1537972184, "question_id": 52520146, "link": "https://stackoverflow.com/questions/52520146/cannot-run-doxygen-from-meson-on-a-c-project", "title": "Cannot run Doxygen from Meson on a C++ project", "body": "<p>I cannot run Doxygen through Meson's configuration.</p>\n\n<p>This is the related code in <code>meson.build</code>:</p>\n\n<pre><code>doxygen = find_program('doxygen')\n...\nrun_target('docs', command : 'doxygen ' + meson.source_root() + '/Doxyfile')\n</code></pre>\n\n<p>The doxygen executable is successfully found:</p>\n\n<blockquote>\n  <p>Program doxygen found: YES (/usr/bin/doxygen)</p>\n</blockquote>\n\n<p>However, when launched, I get this error message:</p>\n\n<blockquote>\n  <p>[0/1] Running external command docs.<br>\n  Could not execute command \"doxygen /home/project/Doxyfile\". File not found.<br>\n  FAILED: meson-docs </p>\n</blockquote>\n\n<p>Running it manually from the command line it works:</p>\n\n<pre><code>/usr/bin/doxygen /home/project/Doxyfile\ndoxygen /home/project/Doxyfile\n</code></pre>\n\n<p>What is wrong in my <code>meson.build</code> configuration?</p>\n"}, {"tags": ["c++", "optimization", "rendering", "rasterizing"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537972138, "post_id": 52520102, "comment_id": 91979773, "body": "Did you turn on optimizations when you compiled the code?"}, {"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1537972269, "post_id": 52520102, "comment_id": 91979867, "body": "Yes its in Release, set to Maximize speed (/O2)"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1537972283, "post_id": 52520102, "comment_id": 91979874, "body": "Not an issue for a fullscreen geometry, but your for-loops (x/y) should only iterate over the bounding box of the triangle, not over the whole screen."}, {"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1537972408, "post_id": 52520102, "comment_id": 91979971, "body": "Yes I do that, this is just simplified code...but still its just 1 fullscreen triangle at 120FPS?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1537972486, "post_id": 52520102, "comment_id": 91980030, "body": "Requests for feedback on working code should be made at <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1537972638, "post_id": 52520102, "comment_id": 91980127, "body": "Using a std::vector with 3 floats per pixel might also be an issue. Try a c++ array (new/delete) and use 1 byte per channel. This should improve memory coherency and reduces the memory by a factor of 4 (don&#39;t know if integer instead of floating point calculation will make a difference)."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1537972738, "post_id": 52520102, "comment_id": 91980217, "body": "@Fran&#231;oisAndrieux: Yes, they are better suited at codereview, but they are also on-topic here."}, {"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1537973677, "post_id": 52520102, "comment_id": 91980904, "body": "Writing into array of shorts doesnt improve the performance (just tested) Removing floating point calculations would probably help, but I will need them later ;)"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1537974496, "post_id": 52520102, "comment_id": 91981424, "body": "Could you remove all calculations from rasterize and just fill the buffer with a constant value? This would establish a baseline for performance (you definitely won&#39;t get faster than that)."}, {"owner": {"reputation": 414, "user_id": 5853141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8326b6ce3356066944f644e5c0ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "Frederik De Ruyck", "link": "https://stackoverflow.com/users/5853141/frederik-de-ruyck"}, "edited": false, "score": 0, "creation_date": 1537976752, "post_id": 52520102, "comment_id": 91982816, "body": "You should also check out Mesa&#39;s swrast module to see what kind of performance you&#39;re getting with that. If it&#39;s not much different it means you&#39;re not doing anything wrong. Maybe the quake software renderer had assembly code? <a href=\"https://dri.freedesktop.org/docs/mesa/swrast/files.html\" rel=\"nofollow noreferrer\">dri.freedesktop.org/docs/mesa/swrast/files.html</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1537976861, "post_id": 52520102, "comment_id": 91982867, "body": "It would help if one could look at the assembly for this. Any chance you could turn this into a compilable example? It&#39;s mainly missing the type definitions."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1537977039, "post_id": 52520102, "comment_id": 91982960, "body": "Also, have you tried relaxed floating point math? It can yield some substantial speedups (and is generally acceptable for rendering calculations)."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1537990994, "post_id": 52520102, "comment_id": 91989732, "body": "Why not rasterize only 3 tips of that triangle, then draw 3 lines between them on the resulting image itself, then fill pixels in interior part of those 3 intersecting lines? You can deduce a function that does the conversion of triangle x,y,z to screen x,y,z. Probably using inverse of the calculations you do, or by training a neural network to do it for you. Since moving a triangle and its rasterized x,y function could be a differentiable function."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1537991308, "post_id": 52520102, "comment_id": 91989883, "body": "This one is low hanging fruit -- make sure both <code>cross</code> and <code>caculateBarycentricWeights</code> get inlined. (Forcing inlining doubled the throughput in my tests)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1538002245, "post_id": 52520102, "comment_id": 91993728, "body": "Is the test for <code>&lt;= doubleTriArea * 1.000001f</code> necessary? It never seems to be the case in this scenario. You can also premultiply <code>invZ</code> by <code>invDoubleTriArea</code>, and drop that from <code>caculateBarycentricWeights</code>. That runs at ~170 FPS on a 3.4Ghz Sandy Bridge i7 -- which is on average 25 clock cycles per pixel. Given how much floating point math there is per pixel and that we&#39;re rendering on most of the screen... that&#39;s not so bad. Switching to fixed point representation and using integer arithmetics would most likely allow more. The more you can do with integers, the better."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538056661, "post_id": 52534685, "comment_id": 92016906, "body": "Wow, thats the performance I was hopping to see, good job! I tried this approach before, but I had problem with perspective correct interpolation so I used the approach from here <a href=\"https://www.scratchapixel.com/lessons/3d-basic-rendering/rasterization-practical-implementation/perspective-correct-interpolation-vertex-attributes\" rel=\"nofollow noreferrer\">scratchapixel.com/lessons/3d-basic-rendering/&hellip;</a> Still not sure why your approach is that much faster, but I am looking forward to analyze it over the weekend, thanks for help!"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538057521, "post_id": 52534685, "comment_id": 92017501, "body": "@Martin Optimization of most inner loop is always the best idea... ;-) (and it was actually not mine)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538058224, "post_id": 52534685, "comment_id": 92018001, "body": "@Martin I had a look into your link. Consider, that I used most simple rendering, no depth buffer values (I had interpolated z values but removed them later to keep it simple), no color interpolation, no lighting. If all these things were availble, it would become definitely slower. I&#39;ve still some ideas about this in mind and want to make it a toy project (but I don&#39;t know if I find enough time these days). If I&#39;ve any notable outcome I drop a note."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538058421, "post_id": 52534685, "comment_id": 92018140, "body": "@Martin The only thing, which could be added easily (and probably without significant performance impact) is perspective distortion - there isn&#39;t a resp. constructor in <code>linmath.h</code> but I could add this. (I&#39;ve an implementation locally at hand to &quot;borrow&quot; from.)"}, {"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538059509, "post_id": 52534685, "comment_id": 92018894, "body": "Actually the if inside barycentric func is optimalization, its cheaper to return than always do additional calculations."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538059851, "post_id": 52534685, "comment_id": 92019132, "body": "@Martin I turned it around: It&#39;s much cheaper to consider only vertices which are inside of triangle. Hence, I interpolate along triangle sides to render each raster line only from left edge to right edge. As I missed the part with color interpolation in your code, it reduces to a simple assignment (where no further <code>if</code> is necessary). (Guess how much FPS I achieved when I tried first - with wrong transformations which resulted in only three or four pixels in visible range...) ;-)"}, {"owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538059893, "post_id": 52534685, "comment_id": 92019176, "body": "When I remove everything extra and calculate just the barycentric weights (i need them for future interpolations such as colors, tex coords, etc...) I have about 350fps when compiling for x32. When I switch to x64 I get  around 425fps. But still its just 1 fullscreen polygon and not even including any matrix transformations."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538060951, "post_id": 52534685, "comment_id": 92019883, "body": "@Martin And btw. <a href=\"https://en.wikipedia.org/wiki/Quake_II\" rel=\"nofollow noreferrer\"><i>Quake II came with OpenGL support out of the box.</i></a> There is a reason why per-vertex transformations and per-pixel calculations have been moved to the GPU which has meanwhile 100s of cores. (My K5100M has 1536.) If you calculate all pixels concurrently, the effort for per-pixel calculations doesn&#39;t hit you so hard anymore. So, we shouldn&#39;t be too sad with 100 FPS in a pure CPU rasterization (which actually uses precisely one core)..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "edited": false, "score": 0, "creation_date": 1538582423, "post_id": 52534685, "comment_id": 92195709, "body": "@Martin I did that toy project the last days and just did an upload on github <a href=\"https://github.com/scheff173/NoGL3dDemo\" rel=\"nofollow noreferrer\">No-GL 3D Renderer</a>."}], "tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 1, "last_activity_date": 1538582327, "last_edit_date": 1538582327, "creation_date": 1538043433, "answer_id": 52534685, "question_id": 52520102, "link": "https://stackoverflow.com/questions/52520102/software-rasterization-implementation-speed-up-ideas/52534685#52534685", "title": "software rasterization implementation speed up ideas", "body": "<p>I believe I must be able to beat 130 FPS.</p>\n\n<blockquote>\n  <p>...even Quake2 was running faster</p>\n</blockquote>\n\n<p>I must admit that I got my inspiration from OpenGL &ndash; resembling a few parts of it (at least, how I believe it could work) and with some simplifications.</p>\n\n<p>I must admit also that I didn't understand what exactly the <code>caculateBarycentricWeights()</code> function is good for.</p>\n\n<p>However, I based my implementation on the following concept:</p>\n\n<ol>\n<li><p>rasterizer must work in screen space</p></li>\n<li><p>3D vertices have to be converted to screen space before rasterizing</p></li>\n<li><p>The inner rastering loop has to be as simple as possible &ndash; branches (i.e. <code>if</code> and a complex function) in the most inner loop are counter-productive for sure.</p></li>\n</ol>\n\n<p>Hence, I made a new <code>rasterize()</code> function. Thereby, I considered that <code>rasterize()</code> has to fill horizontal screen lines. For this, I sort the 3 triangle vertices by their <code>y</code> components. (Note, that vertices have to be transformed to screen space beforehand.) In regular case, this allows to cut the triangle horizontally into two parts:</p>\n\n<ul>\n<li>the upper with peak above of horizontal base</li>\n<li>the lower with peak below of horizontal base.</li>\n</ul>\n\n<p>The source code follows below but the sketch may help to make all the interpolations a little bit more understandable:</p>\n\n<p><a href=\"https://i.stack.imgur.com/z18gI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z18gI.png\" alt=\"sketch of rasterize()\"></a></p>\n\n<p>To convert the <code>vtcs</code> beforehand to screen space, I used two matrices:</p>\n\n<pre><code>const Mat4x4f matProj(InitScale, 1.0f / Width, 1.0f / Height, 1.0f);\nconst Mat4x4f matScreen\n  = Mat4x4f(InitScale, 0.5f * Width, 0.5f * Height, 1.0f)\n  * Mat4x4f(InitTrans, Vec3f(1.0f, 1.0f, 0.0f));\nconst Mat4x4f mat = matScreen * matProj /* * matView * matModel */;\n</code></pre>\n\n<p>where</p>\n\n<ul>\n<li><code>matProj</code> is the projection matrix to scale model coordinates to clip space</li>\n<li><code>matScreen</code> is responsible to convert clip space to screen space.</li>\n</ul>\n\n<p>Clip space is a space where visible part is in range [-1, 1] for x, y, and z direction.</p>\n\n<p>Screen space has ranges [0, width) and [0, height) where I used <code>width = 1024</code> and <code>height = 768</code> according to OPs requirement.</p>\n\n<p>When I create OpenGL programs it's (some kind of) annoying tradition that I everytimes start with a blue screen (as blue is my favorite clear color). This is mostly caused by confusing some of the matrix operations and followed by the effort to find and fix these operations. Therefore, I tried to visualize the rasterization result to become sure that my benchmarking is not overly enthusiastic due to the fact that simply any part of triangle is outside of view and hence clipped away:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zmldb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zmldb.png\" alt=\"snapshot of demo using the transformations of benchmark\"></a></p>\n\n<p>I would count this a visual proof. To achieve this, I wrapped the rasterizer sample into a simple Qt application where the <code>FBO</code> data is stored in a <code>QImage</code> which in turn is applied to a <code>QPixmap</code> displayed with a <code>QLabel</code>. Once I got this, I thought it would be nice to add some kind of simple animation by modifying the model-view matrix over time. So, I got the following sample:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;algorithm&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n#include \"linmath.h\"\n\ntypedef unsigned uint;\ntypedef std::uint32_t uint32;\n\nconst int Width = 1024, Height = 768;\n\nclass FBO {\n  public:\n    const int width, height;\n  private:\n    std::vector&lt;uint32&gt; _rgba; // pixel buffer\n  public:\n    FBO(int width, int height):\n      width(width), height(height),\n      _rgba(width * height, 0)\n    { }\n    ~FBO() = default;\n    FBO(const FBO&amp;) = delete;\n    FBO&amp; operator=(const FBO&amp;) = delete;\n\n    void clear(uint32 rgba) { std::fill(_rgba.begin(), _rgba.end(), rgba); }\n    void set(int x, int y, uint32 rgba)\n    {\n      const size_t i = y * width + x;\n      _rgba[i] = rgba;\n    }\n    size_t getI(int y) const { return y * width; }\n    size_t getI(int x, int y) const { return y * width + x; }\n    void set(size_t i, uint32 rgba) { _rgba[i] = rgba; }\n\n    const std::vector&lt;uint32&gt;&amp; getRGBA() const { return _rgba; }\n};\n\nvoid rasterize(FBO &amp;fbo, const Vec3f vtcs[3], const uint32 rgba)\n{\n  // sort vertices by y coordinates\n  uint iVtcs[3] = { 0, 1, 2 };\n  if (vtcs[iVtcs[0]].y &gt; vtcs[iVtcs[1]].y) std::swap(iVtcs[0], iVtcs[1]);\n  if (vtcs[iVtcs[1]].y &gt; vtcs[iVtcs[2]].y) std::swap(iVtcs[1], iVtcs[2]);\n  if (vtcs[iVtcs[0]].y &gt; vtcs[iVtcs[1]].y) std::swap(iVtcs[0], iVtcs[1]);\n  const Vec3f vtcsS[3] = { vtcs[iVtcs[0]], vtcs[iVtcs[1]], vtcs[iVtcs[2]] };\n  const float yM = vtcs[1].y;\n  // cut triangle in upper and lower part\n  const float xT = vtcsS[0].x;\n  float xML = vtcsS[1].x;\n  const float f = (yM - vtcsS[0].y) / (vtcsS[2].y - vtcsS[0].y);\n  float xMR = (1.0f - f) * xT + f * vtcsS[2].x;\n  if (xML &gt; xMR) std::swap(xML, xMR);\n  // draw upper part of triangle\n  if (vtcs[iVtcs[0]].y &lt; yM) {\n    const float dY = yM - vtcsS[0].y;\n    for (int y = std::max((int)vtcsS[0].y, 0),\n      yE = std::min((int)(yM + 0.5f), fbo.height);\n      y &lt; yE; ++y) {\n      const float f1 = (yM - y) / dY, f0 = 1.0f - f1;\n      const float xL = f0 * xT + f1 * xML, xR = f0 * xT + f1 * xMR;\n      const size_t i = fbo.getI(y);\n      for (int x = std::max((int)xL, 0),\n        xE = std::min((int)(xR + 0.5f), fbo.width);\n        x &lt; xE; ++x) {\n        fbo.set(i + x, rgba);\n      }\n    }\n  } // else upper edge horizontal\n  // draw lower part of triangle\n  if (yM &lt; vtcs[2].y) {\n    const float xB = vtcsS[2].x;\n    const float dY = vtcsS[2].y - yM;\n    for (int y = std::max((int)yM, 0),\n      yE = std::min((int)(vtcsS[2].y + 0.5f), fbo.height);\n      y &lt; yE; ++y) {\n      const float f1 = (y - yM) / dY, f0 = 1.0f - f1;\n      const float xL = f0 * xML + f1 * xB, xR = f0 * xMR + f1 * xB;\n      const size_t i = fbo.getI(y);\n      for (int x = std::max((int)xL, 0),\n        xE = std::min((int)(xR + 0.5f), fbo.width);\n        x &lt; xE; ++x) {\n        fbo.set(i + x, rgba);\n      }\n    }\n  } // else lower edge horizontal\n}\n\ntemplate &lt;typename VALUE&gt;\nVec3T&lt;VALUE&gt; transformPoint(const Mat4x4T&lt;VALUE&gt; &amp;mat, const Vec3T&lt;VALUE&gt; &amp;pt)\n{\n  Vec4T&lt;VALUE&gt; pt_ = mat * Vec4T&lt;VALUE&gt;(pt.x, pt.y, pt.z, (VALUE)1);\n  return pt_.w != (VALUE)0\n    ? Vec3T&lt;VALUE&gt;(pt_.x / pt_.w, pt_.y / pt_.w, pt_.z / pt_.w)\n    : Vec3T&lt;VALUE&gt;(pt_.x, pt_.y, pt_.z);\n}\n\ntypedef std::chrono::high_resolution_clock HiResClock;\ntypedef std::chrono::microseconds MicroSecs;\n\nint mainBench()\n{\n  const Mat4x4f matProj(InitScale, 1.0f / Width, 1.0f / Height, 1.0f);\n  const Mat4x4f matScreen\n    = Mat4x4f(InitScale, 0.5f * Width, 0.5f * Height, 1.0f)\n    * Mat4x4f(InitTrans, Vec3f(1.0f, 1.0f, 0.0f));\n  const Mat4x4f mat = matScreen * matProj /* * matView * matModel */;\n  FBO fbo(Width, Height);\n\n  HiResClock::time_point start = HiResClock::now();\n  size_t fps = 0;\n\n  for (;;) {\n    static Vec3f v0 = { -2000.0f, -2000.0, 10.0 };\n    static Vec3f v1 = { 2000.0f, -2000.0, 10.0 };\n    static Vec3f v2 = { 0.0f, 2000.0, 10.0 };\n    const Vec3f vtcs[] = {\n      transformPoint(mat, v0), transformPoint(mat, v1), transformPoint(mat, v2)\n    };\n    rasterize(fbo, vtcs, 0xff0000ff);\n    ++fps;\n\n    HiResClock::time_point now = HiResClock::now();\n    auto timeDiff\n      = std::chrono::duration_cast&lt;MicroSecs&gt;(now - start).count();\n\n    static const long oneSecond = 1000000;\n    if (timeDiff &gt;= oneSecond) {\n      std::cout &lt;&lt; fps &lt;&lt; \" \" &lt;&lt; std::flush;\n      fps = 0;\n      start = now;\n    }\n  }\n}\n\n#include &lt;stack&gt;\n\n#include &lt;QtWidgets&gt;\n\nstruct RenderContext {\n  FBO fbo; // frame buffer object\n  Mat4x4f matModelView;\n  Mat4x4f matProj;\n\n  RenderContext(int width, int height):\n    fbo(width, height),\n    matModelView(InitIdent),\n    matProj(InitIdent)\n  { }\n  ~RenderContext() = default;\n};\n\nvoid render(RenderContext &amp;context)\n{\n  context.fbo.clear(0xffffcc88);\n  static Vec3f v0 = { -2000.0f, -2000.0, 10.0 };\n  static Vec3f v1 = { 2000.0f, -2000.0, 10.0 };\n  static Vec3f v2 = { 0.0f, 2000.0, 10.0 };\n#if 0 // test transformations of mainBench()\n  const Mat4x4f matProj(InitScale, 1.0f / Width, 1.0f / Height, 1.0f);\n  const Mat4x4f matScreen\n    = Mat4x4f(InitScale, 0.5f * Width, 0.5f * Height, 1.0f)\n    * Mat4x4f(InitTrans, Vec3f(1.0f, 1.0f, 0.0f));\n  const Mat4x4f mat = matScreen * matProj /* * matView * matModel */;\n#else // make a simple animation\n  const Mat4x4f matScreen\n    = Mat4x4f(InitScale, 0.5f * context.fbo.width, 0.5f * context.fbo.height, 1.0f)\n    * Mat4x4f(InitTrans, Vec3f(1.0f, 1.0f, 0.0f));\n  const Mat4x4f mat = matScreen * context.matProj * context.matModelView;\n#endif // 0\n  const Vec3f vtcs[] = {\n    transformPoint(mat, v0), transformPoint(mat, v1), transformPoint(mat, v2)\n  };\n  rasterize(context.fbo, vtcs, 0xff0000ff);\n}\n\nint main(int argc, char **argv)\n{\n  // evaluate arguments\n  const bool gui = argc &gt; 1\n    &amp;&amp; (strcmp(argv[1], \"gui\") == 0 || strcmp(argv[1], \"-gui\") == 0);\n  // without arguments: start benchmark\n  if (!gui) return mainBench();\n  // remove argument \"gui\"\n  for (char **arg = argv + 1; *arg; ++arg) arg [0] = arg[1];\n  // Qt Demo\n  qDebug() &lt;&lt; \"Qt Version:\" &lt;&lt; QT_VERSION_STR;\n  QApplication app(argc, argv);\n  RenderContext context(Width, Height);\n  // setup GUI\n  QPixmap qPixmapImg(Width, Height);\n  QLabel qLblImg;\n  qLblImg.setWindowTitle(\"Software Rasterizer Demo\");\n  qLblImg.setPixmap(qPixmapImg);\n  qLblImg.show();\n  // Qt timer for periodic rendering/animation\n  QTime qTime(0, 0);\n  QTimer qTimer;\n  qTimer.setInterval(50);\n  // install signal handlers\n  QObject::connect(&amp;qTimer, &amp;QTimer::timeout,\n    [&amp;]() {\n      // simple animation\n      const float r = 1.0f, t = 0.001f * qTime.elapsed();\n      context.matModelView\n        = Mat4x4f(InitTrans, Vec3f(r * sin(t), r * cos(t), 0.0f))\n        * Mat4x4f(InitScale, 0.0001f, 0.0001f, 0.0001f);\n      // rendering\n      render(context);\n      // transfer FBO to qLblImg\n      const QImage qImg((uchar*)context.fbo.getRGBA().data(),\n        Width, Height, QImage::Format_RGBA8888);\n      qPixmapImg.convertFromImage(qImg);\n      qLblImg.setPixmap(qPixmapImg);\n    });\n  // runtime loop\n  qTime.start(); qTimer.start();\n  return app.exec();\n}\n</code></pre>\n\n<p>Instead of <code>gmtl</code> (which I don't know), I used <code>linmath.h</code> (left from earlier <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>s I wrote in the past):</p>\n\n<pre><code>#ifndef LIN_MATH_H\n#define LIN_MATH_H\n\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n#include &lt;cmath&gt;\n\ndouble Pi = 3.1415926535897932384626433832795;\n\ntemplate &lt;typename VALUE&gt;\ninline VALUE degToRad(VALUE angle)\n{\n  return (VALUE)Pi * angle / (VALUE)180;\n}\n\ntemplate &lt;typename VALUE&gt;\ninline VALUE radToDeg(VALUE angle)\n{\n  return (VALUE)180 * angle / (VALUE)Pi;\n}\n\ntemplate &lt;typename VALUE&gt;\nstruct Vec2T {\n  VALUE x, y;\n  Vec2T() { }\n  Vec2T(VALUE x, VALUE y): x(x), y(y) { }\n};\ntemplate &lt;typename VALUE&gt;\nVALUE length(const Vec2T&lt;VALUE&gt; &amp;vec)\n{\n  return sqrt(vec.x * vec.x + vec.y * vec.y);\n}\ntemplate &lt;typename VALUE&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Vec2T&lt;VALUE&gt; &amp;v)\n{\n  return out &lt;&lt; \"( \" &lt;&lt; v.x &lt;&lt; \", \" &lt;&lt; v.y &lt;&lt; \" )\";\n}\n\ntypedef Vec2T&lt;float&gt; Vec2f;\ntypedef Vec2T&lt;double&gt; Vec2;\n\ntemplate &lt;typename VALUE&gt;\nstruct Vec3T {\n  VALUE x, y, z;\n  Vec3T() { }\n  Vec3T(VALUE x, VALUE y, VALUE z): x(x), y(y), z(z) { }\n  Vec3T(const Vec2T&lt;VALUE&gt; &amp;xy, VALUE z): x(xy.x), y(xy.y), z(z) { }\n  explicit operator Vec2T&lt;VALUE&gt;() const { return Vec2T&lt;VALUE&gt;(x, y); }\n};\ntemplate &lt;typename VALUE&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Vec3T&lt;VALUE&gt; &amp;v)\n{\n  return out &lt;&lt; \"( \" &lt;&lt; v.x &lt;&lt; \", \" &lt;&lt; v.y &lt;&lt; \", \" &lt;&lt; v.z &lt;&lt; \" )\";\n}\n\ntypedef Vec3T&lt;float&gt; Vec3f;\ntypedef Vec3T&lt;double&gt; Vec3;\n\ntemplate &lt;typename VALUE&gt;\nstruct Vec4T {\n  VALUE x, y, z, w;\n  Vec4T() { }\n  Vec4T(VALUE x, VALUE y, VALUE z, VALUE w): x(x), y(y), z(z), w(w) { }\n  Vec4T(const Vec2T&lt;VALUE&gt; &amp;xy, VALUE z, VALUE w):\n    x(xy.x), y(xy.y), z(z), w(w)\n  { }\n  Vec4T(const Vec3T&lt;VALUE&gt; &amp;xyz, VALUE w):\n    x(xyz.x), y(xyz.y), z(xyz.z), w(w)\n  { }\n  explicit operator Vec2T&lt;VALUE&gt;() const { return Vec2T&lt;VALUE&gt;(x, y); }\n  explicit operator Vec3T&lt;VALUE&gt;() const { return Vec3T&lt;VALUE&gt;(x, y, z); }\n};\ntemplate &lt;typename VALUE&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Vec4T&lt;VALUE&gt; &amp;v)\n{\n  return out &lt;&lt; \"( \" &lt;&lt; v.x &lt;&lt; \", \" &lt;&lt; v.y &lt;&lt; \", \" &lt;&lt; v.z &lt;&lt; \", \" &lt;&lt; v.w &lt;&lt; \" )\";\n}\n\ntypedef Vec4T&lt;float&gt; Vec4f;\ntypedef Vec4T&lt;double&gt; Vec4;\n\nenum ArgInitIdent { InitIdent };\nenum ArgInitTrans { InitTrans };\nenum ArgInitRot { InitRot };\nenum ArgInitRotX { InitRotX };\nenum ArgInitRotY { InitRotY };\nenum ArgInitRotZ { InitRotZ };\nenum ArgInitScale { InitScale };\n\ntemplate &lt;typename VALUE&gt;\nstruct Mat4x4T {\n  union {\n    VALUE comp[4 * 4];\n    struct {\n      VALUE _00, _01, _02, _03;\n      VALUE _10, _11, _12, _13;\n      VALUE _20, _21, _22, _23;\n      VALUE _30, _31, _32, _33;\n    };\n  };\n\n  // constructor to build a matrix by elements\n  Mat4x4T(\n    VALUE _00, VALUE _01, VALUE _02, VALUE _03,\n    VALUE _10, VALUE _11, VALUE _12, VALUE _13,\n    VALUE _20, VALUE _21, VALUE _22, VALUE _23,\n    VALUE _30, VALUE _31, VALUE _32, VALUE _33):\n    _00(_00), _01(_01), _02(_02), _03(_03),\n    _10(_10), _11(_11), _12(_12), _13(_13),\n    _20(_20), _21(_21), _22(_22), _23(_23),\n    _30(_30), _31(_31), _32(_32), _33(_33)\n  { }\n  // constructor to build an identity matrix\n  Mat4x4T(ArgInitIdent):\n    _00((VALUE)1), _01((VALUE)0), _02((VALUE)0), _03((VALUE)0),\n    _10((VALUE)0), _11((VALUE)1), _12((VALUE)0), _13((VALUE)0),\n    _20((VALUE)0), _21((VALUE)0), _22((VALUE)1), _23((VALUE)0),\n    _30((VALUE)0), _31((VALUE)0), _32((VALUE)0), _33((VALUE)1)\n  { }\n  // constructor to build a matrix for translation\n  Mat4x4T(ArgInitTrans, const Vec3T&lt;VALUE&gt; &amp;t):\n    _00((VALUE)1), _01((VALUE)0), _02((VALUE)0), _03((VALUE)t.x),\n    _10((VALUE)0), _11((VALUE)1), _12((VALUE)0), _13((VALUE)t.y),\n    _20((VALUE)0), _21((VALUE)0), _22((VALUE)1), _23((VALUE)t.z),\n    _30((VALUE)0), _31((VALUE)0), _32((VALUE)0), _33((VALUE)1)\n  { }\n  // constructor to build a matrix for rotation about axis\n  Mat4x4T(ArgInitRot, const Vec3T&lt;VALUE&gt; &amp;axis, VALUE angle):\n    _03((VALUE)0), _13((VALUE)0), _23((VALUE)0),\n    _30((VALUE)0), _31((VALUE)0), _32((VALUE)0), _33((VALUE)1)\n  {\n    //axis.normalize();\n    const VALUE sinAngle = sin(angle), cosAngle = cos(angle);\n    const VALUE xx = axis.x * axis.x, xy = axis.x * axis.y;\n    const VALUE xz = axis.x * axis.z, yy = axis.y * axis.y;\n    const VALUE yz = axis.y * axis.z, zz = axis.z * axis.z;\n    _00 = xx + cosAngle * ((VALUE)1 - xx) /* + sinAngle * 0 */;\n    _01 = xy - cosAngle * xy - sinAngle * axis.z;\n    _02 = xz - cosAngle * xz + sinAngle * axis.y;\n    _10 = xy - cosAngle * xy + sinAngle * axis.z;\n    _11 = yy + cosAngle * ((VALUE)1 - yy) /* + sinAngle * 0 */;\n    _12 = yz - cosAngle * yz - sinAngle * axis.x;\n    _20 = xz - cosAngle * xz - sinAngle * axis.y;\n    _21 = yz - cosAngle * yz + sinAngle * axis.x;\n    _22 = zz + cosAngle * ((VALUE)1 - zz) /* + sinAngle * 0 */;\n  }\n  // constructor to build a matrix for rotation about x axis\n  Mat4x4T(ArgInitRotX, VALUE angle):\n    _00((VALUE)1), _01((VALUE)0),    _02((VALUE)0),   _03((VALUE)0),\n    _10((VALUE)0), _11(cos(angle)),  _12(-sin(angle)), _13((VALUE)0),\n    _20((VALUE)0), _21(sin(angle)), _22(cos(angle)), _23((VALUE)0),\n    _30((VALUE)0), _31((VALUE)0),    _32((VALUE)0),   _33((VALUE)1)\n  { }\n  // constructor to build a matrix for rotation about y axis\n  Mat4x4T(ArgInitRotY, VALUE angle):\n    _00(cos(angle)), _01((VALUE)0), _02(sin(angle)), _03((VALUE)0),\n    _10((VALUE)0),   _11((VALUE)1), _12((VALUE)0),    _13((VALUE)0),\n    _20(-sin(angle)), _21((VALUE)0), _22(cos(angle)),  _23((VALUE)0),\n    _30((VALUE)0), _31((VALUE)0),    _32((VALUE)0),   _33((VALUE)1)\n  { }\n  // constructor to build a matrix for rotation about z axis\n  Mat4x4T(ArgInitRotZ, VALUE angle):\n    _00(cos(angle)),  _01(-sin(angle)), _02((VALUE)0), _03((VALUE)0),\n    _10(sin(angle)), _11(cos(angle)), _12((VALUE)0), _13((VALUE)0),\n    _20((VALUE)0),    _21((VALUE)0),   _22((VALUE)1), _23((VALUE)0),\n    _30((VALUE)0),    _31((VALUE)0),   _32((VALUE)0), _33((VALUE)1)\n  { }\n  // constructor to build a matrix for scaling\n  Mat4x4T(ArgInitScale, VALUE sx, VALUE sy, VALUE sz):\n    _00((VALUE)sx), _01((VALUE)0),  _02((VALUE)0),  _03((VALUE)0),\n    _10((VALUE)0),  _11((VALUE)sy), _12((VALUE)0),  _13((VALUE)0),\n    _20((VALUE)0),  _21((VALUE)0),  _22((VALUE)sz), _23((VALUE)0),\n    _30((VALUE)0),  _31((VALUE)0),  _32((VALUE)0),  _33((VALUE)1)\n  { }\n  // operator to allow access with [][]\n  double* operator [] (int i)\n  {\n    assert(i &gt;= 0 &amp;&amp; i &lt; 4);\n    return comp + 4 * i;\n  }\n  // operator to allow access with [][]\n  const double* operator [] (int i) const\n  {\n    assert(i &gt;= 0 &amp;&amp; i &lt; 4);\n    return comp + 4 * i;\n  }\n  // multiply matrix with matrix -&gt; matrix\n  Mat4x4T operator * (const Mat4x4T &amp;mat) const\n  {\n    return Mat4x4T(\n      _00 * mat._00 + _01 * mat._10 + _02 * mat._20 + _03 * mat._30,\n      _00 * mat._01 + _01 * mat._11 + _02 * mat._21 + _03 * mat._31,\n      _00 * mat._02 + _01 * mat._12 + _02 * mat._22 + _03 * mat._32,\n      _00 * mat._03 + _01 * mat._13 + _02 * mat._23 + _03 * mat._33,\n      _10 * mat._00 + _11 * mat._10 + _12 * mat._20 + _13 * mat._30,\n      _10 * mat._01 + _11 * mat._11 + _12 * mat._21 + _13 * mat._31,\n      _10 * mat._02 + _11 * mat._12 + _12 * mat._22 + _13 * mat._32,\n      _10 * mat._03 + _11 * mat._13 + _12 * mat._23 + _13 * mat._33,\n      _20 * mat._00 + _21 * mat._10 + _22 * mat._20 + _23 * mat._30,\n      _20 * mat._01 + _21 * mat._11 + _22 * mat._21 + _23 * mat._31,\n      _20 * mat._02 + _21 * mat._12 + _22 * mat._22 + _23 * mat._32,\n      _20 * mat._03 + _21 * mat._13 + _22 * mat._23 + _23 * mat._33,\n      _30 * mat._00 + _31 * mat._10 + _32 * mat._20 + _33 * mat._30,\n      _30 * mat._01 + _31 * mat._11 + _32 * mat._21 + _33 * mat._31,\n      _30 * mat._02 + _31 * mat._12 + _32 * mat._22 + _33 * mat._32,\n      _30 * mat._03 + _31 * mat._13 + _32 * mat._23 + _33 * mat._33);\n  }\n  // multiply matrix with vector -&gt; vector\n  Vec4T&lt;VALUE&gt; operator * (const Vec4T&lt;VALUE&gt; &amp;vec) const\n  {\n    return Vec4T&lt;VALUE&gt;(\n      _00 * vec.x + _01 * vec.y + _02 * vec.z + _03 * vec.w,\n      _10 * vec.x + _11 * vec.y + _12 * vec.z + _13 * vec.w,\n      _20 * vec.x + _21 * vec.y + _22 * vec.z + _23 * vec.w,\n      _30 * vec.x + _31 * vec.y + _32 * vec.z + _33 * vec.w);\n  }\n};\n\ntemplate &lt;typename VALUE&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Mat4x4T&lt;VALUE&gt; &amp;m)\n{\n  return out\n    &lt;&lt; m._00 &lt;&lt; '\\t' &lt;&lt; m._01 &lt;&lt; '\\t' &lt;&lt; m._02 &lt;&lt; '\\t' &lt;&lt; m._03 &lt;&lt; '\\n'\n    &lt;&lt; m._10 &lt;&lt; '\\t' &lt;&lt; m._11 &lt;&lt; '\\t' &lt;&lt; m._12 &lt;&lt; '\\t' &lt;&lt; m._13 &lt;&lt; '\\n'\n    &lt;&lt; m._20 &lt;&lt; '\\t' &lt;&lt; m._21 &lt;&lt; '\\t' &lt;&lt; m._22 &lt;&lt; '\\t' &lt;&lt; m._23 &lt;&lt; '\\n'\n    &lt;&lt; m._30 &lt;&lt; '\\t' &lt;&lt; m._31 &lt;&lt; '\\t' &lt;&lt; m._32 &lt;&lt; '\\t' &lt;&lt; m._33 &lt;&lt; '\\n';\n}\ntypedef Mat4x4T&lt;float&gt; Mat4x4f;\ntypedef Mat4x4T&lt;double&gt; Mat4x4;\n\n// enumeration of rotation axes\nenum RotAxis {\n  RotX, // rotation about x axis\n  RotY, // rotation about y axis\n  RotZ // rotation about z axis\n};\n\n// enumeration of possible Euler angles\nenum EulerAngle {\n  RotXYX = RotX + 3 * RotY + 9 * RotX, // 0 + 3 + 0 = 3\n  RotXYZ = RotX + 3 * RotY + 9 * RotZ, // 0 + 3 + 18 = 21\n  RotXZX = RotX + 3 * RotZ + 9 * RotX, // 0 + 6 + 0 = 6\n  RotXZY = RotX + 3 * RotZ + 9 * RotY, // 0 + 6 + 9 = 15\n  RotYXY = RotY + 3 * RotX + 9 * RotY, // 1 + 0 + 9 = 10\n  RotYXZ = RotY + 3 * RotX + 9 * RotZ, // 1 + 0 + 18 = 19\n  RotYZX = RotY + 3 * RotZ + 9 * RotX, // 1 + 6 + 0 = 7\n  RotYZY = RotY + 3 * RotZ + 9 * RotY, // 1 + 6 + 9 = 16\n  RotZXY = RotZ + 3 * RotX + 9 * RotY, // 2 + 0 + 9 = 11\n  RotZXZ = RotZ + 3 * RotX + 9 * RotZ, // 2 + 0 + 18 = 20\n  RotZYX = RotZ + 3 * RotY + 9 * RotX, // 2 + 3 + 0 = 5\n  RotZYZ = RotZ + 3 * RotY + 9 * RotZ, // 2 + 3 + 18 = 23\n  RotHPR = RotZXY, // used in OpenGL Performer\n  RotABC = RotZYX // used in German engineering\n};\n\n/* decomposes the combined EULER angle type into the corresponding\n * individual EULER angle axis types.\n */\ninline void decompose(\n  EulerAngle type, RotAxis &amp;axis1, RotAxis &amp;axis2, RotAxis &amp;axis3)\n{\n  unsigned type_ = (unsigned)type;\n  axis1 = (RotAxis)(type_ % 3); type_ /= 3;\n  axis2 = (RotAxis)(type_ % 3); type_ /= 3;\n  axis3 = (RotAxis)type_;\n}\n\ntemplate &lt;typename VALUE&gt;\nMat4x4T&lt;VALUE&gt; makeEuler(\n  EulerAngle mode, VALUE rot1, VALUE rot2, VALUE rot3)\n{\n  RotAxis axis1, axis2, axis3;\n  decompose(mode, axis1, axis2, axis3);\n  const static VALUE axes[3][3] = {\n    { (VALUE)1, (VALUE)0, (VALUE)0 },\n    { (VALUE)0, (VALUE)1, (VALUE)0 },\n    { (VALUE)0, (VALUE)0, (VALUE)1 }\n  };\n  return\n      Mat4x4T&lt;VALUE&gt;(InitRot,\n        Vec3T&lt;VALUE&gt;(axes[axis1][0], axes[axis1][1], axes[axis1][2]),\n        rot1)\n    * Mat4x4T&lt;VALUE&gt;(InitRot,\n        Vec3T&lt;VALUE&gt;(axes[axis2][0], axes[axis2][1], axes[axis2][2]),\n        rot2)\n    * Mat4x4T&lt;VALUE&gt;(InitRot,\n        Vec3T&lt;VALUE&gt;(axes[axis3][0], axes[axis3][1], axes[axis3][2]),\n        rot3);\n}\n\n/* decomposes a rotation matrix into EULER angles.\n *\n * It is necessary that the upper left 3x3 matrix is composed of rotations\n * only. Translational parts are not considered.\n * Other transformations (e.g. scaling, shearing, projection) may cause\n * wrong results.\n */\ntemplate &lt;typename VALUE&gt;\nvoid decompose(\n  const Mat4x4T&lt;VALUE&gt; &amp;mat,\n  RotAxis axis1, RotAxis axis2, RotAxis axis3,\n  VALUE &amp;angle1, VALUE &amp;angle2, VALUE &amp;angle3)\n{\n  assert(axis1 != axis2 &amp;&amp; axis2 != axis3);\n  /* This is ported from EulerAngles.h of the Eigen library. */\n  const int odd = (axis1 + 1) % 3 == axis2 ? 0 : 1;\n  const int i = axis1;\n  const int j = (axis1 + 1 + odd) % 3;\n  const int k = (axis1 + 2 - odd) % 3;\n  if (axis1 == axis3) {\n    angle1 = atan2(mat[j][i], mat[k][i]);\n    if ((odd &amp;&amp; angle1 &lt; (VALUE)0) || (!odd &amp;&amp; angle1 &gt; (VALUE)0)) {\n      angle1 = angle1 &gt; (VALUE)0 ? angle1 - (VALUE)Pi : angle1 + (VALUE)Pi;\n      const VALUE s2 = length(Vec2T&lt;VALUE&gt;(mat[j][i], mat[k][i]));\n      angle2 = -atan2(s2, mat[i][i]);\n    } else {\n      const VALUE s2 = length(Vec2T&lt;VALUE&gt;(mat[j][i], mat[k][i]));\n      angle2 = atan2(s2, mat[i][i]);\n    }\n    const VALUE s1 = sin(angle1);\n    const VALUE c1 = cos(angle1);\n    angle3 = atan2(c1 * mat[j][k] - s1 * mat[k][k],\n      c1 * mat[j][j] - s1 * mat[k][j]);\n  } else {\n    angle1 = atan2(mat[j][k], mat[k][k]);\n    const VALUE c2 = length(Vec2T&lt;VALUE&gt;(mat[i][i], mat[i][j]));\n    if ((odd &amp;&amp; angle1&lt;(VALUE)0) || (!odd &amp;&amp; angle1 &gt; (VALUE)0)) {\n      angle1 = (angle1 &gt; (VALUE)0)\n        ? angle1 - (VALUE)Pi : angle1 + (VALUE)Pi;\n      angle2 = atan2(-mat[i][k], -c2);\n    } else angle2 = atan2(-mat[i][k], c2);\n    const VALUE s1 = sin(angle1);\n    const VALUE c1 = cos(angle1);\n    angle3 = atan2(s1 * mat[k][i] - c1 * mat[j][i],\n      c1 * mat[j][j] - s1 * mat[k][j]);\n  }\n  if (!odd) {\n    angle1 = -angle1; angle2 = -angle2; angle3 = -angle3;\n  }\n}\n\n#endif // LIN_MATH_H\n</code></pre>\n\n<p>Before I added the Qt code I compiled simply with:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ g++ -std=c++11 -o rasterizerSimple rasterizerSimple.cc\n</code></pre>\n\n<p>To compile with Qt, I wrote a Qt project <code>rasterizerSimple.pro</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SOURCES = rasterizerSimple.cc\n\nQT += widgets\n</code></pre>\n\n<p>Compiled and tested on <a href=\"http://www.cygwin.org\" rel=\"nofollow noreferrer\">cygwin64</a> on Windows 10:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ qmake-qt5 rasterizerSimple.pro\n\n$ make\n\n$ ./rasterizerSimple\n2724 2921 3015 2781 2800 2805 2859 2783 2931 2871 2902 2983 2995 2882 2940 2878 3007 2993 3066 3067 3118 3144 2849 3084 3020 3005 3030 2991 2999 3065 2941 3123 3119 2905 3135 2938\n</code></pre>\n\n<p><kbd>Ctrl</kbd><kbd>C</kbd></p>\n\n<p>My laptop has an Intel i7 (and produced a bit cooler noise when I let run the program a bit longer).</p>\n\n<p>That looks not that bad &ndash; an average of 3000 triangles per second. (It beats the the 130 FPS of OP if his i7 is not much slower than mine.)</p>\n\n<p>May be, the FPS could be pushed a bit more by further improvements. For example, interpolation could be done using <a href=\"https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm\" rel=\"nofollow noreferrer\">Bresenham's line algorithm</a> though it does not appear in most inner loop. To optimize most inner loop, the filling of horizontal line should be done in a faster fashion (although I'm not quite sure how to achieve this).</p>\n\n<p>To start the Qt visualization, the application has to be started with <code>gui</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./rasterizerSimple gui\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Z6ES6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z6ES6.png\" alt=\"snapshot of rasterizerSimple with simple animation and Qt display\"></a></p>\n\n<hr>\n\n<p>This sample inspired me to a toy project <a href=\"https://github.com/scheff173/NoGL3dDemo\" rel=\"nofollow noreferrer\">No-GL 3D Renderer</a> which can be found on github.</p>\n"}], "owner": {"reputation": 37, "user_id": 9532011, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208503265377403/picture?type=large", "display_name": "Martin", "link": "https://stackoverflow.com/users/9532011/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1538582327, "creation_date": 1537972068, "last_edit_date": 1537973065, "question_id": 52520102, "link": "https://stackoverflow.com/questions/52520102/software-rasterization-implementation-speed-up-ideas", "title": "software rasterization implementation speed up ideas", "body": "<p>I am writing software rasterization of triangles.\nIn the example bellow I am rasterizing 1 full screen triangle and its still damned slow...on my i7 it runs about 130 FPS for 1 polygon at 1024x768.</p>\n\n<p>I can see some space for optimalization but still not even close to performance I was hopping to get. What am I missing, any ideas how to speed this up rapidly? ...even Quake2 was running faster in software rendering on Pentium 2 with more polygons I guess :/ </p>\n\n<p>Thanks for any suggestions!</p>\n\n<p>Here is the code (I am using gmtl for Vectors)</p>\n\n<pre><code>float cross(Vec2f const &amp;edge1, Vec2f const &amp;edge2)\n{\n    return edge1[0] * edge2[1] - edge1[1] * edge2[0];\n}\n\nbool caculateBarycentricWeights(float invDoubleTriArea, float doubleTriArea, Vec2f const (&amp;edgesFromTo01_12_20)[3], Vec2f const (&amp;vertex)[3], Vec2f const &amp;point, float(&amp;outWeight)[3])\n{\n    outWeight[0] = cross(point - vertex[2], edgesFromTo01_12_20[1]);\n    outWeight[1] = cross(point - vertex[0], edgesFromTo01_12_20[2]);\n    outWeight[2] = cross(point - vertex[1], edgesFromTo01_12_20[0]);\n\n    if (outWeight[0] &gt;= 0.0f &amp;&amp;  outWeight[1] &gt;= 0.0f &amp;&amp;  outWeight[2] &gt;= 0.0f\n        &amp;&amp; outWeight[0] + outWeight[1] + outWeight[2] &lt;= doubleTriArea * 1.000001f)\n    {\n        outWeight[0] *= invDoubleTriArea;\n        outWeight[1] *= invDoubleTriArea;\n        outWeight[2] *= invDoubleTriArea;\n\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n\nvoid rasterize(Vec3f const &amp;vertex0, Vec3f const &amp;vertex1, Vec3f const &amp;vertex2, vector&lt;Vec3f&gt; &amp;dstBuffer)\n{\n    Vec2f const edgesFromTo01_12_20[3] =\n    {\n        Vec2f(vertex1[0] - vertex0[0], vertex1[1] - vertex0[1]),\n        Vec2f(vertex2[0] - vertex1[0], vertex2[1] - vertex1[1]),\n        Vec2f(vertex0[0] - vertex2[0], vertex0[1] - vertex2[1])\n    };\n\n    //in viewport space up and down is switched, thats why '-'\n    float const doubleTriangleArea = -cross(edgesFromTo01_12_20[0], edgesFromTo01_12_20[1]);\n    float const invDoubleTriangleArea = 1.0f / doubleTriangleArea;\n\n\n    float weight[3];\n\n    float invZ[3] = { 1.0f / vertex0[2], 1.0f / vertex1[2], 1.0f / vertex2[2] };\n\n    Vec2f p(vertex0[0], vertex0[1]);\n\n    Vec2f vPos[3] = {\n        Vec2f(vertex0[0], vertex0[1]),\n        Vec2f(vertex1[0], vertex1[1]),\n        Vec2f(vertex2[0], vertex2[1])\n    };\n\n    const size_t RES_X = 1024;\n    const size_t RES_Y = 768;\n\n    for (size_t y = 0; y &lt; RES_Y; ++y)\n    {\n        p[1] = y;\n\n        for (size_t x = 0; x &lt; RES_X; ++x)\n        {\n            p[0] = x;\n\n            if (caculateBarycentricWeights(invDoubleTriangleArea, doubleTriangleArea, edgesFromTo01_12_20, vPos, p, weight))\n            {\n                //interpolate values\n                float z = 1.0f / (weight[0] * invZ[0] + weight[1] * invZ[1] + weight[2] * invZ[2]);\n                dstBuffer[y * RES_X + x] = ((vertex0 * (weight[0] * invZ[0])) + (vertex1 * (weight[1] * invZ[1])) + (vertex2 * (weight[2] * invZ[2]))) * z;\n\n            }\n        }\n    }\n}\n\n\nint main(int argc, char *argv[])\n{   \n    vector&lt;Vec3f&gt; buffer;\n    buffer.resize(1024 * 768);\n\n    high_resolution_clock::time_point start = high_resolution_clock::now();\n    size_t fps = 0;\n\n    while (true) \n    {\n\n        static Vec3f v0 = { -2000.0f, -2000.0, 10.0 };\n        static Vec3f v1 = { 2000.0f, -2000.0, 10.0 };\n        static Vec3f v2 = { 0.0f, 2000.0, 10.0 };\n\n        rasterize(v0, v2, v1, buffer);\n        ++fps;\n\n        high_resolution_clock::time_point now = high_resolution_clock::now();\n        auto timeDiff = duration_cast&lt;microseconds&gt;(now - start).count();\n\n        static const long oneSecond = 1000000;\n        if (timeDiff &gt;= oneSecond)\n        {\n\n            cout &lt;&lt; fps &lt;&lt; \" \";\n\n            fps = 0;\n            start = now;\n        }\n\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>This is what I get when using CPU sampling profiling</p>\n\n<p><a href=\"https://i.stack.imgur.com/AKpfH.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 2, "creation_date": 1537971120, "post_id": 52519690, "comment_id": 91979078, "body": "You mean <code>(c - a).normalized()</code> ? . Edit: heres the quick reference guide <a href=\"https://eigen.tuxfamily.org/dox/group__QuickRefPage.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/group__QuickRefPage.html</a>"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1537971456, "post_id": 52519690, "comment_id": 91979316, "body": "I can&#39;t find a reference for <code>std::dot</code>"}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1537971479, "post_id": 52519690, "comment_id": 91979325, "body": "and what is exactly std::dot?"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1537971604, "post_id": 52519690, "comment_id": 91979396, "body": "ah there is no std::dot! Is there a dot product function?"}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 2, "creation_date": 1537971668, "post_id": 52519690, "comment_id": 91979447, "body": "Check the quick reference guide..."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1537971751, "post_id": 52519690, "comment_id": 91979502, "body": "<code>std::inner_product</code>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1537976497, "post_id": 52519690, "comment_id": 91982680, "body": "Sorry but I have to give this question a -1. Literally every part of it (and the follow-up questions) is more than trivial to find in the Eigen documentation (or via googling) - no research effort shown."}], "answers": [{"comments": [{"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1537971880, "post_id": 52519874, "comment_id": 91979600, "body": "Thank you. One last thing, how can i get the dot product of two <code>Eigen::Vector3f</code>? <code>dot(c_minus_a_normalized, b_minus_a_normalized)</code>?"}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "reply_to_user": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 2, "creation_date": 1537972038, "post_id": 52519874, "comment_id": 91979709, "body": "I missed this point, obviously, <code>std::dot</code>won&#39;t work, I edited my answer with the correct way : <code>c_minus_a_normalized.dot(b_minus_a_normalized)</code>. Just note that if you had opened the Eigen quick reference link and searched for dot ... you would have found the solution in 2 minutes ;-)..."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1537972130, "post_id": 52519874, "comment_id": 91979764, "body": "I just found it and clicked back as you answered! Sorry, and many thanks!"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1537972587, "post_id": 52519874, "comment_id": 91980101, "body": "one more quick thing, if you have another minute... is there a <code>cross</code>? Can i do this? <code>Eigen::Vector3f axis0 = normalize(cross(c - a, b - a));</code>"}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "reply_to_user": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 1, "creation_date": 1537972693, "post_id": 52519874, "comment_id": 91980178, "body": "<code>#include &lt;Eigen&#47;Geometry&gt;</code> <code>vec3 = vec1.cross(vec2);</code>"}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "reply_to_user": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 1, "creation_date": 1537972768, "post_id": 52519874, "comment_id": 91980240, "body": "so :<code>Eigen::Vector3f axis0 = ((c - a).cross(b - a)).normalized();</code>"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1537973023, "post_id": 52519874, "comment_id": 91980415, "body": "Thank you again. Much appreciated."}], "tags": [], "owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "is_accepted": true, "score": 5, "last_activity_date": 1537972067, "last_edit_date": 1537972067, "creation_date": 1537971416, "answer_id": 52519874, "question_id": 52519690, "link": "https://stackoverflow.com/questions/52519690/eigen-dot-product-method/52519874#52519874", "title": "Eigen, dot product method:", "body": "<p><code>Eigen::Vector3f</code> has a <code>normalized()</code> method which returns a normalized copy of the vector.</p>\n\n<p>So you could do it like this :</p>\n\n<pre><code>Eigen::Vector3f c_minus_a_normalized = (c - a).normalized();\nEigen::Vector3f b_minus_a_normalized = (b - a).normalized();\n\nfloat ac_ab_0 = acos(std::clamp(c_minus_a_normalized.dot(b_minus_a_normalized), -1.f, 1.f));\n</code></pre>\n\n<p>You should check <a href=\"https://eigen.tuxfamily.org/dox/group__QuickRefPage.html\" rel=\"nofollow noreferrer\">Eigen quick reference</a> for more info.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 52519874, "answer_count": 1, "score": 0, "last_activity_date": 1537972067, "creation_date": 1537970820, "question_id": 52519690, "link": "https://stackoverflow.com/questions/52519690/eigen-dot-product-method", "title": "Eigen, dot product method:", "body": "<p>I am converting some psuedo-code to actual c++.</p>\n\n<p>The psuedo is:</p>\n\n<pre><code>float ac_ab_0 = acos(clamp(dot(\n        normalize(c - a),\n        normalize(b - a)), -1, 1));\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>Eigen::Vector3f a = Eigen::Vector3f(0, 0, 0);\nEigen::Vector3f b = Eigen::Vector3f(0, -5.579, -6.747);\nEigen::Vector3f c = Eigen::Vector3f(0, -13.637, -9.751);\n</code></pre>\n\n<p>I am attempting:</p>\n\n<pre><code>float ac_ab_0 = acos(std::clamp(std::dot(\n        normalize(c - a),\n        normalize(b - a)), -1, 1));\n</code></pre>\n\n<p>but am stuck. What should this line:\n<code>normalize(c - a)</code>\nlook like with <code>Eigen::Vector3f</code>?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537970373, "post_id": 52519467, "comment_id": 91978588, "body": "Did you try using <code>FindWindow</code> instead?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1537970529, "post_id": 52519467, "comment_id": 91978689, "body": "think you need have <code>&lt;disableWindowFiltering&gt;true&lt;&#47;disableWindowFiltering&gt;</code> in manifest - <a href=\"https://docs.microsoft.com/en-us/windows/desktop/sbscs/application-manifests\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/sbscs/&hellip;</a>"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "edited": false, "score": 0, "creation_date": 1537970632, "post_id": 52519467, "comment_id": 91978747, "body": "No, In general I need to find any window that overlaps my app window, so EnumDesktopWindows is excellent function for this. But I found that it doesn&#39;t work for search window on Windows 10. After some investigations I found out that this window isn&#39;t passed to MyCallback."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1537970720, "post_id": 52519467, "comment_id": 91978814, "body": "because by default windows filter such windows. for enumerate immersive windows from the desktop you need set in manifest <code>&lt;disableWindowFiltering&gt;true&lt;&#47;disableWindowFiltering&gt;</code>"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1537971229, "post_id": 52519467, "comment_id": 91979171, "body": "@RbMm, I&#39;ve never worked with application manifests. How should I add the parameter here? Should I create new manifest file or is it possible to set manifest options in project settings in Visual Studio?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1537971658, "post_id": 52519467, "comment_id": 91979436, "body": "It&#39;s probably not a top-level window and is instead a child window of Explorer.  Use Spyxx (compes with MSVS) to check this."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1537974506, "post_id": 52519467, "comment_id": 91981429, "body": "@RbMm, I created following manifest (<a href=\"https://pastebin.com/wtNmD4e7\" rel=\"nofollow noreferrer\">pastebin.com/wtNmD4e7</a>) and set it as a additional manifest file for my project. But still can&#39;t find needed window."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1537979315, "post_id": 52519467, "comment_id": 91984161, "body": "@RichardCritten, search windows is closed after it had lost focus, so I can&#39;t catch it with spy++"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 1, "creation_date": 1537981874, "post_id": 52519467, "comment_id": 91985428, "body": "Why do you need to know if something is overlapping your window?"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1537986487, "post_id": 52519467, "comment_id": 91987581, "body": "@RichardCritten, I found this window in spy++ by hwnd and this window has no parents."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537993887, "post_id": 52519467, "comment_id": 91991069, "body": "You don&#39;t need to enumerate windows at all. Just use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winauto/winevents-collision169\" rel=\"nofollow noreferrer\">WinEvents</a>, and have the system tell you, when windows are created and destroyed."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1538060323, "post_id": 52519467, "comment_id": 92019454, "body": "Classical <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. You ask about your attempted solution instead of the actual problem you want to solve."}], "owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1538639846, "creation_date": 1537970153, "last_edit_date": 1538639846, "question_id": 52519467, "link": "https://stackoverflow.com/questions/52519467/enumdesktopwindows-doesnt-find-windows10-search-window", "title": "EnumDesktopWindows doesn&#39;t find Windows10 search window", "body": "<p>I'm trying to find Windows 10 search window (called by Win + S shortkey) using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-enumdesktopwindows\" rel=\"nofollow noreferrer\">EnumDesktopWindows</a>, but it seems that this windows isn't passed to the callback function.\nWith inspect (from Windows Kit) utility I found that class name of the search window is <code>SearchPane</code>, but I didn't find this name as a result of my test program:</p>\n\n<pre><code>BOOL CALLBACK MyCallback(HWND hwnd, LPARAM lParam)\n{\n    wchar_t strText[256];\n\n    GetClassName(hwnd, strText, 256);\n\n    wcout &lt;&lt; strText &lt;&lt; endl;\n\n    if (wcscmp(strText, L\"SearchPane\") == 0)\n    {\n        wcout &lt;&lt; L\"***** DONE *****\" &lt;&lt; endl;\n        return FALSE;\n    }\n\n    return TRUE;\n}\n\nint main()\n{\n    Sleep(6000);\n    ::EnumDesktopWindows(nullptr, MyCallback, NULL);\n}\n</code></pre>\n\n<p><code>Sleep(6000)</code> is needed for me to open search window.\nAs a result I don't see \"***** DONE *****\" text or even some class name that is similar to <code>SearchPane</code>.</p>\n\n<p>The main purpose is to find if search window overlaps my app window, but for now I even can't detect if search window is opened and its position.</p>\n"}, {"tags": ["c++", "winapi", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537970537, "post_id": 52519349, "comment_id": 91978696, "body": "Are you sure this is compiling the resources not &#39;NmsLib_LANG.cpp&#39; ? I can&#39;t imagine you&#39;d include afx.h in a resource compilation."}, {"owner": {"reputation": 3, "user_id": 10396246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc620832e4c4a23bcacf0e2f0db1dcb?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Andreas Kocher", "link": "https://stackoverflow.com/users/10396246/thomas-andreas-kocher"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537975380, "post_id": 52519349, "comment_id": 91981974, "body": "It was  the linking of the different languages off the resources  which was a genrated Code  an in this spe piels of Code the   <i>USING_V110_SDK71</i> wa missing"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1537994184, "post_id": 52519349, "comment_id": 91991187, "body": "You are setting <code>WINVER</code> to 0x0501, i.e. Windows XP. <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-setdefaultdlldirectories\" rel=\"nofollow noreferrer\">SetDefaultDllDirectories</a> is not available on Windows XP. Your issue has nothing to do with switching from x86 to x64. Your issue is likely, that your x86 and x64 project configurations do not match."}], "owner": {"reputation": 3, "user_id": 10396246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abc620832e4c4a23bcacf0e2f0db1dcb?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Andreas Kocher", "link": "https://stackoverflow.com/users/10396246/thomas-andreas-kocher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1537970249, "creation_date": 1537969864, "last_edit_date": 1537970249, "question_id": 52519349, "link": "https://stackoverflow.com/questions/52519349/visual-studio-15-migrate-from-x86-to-x64-error-in-resource-compile", "title": "Visual Studio 15 migrate from X86 to X64 Error in Resource compile", "body": "<p>When I want do Compile my Resources have the following error</p>\n\n<pre><code>error C2039: 'SetDefaultDllDirectories': is not a member of '`global namespace''\n\nWriting STRING:2788,    lang:0x410, size 34\ncl /nologo /W4 /GR /EHsc /GF /Gy /DWINVER=0x0501 /D\"_MBCS\" /D\"_AFXDLL\" /U\"_UNICODE\" /Fo\"Debug/\" /Fd\"Debug/\" /FD /MDd /Od /D\"WIN32\" /I\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\NmsBuild\\Include\" /I\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Ms\\Include\" /I\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\" /I\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\PlatformSDK\\Include\" /D\"_DEBUG\" \"Debug\\NmsLib_LANG.cpp\" /link /NOLOGO /SUBSYSTEM:WINDOWS /MACHINE:I386 /base:0x13600000 /version:1.1 /incremental:no /map:\"Debug\\NmsLib_LANG.map\" /dll /out:\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\Bin\\Debug\\.\\NmsLib_LANG.dll\" /libpath:\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Lib\" /libpath:\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Ms\\Lib\" /libpath:\"D:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\PlatformSDK\\Lib\" \"Debug\\NmsLib_LANG.res\" \nNmsLib_LANG.cpp\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\\afx.h(38): warning C4996: 'MBCS_Support_Deprecated_In_MFC': MBCS support in MFC is deprecated and may be removed in a future version of MFC.\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\\afx.h(33): note: see declaration of 'MBCS_Support_Deprecated_In_MFC'\nd:\\home\\atiras\\v77ma_64bit_branch001\\bindll\\ms\\include\\sal_supp.h(57): warning C4005: '__useHeader': macro redefinition\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Ms\\Include\\sal.h(2866): note: see previous definition of '__useHeader'\nd:\\home\\atiras\\v77ma_64bit_branch001\\bindll\\ms\\include\\specstrings_supp.h(77): warning C4005: '__on_failure': macro redefinition\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Ms\\Include\\sal.h(2876): note: see previous definition of '__on_failure'\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\\atlcore.h(644): error C2039: 'SetDefaultDllDirectories': is not a member of '`global namespace''\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\\atlcore.h(644): error C2065: 'SetDefaultDllDirectories': undeclared identifier\nD:\\Home\\Atiras\\V77Ma_64Bit_Branch001\\BinDll\\Mf\\Include\\atlcore.h(646): error C2065: 'LOAD_LIBRARY_SEARCH_SYSTEM32': undeclared identifier\n</code></pre>\n\n<p>I have defined <code>_USING_V110_SDK71_</code> but that does not seams to work on Resource Compiling</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537970280, "post_id": 52519290, "comment_id": 91978525, "body": "@Someprogrammerdude:  Corrected. Don&#39;t want people to react on this small mistake instead of answering questions."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1537970447, "post_id": 52519290, "comment_id": 91978635, "body": "<a href=\"https://en.cppreference.com/w/cpp/types/is_invocable\" rel=\"nofollow noreferrer\">std::is_invocable</a>, since C++17."}], "answers": [{"comments": [{"owner": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "edited": false, "score": 0, "creation_date": 1537970972, "post_id": 52519570, "comment_id": 91978988, "body": "I get an error with your code:      n_void_return&lt;enable_if&lt;_Test,_Ty&gt;::type,void&gt;&#39;     1&gt;        with     1&gt;        [     1&gt;            _Ty=void     1&gt;        ]"}, {"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "reply_to_user": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "edited": false, "score": 0, "creation_date": 1537972163, "post_id": 52519570, "comment_id": 91979796, "body": "The error was mangled. And I also fixed some errors in my answer."}, {"owner": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "edited": false, "score": 0, "creation_date": 1537974726, "post_id": 52519570, "comment_id": 91981570, "body": "This really is what I need. I still do not get why my version does not work?"}, {"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "reply_to_user": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "edited": false, "score": 0, "creation_date": 1537976951, "post_id": 52519570, "comment_id": 91982906, "body": "I understand why this appears strange. Notice that in my code, the second <code>typename</code> is <code>void</code> both for the specialization (if there is no substitution failure) and for the base case. They are the same templates, but the specialization is more &quot;specialized&quot;, so it is preferred. In your code, the specialization is considered only when T() returns a T."}], "tags": [], "owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "is_accepted": true, "score": 3, "last_activity_date": 1537972136, "last_edit_date": 1537972136, "creation_date": 1537970444, "answer_id": 52519570, "question_id": 52519290, "link": "https://stackoverflow.com/questions/52519290/find-out-if-type-is-callable/52519570#52519570", "title": "Find out if type is callable", "body": "<p>Use <code>enable_if</code></p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct is_callable_non_void_return : public std::false_type {};\n\ntemplate &lt;typename T&gt;\nstruct is_callable_non_void_return&lt;\n    T,\n    std::enable_if_t&lt;!std::is_same_v&lt;void, std::result_of_t&lt;T()&gt;&gt;&gt;&gt;\n    : public std::true_type {};\n</code></pre>\n\n<p>This works because of SFINAE: Substitution Failure Is Not An Error.</p>\n\n<p>The compiler will see the second <code>is_callable_non_void_return</code> as a specialization of the first, and try to match the template by instantiating the <code>enable_if</code>: first <code>result_of_t</code>, then <code>is_same_v</code>. If <strong>either</strong> fails, then a substitution failure occurs and the compiler falls back to the general case.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1538063578, "creation_date": 1538063578, "answer_id": 52540821, "question_id": 52519290, "link": "https://stackoverflow.com/questions/52519290/find-out-if-type-is-callable/52540821#52540821", "title": "Find out if type is callable", "body": "<p>You misunderstand what template specialization means.</p>\n\n<pre><code>template&lt;class T, class U = T&gt;\nstruct is_callable\n</code></pre>\n\n<p>this is the primary specialization.</p>\n\n<p>When you do <code>is_callable&lt;Foo&gt;</code> it means you are typing <code>is_callable&lt;Foo, Foo&gt;</code>.  Nothing you co in other specializations can change this.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct is_callable&lt;T, std::result_of_t&lt;T()&gt;&gt;\n</code></pre>\n\n<p>this attemptes to <em>match against</em> the arguments passed, it never changes them.</p>\n\n<p>So for <code>is_callable&lt;Foo&gt;</code> this is <code>is_callable&lt;Foo,Foo&gt;</code>.  Matching <code>T</code> against <code>Foo</code> is easy; so now we have <code>T=Foo</code>.  We then look at the ones that are dependent on <code>T</code> -- <code>std::result_of_t&lt;T()&gt;</code> aka <code>std::result_of_t&lt;Foo()&gt;</code>.  This evaluates to the result of calling <code>Foo</code> with <code>()</code> (roughly).</p>\n\n<p>If we had:</p>\n\n<pre><code>struct Foo {\n  Foo operator(){ return {}; }\n};\n</code></pre>\n\n<p>then <code>std::result_of_t&lt;Foo()&gt;</code> is <code>Foo</code>, and the specialization matches!</p>\n\n<p>But if we have <code>Foo=std::function&lt;void()&gt;</code> then the result of <code>()</code> is <code>void</code> coming out of <code>std::result_of_t&lt;Foo()&gt;</code>.</p>\n\n<p>Thus we have <code>is_callable&lt;Foo, void&gt;</code> matching against <code>is_callable&lt;Foo, Foo&gt;</code>.  This obviously doesn't match as <code>Foo</code> does not equal <code>void</code>.</p>\n\n<hr>\n\n<pre><code>template&lt;class T, class U = void&gt;\nstruct is_callable\n// body unchanged\n</code></pre>\n\n<p>notice the <code>U=void</code> instead of the <code>U=T</code>.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct is_callable&lt;T, std::void_t&lt;std::result_of_t&lt;T()&gt;&gt;&gt;\n// body unchanged\n</code></pre>\n\n<p>and here we use <code>void_t</code>.</p>\n\n<p><code>std::void_t</code> takes any types passed to it and produces <code>void</code>.  Now let us go through the same exercise with <code>is_callable&lt; std::function&lt;int()&gt; &gt;</code>.</p>\n\n<p>Under the primary specialization this becomes</p>\n\n<pre><code>is_callable&lt;std::function&lt;int()&gt;, void&gt;\n</code></pre>\n\n<p>we then try to match it against the specialization:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct is_callable&lt;T, std::void_t&lt;std::result_of_t&lt;T()&gt;&gt;&gt;\n</code></pre>\n\n<p>again, <code>T=std::function&lt;int()&gt;</code> arrives immediately.  The second clause is in a dependent context, so we don't pattern match it.</p>\n\n<pre><code>struct is_callable&lt;std::function&lt;int()&gt;, std::void_t&lt;std::result_of_t&lt;std::function&lt;int()&gt;()&gt;&gt;&gt;\n\nstruct is_callable&lt;std::function&lt;int()&gt;, std::void_t&lt;int&gt;&gt;\n\nstruct is_callable&lt;std::function&lt;int()&gt;, void&gt;\n</code></pre>\n\n<p>and wow, this matches the types passed to the template!</p>\n\n<p><code>std::enable_if</code> uses a trick whereby if the first argument is <code>true</code>, it returns the second argument (defaulting to <code>void)</code>.  If the first argument is <code>false</code>, it is a substitution failure.</p>\n\n<blockquote>\n  <p>How to improve the is_func to return true not only on callable objects, but callable with return type which is constructible (use somewhere <code>std::is_constructible_v&lt;</code></p>\n</blockquote>\n\n<p>I'll skip the bodies:</p>\n\n<pre><code>template&lt;class T, class=void&gt;\nstruct is_callable\n// ...\ntemplate&lt;class T&gt;\nstruct is_callable&lt;T, std::enable_if_t&lt;\n  std::is_constructible_v&lt; std::result_of_t&lt;T()&gt; &gt;\n&gt;&gt;\n</code></pre>\n\n<p>now, for a type <code>T</code> for which <code>T()</code> is not constructible, the specialization fails to match because in computing the 2nd argument we get a substitution failure.  And when it is constructible, we get <code>void</code>.</p>\n"}], "owner": {"reputation": 294, "user_id": 1722413, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d99b4224141a78920786134d16a128f0?s=128&d=identicon&r=PG", "display_name": "Alex B.", "link": "https://stackoverflow.com/users/1722413/alex-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52519570, "answer_count": 2, "score": 1, "last_activity_date": 1538063578, "creation_date": 1537969704, "last_edit_date": 1538062910, "question_id": 52519290, "link": "https://stackoverflow.com/questions/52519290/find-out-if-type-is-callable", "title": "Find out if type is callable", "body": "<p>I need to figure out if template argument is a callable object with non-void return value. </p>\n\n<p>I've defined the following:</p>\n\n<pre><code>template&lt;class T, class U = T&gt;\nstruct is_callable\n{\n    constexpr static const bool val = false;\n};\n\ntemplate&lt;class T&gt;\nstruct is_callable&lt;T, std::result_of_t&lt;T()&gt;&gt;\n{\n    constexpr static const bool val = true;\n};\n\ntemplate&lt;class T&gt;\nconstexpr bool is_func = is_callable&lt;T&gt;::val;\n</code></pre>\n\n<p>But the following variables all are <code>false</code></p>\n\n<pre><code>auto lambda = []() {return 3.0; };\n\nauto intIsFunc = is_func&lt;int&gt;; //false -- ok\nauto functionIsFunc = is_func&lt;std::function&lt;int()&gt;&gt;; //false -- wrong\nauto lambdaIsFunc = is_func&lt;decltype(lambda)&gt;; //false -- wrong\n</code></pre>\n\n<ul>\n<li><p>What is wrong with the code?</p></li>\n<li><p>How to improve the is_func to return <code>true</code> not only on callable objects, but callable with return type which is constructible (use somewhere <code>std::is_constructible_v&lt;&gt;</code>)?</p></li>\n</ul>\n"}, {"tags": ["c++", "sorting", "quicksort"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1537969733, "post_id": 52519223, "comment_id": 91978155, "body": "You need to &quot;draw&quot; your swaps too if you want the same effect."}, {"owner": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1537969962, "post_id": 52519223, "comment_id": 91978299, "body": "@SamerTufail Sorry I copied and pasted this without showing that i used draw_sort after all swap()&#39;s. But that still doesnt fix this logic flaw."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1537970467, "post_id": 52519223, "comment_id": 91978651, "body": "you mean for each swap you called draw and that did not fix it?"}, {"owner": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1537970792, "post_id": 52519223, "comment_id": 91978863, "body": "@SamerTufail does this (editted this into post, and also updated my code to what it is now.) <a href=\"https://www.youtube.com/watch?v=JpMX8jESoWI&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">youtube.com/watch?v=JpMX8jESoWI&amp;feature=youtu.be</a>"}, {"owner": {"reputation": 1065, "user_id": 69902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48730fb59f43a29923c003be0dd609c8?s=128&d=identicon&r=PG", "display_name": "Phill", "link": "https://stackoverflow.com/users/69902/phill"}, "edited": false, "score": 1, "creation_date": 1537971648, "post_id": 52519223, "comment_id": 91979433, "body": "It looks like your sorting has a &quot;sliding window&quot; effect, only sorting the elements within a given size block, rather than from the entire array of numbers.  Posting a video of the problem is a great idea, btw."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "edited": false, "score": 0, "creation_date": 1537971739, "post_id": 52519626, "comment_id": 91979494, "body": "Thank you for that, upon using your code to test however, I found that it only works if partitionSize and size are the same int?  This may be due to the program freezing im not sure. Does that sound right to you?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "edited": false, "score": 0, "creation_date": 1537975409, "post_id": 52519626, "comment_id": 91981992, "body": "@TrentBartels you&#39;ll have to debug that yourself I&#39;m afraid, I didn&#39;t test the above code so may have made some mistakes (or it could be exposing bugs in your original code)."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "edited": false, "score": 0, "creation_date": 1537975739, "post_id": 52519626, "comment_id": 91982206, "body": "@TrentBartels do you mean the initial values you pass into your first call to <code>quick_sort</code>? If so yes, you must pass <code>size</code> for both values."}, {"owner": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "edited": false, "score": 0, "creation_date": 1538043318, "post_id": 52519626, "comment_id": 92008399, "body": "Yes that is what I meant. It worked perfectly thank you!"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 5, "last_activity_date": 1537970622, "creation_date": 1537970622, "answer_id": 52519626, "question_id": 52519223, "link": "https://stackoverflow.com/questions/52519223/sort-visualizer-bug-in-c-using-quicksort/52519626#52519626", "title": "sort visualizer bug in c++ using quicksort", "body": "<p>Inside the <code>quick_sort</code> function, <code>size</code> is not the size of the list its the size of the current partition, therefore you only draw the current partition not the whole list when you call <code>draw_sort</code>. You need to add extra parameters with the original list size:</p>\n\n<pre><code>int partition (int values[], int low, int partitionSize, int size)\n{\n    int pivot = values[partitionSize]; // the pivot value\n    int i = (low - 1); // currently selected element\n\n    // work out if all values have become the pivot value, loop until all have.\n    for (int j = low; j &lt;= partitionSize-1; j++)\n    {\n        if (values[j] &lt;= pivot)\n        {\n            i++;\n            swap(values[i], values[j]);\n            draw_sort(values, size);\n        }\n    }\n    swap(values[i + 1], values[partitionSize]);\n    draw_sort(values, size);\n    return (i+1);\n}\n\nvoid quick_sort (int values[], int low, int partitionSize, int size)\n{\n    if (low &lt; partitionSize)\n    {\n        // This is the partitioning index for quick sorting\n        int pi = partition(values, low, partitionSize, size);\n\n        // This sorts small partitions at a time then sorts them together.\n        quick_sort(values, low, (pi - 1), size);\n        quick_sort(values, (pi + 1), partitionSize, size);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8820464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c46d45695f68d43a8d6cc44f4c18fe?s=128&d=identicon&r=PG&f=1", "display_name": "Wise", "link": "https://stackoverflow.com/users/8820464/wise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 52519626, "answer_count": 1, "score": 4, "last_activity_date": 1537971279, "creation_date": 1537969477, "last_edit_date": 1537971279, "question_id": 52519223, "link": "https://stackoverflow.com/questions/52519223/sort-visualizer-bug-in-c-using-quicksort", "title": "sort visualizer bug in c++ using quicksort", "body": "<p>so when I create this sorting visualiser using a game making library called splashkit, ( I know its not ideal but its what my course is teaching me in) I am trying to show the entire array and show each individual swap. But instead it is doing this: <a href=\"https://www.youtube.com/watch?v=JpMX8jESoWI&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">Video of my bug</a></p>\n\n<p>I am not making sense of the logic of my code as I followed a tutorial to achieve this. The sort itself is fine and works great however the drawing of the rectangles is weird, and not what im trying to achieve.\n<a href=\"https://www.youtube.com/watch?v=2L4Zb_DFzd8\" rel=\"nofollow noreferrer\">I would like to achieve something like this.</a> (Without the colors/sound effects).\nCODE UPDATED:</p>\n\n<pre><code>#include \"splashkit.h\"\n\n#define NUM_VALS 200\n\nvoid draw_values(const int values[], int size)\n{\n    int x = 0;\n    int y;\n    int rect_height;\n    int rect_width = screen_width() / size;\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        rect_height = values[i];\n        y = screen_height() - rect_height;\n\n        fill_rectangle(COLOR_RED, x, y, rect_width, rect_height);\n        draw_rectangle(COLOR_WHITE, x, y, rect_width, rect_height);\n\n        x += rect_width;\n    }\n}\n\nvoid draw_sort(int values[], int size)\n{\n    clear_screen(COLOR_WHITE);\n    draw_values(values, size);\n    refresh_screen(60);\n}\n\nvoid swap (int &amp;value1, int &amp;value2)\n{\n    int temp = value1;\n    value1 = value2;\n    value2 = temp;\n}\n\n/* inspiration/educated from https://www.geeksforgeeks.org/quick-sort/ */\nint partition (int values[], int low, int size)\n{\n    int pivot = values[size]; // the pivot value\n    int i = (low - 1); // currently selected element\n\n    // work out if all values have become the pivot value, loop until all have.\n    for (int j = low; j &lt;= size-1; j++)\n    {\n        if (values[j] &lt;= pivot)\n        {\n            i++;\n            swap(values[i], values[j]);\n            draw_sort(values, size);\n        }\n    }\n    swap(values[i + 1], values[size]);\n    draw_sort(values, size);\n    return (i+1);\n}\n\nvoid quick_sort (int values[], int low, int size)\n{\n    if (low &lt; size)\n    {\n        // This is the partitioning index for quick sorting\n        int pi = partition(values, low, size);\n\n        // This sorts small partitions at a time then sorts them together.\n        quick_sort(values, low, (pi - 1));\n        quick_sort(values, (pi + 1), size);\n    }\n}\n\nvoid bubble_sort(int values[], int size)\n{\n    for (int j = 0; j &lt; size; j++)\n    {\n        for (int i = 0; i &lt; size - 1; i++)\n        {\n            if (values[i] &gt; values[i + 1])\n            {\n                swap(values[i], values[i + 1]);\n                draw_sort(values, size);\n            }\n        }\n    }\n}\n\nvoid random_fill_array(int values[], int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        values[i] = rnd(screen_height()) + 1;\n    }\n}\n\nvoid handle_input(int values[], int size)\n{\n    if (key_typed(R_KEY))\n    {\n        random_fill_array(values, size);\n    }\n    else if (key_typed(S_KEY))\n    {\n        bubble_sort(values, size);\n    }\n    else if (key_typed(D_KEY))\n    {\n        quick_sort(values, 0, size);\n    }\n}\n\nint main()\n{\n    int values[NUM_VALS];\n\n    open_window(\"Sort Visualiser\", 800, 600);\n\n    random_fill_array(values, NUM_VALS);\n\n    while ( not quit_requested() )\n    {\n        process_events();\n        handle_input(values, NUM_VALS);\n\n        draw_sort(values, NUM_VALS);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1537969501, "post_id": 52519191, "comment_id": 91978019, "body": "You could use reverse iterators to walk a substring backwards, in-place; or copy the range (in reverse order) to another string."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537969503, "post_id": 52519191, "comment_id": 91978021, "body": "Use reverse iterators and <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy_n\" rel=\"nofollow noreferrer\">copy the number of characters</a> you need?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 3, "creation_date": 1537969718, "post_id": 52519191, "comment_id": 91978145, "body": "Don&#39;t write &quot;SOLVED&quot;, just click on the checkmark at the answer to accept it."}, {"owner": {"reputation": 171, "user_id": 8676340, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GGdXUgQ46AQ/AAAAAAAAAAI/AAAAAAAAA7I/Hqj8KDrHJhE/photo.jpg?sz=128", "display_name": "Hylke", "link": "https://stackoverflow.com/users/8676340/hylke"}, "edited": false, "score": 0, "creation_date": 1537969770, "post_id": 52519191, "comment_id": 91978176, "body": "Thanks for your help, this is a rather obvious answer I wish I would have come up with myself."}, {"owner": {"reputation": 171, "user_id": 8676340, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GGdXUgQ46AQ/AAAAAAAAAAI/AAAAAAAAA7I/Hqj8KDrHJhE/photo.jpg?sz=128", "display_name": "Hylke", "link": "https://stackoverflow.com/users/8676340/hylke"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1537969841, "post_id": 52519191, "comment_id": 91978227, "body": "@rustyx I will do so as soon as I can."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1537969874, "post_id": 52519191, "comment_id": 91978248, "body": "Ah right, stupid SO won&#39;t let new users accept an answer too quickly :)"}], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 6, "last_activity_date": 1537969619, "creation_date": 1537969619, "answer_id": 52519267, "question_id": 52519191, "link": "https://stackoverflow.com/questions/52519191/get-reverse-substring-from-string-starting-from-the-end/52519267#52519267", "title": "Get reverse substring from string starting from the end", "body": "<p>You may be looking for something like this:</p>\n\n<pre><code>std::string source = \"something\";\nstd::string dest(source.rbegin() + source.size() - given_index, source.rend());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 10328171, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U9ybYV2A_14/AAAAAAAAAAI/AAAAAAAAAII/qmh7e5BqD7s/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0430\u0442\u043e\u043b\u0438\u0439 \u041a\u0438\u0440\u0438\u0447\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/10328171/%d0%90%d0%bd%d0%b0%d1%82%d0%be%d0%bb%d0%b8%d0%b9-%d0%9a%d0%b8%d1%80%d0%b8%d1%87%d0%b5%d0%bd%d0%ba%d0%be"}, "is_accepted": false, "score": 0, "last_activity_date": 1537970052, "last_edit_date": 1537970052, "creation_date": 1537969764, "answer_id": 52519309, "question_id": 52519191, "link": "https://stackoverflow.com/questions/52519191/get-reverse-substring-from-string-starting-from-the-end/52519309#52519309", "title": "Get reverse substring from string starting from the end", "body": "<p>String doesn't have this functionality. But you can make something like this:</p>\n\n<pre><code>int count=5;\nstd::string str=\"Hello World Budulai\";\nstd::string res(str.begin(),str.begin()+count);\n</code></pre>\n\n<p>This code copy to res string, from 0 to count symbol;</p>\n\n<p>If you mean zero char == '\\0' so you need use reverse iterators.\nand this will like:</p>\n\n<pre><code>std::string res(str.rbegin(),str.rbegin()+count);\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 8676340, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-GGdXUgQ46AQ/AAAAAAAAAAI/AAAAAAAAA7I/Hqj8KDrHJhE/photo.jpg?sz=128", "display_name": "Hylke", "link": "https://stackoverflow.com/users/8676340/hylke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 52519267, "answer_count": 2, "score": 0, "last_activity_date": 1537970140, "creation_date": 1537969385, "last_edit_date": 1537970140, "question_id": 52519191, "link": "https://stackoverflow.com/questions/52519191/get-reverse-substring-from-string-starting-from-the-end", "title": "Get reverse substring from string starting from the end", "body": "<p>Is there a reverse functionality of C++ <code>subst</code>r which returns the substring from char 0 up till the given index? I cannot seem to find any posts here answering this question for C++. I am aware that it is possible to just reverse the string and then use <code>substr</code>, but I am wondering if there is a functionality which does this in one step.</p>\n"}, {"tags": ["c++", "gdb", "coroutine", "dwarf", "fibers"], "answers": [{"comments": [{"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 0, "creation_date": 1537979057, "post_id": 52522151, "comment_id": 91984036, "body": "Excellent answer. I noticed that for some optimization levels, I do not encounter this failure in either direction. Specifically <code>-O0 -g</code> and <code>-O3</code> fail with &quot;previous frame inner to this frame&quot;, but <code>-O2 -g</code> and <code>-O3 -g</code> don&#39;t. I suspect it has to do with how functions are inlined. Is there some combination of always inline and never inline I can use to trick gdb for any combination of compile flags?"}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "reply_to_user": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 0, "creation_date": 1537980023, "post_id": 52522151, "comment_id": 91984533, "body": "Not that I know of, actually I&#39;m surprised to hear that it could be circumvented this way.  I don&#39;t have a theory for why that would be the case."}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 2, "last_activity_date": 1537978484, "creation_date": 1537978484, "answer_id": 52522151, "question_id": 52518857, "link": "https://stackoverflow.com/questions/52518857/stackful-coroutines-gdb-previous-frame-inner-to-this-frame-corrupt-stack/52522151#52522151", "title": "Stackful coroutines + gdb = &quot;previous frame inner to this frame (corrupt stack)?&quot;", "body": "<blockquote>\n  <p>Now here's my actual question: How can I fix this?</p>\n  \n  <p>Is there some assembly incantation I can write that tells GDB \"trust\n  me, I know what I'm doing\"?</p>\n</blockquote>\n\n<p>There currently is no way to do this.  It would be a good idea, but probably would require a DWARF extension of some kind.  So, it may be difficult to implement.</p>\n\n<p>You can see the evidence of this in the gdb sources: GCC had a similar issue involving <code>-fsplit-stack</code>, and this was worked around by simply coding the name of the offending function into gdb:</p>\n\n<pre><code>  if (!morestack_name || strcmp (morestack_name, \"__morestack\") != 0)\n</code></pre>\n\n<p>A quick workaround for your personal use is to just comment out the <a href=\"https://github.com/bminor/binutils-gdb/blob/master/gdb/frame.c#L2034-L2035\" rel=\"nofollow noreferrer\">early return here</a>.</p>\n"}], "owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 52522151, "answer_count": 1, "score": 3, "last_activity_date": 1537978484, "creation_date": 1537968245, "question_id": 52518857, "link": "https://stackoverflow.com/questions/52518857/stackful-coroutines-gdb-previous-frame-inner-to-this-frame-corrupt-stack", "title": "Stackful coroutines + gdb = &quot;previous frame inner to this frame (corrupt stack)?&quot;", "body": "<p>I'm writing some code to debug stackful coroutines that use Boost.Context's <code>make_fcontext</code> and <code>jump_fcontext</code>, and have run into a small problem.</p>\n\n<p>Normally it is not possible to <code>backtrace</code> past the entry of a stackful coroutine as it executes on its own stack. This means that I cannot determine from a debugger from where a coroutine was entered. This, however, is not the problem about which I am asking. I already solved this problem by adding some inline assembly and DWARF bytecode in the function I pass to <code>make_fcontext</code>:</p>\n\n<pre><code>__asm__ volatile (\n  \"mov %[caller_fcontext_t] %[somewhere]\\n\\t\"\n  \".cfi_escape /* DWARF bytecode to load caller_fcontext_t from \"\n  \"             * somewhere and use it to load all the registers saved \"\n  \"             * there by jump_fcontest */\"\n  \"call %[another_function]\"\n  : /* stuff */ : /* stuff */ : /* stuff */)\n</code></pre>\n\n<p>This really does work and I can now <code>backtrace</code> to the point in the caller where it starts or resumes the inner coroutine - but only sometimes.</p>\n\n<p>It turns out that gdb has a \"sanity check\": if the stack pointer moves in the \"wrong\" direction between call frames, gdb assumes that the stack is corrupt and stops the trace with the message \"<code>Backtrace stopped: previous frame inner to this frame (corrupt stack?)</code>\".</p>\n\n<p>This gets triggered when my stacks are allocated in certain ways, but not in other ways. I even have a test with statically allocated stacks that triggers this failure when used in forward order but not when used in reverse order.</p>\n\n<p>I even found the portion of gdb's source code that performs this check here: <a href=\"https://github.com/bminor/binutils-gdb/blob/master/gdb/frame.c#L737-L816\" rel=\"nofollow noreferrer\">https://github.com/bminor/binutils-gdb/blob/master/gdb/frame.c#L737-L816</a></p>\n\n<p>Now here's my actual question: <strong>How can I fix this?</strong></p>\n\n<p>Is there some assembly incantation I can write that tells GDB \"trust me, I know what I'm doing\"?</p>\n"}, {"tags": ["c++", "arrays", "codeblocks"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1537967830, "post_id": 52518642, "comment_id": 91976927, "body": "Your for loop is different than your <code>a[i]</code> definition."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1537968074, "post_id": 52518642, "comment_id": 91977108, "body": "<i>What should I do to fix this?</i> The <code>pow</code> function is a floating point function.  Floating point in computers is not like algebra in school, as floating point does not guarantee &quot;exact math&quot;.  <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">See this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 8, "last_activity_date": 1537968216, "last_edit_date": 1537968216, "creation_date": 1537967734, "answer_id": 52518687, "question_id": 52518642, "link": "https://stackoverflow.com/questions/52518642/why-does-my-code-output-incorrect-results-integer-overflow/52518687#52518687", "title": "Why does my code output incorrect results? Integer overflow?", "body": "<p>1.05062e+006 and 1050625 are the same values, printed differently. <a href=\"https://en.cppreference.com/w/cpp/numeric/math/pow\" rel=\"noreferrer\"><code>pow(i[k],2)</code> returns a floating point type</a>, no integer overflow takes place here, but rather rounding when you convert such a floating point to <code>long</code>.</p>\n\n<p>The format <code>Xe+Y</code> is called <em>scientific notation</em>, its value is <code>X * 10 ^ Y</code>. By default, <code>std::printf</code> and <code>std::ostream::operator&lt;&lt;</code> prints floating points values exceeding a certain bound in their scientific notation. See <a href=\"https://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/io/manip/fixed</a> for more info.</p>\n"}, {"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": true, "score": 5, "last_activity_date": 1537968732, "creation_date": 1537968732, "answer_id": 52519001, "question_id": 52518642, "link": "https://stackoverflow.com/questions/52518642/why-does-my-code-output-incorrect-results-integer-overflow/52519001#52519001", "title": "Why does my code output incorrect results? Integer overflow?", "body": "<blockquote>\n  <p>What should I do to fix this?</p>\n</blockquote>\n\n<p>change</p>\n\n<pre><code>cout&lt;&lt;pow(i[k],2)&lt;&lt;\"\\t\"&lt;&lt;endl;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>cout&lt;&lt;i[k]*i[k]&lt;&lt;\"\\t\"&lt;&lt;endl;\n</code></pre>\n\n<p><code>pow</code> is a floating point function, which can be imprecise. Note, that in your case there is something strange: if <code>pow</code> uses 64-bit IEEE-754 doubles, it should print accurate numbers for your input. So maybe you use 32-bit <code>float</code> numbers.</p>\n"}], "owner": {"reputation": 113, "user_id": 10088551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebf756509103c822199953e9157e0e4?s=128&d=identicon&r=PG&f=1", "display_name": "user061703", "link": "https://stackoverflow.com/users/10088551/user061703"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 52519001, "answer_count": 2, "score": 1, "last_activity_date": 1537968732, "creation_date": 1537967610, "last_edit_date": 1537968275, "question_id": 52518642, "link": "https://stackoverflow.com/questions/52518642/why-does-my-code-output-incorrect-results-integer-overflow", "title": "Why does my code output incorrect results? Integer overflow?", "body": "<p>Assume that we have 15 numbers from a[0] to a[14] that satisfy:</p>\n\n<pre><code>a[0]=4\na[i]=pow(sqrt(a[i-1])*2-1, 2) for i&gt;=1 and i&lt;=14\n</code></pre>\n\n<p><strong>I need to print out all the values from a[0] to a[14], each number is on one line</strong>, so I write the following code (C++, Code::Blocks):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n#define maxN 15\nint i[maxN]; int n=15;\nint main()\n{\n    i[0]=2;\n    cout&lt;&lt;4&lt;&lt;endl;\n    for (int k=1; k&lt;n; k++){\n        i[k]=i[k-1]*2-1;\n        cout&lt;&lt;pow(i[k],2)&lt;&lt;\"\\t\"&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>4\n9\n25\n81\n289\n1089\n4225\n16641\n66049\n263169\n1.05062e+006\n4.1984e+006\n1.67854e+007\n6.71252e+007\n2.68468e+008\n</code></pre>\n\n<p>The last five numbers are not correct (because of integer overflow).</p>\n\n<p>In the \"for\" loop above, I change the line</p>\n\n<pre><code>cout&lt;&lt;pow(i[k],2)&lt;&lt;\"\\t\"&lt;&lt;endl;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>cout&lt;&lt;(long) pow(i[k],2)&lt;&lt;\"\\t\"&lt;&lt;endl;\n</code></pre>\n\n<p>This time, the result is:</p>\n\n<pre><code>4\n9\n24\n81\n289\n1089\n4224\n16641\n66048\n263168\n1050625\n4198400\n16785408\n67125248\n268468224\n</code></pre>\n\n<p>After I checked manually, I realized that many numbers are still incorrect: 24; 4224; 66048; 263168; 4198400; 16785408; 67125248; 268468224 (they are all 1 lower than the correct numbers). What should I do to fix this?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 2527, "user_id": 91683, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f367887910a7ae3d1983543abc10ab65?s=128&d=identicon&r=PG", "display_name": "Rolle", "link": "https://stackoverflow.com/users/91683/rolle"}, "edited": false, "score": 1, "creation_date": 1537967317, "post_id": 52518430, "comment_id": 91976557, "body": "Bar gets evaluated after Foo because of the order in Top, so only if you have a chaced result will it work"}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 3, "last_activity_date": 1538035057, "last_edit_date": 1538035057, "creation_date": 1537967341, "answer_id": 52518550, "question_id": 52518430, "link": "https://stackoverflow.com/questions/52518430/cmake-share-variable-between-subdirectories/52518550#52518550", "title": "CMAKE share variable between subdirectories", "body": "<p><code>Foo/CMakeLists.txt</code> is executed by <code>cmake</code> before <code>Bar/CMakeLists.txt</code>.</p>\n\n<p>When you first run <code>cmake</code>:</p>\n\n<ol>\n<li><code>${BarPath}</code> is undefined and <code>Foo/CMakeLists.txt</code> prints it as empty.</li>\n<li><code>${BarPath}</code> is defined and cached by <code>Bar/CMakeLists.txt</code>.</li>\n</ol>\n\n<p>When you run it a second time:</p>\n\n<ol start=\"3\">\n<li><code>${BarPath}</code> is found in the cache by <code>Foo/CMakeLists.txt</code> prints it.</li>\n<li><code>${BarPath}</code> is redefined and cached by <code>Bar/CMakeLists.txt</code>.</li>\n</ol>\n"}], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 52518550, "answer_count": 1, "score": 3, "last_activity_date": 1538035057, "creation_date": 1537967027, "question_id": 52518430, "link": "https://stackoverflow.com/questions/52518430/cmake-share-variable-between-subdirectories", "title": "CMAKE share variable between subdirectories", "body": "<p>I'm trying to access from <code>foo</code> (see below) a variable which is calculated in <code>bar</code>. The approach I observed on SO is to add <code>CACHE INTERNAL</code> to the <code>SET</code>. It works, but I have to invoke the generation of the <code>GNU Make</code> files twice. Looks like the variable is not in cache for the first run so, I get just an empty value.</p>\n\n<p>The structure</p>\n\n<pre><code>CMakeList.txt (top)--\n                    |\n                    -- CMakeList.txt (foo)\n                    |\n                    -- CMakeList.txt (bar)\n</code></pre>\n\n<p>The content\nTop CMakeList.txt</p>\n\n<pre><code>...\n...\nADD_SUBDIRECTORY(foo)\nADD_SUBDIRECTORY(bar)\n...\n...\n</code></pre>\n\n<p>Foo CMakeList.txt</p>\n\n<pre><code>...\n...\n    TARGET_INCLUDE_DIRECTORIES(MyProject SYSTEM PRIVATE\n        ${BarPath}\n    )\n    MESSAGE(STATUS \"Bar include path \" ${BarPath})\n...\n...\n</code></pre>\n\n<p>Bar CMakeList.txt</p>\n\n<pre><code>...\n...\nSET(BarPath ${CMAKE_CURRENT_BINARY_DIR} CACHE INTERNAL \"Path to generated files.\")\n...\n...\n</code></pre>\n\n<p>Then when I run <code>cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=. -G \"CodeBlocks - Unix Makefiles\"</code> the <code>MESSAGE</code> from the Foo's file returns empty <code>BarPath</code>. Run it once again and the expected value is populated into variable. Whats wrong?</p>\n"}, {"tags": ["c++", "string", "hash"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1537966998, "post_id": 52518385, "comment_id": 91976355, "body": "why you do not use buildin one?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 7, "creation_date": 1537967020, "post_id": 52518385, "comment_id": 91976374, "body": "You normally want a hash to be an integer."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 2, "creation_date": 1537967075, "post_id": 52518385, "comment_id": 91976411, "body": "What if it will be only used for uniqueness? Not for indexing or something? And if I&#39;m trying some algorithms to learn?"}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "edited": false, "score": 1, "creation_date": 1537967075, "post_id": 52518385, "comment_id": 91976412, "body": "There must be some reason that everyone uses prime number multipliers in hashes, don&#39;t you think?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537967159, "post_id": 52518385, "comment_id": 91976462, "body": "Unless you have some sort of performance bottleneck just use <code>std::hash</code>.  If you just want to check if two values are equal or not just use <code>operator ==</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1537967176, "post_id": 52518385, "comment_id": 91976473, "body": "If you&#39;re going to use <code>pow</code>, don&#39;t -- there is no need to.  Just use a table of precomputed powers of 256 and do a lookup using <code>i</code> as the index."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1537967326, "post_id": 52518385, "comment_id": 91976563, "body": "Also, 256 ^ 50 is going to be a huge number and wont be representable as a 64bit integer, which due to floating point inaccuracy, you should be using for the hash value."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1537967326, "post_id": 52518385, "comment_id": 91976564, "body": "@NathanOliver can std::hash be used by instruction level parallelism with this function to increase total throughput of hashing using integer+fp pipelines together?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1537967405, "post_id": 52518385, "comment_id": 91976622, "body": "If you&#39;re going to use values, precompute them.  In a strange way, you&#39;re defeating the purpose of the hash by using non-hashing techniques (like computing the same value over and over again instead of a table lookup)."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1537968195, "post_id": 52518385, "comment_id": 91977184, "body": "well, the lookup may not be necessary since you can use <code>result = result*256+(str[i] - &#39;@&#39;)</code> (to some degree)"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 1, "creation_date": 1537970261, "post_id": 52518385, "comment_id": 91978520, "body": "I think my answer shows that this question is <i>not</i> &quot;primarily opinion-based&quot; and can be answered objectively. We should reopen it. Given the purpose of a hash function and the OP&#39;s stated goal of determining uniqueness, we can say without doubt that the function in question is not a good choice. Also: this is an honest question that provides enough information to answer it, including code. I don&#39;t think it deserves all those downvotes."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1537970620, "post_id": 52518385, "comment_id": 91978745, "body": "Compute an md5 / sha1 / sha256 and then sum the digest bytes into an <code>unsigned int</code> (letting it wrap)?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1537977143, "post_id": 52518385, "comment_id": 91983033, "body": "I don&#39;t understand the downvoting either.  Comments were given as to how to improve the function in terms of time taken, and answers were given as to why it is not a good hash for uniqueness."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1537980383, "post_id": 52518385, "comment_id": 91984709, "body": "Simple rule of thumb. If you are not an expert in Cryptogrophy or Hashing don&#39;t write your own Crypt / Hash code. These are exceedingly specialized fields and getting it correct (or even close to good) is very difficult (and proving it is good is even harder)."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1537980558, "post_id": 52518385, "comment_id": 91984782, "body": "@MartinYork can we use genetic algorithm to produce one? Maybe by giving parameters as functions(such as modulo or multiplication)and variables (ordinary numbers) and expect it to minimize hash collisions and evolve those ordinary numbers automatically to magical numbers?"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1537980674, "post_id": 52518385, "comment_id": 91984837, "body": "Why not find some already written algorithms for hashing. They will generally have an analysis on how good they are in terms of collisions and speed. You will trade usually trade one for the other. <code>std::hash</code> is your best option."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1537980838, "post_id": 52518385, "comment_id": 91984907, "body": "@MartinYork thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1537967740, "post_id": 52518627, "comment_id": 91976882, "body": "can you explain more?"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1537968378, "post_id": 52518627, "comment_id": 91977314, "body": "Sorry, folks, I hit the submit button well before I was done answering."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537968420, "post_id": 52518627, "comment_id": 91977338, "body": "FWIW, in those cases, delete the answer, edit the rest in, and then undelete."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 1, "creation_date": 1537969383, "post_id": 52518627, "comment_id": 91977943, "body": "@huseyintugrulbuyukisik From <a href=\"https://stackoverflow.com/a/13543600/643383\">this answer</a>, a double has 53 bits of precision. 53/8=6.625, so only about the last 6 and a half characters in your string will matter.  But don&#39;t let me stop you -- you&#39;ll learn a lot more if you actually try it. Build a simple version of your function (don&#39;t worry about the lookup tables etc) and try hashing different equal-length strings where the last 8 or 10 characters are the same."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1537971150, "post_id": 52518627, "comment_id": 91979112, "body": "Another option is to quickly edit the answer you accidentally posted and add &lt;&lt;editing&gt;&gt;, save, then do your edit."}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": true, "score": 4, "last_activity_date": 1537971265, "last_edit_date": 1537971265, "creation_date": 1537967584, "answer_id": 52518627, "question_id": 52518385, "link": "https://stackoverflow.com/questions/52518385/is-this-a-good-hashing-function-for-short-strings/52518627#52518627", "title": "Is this a good hashing function for short strings?", "body": "<blockquote>\n  <p>Is this a good hashing function for short strings?</p>\n</blockquote>\n\n<p><strong>No, it's not a good hash for uniqueness.</strong> You're basically mapping the string onto a <code>double</code>. For a string that's 50 characters long, you're going to get a value on the order of <code>256 ^^ 50</code>, which is 2.58e120. That's well within a double's <em>range</em>, which is 1.7e308, but you have to understand that <code>double</code> doesn't represent numbers exactly -- it's only 8 bytes long after all.</p>\n\n<p>Your code maps a string to a <code>double</code> as if the characters were base-256 digits, with the first character being the least significant digit:</p>\n\n<p>The string <code>hello</code> maps like this:</p>\n\n<pre><code>'h' * 256^^0 + 'e'*256^^1 + 'l' * 256^^2 + 'l' * 256^^3 + 'o' * 256^^4\n</code></pre>\n\n<p>For a string larger than a few bytes, the last characters will be by far the most significant part of the result, and all the other characters will get dropped entirely because a <code>double</code> doesn't have the precision to represent all those bits.</p>\n\n<p><strong>The end result is that your hash function will only consider the last few characters.</strong> A good hash function should change whenever <em>any</em> of the characters in the string change, so that strings that are similar but not exactly the same are extremely unlikely to have the same hash value. With your function, hash values are likely to be the same as long as the last several characters are the same.</p>\n"}], "owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52518627, "answer_count": 1, "score": -4, "last_activity_date": 1537980682, "creation_date": 1537966890, "last_edit_date": 1537968340, "question_id": 52518385, "link": "https://stackoverflow.com/questions/52518385/is-this-a-good-hashing-function-for-short-strings", "title": "Is this a good hashing function for short strings?", "body": "<p>For strings of 10-50 characters:</p>\n\n<pre><code>double hash(const std::string &amp; str)\n{\n    double result = 0;\n    int n=str.length();\n    for(int i=0;i&lt;n;i++)\n    {\n        result += (str[i] - '@')*pow(256.0,i);\n    }\n    return result;\n}\n</code></pre>\n\n<p>can this be used in a production code?</p>\n\n<ul>\n<li>increasing total throughput of hashing when used with std::hash by ILP</li>\n<li>correctness/uniqueness</li>\n<li>scalability</li>\n</ul>\n\n<p>new version by comments:</p>\n\n<pre><code>double hash(const std::string &amp; str)\n{\n    double result = 0;\n    int n=str.length();\n\n    // maybe using multiple adders to do concurrently multiple chars\n    // since they are not dependent\n    for(int i=0;i&lt;n;i++)\n    {\n        result += lookupCharDoubleType[str[i]]*lookupPow[i];\n    }\n    return result;\n}\n</code></pre>\n\n<p>another version by another comment:</p>\n\n<pre><code>double hash(const std::string &amp; str)\n{\n    double result = 0;\n    int n=str.length();\n\n    for(int i=0;i&lt;n;i++)\n    {\n        result = result * 256.0 + lookupCharDoubleType[str[i]];\n    }\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "metaprogramming", "base-class", "template-classes"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1537966871, "post_id": 52518279, "comment_id": 91976267, "body": "FWIW you can get rid of <code>-&gt; decltype(details::make_parent(&amp;param))</code> in the second function as long as you have C++14 or higher"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537967318, "post_id": 52518279, "comment_id": 91976558, "body": "@user463035818 Arg, thank you for the comment about my other answer. That&#39;s what I get for not copy pasting code :( Now, what are you saying about this question. I don&#39;t see the problem."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537967476, "post_id": 52518279, "comment_id": 91976685, "body": "@user463035818 Ugh I see it now. Seriously in my code I had this all right. Somehow I just typed it from memory and everything went wrong."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537967484, "post_id": 52518279, "comment_id": 91976694, "body": "why do you need the <code>details</code> ? Just let <code>make_parent</code> take a <code>Base&lt;T&gt;</code> directly"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537967527, "post_id": 52518279, "comment_id": 91976731, "body": "@user463035818 I&#39;ll edit the question to clarify...."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537967564, "post_id": 52518279, "comment_id": 91976764, "body": "You know, I don&#39;t think there is a way to do this without at lease <i>some</i> repetition."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537967850, "post_id": 52518279, "comment_id": 91976943, "body": "Did you intend for it to only be callable with non-const object?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537968686, "post_id": 52518279, "comment_id": 91977513, "body": "@StoryTeller Honestly I hadn&#39;t thought about it. I mean it would be <i>nice</i> if that would work too, but, yeah. I just hadn&#39;t thought about it."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537967666, "post_id": 52518640, "comment_id": 91976835, "body": "Yeah, I thought so too. But now it won&#39;t bind to non-const arguments. And if you add <i>that</i> overload, it&#39;s again repetitive. Not to mention one needs to add a deleted r-value overload... So yeah... repetition."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537967861, "post_id": 52518640, "comment_id": 91976951, "body": "@StoryTeller Good point.  I&#39;ve at least updated the answer with that."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1537968861, "post_id": 52518640, "comment_id": 91977615, "body": "Good catch on the rvalue reference I hadn&#39;t even thought of that."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1537969152, "last_edit_date": 1537969152, "creation_date": 1537967608, "answer_id": 52518640, "question_id": 52518279, "link": "https://stackoverflow.com/questions/52518279/simpler-method-for-getting-the-base-class/52518640#52518640", "title": "Simpler Method for Getting the Base Class", "body": "<p>All of this can be simplified to </p>\n\n<pre><code>template&lt;typename T&gt;\nParent&lt;T&gt;* get_parent_ptr(Parent&lt;T&gt;&amp; param) { return &amp;param; }\n</code></pre>\n\n<p>This will give you the pointer to the <code>Parent</code> part of anything derived from <code>Parent</code></p>\n\n<p>If you want to be able to handle <code>const</code> objects as well, and prevent getting a pointer to a temporary, unfortunately you will have to add a little more by adding</p>\n\n<pre><code>template&lt;typename T&gt;\nconst Parent&lt;T&gt;* get_parent_ptr(const Parent&lt;T&gt;&amp; param) { return &amp;param; }\n\ntemplate&lt;typename T&gt;\nParent&lt;T&gt;* get_parent_ptr(Parent&lt;T&gt;&amp;&amp; param) = delete; // if you don't care about getting a pointer to a rvalue you can remove this\n</code></pre>\n\n<p>You can see all of this working with this <a href=\"http://coliru.stacked-crooked.com/a/f70e9aebd4c351d7\" rel=\"nofollow noreferrer\">live example</a>:</p>\n\n<pre><code>int main()\n{\n    Child c;\n    auto cp = get_parent_ptr(c);\n    const Child cc;\n    auto ccp = get_parent_ptr(cc);\n    //auto error = get_parent_ptr(Child{});\n}\n</code></pre>\n\n<p>If you uncomment the <code>error</code> line you will get and error that you are trying to use a deleted function.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 52518640, "answer_count": 1, "score": 0, "last_activity_date": 1537969152, "creation_date": 1537966551, "last_edit_date": 1537967649, "question_id": 52518279, "link": "https://stackoverflow.com/questions/52518279/simpler-method-for-getting-the-base-class", "title": "Simpler Method for Getting the Base Class", "body": "<p>OK so I was cooking up an <a href=\"https://stackoverflow.com/a/52517511/2642059\">answer here</a> which has more detail (and a better alternative.) But I realized I'd made a couple template functions which had a lot of redudancy. Given:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Parent {};\n\nstruct Child : Parent&lt;int&gt; {};\n</code></pre>\n\n<p>I wrote the following template functions for getting the appropriate <code>Parent</code> pointer:</p>\n\n<pre><code>namespace details {\n    template&lt;typename T&gt;\n    Parent&lt;T&gt;* make_parent(Parent&lt;T&gt;* param) { return param; }\n}\n\ntemplate&lt;typename T&gt;\nauto make_parent(T&amp; param) -&gt; decltype(details::make_parent(&amp;param)) { return details::make_parent(&amp;param); }\n</code></pre>\n\n<p>There seems to be a lot of repetition in there. But I can't figure out how to make it cleaner. Can I combine this into a single function without it looking like a nightmare?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>My intention is that I can do:</p>\n\n<pre><code>Child foo;\nauto bar = make_parent(foo);\n</code></pre>\n\n<p>(As opposed to the easier version in the other answer, where I pass a pointer.)</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537966115, "post_id": 52517977, "comment_id": 91975780, "body": "Plese, show <b>complete</b> error message, which contans info about which file is compiled, include chain and so on."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1537966776, "post_id": 52517977, "comment_id": 91976201, "body": "&quot;since my module compiles with <code>-Wsuggest-override</code>&quot; - Do you set this option via <code>CMAKE_CXX_FLAGS</code> variable? If so, the option is applied to <b>every</b> <code>.cpp</code> file; <code>COMPILE_OPTIONS</code> property doesn&#39;t include options from <code>CMAKE_CXX_FLAGS</code> variable."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537966854, "post_id": 52517977, "comment_id": 91976246, "body": "I set it using ADD_COMPILE_OPTIONS, should it work?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1537967061, "post_id": 52517977, "comment_id": 91976403, "body": "And there is no property <code>COMPILE_OPTIONS</code> for <i>source files</i>: <a href=\"https://cmake.org/cmake/help/v3.7/manual/cmake-properties.7.html#properties-on-source-files\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.7/manual/&hellip;</a>. The property exists only for <i>targets</i> and <i>directories</i>. You may create an <a href=\"https://cmake.org/cmake/help/v3.7/command/add_library.html#object-libraries\" rel=\"nofollow noreferrer\">OBJECT library</a> from thrift-generated sources. For that library you may set (that is, clear) <code>COMPILE_OPTIONS</code> property. Then, use resulted objects files in your main library."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537967366, "post_id": 52517977, "comment_id": 91976597, "body": "you are right. I guess it should be <code>COMPILE_FLAGS</code>?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1537967539, "post_id": 52517977, "comment_id": 91976742, "body": "No, <a href=\"https://cmake.org/cmake/help/v3.7/prop_sf/COMPILE_FLAGS.html\" rel=\"nofollow noreferrer\">COMPILE_FLAGS</a> source file property contains only <i>additional</i> flags, that is clearing it doesn&#39;t cancel the flags applied for the whole target."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537967800, "post_id": 52517977, "comment_id": 91976905, "body": "Yep, already figured that out. Would you like to hint what is the proper solution for such a situation?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537968049, "post_id": 52517977, "comment_id": 91977089, "body": "You probably have read <a href=\"https://stackoverflow.com/questions/52517977/cmake-thrift-generated-files-compiler-options?noredirect=1#comment91976403_52517977\">my comment</a> before I have updated it. Please, re-read it."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537968328, "post_id": 52517977, "comment_id": 91977287, "body": "you are right, I&#39;ve missed this update, will try it right away"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537977611, "post_id": 52517977, "comment_id": 91983325, "body": "worked like a charm. please convert your comment to the answer"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537978096, "post_id": 52517977, "comment_id": 91983553, "body": "OK, I will do that later. At the time, could you update your question post with the information you have posted in the comments? I mean using <code>ADD_COMPILE_OPTIONS</code> command for add <code>-Wsuggest-override</code> compiler option. As I said before, it is important that you use this function for adding the option (and not <code>CMAKE_CXX_FLAGS</code> variable)."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1538024423, "post_id": 52517977, "comment_id": 91998618, "body": "Added the <code>ADD_COMPILE_OPTIONS</code>, anything else?"}], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1538426188, "creation_date": 1538426188, "answer_id": 52598535, "question_id": 52517977, "link": "https://stackoverflow.com/questions/52517977/cmake-thrift-generated-files-compiler-options/52598535#52598535", "title": "CMAKE thrift generated files compiler options", "body": "<p>Properties on <strong>source files</strong> like <code>COMPILE_DEFINITIONS</code> and <code>COMPILE_FLAGS</code> may only <strong>add</strong> a compile option. Using these properties it is impossible to <em>overwrite</em> (<em>delete</em>) compile options for the target. (And options added by <code>ADD_COMPILE_OPTIONS</code> are eventually assigned for the target).</p>\n\n<p>You may create an <code>OBJECT</code> library from thrift-generated sources. For that library you may set (that is, clear) <a href=\"https://cmake.org/cmake/help/v3.7/prop_tgt/COMPILE_OPTIONS.html\" rel=\"nofollow noreferrer\">COMPILE_OPTIONS</a> property. Resulted object files can be used then in your main library:</p>\n\n<pre><code># Object files for thrift-generated sources\nadd_library(thriftGenerated OBJECT ${ThriftGeneratedFiles})\n# For these files clear compile options which has been set before\nset_property(TARGET thriftGenerated PROPERTY COMPILE_OPTIONS)\n\n# Then use object files for thrift-generated sources in other library\nadd_library(MyProject SHARED\n    ${SOURCES}\n    $&lt;TARGET_OBJECTS:thriftGenerated&gt;\n)\n</code></pre>\n"}], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 52598535, "answer_count": 1, "score": 0, "last_activity_date": 1538426188, "creation_date": 1537965585, "last_edit_date": 1538024342, "question_id": 52517977, "link": "https://stackoverflow.com/questions/52517977/cmake-thrift-generated-files-compiler-options", "title": "CMAKE thrift generated files compiler options", "body": "<p>I'm trying to compile generated <code>thrift</code> code into my source. The <code>thrift</code> stuff is generated into <code>CMAKE_CURRENT_BINARY_DIR</code> then I add generated cpp files into my library, with <code>SET_SOURCE_FILES_PROPERTIES(${ThriftGeneratedFiles} PROPERTIES\n    GENERATED 1\n    COMPILE_OPTIONS \"\"\n)</code>\n<br>Then I add the include path to generated files using <code>TARGET_INCLUDE_DIRECTORIES</code> with <code>SYSTEM</code> keyword. When I'm trying to compile it, since my module compiles with <code>-Wsuggest-override</code> it fails to compile the generated cpp file with <code>can be marked override [-Werror=suggest-override]</code>. I dont get why, isnt the <code>SET_SOURCE_FILES_PROPERTIES</code> should solve this problem?<br><br>CMake file snippet</p>\n\n<pre><code>ADD_COMPILE_OPTIONS(\n        ...\n        ...\n        -Wsuggest-override\n        ...\n        ...\n)\nFIND_PROGRAM(THRIFT_COMPILER thrift ${_VCPKG_ROOT_DIR}/buildtrees/thrift/x64-linux-rel/compiler/cpp/bin/ NO_DEFAULT_PATH)\nSET(ThriftOutputDir ${CMAKE_CURRENT_BINARY_DIR}/thrift/gen/)\nFILE(MAKE_DIRECTORY ${ThriftOutputDir})\n\nSET(ThriftGeneratedFiles\n    ${ThriftOutputDir}/MyServer.cpp\n    ${ThriftOutputDir}/My_types.cpp\n    ${ThriftOutputDir}/My_constants.cpp\n    )\n\nADD_CUSTOM_COMMAND(\n        OUTPUT\n        generated.timestamp\n        COMMAND\n        ${THRIFT_COMPILER} --gen cpp:no_default_operators -out ${ThriftOutputDir} ${CMAKE_SOURCE_DIR}/protocols/My.thrift\n        WORKING_DIRECTORY\n        ${CMAKE_BINARY_DIR}\n        COMMENT \"Generating source code from Thrift definition\")\nADD_CUSTOM_TARGET(RunThriftCompiler\n                  DEPENDS\n                  generated.timestamp\n                  COMMENT \"Checking if re-generation is required\")\n\nADD_LIBRARY(MyProject SHARED\n            ${SOURCES}\n            ${ThriftGeneratedFiles}\n            )\n\nSET_SOURCE_FILES_PROPERTIES(${ThriftGeneratedFiles} PROPERTIES\n                            GENERATED 1\n                            COMPILE_OPTIONS \"\"\n                            )\nTARGET_INCLUDE_DIRECTORIES(MyProject SYSTEM PRIVATE\n                           ${PROTOBUF_INCLUDE_DIR}\n                           ${ThriftOutputDir}\n                           )\n</code></pre>\n\n<p>Compilation message:</p>\n\n<blockquote>\n  <p>cd\n  /home/user/Development/Project/Project16/cmake-build-debug/lib/MyProject\n  &amp;&amp; /usr/bin/c++  -DCARES_STATICLIB -DMyProject_EXPORTS\n  -I/home/user/Development/Project/Project16/lib/include/MyProject -I/home/user/Development/Project/Project16/lib/include -isystem /home/user/Development/Project/Project16/cmake-build-debug/ext/etcd\n  -isystem /home/user/Development/Project/Project16/cmake-build-debug/protocols\n  -isystem /home/user/Development/Project/Project16/ext/spdk/include -isystem /home/user/Development/vcpkg/installed/x64-linux/include -isystem /home/user/Development/Project/Project16/cmake-build-debug/lib/MyProject/thrift/gen\n  -g -fPIC   -include MyProject.h -fPIC -fstrict-aliasing -ffunction-sections -fno-omit-frame-pointer -mtune=core-avx-i -mavx -march=core-avx-i -fno-plt -g -fstack-protector-all -fstack-check -rdynamic -Wno-error=unused-parameter -Wno-error=unused -Wno-error=unused-but-set-parameter -Wshadow -Werror=address -Werror=array-bounds -Werror=char-subscripts -Werror=enum-compare -Werror=implicit-int -Werror=implicit-function-declaration -Werror=comment -Werror=format -Werror=main -Werror=missing-braces -Werror=nonnull -Werror=pointer-sign -Werror=reorder -Werror=return-type -Werror=sequence-point -Wstrict-aliasing=1 -Werror=strict-overflow=1 -Werror=switch -Werror=trigraphs -Werror=uninitialized -Werror=unknown-pragmas -Wunused-function -Wunused-label -Wunused-value -Werror=volatile-register-var -Werror=clobbered -Werror=empty-body -Werror=ignored-qualifiers -Werror=sign-compare -Werror=type-limits -Werror -Wempty-body -Wuninitialized -Winit-self -Wmissing-declarations -Wswitch-bool -Wlogical-not-parentheses -Wsizeof-array-argument -Wbool-compare -Wtype-limits -Waddress -Wmisleading-indentation -Wshift-negative-value -Wtautological-compare -Wnull-dereference -Wduplicated-cond -Wnonnull -Wnonnull-compare -Wignored-qualifiers -Wmissing-braces -Wmissing-include-dirs -Wparentheses -Wsequence-point -Wno-return-local-addr -Wreturn-type -Wtrigraphs -Wunused-local-typedefs -Winvalid-memory-model -Wmaybe-uninitialized -Wunknown-pragmas -Wframe-address -Wtrampolines -Wfloat-equal -Wno-free-nonheap-object -Wold-style-cast -Wunused-parameter -Wunused -Wunused-but-set-parameter -Wframe-larger-than=1100000 -Wpointer-arith -Wwrite-strings -Wclobbered -Wenum-compare -Wsizeof-pointer-memaccess -Wmemset-transposed-args -Wlogical-op -Wredundant-decls -Winvalid-pch -Wvarargs -Wvector-operation-performance -Wvolatile-register-var -Wdisabled-optimization -Wcast-align -Wcast-qual -Wnon-virtual-dtor -Woverloaded-virtual -Wodr -Wplacement-new=2 -Wdelete-incomplete -Wsized-deallocation -Wno-virtual-move-assign -Wsuggest-override -DBOOST_COROUTINES_NO_DEPRECATION_WARNING -DGTEST_LINKED_AS_SHARED_LIBRARY -D_GNU_SOURCE -DIGNORE_VALIDATION= -std=gnu++1z -o CMakeFiles/MyProject.dir/thrift/gen/MyProject_constants.cpp.o -c\n  /home/user/Development/Project/Project16/cmake-build-debug/lib/MyProject/thrift/gen/MyProject_constants.cpp\n  In file included from\n  /home/user/Development/Project/Project16/cmake-build-debug/lib/MyProject/thrift/gen/MyProject_types.cpp:7:0:\n  /home/user/Development/Project/Project16/cmake-build-debug/lib/MyProject/thrift/gen/MyProject_types.h:72:15:\n  error: \u2018virtual const char* MyProject::ThriftCapiException::what()\n  const\u2019 can be marked override [-Werror=suggest-override]    const\n  char* what() const throw();</p>\n</blockquote>\n\n<p>As seen, all compilation flags are applied.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1537965712, "post_id": 52517963, "comment_id": 91975506, "body": "When you use <code>myMap.at(string1)</code> you get a <code>vector</code> not a <code>pair</code> - because you put <i>vectors</i> in your map (not <i>pairs</i>)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1537965716, "post_id": 52517963, "comment_id": 91975512, "body": "What you get from <code>myMap[someString]</code> is not an integer. It&#39;s a vector of pairs. What are you <i>really</i> trying to do? And can you please create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us (and include the actual error you get, complete and in full)."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8870618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a771630cf737643c61fe494d445c228?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Johnson", "link": "https://stackoverflow.com/users/8870618/robert-johnson"}, "edited": false, "score": 0, "creation_date": 1537966857, "post_id": 52518061, "comment_id": 91976250, "body": "Thanks, the at(0) was what I was missing"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 35, "user_id": 8870618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a771630cf737643c61fe494d445c228?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Johnson", "link": "https://stackoverflow.com/users/8870618/robert-johnson"}, "edited": false, "score": 0, "creation_date": 1537967026, "post_id": 52518061, "comment_id": 91976381, "body": "No problem. Consider accepting this answer by clicking the tick button underneath the votes, so the future visitors of this question will know that this answer indeed solved your problem"}], "tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 2, "last_activity_date": 1537965846, "creation_date": 1537965846, "answer_id": 52518061, "question_id": 52517963, "link": "https://stackoverflow.com/questions/52517963/accessing-a-maps-value-which-is-a-vector-pair-c/52518061#52518061", "title": "Accessing a map&#39;s value which is a vector pair C++", "body": "<p>Given:</p>\n\n<pre><code>map &lt;string, vector&lt;pair&lt;int, string&gt;&gt;&gt; myMap;\n</code></pre>\n\n<p>the:</p>\n\n<pre><code>myMap.at(string1).first\n</code></pre>\n\n<p>obviously should not compile. <code>myMap.at()</code>, if successfully matched with an associated value, will give you a <code>vector</code>. You are trying to use <code>.first</code> on that <code>vector</code>. <code>vector</code>s do not have <code>.first</code> and such members. Maybe you instead want:</p>\n\n<pre><code>map &lt;string, pair&lt;int, string&gt;&gt; myMap;\n</code></pre>\n\n<p>If you are sure that you want your original data type, accessing the first pair associated with <code>string1</code> would be:</p>\n\n<pre><code>myMap.at(string1).at(0).first\n</code></pre>\n\n<p>This will fetch a <code>vector&lt;pair&lt;int, string&gt;&gt;</code> associated with <code>string1</code> and give you the <em>first element</em> in the <em>first pair</em> of that vector.</p>\n"}], "owner": {"reputation": 35, "user_id": 8870618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a771630cf737643c61fe494d445c228?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Johnson", "link": "https://stackoverflow.com/users/8870618/robert-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52518061, "answer_count": 1, "score": 2, "last_activity_date": 1537966306, "creation_date": 1537965525, "last_edit_date": 1537966306, "question_id": 52517963, "link": "https://stackoverflow.com/questions/52517963/accessing-a-maps-value-which-is-a-vector-pair-c", "title": "Accessing a map&#39;s value which is a vector pair C++", "body": "<p>I have a map declared by</p>\n\n<pre><code>map &lt;string, vector&lt;pair&lt;int, string&gt;&gt;&gt;;\n</code></pre>\n\n<p>As I iterate through the map I want to access the data in the vector to print out and do operations on, I've been trying to use <code>myMap.at(string1).first</code> to access the integer associated with the key <code>string1</code>, but I keep getting type errors. Could someone explain the best way to access the data in this vector pair from its key?</p>\n"}, {"tags": ["c++", "compilation", "codeblocks", "math.h", "macos-mojave"], "comments": [{"owner": {"reputation": 122, "user_id": 6143793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52894a68b9a4a0f59b09c779079b1c80?s=128&d=identicon&r=PG&f=1", "display_name": "crashdog", "link": "https://stackoverflow.com/users/6143793/crashdog"}, "edited": false, "score": 0, "creation_date": 1537965298, "post_id": 52517784, "comment_id": 91975238, "body": "have you tried to include cmath instead of math.h ? math.h is C not C++ cmath is the c++ equivalent (actually mostly a wrapper)."}, {"owner": {"reputation": 19, "user_id": 10418653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZqJv.png?s=128&g=1", "display_name": "Kos Miktipott", "link": "https://stackoverflow.com/users/10418653/kos-miktipott"}, "reply_to_user": {"reputation": 122, "user_id": 6143793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52894a68b9a4a0f59b09c779079b1c80?s=128&d=identicon&r=PG&f=1", "display_name": "crashdog", "link": "https://stackoverflow.com/users/6143793/crashdog"}, "edited": false, "score": 0, "creation_date": 1537965564, "post_id": 52517784, "comment_id": 91975426, "body": "Thanks for the tip, but it absolutely does not change anything :("}, {"owner": {"reputation": 122, "user_id": 6143793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52894a68b9a4a0f59b09c779079b1c80?s=128&d=identicon&r=PG&f=1", "display_name": "crashdog", "link": "https://stackoverflow.com/users/6143793/crashdog"}, "edited": false, "score": 0, "creation_date": 1537966008, "post_id": 52517784, "comment_id": 91975699, "body": "have you tried using the search function is OSX to see if the file actually exists anywhere ? If yes, you could add the location path in Code::Blocks. If not you probaly need to get the headers installed with brew or the likes."}, {"owner": {"reputation": 122, "user_id": 6143793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52894a68b9a4a0f59b09c779079b1c80?s=128&d=identicon&r=PG&f=1", "display_name": "crashdog", "link": "https://stackoverflow.com/users/6143793/crashdog"}, "edited": false, "score": 0, "creation_date": 1537966471, "post_id": 52517784, "comment_id": 91976008, "body": "This is probably the answer you&#39;re looking for: <a href=\"https://stackoverflow.com/questions/19575956/building-c-not-working-in-osx-10-9\" title=\"building c not working in osx 10 9\">stackoverflow.com/questions/19575956/&hellip;</a> It appears that you have to download the cmd tools and install it rather then running xcode-slect --install."}, {"owner": {"reputation": 19, "user_id": 10418653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZqJv.png?s=128&g=1", "display_name": "Kos Miktipott", "link": "https://stackoverflow.com/users/10418653/kos-miktipott"}, "reply_to_user": {"reputation": 122, "user_id": 6143793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52894a68b9a4a0f59b09c779079b1c80?s=128&d=identicon&r=PG&f=1", "display_name": "crashdog", "link": "https://stackoverflow.com/users/6143793/crashdog"}, "edited": false, "score": 0, "creation_date": 1537968414, "post_id": 52517784, "comment_id": 91977335, "body": "Ok thanks for your replies. Thanks to what I read on them, I tried to reinstall gcc, and it solved the problem. The location of headers must have changed between High Sierra and Mojave."}], "answers": [{"comments": [{"owner": {"reputation": 4121, "user_id": 848292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ars6Y.png?s=128&g=1", "display_name": "Anti Earth", "link": "https://stackoverflow.com/users/848292/anti-earth"}, "edited": false, "score": 0, "creation_date": 1542297279, "post_id": 52519007, "comment_id": 93526882, "body": "Reinstalling gcc4.9 and gcc7 had no effect for me. However, using a direct path (<code>&#47;usr&#47;bin&#47;gcc</code>) allowed me to compile"}], "tags": [], "owner": {"reputation": 19, "user_id": 10418653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZqJv.png?s=128&g=1", "display_name": "Kos Miktipott", "link": "https://stackoverflow.com/users/10418653/kos-miktipott"}, "is_accepted": true, "score": -1, "last_activity_date": 1537968741, "creation_date": 1537968741, "answer_id": 52519007, "question_id": 52517784, "link": "https://stackoverflow.com/questions/52517784/codeblocks-c-compiling-with-macos-mojave-fatal-error-sys-cdefs-h-no-such/52519007#52519007", "title": "Code::Blocks C++ compiling with MacOS Mojave : fatal error: sys/cdefs.h: No such file or directory", "body": "<p>Problem solved by reinstalling gcc. Location of headers has probably changed between High Sierra and Mojave.</p>\n\n<p>I suggest to anyone encountering the same problem to do the same and also to (re)install the xcode line command tools with <code>xcode-select --install</code></p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 10418653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZqJv.png?s=128&g=1", "display_name": "Kos Miktipott", "link": "https://stackoverflow.com/users/10418653/kos-miktipott"}, "edited": false, "score": 0, "creation_date": 1542664844, "post_id": 53323694, "comment_id": 93642479, "body": "Thanks a lot for your contribution :) I&#39;m sad to hear that mine isn&#39;t working for everyone..."}], "tags": [], "owner": {"reputation": 4121, "user_id": 848292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ars6Y.png?s=128&g=1", "display_name": "Anti Earth", "link": "https://stackoverflow.com/users/848292/anti-earth"}, "is_accepted": false, "score": 2, "last_activity_date": 1542298739, "creation_date": 1542298739, "answer_id": 53323694, "question_id": 52517784, "link": "https://stackoverflow.com/questions/52517784/codeblocks-c-compiling-with-macos-mojave-fatal-error-sys-cdefs-h-no-such/53323694#53323694", "title": "Code::Blocks C++ compiling with MacOS Mojave : fatal error: sys/cdefs.h: No such file or directory", "body": "<p>The accepted answer doesn't seem to work for me, but <a href=\"https://solarianprogrammer.com/2017/05/21/compiling-gcc-macos/\" rel=\"nofollow noreferrer\">this did</a>:</p>\n\n<pre><code>cd /Library/Developer/CommandLineTools/Packages/\nopen .\n</code></pre>\n\n<p>and double clicking the pkg file.</p>\n"}], "owner": {"reputation": 19, "user_id": 10418653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZqJv.png?s=128&g=1", "display_name": "Kos Miktipott", "link": "https://stackoverflow.com/users/10418653/kos-miktipott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2946, "favorite_count": 1, "accepted_answer_id": 52519007, "answer_count": 2, "score": 2, "last_activity_date": 1542298739, "creation_date": 1537964919, "last_edit_date": 1537965225, "question_id": 52517784, "link": "https://stackoverflow.com/questions/52517784/codeblocks-c-compiling-with-macos-mojave-fatal-error-sys-cdefs-h-no-such", "title": "Code::Blocks C++ compiling with MacOS Mojave : fatal error: sys/cdefs.h: No such file or directory", "body": "<p>(This is my first question ever on StackOverflow)</p>\n\n<p>I have to use a Mac at work, and I'm coding in C++ with Code::Blocks (because I am used to this IDE). 2 days ago I upgraded from MacOS High Sierra to MacOS Mojave and I can fairly say that... it was a bad decision.</p>\n\n<p>Now, when trying to <code>#include &lt;math.h&gt;</code> I get this error : <code>fatal error: sys/cdefs.h: No such file or directory</code>. I have tried to reinstall the xcode line command tools with <code>xcode-select --install</code>, but it still doesn't work.</p>\n\n<p>Does anybody have a clue of what is going on, and how I could solve this issue ?</p>\n"}, {"tags": ["c++", "asynchronous", "tcp", "server", "boost-asio"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1537965702, "creation_date": 1537965702, "answer_id": 52518021, "question_id": 52517777, "link": "https://stackoverflow.com/questions/52517777/async-read-for-tcp-server-print-the-data-sent-by-the-socket-of-the-client-with-b/52518021#52518021", "title": "Async read for tcp server print the data sent by the socket of the client with boost::asio", "body": "<p>What is the type of <code>m_buffer</code>? If it's a container, you have to resize it in advance. If it's <code>asio::streambuf</code> you need to at least use the <code>bytes_transferred</code> parameter recevied <code>handleRead</code>.</p>\n\n<p>There are many echo examples, so let me just point you at a few:</p>\n\n<ul>\n<li><a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/example/cpp11/echo/async_tcp_echo_server.cpp\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/example/cpp11/echo/async_tcp_echo_server.cpp</a></li>\n<li><a href=\"https://stackoverflow.com/questions/46435719/boost-asio-simple-echo-server-without-class/46436274#46436274\">boost asio simple echo server without class</a></li>\n<li><a href=\"https://stackoverflow.com/questions/46935025/boost-asio-single-tcp-server-many-clients/46935127#46935127\">Boost asio, single TCP server, many clients</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 9371292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa1471a4594ae4168234e6514ac53cc?s=128&d=identicon&r=PG&f=1", "display_name": "SJS", "link": "https://stackoverflow.com/users/9371292/sjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1537965950, "creation_date": 1537965950, "answer_id": 52518094, "question_id": 52517777, "link": "https://stackoverflow.com/questions/52517777/async-read-for-tcp-server-print-the-data-sent-by-the-socket-of-the-client-with-b/52518094#52518094", "title": "Async read for tcp server print the data sent by the socket of the client with boost::asio", "body": "<p>The async_read doen't print the message until the size of the buffer is full ! </p>\n"}], "owner": {"reputation": 57, "user_id": 9371292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa1471a4594ae4168234e6514ac53cc?s=128&d=identicon&r=PG&f=1", "display_name": "SJS", "link": "https://stackoverflow.com/users/9371292/sjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 52518021, "answer_count": 2, "score": 1, "last_activity_date": 1537967314, "creation_date": 1537964902, "last_edit_date": 1537967314, "question_id": 52517777, "link": "https://stackoverflow.com/questions/52517777/async-read-for-tcp-server-print-the-data-sent-by-the-socket-of-the-client-with-b", "title": "Async read for tcp server print the data sent by the socket of the client with boost::asio", "body": "<p>I want to print the message sent by the client. But in my function handleRead, when get the data from buffer and print it , nothing is print. I don't know how to do it.</p>\n\n<pre><code>void    Network::start()\n{\n    boost::asio::async_write(m_socket, boost::asio::buffer(m_message),\n                             boost::bind(&amp;Network::handleWrite,shared_from_this(),\n                                         boost::asio::placeholders::error));\n}\n\nvoid    Network::handleWrite(const boost::system::error_code &amp;error)\n{\n    if (!error)\n            doRead();\n    else\n            std::cout &lt;&lt; error.message() &lt;&lt; std::endl;\n}\n\nvoid    Network::handleRead(const boost::system::error_code &amp;error)\n    {\n    if (!error) {\n            std::cout &lt;&lt; m_buffer.data()&lt;&lt; std::endl;\n            doRead();\n    }\n    else\n            close();\n}\n\nvoid    Network::doRead()\n{\n    boost::asio::async_read(m_socket,\n                            boost::asio::buffer(m_buffer),\n                            boost::bind(&amp;Network::handleRead,\n                                        shared_from_this(),\n                                        boost::asio::placeholders::error));\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1537964702, "post_id": 52517505, "comment_id": 91974865, "body": "have you tried debugging your c++ to see if it ever gets as far as emitting the signal?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1537964706, "post_id": 52517505, "comment_id": 91974866, "body": "What is &quot;emit login();&quot;? Is there some kind of preprocessor that replaces that with real code?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1537964944, "post_id": 52517505, "comment_id": 91975017, "body": "@sehe yes, its Qt&#39;s magic way of emitting signals (Actually emit is usually <code>#define emit</code> these days)"}, {"owner": {"reputation": 381, "user_id": 6922070, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/424d9b5faeb717638aa82e07d63742ec?s=128&d=identicon&r=PG&f=1", "display_name": "Vana", "link": "https://stackoverflow.com/users/6922070/vana"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1537967019, "post_id": 52517505, "comment_id": 91976373, "body": "@AlanBirtles yes the signal is emitted. I can see this into debug. Also I can see std::cout message (200)"}, {"owner": {"reputation": 4406, "user_id": 4911665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4f3ec7f68e33af504b9055abed79b7?s=128&d=identicon&r=PG&f=1", "display_name": "talamaki", "link": "https://stackoverflow.com/users/4911665/talamaki"}, "edited": false, "score": 0, "creation_date": 1538033714, "post_id": 52517505, "comment_id": 92002799, "body": "You are starting boost::asio::io_context eventloop at the end of start_request(). What if you stop it before emitting a signal? You can also manually invoke Qt event loop with QCoreApplication::processEvents() and see if it causes the signal to be actually emitted. Anyway, to me it doesn&#39;t make any sense to mix two libraries like this..."}], "owner": {"reputation": 381, "user_id": 6922070, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/424d9b5faeb717638aa82e07d63742ec?s=128&d=identicon&r=PG&f=1", "display_name": "Vana", "link": "https://stackoverflow.com/users/6922070/vana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537963942, "creation_date": 1537963942, "question_id": 52517505, "link": "https://stackoverflow.com/questions/52517505/get-signal-from-asynchronous-function", "title": "get signal from asynchronous function", "body": "<p>I have a signal into an asynchronous function.\nI need to get this, into another function to interact with ui (QML)\nThe ui must change with this signal.</p>\n\n<p>UI side : \nI use <code>rootContext()</code> to instantiate my c++ class</p>\n\n<pre><code>engine.rootContext()-&gt;setContextProperty(\"http\", &amp;request);\n</code></pre>\n\n<p>into qml component, I use a simple event :</p>\n\n<pre><code>onClicked:{\n        http.start_request(\"mydomain\", \"443\", \"/login\", 11, \"POST\", \"username=\" + login.text + \"&amp;password=\" + password.text)\n    }\n</code></pre>\n\n<p>To catch the signal emit by the backend, I use a connection handler:</p>\n\n<pre><code>    Connections{\n    target: http\n    onLogin: console.log(\"ok\")\n    onWrongpassword: console.log(\"Wrong Password\")\n    onWronglogin: console.log(\"Unknow user\")\n}\n</code></pre>\n\n<p>Backend side:\nI emit a signal when I get a response:</p>\n\n<pre><code>void request::start_request(QString host, QString port, QString target, unsigned int version, QString method, QString body)\n{\nboost::asio::io_context ioc;\nssl::context ctx{ssl::context::sslv23_client};\n\nconst char* std_host = host.toStdString().c_str();\nconst char* std_port = port.toStdString().c_str();\nconst char* std_target = target.toStdString().c_str();\nconst char* std_method = method.toStdString().c_str();\nconst char* std_body = body.toStdString().c_str();\n\nstd::make_shared&lt;request&gt;(ioc, ctx)-&gt;run(std_host, std_port, std_target, version, std_method, std_body );\n\nioc.run();\n}\n\nvoid request::run(char const* host, char const* port, char const* target, unsigned int version, QString method, QString body)\n{\n// Set SNI Hostname (many hosts need this to handshake successfully)\nif(! SSL_set_tlsext_host_name(stream.native_handle(), host))\n{\n    boost::system::error_code ec{static_cast&lt;int&gt;(::ERR_get_error()), boost::asio::error::get_ssl_category()};\n    std::cerr &lt;&lt; ec.message() &lt;&lt; \"\\n\";\n    respond = \"test\" ;\n    return;\n}\n\n// Set up an HTTP GET request message\nhttp::verb method_verb;\nboost::string_view method_strview ;\nmethod_strview = method.toStdString();\nmethod_verb = boost::beast::http::string_to_verb(method_strview);\nreq.version(version);\nreq.method(method_verb);\nreq.target(target);\nreq.set(http::field::host, host);\nreq.set(http::field::user_agent, BOOST_BEAST_VERSION_STRING);\nreq.set(http::field::content_type, \"application/x-www-form-urlencoded\");\nreq.body() = body.toStdString() ;\nreq.prepare_payload();\n\n// Look up the domain name\n\nresolver.async_resolve(host, port, std::bind(&amp;request::on_resolve, shared_from_this(), std::placeholders::_1, std::placeholders::_2));\n }\n\nvoid request::on_resolve(boost::system::error_code ec, tcp::resolver::results_type results)\n{\nif(ec){\n    //return fail(ec, \"resolve\");\n    respond = \"test\" ;\n}\n// Make the connection on the IP address we get from a lookup\nboost::asio::async_connect(stream.next_layer(), results.begin(), results.end(), std::bind( &amp;request::on_connect, shared_from_this(), std::placeholders::_1));\n }\n\nvoid request::on_connect(boost::system::error_code ec)\n{\nif(ec){\n    //return fail(ec, \"connect\");\n     respond = ec.message();\n    }\n\n// Perform the SSL handshake\nstream.async_handshake(ssl::stream_base::client, std::bind(&amp;request::on_handshake, shared_from_this(), std::placeholders::_1));\n}\n\nvoid request::on_handshake(boost::system::error_code ec)\n{\nif(ec){\n    return fail(ec, \"handshake\");\n}\n\n// Send the HTTP request to the remote host\nhttp::async_write(stream, req, std::bind(&amp;request::on_write, shared_from_this(), std::placeholders::_1, std::placeholders::_2));\n}\n\nvoid request::on_write(boost::system::error_code ec, std::size_t bytes_transferred)\n{\nboost::ignore_unused(bytes_transferred);\n\nif(ec)\n    return fail(ec, \"write\");\n\n// Receive the HTTP response\nhttp::async_read(stream, buffer, res, std::bind(&amp;request::on_read, shared_from_this(), std::placeholders::_1, std::placeholders::_2));\n }\n\n void request::on_read(boost::system::error_code ec, std::size_t bytes_transferred)\n{\nboost::ignore_unused(bytes_transferred);\n\nif(ec)\n    return fail(ec, \"read\");\n\n//TODO : Improve to get the user infos\npt::ptree root;\nstd::stringstream stringstream;\nstringstream &lt;&lt; res.body();\npt::read_json(stringstream, root);\n\nswitch(res.result_int())\n{\ncase 200: {\n    emit login();  &lt;== THIS SIGNAL\n    std::cout&lt;&lt;res.result_int()&lt;&lt;std::endl;\n          }\n    break;\ncase 401:{\n    if (root.get&lt;std::string&gt;(\"message\") ==  \"wrong username\"){\n        std::cout&lt;&lt;\"Unknow User\"&lt;&lt;std::endl;\n        emit wronglogin();\n        }\n    if (root.get&lt;std::string&gt;(\"message\") ==  \"wrong password\"){\n        std::cout&lt;&lt;\"Wrong password\"&lt;&lt;std::endl;\n        emit wrongpassword();\n        }\n    }\n    break;\ndefault: std::cout&lt;&lt;\"Undefined\"&lt;&lt;std::endl;\n}\n\n// Gracefully close the stream\nstream.async_shutdown(std::bind(&amp;request::on_shutdown, shared_from_this(), std::placeholders::_1));\n}\n\nvoid request::on_shutdown(boost::system::error_code ec)\n{\nif(ec == boost::asio::error::eof)\n{\n    ec.assign(0, ec.category());\n}\nif(ec)\n  return fail(ec, \"shutdown\");\n\n// If we get here then the connection is closed gracefully\n}\n</code></pre>\n\n<p>The signal is never catch by the QML component.\nIf I emit the signal from request::start_request(), I can catch the signal.</p>\n\n<p>So How I can do this ?\nUse future to synchronous wait the request::on_read() finih ?\nAdd boost signal2 and create signal wait function ?\nAdd a timer ?</p>\n"}, {"tags": ["c#", "c++", "dll", "variant"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1537964813, "post_id": 52517444, "comment_id": 91974922, "body": "Well, here&#39;s one suggestion: take a <a href=\"https://stackoverflow.com/tour\">tour</a> of stackoverflow.com, visit the <a href=\"https://stackoverflow.com/help\">help center</a>, and read the instructions for preparing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. There&#39;s an obvious bug in the code, somewhere, but without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> it is logically impossible for anyone to find it, anyone other than you, of course, since only you would have access to all the code."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1537966453, "post_id": 52517444, "comment_id": 91976001, "body": "A SafeArray is a structure.  So you need to pass the structure.  The best way to understand this is look at the c++ code (and link at beginning) at following msdn webpage : <a href=\"https://msdn.microsoft.com/en-us/magazine/mt778923.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/magazine/mt778923.aspx</a>"}, {"owner": {"reputation": 23, "user_id": 1140600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436178ec36d32be49f48bd81ac641c50?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/1140600/naveen"}, "edited": false, "score": 0, "creation_date": 1537968252, "post_id": 52517444, "comment_id": 91977231, "body": "Thank you for the reply, just to add one more thing, if i have 2 variant pointer parameters in the function, the first parameter is fine, the second one is corrupted. Also everything works just fine in case the base application is of VB6."}], "owner": {"reputation": 23, "user_id": 1140600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436178ec36d32be49f48bd81ac641c50?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/1140600/naveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537970352, "creation_date": 1537963775, "last_edit_date": 1537970352, "question_id": 52517444, "link": "https://stackoverflow.com/questions/52517444/variant-pointer-gets-corrupted-when-passed-as-function-parameter-to-different-as", "title": "VARIANT pointer gets corrupted when passed as function parameter to different assembly (C++ DLL)", "body": "<p>i am not quite sure how to explain my issue here but will try best to make you understand.</p>\n\n<p>There are 2 scenario, </p>\n\n<ol>\n<li>C# Application --> CPPDLL1 -> CPPDLL2 -> CPPDLL3.</li>\n<li>VB6 Application --> CPPDLL1 -> CPPDLL2 -> CPPDLL3.</li>\n</ol>\n\n<p>Scenario 1:</p>\n\n<p>There is a c# application which Loads a c++ dll(CPPDLL1) which in turn loads another c++ dll(CPPDLL2) which in turn loads one more c++ dll(CPPDLL3).</p>\n\n<p>Here a SafeArray is created in \"CPPDLL2\" and is passed as function parameter in the form of \"VARIANT Pointer\" to a function defined and exposed in \"CPPDLL3\"</p>\n\n<p>The ISSUE here is this variant ptr gets corrupted when the execution reach from function call to definition.</p>\n\n<p>Scenario 2:</p>\n\n<p>Same as Scenario 1 except VB6 application in the place of C# application.\nAll is well, No Issues observed.</p>\n\n<hr>\n\n<p>Pseudo code:</p>\n\n<p><strong>CPPDLL2.cpp</strong> </p>\n\n<pre><code>VARIANT OutPara;\nSAFEARRAYBOUND saOutPara[]={1,0};\n\nVariantInit(&amp;OutPara);\n\nOutPara.parray = SafeArrayCreate(VT_R8,1,saOutPara); \nCoCreateInstance();\n\nFunctionDefinedInCPPDLL3(VARIANT *varInstance);\n</code></pre>\n\n<p><strong>CPPDLL3.cpp</strong></p>\n\n<pre><code>FunctionDefinedInCPPDLL3(VARIANT *varInstance)\n{\n//varInstance is corrupted\n//Do your job;\n}\n</code></pre>\n\n<p>Any clues about the solution or suggestions are appreciated.</p>\n\n<p>TIA</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "random", "std"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1537962861, "post_id": 52517088, "comment_id": 91973714, "body": "Relevant: <a href=\"https://stackoverflow.com/q/52039103/3002139\">stackoverflow.com/q/52039103/3002139</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1537962905, "post_id": 52517088, "comment_id": 91973742, "body": "Rational is probably ease of efficient implementation or sth like that. Someone would have to dig up the proposal."}], "owner": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "closed_date": 1537963842, "answer_count": 0, "score": 5, "last_activity_date": 1537962990, "creation_date": 1537962685, "last_edit_date": 1537962990, "question_id": 52517088, "link": "https://stackoverflow.com/questions/52517088/why-does-stduniform-real-distributiondouble-produce-nan", "closed_reason": "Duplicate", "title": "Why does std::uniform_real_distribution&lt;double&gt; produce NaN?", "body": "<p>I want to generate random numbers in the whole double range. Doing it like</p>\n\n<pre><code>std::uniform_real_distribution&lt;double&gt; doubleDist(std::numeric_limits&lt;double&gt;::lowest(),\n                                                  std::numeric_limits&lt;double&gt;::max());\n</code></pre>\n\n<p>produces IND / NaN, though. It took me a while to understand that this is according to <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution/uniform_real_distribution\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>Requires that <code>a \u2264 b</code> and <code>b-a \u2264 std::numeric_limits&lt;RealType&gt;::max()</code></p>\n</blockquote>\n\n<p>Clearly <code>std::numeric_limits&lt;double&gt;::max() - std::numeric_limits&lt;double&gt;::lowest()</code> is larger than <code>::max</code>, since <code>:lowest</code> is  negative <a href=\"https://stackoverflow.com/questions/36825815/will-min-to-max-uniform-real-distribution-produce-inf-inf-or-nan\">(unlike <code>::min</code>)</a>.</p>\n\n<p>Why can't I generate numbers between lowest and max this way and what is the rationale behind?</p>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 788, "user_id": 8205133, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e57f7f78c1ccacfbad84f7a211ec9d71?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew21111", "link": "https://stackoverflow.com/users/8205133/andrew21111"}, "edited": false, "score": 0, "creation_date": 1537963252, "post_id": 52516942, "comment_id": 91973947, "body": "When you do Main.Indoor[0].objects.GetData[0]; have you tried to access Main.Indoor[0].objects[0].objectName; ?"}, {"owner": {"reputation": 201, "user_id": 7697736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0329fcf23ba4beeb680e6a563ed11ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Gurankas", "link": "https://stackoverflow.com/users/7697736/gurankas"}, "reply_to_user": {"reputation": 788, "user_id": 8205133, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e57f7f78c1ccacfbad84f7a211ec9d71?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew21111", "link": "https://stackoverflow.com/users/8205133/andrew21111"}, "edited": false, "score": 0, "creation_date": 1537963370, "post_id": 52516942, "comment_id": 91974033, "body": "@AndreaAbbate Yes. The engine crashes. I went through the logs and found out this: [2018.09.26-11.51.41:993][931]LogWindows: Error: Assertion failed: (Index &gt;= 0) &amp; (Index &lt; ArrayNum) [File:E:\\UE_4.18\\Engine\\Source\\Runtime\\Core\\Public\\Container&zwnj;&#8203;s/Array.h] [Line: 610]  [2018.09.26-11.51.41:993][931]LogWindows: Error: Array index out of bounds: 0 from an array of size 0"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 7697736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0329fcf23ba4beeb680e6a563ed11ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Gurankas", "link": "https://stackoverflow.com/users/7697736/gurankas"}, "is_accepted": true, "score": 3, "last_activity_date": 1537966525, "creation_date": 1537966525, "answer_id": 52518268, "question_id": 52516942, "link": "https://stackoverflow.com/questions/52516942/how-to-parse-array-of-array-in-a-json-file-in-c-using-unreal/52518268#52518268", "title": "How to parse Array of Array in a JSON file in C++ using Unreal", "body": "<p>Figured it out.</p>\n\n<p>I just have to make the \n<strong><em>TArray &lt; FArrayBasic > objects</em></strong> a UPROPERTY() for it to reflect in this system and get the values copied to it so that we can access it how I am trying to access it. </p>\n"}], "owner": {"reputation": 201, "user_id": 7697736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0329fcf23ba4beeb680e6a563ed11ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Gurankas", "link": "https://stackoverflow.com/users/7697736/gurankas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2018, "favorite_count": 0, "accepted_answer_id": 52518268, "answer_count": 1, "score": 1, "last_activity_date": 1554967147, "creation_date": 1537962188, "question_id": 52516942, "link": "https://stackoverflow.com/questions/52516942/how-to-parse-array-of-array-in-a-json-file-in-c-using-unreal", "title": "How to parse Array of Array in a JSON file in C++ using Unreal", "body": "<p>The following is the JSON file I am trying to parse:-</p>\n\n<pre><code>{  \n   \"GameSetting\":{  \n      \"Num_Levels\":\"3\",\n      \"Env_Type\":\"Indoor\"\n   },\n   \"Indoor\":[  \n      {  \n         \"Name\":\"simple room\",\n         \"objects\":[  \n            {\"objectName\":\"chair\"},\n            {\"objectName\":\"tables\"},\n            {\"objectName\":\"boxes\"},\n            {\"objectName\":\"barrels\"}\n         ],\n         \"number_of_objects\":\"10\"\n      },\n      {  \n         \"Name\":\"multistory\",\n         \"objects\":[  \n           { \"objectName\":\"chair\"},\n            {\"objectName\":\"tables\"},\n            {\"objectName\":\"railings\"},\n            {\"objectName\":\"staircase\"}\n         ],\n         \"number_of_objects\":\"25\"\n      },\n      {  \n         \"Name\":\"passageway\",\n         \"objects\":[  \n            {\"objectName\":\"forklift\"},\n            {\"objectName\":\"tables\"},\n            {\"objectName\":\"rooms\"},\n            {\"objectName\":\"doors\"}\n         ],\n         \"number_of_objects\":\"32\"\n      }\n   ],\n   \"Outdoor\":[  \n      {  \n         \"Name\":\"Downtown\",\n         \"objects\":[  \n            {\"objectName\":\"Tall buildings\"},\n            {\"objectName\":\"medium buildings\"},\n            {\"objectName\":\"cars\"},\n            {\"objectName\":\"people\"}\n         ],\n         \"number_of_objects\":\"10\",\n         \"Weather\":\"sunny\",\n         \"Wind\":\"Yes\"\n      },\n      {  \n         \"Name\":\"Neighborhood\",\n         \"objects\":[  \n            {\"objectName\":\"houses\"},\n            {\"objectName\":\"complexes\"},\n            {\"objectName\":\"community area\"},\n            {\"objectName\":\"park\"},\n            {\"objectName\":\"cars\"},\n            {\"objectName\":\"people\"}\n         ],\n         \"number_of_objects\":\"25\",\n         \"Weather\":\"rainy\",\n         \"Wind\":\"Yes\"\n      },\n      {  \n         \"Name\":\"Forest\",\n         \"objects\":[  \n            {\"objectName\":\"trees\"},\n            {\"objectName\":\"lake\"},\n            {\"objectName\":\"mountains\"}\n         ],\n         \"number_of_objects\":\"32\",\n     \"Weather\":\"rainy\",\n         \"Wind\":\"No\"\n      }\n   ]\n}\n</code></pre>\n\n<p>I am using the approach specified in the answer of this question: <a href=\"https://stackoverflow.com/questions/30342465/c-nested-json-in-unreal-engine-4#\">C++ Nested JSON in Unreal Engine 4</a></p>\n\n<p>I am successfully able to access GameSetting's both properties, Indoor's Name and number_of_objects properties and Outdoor's Name, number_of_objects, Wind and Weather properties. The only property I am having trouble with is the object arrays in both Indoor and Outdoor.</p>\n\n<p>The following is my header file:</p>\n\n<pre><code>#include \"CoreMinimal.h\"\n#include \"GameFramework/Actor.h\"\n#include \"JsonParser.generated.h\"\n\nUSTRUCT()\nstruct FGameSetting\n{\n    GENERATED_USTRUCT_BODY()\n\n        UPROPERTY()\n        FString Num_Levels;\n\n    UPROPERTY()\n        FString Env_Type;\n};\nUSTRUCT()\nstruct FArrayBasic\n{\n    GENERATED_USTRUCT_BODY()\n\n        UPROPERTY()\n        FString objectName;\n};\nUSTRUCT()\nstruct FIndoorBasic\n{\n    GENERATED_USTRUCT_BODY()\n\n        UPROPERTY()\n        FString Name;\n\n        TArray &lt;FArrayBasic&gt; objects;\n\n        UPROPERTY()\n        FString number_of_objects;\n};\nUSTRUCT()\nstruct FOutDoorBasic\n{\n    GENERATED_USTRUCT_BODY()\n\n        UPROPERTY()\n        FString Name;\n\n    TArray &lt;FArrayBasic&gt; objects;\n\n    UPROPERTY()\n        FString number_of_objects;\n\n    UPROPERTY()\n        FString Weather;\n\n    UPROPERTY()\n        FString Wind;\n};\nUSTRUCT()\nstruct FMain\n{\n    GENERATED_USTRUCT_BODY()\n\n        UPROPERTY()\n        FGameSetting GameSetting;\n\n    UPROPERTY()\n        TArray&lt;FIndoorBasic&gt;Indoor;\n\n    UPROPERTY()\n        TArray&lt;FOutDoorBasic&gt;Outdoor;\n\n};\n\nUCLASS()\nclass JSONPARSING_API AJsonParser : public AActor\n{\n    GENERATED_BODY()\n\npublic: \n    // Sets default values for this actor's properties\n    AJsonParser();\n\nprotected:\n    // Called when the game starts or when spawned\n    virtual void BeginPlay() override;\n\n\npublic: \n    // Called every frame\n    virtual void Tick(float DeltaTime) override;\n\n\n\n};\n</code></pre>\n\n<p>and .cpp file:</p>\n\n<pre><code>// Fill out your copyright notice in the Description page of Project Settings.\n\n#include \"JsonParser.h\"\n#include \"JsonUtilities.h\"\n\n// Sets default values\nAJsonParser::AJsonParser()\n{\n    // Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.\n    PrimaryActorTick.bCanEverTick = true;\n\n}\n\n// Called when the game starts or when spawned\nvoid AJsonParser::BeginPlay()\n{\n    Super::BeginPlay();\n\n    const FString JsonFilePath = FPaths::ProjectContentDir() + \"/JsonFiles/randomgenerated.json\";\n    FString JsonString; //Json converted to FString\n\n    FFileHelper::LoadFileToString(JsonString,*JsonFilePath);\n\n\n    //Displaying the json in a string format inside the output log\n    GLog-&gt;Log(\"Json String:\");\n    GLog-&gt;Log(JsonString);\n\n    //Create a json object to store the information from the json string\n    //The json reader is used to deserialize the json object later on\n    TSharedPtr&lt;FJsonObject&gt; JsonObject = MakeShareable(new FJsonObject());\n    TSharedRef&lt;TJsonReader&lt;&gt;&gt; JsonReader = TJsonReaderFactory&lt;&gt;::Create(JsonString);\n\n    if (FJsonSerializer::Deserialize(JsonReader, JsonObject) &amp;&amp; JsonObject.IsValid())\n    {\n\n        FMain Main;\n        FJsonObjectConverter::JsonObjectStringToUStruct&lt;FMain&gt;(JsonString, &amp;Main, 0, 0);\n\n        FString Data = Main.Outdoor[0].Wind;\n        //FArrayBasic Data1 = Main.Indoor[0].objects.GetData[0];\n        GLog-&gt;Log(\"sfdjngejbfwjqwnoesfjkesngkwbegjkwefbnjk\");\n        GLog-&gt;Log(Data);\n\n\n        //for (int32 index = 0; index&lt;Data.Num(); index++)\n        //{\n        //  GLog-&gt;Log(\"name:\" + Data[index]-&gt;AsString());\n        //}\n\n\n        //The person \"object\" that is retrieved from the given json file\n        TSharedPtr&lt;FJsonObject&gt; GameSetting = JsonObject-&gt;GetObjectField(\"GameSetting\");\n\n        //Getting various properties\n        GLog-&gt;Log(\"ENV_TYPE:\" + GameSetting-&gt;GetStringField(\"ENV_TYPE\"));\n        GLog-&gt;Log(\"NUM_LEVELS:\" + FString::FromInt(GameSetting-&gt;GetIntegerField(\"NUM_LEVELS\")));\n\n        //Retrieving an array property and printing each field\n        /*TArray&lt;TSharedPtr&lt;FJsonValue&gt;&gt; objArray=PersonObject-&gt;GetArrayField(\"family\");\n        GLog-&gt;Log(\"printing family names...\");\n        for(int32 index=0;index&lt;objArray.Num();index++)\n        {\n\n            GLog-&gt;Log(\"name:\"+objArray[index]-&gt;AsString());\n        }*/\n    }\n    else\n    {\n        GLog-&gt;Log(\"couldn't deserialize\");\n    }\n\n}\n\n// Called every frame\nvoid AJsonParser::Tick(float DeltaTime)\n{\n    Super::Tick(DeltaTime);\n\n}\n</code></pre>\n\n<p>It would be extremely helpful if anyone can help me parse the array within the array in the JSON file using the same methodology. Thanks in advance.</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "multidimensional-array", "dynamic-programming"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 3, "creation_date": 1537962437, "post_id": 52516881, "comment_id": 91973471, "body": "<code>int array [n][wt];</code> can stackoverflow when there are million elements?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 3, "creation_date": 1537962456, "post_id": 52516881, "comment_id": 91973486, "body": "You are doing a stack allocation with this statement: <code>int array [n][wt]</code>. If the stack on the plataform is small, you will get an stack overflow. Use a <code>std::vector</code> instead"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 6, "creation_date": 1537962648, "post_id": 52516881, "comment_id": 91973595, "body": "VLA are not standard C++."}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1537964227, "post_id": 52516881, "comment_id": 91974574, "body": "possibly you are filling your stack. <a href=\"https://stackoverflow.com/questions/12488477/maximum-size-of-int-array\" title=\"maximum size of int array\">stackoverflow.com/questions/12488477/maximum-size-of-int-arr&zwnj;&#8203;ay</a> Use new operator."}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 8147810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ffdd14f155a97e209610069b58a404?s=128&d=identicon&r=PG", "display_name": "nglglhtr", "link": "https://stackoverflow.com/users/8147810/nglglhtr"}, "edited": false, "score": 0, "creation_date": 1537965555, "post_id": 52517823, "comment_id": 91975420, "body": "@einpoklum Thank you!"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 7, "last_activity_date": 1546336195, "last_edit_date": 1546336195, "creation_date": 1537965026, "answer_id": 52517823, "question_id": 52516881, "link": "https://stackoverflow.com/questions/52516881/why-am-i-getting-unknown-signal-11-with-this-knapsack-problem-solver/52517823#52517823", "title": "Why am I getting &quot;unknown signal 11&quot; with this knapsack problem solver?", "body": "<p>First note that your code doesn't work. That is, it doesn't compile when you adhere strictly to the C++ language standard, as <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">C++ does not support variable-length arrays</a>. (as noted by @Evg in a comment; some compilers offer this as an extension.)</p>\n\n<p>The main reason for excluding those from C++ is probably why you're experiencing issues for larger problem sizes: the danger of <a href=\"https://stackoverflow.com/q/1110138/1593077\">stack overflows</a>, the namesake of this website  (as noted by @huseyinturgulbuyukisik in a comment). Variable-length arrays are allocated on the stack, whose size is limited. When you exceed it, you might attempt to write to a segment of memory that is not allocated to your process, triggering Linux signal 11, also known as SIGSEGV - the <a href=\"https://www.cyberciti.biz/tips/segmentation-fault-on-linux-unix.html\" rel=\"nofollow noreferrer\">segmentation violation</a> signal.</p>\n\n<p>Instead of stack-based allocation, you should <a href=\"https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap/80113?s=1%7C500.5298#80113\">allocate your memory on the heap</a>. A straightforward way to do so would be using the <code>std::vector</code> container (whose default allocator does indeed allocate on the heap). Thus, you would write:</p>\n\n<pre><code> std::vector&lt;int&gt; vec(n * wt);\n</code></pre>\n\n<p>and instead of <code>array[i][j]</code> you'd use <code>vec[i * wt + j]</code>.</p>\n\n<p>Now, this is not as convenient as using <code>array[x][y]</code>; for the extra convenience you can, for example, write a helper lambda, to access individual elements, e.g.</p>\n\n<pre><code>auto array_element = [&amp;vec, wt](int x, int y) { return vec[x * wt + y]; }\n</code></pre>\n\n<p>with this lambda function available, you can now write statements such as  <code>array_element(i,j) = array_element(i-1,j);</code></p>\n\n<p>or use a multi-dimensional container (<code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> would work but it's ugly and wasteful IMHO; unfortunately, the standard library doesn't have a single-allocation multi-dimensional equivalent of that).</p>\n\n<hr>\n\n<p>Other suggestions, not regarding a solution to your signal 11 issue:</p>\n\n<ul>\n<li>Use more descriptive variable names, e.g. <code>weight</code> instead of <code>wt</code> and <code>capacity</code> instead of <code>W</code>. I'd also consider<code>sub_solutions_table</code> or <code>solutions_table</code> instead of <code>array</code>, and might also rename <code>i</code> and <code>j</code> according to the semantics of the dynamic solution table.</li>\n<li>You never actually need more than 2 rows of the solutions table; why not just allocate one row for the current iteration and one row for the previous iteration, and have appropriate pointers switch between them?</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11932132, "user_type": "registered", "profile_image": "https://graph.facebook.com/240829119896511/picture?type=large", "display_name": "Ashish Dukare", "link": "https://stackoverflow.com/users/11932132/ashish-dukare"}, "is_accepted": false, "score": 1, "last_activity_date": 1578761338, "last_edit_date": 1578761338, "creation_date": 1578752768, "answer_id": 59695314, "question_id": 52516881, "link": "https://stackoverflow.com/questions/52516881/why-am-i-getting-unknown-signal-11-with-this-knapsack-problem-solver/59695314#59695314", "title": "Why am I getting &quot;unknown signal 11&quot; with this knapsack problem solver?", "body": "<p>Replace</p>\n\n<pre><code>vector&lt; vector&lt; int&gt; &gt;  k(n + 1,vector&lt; int&gt;(W + 1));\n</code></pre>\n\n<p>with </p>\n\n<pre><code>int array[n][w];\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 8147810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ffdd14f155a97e209610069b58a404?s=128&d=identicon&r=PG", "display_name": "nglglhtr", "link": "https://stackoverflow.com/users/8147810/nglglhtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3837, "favorite_count": 3, "accepted_answer_id": 52517823, "answer_count": 2, "score": 5, "last_activity_date": 1578761338, "creation_date": 1537961958, "last_edit_date": 1592644375, "question_id": 52516881, "link": "https://stackoverflow.com/questions/52516881/why-am-i-getting-unknown-signal-11-with-this-knapsack-problem-solver", "title": "Why am I getting &quot;unknown signal 11&quot; with this knapsack problem solver?", "body": "<h2>Task</h2>\n<p>Given <em>n</em> gold bars, find the maximum weight of gold that fits into bag of capacity <em>W</em></p>\n<h2>Input</h2>\n<p>first line contains the capacity W of the knapsack and the number <em>n</em> of bars of gold. The next line contains n integers</p>\n<h2>Output</h2>\n<p>The max weight of gold that fits into a knapsack of capacity W.</p>\n<h2>Constraints</h2>\n<p>1 &lt;= W &lt;= 10000; 1&lt;= n &lt;= 300; 0 &lt;= w0, w1, w2, ... , w(n-1) &lt;= 100000</p>\n<h2>Code</h2>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing std::vector;\n\nint optimal_weight(int W, vector&lt;int&gt; w) {\n  int n = w.size() + 1;\n  int wt = W + 1;\n  int array [n][wt];\n  int val = 0;\n\n  for(int i = 0; i &lt; wt; i++) array [0][i] = 0;\n  for(int i = 0; i &lt; n; i++) array [i][0] = 0;\n\n  for(int i = 1; i&lt; n; i++) {\n    for(int j = 1; j &lt; wt; j++ ){\n      array[i][j] = array [i-1][j];\n      if (w[i-1] &lt;= j) {\n        val = array[i-1][j - w[i-1]] + w[i-1];\n        if(array[i][j] &lt; val) array[i][j] = val;\n      }\n    }\n  }\n\n  //printing the grid\n  // for(int i=0; i &lt; n; i++) {\n  //   for(int j=0; j &lt; wt; j++) {\n  //     cout&lt;&lt;array[i][j]&lt;&lt;&quot; &quot;;\n  //   }\n  //   cout&lt;&lt;endl;\n  // }\n  // cout&lt;&lt;endl;\n\n  return array [n-1][wt-1];\n}\n\nint main() {\n  int n, W;\n  std::cin &gt;&gt; W &gt;&gt; n;\n  vector&lt;int&gt; w(n);\n  for (int i = 0; i &lt; n; i++) {\n    std::cin &gt;&gt; w[i];\n  }\n  std::cout &lt;&lt; optimal_weight(W, w) &lt;&lt; '\\n';\n}\n</code></pre>\n<p>The above code works fine for smaller inputs, but gives an <code>unknown signal 11</code> error on the platform I wish to submit to. My best guess is of a possible segmentation fault, but I have been unable to debug it since quite some time now. Any help is much appreciated!</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1537961885, "post_id": 52516778, "comment_id": 91973104, "body": "If you have functions which do not depend on any template arguments in their signature, like the <code>doSomething</code> function, then you could create a non-template &quot;real&quot; base-class that the templated <code>Base</code> class inherits from."}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 2, "creation_date": 1537961891, "post_id": 52516778, "comment_id": 91973110, "body": "You can&#39;t do this. <code>Base&lt;std::string&gt;</code> and <code>Base&lt;int&gt;</code> are different specializations, and so they are distinct types. you cannot cast an apple into a car..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1537961964, "post_id": 52516778, "comment_id": 91973160, "body": "dont confuse java generics with c++ templates, those are two very different concepts"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1537962923, "post_id": 52516778, "comment_id": 91973749, "body": "The suggestions to use a concrete (non-template) base class are generally correct, but it&#39;s worth checking - <i>why</i> do you want a base class pointer? What are you using it for?"}], "answers": [{"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1537963561, "post_id": 52516899, "comment_id": 91974149, "body": "I suspect <code>ReallyBase::doSomething</code> should still be public here, and <code>ReallyBase</code> probably deserves a virtual dtor too."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1537963666, "post_id": 52516899, "comment_id": 91974219, "body": "@Useless: Thank you for not living up to your name."}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 3, "last_activity_date": 1537963623, "last_edit_date": 1537963623, "creation_date": 1537962022, "answer_id": 52516899, "question_id": 52516778, "link": "https://stackoverflow.com/questions/52516778/calling-a-super-template-class-method-without-knowing-the-template-type-in-c/52516899#52516899", "title": "Calling a super template class method without knowing the template type in C++", "body": "<p>Simply create another base class which is not a template:</p>\n\n<pre><code>class ReallyBase {\npublic:\n    virtual ~ReallyBase() = default;\n    void doSomething() { std::cout &lt;&lt; \"Hello world\\n\"; }\n};\n\ntemplate &lt;typename T&gt;\nclass Base : public ReallyBase {\npublic:\n    Base(const T&amp; t) : _t(t) {}\n    virtual const T&amp; getVal() const { return _t; }    \nprivate:\n    T _t;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1537962569, "creation_date": 1537962569, "answer_id": 52517053, "question_id": 52516778, "link": "https://stackoverflow.com/questions/52516778/calling-a-super-template-class-method-without-knowing-the-template-type-in-c/52517053#52517053", "title": "Calling a super template class method without knowing the template type in C++", "body": "<p>Generics in java are something completely different than templates in C++. Generics are based on type-erasure while with templates each instantiation is a seperate type completely unrelated to a different instantiation. </p>\n\n<p>Ie in Java an <code>ArrayList&lt;Integer&gt;</code> is basically the same thing as a <code>ArrayList&lt;Boolean&gt;</code>. With templates on the other hand, <code>Base&lt;int&gt;</code> has no relation to <code>Base&lt;std::string&gt;</code> (other than being two types resulting from the same template) and hence your derived classes actually do <strong>not</strong> share a common base class. </p>\n\n<p>To solve your problem you could write a (non-template) base class that declares the common interface of all your derived classes.</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1537967236, "last_edit_date": 1537967236, "creation_date": 1537963971, "answer_id": 52517511, "question_id": 52516778, "link": "https://stackoverflow.com/questions/52516778/calling-a-super-template-class-method-without-knowing-the-template-type-in-c/52517511#52517511", "title": "Calling a super template class method without knowing the template type in C++", "body": "<p>Let's <strong>1<sup>st</sup></strong> talk about a simple solution to your problem, writing a derivation function:</p>\n\n<pre><code>template&lt;typename T&gt;\nBase&lt;T&gt;* make_base(Base&lt;T&gt;* param) {\n    return param;\n}\n</code></pre>\n\n<p>You can use this as follows:</p>\n\n<pre><code>DerivedA d(\"hello world\\n\");\nauto basePtr = make_base(&amp;d);\n\nbasePtr-&gt;doSomething();\n</code></pre>\n\n<p>This solution can be further improved as in <a href=\"https://ideone.com/3kr0VZ\" rel=\"nofollow noreferrer\"><strong>this example</strong></a> but since I don't think it's the best solution I'll not clutter the answer with it but leave such optimization for your perusal.</p>\n\n<p>But <strong>2<sup>nd</sup></strong> let's talk about improving your design. You'll notice that any of the standard containers create a <code>using value_type =</code>... thereby storing the template types that they are passed. This is important for <em>this exact situation</em>! If you publicly add <code>using value_type = T</code> to your <code>Base</code> template class you'll circumvent the problem you're having all together, without the need for a <code>make_base</code> you'll be able to do:</p>\n\n<pre><code>Base&lt;decltype(d)::value_type&gt;* basePtr = &amp;d;\n</code></pre>\n\n<hr>\n\n<p>An important follow up concept here is that <code>DerivedA</code> and <code>DerivedB</code> do <em>not</em> have the same base class. Thus you can never do something like this<strike></p>\n\n<pre><code>auto basePtr = make_base(&amp;d);\nbasePtr = new DerivedB({});\n</code></pre>\n\n<p></strike></p>\n"}], "owner": {"reputation": 1375, "user_id": 2174504, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3e93226a2d7866f53e703da32c6777ae?s=128&d=identicon&r=PG", "display_name": "Joan P.S", "link": "https://stackoverflow.com/users/2174504/joan-p-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1537967236, "creation_date": 1537961647, "question_id": 52516778, "link": "https://stackoverflow.com/questions/52516778/calling-a-super-template-class-method-without-knowing-the-template-type-in-c", "title": "Calling a super template class method without knowing the template type in C++", "body": "<p>I have a base class that uses template, and it has a few methods that are not dependent on the template type, but when I use the pointer <code>Base* a</code> instead of the derived class the compiler complains because there is no type specified. I know in java this is possible but not sure if it is possible in C++. Here a simple example:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Base {\npublic:\n    Base(const T&amp; t) : _t(t) {}\n    virtual ~Base() { }\n\n    void doSomething() { std::cout &lt;&lt; \"Hello world/n\"; }\n\n    virtual T getVal() const { return _t; }\n\nprivate:\n    T _t;\n};\n\nclass DerivedA : public virtual Base&lt;std::string&gt;\n{\npublic:\n    DerivedA(const std::string&amp; path) : Base&lt;std::string&gt;(path) {}\n    virtual ~DerivedA() {}\n};\n\nclass DerivedB : public virtual Base&lt;int&gt;\n{\npublic:\n    DerivedB(int value) : Base&lt;int&gt;(value) {}\n    virtual ~DerivedB() {}\n};\n\nint main(int argc, const char * argv[]) {\n\n    DerivedA d(\"hello world\\n\");\n    Base* basePtr = &amp;d; // ERROR: Use of class template 'Base' requires template arguments\n    basePtr-&gt;doSomething();\n</code></pre>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["c++", "templates", "clang"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1537960791, "post_id": 52516465, "comment_id": 91972499, "body": "the compilation time is not necessarily in that line that you show here, but more likely in the code for the classes. If you dont use an instantiation of those templates they wont get compiled which would explain the extreme drop in compilation time. What you show here does not explain 60 minutes of compilation..."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1537963466, "post_id": 52516465, "comment_id": 91974082, "body": "The templates B..E look trivial (unless there&#39;s a <i>lot</i> of code or other dependencies you haven&#39;t shown: the constructor itself isn&#39;t complicated). What happens if you just <code>make_shared&lt;ClassA&gt;(loader)</code>? What about <code>make_shared&lt;ClassB&lt;ClassA&gt;&gt;(loader)</code>? You should be able to see where the slowdown occurs."}], "answers": [{"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 0, "last_activity_date": 1537971038, "creation_date": 1537971038, "answer_id": 52519758, "question_id": 52516465, "link": "https://stackoverflow.com/questions/52516465/how-to-speed-up-compilation-of-multiple-template-type-definition-macos-clang/52519758#52519758", "title": "How to speed up compilation of multiple template type definition? (macOS, Clang)", "body": "<p>If by removing that template line of code, your code still compiles then these template constructors may not be necessary (you should test to be sure). But since compilation time is increased when these constructors are presents that means the compiler requires the definitions of theses templates.</p>\n\n<p>I suppose that these template constructors are called when present because they take precedence (or even disable implicit definition of default constructor) over special member functions: default constructor and copy/move constructor.</p>\n\n<p>So if you don't want to touch these line of code, you could declare defaulted special constructors in such a way that they are always better match than these templates for copy and default construction, or may prefer to constrain the template constructors:</p>\n\n<p><strong>Option 1</strong>:</p>\n\n<pre><code>template&lt;typename T&gt; class ClassB: public T {\npublic:\n    ClassB() =default;\n    ClassB(const ClassB&amp;) =default;\n    ClassB(ClassB&amp;&amp;) =default;\n    ClassB(ClassB&amp;) =default; //also, to be a better match\n    ClassB(const ClassB&amp;&amp;) =default; //idem\n\n    template&lt;typename...ARGS&gt; ClassB(ARGS&amp;&amp;...args):T(args...){}\n    //...don't have to worry any more if you declare another\n    //...template constructor\n};\n</code></pre>\n\n<p><strong>Option 2</strong>:</p>\n\n<pre><code>template&lt;typename T&gt; class ClassB: public T {\npublic:\n\n    template&lt;typename Arg,typename...ARGS,\n      class=std::enable_if_t&lt;!std::is_same_v&lt;std::decay_t&lt;Arg&gt;,ClassB&gt;&gt;&gt;\n    ClassB(Arg&amp;&amp; arg,ARGS&amp;&amp;...args):T(arg,args...){}\n    //... You should apply this constrain to all template\n    //...  constructors that have a similar signature\n};\n</code></pre>\n"}], "owner": {"reputation": 492, "user_id": 1958060, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c4e3f496077738eac61e53c8bc5951a7?s=128&d=identicon&r=PG&f=1", "display_name": "eSeverus", "link": "https://stackoverflow.com/users/1958060/eseverus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537971038, "creation_date": 1537960544, "question_id": 52516465, "link": "https://stackoverflow.com/questions/52516465/how-to-speed-up-compilation-of-multiple-template-type-definition-macos-clang", "title": "How to speed up compilation of multiple template type definition? (macOS, Clang)", "body": "<h2>Problem</h2>\n\n<p>I am porting a C++ library to macOS (with <strong>Clang</strong> compiler). It seems it stucks at some point and <strong>delays compilation time up to 60+ min</strong>. After isolating the problem I figured out it is caused by this monster template definition <em>(replaced class names)</em>:</p>\n\n<pre><code>auto table = std::make_shared&lt;ClassE&lt;ClassD&lt;ClassC&lt;ClassB&lt;ClassA&gt;&gt;&gt;&gt;(loader);\n</code></pre>\n\n<p>All classes are templates and contains constructor <em>(except ClassA)</em> similar to this:</p>\n\n<pre><code>template&lt;typename T&gt; class ClassB: public T {\npublic:\n    template&lt;typename...ARGS&gt; ClassB(ARGS&amp;&amp;...args):T(args...){}\n    //...\n};\n</code></pre>\n\n<p>When I remove that template line of code, it compiles normaly, in few seconds. It works fine with Windows (Visual Studio) and Linux platforms, so it is probably broken with macOS compiler (XCode, Apple's LLVM, Clang).</p>\n\n<h2>Qustion</h2>\n\n<p>I would like to avoid fixing all the classes, is there a way, how to <strong>rewrite</strong> that definition to solve really slow compilation?</p>\n"}, {"tags": ["c++", "qt", "qt-creator", "mp4box"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537960408, "post_id": 52516385, "comment_id": 91972286, "body": "Can you look at that line in GPAC&#39;s headers and work out why it&#39;s being hit? I&#39;d guess it expects a number of #defines based on platform or things it&#39;s detected during configuration that it doesn&#39;t have."}, {"owner": {"reputation": 50, "user_id": 5260524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ol1v5.jpg?s=128&g=1", "display_name": "Ketan Chauhan", "link": "https://stackoverflow.com/users/5260524/ketan-chauhan"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537962072, "post_id": 52516385, "comment_id": 91973232, "body": "It opens a configuration.h #define GPAC_CONFIGURATION &quot;(static configuration file)&quot; and this file defines all common macros for libgpac compilation   except for symbian32 which uses .mmp directives"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537965520, "post_id": 52516385, "comment_id": 91975397, "body": "OK. If you look at <a href=\"https://github.com/gpac/gpac/blob/master/include/gpac/configuration.h#L103\" rel=\"nofollow noreferrer\">line 103</a> then it looks like you&#39;re supposed to have GPAC_CONFIG_DARWIN defined when building on Mac OS, and it looks like the configure script is supposed to set this up. Are you linking it from the build tree? It&#39;s possible that only gets set up if you <code>make install</code> it somewhere else first."}, {"owner": {"reputation": 50, "user_id": 5260524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ol1v5.jpg?s=128&g=1", "display_name": "Ketan Chauhan", "link": "https://stackoverflow.com/users/5260524/ketan-chauhan"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1538019167, "post_id": 52516385, "comment_id": 91997353, "body": "It works by defining DEFINES += GPAC_CONFIG_DARWIN in .pro file. Thank you @Rup"}], "owner": {"reputation": 50, "user_id": 5260524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ol1v5.jpg?s=128&g=1", "display_name": "Ketan Chauhan", "link": "https://stackoverflow.com/users/5260524/ketan-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1537965166, "creation_date": 1537960272, "last_edit_date": 1537965166, "question_id": 52516385, "link": "https://stackoverflow.com/questions/52516385/how-to-add-gpacmp4box-library-to-qt-project", "title": "How to add GPAC(MP4Box) library to Qt project?", "body": "<p>I am using Qt 5.11 and Mac OS (High Sierra). Trying to add GPAC (MP4Box), I compile the library downloaded from Git and then include its path in the <code>.pro</code> file like this:</p>\n\n<pre><code>LIBS +=   -L\"/Users/stellar/Desktop/gpac/bin/gcc\"\nLIBS +=   /Users/stellar/Desktop/gpac/include\n</code></pre>\n\n<p>Then I include a header file in <code>main.cpp</code>:</p>\n\n<pre><code>#include&lt;gpac/avparse.h&gt;\n</code></pre>\n\n<p>Doing that I get the following error:</p>\n\n<blockquote>\n  <p>\"/Users/stellar/Desktop/gpac/include/gpac/configuration.h:163: error: \"Unknown target platform used with static configuration file\"</p>\n</blockquote>\n\n<p>How to fix that?</p>\n"}, {"tags": ["c++", "c++11", "boost", "c++14", "linker-errors"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 4, "last_activity_date": 1537959960, "creation_date": 1537959960, "answer_id": 52516299, "question_id": 52516249, "link": "https://stackoverflow.com/questions/52516249/undefined-reference-to-boostsystemdetailsystem-category-instance-that-gets/52516299#52516299", "title": "Undefined reference to boost::system::detail::system_category_instance that gets fixed when switching from C++14 to C++11", "body": "<p>You'll have to recompile boost specifying <code>cxxstd=14</code>.</p>\n"}], "owner": {"reputation": 1316, "user_id": 802339, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6e6222658489636372a262a4cc9d0037?s=128&d=identicon&r=PG", "display_name": "sank", "link": "https://stackoverflow.com/users/802339/sank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1372, "favorite_count": 0, "accepted_answer_id": 52516299, "answer_count": 1, "score": 3, "last_activity_date": 1537960005, "creation_date": 1537959755, "last_edit_date": 1537960005, "question_id": 52516249, "link": "https://stackoverflow.com/questions/52516249/undefined-reference-to-boostsystemdetailsystem-category-instance-that-gets", "title": "Undefined reference to boost::system::detail::system_category_instance that gets fixed when switching from C++14 to C++11", "body": "<p>I am trying to build my C++ application that uses boost 1.68.0. On trying to build it using cmake followed by make, I get the following linking errors,</p>\n\n<pre><code>/usr/local/bin/g++   -Wall -Wextra -g3 -std=c++14 -Wl,-rpath=/usr/local/lib -L/usr/local/lib    CMakeFiles/Supervisor.dir/HeartbeatManager.cpp.o CMakeFiles/Supervisor.dir/JobReceiver.cpp.o CMakeFiles/Supervisor.dir/ResultSender.cpp.o CMakeFiles/Supervisor.dir/Supervisor.cpp.o CMakeFiles/Supervisor.dir/Process.cpp.o  -o Supervisor -rdynamic -lpthread -lboost_system-mt \nCMakeFiles/Supervisor.dir/HeartbeatManager.cpp.o: In function `boost::system::system_category()':\n/usr/local/include/boost/system/error_code.hpp:473: undefined reference to `boost::system::detail::system_category_instance'\n</code></pre>\n\n<p>On switching the <code>-std=c++14</code> flag with <code>-std=c++11</code>, the error disappears. I got the idea from this <a href=\"https://stackoverflow.com/a/51880295/802339\">answer</a>. I do not know why that fixes it. Now in my project I cannot use <code>-std=c++11</code> flag instead of the <code>-std=c++14</code> flag.  </p>\n"}, {"tags": ["c++", "clang", "boost-filesystem", "meson-build"], "comments": [{"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1537959897, "post_id": 52516165, "comment_id": 91971993, "body": "(not using clang nor meson, so I may be wrong, but) have you checked if you need to link libc++fs with clang if you use std::filesystem?"}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1537960322, "post_id": 52516165, "comment_id": 91972232, "body": "@roalz - I think Meson should deal with it, and choose <code>libc++fs</code> or <code>libstdc++fs</code> depending on the compiler (clang or gcc)."}], "answers": [{"tags": [], "owner": {"reputation": 9057, "user_id": 356838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90065346901c2d8730bedf54a2d248df?s=128&d=identicon&r=PG", "display_name": "pmod", "link": "https://stackoverflow.com/users/356838/pmod"}, "is_accepted": false, "score": 2, "last_activity_date": 1538054702, "creation_date": 1538054702, "answer_id": 52538101, "question_id": 52516165, "link": "https://stackoverflow.com/questions/52516165/cannot-use-the-c-stdfilesystem-library-with-meson-build/52538101#52538101", "title": "Cannot use the C++ `std::filesystem` library with Meson build", "body": "<p><strong>dependency()</strong> is for external libraries. Standard libraries should be configured using compiler command line with special functions like <a href=\"https://mesonbuild.com/Reference-manual.html#add_project_arguments\" rel=\"nofollow noreferrer\">add_XXX_arguments()</a>. So, try</p>\n\n<pre><code>add_project_arguments(['-stdlib=libc++'], language : 'cpp')\nadd_project_link_arguments(['-stdlib=libc++','-lstdc++fs'], language : 'cpp')\n</code></pre>\n\n<p>However, '-lstdc++fs' maybe not needed in your <a href=\"https://stackoverflow.com/questions/42129775/why-must-i-still-use-lstdcfs\">case</a>.</p>\n"}], "owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1511, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1538054702, "creation_date": 1537959512, "last_edit_date": 1537960572, "question_id": 52516165, "link": "https://stackoverflow.com/questions/52516165/cannot-use-the-c-stdfilesystem-library-with-meson-build", "title": "Cannot use the C++ `std::filesystem` library with Meson build", "body": "<p>I am trying to build a piece of C++ code that uses the new C++17 Filesystem library, using the Meson build system.</p>\n\n<p>This is the piece of <code>meson.build</code> file involved:</p>\n\n<pre><code>if not compiler.has_header('filesystem')   # This is OK\n    warning('The compiler has no &lt;filesystem&gt; header file')\nendif\n\nfilesystem_dep = dependency('libc++fs', modules : ['filesystem'])\n\ntest_exe = executable('test', test_src,\n                      include_directories : include_dirs,\n                      dependencies : filesystem_dep\n                     )\n</code></pre>\n\n<p>In case the boost::filesystem library is used, this should be the correct syntax:</p>\n\n<pre><code>filesystem_dep = dependency('boost', modules : ['filesystem'])\n</code></pre>\n\n<p>How can I specify I want the version contained in the Standard C++ library? This is what I tried without success: 'libc++fs', 'stdlib', 'stdc++', 'libc++', 'c++', 'c++17'.</p>\n\n<p>This is the error message I get from Meson:</p>\n\n<blockquote>\n  <p>src/meson.build:33:0: ERROR:  Native dependency 'libc++fs' not found</p>\n</blockquote>\n\n<p>The compiler I am currently using is LLVM/clang.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 7, "creation_date": 1537958544, "post_id": 52515805, "comment_id": 91971185, "body": "Look up <code>std::function</code> and stop using <code>void*</code>. You&#39;re going about C++ the wrong way. Start anew without trying to make it look like C#."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1537959071, "post_id": 52515805, "comment_id": 91971521, "body": "If you have something like <code>+= delegate { &#47;&#47; Do something }</code> then it only means that <i>delegation syntax is short</i> while overwhelming complexity boilerplate is hidden by compiler."}], "answers": [{"comments": [{"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 1, "creation_date": 1537959425, "post_id": 52516085, "comment_id": 91971735, "body": "It may be even better to provide a Task constructor that takes the std::function as param). Task task([]{...});"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1537959556, "post_id": 52516085, "comment_id": 91971805, "body": "and maybe add a Task::run() member function that calls ExecuteTask (whose name should not start with uppercase as for the most common C++ naming conventions)."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1537963250, "post_id": 52516085, "comment_id": 91973946, "body": "If you capture by reference, beware of dangling references in the captured variables. You need to guarantee that all the captured variables are still &quot;live&quot; whenever the task invokes the function."}], "tags": [], "owner": {"reputation": 47, "user_id": 5734297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af75472bac431e7c3974cb4f5ecec8c?s=128&d=identicon&r=PG&f=1", "display_name": "Reece Smith", "link": "https://stackoverflow.com/users/5734297/reece-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1537959273, "creation_date": 1537959273, "answer_id": 52516085, "question_id": 52515805, "link": "https://stackoverflow.com/questions/52515805/c-delegation-passing-a-function-to-be-ran/52516085#52516085", "title": "C++ delegation? (Passing a function to be ran)", "body": "<p>I manged to get a solution with std::function using </p>\n\n<pre><code>class Task\n{\npublic:\n     std::function&lt;void(void)&gt; ExecuteTask;\n};\n</code></pre>\n\n<p>Then when i use it, i use:</p>\n\n<pre><code>Task *taskit = new Task();\ntaskit-&gt;ExecuteTask = [&amp;]\n{\n    //Do something\n};\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5734297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af75472bac431e7c3974cb4f5ecec8c?s=128&d=identicon&r=PG&f=1", "display_name": "Reece Smith", "link": "https://stackoverflow.com/users/5734297/reece-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 52516085, "answer_count": 1, "score": -1, "last_activity_date": 1537959273, "creation_date": 1537958394, "question_id": 52515805, "link": "https://stackoverflow.com/questions/52515805/c-delegation-passing-a-function-to-be-ran", "title": "C++ delegation? (Passing a function to be ran)", "body": "<p>So i fairly new to c++ and i have come from a background from c# so this has been a big challenge, I struggling with a issue that is fairly simple in c# but seem to be a pain in c++ </p>\n\n<p>So i have a class TASK that has a function called ExecuteTask();</p>\n\n<pre><code>class Task\n{\npublic:\n    virtual void *ExecuteTask(void* foo);\n};\n</code></pre>\n\n<p>This task is called but a Thread pool when added to a scheduled</p>\n\n<p>What I'm looking to do is something like this</p>\n\n<pre><code>    Task *taskit = new Task();\n    taskit-&gt;ExecuteTask(new void {\n\n});\n</code></pre>\n\n<p>which i know is very simple in C# because you have delegation, you could use something along the lines of <code>+= delegate { // Do something }</code> </p>\n\n<p>I am using Visual studio 2017 with MS standard library's and C++</p>\n"}, {"tags": ["c++", "dll", "abstract-class", "pimpl-idiom"], "comments": [{"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 2, "creation_date": 1537961123, "post_id": 52515789, "comment_id": 91972684, "body": "Conceptually, if any change in the interface exposed by your DLL is getting changed then compatibility will break. If you modify internally like function body then it doesn&#39;t matter. But you should also keep in mind the future possibility during design."}, {"owner": {"reputation": 199, "user_id": 1472326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b267106e73dab9bd2c0671fa5d22bab?s=128&d=identicon&r=PG", "display_name": "Rafael Pasquay", "link": "https://stackoverflow.com/users/1472326/rafael-pasquay"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1537961470, "post_id": 52515789, "comment_id": 91972875, "body": "@Sanjeev Thanks for your comment! I&#39;ve edited by answer to point out that I not only refer to a change in e.g. function bodies but also adding removing stuff (methods and members alike) in the implementation classes which do not directly change the respective &quot;interfaces&quot; (class the users sees)."}, {"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 1, "creation_date": 1537961700, "post_id": 52515789, "comment_id": 91972997, "body": "have a look on this link, it will provide you some light on this <a href=\"https://stackoverflow.com/questions/52494130/how-dynamic-linking-reacts-on-a-change-in-object/52494228#52494228\" title=\"how dynamic linking reacts on a change in object\">stackoverflow.com/questions/52494130/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1537962054, "post_id": 52515789, "comment_id": 91973222, "body": "1. Yes you are fine. 2. Yes if you change the API you break compatibility."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537962259, "post_id": 52515789, "comment_id": 91973354, "body": "<b><i>he author states that using an abstract interface is the way to go</i></b> He did not address pimpl at all. There is even a question in the comments of his article asking about that."}, {"owner": {"reputation": 199, "user_id": 1472326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b267106e73dab9bd2c0671fa5d22bab?s=128&d=identicon&r=PG", "display_name": "Rafael Pasquay", "link": "https://stackoverflow.com/users/1472326/rafael-pasquay"}, "edited": false, "score": 0, "creation_date": 1537976841, "post_id": 52515789, "comment_id": 91982852, "body": "I&#39;m aware of the author not talking about pimpl. While looking <i>more into the topic of ABI compatibility etc.</i> I stumbled upon some people mentioning this idiom and came here for an answer regarding <b>why pimple can achieve ABI independency and not the use of an abstract base class like outlined in my question above</b>. I did not see the comment regarding pimpl in the article I linked. Thank you for pointing that out."}, {"owner": {"reputation": 199, "user_id": 1472326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b267106e73dab9bd2c0671fa5d22bab?s=128&d=identicon&r=PG", "display_name": "Rafael Pasquay", "link": "https://stackoverflow.com/users/1472326/rafael-pasquay"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1537977201, "post_id": 52515789, "comment_id": 91983068, "body": "@drescherjm The question you mentioned below the CodeProject article linked by me is unfortunately lacking an answer."}], "owner": {"reputation": 199, "user_id": 1472326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b267106e73dab9bd2c0671fa5d22bab?s=128&d=identicon&r=PG", "display_name": "Rafael Pasquay", "link": "https://stackoverflow.com/users/1472326/rafael-pasquay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537961383, "creation_date": 1537958339, "last_edit_date": 1537961383, "question_id": 52515789, "link": "https://stackoverflow.com/questions/52515789/dll-exported-class-abstract-base-class-and-pimpl", "title": "DLL exported class: Abstract base class and pimpl?", "body": "<p>I was looking into creation of DLL's using C++ lately and stumbled by accident into the discussion of \"Abstract Base Classes vs. Pimpl Idiom\" when it comes to ABI compatibility. I'm pretty new to dealing with DLLs so please be patient if I get a term/concept wrong. Here's my story:</p>\n\n<p>I've read in this article here over at <a href=\"https://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL#CppNaiveApproach\" rel=\"nofollow noreferrer\">CodeProject.com</a> where the author states that using an abstract interface is the way to go.</p>\n\n<p>To summarize: You have an abstract base class <code>class IFoo</code>, a factory method <code>extern \"C\" __declspec(dllexport/dllimport) IFoo* createFoo();</code> and an actual implementation <code>class FooImpl</code> of the <code>IFoo</code> interface which is what is actually instantiated and returned by <code>createFoo()</code>.</p>\n\n<p>So far so good.</p>\n\n<p>Now I found some people argue that only the Pimpl-Idiom could preserve ABI compatibility (<a href=\"https://softwareengineering.stackexchange.com/questions/213259/whats-is-the-point-of-pimpl-pattern-while-we-can-use-interface-for-the-same-pur\">What's is the point of PImpl pattern while we can use interface for the same purpose in C++?</a>, <a href=\"https://stackoverflow.com/questions/825018/pimpl-idiom-vs-pure-virtual-class-interface/2330745#2330745\">Pimpl idiom vs Pure virtual class interface\n</a>) and I'm a bit confused:</p>\n\n<p>The way I understand pimpl: You have a <code>class Bar</code> holding a pointer to <code>class BarImpl</code> which contains all implementation detail.</p>\n\n<p>My questions:</p>\n\n<ol>\n<li><p>If I only change the <strong>internal workings</strong> in both cases (change either <code>class FooImpl</code> or <code>class BarImpl</code>) the ABI of code \"facing the user\" in both cases does not change, or does it ?</p></li>\n<li><p>On the other hand both approaches break clearly ABI compatibility if I make changes to <code>class Foo</code> or <code>class Bar</code>, right ? </p></li>\n<li><p>In case my assumptions of ABI compatibility using abstract base classes are wrong. Do I have to use a mixture of abstract base classes in DLLs to truly keep ABI compatible if I <strong>only</strong> perform changes to internal stuff of the libraries code ?</p></li>\n</ol>\n\n<p>I hope I could clearly formulate what's unclear to me ;)</p>\n\n<p>EDIT: By \"changing internals\" I also refer to adding/removing of members/methods in the implementation classes <code>FooImpl</code> and <code>BarImpl</code>.</p>\n"}, {"tags": ["c++", "arduino", "variable-declaration"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1537958345, "post_id": 52515731, "comment_id": 91971086, "body": "It is not valid C. It <i>could be</i> C++, though."}, {"owner": {"reputation": 700, "user_id": 3274353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GIGN8.jpg?s=128&g=1", "display_name": "John Go-Soco", "link": "https://stackoverflow.com/users/3274353/john-go-soco"}, "edited": false, "score": 0, "creation_date": 1537959064, "post_id": 52515731, "comment_id": 91971516, "body": "It <i>could</i> be a macro in C as well. EDIT: No, it cannot.   But, having looked at the rest of the code, I do believe it is indeed C++."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1537959070, "post_id": 52515731, "comment_id": 91971519, "body": "Are you sure <code>CRGB::Black</code> is actually a struct and not an enum constant?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1537959885, "post_id": 52515731, "comment_id": 91971986, "body": "@wildplasser: It is <i>Arduino Language</i>, which is an unspecified, undocumented (basically &quot;whatever the Arduino IDE will accept&quot;) close relative of C++. The actual compiler is a fork of GCC, but the IDE does some preprocessing and wrapping of the code (for example generating a suitable <code>main</code> method)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537959952, "post_id": 52515731, "comment_id": 91972033, "body": "<code>CRGB::Black</code> is a number, not a struct. There are many constructors for <code>CRGBPalette16</code>, with varying numbers of parameters. Related: <a href=\"http://fastled.io/docs/3.1/index.html\" rel=\"nofollow noreferrer\">FastLED reference</a>."}], "answers": [{"comments": [{"owner": {"reputation": 18226, "user_id": 467386, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9e065f079b7a26c417d850dfe762a9f7?s=128&d=identicon&r=PG", "display_name": "Tom Auger", "link": "https://stackoverflow.com/users/467386/tom-auger"}, "edited": false, "score": 0, "creation_date": 1537960523, "post_id": 52515978, "comment_id": 91972351, "body": "Thanks. So CRGBPalette16 is an object and we&#39;re calling its constructor here? It&#39;s weird, because you can assign directly to it like: <code>currentPalette[12] = 0xffcc88;</code>"}, {"owner": {"reputation": 700, "user_id": 3274353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GIGN8.jpg?s=128&g=1", "display_name": "John Go-Soco", "link": "https://stackoverflow.com/users/3274353/john-go-soco"}, "reply_to_user": {"reputation": 18226, "user_id": 467386, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9e065f079b7a26c417d850dfe762a9f7?s=128&d=identicon&r=PG", "display_name": "Tom Auger", "link": "https://stackoverflow.com/users/467386/tom-auger"}, "edited": false, "score": 2, "creation_date": 1537961110, "post_id": 52515978, "comment_id": 91972679, "body": "Not weird at all because you can define an overload operator for objects. Have a look at <a href=\"https://www.learncpp.com/cpp-tutorial/98-overloading-the-subscript-operator/\" rel=\"nofollow noreferrer\">learncpp.com/cpp-tutorial/98-overloading-the-subscript-opera&zwnj;&#8203;tor</a>"}, {"owner": {"reputation": 700, "user_id": 3274353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GIGN8.jpg?s=128&g=1", "display_name": "John Go-Soco", "link": "https://stackoverflow.com/users/3274353/john-go-soco"}, "reply_to_user": {"reputation": 18226, "user_id": 467386, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9e065f079b7a26c417d850dfe762a9f7?s=128&d=identicon&r=PG", "display_name": "Tom Auger", "link": "https://stackoverflow.com/users/467386/tom-auger"}, "edited": false, "score": 0, "creation_date": 1537963698, "post_id": 52515978, "comment_id": 91974236, "body": "EDIT: Just realised my mistake there in my last comment. It should say &quot;You can define an overload to the subscript operator for objects&quot;."}], "tags": [], "owner": {"reputation": 700, "user_id": 3274353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GIGN8.jpg?s=128&g=1", "display_name": "John Go-Soco", "link": "https://stackoverflow.com/users/3274353/john-go-soco"}, "is_accepted": true, "score": 4, "last_activity_date": 1537958946, "creation_date": 1537958946, "answer_id": 52515978, "question_id": 52515731, "link": "https://stackoverflow.com/questions/52515731/c-parentheses-after-variable-name-in-declaration/52515978#52515978", "title": "C++ - Parentheses after variable name in declaration", "body": "<p>Having had a look at <a href=\"https://gist.github.com/kriegsman/1f7ccbbfa492a73c015e\" rel=\"nofollow noreferrer\">the rest of the file</a>, I believe you are looking at some <code>C++</code> code.</p>\n\n<p><code>CRGBPalette16 currentPalette( CRGB::Black );</code></p>\n\n<p>This line <em>initialises an object of type <code>CRGBPalette16</code></em> with the enum parameter <code>CRGB::Black</code>.</p>\n\n<p>You can see the object passed as a reference into other functions, such as here on line 72:</p>\n\n<p><code>leds[i] = ColorFromPalette( currentPalette, colorIndex + sin8(i*16), brightness);</code></p>\n"}], "owner": {"reputation": 18226, "user_id": 467386, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9e065f079b7a26c417d850dfe762a9f7?s=128&d=identicon&r=PG", "display_name": "Tom Auger", "link": "https://stackoverflow.com/users/467386/tom-auger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 52515978, "answer_count": 1, "score": -4, "last_activity_date": 1537960430, "creation_date": 1537958147, "last_edit_date": 1537960430, "question_id": 52515731, "link": "https://stackoverflow.com/questions/52515731/c-parentheses-after-variable-name-in-declaration", "title": "C++ - Parentheses after variable name in declaration", "body": "<p>I'm looking at <a href=\"https://gist.github.com/kriegsman/1f7ccbbfa492a73c015e\" rel=\"nofollow noreferrer\">some Arduino code</a> and encountering a construct I haven't seen before:</p>\n\n<p><code>CRGBPalette16 currentPalette( CRGB::Black );</code></p>\n\n<p><code>CRGB::Black</code> is a constant, which, as some have pointed out is a number.</p>\n\n<p>Later on in the code the author appears to write directly to <code>currentPalette</code> (or other similar variables) like this: <code>currentPalette[12] = CRGB::Black;</code></p>\n\n<p>Is currentPalette an object instance? If so then how can you access it as if it were an array?</p>\n"}, {"tags": ["c++", "windows", "trayicon"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1537957901, "post_id": 52515596, "comment_id": 91970816, "body": "Maybe the instance of <code>WindowSysTray</code> is not valid?  Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show how you created instances of this class."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1537957980, "post_id": 52515596, "comment_id": 91970862, "body": "Doesn&#39;t seem to be anything wrong with the code posted. How do you know it crashes when returning the value?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1537958244, "post_id": 52515596, "comment_id": 91971028, "body": "I&#39;d ask a debugger."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537958349, "post_id": 52515596, "comment_id": 91971088, "body": "Please, put the <code>HICON</code> into a smart pointer with custom deleter (<code>DestroyIcon()</code>)."}, {"owner": {"reputation": 45, "user_id": 6656460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ec35a5801a44e16ab65eadfa5fa0d0?s=128&d=identicon&r=PG&f=1", "display_name": "Cuong Huynh", "link": "https://stackoverflow.com/users/6656460/cuong-huynh"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1537958370, "post_id": 52515596, "comment_id": 91971099, "body": "@john It crashed and create a .dmp file. I also put some logs to test this. Actually, it does not always crash."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1537958580, "post_id": 52515596, "comment_id": 91971208, "body": "@CuongHuynh Crashing on exit from a function is sometimes an indication of stack corruption, but there&#39;s no evidence of that in the posted code."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537958616, "post_id": 52515596, "comment_id": 91971228, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that crashes or it didn&#39;t happen."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1537958627, "post_id": 52515596, "comment_id": 91971238, "body": "@CuongHuynh You only posted class code -- that is not enough.  We have no idea when, where, or how <code>WindowSysTray</code> instances are created.  If you are using an invalid <code>WindowSysTray</code> instance, then anything done within that invalid instance leads to undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 10375413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3177e8f317554e65719753ff9b07ac7?s=128&d=identicon&r=PG&f=1", "display_name": "HanT", "link": "https://stackoverflow.com/users/10375413/hant"}, "is_accepted": false, "score": 0, "last_activity_date": 1538034149, "creation_date": 1538034149, "answer_id": 52531889, "question_id": 52515596, "link": "https://stackoverflow.com/questions/52515596/why-app-sometimes-crashes-when-getting-icon-from-file/52531889#52531889", "title": "Why app sometimes crashes when getting Icon from file?", "body": "<p><code>m_map_icons.find()</code> could go wrong. This might be the case if <code>m_map_icons</code> is empty. You can start <code>WindowSysTray::getIconFromFile</code> with a check:\n<code>if (m_map_icons.size() == 0) return 0;</code></p>\n"}], "owner": {"reputation": 45, "user_id": 6656460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ec35a5801a44e16ab65eadfa5fa0d0?s=128&d=identicon&r=PG&f=1", "display_name": "Cuong Huynh", "link": "https://stackoverflow.com/users/6656460/cuong-huynh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1538034149, "creation_date": 1537957744, "last_edit_date": 1537958122, "question_id": 52515596, "link": "https://stackoverflow.com/questions/52515596/why-app-sometimes-crashes-when-getting-icon-from-file", "title": "Why app sometimes crashes when getting Icon from file?", "body": "<p>I have functions to load and get Icon from files as follows:</p>\n\n<pre><code>std::map&lt;wstring, HICON&gt; m_map_icons;\n\nvoid WindowSysTray::_loadIconFromFiles()\n{\n    ...\n    for (int i = 0; i &lt; 3; ++i) {\n        wstring temp = path + trayList[i];\n        HICON hIcon = NULL;\n        Gdiplus::Bitmap bitmap(temp.c_str(), false);\n        bitmap.GetHICON(&amp;hIcon);\n        pair&lt;wstring, HICON&gt; _pair = make_pair(trayList[i], hIcon);\n        m_map_icons.insert(_pair);\n    }\n}\n\nHICON WindowSysTray::getIconFromFile(const wchar_t* iconPath)\n{\n    auto iter = m_map_icons.find(wstring(iconPath));\n    if (iter == m_map_icons.end()) {\n        return NULL;\n    }\n    else {\n        return iter-&gt;second; // ---Issue here---\n    }\n}\n\n...\nhIcon = getIconFromFile(L\"tray.png\");\nif (hIcon)\n{\n    TrayIcon.SetIcon(hIcon);\n}\n...\n</code></pre>\n\n<p>When I invoke <code>getIconFromFile</code> function, it sometimes crashes while returning value at the end of the function: </p>\n\n<blockquote>\n  <p>return iter->second;</p>\n</blockquote>\n\n<p>I verified and make sure that I loaded Icon before by invoking <code>_loadIconFromFiles</code> function.</p>\n\n<p>Does anyone know what is the possible root cause of this issue?</p>\n"}, {"tags": ["c++", "build", "cmake", "cross-platform"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537957588, "post_id": 52515490, "comment_id": 91970645, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9542971/using-cmake-with-multiple-compilers-for-the-same-language\">Using CMake with multiple compilers for the same language</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1537957699, "post_id": 52515490, "comment_id": 91970712, "body": "In CMake project you cannot build executables both for the host and for the target at once. You need to use several <code>cmake</code> invocations (with different toolchains and so)."}], "owner": {"reputation": 51, "user_id": 2433692, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4180e733df5147b6687cd6e024376e54?s=128&d=identicon&r=PG", "display_name": "uday singh", "link": "https://stackoverflow.com/users/2433692/uday-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537968102, "creation_date": 1537957387, "last_edit_date": 1537968102, "question_id": 52515490, "link": "https://stackoverflow.com/questions/52515490/how-to-change-some-cmake-c-flags-for-just-one-executable-in-cmake", "title": "How to change some CMAKE_C_FLAGS for just one executable in CMake?", "body": "<p>I have a CMake project that supports multiple platform combination (arm, powerpc ,x86-64). Native platform is x86-64. </p>\n\n<p>I have toolchain.cmake file for each cross-platform build(for arm and powerpc).\nWhen I give toolcahin.cmake files for cross-platform build  to cmake  everything is working as expected except one thing.</p>\n\n<p>In the project I want to build a particular executable with native build support(that is on x86-64). Since I gave toolchain.cmake file explicitly, so all CMAKE_C_FLAGS are global for all executable in project.</p>\n\n<p>So I want to give toolchain.cmake(say for arm) to cmake and want to build the whole project except one executable on native(x86-64) in one go.\nIs there any way where I can change the complete CMAKE_C_FLAGS and can provide the native one for that particular executable ?</p>\n\n<p>I tried few things as per <a href=\"https://stackoverflow.com/questions/24238937/how-to-change-a-compiler-flag-for-just-one-executable-in-cmake\">How to change a compiler flag for just one executable in CMake?</a> but can't get the solution to this problem</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1537957192, "post_id": 52515358, "comment_id": 91970410, "body": "why does <code>menuStruct</code> have function pointers as members instead declaring methods that are overriden by subclasses?"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1537957279, "post_id": 52515358, "comment_id": 91970466, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">How do function pointers in C work?</a>"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1537957316, "post_id": 52515358, "comment_id": 91970492, "body": "plus you have <code>std::function</code> in <code>c++</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1537958422, "post_id": 52515358, "comment_id": 91971117, "body": "Why are you using a C-ism erzatz of OOP in C++?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1537959237, "post_id": 52515358, "comment_id": 91971626, "body": "@user463035818 There are two clear benefits to not doing the inheritance dance: you can define a new menu without the hassle of defining Yet Another Subclass with overrides that mostly do nothing except forward to another function, and the whole system is defined in one single place instead of spread out over all those subclasses."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1537960558, "post_id": 52515358, "comment_id": 91972369, "body": "@molbdnilo sure, i am not a big fan of using inheritance for everything either, was just trying to find out what was OPs motivation to enter the hassle of using function pointers when inheritance would do as well"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5056232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54fa397f485d1a28f0073c3d6c498d5?s=128&d=identicon&r=PG&f=1", "display_name": "vangde", "link": "https://stackoverflow.com/users/5056232/vangde"}, "edited": false, "score": 0, "creation_date": 1537959988, "post_id": 52515715, "comment_id": 91972053, "body": "It compiles thank you so much. How do i call and pass arguements to those funcrions?       allMenues[2](*leftEdgeSymbol)(TRUE);"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 7, "user_id": 5056232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54fa397f485d1a28f0073c3d6c498d5?s=128&d=identicon&r=PG&f=1", "display_name": "vangde", "link": "https://stackoverflow.com/users/5056232/vangde"}, "edited": false, "score": 0, "creation_date": 1537964846, "post_id": 52515715, "comment_id": 91974942, "body": "@vangde: Usage added."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1537964810, "last_edit_date": 1537964810, "creation_date": 1537958103, "answer_id": 52515715, "question_id": 52515358, "link": "https://stackoverflow.com/questions/52515358/array-of-structs-containing-functions-as-members-c/52515715#52515715", "title": "Array of structs containing functions as members C++", "body": "<p>Syntax would be</p>\n\n<pre><code>struct menuStruct \n{\n   void (*leftEdgeSymbol)(bool);\n   void (*certerScreenSymbol)(bool);\n   void (*rightEdgeSymbol)(bool);\n   void (*buttonFunction)();\n}; \n\nvoid drawLeftArrow(bool show)\n{\n     //Draw the arrow with white colour to show or with black to erase \n}\n\nvoid rightArrow(bool show);\n\n// ...\n\nmenuStruct allMenues[] = \n{\n  {&amp;drawLeftArrow, &amp;drawTempSettingText, &amp;drawRightArrow, &amp;mainMenu1},  //0\n  {&amp;eraseLeftArrow, &amp;drawHumidTargetText, &amp;drawRightArrow, &amp;mainMenu2},  //1\n  {&amp;drawLeftMinusSign, &amp;drawSetTempTarget, &amp;drawRightPlusSign, &amp;subMenu101}  //2\n}\n</code></pre>\n\n<p>and possible usage:</p>\n\n<pre><code>allMenues[1].rightEdgeSymbol(false);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5056232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54fa397f485d1a28f0073c3d6c498d5?s=128&d=identicon&r=PG&f=1", "display_name": "vangde", "link": "https://stackoverflow.com/users/5056232/vangde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 52515715, "answer_count": 1, "score": 0, "last_activity_date": 1537964810, "creation_date": 1537957017, "last_edit_date": 1537957551, "question_id": 52515358, "link": "https://stackoverflow.com/questions/52515358/array-of-structs-containing-functions-as-members-c", "title": "Array of structs containing functions as members C++", "body": "<p>I need an array of structs that is going to be used to draw the elements of the screen based on what is the selected point (which is just a number).</p>\n\n<p>Mainly I'm interested in the correct syntax of declaring a struct that has function pointers as members, creating an array that has elements of that struct type and passing arguments to those functions. Something like the code below but with correct syntax.</p>\n\n<pre><code>struct menuStruct \n{\n   void *leftEdgeSymbol(boolean show);\n   void *certerScreenSymbol(boolean show);\n   void *rightEdgeSymbol(boolean show);\n   void *buttonFunction(void);\n}; \n\n\nmenuStruct allMenues[] = \n{\n  {drawLeftArrow(), drawTempSettingText(), drawRightArrow(), mainMenu1()},  //0\n  {eraseLeftArrow(), drawHumidTargetText(), drawRightArrow(), mainMenu2()},  //1\n  {drawLeftMinusSign(), drawSetTempTarget(), drawRightPlusSign(), subMenu101()  //2\n}\n\n\n\n\nvoid drawLeftArrow(boolean show)\n{\n //Draw the arrow with white colour to show or with black to erase \n}\n\nvoid rightArrow(boolean show)\n{\n //Draw the arrow with white colour to show or with black to erase \n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 3, "last_activity_date": 1537971111, "last_edit_date": 1537971111, "creation_date": 1537957574, "answer_id": 52515556, "question_id": 52515350, "link": "https://stackoverflow.com/questions/52515350/extern-declarations-and-following-defintions-of-class-template-instances-with/52515556#52515556", "title": "`extern` declarations and following defintions of class template instances with and without parameter lists", "body": "<p>clang is right in all five of your snippets. </p>\n\n<blockquote>\n<pre><code>extern X&lt;&gt; foo; // type: X&lt;&gt;\nX foo; // CTAD =&gt; type: X&lt;&gt;\n</code></pre>\n</blockquote>\n\n<p><code>foo</code> is only a declaration of <code>foo</code>, which is then later redeclared with the same type, so gcc and MSVC are wrong to reject this case.</p>\n\n<blockquote>\n<pre><code>extern X foo; // invalid\nX&lt;&gt; foo; // ok =&gt; type: X&lt;&gt;\n</code></pre>\n</blockquote>\n\n<p>gcc is wrong here. <code>foo</code> is not a definition, only a declaration without an initializer, and thus isn't a <a href=\"http://eel.is/c++draft/dcl.init#22\" rel=\"nofollow noreferrer\">initializing declaration</a> as is required for CTAD (<a href=\"http://eel.is/c++draft/dcl.type.class.deduct\" rel=\"nofollow noreferrer\">[dcl.class.type.deduct]</a>).</p>\n\n<blockquote>\n<pre><code>extern X&lt;&gt; foo; // type: X&lt;&gt;\nX&lt;&gt; foo; // type: X&lt;&gt;\n</code></pre>\n</blockquote>\n\n<p>This is similar to 1), only that CTAD is not required. As the second <code>foo</code> is just a redeclaration of <code>foo</code> and defines it at the same time with the same type, it's valid.</p>\n\n<blockquote>\n<pre><code>X foo;\n</code></pre>\n</blockquote>\n\n<p>MSVC is wrong here, the standard doesn't place any restriction on CTAD at global scope.</p>\n\n<p>In conclusion, we can infer that your original snippet is ill-formed because you are using CTAD for a variable that is not defined.</p>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 52515556, "answer_count": 1, "score": 2, "last_activity_date": 1537971111, "creation_date": 1537956995, "last_edit_date": 1537957353, "question_id": 52515350, "link": "https://stackoverflow.com/questions/52515350/extern-declarations-and-following-defintions-of-class-template-instances-with", "title": "`extern` declarations and following defintions of class template instances with and without parameter lists", "body": "<p>Consider following code:</p>\n\n<pre><code>template &lt;typename T = int&gt; struct X {};\nextern X foo;\nX foo;\n</code></pre>\n\n<p><kbd><a href=\"https://gcc.godbolt.org/z/UWsEYd\" rel=\"nofollow noreferrer\">Live on gcc.godbolt.org</a></kbd></p>\n\n<p>I would expect it to be well-formed, but GCC, Clang and MSVC reject it with following error messages:</p>\n\n<p>GCC 8.2 (with <code>-std=c++17 -Wall -Wextra -pedantic-errors</code>):</p>\n\n<blockquote>\n<pre><code>&lt;source&gt;:3:3: error: conflicting declaration 'X foo'\n X foo;\n   ^~~\n&lt;source&gt;:2:10: note: previous declaration as 'X&lt;int&gt; foo'\n extern X foo;\n          ^~~\n</code></pre>\n</blockquote>\n\n<p>Clang 7.0.0 (with <code>-std=c++17 -Wall -Wextra -pedantic-errors</code>):</p>\n\n<blockquote>\n<pre><code>&lt;source&gt;:2:10: error: declaration of variable 'foo' with deduced type 'X' requires an initializer\nextern X foo;\n         ^\n</code></pre>\n</blockquote>\n\n<p>MSVC Pre 2018 (with <code>/std:c++latest</code>):</p>\n\n<blockquote>\n<pre><code>&lt;source&gt;(2): error C2641: cannot deduce template argument for 'X'\n&lt;source&gt;(3): error C2133: 'foo': unknown size\n&lt;source&gt;(3): error C2641: cannot deduce template argument for 'X'\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Now the interesting part.</p>\n\n<p>This snippet is accepted by Clang but rejected by GCC &amp; MSVC:</p>\n\n<pre><code>extern X&lt;&gt; foo;\nX foo;\n</code></pre>\n\n<p>And this snippet is accepted by GCC but rejected by Clang &amp; MSVC:</p>\n\n<pre><code>extern X foo;\nX&lt;&gt; foo;\n</code></pre>\n\n<p>This one is accepted by all three compilers:</p>\n\n<pre><code>extern X&lt;&gt; foo;\nX&lt;&gt; foo;\n</code></pre>\n\n<p>And finally this one is accepted by GCC &amp; Clang but rejected by MSVC:</p>\n\n<pre><code>X foo;\n</code></pre>\n\n<p><strong>What's going on here? Which of these five snippets are correct?</strong></p>\n"}, {"tags": ["c++", "spi", "mbed"], "comments": [{"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 1, "creation_date": 1538036684, "post_id": 52515278, "comment_id": 92004406, "body": "(Not specific to your HW, as I don&#39;t know it) Is there any SPI FIFO? Can it be driven with DMA? 20us delay is quite long - are library abstractions at fault maybe? 32-bit transfers would also make sense - but it appears there is missing HW or SW support."}, {"owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "reply_to_user": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1538038546, "post_id": 52515278, "comment_id": 92005421, "body": "There&#39;s not a FIFO on the board but it can be driven by DMA so that might be the way forward. It seems that the profiles of mbed OS provides a very-much generic wrapper and heavily limits SPI functionality despite the functionality being available in HW. So, I guess, if this issue does turn out to be a bottleneck, a custom SPI driver is the way forward!"}], "owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537956726, "creation_date": 1537956726, "question_id": 52515278, "link": "https://stackoverflow.com/questions/52515278/delay-between-spi-write-calls", "title": "Delay between SPI.write() calls", "body": "<p>I'm using a RedBearLabs Blend V2 to communicate with a SPI peripheral. Everything is functioning correctly at this point and I am receiving the expected data using <code>SPI.write()</code> and catching the return value. The SPI bus is running at 1 MHz in mode 0.</p>\n\n<p>The image below shows the SPI bus connected to a scope. Trace 1 is SCLK, 2 is MISO, 3 is MOSI and 4 is CS. As you can see, I have 4 bursts of SCLK whilst CS is low, each 8 bits in length with a delay of approximately 20 \u00b5s in between each burst. <strong><em>Ideally</em>, I need to completely alleviate this 20 \u00b5s delay and have <em>1 SCLK burst of 32 cycles</em>.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/lQuL3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lQuL3.png\" alt=\"Scope grab of SPI bus\"></a></p>\n\n<p>The below code is how I am currently achieving what is seen in the scope grab.</p>\n\n<pre><code>int16_t MAX1300::sampleChannel(uint8_t channel, uint8_t inputMode, uint8_t adcMode) \n{    \n    int16_t sample;\n    int8_t hi = 0;\n    int8_t lo = 0;\n\n    MAX1300::InputWord_u word;\n    word.bits.start = 0b1;\n\n    if (inputMode == MAX1300::SINGLE_ENDED) {\n        word.bits.select = (Channels_se_e)channel;    \n    } else {\n        word.bits.select = (Channels_dif_e)channel;   \n    }   \n    word.bits.payload = 0b0000;\n\n    if (adcMode == MAX1300::EXT_CLK) {\n        m_cs = 0;\n        m_spiBus.write(word.all);\n        m_spiBus.write(7);\n        hi = m_spiBus.write(0);\n        lo = m_spiBus.write(0);\n        m_cs = 1; \n    }\n\n    sample = ((int16_t)hi &lt;&lt; 8) | lo;  \n    return sample; \n}\n</code></pre>\n\n<p>So far I have tried setting <code>SPI.format(16, 0)</code> with the intention of having 2 SCLK bursts of 16 cycles, however the SPI bus no longer functions if I do this. The same happens if I use <code>SPI.transfer()</code> with 32-bit buffers - no SPI bus.</p>\n\n<p>I am able to increase the frequency of the bus, thus reducing the delay between each SCLK burst, however this is not really a suitable solution due to the end-application for this device.</p>\n\n<p>What am I doing wrong here, or is what I am attempting to do just not possible with this hardware/firmware combination?</p>\n\n<p>Thanks, Adam</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1537956736, "post_id": 52515268, "comment_id": 91970150, "body": "search for &quot;enum to string&quot;. There are lots of duplicates around"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537956907, "post_id": 52515268, "comment_id": 91970250, "body": "Not directly, once compiled the enum values are simply integer variables. It&#39;s the same as variable names. You cannot access to variable names and enum names from your compiled program because they simple don&#39;t exist anymore in the compiled program."}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 1971806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B0Dhv.jpg?s=128&g=1", "display_name": "corsel", "link": "https://stackoverflow.com/users/1971806/corsel"}, "is_accepted": false, "score": 0, "last_activity_date": 1537967582, "creation_date": 1537967582, "answer_id": 52518626, "question_id": 52515268, "link": "https://stackoverflow.com/questions/52515268/user-input-to-get-enumeration-value/52518626#52518626", "title": "User input to get enumeration value", "body": "<p>If you absolutely positively have to do this, here's an overkill solution: </p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\ntypedef std::map&lt;std::string, int&gt; MyMapType;\n\nMyMapType myMap = \n{\n  {\"RED\", 0}, \n  {\"GREEN\", 1}, \n  {\"BLUE\", 2}\n};\n\nint getIntVal(std::string arg)\n{\n  MyMapType::const_iterator result = myMap.find(arg);\n  if (result == myMap.end())\n    return -1;\n  return result-&gt;second;\n}\n\nint main()\n{\n  std::cout &lt;&lt; getIntVal(\"RED\") &lt;&lt; std::endl;\n  std::cout &lt;&lt; getIntVal(\"GREEN\") &lt;&lt; std::endl;\n  std::cout &lt;&lt; getIntVal(\"BLUE\") &lt;&lt; std::endl;\n  std::cout &lt;&lt; getIntVal(\"DUMMY STRING\") &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>gives the result:</p>\n\n<pre><code>0\n1\n2\n-1\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 8011179, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/qHEyI.jpg?s=128&g=1", "display_name": "Thijmen", "link": "https://stackoverflow.com/users/8011179/thijmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "closed_date": 1538042492, "answer_count": 1, "score": 0, "last_activity_date": 1537967582, "creation_date": 1537956691, "question_id": 52515268, "link": "https://stackoverflow.com/questions/52515268/user-input-to-get-enumeration-value", "closed_reason": "Duplicate", "title": "User input to get enumeration value", "body": "<p>Say I have the following code:</p>\n\n<pre><code>int main()\n{\n    enum colors { red = 0, green = 1, blue = 2 };\n    int myvar = instructions::red;\n    cout &lt;&lt; myvar;\n}\n</code></pre>\n\n<p>This will (of course) output '0'.</p>\n\n<p>However, is it in any way possible to obtain the color name via user input and store the corresponding number in 'myvar'?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537956358, "post_id": 52515025, "comment_id": 91969910, "body": "Three&#39;s <a href=\"https://stackoverflow.com/a/20146621/817643\">this answer</a>. I think it&#39;s a quality dup on account of that. Would you say so?"}, {"owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "edited": false, "score": 0, "creation_date": 1537956504, "post_id": 52515025, "comment_id": 91970008, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18515183/c-overloaded-virtual-function-warning-by-clang\">c++ overloaded virtual function warning by clang?</a>"}, {"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537958162, "post_id": 52515025, "comment_id": 91970976, "body": "@StoryTeller @Ville-Valtteri I saw that post but actually it&#39;s not a duplicate, as here I do want to hide the overloads. So <code>using Base1::func</code> is of no help here."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537958330, "post_id": 52515025, "comment_id": 91971079, "body": "@Wayee - I linked to a specific answer. To get the best of SO one must often read beyond the accepted answer."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1537960816, "post_id": 52515025, "comment_id": 91972516, "body": "This may be a design problem. If the function isn&#39;t needed for this case, why is it there? That base class might be a mishmash of what should be two distinct bases."}, {"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1537961874, "post_id": 52515025, "comment_id": 91973097, "body": "@Pete Becker, actually in my real case, the base classes are the instances of the observer pattern. The base class of the observer defined some generic functions which are specifically implemented in each observer. Then the user class derives from several different observers. To answer your question, the function needs to be there in the base class because it&#39;s going to be used in most cases. But in some occasional cases I just want to override this function for some observers but not the others. Hope this is clear."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1537962061, "post_id": 52515025, "comment_id": 91973223, "body": "@Wayee -- that misses my point. If it&#39;s only needed in some (or most) cases, that suggests that there are two distinct base classes, not one. One base class should that function and one shouldn&#39;t. The former might well be derived from the latter."}, {"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537962284, "post_id": 52515025, "comment_id": 91973368, "body": "@Story Teller: The specific answer you posed would indeed get rid of the warning. But I would need to do it in thousands of different places. Is there a more generic way?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537962669, "post_id": 52515025, "comment_id": 91973601, "body": "Define &quot;thousands of places&quot;? The pragma can be set on the whole file, and not per function. If that still isn&#39;t generic enough, I second Pete. You have a deeper issue you need to resolve. You want to say &quot;these thousands of functions are okay, but these thousands of functions are not&quot;. How exactly should any automatic tool tell them apart without your help?"}, {"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537971905, "post_id": 52515025, "comment_id": 91979619, "body": "@Story Teller: Could you have a look of my edited question? It now better shows the real use case. The base class in the real problem is actually one template class. And in the derived ones I inherit from it with different template types, and override the virtual member only for some types, but not all."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537974084, "post_id": 52515025, "comment_id": 91981176, "body": "@It doesn&#39;t change the suggested solution at all. The hiding happens in the deriving class, not the base. So it makes no difference if the base is a template specialization."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1537977495, "post_id": 52515025, "comment_id": 91983250, "body": "Providing <code>private: using Base&lt;Type2&gt;::func;</code> in the derived class will squelch the warning, and explicitly show the intent of hiding the function."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537956435, "post_id": 52515148, "comment_id": 91969960, "body": "The OP doesn&#39;t want to unhide it. Their hiding is intentional. This answer can and will alter results of overload resolution. So how is this an answer to the question?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537957045, "post_id": 52515148, "comment_id": 91970321, "body": "@StoryTeller: Missed one sentence from OP :(, amended to give &quot;solution&quot;."}, {"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "edited": false, "score": 0, "creation_date": 1537958419, "post_id": 52515148, "comment_id": 91971115, "body": "The first half of this answer does not solve the situation in the question, as we intend to hide the overloads. The second half would work, but as mentioned in the question we got thousands of uses of this situation, adding <code>#pragma</code> for each of them won&#39;t be ideal. I&#39;m more thinking if we have a design fault for this case."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1537969141, "post_id": 52515148, "comment_id": 91977810, "body": "If you have always the same 2 bases, you can create that intermediate class from which other inherit from. Then only that one requires the <code>#pragma</code>."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1537956995, "last_edit_date": 1537956995, "creation_date": 1537956330, "answer_id": 52515148, "question_id": 52515025, "link": "https://stackoverflow.com/questions/52515025/hides-overloaded-virtual-functions-warning-when-deriving-from-multiple-templat/52515148#52515148", "title": "&quot;hides overloaded virtual functions&quot; warning when deriving from multiple templated base classes", "body": "<p>The safe way is to unhide the method is with <code>using</code>:</p>\n\n<pre><code>class Derived : public Base1, public Base2\n{\npublic:\n    using Base2::func;\n    void func(int) override {}\n};\n</code></pre>\n\n<p>With that following works as expected:</p>\n\n<pre><code>Derived d;\nd.func(4.2f); // call correctly Base2::func(float) and not Derived::func(int).\n</code></pre>\n\n<p>To silent the warning for intentional hiding, there are still the compiler specific way:</p>\n\n<pre><code>class Derived : public Base1, public Base2\n{\npublic:\n\n#pragma clang diagnostic push\n# pragma clang diagnostic ignored \"-Woverloaded-virtual\"\n    void func(int) override {}\n#pragma clang diagnostic pop\n};\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>Derived d;\nd.func(4.2f); // call Derived::func(int).\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "edited": false, "score": 0, "creation_date": 1537962068, "post_id": 52515783, "comment_id": 91973228, "body": "The example in the question was largely simplified and abstracted from the real use case. Please see my comment to answer @Pete Becker below the question. I&#39;m aware this might be a design issue, but I&#39;m out of ideas about how to solve it."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "edited": false, "score": 0, "creation_date": 1537970198, "post_id": 52515783, "comment_id": 91978481, "body": "@Wayee - I agree with Pete Becker.   He&#39;s making the same point I am about your design being flawed.   We&#39;ve offered different options to address that design concern, but our point is the same - the problem is your design.   Shutting up the compiler is not a solution.   Redesign in a manner that does away with the concern is."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1537958329, "creation_date": 1537958329, "answer_id": 52515783, "question_id": 52515025, "link": "https://stackoverflow.com/questions/52515025/hides-overloaded-virtual-functions-warning-when-deriving-from-multiple-templat/52515783#52515783", "title": "&quot;hides overloaded virtual functions&quot; warning when deriving from multiple templated base classes", "body": "<p>I actually wouldn't use multiple inheritance in this case, since it is still possible to call <code>Base2::func()</code> with the help of a type conversion (e.g. convert <code>Derived *</code> implicitly or explicitly to a <code>Base2 *</code>), despite it being hidden and not in scope of <code>Derived</code>.  </p>\n\n<p>Instead, I would do </p>\n\n<pre><code>class Derived : public Base1\n{\n   private:\n        Base2 base2;\n\n   public:\n      void func(int) override {};\n};\n</code></pre>\n\n<p>which will mean that <code>func(float)</code> is not within the scope of <code>Derived</code> at all.   Only member functions of <code>Derived</code> (or friends) would be able to call <code>base2.func(some_float)</code>.</p>\n\n<p>This does prevent implicit conversion of a <code>Derived *</code> to a <code>Base2 *</code> (or <code>Derived &amp;</code> to a <code>Base2 &amp;</code>).    I'd argue that if you need such implicit conversions, then your design is broken, since that would also permit (indirectly) calling <code>Base2::func()</code> for an instance of <code>Derived</code>.    Which, presumably if you want it hidden, you wish to avoid ......    Generally speaking, if you find yourself in a contradictory discussion in design (you want X, but achieving X has an unwanted effect Y) that's a sign of a design flaw.</p>\n"}], "owner": {"reputation": 339, "user_id": 6289334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-zHSnA3020Ik/AAAAAAAAAAI/AAAAAAAAAIU/W07_YWYpwXs/photo.jpg?sz=128", "display_name": "Wayee", "link": "https://stackoverflow.com/users/6289334/wayee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2417, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1537971629, "creation_date": 1537955979, "last_edit_date": 1537971629, "question_id": 52515025, "link": "https://stackoverflow.com/questions/52515025/hides-overloaded-virtual-functions-warning-when-deriving-from-multiple-templat", "title": "&quot;hides overloaded virtual functions&quot; warning when deriving from multiple templated base classes", "body": "<p>Suppose the code below:</p>\n\n<p>Base.h</p>\n\n<pre><code>template &lt;class T&gt;\nclass Base\n{\npublic:\n    virtual void func(T value) {}\n};\n</code></pre>\n\n<p>Derived.h</p>\n\n<pre><code>class Derived : public Base&lt;Type1&gt;\n              , public Base&lt;Type2&gt;\n{\npublic:\n    void func(Type1 object) override {}\n};\n</code></pre>\n\n<p>Basically I have a templated class with a member function that takes the argument of the template type. The derived class derive from the base with two different class type, and override the function of one of them. </p>\n\n<p>With the Clang compiler, it would generate a <code>hides overloaded virtual functions</code> warning, which is actually intended here, i.e. I do not need <code>Base2::func(float)</code> in the derived class.</p>\n\n<p>I am aware that by appending <code>-Wno-overloaded-virtual</code> to the compiler flags would mute this warning but I'm not sure that's the safe thing to do, as in other cases this warning may be valid.</p>\n\n<p>In my project I have thousands of this case (i.e. many derived classes with different class types). Are there any good suggestion over it so the warning wouldn't be present for this situation but keep it for others?</p>\n"}, {"tags": ["c++", "opengl", "glsl"], "comments": [{"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1537966624, "post_id": 52515023, "comment_id": 91976096, "body": "Never use the <code>memoryBarrierBuffer()</code> myself, but according to the documentation, it says that the barrier ensures that all changes performed before the memory barrier will be visible in subsequent stages, meaning it wont have the effect for the current stage (if I understood correctly). Since you have it in a loop, I guess you expect it to sync the threads for the next iteration? Doc: <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/memoryBarrierBuffer.xhtml\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenGL-Refpages/gl4/html/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1537973888, "creation_date": 1537973888, "answer_id": 52520746, "question_id": 52515023, "link": "https://stackoverflow.com/questions/52515023/opengl-shader-storage-buffer-memorybarrierbuffer/52520746#52520746", "title": "OpenGL Shader Storage Buffer / memoryBarrierBuffer", "body": "<p>OK, let's get the obvious bug out of the way:</p>\n\n<blockquote>\n<pre><code>for(int i = 0; i &lt; lights.numLights; i++)\n{\n    tspace.tangentProperties[index].TangentLightPos.xyz = TBN * lights.properties[index].lightPosition.xyz;\n    tspace.tangentProperties[index].TangentViewPos.xyz  = TBN * camPos;\n    tspace.tangentProperties[index].TangentFragPos.xyz  = TBN * vec3(worldPosition);\n    memoryBarrierBuffer();\n}\n</code></pre>\n</blockquote>\n\n<p><code>index</code> never changes in this loop, so you're only writing a single light, and you're only writing the <em>last</em> lights' values. All other lights will have garbage/undefined values.</p>\n\n<p>So you probably meant <code>i</code> rather than <code>index</code>.</p>\n\n<p>But that's only the beginning of the problem. See, if you make that change, you get this:</p>\n\n<pre><code>for(int i = 0; i &lt; lights.numLights; i++)\n{\n    tspace.tangentProperties[i].TangentLightPos.xyz = TBN * lights.properties[i].lightPosition.xyz;\n    tspace.tangentProperties[i].TangentViewPos.xyz  = TBN * camPos;\n    tspace.tangentProperties[i].TangentFragPos.xyz  = TBN * vec3(worldPosition);\n}\nmemoryBarrierBuffer();\n</code></pre>\n\n<p>Note that the barrier is outside the loop.</p>\n\n<p>That creates a new problem. This code will have every vertex shader invocation writing to the <em>same memory buffer</em>. SSBOs, after all, are not VS <em>output</em> variables. Output variables are stored as part of a vertex. The rasterizer then interpolates this vertex data across the primitive as it rasterizes it, which provides <a href=\"https://www.khronos.org/opengl/wiki/Fragment\" rel=\"noreferrer\">the input values</a> for the FS. So one VS cannot stomp on the output variables of another VS.</p>\n\n<p>That doesn't happen with SSBOs. Every VS is acting on the <em>same</em> SSBO memory. So if they write to the same indices of the same array, they're writing to the same memory address. Which is a race condition (since there can be no synchronization between sibling invocations) and therefore undefined behavior.</p>\n\n<p>So, the <em>only way</em> what you're trying to do could possibly work is if your buffer has <code>numLights</code> entries for each vertex <em>in the entire scene</em>.</p>\n\n<p>This is a fundamentally unreasonable amount of space. Even if you could get it down to just the number of vertices in a particular draw call (which is doable, but I'm not going to say how), you would still be behind in performance. Every FS invocation will have to perform reads of 144 bytes of data <em>for each light</em> (3 table entries, one for each vertex of the triangle), linearly interpolate those values, and then do lighting computations.</p>\n\n<p>It would be faster for you to just pass the TBN matrix as a VS output and do the matrix multiplies in the FS. Yes, that's a lot of matrix multiplies, but GPUs are really fast at matrix multiplies, and are <em>really slow</em> at reading memory.</p>\n\n<p>Also, reconsider whether you <em>need</em> the tangent-space fragment position. Generally speaking, you never do.</p>\n"}], "owner": {"reputation": 167, "user_id": 7238591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4WsBz.png?s=128&g=1", "display_name": "Primemaster", "link": "https://stackoverflow.com/users/7238591/primemaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 52520746, "answer_count": 1, "score": 2, "last_activity_date": 1537973888, "creation_date": 1537955971, "question_id": 52515023, "link": "https://stackoverflow.com/questions/52515023/opengl-shader-storage-buffer-memorybarrierbuffer", "title": "OpenGL Shader Storage Buffer / memoryBarrierBuffer", "body": "<p>I currently created two SSBO's to handle some lights because the VS-FS <code>in</code> <code>out</code> interface can't handle a lot of lights (Im using forward shading).\nFor the first one I only pass the values to the shader (basically a read only one) [cpp]:</p>\n\n<pre><code>struct GLightProperties\n{\n    unsigned int numLights;\n    LightProperties properties[];\n};\n\n...\n\nglp = (GLightProperties*)malloc(sizeof(GLightProperties) + sizeof(LightProperties) * lastSize);\n\n...\n\nglGenBuffers(1, &amp;ssbo);\nglBindBuffer(GL_SHADER_STORAGE_BUFFER, ssbo);\nglBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(GLightProperties) + sizeof(LightProperties) * lastSize, glp, GL_DYNAMIC_COPY);\nglBindBufferBase(GL_SHADER_STORAGE_BUFFER, 1, ssbo);\nglBindBuffer(GL_SHADER_STORAGE_BUFFER, 0);\n</code></pre>\n\n<p>Shader file [GLSL]:</p>\n\n<pre><code>layout(std430, binding = 1) buffer Lights\n{\n    uint numLights;\n    LightProperties properties[];\n}lights;\n</code></pre>\n\n<p>So this first SSBO turns out to work fine. However, in the other one, which purpose is VS-FS interface, has some issues:</p>\n\n<pre><code>glBindBuffer(GL_SHADER_STORAGE_BUFFER, ssbo2);\nglBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(float) * 4 * 3 * lastSize, nullptr, GL_DYNAMIC_COPY);\nglBindBuffer(GL_SHADER_STORAGE_BUFFER, 0);\n</code></pre>\n\n<p>GLSL:</p>\n\n<pre><code>struct TangentProperties\n{\n    vec4 TangentLightPos;\n    vec4 TangentViewPos;\n    vec4 TangentFragPos;\n};\n\nlayout(std430, binding = 0) buffer TangentSpace\n{\n    TangentProperties tangentProperties[];\n}tspace;\n</code></pre>\n\n<p>So here you notice I pass <code>nullptr</code> to the <code>glBufferData</code> because the vs will write in the buffer and the fs will read its contents.\nLike so in the VS Stage:</p>\n\n<pre><code>for(int i = 0; i &lt; lights.numLights; i++)\n{\n    tspace.tangentProperties[index].TangentLightPos.xyz = TBN * lights.properties[index].lightPosition.xyz;\n    tspace.tangentProperties[index].TangentViewPos.xyz  = TBN * camPos;\n    tspace.tangentProperties[index].TangentFragPos.xyz  = TBN * vec3(worldPosition);\n    memoryBarrierBuffer();\n}\n</code></pre>\n\n<p>After this the FS reads the values, which turn out to be just garbage. Am I doing something wrong with memory barriers?</p>\n\n<p>The output turns out this way:\n<a href=\"https://i.stack.imgur.com/5Z68n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Z68n.png\" alt=\"Pixels bugging\"></a></p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8722728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f600946f015d008c38a470f0cb6f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mac_P", "link": "https://stackoverflow.com/users/8722728/mac-p"}, "edited": false, "score": 1, "creation_date": 1537960402, "post_id": 52515829, "comment_id": 91972283, "body": "I figure it out literally just before your answer, but your solution is much clearer and faster in execution, thanks!."}], "tags": [], "owner": {"reputation": 821, "user_id": 7120215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fd56db37a030fa5ac42d45f06df3f5b?s=128&d=identicon&r=PG&f=1", "display_name": "Gurushant", "link": "https://stackoverflow.com/users/7120215/gurushant"}, "is_accepted": true, "score": 2, "last_activity_date": 1537958467, "creation_date": 1537958467, "answer_id": 52515829, "question_id": 52515020, "link": "https://stackoverflow.com/questions/52515020/qtablewidget-to-multiple-files/52515829#52515829", "title": "QTableWidget to multiple files", "body": "<p>You can write like this. </p>\n\n<pre><code>QList&lt;QTableWidgetItem *&gt; ItemList \n/.../\n\nfor(QString str : Shapes){\n    ItemList = ui-&gt;tableWidget-&gt;findItems(itm, Qt::MatchExactly); // Get the matching list\n\n    if(ItemList.isEmpty(){\n        continue; // If shape does not exist in table skip the iteration\n    }\n\n    QFile mFile(str + \".txt\");\n    if(!mFile.open(QFile::ReadWrite){\n        return; // This should not happen ; this is error\n    }\n\n    for(QTableWidgetItem *item : ItemList){\n        int row = item-&gt;row(); \n        int col = item-&gt;column()+1; // since it is neighboring cell\n        QString Value = ui-&gt;tableWidget-&gt;item(row,col)-&gt;text();\n        mFile.write(Value.toUtf8()); // You can change the way in which values are written\n    }\n\n    mFile.flush();\n    mFile.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8722728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f600946f015d008c38a470f0cb6f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mac_P", "link": "https://stackoverflow.com/users/8722728/mac-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52515829, "answer_count": 1, "score": 1, "last_activity_date": 1537958467, "creation_date": 1537955965, "question_id": 52515020, "link": "https://stackoverflow.com/questions/52515020/qtablewidget-to-multiple-files", "title": "QTableWidget to multiple files", "body": "<p>I\u2019ve got QTableWidget with data like this:\n<a href=\"https://i.stack.imgur.com/gWFuT.png\" rel=\"nofollow noreferrer\">table.png</a>\nThe table can contains only names from the QList: </p>\n\n<pre><code>QList&lt;QString&gt; shapes {  \"Triangle\", \"Circle\", \"Trapeze\", \"Square\", \"Rectangle\", \"Diamond\" };\n</code></pre>\n\n<p>with random int values in the neighboring cell.</p>\n\n<p>Table can contain all \"shapes\" or only a part of it (like in the example).</p>\n\n<p>I try to create separate file for each shape form the table and write down corresponding int values to them.\nTo achieve this I wrote something like that:</p>\n\n<pre><code>QList&lt;QTableWidgetItem *&gt; ItemList \n/.../\nfor(int i = 0; i &lt; rows; ++i)\n{\n    for(int i = 0; i&lt;columns; ++i)\n    {\n        foreach(QString itm, shapes )\n        {\n            ItemList = ui-&gt;tableWidget-&gt;findItems(itm, Qt::MatchExactly); \n            QFile mFile(itm + \".txt\");\n\n            if(mFile.open(QFile::ReadWrite))\n            {\n                for(int i = 0; i &lt; ItemList.count(); ++i)\n                {\n                    int rowNR = ItemList.at(i)-&gt;row();\n                    int columnNR = ItemList.at(i)-&gt;column();\n                    out &lt;&lt; \"Values = \" &lt;&lt; ui-&gt;tableWidget-&gt;item(rowNR, columnNR+1)-&gt;text() &lt;&lt; endl;\n                }\n            }   \n        }\n            mFile.flush();\n            mFile.close();\n    }\n}\n</code></pre>\n\n<p>Files are created for every item from the QList \u2013 if the shape from the QList is not in the table, an empty file is created.</p>\n\n<p>How to create files only on the basis of available names in the table?</p>\n"}, {"tags": ["c++", "c", "gcc", "gcc-warning"], "comments": [{"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "edited": false, "score": 0, "creation_date": 1537956007, "post_id": 52514963, "comment_id": 91969711, "body": "@unwind Can you answer this question? Thank you very much."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537956473, "post_id": 52514963, "comment_id": 91969990, "body": "Can it? Only the first syntax is documented!"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537956542, "post_id": 52514963, "comment_id": 91970033, "body": "@JanHudec Yes, it can."}, {"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537957603, "post_id": 52514963, "comment_id": 91970659, "body": "@JanHudec you mean __attribute((unused)) is non-existent?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1537962436, "post_id": 52514963, "comment_id": 91973470, "body": "There is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/Attribute-Syntax.html#Attribute-Syntax\" rel=\"nofollow noreferrer\">manual</a> you can find to clarify these things. Yes, the difference is that <code>__attribute</code> is just a mis-spelling of the correct <code>__attribute__</code>."}, {"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "edited": false, "score": 0, "creation_date": 1537965318, "post_id": 52514963, "comment_id": 91975249, "body": "__attribute((unused)) is also take effect in build. It should not be spelling mistake."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537989095, "post_id": 52514963, "comment_id": 91988857, "body": "@Xiaoyao, it might be #define&#39;d somewhere to the correct form. But the manual does not define it, so whatever it does, it is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1538030275, "creation_date": 1538030275, "answer_id": 52530895, "question_id": 52514963, "link": "https://stackoverflow.com/questions/52514963/the-difference-between-attribute-unused-and-attributeunused-in-gcc/52530895#52530895", "title": "The difference between __attribute__((unused)) and __attribute((unused)) in GCC", "body": "<p>In the GCC repository, in the file <a href=\"https://github.com/gcc-mirror/gcc/blob/b5d1989793d030cedaa0afee81fc5e7bb4021dc9/gcc/c-family/c-common.c\" rel=\"nofollow noreferrer\">c-common.c</a>, the array <code>c_common_reswords</code> of the type <code>struct c_common_resword</code> is defined.</p>\n\n<p>In the array, you will find the following elements:  </p>\n\n<pre><code> { \"__attribute\",   RID_ATTRIBUTE,  0 },\n { \"__attribute__\", RID_ATTRIBUTE,  0 },\n</code></pre>\n\n<p>And <code>RID_ATTRIBUTE</code> is defined in <a href=\"https://github.com/gcc-mirror/gcc/blob/b5d1989793d030cedaa0afee81fc5e7bb4021dc9/gcc/c-family/c-common.h\" rel=\"nofollow noreferrer\">c-common.h</a> in the <code>enum rid</code> in the <code>/* C extensions */</code> section.</p>\n\n<p>So <code>__attribute</code> and <code>__attribute__</code> are the same.</p>\n"}], "owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 52530895, "answer_count": 1, "score": 2, "last_activity_date": 1538030275, "creation_date": 1537955778, "last_edit_date": 1537956155, "question_id": 52514963, "link": "https://stackoverflow.com/questions/52514963/the-difference-between-attribute-unused-and-attributeunused-in-gcc", "title": "The difference between __attribute__((unused)) and __attribute((unused)) in GCC", "body": "<p><code>__attribute__((unused))</code> and <code>__attribute((unused))</code> can mark variables as unused to avoid unused warning.</p>\n\n<p>What is the difference between them\uff1f </p>\n"}, {"tags": ["c++", "sizeof", "sfinae", "c++03", "decltype"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1537961434, "post_id": 52514893, "comment_id": 91972852, "body": "Why do you put <code>, 0</code> inside <code>sizeof</code>? Do you need it in this particular example?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1537961602, "post_id": 52514893, "comment_id": 91972937, "body": "@Evg: no need for that, removed."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1537961776, "post_id": 52514893, "comment_id": 91973040, "body": "<code>sfinaer</code> is a nice name."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1537962465, "post_id": 52514893, "comment_id": 91973489, "body": "Thinking about your question... if the expression is a bit-field, you&#39;ll need <code>, 0</code> in <code>sizeof</code>."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1538027498, "creation_date": 1538027498, "answer_id": 52530260, "question_id": 52514893, "link": "https://stackoverflow.com/questions/52514893/is-this-a-valid-way-of-performing-expression-sfinae-in-c03/52530260#52530260", "title": "Is this a valid way of performing &quot;Expression SFINAE&quot; in C++03?", "body": "<p>Expression SFINAE is a bit gray. C++03 basically said nothing on the subject. It neither explicitly banned it nor explicitly allowed it. Contemporary implementations did not permit such constructs because it caused substantial implementation complexity and it's unclear whether it's meant to be allowed, and CWG was <a href=\"https://wg21.link/CWG339\" rel=\"nofollow noreferrer\">at one point</a> leaning towards banning it (see the April, 2003 note) before it eventually <a href=\"https://wg21.link/n2634\" rel=\"nofollow noreferrer\">reversed course</a>, partially in light of <code>decltype</code> and <code>constexpr</code> that were added to C++11 (see the introduction to N2634).</p>\n\n<p>This also all happened well before CWG started explicitly marking the DR status of issues whose resolutions are meant to apply retroactively.</p>\n\n<p>I think the best advice here is simply \"ask your compiler vendor\". A compiler that supports expression SFINAE in its C++11 mode is unlikely to tear out that support in C++03 mode (the vendor may treat CWG 339 as a defect report and apply it retroactively, or consider it as an extension). OTOH, a compiler that never supported C++11 is unlikely to invest the substantial costs necessary for expression SFINAE to work (indeed, it did not work in a certain major compiler <em>cough</em> until relatively recently). I also suspect that a place still stuck with an 15-year-old language is unlikely to use the modern toolchains necessary for such support.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 3, "accepted_answer_id": 52530260, "answer_count": 1, "score": 9, "last_activity_date": 1538027498, "creation_date": 1537955600, "last_edit_date": 1537961594, "question_id": 52514893, "link": "https://stackoverflow.com/questions/52514893/is-this-a-valid-way-of-performing-expression-sfinae-in-c03", "title": "Is this a valid way of performing &quot;Expression SFINAE&quot; in C++03?", "body": "<p>In C++11, it is easy to SFINAE on whether or not an expression is valid. As an example, imagine checking if something is streamable:</p>\n\n<pre><code>template &lt;typename T&gt;\nauto print_if_possible(std::ostream&amp; os, const T&amp; x) \n    -&gt; decltype(os &lt;&lt; x, void());\n</code></pre>\n\n<p><code>print_if_possible</code> will only participate in <em>overload resolution</em> if <code>os &lt;&lt; x</code> is a well-formed expression.</p>\n\n<p><a href=\"https://gcc.godbolt.org/z/4xX8u5\" rel=\"noreferrer\"><strong>live example on godbolt.org</strong></a></p>\n\n<hr>\n\n<p>I need to do the same in C++03, and I figured out that <code>sizeof</code> could help (as I needed an unevaluated context for an expression). This is what I came up with:</p>\n\n<pre><code>template &lt;int&gt; struct sfinaer { };\n\ntemplate &lt;typename T&gt;\nvoid print_if_possible(std::ostream&amp; os, const T&amp; x, \n    sfinaer&lt;sizeof(os &lt;&lt; x)&gt;* = NULL);\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/f8sYAm\" rel=\"noreferrer\"><strong>live example on godbolt.org</strong></a></p>\n\n<hr>\n\n<p>It seems that both the latest versions of <em>g++</em> and <em>clang++</em> accept the <code>sizeof</code> version with <code>-std=c++03 -Wall -Wextra</code>. </p>\n\n<ul>\n<li><p>Is the code guaranteed to work as intended in C++03?</p></li>\n<li><p>Is it correct to conclude that any usage of C++11 expression SFINAE can be backported to C++03 using <code>sfinaer</code> and <code>sizeof</code>? </p></li>\n</ul>\n"}, {"tags": ["c++", "multithreading", "c++11", "std-future"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1537956091, "post_id": 52514850, "comment_id": 91969764, "body": "What does your code intend to do if it is not ready?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1537956302, "post_id": 52514850, "comment_id": 91969877, "body": "i dont think you can get any faster than 0 + scheduling and resource contention delays"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537961896, "post_id": 52514850, "comment_id": 91973112, "body": "C++ only specifies what the observable effects of the code are. Absence of blocking or waiting is not an observable effect."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1537973380, "post_id": 52514850, "comment_id": 91980695, "body": "Do you expect <code>x+=1;</code> where <code>x</code> is an <code>int</code> to be guaranteed wait-free?"}], "answers": [{"comments": [{"owner": {"reputation": 987, "user_id": 3677264, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a45671302337b6445ab86d16b8b7639a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre A.", "link": "https://stackoverflow.com/users/3677264/alexandre-a"}, "edited": false, "score": 0, "creation_date": 1537960141, "post_id": 52515669, "comment_id": 91972133, "body": "I&#39;m wondering if the overhead is roughly equivalent to reading the <code>std::atomic&lt;bool&gt;</code> (ready) flag ?"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 987, "user_id": 3677264, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a45671302337b6445ab86d16b8b7639a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre A.", "link": "https://stackoverflow.com/users/3677264/alexandre-a"}, "edited": false, "score": 2, "creation_date": 1537961044, "post_id": 52515669, "comment_id": 91972645, "body": "@AlexandreA. That is not an easy question to answer without precise measurements. Even if your <code>atomic</code> returns <code>true</code> for <code>is_lock_free()</code>, the atomic operation on your processor is something that should be timed and compared against given implementation of <code>std::future</code> queries."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 987, "user_id": 3677264, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a45671302337b6445ab86d16b8b7639a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre A.", "link": "https://stackoverflow.com/users/3677264/alexandre-a"}, "edited": false, "score": 0, "creation_date": 1538042507, "post_id": 52515669, "comment_id": 92007880, "body": "@AlexandreA. Having said that, note that <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_flag\" rel=\"nofollow noreferrer\"><code>std::atmoic_flag</code></a> is &quot;<i>[...] guaranteed to be lock-free.</i>&quot; : )"}, {"owner": {"reputation": 987, "user_id": 3677264, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a45671302337b6445ab86d16b8b7639a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre A.", "link": "https://stackoverflow.com/users/3677264/alexandre-a"}, "edited": false, "score": 0, "creation_date": 1538048705, "post_id": 52515669, "comment_id": 92011785, "body": "Interesting remark about <code>std::atomic_flag</code> thanks :)"}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 6, "last_activity_date": 1537988569, "last_edit_date": 1537988569, "creation_date": 1537957963, "answer_id": 52515669, "question_id": 52514850, "link": "https://stackoverflow.com/questions/52514850/is-there-a-way-to-check-if-stdfuture-state-is-ready-in-a-guaranteed-wait-free/52515669#52515669", "title": "Is there a way to check if std::future state is ready in a guaranteed wait-free manner?", "body": "<p>The <a href=\"https://en.cppreference.com/w/cpp/thread/future/wait_for\" rel=\"nofollow noreferrer\">quote from cppreference</a> is simply there to remind you that the OS scheduler is a factor here and that other tasks requiring platform resources could be using the CPU-time your thread needs in order to return from <code>wait_for()</code> -- regardless of the specified timeout duration being zero or not. That's all. You cannot technically be guaranteed to get more than that on a non-realtime platform. As such, the C++ Standard says nothing about this, but you can see other interesting stuff there -- see the paragraph for <code>wait_for()</code> under <a href=\"http://eel.is/c++draft/futures#unique_future-21\" rel=\"nofollow noreferrer\">[futures.unique_future\u00b621]</a>:</p>\n\n<blockquote>\n  <p>Effects: None if the shared state contains a deferred function\n  ([futures.async]), otherwise <strong>blocks until the shared state is ready or\n  until the relative timeout ([thread.req.timing]) specified by\n  <code>rel_\u00adtime</code> has expired.</strong></p>\n</blockquote>\n\n<p>No such mention of the additional delay here, <strong>but it does say that you <em>are</em> blocked,</strong> and it remains implementation dependent whether <code>wait_for()</code> is <a href=\"https://en.cppreference.com/w/cpp/thread/yield\" rel=\"nofollow noreferrer\"><code>yield()</code></a>ing the thread<sup>1</sup> first thing upon such blocking or immediately returning if the timeout duration is zero. In addition, it might also be necessary for an implementation to synchronize access to the future's status in a locking manner, which would have to be applied prior to checking if a potential immediate return is to take place. Hence, <strong>you don't even have the guarantee for <a href=\"https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom\" rel=\"nofollow noreferrer\"><em>lock-freedom</em></a> here, let alone <em>wait-freedom</em>.</strong></p>\n\n<p>Note that the same applies for calling <a href=\"https://en.cppreference.com/w/cpp/thread/future/wait_until\" rel=\"nofollow noreferrer\"><code>wait_until</code></a> with a time in the past.</p>\n\n<blockquote>\n  <p>Is it still the case when timeout_duration is 0 ? If so, is there\n  another way to query the state in a guaranteed wait-free manner ?</p>\n</blockquote>\n\n<p>So yes, implementation of <code>wait_free()</code> notwithstanding, this is <em>still the case</em>. As such, this is the closest to <em>wait-free</em> you're going to get for checking the state.</p>\n\n<hr>\n\n<p><sup>1</sup> In simple terms, this means \"releasing\" the CPU and putting your thread at the back of the scheduler's queue, giving other threads some CPU-time.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 1, "last_activity_date": 1537964156, "last_edit_date": 1537964156, "creation_date": 1537963739, "answer_id": 52517433, "question_id": 52514850, "link": "https://stackoverflow.com/questions/52514850/is-there-a-way-to-check-if-stdfuture-state-is-ready-in-a-guaranteed-wait-free/52517433#52517433", "title": "Is there a way to check if std::future state is ready in a guaranteed wait-free manner?", "body": "<blockquote>\n  <p>Is it still the case when timeout_duration is 0 ?</p>\n</blockquote>\n\n<p>Yes. That's true for <strong>any</strong> operation. The OS scheduler could pause the thread (or the whole process) to allow another thread to run on the same CPU.</p>\n\n<blockquote>\n  <p>If so, is there another way to query the state in a guaranteed wait-free manner ?</p>\n</blockquote>\n\n<p>No. Using a zero timeout is the correct way.</p>\n\n<p>There's not even a guarantee that the shared state of a <code>std::future</code> doesn't lock a mutex to check if it's ready, so it would be impossible to guarantee it was wait-free.</p>\n\n<p>For GCC's implementation the ready flag is an atomic so there's no mutex lock needed, and if it's ready then <code>wait_for</code> returns immediately. If it's not ready then there are some more atomic operations and then a check to see if the timeout has passed already, then a system call. So for a zero timeout there are just some atomic loads and function calls (no system call).</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1537964301, "post_id": 52517447, "comment_id": 91974617, "body": "There&#39;s no guarantee that <code>is_ready()</code> does anything other than <code>wait_for(0s) == future_status::ready</code>, so it&#39;s more readable and more expressive, but is not necessarily wait-free."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1537967821, "post_id": 52517447, "comment_id": 91976920, "body": "I would not expect <code>is_ready()</code> to behave that way, but it&#39;s really a quality of implementation issue.  In any case, <code>is_ready()</code> is the best you can do."}], "tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": false, "score": 3, "last_activity_date": 1537963781, "creation_date": 1537963781, "answer_id": 52517447, "question_id": 52514850, "link": "https://stackoverflow.com/questions/52514850/is-there-a-way-to-check-if-stdfuture-state-is-ready-in-a-guaranteed-wait-free/52517447#52517447", "title": "Is there a way to check if std::future state is ready in a guaranteed wait-free manner?", "body": "<p>To answer your second question, there is currently no way to check if the future is ready other than waiting.  We will likely get this at some point: <a href=\"https://en.cppreference.com/w/cpp/experimental/future/is_ready\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/experimental/future/is_ready</a>.  If your runtime library supports the concurrency extensions and you don't mind using <code>experimental</code> in your code, then you can use <code>is_ready()</code> now.  That being said, I know of few cases where you must check a future's state.  Are you sure it's necessary?</p>\n"}], "owner": {"reputation": 987, "user_id": 3677264, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a45671302337b6445ab86d16b8b7639a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre A.", "link": "https://stackoverflow.com/users/3677264/alexandre-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2244, "favorite_count": 0, "accepted_answer_id": 52515669, "answer_count": 3, "score": 8, "last_activity_date": 1537988569, "creation_date": 1537955489, "last_edit_date": 1537961863, "question_id": 52514850, "link": "https://stackoverflow.com/questions/52514850/is-there-a-way-to-check-if-stdfuture-state-is-ready-in-a-guaranteed-wait-free", "title": "Is there a way to check if std::future state is ready in a guaranteed wait-free manner?", "body": "<p>I know that I can check the state of the <code>std::future</code> the following way:</p>\n\n<p><code>my_future.wait_for(std::chrono::seconds(0)) == std::future_status::ready</code></p>\n\n<p>But according to <a href=\"https://en.cppreference.com/w/cpp/thread/future/wait_for\" rel=\"noreferrer\">cppreference.com</a> <code>std::future::wait_for</code> may block in some cases:</p>\n\n<blockquote>\n  <p>This function may block for longer than timeout_duration due to scheduling or resource contention delays.</p>\n</blockquote>\n\n<p>Is it still the case when <code>timeout_duration</code> is 0 ? If so, is there another way to query the state in a guaranteed wait-free manner ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1537955855, "post_id": 52514842, "comment_id": 91969600, "body": "Duplicate of <a href=\"https://stackoverflow.com/q/7939399/3002139\">stackoverflow.com/q/7939399/3002139</a>"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1537955569, "creation_date": 1537955569, "answer_id": 52514878, "question_id": 52514842, "link": "https://stackoverflow.com/questions/52514842/c-perform-sequence-for-to-plain-array/52514878#52514878", "title": "c++ perform sequence-for to plain array", "body": "<p>For plain arrays <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-for</a> uses special handling:</p>\n\n<blockquote>\n  <p>If <code>range_expression</code> is an expression of array type, then <code>begin_expr</code> is <code>__range</code> and <code>end_expr</code> is <code>(__range + __bound)</code>, where <code>__bound</code> is the number of elements in the array (if the array has unknown size or is of an incomplete type, the program is ill-formed)</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 9372835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e499f207f42b43b30b58a6b9f458cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Shylock Hg", "link": "https://stackoverflow.com/users/9372835/shylock-hg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1537956174, "accepted_answer_id": 52514878, "answer_count": 1, "score": 0, "last_activity_date": 1537955833, "creation_date": 1537955466, "question_id": 52514842, "link": "https://stackoverflow.com/questions/52514842/c-perform-sequence-for-to-plain-array", "closed_reason": "Duplicate", "title": "c++ perform sequence-for to plain array", "body": "<p>The c++ sequence-for based on <code>sequence.begin()/end()/++</code>,but the plain array such as <code>int a[10];</code> can also perform this.Why?Is there some implicit cast from plain array to <code>std::array</code>?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1537955448, "post_id": 52514788, "comment_id": 91969323, "body": "not soo much about opinions actually. You should either use automatic storage or smart pointers. <code>new</code> and <code>delete</code> have no place in modern C++ (unless you write libraries that need to do memory managment)"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1537955461, "post_id": 52514788, "comment_id": 91969335, "body": "Why not store the objects in the vector? They would be cleaned up when vector is destroyed."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1537955533, "post_id": 52514788, "comment_id": 91969386, "body": "It is extremely <i>bad</i> practice <i>not</i> to clean up your memory."}, {"owner": {"reputation": 7480, "user_id": 205955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a57a33d43f1b629b6b8b367d9ac651b9?s=128&d=identicon&r=PG", "display_name": "doc", "link": "https://stackoverflow.com/users/205955/doc"}, "edited": false, "score": 0, "creation_date": 1537958368, "post_id": 52514788, "comment_id": 91971097, "body": "If you have custom-defined destructors, it&#39;s not only about memory cleanup."}, {"owner": {"reputation": 7480, "user_id": 205955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a57a33d43f1b629b6b8b367d9ac651b9?s=128&d=identicon&r=PG", "display_name": "doc", "link": "https://stackoverflow.com/users/205955/doc"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1537958812, "post_id": 52514788, "comment_id": 91971350, "body": "@user463035818 Qt uses parent-child relationships to manage memory (this was designed long before smart pointers became a part of standard library), so <code>new</code> actually has to be used with Qt."}, {"owner": {"reputation": 7480, "user_id": 205955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a57a33d43f1b629b6b8b367d9ac651b9?s=128&d=identicon&r=PG", "display_name": "doc", "link": "https://stackoverflow.com/users/205955/doc"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1537959187, "post_id": 52514788, "comment_id": 91971601, "body": "@Yksisarvinen Unfortunately <code>QObject</code> is uncopyable and unmovable."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1537959752, "post_id": 52514788, "comment_id": 91971904, "body": "Check <a href=\"https://stackoverflow.com/a/47107116/5366641\">this answer</a> out."}], "answers": [{"comments": [{"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1537955828, "post_id": 52514964, "comment_id": 91969579, "body": "Plus, if you do it like poster, you might end up with null-reference-errors, since the parent might not know it was deleted"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 2, "creation_date": 1537955959, "post_id": 52514964, "comment_id": 91969681, "body": "Nope. When child is deleted, parent is notified and parent will not try delete this again. This is done by Qt design."}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1537956143, "post_id": 52514964, "comment_id": 91969798, "body": "Unless you have a member pointer. I mean, I feel like I would end up in that situation, unless there is some trick I don&#39;t know?"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": true, "score": 9, "last_activity_date": 1537981164, "last_edit_date": 1537981164, "creation_date": 1537955778, "answer_id": 52514964, "question_id": 52514788, "link": "https://stackoverflow.com/questions/52514788/is-this-a-good-programming-practice-to-cleanup-memory/52514964#52514964", "title": "Is this a good programming practice to cleanup memory?", "body": "<p>In Qt memory management is organized by parent-child relation.\nBasically when you create a new <code>QObject</code> of any kind, and give it a parent argument, parent will be responsible for deleting that object.</p>\n\n<p>So basically, this static vector is obsolete and this is not an opinion.\nWhen parent-child relation is used if you delete root element all children will be destroyed.</p>\n\n<p>This static vector is kind of global variable and this should be avoided in any framework or programming language. So this is another reason not to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1537988131, "last_edit_date": 1537988131, "creation_date": 1537987667, "answer_id": 52524290, "question_id": 52514788, "link": "https://stackoverflow.com/questions/52514788/is-this-a-good-programming-practice-to-cleanup-memory/52524290#52524290", "title": "Is this a good programming practice to cleanup memory?", "body": "<p>This approach has too many downsides, many of them have been already mentioned.</p>\n\n<p>I would like to additionally note that you are only cleaning up your memory at the end of your main function (most modern operating systems clean up anyway when your process exits<sup>*</sup>).</p>\n\n<p>A more serious need for this clean-up emerges while running your program, for instance, when your program has allocated too many objects and still needs more (e.g. imagine that you are writing a service that should run for weeks or maybe months). Your approach wouldn't be of any help in this case.</p>\n\n<p>You are basically implementing a <em>garbage collector</em> that kicks in only when the program is about to exit, and works for a specific hierarchy of types.</p>\n\n<hr>\n\n<p><sup>* please note that I am not encouraging the delegation of any form of clean-up from the process to the operating system.</sup></p>\n"}], "owner": {"reputation": 821, "user_id": 7120215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fd56db37a030fa5ac42d45f06df3f5b?s=128&d=identicon&r=PG&f=1", "display_name": "Gurushant", "link": "https://stackoverflow.com/users/7120215/gurushant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 52514964, "answer_count": 2, "score": 1, "last_activity_date": 1537988131, "creation_date": 1537955314, "last_edit_date": 1537957156, "question_id": 52514788, "link": "https://stackoverflow.com/questions/52514788/is-this-a-good-programming-practice-to-cleanup-memory", "title": "Is this a good programming practice to cleanup memory?", "body": "<p>I know that this question is probably opinion oriented, but since I am an amateur programmer I want to know whether this is a good practice to clean up the memory.<br>\nTo clear my objects I use static QVector in which I store the pointers to the objects created and I made a static function called Perfrom_Cleanup which deletes all the objects from the pointers stored in the vector. Here is my code, to get a clearer idea.  </p>\n\n<p><strong>Header File</strong>  </p>\n\n<pre><code>#ifndef AUTOMATIC_CLEANUP_H\n#define AUTOMATIC_CLEANUP_H\n\n#include &lt;QObject&gt;\n#include &lt;QVector&gt;\n#include &lt;QDebug&gt;\n\nclass Automatic_Cleanup : public QObject\n{\n    Q_OBJECT\n\n    static QVector&lt;Automatic_Cleanup*&gt; m_Objects;\npublic:\n    explicit Automatic_Cleanup(QObject *parent = nullptr);\n    ~Automatic_Cleanup();\n\n    static void Perfrom_Cleanup();\n\nsignals:\n\npublic slots:\n};\n\n#endif // AUTOMATIC_CLEANUP_H\n</code></pre>\n\n<p><strong>CPP File</strong>  </p>\n\n<pre><code>#include \"Automatic_Cleanup.h\"\n\nQVector&lt;Automatic_Cleanup*&gt; Automatic_Cleanup::m_Objects; \n\nAutomatic_Cleanup::Automatic_Cleanup(QObject *parent) : QObject(parent)\n{\n\n    m_Objects.append(this);\n}\n\nAutomatic_Cleanup::~Automatic_Cleanup()\n{\n    qDebug()&lt;&lt;\"Deleting object \"&lt;&lt;this-&gt;objectName();\n    int i = m_Objects.indexOf(this, 0);\n    if(i&lt;0)\n        return;\n\n    m_Objects.remove(i);\n}\n\nvoid Automatic_Cleanup::Perfrom_Cleanup()\n{\n    // Deleting from last\n    for(int i=m_Objects.count()-1; i&gt;=0; i--){\n        Automatic_Cleanup *obj = m_Objects.at(i);\n        delete obj;\n    }\n}\n</code></pre>\n\n<p>From my main cpp file I am doing this, to verify  </p>\n\n<pre><code>for(int i=0; i&lt;10; i++){\n    Automatic_Cleanup *obj = new Automatic_Cleanup;\n    obj-&gt;setObjectName(tr(\"Object %1\").arg(i+1));\n\n    if(i==4)\n        delete obj;\n}\n\nAutomatic_Cleanup::Perfrom_Cleanup();\n</code></pre>\n"}, {"tags": ["c++", "computer-science"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1537954925, "post_id": 52514500, "comment_id": 91968919, "body": "<code>std::find</code>/<code>std::sort</code> might help."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 4, "last_activity_date": 1537954878, "last_edit_date": 1537954878, "creation_date": 1537954566, "answer_id": 52514548, "question_id": 52514500, "link": "https://stackoverflow.com/questions/52514500/c-linear-search-and-sorting/52514548#52514548", "title": "C++ (Linear Search and Sorting)", "body": "<p>This code</p>\n\n<pre><code>    if (StudentName[i] == SearchName)\n        found = i;\n        cout &lt;&lt; \"PRESENT! Found in position \" &lt;&lt; found &lt;&lt; endl;\n\n    if (StudentName[i] != SearchName)\n            found = 0;\n            cout &lt;&lt; \"ABSENT!\" &lt;&lt; endl;\n</code></pre>\n\n<p>is missing braces for the if statements. It should be</p>\n\n<pre><code>    if (StudentName[i] == SearchName) {\n        found = i;\n        cout &lt;&lt; \"PRESENT! Found in position \" &lt;&lt; found &lt;&lt; endl;\n    }\n\n    if (StudentName[i] != SearchName) {\n            found = 0;\n            cout &lt;&lt; \"ABSENT!\" &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>However the code is still not right because you cannot know that you haven't found a name until you have checked all the names. So logically the test for 'not found' can only go after the for loop.</p>\n\n<p>I would write the code something like this</p>\n\n<pre><code>//Linear Search\nfound = -1;\nfor (int i = 0; i &lt; numStudents; i++) {\n\n    if (StudentName[i] == SearchName) {\n        found = i;\n        break; // we've found it, quit the loop\n    }\n\n}\n\nif (found == -1) // did we find it?\n    cout &lt;&lt; \"ABSENT!\" &lt;&lt; endl;\nelse\n    cout &lt;&lt; \"PRESENT! Found in position \" &lt;&lt; found &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10134577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15475865ae5c07f1fd2cb9c52688e750?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/10134577/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52514548, "answer_count": 1, "score": 1, "last_activity_date": 1537954878, "creation_date": 1537954411, "last_edit_date": 1537954842, "question_id": 52514500, "link": "https://stackoverflow.com/questions/52514500/c-linear-search-and-sorting", "title": "C++ (Linear Search and Sorting)", "body": "<p>Help with C++. Two things that I am struggling with</p>\n\n<ol>\n<li><p>I am trying to do a linear search of name of list but for some reason the message \"ABSENT!\" will not come up when I type in the wrong name. How do I fix that?</p></li>\n<li><p>I am trying to sort the entered name alphabetically in ascending order by their last name but I don't really know how to use that for loop and array for that.</p></li>\n</ol>\n\n<p>Below is what I have for coding so far (Where it says Linear Search and Sorting is where I need help and that needs to be revised).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nconst int Students = 10;\nint numStudents = 0;\nstring StudentName[Students];\nint found = -1;\nstring SearchName;\n\nint main() {\n        cout &lt;&lt; \"Enter the number of students (1-10): \";\n        cin &gt;&gt; numStudents;\n\n    for (int i = 0; i &lt; numStudents; i++) {\n        cout &lt;&lt; \"Enter a name: \";\n        cin.ignore();\n        getline(cin, StudentName[i]);\n    }\n\n    cout &lt;&lt; \"\\nEnter a search name: \";\n    cin.ignore();\n    getline(cin, SearchName);\n\n    **//Linear Search\n    for (int i = 0; i &lt; numStudents; i++) {\n\n        if (StudentName[i] == SearchName)\n            found = i;\n            cout &lt;&lt; \"PRESENT! Found in position \" &lt;&lt; found &lt;&lt; endl;\n\n        if (StudentName[i] != SearchName)\n                found = 0;\n                cout &lt;&lt; \"ABSENT!\" &lt;&lt; endl;\n    }\n    //Sorting\n    for (int i = 0; i &lt; numStudents - 1; i++) {\n        for (int j = i + 1; j &lt; numStudents; j++)\n            if (StudentName[i] &gt; StudentName[j]) {\n                string t = StudentName[i];\n                StudentName[i] = StudentName[j];\n                StudentName[j] = t;\n            }\n    }\n    cout &lt;&lt; \"\\nThe Sorted list is:\" &lt;&lt; \"\\n\";**\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 3, "creation_date": 1537953182, "post_id": 52514011, "comment_id": 91967813, "body": "<code>ui</code> points to <code>Ui::MainWindow</code> and <code>this</code> points to <code>MainWindow</code> - these are different classes (the same name, but different namespaces) and different objects. Therefore you cannot access members of one class through the pointer to another class object."}, {"owner": {"reputation": 85, "user_id": 9333324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b479f8623046e8801736c568abc21db?s=128&d=identicon&r=PG&f=1", "display_name": "1212q", "link": "https://stackoverflow.com/users/9333324/1212q"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1537953393, "post_id": 52514011, "comment_id": 91967949, "body": "so <code>Ui::MainWindow</code> is not the <code>MainWindow</code> class from header file?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1537964378, "post_id": 52514011, "comment_id": 91974658, "body": "It is automatically named like that in order to indicate, that this UI belongs to this class. But they are different."}], "answers": [{"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1537964632, "post_id": 52514147, "comment_id": 91974822, "body": "This answer is best suited for hogwarts.stackexchange.com. &lt;-- This is a joke, obviously."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1538048992, "post_id": 52514147, "comment_id": 92011966, "body": ":) all jokes aside, could you please elaborate on what and how the magic happens, as it could be useful for the readers."}], "tags": [], "owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "is_accepted": false, "score": 1, "last_activity_date": 1538129606, "last_edit_date": 1538129606, "creation_date": 1537953382, "answer_id": 52514147, "question_id": 52514011, "link": "https://stackoverflow.com/questions/52514011/qt-difference-between-class-pointers/52514147#52514147", "title": "Qt difference between class pointers", "body": "<p>When you create a widget in Qt, there is some magic (if everything is set up nice, which would be the case when using a template). Qt will generate the <code>ui</code> class from the .ui file you edited. This class contains all the widgets you added with the designer. (<a href=\"https://stackoverflow.com/a/52514240/1228771\">see the answer of Arman for more details</a>)</p>\n\n<p>The <code>this</code> pointer is a C++ basic concept, which is the class you are working in. You could actually write 'this->ui->setupUi(this)` for example.</p>\n\n<p>If you cannot access the widgets you created through <code>ui</code>, it might mean you first have to compile so that Qt can do it's magic. If you already did, it might mean something has gone bogus, which I highly doubt</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 6232365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvJXl.jpg?s=128&g=1", "display_name": "Arman Oganesyan", "link": "https://stackoverflow.com/users/6232365/arman-oganesyan"}, "is_accepted": true, "score": 4, "last_activity_date": 1537953639, "creation_date": 1537953639, "answer_id": 52514240, "question_id": 52514011, "link": "https://stackoverflow.com/questions/52514011/qt-difference-between-class-pointers/52514240#52514240", "title": "Qt difference between class pointers", "body": "<p>Your member 'ui' has type Ui :: MainWindow - it's a class, which was generated from your form. That class is generated by UIC. <a href=\"http://doc.qt.io/Qt-5/uic.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/Qt-5/uic.html</a></p>\n\n<p>'this' pointer - is a pointer to the current class, in your case it has type MainWindow.</p>\n\n<p>Ui :: MainWindow and MainWindow are not the same. If you want to access to a button that was created by Qt Designer - use 'ui' member, not 'this' pointer.</p>\n\n<p>Probably this link would help you <a href=\"http://doc.qt.io/Qt-5/designer-using-a-ui-file.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/Qt-5/designer-using-a-ui-file.html</a></p>\n"}], "owner": {"reputation": 85, "user_id": 9333324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b479f8623046e8801736c568abc21db?s=128&d=identicon&r=PG&f=1", "display_name": "1212q", "link": "https://stackoverflow.com/users/9333324/1212q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 52514240, "answer_count": 2, "score": 1, "last_activity_date": 1538129606, "creation_date": 1537952999, "question_id": 52514011, "link": "https://stackoverflow.com/questions/52514011/qt-difference-between-class-pointers", "title": "Qt difference between class pointers", "body": "<p>I have just started learning Qt and there are some things I don't understand.\nSo I made widget app by creator and the framework created header and cpp file for\nMainWindow.</p>\n\n<blockquote>\n  <p>Header file</p>\n</blockquote>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n#include &lt;QMainWindow&gt;\n#include &lt;QLayout&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate slots:\n\n\nprivate:\n    Ui::MainWindow *ui;\n    QLayout *aLayout;\n    QLayout *bLayout;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<blockquote>\n  <p>Cpp file</p>\n</blockquote>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;...\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>My question is what's the difference between objects pointed by <code>ui</code> made by constructor and <code>this</code> used in the same constructor. Also, why can't I acces MainWindow members by <code>ui</code> pointer?</p>\n"}, {"tags": ["c++", "raspberry-pi3", "openvg"], "answers": [{"tags": [], "owner": {"reputation": 5944, "user_id": 646173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cb9ef472d0c9c24f216dc6c19af696?s=128&d=identicon&r=PG", "display_name": "Markus Schumann", "link": "https://stackoverflow.com/users/646173/markus-schumann"}, "is_accepted": false, "score": 0, "last_activity_date": 1537990847, "creation_date": 1537990847, "answer_id": 52525002, "question_id": 52513943, "link": "https://stackoverflow.com/questions/52513943/raspberry-pi-openvg-c-c/52525002#52525002", "title": "Raspberry Pi OpenVG C/C++", "body": "<p>In this project <a href=\"https://github.com/go4shoe/PiAVSignalGenerator\" rel=\"nofollow noreferrer\">https://github.com/go4shoe/PiAVSignalGenerator</a> I wrapped openVG into a fairly straight forward C++ interface.</p>\n"}], "owner": {"reputation": 1, "user_id": 10356866, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aJ0_pMqmhew/AAAAAAAAAAI/AAAAAAAAACU/ZdnIm6BJSXs/photo.jpg?sz=128", "display_name": "Krzysztof Go\u0142\u0119biowski", "link": "https://stackoverflow.com/users/10356866/krzysztof-go%c5%82%c4%99biowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537990847, "creation_date": 1537952847, "last_edit_date": 1537954828, "question_id": 52513943, "link": "https://stackoverflow.com/questions/52513943/raspberry-pi-openvg-c-c", "title": "Raspberry Pi OpenVG C/C++", "body": "<p>I have two question about <code>OpenVG</code></p>\n\n<ol>\n<li><p>I'm going to plot a chart using <code>OpenVG</code>. I read documentation and I can't find how to write a single pixel (something like <code>putpixel</code> in <code>Pascal</code>). I found one solution: draw a short line (1 pix line) but is not satisfied solution for me.</p></li>\n<li><p>Load PNG file. <code>OpenVG</code> support only <code>jpeg</code> files but <code>jpegs</code> don't have alpha channel. I read <code>*.png</code> by <code>libPNG</code> and I don't know how to cast to <code>vgImage</code>. Have You any idea?</p></li>\n</ol>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 1, "creation_date": 1537952664, "post_id": 52513830, "comment_id": 91967497, "body": "Shouldn&#39;t these be defined by the Windows headers?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1537952978, "post_id": 52513830, "comment_id": 91967685, "body": "In general terms,  the &quot;old-style cast  <code>(type)something</code> is equivalent to <code>type(something)</code>.    From the information you provide (which isn&#39;t really enough, so I may be wrong) all examples except the last could be done as <code>static_cast&lt;type&gt;(something)</code> which is considered by some to be more idiomatic C++.    Casting a fixed integral value to a pointer and then dereferencing is formally undefined behaviour though, so read your compiler/library documentation carefully."}, {"owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "edited": false, "score": 0, "creation_date": 1537956299, "post_id": 52513830, "comment_id": 91969874, "body": "I&#39;ve updated my question. <code>static_cast</code> doesn&#39;t work in these examples. It&#39;s still not clear to me which method is preferable."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1537961286, "post_id": 52513830, "comment_id": 91972786, "body": "If it ain&#39;t broke, don&#39;t fix it."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1537953089, "post_id": 52513949, "comment_id": 91967742, "body": "maybe worth mentioning that a <code>reinterpret_cast</code> may silence a warning, but should be considered a red flag just as the c-style cast (it is basically the replacement for a c-style cast, when no other x_cast applies)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1537953722, "post_id": 52513949, "comment_id": 91968153, "body": "<code>LPBYTE(&amp;result)</code> is not a C-style cast.   It is specific to C++, and not valid in standard C.    However, the <code>_cast</code> conversions are often considered preferable in C++."}, {"owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "edited": false, "score": 0, "creation_date": 1537956413, "post_id": 52513949, "comment_id": 91969944, "body": "So should I stick with the C-style cast or use use <code>reinterpret_cast</code>? In the case of <code>(LPBYTE)&amp;result</code>, should I use <code>LPBYTE(&amp;result)</code> or <code>reinterpret_cast</code>?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "edited": false, "score": 0, "creation_date": 1537956601, "post_id": 52513949, "comment_id": 91970073, "body": "@bur What type is <code>result</code> of?"}, {"owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "edited": false, "score": 0, "creation_date": 1537956783, "post_id": 52513949, "comment_id": 91970172, "body": "<code>wchar_t result[MAX_PATH]</code>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "edited": false, "score": 0, "creation_date": 1537956992, "post_id": 52513949, "comment_id": 91970293, "body": "@bur <code>reinterpret_cast&lt;LPBYTE&gt;(result)</code> - no need for the address-of operator there."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1537954753, "last_edit_date": 1537954753, "creation_date": 1537952862, "answer_id": 52513949, "question_id": 52513830, "link": "https://stackoverflow.com/questions/52513830/what-to-do-with-these-old-style-casts/52513949#52513949", "title": "What to do with these old-style casts?", "body": "<p><code>HKEY_CURRENT_USER</code> is defined in the WinAPI, so leave it alone. It could change without warning (although unlikely, but possible).</p>\n\n<blockquote>\n  <p><code>(LPBYTE)&amp;result: LPBYTE(&amp;result)</code> works, but again, I have no idea if it's equivalent.</p>\n</blockquote>\n\n<p>Yes, its the same.</p>\n\n<blockquote>\n  <p><code>(const BYTE*)&amp;value: reinterpret_cast&lt;const BYTE*&gt;(&amp;value)</code> works, but same thing again.</p>\n</blockquote>\n\n<p>The same again.</p>\n"}], "owner": {"reputation": 532, "user_id": 1136512, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9daefbec8cdaf952907fa33f6492eb76?s=128&d=identicon&r=PG", "display_name": "bur", "link": "https://stackoverflow.com/users/1136512/bur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2014, "favorite_count": 0, "accepted_answer_id": 52513949, "answer_count": 1, "score": 6, "last_activity_date": 1537964265, "creation_date": 1537952462, "last_edit_date": 1537964265, "question_id": 52513830, "link": "https://stackoverflow.com/questions/52513830/what-to-do-with-these-old-style-casts", "title": "What to do with these old-style casts?", "body": "<p>I'm getting a few \"use of old-style cast\" warnings which I would like to get rid of, but I don't know enough about this.</p>\n\n<p>Edit:\n<code>HKEY_CURRENT_USER</code> is indeed defined in the WinAPI so I will leave that one alone.</p>\n\n<p><code>(LPBYTE)&amp;result</code>: <code>LPBYTE(&amp;result)</code> and <code>reinterpret_cast&lt;LPBYTE&gt;(&amp;result)</code> work, but I have no idea if either is equivalent.\nSo which of these three do I use?</p>\n\n<p><code>(const BYTE*)&amp;value</code>: <code>reinterpret_cast&lt;const BYTE*&gt;(&amp;value)</code> works, but same thing again.\nSo which of these two do I use?</p>\n\n<p>Some more context:</p>\n\n<pre><code>HKEY hKey;\nstd::string sResult = \"\";\nif(regOpenKey(KEY_READ, &amp;hKey))\n{\n    DWORD size=1024, type = REG_SZ;\n    wchar_t result[MAX_PATH];\n    if(RegQueryValueEx(hKey, key, nullptr, &amp;type, (LPBYTE)&amp;result, &amp;size) == ERROR_SUCCESS)\n        sResult = str_narrow(result);\n}\n\nRegCloseKey(hKey);\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>HKEY hKey;\nif(regOpenKey(KEY_ALL_ACCESS, &amp;hKey))\n{\n    DWORD value = 1;\n    RegSetValueEx(hKey, key, 0, REG_DWORD, (const BYTE*)&amp;value, sizeof(value));\n}\n\nRegCloseKey(hKey);\n</code></pre>\n\n<p>Thanks for any help :)</p>\n"}, {"tags": ["c++", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10412944, "user_type": "registered", "profile_image": "https://graph.facebook.com/2689917231033793/picture?type=large", "display_name": "Jules", "link": "https://stackoverflow.com/users/10412944/jules"}, "edited": false, "score": 0, "creation_date": 1537954341, "post_id": 52513906, "comment_id": 91968545, "body": "Ok thanks, but i am not sure i understand how <code>speed=0;</code> make <code>speed=4;</code> The <code>speed=0;</code> in <code>if(pressedLastTime)</code> is unless ?"}, {"owner": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "reply_to_user": {"reputation": 21, "user_id": 10412944, "user_type": "registered", "profile_image": "https://graph.facebook.com/2689917231033793/picture?type=large", "display_name": "Jules", "link": "https://stackoverflow.com/users/10412944/jules"}, "edited": false, "score": 0, "creation_date": 1537954694, "post_id": 52513906, "comment_id": 91968756, "body": "sorry I think the second part of your question was added later... fixed my answer. You can also skip <code>pressedLastTime</code> if you don&#39;t need a single reset of <code>speed</code>"}], "tags": [], "owner": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1537954574, "last_edit_date": 1537954574, "creation_date": 1537952727, "answer_id": 52513906, "question_id": 52513815, "link": "https://stackoverflow.com/questions/52513815/c-sfml-apply-only-when-button-pressed/52513906#52513906", "title": "c++ sfml apply only when button pressed", "body": "<p>Either use SFML events and listen to <code>sf::Events::KeyReleased</code> (<a href=\"https://www.sfml-dev.org/tutorials/2.5/window-events.php\" rel=\"nofollow noreferrer\">https://www.sfml-dev.org/tutorials/2.5/window-events.php</a>) or do it manually by storing the last state.</p>\n\n<pre><code>int speed(4);\nint speedSprinte(20);\nbool pressedLastTime{false};\n\nif(sf::Keyboard::isKeyPressed(sf::Keyboard::LShift))\n{\n    keyCount++;\n    speed=speedSprinte;\n    std::cout&lt;&lt;speed&lt;&lt;std::endl;\n    pressedLastTime = true;\n} \nelse\n{\n    if (pressedLastTime)\n    {\n        speed = 4;\n        pressedLastTime = false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10412944, "user_type": "registered", "profile_image": "https://graph.facebook.com/2689917231033793/picture?type=large", "display_name": "Jules", "link": "https://stackoverflow.com/users/10412944/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537954574, "creation_date": 1537952390, "question_id": 52513815, "link": "https://stackoverflow.com/questions/52513815/c-sfml-apply-only-when-button-pressed", "title": "c++ sfml apply only when button pressed", "body": "<p>I have a probleme my character stay running when i release the LShift button</p>\n\n<p>How can i reset the speed when the button is released ? </p>\n\n<p>Actually i have this :</p>\n\n<pre><code>int speed(4);\nint speedSprinte(20);\n\nif(sf::Keyboard::isKeyPressed(sf::Keyboard::LShift))\n{\n    keyCount++;\n    speed=speedSprinte;\n    std::cout&lt;&lt;speed&lt;&lt;std::endl;\n} \n</code></pre>\n\n<p>i can add that but i think it possible to do that easier :</p>\n\n<pre><code>if(!sf::Keyboard::isKeyPressed(sf::Keyboard::LShift))\n{\n    keyCount++;\n    speed=4;\n    std::cout&lt;&lt;speed&lt;&lt;std::endl;\n}\n</code></pre>\n"}]