[{"tags": ["c++", "c++17", "default-constructor", "explicit-constructor"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1495678248, "post_id": 44170273, "comment_id": 75358110, "body": "Hmm, do you know if LWG intended that #3 remain ambiguous? Because having an explicit default constructor on <code>allocator_arg_t</code> doesn&#39;t change that. It only changes the &quot;what&#39;s even worse&quot; part."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495695853, "post_id": 44170273, "comment_id": 75363608, "body": "@T.C. How is it ambiguous? Types with explicit constructors are not aggregates, and copy-list-initialization is ill-formed if it selects an explicit constructor. (And no, FWIW, I don&#39;t know LWG&#39;s intent for 2510. It was just before my time.)"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495696371, "post_id": 44170273, "comment_id": 75363865, "body": "Ah, I missed [dcl.init.list]/3.4: &quot;Otherwise, if the initializer list has no elements and <code>T</code> is a class type with a default constructor, the object is value-initialized.&quot; That&#39;s unfortunate."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495698212, "post_id": 44170273, "comment_id": 75364870, "body": "Copy-list-initialization is ill-formed if it selects an explicit constructor, but that  rule doesn&#39;t affect the formation of implicit conversion sequences (which is what controls viability for overload resolution purposes). The relevant subclause is [over.ics.list]."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495698565, "post_id": 44170273, "comment_id": 75365057, "body": "But maybe they knew that, since they moved the 2510 wording at the same time as my <code>nullopt_t</code> wording (2736) that does explicitly say &quot;no default constructor&quot;. /shrug"}, {"owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1495712510, "post_id": 44170273, "comment_id": 75373281, "body": "Thanks Casey, awesome as always :)"}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 16, "last_activity_date": 1495670621, "last_edit_date": 1592644375, "creation_date": 1495670621, "answer_id": 44170273, "question_id": 44170174, "link": "https://stackoverflow.com/questions/44170174/explicit-default-constructors-in-c17/44170273#44170273", "title": "Explicit default constructors in C++17", "body": "<p>The rationale for the library change is in <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#2510\" rel=\"noreferrer\">LWG 2510 &quot;Tag types should not be <code>DefaultConstructible</code>&quot;</a>:</p>\n<blockquote>\n<p><code>std::experimental::optional</code>, for certain reasons, specifies its <code>nullopt</code> type to not be <code>DefaultConstructible</code>. It doesn't do so for its tag type <code>in_place_t</code> and neither does the standard proper for any of its tag types. That turns out to be very unfortunate, consider the following:</p>\n<pre><code>#include &lt;memory&gt;\n#include &lt;array&gt;\n\nvoid f(std::array&lt;int, 1&gt;, int) {} // #1\nvoid f(std::allocator_arg_t, int) {} // #2\n\nint main()\n{\n  f({}, 666); // #3\n}\n</code></pre>\n<p>The call at #3 is ambiguous. What's even worse is that if the overload #1 is removed, the call works just fine. The whole point of a tag type is that it either needs to mentioned in a call or it needs to be a forwarded argument, so being able to construct a tag type like that makes no sense.</p>\n</blockquote>\n<p>The LWG issue evolved side-by-side with <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1518\" rel=\"noreferrer\">CWG 1518 &quot;Explicit default constructors and copy-list-initialization&quot;</a>, which has useful background.</p>\n"}], "owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1741, "favorite_count": 3, "accepted_answer_id": 44170273, "answer_count": 1, "score": 19, "last_activity_date": 1495670621, "creation_date": 1495669706, "question_id": 44170174, "link": "https://stackoverflow.com/questions/44170174/explicit-default-constructors-in-c17", "title": "Explicit default constructors in C++17", "body": "<p>In C++17, empty tag types in the standard library now have default constructors which are marked <code>explicit</code>, and are also <code>= default</code>. For example, <a href=\"http://en.cppreference.com/w/cpp/utility/piecewise_construct_t\" rel=\"noreferrer\"><code>std::piecewise_construct_t</code></a> is now defined as</p>\n\n<pre><code>struct piecewise_construct_t { explicit piecewise_construct_t() = default; };\n</code></pre>\n\n<p>My question is simply, what is the reason for this change from C++14? What does an explicitly defaulted explicit default constructor (!) mean for an empty class?</p>\n\n<p>(To avoid being marked as a dupe: <a href=\"https://stackoverflow.com/questions/2836939/purpose-of-explicit-default-constructors\">this question</a> from 2010 asks about the purpose of explicit default constructors, but that was pre-C++11 and a long time ago now so things have likely changed. <a href=\"https://stackoverflow.com/questions/33522985/explicit-defaulted-default-constructor-and-aggregates\">This question</a> is more recent, but the answer seems to suggest that aggregate initialization will be performed regardless of the presence of the defaulted constructor, so I'm curious as to the reason for this change in the latest standard.)</p>\n"}, {"tags": ["c++", "templates", "conditional"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495670901, "post_id": 44170172, "comment_id": 75356405, "body": "I don&#39;t get your question, sorry. Do you want to create a pool for <code>T</code> items that can be created using <i>placement <code>new()</code></i>? What problem do you actually want to solve. <a href=\"https://stackoverflow.com/posts/44170172/edit\">Edit</a> your question please, we can&#39;t read your brain."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1495670905, "post_id": 44170172, "comment_id": 75356408, "body": "If they differ like that, it can hardly be called a template, right? But why don&#39;t you simply go with <code>class SpecialPool : public Pool&lt;Item&gt; { vector&lt;someType&gt; vec; }</code>? That would be in the right spirit."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1495670885, "creation_date": 1495670885, "answer_id": 44170307, "question_id": 44170172, "link": "https://stackoverflow.com/questions/44170172/c-class-template-specialize-variable/44170307#44170307", "title": "C++ class template specialize variable", "body": "<blockquote>\n  <p>It would be also helpful if i could conditionally add line or two in Pool class template member function without overloading it.</p>\n</blockquote>\n\n<p>By example, you can overload only <code>pItem</code>.</p>\n\n<pre><code>struct Item\n { };\n\ntemplate &lt;typename&gt;\nstruct proItem\n { };\n\ntemplate &lt;&gt;\nstruct proItem&lt;Item&gt;\n { static Item ** pItem; };\n\nItem ** proItem&lt;Item&gt;::pItem;\n\ntemplate &lt;typename T&gt;\nstruct Pool : public proItem&lt;T&gt;\n {\n   static int iPoolUpperBound;\n   static int iPoolSize;\n };\n\n\nint main()\n {\n   Pool&lt;Item&gt;::pItem = nullptr;   // compile\n   //Pool&lt;int&gt;::pItem = nullptr;  // compilation error\n }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5036267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad6922b54b4c710ab76c2f6abd21b11?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Samokhin", "link": "https://stackoverflow.com/users/5036267/dmitry-samokhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 44170307, "answer_count": 1, "score": 0, "last_activity_date": 1495671051, "creation_date": 1495669688, "last_edit_date": 1495671051, "question_id": 44170172, "link": "https://stackoverflow.com/questions/44170172/c-class-template-specialize-variable", "title": "C++ class template specialize variable", "body": "<p>I have <strong><code>Pool</code></strong> class template, lets say something like these:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Pool {\npublic:\n    static int iPoolUpperBound;\n    static int iPoolSize;\n    static T **pItem;\n    T();\n    ~T();\n}\n</code></pre>\n\n<p>When i need objects pool for a certain class i just use that template. I also have <strong><code>Item</code></strong> class, and i need to add vector to current <strong><code>Pool</code></strong> template, but that vector should be only present if im referring/using <strong><code>Item</code></strong> class.</p>\n\n<p>Simple <code>if (T == Item)</code> wont work that's obvious, and i already gave my best to conditionally add that vector to <code>Pool</code> template</p>\n\n<p>It would be also helpful if i could conditionally add line or two in <strong><code>Pool</code></strong> class template member function without overloading it.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667488, "post_id": 44169859, "comment_id": 75355519, "body": "<i>&quot;Wondering where I am messing up.&quot;</i> Where are you messing up? Can you elaborate about that a bit more please? Error messages, exceptions, unexpected output?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667586, "post_id": 44169859, "comment_id": 75355553, "body": "Don&#39;t use raw arrays and pointers in c++ code BTW."}, {"owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667677, "post_id": 44169859, "comment_id": 75355578, "body": "Sure I am getting a compiling error that I can pass the array through when calling the forwardSubscoringCalculation that the forwardScore is not an array. I tried changing it to forwardScore[][][] but can&#39;t pass an empty array. So wondering if there was a simple way to get the code correct."}, {"owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667703, "post_id": 44169859, "comment_id": 75355589, "body": "Why is that bad code for raw arrays and pointers?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667723, "post_id": 44169859, "comment_id": 75355594, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the verbatim error message text."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495667789, "post_id": 44169859, "comment_id": 75355616, "body": "<i>&quot;Why is that bad code for raw arrays and pointers?&quot;</i> I didn&#39;t say it is bad code, I said just don&#39;t use them in c++ YAGNI."}, {"owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495668262, "post_id": 44169859, "comment_id": 75355754, "body": "Okay, I made edits and if i gets across my point?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495668335, "post_id": 44169859, "comment_id": 75355767, "body": "That&#39;s still far from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Read up the link again please."}, {"owner": {"reputation": 181, "user_id": 8026417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4db3d4a7b2ad9a21ce4c6c00cca4cc7?s=128&d=identicon&r=PG", "display_name": "Shitao Zhou", "link": "https://stackoverflow.com/users/8026417/shitao-zhou"}, "edited": false, "score": 1, "creation_date": 1495690287, "post_id": 44169859, "comment_id": 75361177, "body": "@SulimanSharif pointers and raw arrays are unsafe. Your programmay crash from a invalid index or a null pointer. ps. the complier can&#39;t generate codes for forwardScore[][][]. Only the last bracet may be left blank."}], "owner": {"reputation": 547, "user_id": 2536951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4babb3c9c4de67b74d2af2b0f74e7bff?s=128&d=identicon&r=PG", "display_name": "Suliman Sharif", "link": "https://stackoverflow.com/users/2536951/suliman-sharif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495668174, "creation_date": 1495667337, "last_edit_date": 1495668174, "question_id": 44169859, "link": "https://stackoverflow.com/questions/44169859/parsing-an-array-from-recursion-function-c", "title": "Parsing an array from recursion function C++", "body": "<p>So I a little new to C++ and discovery what I can and can't do in comparison to python. Basically I have a function and inside that function I want to parse through an array and some integers run it, and return the output number. But it seems to prove a little tricky. Wondering where I am messing up. </p>\n\n<p>Since the function it contains in is dominated by recursion I can't just make it a global variable where the array values are static. </p>\n\n<p>So here is an outline of the code</p>\n\n<pre><code>void sequenceAlignment(int iStart,int jStart,int kStart, int seqLen1Size, int seqLen2Size, int seqLen3Size) {\n\nint lengthi = seqLen1Size - iStart;\nint lengthj = seqLen2Size - jStart;\nint lengthk = seqLen3Size - kStart;\n/* Sets it as a floor */\nint midpoint = (seqLen1Size + iStart) / 2;\n\n/*End the recursion*/\nif (lengthi &lt;= 1)\n    return;\n\n/*We set two scoring arrays and intialize the XY Plane in the 3D */\nint forwardScore[2][lengthj + 1][lengthk + 1];\nint backwardsScore[2][lengthj + 1][lengthk + 1];\n\n\n/* Some code */ and then to this \nforwardSubscoringCalculation(multidimensionalarray, int, int, int, int, int, int)\n</code></pre>\n\n<p>The Function that is being called</p>\n\n<pre><code>void forwardSubscoringCalculation(int forwardScore, int scorei, int scorej, int scorek, int scoredArrayi, int scoredArrayj, int scoredArrayk) {\n\n    int tempValueHolder = 0;\n    int subscore[3] = {-10000, -10000, -10000};\n\n    subscore[0] = forwardScore[scorei][scorej][scorek] + scoredArray[scoredArrayi][scoredArrayj][scoredArrayk];\n}\n</code></pre>\n\n<p>I am wondering how can I exactly do this. I thought by setting up the array it also acts like a pointer and be passed through but I might screwing that up. Is it possible in this code or can it be quite tricky?</p>\n\n<p><strong>EDIT  Minimal Code</strong> </p>\n\n<pre><code>void score(int, int, int, int, int, int, int);\nvoid function(int, int ,int, int, int, int)\n\n\nvoid function(int i, int j, int k, int l, int m, int n) {\n\n    int forward[Number][Number][Number];\n    for (x = 0; x &gt;= l; x++){\n        score(forward, i + x, j, k l, m n)  \n    }\n}\n\nvoid score(int array, value1, value2, value3, value4, value 5, value6){\n          /* Do some stuff with the array */\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "edited": false, "score": 0, "creation_date": 1495667512, "post_id": 44169868, "comment_id": 75355523, "body": "Ah, this is a great explanation. It didn&#39;t cross my mind that it would create a temporary. So, we&#39;re not really binding against the <code>const char *</code> but rather the temporary created in the process of converting to the <code>std::string</code>."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1495667825, "last_edit_date": 1495667825, "creation_date": 1495667406, "answer_id": 44169868, "question_id": 44169840, "link": "https://stackoverflow.com/questions/44169840/why-is-a-static-const-char-const-variable-bindable-to-an-rvalue-reference-para/44169868#44169868", "title": "Why is a static const char * const variable bindable to an rvalue reference parameter when it is an lvalue?", "body": "<p><code>std::string</code> is different to <code>const char *</code>. When you initialize a reference with an expression of different type that it can't bind directly to, then a temporary is created which has the correct type for the reference. The temporary is initialized by the initializer provided, and the reference is bound directly to the temporary. Rvalue references can bind to temporaries.</p>\n\n<p>The function could then take ownership of the temporary's data. The string literal is unchanged (because the constructor <code>string::string(const char *)</code> does not change the literal, and instead takes a copy of its content).</p>\n"}], "owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 44169868, "answer_count": 1, "score": 2, "last_activity_date": 1495667825, "creation_date": 1495667221, "question_id": 44169840, "link": "https://stackoverflow.com/questions/44169840/why-is-a-static-const-char-const-variable-bindable-to-an-rvalue-reference-para", "title": "Why is a static const char * const variable bindable to an rvalue reference parameter when it is an lvalue?", "body": "<p>Given <code>static const char * const x = \"test\";</code> and a function with the signature <code>void DoSomething(std::string &amp;&amp; value)</code>, why is it legal to bind this lvalue to the parameter like so <code>DoSomething(x);</code>?</p>\n\n<p>I was under the impression that the string literal is an array of char but it decays to the pointer type and is still an lvalue. I'm just confused why this is legal.</p>\n\n<p>When the function with an rvalue reference parameter expects to take ownership of the parameter's data, how does this work with memory in read only segments of say a PE file? I understand the memory isn't physically moved, but it seems like this would cause problems.</p>\n"}, {"tags": ["c++", "parsing", "c++11", "boost", "boost-spirit"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1495668201, "creation_date": 1495668201, "answer_id": 44169988, "question_id": 44169514, "link": "https://stackoverflow.com/questions/44169514/boost-spirit-parser-look-ahead-parsing/44169988#44169988", "title": "boost spirit parser look ahead parsing", "body": "<blockquote>\n  <p>But doesn't look like it works. </p>\n</blockquote>\n\n<p>That's because <code>0-9</code> eats the digits. This should work:</p>\n\n<pre><code>+qi::char_(\"a-zA-Z_\") &gt;&gt; '_' &gt;&gt; qi::uint_\n</code></pre>\n\n<p>If you want to allow <code>ab-3_bcd_123</code> too, device a look-ahead to detect that you reached the end, e.g. <code>eoi</code>:</p>\n\n<pre><code>qi::raw[\n    (+qi::alnum|'-') % (!('_' &gt;&gt; qi::uint_ &gt;&gt; eoi))\n] &gt;&gt; '_' &gt;&gt; qi::uint_\n</code></pre>\n\n<p>allthough by now, I'd simply forget about it and do:</p>\n\n<pre><code>qi::lexeme [ +qi::char_(\"a-zA-Z0-9_-\") ] [ _val = split_ident(_1) ];\n</code></pre>\n\n<p>See <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/a53da73d81327a5d\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/fusion/adapted/std_pair.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix.hpp&gt;\n\nnamespace qi = boost::spirit::qi;\n\nusing NumberedIdent = std::pair&lt;std::string, int&gt;;\n\nnamespace Demo {\n    struct SplitIdent {\n        NumberedIdent operator()(std::vector&lt;char&gt; const&amp; v, bool&amp; pass) const {\n            std::string s(v.begin(), v.end());\n            try {\n                auto n = s.rfind('_');\n                pass = n &gt; 0;\n                return { s.substr(0, n), std::stoi(s.substr(n+1)) };\n            } catch(...) { \n                pass = false; return {s, 0}; \n            }\n        }\n    };\n\n    using It = std::string::const_iterator;\n    using namespace qi;\n\n    static boost::phoenix::function&lt;SplitIdent&gt; split_ident;\n\n    rule&lt;It, NumberedIdent()&gt; const rule\n        = lexeme [ +char_(\"a-zA-Z0-9_-\") ] [ _val = split_ident(_1, _pass) ];\n}\n\nint main() {\n    for (std::string const input : {\n           \"ab_bcd_123\",\n           \"ab-3_bcd_123 = 'something'\",\n           // failing:\n           \"ab_bcd_123_q = 'oops'\",\n           \"ab_bcd_123_ = 'oops'\",\n           \"_123 = 'oops'\",\n           \"_\",\n           \"q\",\n           \"\"\n           }) \n    {\n        NumberedIdent parsed;\n        Demo::It f = input.begin(), l = input.end();\n\n        bool ok = parse(f, l, Demo::rule, parsed);\n\n        if (ok) {\n            std::cout &lt;&lt; \"SUCCESS: ['\" &lt;&lt; parsed.first &lt;&lt; \"', \" &lt;&lt; parsed.second &lt;&lt; \"]\\n\";\n        } else {\n            std::cout &lt;&lt; \"parse failed ('\" &lt;&lt; input &lt;&lt; \"')\\n\";\n        }\n\n        if (f != l) {\n            std::cout &lt;&lt; \"  remaining input '\" &lt;&lt; std::string(f,l) &lt;&lt; \"'\\n\";\n        }\n    }\n\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>SUCCESS: ['ab_bcd', 123]\nSUCCESS: ['ab-3_bcd', 123]\n  remaining input ' = 'something''\n</code></pre>\n\n<p>And then all the failing test cases (by design):</p>\n\n<pre><code>parse failed ('ab_bcd_123_q = 'oops'')\n  remaining input 'ab_bcd_123_q = 'oops''\nparse failed ('ab_bcd_123_ = 'oops'')\n  remaining input 'ab_bcd_123_ = 'oops''\nparse failed ('_123 = 'oops'')\n  remaining input '_123 = 'oops''\nparse failed ('_')\n  remaining input '_'\nparse failed ('q')\n  remaining input 'q'\nparse failed ('')\n</code></pre>\n"}], "owner": {"reputation": 1280, "user_id": 332354, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f80b85253113490b563aaae3180f4b93?s=128&d=identicon&r=PG", "display_name": "Vikas", "link": "https://stackoverflow.com/users/332354/vikas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495668201, "creation_date": 1495665092, "question_id": 44169514, "link": "https://stackoverflow.com/questions/44169514/boost-spirit-parser-look-ahead-parsing", "title": "boost spirit parser look ahead parsing", "body": "<p>I want to parse a string which is of the form:\nstring_number.\nI am not sure how to write a grammar for boost qi parser.</p>\n\n<p>Right now my grammar looks like:\n<code>\n+qi::char_(\"a-zA-Z0-9_-\") >> lit('<code>_</code>') >> qi::int_\n</code></p>\n\n<p>But doesn't look like it works.\nExample strings are:\nab_bcd_123 --> tokens(ab_bcd, 123)\nab_123 ---> tokens(ab, 123)</p>\n"}, {"tags": ["c++", "boost", "c++14", "partial-specialization"], "answers": [{"comments": [{"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 1, "creation_date": 1495671373, "post_id": 44169756, "comment_id": 75356508, "body": "It&#39;s amazingly beautiful. Thanks."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1495668881, "last_edit_date": 1495668881, "creation_date": 1495666601, "answer_id": 44169756, "question_id": 44169509, "link": "https://stackoverflow.com/questions/44169509/boosthana-tag-of-implementation/44169756#44169756", "title": "boost::hana tag_of implementation", "body": "<blockquote>\n  <p>and I wonder why <code>std::is_same&lt;T, int&gt;{}()</code> (or with <code>::value</code> which is the same), is a more specialized partial specialization than <code>std::is_same&lt;T, unsigned&gt;{}()</code>, and why, if the condition is false for both case, <code>when&lt;condition&gt;</code> is more specialized.</p>\n</blockquote>\n\n<p>It's <em>not</em> more specialized. They're simply never both viable specializations. Let's walk through what happens when we try to instantiate <code>hana::tag_of&lt;int&gt;</code>.</p>\n\n<ol>\n<li>Fill out the default template arguments. In this case, the 2nd template parameter defaults to <code>void</code>, so we really have <code>hana::tag_of&lt;int, void&gt;</code>.</li>\n<li>Consider which partial specializations are viable. In this case, <em>none</em> of them are viable - our type (<code>int</code>) isn't a reference or cv-qualified and it isn't any kind of <code>when&lt;condition&gt;</code>. Since none of the specializations are viable, we instantiate the primary template.</li>\n<li>The primary <code>tag_of&lt;T, void&gt;</code> inherits from <code>tag_of&lt;T, when&lt;true&gt;&gt;</code>. So now we need to instantiate that second type, which means we redo step #2.</li>\n<li><p>Now, two different specializations are viable:</p>\n\n<pre><code>// from hana's core\ntemplate &lt;typename T, bool condition&gt; \nstruct tag_of&lt;T, when&lt;condition&gt;&gt;\n\n// yours\ntemplate &lt;typename T&gt;\nstruct tag_of&lt;T, when&lt;std::is_same&lt;T, int&gt;{}()&gt;&gt;\n</code></pre>\n\n<p>Note that your other specialization <em>is not viable</em> - because <code>std::is_same&lt;T, unsigned&gt;{}</code> is <code>false</code> and we're trying to match <code>when&lt;true&gt;</code>. </p></li>\n<li>Between those two specializations, yours is more specialized if we go through the partial ordering rules - so it's selected and instantiated.</li>\n</ol>\n\n<p>Hence, <code>hana::tag_of&lt;int&gt;::type</code> is <code>hana::tag_of&lt;int, void&gt;::type</code> is <code>hana::tag_of&lt;int, when&lt;true&gt;&gt;::type</code> is <code>hana::tag_of&lt;int, when&lt;std::is_same&lt;T, int&gt;{}()&gt;&gt;::type</code> is <code>my_tag</code>.</p>\n\n<hr />\n\n<blockquote>\n  <p>The thing is that I don't see why the <code>true</code> or <code>false</code> value of the when template can matter, if there's no default implementation for the <code>false</code> case.</p>\n</blockquote>\n\n<p>The above hopefully illustrates why it matters. We're not instantiating <code>when&lt;false&gt;</code> directly, but you could write a specialization which substitutes into <code>when&lt;false&gt;</code> (like your <code>when&lt;std::is_same&lt;T, unsigned&gt;{}()&gt;</code> specialization). </p>\n\n<blockquote>\n  <p>and why, if the condition is <code>false</code> for both cases, <code>when&lt;condition&gt;</code> is more specialized.</p>\n</blockquote>\n\n<p>Since we're instantiating <code>when&lt;true&gt;</code>, those specializations whose condition is <code>false</code> are simply excluded from the candidate set. The list of viable specialization is just reduced to the one that hana provides directly. It's not \"more specialized\" - it's solely viable.</p>\n\n<hr />\n\n<p>Also worth noting that <code>tag_of</code> gives you multiple ways to specialization. You can either provide some boolean condition <em>or</em> use <code>void_t</code>. Or, you could just specialize top-level:</p>\n\n<pre><code>template &lt;&gt;\nstruct tag_of&lt;int, void&gt; {\n    using type = my_tag;\n};\n</code></pre>\n\n<p>That would short circuit at step #2 above, skipping all the other instantiations. </p>\n"}], "owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 2, "accepted_answer_id": 44169756, "answer_count": 1, "score": 4, "last_activity_date": 1495668881, "creation_date": 1495665071, "last_edit_date": 1495666181, "question_id": 44169509, "link": "https://stackoverflow.com/questions/44169509/boosthana-tag-of-implementation", "title": "boost::hana tag_of implementation", "body": "<p>I wonder how the <code>when</code> specialization work when there's no case base for the <code>boost::hana::when&lt;false&gt;</code> case.</p>\n\n<p><code>boost::hana::tag_of</code> implementation:</p>\n\n<pre><code> template&lt;bool condition&gt;\n struct when; // forward declaration only\n\n template&lt;typename T, typename = void&gt;\n struct tag_of;\n\n template&lt;typename T, typename&gt;\n struct tag_of : tag_of&lt;T, when&lt;true&gt; &gt;\n {};\n\n template&lt;typename T, bool condition&gt;\n struct tag_of&lt;T, when&lt;condition&gt; &gt;\n {\n    using type = T;\n };\n</code></pre>\n\n<p>And a test example:</p>\n\n<pre><code> struct my_tag {};\n struct my_tag2 {};\n\n namespace boost {\n    namespace hana {\n\n       template&lt;class T&gt;\n       struct tag_of&lt;T, when&lt;std::is_same&lt;T, int&gt;{}()&gt; &gt;\n       {\n           using type = my_tag;\n       };\n\n       template&lt;class T&gt;\n       struct tag_of&lt;T, when&lt;std::is_same&lt;T, unsigned&gt;{}()&gt; &gt;\n       {\n          using type = my_tag2;\n       };\n    }\n}\n\nint main()\n{\n   using type = boost::hana::tag_of&lt;int&gt;::type;\n   std::cout &lt;&lt; std::is_same&lt;type, my_tag&gt;{} &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and I wonder why <code>std::is_same&lt;T, int&gt;{}()</code> (or with <code>::value</code> which is the same), is a more specialized partial specialization than <code>std::is_same&lt;T, unsigned&gt;{}()</code>, and why, if the condition is false for both cases, <code>when&lt;condition&gt;</code> is more specialized.</p>\n\n<p>I have done a lot of metafunctions and work with specializations and parameter packs and the sort, but in this case, there's something that I don't see.</p>\n\n<p>The thing is that I don't see why the <code>true</code> or <code>false</code> value of the <code>when</code> template can matter, if there's no default implementation for the <code>false</code> case.</p>\n"}, {"tags": ["c++", "multithreading", "openmp", "tbb", "tbb-flow-graph"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1495664301, "post_id": 44169351, "comment_id": 75354575, "body": "What is the meaning of &quot;the buffer blocks&quot;? Function calls block, not data structures."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1495664339, "post_id": 44169351, "comment_id": 75354591, "body": "@KerrekSB: You&#39;re right. I meant the read calls would block until there was data in the buffer"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1495664595, "post_id": 44169351, "comment_id": 75354682, "body": "I think you should take a look at the <a href=\"https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem\" rel=\"nofollow noreferrer\">consumer/producer problem</a>"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1495664790, "post_id": 44169351, "comment_id": 75354740, "body": "@cbuchart: I&#39;m familiar with that from a theoretical standpoint. I mean, in school we went over it and wrote primitive code to demonstrate it. That&#39;s where my design came from. The issue is a practical one. For actual software, I have no understanding whether that&#39;s really feasible"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1495666560, "post_id": 44169351, "comment_id": 75355279, "body": "I&#39;ve only used OpenMP for near-trivial parallelization problems (so take my understanding with caution) but it seems your use-case is more specialized than just throwing cores at a problem"}], "answers": [{"tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 1, "last_activity_date": 1495711312, "last_edit_date": 1495711312, "creation_date": 1495700341, "answer_id": 44175662, "question_id": 44169351, "link": "https://stackoverflow.com/questions/44169351/employing-parallelism-in-pipelined-execution/44175662#44175662", "title": "Employing parallelism in pipelined execution", "body": "<p>OpenMP is better suited for algorithms that easily span to multiple cores (SIMD). Other scenarios are possible but in your case I think a direct use of threads will work better and will be easier to code and maintain.</p>\n\n<p>I'm dividing my answer in two parts: a general solution <em>without</em> OpenMP, and some specific changes to use OpenMP.</p>\n\n<p>As mentioned in a comment, you're facing the producer/consumer problem, but twice: one thread is filling a buffer (producing an item), which then must be read (and modified) by a second one (consumed). The particularity of your problem is that this second thread is also a producer (the image to be drawn) and a third thread is the one in charge of consuming it (the visualizer).</p>\n\n<p>As you already know, the P/C problem is solved using a buffer (probably a circular buffer or a queue of produced items), where each element of the buffer is marked as produced or consumed, and where threads have exclusive access when adding or taking items from it.</p>\n\n<hr>\n\n<p>Lets use the queue approach with your problem in following example program.</p>\n\n<ul>\n<li>Produced items will be stored in a queue. The front of the queue contains the oldest elements, those that must be consumed first.</li>\n<li>There are two queues: one for data produced by the first manipulator (and to be consumed by the second manipulator), and another one for data produced by the second manipulator (and that is going to be visualized by another thread).</li>\n<li>The production phase is simple: gain exclusive access to the corresponding queue and insert the element at the end.</li>\n<li>Consumption is similar but must wait for the queue to have at least one element (be not empty).</li>\n<li>I've added some <em>sleeps</em> to simulate other operations.</li>\n<li>The stop condition is for illustration purposes.</li>\n</ul>\n\n<hr>\n\n<p><em>Note: I'm assuming you have access to a C++11 compiler for the sake of simplicity. Implementations using other APIs are relatively similar.</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;list&gt;\n\nusing namespace std::chrono_literals;\n\nstd::mutex g_data_produced_by_m1_mutex;\nstd::list&lt;int&gt; g_data_produced_by_m1;\n\nstd::mutex g_data_produced_by_m2_mutex;\nstd::list&lt;int&gt; g_data_produced_by_m2;\n\nstd::atomic&lt;bool&gt; stop = false;\n\nvoid manipulator1_kernel()\n{\n  while (!stop) {\n    // Producer 1: generate data\n    {\n      std::lock_guard&lt;std::mutex&gt; lock(g_data_produced_by_m1_mutex);\n      g_data_produced_by_m1.push_back(rand());\n    }\n    std::this_thread::sleep_for(100ms);\n  }\n}\n\nvoid manipulator2_kernel()\n{\n  int data;\n\n  while (!stop) {\n    // Consumer 1\n    while (!stop) { // wait until there is an item to be consumed\n      {\n        std::lock_guard&lt;std::mutex&gt; lock(g_data_produced_by_m1_mutex);\n        if (!g_data_produced_by_m1.empty()) { // is there data to be consumed?\n          data = g_data_produced_by_m1.front(); // consume\n          g_data_produced_by_m1.pop_front();\n          break;\n        }\n      }\n      std::this_thread::sleep_for(100ms);\n    }\n\n    // Producer 2: modify and send to the visualizer\n    {\n      std::lock_guard&lt;std::mutex&gt; lock(g_data_produced_by_m2_mutex);\n      g_data_produced_by_m2.push_back(5 * data);\n    }\n\n    std::this_thread::sleep_for(100ms);\n  }\n}\n\nvoid visualizer_kernel()\n{\n  int data;\n\n  while (!stop) {\n    // Consumer 2\n    while (!stop) { // wait until there is an item to be visualized\n      {\n        std::lock_guard&lt;std::mutex&gt; lock(g_data_produced_by_m2_mutex);\n        if (!g_data_produced_by_m2.empty()) {\n          data = g_data_produced_by_m2.front();\n          g_data_produced_by_m2.pop_front();\n          break;\n        }\n      }\n      std::this_thread::sleep_for(100ms);\n    }\n\n    std::cout &lt;&lt; data &lt;&lt; std::endl; // render to display\n    std::this_thread::sleep_for(100ms);\n\n    if (data % 8 == 0) stop = true; // some stop condition for the example\n  }\n}\n\nint main()\n{\n  std::thread manipulator1(manipulator1_kernel);\n  std::thread manipulator2(manipulator2_kernel);\n  std::thread visualizer(visualizer_kernel);\n\n  visualizer.join();\n  manipulator2.join();\n  manipulator1.join();\n\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>If you still want to use OpenMP, probably the closest thing you can find are <a href=\"https://en.wikibooks.org/wiki/OpenMP/Tasks\" rel=\"nofollow noreferrer\">tasks</a> (since OpenMP 3.0 I think). I haven't used them very much, but above program can be rewritten like:</p>\n\n<pre><code>int main()\n{\n  #pragma omp parallel\n  {\n    #pragma omp task\n    manipulator1_kernel();\n    #pragma omp task\n    manipulator2_kernel();\n    #pragma omp task\n    visualizer_kernel();\n\n    #pragma omp taskwait\n  }    \n\n  return 0;\n}\n</code></pre>\n\n<p>The rest of the code could be changed to use OpenMP features too, but I think this answers your question.</p>\n\n<p>The main problem with this approach is that you have to create a code-block for tasks to live within the OpenMP <code>parallel</code>, easily complicating the rest of your application logic and structure.</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 2882509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8b29c7250f8af22d1ae2effe57589b?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Fedotov", "link": "https://stackoverflow.com/users/2882509/aleksei-fedotov"}, "is_accepted": false, "score": 1, "last_activity_date": 1496666724, "creation_date": 1496666724, "answer_id": 44369244, "question_id": 44169351, "link": "https://stackoverflow.com/questions/44169351/employing-parallelism-in-pipelined-execution/44369244#44369244", "title": "Employing parallelism in pipelined execution", "body": "<p>To solve this particular problem Intel\u00ae Threading Building Blocks library includes special constructions. <a href=\"http://opentbb.org/\" rel=\"nofollow noreferrer\">Intel\u00ae TBB</a> is cross-platform library that aids in multithreading programming. \nWe could look at the entities involved in your application as at four different task providers. One type of tasks is input tasks - those that provide input data, another type of tasks is provided by the first manipulation routine, and so on.</p>\n\n<p>Thus, the only thing the user needs to do is to provide the body for those tasks. There are several APIs in the library for specifying what bodies to be processed and how to do it in parallel. Everything else (here I mean thread creation, synchronization between task execution, work balancing, etc.) is done by the library.</p>\n\n<p>The simplest variant of the solution that came to my mind is the using of <a href=\"https://www.threadingbuildingblocks.org/docs/help/hh_goto.htm?index.htm#reference/algorithms/parallel_pipeline_func.html\" rel=\"nofollow noreferrer\">parallel_pipeline</a> function. Here is the prototype:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"tbb/pipeline.h\"\nusing namespace tbb;\n\nint main() {\n    parallel_pipeline(/*specify max number of bodies executed in parallel, e.g.*/16,\n        make_filter&lt;void, input_data_type&gt;(\n            filter::serial_in_order, // read data sequentially\n            [](flow_control&amp; fc) -&gt; input_data_type {\n                if ( /*check some stop condition: EOF, etc.*/ ) {\n                    fc.stop();\n                    return input_data_type(); // return dummy value\n                }\n                auto input_data = read_data();\n                return input_data;\n            }\n        ) &amp;\n        make_filter&lt;input_data_type, manipulator1_output_type&gt;(\n            filter::parallel, // process data in parallel by the first manipulator\n            [](input_data_type elem) -&gt; manipulator1_output_type {\n                auto processed_elem = manipulator1::process(elem);\n                return processed_elem;\n            }\n        ) &amp;\n        make_filter&lt;manipulator1_output_type, manipulator2_output_type&gt;(\n            filter::parallel, // process data in parallel by the second manipulator\n            [](manipulator1_output_type elem) -&gt; manipulator2_output_type {\n                auto processed_elem = manipulator2::process(elem);\n                return processed_elem;\n            }\n        ) &amp;\n        make_filter&lt;manipulator2_output_type, void&gt;(\n            filter::serial_in_order, // visualize frame by frame\n            [](manipulator2_output_type elem) {\n                visualize(elem);\n            }\n        )\n    );\n    return 0;\n}\n</code></pre>\n\n<p>provided that necessary functions (read_data, visualize) are implemented. Here <code>input_data_type</code>, <code>manipulator1_output_type</code>, etc. are the types that are passed between pipeline stages, and manipulator's <code>process</code> functions do necessary computation on the passed arguments.</p>\n\n<p>BTW, to avoid working with locks and other synchronization primitives, you can use concurrent_bounded_queue from the library and put your input data into this queue, by possibly different thread (e.g. dedicated to IO operations), as simple as <code>concurrent_bounded_queue_instance.push(elem)</code>, and then read it via <code>input_data_type elem; concurrent_bounded_queue_instance.pop(elem)</code>. Note that popping an item is a blocking operation here. <code>concurrent_queue</code> provides non-blocking <code>try_pop</code> alternative.</p>\n\n<p>The other possibility is to use <a href=\"https://www.threadingbuildingblocks.org/docs/help/hh_goto.htm?index.htm#reference/flow_graph.html\" rel=\"nofollow noreferrer\"><code>tbb::flow_graph</code></a> and its nodes for organizing the same pipelining scheme. Take a look at two examples that describe <a href=\"https://www.threadingbuildingblocks.org/docs/help/hh_goto.htm?index.htm#reference/flow_graph/dependency_flow_graph_example.html\" rel=\"nofollow noreferrer\">dependency</a> and <a href=\"https://www.threadingbuildingblocks.org/docs/help/hh_goto.htm?index.htm#reference/flow_graph/message_flow_graph_example.html\" rel=\"nofollow noreferrer\">data</a> flow graphs. You might need to use <a href=\"https://www.threadingbuildingblocks.org/docs/help/hh_goto.htm?index.htm#reference/flow_graph/sequencer_node_cls.html\" rel=\"nofollow noreferrer\">sequencer_node</a> for correct ordering of items execution (if necessary).</p>\n\n<p>It is worth reading the SO questions marked by <a href=\"/questions/tagged/tbb\" class=\"post-tag\" title=\"show questions tagged &#39;tbb&#39;\" rel=\"tag\">tbb</a> tag to see how other people use this library.</p>\n"}, {"tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": false, "score": 0, "last_activity_date": 1496764098, "creation_date": 1496764098, "answer_id": 44394551, "question_id": 44169351, "link": "https://stackoverflow.com/questions/44169351/employing-parallelism-in-pipelined-execution/44394551#44394551", "title": "Employing parallelism in pipelined execution", "body": "<p>have you implemented single-threaded version? profiled? </p>\n\n<p>they are crucial steps, w/o them you can get the optimal implementation of your highly-parallel design just to realise that the bottleneck is I/O of your buffers and/or thread synchronisation and/or false sharing and/or cache misses or similar issues. </p>\n\n<p>I'd first try a simple thread pool with tasks that do all steps sequentially. Then after analysing how it works, what is CPU consumption etc. I'd experiment with more sophisticated tools <em>always comparing their performance with the first simple edition</em></p>\n"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 44175662, "answer_count": 3, "score": 1, "last_activity_date": 1513873124, "creation_date": 1495664210, "last_edit_date": 1496762857, "question_id": 44169351, "link": "https://stackoverflow.com/questions/44169351/employing-parallelism-in-pipelined-execution", "title": "Employing parallelism in pipelined execution", "body": "<p>I am trying to develop a pipeline in which data is first read and processed, manipulated once, manipulated in a different way, and then displayed. I have a design in mind in which the data IO feeds into a buffer that is read by the first manipulator. Subsequently that first manipulator writes to another buffer which is read when possible by the second manipulator. Lastly, the output of the second manipulator is written to a display buffer which is read by the visualizer and displayed using OpenGL.</p>\n\n<p>In my mind this is a fairly straightforward parallel problem in which each task has its own thread and they communicate via data buffers. However, all the tutorials I've come across for threaded programs seem to suggest that multithreading is something to be left up to some middleware (like OpenMP) that decides how to divide the workload.</p>\n\n<p>I'm new to developing multithreaded applications, so this may be a dumb question, but is what I've described feasible and can it be done with middleware like OpenMP? I realize the obvious answer is \"try it,\" and I want to, but the tutorials don't shed any light on *how* to try it. </p>\n"}, {"tags": ["android", "c++", "c++11", "android-instant-apps", "android-studio-3.0"], "comments": [{"owner": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 1, "creation_date": 1495676497, "post_id": 44169245, "comment_id": 75357769, "body": "By &quot;publish&quot; did you mean to say deploy to Google Play Store? You can inspect your instant app zip file using Apk Analyzer to make sure your libraries are bundled."}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495676606, "post_id": 44169245, "comment_id": 75357795, "body": "@Anirudh by &#39;publish&#39; I mean to a device or simulator... edited the question, thanks!"}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495677228, "post_id": 44169245, "comment_id": 75357942, "body": "@Anirudh I am able to generate a signed APK, and upon inspection the library is bundled with the feature-debug.apk but not the base-debug.apk. This is what I would expect given the gradle config, though."}, {"owner": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495691940, "post_id": 44169245, "comment_id": 75361772, "body": "Android Studio 3.0 preview Generate Signed APK feature has a bug currently where the final zip doesn&#39;t include all feature apks. Use Gradle SigningConfig in each feature module&#39;s gradle file to sign your feature apks."}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495692271, "post_id": 44169245, "comment_id": 75361907, "body": "@Anirudh That&#39;s good to know... but really I&#39;m not even concerned about the signed APK at this point... I just need to test the instant app on a device or simulator."}, {"owner": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495692328, "post_id": 44169245, "comment_id": 75361931, "body": "Upload your sample to Drive and I can take a look"}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "edited": false, "score": 0, "creation_date": 1495692699, "post_id": 44169245, "comment_id": 75362095, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/145088/discussion-between-spanndemic-and-anirudh\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1156, "user_id": 1473401, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/AhZUr.jpg?s=128&g=1", "display_name": "alexm", "link": "https://stackoverflow.com/users/1473401/alexm"}, "edited": false, "score": 0, "creation_date": 1542218380, "post_id": 44169245, "comment_id": 93493146, "body": "any news on this issue? I&#39;m having the same problem"}, {"owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "reply_to_user": {"reputation": 1156, "user_id": 1473401, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/AhZUr.jpg?s=128&g=1", "display_name": "alexm", "link": "https://stackoverflow.com/users/1473401/alexm"}, "edited": false, "score": 0, "creation_date": 1542309196, "post_id": 44169245, "comment_id": 93533240, "body": "@alexm no news... I just tried the same steps with the latest Android studio but had the same result."}], "answers": [{"tags": [], "owner": {"reputation": 2514, "user_id": 562919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a2dc3ec9c0e7beae1da0213093f953?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/562919/anirudh"}, "is_accepted": false, "score": 3, "last_activity_date": 1495735629, "creation_date": 1495735629, "answer_id": 44187095, "question_id": 44169245, "link": "https://stackoverflow.com/questions/44169245/android-instant-app-with-native-c-library-not-publishing-to-device-simulator-r/44187095#44187095", "title": "Android Instant App with Native C++ Library not publishing to device/simulator running Android N", "body": "<blockquote>\n  <p>Does publishing a signed APK work?</p>\n</blockquote>\n\n<p>Android Studio 3.0 preview Generate Signed APK feature has a bug currently where the final zip doesn't include all feature apks. Use Gradle SigningConfig in each feature module's gradle file to sign your feature apks</p>\n\n<blockquote>\n  <p>Does adding the C++ library to both APKs work?</p>\n</blockquote>\n\n<p>Not required. Adding to base feature apk should be enough</p>\n\n<p>The actual crash is known issue with NDK support for Android Instant Apps on Android M/N. The app works on Android O emulator</p>\n"}], "owner": {"reputation": 1573, "user_id": 2490989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pjhbG.jpg?s=128&g=1", "display_name": "stephenspann", "link": "https://stackoverflow.com/users/2490989/stephenspann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 5, "answer_count": 1, "score": 5, "last_activity_date": 1520417448, "creation_date": 1495663590, "last_edit_date": 1520417448, "question_id": 44169245, "link": "https://stackoverflow.com/questions/44169245/android-instant-app-with-native-c-library-not-publishing-to-device-simulator-r", "title": "Android Instant App with Native C++ Library not publishing to device/simulator running Android N", "body": "<p>Is there a way to get an Android Instant App working with a native C++ library?</p>\n\n<p>I'm attempting to publish an Android Instant App to a device/simulator, but ran into problems with my native C++ library. It publishes fine as an installable app, but fails to find the library when published as an Instant App.</p>\n\n<p>To eliminate any other issues, I started a new project in <a href=\"https://developer.android.com/studio/archive.html\" rel=\"nofollow noreferrer\">Android Studio 3.0 (Canary 1 171.4010489)</a> with the new project wizard and selected the following settings:</p>\n\n<p><strong>First Page:</strong></p>\n\n<ul>\n<li>Include C++ support checked</li>\n</ul>\n\n<p><strong>Second Page:</strong></p>\n\n<ul>\n<li>Phone and Tablet selected</li>\n<li>Include Android Instant App support checked</li>\n</ul>\n\n<p><strong>Sixth Page:</strong></p>\n\n<ul>\n<li>C++ Standard set to 'C++11'</li>\n<li>Exceptions Support (-fexceptions) checked</li>\n<li>Runtime Type Information Support (-frtti) checked</li>\n</ul>\n\n<p>The resulting project will publish as an installable app (showing the 'Hello from C++' screen), but not an instant app... it gives the following error that it can't find the library, which is the same error I get in my actual app's project:</p>\n\n<p><code>couldn't find \"libnative-lib.so\"</code></p>\n\n<p><strong>Full error:</strong></p>\n\n<pre><code>05-24 17:48:30.316 7519-7519/? E/AndroidRuntime: FATAL EXCEPTION: main\n     Process: com.mycompany.instantapp, PID: 7519\n     java.lang.UnsatisfiedLinkError: byc[DexPathList[[zip file \"/data/user/0/com.google.android.instantapps.supervisor/files/atom-cache/com.mycompany.instantapp/atom-download--feature-1495662507463/feature.jar\"],nativeLibraryDirectories=[/data/user/0/com.google.android.instantapps.supervisor/files/native-lib/com.mycompany.instantapp, /system/lib, /vendor/lib]]] couldn't find \"libnative-lib.so\"\n     ...\n</code></pre>\n\n<p>I'm pasting the relevant gradle files below (all generated by Android Studio):</p>\n\n<p><strong>app/build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"26.0.0 rc2\"\n\n    defaultConfig {\n        applicationId \"com.mycompany.instantapp\"\n        minSdkVersion 23\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation project(':feature')\n    implementation project(':base')\n}\n</code></pre>\n\n<p><strong>base/build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.feature'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"26.0.0 rc2\"\n    baseFeature true\n    defaultConfig {\n        minSdkVersion 23\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    feature project(':feature')\n    compile 'com.android.support:appcompat-v7:25.+'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n}\n</code></pre>\n\n<p><strong>feature/build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.feature'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"26.0.0 rc2\"\n    defaultConfig {\n        minSdkVersion 23\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        externalNativeBuild {\n            cmake {\n                cppFlags \"-std=c++11 -frtti -fexceptions\"\n            }\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    externalNativeBuild {\n        cmake {\n            path \"CMakeLists.txt\"\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    implementation project(':base')\n    testCompile 'junit:junit:4.12'\n\n}\n</code></pre>\n\n<p><strong>instantapp/build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.instantapp'\n\ndependencies {\n    implementation project(':feature')\n    implementation project(':base')\n}\n</code></pre>\n\n<h2>Updates:</h2>\n\n<h3>I've filed an issue with Google:</h3>\n\n<p>Link: <a href=\"https://issuetracker.google.com/issues/62074663\" rel=\"nofollow noreferrer\">Google Issue Tracker</a></p>\n\n<p>Though I feel like the tools to make this happen are already available (Gradle, CMake, NDK, etc)</p>\n\n<p>Also thanks @Anirudh for letting me know that this is a known issue on Android N.</p>\n\n<h3>Does publishing an Instant App with no C++ library work on my device?</h3>\n\n<p>Yes... if I create a new Android Studio project with only <code>Include Android Instant App support</code> it publishes to my Samsung Galaxy 7S and shows the 'Hello World!' screen.</p>\n\n<h3>Does publishing a signed APK work?</h3>\n\n<p>Generating a signed APK works, and upon inspection the native C++ library is bundled with the <code>feature-debug.apk</code> but not the <code>base-debug.apk</code>. This is what I would expect given the gradle configuration, but doesn't explain why it won't publish to a device/simulator.</p>\n\n<p>I haven't tried sideloading these APKs... but I'm skeptical if that is even possible given that the Instant App is never installed... ex: how would you even launch it after sideloading it (click a url?)</p>\n\n<h3>Does adding the C++ library to both APKs work?</h3>\n\n<p>I've tried adding the <code>externalNativeBuild</code> gradle properties to both the <code>base/build.gradle</code> and the <code>feature/build.gradle</code> files, but the same error still occurs. I verified that the native C++ library is then included in both APKs by inspecting both the <code>feature-debug.apk</code> and the <code>base-debug.apk</code> after generating a signed APK.</p>\n\n<p><strong>modified base/build.gradle:</strong></p>\n\n<pre><code>apply plugin: 'com.android.feature'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"26.0.0 rc2\"\n    baseFeature true\n    defaultConfig {\n        minSdkVersion 23\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        externalNativeBuild {\n            cmake {\n                cppFlags \"-std=c++11 -frtti -fexceptions\"\n            }\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    externalNativeBuild {\n        cmake {\n            path \"../feature/CMakeLists.txt\"\n        }\n    }\n}\n\ndependencies {\n    feature project(':feature')\n    compile 'com.android.support:appcompat-v7:25.+'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "edited": false, "score": 2, "creation_date": 1495663733, "post_id": 44169195, "comment_id": 75354400, "body": "Debug your code always. Step through and see what is the value of <code>random</code> and which case statement is being called? You would have figured out this way by yourself."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495663745, "post_id": 44169195, "comment_id": 75354403, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44169195/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495664093, "post_id": 44169195, "comment_id": 75354509, "body": "Maybe you should use the random number you generated for the selection..."}], "answers": [{"tags": [], "owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "is_accepted": false, "score": 0, "last_activity_date": 1495663443, "creation_date": 1495663443, "answer_id": 44169216, "question_id": 44169195, "link": "https://stackoverflow.com/questions/44169195/c-need-help-random-switch-statements/44169216#44169216", "title": "C++ need help, random switch statements", "body": "<p>You switch by <code>selection</code> variable, which is explicitly set to 5 right before the switch itself. Consider switching by <code>random</code> variable.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "edited": false, "score": 0, "creation_date": 1495664079, "post_id": 44169222, "comment_id": 75354504, "body": "Yes that&#39;s exactly what i need it to do."}, {"owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "reply_to_user": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "edited": false, "score": 0, "creation_date": 1495664309, "post_id": 44169222, "comment_id": 75354580, "body": "Hi @Zain N., if this or any answer has solved your question please consider accepting it by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}, {"owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "reply_to_user": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "edited": false, "score": 0, "creation_date": 1495664788, "post_id": 44169222, "comment_id": 75354739, "body": "<code>selection = rand() % 5 + 1; &#47;&#47; selection in the range 1 to 5</code> . Read more about generating random numbers <a href=\"http://www.cplusplus.com/reference/cstdlib/rand/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "edited": false, "score": 0, "creation_date": 1495665013, "post_id": 44169222, "comment_id": 75354821, "body": "Awesome! Thanks for the help!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "edited": false, "score": 0, "creation_date": 1495665164, "post_id": 44169222, "comment_id": 75354867, "body": "@ZainN. Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1495713512, "post_id": 44169222, "comment_id": 75373926, "body": "better use the functions from &lt;random&gt;"}], "tags": [], "owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "is_accepted": true, "score": 0, "last_activity_date": 1495663471, "creation_date": 1495663471, "answer_id": 44169222, "question_id": 44169195, "link": "https://stackoverflow.com/questions/44169195/c-need-help-random-switch-statements/44169222#44169222", "title": "C++ need help, random switch statements", "body": "<p>Because <code>selection = 5;</code></p>\n\n<p>You want to choose <code>selection</code> with a random value between 1 - 5, right?</p>\n"}], "owner": {"reputation": 1, "user_id": 7537943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8e3af81186437109702f8e984b5c41?s=128&d=identicon&r=PG&f=1", "display_name": "Zain N.", "link": "https://stackoverflow.com/users/7537943/zain-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "closed_date": 1495671883, "accepted_answer_id": 44169222, "answer_count": 2, "score": -4, "last_activity_date": 1495663619, "creation_date": 1495663337, "last_edit_date": 1495663619, "question_id": 44169195, "link": "https://stackoverflow.com/questions/44169195/c-need-help-random-switch-statements", "closed_reason": "Not suitable for this site", "title": "C++ need help, random switch statements", "body": "<p>I'm writing a code which is kind of like a fortune teller but I'm having some trouble with my switch statements. When executed the code prints out the same message and doesn't pick a random case like its supposed to! can someone please help me! thank you!\nheres my code</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid printGreeting(); // function prototype\n\nint main()\n{\n    int choice;\n    printGreeting();\n    cout &lt;&lt; \"Would you like to see your fortune?\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press 1 to see your fortune or 2 if you don't!\" &lt;&lt; endl;\n    cin &gt;&gt; choice;\n\n    if (choice == 1)\n    {\n        cout &lt;&lt; \"Great! Your fortune is: \";\n        // Function to generate random number\n        void rand1();\n        srand(time(NULL));\n        int MAX_NUM;\n        MAX_NUM = 5;\n        int random = rand() % MAX_NUM;\n        cout &lt;&lt; random &lt;&lt; endl;\n\n        int selection;\n        selection = 5;\n\n        switch (selection)\n        {\n            case 1:\n                cout &lt;&lt; \"Change can hurt, but it leads a path to something better!\";\n                break;\n            case 2:\n                cout &lt;&lt; \"If you have something good in your life don't let it go!\";\n                break;\n            case 3:\n                cout &lt;&lt; \"You're in for a treat today.\";\n                break;\n            case 4:\n                cout &lt;&lt; \"Land is always on the mind of a flying bird\";\n                break;\n            case 5:\n                cout &lt;&lt; \"A dream you have will come true\";\n                break;\n        }\n\n        return 0;\n    }\n    else if (choice == 2)\n    {\n        cout &lt;&lt; \"Okay goodbye!\" &lt;&lt; endl;\n    }\n}\n\n// Prints greeting message\nvoid printGreeting() // function header\n{\n    cout &lt;&lt; \"Hello! Welcome to your fortune teller!\" &lt;&lt; endl; // function body\n}\n</code></pre>\n"}, {"tags": ["c++", "lambda", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 311724, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9321ed5f3c828c263f1a5a5a874c85b5?s=128&d=identicon&r=PG", "display_name": "ZeroDefect", "link": "https://stackoverflow.com/users/311724/zerodefect"}, "edited": false, "score": 0, "creation_date": 1495702316, "post_id": 44170313, "comment_id": 75367174, "body": "Thanks for that - short, sweet, and elegant solution. A bit embarrassed that I wasn&#39;t calling post(..) :/  One of my follow-up questions was to do with deadlocks.  There is a similar question on SO about such issues, but I didn&#39;t understand under what conditions a deadlock would arise. With your explanation, the problem is all clear now. Thanks again."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1495670946, "creation_date": 1495670946, "answer_id": 44170313, "question_id": 44169134, "link": "https://stackoverflow.com/questions/44169134/use-boost-strand-in-conjunction-with-stdfuture/44170313#44170313", "title": "Use Boost strand in conjunction with std::future", "body": "<p>You wrap the task, but you never post it. Therefore, the wrapped task is immediately destructed, and with that the promise.</p>\n\n<p>There's another pitfall, things only work if you run the io_service on a different thread than the one blocking for the future... Otherwise you have created a deadlock:</p>\n\n<ul>\n<li><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/f41fc4cc15c71b90\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong> deadlock</li>\n</ul>\n\n<p>Now that you have multiple threads, you need to avoid the race-condition where the service exits before the task is posted in the first place.</p>\n\n<blockquote>\n  <h3>Bonus:</h3>\n  \n  <p>I'd suggest a far simpler take on the wrapper:</p>\n\n<pre><code>template &lt;typename Task&gt;\nauto post_future_to_strand(cb_strand_ptr apStrand, Task task)\n{\n    auto package = std::make_shared&lt;std::packaged_task&lt;decltype(task())()&gt; &gt;(task);\n    auto future  = package-&gt;get_future();\n\n    apStrand-&gt;post([package] { (*package)(); });\n    return future;\n}\n</code></pre>\n</blockquote>\n\n<h3>Full Demo</h3>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2b4487e36f767155\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;future&gt;\n#include &lt;iostream&gt;\n\nusing cb_strand_ptr = boost::asio::strand*;\n\n//////////////////////////////////////////////////////////////////////////\ntemplate &lt;typename Task&gt;\nauto post_future_to_strand(cb_strand_ptr apStrand, Task task)\n{\n    auto package = std::make_shared&lt;std::packaged_task&lt;decltype(task())()&gt; &gt;(task);\n    auto future  = package-&gt;get_future();\n\n    apStrand-&gt;post([package] { (*package)(); });\n    return future;\n}\n\nstruct Foo {\n    boost::asio::strand s;\n    cb_strand_ptr m_apStrand = &amp;s;\n\n    Foo(boost::asio::io_service&amp; svc) : s{svc} {}\n\n    void do_it() {\n        std::future&lt;int&gt; f = post_future_to_strand(m_apStrand, std::bind(&amp;Foo::bar, this));\n        std::cout &lt;&lt; \"foo::bar() -&gt; int is \" &lt;&lt; f.get() &lt;&lt; std::endl;\n    }\n\n    int bar() { \n        return 42; \n    }\n};\n\nint main() {\n    boost::asio::io_service svc;\n    auto lock = std::make_unique&lt;boost::asio::io_service::work&gt;(svc); // prevent premature exit\n\n    std::thread th([&amp;]{ svc.run(); });\n\n    Foo foo(svc);\n    foo.do_it(); \n\n    lock.reset(); // allow service to exit\n    th.join();\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>foo::bar() -&gt; int is 42\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 311724, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9321ed5f3c828c263f1a5a5a874c85b5?s=128&d=identicon&r=PG", "display_name": "ZeroDefect", "link": "https://stackoverflow.com/users/311724/zerodefect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 1, "accepted_answer_id": 44170313, "answer_count": 1, "score": 2, "last_activity_date": 1495670946, "creation_date": 1495663034, "question_id": 44169134, "link": "https://stackoverflow.com/questions/44169134/use-boost-strand-in-conjunction-with-stdfuture", "title": "Use Boost strand in conjunction with std::future", "body": "<p>I have come across a use case where I would like to use a Boost strand in conjunction with a std::future.</p>\n\n<p>To reduce code duplication, I have written a generic function which will post a task to a boost strand and return the future.</p>\n\n<pre><code>// Some definitions first...\ntypedef boost::asio::io_service::strand     cb_strand;\ntypedef std::shared_ptr&lt; cb_strand &gt;        cb_strand_ptr;\n</code></pre>\n\n<p>The code looks something like:</p>\n\n<pre><code>//////////////////////////////////////////////////////////////////////////\ntemplate &lt;class Task&gt;\nauto post_future_to_strand(cb_strand_ptr apStrand, Task task)\n{\n    using return_type = decltype(task());\n\n    auto promise = std::make_shared&lt;std::promise&lt;return_type&gt;&gt;();\n    auto future = promise-&gt;get_future();\n\n    apStrand-&gt;wrap\n        (\n            [promise, task]()\n            {\n                try\n                {\n                    promise-&gt;set_value(task());\n                }\n                catch (...)\n                {\n                    // LOG ERROR ...\n\n\n                    // NOTE: Exceptions can be thrown when setting the exception!\n                    try\n                    {\n                        promise-&gt;set_exception(std::current_exception());\n                    }\n                    catch (...)\n                    {\n                        //LOG ERROR ...\n                    }\n                }\n            }\n        );\n\n    return future;\n};\n</code></pre>\n\n<p>I then hoped to post a future to a strand as presented in the following example:</p>\n\n<pre><code>std::future&lt;int&gt; f = post_future_to_strand(m_apStrand, std::bind(&amp;foo::bar, this))\nstd::cout &lt;&lt; \"foo::bar() -&gt; int is \" &lt;&lt; f.get() &lt;&lt; std::endl;\n</code></pre>\n\n<p>Unfortunately, I get a runtime exception:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::future_error'\nwhat():  std::future_error: Broken promise\nSignal: SIGABRT (Aborted)\n</code></pre>\n\n<p>Having read the docs, I think I understand what a broken promise is and how the situation arises; however, I feel like I am capturing the promise in the lambda so all should be well.  I am a newcomer to this world of lambdas, so perhaps my understanding is amiss.</p>\n\n<ul>\n<li>Ubuntu Zesty</li>\n<li>GCC 6.3 (configured for C++14 with cmake)</li>\n</ul>\n"}, {"tags": ["javascript", "c++", "qt", "mobile", "qml"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5255670"}, "is_accepted": false, "score": 2, "last_activity_date": 1495669635, "last_edit_date": 1495669635, "creation_date": 1495668111, "answer_id": 44169973, "question_id": 44168962, "link": "https://stackoverflow.com/questions/44168962/how-to-decide-where-the-sqlite-file-is-stored-in-qml-localstorage/44169973#44169973", "title": "How to decide where the SQLite file is stored in QML LocalStorage", "body": "<p>According to <strong>openDatabaseSync()</strong> method <a href=\"http://doc.qt.io/qt-5/qtquick-localstorage-qmlmodule.html#opendatabasesync\" rel=\"nofollow noreferrer\">documentation</a>, the function prototype is:</p>\n\n<pre><code>object openDatabaseSync(string name, string version, string description, int estimated_size, jsobject callback(db))\n</code></pre>\n\n<blockquote>\n  <p><strong>name</strong> is the database name</p>\n  \n  <p><strong>version</strong> is the database version</p>\n  \n  <p><strong>description</strong> is the database display name </p>\n  \n  <p><strong>estimated_size</strong> is the database's estimated size, in bytes</p>\n  \n  <p><strong>callback</strong> is an optional parameter, which is invoked if the database has not yet been created.</p>\n</blockquote>\n\n<p>So there is no file name parameter. Again, according to <a href=\"http://doc.qt.io/qt-5/qtquick-localstorage-qmlmodule.html#detailed-description\" rel=\"nofollow noreferrer\">documentations</a>:</p>\n\n<blockquote>\n  <p>These databases are user-specific and QML-specific, but accessible to all QML applications. <strong>They are stored in the Databases subdirectory of QQmlEngine::offlineStoragePath(), currently as SQLite databases.</strong></p>\n</blockquote>\n\n<p>To be able to put your database files into some custom directory, you should use <strong>setOfflineStoragePath(const QString &amp;dir)</strong> function of your <strong>QQmlEngine</strong> or <strong>QQmlApplicationEngine</strong> instance.</p>\n\n<p>To see where your database files are currently in, use this C++ code:</p>\n\n<pre><code>QQmlApplicationEngine engine;\nengine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\nqDebug() &lt;&lt; engine.offlineStoragePath();\n</code></pre>\n\n<p>More info <a href=\"http://doc.qt.io/qt-5/qqmlengine.html#offlineStoragePath-prop\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://forum.qt.io/topic/3283/loading-sqlite-database-within-the-project-directory\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14105904, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiAEo2rS9WfRHld3ufaf2oAsvVlBN479gsRM8zO=k-s128", "display_name": "dev-Bilal", "link": "https://stackoverflow.com/users/14105904/dev-bilal"}, "is_accepted": false, "score": 0, "last_activity_date": 1607065926, "last_edit_date": 1607065926, "creation_date": 1607019978, "answer_id": 65131923, "question_id": 44168962, "link": "https://stackoverflow.com/questions/44168962/how-to-decide-where-the-sqlite-file-is-stored-in-qml-localstorage/65131923#65131923", "title": "How to decide where the SQLite file is stored in QML LocalStorage", "body": "<p>On Linux, it is <code>.local/share/*project_name*/QML/OfflineStorage/Databases</code></p>\n"}], "owner": {"reputation": 89, "user_id": 4347793, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-nK_ipTyvMd8/AAAAAAAAAAI/AAAAAAAAABQ/6r1neXZJpbA/photo.jpg?sz=128", "display_name": "Carlos Duarte", "link": "https://stackoverflow.com/users/4347793/carlos-duarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1607065926, "creation_date": 1495662244, "question_id": 44168962, "link": "https://stackoverflow.com/questions/44168962/how-to-decide-where-the-sqlite-file-is-stored-in-qml-localstorage", "title": "How to decide where the SQLite file is stored in QML LocalStorage", "body": "<p>I have this code:</p>\n\n<pre><code>import QtQuick 2.6\nimport QtQuick.Controls 2.1\nimport QtQuick.LocalStorage 2.0\n\nApplicationWindow {\nvisible: true\nwidth: 640\nheight: 480\ntitle: qsTr(\"Hello World\")\n\nproperty var db // the database of this application\nproperty string dbIdentifier: '/Users/cedo/desktop/test/DatabaseApplicationDB.db'\nproperty string dbVersion: '1.0'\nproperty string dbDescription: 'DatabaseApplicationDB'\nproperty int dbEstimatedSize: 1000000\n\nComponent.onCompleted: {\n    db = LocalStorage.openDatabaseSync(dbIdentifier, dbVersion, dbDescription, dbEstimatedSize);\n\n    db.transaction(function(tx) {\n        var sql = \"create table if not exists mytable(id integer)\";\n        tx.executeSql(sql);\n    });\n\n}\n}\n</code></pre>\n\n<p>The dbIdentifier works when the database is created but when I go to search for the db file in the desktop the file is not there. Where is it? Or how to decide where to put it?</p>\n"}, {"tags": ["c++", "opencv", "vector"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1495662434, "post_id": 44168908, "comment_id": 75353981, "body": "What was the error?"}, {"owner": {"reputation": 21, "user_id": 8060987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419abfd0e664f2e39a03387655bbe5af?s=128&d=identicon&r=PG&f=1", "display_name": "D R", "link": "https://stackoverflow.com/users/8060987/d-r"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1495662772, "post_id": 44168908, "comment_id": 75354103, "body": "I updated the error in the post."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 1497616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GuBgh.png?s=128&g=1", "display_name": "Matt Ford", "link": "https://stackoverflow.com/users/1497616/matt-ford"}, "reply_to_user": {"reputation": 21, "user_id": 8060987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419abfd0e664f2e39a03387655bbe5af?s=128&d=identicon&r=PG&f=1", "display_name": "D R", "link": "https://stackoverflow.com/users/8060987/d-r"}, "edited": false, "score": 0, "creation_date": 1495675446, "post_id": 44169785, "comment_id": 75357522, "body": "It seems to be an issue in OpenCV&#39;s getMat_() routine.  According to OpenCV&#39;s doc [<a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html?highlight=inputarray#inputarray]\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/core/doc/&hellip;</a> a vector&lt; vector &lt; T&gt;&gt; should work, as you state."}], "tags": [], "owner": {"reputation": 46, "user_id": 1497616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GuBgh.png?s=128&g=1", "display_name": "Matt Ford", "link": "https://stackoverflow.com/users/1497616/matt-ford"}, "is_accepted": true, "score": 0, "last_activity_date": 1495666790, "creation_date": 1495666790, "answer_id": 44169785, "question_id": 44168908, "link": "https://stackoverflow.com/questions/44168908/opencvmeanstddev-with-vectorvectordouble/44169785#44169785", "title": "opencv::meanStdDev with vector&lt;vector&lt;double&gt;&gt;", "body": "<p>Nothing in your code/post indicates where that error actually occurs.  Try wrapping the call in a try catch block, that may provide more information when you look at the exception in the debugger.</p>\n"}], "owner": {"reputation": 21, "user_id": 8060987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419abfd0e664f2e39a03387655bbe5af?s=128&d=identicon&r=PG&f=1", "display_name": "D R", "link": "https://stackoverflow.com/users/8060987/d-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 44169785, "answer_count": 1, "score": 0, "last_activity_date": 1495671253, "creation_date": 1495662007, "last_edit_date": 1495671253, "question_id": 44168908, "link": "https://stackoverflow.com/questions/44168908/opencvmeanstddev-with-vectorvectordouble", "title": "opencv::meanStdDev with vector&lt;vector&lt;double&gt;&gt;", "body": "<p>I want to calculate the mean and stdDev of a 2d vector using <code>cv::meanStdDev</code>. But it keeps getting error. Here is an example of my code</p>\n\n<pre><code>vector&lt;vector&lt;uchar&gt;&gt; v = {{1,2,3}, {4,5,6}};\nScalar mean, stddev;\nmeanStdDev(v, mean, stddev);\n</code></pre>\n\n<p><code>OpenCV Error: Assertion failed (0 &lt;= i &amp;&amp; i &lt; (int)vv.size()) in cv::_InputArray::getMat_, file C:\\build\\master_winpack-build-win64-vc14\\opencv\\modules\\core\\src\\matrix.cpp, line 1244</code></p>\n\n<p>If I change it to 1d vector. It works </p>\n\n<pre><code>vector&lt;uchar&gt; v = {1,2,3};\nScalar mean, stddev;\nmeanStdDev(v, mean, stddev);\n</code></pre>\n\n<p>The document states that <code>cv::meanStdDev</code> can take <code>vector&lt;vector&lt;_T&gt;&gt;</code> as InputArray. What did I do wrong here? Much appreciated. </p>\n"}, {"tags": ["c++", "algorithm", "function", "vector", "erase-remove-idiom"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495661441, "post_id": 44168747, "comment_id": 75353577, "body": "Compare size before and after?"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1495665408, "post_id": 44168874, "comment_id": 75354941, "body": "I would take a lambda instead of hardcoding it.  Then have remove multiples call it."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1495668289, "post_id": 44168874, "comment_id": 75355758, "body": "@Yakk, do you mean the <code>remove_if</code> predicate? If so you&#39;re right, and it should probably be a template parameterised on the container type and the predicate, but I just wanted to answer in the questions context."}], "tags": [], "owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "is_accepted": true, "score": 6, "last_activity_date": 1495661847, "creation_date": 1495661847, "answer_id": 44168874, "question_id": 44168747, "link": "https://stackoverflow.com/questions/44168747/erase-remove-if-idiom-was-anything-removed/44168874#44168874", "title": "erase-remove_if idiom - was anything removed?", "body": "<p>One idea would be to store the return value of <code>std::remove_if</code>, and compare it with the containers <code>end()</code> iterator before doing the <code>erase</code> like this:</p>\n\n<pre><code>bool removeMultiples(int multiple)\n{\n    auto it = std::remove_if(v.begin(), v.end(), [multiple](int i){return i%multiple == 0;});\n    bool any_change = it != v.end();\n    v.erase(it, v.end());\n    return any_change;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1495661932, "creation_date": 1495661932, "answer_id": 44168891, "question_id": 44168747, "link": "https://stackoverflow.com/questions/44168747/erase-remove-if-idiom-was-anything-removed/44168891#44168891", "title": "erase-remove_if idiom - was anything removed?", "body": "<p>There is no need to write the algorithms in one line. You can for example write</p>\n\n<pre><code>bool removeMultiples( int multiple )\n{\n    bool success;\n\n    auto it = std::remove_if(v.begin(), v.end(), [multiple](int i){return i%multiple == 0;});\n\n    if ( ( success = it != v.end() ) ) v.erase( it, v.end() );\n\n    return success;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1495665705, "creation_date": 1495665705, "answer_id": 44169622, "question_id": 44168747, "link": "https://stackoverflow.com/questions/44168747/erase-remove-if-idiom-was-anything-removed/44169622#44169622", "title": "erase-remove_if idiom - was anything removed?", "body": "<pre><code>template&lt;class C, class F&gt;\nbool remove_some(C&amp;c, F&amp;&amp;f){\n  using std::begin; using std::end;\n  auto it = std::remove_if(begin(c), end(c), std::forward&lt;F&gt;(f) );\n  bool r = it!=end(c);\n  c.erase(it, end(c));\n  return r;\n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>bool removeMultiples(std::vector&lt;int&gt;&amp; f, int multiple) {\n  return remove_some(v, [multiple](int i){return !(i%multiple);});\n}\n</code></pre>\n\n<p>is simple and clean.</p>\n"}], "owner": {"reputation": 5213, "user_id": 457488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3265ae55bf80e40f9fe031c6378306e6?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/457488/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "accepted_answer_id": 44168874, "answer_count": 3, "score": 2, "last_activity_date": 1600478747, "creation_date": 1495661287, "last_edit_date": 1600478747, "question_id": 44168747, "link": "https://stackoverflow.com/questions/44168747/erase-remove-if-idiom-was-anything-removed", "title": "erase-remove_if idiom - was anything removed?", "body": "<p>I'm creating an API which users will call to remove items from an internal vector.  They will pass in criteria to search the vector for elements to remove.  I'd like my API to return a boolean for if any elements were found and removed.</p>\n\n<p>I'm planning on using the <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">erase-remove idiom</a> to keep things simple and efficient.  I don't see an obvious way right off to detect that items were actually removed?  Is storing the number of elements in the vector before removing, and comparing the value, my best bet?</p>\n\n<p>Here is some (untested) sample code on this idiom:</p>\n\n<pre><code>std::vector&lt;int&gt; v = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n\nboolean removeMultiples(int multiple) {\n    v.erase( std::remove_if(v.begin(), v.end(), [multiple](int i){return i%multiple == 0;}), v.end() );\n    // return true if anything was removed\n}\n</code></pre>\n"}, {"tags": ["c++", "poker"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 6, "creation_date": 1495661173, "post_id": 44168693, "comment_id": 75353463, "body": "This is a better stated question than what usually gets posted here about this topic."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495661177, "post_id": 44168693, "comment_id": 75353467, "body": "There are usually <code>enum</code>&#39;s used to represent the card ranks."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1495661368, "post_id": 44168693, "comment_id": 75353549, "body": "@CaptainGiraffe And they wrote/kept the comments!"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1495661471, "post_id": 44168693, "comment_id": 75353588, "body": "@&#208;\u0430n we are starting from a very low bar here. I&#39;m reluctant to vote to close though."}, {"owner": {"reputation": 61, "user_id": 8039611, "user_type": "registered", "profile_image": "https://graph.facebook.com/1534549796597366/picture?type=large", "display_name": "David Bernal", "link": "https://stackoverflow.com/users/8039611/david-bernal"}, "edited": false, "score": 0, "creation_date": 1495661519, "post_id": 44168693, "comment_id": 75353606, "body": "Sorry forgot to mention that the base code was provided as a template so that&#39;s why it was done this way. The main.cpp was provided for us and we had to build around it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495662682, "post_id": 44168693, "comment_id": 75354068, "body": "@DavidBernal Your calls to <code>substr</code> that compare single character strings are not right, since the second parameter determines how many characters to count.  So specifying <code>2</code> as the second parameter is wrong when you compare to &quot;1&quot;, &quot;2&quot;, ... up to &quot;9&quot;."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1495663665, "post_id": 44168693, "comment_id": 75354388, "body": "There is indeed work in that question: context has been given, and code is commented. But what is the actual question and the expected answer if it is it only answerable? Is this an acceptable implementation, and is it possible to reach the goal with it: probably with slight fixes such as passing an external Deck to Hand::fillHand (you do not take a new deck for each hand but use the current one). Is it a nice implementation: definitely not. Should use enum and directly test enum (or at least ints) instead of first converting to string and testing substring. Is is on topic here ? IMHO it&#39;s not"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495663703, "post_id": 44168693, "comment_id": 75354395, "body": "Pro-tip: Use single characters to represent cards: <code>1D</code>, <code>2D</code>, ... <code>9D</code>, <code>TD</code>, <code>JD</code>, <code>QD</code>, <code>KD</code>, <code>1S</code>, ... This keeps your format extremely consistent and avoids things like having to parse irregular things like <code>11D</code>. This is virtually the standard in any online card game."}], "answers": [{"tags": [], "owner": {"reputation": 1749, "user_id": 284013, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4OI6J.jpg?s=128&g=1", "display_name": "Erik Hermansen", "link": "https://stackoverflow.com/users/284013/erik-hermansen"}, "is_accepted": false, "score": 2, "last_activity_date": 1495661964, "creation_date": 1495661964, "answer_id": 44168896, "question_id": 44168693, "link": "https://stackoverflow.com/questions/44168693/comparing-the-rank-of-cards-in-a-hand/44168896#44168896", "title": "Comparing the rank of cards in a hand", "body": "<p>Re: \"should you change the code to throw away the 'of' and 'suit'?\"</p>\n\n<p>I don't see a reason to. You have a toString() method that will generate a display string for output, and I liked that the example code wasn't storing the string result in a class member.</p>\n\n<p>Your .suit and .rank members can be used to evaluate if a card is one of the hoped-for sets (pair, two pair, three of a kind, four of a kind, and full house). Don't compare against the string representation--since this is a less direct comparison, is less efficient, and prone to error if a real-world situation where one might update the string representation, e.g. provide a Spanish localization.</p>\n\n<p>I think most of the work is done here. Your evaluation of the cards should be pretty easy. Maybe add a new method to Hand that checks for sets within the cards you've pushed into the Hand.</p>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1495664405, "post_id": 44169281, "comment_id": 75354620, "body": "Uhm I disagree about the class <code>Card</code>; it can simply be a struct with two public members. Card is not enforcing any interesting invariants; it&#39;s just immutable. If you want that, you could simply declare your struct Card <code>const</code>. The enums themselves already enforce the meaningful invariants."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1495665271, "post_id": 44169281, "comment_id": 75354900, "body": "@NirFriedman I&#39;d do it anyway, simply because it represents an object from the real world that is immutable. If I had to use const here, that would be like saying &quot;This is a card that can&#39;t change in values, but generally, cards totally can&quot;. It&#39;s not about the technical results but about the idea of the class in the mind of the programmer. But I think all in all this is simply a matter of taste and personal style."}], "tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": false, "score": 3, "last_activity_date": 1495664144, "last_edit_date": 1495664144, "creation_date": 1495663783, "answer_id": 44169281, "question_id": 44168693, "link": "https://stackoverflow.com/questions/44168693/comparing-the-rank-of-cards-in-a-hand/44169281#44169281", "title": "Comparing the rank of cards in a hand", "body": "<p>The string has only significance to the player, as for the computer, it is only waste of memory over the int solution.</p>\n\n<p>That said, I'd propose that you use enumerations:</p>\n\n<pre><code>enum Suit {Hearts, Clubs, Spades, Diamonds};\nenum Rank {Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen King, Ace};\n</code></pre>\n\n<p>Note that enums start with 0 and add 1 if nothing else is stated, so they are in perfect order, just happens that they are better represented as with an int. </p>\n\n<p>with a to_string method:</p>\n\n<pre><code>string toString(const Suit){\n    switch(Suit){\n        case Hearts:\n        return \"Hearts\";\net cetera\n</code></pre>\n\n<p>with</p>\n\n<pre><code>class Card\n{\npublic:\nCard(const Suit suit, const Rank rank); //&lt;--- why did you declare this inline? arguments should be const\nstring toString() const;\nRank rank() const;\nSuit suit() const;\n\nprivate: // &lt;-- encapsule. A card should not be able to change those values\nRank _rank;\nSuit _suit;\n};\n</code></pre>\n\n<p>This class Card is the perfect container as it is. There is no need to change it into a string, at least not if you do not want to print it.</p>\n\n<p>Now for the interesting part:</p>\n\n<p>First of all, I'd make Hand to be something that is either returned by Deck (\"create hand\") or that gets a Deck in it's one and only constructor. A Hand should always be instantiated with five cards and this should be it's only possible state. Deck should always be an independent object.</p>\n\n<p>I'd give Hand a vector of Card. No need for string. Makes everything easier.</p>\n\n<p>As helper methods, I'd add a method that creates a vector which counts the multiplicity of each rank. From that, you can easily get a vector that counts how many doubles, triples and quadrupels there are. And if you have that, you are done. So go like this:</p>\n\n<pre><code>enum HandValue {HighCard, Pair, ThreeOfAKind, FourOfAKind, FullHouse };\n\nclass Hand //note that I omitted some methods that are not relevant for the answer\n{\nprivate:\n    vector&lt;Card&gt; cards;\n    vector&lt;unsigned int&gt; multiplicityOfRank() const;\n    vector&lt;unsigned int&gt; components() const; //&lt;-- uses multiplicityOfRank\npublic:\n    Hand(Deck&amp; deck); // &lt;-- will reduce deck by five cards. Note that a reference is used.\n    HandValue evaluate() const; // &lt;-- uses components\n}\n</code></pre>\n\n<p>components could be like position 0 storing the amount of doubles, position 1 the triples, position 2 the quadrupels</p>\n\n<p>Does that help? Questions left?</p>\n\n<p>(btw, personally I prefer not to write the namespaces if the namespace is obvious - you know about the <code>using</code> keyword, as in <code>using std::vector;</code>? Don't use <code>using namespace std;</code> as in the given main, though, std is too big to rule out name collisions.)</p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 6415979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b9e3987becca782d06105588adc1f0c1?s=128&d=identicon&r=PG&f=1", "display_name": "RangerBob", "link": "https://stackoverflow.com/users/6415979/rangerbob"}, "edited": false, "score": 0, "creation_date": 1522095104, "post_id": 44169727, "comment_id": 86003731, "body": "How to make it more efficient? I mean a faster algorithm?"}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": -1, "last_activity_date": 1495666297, "creation_date": 1495666297, "answer_id": 44169727, "question_id": 44168693, "link": "https://stackoverflow.com/questions/44168693/comparing-the-rank-of-cards-in-a-hand/44169727#44169727", "title": "Comparing the rank of cards in a hand", "body": "<p>As suggested in another answer, I would focus on using enums rather than strings for this. You have a very finite list of potential values. I would start by setting up the following typedefs:</p>\n\n<pre><code>enum class Suit {Hearts, Clubs, Spades, Diamonds};\nconstexpr static auto num_ranks = 13;  // must be consistent with below\nenum class Rank {Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten, Jack, Queen, King, Ace};\nenum class PokerHand {Nada, Pair, TwoPair, ThreeOfKind, FullHouse, FourOfKind};\n\nusing Card = const struct {\n    Suit suit;\n    Rank rank;\n};\n\nusing PlayerHand = std::array&lt;Card, 5&gt;;\n</code></pre>\n\n<p>Having set up this machinery, we can now go ahead and blast out our solution as a function:</p>\n\n<pre><code>PokerHand determineHand(const PlayerHand&amp; player_hand) {\n    std::vector&lt;int&gt; rank_count(num_ranks);\n\n    for (auto&amp; card : player_hand) {\n        ++rank_count[static_cast&lt;int&gt;(card.rank)];\n    }\n\n    auto count_rank_counts = [&amp;] (int count) {\n        return std::count(rank_count.begin(), rank_count.end(), count);\n    };\n\n    if (count_rank_counts(4)) return PokerHand::FourOfKind;\n\n    if (count_rank_counts(3)) {\n        if (count_rank_counts(2)) return PokerHand::FullHouse;\n        else return PokerHand::ThreeOfKind;\n    }\n\n    if (count_rank_counts(2) == 2) return PokerHand::TwoPair;\n    if (count_rank_counts(2) == 1) return PokerHand::Pair;\n\n    return PokerHand::Nada;\n}\n</code></pre>\n\n<p>A few key points. The static_cast may seem a bit weird, but in fact this is guaranteed to be legal because the backing type for an enum class that doesn't have it declared explicitly is int, unless int is not large enough. We then setup a function which counts how many times a certain count of rank occurred. I know it's a bit weird because it's a count of counts. But there it is. Then we simply check for the hands from highest to lowest. Not very efficient but easy to follow.</p>\n\n<p>Live example: <a href=\"http://coliru.stacked-crooked.com/a/a0db9e552cdfbcf5\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/a0db9e552cdfbcf5</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 8039611, "user_type": "registered", "profile_image": "https://graph.facebook.com/1534549796597366/picture?type=large", "display_name": "David Bernal", "link": "https://stackoverflow.com/users/8039611/david-bernal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1982, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1495666297, "creation_date": 1495661047, "last_edit_date": 1495663392, "question_id": 44168693, "link": "https://stackoverflow.com/questions/44168693/comparing-the-rank-of-cards-in-a-hand", "title": "Comparing the rank of cards in a hand", "body": "<p>I have a homework assignment that was two parts. The first part was to make a program that puts a vector of 52 card objects when you create an object for the class Deck. I did this by making the deck first give each card the number 1-4 for suit and 2-14 for card. It then changes the numbers to strings so it can output the cards in the form of \"Ace of spades, two of hearts\" etc. Now I am trying to figure out how to make it draw five cards and evaluate it for </p>\n\n<p>pair, two pair, three of a kind, four of a kind, and full house. </p>\n\n<p>Not sure if this is possible with my strings or if I would have to change my whole code to do it a different way. Here is the code.  </p>\n\n<p>edit: Also, the main.cpp was provided as a template and we were forced to build around it so even if there are better ways to do it we have to do it in this form >.&lt; </p>\n\n<p>editedit: here is a hint we were given \"Hint: Create a map where each pair stores a unique rank and the number of times that rank occurs in the hand. You can also use the count_if function from  to determine how many pairs or threes are in the set.\" but to be honest I don't really get what he wants us to do here...</p>\n\n<pre><code>//main.cpp \n\n#include &lt;iostream&gt;\n#include \"Deck.h\"\n\nusing namespace std; \n\n\n\nint main()\n{\n    Deck deck;                  // created the object called 'deck'\n    deck.shuffleCards();        // puts cards in the deck and shuffles them\n    while (not deck.empty())    // if the deck isn't empty loop will continue\n    {\n        cout &lt;&lt; deck.draw().toString() &lt;&lt; endl;    // first it draws a card from the deck                                                                                                                                                           \n    }                                              // of the form '000' and then puts those three\n                                                   // numbers into the toString function which \n}                                                  // converts them into a string of words\n                                                   // in the form 'Card' of 'Suit'. Keeps drawing\n                                                   // cards run out. \n</code></pre>\n\n<p>and here is the functions</p>\n\n<pre><code>#include \"Deck.h\"\n\n// Constructor for cards that are created\n\ninline Card::Card(int s, int r)\n{\n    suit = s;\n    rank = r;\n};\n\n// This function turns three int 'Cards' into three word\n// strings that get returned when you call the function.\n\nstd::string Card::toString() \n{\n\n    std::string oldS = std::to_string(suit); // this creates a string called oldS(uit) \n                                             // and changes the int into a string\n    std::string oldR = std::to_string(rank); // this creates a string called oldR(ank) \n                                             // and changes the int into a string\n\n    std::string SR = oldS + oldR;       // turns the two strings into one \n                                        // and puts them into a new string\n    std::string newS;\n    std::string newR;                   // These will be the new suit and rank \n\n    // this code turns the numbers (which are already strings) into words.\n    // 'substr' lets you search any length of the string. We have a string of\n    // two to three numbers but we need to analyze the first character and the\n    // second / third seperately. With 'substr' you can do this. \n\n    if(SR.substr(0, 1) == \"1\") // if starting at character 0 and reading one character\n        newS = \"Hearts\";       // is equal to '1' then make 'newS' equal to ' Hearts'\n    if(SR.substr(0, 1) == \"2\")\n        newS = \"Diamonds\";\n    if(SR.substr(0, 1) == \"3\")\n        newS = \"Spades\";\n    if(SR.substr(0, 1) == \"4\")\n        newS = \"Clubs\";\n\n    if(SR.substr(1, 2) == \"2\") // if starting at character 1 and reading 2 characters\n        newR = \"Two\";          // is equal to '2' then make 'newR' equal to 'Three'\n    if(SR.substr(1, 2) == \"3\")\n        newR = \"Three\";\n    if(SR.substr(1, 2) == \"4\")\n        newR = \"Four\";\n    if(SR.substr(1, 2) == \"5\")\n        newR = \"Five\";\n    if(SR.substr(1, 2) == \"6\")\n        newR = \"Six\";\n    if(SR.substr(1, 2) == \"7\")\n        newR = \"Seven\";\n    if(SR.substr(1, 2) == \"8\")\n        newR = \"Eight\";\n    if(SR.substr(1, 2) == \"9\")\n        newR = \"Nine\";\n    if(SR.substr(1, 2) == \"10\")\n        newR = \"Ten\";\n    if(SR.substr(1, 2) == \"11\")\n        newR = \"Jack\";\n    if(SR.substr(1, 2) == \"12\")\n        newR = \"Queen\";\n    if(SR.substr(1, 2) == \"13\")\n        newR = \"King\";\n    if(SR.substr(1, 2) == \"14\")\n        newR = \"Ace\";\n\n    SR = newR + \" of \" + newS; // this string had the numbers in it but now we can  \n                               // reassign it the string 'Card of suit'\n\n    return SR; // returns the string which is outputted to the console when you call\n               // the 'toString' function\n};\n\n// This function draws top object of the vector then pops it from \n// the vector and returns it to the call. It is of return type 'Card'.\n\nCard Deck::draw() \n    {\n        int a = Cards.size(); \n        int b = a - 1;        // -1 because the vector has 52 cards but you \n        Cards.pop_back();     // want to access [0] - [51] not [52]\n        return Cards[b];\n    };\n\n// This is the function that creates the cards in the vector.\n// It uses two loops and assigns a number to 'a' and 'b'. The first number is \n// in the range 1 - 4 and the second is 2 - 14. It then creates an object using \n// 'a' and 'b' which is then pushed back onto the vector. All vector objects have\n// the same name as of now (but not the same data). Shuffles the objects at the end.\n\nvoid Deck::shuffleCards()\n{\n    int a;\n    int b;\n    for(a = 1; a &lt; 5; a++) // 1 - 4\n    {\n        for(b = 2; b &lt; 15; b++ ) // 2 - 14\n        {\n            Card newCard(a, b);\n            Cards.push_back(newCard);\n        }\n    }\n\n    std:: mt19937 seed(rd());                        // this creates the seed\n    std::shuffle(Cards.begin(), Cards.end(), seed);  // this shuffles the deck with the \n};                                                   // random seed \n\n// This function checks if the deck is empty \n// if it is not it will return false and when it is empty \n// it will return true which breaks the loop in main.cpp\n\nbool Deck::empty()\n{\n    if(Cards.size() &lt; 1)\n        return true;\n    else \n        return false;\n};\n\n// This function will reset the deck if called. It will purge \n// the vector and then repopulate it with the original contents.\n// but will not shuffle them. \n\nvoid Deck::reset()\n{\n    Cards.clear();\n    int a;\n    int b;\n    for(a = 1; a &lt; 5; a++)\n    {\n        for(b = 2; b &lt; 15; b++ )\n        {\n            Card newCard(a, b);\n            Cards.push_back(newCard);\n        }\n    }\n};\n</code></pre>\n\n<p>and header</p>\n\n<pre><code>#ifndef DECK_H\n#define DECK_H\n#include &lt;vector&gt; \n#include &lt;string&gt; \n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n\nclass Card\n{\npublic:\n    inline Card(int s, int r);\n    int rank;\n    int suit;\n    std::string toString();\n};\n\nclass Deck \n{\nprivate:\n    std::vector&lt;Card&gt; Cards;\n    std::random_device rd;\npublic:\n    void shuffleCards();\n    void reset();\n    Card draw();\n    bool empty();\n};\n\nclass Hand\n{\n    public: \n        std::vector&lt;std::string&gt; Hand;\n        void fillHand()\n        {\n            Deck deck;\n            std::string C1 = deck.draw().toString();\n            std::string C2 = deck.draw().toString();\n            std::string C3 = deck.draw().toString();\n            std::string C4 = deck.draw().toString();\n            std::string C5 = deck.draw().toString();\n            Hand.push_back(C1);\n            Hand.push_back(C2);\n            Hand.push_back(C3);\n            Hand.push_back(C4);\n            Hand.push_back(C5);\n        }\n};\n#endif\n</code></pre>\n\n<p>Thank you in advance :D </p>\n\n<p>at this point I basically create a new object from the hand class which fills the hand up with 5 random cards and in each card is a string in the form of \"card of suit\". Since I only need to worry about the \"card\" should I change the code to throw away the \"of\" and \"suit\"? Eventually we are gonna need to also use the suit which is why I did not want to do that. </p>\n"}, {"tags": ["c++", "decode", "mime", "quoted-printable"], "answers": [{"tags": [], "owner": {"reputation": 28276, "user_id": 87117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f9e45dad82da556b0acabdbf3be8452?s=128&d=identicon&r=PG", "display_name": "jstedfast", "link": "https://stackoverflow.com/users/87117/jstedfast"}, "is_accepted": false, "score": 0, "last_activity_date": 1495814933, "creation_date": 1495814933, "answer_id": 44205910, "question_id": 44168678, "link": "https://stackoverflow.com/questions/44168678/c-decode-quoted-printable-encoding-with-gmime-3-0/44205910#44205910", "title": "C++ Decode quoted-printable encoding with GMime 3.0", "body": "<p>You don't need to use those methods. All you need to do is do:</p>\n\n<pre><code>content = g_mime_part_get_content (part);\ng_mime_data_wrapper_write_to_stream (content, output_stream);\n</code></pre>\n\n<p>At this point, <code>output_stream</code> will contain the decoded content.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5193284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495814933, "creation_date": 1495660999, "last_edit_date": 1592644375, "question_id": 44168678, "link": "https://stackoverflow.com/questions/44168678/c-decode-quoted-printable-encoding-with-gmime-3-0", "title": "C++ Decode quoted-printable encoding with GMime 3.0", "body": "<p>I have an e-mail which is made of multiple parts, I parsed it successfully with GMime, but I can't figure out how to decode the <strong>Content-Transfer-Encoding: quoted-printable</strong> parts.</p>\n<p>I saw there are automaton-like functions but I don't know how to use them.</p>\n<blockquote>\n<p>g_mime_encoding_init_decode()</p>\n<p>g_mime_encoding_quoted_decode_step()</p>\n</blockquote>\n<p>Does someone know how to do this?\nMy input is a text file containing the message.</p>\n"}, {"tags": ["c++", "boost", "thrift", "scons"], "comments": [{"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 1, "creation_date": 1495668924, "post_id": 44168668, "comment_id": 75355936, "body": "VS2017 is not yet supported by SCons.  It&#39;s likely it will be in the 3.0 release cominging (at least beta) in the next few weeks."}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1495669935, "post_id": 44168668, "comment_id": 75356167, "body": "If you&#39;re willing to give it a try there&#39;s a pull request which works. <a href=\"https://bitbucket.org/scons/scons/pull-requests/428/support-for-visual-studio-2017/diff\" rel=\"nofollow noreferrer\">bitbucket.org/scons/scons/pull-requests/428/&hellip;</a>  Likely we&#39;ll end up switching to use the vswhere tool instead as it should be simpler to implement."}], "owner": {"reputation": 569, "user_id": 5696021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bafff264caed652f47f8ad96e13ce911?s=128&d=identicon&r=PG&f=1", "display_name": "3voC", "link": "https://stackoverflow.com/users/5696021/3voc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495660968, "creation_date": 1495660968, "question_id": 44168668, "link": "https://stackoverflow.com/questions/44168668/scons-and-thrift-building-problems", "title": "SCons and Thrift building problems", "body": "<p>I need to create C++ app using thrift and build it using SCons. In order to do so I've downloaded and installed all of the needed libs (and ensured that all of them are for x64 Windows) - boost, openssl, libevent.</p>\n\n<p>I've built boost with command:</p>\n\n<pre><code>b2 -j4 toolset=msvc-14.1 address-model=64 architecture=x86 link=static threading=multi runtime-link=shared --build-type=complete stage --stagedir=stage/x64\n</code></pre>\n\n<p>Next, I've built Thrift libs in VS2017 (x64/Release).</p>\n\n<p>But, when I try to build project with SCons, I encounter erros.\nWhen I try with SConstruct file like this (run from Developer Command Prompt for VS2017):</p>\n\n<pre><code>import os\nfrom os import path, listdir\n\ngen_cpp = [path.join('gen-cpp', f) for f in listdir('gen-cpp') if \nf.endswith('.cpp')]\nclient_source = [path.join('logic', folder, f) for folder in ['', 'parser', \n'mars', 'view']\n             for f in listdir(path.join('logic', folder)) if \nf.endswith('.cpp')]\nserver_source = [path.join('server', 'server.cpp')]\ntests_source = [path.join('test_cases', f) for f in listdir('test_cases') if \nf.endswith('.cpp')]\n\ncpppath = ['.','c:\\\\Users\\\\Antek\\\\libs\\\\thrift-0.10.0\\\\thrift-\n0.10.0\\\\lib\\\\cpp\\\\src\\\\','c:\\\\Users\\\\Antek\\\\libs\\\\boost_1_64_0\\\\boost\\\\']\n\nlibpath = ['C:\\\\Users\\\\Antek\\\\libs\\\\thrift-0.10.0\\\\thrift-\n0.10.0\\\\lib\\\\cpp\\\\x64\\\\Release\\\\', \n'c:\\\\Users\\\\Antek\\\\libs\\\\boost_1_64_0\\\\boost\\\\stage_x64\\\\lib\\\\',\n         'C:\\\\OpenSSL-Win64\\\\lib']\n\nlibs = ['libthrift']\n\nenv = Environment(\n               CPPPATH = cpppath,\n               LIBS = libs,\n               LIBPATH = libpath,\n               CPPFLAGS='/EHsc',\n              )\n\n\ngen_cpp_o = env.Object(gen_cpp)\nclient_o = env.Object(client_source)\ntests_o = env.Object(tests_source)\ntests_files = gen_cpp_o + [f for f in client_o if str(f) != \npath.join('logic', 'main.obj')] + tests_o\n\nenv.Program('CoreWars', gen_cpp_o + client_o)\nenv.Program('Server', gen_cpp_o + server_source)\nenv.Program('tests', tests_files)\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>scons: Reading SConscript files ...\nscons: done reading SConscript files.\nscons: Building targets ...\ncl /Fogen-cpp\\MARS.obj /c gen-cpp\\MARS.cpp /TP /nologo /EHsc /I. \n/IC:\\Users\\Antek\\libs\\thrift-0.10.0\\thrift-0.10.0\\lib\\cpp\\src \n/IC:\\Users\\Antek\\libs\\boost_1_64_0\\boost\n'cl' is not recognized as an internal or external command,\noperable program or batch file.\nscons: *** [gen-cpp\\MARS.obj] Error 1\nscons: building terminated because of errors.\n</code></pre>\n\n<p>When I add the following line to my SConstruct:\n    <code>ENV = os.environ</code></p>\n\n<p>I get an error :</p>\n\n<pre><code>Libthrift.lib (TOutput.obj): MSIL .netmodule module found or module compiled \nwith / GL; Consolidation will start again with the / LTCG option; Add the / \nLTCG option to the consolidation command line to improve the performance of \nthe consolidator\nFatal error C1905: Frontend and backend are not compatible (must refer to \nthe same processor)\nLINK: fatal error LNK1257: code generation failed\nScons: *** [CoreWars.exe] Error 1257\nScons: building terminated because of errors\n</code></pre>\n\n<p>I've spent too much time on this already, all ideas will be highly appreciated. Thank You.</p>\n"}, {"tags": ["c++", "opencv", "computer-vision", "opticalflow"], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 1, "creation_date": 1496189348, "post_id": 44201852, "comment_id": 75555094, "body": "I know about this function, Farneback&#39;s method gives a motion field that is dense meaning for every pixel, however my question is how can I use Farneback&#39;s function to track a set of sparse key points or features."}], "tags": [], "owner": {"reputation": 21, "user_id": 2133955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25902cfe59ccd9c916c58d590aa6d17f?s=128&d=identicon&r=PG&f=1", "display_name": "littlie", "link": "https://stackoverflow.com/users/2133955/littlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1495802303, "creation_date": 1495802303, "answer_id": 44201852, "question_id": 44168581, "link": "https://stackoverflow.com/questions/44168581/how-can-i-track-sparse-features-using-a-dense-optical-flow-approach-like-farneba/44201852#44201852", "title": "How can I track sparse features using a dense optical flow approach like Farneback&#39;s?", "body": "<p>There is a function <a href=\"http://docs.opencv.org/2.4/modules/video/doc/motion_analysis_and_object_tracking.html#calcopticalflowfarneback\" rel=\"nofollow noreferrer\">calcOpticalFlowFarneback()</a> in OpenCV to do just that.</p>\n"}, {"comments": [{"owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499824518, "post_id": 45017799, "comment_id": 77068253, "body": "Thank you so much, I am testing your code. One last question: flowMat.at&lt;cv::Point2f&gt;(iy, ix) * cv::Point2f(w00, w00) -&gt; Is this element wise multiplication or a cross product? because this does not work in opencv."}, {"owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499834751, "post_id": 45017799, "comment_id": 77070966, "body": "Sorry I just realized that a cross product for 2D vectors has not meaning so I am assuming that you meant element wise multiplication."}, {"owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499837574, "post_id": 45017799, "comment_id": 77071954, "body": "Thanks it is kinda working but I had to fix some stuff"}, {"owner": {"reputation": 2112, "user_id": 1984090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359b34d7152e74bb71de54571ba1f8f0?s=128&d=identicon&r=PG", "display_name": "Tobias Senst", "link": "https://stackoverflow.com/users/1984090/tobias-senst"}, "reply_to_user": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499850186, "post_id": 45017799, "comment_id": 77079603, "body": "A sorry. I hope this is better now. I forget that cv::Point2f has an overload  multiply operator which used floats ."}, {"owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499903518, "post_id": 45017799, "comment_id": 77111675, "body": "Thanks, aren&#39;t we supposed to accumulate the position:    currPoints[n] = currPoints[n] + (flowMat.at&lt;cv::Point2f&gt;(iy, ix) * w00                   + flowMat.at&lt;cv::Point2f&gt;(iy+1, ix) * w10                   + flowMat.at&lt;cv::Point2f&gt;(iy, ix+1) * w01                   + flowMat.at&lt;cv::Point2f&gt;(iy+1, ix+1) * w11);"}, {"owner": {"reputation": 2112, "user_id": 1984090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359b34d7152e74bb71de54571ba1f8f0?s=128&d=identicon&r=PG", "display_name": "Tobias Senst", "link": "https://stackoverflow.com/users/1984090/tobias-senst"}, "reply_to_user": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "edited": false, "score": 0, "creation_date": 1499940180, "post_id": 45017799, "comment_id": 77127206, "body": "Thanks, you are right but prevPoints[n] instead of currPoints[n]"}], "tags": [], "owner": {"reputation": 2112, "user_id": 1984090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359b34d7152e74bb71de54571ba1f8f0?s=128&d=identicon&r=PG", "display_name": "Tobias Senst", "link": "https://stackoverflow.com/users/1984090/tobias-senst"}, "is_accepted": true, "score": 3, "last_activity_date": 1499940141, "last_edit_date": 1499940141, "creation_date": 1499705972, "answer_id": 45017799, "question_id": 44168581, "link": "https://stackoverflow.com/questions/44168581/how-can-i-track-sparse-features-using-a-dense-optical-flow-approach-like-farneba/45017799#45017799", "title": "How can I track sparse features using a dense optical flow approach like Farneback&#39;s?", "body": "<p>To track a feature with a dense optical flow field <code>flow</code> can be done as follows:</p>\n\n<pre><code>// read images    \ncv:Mat prevImg = cv::imread( filename0 ); // image data at time t\ncv::Mat currImg = cv::imread( filename1 ); // image data at time t and t + 1\ncv::Mat flowMat; // storage for dese optical flow field\nstd::vector&lt;cv::Point2f&gt; prevPoints; // points to be track\n\n// initialize points to track (example)\nprevPoints.push_back( cv::Point2f( 50.3f, 30.f ) );\nstd::vector&lt;cv::Point2f&gt; currPoints( prevPoints.size()); // tracked point position\n\n // compute dense flow field (example)\ncv::calcOpticalFlowFarneback(prevImg, currImg, flowMat, 0.4, 1, 12, 2, 8, 1.2, 0);\n\n// track points based on dense optical flow field and bilinear interpolation\nfor( unsigned int n = 0; n &lt; prevPoints.size(); ++n )\n{\n  float ix = floor(prevPoints[n].x);\n  float iy = floor(prevPoints[n].y);\n  float wx = prevPoints[n].x - ix;\n  float wy = prevPoints[n].y - iy;\n  float w00 = (1.f - wx) * (1.f - wy);\n  float w10 = (1.f - wx) * wy;\n  float w01 = wx * (1.f - wy);\n  float w11 = wx * wy;\n  if( prevPoints[n].x &gt;= flowMat.cols - 1 || prevPoints[n].y &gt;= flowMat.rows - 1)\n  {\n    // these points are out of the image roi and cannot be tracked.\n    currPoints[n] = prevPoints[n];\n  }\n  else\n  {\n   /*\n   bilinear interpolation of the flow vector from the flow field at a given location.\n   The bilinear interpolation has to be applied since the points to track can be given at subpixel level \n   */\n   currPoints[n] = prevPoints[n] \n                 + flowMat.at&lt;cv::Point2f&gt;(iy, ix) * w00 \n                 + flowMat.at&lt;cv::Point2f&gt;(iy+1, ix) * w10 \n                 + flowMat.at&lt;cv::Point2f&gt;(iy, ix+1) * w01 \n                 + flowMat.at&lt;cv::Point2f&gt;(iy+1, ix+1) * w11;\n  }\n}\n\n}\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 5012284, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155592645355175/picture?type=large", "display_name": "Akef", "link": "https://stackoverflow.com/users/5012284/akef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "accepted_answer_id": 45017799, "answer_count": 2, "score": 2, "last_activity_date": 1499940141, "creation_date": 1495660497, "last_edit_date": 1496189181, "question_id": 44168581, "link": "https://stackoverflow.com/questions/44168581/how-can-i-track-sparse-features-using-a-dense-optical-flow-approach-like-farneba", "title": "How can I track sparse features using a dense optical flow approach like Farneback&#39;s?", "body": "<p>I can already track SIFT or SURF features using Lucas Kanade implemented in OpenCV, because Lucas Kanade tracks sparse features any way, however I am trying to use Farneback's optical flow algorithm implemented in OpenCV to track those sparse features, is there an algorithm for that?</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=1D93RmW_eN4\" rel=\"nofollow noreferrer\">Realtime Dense Optical flow tracking</a></p>\n\n<p>Please check this video:</p>\n\n<p>The developers claim that they tracked the selected sparse features using a dense approach \"Farneback\" rather than a sparse approach \"Lucas-Kanade\". How did they do it?</p>\n"}, {"tags": ["c++", "arduino", "wireless", "servo"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495659497, "post_id": 44168314, "comment_id": 75352690, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44168314/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495660251, "post_id": 44168314, "comment_id": 75353033, "body": "Did you test the servo without using the wireless? In other words, are you sure it&#39;s not the circuit/servo itself?"}, {"owner": {"reputation": 33, "user_id": 7503803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb362f26e5da31fb0ea5140d1230e6b?s=128&d=identicon&r=PG&f=1", "display_name": "ZenixNet", "link": "https://stackoverflow.com/users/7503803/zenixnet"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495660518, "post_id": 44168314, "comment_id": 75353136, "body": "@DigitalNinja Yes, I hooked the servo up to the servo example that Arduino gives you. I also modified that example to require a button push. Both work great."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495660663, "post_id": 44168314, "comment_id": 75353213, "body": "Good. What is the relay controlling? Do you need to activate that before controlling the servo perhaps?"}, {"owner": {"reputation": 33, "user_id": 7503803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb362f26e5da31fb0ea5140d1230e6b?s=128&d=identicon&r=PG&f=1", "display_name": "ZenixNet", "link": "https://stackoverflow.com/users/7503803/zenixnet"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495661349, "post_id": 44168314, "comment_id": 75353539, "body": "@DigitalNinja Are you talking about releu_pin? That&#39;s the testing LED. One of the many tutorials I built this from used it as their name for the LED so I stuck with it."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495661676, "post_id": 44168314, "comment_id": 75353670, "body": "Okay, I thought you were using <code>LED_BUILTIN</code> for toggling the LED. Is that all of your code? It doesn&#39;t look like <code>loop()</code> is actually looping..."}, {"owner": {"reputation": 33, "user_id": 7503803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb362f26e5da31fb0ea5140d1230e6b?s=128&d=identicon&r=PG&f=1", "display_name": "ZenixNet", "link": "https://stackoverflow.com/users/7503803/zenixnet"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495661786, "post_id": 44168314, "comment_id": 75353713, "body": "@DigitalNinja I&#39;m actually using both. Another help forum asked if my onboard LED would work so I left that in too. But yes, that&#39;s all my code."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495664196, "post_id": 44168314, "comment_id": 75354538, "body": "I&#39;m not sure what is wrong. I would retest the servo using this exact code except remove looking for the message. Instead just try turning the servo and toggling the led with a delay in between movements."}, {"owner": {"reputation": 33, "user_id": 7503803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb362f26e5da31fb0ea5140d1230e6b?s=128&d=identicon&r=PG&f=1", "display_name": "ZenixNet", "link": "https://stackoverflow.com/users/7503803/zenixnet"}, "reply_to_user": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1495664422, "post_id": 44168314, "comment_id": 75354630, "body": "@DigitalNinja Got it figured out. ServoTimer2 is in milliseconds, not degrees like the servo library that comes with the board."}], "owner": {"reputation": 33, "user_id": 7503803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb362f26e5da31fb0ea5140d1230e6b?s=128&d=identicon&r=PG&f=1", "display_name": "ZenixNet", "link": "https://stackoverflow.com/users/7503803/zenixnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495704069, "creation_date": 1495659412, "last_edit_date": 1495704069, "question_id": 44168314, "link": "https://stackoverflow.com/questions/44168314/arduino-wireless-servo-code", "title": "Arduino wireless servo code", "body": "<p>I'm trying to make a contraption where you press a button on one board and it moves the servo either to 90 degrees or 180 degrees on the other board. If it's at 90 then it moves to 180 and vice versa.</p>\n\n<p>I'm not very knowledgeable when it comes to this stuff as this is my first major project so bear with me. I already have the wireless system working (thanks to hours of Googling) and a toggle system for an LED (for testing to see if the wireless is working).</p>\n\n<p>I'm using one of the tiny RF transmitters, two Nanos, and a servo from Radio Shack. The problem is the servo doesn't turn but my test LED turns on and off. Here is the code for the receiver end of things:</p>\n\n<pre><code>#include &lt;VirtualWire.h&gt;\n#include &lt;ServoTimer2.h&gt;\n\nconst int releu_pin = 9;\nconst int servoPin = 6;\nconst int transmit_pin = 12;\nconst int receive_pin = 3;//pin connected between RX module and Arduino\nconst int transmit_en_pin = 5;\n\nServoTimer2 myservo;  \n\nvoid setup() {\n    myservo.attach(servoPin);\n    myservo.write(45);\n    vw_set_tx_pin(transmit_pin);\n    vw_set_rx_pin(receive_pin);\n    vw_set_ptt_pin(transmit_en_pin);\n    vw_set_ptt_inverted(true);\n    vw_setup(2000);//speed communication bps\n\n    vw_rx_start(); // activate receiving mode\n    pinMode(releu_pin, OUTPUT);\n    pinMode(LED_BUILTIN, OUTPUT); //Debug\n}\n\nvoid loop() {\n    uint8_t buf[VW_MAX_MESSAGE_LEN];\n    uint8_t buflen = VW_MAX_MESSAGE_LEN;\n    if (vw_get_message(buf, &amp;buflen)) {\n      //verify if any data is received\n      if(buf[0]=='1') {\n        //if received 1 turn ON releu_pin \n        myservo.write(90);\n        digitalWrite(releu_pin , HIGH);\n        digitalWrite(LED_BUILTIN, HIGH); //Debug\n        delay(100); \n      }  \n     if(buf[0]=='0') {\n        myservo.write(180);\n        digitalWrite(releu_pin , LOW);\n        digitalWrite(LED_BUILTIN, LOW); //Debug\n        delay(100); \n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "image", "function", "transparency", "openframeworks"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 8072533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff64489230aee072e273a26339d3a82?s=128&d=identicon&r=PG&f=1", "display_name": "sarah", "link": "https://stackoverflow.com/users/8072533/sarah"}, "is_accepted": true, "score": 1, "last_activity_date": 1495838855, "creation_date": 1495838855, "answer_id": 44211084, "question_id": 44168214, "link": "https://stackoverflow.com/questions/44168214/set-transparency-of-an-image-on-openframeworks/44211084#44211084", "title": "Set transparency of an image on openFrameworks", "body": "<p>check out <a href=\"http://openframeworks.cc/ofBook/chapters/intro_to_graphics.html\" rel=\"nofollow noreferrer\">http://openframeworks.cc/ofBook/chapters/intro_to_graphics.html</a></p>\n\n<pre><code>ofEnableAlphaBlending();\nofSetColor(255,0,0,127); # this would be a 50% transparent red color\nofDrawRectangle(20,20,100,100);\nofDisableAlphaBlending();\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7674738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e37e88a5826a5125a78640775e01957?s=128&d=identicon&r=PG&f=1", "display_name": "S. Comu", "link": "https://stackoverflow.com/users/7674738/s-comu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 44211084, "answer_count": 1, "score": 0, "last_activity_date": 1495838855, "creation_date": 1495659015, "last_edit_date": 1495718786, "question_id": 44168214, "link": "https://stackoverflow.com/questions/44168214/set-transparency-of-an-image-on-openframeworks", "title": "Set transparency of an image on openFrameworks", "body": "<p>I'm working on openFrameworks and I want to set the transparency of an image in order to modify it when I press a button, but I don't know how to implement this parameter.</p>\n\n<p>In which way can I change this value? Is there a particular function to manage the transparency of an image? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1495658032, "post_id": 44167941, "comment_id": 75352004, "body": "Put everything in <code>list.cc</code> into <code>list.h</code>  -- this is just a (currently) known drawback of templates."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1495658814, "post_id": 44167941, "comment_id": 75352375, "body": "@Chad The other option is to rename <code>list.cc</code> to <code>list.tcc</code> or such to hide it from the build system and include it into <code>list.h</code>."}, {"owner": {"reputation": 1, "user_id": 8061566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ced1473da686f00743ca5477edf042?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Candela", "link": "https://stackoverflow.com/users/8061566/nelson-candela"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495660125, "post_id": 44167941, "comment_id": 75352979, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It doesn&#39;t work if I just change the extension to .tcc and also change it in the Makefile, I&#39;m probably making something else wrong so it keeps failing."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495660255, "post_id": 44167941, "comment_id": 75353038, "body": "@NelsonCandela Read my comment again. Also that technique is described in detail in the duplicate answers. Rip it out from the makefile completely."}, {"owner": {"reputation": 1, "user_id": 8061566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ced1473da686f00743ca5477edf042?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Candela", "link": "https://stackoverflow.com/users/8061566/nelson-candela"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495661461, "post_id": 44167941, "comment_id": 75353582, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Thank you, I will put everything in .h and look deeply .tcc tomorrow."}], "owner": {"reputation": 1, "user_id": 8061566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ced1473da686f00743ca5477edf042?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Candela", "link": "https://stackoverflow.com/users/8061566/nelson-candela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1495657802, "answer_count": 0, "score": 0, "last_activity_date": 1495657871, "creation_date": 1495657757, "last_edit_date": 1495657871, "question_id": 44167941, "link": "https://stackoverflow.com/questions/44167941/undefined-symbols-for-architecture-x86-64-using-clang", "closed_reason": "Duplicate", "title": "Undefined symbols for architecture x86_64 (using clang)", "body": "<p>I was trying to make a list with genericity, and when I try to compile this is what it says:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"List&lt;int&gt;::List(int)\", referenced from:\n      _main in main.cc.o\n  \"List&lt;int&gt;::~List()\", referenced from:\n      _main in main.cc.o\n</code></pre>\n\n<p>This is what I have typed in my .cc and .h</p>\n\n<p>node.h</p>\n\n<pre><code>#ifndef __NODOS_LISTA_DOBLE__\n#define __NODOS_LISTA_DOBLE__\n#include &lt;vector&gt;\ntemplate&lt;class T&gt;\nclass Node{\nprivate:\n    Node&lt;T&gt;* back;\n    Node&lt;T&gt;* next;\n    T key;\npublic:\n    Node (T key);\n    virtual ~Node();\n};\n#endif\n</code></pre>\n\n<p>node.cc</p>\n\n<pre><code>#include \"node.h\"\ntemplate &lt;class T&gt;\nNode&lt;T&gt;::Node(T key){\n    this-&gt;head=nullptr;\n    this-&gt;heap=nullptr;\n    this-&gt;key=key;\n}\ntemplate &lt;class T&gt;\nNode&lt;T&gt;::~Node(){}\n</code></pre>\n\n<p>list.h</p>\n\n<pre><code>#ifndef __LISTA_DOBLEMENTE_ENLAZADA__\n#define __LISTA_DOBLEMENTE_ENLAZADA__\n#include \"node.h\"\n#include &lt;vector&gt;\ntemplate&lt;class T&gt;\nclass List {\nprivate:\n    Node&lt;T&gt;* head;\n    Node&lt;T&gt;* heap;\nprotected:\npublic:\n    List (T key);\n    List (std::vector&lt;T&gt;&amp; v);\n    virtual ~List();\n    void MakeListNull();\n};\n#endif\n</code></pre>\n\n<p>list.cc</p>\n\n<pre><code>#include \"list.h\"\ntemplate &lt;class T&gt;\nList&lt;T&gt;::List (T key){\n    head=new Node&lt;T&gt;(key);\n    head-&gt;back=nullptr;\n    heap=head;\n    heap-&gt;next=nullptr;\n}\ntemplate &lt;class T&gt;\nList&lt;T&gt;::List (std::vector&lt;T&gt;&amp; v){\n    if(v.size()&gt;0){\n        head=new Node&lt;T&gt;(v[0]);\n        head-&gt;back=nullptr;\n        Node&lt;T&gt;* nx=head;\n        for (int cont=1;cont&lt;v.size()-1;cont++){\n            nx-&gt;next=new Node&lt;T&gt;(v[cont]);\n            nx-&gt;next-&gt;back=nx;\n            nx=nx-&gt;next;\n        }\n        heap=new Node&lt;T&gt;(v[v.size()-1]);\n        heap-&gt;next=nullptr;\n    }\n}\n\ntemplate &lt;class T&gt;\nList&lt;T&gt;::~List(){\n    this-&gt;MakeListNull();\n}\n\ntemplate &lt;class T&gt;\nvoid List&lt;T&gt;::MakeListNull(){\n\n}\n</code></pre>\n\n<p>main.cc</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"list.h\"\n\nint main (int argc, char** argv){\n    List&lt;int&gt; miLista(5);\n    return 0;\n}\n</code></pre>\n\n<p>I have been looking all the evening on internet and don't know why that error keeps popping, if anyone could help me I would be so grateful.</p>\n"}, {"tags": ["c++", "arrays", "list", "move", "tolist"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1495656650, "post_id": 44167593, "comment_id": 75351377, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 3, "creation_date": 1495656663, "post_id": 44167593, "comment_id": 75351386, "body": "Your list (<code>first</code>) is <code>NULL</code>, and you never allocated any memory for it"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1495656774, "post_id": 44167593, "comment_id": 75351440, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44167593/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495658583, "post_id": 44167593, "comment_id": 75352271, "body": "Your functions expects all the list nodes to be allocated already. But you&#39;re passing an empty list to the function."}], "answers": [{"tags": [], "owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1495660093, "creation_date": 1495660093, "answer_id": 44168494, "question_id": 44167593, "link": "https://stackoverflow.com/questions/44167593/c-problematic-function-array-to-list/44168494#44168494", "title": "C++ problematic function, Array to List", "body": "<p>It looks like you dereference a <code>NULL</code> pointer:</p>\n\n<p>In <code>main</code>:</p>\n\n<pre><code>List *first = NULL;\n</code></pre>\n\n<p>In <code>ToList</code>:</p>\n\n<pre><code>List *p = first; // first = NULL\n...\np-&gt;x = arr[i]\n</code></pre>\n\n<p>So, you need to allocate the list firstly.</p>\n"}], "owner": {"reputation": 1, "user_id": 8061613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QUfxRh-qYA8/AAAAAAAAAAI/AAAAAAAAA2s/pfdOiRJQxTY/photo.jpg?sz=128", "display_name": "Dark GT", "link": "https://stackoverflow.com/users/8061613/dark-gt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "closed_date": 1495699138, "answer_count": 1, "score": -4, "last_activity_date": 1495662876, "creation_date": 1495656527, "last_edit_date": 1495662876, "question_id": 44167593, "link": "https://stackoverflow.com/questions/44167593/c-problematic-function-array-to-list", "closed_reason": "Not suitable for this site", "title": "C++ problematic function, Array to List", "body": "<p>I have this code from programing class: </p>\n\n<pre><code>void ToList(List *first, int *arr, int n) {\n    List *p = first;\n    for(int i=0; i&lt;n; i++) {\n       p-&gt;x = arr[i];\n       if (p-&gt;next != NULL) p = p-&gt;next;\n    }\n}  \n</code></pre>\n\n<p>I call it in order to transfer an Array element to a List:</p>\n\n<pre><code>int main() {\n\nconst int N = 10;\nint m[N] = {5, 8, 1, 7, 2, 6, 9, 4, 0, 3};\n\nList *first = NULL;\n\nToList(first, m, N);\nPrintList(first);\n</code></pre>\n\n<p>I got a \"Segmentation fault\" -- the program finished with exit code 139. What is wrong and how can it be fixed?</p>\n"}, {"tags": ["c++", "linux", "linker", "readelf"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8061590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4563d951740c813d24b4a9db293fab?s=128&d=identicon&r=PG&f=1", "display_name": "Braxton Thomason", "link": "https://stackoverflow.com/users/8061590/braxton-thomason"}, "edited": false, "score": 0, "creation_date": 1495657686, "post_id": 44167789, "comment_id": 75351866, "body": "The function that symbolA/B decode to is not in a header file, but in a cpp file."}, {"owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "reply_to_user": {"reputation": 1, "user_id": 8061590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4563d951740c813d24b4a9db293fab?s=128&d=identicon&r=PG&f=1", "display_name": "Braxton Thomason", "link": "https://stackoverflow.com/users/8061590/braxton-thomason"}, "edited": false, "score": 0, "creation_date": 1495658209, "post_id": 44167789, "comment_id": 75352100, "body": "@BraxtonThomason Yeah, that makes sense. But the actual addresses of the symbols are all equal - these are all pointing to <code>000000000cf8d960</code>. Did you consider to remove debug symbols from your binary?"}, {"owner": {"reputation": 1, "user_id": 8061590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4563d951740c813d24b4a9db293fab?s=128&d=identicon&r=PG&f=1", "display_name": "Braxton Thomason", "link": "https://stackoverflow.com/users/8061590/braxton-thomason"}, "edited": false, "score": 0, "creation_date": 1495661592, "post_id": 44167789, "comment_id": 75353631, "body": "This is compiled with -O3 and without -g."}], "tags": [], "owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "is_accepted": false, "score": 0, "last_activity_date": 1495657270, "creation_date": 1495657270, "answer_id": 44167789, "question_id": 44167430, "link": "https://stackoverflow.com/questions/44167430/nearly-duplicate-symbols-from-readelf-at-same-address/44167789#44167789", "title": "Nearly duplicate symbols from readelf at same address", "body": "<p>If you place a function <strong>definition</strong> in a header and then include this header in different source files, a different function will be generated for every inclusion (well, unless it's inlined everywhere in a particular source file). It's hard to tell without looking at your sources, but that might be the case.</p>\n\n<p>Consider moving big non-inlinable functions in separate source files, leaving only <strong>declaration</strong> in the corresponding headers. This might do the trick. </p>\n"}], "owner": {"reputation": 1, "user_id": 8061590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4563d951740c813d24b4a9db293fab?s=128&d=identicon&r=PG&f=1", "display_name": "Braxton Thomason", "link": "https://stackoverflow.com/users/8061590/braxton-thomason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495667096, "creation_date": 1495655854, "last_edit_date": 1495667096, "question_id": 44167430, "link": "https://stackoverflow.com/questions/44167430/nearly-duplicate-symbols-from-readelf-at-same-address", "title": "Nearly duplicate symbols from readelf at same address", "body": "<p>I am using readelf to figure out why a binary is so large, but I am confused about the output. Or my binary is linked very wrongly. Right now the binary is approximately 380MB, and if I do this:</p>\n\n<blockquote>\n  <p>readelf -W -s binary |  awk 'NR > 3 { sum += $3 } END { print sum }'</p>\n</blockquote>\n\n<p>I get 236221726 bytes. Seems low, but maybe I'm missing static symbols or what not. But if I do:</p>\n\n<blockquote>\n  <p>readelf -W -s binary | sort -n -r -k 3 | less</p>\n</blockquote>\n\n<p>I see this:</p>\n\n<blockquote>\n  <p>172766: 000000000cf8d960 99993 FUNC    GLOBAL DEFAULT   10 symbolA</p>\n  \n  <p>147338: 000000000cf8d960 99993 FUNC    GLOBAL DEFAULT   10 symbolB</p>\n  \n  <p>132791: 000000000cf8d960 99993 FUNC    GLOBAL DEFAULT   10 symbolA</p>\n  \n  <p>107363: 000000000cf8d960 99993 FUNC    GLOBAL DEFAULT   10 symbolB</p>\n</blockquote>\n\n<p>Where symbolA and symbolB are only 1 char different, and demangle to the same thing.</p>\n\n<p>So, my questions:\n1) If those things have the same address, are there actually four copies in my binary? \n2) If there aren't four copies, and these are aliases, shouldn't readelf report that? \n3) If the are four copies, how and why? I assume I'm doing something bad linkage-wise.\n4) If there aren't four copies, then the summed size from readelf is waaaaay below the actual size of the binary - why?</p>\n\n<p>Edit: Adding some more information... The above readelf output was from the fully linked binary. Looking at just the .o that contains symbolA/symbolB, readelf still reports 1 copy of each symbolA and symbolB, at the same address.</p>\n\n<p><em>but</em> if I objdump -d the .o file, I only see assembly for symbolA.</p>\n\n<p>So - is objdump or readelf \"wrong\"?</p>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1495655475, "post_id": 44167237, "comment_id": 75350781, "body": "Some friendly advice: for something like this, you might want to use <code>int64_t</code> instead of <code>int</code>. You&#39;ll thank me later when you aren&#39;t suddenly dealing with overflows in your code!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 2, "creation_date": 1495655587, "post_id": 44167237, "comment_id": 75350828, "body": "@Xirema Or even better <code>uint64_t</code> since I don&#39;t see a requirement to represent negative values."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495655713, "post_id": 44167237, "comment_id": 75350877, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Generally speaking, you shouldn&#39;t use unsigned integers to represent &quot;amounts&quot; unless that last bit of range is absolutely crucial. And to be honest, it&#39;s not clear to me that the OP&#39;s use case is one where there&#39;s absolutely no need for negative numbers."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1495655858, "post_id": 44167237, "comment_id": 75350952, "body": "Thanks for the advice. As I&#39;m dealing with a position, I&#39;ll make it unsigned. The max position will only be ~100000 however."}], "answers": [{"comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1495656615, "post_id": 44167545, "comment_id": 75351362, "body": "That was simple! I also  need to divide the nmPos number with 100, as to get it into the representation the hardware wants it. Thanks!"}], "tags": [], "owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "is_accepted": true, "score": 1, "last_activity_date": 1495656326, "creation_date": 1495656326, "answer_id": 44167545, "question_id": 44167237, "link": "https://stackoverflow.com/questions/44167237/breaking-an-integer-representing-position-into-parts-and-back-again/44167545#44167545", "title": "Breaking an integer, representing position, into parts and back again", "body": "<p>That's the other way around:</p>\n\n<p><code>position_t nmPos = mmVal * 1e6 + umVal * 1e3 + nmVal;</code></p>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 44167545, "answer_count": 1, "score": 0, "last_activity_date": 1495672237, "creation_date": 1495655129, "last_edit_date": 1495672237, "question_id": 44167237, "link": "https://stackoverflow.com/questions/44167237/breaking-an-integer-representing-position-into-parts-and-back-again", "title": "Breaking an integer, representing position, into parts and back again", "body": "<p>I'm working with some hardware that represent the absolute position of a motor, using an unsigned integer. Specs tells me that one digit represents 100nm. </p>\n\n<p>A value of 100,000 is then &lt;=> 10mm, as 100,000 x 100 == 10,000,000 nm &lt;=> 10mm.</p>\n\n<p>For a user to have fine control of the motor, working with such large numbers is not practical. So I'm presenting the number, using its mm, um and nm parts. I can get those as</p>\n\n<pre><code>//Input number x 100 -&gt; value in nm\nunsigned int nmVal = input * 100;\nunsigned int mmValue = (nmVal / 10000000 % 10) * 10  + (nmVal / 1000000 % 10);\nunsigned int umValue = (nmVal / 100000 % 10) * 100 + (nmVal / 10000 % 10) * 10 + \n(nmVal / 1000 % 10);\nunsigned int nm = (nmVal / 100 % 10) * 100;\n</code></pre>\n\n<p>And I can present those in a UI as mmValue + umValue + nmValue in three edit boxes.</p>\n\n<p>The user can then easily modify the nm part without worrying about the other parts.</p>\n\n<p>The question is, how to go the other way, to the integer representing the position, from the 'parts', <em>without</em> using a double??</p>\n\n<p>If I just add the numbers, i.e.</p>\n\n<pre><code>int position = mmVal * 1e-3 + umVal*1e-6 + nmVal*1e-9\n</code></pre>\n\n<p>the variable position will be zero.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495655114, "post_id": 44166911, "comment_id": 75350625, "body": "I find it strange, I tried your code by pressing &quot;Ctrl + N&quot;, you could run <code>Build-&gt; Clean all</code> and then <code>Build-&gt; Run qmake</code>"}, {"owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495655767, "post_id": 44166911, "comment_id": 75350908, "body": "I am still having the same issue after following these steps"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495656412, "post_id": 44166911, "comment_id": 75351247, "body": "You could share your code through github, drive, dropbox or similar."}, {"owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495657171, "post_id": 44166911, "comment_id": 75351616, "body": "Here is a link to the repository: <a href=\"https://github.com/MaxV37/qtbuttonshortcut\" rel=\"nofollow noreferrer\">github.com/MaxV37/qtbuttonshortcut</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495657608, "post_id": 44166911, "comment_id": 75351819, "body": "It works for me, what is your OS?"}, {"owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1495658007, "post_id": 44166911, "comment_id": 75351990, "body": "I am running Manjaro Linux 17.0.1 with KDE Plasma Version 5.9.5 ; Qt 5.8.0 ; kernel 4.9.28-1-MANJARO"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495658351, "post_id": 44166911, "comment_id": 75352156, "body": "Have you tried if in another Qt application (like QtCreator) shortcuts work as expected? e.g. <code>Ctrl+N</code> to create a new file or <code>Ctrl+O</code> to open a file?"}, {"owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "edited": false, "score": 1, "creation_date": 1495658715, "post_id": 44166911, "comment_id": 75352323, "body": "These shortcuts do work, even in my own application, as long as the shortcut is assigned to an action in the menubar. I am having this problem with QPushButton. I do not have in mind any application which uses such shortcuts."}, {"owner": {"reputation": 141, "user_id": 1712200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70cc996ac3414a32bfb6c8495e9951e6?s=128&d=identicon&r=PG", "display_name": "user1712200", "link": "https://stackoverflow.com/users/1712200/user1712200"}, "edited": false, "score": 0, "creation_date": 1566066725, "post_id": 44166911, "comment_id": 101542139, "body": "Just use a &quot;&amp;&quot; in the Button text to define a standard shortcut instead? For example &quot;Push&amp;Button&quot; for Alt+B?"}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "edited": false, "score": 1, "creation_date": 1495658113, "post_id": 44167956, "comment_id": 75352049, "body": "I am not running macOS. My OS is Manjaro Linux 17.0.1 with KDE Plasma Version 5.9.5 ; Qt 5.8.0 ; kernel 4.9.28-1-MANJARO"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "reply_to_user": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "edited": false, "score": 0, "creation_date": 1495658227, "post_id": 44167956, "comment_id": 75352106, "body": "In that case, I will keep the answer because it may be useful for others looking for the same problem (but different solution)."}], "tags": [], "owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "is_accepted": false, "score": 0, "last_activity_date": 1495658156, "last_edit_date": 1495658156, "creation_date": 1495657845, "answer_id": 44167956, "question_id": 44166911, "link": "https://stackoverflow.com/questions/44166911/qt-qpushbutton-shortcut-not-trigering/44167956#44167956", "title": "Qt - QPushButton shortcut not trigering", "body": "<p>You are probably working on a macOS, for which the <code>ControlModifier</code> corresponds with the <code>Command keys</code> and the <code>MetaModifier</code> corresponds to the <code>Control key</code> as <a href=\"http://doc.qt.io/qt-5/qt.html#KeyboardModifier-enum\" rel=\"nofollow noreferrer\">documented by Qt</a>:</p>\n\n<blockquote>\n  <p><strong>Note</strong>: On macOS, the ControlModifier value corresponds to the Command\n  keys on the Macintosh keyboard, and the MetaModifier value corresponds\n  to the Control keys.</p>\n</blockquote>\n\n<p>Also the documentation of <a href=\"http://doc.qt.io/qt-5/qkeysequence.html#details\" rel=\"nofollow noreferrer\"><code>QKeySequence</code></a> gives relevant information:</p>\n\n<blockquote>\n  <p><strong>Note</strong>: On macOS, references to \"Ctrl\", Qt::CTRL, Qt::Key_Control and\n  Qt::ControlModifier correspond to the Command keys on the Macintosh\n  keyboard, and references to \"Meta\", Qt::META, Qt::Key_Meta and\n  Qt::MetaModifier correspond to the Control keys.</p>\n</blockquote>\n\n<p>So, you should press <code>Command + N</code> to trigger the shortcut.</p>\n"}, {"tags": [], "owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "is_accepted": false, "score": 0, "last_activity_date": 1495707259, "creation_date": 1495707259, "answer_id": 44177913, "question_id": 44166911, "link": "https://stackoverflow.com/questions/44166911/qt-qpushbutton-shortcut-not-trigering/44177913#44177913", "title": "Qt - QPushButton shortcut not trigering", "body": "<p>I got around the problem by creating a menubar action triggering the same slot as the button.</p>\n\n<p>Since the shortcuts work (in my case) only with menubar actions, I believe this is a good alternative, because the button that I wanted to have a shortcut triggered one of the main slots of my application.</p>\n\n<p>I did the following:</p>\n\n<ul>\n<li>Replace the button's auto-connected slot with the action's one</li>\n<li>Connect the button's <code>clicked()</code> signal to the action's <code>triggered()</code> signal</li>\n<li>Set the shortcut to the action</li>\n</ul>\n"}], "owner": {"reputation": 530, "user_id": 5699458, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04d938f23072c876f965ade691631184?s=128&d=identicon&r=PG&f=1", "display_name": "MaxV37", "link": "https://stackoverflow.com/users/5699458/maxv37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 653, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1495707259, "creation_date": 1495653816, "last_edit_date": 1495705168, "question_id": 44166911, "link": "https://stackoverflow.com/questions/44166911/qt-qpushbutton-shortcut-not-trigering", "title": "Qt - QPushButton shortcut not trigering", "body": "<p>I am having trouble with binding a shortcut to a <code>QPushButton</code> through QtCreator.</p>\n\n<p>What I did is to place a button in a <code>QDialog</code> and to use auto-connect to connect the <code>clicked()</code> signal to a slot. I then set up the property <code>QAbstractButton::shortcut</code> to <kbd>Ctrl</kbd>+<kbd>N</kbd> in the form editor.</p>\n\n<p>When I click the button, the slot gets triggered, but when I press the shortcut, nothing happens.</p>\n\n<p>Here is the code for the ui file :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;Dialog&lt;/class&gt;\n &lt;widget class=\"QDialog\" name=\"Dialog\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;400&lt;/width&gt;\n    &lt;height&gt;300&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;Dialog&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QPushButton\" name=\"pushButton\"&gt;\n   &lt;property name=\"text\"&gt;\n    &lt;string&gt;PushButton&lt;/string&gt;\n   &lt;/property&gt;\n   &lt;property name=\"shortcut\"&gt;\n    &lt;string&gt;Ctrl+N&lt;/string&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n &lt;/widget&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p>And here is the code for my Dialog class (header and source have been merged):</p>\n\n<pre><code>namespace Ui {\nclass Dialog;\n}\n\nclass Dialog : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit Dialog(QWidget *parent = 0) :\n        QDialog(parent), ui(new Ui::Dialog)\n    {\n        ui-&gt;setupUi(this);\n    }\n\nprivate slots:\n    void on_pushButton_clicked()\n    {\n        qDebug() &lt;&lt; \"click!\";\n    }\n\nprivate:\n    Ui::Dialog *ui;\n};\n\nint main(int argc, char* argv[]) {\n    QApplication app(argc, argv);\n    Dialog dialog;\n    dialog.show();\n    return app.exec();\n}\n</code></pre>\n\n<p>I managed to make it work with an action in the menubar, I don't understand why it does not seem to work the same.</p>\n\n<p>I am using Qt 5.8.0.</p>\n"}, {"tags": ["c++", "if-statement", "c++14", "c++builder"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1495655080, "post_id": 44166892, "comment_id": 75350609, "body": "it can as simple as this <code>if(x or y)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 1, "creation_date": 1495660199, "post_id": 44166920, "comment_id": 75353010, "body": "Finally!!  After years of teaching Computer Organization and Architecture I see somebody actually applying Boolean algebra to solve a design problem...Just the fact that you mention it makes me smile.  :)  Ahhhh those basic identities are still alive and well!!"}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495660568, "post_id": 44166920, "comment_id": 75353161, "body": "One catch with your solution though...the case where x = -1 and y = 1.  Their sum is zero.  Just saying."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 10, "last_activity_date": 1495653890, "last_edit_date": 1495653890, "creation_date": 1495653848, "answer_id": 44166920, "question_id": 44166892, "link": "https://stackoverflow.com/questions/44166892/satisfy-two-conditions-with-a-single-if-in-c/44166920#44166920", "title": "Satisfy two conditions with a single if in C++", "body": "<p>You need</p>\n\n<pre><code>if (!(x == 0 &amp;&amp; y == 0)) {\n    ...\n}\n</code></pre>\n\n<p>You can use <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"noreferrer\">De Morgan's laws</a> to translate it to</p>\n\n<pre><code>if (x != 0 || y != 0) {\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 7347113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17313748531e894a35b13b8cf781a436?s=128&d=identicon&r=PG&f=1", "display_name": "mssnrg", "link": "https://stackoverflow.com/users/7347113/mssnrg"}, "is_accepted": false, "score": 1, "last_activity_date": 1495665846, "last_edit_date": 1495665846, "creation_date": 1495654269, "answer_id": 44167027, "question_id": 44166892, "link": "https://stackoverflow.com/questions/44166892/satisfy-two-conditions-with-a-single-if-in-c/44167027#44167027", "title": "Satisfy two conditions with a single if in C++", "body": "<p>You can use a exnot condition with and condition</p>\n\n<pre><code>if (!(x == 0 &amp;&amp; y == 0)) { //code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1495654433, "creation_date": 1495654433, "answer_id": 44167066, "question_id": 44166892, "link": "https://stackoverflow.com/questions/44166892/satisfy-two-conditions-with-a-single-if-in-c/44167066#44167066", "title": "Satisfy two conditions with a single if in C++", "body": "<pre><code>namespace utility{\n  bool all_of( std::initializer_list&lt;bool&gt; bs ){\n    return std::all_of(bs.begin(), bs.end(), [](bool b){return b;});\n  }\n  bool any_of( std::initializer_list&lt;bool&gt; bs ){\n    return std::any_of(bs.begin(), bs.end(), [](bool b){return b;});\n  }\n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>if(!utility::all_of({x==0, y==0})){\n  a = x+y;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if(!(x==0 &amp;&amp; y==0)){\n  a = x+y;\n}\n</code></pre>\n\n<p>if you are more sane.</p>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "is_accepted": false, "score": 3, "last_activity_date": 1495655251, "last_edit_date": 1495655251, "creation_date": 1495654818, "answer_id": 44167162, "question_id": 44166892, "link": "https://stackoverflow.com/questions/44166892/satisfy-two-conditions-with-a-single-if-in-c/44167162#44167162", "title": "Satisfy two conditions with a single if in C++", "body": "<p>You should Use logical <strong>OR</strong> operator instead of <strong>AND</strong> operator to get the expected result:</p>\n\n<pre><code>if(x!=0 || y!=0){\n   a = x+y;\n}\n</code></pre>\n\n<p>The boolean table of this condition will be <code>false</code> if only both operands are <code>0</code> other than it's <code>true</code>:</p>\n\n<pre><code>0  0  false\n1  0  true \n0  1  true\n1  1  true\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 3071449, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Cextz.jpg?s=128&g=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/3071449/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 44166920, "answer_count": 4, "score": 1, "last_activity_date": 1495665846, "creation_date": 1495653727, "question_id": 44166892, "link": "https://stackoverflow.com/questions/44166892/satisfy-two-conditions-with-a-single-if-in-c", "title": "Satisfy two conditions with a single if in C++", "body": "<p>Is there any way to simultaneously satisfy two conditions in C++?</p>\n\n<p>I have a list of </p>\n\n<pre><code> x and y\n-1    -1\n-1     0\n-1     1\n 0    -1\n 0     0\n 0     1\n 1    -1\n 1     0\n 1     1\n</code></pre>\n\n<p>So I want to use all of them combination in a equation such as:</p>\n\n<pre><code>a = x+y (example)\n</code></pre>\n\n<p>however I want to exclude the situation in which x and y are = 0 simultaneously.</p>\n\n<p>so I tried:</p>\n\n<pre><code>if(x!=0 &amp;&amp; y!=0){\na = x+y;\n}\n</code></pre>\n\n<p>But that excludes every case when x or y are equal to 0 and not just the point x,y = (0,0) as I want. </p>\n\n<p>How can I solve that?</p>\n"}, {"tags": ["c++", "gcc", "c++14"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1495654081, "post_id": 44166886, "comment_id": 75350122, "body": "Individual lambdas have their own individual implementations, and as such they are treated as individual types, even if they happen to have the same signature."}, {"owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495654510, "post_id": 44166886, "comment_id": 75350317, "body": "....sounds very reasonable, but shouldn&#39;t the error message reflect this? Currently it says, for some &quot;A&quot; that A is not the same as A."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "edited": false, "score": 0, "creation_date": 1495654705, "post_id": 44167018, "comment_id": 75350410, "body": "....sounds very reasonable, but shouldn&#39;t the error message reflect this? Currently it says, for some &quot;A&quot; that A is not the same as A"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "reply_to_user": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "edited": false, "score": 0, "creation_date": 1495655538, "post_id": 44167018, "comment_id": 75350811, "body": "@DCTLib yes, if you don&#39;t know the problem the message isn&#39;t very helpful. What version of g++ do you use? IIRC I have seen g++ messages about lambdas with some cryptical names for each lambda."}, {"owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "edited": false, "score": 0, "creation_date": 1495656204, "post_id": 44167018, "comment_id": 75351131, "body": "I use &quot;G++ 6.3.0 20170406&quot; - The current one for Ubuntu 17.04"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495682064, "post_id": 44167018, "comment_id": 75358830, "body": "It is unlikely to get a readable name for lambdas IMO, they are, after all, anonymous."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "is_accepted": false, "score": 3, "last_activity_date": 1495654306, "last_edit_date": 1495654306, "creation_date": 1495654253, "answer_id": 44167018, "question_id": 44166886, "link": "https://stackoverflow.com/questions/44166886/g-error-message-operands-to-have-different-types-but-i-have-two-times-the/44167018#44167018", "title": "G++ Error Message &quot;Operands to ?: have different types&quot; but I Have Two Times the Same Type", "body": "<p>The message is correct. Each lambda is a different type. Think of them as two different structs that both define <code>operator()</code>. Use a <code>std::function</code> instead of <code>auto</code>:</p>\n\n<pre><code>void test(bool flag) {\n    int a = 33;\n    std::function&lt;int (int)&gt; x = [&amp;a](int size){ return size*3; };\n    std::function&lt;int (int)&gt; y = [&amp;a](int size){ return size*2; };\n    yadda(flag?x:y);\n}\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 2253564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688b3d797dc2fb32a5b1d288c72651fa?s=128&d=identicon&r=PG", "display_name": "DCTLib", "link": "https://stackoverflow.com/users/2253564/dctlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495654306, "creation_date": 1495653703, "question_id": 44166886, "link": "https://stackoverflow.com/questions/44166886/g-error-message-operands-to-have-different-types-but-i-have-two-times-the", "title": "G++ Error Message &quot;Operands to ?: have different types&quot; but I Have Two Times the Same Type", "body": "<p>Why does the code below not compile? g++ outputs the error message:</p>\n\n<pre><code>test.cpp: In function \u2018void test(bool)\u2019:\ntest.cpp:11:15: error: operands to ?: have different types \u2018test(bool)::&lt;lambda(int)&gt;\u2019 and \u2018test(bool)::&lt;lambda(int)&gt;\u2019\n     yadda(flag?x:y);\n           ~~~~^~~~\n</code></pre>\n\n<p>Which makes little sense to me, as the two types given in the error message seem to be the same. I am using the following code:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nvoid yadda(std::function&lt;int(int)&gt; zeptok) {\n    zeptok(123);\n}\n\nvoid test(bool flag) {\n    int a = 33;\n    auto x = [&amp;a](int size){ return size*3; };\n    auto y = [&amp;a](int size){ return size*2; };\n    yadda(flag?x:y);\n}\n</code></pre>\n\n<p>I compile with \"g++ -c test.cpp -std=c++14\" and my GCC version is \"6.3.0 20170406 (Ubuntu 6.3.0-12ubuntu2)\".</p>\n"}, {"tags": ["c++", "xcode", "matlab", "mex", "cplex"], "comments": [{"owner": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1495776635, "post_id": 44166794, "comment_id": 75401936, "body": "I don&#39;t know the MacOS stuff, but I have had similar errors in the past on other systems. The Windows installation has a file called c_cpp.html that says that the Concert libraries are compiled to use the standard template libraries (i.e. the std:: classes). If building your own project, you should &quot;Add IL_STD to the Preprocessor Definitions field. This choice defines the macro IL_STD which is needed to use the STL&quot;. Digging around in the .h files shows that this certainly does something about switching between the original and std:: versions of the io streams headers etc"}, {"owner": {"reputation": 33, "user_id": 8016802, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e5c24bc714f372a90153d2609dc3bfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Na Freeman", "link": "https://stackoverflow.com/users/8016802/na-freeman"}, "reply_to_user": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1495790517, "post_id": 44166794, "comment_id": 75408930, "body": "I wish if that will resolve my issue, but I have to clarify something, If I use Eclipse for example, I can do  <code>C&#47;C++ Project Properties&quot; \u2192 &quot;Paths and Symbols&quot; \u2192 &quot;Symbols</code>, but I&#39;m on Matlab and Xcode Clang as a compiler, so how to add <code>IL_STD</code>?"}, {"owner": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1495800205, "post_id": 44166794, "comment_id": 75414716, "body": "Dunno, to be honest. A kind of quick and dirty way that is independent of compilers and IDEs is to put the #define IL_STD  into your own header file and include that as the first include in all your files"}, {"owner": {"reputation": 33, "user_id": 8016802, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e5c24bc714f372a90153d2609dc3bfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Na Freeman", "link": "https://stackoverflow.com/users/8016802/na-freeman"}, "reply_to_user": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1495802946, "post_id": 44166794, "comment_id": 75416641, "body": "I would to thank you for your help, I guess is work but I got some new errors , can U see my EDIT above..."}, {"owner": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 0, "creation_date": 1495893095, "post_id": 44166794, "comment_id": 75445944, "body": "Is that a 32 vs 64 bit issue? Or maybe check the libraries are correctly specified?"}], "owner": {"reputation": 33, "user_id": 8016802, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e5c24bc714f372a90153d2609dc3bfc2?s=128&d=identicon&r=PG&f=1", "display_name": "Na Freeman", "link": "https://stackoverflow.com/users/8016802/na-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497978541, "creation_date": 1495653332, "last_edit_date": 1497978541, "question_id": 44166794, "link": "https://stackoverflow.com/questions/44166794/cant-compile-mex-file-with-cplex-and-matlab-on-mac-osxxcode", "title": "Can&#39;t compile Mex-file with Cplex and Matlab on MAC OSX(Xcode)", "body": "<p>I have a serious problem when I use the cplex optimization studio with matlab on MAC OSX to solve a linear programming problem. I tried to run a mex file so I do </p>\n\n<pre><code>mex -I/...../Applications/IBM/ILOG/CPLEX_Studio1271/cplex/include -I/....../Applications/IBM/ILOG/CPLEX_Studio1271/concert/include -L/......../Applications/IBM/ILOG/CPLEX_Studio1271/cplex/lib/x86-64_osx -lcplex lp_cplex_mex.cpp\n</code></pre>\n\n<p>So in the code above I call <code>.h header</code> and the library to use them in <code>.cpp</code> file, the first error I get is :</p>\n\n<pre><code>...concert/include/ilconcert/ilosys.h:391:10: fatal\nerror: 'iostream.h' file not found\n</code></pre>\n\n<p>So I go to this line and I change <code>&lt;iostream.h&gt;</code> by <code>&lt;iostream&gt;</code>, then it can knows the file but in the next compilation I got more than 20 errors again such as:</p>\n\n<pre><code>In file included from /.../Desktop/example/lp_cplex_mex.cpp:22:\nIn file included from...\n</code></pre>\n\n<p>And </p>\n\n<pre><code>unknown type name 'ostream'; did you mean 'std::ostream'?\n    virtual void print(ILOSTD(ostream)&amp; out) const;\n                       ~~~~~~~^~~~~~~~\n                       std::ostream\n</code></pre>\n\n<p>I clarify that:</p>\n\n<ul>\n<li>I can compile yprime.c and other MEX files that do not use the CPLEX API</li>\n<li>I am using MATLAB 2015a on Mac OSX El Capitan 10.11.16</li>\n<li>I am using the GCC package included in XCode 8.2</li>\n</ul>\n\n<p>Also If I try to change in every file for example <code>ostream</code> by <code>std::ostream</code>, I will not reach anything because is a <code>Cplex Library</code> with thousands of lines. On the other hand, I have installed the last edition of cplex and Xcode?!</p>\n\n<p>I wish your advices about this issues because the most solution I found is to change for example <code>&lt;iostream.h&gt;</code> by <code>&lt;iostream&gt;</code> but as I said it's not a perfect solution because I can change only in my C++ Mex-file not in Cplex!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Now I'm doing as you said and I added <code>#define IL_STD</code>in the head of my <code>.cpp</code> compiled file then I get new errors :</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"IloNumExpr::IloNumExpr(IloNumExprArg)\", referenced from:\n  _main in lp_cplex_mex.o\n\"IloNumArray::IloNumArray(IloEnv, long)\", referenced from:\n  _main in lp_cplex_mex.o\n\"IloAddNumVar::~IloAddNumVar()\", referenced from:\n  _main in lp_cplex_mex.o\n\"IloObjective::setLinearCoef(IloNumVar, double)\", referenced from:\n  _main in lp_cplex_mex.o\n\"IloObjective::IloObjective(IloEnv, double, IloObjective::Sense, char \nconst*)\", referenced from:\n  _main in lp_cplex_mex.o\n.......\n.......\n\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see \ninvocation)\n</code></pre>\n"}, {"tags": ["c++", "serialization", "network-programming", "void-pointers"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495653828, "post_id": 44166789, "comment_id": 75349973, "body": "I&#39;m not sure what &quot;it is cutting off my second variable&quot; means. What exactly is the problem you&#39;re having?"}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1495653942, "post_id": 44166789, "comment_id": 75350044, "body": "How does <code>m_network-&gt;send</code> know how much data to send?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495654714, "post_id": 44166789, "comment_id": 75350417, "body": "SHA256 is not sutable for hashing passwords, so the security of this system is immediately suspect. The fixed length fields are also ripe for buffer overflow attacks, there&#39;s no bounds checking being done here. This is why you use <code>std::string</code> whenever possible."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495654888, "post_id": 44166789, "comment_id": 75350503, "body": "If you want to send this over the network, don&#39;t use fixed-sized buffers. Use something like Pascal strings: One byte for length, plus variable length content. Normally 255 characters is enough for things like this. If you need more you can go UTF-8 style, the first byte, if &gt; 127, is paired with the second for length and so on."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1495655462, "post_id": 44166789, "comment_id": 75350774, "body": "Another thing to note is you should be sending raw passwords over TLS, that sending a pre-hashed password means your login security is extremely flimsy. Even when SHA256 was used for passwords, which was some time ago, they were salted, and if properly salted you can&#39;t compare a hashed guess vs. a saved known-good hash. It&#39;s basically impossible. SMTP used to use a form of this, <a href=\"https://en.wikipedia.org/wiki/Hash-based_message_authentication_code\" rel=\"nofollow noreferrer\">HMAC</a>, but it&#39;s basically useless as TLS is way, <i>way</i> stronger."}, {"owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495657724, "post_id": 44166789, "comment_id": 75351889, "body": "@tadman, while off-topic and unrelated to my original question, that is a wonderful amount of information.   tl;dr - Thank You!  Longer: I am using this as a test bed to get network pieces working. I didn&#39;t see a point to building a coded &quot;fort knox&quot; when I couldn&#39;t relay data between the client &amp; server correctly. Will definitely keep your comments in my personal notes for the network and security classes (when I get to that step)!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658084, "post_id": 44166789, "comment_id": 75352038, "body": "Good luck with your project! I&#39;m just concerned that decisions made now might be cemented in there and very difficult to undo and fix later. Safety is no joke these days. People will crack anything and everything."}, {"owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658467, "post_id": 44166789, "comment_id": 75352217, "body": "@tadman I am a Linux Sysadmin by trade. I completely understand your concerns and share them as well. Given this is both a &quot;for-fun&quot; project and a &quot;re-learning C++&quot; project...mistakes will be made...in gigantic quantities. :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495658598, "post_id": 44166789, "comment_id": 75352281, "body": "Nothing wrong with learning. One thing to look at for inspiration is using JSON for transport, or <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow noreferrer\">Protocol Buffers</a> if you&#39;re of a more raw-binary mindset."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495654796, "post_id": 44167107, "comment_id": 75350459, "body": "<code>strncpy</code> doesn&#39;t <code>NULL</code> terminate if the content is too long to fit, so you may need to force-<code>NULL</code> this string manually or limit to <code>sizeof(x)-1</code>."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495655241, "post_id": 44167107, "comment_id": 75350676, "body": "Yeah, I thought that originally too. This will be sent out over the network so it&#39;s not necessary for it to be a null terminated string. As I pointed out though this can be a problem if trying to print it out as null terminated when it&#39;s not."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495655323, "post_id": 44167107, "comment_id": 75350711, "body": "For it to be null terminated it would have to add one more char to the buffer size which I&#39;m assuming the other side is not expecting that size. It looks like the password hash is full at 64."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495655328, "post_id": 44167107, "comment_id": 75350715, "body": "&quot;Not necessary&quot; is a pretty wild assumption to make here. There&#39;s a very high probability that on the receiving side these will be used as-is. This structure is really inadequate for the task at hand."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1495655541, "post_id": 44167107, "comment_id": 75350812, "body": "Yeah, actually it&#39;s not clear either way based on how this question was asked. True, <code>sizeof(x)-1</code> would be needed if maintaining null terminated strings, which is what I put originally."}, {"owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "edited": false, "score": 0, "creation_date": 1495658171, "post_id": 44167107, "comment_id": 75352073, "body": "@MrJLP,  Thank you for your reply! The issue is that when I use memcpy or strncopy to fill the fields, they appear normally. However, when I use the memcpy to pData ( <code>memcpy(pData, &amp;login, sizeof(Login_Struct));</code> ) It only keeps the username variable. I attempted the use of strncpy with the string length to omit the null terminator, to hopefully bypass this. If this is not clear, please let me know and I will attempt to reword.  Thank you again!"}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495658577, "post_id": 44167107, "comment_id": 75352266, "body": "@BeauB.It would be helpful to describe exactly and concisely what the problem is and how you know that. I&#39;m still not exactly sure what &quot;It only keeps the username variable&quot; means either. Do you mean the <code>password</code> field is full of null chars? Is it truncated? How are you determining this? Since these are not null terminated C strings you&#39;ll need to be careful about how it&#39;s printed out"}, {"owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "edited": false, "score": 0, "creation_date": 1495659064, "post_id": 44167107, "comment_id": 75352467, "body": "@MrJLP, that is fair and thank you again for your continued assistance. I am looking to pass a username and password, in string form, to this function. From here, ensure they meet the length requirements/max of the <b>Login_Struct</b>, serialize, and send to the <b>Network</b> class for transmission. My <i>cout</i> spam is more for me to visually track things, as I learn better visually when stuck. From the line &quot; <i>NetWrapper::sendSerialized: Post memcpy!...</i> &quot;, it only shows the pData as being [bob] (mentioned in original debug block). The Network::send function also shows a string with a length of 3."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495659730, "post_id": 44167107, "comment_id": 75352816, "body": "I&#39;d recommend looking at <code>NetWrapper::sendSerialized</code> to get down to the bottom of what&#39;s going on. From what&#39;s presented here it&#39;s hard to tell what&#39;s going on. For all we know there could be a bug in that part of the code, or elsewhere in between"}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495659921, "post_id": 44167107, "comment_id": 75352905, "body": "Actually, here&#39;s what you can do. Verify that the <code>Login</code> struct is valid after copying to <code>pData</code>."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495660119, "post_id": 44167107, "comment_id": 75352976, "body": "Hold on. Your <code>cout</code> is working as expected and not showing the password, even though it could be there. There is a <code>\\0</code> terminating char after &quot;bob&quot; which ends the string, so the password won&#39;t be shown."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1495660241, "post_id": 44167107, "comment_id": 75353029, "body": "You&#39;ll need a valid way to show what&#39;s in your struct. Good luck. Mark as resolved if this fixes your prob. I&#39;ll update answer. Resolve if it works out"}, {"owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "edited": false, "score": 1, "creation_date": 1495660592, "post_id": 44167107, "comment_id": 75353176, "body": "@MrJLP, you nailed it. When I added a debug block to deserialize it <b>before</b> the handoff to m_network-&gt;send(), it came back with my password. Got stuck spinning my wheels, so to speak, because of a null terminator wrecking my cout. Marking it as the answer and updating my original post. <b>THANK YOU!</b>"}], "tags": [], "owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "is_accepted": true, "score": 0, "last_activity_date": 1495660515, "last_edit_date": 1495660515, "creation_date": 1495654583, "answer_id": 44167107, "question_id": 44166789, "link": "https://stackoverflow.com/questions/44166789/c-class-to-void-pointer-data-lost/44167107#44167107", "title": "C++ Class to Void Pointer, Data Lost?", "body": "<p>From the question it's not clear what exactly your problem is. There are a couple potential problems I see though.</p>\n\n<p>You're method of viewing if your code is working will not work.</p>\n\n<pre><code>std::cout&lt;&lt;\"NetWrapper::sendSerialized: Post memcpy! pData [\"&lt;&lt;pData&lt;&lt;\"], sizeof(pData) [\"&lt;&lt;sizeof(pData)&lt;&lt;\"], sizeof(&amp;pData) [\"&lt;&lt;sizeof(&amp;pData)&lt;&lt;\"], sizeof(*pData) [\"&lt;&lt;sizeof(*pData)&lt;&lt;\"]\\n\";\n</code></pre>\n\n<p>The char array <code>pData</code> will contain two char buffers holding two strings. If your test name is 'bob' then there will be a null char after and that's all that it will show using <code>cout</code>.\nYou'll need a function to dump the contents of your buffer, or else possibly do something like <code>printf(\"password='%.*s'\", 64, pData + 32)</code>. That's for you to figure out.</p>\n\n<p>Another problem is you're using <code>memcpy()</code> but not clearing the memory of the buffer before. It's undefined what's in the buffer past the string you're copying over.</p>\n\n<p>You're sending this out over the network so your strings can end up not being null terminated. That might be okay, or it might not. It depends on what's expected.\nIt would definitely cause an issue if something on the receiving end is expecting a valid null terminated C string. Or also trying to use something like <code>printf()</code> on them.</p>\n\n<p>This will fix the problem of not clearing the memory first, assuming it's sending <strong>not</strong> as a null terminated string:</p>\n\n<pre><code>memset(&amp;login, 0, sizeof(login));\nstrncpy(login.username, user.c_str(), sizeof(login.username)); \nstrncpy(login.password, hashPass.c_str(), sizeof(login.password));\n</code></pre>\n\n<p>The first <code>memset()</code> clears all the bytes to be 0, and <code>strncpy()</code> makes sure not to copy more chars than is available in destination buffer.</p>\n\n<p>If the problem is that it <strong>does</strong> expect a null terminated C string, then you'll need to add <code>+1</code> to the size of the char arrays to hold the null terminator, and then copy them as:</p>\n\n<pre><code>memset(&amp;login, 0, sizeof(login));\nstrncpy(login.username, user.c_str(), sizeof(login.username)-1); \nstrncpy(login.password, hashPass.c_str(), sizeof(login.password)-1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1177, "user_id": 2460971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lsXmD.jpg?s=128&g=1", "display_name": "numaroth", "link": "https://stackoverflow.com/users/2460971/numaroth"}, "is_accepted": false, "score": 0, "last_activity_date": 1495719092, "creation_date": 1495719092, "answer_id": 44181886, "question_id": 44166789, "link": "https://stackoverflow.com/questions/44166789/c-class-to-void-pointer-data-lost/44181886#44181886", "title": "C++ Class to Void Pointer, Data Lost?", "body": "<p><a href=\"https://stackoverflow.com/revisions/44166789/4\">Solution by the original asker:</a></p>\n\n<blockquote>\n  <p>ANSWER: This was an issue of me not clearing the buffer and then me\n  getting caught by cout and a null terminator. The bit below is working\n  (and debug output below). Huge thanks to MrJLP for the time/effort!</p>\n\n<pre><code>void NetWrapper::sendLogin(std::string user, std::string pass)\n{\n    if( user.length() &gt; sizeof(Login_Struct::username)\n    ||  pass.length() &gt; sizeof(Login_Struct::password)) { return; }\n\n    std::string hashPass = Security::strSHA256(pass);\n\n    Login_Struct login;\n    memset(&amp;login, 0, sizeof(Login_Struct)); // clear buffer\n    strncpy(login.username, user.c_str(), user.length());\n    strncpy(login.password, hashPass.c_str(), hashPass.length());\n\n    std::cout&lt;&lt;\"NetWrapper::sendLogin: Login_Struct Dump [\"&lt;&lt;login.username&lt;&lt;\"] (\"&lt;&lt;user&lt;&lt;\"), [\"&lt;&lt;login.password&lt;&lt;\"] (\"&lt;&lt;pass&lt;&lt;\")\\n\";\n    std::cout&lt;&lt;\"DEBUG: username maxlength [\"&lt;&lt;sizeof(login.username)&lt;&lt;\"], user length [\"&lt;&lt;user.length()&lt;&lt;\"], user size [\"&lt;&lt;sizeof(user)&lt;&lt;\"]\\n\";\n    std::cout&lt;&lt;\"DEBUG: password maxlength [\"&lt;&lt;sizeof(login.password)&lt;&lt;\"], pass length [\"&lt;&lt;hashPass.length()&lt;&lt;\"], pass size [\"&lt;&lt;sizeof(hashPass)&lt;&lt;\"]\\n\";\n\n    char* pData = new char[sizeof(Login_Struct)];\n    memcpy(pData, &amp;login, sizeof(Login_Struct)); // serialize data for sending\n\n    Login_Struct dslogin;\n    memset(&amp;dslogin, 0, sizeof(Login_Struct)); // clear buffer\n    memcpy(&amp;dslogin, pData, sizeof(Login_Struct));\n    std::cout&lt;&lt;\"NetWrapper::sendLogin: Test Dump [\"&lt;&lt;dslogin.username&lt;&lt;\"] [\"&lt;&lt;dslogin.password&lt;&lt;\"]\\n\";\n\n    // if we have data, send it and cleanup\n    if(pData) { m_network-&gt;send(pData, OP_Login); delete pData; }\n    pData = nullptr;\n}\n</code></pre>\n  \n  <p>And debug output:</p>\n\n<pre><code>NetWrapper::sendLogin: Login_Struct Dump [bob] (bob), [5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8\ufffd\ufffdlY\ufffd] (password)\nDEBUG: username maxlength [32], user length [3], user size [32]\nDEBUG: password maxlength [64], pass length [64], pass size [32]\nNetWrapper::sendLogin: Test Dump [bob] [5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8]\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 6845246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93429d3ba1e9754fba0d5105af44efa?s=128&d=identicon&r=PG&f=1", "display_name": "Beau B.", "link": "https://stackoverflow.com/users/6845246/beau-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 44167107, "answer_count": 2, "score": 2, "last_activity_date": 1495741937, "creation_date": 1495653317, "last_edit_date": 1495741937, "question_id": 44166789, "link": "https://stackoverflow.com/questions/44166789/c-class-to-void-pointer-data-lost", "title": "C++ Class to Void Pointer, Data Lost?", "body": "<p>(This was mistakenly post in GameDev. Thanks to the moderators there for the point in the correct location to ask!)</p>\n\n<p>I am casting a simple struct to a void pointer so it can be sent out on the network, but it is cutting off my second variable for reasons unknown to me. </p>\n\n<p>I have found a few similar threads, notably <a href=\"https://rubentorresbonet.wordpress.com/2014/08/25/an-overview-of-data-serialization-techniques-in-c/\" rel=\"nofollow noreferrer\">this one</a>, which has been a great help. I am reasonably certain this is a \"newbie mistake\" or I am overlooking something exceedingly simple. </p>\n\n<p>Any input is appreciated, so thank you in advance!</p>\n\n<pre><code>/* struct provided */\nstruct Login_Struct\n{\n/*000*/ char username[32];\n/*032*/ char password[64];\n/*096*/\n};\n\n\nvoid NetWrapper::sendLogin(std::string user, std::string pass)\n{\n    // ensure size constraints are met\n    if( user.length() &gt; sizeof(Login_Struct::username)\n    ||  pass.length() &gt; sizeof(Login_Struct::password)) { return; }\n\n    std::string hashPass = Security::strSHA256(pass); // returns hashed password\n\n    Login_Struct login; // empty struct\n    //strncpy(login.username, user.c_str(), user.length()); // i.e 'bob'\n    //strncpy(login.password, hashPass.c_str(), hashPass.length()); // hashed password (64 char)\n    memcpy(login.username, user.c_str(), user.length()); \n    memcpy(login.password, hashPass.c_str(), hashPass.length());\n\n    char* pData = new char[sizeof(Login_Struct)];\n    //memcpy(static_cast&lt;void*&gt;(pData), static_cast&lt;void*&gt;(&amp;login), sizeof(Login_Struct)); // serialize data for sending\n    memcpy(pData, &amp;login, sizeof(Login_Struct)); // serialize data for sending\n\n    // if we have data, send it and cleanup\n    if(pData) { m_network-&gt;send(pData, OP_Login); delete pData; } // Network::send(char* d, short opCode)\n    pData = nullptr;\n}\n</code></pre>\n\n<p>Additionally, debug output looks like this (omitted from code for readability, can supply if needed/requested):</p>\n\n<pre><code>NetWrapper::sendLogin: Login_Struct Dump [bob] (bob), [5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8] (password)\nDEBUG: username maxlength [32], user length [3]\nDEBUG: password maxlength [64], pass length [64]\nDEBUG: pData [x=\ufffdi=], [0x7ffc5e4fd0e0], sizeof(Login_Struct) [96], sizeof(login) [96]\nNetWrapper::sendLogin: New pData! pData [x=\ufffdi=]\nNetWrapper::sendLogin: Post memcpy! pData [bob]\nNetwork::send : Sending [d0c8504000100bob] ## ignore characters preceding \"bob\"\n</code></pre>\n\n<p>@wondra mentioned on my incorrectly located post that it is an issue of the null terminator killing it for me. I have made adjustments to copy the string without the null terminator, but I am either misunderstanding how it is placed or that is not the issue.</p>\n\n<hr>\n\n<p>EDIT: Adding code with debug nonsense to help this make sense. Thanks to all that have replied so far! (And yes, I am embarrassed at having resorted to cout spam. Open to suggestions on better/cleaner methods!)</p>\n\n<pre><code>void NetWrapper::sendLogin(std::string user, std::string pass)\n{\n    if( user.length() &gt; sizeof(Login_Struct::username)\n    ||  pass.length() &gt; sizeof(Login_Struct::password)) { return; }\n\n    std::string hashPass = Security::strSHA256(pass);\n\n    Login_Struct login;\n    memset(&amp;login, 0, sizeof(Login_Struct)); // clear buffer\n    strncpy(login.username, user.c_str(), user.length());\n    strncpy(login.password, hashPass.c_str(), hashPass.length());\n    //memcpy(login.username, user.c_str(), user.length());\n    //memcpy(login.password, hashPass.c_str(), hashPass.length());\n\n    std::cout&lt;&lt;\"NetWrapper::sendLogin: Login_Struct Dump [\"&lt;&lt;login.username&lt;&lt;\"] (\"&lt;&lt;user&lt;&lt;\"), [\"&lt;&lt;login.password&lt;&lt;\"] (\"&lt;&lt;pass&lt;&lt;\")\\n\";\n    std::cout&lt;&lt;\"DEBUG: username maxlength [\"&lt;&lt;sizeof(login.username)&lt;&lt;\"], user length [\"&lt;&lt;user.length()&lt;&lt;\"], user size [\"&lt;&lt;sizeof(user)&lt;&lt;\"]\\n\";\n    std::cout&lt;&lt;\"DEBUG: password maxlength [\"&lt;&lt;sizeof(login.password)&lt;&lt;\"], pass length [\"&lt;&lt;hashPass.length()&lt;&lt;\"], pass size [\"&lt;&lt;sizeof(hashPass)&lt;&lt;\"]\\n\";\n\n    char* pData = new char[sizeof(Login_Struct)];\n    std::cout&lt;&lt;\"DEBUG: pData [\"&lt;&lt;pData&lt;&lt;\"], sizeof(pData) [\"&lt;&lt;sizeof(pData)&lt;&lt;\"], sizeof(&amp;pData) [\"&lt;&lt;sizeof(&amp;pData)&lt;&lt;\"], [\"&lt;&lt;static_cast&lt;void*&gt;(&amp;login)&lt;&lt;\"], sizeof(Login_Struct) [\"&lt;&lt;sizeof(Login_Struct)&lt;&lt;\"], sizeof(login) [\"&lt;&lt;sizeof(login)&lt;&lt;\"]\\n\";\n    std::cout&lt;&lt;\"NetWrapper::sendLogin: New pData! pData [\"&lt;&lt;pData&lt;&lt;\"], sizeof(pData) [\"&lt;&lt;sizeof(pData)&lt;&lt;\"], sizeof(&amp;pData) [\"&lt;&lt;sizeof(&amp;pData)&lt;&lt;\"]\\n\";\n    /// ------------------\n    //memcpy(static_cast&lt;void*&gt;(pData), static_cast&lt;void*&gt;(&amp;login), sizeof(Login_Struct)); // serialize data for sending\n    memcpy(pData, &amp;login, sizeof(Login_Struct)); // serialize data for sending\n    /// ------------------\n    std::cout&lt;&lt;\"NetWrapper::sendLogin: Post memcpy! pData [\"&lt;&lt;pData&lt;&lt;\"], sizeof(pData) [\"&lt;&lt;sizeof(pData)&lt;&lt;\"], sizeof(&amp;pData) [\"&lt;&lt;sizeof(&amp;pData)&lt;&lt;\"], sizeof(*pData) [\"&lt;&lt;sizeof(*pData)&lt;&lt;\"]\\n\";\n\n    // if we have data, send it and cleanup\n    if(pData) { m_network-&gt;send(pData, OP_Login); delete pData; }\n    pData = nullptr;\n}\n</code></pre>\n"}, {"tags": ["c++", "fortran", "interop"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495652517, "post_id": 44166549, "comment_id": 75349345, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 6498, "user_id": 1004168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c05e808436031bc45a7620adc236e3d?s=128&d=identicon&r=PG", "display_name": "agentp", "link": "https://stackoverflow.com/users/1004168/agentp"}, "edited": false, "score": 0, "creation_date": 1495654656, "post_id": 44166549, "comment_id": 75350380, "body": "from the look of the file i&#39;m afraid the fortran is using namelist i/o .. (????) Please show the code!!"}, {"owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "edited": false, "score": 0, "creation_date": 1495655153, "post_id": 44166549, "comment_id": 75350640, "body": "yes, it is. I don&#39;t have the authorization to share the full code but I will edit the question to provide more details adding relevant lines."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1495662303, "post_id": 44166549, "comment_id": 75353925, "body": "It is a <b>very bad</b> idea to rewind unit 5 even if the compiler does not immediately complain. Do not use unit 5 explicitly. It is not portable. Use unit <code>*</code> for standard input and output."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1495662367, "post_id": 44166549, "comment_id": 75353953, "body": "But I don&#39;t really get your problem. Please show the code. It is essential."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1495714469, "post_id": 44166549, "comment_id": 75374563, "body": "Do you just want to read the Fortran namelist to initialize values values in a C++ program?"}, {"owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "edited": false, "score": 0, "creation_date": 1495746659, "post_id": 44166549, "comment_id": 75393700, "body": "Now I added files, I hope you can understand my problem now, please consider that I want to minimize modifications in the existing Fortran codes."}, {"owner": {"reputation": 6498, "user_id": 1004168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c05e808436031bc45a7620adc236e3d?s=128&d=identicon&r=PG", "display_name": "agentp", "link": "https://stackoverflow.com/users/1004168/agentp"}, "edited": false, "score": 1, "creation_date": 1495762861, "post_id": 44166549, "comment_id": 75398491, "body": "I&#39;m pretty sure you have no choice but to read/parse the namelist in c++ and modify the fortran to take the values as arguments."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1495780219, "post_id": 44166549, "comment_id": 75403445, "body": "I don&#39;t get it. Why do you set <code>real_fou</code> to 3.14 before calling the subroutine? What do you want to happen when you call the subroutine?"}, {"owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "edited": false, "score": 0, "creation_date": 1495808432, "post_id": 44166549, "comment_id": 75420442, "body": "I want the subroutine to use this value instead of the one in the input file. Is there a possibility to redirect a stream from C++ in replacement of inputFile.ext ?"}, {"owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "reply_to_user": {"reputation": 6498, "user_id": 1004168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c05e808436031bc45a7620adc236e3d?s=128&d=identicon&r=PG", "display_name": "agentp", "link": "https://stackoverflow.com/users/1004168/agentp"}, "edited": false, "score": 0, "creation_date": 1495808899, "post_id": 44166549, "comment_id": 75420718, "body": "@agentp: I&#39;m thinking about too, but is there subroutine overriding in Fortran ? That would be great if It can have two forms depending on its arguments: if no argument, read from unit identifier 5; if not, use the given arguments."}, {"owner": {"reputation": 6498, "user_id": 1004168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c05e808436031bc45a7620adc236e3d?s=128&d=identicon&r=PG", "display_name": "agentp", "link": "https://stackoverflow.com/users/1004168/agentp"}, "edited": false, "score": 0, "creation_date": 1495811436, "post_id": 44166549, "comment_id": 75422293, "body": "Performing any sort of i/o in fortran called from c++ is going to be at least problematic. I&#39;m pretty sure reading standard input is not possible. Fortran expects stdin to be pre-connected and it will not be under c++. There is no (non hacky) way to open it in fortran and no way to pass a c++ file object to a fortran i/o statement.  Are you trying to have one source callable from either c++ or fortran?"}, {"owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "edited": false, "score": 0, "creation_date": 1495812787, "post_id": 44166549, "comment_id": 75423141, "body": "yes, that&#39;s what I want to do"}], "owner": {"reputation": 420, "user_id": 8061245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k70DPFvvPEo/AAAAAAAAAAI/AAAAAAAAABQ/hWHC0iIEoBc/photo.jpg?sz=128", "display_name": "Navalona Ramanantoanina", "link": "https://stackoverflow.com/users/8061245/navalona-ramanantoanina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495780123, "creation_date": 1495652429, "last_edit_date": 1495780123, "question_id": 44166549, "link": "https://stackoverflow.com/questions/44166549/issue-with-unit-identifier-when-using-fortran-modules-in-c", "title": "Issue with unit identifier when using Fortran modules in C++", "body": "<p>My main program is C++ and I need to use modules of an existing Fortran program. I was able to link to it with g++.\nProblem is, all subroutines inside the fortran codes are designed to be called by a Fortran main program. Globally, the initialization of global variables in the latter is done by directing an input file on command line: </p>\n\n<pre><code>main_fortran_prog &lt; inputFile.ext\n</code></pre>\n\n<p>A given subroutine \"foubar\" require these variables to be set. For that, It reads from unit identifier 5 which is, according to documentation I read, for INPUT from the keyboard with the READ statement.</p>\n\n<p>Now, I want to call the subroutine \"foubar\" in my C++ main which will initialize theses variables \"real_fou\" and \"bool_flag\" before the subroutine operation. Knowing that \"foubar\" will look out the value of real_fou and bool_flag in namelist from unit identifier 5 which I'm trying to avoid, what are the best options for me? </p>\n\n<p>In sum: <em>I want to migrate from a Fortran main to a C++ main. I'm trying avoid namelist reading from a file if possible</em>.</p>\n\n<hr>\n\n<p>List of files in my directory:</p>\n\n<p><strong>inputFile.ext</strong>:</p>\n\n<pre><code>! this file is used by fortran main program to initialize global variable\n&amp;justANamelist\n    real_fou = 0.3490834\n    bool_flag = .true.\n/\n</code></pre>\n\n<p><strong>afortmodule.f90</strong></p>\n\n<pre><code>module afortmodule\nimplicit none\ninteger :: ios\nlogical, save :: bool_flag\nreal, save :: real_fou\n\ncontains\n\nsubroutine foubar() bind(c, name='foubar')\n    use iso_c_binding\n    call parseInput\n    write(*,*) \"real_fou x 2 = \" , real_fou * 2\nend subroutine\n\nsubroutine parseInput\n    ! Define the namelist\n    NAMELIST /justANamelist/ real_fou, bool_flag\n    ! How to bypass this in cpp call ?\n    read(5,nml=justANamelist, IOSTAT=ios)\nend subroutine\n\nend module afortmodule\n</code></pre>\n\n<p><strong>main_fortran.f90</strong></p>\n\n<pre><code>! require &lt; inputFile.ext\nprogram mainfortranprog\nuse afortmodule\n! call foubar to display real_fou x 2\ncall foubar\nend program mainfortranprog\n</code></pre>\n\n<p><strong>main_cpp.cpp</strong></p>\n\n<pre><code>// This want to call the subroutine foubar in fortran module afort_module\n// like main_fortran did but avoiding the commandline input like \"&lt;  inputFile.ext\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid call_foubar(void);\nextern \"C\"{\n    void foubar (void);\n    bool bool_flag;\n    double real_fou;\n}\n\nint main (void){\n    real_fou = 3.13215163;\n    bool_flag = true;\n\n    //How can I use these values in namelist justANamelist \n    //in manner that I could be able to do:\n    call_foubar();\n\n    return 0;\n}\n\nvoid call_foubar(void){\n    // some codes here\n    foubar();\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 3, "creation_date": 1495653344, "post_id": 44166454, "comment_id": 75349736, "body": "What if the process returns <code>STILL_ACTIVE</code> (259) as its actual exit code?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495653447, "post_id": 44166454, "comment_id": 75349789, "body": "@zett42: that is a possibility, and one that the documentation warns about: &quot;<b><i>Important</b> The <code>GetExitCodeProcess</code> function returns a valid error code defined by the application only after the thread terminates. Therefore, an application should not use <code>STILL_ACTIVE</code> (259) as an error code. If a thread returns <code>STILL_ACTIVE</code> (259) as an error code, applications that test for this value could interpret it to mean that the thread is still running and continue to test for the completion of the thread after the thread has terminated, which could put the application into an infinite loop.</i>&quot;"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495653621, "post_id": 44166454, "comment_id": 75349885, "body": "@Remy So it&#39;s not a general solution because it requires cooperation of the other process. Better use <code>WaitForSingleObject()</code> with 0 timeout instead."}], "tags": [], "owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "is_accepted": false, "score": 0, "last_activity_date": 1495653394, "last_edit_date": 1495653394, "creation_date": 1495652050, "answer_id": 44166454, "question_id": 44166344, "link": "https://stackoverflow.com/questions/44166344/how-to-tell-if-a-process-started-with-createprocess-is-still-running/44166454#44166454", "title": "How to tell if a process started with CreateProcess is still running?", "body": "<p>You can retrieve the process's exit code with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683189.aspx\" rel=\"nofollow noreferrer\"><code>GetExitCodeProcess()</code></a>, which will give the special <code>STILL_ACTIVE</code> value if the process is still running:</p>\n\n<pre><code>DWORD exit_code;\nGetExitCodeProcess(pi.hProcess, &amp;exit_code);\nif (exit_code == STILL_ACTIVE) {\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 8, "last_activity_date": 1495653809, "last_edit_date": 1495653809, "creation_date": 1495653107, "answer_id": 44166738, "question_id": 44166344, "link": "https://stackoverflow.com/questions/44166344/how-to-tell-if-a-process-started-with-createprocess-is-still-running/44166738#44166738", "title": "How to tell if a process started with CreateProcess is still running?", "body": "<p>You can use any of the standard <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687069.aspx\" rel=\"noreferrer\">wait functions</a>, like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687032.aspx\" rel=\"noreferrer\"><code>WaitForSingleObject()</code></a>, eg:</p>\n\n<pre><code>switch (WaitForSingleObject(pi.hProcess, 0))\n{\n    case WAIT_OBJECT_0:\n        // process has terminated...\n        break;\n\n    case WAIT_TIMEOUT:\n        // process is still running...\n        break;\n}\n</code></pre>\n"}], "owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 44166738, "answer_count": 2, "score": 3, "last_activity_date": 1495653916, "creation_date": 1495651610, "last_edit_date": 1495653916, "question_id": 44166344, "link": "https://stackoverflow.com/questions/44166344/how-to-tell-if-a-process-started-with-createprocess-is-still-running", "title": "How to tell if a process started with CreateProcess is still running?", "body": "<p>If I've got a process created through <code>CreateProcess()</code>, how would I determine if it's still running? I know I need to use <code>pi.hProcess</code> but I don't know how, and google isn't really giving me meaningful hints.</p>\n\n<pre><code>PROCESS_INFORMATION pi;\nSTARTUPINFO si;\nZeroMemory(&amp;si, sizeof(si));\nsi.cb = sizeof(si);\nZeroMemory(&amp;pi, sizeof(pi));\nbool got_it=CreateProcess(NULL, CA2T(launchString.c_str()), NULL, NULL, false, NORMAL_PRIORITY_CLASS, NULL, NULL, &amp;si, &amp;pi);\n</code></pre>\n"}, {"tags": ["c++", "linux", "makefile", "embedded-linux", "yocto"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 1, "creation_date": 1495694675, "post_id": 44166322, "comment_id": 75363010, "body": "Does &#39;make install&#39; in your project (or do_install in your recipe)  install the correct files? I think you&#39;ll have to share the Makefile and recipe if you want better help."}, {"owner": {"reputation": 1, "user_id": 8061308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cfc5619960cee78d2f655564c91824?s=128&d=identicon&r=PG&f=1", "display_name": "gunnross", "link": "https://stackoverflow.com/users/8061308/gunnross"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1495706541, "post_id": 44166322, "comment_id": 75369645, "body": "I have edited the question with additional details"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1497564841, "post_id": 44166322, "comment_id": 76144417, "body": "Doesn&#39;t look like you set the <code>FILES</code> variable? If I recall correctly you need to specify this field to tell bitbake what files to add to the install package."}, {"owner": {"reputation": 1, "user_id": 8061308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cfc5619960cee78d2f655564c91824?s=128&d=identicon&r=PG&f=1", "display_name": "gunnross", "link": "https://stackoverflow.com/users/8061308/gunnross"}, "edited": false, "score": 0, "creation_date": 1497939953, "post_id": 44166322, "comment_id": 76275629, "body": "I added : FILES_${PN} =  &quot;${bindir}/*&quot;  still same problem"}], "owner": {"reputation": 1, "user_id": 8061308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cfc5619960cee78d2f655564c91824?s=128&d=identicon&r=PG&f=1", "display_name": "gunnross", "link": "https://stackoverflow.com/users/8061308/gunnross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497940045, "creation_date": 1495651532, "last_edit_date": 1497940045, "question_id": 44166322, "link": "https://stackoverflow.com/questions/44166322/yocto-extensible-sdk-devtool-getting-error-while-deploying-a-plain-makefile-hell", "title": "Yocto extensible SDK devtool getting error while deploying a plain makefile hello world project", "body": "<p>I have created a custom yocto linux image for a raspberry pi and also an esdk.</p>\n\n<p>I am trying to deploying a plain makefile helloworld project to a raspberry pi 3. I have tested the source code by building natively and running.</p>\n\n<p>Then I set up a cross compiling environment and use devtool to add the source code. After that I try to build and deploy my recipe.</p>\n\n<p><code>devtool build</code> command is running succesfully without any error.</p>\n\n<p>When i try <code>devtool deploy-target ...</code> I get the following error:</p>\n\n<p><code>ERROR: No files to deploy - have you built the hello recipe? If so, the install step has not installed any files.</code></p>\n\n<ol>\n<li><p>C++ source file (helloworld.cpp):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gnu/stubs.h&gt;\n\nint main(void) {\n    puts(\"Hello World!!!\");\n    return EXIT_SUCCESS;\n}\n</code></pre></li>\n<li><p>Makefile</p>\n\n<pre><code>PROJECT_NAME        := XYZ\n\nOUTPUT_DIR      := build\n\nCXXFLAGS =  -O2 -g -Wall -fmessage-length=0\n\nSRCS = helloworld.cpp\n\nOBJS =$(SRCS:.cpp=.o)\n\nLIBS =\n\nTARGET =    helloworld\n\nPREFIX = /usr/bin\n\n$(TARGET):  $(OBJS)\n    $(CXX) $(CXXFLAGS) -o $(TARGET) $(OBJS) $(LIBS)\n\n.cpp.o:\n    $(CXX) $(CXXFLAGS) -c $&lt; -o $@\n\nall:    $(TARGET)\n    @echo Compiling project\n\nclean:\n    rm -f $(OBJS) $(TARGET)\n\nbuild_directory: $(OUT_DIR)\n        @echo Creating build directory\n\n$(OUT_DIR):\n    mkdir -p $(OUTPUT_DIR)\n\ninstall: $(TARGET)\n    install $(TARGET) $(PREFIX)\n</code></pre></li>\n<li><p>hello.bb recipe</p>\n\n<pre><code># Recipe created by recipetool\n# This is the basis of a recipe and may need further editing in order to be fully functional.\n# (Feel free to remove these comments when editing.)\n\n# Unable to find any files that looked like license statements. Check the accompanying\n# documentation and source headers and set LICENSE and LIC_FILES_CHKSUM accordingly.\n#\n# NOTE: LICENSE is being set to \"CLOSED\" to allow you to at least start building - if\n# this is not accurate with respect to the licensing of the software being built (it\n# will not be in most cases) you must specify the correct value before using this\n# recipe for anything other than initial testing/development!\nLICENSE = \"CLOSED\"\nLIC_FILES_CHKSUM = \"\"\n\n# No information for SRC_URI yet (only an external source tree was specified)\nSRC_URI = \"\"\n\n# NOTE: this is a Makefile-only piece of software, so we cannot generate much of the\n# recipe automatically - you will need to examine the Makefile yourself and ensure\n# that the appropriate arguments are passed in.\n\ndo_configure () {\n    # Specify any needed configure commands here\n    :\n}\n\ndo_compile () {\n    # You will almost certainly need to add additional arguments\n    oe_runmake\n}\n\ndo_install () {\n    # This is a guess; additional arguments may be required\n    oe_runmake install\n}\n\nFILES_${PN} = \"${bindir}/*\"\n</code></pre></li>\n</ol>\n"}, {"tags": ["c++", "eclipse", "cmake", "qt5.8"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 1266588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b240356fecd54f8416143a4c3df388?s=128&d=identicon&r=PG", "display_name": "andi1337", "link": "https://stackoverflow.com/users/1266588/andi1337"}, "is_accepted": false, "score": 1, "last_activity_date": 1518973171, "last_edit_date": 1518973171, "creation_date": 1496737226, "answer_id": 44384852, "question_id": 44166230, "link": "https://stackoverflow.com/questions/44166230/index-qt5-in-eclipse-ide-project-using-cmake/44384852#44384852", "title": "Index Qt5 in Eclipse IDE project using Cmake", "body": "<p>Did you enable the \"CDT GCC Build Output Parser\"? This is an Eclipse feature to parse the output of the build and guesses the include paths automatically. You can find it unter <em>Project Properties->C/C++ General->Preprocessor Include Paths, Macros etc.</em> and then under the tab <em>Providers</em>. </p>\n\n<p>In order for this feature to work properly, a detailed build report must be generated. You can achieve this by either changing the build command under <em>Preferences->C/C++ Build</em> to <code>make VERBOSE=1</code> or by specifying <code>set(CMAKE_VERBOSE_MAKEFILE On)</code> inside your CMakeLists.txt.</p>\n\n<p>See also <a href=\"https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Freference%2Fcdt_u_pref_build_scanner_discovery.htm\" rel=\"nofollow noreferrer\" title=\"Eclipse Help - Scanner Discovery Preferences\">Eclipse Help - Scanner Discovery Preferences</a></p>\n"}], "owner": {"reputation": 161, "user_id": 706796, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d46c98b7f749bf1c02cd64b203f6d470?s=128&d=identicon&r=PG", "display_name": "rabidhamper7", "link": "https://stackoverflow.com/users/706796/rabidhamper7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1518973171, "creation_date": 1495651171, "last_edit_date": 1495651603, "question_id": 44166230, "link": "https://stackoverflow.com/questions/44166230/index-qt5-in-eclipse-ide-project-using-cmake", "title": "Index Qt5 in Eclipse IDE project using Cmake", "body": "<h1>Background</h1>\n\n<p>I'm currently using Eclipse Neon.3 and have installed the \"C/C++ CMake Build Support - Experimental\" package (I'm not using CMake's Eclipse generator). I have a simple program that uses Qt 5.8 which builds successfully, however, Eclipse seems unable to index Qt symbols(e.g. QCoreApplication, QDebug, etc...).</p>\n\n<p>The symptoms of this are:</p>\n\n<ul>\n<li>No code completion suggestions</li>\n<li><code>#include &lt;QtCore&gt;</code> and other include statements are shown as unresolved</li>\n<li>Qt symbols such as <code>QCoreApplication</code>, <code>QDebug()</code>, and <code>QCoreApplication.exec()</code> are shown as not resolved.</li>\n</ul>\n\n<h1>Code</h1>\n\n<h2><code>CMakeLists.txt</code> file</h2>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\nproject(test-program)\n\nset(CMAKE_CXX_STANDARD 11)\n\n# Put the CMake files for Qt5 in the Prefix path.\nset(Qt5_DIR /opt/Qt/5.8/gcc_64/lib/cmake/Qt5/)\n\n#Find includes in corresponding build directories\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\n\n#Instruct CMake to run moc automatically when needed.\nset(CMAKE_AUTOMOC ON)\n\n#Find the Qt5Core Library\nfind_package(Qt5 REQUIRED COMPONENTS Core Widgets)\n\nset(SOURCE_FILES\n    src/main.cpp)\n\nadd_executable(${PROJECT_NAME} ${SOURCE_FILES})\n\ntarget_link_libraries(${PROJECT_NAME} Qt5::Core) \n</code></pre>\n\n<h2><code>main.cpp</code> (shown with eclipse annotations)</h2>\n\n<pre><code>#include &lt;QtCore&gt; //Unresolved inclusion: &lt;QtCore&gt;\n#include &lt;QDebug&gt; //Unresolved inclusion: &lt;QDebug&gt;\n\nint main(int argc, char** argv){\n    QCoreApplication application(argc, argv); \n    //Type 'QCoreApplication' could not be resolved \n\n    qDebug() &lt;&lt; \"Test\";\n    //Function 'qDebug' could not be resolved\n\n    application.exec();\n    //Method 'exec' could not be resolved\n\n    return 0;\n}\n</code></pre>\n\n<h1>Question</h1>\n\n<p>So my question is this: How can I get Eclipse to recognize Eclipse to recognize Qt symbols? Or is that just not possible at this time?</p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1495651310, "post_id": 44166225, "comment_id": 75348788, "body": "What &quot;implicit capture&quot;?? Afaik there is no such thing."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 3, "creation_date": 1495651367, "post_id": 44166225, "comment_id": 75348818, "body": "You need to provide some code explaining what you mean: default behavior from lambdas is to not capture any local variables, and it&#39;s impossible to not capture global variables."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495651403, "post_id": 44166225, "comment_id": 75348830, "body": "@JesperJuhl There is such a thing as &quot;implicit capture&quot; when it comes to type definitions, but it&#39;s not clear that that&#39;s what the OP is talking about..."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1495652109, "post_id": 44166225, "comment_id": 75349169, "body": "Have you tried simply not using the variable inside your lambda?"}], "answers": [{"comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1547011068, "post_id": 44166369, "comment_id": 95039754, "body": "Nor does there need to be since those captures come for free: the compiler knows at compile time the address of such variables so it&#39;s trivial to access them."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": true, "score": 4, "last_activity_date": 1495651732, "creation_date": 1495651732, "answer_id": 44166369, "question_id": 44166225, "link": "https://stackoverflow.com/questions/44166225/how-can-i-disable-implicit-lamba-variable-capture/44166369#44166369", "title": "How can I disable implicit lamba variable capture?", "body": "<p>The only \"implicit capture\" happens with the static and global variables in the scope. And there's no way to get rid of this.</p>\n"}], "owner": {"reputation": 554, "user_id": 1293152, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62a4db5608295ee73ea69dce2c2ef160?s=128&d=identicon&r=PG", "display_name": "Philippe Chaintreuil", "link": "https://stackoverflow.com/users/1293152/philippe-chaintreuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 44166369, "answer_count": 1, "score": 0, "last_activity_date": 1496189494, "creation_date": 1495651154, "last_edit_date": 1496189494, "question_id": 44166225, "link": "https://stackoverflow.com/questions/44166225/how-can-i-disable-implicit-lamba-variable-capture", "title": "How can I disable implicit lamba variable capture?", "body": "<p>How can I disable implicit lambda variable capture?</p>\n\n<p>For example if I have a lambda that's doing being called on each entry in an array and I don't want to capture any variables, how can I disable the implicit capture?  I prefer using explicit capture lists because it means I'm only grabbing what I think I'm grabbing.</p>\n\n<hr>\n\n<p>Turns out I was profoundly mistaken about how <code>[]</code> captures worked.  Just in case anyone finds this in the future, here's some hopefully help information in addition to the accepted answer to my (misguided) question above.</p>\n\n<blockquote>\n  <p>Capture list can be passed as follows:</p>\n  \n  <ul>\n  <li><code>[a,&amp;b]</code> where a is captured by copy and b is captured by reference.</li>\n  <li><code>[this]</code> captures the current object (*this) by reference</li>\n  <li><code>[&amp;]</code> captures all automatic variables used in the body of the lambda by reference and current object by reference if exists</li>\n  <li><code>[=]</code> captures all automatic variables used in the body of the lambda by copy and current object by reference if exists</li>\n  <li><code>[]</code> captures nothing </li>\n  </ul>\n  \n  <p>A variable can be used without being captured if it does not have automatic storage duration (i.e. it is not a local variable or it is static or thread local) or if it is not odr-used in the body of the lambda.</p>\n  \n  <p>Source: <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/lambda</a></p>\n</blockquote>\n\n<p>In other words, if you want to disable implicit capture, just use and empty set of brackets <code>[]</code>.</p>\n"}, {"tags": ["c++", "arrays", "string", "bytebuffer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495651262, "post_id": 44166212, "comment_id": 75348765, "body": "<i>&quot;Is there any disadvantage to doing that?&quot;</i> No. Maybe a <code>std::vector&lt;uint8_t&gt;</code> might be semantically clearer."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495651304, "post_id": 44166212, "comment_id": 75348783, "body": "<code>std::string</code> pretty much has to null-terminate its buffer as far as I can tell, whereas <code>std::vector&lt;char&gt;</code> wouldn&#39;t have to.  Probably not enough of a performance impact to worry about, though, compared to the extra functionality <code>std::string</code> makes available."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495682925, "post_id": 44166212, "comment_id": 75359021, "body": "@DanielSchepler I thought <code>std::string</code> isn&#39;t null terminated, only <code>string::c_str</code> and <code>string::data</code> gives you a null terminated sequence"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495690879, "post_id": 44166212, "comment_id": 75361361, "body": "But <code>string::c_str</code> is documented to be constant-time at least at cppreference.com, and I don&#39;t see how you would achieve that aside from maintaining the string data with a null terminator after it."}], "answers": [{"comments": [{"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1495652320, "post_id": 44166260, "comment_id": 75349256, "body": "yes, if you use <code>std::string</code> in the kernel level the overhead is very considerable. Here is an example... but there are many more out there: <a href=\"https://stackoverflow.com/questions/21946447/how-much-performance-difference-when-using-string-vs-char-array\" title=\"how much performance difference when using string vs char array\">stackoverflow.com/questions/21946447/&hellip;</a>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 1, "creation_date": 1495652324, "post_id": 44166260, "comment_id": 75349257, "body": "@&#208;\u0430n I don&#39;t personally know the details, but there is a small amount of extra overhead in <code>std::string</code> because it has several constraints it needs to conform to, including but not limited to the fact that it needs to always have an extra byte allocated to null-terminate the string. At the same time though, <code>std::string</code> objects can be subject to &quot;Small String Optimizations&quot;, which can improve the memory footprint. The critical point to take away is that <code>std::string</code> can do things under-the-hood that you might not expect."}, {"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1495652483, "post_id": 44166260, "comment_id": 75349328, "body": "@Xirema, about the null-terminate char, both C-String and <code>std::string</code> have. So this is not the issue. The overhead is associated with the code necessary to construct and delete the string. For example, it needs to handle the case for small string optimizations, etc... and this make the <code>std::string</code> a little heavy! I will update the answer with details."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1495652630, "post_id": 44166260, "comment_id": 75349386, "body": "@WagnerPatriota We&#39;re not comparing <code>std::string</code> and &quot;C-Strings&quot; though, we&#39;re comparing <code>std::string</code> and <code>char[]</code> or <code>std::vector&lt;char&gt;</code>. <code>char[]</code> and <code>std::vector&lt;char&gt;</code> do not allocate and manage the null terminating character automatically; it needs to be manually added by the user (or, more likely, ignored, since no good String use depends on it)."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1495652711, "post_id": 44166260, "comment_id": 75349426, "body": "@&#208;\u0430n Well, again, I don&#39;t know all the details. I only know that there are various things that affect <code>std::string</code> that <code>std::vector</code> is happy to ignore, that have impacts on performance."}, {"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "edited": false, "score": 0, "creation_date": 1495652791, "post_id": 44166260, "comment_id": 75349463, "body": "reading the question... it is about &quot;a std::vector OF std::strings&quot; AND &quot;disadvantage of using std::string versus byte array&quot;. it&#39;s straightforward."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": false, "score": 1, "last_activity_date": 1495845663, "last_edit_date": 1495845663, "creation_date": 1495651239, "answer_id": 44166260, "question_id": 44166212, "link": "https://stackoverflow.com/questions/44166212/stdstring-vs-byte-buffer-difference-in-c/44166260#44166260", "title": "std::string vs. byte buffer (difference in c++)", "body": "<p>You're right. Strings are nothing more than byte arrays. <code>std::string</code> is just a convenient way to manage the buffer array that represents the string. That's it!</p>\n\n<p>There's no disadvantage of using <code>std::string</code> unless you are working on something REALLY REALLY performance critical, like a kernel, for example... then working with <code>std::string</code> would have a considerable overhead. Besides that, feel free to use it.</p>\n\n<p>-- </p>\n\n<p>An <code>std::string</code> behind the scenes needs to do a bunch of checks about the state of the string in order to decide if it will use the small-string optimization or not. Today pretty much all compilers implement small-string optimizations. They all use different techniques, but basically it needs to test bitflags that will tell if the string will be constructed in the stack or the heap. This overhead doesn't exist if you straight use <code>char[]</code>. But again, unless you are working on something REALLY critical, like a kernel, you won't notice anything and <code>std::string</code> is much more convenient.</p>\n\n<p>Again, this is just ONE of the things that happens under the hood, just as an example to show the difference of them.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8015500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a6245778cbbb1f443c8ba100baf9af?s=128&d=identicon&r=PG", "display_name": "forsamori", "link": "https://stackoverflow.com/users/8015500/forsamori"}, "is_accepted": false, "score": -2, "last_activity_date": 1495655228, "last_edit_date": 1495655228, "creation_date": 1495651698, "answer_id": 44166364, "question_id": 44166212, "link": "https://stackoverflow.com/questions/44166212/stdstring-vs-byte-buffer-difference-in-c/44166364#44166364", "title": "std::string vs. byte buffer (difference in c++)", "body": "<p>Depending on how often you're firing network messages, <code>std::string</code> should be fine. It's a convenience class that handles a lot of <code>char</code> work for you. If you have a lot of data to push though, it might be worth using a <code>char</code> array straight and converting it to bytes, just to minimise the extra overhead <code>std::string</code> has. </p>\n\n<p>Edit: if someone could comment and point out why you think my answer is bad, that'd be great and help me learn too. </p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1495652022, "creation_date": 1495652022, "answer_id": 44166449, "question_id": 44166212, "link": "https://stackoverflow.com/questions/44166212/stdstring-vs-byte-buffer-difference-in-c/44166449#44166449", "title": "std::string vs. byte buffer (difference in c++)", "body": "<p>In terms of functionality, there's no real difference.</p>\n\n<p>Both for performance reasons and for code clarity reasons, however, I would recommend using <code>std::vector&lt;uint8_t&gt;</code> instead, as it makes it far more clear to anyone maintaining the code that it's a sequence of bytes, not a String.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1495655549, "creation_date": 1495655549, "answer_id": 44167346, "question_id": 44166212, "link": "https://stackoverflow.com/questions/44166212/stdstring-vs-byte-buffer-difference-in-c/44167346#44167346", "title": "std::string vs. byte buffer (difference in c++)", "body": "<p>You should use <code>std::string</code> when you work with strings, when you work with binary blob you better work with <code>std::vector&lt;uint8_t&gt;</code>. There many benefits:</p>\n\n<ul>\n<li><p>your intention is clear so code is less error prone</p></li>\n<li><p>you would not pass your binary buffer as a string to function that expects <code>std::string</code> by mistake</p></li>\n<li><p>you can override <code>std::ostream&lt;&lt;()</code> for this type to print blob in proper format (usually hex dump). Very unlikely that you would want to print binary blob as a string. </p></li>\n</ul>\n\n<p>there could be more. Only benefit of <code>std::string</code> that I can see that you do not need to do typedef.</p>\n"}], "owner": {"reputation": 681, "user_id": 3645859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c63b3e50cbe65d9a7c5735da468c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "Addi", "link": "https://stackoverflow.com/users/3645859/addi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "accepted_answer_id": 44166449, "answer_count": 4, "score": 0, "last_activity_date": 1495845663, "creation_date": 1495651105, "question_id": 44166212, "link": "https://stackoverflow.com/questions/44166212/stdstring-vs-byte-buffer-difference-in-c", "title": "std::string vs. byte buffer (difference in c++)", "body": "<p>I have a project where I transfer data between client and server using boost.asio sockets. Once one side of the connection receives data, it converts it into a <code>std::vector</code> of <code>std::string</code>s which gets then passed on to the actualy recipient object of the data via previously defined \"callback\" functions. That way works fine so far, only, I am at this point using methods like <code>atoi()</code> and <code>to_string</code> to convert other data types than strings into a sendable format and back. This method is of course a bit wasteful in terms of network usage (especially when transferring bigger amounts of data than just single ints and floats). Therefore I'd like to serialize and deserialize the data. Since, effectively, any serialisation method will produce a byte array or buffer, it would be convenient for me to just use <code>std::string</code> instead. Is there any disadvantage to doing that? I would not understand why there should be once, since strings should be nothing more than byte arrays.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495650895, "post_id": 44166079, "comment_id": 75348582, "body": "What do you expect when printing a pointer value? Did you mean to dereference them using <code>*</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495650933, "post_id": 44166079, "comment_id": 75348600, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495651348, "post_id": 44166079, "comment_id": 75348809, "body": "Your constructor <code>Vector(int num1, int num2)</code> is storing the address of temporary variables that go out of scope when the constructor exits. Dereferencing <code>first</code> or <code>second</code> will be UB. You can&#39;t do <code>first = &amp;num1;</code> or <code>second = &amp;num2;</code> in your constructor."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495651544, "post_id": 44166079, "comment_id": 75348898, "body": "Why are <code>first</code> and <code>second</code> pointers to integers anyways? Make them integers and this problem goes away."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1495652758, "last_edit_date": 1495652758, "creation_date": 1495652279, "answer_id": 44166507, "question_id": 44166079, "link": "https://stackoverflow.com/questions/44166079/c-use-pointers-print-the-address-instead-of-the-value-why-use-operator/44166507#44166507", "title": "c++ - use pointers, print the address instead of the value, why? (use operator)", "body": "<blockquote>\n  <p>I print the object in my main it prints me the addresses of values, why?</p>\n</blockquote>\n\n<p>Because the type of each expression is pointer. And stream insertion operator is specified to output the address with a pointer operand (unless it is a pointer to a character).</p>\n\n<p>Note that the behaviour of the program is undefined, because you call a member functions on pointers that points to arbitrary addresses:</p>\n\n<blockquote>\n<pre><code>Vector* v1 = new Vector(2, 3);\n</code></pre>\n</blockquote>\n\n<p>At this moment <code>v1</code> points to a valid object.</p>\n\n<blockquote>\n<pre><code>v1++;\n</code></pre>\n</blockquote>\n\n<p>Now <code>v1</code> no longer points to a valid object.</p>\n\n<blockquote>\n<pre><code>v1-&gt;print();\n</code></pre>\n</blockquote>\n\n<p>The behaviour is undefined.</p>\n"}], "owner": {"reputation": 1, "user_id": 8061213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982e74ba316d060ad4385ff06eb73d62?s=128&d=identicon&r=PG&f=1", "display_name": "liran", "link": "https://stackoverflow.com/users/8061213/liran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1495652758, "creation_date": 1495650630, "question_id": 44166079, "link": "https://stackoverflow.com/questions/44166079/c-use-pointers-print-the-address-instead-of-the-value-why-use-operator", "title": "c++ - use pointers, print the address instead of the value, why? (use operator)", "body": "<p>I wrote the vector class but when I print the object in my main it prints me the addresses of values, why?\nThank you very much for your help.</p>\n\n<p>Vector.header: </p>\n\n<pre><code>#include &lt;iostream&gt;\nclass Vector{\nprivate: \nint* first;\nint* second;\n\npublic: \n\nVector();\nVector(int num1, int num2);\n~Vector();\nVector(Vector&amp; other);\nint* getFirst();\nvoid setFirst(int* first);\nint* getSecond();\nvoid setSecond(int* second);\nvoid print();\n\nconst Vector&amp; operator=(const Vector&amp; other){\n    first = other.first;\n    second = other.second;\n    return *this;\n}\n\nVector operator++(){\n    return Vector(*first + 1, *second + 1);\n}\n\nVector operator--(){\n    return Vector(*first - 1, *second - 1);\n}\n};\n\nVector::Vector(){\nfirst = 0;\nsecond = 0;\n}\n\nVector::Vector(int num1, int num2){\nfirst = &amp;num1;\nsecond = &amp;num2;\n}\n\nVector::~Vector(){\n\n}\n\nVector::Vector(Vector&amp; other) : first(other.first), second(other.second){}\n\nint* Vector::getFirst(){\nreturn first;\n}\n\nvoid Vector::setFirst(int* f){\nfirst = f;\n}\n\nint* Vector::getSecond(){\nreturn second;\n}\n\nvoid Vector::setSecond(int* s){\nsecond = s;\n}\n\nvoid Vector::print(){\nstd::cout &lt;&lt; \"&lt;\" &lt;&lt; getFirst() &lt;&lt; \",\" &lt;&lt; getSecond() &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>main.cpp: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Vector.h\"\nint main(){\nVector* v1 = new Vector(2, 3);\nVector* v2 = new Vector(5, 6);\n\nv1++;\nv2--;\n\nv1-&gt;print();\nv2-&gt;print();\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>print me:</p>\n\n<pre><code>&lt;FDFDFDFD,ABABABAB&gt;\n\n&lt;0000008F,FDFDFDFD&gt;\n</code></pre>\n\n<p>Thank's for your help........</p>\n"}, {"tags": ["c++", "qt", "overriding", "qtreeview"], "answers": [{"comments": [{"owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 0, "creation_date": 1495725143, "post_id": 44166318, "comment_id": 75381879, "body": "Thanks for response and thanks for the hint: &#39;&#39; from the official mirror &quot;. I have an issue with QT += gui-private that refuse to include &lt;private/qtreeview_p.h&gt; but I guess I can resolve it."}, {"owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "edited": false, "score": 0, "creation_date": 1495727826, "post_id": 44166318, "comment_id": 75383592, "body": "add QT += widgets-private instead of gui-private get it works"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1495651517, "creation_date": 1495651517, "answer_id": 44166318, "question_id": 44165838, "link": "https://stackoverflow.com/questions/44165838/qt-overriding-qtreeviewdrawbranches/44166318#44166318", "title": "Qt - Overriding QTreeView::drawBranches()", "body": "<p>You'll need to consult the <a href=\"https://stackoverflow.com/q/25250171/1329652\">reference on using Qt PIMPL idiom</a>.</p>\n\n<p>Every <code>d_func</code> is private. You need to declare your own. Yours is a special case because you don't derive from <code>QTreeViewPrivate</code>, thus the type returned is still <code>QTreeViewPrivate*</code>. Qt provides a handy macro that does the work for you:</p>\n\n<pre><code>// Interface\n#include &lt;QTreeView&gt;\n\nclass MyTreeView : public QTreeView\n{\n  Q_OBJECT\n  Q_DECLARE_PRIVATE(QTreeView)\npublic:\n  MyTreeView(QWidget * parent = {}) : QTreeView{parent} {}\nprotected:\n  void drawBranches(QPainter *, const QRect &amp;, const QModelIndex&amp;) const override;\n};\n</code></pre>\n\n\n\n<pre><code>// Implementation\n#include &lt;private/qtreeview_p.h&gt;\n\nvoid MyTreeView::drawBranches(QPainter * painter, const QRect &amp;rect, const \n                              QModelIndex &amp;index)const\n{\n  Q_D(const QTreeView);\n  ...\n}\n</code></pre>\n\n<p>Also, instead of copying code from a random repository, you should copy it <a href=\"https://github.com/qt/qtbase/blob/5.9/src/widgets/itemviews/qtreeview.cpp#L1801\" rel=\"nofollow noreferrer\">from the official mirror</a>.</p>\n"}], "owner": {"reputation": 932, "user_id": 2426559, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07c882b7b629b021477a2427cbfa8458?s=128&d=identicon&r=PG", "display_name": "Phiber", "link": "https://stackoverflow.com/users/2426559/phiber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 44166318, "answer_count": 1, "score": 2, "last_activity_date": 1495727864, "creation_date": 1495649761, "last_edit_date": 1495727864, "question_id": 44165838, "link": "https://stackoverflow.com/questions/44165838/qt-overriding-qtreeviewdrawbranches", "title": "Qt - Overriding QTreeView::drawBranches()", "body": "<p>I want to override the function <strong>drawBranches()</strong> in <strong>QTreeView</strong>.<br>\nI subclassed the QTreeView class, then I copied <strong>drawBranches()</strong> function from <a href=\"https://github.com/radekp/qt/blob/master/src/gui/itemviews/qtreeview.cpp\" rel=\"nofollow noreferrer\">here</a>. Before change anything in this function, I want to ensure that it works first, but build failed with this error:</p>\n\n<pre><code>error: 'const QTreeViewPrivate* QTreeView::d_func() const' is private\n inline const Class##Private* d_func() const { return reinterpret_cast&lt;const Class##Private *&gt;(qGetPtrHelper(d_ptr)); } \\\n</code></pre>\n\n<p>Here is my code: </p>\n\n<pre><code>class MyTreeView : public QTreeView\n{\n    Q_OBJECT\npublic:\n    MyTreeView(QWidget *parent =0) : QTreeView(parent) {}\n    void drawBranches(QPainter * painter, const QRect &amp;rect, const \n                        QModelIndex &amp;index)const\n    {\n        Q_D(const QTreeView);\n        const bool reverse = isRightToLeft();\n        const int indent = d-&gt;indent;\n        const int outer = d-&gt;rootDecoration ? 0 : 1;\n        const int item = d-&gt;current;\n        const QTreeViewItem &amp;viewItem = d-&gt;viewItems.at(item);\n        int level = viewItem.level;\n        QRect primitive(reverse ? rect.left() : rect.right() + 1, rect.top(), indent, rect.height());\n\n        ....// Moore lines that I copied\n\n            else\n                opt.state &amp;= ~QStyle::State_MouseOver;\n            style()-&gt;drawPrimitive(QStyle::PE_IndicatorBranch, &amp;opt, painter, this);\n            current = ancestor;\n            ancestor = current.parent();\n        }\n        painter-&gt;setBrushOrigin(oldBO);\n}\n</code></pre>\n\n<p>};</p>\n\n<p>There is many lines where <strong><em>d pointer</em></strong> is used and it is private, e.g <code>d-&gt;indent;</code> .</p>\n\n<p>How can I get a reference to this pointer without violating private role?</p>\n\n<p><strong>Why I want to override this function</strong>: I want to hide the expand/collapse indicator for all items except those who have level <strong>zero</strong> (height level) and  I guess by overriding this function I can do that.  </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "opencv", "c++11", "image-processing", "cmake"], "comments": [{"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1495729195, "post_id": 44165791, "comment_id": 75384367, "body": "You&#39;re probably using OpenCV 3.x where they&#39;ve moved some of the image processing code (including <code>imwrite</code>) to <code>&lt;opencv&#47;imgcodecs.hpp&gt;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7554160"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1495730799, "post_id": 44165791, "comment_id": 75385267, "body": "I&#39;m using version 2.0, and I know for sure that it&#39;s in highgui.hpp :/ @beaker"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1495790597, "post_id": 44165791, "comment_id": 75408991, "body": "According to &quot;EDIT&quot;, your problem is not with CMake but with OpenCV installation. What output of <code>pkg-config opencv --cflags --libs</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7554160"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1495802532, "post_id": 44165791, "comment_id": 75416323, "body": "@Tsyvarev -I/usr/include/opencv  -lcxcore -lcv -lhighgui -lcvaux -lml"}], "answers": [{"comments": [{"owner": {"reputation": 1704, "user_id": 1213525, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/decdf57beb0dccf76b51098dcd956a4e?s=128&d=identicon&r=PG", "display_name": "Veda", "link": "https://stackoverflow.com/users/1213525/veda"}, "edited": false, "score": 0, "creation_date": 1572265581, "post_id": 52277230, "comment_id": 103494843, "body": "In opencv 3.0 they splitted highgui into imgcodecs, videoio and highgui. So for &lt;3.0 you can do with only importing highgui, but on &gt;=3.0 you need to add this imgcodecs import (and videoio if you&#39;re using it)."}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 1, "last_activity_date": 1536672986, "creation_date": 1536672986, "answer_id": 52277230, "question_id": 44165791, "link": "https://stackoverflow.com/questions/44165791/c-cmakeundefined-reference-to-imwrite-in-opencv/52277230#52277230", "title": "C++/CMake:Undefined reference to imwrite in OpenCV", "body": "<p>In your <code>find_package()</code> command, you are only selecting some specific modules from the <strong>OpenCV</strong> package, and the one you need (<code>imgcodecs</code> which provides <code>imwrite()</code>) is not in the list.</p>\n\n<p>Try changing it to:</p>\n\n<pre><code>find_package(OpenCV)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7554160"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4470, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536672986, "creation_date": 1495649610, "last_edit_date": 1495790003, "question_id": 44165791, "link": "https://stackoverflow.com/questions/44165791/c-cmakeundefined-reference-to-imwrite-in-opencv", "title": "C++/CMake:Undefined reference to imwrite in OpenCV", "body": "<p>This is my CMakeLists.txt:</p>\n\n<pre><code>project(proj)\nset(OpenCV_DIR \"/usr/lib/opencv\")\nfind_package(OpenCV REQUIRED COMPONENTS core imgproc highgui)\n\ninclude_directories(${OpenCV_INCLUDE_DIRS})\nadd_executable(test test.cpp&gt;\ntarget_link_libraries(test ${OpenCV_LIBS})\n</code></pre>\n\n<p>and this is part of my code:</p>\n\n<pre><code>#include &lt;opencv/cv.h&gt;\n#include &lt;opencv/cv.hpp&gt;\n#include &lt;opencv/highgui.h&gt;\n#include &lt;opencv/highgui.hpp&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main(int argv, char **argc)\n{       \n    //other code\n    Mat img(height, width, CV_8UC3);\n    //other code\n\n    imwrite(\"/path\", img);\n    namedWindow( \"Display window\", 1 );\n    imshow(\"Display window\", img);\n\n    waitKey(0);                                          \n    return 0;\n\n}\n</code></pre>\n\n<p>and the error message I get is:</p>\n\n<pre><code>undefined reference to cv::imwrite(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, cv::Mat const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt; const&amp;)`\n</code></pre>\n\n<p>imshow works correctly, so I have no clue why imwrite is giving me an error.</p>\n\n<p>EDIT:</p>\n\n<pre><code>g++ -o test_1 test_1.cpp `pkg-config opencv --cflags --libs`\n</code></pre>\n\n<p>gives the same error.</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495649363, "post_id": 44165692, "comment_id": 75347776, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495649398, "post_id": 44165692, "comment_id": 75347797, "body": "Are you sure that a stack is the right data structure to hold states? You might be interested in <a href=\"http://makulik.github.io/sttcl/\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 63, "user_id": 7041426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksOp5.png?s=128&g=1", "display_name": "yuris89", "link": "https://stackoverflow.com/users/7041426/yuris89"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495649635, "post_id": 44165692, "comment_id": 75347948, "body": "Not sure, maybe i can change it to vector, but overall this is not what my problem is i think"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1495649662, "post_id": 44165692, "comment_id": 75347960, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44165692/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 63, "user_id": 7041426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksOp5.png?s=128&g=1", "display_name": "yuris89", "link": "https://stackoverflow.com/users/7041426/yuris89"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495651297, "post_id": 44165692, "comment_id": 75348777, "body": "Okay maybe this is not really a problem, but something like &quot;how to&quot; question. As you can see in my code, i update and render states in mainLoop() method. What im tying to figure out is how to manage those updates, asuming that state can be changed from state itself, not only from stateManager (in my case Application class)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495651403, "post_id": 44165692, "comment_id": 75348829, "body": "You can check how I&#39;ve done it in the STTCL framework I linked you. It&#39;s not actually rocket science."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1495933741, "post_id": 44165692, "comment_id": 75456305, "body": "What is the purpose of a stack for your states? Does your program have an undo feature? If not, will a single state variable suffice?"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495710233, "post_id": 44169767, "comment_id": 75371858, "body": "This is an ok solution but this could easily flood the main loop with behaviour that is not its&#39; responsibility. With the approach @powerglove is taking he can separate that into another class."}, {"owner": {"reputation": 183, "user_id": 7928203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dz9q4.png?s=128&g=1", "display_name": "Nybbit", "link": "https://stackoverflow.com/users/7928203/nybbit"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495767270, "post_id": 44169767, "comment_id": 75399498, "body": "You can separate this into another class if you&#39;d like, it&#39;s not restricted to only the one class. (Also @powerglove if this worked as an answer, be sure to mark it, thanks)"}], "tags": [], "owner": {"reputation": 183, "user_id": 7928203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dz9q4.png?s=128&g=1", "display_name": "Nybbit", "link": "https://stackoverflow.com/users/7928203/nybbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1495666666, "creation_date": 1495666666, "answer_id": 44169767, "question_id": 44165692, "link": "https://stackoverflow.com/questions/44165692/c-implementing-states/44169767#44169767", "title": "C++ Implementing states", "body": "<p>Ok, so I'm guessing this is for a game (but it doesn't have to be). Instead of doing what you're doing for switching between states, I use an enum.</p>\n\n<pre><code>enum class GameState {\n    MENU, PLAY, PAUSE\n}\n</code></pre>\n\n<p>Then, in your main header</p>\n\n<pre><code>GameState m_gameState = GameState::MENU;\n</code></pre>\n\n<p>In your main loop, you can check what the current state is by simply doing</p>\n\n<pre><code>if (m_gameState == GameState::MENU)\n{\n    ...\n}\n</code></pre>\n\n<p>or you can use a switch statement</p>\n\n<pre><code>switch (m_gameState)\n{\ncase GameState::MENU:\n    ...\n    break;\ncase GameState::PLAY:\n    ...\n    break;\ncase GameState::PAUSE:\n    ...\n    break;\n}\n</code></pre>\n\n<p>And, if you ever want to switch the state, you can just do</p>\n\n<pre><code>m_gameState = GameState::PAUSE;\n</code></pre>\n\n<p>Hope this answered your question :D</p>\n\n<p>If not, I must have misunderstood (sorry).</p>\n"}], "owner": {"reputation": 63, "user_id": 7041426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksOp5.png?s=128&g=1", "display_name": "yuris89", "link": "https://stackoverflow.com/users/7041426/yuris89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 44169767, "answer_count": 1, "score": 0, "last_activity_date": 1495666666, "creation_date": 1495649243, "last_edit_date": 1495651342, "question_id": 44165692, "link": "https://stackoverflow.com/questions/44165692/c-implementing-states", "title": "C++ Implementing states", "body": "<p>My question is:\nI am trying to implement basic state management in my project and i stuck at changing states.\nI have all my states in <code>std::stack&lt;State*&gt;</code> container, and push/pop them directly from Application class or from State class.\nProblem is when i change current state from State class, it can be destroyed before render method called, whitch results in exeption. So how do i avoid this?\nPS sorry for my english and please say me if something in my problem/code isn clear</p>\n\n<p>Application class:</p>\n\n<pre><code>void Application::pushState(State* state)\n{\n    this-&gt;m_states.push(state);\n    this-&gt;m_states.top()-&gt;open();//enter state\n}\n\nvoid Application::popState()\n{\n    if (!this-&gt;m_states.empty())\n    {\n        this-&gt;m_states.top()-&gt;close();//leave state\n        delete this-&gt;m_states.top();\n    }\n\n    if (!this-&gt;m_states.empty())\n    this-&gt;m_states.pop();\n}\n\nvoid Application::changeState(State* state)\n{\n    if (!this-&gt;m_states.empty())\n        popState();\n    pushState(state);\n}\n\nState* Application::peekState()\n{\n    if (this-&gt;m_states.empty()) return nullptr;\n    return this-&gt;m_states.top();\n}\n\nvoid Application::mainLoop()\n{\n    sf::Clock clock;\n\n    while (this-&gt;m_window.isOpen())\n    {\n        sf::Time elapsed = clock.restart();\n        float delta = elapsed.asSeconds();\n\n        if (this-&gt;peekState() == nullptr)\n            this-&gt;m_window.close();\n        this-&gt;peekState()-&gt;update(delta)//if i change state in State.update(), it may be that code below will now point to not existing state\n\n        if (this-&gt;peekState() == nullptr)\n            this-&gt;m_window.close();\n        this-&gt;peekState()-&gt;render(delta);\n    }\n}\n</code></pre>\n\n<p>State class:</p>\n\n<pre><code>void EditorState::update(const float delta)\n{\n    sf::Event event;\n    while (this-&gt;m_application-&gt;m_window.pollEvent(event))\n    {\n        if (event.type == sf::Event::Closed)\n        {\n            this-&gt;m_application-&gt;popState();\n            return;\n        }\n    }\n}\n</code></pre>\n\n<p>Okay maybe this is not really a problem, but something like \"how to\" question. As you can see in my code, i update and render states in mainLoop() method. What im tying to figure out is how to manage those updates, asuming that state can be changed from state itself, not only from stateManager (in my case Application class)</p>\n"}, {"tags": ["c++", "function", "scope", "static", "constexpr"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1495649096, "post_id": 44165548, "comment_id": 75347613, "body": "fyi g++ 5.1.0 compiles it clean."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1495649422, "post_id": 44165548, "comment_id": 75347814, "body": "I will say that&#39;s an awfully strange way to write a switch statement. Introduce another scope just outside of it to place your variable. <code>{static constexpr int j = 7; swtich(i){...}}</code>"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495650829, "post_id": 44165548, "comment_id": 75348546, "body": "constexpr means that it is known at compile time, but other than that, it&#39;s semantics are the same as any other variable (plus the const-ness)"}, {"owner": {"reputation": 113, "user_id": 955978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e7057af13091287ef25e475c662094?s=128&d=identicon&r=PG", "display_name": "David G", "link": "https://stackoverflow.com/users/955978/david-g"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495652141, "post_id": 44165548, "comment_id": 75349181, "body": "@AndyG    Certainly, I <b>can</b> declare it immediately above the switch, which is what I currently do.  But it&#39;s a question of keeping the declaration close to its use.  C++ gave us ability to declare variables mid-block for precisely this reason.  I use the array in just a couple of cases in the switch, so I&#39;d like to keep its declaration as close to its use as I can."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495653390, "post_id": 44165548, "comment_id": 75349758, "body": "@DavidG: Yeah that&#39;s fair. It was a very good question that had me researching a lot of about the rules of initialization and switch statements, so thank you for the opportunity to post an answer."}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495650981, "post_id": 44165799, "comment_id": 75348621, "body": "It does seem like a MSVC bug (surprise!), but what you&#39;re saying doesn&#39;t look right. Declarations have always been allowed, and the compiler is complaining about <i>initialization</i>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495651770, "post_id": 44165799, "comment_id": 75349011, "body": "@PasserBy: I agree with you. It&#39;s becoming more ambiguous to me as I investigate more. It appears that the rules regarding static initialization may conflict with the rules regarding a switch statement, and whether there is precedence or not is confusing. It may simply be UB. I&#39;m going to delete my answer on account of that. (High rep users will still be able to see it)"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495652407, "post_id": 44165799, "comment_id": 75349297, "body": "@PasserBy: I did a little more research and updated the post accordingly. I feel it is more accurate than before."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1495653019, "last_edit_date": 1495653019, "creation_date": 1495649630, "answer_id": 44165799, "question_id": 44165548, "link": "https://stackoverflow.com/questions/44165548/static-constexpr-in-function-scope-is-msvcs-behavior-a-compiler-bug/44165799#44165799", "title": "static constexpr in function scope - is MSVC&#39;s behavior a compiler bug?", "body": "<p>It's a MSVC bug.</p>\n\n<p>It's illegal to jump into the scope of a variable declaration+initializer  (e.g. <code>case 0: int j = 5;</code>), but the rules also say that a <code>static</code> is initialized the first time control passes through their declaration. And declarations, however, are allowed to exist within a switch statement body, according to \u00a76.4.2/6 [stmt.switch] </p>\n\n<blockquote>\n  <p>\"...Declarations can appear in the substatement of a\n  switch-statement.\"</p>\n</blockquote>\n\n<p>So <code>static</code> is what makes everything okay in this instance.</p>\n\n<p>You could be totally fine if you had a non-static declaration (without initialization) at the beginning of a switch statement; it's the skipping over of declaration with initialization that makes the compiler bug out.</p>\n\n<pre><code>switch (i)\n{\n    int j;\n    case 0:\n        j = 2;\n        std::cout &lt;&lt; 0 &lt;&lt; std::endl;\n    break;\n    default:\n        j = 3;\n      std::cout &lt;&lt; j &lt;&lt; std::endl;\n    break;\n}\n</code></pre>\n\n<p>even this is fine (although dangerous):</p>\n\n<pre><code>case 0:\n    int j;\n    j = 5;\nbreak;\ndefault:\n    /*..*/\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/goto\" rel=\"nofollow noreferrer\">Because of the rules surrounding control transfer</a>: \u00a76.7/3 [stmt.dcl]:</p>\n\n<blockquote>\n  <p>It is possible to transfer into a block, but not in a way that bypasses declarations with initialization.</p>\n</blockquote>\n\n<p>I think <a href=\"http://en.cppreference.com/w/cpp/language/goto\" rel=\"nofollow noreferrer\">cppreference</a> explains it better:</p>\n\n<blockquote>\n  <p>If transfer of control enters the scope of any automatic variables (e.g. by jumping forward over a declaration statement), the program is ill-formed (cannot be compiled), unless all variables whose scope is entered have</p>\n  \n  <p>1) scalar types declared without initializers</p>\n  \n  <p>...</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 955978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e7057af13091287ef25e475c662094?s=128&d=identicon&r=PG", "display_name": "David G", "link": "https://stackoverflow.com/users/955978/david-g"}, "edited": false, "score": 0, "creation_date": 1495656568, "post_id": 44166698, "comment_id": 75351331, "body": "Reading over this a couple of times, it seems to me that the error I&#39;m making (?) is in assuming that because use of <code>constexpr</code> guarantees compile time evaluation is possible, it mandates that it must take place.  Your first cited paragraph clearly states that even in the presence of <code>constexpr</code> run time initialization is legal. The first code snippet in @dyp&#39;s answer to this question: <a href=\"https://stackoverflow.com/questions/26152096/when-and-why-would-you-use-static-with-constexpr/26162710#26162710\" title=\"when and why would you use static with constexpr\">stackoverflow.com/questions/26152096/&hellip;</a> shows an example of why <code>const</code> and <code>constexpr</code> are essentially identical at run-time."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495695885, "post_id": 44166698, "comment_id": 75363624, "body": "I deleted my answer because it seemed to refer to auto only despite the first sentence being any declaration.  I think there&#39;s a DR in that."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 4, "last_activity_date": 1495652956, "creation_date": 1495652956, "answer_id": 44166698, "question_id": 44165548, "link": "https://stackoverflow.com/questions/44165548/static-constexpr-in-function-scope-is-msvcs-behavior-a-compiler-bug/44166698#44166698", "title": "static constexpr in function scope - is MSVC&#39;s behavior a compiler bug?", "body": "<p>As @PasserBy hinted in a comment, <code>constexpr</code> doesn't affect as much as you'd hope. After <code>static constexpr int a = 10;</code>, code that reads <code>a</code>'s value can be optimised at compile time to use <code>10</code> directly, and the compiler will ensure that the initialiser <code>10</code> is a compile-time constant, but there is still an object there that in some cases might need actual storage at run-time, including initialisation. For instance when its address is taken.</p>\n\n<p>Initialisation of block-scope <code>static</code>s may happen early, the same way as for file scope objects, or it may happen when the execution reaches the declaration:</p>\n\n<p>N4140 [dcl.stmt]p4:</p>\n\n<blockquote>\n  <p>[...] An implementation is permitted to perform early initialization of other block-scope variables with static or thread storage duration under the same conditions that an implementation is permitted to statically initialize\n  a variable with static or thread storage duration in namespace scope (3.6.2). Otherwise such a variable is initialized the first time control passes through its declaration; such a variable is considered initialized upon the completion of its initialization. [...]</p>\n</blockquote>\n\n<p>Now, @MartinBonner's deleted answer quoted [dcl.stmt]p3:</p>\n\n<blockquote>\n  <p>It is possible to transfer into a block, but not in a way that bypasses declarations with initialization. A program that jumps<sup>90</sup> from a point where a variable with automatic storage duration is not in scope to a\n  point where it is in scope is ill-formed unless the variable has scalar type, class type with a trivial default constructor and a trivial destructor, a cv-qualified version of one of these types, or an array of one of the\n  preceding types and is declared without an initializer (8.5).</p>\n</blockquote>\n\n<p>The second sentence only addresses objects with automatic storage duration, but the first doesn't. You're transferring into a block in a way that <em>does</em> potentially bypass a declaration with initialisation. The only thing is, it doesn't <em>necessary</em> bypass a declaration with initialisation: if the initialisation is performed early, no initialisation gets bypassed.</p>\n\n<p>In this particular case, I would hope that all sensible implementations perform early initialisation, but it's not required, and because of that I think the error message is allowed. But I do suspect this isn't MSVC's intended behaviour:</p>\n\n<p>Here's an example where you'd definitely want an error:</p>\n\n<pre><code>int &amp;f() { static int i; return i; }\n\nint main() {\n  switch (0) {\n    static int &amp;i = f();\n  case 0:\n    return i;\n  }\n}\n</code></pre>\n\n<p>Here, the initialisation of the variable <code>i</code> is skipped, and as a result, an uninitialised reference is accessed, triggering a segmentation fault on multiple compilers. Yet in this case, MSVC does <em>not</em> show a compilation error. (Nor do other compilers.) It doesn't make sense for the error message to be issued in a situation where the error is harmless, but omitted where the error is harmful. Because of that, I suspect the error message you're receiving is not intended, and worth reporting as a bug.</p>\n"}], "owner": {"reputation": 113, "user_id": 955978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e7057af13091287ef25e475c662094?s=128&d=identicon&r=PG", "display_name": "David G", "link": "https://stackoverflow.com/users/955978/david-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1495653019, "creation_date": 1495648826, "last_edit_date": 1495650115, "question_id": 44165548, "link": "https://stackoverflow.com/questions/44165548/static-constexpr-in-function-scope-is-msvcs-behavior-a-compiler-bug", "title": "static constexpr in function scope - is MSVC&#39;s behavior a compiler bug?", "body": "<p>My understanding is that a function scope <code>static constexpr</code> is evaluated at compile time.  If this is the case, what justification, if any, does MSVC have for the following error:</p>\n\n<pre><code>int main()\n{\n    int i = 5;\n\n    switch (i)\n    {\n        // Original question:\n        static constexpr int j = 7; // legal?\n        // My actual use case, which may not be legal.\n        static constexpr int k[2] = { 7, 4 };\n\n    default:\n    case 0:\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>testapp.cpp(10) : error C2360 : initialization of 'j' is skipped by 'case' label</p>\n\n<p>If that were a non-constexpr then yes, this is a valid complaint.  However since the constexpr is evaluated at compile time, there should be no need to execute anything at the declaration site.</p>\n\n<p>-- Edit --</p>\n\n<p>With apologies to Martin Bonner whose answer was deleted since it did not apply to my original question.</p>\n\n<p>My actual use case is the second: a constexpr array with an initializer list.  From what I saw in the standard that was cited, my first case of a static constexpr scalar int is not prohibited.  However it appears that what I'm trying to do is ill-formed.</p>\n\n<p>If this is indeed true, then why?  Isn't the whole point of constexpr to evaluate things at compile time, <em>therefore it should not matter if control ever actually passes the declaration.</em></p>\n"}, {"tags": ["c++", "ios", "halide"], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 5764282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b16fe337d11b30cbdb5a4817727761?s=128&d=identicon&r=PG", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/5764282/khouri-giordano"}, "is_accepted": true, "score": 3, "last_activity_date": 1495649584, "creation_date": 1495649584, "answer_id": 44165786, "question_id": 44165463, "link": "https://stackoverflow.com/questions/44165463/using-halide-ahead-of-time-aot-with-metal-on-ios/44165786#44165786", "title": "Using Halide ahead-of-time (AOT) with Metal on iOS", "body": "<p>If you set values in a <code>Buffer</code>, you need to mark it dirty: <code>input_.set_host_dirty()</code></p>\n"}], "owner": {"reputation": 48, "user_id": 8056419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c2fcc3481372ce2d5f81da8460b62e?s=128&d=identicon&r=PG&f=1", "display_name": "ryguy", "link": "https://stackoverflow.com/users/8056419/ryguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 3, "accepted_answer_id": 44165786, "answer_count": 1, "score": 2, "last_activity_date": 1495649584, "creation_date": 1495648517, "question_id": 44165463, "link": "https://stackoverflow.com/questions/44165463/using-halide-ahead-of-time-aot-with-metal-on-ios", "title": "Using Halide ahead-of-time (AOT) with Metal on iOS", "body": "<p>I'm trying to use Metal as the target for my ahead-of-time (AOT) Halide pipeline for use on iOS.</p>\n\n<p>I've successfully created a Halide generator that generates a static binary using Metal. I can link and call this binary in my iOS app. </p>\n\n<p>However, when I pass an <code>Buffer&lt;uint8_t&gt; input_</code> to the function, the data in the <code>Buffer</code> always seems to be zero on the GPU side. Note that this only happens when running on the GPU on iOS. </p>\n\n<p><strong>Generator</strong></p>\n\n<pre><code>#include \"Halide.h\"\n\nusing namespace Halide;\n\nclass MyHalideTest : public Halide::Generator&lt;MyHalideTest&gt; {\npublic:\n    Input&lt;Buffer&lt;uint8_t&gt;&gt; input{\"input\", 3};\n    Input&lt;int32_t&gt; width{\"width\"};\n    Input&lt;int32_t&gt; height{\"height\"};\n    Output&lt;Buffer&lt;uint8_t&gt;&gt; output{\"output\", 3};\n\n    void generate() {\n        output(x,y,c) = cast&lt;uint8_t&gt;(input(x,y,c)+25);\n    }\n\n    void schedule() {\n        input\n            .dim(0).set_stride(4)\n            .dim(2).set_stride(1).set_bounds(0, 4);\n        output\n            .dim(0).set_stride(4)\n            .dim(2).set_stride(1).set_bounds(0, 4);\n\n        if (get_target().has_gpu_feature()) {\n            output\n                .reorder(c, x, y)\n                .bound(c, 0, 4)\n                .unroll(c);\n            output.gpu_tile(x, y, xo, yo, xi, yi, 16, 16);\n        }\n        else {\n            output\n                .reorder(c, x, y)\n                .unroll(c)\n                .split(y, yo, yi, 16)\n                .parallel(yo)\n                .vectorize(x, 8);\n        }\n    }\n\nprivate:\n    Var x{\"x\"}, y{\"y\"}, c{\"c\"}, xi{\"xi\"}, xo{\"xo\"}, yi{\"yi\"}, yo{\"yo\"};\n\n};\n\nHALIDE_REGISTER_GENERATOR(MyHalideTest, \"halide_test\")\n</code></pre>\n\n<p><strong>Command line to generate Generator</strong></p>\n\n<pre><code>./MyHalideTest_generator -g halide_test \\\n-f halide_test_ARM64_metal \\\n-n halide_test_ARM64_metal \\\n-o \"${DERIVED_FILE_DIR}\" \\\ntarget=arm-64-ios-metal-debug-user_context\n</code></pre>\n\n<p><strong>iOS code calling Halide function</strong></p>\n\n<pre><code>Buffer&lt;uint8_t&gt; input_;\nBuffer&lt;uint8_t&gt; output_;\n\n// Other setup\n\n- (void)initBuffersWithWidth:(int)w height:(int)h using_metal:(bool)using_metal\n{\n    // We really only need to pad this for the use_metal case,\n    // but it doesn't really hurt to always do it.\n    const int c = 4;\n    const int pad_pixels = (64 / sizeof(int32_t));\n    const int row_stride = (w + pad_pixels - 1) &amp; ~(pad_pixels - 1);\n    const halide_dimension_t pixelBufShape[] = {\n        {0, w, c},\n        {0, h, c * row_stride},\n        {0, c, 1}\n    };\n\n    input_ = Buffer&lt;uint8_t&gt;(nullptr, 3, pixelBufShape);\n    input_.allocate();\n    auto buf = input_.raw_buffer()-&gt;host;\n    memset(buf, 200, input_.size_in_bytes());\n\n    // This allows us to make a Buffer with an arbitrary shape\n    // and memory managed by Buffer itself\n    output_ = Buffer&lt;uint8_t&gt;(nullptr, 3, pixelBufShape);\n    output_.allocate();\n}\n\n...\n\n/** Calling Halide function here **/\nhalide_test((__bridge void *)self, input_, width, height, output_);\noutput_.copy_to_host();\n\n// Display output image...\n</code></pre>\n\n<p>So, the code sets the <code>input_</code> buffer to be values of 200. The returned <code>output_</code> buffer should be 225, but it's not. All the values are only 25.</p>\n\n<p>I should note that this works <em>correctly</em> when running on my laptop's GPU and on the phone's CPU. The only difference is the Halide generator <code>target</code>.</p>\n\n<p>Any ideas on why the <code>Input&lt;Buffer&lt;uint8_t&gt;&gt; input</code> seems to be set to all zeros when running the Halide function?</p>\n\n<p>The debug statements seem to malloc memory on the device side, but I don't see an explicit statement saying <code>halide_copy_to_device</code>.</p>\n"}, {"tags": ["c++", "class", "memory-management", "struct", "casting"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1495647958, "post_id": 44165281, "comment_id": 75346957, "body": "If all of the structs are POD (see above link) then it would be safe(r) to do this, but the second they aren&#39;t, this is undefined behavior. For example you have inheritance (and therefore a v-table), user defined constructors, non-POD members, etc. So your example will not work."}, {"owner": {"reputation": 409, "user_id": 5106317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Zfye.jpg?s=128&g=1", "display_name": "Ozgur Murat", "link": "https://stackoverflow.com/users/5106317/ozgur-murat"}, "edited": false, "score": 0, "creation_date": 1495648241, "post_id": 44165281, "comment_id": 75347100, "body": "The classes in the example are not virtual, so there are no v-tables."}, {"owner": {"reputation": 1, "user_id": 8060974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a094fd6b4ea581361d91cb9ad5878?s=128&d=identicon&r=PG&f=1", "display_name": "W_U", "link": "https://stackoverflow.com/users/8060974/w-u"}, "edited": false, "score": 0, "creation_date": 1495878287, "post_id": 44165281, "comment_id": 75441844, "body": "Hello, yes in my case, I do <i>not</i> have any virtual functions. - Thanks for that Link!"}], "owner": {"reputation": 1, "user_id": 8060974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a094fd6b4ea581361d91cb9ad5878?s=128&d=identicon&r=PG&f=1", "display_name": "W_U", "link": "https://stackoverflow.com/users/8060974/w-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1495647926, "answer_count": 0, "score": 0, "last_activity_date": 1495647736, "creation_date": 1495647736, "question_id": 44165281, "link": "https://stackoverflow.com/questions/44165281/cast-a-simple-c-struct-to-another-derived-c-struct-containing-same-datat", "closed_reason": "Duplicate", "title": "Cast a simple (c++) struct to another derived (c++) struct containing same datatypes", "body": "<p><strong>Hello everyone,</strong></p>\n\n<p>I have a simple struct C which contains 3 variables.\nThen I have two structs, A and B, where B is derived from A. All in all, B contains the same 3 types of variables as in my simple struct C.</p>\n\n<p>(Note: C++ structs are used)</p>\n\n<p><strong>My questions:</strong></p>\n\n<ol>\n<li>Can I cast between C and B as in my example below, i.e. is it allowed\nor do I have to look at something special (memory)? My example below\nproduces no valgrind mem error. However, I want to be sure what you \nthink about it.</li>\n<li>Am I right, that if B inherits from A, the variables from struct A are\nput before (or afterwards - depending on architecture) the variables\nof B in memory, i.e. do I have everytime an \"ordered\" memory which \nfits to struct C ordering/memory? Or can it\nhappen, that e.g. the \"type\" variable from A is between the \"str\" and\n\"value\" variable?</li>\n</ol>\n\n<p>Hope you can help me! Thanks in advance.</p>\n\n<p><strong>Example (C++11 style):</strong></p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstruct a\n{\n    unsigned int type;\n\n    a(unsigned int t) : type(t)\n    {}\n};\n\nstruct b : public a\n{\n    std::string str;\n    unsigned int value;\n\n    b() : a(2), str(\"Hello\"), value(1)\n    {}\n};\n\nstruct c\n{\n    unsigned int type;\n\n    std::string str;\n    unsigned int value;\n\n    c() : type(1), str(\"World\"), value(42)\n    {};\n};\n\nint main(int argc, char*argv[])\n{\n    // Bottom up\n    {\n        std::cout &lt;&lt; \"Bottom Up\" &lt;&lt; std::endl;\n\n        c* ptr2 = new c();\n\n        std::cout &lt;&lt; ptr2-&gt;type &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr2-&gt;str &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr2-&gt;value &lt;&lt; std::endl;\n\n        std::shared_ptr&lt;b&gt;ptr;\n        ptr.reset(reinterpret_cast&lt;b*&gt;(ptr2));\n\n        std::cout &lt;&lt; ptr-&gt;type &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr-&gt;str &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr-&gt;value &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::endl;\n    }\n\n    // Top down\n    {\n        std::cout &lt;&lt; \"Top down\" &lt;&lt; std::endl;\n        std::shared_ptr&lt;b&gt;ptr(new b());\n\n        std::cout &lt;&lt; ptr-&gt;type &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr-&gt;str &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr-&gt;value &lt;&lt; std::endl;\n\n        c* ptr2 = reinterpret_cast&lt;c*&gt;(ptr.get());\n\n        std::cout &lt;&lt; ptr2-&gt;type &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr2-&gt;str &lt;&lt; std::endl;\n        std::cout &lt;&lt; ptr2-&gt;value &lt;&lt; std::endl;\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1495647765, "post_id": 44165233, "comment_id": 75346851, "body": "put a <code>break</code> inside the <code>if</code> (after the printing line). Or use <code>std::find</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1495647809, "post_id": 44165233, "comment_id": 75346874, "body": "Here&#39;s a hint: use a <code>bool</code> to track the condition you need to inside the for loop. After the loop, check the value of the <code>bool</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1495647835, "post_id": 44165233, "comment_id": 75346890, "body": "@UnholySheep: OP needs to iterate over the entire array."}, {"owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "edited": false, "score": 1, "creation_date": 1495649195, "post_id": 44165233, "comment_id": 75347667, "body": "As discussed in previous answers, I&#39;m unsure if he wants once, only one, more than once conditions. I&#39;ve tried to provide an answer that can be adjusted to meet any of these conditions - a simple counter - but clarification would be ideal here <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495661376, "post_id": 44165233, "comment_id": 75353553, "body": "Good grief!  Just run a counter then at the end of the loop check the counter value...1 means only one match....0 means no matches....more than 1 means that the array contents seem to violate the conditions asserted."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495648139, "post_id": 44165320, "comment_id": 75347053, "body": "This code is unfortunately not correct. OP stated &quot;The number can be equal to only one element of an array&quot;. If we break after matching just one, we exclude the possibility that another number might equal the target, and thus the condition is not satisfied."}, {"owner": {"reputation": 452, "user_id": 7474999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8c6289984d5d867591269a41eaded00?s=128&d=identicon&r=PG&f=1", "display_name": "mara6399", "link": "https://stackoverflow.com/users/7474999/mara6399"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495648576, "post_id": 44165320, "comment_id": 75347293, "body": "Sorry but I don&#39;t understand your comment... In my code when it finds an element which is equal to the number, it breaks because &quot;The number can be equal to only one element of an array&quot;, not 2 or 3, and so it&#39;s useless to go on with the loop."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495648842, "post_id": 44165320, "comment_id": 75347455, "body": "That is another interpretation of OPs statement that I did not consider. It can be interpreted to mean &quot;There won&#39;t be duplicates in the array&quot; or &quot;there may be duplicates in the array, and if there are, then do not match&quot;. Please make an edit to your post so I can retract my downvote."}, {"owner": {"reputation": 21, "user_id": 8060861, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134522133271346/picture?type=large", "display_name": "Ajib Paudel", "link": "https://stackoverflow.com/users/8060861/ajib-paudel"}, "edited": false, "score": 1, "creation_date": 1495650580, "post_id": 44165320, "comment_id": 75348405, "body": "This code worked exactly the way I wanted. The number can be equal to at maximum one number or none. Only if the number is equal to none it executes the last if statement, that&#39;s exactly what I need."}], "tags": [], "owner": {"reputation": 452, "user_id": 7474999, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a8c6289984d5d867591269a41eaded00?s=128&d=identicon&r=PG&f=1", "display_name": "mara6399", "link": "https://stackoverflow.com/users/7474999/mara6399"}, "is_accepted": true, "score": 4, "last_activity_date": 1495648731, "last_edit_date": 1495648731, "creation_date": 1495647913, "answer_id": 44165320, "question_id": 44165233, "link": "https://stackoverflow.com/questions/44165233/comparing-a-number-with-an-array-of-numbers/44165320#44165320", "title": "Comparing a number with an array of numbers", "body": "<p>This code should be correct: when it finds an element of the array which is equal to the number you're looking for, it breaks the loop converting the <code>bool</code> variable into true. So, if it is false (<code>if(!check)</code>) the number is not in the array.</p>\n\n<pre><code>bool check = false;\n\nfor (int i = 0; i &lt; 100; i++)\n{\n    if(number == X[i])\n    {\n        cout&lt;&lt;\"number is equal to one of the numbers in array\"&lt;&lt;endl;\n        check = true;\n        break;\n    }\n}\n\nif (!check)\n    cout&lt;&lt;\"number is not equal to any number in the array\"&lt;&lt;endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1495648186, "post_id": 44165324, "comment_id": 75347073, "body": "<code>std::find</code> will exit as soon as it finds a single match. OP needs to ensure that &quot;only one element of an array&quot; will match. &quot;Only one&quot; being the key phrase here. <code>std::find</code> will not indicate duplicates."}, {"owner": {"reputation": 153, "user_id": 4440121, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001164759173/picture?type=large", "display_name": "Sebastian Kaupper", "link": "https://stackoverflow.com/users/4440121/sebastian-kaupper"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495648459, "post_id": 44165324, "comment_id": 75347236, "body": "As he wrote &quot;The number can be equal to only one element of an array&quot; its not exactly clear if he want to know if a value exists only once or if his code ensures that a value exists at most once. Nevertheless, if the first one is true <code>std::count</code> , of course, would fit better."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495648733, "post_id": 44165324, "comment_id": 75347392, "body": "That is an interpretation I did not consider. Unfortunately my downvote cannot be removed unless you edit your post."}], "tags": [], "owner": {"reputation": 153, "user_id": 4440121, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001164759173/picture?type=large", "display_name": "Sebastian Kaupper", "link": "https://stackoverflow.com/users/4440121/sebastian-kaupper"}, "is_accepted": false, "score": 1, "last_activity_date": 1495649241, "last_edit_date": 1495649241, "creation_date": 1495647933, "answer_id": 44165324, "question_id": 44165233, "link": "https://stackoverflow.com/questions/44165233/comparing-a-number-with-an-array-of-numbers/44165324#44165324", "title": "Comparing a number with an array of numbers", "body": "<p>You could try an algorithm provided by the STL. The <a href=\"http://www.cplusplus.com/reference/algorithm/find\" rel=\"nofollow noreferrer\">std::find</a> algorithm is probably what you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 6763380, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TyiZjH6u4s8/AAAAAAAAAAI/AAAAAAAAAHU/yms3bKnJ9ss/photo.jpg?sz=128", "display_name": "Will Potato", "link": "https://stackoverflow.com/users/6763380/will-potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1496707801, "last_edit_date": 1496707801, "creation_date": 1495648298, "answer_id": 44165412, "question_id": 44165233, "link": "https://stackoverflow.com/questions/44165233/comparing-a-number-with-an-array-of-numbers/44165412#44165412", "title": "Comparing a number with an array of numbers", "body": "<p>That's because you are comparing <strong>\"number\"</strong> with every number in the array <strong>\"X\"</strong>, and every time the 2 numbers are <strong>not</strong> equal you are printing that statement.</p>\n\n<p>What you want is something more like this:</p>\n\n<pre><code>bool foundNumber = false;\n\nfor(int i=0;i&lt;100;i++){\n\n    if(number==X[i]){\n\n        cout&lt;&lt;\"number is equal to one of the numbers in array\"&lt;&lt;endl;\n        foundNumber = true;\n        break; //The \"break\" command just exits out of the loop and if you already know it's equal, you can just exit the loop\n\n    }\n}\n\n//Now that we are out of the loop, we check the \"foundNumber\" variable\nif(foundNumber==false){\n\n    //If \"foundNumber\" is false, then we can print out that we did not find the number\n    cout&lt;&lt;\"number is not equal to any number in the array\"&lt;&lt;endl;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8060861, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134522133271346/picture?type=large", "display_name": "Ajib Paudel", "link": "https://stackoverflow.com/users/8060861/ajib-paudel"}, "edited": false, "score": 0, "creation_date": 1495651479, "post_id": 44165542, "comment_id": 75348864, "body": "I liked the logic you are using. It&#39;s simple and solves my problem."}], "tags": [], "owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "is_accepted": false, "score": 1, "last_activity_date": 1495648805, "creation_date": 1495648805, "answer_id": 44165542, "question_id": 44165233, "link": "https://stackoverflow.com/questions/44165233/comparing-a-number-with-an-array-of-numbers/44165542#44165542", "title": "Comparing a number with an array of numbers", "body": "<p>I think this may provide the answer you are looking for, using a counter to find out if it exists multiple times or not. NB - I haven't run this code! As far as I am aware, it is more extensible given the <em>slightly</em> ambiguous question, and should meet your needs of whether you need to find a value that appears once, <em>only</em> once, or more than once.</p>\n\n<pre><code>unsigned int count = 0;\nfor (int i = 0; i &lt; 100; i++)\n{\n    if(number == X[i])\n    {\n         count++;\n    }\n}\n\nif (count == 1) //Edit with == x, or &gt; or &lt; symbols to change frequency requirements\n    cout &lt;&lt; \"Number exists \" &lt;&lt; count &lt;&lt; \" time(s) in array\"&lt;&lt;endl;\nelse\n    cout &lt;&lt; \"Number does not exist only once in array\" &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8060861, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134522133271346/picture?type=large", "display_name": "Ajib Paudel", "link": "https://stackoverflow.com/users/8060861/ajib-paudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 44165320, "answer_count": 4, "score": -1, "last_activity_date": 1496707801, "creation_date": 1495647552, "last_edit_date": 1495656604, "question_id": 44165233, "link": "https://stackoverflow.com/questions/44165233/comparing-a-number-with-an-array-of-numbers", "title": "Comparing a number with an array of numbers", "body": "<p>I want to write a code wherein I have to compare a number with all the elements of an array. The number can be equal to only one element of an array or not equal to any element. I can compare the number with each element of the array using if statement inside a for loop. Problem is when I want to write \"the number is not equal to any of the element of the array\".The code shown below will execute the else statement 99 or 100 times, but I need that to be executed only once, after number is compared with all X[i] and not found equal.</p>\n\n<pre><code>for(int i = 0; i &lt; 100; i++)\n{\n    if(number == X[i])\n    {\n        cout &lt;&lt; \"number is equal to one of the numbers in array\" &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"number is not equal to any number in the array\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1495665871, "post_id": 44165193, "comment_id": 75355061, "body": "Just to raise the warning... you&#39;ll have to make sure that your list will outlive all of the elements that you put into it, or you&#39;ll end up making dangling references.  (Same issues as if you were storing pointers into the container)"}], "answers": [{"comments": [{"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495649777, "post_id": 44165256, "comment_id": 75348028, "body": "<code>std::reference_wrapper&lt;T&gt;</code> <i>is</i> implicitly convertible to <code>T&amp;</code>; however, I&#39;m not sure if that would be considered in resolving an <code>operator=</code> overload, and even if so there would be a good chance of <code>reference_wrapper</code>&#39;s copy constructor to make it ambiguous.  The implicit conversion is more useful if passing to a function taking a reference."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495650468, "post_id": 44165256, "comment_id": 75348356, "body": "@DanielSchepler You&#39;re right, in fact the assignment operator will try the conversion on its right side, not on the left, so it won&#39;t work (the compiler will try to convert <code>10</code> to a <code>reference_wrapper</code>)."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495651193, "post_id": 44165256, "comment_id": 75348730, "body": "Which I think would resolve to the explicitly deleted constructor <code>reference_wrapper(T&amp;&amp;) = delete</code>, and therefore cause a compiler error."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495651317, "post_id": 44165256, "comment_id": 75348793, "body": "@DanielSchepler Exactly, was just playing around with it and can confirm."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 19, "last_activity_date": 1495651720, "last_edit_date": 1495651720, "creation_date": 1495647642, "answer_id": 44165256, "question_id": 44165193, "link": "https://stackoverflow.com/questions/44165193/how-to-manage-stdlist-elements-as-references/44165256#44165256", "title": "How to manage std::list elements as references?", "body": "<p>When you use <code>push_back</code> to insert elements into a list, <code>push_back</code> creates a copy which is inserted into the list. A solution is to use a <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"noreferrer\"><code>std::reference_wrapper</code></a> instead as the underlying type of the list, like</p>\n\n<pre><code>std::list&lt;std::reference_wrapper&lt;Foo&gt;&gt; lst;\n</code></pre>\n\n<p>and then push into it like</p>\n\n<pre><code>lst.push_back(foo);\n</code></pre>\n\n<p>Here is a super simple example that shows you how it works:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n\nint main() \n{\n    int i = 42;\n    std::list&lt;std::reference_wrapper&lt;int&gt;&gt; lst;\n\n    lst.push_back(i);           // we add a \"reference\" into the list\n    lst.front().get() = 10;     // we update the list\n    std::cout &lt;&lt; i;             // the initial i was modified!\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b615243802938ad9\" rel=\"noreferrer\"><kbd>Live on Coliru</kbd></a></p>\n\n<p>You need the <code>reference_wrapper</code> since you cannot simply create a list of references, like <code>std::list&lt;Foo&amp;&gt;</code>. Alternatively, you can use pointers, but I find the <code>reference_wrapper</code> approach more transparent.</p>\n\n<p>In the simple example above note the need to use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/get\" rel=\"noreferrer\"><code>std::reference_wrapper::get()</code></a> to obtain the underlying reference, as the <code>reference_wrapper</code> is on the left hand side of the assignment operator and hence won't be implicitly converted to <code>int</code> via [<code>std::reference_wrapper::operator T&amp;</code>.</p>\n\n<p>Below is your full working code modified to use <code>reference_wrapper</code>s:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fb1fd67996d6e5e9\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/fb1fd67996d6e5e9</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1495647657, "creation_date": 1495647657, "answer_id": 44165263, "question_id": 44165193, "link": "https://stackoverflow.com/questions/44165193/how-to-manage-stdlist-elements-as-references/44165263#44165263", "title": "How to manage std::list elements as references?", "body": "<p>Your <code>std::list&lt;Foo&gt;</code> contains actual <code>Foo</code> objects.  When you call <code>list.push_back(foo)</code>, it makes a <em>copy</em> of <code>foo</code>.  You are then declaring <code>foo2</code> to reference that <em>copied</em> object, not the original object.  That is why <code>foo</code> is not updated when the members of <code>foo2</code> are changed.</p>\n\n<p>Try using pointers instead:</p>\n\n<pre><code>int main() {\n    Foo foo;\n    foo.var1 = 1;\n    foo.var2 = 2;\n\n    std::list&lt;Foo*&gt; list;\n    list.push_back(&amp;foo);\n\n    Foo *foo2 = list.front();\n    foo2-&gt;var2 = 5;\n\n    std::cout &lt;&lt; \"foo (\" &lt;&lt; &amp;foo &lt;&lt; \"): \" &lt;&lt; foo &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"foo from list (\" &lt;&lt; foo2 &lt;&lt; \"): \" &lt;&lt; *foo2 &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "is_accepted": false, "score": 2, "last_activity_date": 1495648001, "creation_date": 1495648001, "answer_id": 44165342, "question_id": 44165193, "link": "https://stackoverflow.com/questions/44165193/how-to-manage-stdlist-elements-as-references/44165342#44165342", "title": "How to manage std::list elements as references?", "body": "<p>If you change your output to this:</p>\n\n<pre><code>std::cout &lt;&lt; \"foo \" &lt;&lt; foo &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"front \" &lt;&lt; list.front() &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"foo2 \" &lt;&lt; foo2 &lt;&lt; std::endl;\n</code></pre>\n\n<p>You'll find the output looks like this: </p>\n\n<pre><code>foo [Foo] 1,2\nfront [Foo] 1,5\nfoo2 [Foo] 1,5\n</code></pre>\n\n<p>Indeed, when you got a reference, then set <code>foo2</code>, you did change the front of the list!  The surprise here is that the front of the list is no longer equal to <code>foo</code>.  When you push something into a list, it puts a copy in that list, not a reference.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 3, "last_activity_date": 1616088612, "last_edit_date": 1616088612, "creation_date": 1495648200, "answer_id": 44165383, "question_id": 44165193, "link": "https://stackoverflow.com/questions/44165193/how-to-manage-stdlist-elements-as-references/44165383#44165383", "title": "How to manage std::list elements as references?", "body": "<p>For that you'll need reference semantics instead of value semantics. The most straightforward way to implement reference semantics is through pointers. Only some small changes in your example will do it:</p>\n<pre><code>struct Foo {\n    int var1;\n    int var2;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Foo&amp; s){\n        return os &lt;&lt; &quot;[Foo] &quot; &lt;&lt; s.var1 &lt;&lt; &quot;,&quot; &lt;&lt; s.var2 ;\n    }\n};\n\nint main() {\n    auto foo = std::make_unique&lt;Foo&gt;();\n    \n    foo-&gt;var1 = 1;\n    foo-&gt;var2 = 2;\n\n    // We want a non owning observer of foo\n    auto&amp; foo2 = *foo;\n\n    std::list&lt;std::unique_ptr&lt;Foo&gt;&gt; list;\n    \n    // The ownership of foo is moved into the container\n    list.emplace_back(std::move(foo));\n\n    // Another non owning observer\n    auto&amp; foo3 = *list.front();\n    foo3.var2 = 5;\n\n    // foo is null here, since we moved it in the container, but we have foo2\n    std::cout &lt;&lt; &quot;foo (&quot; &lt;&lt; &amp;foo2 &lt;&lt; &quot;): &quot; &lt;&lt; foo2 &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; &quot;foo from list (&quot; &lt;&lt; list.front().get() &lt;&lt; &quot;): &quot; &lt;&lt; foo3 &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 4739, "user_id": 2601512, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/86c1073ace550dbea46857ba086bd2bf?s=128&d=identicon&r=PG", "display_name": "jscherman", "link": "https://stackoverflow.com/users/2601512/jscherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5631, "favorite_count": 0, "accepted_answer_id": 44165256, "answer_count": 4, "score": 14, "last_activity_date": 1616088612, "creation_date": 1495647414, "last_edit_date": 1495821716, "question_id": 44165193, "link": "https://stackoverflow.com/questions/44165193/how-to-manage-stdlist-elements-as-references", "title": "How to manage std::list elements as references?", "body": "<p>I have the following code:</p>\n\n<pre><code>struct Foo {\n    int var1;\n    int var2;\n\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Foo&amp; s){\n        return os &lt;&lt; \"[Foo] \" &lt;&lt; s.var1 &lt;&lt; \",\" &lt;&lt;  s.var2 ;\n    }\n};\n\nint main() {\n    Foo foo;\n    foo.var1 = 1;\n    foo.var2 = 2;\n    std::list&lt;Foo&gt; list;\n    list.push_back(foo);\n\n    Foo &amp;foo2 = list.front();\n    foo2.var2 = 5;\n\n    std::cout &lt;&lt; \"foo (\" &lt;&lt; &amp;foo &lt;&lt; \"): \" &lt;&lt; foo &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"foo2 (foo from list) (\" &lt;&lt; &amp;list.front() &lt;&lt; \"): \" &lt;&lt; foo2 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I want both <code>foo</code> and <code>foo2</code> to reference the same object. So when I assign <code>5</code> to <code>foo2.var2</code>, I would want to modify <code>foo.var2</code> as well. Yet, as we can see in the following output this is not happening:</p>\n\n<pre><code>foo (0x7fffffffe140): [Foo] 1,2\nfoo2 (foo from list) (0x61ac30): [Foo] 1,5 \n</code></pre>\n\n<p>What would be the correct way to do that? </p>\n"}, {"tags": ["c++", "vector", "std"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1495647474, "post_id": 44165090, "comment_id": 75346706, "body": "Post compilable code."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1495647484, "post_id": 44165090, "comment_id": 75346711, "body": "Shrug. Once you&#39;ve removed an element your sequence is smaller, and you shouldn&#39;t be looking beyond its end."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1495647904, "post_id": 44165090, "comment_id": 75346932, "body": "Did you notice the double comma in the output?"}, {"owner": {"reputation": 1, "user_id": 7479411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e868227bd772318cac369ba4ed02d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndesai94", "link": "https://stackoverflow.com/users/7479411/ndesai94"}, "edited": false, "score": 0, "creation_date": 1495652776, "post_id": 44165090, "comment_id": 75349454, "body": "Really didn&#39;t find this an EXACT duplicate but okay. Was just confused that the elements at the end of the string vector were altered (changed to empty strings) after the removal while they remain unchanged in vectors of ints, doubles, etc."}], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 1620443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c0f8e08e9c3ebe26574919692b0037?s=128&d=identicon&r=PG", "display_name": "user1620443", "link": "https://stackoverflow.com/users/1620443/user1620443"}, "edited": false, "score": 0, "creation_date": 1495648189, "post_id": 44165264, "comment_id": 75347076, "body": "Not sure why the difference between int and string, though. Probably the implementation for strings is using some sort of swap with empty strings, while for int&#39;s is just assigning the next values?"}], "tags": [], "owner": {"reputation": 764, "user_id": 1620443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c0f8e08e9c3ebe26574919692b0037?s=128&d=identicon&r=PG", "display_name": "user1620443", "link": "https://stackoverflow.com/users/1620443/user1620443"}, "is_accepted": false, "score": 1, "last_activity_date": 1495647661, "creation_date": 1495647661, "answer_id": 44165264, "question_id": 44165090, "link": "https://stackoverflow.com/questions/44165090/different-results-with-stdremove-on-vectors-of-different-types/44165264#44165264", "title": "Different results with std::remove on vectors of different types", "body": "<p>From the reference of std::remove: </p>\n\n<blockquote>\n  <p>The relative order of the elements not removed is preserved, while the\n  elements between the returned iterator and last are left in a valid\n  but unspecified state.</p>\n</blockquote>\n\n<p>Hence, in both cases the function is behaving \"correctly\".</p>\n"}], "owner": {"reputation": 1, "user_id": 7479411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e868227bd772318cac369ba4ed02d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndesai94", "link": "https://stackoverflow.com/users/7479411/ndesai94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1495648033, "answer_count": 1, "score": -1, "last_activity_date": 1495647671, "creation_date": 1495647022, "question_id": 44165090, "link": "https://stackoverflow.com/questions/44165090/different-results-with-stdremove-on-vectors-of-different-types", "closed_reason": "Duplicate", "title": "Different results with std::remove on vectors of different types", "body": "<p>As the title explains, I am for some reason getting different results using std::remove on vectors of different types, namely of strings and ints. For the vector of ints, the function is working as expected and not actually physically removing the element. However, it does physically remove the element for the vector of strings and I can't seem to figure out why (feel like it's something small I'm overlooking). If anyone can explain why this is happening that would be really great. I've posted the code and the output below. Thanks!</p>\n\n<pre><code>//includes\nusing namespace std;\n\ntemplate &lt;class T&gt;\nvoid printer(T value) {\n    cout &lt;&lt; value &lt;&lt; \", \"\n}\n\nint main() {\n    string myvalues[] = { \"yyy\",\"Yyy\", \"yYy\",\"yyY\",\"ZZZ\",\"zZZ\", \"ZzZ\", \"ZZz\" };\n    int nums[] = { 1, 2, 3, 4, 5, 6, 7, 8 };\n    vector&lt;string&gt; v1(myvalues, myvalues + 8);\n    vector&lt;int&gt; v2(nums, nums + 8);\n    sort(v1.begin(), v1.end());\n    remove(v2.begin(), v2.end(), 7);\n    remove(v1.begin(), v1.end(), \"yyy\");\n    for_each(v1.begin(), v1.end(), printer&lt;string&gt;);\n    cout &lt;&lt; endl;\n    for_each(v2.begin(), v2.end(), printer&lt;int&gt;);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>Yyy, ZZZ, ZZz, ZzZ, yYy, yyY, zZZ, ,</p>\n\n<p>1, 2, 3, 4, 5, 6, 8, 8, </p>\n\n<p>As you can see the element \"yyy\" was actually removed leaving the last element empty, whereas the element \"7\" was logically removed leaving the last element unchanged. </p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 0, "creation_date": 1495647096, "post_id": 44165052, "comment_id": 75346527, "body": "m_functions and m_memberValue are global variables, not members. <a href=\"http://www.learncpp.com/cpp-tutorial/82-classes-and-class-members/\" rel=\"nofollow noreferrer\">learncpp.com/cpp-tutorial/82-classes-and-class-members</a>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 1, "creation_date": 1495647236, "post_id": 44165052, "comment_id": 75346601, "body": "@GiulioFranco Where did you get that from? They&#39;re member variables. The indentation probably tripped you up."}, {"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495647402, "post_id": 44165052, "comment_id": 75346669, "body": "Code pasting in SO is a pain. Should be clearer now. And seriosly cpp tutorial?"}, {"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1496414863, "post_id": 44165052, "comment_id": 75667313, "body": "@Rakete1111 you&#39;re right"}, {"owner": {"reputation": 2876, "user_id": 2653222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e1982d6681fda864de3c34a35807984?s=128&d=identicon&r=PG", "display_name": "Giulio Franco", "link": "https://stackoverflow.com/users/2653222/giulio-franco"}, "edited": false, "score": 0, "creation_date": 1496415012, "post_id": 44165052, "comment_id": 75667414, "body": "@Roest I&#39;ve seen questions from people with any kind of preparation. Since I thought they were statics, I thought you had misunderstood something about the syntax, and gave you the tutorial so that you could clarify. Don&#39;t get offended by that. Even if you were a newbie, my intention was not to offend."}], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495649153, "post_id": 44165585, "comment_id": 75347645, "body": "Ah thanks. Quickly checked it out. It is working with creating the objects with new and pushing the pointer to the vector"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495649272, "post_id": 44165585, "comment_id": 75347722, "body": "@Roest That&#39;s a bad idea. You should create the elements directly into the vector using <code>emplace_back</code>, without any pointers and manual memory allocation."}, {"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495649742, "post_id": 44165585, "comment_id": 75348004, "body": "Ok understandable but here is some fun new bug. task1: -572662307 task2: 42 when constructing the vector this way vector&lt;MyClass&gt;objects; \tobjects.emplace_back(); \tobjects.emplace_back();  \tobjects[0].callFunc( string( &quot;Task1&quot; ) ); \tobjects[1].callFunc( string( &quot;Task2&quot; ) );"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495653417, "post_id": 44165585, "comment_id": 75349773, "body": "@Roest That&#39;s weird, it works for me and should. I don&#39;t see anything wrong with it..."}, {"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495653566, "post_id": 44165585, "comment_id": 75349856, "body": "it seems anything that reorganizes the vector messes up the references as well, if I do it with 5 objects, the first 4 are messed up and the 5th is ok, if I do a reserve( 5 ) before, all 5 are ok"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495653848, "post_id": 44165585, "comment_id": 75349987, "body": "@Roest Yes, you&#39;re absolutely right! The objects get another address, and so that&#39;s undefined behavior trying to call the lambda :)"}, {"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495653970, "post_id": 44165585, "comment_id": 75350065, "body": "Too bad that kills that approach entirely."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "edited": false, "score": 0, "creation_date": 1495654049, "post_id": 44165585, "comment_id": 75350101, "body": "@Roest I found it weird that you used a <code>std::function</code>. Why don&#39;t you use a function pointer, and call that? Then you&#39;ll have no problems with reallocations :)"}, {"owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1495656482, "post_id": 44165585, "comment_id": 75351285, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/145067/discussion-between-roest-and-rakete1111\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 2, "last_activity_date": 1495648955, "creation_date": 1495648955, "answer_id": 44165585, "question_id": 44165052, "link": "https://stackoverflow.com/questions/44165052/lambda-function-to-call-member-function-that-has-access-to-class-members/44165585#44165585", "title": "Lambda function to call member function that has access to class members", "body": "<p>When you initialize <code>object1</code> and <code>object2</code>, <code>m_functions</code> contains lambdas that contain a reference to <code>this</code>. Everything ok until now. But then when you push the objects into the <code>std::vector</code>, <code>m_functions</code> also gets copied, along with the reference to the original objects!</p>\n\n<p>When you call <code>callFunc</code> on each the vector element, the <code>m_memberValue</code> of the vector elements is updated, but then <code>task1</code> (and <code>task2</code>) from the original objects, <code>object1</code> and <code>object2</code>, are called. Because you never called <code>callFunc</code> on <code>object1</code> or <code>object2</code>, <code>m_memberValue</code> is <code>0</code>.</p>\n"}], "owner": {"reputation": 780, "user_id": 1563275, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65d183d019e6ab825518b49467e348c9?s=128&d=identicon&r=PG", "display_name": "Roest", "link": "https://stackoverflow.com/users/1563275/roest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 0, "accepted_answer_id": 44165585, "answer_count": 1, "score": 1, "last_activity_date": 1495652722, "creation_date": 1495646880, "last_edit_date": 1592644375, "question_id": 44165052, "link": "https://stackoverflow.com/questions/44165052/lambda-function-to-call-member-function-that-has-access-to-class-members", "title": "Lambda function to call member function that has access to class members", "body": "<p>Asked this before but didn't get an answer. Cleaned up the example code and removed any Qt. Now what I want to achieve is a function that gets called with a command string and branches to the appropriate function, instead of having something like</p>\n<pre><code>if ( str == &quot;Task1&quot; ) task1();  // QString if anyone wonders about the == :)\nelse if( str == &quot;Task2&quot; ) ) task2();\n// and so on\n</code></pre>\n<p>I want to put the call functions in a has and call them with a simple hash lookup. It works as it is calling the function but it seems it doesn't have member access. The below code prints out</p>\n<blockquote>\n<p>task1: 0</p>\n<p>task2: 0</p>\n</blockquote>\n<p>So is that the expected behavior?</p>\n<p>If yes, how can I get it to work?</p>\n<pre><code>#include &quot;stdafx.h&quot;\n\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct MyClass\n{\n    MyClass() {\n        m_functions.insert( pair&lt;string, function&lt;void()&gt; &gt;( string( &quot;Task1&quot; ), function&lt;void()&gt;( [this]() { task1(); } ) ) );\n        m_functions.insert( pair&lt;string, function&lt;void()&gt; &gt;( string( &quot;Task2&quot; ), function&lt;void()&gt;( [this]() { task2(); } ) ) );\n    }\n\n    map&lt;string, function&lt;void()&gt; &gt;m_functions;\n    int m_memberValue = 0;\n\n    void callFunc( string key )\n    {\n        m_memberValue = 42;\n        auto func = m_functions.find( key );\n        if ( func != m_functions.end() )\n        {\n            func-&gt;second();\n        }\n    }\n\n    void task1()\n    {\n        cout &lt;&lt; &quot;task1: &quot; &lt;&lt; m_memberValue &lt;&lt; endl;\n    }\n\n    void task2()\n    {\n        cout &lt;&lt; &quot;task2: &quot;  &lt;&lt; m_memberValue &lt;&lt; endl;\n    }\n\n};\n\n\nint main()\n{\n    MyClass object1;\n    MyClass object2;\n    vector&lt;MyClass&gt;objects;\n    objects.push_back( object1 );\n    objects.push_back( object2 );\n\n    objects[0].callFunc( string( &quot;Task1&quot; ) );\n    objects[1].callFunc( string( &quot;Task2&quot; ) );\n    string str;\n    getline( cin, str );\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1495646809, "post_id": 44164968, "comment_id": 75346364, "body": "Standard output is buffered."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495646899, "post_id": 44164968, "comment_id": 75346411, "body": "If you had read the tag descriptions, it should have been obvious that <code>paradox</code> is not an appropriate tag for this question."}, {"owner": {"reputation": 101, "user_id": 5721779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa5017e7e2a24b8f8e11bed5080e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Indroneil Kanungo", "link": "https://stackoverflow.com/users/5721779/indroneil-kanungo"}, "edited": false, "score": 0, "creation_date": 1495646941, "post_id": 44164968, "comment_id": 75346434, "body": "I am sorry for that."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495647149, "post_id": 44164968, "comment_id": 75346557, "body": "@IndroneilKanungo Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 1, "creation_date": 1495647281, "post_id": 44164968, "comment_id": 75346625, "body": "By the way, in general it&#39;s a good idea to try to avoid busy-wait loops if possible.  You probably want to use <code>std::this_thread::sleep_for(std::chrono::milliseconds{100});</code>&zwnj;&#8203;.  Or, maybe use <code>std::this_thread::sleep_until()</code> with times incremented from an initial measurement, if you don&#39;t want processing time for the character output to start skewing the intervals."}, {"owner": {"reputation": 101, "user_id": 5721779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa5017e7e2a24b8f8e11bed5080e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Indroneil Kanungo", "link": "https://stackoverflow.com/users/5721779/indroneil-kanungo"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1495647526, "post_id": 44164968, "comment_id": 75346734, "body": "@DanielSchepler That works perfectly! Thank you."}, {"owner": {"reputation": 101, "user_id": 5721779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa5017e7e2a24b8f8e11bed5080e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Indroneil Kanungo", "link": "https://stackoverflow.com/users/5721779/indroneil-kanungo"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495647537, "post_id": 44164968, "comment_id": 75346741, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 thank you :)"}], "owner": {"reputation": 101, "user_id": 5721779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4aa5017e7e2a24b8f8e11bed5080e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Indroneil Kanungo", "link": "https://stackoverflow.com/users/5721779/indroneil-kanungo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1495646857, "answer_count": 0, "score": 0, "last_activity_date": 1495647022, "creation_date": 1495646588, "last_edit_date": 1495646914, "question_id": 44164968, "link": "https://stackoverflow.com/questions/44164968/need-help-in-debugging-this-apparent-paradox-in-c", "closed_reason": "Duplicate", "title": "Need help in debugging this apparent paradox in C++", "body": "<p>So I was trying to write a function that prints out a string letter by letter with a 100 ms time interval between each letter. (Please don't ask me why). This is what I have written so far.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\nvoid wait(int ms){\n\n    clock_t begin = clock(), end;\n    double t;\n\n    while(true){\n        end = clock();\n        t=double(end - begin) / CLOCKS_PER_SEC;\n        if(t&gt;=(double) ms/1000)\n            break;\n    }\n\n    return;\n\n}\n\nvoid display_dramatically(std::string x) {\n    for(int i=0;i&lt;x.size();++i) {\n        std::cout&lt;&lt;x[i]&lt;&lt;\"\\n\";\n        wait(100);\n    }   \n}\n</code></pre>\n\n<p>What's extremely weird is that it is only when I print a \"\\n\" after x[i] that this function works. But of course then every character is also in a new line. When I remove that \"\\n\", the program just waits for 100*(number of characters in string) milliseconds, and then prints out the whole string at once. This does not make any sense to me. Even the wait function is working perfectly. How can the presence of a newline command affect the program in this way?</p>\n"}, {"tags": ["c++", "gdal", "dev-c++"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1495647817, "post_id": 44164858, "comment_id": 75346878, "body": "How is this question related to the IDE you&#39;re using?"}, {"owner": {"reputation": 45, "user_id": 3543535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001528491784/picture?type=large", "display_name": "FelipeBrubeck", "link": "https://stackoverflow.com/users/3543535/felipebrubeck"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1495715352, "post_id": 44164858, "comment_id": 75375110, "body": "I&#39;m relatively new to some aspects of C programming, and have been seeing that some people have issues with one IDE or another while using this library, so I&#39;m just specifying. But it seems it doesn&#39;t have to do with the IDE."}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 5764282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b16fe337d11b30cbdb5a4817727761?s=128&d=identicon&r=PG", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/5764282/khouri-giordano"}, "is_accepted": false, "score": 0, "last_activity_date": 1495649822, "creation_date": 1495649822, "answer_id": 44165851, "question_id": 44164858, "link": "https://stackoverflow.com/questions/44164858/gdal201-dll-is-missing-error-on-dev-c/44165851#44165851", "title": "gdal201.dll is missing error on dev-c++", "body": "<p>Usually I copy private DLLs to the output folder of the project, i.e. the same folder as the executable. For a commercial application, you may want to install the DLL, let the OS handle the management of it and use the Assemblies Manifest to help the loader find it.</p>\n"}, {"tags": [], "owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "is_accepted": true, "score": 0, "last_activity_date": 1495650855, "creation_date": 1495650855, "answer_id": 44166150, "question_id": 44164858, "link": "https://stackoverflow.com/questions/44164858/gdal201-dll-is-missing-error-on-dev-c/44166150#44166150", "title": "gdal201.dll is missing error on dev-c++", "body": "<p>You need the DLL file(s) to be present either in the same directory as the executable, or in your <code>Path</code> variable for the system to be able to find them.  I personally prefer setting <code>Path</code>.  You might consider either adding <code>GDAL_DIR\\bin</code> to your permanent <code>Path</code> by editing system or user environment variables, or else create a small batch file on the desktop which adds the directory to <code>Path</code> then starts <code>devenv.exe</code> if you need to manage several incompatible development environments for different projects.</p>\n\n<p>(This has several advantages in my experience over copying the DLL files to the same directory as the executable: It's easier to manage dependencies by including all the necessary directories, as opposed to manually tracking down all the recursive dependencies.  It's also easier to manage updates of the DLLs if you can just update the GDAL installation directory, or update <code>Path</code> or the batch file to a newer GDAL installation directory, rather than having to track down all the places you've copied the DLLs to or having to manage post-build scripts to copy the DLLs every time.)</p>\n\n<p>(Of course, when it comes time to create a self-contained installer, it's going to be easiest to copy the dependent DLLs to the installer image directory before building the installer.  Then something like CMake's <code>BundleUtilities</code> module can help in tracking down what DLLs need to be included.)</p>\n"}], "owner": {"reputation": 45, "user_id": 3543535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001528491784/picture?type=large", "display_name": "FelipeBrubeck", "link": "https://stackoverflow.com/users/3543535/felipebrubeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 44166150, "answer_count": 2, "score": 0, "last_activity_date": 1495650855, "creation_date": 1495646173, "question_id": 44164858, "link": "https://stackoverflow.com/questions/44164858/gdal201-dll-is-missing-error-on-dev-c", "title": "gdal201.dll is missing error on dev-c++", "body": "<p>I'm working on a GIS application in C++ using Dev-C++, and to start for now I'm using the code given in the tutorial in <a href=\"http://www.gdal.org/gdal_tutorial.html\" rel=\"nofollow noreferrer\">http://www.gdal.org/gdal_tutorial.html</a></p>\n\n<p>I got it to compile without errors or warnings, but when I try to run it I get the error \"The program can't start because gdal201.dll is missing from your computer. Try reinstalling the program to fix this problem.\"\nI was looking at another question with the similar problem and tried to search this dll on internet, but couldn't find it anywhere, and somebody mentioned to ignore the error, but I don't know how to do that.</p>\n\n<p>Can anybody help me on what to do here? </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["php", "c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8016859"}, "edited": false, "score": 1, "creation_date": 1495646329, "post_id": 44164840, "comment_id": 75346109, "body": "were is your html"}, {"owner": {"reputation": 177, "user_id": 5062329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2oW0.png?s=128&g=1", "display_name": "Michael Fuller", "link": "https://stackoverflow.com/users/5062329/michael-fuller"}, "edited": false, "score": 2, "creation_date": 1495646350, "post_id": 44164840, "comment_id": 75346123, "body": "Why not just use a class to apply your style?  Then you could just do this:   if($(this).is(&#39;.withStrike&#39;)) {$(this).removeClass(&#39;withStrike&#39;);} else {$(this).addClass(&#39;withStrike&#39;)}"}, {"owner": {"reputation": 1923, "user_id": 1336678, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6267999b774a82952cd62fb1c9b859fc?s=128&d=identicon&r=PG&f=1", "display_name": "Our_Benefactors", "link": "https://stackoverflow.com/users/1336678/our-benefactors"}, "edited": false, "score": 2, "creation_date": 1495646394, "post_id": 44164840, "comment_id": 75346142, "body": "even better, use toggleClass(&#39;className&#39;) and save a few lines"}, {"owner": {"reputation": 392, "user_id": 7994741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/612fb13154c4822fe3b08439c838dd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Sampaio", "link": "https://stackoverflow.com/users/7994741/patrick-sampaio"}, "edited": false, "score": 0, "creation_date": 1495646438, "post_id": 44164840, "comment_id": 75346176, "body": "try to console.log($(this)) and check what will be output"}], "answers": [{"tags": [], "owner": {"reputation": 42804, "user_id": 2181397, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/616931b5c5ba8790a191fa6aea465c65?s=128&d=identicon&r=PG", "display_name": "brk", "link": "https://stackoverflow.com/users/2181397/brk"}, "is_accepted": false, "score": 4, "last_activity_date": 1495646819, "last_edit_date": 1495646819, "creation_date": 1495646368, "answer_id": 44164910, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer/44164910#44164910", "title": "JQUERY. list apprenticer", "body": "<p>Use <a href=\"http://api.jquery.com/toggleclass/\" rel=\"nofollow noreferrer\"><strong>toggleClass</strong></a> to add or remove class from the element.This will reduce the number of lines in your code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  $(\"#theUL\").on('click', 'li', function() {\r\n    $(this).toggleClass('colorText')\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.colorText {\r\n  text-decoration: line-through;\r\n  color: green\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;ul id=\"theUL\"&gt;\r\n  &lt;li&gt;1&lt;/li&gt;\r\n  &lt;li&gt;2&lt;/li&gt;\r\n  &lt;li&gt;3&lt;/li&gt;\r\n  &lt;li&gt;4&lt;/li&gt;\r\n  &lt;li&gt;5&lt;/li&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 9141, "user_id": 2652759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb993f3435e19380a9ac6c688310a261?s=128&d=identicon&r=PG", "display_name": "quirimmo", "link": "https://stackoverflow.com/users/2652759/quirimmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646476, "creation_date": 1495646476, "answer_id": 44164941, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer/44164941#44164941", "title": "JQUERY. list apprenticer", "body": "<p>Your code is not working because when you get the CSS property with jQuery of the text-decoration, it returns also the color. If you want to use this property, you should add the check for the color too in the if. This should do what you are looking for:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  $(\"#theUL\").on('click', 'li', function () {\r\n    if ($(this).css('text-decoration') == 'line-through solid rgb(0, 0, 0)') {\r\n      $(this).css('text-decoration', 'none');\r\n    } else {\r\n      $(this).css('text-decoration', 'line-through');\r\n    }\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;ul id=\"theUL\"&gt;\r\n  &lt;li&gt;First&lt;/li&gt;\r\n  &lt;li&gt;Second&lt;/li&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>By the way you can do it easier and cleaner using CSS classes instead of changing styles in this way</p>\n"}, {"comments": [{"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1495647915, "post_id": 44164948, "comment_id": 75346938, "body": "This code won&#39;t work because the <code>text-decoration</code> property never is exactly <code>line-through</code>."}], "tags": [], "owner": {"reputation": 392, "user_id": 7994741, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/612fb13154c4822fe3b08439c838dd9a?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Sampaio", "link": "https://stackoverflow.com/users/7994741/patrick-sampaio"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646518, "creation_date": 1495646518, "answer_id": 44164948, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer/44164948#44164948", "title": "JQUERY. list apprenticer", "body": "<pre><code>$(document).ready(function() {\n  $(\"#theUL li\").on('click', function () {\n    if ($(this).css('text-decoration') == 'line-through') {\n      $(this).css('text-decoration', 'none');\n    } else {\n      $(this).css('text-decoration', 'line-through');\n    }\n  });\n});\n</code></pre>\n\n<p>The this in this context it's the UL, if you use the code above, you make sure that it's the li the this in the context</p>\n"}, {"tags": [], "owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646611, "creation_date": 1495646611, "answer_id": 44164976, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer/44164976#44164976", "title": "JQUERY. list apprenticer", "body": "<p>Two things:</p>\n\n<ol>\n<li>Change your selector to access the <code>li</code> elements directly.</li>\n<li>Your test for <code>line-through</code> will never be met because the property contains more than just that.</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  $(\"#theUL &gt; li\").on('click', function () {\r\n    // The `text-decoration` CSS property contains more than just 'line-through'\r\n    console.log($(this).css('text-decoration'));\r\n  \r\n    if ($(this).css('text-decoration') == 'line-through solid rgb(0, 0, 0)') {\r\n      $(this).css('text-decoration', 'none');\r\n    } else {\r\n      $(this).css('text-decoration', 'line-through');\r\n    }\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;ul id=\"theUL\"&gt;\r\n  &lt;li&gt;Item 1&lt;/li&gt;\r\n  &lt;li&gt;Item 2&lt;/li&gt;\r\n  &lt;li&gt;Item 3&lt;/li&gt;  \r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646696, "creation_date": 1495646696, "answer_id": 44164994, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer/44164994#44164994", "title": "JQUERY. list apprenticer", "body": "<p>You will want to change your if-statement condition to:</p>\n\n<pre><code>if ($(this).css('text-decoration') == 'line-through solid rgb(0, 0, 0)') {\n    ...\n}\n</code></pre>\n\n<p>Setting the CSS using <code>$(this).css('text-decoration', 'line-through')</code> will do some things in the background as default CSS items are still set, such as the solid line and color.</p>\n"}], "owner": {"reputation": 7, "user_id": 8060872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdb86bcc7a47d13e5f2b7004b798b38?s=128&d=identicon&r=PG&f=1", "display_name": "thegreatestofthemall3", "link": "https://stackoverflow.com/users/8060872/thegreatestofthemall3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1495914155, "creation_date": 1495646122, "last_edit_date": 1495914155, "question_id": 44164840, "link": "https://stackoverflow.com/questions/44164840/jquery-list-apprenticer", "title": "JQUERY. list apprenticer", "body": "<p>But i can't seem to get it to work..</p>\n\n<p>Here is my code:</p>\n\n<pre><code>$(document).ready(function() {\n  $(\"#theUL\").on('click', 'li', function () {\n    if ($(this).css('textDecoration') == 'lineunder') {\n      $(this).css('textDecoration', 'none');\n    } else {\n      $(this).css('textDecoration', 'lineunder');\n    }\n  });\n});\n</code></pre>\n"}, {"tags": ["c++", "canvas", "vcl", "drawtext"], "comments": [{"owner": {"reputation": 786, "user_id": 5764282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b16fe337d11b30cbdb5a4817727761?s=128&d=identicon&r=PG", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/5764282/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1495650134, "post_id": 44164804, "comment_id": 75348193, "body": "All of the Win32 functions return an error flag (with the actual error code available from <code>GetLastError()</code>). I don&#39;t see you checking any of them."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 786, "user_id": 5764282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b16fe337d11b30cbdb5a4817727761?s=128&d=identicon&r=PG", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/5764282/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1496952221, "post_id": 44164804, "comment_id": 75886796, "body": "@KhouriGiordano: not <i>ALL</i> Win32 functions do. In particular, GDI functions, like the ones the OP is using, do not report errors via <code>GetLastError()</code>.  Unless a function&#39;s documentation specifically states <code>GetLastError()</code> is used, you can&#39;t assume it is."}], "owner": {"reputation": 25, "user_id": 7570345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1ebb905c931acbd969f34813f3e0e8?s=128&d=identicon&r=PG&f=1", "display_name": "user7570345", "link": "https://stackoverflow.com/users/7570345/user7570345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495646001, "creation_date": 1495646001, "last_edit_date": 1592644375, "question_id": 44164804, "link": "https://stackoverflow.com/questions/44164804/how-to-draw-a-text-with-orientation-center-align-ment-and-wordwrapvcl-c", "title": "how to Draw a text with orientation, center align ment and wordwrap(VCL C++)?", "body": "<p>I am trying to draw a text on paint box canvas with orientation = 900, centre alignment and word-wrap the text in Canvas rectangle. Text should look like below image.</p>\n<p><a href=\"https://i.stack.imgur.com/zz7ot.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zz7ot.jpg\" alt=\"Text on canvas should draw like this\" /></a></p>\n<p>I am using Embarcadero XE5 c++ IDE and I tried like below example, but it isn't working.</p>\n<pre><code>void __fastcall TForm1::PBoxPaint(TObject *Sender)\n{\n   TRect R , DrawRect ; \n   unsigned int    DrawFlags = 0;\n   TDrawTextParams DrawParams ;        \n            \n   PBox-&gt;Font-&gt;Orientation = 900 ;\n   PBox-&gt;Canvas-&gt;Rectangle(PBox-&gt;ClientRect) ;\n   String S = L&quot;Angualar Text&quot; ;\n          R = PBox-&gt;ClientRect ;\n   InflateRect(R,-2,-2) ;\n   DrawRect = R ;\n\n   DrawFlags = DT_END_ELLIPSIS | DT_NOPREFIX | DT_WORDBREAK | DT_EDITCONTROL | DT_CENTER ;\n   \n   DrawText(PBox-&gt;Canvas-&gt;Handle, S.c_str() , -1 , &amp;DrawRect, DrawFlags | DT_CALCRECT) ;\n   DrawRect.Right = R.Right;\n\n   if (DrawRect.Bottom &lt; R.Bottom)\n   {\n      OffsetRect( DrawRect, 0, ( R.Bottom - DrawRect.Bottom ) / 2 );\n   }\n   else\n   {\n      DrawRect.Bottom = R.Bottom;\n   }\n\n   DrawParams.iTabLength    = 0 ;\n   DrawParams.iLeftMargin   = 0 ;\n   DrawParams.iRightMargin  = 0 ;\n   DrawParams.uiLengthDrawn = 0 ; \n   DrawParams.cbSize        = sizeof(DrawParams) ;\n\n   DrawTextEx(PBox-&gt;Canvas-&gt;Handle,S.c_str(),-1,&amp;DrawRect,DrawFlags,&amp;DrawParams) ;\n }\n \n</code></pre>\n<p>Can any one please help me to draw a text (like above image) on canvas?\nThank you very much.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1495645643, "post_id": 44164654, "comment_id": 75345731, "body": "<i>&quot;What exactly does adding &quot;3&quot; to the array variable do?&quot;</i> Pointer arithmetics."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1495645851, "post_id": 44164654, "comment_id": 75345835, "body": "Seems like a legitimate question, since series1 is not a pointer.  In this case there is an implicit conversion to a pointer type."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1495645923, "post_id": 44164654, "comment_id": 75345868, "body": "@stark Arguable. Not great of research efforts shown here."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495646392, "post_id": 44164654, "comment_id": 75346139, "body": "Helpful reading: <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a>."}, {"owner": {"reputation": 111, "user_id": 3330623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b0d8e30e494394be5faade7f3e4812?s=128&d=identicon&r=PG&f=1", "display_name": "user3330623", "link": "https://stackoverflow.com/users/3330623/user3330623"}, "edited": false, "score": 0, "creation_date": 1495646503, "post_id": 44164654, "comment_id": 75346210, "body": "A hadn&#39;t heard of the term &quot;pointer adition&quot; yet. I&#39;m assuming that series1 on itself is a pointer to the first element of the array..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495646717, "post_id": 44164654, "comment_id": 75346307, "body": "If you haven&#39;t heard &quot;pointer addition&quot; yet then you definitely need to keep studying your C++ book :)"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1495647051, "post_id": 44164654, "comment_id": 75346492, "body": "Try &quot;pointer arithmetic&quot; instead. In your address bar if the book doesn&#39;t have anything."}, {"owner": {"reputation": 111, "user_id": 3330623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b0d8e30e494394be5faade7f3e4812?s=128&d=identicon&r=PG&f=1", "display_name": "user3330623", "link": "https://stackoverflow.com/users/3330623/user3330623"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495647092, "post_id": 44164654, "comment_id": 75346521, "body": "@BoundaryImposition I forgot it&#39;s an Ebook you&#39;re right. I can&#39;t. Hard to do research on some ambiguous term you&#39;ve never heard of that&#39;s not in you&#39;re study material though..."}, {"owner": {"reputation": 111, "user_id": 3330623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b0d8e30e494394be5faade7f3e4812?s=128&d=identicon&r=PG&f=1", "display_name": "user3330623", "link": "https://stackoverflow.com/users/3330623/user3330623"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1495647143, "post_id": 44164654, "comment_id": 75346552, "body": "@nwp yup did that that now."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1495646756, "last_edit_date": 1495646756, "creation_date": 1495646136, "answer_id": 44164848, "question_id": 44164654, "link": "https://stackoverflow.com/questions/44164654/adding-a-number-to-an-array-variable-in-c/44164848#44164848", "title": "Adding a number to an array variable in c++", "body": "<blockquote>\n  <p>What exactly does adding \"3\" to the array variable do?</p>\n</blockquote>\n\n<p>The array operand decays into a pointer to first element of the array. 3 is added to that pointer, so that the result is a pointer to 3 elements after the first (i.e. the element at index 3), which is immediately outside the bounds of the array. The addition is equivalent to <code>std::end(series1)</code> which would be more idiomatic in my opinion.</p>\n\n<blockquote>\n  <p>I'm assuming that series1 on itself is a pointer to the first element of the array</p>\n</blockquote>\n\n<p>You assume wrong. <code>series1</code> is not a pointer, but an array. However, an id-expression (standardese for the name of the variable) of an array will decay into a pointer in value contexts.</p>\n"}], "owner": {"reputation": 111, "user_id": 3330623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b0d8e30e494394be5faade7f3e4812?s=128&d=identicon&r=PG&f=1", "display_name": "user3330623", "link": "https://stackoverflow.com/users/3330623/user3330623"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1495646873, "accepted_answer_id": 44164848, "answer_count": 1, "score": -1, "last_activity_date": 1495646756, "creation_date": 1495645542, "question_id": 44164654, "link": "https://stackoverflow.com/questions/44164654/adding-a-number-to-an-array-variable-in-c", "closed_reason": "Duplicate", "title": "Adding a number to an array variable in c++", "body": "<p>In the <a href=\"http://www.cplusplus.com/reference/numeric/inner_product/\" rel=\"nofollow noreferrer\">cplusplus</a> page for the inner_product module they gave a code example:</p>\n\n<pre><code>int init = 100;\nint series1[] = {10,20,30};\nint series2[] = {1,2,3};\nstd::cout &lt;&lt; \"using default inner_product: \";\nstd::cout &lt;&lt; std::inner_product(series1,series1+3,series2,init);\nstd::cout &lt;&lt; '\\n';\n</code></pre>\n\n<p>Where I saw them use <code>series1+3</code> when calling the inner_product funtcion.</p>\n\n<p>What exactly does adding \"3\" to the array variable do?</p>\n"}, {"tags": ["c++", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1495644137, "post_id": 44164090, "comment_id": 75344872, "body": "&quot;However, we&#39;ve been told to use pointers instead of arrays for this homework.&quot; Your code is already using pointers, there are no arrays in your shown code. Also what is <code>double maxValue = *the_array[0][0]</code> supposed to do? O_o"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495644321, "post_id": 44164090, "comment_id": 75344977, "body": "To double dereference you need a double pointer as parameter <code>double **the_array</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495647973, "post_id": 44164237, "comment_id": 75346965, "body": "I also took the liberty of fixing the initial value. What if the array contains negative numbers? Initialising <code>max</code> to <code>0</code> will give wrong results there. ...not that we should be encouraging code like this in C++, but homework doesn&#39;t tend to come up with interesting questions, instead of &#39;reinvent <code>&lt;algorithm&gt;</code>.&#39; :("}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8060819"}, "is_accepted": false, "score": 0, "last_activity_date": 1495647909, "last_edit_date": 1495647909, "creation_date": 1495644281, "answer_id": 44164237, "question_id": 44164090, "link": "https://stackoverflow.com/questions/44164090/searching-a-2d-array-with-pointer-arithmetic/44164237#44164237", "title": "Searching a 2D array with pointer arithmetic", "body": "<p>Like this\nYour the_array is really just linear memory of size row * col.</p>\n\n<pre><code>double find_max(double *the_array, int row_size, int col_size)\n{\n    double *iterator = the_array;\n    double *end = the_array + row_size * col_size;\n    double max = DBL_MIN;\n\n    while (iterator &lt; end) {\n        if (*iterator &gt; max)\n            max = *iterator;\n\n        ++iterator;\n    }\n\n    return max;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 7553642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483d88e3655fec3572f40988e343173e?s=128&d=identicon&r=PG&f=1", "display_name": "Lynxy", "link": "https://stackoverflow.com/users/7553642/lynxy"}, "is_accepted": false, "score": 0, "last_activity_date": 1495646011, "creation_date": 1495646011, "answer_id": 44164811, "question_id": 44164090, "link": "https://stackoverflow.com/questions/44164090/searching-a-2d-array-with-pointer-arithmetic/44164811#44164811", "title": "Searching a 2D array with pointer arithmetic", "body": "<p>the_array should be a pointer of pointer on double.I mean that:\n    <code>double find_max(double **the_array, int row_size, int col_size)</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8060666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e9c6c368bf5db6df0353ed13799c83?s=128&d=identicon&r=PG&f=1", "display_name": "niqi", "link": "https://stackoverflow.com/users/8060666/niqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495647909, "creation_date": 1495643811, "last_edit_date": 1495644219, "question_id": 44164090, "link": "https://stackoverflow.com/questions/44164090/searching-a-2d-array-with-pointer-arithmetic", "title": "Searching a 2D array with pointer arithmetic", "body": "<p>For a homework assignment, we've been been told to write functions like sum, find_max, and find_min that operate on a 2D matrix. I'd use something like this to find the maximum value normally.</p>\n\n<pre><code>double find_max(double *the_array, int row_size, int col_size) {\n    double maxValue = *the_array[0][0];\n    for (int i = 0; i &lt; col_size; i++) {\n         for (int j = 0; j &lt; row_size; j++) {\n             if (*the_array[i][j] &gt; maxValue) {\n                  maxValue = *the_array[i][j];\n             }\n         }\n     }\n }\n</code></pre>\n\n<p>However, we've been told to use pointers instead of arrays for this homework. I'm guessing that means I need to use pointer arithmetic to go through the array, but I'm not sure how to do that. What sort of loop do I use? How do I know when to tell it to stop?</p>\n"}, {"tags": ["c++", "explicit", "explicit-constructor"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1495643821, "post_id": 44164010, "comment_id": 75344677, "body": "That&#39;s not what the <a href=\"http://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow noreferrer\"><code>explicit</code></a> specifier is about - it only prevents <a href=\"http://en.cppreference.com/w/cpp/language/converting_constructor\" rel=\"nofollow noreferrer\"><i>converting constructors</i></a>, e.g.: in your case that would be <code>MPSList mps = n;</code>"}, {"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1495645720, "post_id": 44164010, "comment_id": 75345773, "body": "maybe use delete keyword along your example to delete <code>double</code> and <code>float</code> versions of constructor? Idk if it would work, but give it a try!"}], "answers": [{"tags": [], "owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "is_accepted": false, "score": 6, "last_activity_date": 1495643967, "creation_date": 1495643967, "answer_id": 44164126, "question_id": 44164010, "link": "https://stackoverflow.com/questions/44164010/incorrect-use-of-explicit-keyword-in-c/44164126#44164126", "title": "Incorrect use of explicit keyword in c++", "body": "<p>Explicit stops the compiler from doing something like this:</p>\n\n<pre><code>void fn(MPSNode x); // or void fn(const MPSNode&amp; x)\nfn(3.0);\n</code></pre>\n\n<p>The above snippet would compile if you didn't use <code>explicit</code>, and the line that calls <code>fn</code> is equivalent to:</p>\n\n<pre><code>fn(MPSNode(3.0));\n</code></pre>\n\n<p>This is an <em>implicit conversion</em> from <code>double</code> to <code>MPSNode</code>. Narrowing conversions have relatively little to do with it.</p>\n\n<p>However, you will find that the following will not compile:</p>\n\n<pre><code>MPSList mps{n};\n</code></pre>\n\n<p>Use uniform initialisation syntax if you want to catch problems like that.</p>\n"}], "owner": {"reputation": 1831, "user_id": 4178510, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b5a159088e6454c73cc2b805ba92afa7?s=128&d=identicon&r=PG&f=1", "display_name": "letsBeePolite", "link": "https://stackoverflow.com/users/4178510/letsbeepolite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495643967, "creation_date": 1495643615, "question_id": 44164010, "link": "https://stackoverflow.com/questions/44164010/incorrect-use-of-explicit-keyword-in-c", "title": "Incorrect use of explicit keyword in c++", "body": "<p>I wanted to create a class MPSList where constructor has an explicit keyword associated with it.</p>\n\n<p>Following is the bare minimal code:</p>\n\n<pre><code>class MPSList {                                                                           \npublic:                                                                                   \n    explicit MPSList(int n) : n_(n) {                                                     \n        mpsL.resize(n_, std::vector&lt;MPSNode&gt;{});                                          \n        std::cout &lt;&lt; mpsL.size() &lt;&lt; std::endl;                                            \n     }\n\nprivate:\n    struct MPSNode {                                                                      \n        double s_;                                                                        \n    };\n\n    std::vector&lt;std::vector&lt;MPSNode&gt;&gt; mpsL;\n    int n_ = -1;\n}; \n</code></pre>\n\n<p>CPP file that creates the object of MPSList class.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"MPSList.hpp\"\n\nint main() {\n    double n = 10.9;\n    MPSList mps(n);    \n}\n</code></pre>\n\n<p>On compiling the above CPP file, I had expected to see an error in initializing the object. As I am passing a double whereas the constructor is explicitly expecting an int.</p>\n\n<p>Command to compile:</p>\n\n<pre><code>g++ -std=c++14 -I../include test.cpp \n./a.out\n</code></pre>\n"}, {"tags": ["c++", "screenshot", "sdl-2"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1495650065, "post_id": 44163947, "comment_id": 75348155, "body": "Does <a href=\"https://wiki.libsdl.org/SDL_RenderReadPixels\" rel=\"nofollow noreferrer\"><code>SDL_RenderReadPixels()</code></a> work?"}, {"owner": {"reputation": 85, "user_id": 7322200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/31c186b3ddfbcc8867daea347c034d00?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralMyxtaR", "link": "https://stackoverflow.com/users/7322200/admiralmyxtar"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1495650722, "post_id": 44163947, "comment_id": 75348487, "body": "@genpfault it produces the squished inside a corner image (since I pass logical size as width and height), screenshot&#39;s resolution is still 1920x1080"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1495692199, "post_id": 44163947, "comment_id": 75361869, "body": "Logical size only used to transform coordinates you pass. After rasterisation it no longer exists. What result do you expect (and why you need it)? You can transform window coordinates to logical via simple scale if you have to."}], "owner": {"reputation": 85, "user_id": 7322200, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/31c186b3ddfbcc8867daea347c034d00?s=128&d=identicon&r=PG&f=1", "display_name": "AdmiralMyxtaR", "link": "https://stackoverflow.com/users/7322200/admiralmyxtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495650006, "creation_date": 1495643407, "last_edit_date": 1495650006, "question_id": 44163947, "link": "https://stackoverflow.com/questions/44163947/how-to-make-a-screenshot-with-changed-render-logical-size-in-sdl", "title": "How to make a screenshot with changed render logical size in SDL?", "body": "<p>You can set rendering resolution independently from window/fullscreen size with SDL_RenderSetLogicalSize, but all the methods of taking a screenshot gave either a black image, an image with exactly how it looks on screen (even with outside overlays, like RivaTuner Statistics Server), or the same, squished into left-upper corner of the screen. All screenshot are having window resolution instead of set rendering resolution. How to save a copy of viewport fresh after rendering into a file, so it would have set rendering resolution and won't have outside overlays?</p>\n"}, {"tags": ["c++", "c++11", "precision", "arbitrary-precision"], "comments": [{"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 2, "creation_date": 1495643219, "post_id": 44163811, "comment_id": 75344312, "body": "You could use the <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/multiprecision/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost.Multiprecision</a> library; it&#39;s capable of arbitrary-precision integer and floating-point arithmetic."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 1, "creation_date": 1495643459, "post_id": 44163811, "comment_id": 75344443, "body": "@JasonR In C++ there isn&#39;t a simpler solution? I&#39;m focused on other now and I I would not study a library for a single operation Unless it is the only way"}, {"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 1, "creation_date": 1495643470, "post_id": 44163811, "comment_id": 75344450, "body": "You have not specified what precision you need"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 3, "creation_date": 1495643598, "post_id": 44163811, "comment_id": 75344534, "body": "Another thing to keep in mind: you said that the <code>size_t</code> represents the dimension of an array, but you&#39;re concerned about loss of precision when converting it to a <code>double</code>. A <code>double</code> can hold 53-bit integers without any loss of precision. Do you really need to support values larger than <code>2^53 - 1</code>?"}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1495644057, "post_id": 44163811, "comment_id": 75344828, "body": "@JasonR It could be precision loss when you convert the unsigned long in double (because the unsigned long value could  be larger than maximum double)  The unsigned long value is the sum of the features (positives values). The samples of feature can be 1000000 or more and the sum of values of the features can be enourmus. The max value of a feature is 2000 thus: 2000*1000000 or more"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1495644509, "post_id": 44163811, "comment_id": 75345073, "body": "@Umbert: The maxium unsigned long value is ~2^64, while the maximum double is ~2^300. There is no issue with ranges."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 3, "creation_date": 1495644534, "post_id": 44163811, "comment_id": 75345080, "body": "2000*1000000 is only a ten digit number.  2^53 is a sixteen digit number.  You&#39;ve got a ways to go before you have to worry about losing precision."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1495644812, "post_id": 44163811, "comment_id": 75345242, "body": "@MooingDuck  I know that the maximum length of types of C ++ isn&#39;t standard. What guarantees that it always happens that a double is larger than an unsigned long?"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 2, "creation_date": 1495644927, "post_id": 44163811, "comment_id": 75345306, "body": "Unless you&#39;re working on an exotic platform, a <code>double</code> will always be defined by the IEEE-754 standard, so its range is explicitly specified. Based on that and the description of what the <code>size_t</code> value that you have represents, you shouldn&#39;t need to worry about precision loss when converting to a <code>double</code>. I would wager that it will be a long time before you&#39;ll ever have an array with a dimension that is comparable to <code>2^53</code> in size."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1495645018, "post_id": 44163811, "comment_id": 75345358, "body": "@jameslarge and in general on any compiler and any system the maximum double of C++ have 16 digits?"}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1495647179, "post_id": 44163811, "comment_id": 75346570, "body": "@JasonR and james are right. double is 8 byte almost everywhere, and this is ok in my case. Thanks"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1495806248, "post_id": 44163811, "comment_id": 75418949, "body": "@Umbert, The vast majority of hardware and software floating point systems conform to the <a href=\"https://en.wikipedia.org/wiki/IEEE_floating_point\" rel=\"nofollow noreferrer\">IEEE 754 standard</a>.  In C/C++ &quot;float&quot; usually means the IEEE 754 binary32 format, and &quot;double&quot; usually means the binary64 format, which gives you your 16 digits of precision.  If your system supports &quot;long double&quot;, it might not be a non-IEEE format, but it almost certainly will have more than 16 digits of precision."}], "answers": [{"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 4, "last_activity_date": 1495643941, "last_edit_date": 1495643941, "creation_date": 1495643444, "answer_id": 44163956, "question_id": 44163811, "link": "https://stackoverflow.com/questions/44163811/divide-an-unsigned-long-for-a-size-t-and-assign-the-result-to-a-double/44163956#44163956", "title": "Divide an unsigned long for a size_t and assign the result to a double", "body": "<p>You could try to use <a href=\"http://en.cppreference.com/w/cpp/numeric/math/div\" rel=\"nofollow noreferrer\"><code>std::div</code></a></p>\n\n<p>Along the lines</p>\n\n<pre><code>auto dv = std::div(feature_sum.at(index), mapped_samples.size());\n\ndouble mean = dv.quot + dv.rem / double(mapped_samples.size());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1495643804, "post_id": 44163972, "comment_id": 75344667, "body": "same as std::div version"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1495643955, "post_id": 44163972, "comment_id": 75344775, "body": "@SeverinPappadeux, true."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1495643996, "post_id": 44163972, "comment_id": 75344794, "body": "Is this any more precise than the original?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 2, "creation_date": 1495644076, "post_id": 44163972, "comment_id": 75344847, "body": "The usage of <code>1.0*v2&#47;mapped_samples.size()</code> shows that you&#39;re pretty confident on knowing your operator preferences etc. Safer and more readable is <code>double(v2)&#47;mapped_samples.size()</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1495645217, "post_id": 44163972, "comment_id": 75345474, "body": "@MooingDuck, yes. You are more likely to lose precision when converting <code>feature_sum.at(index)</code> to <code>double</code> than converting <code>v2</code> to <code>double</code>."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1495645864, "post_id": 44163972, "comment_id": 75345841, "body": "@RSahu I disagree, see my answer."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1495648797, "post_id": 44163972, "comment_id": 75347427, "body": "@Walter, I took a cursory glance at your answer but didn&#39;t quite grok it. It sounds like you have dealt with this aspect of floating point numbers more than I have."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1495644180, "last_edit_date": 1495644180, "creation_date": 1495643515, "answer_id": 44163972, "question_id": 44163811, "link": "https://stackoverflow.com/questions/44163811/divide-an-unsigned-long-for-a-size-t-and-assign-the-result-to-a-double/44163972#44163972", "title": "Divide an unsigned long for a size_t and assign the result to a double", "body": "<p>You could use:</p>\n\n<pre><code>// Grab the integral part of the division\nauto v1 = feature_sum.at(index)/mapped_samples.size();\n\n// Grab the remainder of the division\nauto v2 = feature_sum.at(index)%mapped_samples.size();\n\n// Dividing 1.0*v2 is unlikely to lose precision\nmean.at(index) = v1 + static_cast&lt;double&gt;(v2)/mapped_samples.size();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 2, "last_activity_date": 1495645742, "last_edit_date": 1495645742, "creation_date": 1495645202, "answer_id": 44164535, "question_id": 44163811, "link": "https://stackoverflow.com/questions/44163811/divide-an-unsigned-long-for-a-size-t-and-assign-the-result-to-a-double/44164535#44164535", "title": "Divide an unsigned long for a size_t and assign the result to a double", "body": "<p><strong>you cannot do better</strong> (if you want to store the result as a <code>double</code>), than the simple</p>\n\n<pre><code>std::uint64_t x=some_value, y=some_other_value;\nauto mean = double(x)/double(y);\n</code></pre>\n\n<p>because the relative accuracy of the truncated form of the correct result using <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/multiprecision/doc/html/boost_multiprecision/tut/floats/float128.html\" rel=\"nofollow noreferrer\"><code>float128</code></a></p>\n\n<pre><code>auto improved = double(float128(x)/float128(x))\n</code></pre>\n\n<p>is typically the same (for typical input -- there may be rare inputs, where improvement is possible). Both have a relative error dictated by the length of the mantissa for <code>double</code> (53 bits). So the simple answer is: either use a more accurate type than <code>double</code> for your mean or forget about this issue.</p>\n\n<hr>\n\n<p>To see the relative accuracy, let us assume that</p>\n\n<pre><code>x=a*(1+e);   // a=double(x)\ny=b*(1+f);   // b=double(y)\n</code></pre>\n\n<p>where <code>e</code>, <code>f</code> are of the order 2^-53.</p>\n\n<p>Then the 'correct' quotient is to first order in <code>e</code> and <code>f</code></p>\n\n<pre><code>(x/y) = (a/b) * (1 + e - f)\n</code></pre>\n\n<p>Converting this to <code>double</code> incurs another relative error of the order of 2^-53, i.e. of the same order as the the error of <code>(a/b)</code>, the result of the naive</p>\n\n<pre><code>mean = double(x)/double(y).\n</code></pre>\n\n<p>Of course, <code>e</code> and <code>f</code> can conspire to cancel, when more accuracy can be gained by the methods suggested in other answers, but typically the accuracy cannot be improved.</p>\n"}], "owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1449, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1495645742, "creation_date": 1495643024, "last_edit_date": 1495644562, "question_id": 44163811, "link": "https://stackoverflow.com/questions/44163811/divide-an-unsigned-long-for-a-size-t-and-assign-the-result-to-a-double", "title": "Divide an unsigned long for a size_t and assign the result to a double", "body": "<p>I have to divide an unsigned long int  for a size_t (returned from a dimension of a array with size() ) like this:</p>\n\n<pre><code>vector&lt;string&gt; mapped_samples;\nvector&lt;double&gt; mean;\nvector&lt;unsigned long&gt; feature_sum;\n/* elaboration here */\nmean.at(index) = feature_sum.at(index) /mapped_samples.size();\n</code></pre>\n\n<p>but in this way an integer division takes place (I lose the decimal part. That's no good)</p>\n\n<p>Therefore, I can do:</p>\n\n<pre><code> mean.at(index) = feature_sum.at(index) / double(mapped_samples.size());\n</code></pre>\n\n<p>But in this way <code>feature_sum.at(index)</code> is automatically converted (Temporary copy) to <code>double</code> and I could lose precision. How can I tackle the question? I have to use some library?</p>\n\n<p>It could be precision loss when you convert the unsigned long in double (because the unsigned long value could be larger than maximum double) The unsigned long value is the sum of the features (positives values). The samples of feature can be 1000000 or more and the sum of values of the features can be enourmus. The max value of a feature is 2000 thus: 2000*1000000 or more </p>\n\n<p>(I'm using C++11)</p>\n"}, {"tags": ["c++", "c", "cmake", "undefined-reference"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1495644099, "post_id": 44163794, "comment_id": 75344861, "body": "it looks ok on the face of it, except you don&#39;t need the <code>link_directories()</code> line - cmake knows where to find the library target. did you <code>extern &quot;C&quot;</code> the definitions of c functions?"}, {"owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1495650002, "post_id": 44163794, "comment_id": 75348126, "body": "Thanks @RichardHodges. <code>extern &quot;C&quot;</code> was missing. Now everything is working fine. Could you add this as an answer?"}], "owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1495644632, "answer_count": 0, "score": 0, "last_activity_date": 1495643472, "creation_date": 1495642969, "last_edit_date": 1495643472, "question_id": 44163794, "link": "https://stackoverflow.com/questions/44163794/cmake-undefined-reference-to-function", "closed_reason": "Duplicate", "title": "Cmake - Undefined reference to function", "body": "<p>I'm trying to build my application. It's organized as following:</p>\n\n<pre><code>-ClipsCore\n  |-agenda.c\n  |-agenda.h\n  |-envrnmnt.c\n  |-engrnmnt.h\n  |-clips.h  \n  |-....\n-src\n  |-clipsDemo.cpp\n-build\n-CMakeLists.txt\n</code></pre>\n\n<p>Here is my CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.8)\nproject (clipsDemo)\nset(MY_CPP_FILES  src/clipsDemo.cpp)\nfile(GLOB CLIPS_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore/*.c)\ninclude_directories(${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore)\nlink_directories(${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore)\nadd_library(clipslib ${CLIPS_SRC})\nadd_executable(${PROJECT_NAME} ${MY_CPP_FILES})\ntarget_link_libraries(${PROJECT_NAME} clipslib)\n</code></pre>\n\n<p>When I build, I got errors like the following:</p>\n\n<pre><code>undefined reference to `CreateEnvironment()'\n</code></pre>\n\n<p>Although this function found in <strong>envrnmnt.c</strong> file which should be linked to the executable as far as I understand. I tried to build the ClipsCore library using <code>add_library</code> then tried to link it to the executable using <code>target_link_libraries</code>.\nWhat is wrong with my CMakeLists.txt?</p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 0, "creation_date": 1495642492, "post_id": 44163611, "comment_id": 75343834, "body": "Why not mother node? That&#39;s sexist. That&#39;s why we call it parent. <i>triggered</i>"}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1495642564, "post_id": 44163611, "comment_id": 75343886, "body": "Please give details of the error"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1495642833, "post_id": 44163611, "comment_id": 75344073, "body": "Have you qualifed that function correctly or is a global rather than a class member?"}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1495642953, "post_id": 44163611, "comment_id": 75344148, "body": "how about checking if the child is &#39;this&#39; in the first place ? At least that would prevent doing stupid things."}, {"owner": {"reputation": 383, "user_id": 2260835, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/580e969123dd2b066bc349b211aeb393?s=128&d=identicon&r=PG", "display_name": "Discipulos", "link": "https://stackoverflow.com/users/2260835/discipulos"}, "edited": false, "score": 0, "creation_date": 1495648850, "post_id": 44163611, "comment_id": 75347461, "body": "In this case, a node can have itself as child (it is an exercise). The error is that the program is stuck."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 2260835, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/580e969123dd2b066bc349b211aeb393?s=128&d=identicon&r=PG", "display_name": "Discipulos", "link": "https://stackoverflow.com/users/2260835/discipulos"}, "edited": false, "score": 0, "creation_date": 1495648941, "post_id": 44163812, "comment_id": 75347515, "body": "if i write child-&gt;setFather(this); the program get stuck."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 0, "last_activity_date": 1495643635, "last_edit_date": 1495643635, "creation_date": 1495643032, "answer_id": 44163812, "question_id": 44163611, "link": "https://stackoverflow.com/questions/44163611/c-setting-father-node-in-a-tree/44163812#44163812", "title": "C++ setting father node in a tree", "body": "<p>Obviously, your</p>\n\n<pre><code>node-&gt;setLeftChild(node);\n</code></pre>\n\n<p>will produce nonsense. You must either write valid code or (at least in DEBUG mode) guard against such nonsense</p>\n\n<pre><code>void setLeftChild(Node* child)\n{\n  if(child==this)\n    throw std::runtime_error(\"node cannot be its own child\");\n  leftChild = child;\n  child-&gt;setFather(this);\n};    \n</code></pre>\n\n<hr>\n\n<p>Another idea is to make <code>father</code> a immutable member that has to be provided at construction (and equals <code>nullptr</code> only for the root node), i.e.</p>\n\n<pre><code>struct Node\n{\n  Node*const father;      // immutable, so might as well be public\n  Node(Node*f) : father(f) {}\n  Node*MakeLeftChild()    // create left child and return it\n  {\n    if(!leftChild)\n      leftChild = new Node(this);\n    return leftChild;\n  }\n  Node*MakeRightChild()   // create right child and return it\n  {\n    if(!rightChild)\n      rightChild = new Node(this);\n    return rightChild;\n  }\nprivate:\n  Node*leftChild=nullptr;   // defaults to having no children\n  Node*rightChild=nullptr;\n};\n\nauto root = new Node(nullptr);\nauto node = root-&gt;MakeLeftChild();\nnode = node-&gt;MakeRightChild();\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 2260835, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/580e969123dd2b066bc349b211aeb393?s=128&d=identicon&r=PG", "display_name": "Discipulos", "link": "https://stackoverflow.com/users/2260835/discipulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 44163812, "answer_count": 1, "score": -2, "last_activity_date": 1495650127, "creation_date": 1495642368, "last_edit_date": 1495649691, "question_id": 44163611, "link": "https://stackoverflow.com/questions/44163611/c-setting-father-node-in-a-tree", "title": "C++ setting father node in a tree", "body": "<p>I have the following class:</p>\n\n<pre><code>class Node\n{\n  private:   \n     Node* leftChild;\n     Node* rightChild;\n     Node* father;   \n  public:   \n     Node() { leftChild = rightChild = father = NULL; };     \n     Node* getLeftChild() { return leftChild; };\n     Node* getRightChild() { return rightChild; };\n     Node* getFather() { return father; }\n     void setRightChild(Node* child) { rightChild = child; }\n     void setLeftChild(Node* child) { leftChild = child; };\n     void setFather(Node* f) { father = f; };   \n};\n</code></pre>\n\n<p>I would set also the father node when setting the left child and the right child. I try:</p>\n\n<pre><code>void setLeftChild(Node* child)\n{\n  leftChild = child;\n  child-&gt;setFather(this);\n};    \n\nNode* node = new Node();\nNode* node2 = new Node();\n\nnode-&gt;setLeftChild(node2);\n</code></pre>\n\n<p>and due to the wrong use of this, I receive a random error. How I should set the function <code>setLeftChild()</code> and <code>setRightChild()</code> ?\nThank you.</p>\n"}, {"tags": ["c++", "debugging", "callstack", "debug-symbols", "fault-tolerance"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1495643633, "post_id": 44163593, "comment_id": 75344562, "body": "<a href=\"http://boostorg.github.io/stacktrace/index.html\" rel=\"nofollow noreferrer\">Boost.Stacktrace</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1495643711, "post_id": 44163988, "comment_id": 75344615, "body": "As I understand this will only give the addresses, but not symbols (function names)."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1495644946, "post_id": 44163988, "comment_id": 75345318, "body": "Depending on how the program was compiled, the symbols may not even be present in the executable."}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "edited": false, "score": 0, "creation_date": 1495699873, "post_id": 44163988, "comment_id": 75365774, "body": "Getting the symbols is the purvue of the Debug Help Library you mentioned you didn&#39;t want to use. (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679309(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>)  The symbols can be located in a number of files and depending on where you get them from you will have a variable quality callstack. If you just want to get them out of an exe you will have to write partial a PE parser - <a href=\"https://msdn.microsoft.com/en-us/library/ms809762.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms809762.aspx</a> . pdb&#39;s have the richest source of symbols but I wouldn&#39;t recommend parsing them yourself."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1495713037, "post_id": 44163988, "comment_id": 75373606, "body": "@TheSombreroKid , I don&#39;t refuse to use DbgHelp, I just need a code example to learn it."}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": false, "score": 0, "last_activity_date": 1495643552, "creation_date": 1495643552, "answer_id": 44163988, "question_id": 44163593, "link": "https://stackoverflow.com/questions/44163593/example-of-getting-c-call-stack-on-windows/44163988#44163988", "title": "Example of getting C++ call stack on Windows", "body": "<p>It's not a huge amount of work to traverse the call stack yourself by popping the ebp, CaptureStackBackTrace (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb204633(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/bb204633(v=vs.85).aspx</a>) will do that for you if you don't want to do it yourself.</p>\n"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1312, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1495643552, "creation_date": 1495642318, "question_id": 44163593, "link": "https://stackoverflow.com/questions/44163593/example-of-getting-c-call-stack-on-windows", "title": "Example of getting C++ call stack on Windows", "body": "<p>Can someone give an example of how to get programmatically the call stack of the currently running C++ program on Windows?\nFrom some threads (e.g. <a href=\"https://stackoverflow.com/questions/3899870/print-call-stack-in-c-or-c\">print call stack in C or C++</a> ) I have got a suggestion to use <a href=\"https://msdn.microsoft.com/en-us/library/ms679309(v=VS.85).aspx\" rel=\"nofollow noreferrer\">DbgHelp</a>. However the library seems quite large and intended for many more features than just the call stack, so studying the library without an example can take too long time.\nAlso the library seems obsolete because the last version of it, <a href=\"https://msdn.microsoft.com/en-us/library/ms679294(v=vs.85).aspx\" rel=\"nofollow noreferrer\">6.12</a>, is dated 01 February 2010 (7 years old as of now). Is there something new for getting call stack from C++ now?</p>\n\n<p>If you are giving an example of DbgHelp usage, could you also describe how to install it, add to the project and ship with my program?</p>\n\n<p>I would like to get undecorated names of all functions on the call stack, preferrably with values of the parameters.</p>\n"}, {"tags": ["c++", "opengl", "shader"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1495642492, "post_id": 44163454, "comment_id": 75343832, "body": "Does your OpenGL implementation support more than zero <code>GL_NUM_PROGRAM_BINARY_FORMATS</code>?"}, {"owner": {"reputation": 107, "user_id": 5640558, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10208052683180744/picture?type=large", "display_name": "Andrea Loforte", "link": "https://stackoverflow.com/users/5640558/andrea-loforte"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1495656366, "post_id": 44163454, "comment_id": 75351227, "body": "thanks! yes , you&#39;r right, my openGL implementation supports 0 binary formats...what to do ?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1495656564, "post_id": 44163454, "comment_id": 75351328, "body": "Switch to an implementation that supports more than zero or live without binaries."}, {"owner": {"reputation": 107, "user_id": 5640558, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10208052683180744/picture?type=large", "display_name": "Andrea Loforte", "link": "https://stackoverflow.com/users/5640558/andrea-loforte"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1495656724, "post_id": 44163454, "comment_id": 75351414, "body": "@genpfault thanks!"}], "owner": {"reputation": 107, "user_id": 5640558, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10208052683180744/picture?type=large", "display_name": "Andrea Loforte", "link": "https://stackoverflow.com/users/5640558/andrea-loforte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1526899208, "creation_date": 1495641873, "last_edit_date": 1526899208, "question_id": 44163454, "link": "https://stackoverflow.com/questions/44163454/cannot-retrieve-shader-binary", "title": "Cannot retrieve shader binary", "body": "<p>I'm having problem retrieving shader program's binary. </p>\n\n<p>I made a class named \"Building\" that has the following static members:</p>\n\n<pre><code>  static GLenum binary_format;\n  static unsigned char * program_binary;\n  static GLsizei binary_size;\n  static GLsizei binary_length;\n</code></pre>\n\n<p>I use program_binary to store the shader program,\nI made these members static in order to retrive their values from\nany instance of the class, once the first instance fills them with proper values.\nThis class also has the following member method, which I use as routine to setup the shader program : </p>\n\n<pre><code> void Building::setShaders()\n  {     \n\n\n    if(program_binary == nullptr)\n      {\n\n\n    shader_prog = glCreateProgram();\n\n    GLchar const *vss[]=\n      {\n        *smanager.getVShaderSource(0),\n        *smanager.getVShaderSource(1)       \n      };\n\n    GLuint vs = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vs,2,vss,NULL);\n    glCompileShader(vs);\n\n\n    GLuint fs = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fs,1,smanager.getFShaderSource(0),NULL);\n    glCompileShader(fs);\n\n\n    //CHECKING COMPILE STATUS\n    GLint vs_status;\n    glGetShaderiv(vs,GL_COMPILE_STATUS,&amp;vs_status);\n\n    GLint fs_status;\n    glGetShaderiv(fs,GL_COMPILE_STATUS,&amp;fs_status);\n\n\n    if(vs_status == 0 || fs_status == 0)\n      {\n\n        if(vs_status == 0)\n          {\n        GLint log_length;\n        glGetShaderiv(vs,GL_INFO_LOG_LENGTH,&amp;log_length);\n        char log[log_length];\n        glGetShaderInfoLog(vs,log_length,NULL,log);\n        printVShaderLog(log);\n          }\n\n        if(fs_status == 0)\n          {\n        GLint log_length;\n        glGetShaderiv(fs,GL_INFO_LOG_LENGTH,&amp;log_length);\n        char log[log_length];\n        glGetShaderInfoLog(fs,log_length,NULL,log);\n        printFShaderLog(log);\n          }\n\n      }\n\n\n    else\n      {\n\n        glAttachShader(shader_prog,vs);\n        glAttachShader(shader_prog,fs);\n        glProgramParameteri(shader_prog,GL_PROGRAM_BINARY_RETRIEVABLE_HINT,GL_TRUE);        \n        glLinkProgram(shader_prog);\n\n        GLint param;\n        glGetProgramiv(shader_prog,GL_LINK_STATUS,&amp;param);\n\n        if(param)\n          {\n        printShaderLinkState(param,NULL);\n\n        glGetProgramiv(shader_prog,GL_PROGRAM_BINARY_LENGTH,&amp;binary_size);\n\n        std::cerr&lt;&lt;\"binary_size is \"&lt;&lt;binary_size&lt;&lt;std::endl;\n        //binary_size is zero !\n\n        program_binary = new unsigned char [binary_size];\n        glGetProgramBinary(shader_prog,binary_size,&amp;binary_length,&amp;binary_format,program_binary);\n\n          }\n        else\n          {\n\n        GLint logLength;\n        glGetProgramiv(shader_prog,GL_INFO_LOG_LENGTH,&amp;logLength);\n        char log[logLength];\n        glGetProgramInfoLog(shader_prog,logLength,NULL,log);\n        printShaderLinkState(param,log);        \n          }\n\n\n\n      }\n\n\n    glDeleteShader(vs);\n    glDeleteShader(fs);\n\n            }//if(program_binary == nullptr)\n        else        \n\n glProgramBinary(shader_prog,binary_format,program_binary,binary_length);\n\n\n\n  }\n</code></pre>\n\n<p>The problem is that the length provided by  <code>glGetProgramiv(shader_prog,GL_PROGRAM_BINARY_LENGTH,&amp;binary_size);</code>\nis zero.However, I tried to put binary_size = 100 just to see if something is written into the program_binary pointer, but the function <code>glGetProgramBinary(shader_prog,binary_size,&amp;binary_length,&amp;binary_format,program_binary);</code> isn't working either, in fact program_binary remains just empty. I have no clues why this is happening .</p>\n"}, {"tags": ["c++", "pointers", "constants"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1495641464, "post_id": 44163256, "comment_id": 75343202, "body": "Why not <code>std::array</code>?"}, {"owner": {"reputation": 11, "user_id": 8060428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f05d75028326eff7c0f05914113f76a?s=128&d=identicon&r=PG&f=1", "display_name": "John Mescard", "link": "https://stackoverflow.com/users/8060428/john-mescard"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495641653, "post_id": 44163256, "comment_id": 75343329, "body": "Correct me if I am wrong, but I think <code>std::array</code>&#39;s copy constructor makes a deep copy of the data, and it doesn&#39;t store a pointer to the data that could be passed to other instances."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1495641718, "post_id": 44163256, "comment_id": 75343365, "body": "You have another problem anyway, you have no way of knowing when to delete that pointer."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1495641785, "post_id": 44163256, "comment_id": 75343413, "body": "Maybe <code>std::shared_ptr&lt;std::array&lt;int, 10&gt;&gt;</code>?"}, {"owner": {"reputation": 11, "user_id": 8060428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f05d75028326eff7c0f05914113f76a?s=128&d=identicon&r=PG&f=1", "display_name": "John Mescard", "link": "https://stackoverflow.com/users/8060428/john-mescard"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1495641841, "post_id": 44163256, "comment_id": 75343446, "body": "@Mark: That&#39;s true, I guess I could add a <code>bool owner</code>, but even then I want to be able to create &quot;reference instances&quot; that are both <code>const</code> and not <code>const</code>."}, {"owner": {"reputation": 11, "user_id": 8060428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f05d75028326eff7c0f05914113f76a?s=128&d=identicon&r=PG&f=1", "display_name": "John Mescard", "link": "https://stackoverflow.com/users/8060428/john-mescard"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1495642308, "post_id": 44163256, "comment_id": 75343736, "body": "@0x5453: That would still be subject to the problem I described in the last code snippet in my post."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8060428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f05d75028326eff7c0f05914113f76a?s=128&d=identicon&r=PG&f=1", "display_name": "John Mescard", "link": "https://stackoverflow.com/users/8060428/john-mescard"}, "edited": false, "score": 0, "creation_date": 1495642169, "post_id": 44163400, "comment_id": 75343653, "body": "I forgot to mention that in my post, but I want to be able to create both &quot;reference instances&quot; that are able to and not able (<code>const</code>) modify the referenced data, preferably such that I can differentiate between the two merely via a <code>const</code> keyword."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495750878, "post_id": 44163400, "comment_id": 75395271, "body": "If you want the <code>const</code>-ness to do too much, it becomes easier to have both an <code>S</code> and a <code>ConstS</code> class (compare: <code>iterator</code> vs <code>const_iterator</code> for containers)."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1495641709, "creation_date": 1495641709, "answer_id": 44163400, "question_id": 44163256, "link": "https://stackoverflow.com/questions/44163256/pointer-members-of-const-struct/44163400#44163400", "title": "Pointer members of const struct", "body": "<p>Delete the copy constructor (and assignment operator) for <code>S</code>.  Create a new proxy class (<code>SCopy</code>) that holds a pointer to an <code>S</code> object (which is passed in to the constructor for <code>SCopy</code>).  <code>SCopy</code> would then implement the <code>const int &amp;operator() const</code> and not the non-const version.</p>\n\n<p>This would then allow you to implement a destructor in <code>S</code> that would free the memory you're currently leaking.</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1495750491, "creation_date": 1495750491, "answer_id": 44190626, "question_id": 44163256, "link": "https://stackoverflow.com/questions/44163256/pointer-members-of-const-struct/44190626#44190626", "title": "Pointer members of const struct", "body": "<p>It is possible to know in the copy constructor if the object being copied is <code>const</code> by providing two different copy constructors, one which takes a <code>const</code> parameter and one which does not. The compiler will select whichever version matches the passed parameter. Set a flag in the constructor so it can throw an error when a non-const operation is performed.</p>\n\n<p>The best way to avoid the leaked memory shown in the question is to used a smart pointer like <code>std::shared_ptr</code> rather than a raw pointer. Unfortunately <code>shared_ptr</code> is meant for single objects, not arrays; workarounds are possible <a href=\"https://stackoverflow.com/questions/13061979/shared-ptr-to-an-array-should-it-be-used\">as in this StackOverflow question</a>. I'm not going to try to solve this now, the code below still has the leak.</p>\n\n<p>To be complete you should follow the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">Rule of Three</a> and provide an <code>operator=</code> and destructor as well. I left this as an exercise for the reader.</p>\n\n<pre><code>class S\n{\nprivate:\n    int* data;\n    bool is_const;\npublic:\n    S() : data(new int[10]), is_const(false) { data[1] = 42; }\n    S(const S&amp; other) : data(other.data), is_const(true) {}\n    S(S&amp; other) : data(other.data), is_const(false) {}\n\n    int&amp; operator()(size_t i)\n    {\n        if (is_const)\n            throw std::logic_error(\"non-const operation attempted\");\n        return data.ptr[i];\n    }\n\n    const int&amp; operator()(size_t i) const\n    {\n        return data.ptr[i];\n    }\n};\n</code></pre>\n\n<p>See it in action: <a href=\"http://ideone.com/SFN89M\" rel=\"nofollow noreferrer\">http://ideone.com/SFN89M</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8060428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f05d75028326eff7c0f05914113f76a?s=128&d=identicon&r=PG&f=1", "display_name": "John Mescard", "link": "https://stackoverflow.com/users/8060428/john-mescard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495750491, "creation_date": 1495641304, "last_edit_date": 1495642357, "question_id": 44163256, "link": "https://stackoverflow.com/questions/44163256/pointer-members-of-const-struct", "title": "Pointer members of const struct", "body": "<p>I have a class that looks somewhat like this:</p>\n\n<pre><code>class S\n{\npublic:\n    int* data;\n    S() : data(new int[10]) {}\n};\n</code></pre>\n\n<p>The constructor allocates the memory of 10 integers, and the default copy constructor as expected merely copies the pointer itself rather than the content.</p>\n\n<p>Even if there is an instance of <code>S</code> that has <code>const</code> modifier, I can modify the data that <code>data</code> points to, since that data itself does not have <code>const</code> modifier. I could avoid this by making <code>data</code> private and only allowing write access via a non-<code>const</code> method like so:</p>\n\n<pre><code>class S\n{\nprivate:\n    int* data;\npublic:\n    S() : data(new int[10]) {}\n\n    int&amp; operator(size_t i)\n    {\n        return data[i];\n    }\n\n    const int&amp; operator(size_t i) const\n    {\n        return data[i];\n    }\n};\n</code></pre>\n\n<p>But now I can use the copy constructor to circumvent the <code>const</code>ness of the instance of <code>S</code> like so:</p>\n\n<pre><code>void main()\n{\n    const S a; // Allocates memory\n    S b(a); // Also points to memory allocated for a\n    b(1) = 3; // Writes to a even though it is not supposed to be mutable\n}\n</code></pre>\n\n<p>What would be an elegant way to solve this problem (potentially using templates)?</p>\n\n<ul>\n<li>The data pointed to by an instance of <code>const S</code> should not be mutable at all using only this instance.</li>\n<li>Copy constructor should only copy pointer, but not make a deep copy of the data.</li>\n<li>Both a <code>const S</code> and an <code>S</code> should be creatable via a copy constructor given an instance of <code>S</code> such that the <code>const</code> instance cannot modify the data, but the non-<code>const</code> instance can.</li>\n</ul>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1495641515, "post_id": 44163193, "comment_id": 75343236, "body": "We need to see more code. For example, what causes the buffer to become &quot;locked&quot;? That is, when are you sending that fence sync and when are you waiting on it? Are you double-buffering your transfers of vertex data? And so forth."}, {"owner": {"reputation": 865, "user_id": 3252026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YuhIG.jpg?s=128&g=1", "display_name": "Gnampf", "link": "https://stackoverflow.com/users/3252026/gnampf"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1495641764, "post_id": 44163193, "comment_id": 75343396, "body": "I try to provide anything needed :) It doesn&#39;t seem to matter if I use 1 buffer, 3 or more. Regarding this tutorial, the lock is done with deleting a previously sync and using glFenceSync. I am not sure if this is the right term, but that&#39;s how it was described in this tutorial. The complete code of this tutorial is here: <a href=\"https://github.com/fenbf/GLSamples/blob/master/src/PersistentMappedBuffer.cpp\" rel=\"nofollow noreferrer\">github.com/fenbf/GLSamples/blob/master/src/&hellip;</a> I can also add more of my code here, but it should work exactly the same (unless I&#39;ve overseen something)"}, {"owner": {"reputation": 865, "user_id": 3252026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YuhIG.jpg?s=128&g=1", "display_name": "Gnampf", "link": "https://stackoverflow.com/users/3252026/gnampf"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1495648959, "post_id": 44163193, "comment_id": 75347531, "body": "I just added for testing yet a couple more fences and syncs, no matter if it made sense or not. Even adding glFinish() on various places didn&#39;t &quot;fix&quot; this problem."}], "answers": [{"tags": [], "owner": {"reputation": 865, "user_id": 3252026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YuhIG.jpg?s=128&g=1", "display_name": "Gnampf", "link": "https://stackoverflow.com/users/3252026/gnampf"}, "is_accepted": true, "score": 1, "last_activity_date": 1495700535, "creation_date": 1495700535, "answer_id": 44175718, "question_id": 44163193, "link": "https://stackoverflow.com/questions/44163193/peristent-mapped-buffer-glbufferstorage-gl-map-persistent-bit-with-very-small/44175718#44175718", "title": "Peristent mapped buffer (glBufferStorage GL_MAP_PERSISTENT_BIT) with very small chunks", "body": "<p>It turned out that the problem was on an entirely different place and a combination of things. </p>\n\n<p>For multiple buffers it was instead setting an index in</p>\n\n<pre><code>glDrawArrays(GL_TRIANGLES, 0, VertSize);\n</code></pre>\n\n<p>necessary to set the offset for the multiple buffers in </p>\n\n<pre><code>glVertexAttribPointer(VERTEX_COORD_ATTRIB, 3, GL_FLOAT, GL_FALSE, StrideSize, (void*) BeginOffset));\n</code></pre>\n\n<p>and the problem for the single buffer distortions came due to a missing wait or rather a wrong \"if\" when having only one.</p>\n\n<p>I hope that this may be useful for someone else running into such a problem to know that it is no general issue with persistent mapped buffers.</p>\n"}], "owner": {"reputation": 865, "user_id": 3252026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YuhIG.jpg?s=128&g=1", "display_name": "Gnampf", "link": "https://stackoverflow.com/users/3252026/gnampf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 44175718, "answer_count": 1, "score": 0, "last_activity_date": 1495700535, "creation_date": 1495641077, "last_edit_date": 1495644961, "question_id": 44163193, "link": "https://stackoverflow.com/questions/44163193/peristent-mapped-buffer-glbufferstorage-gl-map-persistent-bit-with-very-small", "title": "Peristent mapped buffer (glBufferStorage GL_MAP_PERSISTENT_BIT) with very small chunks", "body": "<p>I implemented persistent mapped buffers in a renderer I wrote, very much alike in this tutorial here:\n<a href=\"http://www.bfilipek.com/2015/01/persistent-mapped-buffers-in-opengl.html\" rel=\"nofollow noreferrer\">persistent-mapped-buffers-in-opengl</a></p>\n\n<p>To keep it short, its working like this:</p>\n\n<pre><code>glGenBuffers(1, &amp;vboID);\nglBindBuffer(GL_ARRAY_BUFFER, vboID);\nflags = GL_MAP_WRITE_BIT | GL_MAP_PERSISTENT_BIT | GL_MAP_COHERENT_BIT;\nglBufferStorage(GL_ARRAY_BUFFER, MY_BUFFER_SIZE, 0, flags);\n</code></pre>\n\n<p>Mapping (only once after creation...):</p>\n\n<pre><code>flags = GL_MAP_WRITE_BIT | GL_MAP_PERSISTENT_BIT | GL_MAP_COHERENT_BIT;\nmyPointer = glMapBufferRange(GL_ARRAY_BUFFER, 0, MY_BUFFER_SIZE, flags);\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>// wait for the buffer   \nglClientWaitSync(Buffer.Sync[Index], GL_SYNC_FLUSH_COMMANDS_BIT, WaitDuration);\n\n// modify underlying data...\n</code></pre>\n\n<p>lock the buffer: </p>\n\n<pre><code>glFenceSync(GL_SYNC_GPU_COMMANDS_COMPLETE, 0);\n</code></pre>\n\n<p>After I understood the idea, I was able to implement it without further problems, also gaining quite some performance due to it.\nHowever due to the game engine I am working with, it can't be avoided that I sometimes get a lot of drawcalls with very small chunks, just a few verts. If this happens I get visual distortions, clearly indicating something goes wrong.</p>\n\n<p>What I tried is to add more waits before and after the buffer is updated. Although this wouldn't have made any sense but just for testing, I tried to remove GL_MAP_COHERENT_BIT and to use glFlushMappedBufferRange, I tried with a single buffer instead of multiple buffers.</p>\n\n<p>For me it looks like the fence wouldn't work correctly, but I can't see how this could happen.\nShouldn't fencing avoid any trouble like this, even if it would mean sacrificing performance?\nThe same situation however works without any trouble if I use glBufferData instead, or as said already, if the chunks are a few hundred verts instead and reduced drawcalls.<br>\nAny hints what this could be caused by or how I could get more information about what is failing would be very helpful.\nThere are no OpenGL errors at all.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495641051, "post_id": 44163133, "comment_id": 75342936, "body": "And what does your debugger tell you?"}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495641190, "post_id": 44163133, "comment_id": 75343043, "body": "warning: Heap block at 003EAF20 modified at 003EB258 past requested size of 330"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 7, "creation_date": 1495641220, "post_id": 44163133, "comment_id": 75343061, "body": "Your program is invalid. You cannot dereference an <code>.end()</code> iterator."}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1495641523, "post_id": 44163133, "comment_id": 75343240, "body": "@n.m But when I change to *i = *i -1 it works. In a way this is dereferencing the i, which is initialized as .end()?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1495641635, "post_id": 44163133, "comment_id": 75343315, "body": "Sometimes the symptoms of undefined behaviour are that it appears to work. You still must not dereference a past-the-end iterator though, so stop doing that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1495642251, "post_id": 44163133, "comment_id": 75343699, "body": "Isn&#39;t that a restricted version of std::adjacent_difference that you are implementing?"}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495642291, "post_id": 44163133, "comment_id": 75343725, "body": "Until now I thought that .end() points at the last initialized value of the vector and that is where my confusion came from."}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495643620, "post_id": 44163133, "comment_id": 75344548, "body": "@manni66 Actually, yes.. Didn&#39;t know this function either. Thank you."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1495713137, "post_id": 44163133, "comment_id": 75373663, "body": "You should probably also make your function handle the case where the input has fewer than two elements (currently you&#39;ll get undefined behaviour)."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495642189, "post_id": 44163443, "comment_id": 75343669, "body": "Now I got it! Thank you! Until now I thought that .end() points at the last initialized value of the vector and that is where my confusion came from."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1495642367, "post_id": 44163443, "comment_id": 75343763, "body": "IMHO when iterating in reverse order it would be better to use a <code>reverse_iterator</code>, e.g. <code>for (auto i = result.rbegin(); i != result.rend() - 1; ++i) { *i = *i - *std::next(i); }</code>"}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1495642598, "post_id": 44163443, "comment_id": 75343912, "body": "@JonathanWakely you probably mean *(i+1) = *(i+1)-*i because this is not backwards difference as I want it to be. And in this case we should end at result.rend() - 2."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495712492, "post_id": 44163443, "comment_id": 75373269, "body": "@Veliko no I meant what I wrote. When using a <code>reverse_iterator</code> the previous element in the container is the next position in the iterator traversal order."}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1495740028, "post_id": 44163443, "comment_id": 75390308, "body": "@JonathanWakely I somehow missed the &quot;reverse_iterator&quot; part in your previous comment. Thank you for your efforts."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1495800760, "post_id": 44163443, "comment_id": 75415101, "body": "The <code>reverse_iterator</code> part was the whole point of the comment! :-)"}], "tags": [], "owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "is_accepted": true, "score": 3, "last_activity_date": 1495641851, "creation_date": 1495641851, "answer_id": 44163443, "question_id": 44163133, "link": "https://stackoverflow.com/questions/44163133/iterating-over-a-vector-in-c-and-changing-the-values-dynamically/44163443#44163443", "title": "Iterating over a vector in C++ and changing the values dynamically", "body": "<p>This is undefined behavior. When you set your iterator to result.end(), you are dereferencing an end iterator to your vector, which is essentially the area in memory directly after your vector. It is possible for different functions, like std::prev or the dereference operator, to handle this differently. To eliminate this behavior, try this loop: </p>\n\n<pre><code>for (typename std::vector&lt;T&gt;::iterator i = result.end()-1; i &gt;= result.begin()+1; i--) {\n         *i = *i - *(i-1);\n}\n</code></pre>\n\n<p>This loop simply starts at the last valid position in the vector (the end iterator -1). </p>\n"}], "owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "accepted_answer_id": 44163443, "answer_count": 1, "score": 0, "last_activity_date": 1495641851, "creation_date": 1495640904, "last_edit_date": 1495641158, "question_id": 44163133, "link": "https://stackoverflow.com/questions/44163133/iterating-over-a-vector-in-c-and-changing-the-values-dynamically", "title": "Iterating over a vector in C++ and changing the values dynamically", "body": "<p>I am writing a c++ method that takes a vector vec of type T and returns a \"delta\" vector, i.e. vector with element vec(i)-vec(i-1) at position i, i>0 /I set the element at 0 to be the same as the one at 1/.</p>\n\n<p>To do this, I firstly copy the vector vec and then iterate in this way:</p>\n\n<pre><code>template&lt;class T&gt;\nvector&lt;T&gt; delta(vector&lt;T&gt; vec){\n    vector&lt;T&gt; result(vec);\n    for (typename vector&lt;T&gt;::iterator i = result.end(); i &gt;= result.begin()+1; i--)\n        {\n            *i = *i - *(std::prev(i));\n        }\n\n    result.at(0) = result.at(1);\n    return (result);\n}\n</code></pre>\n\n<p>There seems to be some problem with the line</p>\n\n<pre><code>*i = *i - *(std::prev(i));\n</code></pre>\n\n<p>which I don't understand. If I change it to *i = *i - 1 it works fine. The other problem is that the program just fails without showing me errors (it pops a window with \"main.exe has stopped working\". I am using CLion IDE.</p>\n\n<p>P.S. From the main I am passing an initialized vector with double values.</p>\n"}, {"tags": ["c++", "function-templates"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1495641942, "post_id": 44163091, "comment_id": 75343512, "body": "What is <code>MakeCallback</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 3, "last_activity_date": 1495641872, "last_edit_date": 1495641872, "creation_date": 1495641027, "answer_id": 44163176, "question_id": 44163091, "link": "https://stackoverflow.com/questions/44163091/passing-the-address-of-a-function-template/44163176#44163176", "title": "Passing the address of a function template", "body": "<p>In short, <a href=\"https://stackoverflow.com/questions/9893268/how-to-pass-variable-parameter-to-template\">you can't</a>. Since templates are expanded at compilation time, you need to provide the values at compilation time as well. If <code>nWifi</code> is a value that's only available at runtime, you need to use a regular parameter:</p>\n\n<pre><code>void RemainingEnergyTrace (double oldValue, double newValue, int node);\n</code></pre>\n\n<p>If you want then to create <em>partially applied</em> functions to pass to your <code>MakeCallback</code>, you can create them using lambdas:</p>\n\n<pre><code>for(int inc = 0; inc&lt;nWifi; inc++)\n{\n    auto callback = [=](double oldVal, double newVal) {\n        RemainingEnergyTrace(oldVal, newVal, inc);\n    };\n    ...\n}\n</code></pre>\n\n<p>But this <a href=\"https://stackoverflow.com/questions/7852101/c-lambda-with-captures-as-a-function-pointer\">won't decay to a function pointer</a>, so you might need to change your <code>MakeCallback</code> API to e.g. use <code>std::function</code> (which is a preferred method nowadays) or to take an additional parameter<sup>1</sup>, or alternatively use some library that will provide the delegate functionality you need.</p>\n\n<hr>\n\n<p><sup>1</sup>Typically, a C or C++ API that takes function pointers would also take an additional <code>void*</code> parameter to store alongside the function pointer. Then, when calling, the pointer would be passed to that function, and store the necessary closure data (in your case, it could point to the <code>inc</code> value residing somewhere in memory). Without knowing how the <code>MakeCallback</code> works, it's impossible to tell what would be the best solution here.</p>\n"}], "owner": {"reputation": 209, "user_id": 7802280, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/85f9fc0f9581b806793210c066129513?s=128&d=identicon&r=PG&f=1", "display_name": "V-Red", "link": "https://stackoverflow.com/users/7802280/v-red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 44163176, "answer_count": 1, "score": 2, "last_activity_date": 1495641872, "creation_date": 1495640826, "last_edit_date": 1495641078, "question_id": 44163091, "link": "https://stackoverflow.com/questions/44163091/passing-the-address-of-a-function-template", "title": "Passing the address of a function template", "body": "<p>Consider the following function:</p>\n\n<pre><code>template &lt;int node&gt;\nvoid RemainingEnergyTrace (double oldValue, double newValue)\n{\n  std::stringstream ss;\n  ss &lt;&lt; \"Energy_\" &lt;&lt; node &lt;&lt; \".log\";\n  static std::fstream f (ss.str().c_str(), std::ios::out);\n  f &lt;&lt; Simulator::Now().GetSeconds() &lt;&lt; \"  Remaining energy=\" &lt;&lt; newValue &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Note the template definition of the function <strong>int node</strong>. I try to pass the address of this function in main(): </p>\n\n<pre><code>int inc = 0;  \neSources.Get (inc)-&gt;TraceConnectWithoutContext (\"RemainingEnergy\", MakeCallback(&amp;RemainingEnergyTrace&lt;inc&gt;));\n</code></pre>\n\n<p>which generates the following errors:</p>\n\n<pre><code>error: the value of \u2018inc\u2019 is not usable in a constant expression\neSources.Get (inc)-&gt;TraceConnectWithoutContext (\"RemainingEnergy\", MakeCallback(&amp;RemainingEnergyTrace&lt;inc&gt;));\n                                                                                                      ^\nerror: no matching function for call to \u2018MakeCallback(&lt;unresolved overloaded function type&gt;)\u2019\neSources.Get (inc)-&gt;TraceConnectWithoutContext (\"RemainingEnergy\", MakeCallback(&amp;RemainingEnergyTrace&lt;inc&gt;));\n                                                                                                          ^\n</code></pre>\n\n<p>However, the following statement works: </p>\n\n<pre><code>eSources.Get (0)-&gt;TraceConnectWithoutContext (\"RemainingEnergy\", MakeCallback(&amp;RemainingEnergyTrace&lt;0&gt;));\n</code></pre>\n\n<p>In summary, an actual number works, but when an integer variable is passed in the template format, it does not. Is it because the integer variable has to be of <strong>const</strong> type (as suggested by the error)?</p>\n\n<p>I am trying to actually run a loop and pass the address of the function for different integer values. How can I make this work? </p>\n\n<pre><code>for(int inc = 0; inc&lt;nWifi; inc++)\n{\n  eSources.Get (inc)-&gt;TraceConnectWithoutContext (\"RemainingEnergy\", MakeCallback(&amp;RemainingEnergyTrace&lt;inc&gt;));\n}\n</code></pre>\n"}, {"tags": ["c++", "mpi", "boost-mpi"], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 4402434, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SWXj5vYukvg/AAAAAAAAAAI/AAAAAAAAAAA/aYptzQg6b30/photo.jpg?sz=128", "display_name": "nareddyt", "link": "https://stackoverflow.com/users/4402434/nareddyt"}, "edited": false, "score": 0, "creation_date": 1551678037, "post_id": 44166062, "comment_id": 96713075, "body": "Seems like the bug still exists. Using different tags for my messages resolved the error."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 808, "user_id": 4402434, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SWXj5vYukvg/AAAAAAAAAAI/AAAAAAAAAAA/aYptzQg6b30/photo.jpg?sz=128", "display_name": "nareddyt", "link": "https://stackoverflow.com/users/4402434/nareddyt"}, "edited": false, "score": 1, "creation_date": 1551689147, "post_id": 44166062, "comment_id": 96717150, "body": "@nareddyt actually, it should have been fixed recently by this merged PR <a href=\"https://github.com/boostorg/mpi/pull/71\" rel=\"nofollow noreferrer\">github.com/boostorg/mpi/pull/71</a>"}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1495650575, "creation_date": 1495650575, "answer_id": 44166062, "question_id": 44162979, "link": "https://stackoverflow.com/questions/44162979/mpi-test-mpi-err-truncate/44166062#44166062", "title": "MPI_Test: MPI_ERR_TRUNCATE", "body": "<p>There is <a href=\"https://svn.boost.org/trac/boost/ticket/12828\" rel=\"nofollow noreferrer\">a bug</a> when there are multiple <code>irecv</code> on the same communicator, tag, source for serialized types that seems very related. So you could try that with different tags. Nevertheless it wouldn't work due to the bug with cancel...</p>\n"}], "owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1495650575, "creation_date": 1495640489, "question_id": 44162979, "link": "https://stackoverflow.com/questions/44162979/mpi-test-mpi-err-truncate", "title": "MPI_Test: MPI_ERR_TRUNCATE", "body": "<p>The following code gives this error message:</p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of\n  'boost::exception_detail::clone_impl'<br>\n  what():  MPI_Test: MPI_ERR_TRUNCATE: message truncated</p>\n</blockquote>\n\n<p>The problem might be related to a bug of boost::mpi which is discussed in <a href=\"https://stackoverflow.com/q/44114624/1128551\">this post</a>. I want to be sure about reason of the error.</p>\n\n<p>The code works if I loop only once (<code>for (int z=0; z&lt;1; ++z)</code>) but for <code>z&lt;2</code> I get the mentioned error message.</p>\n\n<pre><code>#include &lt;boost/mpi.hpp&gt;\n\nclass MyClass\n{\n    std::vector&lt;double&gt; vec;\n\n    public:\n\n    void send_data(const boost::mpi::communicator&amp; world, boost::mpi::request&amp; req)\n    {\n        if (world.rank() == 0)\n        {\n            vec.resize(1000);\n            req = world.isend(1, 0, vec);\n        }\n    }\n\n    void recv_data(const boost::mpi::communicator&amp; world)\n    {\n        if (world.rank() == 1)\n        {\n            while (true)\n            {\n                boost::mpi::request req = world.irecv(boost::mpi::any_source, 0, vec);\n                if (!req.test())\n                {\n                    req.cancel();\n                    //req.wait(); &lt;-- hangs the program.\n                    break;\n                }\n            }\n        }\n    }\n};\n\nint main()\n{\n    boost::mpi::environment env;\n    boost::mpi::communicator world;\n\n    MyClass myclass;\n\n    for (int z=0; z&lt;2; ++z) // works if loop only once.\n    {\n        boost::mpi::request req;\n\n        myclass.send_data(world, req);\n        world.barrier();\n        myclass.recv_data(world);\n        world.barrier();\n        if (world.rank() == 0)\n            req.wait();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "makefile", "xapian"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495661902, "post_id": 44162932, "comment_id": 75353767, "body": "Please specify which concrete problems (compiler errors?) you are dealing with."}, {"owner": {"reputation": 3262, "user_id": 6302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06e6248936fafb1e0d11d0a2e60b8ec?s=128&d=identicon&r=PG", "display_name": "James Aylett", "link": "https://stackoverflow.com/users/6302/james-aylett"}, "edited": false, "score": 0, "creation_date": 1495740687, "post_id": 44162932, "comment_id": 75390657, "body": "I&#39;d recommend asking this on the Xapian mailing list, where there may be people who are using Xapian under Windows. (The nmake build system is unmaintained; we&#39;ll fix up the link, but it might not be helpful any more.) The other half of your question seems to be about building zlib under mingw, which I can&#39;t help with but probably warrants a distinct question on SO so it can be tagged appropriately."}, {"owner": {"reputation": 33, "user_id": 4646764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GaoJrzjI21w/AAAAAAAAAAI/AAAAAAAAAEA/KP-ugSY3ZbQ/photo.jpg?sz=128", "display_name": "Hari Mohan", "link": "https://stackoverflow.com/users/4646764/hari-mohan"}, "reply_to_user": {"reputation": 3262, "user_id": 6302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06e6248936fafb1e0d11d0a2e60b8ec?s=128&d=identicon&r=PG", "display_name": "James Aylett", "link": "https://stackoverflow.com/users/6302/james-aylett"}, "edited": false, "score": 0, "creation_date": 1495782820, "post_id": 44162932, "comment_id": 75404705, "body": "Thanks for that suggestion @JamesAylett"}, {"owner": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1510059409, "post_id": 44162932, "comment_id": 81266392, "body": "@HariMohan, As I understand problem was not solved?"}, {"owner": {"reputation": 33, "user_id": 4646764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GaoJrzjI21w/AAAAAAAAAAI/AAAAAAAAAEA/KP-ugSY3ZbQ/photo.jpg?sz=128", "display_name": "Hari Mohan", "link": "https://stackoverflow.com/users/4646764/hari-mohan"}, "reply_to_user": {"reputation": 3946, "user_id": 4444768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vVqiI.jpg?s=128&g=1", "display_name": "LmTinyToon", "link": "https://stackoverflow.com/users/4444768/lmtinytoon"}, "edited": false, "score": 0, "creation_date": 1510894504, "post_id": 44162932, "comment_id": 81639013, "body": "@LmTinyToon As of now, the idea of using a search server in our context has been scrapped...so..no we havent come back to solving it"}], "owner": {"reputation": 33, "user_id": 4646764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GaoJrzjI21w/AAAAAAAAAAI/AAAAAAAAAEA/KP-ugSY3ZbQ/photo.jpg?sz=128", "display_name": "Hari Mohan", "link": "https://stackoverflow.com/users/4646764/hari-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495692390, "creation_date": 1495640316, "last_edit_date": 1495692390, "question_id": 44162932, "link": "https://stackoverflow.com/questions/44162932/how-to-get-xapian-working-with-msvc", "title": "How to get Xapian working with MSVC?", "body": "<p>I would like to use Xapian search engine with a Qt application I am developing. The compiler used is MSVC (Visual Studio 2013). As it turns out, the Xapian download page (<a href=\"https://xapian.org/download\" rel=\"nofollow noreferrer\">https://xapian.org/download</a>) which was supposed to hold the link to a set of makefiles for MSVC, are missing. </p>\n\n<p>I thought maybe instead of trying too hard to get it working under MSVC, let's get MinGW + MSYS environment to build and run this guy. However, there I ran into a problem. It required <em>zlib</em> library.</p>\n\n<blockquote>\n  <p>configure: error: zlib.h not found - required for chert and glass (you may need to install zlib1g-dev or zlib-devel package)</p>\n</blockquote>\n\n<p>Building zlib doesn't seem too easy, as instead of running the \"configure\" script right away, it suggested me to check Makefile.gcc within /win32 folder. This however wasn't the answer, it didnt really seem to do much.</p>\n\n<pre><code>$./configure\nChecking for gcc\u2026\nPlease use win32/Makefile.gcc instead.\n</code></pre>\n\n<p>I am probably doing it wrong or perhaps have hit a circle somewhere. Some help would be really appreciated. Looking forward to some insight.   </p>\n\n<p>My main concern is to get Xapian working on Windows. </p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495640238, "post_id": 44162883, "comment_id": 75342332, "body": "The 1st version is sufficient. No need for casting."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1495640263, "post_id": 44162883, "comment_id": 75342351, "body": "delete object ... by making sure the destructor of your base class is virtual.  By doing so, it will call the appropriate dtor..."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495640265, "post_id": 44162883, "comment_id": 75342353, "body": "...**iff** the destructor was declared <code>virtual</code> in the base."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1495640268, "post_id": 44162883, "comment_id": 75342354, "body": "The best practice is to define a virtual destructor :-)"}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 6, "creation_date": 1495640279, "post_id": 44162883, "comment_id": 75342367, "body": "better: don&#39;t use raw owning pointers, that&#39;s rule number one in C++."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1495640345, "post_id": 44162883, "comment_id": 75342416, "body": "and don&#39;t reinvent <code>virtual</code> functions using <code>switch</code>. It&#39;s not likely to be any better, faster, or whatever. Why are you doing that?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495640436, "post_id": 44162883, "comment_id": 75342473, "body": "Also, the target type of your <code>static_cast</code> is (A) wrong and (B) not qualified as a pointer. That wouldn&#39;t work at all. But if you ever genuinely need a cast, you should use the corrected <code>static_cast</code> syntax instead of the C-style cast. But you don&#39;t need it here."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495640591, "post_id": 44163001, "comment_id": 75342602, "body": "And certainly no <code>switch</code>/<code>case</code> reinvention of <code>virtual</code> functions. :S"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1495722158, "last_edit_date": 1592644375, "creation_date": 1495640552, "answer_id": 44163001, "question_id": 44162883, "link": "https://stackoverflow.com/questions/44162883/best-method-to-delete-a-type-cast-pointer/44163001#44163001", "title": "best method to delete a type cast pointer", "body": "<p>A solution is to make the destructor virtual. That way the destructor call through the base pointer is dispatched dynamically, and the correct child class destructor will be run. No casting needed.</p>\n<hr />\n<blockquote>\n<p>What is the best practice to delete the object.</p>\n<pre><code>delete object;\n</code></pre>\n</blockquote>\n<p>This is the best way (of the options shown, see below for better). But it requires the virtual destructor in the base.</p>\n<blockquote>\n<pre><code>delete (DerA*)obj;\n</code></pre>\n</blockquote>\n<p>This is correct even if the base destructor is not virtual. Some prefer <code>static_cast&lt;DerA*&gt;(object)</code> since that is more explicit. Both are equivalent.</p>\n<blockquote>\n<pre><code>delete static_cast&lt;DerA&gt;(object)\n</code></pre>\n</blockquote>\n<p>You cannot delete non-pointers. This might work if <code>DerA</code> is implicitly convertible to <code>DerA*</code>. Otherwise it is ill-formed.</p>\n<hr />\n<p>Even better than any of your options is to use a smart pointer. When you don't need shared ownership and when the destructor is virtual, you can use <code>std::unique_ptr&lt;BaseClass&gt;</code>. When the unique pointer goes out of scope, the pointed object is automatically destroyed without an explicit <code>delete</code>.</p>\n<p>If you need shared ownership, or if the destructor can not be virtual, you can use <code>std::shared_ptr&lt;BaseClass&gt;</code> instead.</p>\n"}], "owner": {"reputation": 4094, "user_id": 1298499, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6aba23c308f2b676f320d8e827003648?s=128&d=identicon&r=PG", "display_name": "KostasA", "link": "https://stackoverflow.com/users/1298499/kostasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1495722158, "creation_date": 1495640146, "last_edit_date": 1495640696, "question_id": 44162883, "link": "https://stackoverflow.com/questions/44162883/best-method-to-delete-a-type-cast-pointer", "title": "best method to delete a type cast pointer", "body": "<p>I have create a function \nthat deallocates the memory of an \nobject that points to a base class.</p>\n\n<p>Regarding a field variable\nthe object can be typed cast\nto one of the derived classes \n(DerA,DerB,DerC).</p>\n\n<p>What is the best practice to delete\nthe object.</p>\n\n<pre><code>delete object;\ndelete (DerA*)obj;\ndelete static_cast&lt;DerA&gt;(object)\n</code></pre>\n\n<p>or all of the above do the same work.</p>\n\n<p>A sample of my code looks like</p>\n\n<pre><code>void deal(BaseClass *obj)\n{\n   if(obj)\n   {\n      switch(obj-&gt;m_id)\n      {\n         case DerivedAObj:\n         {\n             delete (DerA*)obj;\n             break;\n         }\n         case DerivedBObj:\n         {\n             delete static_cast&lt;DerA&gt;(obj);\n             break;\n         }\n\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1495640278, "post_id": 44162670, "comment_id": 75342365, "body": "initializer lists have no type.  <code>emplace</code> relies on type deduction.  You can&#39;t deduce a type for a typeless thing."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1495640415, "post_id": 44162670, "comment_id": 75342466, "body": "What do you think has changed in C++17 regarding this issue?"}, {"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1495640554, "post_id": 44162670, "comment_id": 75342570, "body": "@Walter, I didn&#39;t mean to imply that I am using a new C++17 feature, just that I was using C++17 compatibility level."}], "answers": [{"comments": [{"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1495640464, "post_id": 44162928, "comment_id": 75342489, "body": "What about the version with <code>std::piecewise_construct</code>? Same problem?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1495640519, "post_id": 44162928, "comment_id": 75342535, "body": "@MichaelGoldshteyn Yeah. It&#39;s still just the one <code>emplace()</code> function template."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 2, "creation_date": 1495640654, "post_id": 44162928, "comment_id": 75342644, "body": "@MichaelGoldshteyn Do note that there are <code>initializer_list</code> and there are <i>initializer list</i>.  A <code>initializer_list</code> can be constructed from a <i>initializer list</i> as it knows what the type should be.  A plain template type does not so it fails."}, {"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495640795, "post_id": 44162928, "comment_id": 75342743, "body": "@NathanOliver, interesting, I thought that my <code>{1,2,3}</code> argument (would have automatically) resulted in an <code>std::initializer_list&lt;int&gt;</code> parameter being deduced."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1495640884, "post_id": 44162928, "comment_id": 75342819, "body": "@MichaelGoldshteyn That is only when using <code>auto</code> as it is <i>special</i>.  See: <a href=\"https://stackoverflow.com/questions/25612262/why-does-auto-x3-deduce-an-initializer-list\" title=\"why does auto x3 deduce an initializer list\">stackoverflow.com/questions/25612262/&hellip;</a>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1495640302, "creation_date": 1495640302, "answer_id": 44162928, "question_id": 44162670, "link": "https://stackoverflow.com/questions/44162670/stdmap-of-tuple-to-tuple-and-using-emplace/44162928#44162928", "title": "std::map of tuple to tuple and using emplace", "body": "<blockquote>\n  <p>but why can't the initializer lists be passed directly to <code>map::emplace()</code></p>\n</blockquote>\n\n<p>Because initializer lists aren't expressions and so they don't have types. The signature for <a href=\"http://en.cppreference.com/w/cpp/container/map/emplace\" rel=\"noreferrer\"><code>emplace()</code></a> is just:</p>\n\n<pre><code>template&lt; class... Args &gt;\nstd::pair&lt;iterator,bool&gt; emplace( Args&amp;&amp;... args );\n</code></pre>\n\n<p>and you can't deduce a type from <code>{1,2,3}</code>. You couldn't in C++11 and you still can't in C++1z. The only exception to this rule is if the template parameter is of the form <code>std::initializer_list&lt;T&gt;</code> where <code>T</code> is a template parameter.</p>\n\n<p>In order for <code>m.emplace({1,2,3},{4,5,6});</code> to work, you'd need a signature like:</p>\n\n<pre><code>std::pair&lt;iterator,bool&gt; emplace(key_type&amp;&amp;, mapped_type&amp;&amp;);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "edited": false, "score": 0, "creation_date": 1495640898, "post_id": 44162995, "comment_id": 75342830, "body": "Have a +1 for showing a working example of how to do this properly."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1495641335, "post_id": 44162995, "comment_id": 75343130, "body": "FYI: since the OP is using C++17, you could also use template class deduction and therefore just use <code>std::tuple(1, 2, 3)</code>. Assuming the compiler supports it and the standard library properly implements it."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1495641458, "post_id": 44162995, "comment_id": 75343197, "body": "@NicolBolas Correct, but that is almost the same as <code>ThreeTuple(1,2,3)</code>, which the OP has mentioned. Thanks anyway, I changed the answer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495663623, "post_id": 44162995, "comment_id": 75354371, "body": "Even before C++17, there&#39;s nothing to be gained from using <code>forward_as_tuple</code> here compared to <code>make_tuple</code>."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 9, "last_activity_date": 1495641641, "last_edit_date": 1495641641, "creation_date": 1495640535, "answer_id": 44162995, "question_id": 44162670, "link": "https://stackoverflow.com/questions/44162670/stdmap-of-tuple-to-tuple-and-using-emplace/44162995#44162995", "title": "std::map of tuple to tuple and using emplace", "body": "<p>AFAIK, no changes in C++17 matter in this context. As explained by NathanOliver and Barry, <code>{1,2,3}</code> cannot be deduced to have any type and hence cannot be matched against a template argument. You must provide the arguments for the constructor of <code>ThreeTuple</code> as deducible types, i.e.</p>\n\n<pre><code>m.emplace(std::piecewise_construct,\n          std::forward_as_tuple(1,2,3),\n          std::forward_as_tuple(4,5,6));\n</code></pre>\n\n<p>which calls the constructor</p>\n\n<pre><code>template&lt;typename T1, typename T2&gt;\ntemplate&lt;typename... Args1, typename... Args2 &gt;\nstd::pair&lt;T1,T2&gt;::pair(std::piecewise_construct_t,\n                       std::tuple&lt;Args1...&gt;, std::tuple&lt;Args2...&gt;);\n</code></pre>\n\n<p>In this particular case, you can even omit the <code>std::piecewise_construct</code></p>\n\n<pre><code>m.emplace(std::forward_as_tuple(1,2,3),\n          std::forward_as_tuple(4,5,6));\n</code></pre>\n\n<p>or (in C++17 as pointed out by Nicol in a comment)</p>\n\n<pre><code>m.emplace(std::tuple(1,2,3), std::tuple(4,5,6));\n</code></pre>\n\n<p>which are equivalent to </p>\n\n<pre><code>m.emplace(ThreeTuple(1,2,3), ThreeTuple(4,5,6));\n</code></pre>\n\n<p>and call the constructor</p>\n\n<pre><code>template&lt;typename T1, typename T2&gt;\nstd::pair&lt;T1,T2&gt;::pair(const&amp;T1, const&amp;T2);\n</code></pre>\n\n<hr>\n\n<p>Note also that AFAIK you cannot get this working by using <code>std::initializer_list&lt;int&gt;</code> explicitly. The reason is simply that there is not suitable constructor for <code>pair&lt;ThreeTuple,ThreeTuple&gt;</code> (the <code>value_type</code> of your map).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14734058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wg8V3.jpg?s=128&g=1", "display_name": "Roland Grinis", "link": "https://stackoverflow.com/users/14734058/roland-grinis"}, "is_accepted": false, "score": 0, "last_activity_date": 1611825629, "creation_date": 1611825629, "answer_id": 65934220, "question_id": 44162670, "link": "https://stackoverflow.com/questions/44162670/stdmap-of-tuple-to-tuple-and-using-emplace/65934220#65934220", "title": "std::map of tuple to tuple and using emplace", "body": "<p>Something like that would work in <code>C++17</code>:</p>\n<pre><code>m.try_emplace({1,2,3},4,5,6);\n</code></pre>\n"}], "owner": {"reputation": 65147, "user_id": 473798, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dfe7867872770d2ce64436e7393cede3?s=128&d=identicon&r=PG", "display_name": "Michael Goldshteyn", "link": "https://stackoverflow.com/users/473798/michael-goldshteyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2721, "favorite_count": 2, "accepted_answer_id": 44162928, "answer_count": 3, "score": 8, "last_activity_date": 1611825629, "creation_date": 1495639585, "question_id": 44162670, "link": "https://stackoverflow.com/questions/44162670/stdmap-of-tuple-to-tuple-and-using-emplace", "title": "std::map of tuple to tuple and using emplace", "body": "<p>Consider the following code, compiled with g++ 7.0.1 (-std=c++17):</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;tuple&gt;\n\nint main()\n{\n    // Create an alias for a tuple of three ints\n    using ThreeTuple=std::tuple&lt;int,int,int&gt;;\n    // Create an alias for a map of tuple to tuple (of three ints)\n    using MapThreeTupleToThreeTuple=std::map&lt;ThreeTuple,ThreeTuple&gt;;\n\n    MapThreeTupleToThreeTuple m;\n\n    // The following does NOT compile\n    m.emplace({1,2,3},{4,5,6});\n\n    // ..., and neither does this\n    m.emplace(std::piecewise_construct,{1,2,3},{4,5,6});\n}\n</code></pre>\n\n<p>I would have thought that the <code>initializer_list</code> arguments to <code>map::emplace()</code> would have sufficed and would have resulted in the insertion of the tuple key to tuple value association as specified. Apparently, the compiler disagrees.</p>\n\n<p>Of course creating a tuple explicitly (i.e., <code>ThreeTuple{1,2,3}</code> instead of just <code>{1,2,3}</code>) and passing that to <code>map::emplace()</code> solves the problem, but why can't the initializer lists be passed directly to <code>map::emplace()</code> which would automatically forward them to the tuple constructors?</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 23607, "user_id": 407650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/v5HaT.png?s=128&g=1", "display_name": "XCS", "link": "https://stackoverflow.com/users/407650/xcs"}, "edited": false, "score": 3, "creation_date": 1495639160, "post_id": 44162463, "comment_id": 75341496, "body": "But it is in the row column format..."}, {"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 1, "creation_date": 1495639175, "post_id": 44162463, "comment_id": 75341507, "body": "It is just what happens when you store your arrays in row-major order. There have been very good reasons to do this in the past, eg. showing an image on a raster display. There&#39;s nothing to stop to putting your own arrays in column-major order if that&#39;s what you felt you really needed."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1495639275, "post_id": 44162463, "comment_id": 75341571, "body": "<code>int array[HEIGHT][WIDTH]</code> =&gt; <code>array[y][x]</code>, <code>int array[WIDTH][HEIGHT]</code> =&gt; <code>array[x][y]</code>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1495639382, "post_id": 44162463, "comment_id": 75341640, "body": "I&#39;m actually curious what made you think that you <i>have</i> to do that? E.g.: what resources gave this (mis)information?"}, {"owner": {"reputation": 49, "user_id": 4436141, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000108590744/picture?type=large", "display_name": "Plato Manchi", "link": "https://stackoverflow.com/users/4436141/plato-manchi"}, "edited": false, "score": 0, "creation_date": 1495639580, "post_id": 44162463, "comment_id": 75341806, "body": "I&#39;m saw this GDC talk  <a href=\"http://gdcvault.com/play/1021866/Code-Clinic-2015-How-to\" rel=\"nofollow noreferrer\">gdcvault.com/play/1021866/Code-Clinic-2015-How-to</a>  where author talks about difference between RowMajor access and ColumnMajor access. I know I can store it any format i want, But he shows that RowMajor access is far faster than column major access because there are fewer jumps while reading memory"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1495639759, "post_id": 44162463, "comment_id": 75341959, "body": "Ok, so if you understand why he did it and you know that you can do either, then what exactly is unclear?"}, {"owner": {"reputation": 49, "user_id": 4436141, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000108590744/picture?type=large", "display_name": "Plato Manchi", "link": "https://stackoverflow.com/users/4436141/plato-manchi"}, "edited": false, "score": 0, "creation_date": 1495640006, "post_id": 44162463, "comment_id": 75342137, "body": "What is unclear is why is do i have to pass index in (y, x) fashion than traditional (x, y) fashion that we are so used to in math."}, {"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 3, "creation_date": 1495640167, "post_id": 44162463, "comment_id": 75342273, "body": "...because you&#39;ve made your array in row-major order, instead of column-major order. If you wanted the traditional way, make a column-major array. Or, alternatively, make a class that wraps your array and provides a convenience <code>(x, y)</code> accessor (which is what most people, and libraries, do in the end)."}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 6917600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRxHq.jpg?s=128&g=1", "display_name": "Eric Bischoff", "link": "https://stackoverflow.com/users/6917600/eric-bischoff"}, "is_accepted": true, "score": 0, "last_activity_date": 1495642873, "creation_date": 1495642873, "answer_id": 44163765, "question_id": 44162463, "link": "https://stackoverflow.com/questions/44162463/why-is-2d-array-accessor-columnrow-and-not-rowcolumn-format/44163765#44163765", "title": "Why is 2D array accessor [Column][Row] and not [Row][Column] format?", "body": "<p>The [row][col] convention makes since when you look at the conventions used mathematics. Think about and order pair from algebra: (x, y) where the x comes first. This is consistent in math until you get all the way to linear algebra where the order suddenly changes. When dealing with matrices the up-down element should come first as in: M[row][col]. This convention is used in linear algebra for constancy in higher level operations like matrix multiplication...or multiplying a 3x3 matrix by a 3 vector (or 3x1 matrix). If you think of it like a matrix of discrete values instead of a point it makes since.</p>\n"}], "owner": {"reputation": 49, "user_id": 4436141, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000108590744/picture?type=large", "display_name": "Plato Manchi", "link": "https://stackoverflow.com/users/4436141/plato-manchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1496620702, "accepted_answer_id": 44163765, "answer_count": 1, "score": -3, "last_activity_date": 1495642873, "creation_date": 1495639033, "last_edit_date": 1495639873, "question_id": 44162463, "link": "https://stackoverflow.com/questions/44162463/why-is-2d-array-accessor-columnrow-and-not-rowcolumn-format", "closed_reason": "Needs details or clarity", "title": "Why is 2D array accessor [Column][Row] and not [Row][Column] format?", "body": "<p>This might be a dumb question but I spend too long not knowing reason.</p>\n\n<p>All through out math classes we learn to put co-ordinates in <em>(x, y)</em> fashion. And it sticks into our minds. Now enter C/C++ and to access x=0, y=3 element, I have to do <code>data[0][3]</code> instead of <code>data[3][0]</code>. </p>\n\n<p>Why array accessing is <em>(y, x)</em> format and not <em>(x, y)</em>?</p>\n\n<p>Is there particular reason for this or is it something that I just have to accept and move on with my life?</p>\n\n<p><strong>Edit:</strong>\nI was watching this GDC talk by Mike Acton, (<a href=\"http://gdcvault.com/play/1021866/Code-Clinic-2015-How-to\" rel=\"nofollow noreferrer\">http://gdcvault.com/play/1021866/Code-Clinic-2015-How-to</a>) where he talks about performance regarding row major access and column major access. Its understandable since any Array is sequential memory, its takes time to jump to different memory location if i'm trying to do column major access.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt-designer"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1495651814, "post_id": 44162275, "comment_id": 75349032, "body": "<code>Ui::Foo</code> is a POD class and has neither the signals nor the slots. Its only use is to hold various widgets and layouts, and the initialization code. You want <code>connect(this, ..., this, ...)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1307, "user_id": 3159002, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/QjLl7.jpg?s=128&g=1", "display_name": "rationalcoder", "link": "https://stackoverflow.com/users/3159002/rationalcoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1495656419, "last_edit_date": 1495656419, "creation_date": 1495643047, "answer_id": 44163823, "question_id": 44162275, "link": "https://stackoverflow.com/questions/44162275/using-the-autogenerated-ui-for-both-sender-and-receiver-with-qt/44163823#44163823", "title": "Using the autogenerated Ui for both sender and receiver with qt", "body": "<p>There are a few things wrong here:</p>\n\n<ol>\n<li>There is no show() signal and</li>\n<li>Even if there were, you aren't using connect correctly.</li>\n</ol>\n\n<p>First, if your class were defined like this:</p>\n\n<pre><code>namespace Ui { class MainWindow; }\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nsignals:\n    void someSignal();\n\npublic slots:\n    void doSomething() {}\n\nprivate:\n    Ui::MainWindow *ui;\n};\n</code></pre>\n\n<p>The appropriate call to <code>connect</code> in the constructor would be:<br>\n<code>QWidget::connect(this, SIGNAL(someSignal()), this, SLOT(doSomething()));</code></p>\n\n<p>Even if there were a show signal, you wouldn't get it from <code>ui</code>, you would get it from <code>this</code>. The UI classes are just dumb containers for widgets that you add through the designer.</p>\n\n<p>To perform some action when your class is shown, you can either override<br>\n <code>virtual void showEvent(QShowEvent *);</code> (more robust, but slightly more complex)</p>\n\n<p>or simply define your own show() slot that does what you want and calls QWidget::show() at the end of it. I prefer the latter, so I will show you that.</p>\n\n<p>Start by defining your show slot like this:</p>\n\n<pre><code>namespace Ui { class MainWindow; }\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT \npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\npublic slots:\n    void doSomething() {}\n    void show();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n</code></pre>\n\n<p>Then, in your implementation file, do this:</p>\n\n<pre><code>void MainWindow::show()\n{\n    doSomething();\n    QWidget::show();\n}\n</code></pre>\n\n<p>I have worked with the Qt framework for quite some time now, and I have never needed to override the show event; it is simply not worth it for most use cases. If you really want a show signal that others can connect to, just add a custom signal for it and emit in in <code>MainWindow::show()</code>. Only resort to overriding event handlers if you can't make this work for what you are doing(<em>very</em> rarely necessary).</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 3276787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7951bd9a41d6fe00428ba92f11ddd18c?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Del Sannio", "link": "https://stackoverflow.com/users/3276787/antonio-del-sannio"}, "edited": false, "score": 0, "creation_date": 1495697157, "post_id": 44163912, "comment_id": 75364281, "body": "I&#39;ve used the first method,the doSomething() method runs continuously ,the connect(....) string is in the constructor of the StartWindow ,so there are 2 problems: the first is that the signal is sent continuously and anyway is not sent when the form is shown but during the constructor.So even if i add a disconnect at the end doSomething the slot is called before the form is shown"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1495643622, "last_edit_date": 1495643622, "creation_date": 1495643318, "answer_id": 44163912, "question_id": 44162275, "link": "https://stackoverflow.com/questions/44162275/using-the-autogenerated-ui-for-both-sender-and-receiver-with-qt/44163912#44163912", "title": "Using the autogenerated Ui for both sender and receiver with qt", "body": "<p>That signal does not exist by default, we must create it, we can override the <code>showEvent()</code> method:</p>\n\n<p><strong>.h</strong></p>\n\n<pre><code>protected:\n    void showEvent(QShowEvent *event);\n\nsignals:\n    void showSignal();\n</code></pre>\n\n<p><strong>.cpp</strong></p>\n\n<pre><code> connect(this, &amp;StartWindow::showSignal, this, &amp;StartWindow::doSomething);\n\nvoid StartWindow::showEvent(QShowEvent *event)\n{\n    emit showSignal();\n    QMainWindow::showEvent(event);\n}\n\nvoid StartWindow::doSomething()\n{\n    qDebug()&lt;&lt;\"show\";\n}\n</code></pre>\n\n<p>Or you can override the <code>eventFilter</code> method.</p>\n\n<p><strong>.h</strong></p>\n\n<pre><code>protected:\n    bool eventFilter(QObject *watched, QEvent *event);\n\nsignals:\n    void showSignal();\n</code></pre>\n\n<p><strong>.cpp</strong></p>\n\n<pre><code>installEventFilter(this);\n\nconnect(this, &amp;StartWindow::showSignal, this, &amp;StartWindow::doSomething);\n\nbool StartWindow::eventFilter(QObject *watched, QEvent *event)\n{\n    if(watched==this &amp;&amp; event-&gt;type() == QEvent::Show)\n        emit showSignal();\n    return QMainWindow::eventFilter(watched, event);\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3276787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7951bd9a41d6fe00428ba92f11ddd18c?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Del Sannio", "link": "https://stackoverflow.com/users/3276787/antonio-del-sannio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555824258, "creation_date": 1495638415, "last_edit_date": 1555824258, "question_id": 44162275, "link": "https://stackoverflow.com/questions/44162275/using-the-autogenerated-ui-for-both-sender-and-receiver-with-qt", "title": "Using the autogenerated Ui for both sender and receiver with qt", "body": "<p>I need to call a method after the ui has been shown,so i want to connect\nthe frame with itself,in particular using the show signal.\nI've created a new form with auto generated code by qtcreator.This is the auto generated header. </p>\n\n<pre><code>#define STARTWINDOW_H\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass StartWindow;\n}\n\nclass StartWindow : public QMainWindow\n{\nQ_OBJECT\n\npublic:\nexplicit StartWindow(QWidget *parent = 0);\n~StartWindow();\n\nprivate:\nUi::StartWindow *ui;\n\npublic slots:\nvoid doSomething();\n};\n\n#endif // STARTWINDOW_H\n</code></pre>\n\n<p>in the cpp file no one of the following codes work</p>\n\n<pre><code>connect(ui,SIGNAL(QEvent::Show),this,SLOT(doSomething()));\n\nconnect(*ui,SIGNAL(QEvent::Show),this,SLOT(doSomething()));\n\nconnect(this-&gt;ui,SIGNAL(QEvent::Show),this,SLOT(doSomething()));\n</code></pre>\n\n<p>What's the right way to do it?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 2, "creation_date": 1495638388, "post_id": 44162244, "comment_id": 75340897, "body": "Did you try it?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1495638406, "post_id": 44162244, "comment_id": 75340913, "body": "Yes. What happened when you tried to run it?"}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 2, "creation_date": 1495638406, "post_id": 44162244, "comment_id": 75340914, "body": "You could get your code to compile and see for yourself."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1495639038, "post_id": 44162244, "comment_id": 75341395, "body": "<i>&quot;I know that in order to access private functions you need to call them from public functions&quot;</i> Who taught you so?"}], "answers": [{"comments": [{"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1495638957, "post_id": 44162269, "comment_id": 75341329, "body": "To clarify, the deal with <code>private:</code> (and also <code>protected:</code>) relates to a client&#39;s perspective. If you call a function from outside the class (including from a derived class) you may not have access."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1495638871, "last_edit_date": 1495638871, "creation_date": 1495638409, "answer_id": 44162269, "question_id": 44162244, "link": "https://stackoverflow.com/questions/44162244/calling-private-functions-from-another-private-function-of-the-same-class/44162269#44162269", "title": "Calling private functions from another private function of the same class", "body": "<p>Of course you can. You can <em>always</em> call a <code>private</code> function and access all class member data from any function within the class. That's what <code>private</code> does.</p>\n\n<p>(Note that you can <em>also</em> access the <code>private</code> members of an instance of that class passed into a member function of that class. Although surprising at first, it's how you implement overloaded operators, copy constructors, &amp;c.)</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 8048763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e212f9e3516fee9acea082cbd8268168?s=128&d=identicon&r=PG&f=1", "display_name": "RithvikK", "link": "https://stackoverflow.com/users/8048763/rithvikk"}, "is_accepted": false, "score": 0, "last_activity_date": 1495638433, "creation_date": 1495638433, "answer_id": 44162285, "question_id": 44162244, "link": "https://stackoverflow.com/questions/44162244/calling-private-functions-from-another-private-function-of-the-same-class/44162285#44162285", "title": "Calling private functions from another private function of the same class", "body": "<p>Yes you can because the function is within the class itself</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1495638549, "creation_date": 1495638549, "answer_id": 44162325, "question_id": 44162244, "link": "https://stackoverflow.com/questions/44162244/calling-private-functions-from-another-private-function-of-the-same-class/44162325#44162325", "title": "Calling private functions from another private function of the same class", "body": "<p>Private members of a class can be accessed by methods of the class and it's friends. It is irrelevant if that methods are private, public or protected by themselves.</p>\n"}, {"tags": [], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "is_accepted": false, "score": 0, "last_activity_date": 1495638712, "creation_date": 1495638712, "answer_id": 44162381, "question_id": 44162244, "link": "https://stackoverflow.com/questions/44162244/calling-private-functions-from-another-private-function-of-the-same-class/44162381#44162381", "title": "Calling private functions from another private function of the same class", "body": "<p>Your example should work, if I didn't miss a detail. So to answer your question, it is possible to access a private function from another private function of the same class.</p>\n"}], "owner": {"reputation": 49, "user_id": 4709510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee5dc491719fe4824f55c3edae04121b?s=128&d=identicon&r=PG&f=1", "display_name": "Hemang Purohit", "link": "https://stackoverflow.com/users/4709510/hemang-purohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 0, "accepted_answer_id": 44162269, "answer_count": 4, "score": 0, "last_activity_date": 1495638871, "creation_date": 1495638339, "last_edit_date": 1495638795, "question_id": 44162244, "link": "https://stackoverflow.com/questions/44162244/calling-private-functions-from-another-private-function-of-the-same-class", "title": "Calling private functions from another private function of the same class", "body": "<p>Can I call private functions from another private function of the same class, for example:</p>\n\n<pre><code>Class A {\npublic: \n  double a; \n  double b; \n  wp(a , b);\n\nprivate: \n   wp1(x);\n   wp2(y);\n};\nA::wp(a,b){\n  a = wp1(x);\n}\nA::wp1(x){\n  x = wp2(y); }\n</code></pre>\n\n<p>I know that in order to access private functions you need to call them from public functions, but can I call private functions from other private functions of the same class? </p>\n"}, {"tags": ["c++", "openmp", "intel-mkl"], "comments": [{"owner": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 0, "creation_date": 1495638485, "post_id": 44162147, "comment_id": 75340978, "body": "I seem to remember icc compiling OpenMP code with -openmp and not linking to an (external) library (-liomp5). Not sure if that is still true."}], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "edited": false, "score": 0, "creation_date": 1496235149, "post_id": 44207085, "comment_id": 75577316, "body": "In Xcode one has to add /opt/intel/compilers_and_libraries_2017.4.181/mac/compiler/l&zwnj;&#8203;ib in the Runpath search path"}], "tags": [], "owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "is_accepted": true, "score": 0, "last_activity_date": 1495819444, "creation_date": 1495819444, "answer_id": 44207085, "question_id": 44162147, "link": "https://stackoverflow.com/questions/44162147/set-openmp-in-mkl-library/44207085#44207085", "title": "Set openmp in MKL Library", "body": "<p>I found the answer on <a href=\"https://software.intel.com/en-us/forums/intel-fortran-compiler-for-linux-and-mac-os-x/topic/645194\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/forums/intel-fortran-compiler-for-linux-and-mac-os-x/topic/645194</a></p>\n\n<p>Basically one has to add \n-Wl,-rpath,/opt/intel/compilers_and_libraries_2017.4.181/mac/compiler/lib </p>\n\n<p>during compilation. Now openmp with icc works perfectly </p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 2778731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df5a3223c8e6e38ddf029db68f8a29b6?s=128&d=identicon&r=PG", "display_name": "incorelabs", "link": "https://stackoverflow.com/users/2778731/incorelabs"}, "is_accepted": false, "score": 1, "last_activity_date": 1516685703, "creation_date": 1516685703, "answer_id": 48394873, "question_id": 44162147, "link": "https://stackoverflow.com/questions/44162147/set-openmp-in-mkl-library/48394873#48394873", "title": "Set openmp in MKL Library", "body": "<p>I have tried a few ways to solve this issue. It literally took an entire day. But here are the results,</p>\n\n<blockquote>\n  <p>Project Files</p>\n</blockquote>\n\n<p>I created a very simple Project with just one file, named,</p>\n\n<pre><code>test.c\n</code></pre>\n\n<h2>1. The Easiest Solution</h2>\n\n<p>Fixing this can be as simple as,</p>\n\n<pre><code>icc -qopenmp -qopenmp-link=static test.c\n</code></pre>\n\n<p>This method just tells the compiler to link to static OpenMP run-time libraries.</p>\n\n<p>Interestingly, the docs at <a href=\"https://software.intel.com/en-us/node/522962\" rel=\"nofollow noreferrer\" title=\"Intel C++ Compiler Docs\">Intel C++ Compiler Docs v.15</a> say that this is deprecated while <a href=\"https://software.intel.com/en-us/node/682582\" rel=\"nofollow noreferrer\">Intel C++ Compiler Docs v.17</a> do not even mention about this argument, BUT it works. Probably they forgot to take it out.</p>\n\n<h2>2. Another method (which I do not recommend, nor do folks at Intel)</h2>\n\n<p>To compile the file you can use the normal \"-qopenmp\" flag</p>\n\n<pre><code>icc -qopenmp test.c\n</code></pre>\n\n<p>This creates the \"a.out\" file.</p>\n\n<p>This method of fixing the error makes use of command-line utility called,</p>\n\n<pre><code>install_name_tool\n</code></pre>\n\n<p>Using this method we can change the path of @rpath/libiomp5.dylib</p>\n\n<pre><code>install_name_tool -change @rpath/libiomp5.dylib /opt/intel/compilers_and_libraries_2018.1.126/mac/compiler/lib/libiomp5.dylib a.out\n</code></pre>\n\n<p><strong>Note:</strong> In place of <strong>compilers_and_libraries_2018.1.126</strong> it should be your version of the compiler.</p>\n\n<h2>3. One of the BEST (correct) ways</h2>\n\n<p>You can just add</p>\n\n<pre><code>export DYLD_LIBRARY_PATH=\"/opt/intel/compilers_and_libraries_2018.1.126/mac/compiler/lib\"\n</code></pre>\n\n<p>To your <strong>~/.bash_profile</strong></p>\n\n<p>And then use the normal way of compiling,</p>\n\n<pre><code>icc -qopenmp test.c\n</code></pre>\n\n<p>Everything works perfectly.</p>\n\n<hr>\n\n<p><strong>Quick tip:</strong> You can use the otool command line utility to check the libraries your file links to.</p>\n\n<pre><code>otool -L a.out\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 44207085, "answer_count": 2, "score": -1, "last_activity_date": 1516685703, "creation_date": 1495638142, "last_edit_date": 1495787625, "question_id": 44162147, "link": "https://stackoverflow.com/questions/44162147/set-openmp-in-mkl-library", "title": "Set openmp in MKL Library", "body": "<p>I am trying to compile a minimal C++ code </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;mkl.h&gt;\n#include &lt;omp.h&gt;\n\nint main(int argc, char *argv[])\n{\nomp_set_num_threads(4);\n\nreturn 0;\n}\n</code></pre>\n\n<p>using the MKL library (icc version 17.0.4) in a MacOSX Sierra 10.12.5, using the command</p>\n\n<pre><code>icc main.cpp -o main.o -DMKL_ILP64 -I/opt/intel/compilers_and_libraries_2017.4.181/mac/mkl/include \\\n  -L/opt/intel/compilers_and_libraries_2017.4.181/mac/mkl/lib -Wl,-rpath,/opt/intel/compilers_and_libraries_2017.4.181/mac/mkl/lib -lmkl_intel_ilp64 \\\n  -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl\n</code></pre>\n\n<p>However I receive the following error when I run the program</p>\n\n<pre><code>dyld: Library not loaded: @rpath/libiomp5.dylib\n  Referenced from: /Users/user/C++/MKL1/./main.o\nReason: image not found\n/bin/sh: line 1:  8898 Abort trap: 6           ./main.o\nmake: *** [run] Error 134\n</code></pre>\n\n<p>How to set up properly the openmpi with the MKL library? I tried to follow the instruction in <a href=\"https://software.intel.com/en-us/articles/dyld-library-not-loadedlibiomp5dylib?page=1#comment-1905809\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/articles/dyld-library-not-loadedlibiomp5dylib?page=1#comment-1905809</a></p>\n\n<p>by adding </p>\n\n<pre><code> source /opt/intel/compilers_and_libraries_2017.4.181/mac/mkl/bin/mklvars.sh intel64\n</code></pre>\n\n<p>However I still get the same error during runtime. </p>\n"}, {"tags": ["python", "c++", "boost", "dll", "python-import"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495639345, "post_id": 44161857, "comment_id": 75341619, "body": "Save yourself all of this trouble and get the <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/1.64.0/\" rel=\"nofollow noreferrer\">prebuilt binaries for Visual Studio</a>"}, {"owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495640910, "post_id": 44161857, "comment_id": 75342841, "body": "error: &quot;unresolved external symbol __imp_PyString_Type&quot; in x64 config. Tons of &quot;error LNK2001: unresolved external symbol &quot;__declspec(dllimport) ...&quot; errors in x32 config."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495642691, "post_id": 44161857, "comment_id": 75343977, "body": "Those errors that start with <code>__imp_</code> indicate you are not specifying the appropriate import library &quot;.lib&quot; file in your linker settings.  I see nothing in your description that states that you have told the linker what the names of the import library or libraries that will be used.  Setting paths doesn&#39;t do this, and DLL&#39;s play no role in the build process -- they are used only at runtime.  The prebuilt binaries include the import libraries (the .lib files that are not very large, as opposed to the static libraries which are megabytes in size)."}, {"owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495644486, "post_id": 44161857, "comment_id": 75345060, "body": "There are only two .lib files related to Boost.Python in lib64-msvc-14.0 folder of the prebuild binaries: boost_python-vc140-mt-1_64.lib and boost_python-vc140-mt-gd-1_64.lib. I added each of them in Property Pages-&gt;Linker-&gt;Input-&gt;Additional Dependencies (this is the only place I can find to specify library file in VS 2015). But same error in x64 config (lib64-msvc-14.0 means target is 64 bit so should not be used with x86 config, right?)"}, {"owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1495689753, "post_id": 44161857, "comment_id": 75360960, "body": "The default download provided by python&#39;s official website is 32 bit (****, who is using 32 bit CPU today? I saw everyone use 64 bit OS five years ago). I re-installed 64 bit python 2.7 and there is no linking error now. But I still have no idea how to import the DLL in python command line."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1495691271, "post_id": 44161857, "comment_id": 75361520, "body": "Please show <b>all</b> relevant code. If you have compiled a hello world module, show the source. If you have a sys.path.append somewhere in the command line, show it. Every little detail matters."}, {"owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "edited": false, "score": 0, "creation_date": 1495698205, "post_id": 44161857, "comment_id": 75364866, "body": "The source code is in the webpage I linked in the question. I just copy them literally into VS2015 without any change."}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "is_accepted": true, "score": 4, "last_activity_date": 1495776287, "last_edit_date": 1495776287, "creation_date": 1495775734, "answer_id": 44194094, "question_id": 44161857, "link": "https://stackoverflow.com/questions/44161857/the-dll-created-by-boost-python-cannot-be-imported-following-boost-pythons-qui/44194094#44194094", "title": "The dll created by Boost.Python cannot be imported (following Boost Python&#39;s QuickStart)", "body": "<p>I solved the problem myself. Thank jagerman for his useful suggestions.</p>\n\n<p>(1) Just change the output filename from ConsoleApplication1.dll to hello_ext.pyd. You can automate this rename by setting Pages->General->Target Extension to \".pyd\". Make sure the file hello_ext.pyd is in python's search path. You can just throw it to C:\\Python27\\DLLs which is one of python's built-in search paths.</p>\n\n<p>(2) Now you will got a different import error: DLL load failed: The specified module could not be found. If you look closely at the file size of hello_ext.pyd, you'll likely notice something wired -- it's only 19KB. That means it doesn't contain everything needed to import into python, so python has to find the missing part to properly import it. Yes, you may guess that -- the only possible missing stuff is Boost.Python libraries, so add path to it into PATH environment variable -- for me, it is C:\\local\\boost_1_64_0\\lib64-msvc-14.0.</p>\n\n<p>Then the problem is solved. Note: some answers in other related questions may suggest build as a static library, That way, you will got another import error: DLL load failed: %1 is not a valid Win32 application. So just build as DLL. PS: you don't need to specify boost_python-vc140-mt-1_64.lib or boost_python-vc140-mt-gd-1_64.lib in Property Pages->Linker->Input->Additional Dependencies as some comments suggested.</p>\n"}], "owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1974, "favorite_count": 0, "accepted_answer_id": 44194094, "answer_count": 1, "score": 0, "last_activity_date": 1495776287, "creation_date": 1495637353, "last_edit_date": 1495698087, "question_id": 44161857, "link": "https://stackoverflow.com/questions/44161857/the-dll-created-by-boost-python-cannot-be-imported-following-boost-pythons-qui", "title": "The dll created by Boost.Python cannot be imported (following Boost Python&#39;s QuickStart)", "body": "<p>I'm trying to follow the instructions <a href=\"http://www.boost.org/doc/libs/1_49_0/libs/python/doc/tutorial/doc/html/index.html\" rel=\"nofollow noreferrer\">here</a> to use the Boost.Python. The source code is in that webpage. I can compile, link this simple sample code but I cannot import the resulting module in python command line. It always error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named hello_ext\n</code></pre>\n\n<p>I have no idea what the matter is because that page just says: \"That's it. We're done. We can now build this as a shared library. The resulting DLL is now visible to Python.\" This is my building environment:</p>\n\n<ul>\n<li>Windows 7 64 bit, I am the Administrator and run cmd as Administrator</li>\n<li>boost version is 1.64.0 (precompiled binary boost_1_64_0-msvc-14.0-64.exe downloaded from <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/1.64.0/\" rel=\"nofollow noreferrer\">here</a>)</li>\n<li>python version is 2.7.13, 64 bit</li>\n<li>Visual studio 2015, Update 3</li>\n<li>The target is a DLL</li>\n<li>The project name is ConsoleApplication1, so the output is ConsoleApplication1.dll. I have changed the filename to hello_ext.dll but same error.</li>\n<li>I built with x64 configuration and I have verified with dumpbin that the output ConsoleApplication1.dll is really 64 bit</li>\n<li>I have added the path ......\\ConsoleApplication1\\x64\\Release which contains ConsoleApplication1.dll into sys.path inside python command line.</li>\n</ul>\n\n<p>So, could you please tell me how to import the module in python? Thanks a lot.</p>\n"}, {"tags": ["c++", "matlab", "long-integer", "equation"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 4, "creation_date": 1495637643, "post_id": 44161850, "comment_id": 75340290, "body": "Please try to localise your problem and supply an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Can&#39;t you simplify your expressions?"}, {"owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "edited": false, "score": 0, "creation_date": 1495637760, "post_id": 44161850, "comment_id": 75340399, "body": "Have you tried <code>unsigned long long</code>?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "edited": false, "score": 1, "creation_date": 1495638362, "post_id": 44161850, "comment_id": 75340868, "body": "@pandoragami That will not work since unsigned long long is first of all only for integers and this question is using doubles. Next, unsigned long long can only hold numbers around 20 digits, while this requires numbers that are around 250 digits in percision."}, {"owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1495638478, "post_id": 44161850, "comment_id": 75340971, "body": "@Arnav, point taken."}], "answers": [{"tags": [], "owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "is_accepted": false, "score": 2, "last_activity_date": 1495638010, "creation_date": 1495638010, "answer_id": 44162103, "question_id": 44161850, "link": "https://stackoverflow.com/questions/44161850/how-to-convert-matlab-long-line-equation-to-c/44162103#44162103", "title": "how to convert matlab Long line equation to c++?", "body": "<p>You might want to try GMP from gmplib.org</p>\n\n<blockquote>\n  <p>GMP is a free library for arbitrary precision arithmetic, operating on\n  signed integers, rational numbers, and floating-point numbers. There\n  is no practical limit to the precision except the ones implied by the\n  available memory in the machine GMP runs on. GMP has a rich set of\n  functions, and the functions have a regular interface.</p>\n</blockquote>\n\n<p>You're question is very broad though plus since you're using Visual Studio it might be a nightmare to compile this with your existing library. I suggest you go over to Linux and work on that for \"scientific computation\".</p>\n"}], "owner": {"reputation": 1, "user_id": 5603069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c85efd5904d65a0199cf6e60a814f28?s=128&d=identicon&r=PG&f=1", "display_name": "p.amirjan", "link": "https://stackoverflow.com/users/5603069/p-amirjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495638010, "creation_date": 1495637324, "last_edit_date": 1495637578, "question_id": 44161850, "link": "https://stackoverflow.com/questions/44161850/how-to-convert-matlab-long-line-equation-to-c", "title": "how to convert matlab Long line equation to c++?", "body": "<p>I converted some matlab code to c++. Some lines of the code have about 250,000 length. In addition, they involve very big mantissa numbers such as \u201c2.209647215146515615616515615615103202897891\n316e-258\u201d and the precision is important to me (I know the number is very near to zero, but I can\u2019t replace it with zero).</p>\n\n<p>These codes run in matlab perfectly (fast and exact), but in c++, there is some problem:</p>\n\n<ul>\n<li><p>First: the build time takes too long.</p></li>\n<li><p>Second: after spend a long time for build, it works very very very slow!\nI\u2019m Using Visual Studio 2015 and when write this codes in it, it stopped working because of the huge size of lines and preprocessing tasks and I have to restart it.\nIs there any way to work with long lines of code and very big numbers in c++ and Visual Studio IDE?</p></li>\n</ul>\n"}, {"tags": ["c++", "inheritance", "abstract"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1495637106, "post_id": 44161663, "comment_id": 75339817, "body": "In your explanation every class has a different <code>print</code> function (different parameters) while in your example all of them (except <code>B</code>) have a same one (same parameters) - which one is it?"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495637233, "post_id": 44161663, "comment_id": 75339926, "body": "Check out the <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">visitor pattern</a>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1495637294, "post_id": 44161663, "comment_id": 75339982, "body": "However in general for downcasting you should use <code>dynamic_cast</code> and check if the cast succeeded (returned a non-null value)"}, {"owner": {"reputation": 9, "user_id": 5145133, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mluN0FSQL1I/AAAAAAAAAAI/AAAAAAAAAPc/3_sa_j55vQM/photo.jpg?sz=128", "display_name": "the quite storm", "link": "https://stackoverflow.com/users/5145133/the-quite-storm"}, "edited": false, "score": 0, "creation_date": 1495637376, "post_id": 44161663, "comment_id": 75340053, "body": "Don&#39;t mind about the example code,i only filled class B.All i want is to show an example about the result."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 2, "creation_date": 1495637577, "post_id": 44161663, "comment_id": 75340221, "body": "Why don&#39;t you polymorphism?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495637675, "post_id": 44161663, "comment_id": 75340315, "body": "&quot;Don&#39;t mind about the example code&quot; No, we should worry about it. You need to post all the code necessary to understand and solve the problem."}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 6035486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67cdc658afecfba575a730d6e7b62396?s=128&d=identicon&r=PG&f=1", "display_name": "kdcode", "link": "https://stackoverflow.com/users/6035486/kdcode"}, "is_accepted": false, "score": 2, "last_activity_date": 1495639114, "creation_date": 1495639114, "answer_id": 44162489, "question_id": 44161663, "link": "https://stackoverflow.com/questions/44161663/converting-base-class-pointer-to-unknown-derived-class-pointer/44162489#44162489", "title": "converting base class pointer to unknown derived class pointer", "body": "<p>You need virtual functions. declaring <code>A::print</code> as virtual would make it so that calling print on a pointer of type <code>A</code> will call the <code>print</code> of which class the object was constructed as, instead of using pointer type to decide what <code>print</code> to call.</p>\n\n<p>You also need to remove <code>D::print</code> as you expect <code>A::print</code> get called if the object is of type <code>D</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nclass A{\npublic:\n    virtual void print(){ cout &lt;&lt; \"This is printed twice.\" &lt;&lt; endl; }\n};\n\nclass C : public A{\npublic:\n    void print(){ cout &lt;&lt; \"This is desired output.\" &lt;&lt; endl; }\n};\n\nclass D : public A{\n\n};\n\nclass B : public A{\npublic:\n    void print(C* c){ c-&gt;print(); }\n    void print(A* d){ d-&gt;print(); }\n};\n\nint main()\n{\n    D d;\n    C c;\n    B b;\n    vector&lt;A*&gt; a; //B,C,D will be stored inside a vector like this.\n    a.push_back(&amp;c);\n    a.push_back(&amp;d);\n    b.print(a[0]);\n    b.print(a[1]);\n    return 0;\n}\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>This is desired output.\nThis is printed twice.\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5145133, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mluN0FSQL1I/AAAAAAAAAAI/AAAAAAAAAPc/3_sa_j55vQM/photo.jpg?sz=128", "display_name": "the quite storm", "link": "https://stackoverflow.com/users/5145133/the-quite-storm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495639385, "creation_date": 1495636850, "last_edit_date": 1495637554, "question_id": 44161663, "link": "https://stackoverflow.com/questions/44161663/converting-base-class-pointer-to-unknown-derived-class-pointer", "title": "converting base class pointer to unknown derived class pointer", "body": "<p>I have 5 derived classes from an abstract base class. <strong>One function</strong> is overloaded which exists <strong>in every derived class</strong>, let's name it, <code>print()</code>. Example for Derived 4 class:</p>\n\n<pre><code>Derived4::print(*Derived1)\nDerived4::print(*Derived2)\nDerived4::print(*Derived3)\nDerived4::print(*Base)\n</code></pre>\n\n<p>Like i said before, all derived classes have print function, but arguments are different, like</p>\n\n<pre><code>Derived1::print(*Derived2)\nDerived1::print(*Derived3)\nDerived1::print(*Derived4)\nDerived1::print(*Base)\n</code></pre>\n\n<p>All objects are stored inside a vector like</p>\n\n<pre><code>vector&lt;Base*&gt; a\n</code></pre>\n\n<p>When i take one of them from vector and try to call print function, all calls are directed to print(*Base) function.I am not allowed to store the types, therefore don't have any idea what is coming from vector.Also, type checking is not allowed too.</p>\n\n<p>An example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nclass A{\npublic:\n    void print(){cout &lt;&lt; \"greetings from A\" &lt;&lt; endl;}\n};\n\nclass C : public A{\npublic:\n    void print(){cout &lt;&lt; \"greetings from C\" &lt;&lt; endl;}\n};\n\nclass D : public A{\npublic:\n    void print(){cout &lt;&lt; \"greetings from D\" &lt;&lt; endl;}\n}; \n\nclass B : public A{\npublic:\n    void print(C* c){c-&gt;print();}\n    void print(A* d){d-&gt;print();}\n};\n\nint main()\n{\n    D d;\n    C c;\n    B b;\n    vector&lt;A*&gt; a; //B,C,D will be stored inside a vector like this.\n    a.push_back(&amp;c);\n    a.push_back(&amp;d);\n    b.print(a[0]);\n    b.print(a[1]);\n    return 0;\n}\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>greetings from A\ngreetings from A\n</code></pre>\n\n<p>The desired result:</p>\n\n<pre><code>greetings from C\ngreetings from A\n</code></pre>\n"}, {"tags": ["c++", "opencv", "edge-detection", "opencv-contour"], "comments": [{"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1495636662, "post_id": 44161424, "comment_id": 75339400, "body": "Do you need to extend your technique to support other images? Because there are obviously some backgrounds for which thresholding isn&#39;t going to work too well."}, {"owner": {"reputation": 254, "user_id": 2512380, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9OJOa.jpg?s=128&g=1", "display_name": "Alex Ionescu", "link": "https://stackoverflow.com/users/2512380/alex-ionescu"}, "reply_to_user": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1495636957, "post_id": 44161424, "comment_id": 75339675, "body": "Generally the cards will be white and the background will be a table (light brown). I&#39;ve tried various code snippets and thresholding got me the best results."}, {"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1495637040, "post_id": 44161424, "comment_id": 75339755, "body": "Fair enough. I&#39;ve been working with colour models of late, and there are some simple ones which might have been useful here, but if thresholding is enough for your needs I won&#39;t bother talking about them."}, {"owner": {"reputation": 254, "user_id": 2512380, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9OJOa.jpg?s=128&g=1", "display_name": "Alex Ionescu", "link": "https://stackoverflow.com/users/2512380/alex-ionescu"}, "reply_to_user": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1495637143, "post_id": 44161424, "comment_id": 75339846, "body": "I&#39;m willing to learn if you could point me to some resources ;)"}, {"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1495637302, "post_id": 44161424, "comment_id": 75339992, "body": "One problem at a time. Anyway, my first though was to use a Hough transform, as they&#39;re nice and simple and easy to use and understand. Is this of any use? <a href=\"http://docs.opencv.org/2.4/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/doc/tutorials/imgproc/imgtrans/hough_lin&zwnj;&#8203;es/&hellip;</a>"}, {"owner": {"reputation": 254, "user_id": 2512380, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9OJOa.jpg?s=128&g=1", "display_name": "Alex Ionescu", "link": "https://stackoverflow.com/users/2512380/alex-ionescu"}, "reply_to_user": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1496141757, "post_id": 44161424, "comment_id": 75528436, "body": "I&#39;ve got pretty decent results using Hough lines, but only when using a good contrast between the background and the card. What alternatives are for thresholding to improve the accuracy in sub-optimal conditions?"}, {"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 0, "creation_date": 1496149832, "post_id": 44161424, "comment_id": 75534424, "body": "Well, without resorting to fancy (eg. tricky and probably unreliable) colour segmentation, you could just try running an edge detector (eg. <code>cv::Canny</code>) on the original image and using the output of that to try and find lines or rectangles from. Even against a white background, it should find the red inner border of the card OK. You might have issues finding the correct rectangle against a background with lots of long linear features, but again: one problem at a time."}], "answers": [{"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 0, "last_activity_date": 1495698090, "last_edit_date": 1495698090, "creation_date": 1495697574, "answer_id": 44174852, "question_id": 44161424, "link": "https://stackoverflow.com/questions/44161424/straight-lines-detection-in-contour-with-opencv/44174852#44174852", "title": "Straight lines detection in contour with openCV", "body": "<p>I would try as follows:</p>\n\n<ul>\n<li><p>approximately find the corners; this can be done for instance by looking for the farthest outline pixels in the eight main cardinal directions, giving an octagon (plus some logics to select the right four points);</p></li>\n<li><p>from the corners, you get an approximation of the sides;</p></li>\n<li><p>place an appropriate ROI around every edge (slanted rectangle) and straighten it up to make the edge close to horizontal;</p></li>\n<li><p>use a Hough transform in the ROIs, preferably on the vertical gradient alone. A little horizontal blur can help as well.</p></li>\n</ul>\n\n<p>The goal of using these ROIs is to reduce the possibilities of false detections and to make the detection direction-sensitive.</p>\n"}], "owner": {"reputation": 254, "user_id": 2512380, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9OJOa.jpg?s=128&g=1", "display_name": "Alex Ionescu", "link": "https://stackoverflow.com/users/2512380/alex-ionescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1408, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495698090, "creation_date": 1495636263, "question_id": 44161424, "link": "https://stackoverflow.com/questions/44161424/straight-lines-detection-in-contour-with-opencv", "title": "Straight lines detection in contour with openCV", "body": "<p>I've just started using openCV with c++ and I need to do some rectangle edge detection.</p>\n\n<p>This is the image that I'm using for testing:\n<a href=\"https://i.stack.imgur.com/IbAKn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IbAKn.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>and this is the result I'm getting by using thresholding (<code>THRESH_BINARY</code>):<a href=\"https://i.stack.imgur.com/U5q8G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U5q8G.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Using this code I'd say it's about 90% right:</p>\n\n<pre><code>void find_contour(Mat src)\n{\n    int largest_area=0;\n    int largest_contour_index=0;\n    Rect bounding_rect;\n\n    Mat thr;\n    cvtColor( src, thr, COLOR_BGR2GRAY ); //Convert to gray\n    threshold( thr, thr, 175 , 255, THRESH_BINARY ); //Threshold the gray\n\n    imshow(\"Binary\", thr);\n\n    vector&lt;vector&lt;Point&gt; &gt; contours; // Vector for storing contours\n\n    findContours( thr, contours, RETR_CCOMP, CHAIN_APPROX_SIMPLE ); // Find the contours in the image\n\n    for( size_t i = 0; i&lt; contours.size(); i++ ) // iterate through each contour.\n    {\n        double area = contourArea( contours[i] );  //  Find the area of contour\n\n        if( area &gt; largest_area )\n        {\n            largest_area = area;\n            largest_contour_index = i;               //Store the index of largest contour\n            bounding_rect = boundingRect( contours[i] ); // Find the bounding rectangle for biggest contour\n        }\n    }\n\n    drawContours( src, contours, largest_contour_index, Scalar( 0, 255, 0 ), 2 ); // Draw the largest contour using previously stored index.\n\n    imshow( \"result\", src );\n}\n</code></pre>\n\n<p>I'd like to get rid off the 'errors' on the right side and then draw polylines along each edge and find their intersection (card corners) so I can do a perspective transform.</p>\n\n<p>What would be the best way to accomplish this?</p>\n\n<p>I'm open to any suggestions.</p>\n\n<p>Thank you for your time!</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1495636534, "post_id": 44161416, "comment_id": 75339293, "body": "@&#208;\u0430n I suspect OP expected overload resolution to take into account access modifiers."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 4, "creation_date": 1495637057, "post_id": 44161416, "comment_id": 75339766, "body": "Isn&#39;t it &quot;better&quot; to provide another function altogether? Because <code>(*this)[index]</code> is a bit of a pain to write instead of <code>get(index)</code>, no?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1495658072, "post_id": 44161416, "comment_id": 75352026, "body": "Have you considered just not using inheritance? Having to ask these questions could be an indicator that you are simply shoe-horning inheritance where it&#39;s not a good fit. protected is very rarely a good idea. The same goes with splitting const vs mutable interfaces across base/derived."}, {"owner": {"reputation": 11122, "user_id": 4125751, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1821c6fd912db5a19d5b78627d100ca3?s=128&d=identicon&r=PG&f=1", "display_name": "thothal", "link": "https://stackoverflow.com/users/4125751/thothal"}, "edited": false, "score": 0, "creation_date": 1495693212, "post_id": 44161416, "comment_id": 75362319, "body": "Thanks for the advise. Yes indeed it is very likely that I am over-engineering. So which pattern should I use for the following case: I have a base class with a container, which I want to encapsulate. The client should have read-only access. My derived classes will populate the container, hence they need write access to the container. My class will be later used in a factory. So how to implement this interface properly?"}], "owner": {"reputation": 11122, "user_id": 4125751, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1821c6fd912db5a19d5b78627d100ca3?s=128&d=identicon&r=PG&f=1", "display_name": "thothal", "link": "https://stackoverflow.com/users/4125751/thothal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1495658317, "creation_date": 1495636241, "last_edit_date": 1495637238, "question_id": 44161416, "link": "https://stackoverflow.com/questions/44161416/allow-read-access-via-while-granting-write-access-only-to-subclasses", "title": "Allow read access via [] while granting write access only to subclasses", "body": "<pre><code>#include&lt;vector&gt;\n#include&lt;iostream&gt;\nclass A {\n  private:\n    std::vector&lt;int&gt; v_;\n  protected:\n    int&amp; operator[](int idx) { return (v_.at(idx)); }; //[1]\n  public:\n    A(): v_(5) {}\n    const int&amp; operator[](int idx) const {return (v_.at(idx)); }; //[2]\n};\n\nint main() {\n  A myA;\n  const A myB;\n  //std::cout &lt;&lt; myA[1] &lt;&lt; std::endl; //does not work [3]\n  std::cout &lt;&lt; myB[1] &lt;&lt; std::endl; //does work [4]\n}\n</code></pre>\n\n<p>Suppose I want to have <code>operator[]</code> to work in the following way:</p>\n\n<ol>\n<li>It should provide a read only interface to obtain the <em><code>i</code>th</em> element of the member vector <code>[2]</code>.</li>\n<li>Derived classes should however be allowed to use <code>operator[]</code> also to write some data into the vector. <code>[1]</code></li>\n</ol>\n\n<p>With these signatures I cannot define a non-const object and access it <code>[3]</code>. If I however delete the protected interface <code>[2]</code>, line <code>[3]</code> would work. Why is this the case?</p>\n\n<p>So what are my options to achieve the desired behaviour? Do I have to move <code>v_</code> to <code>protected</code> and assess it  directly from my sub-classes?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "qtconcurrent"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1495635639, "post_id": 44160968, "comment_id": 75338560, "body": "Why would you expect a speed-up? You&#39;re waiting for the future in each loop iteration."}, {"owner": {"reputation": 88, "user_id": 8059848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5f2a0af7d08728d6163eff317cd2fd?s=128&d=identicon&r=PG&f=1", "display_name": "NullAchtFuffZehn", "link": "https://stackoverflow.com/users/8059848/nullachtfuffzehn"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1495635957, "post_id": 44160968, "comment_id": 75338819, "body": "I&#39;m not an expert in this field but I expect map() to start 4 Threads which should make this code line finish faster than the STL functions. Or did I misunderstand the concept of this function?"}], "answers": [{"comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 1, "creation_date": 1495641127, "post_id": 44162972, "comment_id": 75342993, "body": "How did you tested the overhead of <code>QtConcurrent</code>? Note that you grouped the <code>++</code> operation into <code>num_threads</code> batches. You could do this with <code>QtConcurrent</code> too."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495641786, "post_id": 44162972, "comment_id": 75343414, "body": "@m7913d That is what <code>QtConcurrent</code> is supposed to do; launch a number of sub-threads to handle part of the task based on the number of hardware threads.  I just did it manually.  I was getting significant speedups over <code>for_each</code>."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495642113, "post_id": 44162972, "comment_id": 75343622, "body": "<code>QtConcurrent</code> distributes each operation to a thread (taking a maximum number of concurrent threads into account). It does not group them. Note that it is not straight forward to group operations correctly if they may not take the same amount of time."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495643394, "post_id": 44162972, "comment_id": 75344405, "body": "@m7913d Oh, that does suck."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 1, "creation_date": 1495644276, "post_id": 44162972, "comment_id": 75344951, "body": "I was wrong, Qt implements some grouping by looking at the user and overhead time. It starts with one operation per batch and doubles it every time the overhead is large compared to the user execution time. Therefore, a lot of trials are needed before using large batches and hence a lot of overhead."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495808685, "post_id": 44162972, "comment_id": 75420598, "body": "I&#39;m unable to reproduce your result, probably due to IO-bound as you suggested. @NullAchtFuffZehn Does it work for you?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1495640469, "creation_date": 1495640469, "answer_id": 44162972, "question_id": 44160968, "link": "https://stackoverflow.com/questions/44160968/qtconcurrentmap-shows-no-benefit/44162972#44162972", "title": "QtConcurrent::map shows no benefit", "body": "<p>It appears QtConcurrent has a high overhead compared to simply using C++ threading primitives and roll-your-own-thread-pools.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct threaded_queue {\n  using lock = std::unique_lock&lt;std::mutex&gt;;\n  void push_back( T t ) {\n    {\n      lock l(m);\n      data.push_back(std::move(t));\n    }\n    cv.notify_one();\n  }\n  boost::optional&lt;T&gt; pop_front() {\n    lock l(m);\n    cv.wait(l, [this]{ return abort || !data.empty(); } );\n    if (abort) return {};\n    auto r = std::move(data.back());\n    data.pop_back();\n    return std::move(r);\n  }\n  void terminate() {\n    {\n      lock l(m);\n      abort = true;\n      data.clear();\n    }\n    cv.notify_all();\n  }\n  ~threaded_queue()\n  {\n    terminate();\n  }\nprivate:\n  std::mutex m;\n  std::deque&lt;T&gt; data;\n  std::condition_variable cv;\n  bool abort = false;\n};\nstruct thread_pool {\n  thread_pool( std::size_t n = 1 ) { start_thread(n); }\n  thread_pool( thread_pool&amp;&amp; ) = delete;\n  thread_pool&amp; operator=( thread_pool&amp;&amp; ) = delete;\n  ~thread_pool() = default; // or `{ terminate(); }` if you want to abandon some tasks\n  template&lt;class F, class R=std::result_of_t&lt;F&amp;()&gt;&gt;\n  std::future&lt;R&gt; queue_task( F task ) {\n    std::packaged_task&lt;R()&gt; p(std::move(task));\n    auto r = p.get_future();\n    tasks.push_back( std::move(p) );\n    return r;\n  }\n  template&lt;class F, class R=std::result_of_t&lt;F&amp;()&gt;&gt;\n  std::future&lt;R&gt; run_task( F task ) {\n    if (threads_active() &gt;= total_threads()) {\n      start_thread();\n    }\n    return queue_task( std::move(task) );\n  }\n  void terminate() {\n    tasks.terminate();\n  }\n  std::size_t threads_active() const {\n    return active;\n  }\n  std::size_t total_threads() const {\n    return threads.size();\n  }\n  void clear_threads() {\n    terminate();\n    threads.clear();\n  }\n  void start_thread( std::size_t n = 1 ) {\n    while(n--&gt;0) {\n      threads.push_back(\n        std::async( std::launch::async,\n          [this]{\n            while(auto task = tasks.pop_front()) {\n              ++active;\n              try{\n                (*task)();\n              } catch(...) {\n                --active;\n                throw;\n              }\n              --active;\n            }\n          }\n        )\n      );\n    }\n  }\nprivate:\n  std::vector&lt;std::future&lt;void&gt;&gt; threads;\n  threaded_queue&lt;std::packaged_task&lt;void()&gt;&gt; tasks;\n  std::atomic&lt;std::size_t&gt; active = {};\n};\n\nstruct my_timer_t {\n    std::chrono::high_resolution_clock::time_point first;\n    std::chrono::high_resolution_clock::duration duration;\n\n    void start() {\n        first = std::chrono::high_resolution_clock::now();\n    }\n    std::chrono::high_resolution_clock::duration finish() {\n        return duration = std::chrono::high_resolution_clock::now()-first;\n    }\n    unsigned long long ms() const {\n        return std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(duration).count();\n    }\n};\nint main() {\n    std::vector&lt;double&gt; arr(1000000, 0);\n    my_timer_t timer;\n\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n    timer.start();\n    for(int i = 0; i &lt; 100; ++i) {\n        std::transform(arr.begin(), arr.end(), arr.begin(), [](double x){ return ++x; });\n    }\n    timer.finish();\n    auto time_transform = timer.ms();\n    std::cout &lt;&lt; time_transform &lt;&lt; \"&lt;- std::transform (\" &lt;&lt; arr[rand()%arr.size()] &lt;&lt; \")\\n\";\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n    timer.start();\n    for(int i = 0; i &lt; 100; ++i) {\n        std::for_each(arr.begin(), arr.end(), [](double &amp;x){ ++x; });\n    }\n    timer.finish();\n    auto time_for_each = timer.ms();\n    std::cout &lt;&lt; time_for_each &lt;&lt; \"&lt;- std::for_each (\" &lt;&lt; arr[rand()%arr.size()] &lt;&lt; \")\\n\";\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n    enum { num_threads = 8 };\n    thread_pool pool(num_threads);\n    timer.start();\n    for(int i = 0; i &lt; 100; ++i) {\n        std::array&lt; std::future&lt;void&gt;, num_threads &gt; tasks;\n        for (int t = 0; t &lt; num_threads; ++t) {\n            tasks[t] = pool.run_task([&amp;,t]{\n                std::for_each( arr.begin()+(arr.size()/num_threads)*t, arr.begin()+(arr.size()/num_threads)*(t+1), [](double&amp; x){++x;} );\n            });\n        }\n        // std::cout &lt;&lt; \"loop! -- \" &lt;&lt; pool.threads_active() &lt;&lt; \"/\" &lt;&lt; pool.total_threads() &lt;&lt; std::endl;\n        for (int t = 0; t &lt; num_threads; ++t)\n            tasks[t].wait();\n    }\n    timer.finish();\n    auto time_pool = timer.ms();\n    std::cout &lt;&lt; time_pool &lt;&lt; \"&lt;- thread_pool (\" &lt;&lt; arr[rand()%arr.size()] &lt;&lt; \")\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/977833aca01dd03b\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>This generates:</p>\n\n<pre><code>153&lt;- std::transform (100)\n131&lt;- std::for_each (200)\n82&lt;- thread_pool (300)\n</code></pre>\n\n<p>a significant speedup when using a simple C++11 thread pool to split tasks 8 ways.  (It was about 105 when splitting tasks 4 ways).</p>\n\n<p>Now I did use a test set 10 times smaller than yours, as the online system timed out when my program took that long to run.</p>\n\n<p>There is going to be overhead communicating with your thread pool system, but my naive thread pool shouldn't be outperforming a real library like this.</p>\n\n<p>Now, a serious problem is that you might be memory IO-bound; more threads accessing bytes faster won't help if you all have to wait for the bytes.</p>\n"}], "owner": {"reputation": 88, "user_id": 8059848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5f2a0af7d08728d6163eff317cd2fd?s=128&d=identicon&r=PG&f=1", "display_name": "NullAchtFuffZehn", "link": "https://stackoverflow.com/users/8059848/nullachtfuffzehn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1495800728, "creation_date": 1495635219, "last_edit_date": 1495796160, "question_id": 44160968, "link": "https://stackoverflow.com/questions/44160968/qtconcurrentmap-shows-no-benefit", "title": "QtConcurrent::map shows no benefit", "body": "<p>I want to manipulate a <code>QVector</code> using the <code>QtConcurrent::map</code> function. All my sample program does is to increment all values in a <code>QVector</code> by 1.</p>\n\n<pre><code>QVector&lt;double&gt; arr(10000000, 0);\nQElapsedTimer timer;\nqDebug() &lt;&lt; QThreadPool::globalInstance()-&gt;maxThreadCount() &lt;&lt; \"Threads\";\n\nint end;\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\ntimer.start();\nfor(int i = 0; i &lt; 100; ++i) {\n    std::transform(arr.begin(), arr.end(), arr.begin(), [](double x){ return ++x; });\n}\nend = timer.elapsed();\nqDebug() &lt;&lt; end;\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\ntimer.start();\nfor(int i = 0; i &lt; 100; ++i) {\n    std::for_each(arr.begin(), arr.end(), [](double &amp;x){ ++x; });\n}\nend = timer.elapsed();\nqDebug() &lt;&lt; end;\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\ntimer.start();\nfor(int i = 0; i &lt; 100; ++i) {\n    QFuture&lt;void&gt; qf = QtConcurrent::map(arr.begin(), arr.end(), [](double &amp;x){ ++x; });\n    qf.waitForFinished();\n}\nend = timer.elapsed();\nqDebug() &lt;&lt; end;\n</code></pre>\n\n<p>However the program outputs</p>\n\n<pre><code>4 Threads\n905 // std::transform\n886 // std::for_each\n876 // QtConcurrent::map\n</code></pre>\n\n<p>so there is almost no speed benefit with the multithreaded version. I verified that there are actually 4 threads running. I used -O2 optimization. Is the more common <code>QThreadPool</code> approach better suited for this situation?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I tried a differernt method using <code>QtConcurrent::run()</code>. Here are the relevant parts of the program code:</p>\n\n<pre><code>void add1(QVector&lt;double&gt;::iterator first, QVector&lt;double&gt;::iterator last) {\n    for(; first != last; ++first) {\n        *first += 1;\n    }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nstd::for_each(arr.begin(), arr.end(), [](double &amp;x){ ++x; });\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nQFuture&lt;void&gt; qf[numThreads];\nfor(int j = 0; j &lt; numThreads; ++j) {\n    qf[j] = QtConcurrent::run(add1, arr.begin()+j*n/numThreads, arr.begin()+(j+1)*n/numThreads-1);\n}\nfor(int j = 0; j &lt; numThreads; ++j) {\n    qf[j].waitForFinished();\n}\n</code></pre>\n\n<p>So I manually distribute the task over different threads. But still I hardly get a performance boost:</p>\n\n<pre><code>181 ms // std::for_each\n163 ms // QtConcurrent::run\n</code></pre>\n\n<p>What's still wrong here?</p>\n"}, {"tags": ["c++", "opengl", "rendering", "opengl-3"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1495637481, "post_id": 44160917, "comment_id": 75340128, "body": "&quot;<i>But it seems that FBO-&gt;getColorTextures(4) always give me the same result that is not the color buffer I want.</i>&quot; OK, but... how am I supposed to know what <code>getColorTextures(4)</code> actually does? I don&#39;t see an implementation of that function, and it&#39;s certainly not an OpenGL API function. It&#39;s your function, but you didn&#39;t show it. Equally importantly, why are you asking the FBO for information you <i>already know</i>? You set that texture into the FBO, so you know what you set there. So just get the texture you actually mean, rather than fetching from the FBO."}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1496041939, "post_id": 44160917, "comment_id": 75482815, "body": "Sorry for the time, I had no acces to internet. FBO-&gt;getColorTextures gives me the GLuint associated with GL_COLOR_ATTACHMENT in my FBO. So call getColorTextures(4) gives me the the texture that is located in the 4th Attachment of my FBO.  My problem here is located in the else statement : when I come to <code>if (first_iter)</code> I actually get the texture I want. But when it comes to the else, my render is black. and I don&#39;t understand why."}, {"owner": {"reputation": 625, "user_id": 1011250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f71e3a17e43f60dcc1d06fc88d34273?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/1011250/justin"}, "edited": false, "score": 0, "creation_date": 1517332173, "post_id": 44160917, "comment_id": 84048757, "body": "When you are asking an OpenGL question, you need to show all OpenGL calls and state. If some of this is hidden, we cannot reproduce your work nor examine it for errors."}], "owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496042100, "creation_date": 1495635092, "last_edit_date": 1592644375, "question_id": 44160917, "link": "https://stackoverflow.com/questions/44160917/ping-pong-rendering-using-the-render-of-another-fbo", "title": "Ping Pong rendering using the render of another FBO", "body": "<p>My goal is to do a Ping Pong rendering using 1 FBO (with 2 color attachments) that use the render of another FBO.</p>\n<p>I have an FBO with 5 color buffers.\nThen, I want to create a ping pong rendering using for basis 1 of those 5 colors buffers.\nSo, I create another FBO with 2 buffers colors, then in the for loop, if it's the first iteration, I generate my texture from the other FBO, else I write to the other color buffer.\nLast I get out of the FBO and render to the screen.</p>\n<pre><code>FBOPingPong-&gt;bind();\n\n    GLboolean first_iter = true;\n    GLboolean ColToUse = 0;\n    GLuint amount = 10;\n\n    pingPongShader.Use();\n    for (GLuint i = 0; i &lt; amount; ++i) {\n        glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;mod&quot;), ColToUse);\n        glUniform1f(glGetUniformLocation(pingPongShader.Program, &quot;screenWidth&quot;), (float)w);\n        glUniform1f(glGetUniformLocation(pingPongShader.Program, &quot;screenHeight&quot;), (float)h);\n        if (first_iter) {\n            glActiveTexture(GL_TEXTURE0);\n            glBindTexture(GL_TEXTURE_2D, FBO-&gt;getColorTextures(4)); //It's the texture from the other FBO I want to use\n            glDrawBuffer(GL_COLOR_ATTACHMENT0 + 1);\n            glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 1);\n\n        }\n        else {\n            glActiveTexture(GL_TEXTURE0);\n            glBindTexture(GL_TEXTURE_2D, FBOPingPong-&gt;getColorTextures(ColToUse?0:1));\n            glDrawBuffer(GL_COLOR_ATTACHMENT0 + ColToUse ? 1 : 0);\n            glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 1);\n\n        }\n\n\n        renderQuad(); // render the texture to a quad\n        ColToUse = !ColToUse;\n        if (first_iter) first_iter = false;\n    }\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    renderQuad();\n</code></pre>\n<p>and my fragment shader</p>\n<h1>version 330 core</h1>\n<pre><code>//I just want first to make the rendering darker and darker just to know if it works.\nin vec2 TexCoords;\n\nuniform sampler2D PingPongTex;\nuniform bool mod;\n\nout vec4 color;\n\nvec3 position() {\n    return texture(PingPongTex, TexCoords).xyz;\n}\n\nvoid main()\n{\n    color = vec4(position(), 1.0f);\n}\n</code></pre>\n<p>But it seems that <code>FBO-&gt;getColorTextures(4)</code>  always give me the same result that is not the color buffer I want. It give me the render of normals that is render in <code>FBO-&gt;getColorTextures(1)</code>.</p>\n<p>And I think it only come once in the for loop, because whatever number I give to amount, the result is always the same.</p>\n<p>The error is probably stupid, but I am so much in the problem that I can't find it :/</p>\n<p>EDIT :\nusing <code>glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 0);</code> instead of <code>glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 1)</code> made the thing about which color texture to use from the other FBO. This is effectively stupid, since I was trying to write to something that doesn't exist.\nBut now, after only 1 pass, the screen become black and nothing appear. It's probably a problem of booleans i'm using.</p>\n<p>EDIT2 :\nProbably something like this would be a better call ...</p>\n<pre><code>GLboolean first_iter = true;\nGLuint amount = 2;\n\npingPongShader.Use();\nfor (GLuint i = 0; i &lt; amount; ++i) {\n    glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;mod&quot;), i%2);\n    glUniform1f(glGetUniformLocation(pingPongShader.Program, &quot;screenWidth&quot;), (float)w);\n    glUniform1f(glGetUniformLocation(pingPongShader.Program, &quot;screenHeight&quot;), (float)h);\n    if (first_iter) { // pass 0\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, FBO-&gt;getColorTextures(4));\n        glDrawBuffer(GL_COLOR_ATTACHMENT0 + 1);\n        glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 0);\n    }\n    else {\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, FBOPingPong-&gt;getColorTextures(i%2); // For pass1 I need to read from texture 1\n        glUniform1i(glGetUniformLocation(pingPongShader.Program, &quot;PingPongTex&quot;), 0);\n        glDrawBuffer(GL_COLOR_ATTACHMENT0 + ((i+1)%2)); // And I need to write it in texture 0\n\n    }\n\n\n    renderQuad(); // render the texture to a quad\n    if (first_iter) first_iter = false;\n</code></pre>\n"}, {"tags": ["c++", "qt", "linker", "embedded", "octave"], "comments": [{"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1495743326, "post_id": 44160846, "comment_id": 75391991, "body": "crossposting on the Octave help mailinglist: <a href=\"http://octave.1599824.n4.nabble.com/QT-undefined-reference-to-feval-td4683465.html\" rel=\"nofollow noreferrer\">octave.1599824.n4.nabble.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1495640287, "post_id": 44162736, "comment_id": 75342373, "body": "I don&#39;t think so, because it is a <i>c-compiler</i> error, not the <i>Octave-interpreter</i> error. Function <code>gcd</code> does exist in Octave - it computes the greatest common divisor. But thank you anyway for answering, @i1787"}], "tags": [], "owner": {"reputation": 191, "user_id": 6060412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5484249e0135a18095e026a46763be75?s=128&d=identicon&r=PG&f=1", "display_name": "iM71", "link": "https://stackoverflow.com/users/6060412/im71"}, "is_accepted": false, "score": 0, "last_activity_date": 1495639740, "creation_date": 1495639740, "answer_id": 44162736, "question_id": 44160846, "link": "https://stackoverflow.com/questions/44160846/octave-from-qt-undefined-reference/44162736#44162736", "title": "Octave from QT: undefined reference", "body": "<p>It seems from the error that <code>gcd</code> function does not exist, or it cannot find reference to it. I don't know about <code>gcd</code> function whether it is part of octave or it is your custom defined, but surely it's missing a reference to it.</p>\n"}, {"comments": [{"owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1495695606, "post_id": 44164211, "comment_id": 75363481, "body": ",here is the output from <code>mkoctfile -v</code>:     <code>g++ -std=gnu++11 -c -pthread -fopenmp -mieee-fp -g -O2 mbedded.cc -o embedded.o</code>&lt;br/&gt; <code>g++ -std=gnu++11 -pthread -fopenmp -mieee-fp -g -O2 -Wl, -rpath-link, -Wl, --export-all-symbols  -o embedded  embedded.o</code>"}, {"owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1495695937, "post_id": 44164211, "comment_id": 75363664, "body": "and from Qt Creator:   <code>g++ -c -pipe -fno-keep-inline-dllexport -g -std=gnu++11 -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_QML_DEBUG  -o debug\\main.o ..\\..\\..\\moex\\octatest\\main.cpp</code> <code>g++ -Wl, -subsystem, console -mthreads -o debug\\octatest.exe debug&#47;main.o  -LC:\\Octave\\Octave-4.2.1\\lib\\octave\\4.2.1  C:\\Octave\\Octave-4.2.1\\lib\\octave\\4.2.1\\liboctave.dll.a  C:\\Octave\\Octave-4.2.1\\lib\\octave\\4.2.1\\liboctinterp.dll.a</code>"}, {"owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1495703969, "post_id": 44164211, "comment_id": 75368109, "body": "I think that the reason of the problem is <code>--export-all-symbols</code> flag, but when I set it using <code>QMAKE_LFLAGS += --export-all-symbols</code> in my <b>.pro</b> file, I get the following error: <code>g++: error: unrecognized command line option --export-all-symbols</code>"}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "reply_to_user": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "edited": false, "score": 0, "creation_date": 1495728142, "post_id": 44164211, "comment_id": 75383799, "body": "Am I right that you don&#39;t see an error while compiling but in the linking stage? (&quot;undefined reference to&quot; is typically a linker message). I would ensure that also the order of libs is met (liboctinterp before liboctave). In your second commend it&#39;s twisted"}], "tags": [], "owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "is_accepted": false, "score": 2, "last_activity_date": 1495644210, "creation_date": 1495644210, "answer_id": 44164211, "question_id": 44160846, "link": "https://stackoverflow.com/questions/44160846/octave-from-qt-undefined-reference/44164211#44164211", "title": "Octave from QT: undefined reference", "body": "<p>If you run mkoctfile on your example from above (I copied it into main.cc) with verbose, you'll see all flags needed:</p>\n\n<pre><code>mkoctfile -v --link-stand-alone main.cc \ng++ -std=gnu++11 -c  -fPIC -I/usr/local/include/octave-4.2.0/octave/.. -I/usr/local/include/octave-4.2.0/octave -I/usr/local/include  -pthread -fopenmp -g -O2    main.cc -o main.o\ng++ -std=gnu++11  -I/usr/local/include/octave-4.2.0/octave/.. -I/usr/local/include/octave-4.2.0/octave -I/usr/local/include  -pthread -fopenmp -g -O2 -rdynamic  -fPIC     main.o   -L/usr/local/lib/octave/4.2.0 -L/usr/local/lib -loctinterp -loctave   \n</code></pre>\n\n<p>Now you have to add these to your QtCreator. (I guess -std=gnu++11 is missing)</p>\n"}], "owner": {"reputation": 342, "user_id": 786077, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9c1fedf457d99dba83a94061550ab814?s=128&d=identicon&r=PG", "display_name": "pau", "link": "https://stackoverflow.com/users/786077/pau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495644210, "creation_date": 1495634916, "last_edit_date": 1495642087, "question_id": 44160846, "link": "https://stackoverflow.com/questions/44160846/octave-from-qt-undefined-reference", "title": "Octave from QT: undefined reference", "body": "<p>I would like to run <strong>Octave</strong> script from <strong>Qt</strong> GUI application.</p>\n\n<p>Here is <code>.pro</code> file:</p>\n\n<pre><code>...\nwin32 {\n    INCLUDEPATH +=  c:/Octave/Octave-4.2.1/include/octave-4.2.1/octave\n\n    LIBS        +=  c:/Octave/Octave-4.2.1/lib/octave/4.2.1/liboctave.dll.a \\\n                    c:/Octave/Octave-4.2.1/lib/octave/4.2.1/liboctinterp.dll.a\n\n    DEPENDPATH  +=  c:/Octave/Octave-4.2.1/bin\n}\n...\n</code></pre>\n\n<p>Here is <code>.cpp</code> file (example is taken from <a href=\"http://www.gnu.org/software/octave/doc/interpreter/Standalone-Programs.html#Standalone-Programs\" rel=\"nofollow noreferrer\">docs</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;octave/oct.h&gt;\n#include &lt;octave/octave.h&gt;\n#include &lt;octave/parse.h&gt;\n#include &lt;octave/interpreter.h&gt;\n\nint\nmain (void)\n{\n  string_vector argv (2);\n  argv(0) = \"embedded\";\n  argv(1) = \"-q\";\n\n  octave_main (2, argv.c_str_vec (), 1);\n\n  octave_idx_type n = 2;\n  octave_value_list in;\n\n  for (octave_idx_type i = 0; i &lt; n; i++)\n    in(i) = octave_value (5 * (i + 2));\n\n  octave_value_list out = feval (\"gcd\", in, 1);\n\n  if (out.length () &gt; 0)\n    std::cout &lt;&lt; \"GCD of [\"\n              &lt;&lt; in(0).int_value ()\n              &lt;&lt; \", \"\n              &lt;&lt; in(1).int_value ()\n              &lt;&lt; \"] is \" &lt;&lt; out(0).int_value ()\n              &lt;&lt; std::endl;\n  else\n    std::cout &lt;&lt; \"invalid\\n\";\n\n  clean_up_and_exit (0);\n}\n</code></pre>\n\n<p>When I am trying to compile C++ code from Qt Creator I have the following error:</p>\n\n<pre><code>undefined reference to feval(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, octave_value_list const&amp;, int)\n</code></pre>\n\n<p>I also have the following errors from compiler:</p>\n\n<pre><code>undefined reference to Array&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::nil_rep()\nundefined reference to Array&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::resize_fill_value() const\nundefined reference to Array&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;::resize_fill_value() const\n</code></pre>\n\n<p>but when I Ctrl+Click on <code>Array</code> or <code>feval</code> - Qt Creator opens the appropriate files.</p>\n\n<p>I can also compile the example c++ file using the following command from Octave GUI:</p>\n\n<pre><code>mkoctfile --link-stand-alone embedded.cc -o embedded\n</code></pre>\n\n<p>What library/path should I add?</p>\n\n<p>Thank you very much in advance.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "atomic", "lock-free"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1495635204, "post_id": 44160753, "comment_id": 75338200, "body": "@clcto Take a look at <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/atomic\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1495635365, "post_id": 44160753, "comment_id": 75338321, "body": "Are you sure you need <code>shared_ptr</code> instead of <code>unique_ptr</code>? I don&#39;t see how you can have multiple owners of linked list nodes."}, {"owner": {"reputation": 918, "user_id": 4936507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36df2f476a2ed16bb905fc814370f720?s=128&d=identicon&r=PG&f=1", "display_name": "Domso", "link": "https://stackoverflow.com/users/4936507/domso"}, "edited": false, "score": 0, "creation_date": 1495636642, "post_id": 44160753, "comment_id": 75339381, "body": "you cannot access the value of a linked-Node in a lockfree list. Hence you need a local reference to the object to prevent the deallocation after removing the Node."}, {"owner": {"reputation": 1178, "user_id": 1563037, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vhb7A.png?s=128&g=1", "display_name": "gabry", "link": "https://stackoverflow.com/users/1563037/gabry"}, "edited": false, "score": 0, "creation_date": 1495636740, "post_id": 44160753, "comment_id": 75339485, "body": "Please note that, at least in your example, you do not need std::atomic_load since you are using a mutex that synchronize list access, anyway the problem you have is dued to a stack overflow (not this site!) in the recursive destructor. As another comment says if you need counted pointers try to use std::unique_ptr, it fits better this use case, or use a std::list of std::shared_ptr (that does not recurse in destructor)."}, {"owner": {"reputation": 918, "user_id": 4936507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36df2f476a2ed16bb905fc814370f720?s=128&d=identicon&r=PG&f=1", "display_name": "Domso", "link": "https://stackoverflow.com/users/4936507/domso"}, "edited": false, "score": 0, "creation_date": 1495637826, "post_id": 44160753, "comment_id": 75340450, "body": "the mutex was just for debugging to prevent any data-races in <code>push_front</code>. <code>shared_ptr</code> are actually the only option in a lockfree-list, where multiple threads can access the same Node simultaneously"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 8, "last_activity_date": 1495635536, "last_edit_date": 1495635536, "creation_date": 1495635158, "answer_id": 44160948, "question_id": 44160753, "link": "https://stackoverflow.com/questions/44160753/strange-shared-ptr-behaviour/44160948#44160948", "title": "Strange shared_ptr behaviour", "body": "<p>This is a classic problem with smart pointers and list nodes: the destructor of your node is recursive and it ends up running out of stack. This is what that stacktrace shows: stack overflow.</p>\n\n<p>In <a href=\"https://youtu.be/JfmTagWcqoE?t=13m\" rel=\"noreferrer\">CppCon 2016: Herb Sutter \u201cLeak-Freedom in C++... By Default.\u201d</a> they discuss exactly this problem.</p>\n"}], "owner": {"reputation": 918, "user_id": 4936507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36df2f476a2ed16bb905fc814370f720?s=128&d=identicon&r=PG&f=1", "display_name": "Domso", "link": "https://stackoverflow.com/users/4936507/domso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2246, "favorite_count": 1, "accepted_answer_id": 44160948, "answer_count": 1, "score": 4, "last_activity_date": 1495635536, "creation_date": 1495634661, "question_id": 44160753, "link": "https://stackoverflow.com/questions/44160753/strange-shared-ptr-behaviour", "title": "Strange shared_ptr behaviour", "body": "<p>Ive discovered a really strange behaviour with <code>std::shared_ptr</code> in c++.\nThe following example works perfectly with standard pointers.</p>\n\n<p>However the usage of <code>std::shared_ptr</code> causes here a segmentation fault. (see the backtrace below)</p>\n\n<p>I know, that accessing a <code>std::shared_ptr</code> from multiple threads is not safe, therefor I'm using the atomic-operations. Even a classic lock wont solve the problem.</p>\n\n<p>Im using <code>gcc version 6.3.0 20170406 (Ubuntu 6.3.0-12ubuntu2)</code> with <code>-Wall -O2 -g</code> and  <code>-std=c++17</code> </p>\n\n<p>Does anybody know a solution or why the code is crashing?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;mutex&gt;\n\ntemplate &lt;typename T&gt;\nclass list {\nprivate:\n    struct Node {\n        T value;\n        std::shared_ptr&lt;Node&gt; next;\n\n        Node() : next(nullptr) {}\n    };\n\n    std::shared_ptr&lt;Node&gt; head;\npublic:\n    // create dummy-nodes\n    explicit list() : head(std::make_shared&lt;Node&gt;()){\n        head-&gt;next = std::make_shared&lt;Node&gt;();\n    };\n\n    void push_front(T val) {\n        std::shared_ptr&lt;Node&gt; current;\n        std::shared_ptr&lt;Node&gt; next;\n        std::shared_ptr&lt;Node&gt; newNode = std::make_shared&lt;Node&gt;();\n        newNode-&gt;value = val;\n\n        do {\n            current = std::atomic_load&lt;Node&gt;(&amp;head);\n            next = std::atomic_load&lt;Node&gt;(&amp;current-&gt;next);\n            newNode-&gt;next = next;\n        } while (!std::atomic_compare_exchange_weak&lt;Node&gt;(&amp;current-&gt;next, &amp;next, newNode));\n    }\n};\n\nint main(int argc, char* argv[]) {\n\n    list&lt;int&gt; ll;\n\n    std::vector&lt;std::thread&gt; threads;\n    const int thread_count = 8;\n    const int local_count = 200000;\n\n    std::mutex m;\n\n    for (int i = 0; i &lt; thread_count; i++) {\n        threads.push_back(std::thread([&amp;ll, i, local_count, &amp;m]() {\n            for (int j = local_count * i; j &lt; local_count * (i + 1); j++) {\n                m.lock(); // optional for testing; doesnt solve the problem\n                ll.push_front(j);\n                m.unlock();\n            }\n\n        }));\n    }\n\n    for (auto&amp; thrd : threads) {\n        thrd.join();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>gdb-backtrace:</p>\n\n<pre><code>0x0000555555555d4e in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb0e0) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n150         _M_dispose();\n(gdb) bt\n#0  0x0000555555555d4e in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb0e0) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#1  std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#2  std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#3  std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#4  list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#5  __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#6  std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#7  std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#8  0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb110) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#9  std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#10 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#11 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#12 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#13 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#14 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#15 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#16 0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb140) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#17 std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#18 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#19 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#20 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#21 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#22 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#23 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#24 0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb170) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#25 std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#26 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#27 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#28 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#29 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#30 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#31 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#32 0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb1a0) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#33 std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#34 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#35 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#36 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#37 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#38 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#39 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#40 0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb1d0) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#41 std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#42 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#43 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#44 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#45 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#46 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#47 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n#48 0x0000555555555d51 in std::_Sp_counted_base&lt;(__gnu_cxx::_Lock_policy)2&gt;::_M_release (this=0x7fffd48eb200) at /usr/include/c++/6/bits/shared_ptr_base.h:150\n#49 std::__shared_count&lt;(__gnu_cxx::_Lock_policy)2&gt;::~__shared_count (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:662\n#50 std::__shared_ptr&lt;list&lt;int&gt;::Node, (__gnu_cxx::_Lock_policy)2&gt;::~__shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:928\n#51 std::shared_ptr&lt;list&lt;int&gt;::Node&gt;::~shared_ptr (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr.h:93\n#52 list&lt;int&gt;::Node::~Node (this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;) at src/main.cpp:11\n#53 __gnu_cxx::new_allocator&lt;list&lt;int&gt;::Node&gt;::destroy&lt;list&lt;int&gt;::Node&gt; (this=&lt;optimized out&gt;, __p=&lt;optimized out&gt;) at /usr/include/c++/6/ext/new_allocator.h:124\n#54 std::allocator_traits&lt;std::allocator&lt;list&lt;int&gt;::Node&gt; &gt;::destroy&lt;list&lt;int&gt;::Node&gt; (__a=..., __p=&lt;optimized out&gt;) at /usr/include/c++/6/bits/alloc_traits.h:487\n#55 std::_Sp_counted_ptr_inplace&lt;list&lt;int&gt;::Node, std::allocator&lt;list&lt;int&gt;::Node&gt;, (__gnu_cxx::_Lock_policy)2&gt;::_M_dispose (this=&lt;optimized out&gt;) at /usr/include/c++/6/bits/shared_ptr_base.h:529\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "visual-c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "edited": false, "score": 1, "creation_date": 1495634237, "post_id": 44160467, "comment_id": 75337422, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/a/14138629/1450890\">stackoverflow.com/a/14138629/1450890</a>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1495634779, "post_id": 44160467, "comment_id": 75337860, "body": "You don&#39;t need to use <code>__declspec(dllexport)</code> in the explicit instantiation."}, {"owner": {"reputation": 673, "user_id": 7702053, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/ujL06.png?s=128&g=1", "display_name": "CDZ", "link": "https://stackoverflow.com/users/7702053/cdz"}, "edited": false, "score": 0, "creation_date": 1495635688, "post_id": 44160467, "comment_id": 75338597, "body": "Yes I need it... I export my template, otherwise I linking issue !"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1495636956, "post_id": 44160467, "comment_id": 75339673, "body": "your link to the webcompiler shows a Hello World program. ...."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 7702053, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/ujL06.png?s=128&g=1", "display_name": "CDZ", "link": "https://stackoverflow.com/users/7702053/cdz"}, "edited": false, "score": 1, "creation_date": 1495635923, "post_id": 44160910, "comment_id": 75338786, "body": "Sure, I forgot to explain that the definition is in another file, I have edit my question ! Sorry !"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 7, "last_activity_date": 1560374203, "last_edit_date": 1560374203, "creation_date": 1495635074, "answer_id": 44160910, "question_id": 44160467, "link": "https://stackoverflow.com/questions/44160467/warning-c4661no-suitable-definition-provided-for-explicit-template-instantiatio/44160910#44160910", "title": "warning C4661:no suitable definition provided for explicit template instantiation request", "body": "<p>You declare an explicit instantiation of your template. That's fine, but you fail to provide a definition for the constructor: you only <em>declare</em> it, and there is no definition for the template nor it's instantiation.</p>\n\n<p>You must provide a definition either in the template itself:</p>\n\n<pre><code>...\npublic:\n    Templated() {};  // empty but defined ctor\n...\n</code></pre>\n\n<p>or for the specialization:</p>\n\n<pre><code>Templated&lt;int&gt;::Templated() {\n}\n</code></pre>\n\n<hr>\n\n<p>From your comment and edit to question, the definition is in another cpp file. The problem is that for the compiler, each cpp file is a different <em>translation unit</em>. Said differently, when the first file is compiled, the compiler does not know the other one. That's the reason why you get a warning and not an error: the warning means <em>hey programmer, you declare me that you want a specialized instantiation of Templated, but I cannot find its constructor. Hope you have defined it in another translation unit, because if you have not you'll get an error at link time</em>. As you have actually defined it in another file, you can safely ignore the warning.</p>\n\n<p>A warning only says that something <em>uncommon</em> is occuring. Normally, it is expected for the declaration of an explicit specialization to be in the same translation unit as all its required definitions. And IMHO, you should stick to that usage to avoid the warning and, more importantly, to have a more maintainable application.</p>\n"}], "owner": {"reputation": 673, "user_id": 7702053, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/ujL06.png?s=128&g=1", "display_name": "CDZ", "link": "https://stackoverflow.com/users/7702053/cdz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4589, "favorite_count": 1, "accepted_answer_id": 44160910, "answer_count": 1, "score": 5, "last_activity_date": 1560374203, "creation_date": 1495634012, "last_edit_date": 1540671237, "question_id": 44160467, "link": "https://stackoverflow.com/questions/44160467/warning-c4661no-suitable-definition-provided-for-explicit-template-instantiatio", "title": "warning C4661:no suitable definition provided for explicit template instantiation request", "body": "<p>I wrote a class template and use it in different DLLs, so wish to hide some parts of the implementation.</p>\n\n<p>To do this, I use \"template instantiation\", but export it, like this, here is the header file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;exception&gt;\n\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nclass __declspec(dllexport) Templated\n{\n    public:\n        Templated();\n};\n\ntemplate __declspec(dllexport) Templated&lt;int&gt;;\n\nint main()\n{\n   cout &lt;&lt; \"Hello World\" &lt;&lt; endl; \n}\n</code></pre>\n\n<p>And the definition is in a separate file (.cpp)</p>\n\n<pre><code>template&lt;typename T&gt;\nTemplated&lt;T&gt;::Templated() {}\n\ntemplate Templated&lt;int&gt;;\n</code></pre>\n\n<p>My problem is that I got a warning, even if the instantiation is marked as exported!</p>\n\n<p>You can test this code here : <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">http://webcompiler.cloudapp.net/</a>, it will generate the C4661 warning!</p>\n\n<p>Is this normal?</p>\n"}, {"tags": ["javascript", "java", "c++", "class", "prototype"], "comments": [{"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 2, "creation_date": 1495633959, "post_id": 44160308, "comment_id": 75337167, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/816071/prototype-based-vs-class-based-inheritance\" title=\"prototype based vs class based inheritance\">stackoverflow.com/questions/816071/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "reply_to_user": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1495634082, "post_id": 44160308, "comment_id": 75337286, "body": "Appreciate the effort,dude"}], "answers": [{"comments": [{"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1495634091, "post_id": 44160310, "comment_id": 75337297, "body": "better: the prototype property points to another object. When an objectts key is resolved to a value, it first checks the current object if it has this, if not it goes to the prototype and repeats. If it reaches !obj.prototype or the key it stops"}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1495634399, "post_id": 44160310, "comment_id": 75337544, "body": "your observations are basically made up from one or two examples. Inheritance is really complex and widely used in js..."}, {"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "reply_to_user": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1495634557, "post_id": 44160310, "comment_id": 75337670, "body": "@Jonasw I do agree to that-since theres a lot I need to learn.But can you elaborate on &quot;prototype pointing to ANOTHER object&quot;?"}], "tags": [], "owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "is_accepted": false, "score": 0, "last_activity_date": 1495634218, "last_edit_date": 1495634218, "creation_date": 1495633634, "answer_id": 44160310, "question_id": 44160308, "link": "https://stackoverflow.com/questions/44160308/class-and-prototype-how-does-a-novice-interpret-them/44160310#44160310", "title": "Class and prototype.How does a novice interpret them", "body": "<p>Here are my observations-.Enlighten me since I currently lack a lot of learning,and need to become better.</p>\n\n<hr>\n\n<p>CLASS:</p>\n\n<p>1.Consists of functions and variables.</p>\n\n<p>2.Their contents can be inherited using 'extend' keyword.</p>\n\n<p>3.We have parent class,child classes.</p>\n\n<p>4.An object is something created using a constructor(i.e. a function).</p>\n\n<p>5.An object inherits all the powers of the class the constructor came from.</p>\n\n<p>6.An object inherits the ability to weild the variables,functions present in the class.</p>\n\n<p>7.An object can inherit the powers of another class i.e. a class other than its own benefactor(=class).</p>\n\n<p>8.A class ,by itself has no power-it can be well described as just a name given to a \"group of people\" or a civilization.The name is needed only for diplomatic reasons \ne.g: \"extend\"ing.\n  Other than that ,all power to do anything exists with variables,functions. </p>\n\n<hr>\n\n<p>prototype:</p>\n\n<p>1.A prototype is an object->an object originally belonging to the function Object.\n   Yes,\"In the beginning there was 'only One function'\",\n       and yup-the rest of JavaScript functions descended from it.</p>\n\n<p>2.A function can also be \"a constructor\",and its often called \"a built-in object\".</p>\n\n<p>3.A method is nothing but a variable/property/object combined with a function.</p>\n\n<p>4.A prototype is just a property which contains-functions,more properties.Thats how a property becomes \"more than just a property\"-it becomes an object.</p>\n\n<p>5.But this object \"prototype\" is special,you see.The wise old Object provides it to all built-in,user-defined functions,objects to freely wield its contents,and its power of Inheritance.      </p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495635191, "post_id": 44160848, "comment_id": 75338192, "body": "so thats what you meant by prototype pointing to another object-in other words that would mean prototype can be used for inheritance between two objects too."}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495635533, "post_id": 44160848, "comment_id": 75338465, "body": "@yasaaMoin not <i>too</i> but rather <i>only</i>"}, {"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495636228, "post_id": 44160848, "comment_id": 75339016, "body": "&quot;only&quot;?-Then that would mean prototype is way more powerful than I thought.Also,thanks for the Advanced Prototyping part-Im learning a lot today"}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495636331, "post_id": 44160848, "comment_id": 75339106, "body": "@yasaaMoin ever thought what {}.toString() , or &quot;Hi!&quot;.repeat(5); are doing? Have a look at <i>Object.prototype.toString</i> and <i>String.prototype.repeat</i> . JS is based on prototypes..."}, {"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495638890, "post_id": 44160848, "comment_id": 75341268, "body": "Out of curiousity-will I still be using prototypes if Im using functional programming?"}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 1, "creation_date": 1495639050, "post_id": 44160848, "comment_id": 75341407, "body": "@yasaaMoin functions have prototypes too.. Yes its nearly impossible to write code in js that does not use any kind of prototyping..."}, {"owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 0, "creation_date": 1495639570, "post_id": 44160848, "comment_id": 75341794, "body": "thanks a lot,dude.You were a big help.Mind if I message you in the chat when Im in dire need of some explanation,regarding JS?Speaking in future tense,that is.."}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "edited": false, "score": 1, "creation_date": 1495639864, "post_id": 44160848, "comment_id": 75342032, "body": "@yasaaMoin: nope. Thats not my job. Please simply open another question on SO, im not the only JS guru out there..."}], "tags": [], "owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "is_accepted": false, "score": 1, "last_activity_date": 1495636498, "last_edit_date": 1495636498, "creation_date": 1495634917, "answer_id": 44160848, "question_id": 44160308, "link": "https://stackoverflow.com/questions/44160308/class-and-prototype-how-does-a-novice-interpret-them/44160848#44160848", "title": "Class and prototype.How does a novice interpret them", "body": "<p><strong>Prototypal Inheritance:</strong></p>\n\n<p>An Object might be a Prototype for another Object. We can do that trough setting the prototype ( [[proto]] ) property:</p>\n\n<pre><code>var parent={\n  name:\"example\"\n}\n\nvar child={\n  age:16\n}\n\nObject.setPrototypeOf(child,parent);\n</code></pre>\n\n<p>But why are Prototypes useful? Lets consider two cases:</p>\n\n<ol>\n<li><p>We set a property of an Object:</p>\n\n<ol>\n<li>The property is added to that object</li>\n</ol></li>\n<li><p>We try to get a value of a certain property:</p>\n\n<ol>\n<li><p>Check if the current Object has that property, if yes return its value, if not continue</p></li>\n<li><p>The current Object is set to Objects prototype, repeat with step 1</p></li>\n<li><p>If Object.prototype is kind of not defined ( <em>we reached some kind of global object</em> ) undefined is returned</p></li>\n</ol></li>\n</ol>\n\n<p>Now lets take the upper code as an example:</p>\n\n<pre><code>  child.name;//\"example\" as its part of the prototype\n  child.age;//its own property\n  parent.name;//\"example\"\n  parent.age;//undefined\n</code></pre>\n\n<p>And when we set a property:</p>\n\n<pre><code>child.name=\"child\";\nchild.name;//child\nparent.name//example\n</code></pre>\n\n<p>So thats how inheritance basically works. Its easy and not too difficult. To create an Instance, we can use Object.create or we can use the setPrototypeOf as shown in the upper example ( its quite new):</p>\n\n<pre><code>var child=Object.create(parent);//creates a new empty object with parent as prototype\n</code></pre>\n\n<p><strong>Advanced Prototyping:</strong></p>\n\n<p>But what is missing with the upper code? Well, <strong>we want constructors!</strong>\nSo we could simply create a function that assembles an Object (called <em>factory function</em>) with the prototype set:</p>\n\n<pre><code>function createChild(age){\n   var child=Object.create(parent);\n   child.age=age;\n}\n\nvar child=createChild(15);\n</code></pre>\n\n<p>It has one problem: What if we want a childs child?</p>\n\n<pre><code>var thomasProto=Object.create(createChild(age));\nthomasProto.name=\"Thomas\";\nfunction createThomas(age,someother){\n   var instanceofThomas=Object.create(thomasProto);\n   //how do we set age ?\n   child.someother=someother\n}\n</code></pre>\n\n<p>However this isnt really straightforward, thats why the new constructor was introduced.</p>\n\n<p>It does sth like this:</p>\n\n<ol>\n<li><p>Create a new object with <em>function.prototype</em> as prototype</p></li>\n<li><p>Call <em>function</em> with <em>this</em> being the new Object</p></li>\n</ol>\n\n<p>3: return the new Object</p>\n\n<p>e.g:</p>\n\n<pre><code>function parent(){\n   this.some=\"test\";\n}\nparent.prototype={\n   name:\"example\";\n}\n\nvar child=new Parent();\nchild.some;//own value test\nchild.name;//inherits from parent.prototype\n</code></pre>\n\n<p>The prototype chain is:</p>\n\n<pre><code>child -&gt; parent.prototype -&gt; Object -&gt; null\n</code></pre>\n\n<p><strong>Class inheritance in JS</strong></p>\n\n<p>There is no class inheritance in JS.Theres just a class syntax that provides another way of creating prototypal inheritance.</p>\n"}], "owner": {"reputation": 31, "user_id": 6090239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oLa-5EltYuE/AAAAAAAAAAI/AAAAAAAAHbo/ht9277UcQt0/photo.jpg?sz=128", "display_name": "yasaaMoin", "link": "https://stackoverflow.com/users/6090239/yasaamoin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495636498, "creation_date": 1495633634, "question_id": 44160308, "link": "https://stackoverflow.com/questions/44160308/class-and-prototype-how-does-a-novice-interpret-them", "title": "Class and prototype.How does a novice interpret them", "body": "<p>Coming from a background of C++,java-I do understand a little about classes.But replacing classes with prototype(as in javascript) seems to be a completely different thinking process.\nThis maybe really difficult to grasp for novices like me-so I will be showing my own observation -which I got to after doing some deconstructing.</p>\n\n<p>Classes in javascript is a relatively new concept,and from programmers from a java background-it would be best to explain to do the explaining in a way they are familiar with.\nPlease enlighten me since Im bound to err,miss important points being a novice myself.</p>\n"}, {"tags": ["c++", "class", "pointers"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1495633349, "post_id": 44160117, "comment_id": 75336616, "body": "How is the compiler supposed to know if <code>Auftrag</code> even has a method named <code>getID</code>, if it can&#39;t see <code>class</code>&#39; definition?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1495633404, "post_id": 44160117, "comment_id": 75336669, "body": "<code>*this = kunde;</code> What is this supposed to do? Did you want to implement a copy constructor instead?"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1495633646, "creation_date": 1495633646, "answer_id": 44160318, "question_id": 44160117, "link": "https://stackoverflow.com/questions/44160117/invalid-use-of-incomplete-type-class/44160318#44160318", "title": "Invalid use of incomplete type &quot;class...&quot;", "body": "<p>Place the function definitions after the definition of the class <code>Auftrag</code>.</p>\n\n<p>For example</p>\n\n<pre><code>inline void  Kunde ::addAuftrag(Auftrag *auftrag){\n    this-&gt;vpa.push_back(auftrag);\n}\n\ninline void  Kunde ::getAuftraege() {\n    for (int i{0};i&lt;vpa.size();i++)\n        cout &lt;&lt; this-&gt;vpa.at(i)-&gt;getID();\n}\n</code></pre>\n\n<p>The compiler has to know the definition of the class <code>Auftrag</code> that to determine that it has such a data member as <code>vpa</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5689823, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1036234143087718/picture?type=large", "display_name": "Rusu Alex", "link": "https://stackoverflow.com/users/5689823/rusu-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1495633646, "creation_date": 1495633231, "question_id": 44160117, "link": "https://stackoverflow.com/questions/44160117/invalid-use-of-incomplete-type-class", "title": "Invalid use of incomplete type &quot;class...&quot;", "body": "<p>I keep getting this error and I don't understand what I do wrong: \" error: invalid use of incomplete type '<strong>class Auftrag</strong>'\" at method <strong>getAuftraeg()</strong> where I want to print the \"<strong>vpa</strong>\" list. Please help me!! </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Auftrag;\n\nclass Kunde {\npublic:\n    Kunde(Kunde *kunde) {\n        *this = kunde;\n    }\n\n    Kunde(string s) : name{s}, vpa{} {}\n\n    void print(){\n        cout&lt;&lt;this-&gt;name&lt;&lt;endl;\n        getAuftraege();\n    }\n\n    string getName() const { return name; }\n\n    void addAuftrag(Auftrag *auftrag){\n        this-&gt;vpa.push_back(auftrag);\n    }\n\n    void getAuftraege() {\n        for (int i{0};i&lt;vpa.size();i++)\n            cout &lt;&lt; this-&gt;vpa.at(i)-&gt;getID();\n    }\n\n    private:\n        string name;\n        vector&lt;Auftrag*&gt; vpa;\n};\n\nclass Auftrag {\npublic:\n    Auftrag(string s) : id{s}, pk{nullptr} {}\n\n    void print() {\n        cout&lt;&lt;this-&gt;id&lt;&lt;endl;\n    }\n    string getID() const { return id; }\n    void setKunde(Kunde *kunde){\n        this-&gt;pk = kunde;\n    }\n    Kunde *getKunde() const;\n    private:\n    string id;\n    Kunde *pk;\n};\n\n\nint main() {\n    // Anlegen: zwei Kunden und drei Auftraege\n    Kunde *k1{new Kunde{\"Sepplhuber-Finsterwalder\"}};\n    Kunde k2{\"Kurz\"};\n    Auftrag *a1{new Auftrag{\"Decke streichen\"}};\n    Auftrag *a2{new Auftrag{\"Wand tapezieren\"}};\n    Auftrag a3{\"Jalousie montieren\"};\n    Auftrag a4{\"Laminat verlegen\"};\n    // Erste Assoziationsrichtung:\n    // aus einem Objekt vom Typ Kunde\n    // zu Objekten vom Typ Auftrag\n    k1-&gt;addAuftrag(a1);\n    k1-&gt;addAuftrag(a2);\n    k1-&gt;addAuftrag(&amp;a3);\n    // Zweite Assoziationsrichtung:\n    // aus einem Objekt vom Typ Auftrag\n    // zu einem Objekt vom Typ Kunde\n    a4.setKunde(&amp;k2);\n    // Alles ausgeben:\n    k1-&gt;print();\n    k2.print();\n    a1-&gt;print();\n    a2-&gt;print();\n    a3.print();\n    a4.print();\n    // Speicher zurueckgeben:\n    delete k1;\n    k1 = nullptr;\n    delete a1;\n    a1 = nullptr;\n    delete a2;\n    a2 = nullptr;\n}\n</code></pre>\n"}, {"tags": ["c++", "ffmpeg", "animated-gif"], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 2607769, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/7kBPv.jpg?s=128&g=1", "display_name": "Olaf Japp", "link": "https://stackoverflow.com/users/2607769/olaf-japp"}, "edited": false, "score": 0, "creation_date": 1512059660, "post_id": 47482583, "comment_id": 82113518, "body": "Oh, thx... Maybe I will try this someday. I already found another solution. Spawning ffmpeg as a new process :-)"}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1582312822, "post_id": 47482583, "comment_id": 106747714, "body": "I used this for my pipeline, but I have a problem, it&#39;s always drop the last frame, why?"}, {"owner": {"reputation": 9874, "user_id": 4326936, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/71a107e53f14a27c4e83fb0adae2552c?s=128&d=identicon&r=PG&f=1", "display_name": "alijandro", "link": "https://stackoverflow.com/users/4326936/alijandro"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1582512733, "post_id": 47482583, "comment_id": 106790729, "body": "@Vuwox Not very sure. is it the problem from <code>fifo</code> filter? See if it&#39;s ok by removing <code>fifo</code> filter."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1582553398, "post_id": 47482583, "comment_id": 106806498, "body": "@alijandro Thansk for the help. I tried the fifo too, it didn&#39;t help, but after code refactoring, the problem solved by itself, maybe I had something close/freed too soon or a weird behavior. Anyway, it seems to be solve now. Thanks again."}], "tags": [], "owner": {"reputation": 9874, "user_id": 4326936, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/71a107e53f14a27c4e83fb0adae2552c?s=128&d=identicon&r=PG&f=1", "display_name": "alijandro", "link": "https://stackoverflow.com/users/4326936/alijandro"}, "is_accepted": true, "score": 2, "last_activity_date": 1543599274, "last_edit_date": 1543599274, "creation_date": 1511583645, "answer_id": 47482583, "question_id": 44159920, "link": "https://stackoverflow.com/questions/44159920/how-to-use-palettegen-and-paletteuse-filters-with-ffmpeg-in-c/47482583#47482583", "title": "How to use palettegen and paletteuse filters with FFmpeg in C++?", "body": "<p>The filter can be describe like below </p>\n\n<pre><code>format=pix_fmts=rgb32,fps=10,scale=320:240:flags=lanczos,split [o1] [o2];[o1] palettegen [p]; [o2] fifo [o3];[o3] [p] paletteuse\n</code></pre>\n\n<p>You can do some <code>fps</code> or <code>scale</code> customization with the filter above.</p>\n\n<p>Then we should apply this filter graph in ffmpeg.</p>\n\n<p>One important note is, as the filter <code>palettegen</code> need the entire stream, we need to add the whole stream to the buffer source, and a end of stream to buffer source, then we can get frame from buffer sink and muxing to the output gif file.</p>\n\n<p>Here is a completed example, change the micro definition in your test and be sure to use the latest version of ffmpeg.</p>\n\n<pre><code>#define INPUT_PATH \"/Users/gif/Downloads/VUE_1503566813005.mp4\"\n#define OUTPUT_PATH \"/Users/gif/Downloads/VUE.gif\"\n</code></pre>\n\n<p><strong>video2gif.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#include \"libavformat/avformat.h\"\n#include \"libavfilter/avfilter.h\"\n#include \"libavutil/opt.h\"\n#include \"libavfilter/buffersrc.h\"\n#include \"libavfilter/buffersink.h\"\n#include \"libswscale/swscale.h\"\n#include \"libavutil/imgutils.h\"\n}\n#endif\n\n#define INPUT_PATH \"/Users/gif/Downloads/VUE_1503566813005.mp4\"\n#define OUTPUT_PATH \"/Users/gif/Downloads/VUE.gif\"\n\nconst char *filter_descr = \"format=pix_fmts=rgb32,fps=10,scale=320:240:flags=lanczos,split [o1] [o2];[o1] palettegen [p]; [o2] fifo [o3];[o3] [p] paletteuse\";\n\nstatic AVFormatContext* ofmt_ctx;\nstatic AVCodecContext* o_codec_ctx;\n\nstatic AVFilterGraph* filter_graph;\nstatic AVFilterContext* buffersrc_ctx;\nstatic AVFilterContext* buffersink_ctx;\n\nstatic int init_filters(const char* filter_desc,\n                        AVFormatContext* ifmt_ctx,\n                        int stream_index,\n                        AVCodecContext* dec_ctx)\n{\n    char args[512];\n    int ret = 0;\n    AVFilter* buffersrc = avfilter_get_by_name(\"buffer\");\n    AVFilter* buffersink = avfilter_get_by_name(\"buffersink\");\n    AVFilterInOut* inputs = avfilter_inout_alloc();\n    AVFilterInOut* outputs = avfilter_inout_alloc();\n    AVRational time_base = ifmt_ctx-&gt;streams[stream_index]-&gt;time_base;\n\n    enum AVPixelFormat pix_fmts[] = { AV_PIX_FMT_PAL8, AV_PIX_FMT_NONE };\n\n    filter_graph = avfilter_graph_alloc();\n    if (!outputs || !inputs || !filter_graph) {\n        ret = AVERROR(ENOMEM);\n        return ret;\n    }\n\n    snprintf(args, sizeof(args),\n             \"video_size=%dx%d:pix_fmt=%d:time_base=%d/%d:pixel_aspect=%d/%d\",\n             dec_ctx-&gt;width, dec_ctx-&gt;height, dec_ctx-&gt;pix_fmt,\n             time_base.num, time_base.den,\n             dec_ctx-&gt;sample_aspect_ratio.num, dec_ctx-&gt;sample_aspect_ratio.den);\n\n    ret = avfilter_graph_create_filter(&amp;buffersrc_ctx, buffersrc, \"in\", args, nullptr, filter_graph);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"Cannot create buffer source\\n\");\n        return ret;\n    }\n\n    ret = avfilter_graph_create_filter(&amp;buffersink_ctx, buffersink, \"out\", nullptr, nullptr, filter_graph);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"Cannot create buffer sink\\n\");\n        return ret;\n    }\n\n    av_opt_set_int_list(buffersink_ctx, \"pix_fmts\", pix_fmts, AV_PIX_FMT_NONE, AV_OPT_SEARCH_CHILDREN);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"can not set output pixel format\\n\");\n        return ret;\n    }\n\n    outputs-&gt;name = av_strdup(\"in\");\n    outputs-&gt;filter_ctx = buffersrc_ctx;\n    outputs-&gt;pad_idx = 0;\n    outputs-&gt;next = nullptr;\n\n    inputs-&gt;name = av_strdup(\"out\");\n    inputs-&gt;filter_ctx = buffersink_ctx;\n    inputs-&gt;pad_idx = 0;\n    inputs-&gt;next = nullptr;\n\n    if ((ret = avfilter_graph_parse_ptr(filter_graph, filter_desc, &amp;inputs, &amp;outputs, nullptr)) &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"parse filter graph error\\n\");\n        return ret;\n    }\n\n    if ((ret = avfilter_graph_config(filter_graph, nullptr)) &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"config graph error\\n\");\n    }\n\n    avfilter_inout_free(&amp;inputs);\n    avfilter_inout_free(&amp;outputs);\n\n    return 0;\n}\n\nstatic int init_muxer()\n{\n    int ret = 0;\n    AVOutputFormat* o_fmt = av_guess_format(\"gif\", OUTPUT_PATH, \"video/gif\");\n    ret = avformat_alloc_output_context2(&amp;ofmt_ctx, o_fmt, \"gif\", OUTPUT_PATH);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"%s allocate output format\\n\", av_err2str(ret));\n        return -1;\n    }\n\n    AVCodec* codec = avcodec_find_encoder(AV_CODEC_ID_GIF);\n    if (!codec) {\n        return -1;\n    }\n\n    AVStream* stream = avformat_new_stream(ofmt_ctx, codec);\n\n    AVCodecParameters* codec_paramters = stream-&gt;codecpar;\n    codec_paramters-&gt;codec_tag = 0;\n    codec_paramters-&gt;codec_id = codec-&gt;id;\n    codec_paramters-&gt;codec_type = AVMEDIA_TYPE_VIDEO;\n    codec_paramters-&gt;width = 320;\n    codec_paramters-&gt;height = 240;\n    codec_paramters-&gt;format = AV_PIX_FMT_PAL8;\n\n    o_codec_ctx = avcodec_alloc_context3(codec);\n    avcodec_parameters_to_context(o_codec_ctx, codec_paramters);\n\n    o_codec_ctx-&gt;time_base = { 1, 10 };\n\n    if (ofmt_ctx-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER) {\n        o_codec_ctx-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n    }\n\n    ret = avcodec_open2(o_codec_ctx, codec, NULL);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"%s open output codec\\n\", av_err2str(ret));\n        return ret;\n    }\n\n    ret = avio_open(&amp;ofmt_ctx-&gt;pb, OUTPUT_PATH, AVIO_FLAG_WRITE);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"%s avio open error\\n\", av_err2str(ret));\n        return ret;\n    }\n\n    ret = avformat_write_header(ofmt_ctx, NULL);\n    if (ret &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"%s write header\\n\", av_err2str(ret));\n        return ret;\n    }\n\n    av_dump_format(ofmt_ctx, -1, OUTPUT_PATH, 1);\n\n    return 0;\n}\n\nstatic void destroy_muxer()\n{\n    avformat_free_context(ofmt_ctx);\n    avcodec_close(o_codec_ctx);\n    avcodec_free_context(&amp;o_codec_ctx);\n}\n\nstatic void destroy_filter()\n{\n    avfilter_free(buffersrc_ctx);\n    avfilter_free(buffersink_ctx);\n    avfilter_graph_free(&amp;filter_graph);\n}\n\nstatic void muxing_one_frame(AVFrame* frame)\n{\n    int ret = avcodec_send_frame(o_codec_ctx, frame);\n    AVPacket *pkt = av_packet_alloc();\n    av_init_packet(pkt);\n\n    while (ret &gt;= 0) {\n        ret = avcodec_receive_packet(o_codec_ctx, pkt);\n        if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF) {\n            break;\n        }\n\n        av_write_frame(ofmt_ctx, pkt);\n    }\n\n    av_packet_unref(pkt);\n}\n\nint main(int argc, const char * argv[]) {\n    av_register_all();\n    avcodec_register_all();\n    avfilter_register_all();\n\n    int ret = 0;\n    AVFormatContext* fmt_ctx = avformat_alloc_context();\n    AVCodecContext* codec_ctx = nullptr;\n    AVCodec* codec = nullptr;\n    int video_index = -1;\n\n    AVPacket *pkt = av_packet_alloc();\n    av_init_packet(pkt);\n    pkt-&gt;size = 0;\n    pkt-&gt;data = nullptr;\n\n    ret = avformat_open_input(&amp;fmt_ctx, INPUT_PATH, NULL, NULL);\n    if (ret != 0) {\n        std::cerr &lt;&lt; \"error open input\" &lt;&lt; std::endl;\n        goto die;\n    }\n\n    avformat_find_stream_info(fmt_ctx, NULL);\n    av_dump_format(fmt_ctx, -1, INPUT_PATH, 0);\n\n    ret = av_find_best_stream(fmt_ctx, AVMEDIA_TYPE_VIDEO, -1, -1, &amp;codec, 0);\n    if (ret == AVERROR_STREAM_NOT_FOUND) {\n        std::cerr &lt;&lt; \"error no video stream found\" &lt;&lt; std::endl;\n        goto die;\n    }\n\n    for (unsigned i = 0; i &lt; fmt_ctx-&gt;nb_streams; i++) {\n        if (fmt_ctx-&gt;streams[i]-&gt;codecpar-&gt;codec_type == AVMEDIA_TYPE_VIDEO) {\n            video_index = i;\n\n            if (ret == AVERROR_DECODER_NOT_FOUND) {\n                codec = avcodec_find_decoder(fmt_ctx-&gt;streams[i]-&gt;codecpar-&gt;codec_id);\n            }\n\n            break;\n        }\n    }\n\n    if (!codec) {\n        std::cerr &lt;&lt; \"could not find the decoder\" &lt;&lt; std::endl;\n        goto die;\n    }\n\n    codec_ctx = avcodec_alloc_context3(codec);\n    avcodec_parameters_to_context(codec_ctx, fmt_ctx-&gt;streams[video_index]-&gt;codecpar);\n    ret = avcodec_open2(codec_ctx, codec, NULL);\n    if (ret &lt; 0) {\n        std::cerr &lt;&lt; \"open codec error\" &lt;&lt; std::endl;\n        goto die;\n    }\n\n    if (init_muxer() &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"could not init muxer\\n\");\n        goto die;\n    }\n\n    if ((ret = init_filters(filter_descr, fmt_ctx, video_index, codec_ctx)) &lt; 0) {\n        av_log(nullptr, AV_LOG_ERROR, \"could not init filters %s\\n\", av_err2str(ret));\n        goto die;\n    }\n\n    // it's time to decode\n    while (av_read_frame(fmt_ctx, pkt) == 0) {\n        if (pkt-&gt;stream_index == video_index) {\n\n            ret = avcodec_send_packet(codec_ctx, pkt);\n\n            while (ret &gt;= 0) {\n                AVFrame* frame = av_frame_alloc();\n                ret = avcodec_receive_frame(codec_ctx, frame);\n                if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF) {\n                    break;\n                }\n\n                if (ret &gt;= 0) {\n                    // processing one frame\n                    frame-&gt;pts = frame-&gt;best_effort_timestamp;\n\n                    // palettegen need a whole stream, just add frame to buffer and don't get frame\n                    ret = av_buffersrc_add_frame_flags(buffersrc_ctx, frame, AV_BUFFERSRC_FLAG_KEEP_REF);\n                    if (ret &lt; 0) {\n                        av_log(nullptr, AV_LOG_ERROR, \"error add frame to buffer source %s\\n\", av_err2str(ret));\n                    }\n                }\n                av_frame_free(&amp;frame);\n            }\n        }\n    }\n\n    // end of buffer\n    if ((ret = av_buffersrc_add_frame_flags(buffersrc_ctx, nullptr, AV_BUFFERSRC_FLAG_KEEP_REF)) &gt;= 0) {\n        do {\n            AVFrame* filter_frame = av_frame_alloc();\n            ret = av_buffersink_get_frame(buffersink_ctx, filter_frame);\n            if (ret == AVERROR(EAGAIN) || ret == AVERROR_EOF) {\n                // av_log(nullptr, AV_LOG_ERROR, \"error get frame from buffer sink %s\\n\", av_err2str(ret));\n                av_frame_unref(filter_frame);\n                break;\n            }\n\n            // write the filter frame to output file\n            muxing_one_frame(filter_frame);\n            av_log(nullptr, AV_LOG_INFO, \"muxing one frame\\n\");\n\n            av_frame_unref(filter_frame);\n        } while (ret &gt;= 0);\n    } else {\n        av_log(nullptr, AV_LOG_ERROR, \"error add frame to buffer source %s\\n\", av_err2str(ret));\n    }\n\n    av_packet_free(&amp;pkt);\n\n    av_write_trailer(ofmt_ctx);\n    destroy_muxer();\n    destroy_filter();\ndie:\n    avformat_free_context(fmt_ctx);\n    avcodec_close(codec_ctx);\n    avcodec_free_context(&amp;codec_ctx);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 2607769, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/7kBPv.jpg?s=128&g=1", "display_name": "Olaf Japp", "link": "https://stackoverflow.com/users/2607769/olaf-japp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 1, "accepted_answer_id": 47482583, "answer_count": 1, "score": 1, "last_activity_date": 1543599274, "creation_date": 1495632772, "question_id": 44159920, "link": "https://stackoverflow.com/questions/44159920/how-to-use-palettegen-and-paletteuse-filters-with-ffmpeg-in-c", "title": "How to use palettegen and paletteuse filters with FFmpeg in C++?", "body": "<p>I want to create an animated gif in a QT project.\nWhen I scale the a QImage to AV_PIX_FMT_RGB8 directly the output looks awfull with flickering artifacts and when I scale to AV_PIX_FMT_YUV420P in between the output is dithered witch does not look much better.</p>\n\n<p>I found out that ffmpeg is able to produce a palette file using a filter called palettegen and then convert a movie to gif using this palette.</p>\n\n<p>Is there any sample c++ file out which I could use for my project or does anybody have a clue who to use these filters in code?</p>\n"}, {"tags": ["c++", "json", "c++11", "boost-propertytree", "boost-iterators"], "comments": [{"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1495632351, "post_id": 44159507, "comment_id": 75335813, "body": "Might want to look at <a href=\"https://stackoverflow.com/questions/4597048/boost-property-tree-iterators-how-to-handle-them\" title=\"boost property tree iterators how to handle them\">stackoverflow.com/questions/4597048/&hellip;</a>"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "reply_to_user": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "edited": false, "score": 0, "creation_date": 1495632799, "post_id": 44159507, "comment_id": 75336201, "body": "I looked into that , it does&#39;nt provide info about fetching boolen value using ptree::const_iterator  and thus i asked the question"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495648640, "post_id": 44159507, "comment_id": 75347336, "body": "@LearningCpp: actually, it does provide details of how to fetch different data types, if you read it more carefully. Try using <code>m_relay = subTreeIt-&gt;second.get_value&lt;bool&gt;();</code> instead of <code>m_relay = boost::algorithm::trim_copy(subTreeIt-&gt;second.data());</code>"}], "answers": [{"comments": [{"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495634904, "post_id": 44159896, "comment_id": 75337951, "body": "How about this ? This works too ;    if (boost::iequals ( subTreeIt-&gt;second.data() , &quot;false&quot;))                m_relay = false;"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495636681, "post_id": 44159896, "comment_id": 75339419, "body": "Yea, but why if? What if user puts in <code>flase</code> or <code>0</code>?"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495636798, "post_id": 44159896, "comment_id": 75339536, "body": "it has to fail , it should fail if it&#39;s anything other than true or false"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495636996, "post_id": 44159896, "comment_id": 75339724, "body": "And you don&#39;t handle it... lexical_cast does."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495637683, "post_id": 44159896, "comment_id": 75340320, "body": "Does the code fail if its other than true or false?"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495638089, "post_id": 44159896, "comment_id": 75340658, "body": "Error while traversing : exception: bad lexical cast: source type value could not be interpreted as target."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "edited": false, "score": 0, "creation_date": 1495639476, "post_id": 44159896, "comment_id": 75341717, "body": "with input as true and false the code is failing with  exception: bad lexical cast: source type value could not be interpreted as target."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1495633224, "last_edit_date": 1495633224, "creation_date": 1495632703, "answer_id": 44159896, "question_id": 44159507, "link": "https://stackoverflow.com/questions/44159507/accessing-boolean-values-by-parsing-json-file-using-boost-property-tree/44159896#44159896", "title": "Accessing Boolean values by parsing JSON file using boost property tree", "body": "<p>You have to cast it manually:</p>\n\n<p><code>boost::lexical_cast&lt;bool&gt;(subTreeIt-&gt;second.data());</code></p>\n\n<p>But it doesn't seem like a preferred way. I urge you to read \n<a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/boost_propertytree/accessing.html\" rel=\"nofollow noreferrer\">Docs: How to Access Data in a Property Tree</a>.</p>\n\n<p>However, I don't see another way using an iterator. So I guess you are fine, given that you already have it. The preferred ways seem to hinge on the path, which you do not use.</p>\n\n<p>For what it's worth... You probably should use <code>find</code> instead of iterating manually, or refactor your code for some version of <code>get</code>. It seems like a better design.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1495648687, "creation_date": 1495648687, "answer_id": 44165504, "question_id": 44159507, "link": "https://stackoverflow.com/questions/44159507/accessing-boolean-values-by-parsing-json-file-using-boost-property-tree/44165504#44165504", "title": "Accessing Boolean values by parsing JSON file using boost property tree", "body": "<p>Try using this:</p>\n\n<pre><code>m_relay = subTreeIt-&gt;second.get_value&lt;bool&gt;();\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>m_relay = boost::algorithm::trim_copy(subTreeIt-&gt;second.data());\n</code></pre>\n"}], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1719, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495648687, "creation_date": 1495631734, "last_edit_date": 1495648240, "question_id": 44159507, "link": "https://stackoverflow.com/questions/44159507/accessing-boolean-values-by-parsing-json-file-using-boost-property-tree", "title": "Accessing Boolean values by parsing JSON file using boost property tree", "body": "<p>Below are the steps I followed to fetch values from a JSON file:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n  \"Bases\":[\n    {\n      \"mnemonic\":\"ADIS.LA.01\",\n      \"relay\":true\n    },\n    {\n      \"mnemonic\":\"ALEX.LA.01\",\n      \"relay\":true\n    }\n  ]\n}\n</code></pre>\n\n<p>I am failing to fetch the boolean values.</p>\n\n<p>In the code below, I am:</p>\n\n<ol>\n<li>Opening the JSON file </li>\n<li>Setting the root element and start traversing the childtree under this root element (Bases)</li>\n<li>Fetching the values of each tag and saving them to appropriate variable types.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>ReadJsonFile()\n{\n    using boost::property_tree::ptree;\n    const boost::property_tree::ptree&amp; propTree\n    boost::property_tree::read_json(ss, pt);\n    const std::string rootElement = \"Bases\"; \n    boost::property_tree::ptree childTree;\n    bool m_relay;\n    try\n    {\n        /** get_child - Get the child at the given path, or throw @c ptree_bad_path. */\n        childTree = propTree.get_child(rootElement);\n    }\n    catch (boost::property_tree::ptree_bad_path&amp; ex)\n    {\n        return false;\n    }\n\n    BOOST_FOREACH(const boost::property_tree::ptree::value_type &amp;v, propTree.get_child(rootElement)){\n       string vID;\n       for (ptree::const_iterator subTreeIt = v.second.begin(); subTreeIt != v.second.end(); ++subTreeIt) {\n          if (subTreeIt-&gt;first == \"mnemonic\")\n          {\n             // Get the value string and trim the extra spaces, if any\n             vID = boost::algorithm::trim_copy( subTreeIt-&gt;second.data() );\n          }\n          if (subTreeIt-&gt;first == \"relay\")\n          {\n            m_relay = boost::algorithm::trim_copy(subTreeIt-&gt;second.data());\n          }\n       }\n    }\n }\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>error: cannot convert \u2018std::basic_string&lt;char, std::char_traits&lt;char>, std::allocator&lt;char> >\u2019 to \u2018bool\u2019 in assignment</p>\n</blockquote>\n\n<p>Apparently the boolean value <code>\"relay\":true</code> is treated as a string instead of a <code>bool</code>.</p>\n\n<p>If I change</p>\n\n<pre><code>bool m_relay;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>std::string m_relay;\n</code></pre>\n\n<p>The code works fine, but the <code>bool</code> type is failing to compile.</p>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["c++", "linux", "linux-kernel", "systemtap", "apache-traffic-server"], "comments": [{"owner": {"reputation": 448, "user_id": 6998967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zttZJ.jpg?s=128&g=1", "display_name": "Ricardo Biehl Pasquali", "link": "https://stackoverflow.com/users/6998967/ricardo-biehl-pasquali"}, "edited": false, "score": 1, "creation_date": 1495644051, "post_id": 44159015, "comment_id": 75344824, "body": "Perhaps the time difference is the result of many context switches -- or a high throughput with blocking reads &amp; writes. <code>copy_to_user()</code> is super fast, I guess normally it takes less than a microsecond to complete. I don&#39;t know if you&#39;re facing a bug. Anyway, you should keep your Linux kernel up-to-date."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4000101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa7478993bc11425bbc1308cc679ed9?s=128&d=identicon&r=PG&f=1", "display_name": "user4000101", "link": "https://stackoverflow.com/users/4000101/user4000101"}, "edited": false, "score": 0, "creation_date": 1495677720, "post_id": 44163963, "comment_id": 75358015, "body": "I&#39;ve add probe on __do_page_fault, the time is spent in __do_page_fault.           [1495677635735] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0         [1495677639314] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0         [1495677641329]do page fault done:24145 [ACCEPT 0:8080] 622         [1495677641329]copy_to_user done:24145 [ACCEPT 0:8080] 622         [1495677641329] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 622"}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 53, "user_id": 4000101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa7478993bc11425bbc1308cc679ed9?s=128&d=identicon&r=PG&f=1", "display_name": "user4000101", "link": "https://stackoverflow.com/users/4000101/user4000101"}, "edited": false, "score": 0, "creation_date": 1495708357, "post_id": 44163963, "comment_id": 75370712, "body": "well of course, that was expected. now you have to investigate how the fault is resolved."}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": true, "score": 3, "last_activity_date": 1495643473, "creation_date": 1495643473, "answer_id": 44163963, "question_id": 44159015, "link": "https://stackoverflow.com/questions/44159015/why-does-copy-to-user-spend-several-hundreds-of-milliseconds/44163963#44163963", "title": "why does copy_to_user spend several hundreds of milliseconds?", "body": "<p>Well, the reasonable explanation is that you are taking a page fault. One possible reason would be that the server forks/exits depending on how the load changes and the new child has to fault the page, but as a minor fault it should not take long unless there is memory shortage.</p>\n\n<p>Another one is there is memory shortage and you are in fact swapping.</p>\n\n<p>Either way, given you have come this far I don't see what's the problem going further. You want to put the probe on __do_page_fault and continue from there.</p>\n"}], "owner": {"reputation": 53, "user_id": 4000101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa7478993bc11425bbc1308cc679ed9?s=128&d=identicon&r=PG&f=1", "display_name": "user4000101", "link": "https://stackoverflow.com/users/4000101/user4000101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 1, "accepted_answer_id": 44163963, "answer_count": 1, "score": 5, "last_activity_date": 1495776153, "creation_date": 1495630452, "last_edit_date": 1495776153, "question_id": 44159015, "link": "https://stackoverflow.com/questions/44159015/why-does-copy-to-user-spend-several-hundreds-of-milliseconds", "title": "why does copy_to_user spend several hundreds of milliseconds?", "body": "<p>I have some linux servers running apache trafficserver and have found about 1/20's requests take several milliseconds which is much longer than expected(should be 1-2ms). </p>\n\n<p>After tracing by systemtap, I'v found the time is spent in linux kernel copy_to_user() call. <em>(accept->inet_csk_accept->move_addr_to_user->copy_to_user)</em></p>\n\n<p>The server load is quit low (&lt;100qps) and copy_to_user() just copy 16 bytes' data(struct sockaddr) but spend hundreds of millisecond.</p>\n\n<p>As I'm quit new to systemtap and kernel trace technique, I can't investigate further reason. I've checked cpu usage, swap usage</p>\n\n<p>Thanks for any advice.</p>\n\n<p>Hardware:</p>\n\n<ul>\n<li>cpu: Intel(R) Xeon(R) CPU E5-2640 v3 @ 2.60GHz</li>\n<li>memory: 64G</li>\n<li>disk: 11 * 6T hdd</li>\n</ul>\n\n<p>Software:</p>\n\n<ul>\n<li>centos6 2.6.32-696.el6.x86_64 #1 SMP Tue Mar 21 19:29:05 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</li>\n<li>apache trafficserver 5.3.2 configure 10G ram</li>\n<li><p>nginx 1.10.2, proxy user request to trafficserver</p>\n\n<pre><code>// systemtap\nprobe kernel.function(\"move_addr_to_user\")\n{\n    ts[\"move_addr_to_user\", pid()] = gettimeofday_ms()\n}\n\nprobe kernel.function(\"move_addr_to_user\").return\n{\n    printf(\"[%d]move_addr_to_user done:%d %s %d\\n\", gettimeofday_ms(), pid(), execname(), gettimeofday_ms()-ts[\"move_addr_to_user\", pid()])\n}\n\nprobe kernel.function(\"copy_to_user\")\n{\n    ts[\"copy_to_user\", pid()] = gettimeofday_ms()\n}\n\nprobe kernel.function(\"copy_to_user\").return\n{\n    printf(\"[%d]copy_to_user done:%d %s %d %d\\n\", gettimeofday_ms(), pid(), execname(), gettimeofday_ms()-ts[\"copy_to_user\", pid()],                 \n            gettimeofday_ms()-ts[\"__copy_to_user\", pid()])\n}\n\n// output:\n[1495630190767] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630191164]copy_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630191164] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630192172]copy_to_user done:24145 [ACCEPT 0:8080] 861\n[1495630192172] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 861\n[1495630192173]copy_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630192173] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630192173]copy_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630192173] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0\n[1495630192173]copy_to_user done:24145 [ACCEPT 0:8080] 0\n\n\n\nfree -g\n             total       used       free     shared    buffers     cached\nMem:            62         55          6          0          0         32\n-/+ buffers/cache:         23         39\nSwap:           15          0         15\n\ntop - 20:57:39 up 24 days, 19:26,  2 users,  load average: 7.70, 9.43, 9.62\nTasks: 643 total,   1 running, 642 sleeping,   0 stopped,   0 zombie\nCpu(s):  0.1%us,  1.0%sy,  0.0%ni, 97.5%id,  1.1%wa,  0.0%hi,  0.3%si,  0.0%st\nMem:  65560992k total, 58525192k used,  7035800k free,   365084k buffers\nSwap: 16777212k total,        0k used, 16777212k free, 33957572k cached\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                                                                                                         \n24145 traffics  20   0 21.7g  12g 6212 S 24.7 19.3 212:42.85 [ET_NET 0]                                                                                                                                                                     \n22173 root      20   0  677m 325m 1180 S  3.6  0.5   0:41.10 nginx                                                                                                                                                                           \n22161 root      20   0  677m 325m 1184 S  2.6  0.5   0:47.50 nginx                                                                                                                                                                           \n22168 root      20   0  677m 326m 2076 S  2.6  0.5   0:28.31 nginx                                                                                                                                                                           \n22150 root      20   0  677m 325m 1208 S  1.6  0.5   0:42.75 nginx                                                                                                                                                                           \n22165 root      20   0  677m 325m 1200 S  1.6  0.5   0:31.77 nginx\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>Update:</p>\n\n<p>@employee of the month thanks for you advise, after add some probe on __do_page_fault, I found the time was spent on __do_page_fault -> down_read(&amp;mm->mmap_sem);</p>\n\n<pre><code>    [1495677639202]copy_to_user done:24145 [ACCEPT 0:8080] 1\n    [1495677639202] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 1\n    [1495677639314]copy_to_user done:24145 [ACCEPT 0:8080] 0\n    [1495677639314] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 0\n    [1495677641329]do page fault done:24145 [ACCEPT 0:8080] 622\n    [1495677641329]copy_to_user done:24145 [ACCEPT 0:8080] 622\n    [1495677641329] 16 16 move_addr_to_user done:24145 [ACCEPT 0:8080] 622\n</code></pre>\n\n<p>@Ricardo Biehl Pasquali thanks for your advise. Apache trafficserver read/write to hdd in seperate threads. trafficserver have 1 thread to accept connections, 88(8 threads per hdd)threads to do blocking read/write(cache content), but i don't understand why blocking read/write in other threads could lead to high latency of __do_page_fault().</p>\n\n<pre><code>    Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\n    sda               0.00    16.00    0.00    4.00     0.00   160.00    40.00     0.05   13.50    0.00   13.50   7.75   3.10\n    sdi               0.00     0.00    0.00    0.00     0.00     0.00      0.00     0.00    0.00    0.00    0.00   0.00   0.00\n    sde               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\n    sdd               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\n    sdj               0.00     0.00    6.00    0.00  4326.00     0.00   721.00     0.06   10.50   10.50    0.00   6.83   4.10\n    sdc               0.00     0.00    2.00    0.00  1472.00     0.00   736.00     0.04   18.50   18.50    0.00   9.50   1.90\n    sdh               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\n    sdg               0.00     0.00   14.00    0.00 10464.00     0.00   747.43     0.04    2.71    2.71    0.00   1.79   2.50\n</code></pre>\n\n<hr>\n\n<p>Update\uff1a</p>\n\n<p>Problem solved!\nThe root cause is trafficserver periodly call system() to backup file in an ancient plugin we wrote.</p>\n"}, {"tags": ["c++", "boost", "centos7"], "comments": [{"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495630365, "post_id": 44158961, "comment_id": 75334193, "body": "Honestly I never ever had good experience installing boost. Average time it takes to get it to run is 6 hours."}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1495797073, "creation_date": 1495797073, "answer_id": 44200074, "question_id": 44158961, "link": "https://stackoverflow.com/questions/44158961/error-when-building-boost-1-61-iostreams-recompile-with-fpic/44200074#44200074", "title": "Error when building boost 1.61 iostreams - recompile with -fPIC", "body": "<p>Just as warning suggest you should recompile <code>bzip2</code> with <code>-fPIC</code> option. You only need to add it into <code>CFLAGS</code> list in <code>Makefile</code>, like it is done in <code>Makefile-libbz2_so</code>. </p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495797073, "creation_date": 1495630319, "question_id": 44158961, "link": "https://stackoverflow.com/questions/44158961/error-when-building-boost-1-61-iostreams-recompile-with-fpic", "title": "Error when building boost 1.61 iostreams - recompile with -fPIC", "body": "<p>I am trying to build <code>iostreams</code> boost library. I downloaded bzip2 library from here: <a href=\"http://www.bzip.org/downloads.html\" rel=\"nofollow noreferrer\">http://www.bzip.org/downloads.html</a></p>\n\n<p>I built it and installed using <code>make install</code>. When I try to build boost using <code>./b2 install</code> I get this error:</p>\n\n<pre><code>...patience...\n...found 25987 targets...\n...updating 3 targets...\ngcc.link.dll bin.v2/libs/iostreams/build/gcc-4.8.5/release/threading-multi/libboost_iostreams.so.1.61.0\n/usr/bin/ld: /usr/local/lib/libbz2.a(bzlib.o): relocation R_X86_64_32S against `BZ2_crc32Table' can not be used when making a shared object; recompile with -fPIC\n/usr/local/lib/libbz2.a: error adding symbols: Bad value\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c++", "c++11", "typetraits", "static-assert"], "answers": [{"comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 5, "creation_date": 1495642324, "post_id": 44159111, "comment_id": 75343746, "body": "Or just use <code>std::is_convertible&lt;B*, D*&gt;</code>?"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 10, "last_activity_date": 1495630681, "creation_date": 1495630681, "answer_id": 44159111, "question_id": 44158904, "link": "https://stackoverflow.com/questions/44158904/static-assert-for-public-inheritance/44159111#44159111", "title": "Static Assert for Public Inheritance", "body": "<p>As far as I know, public inheritance is the only case where an implicit pointer conversion can be performed (a reference conversion could be achieved via an overloaded operator).</p>\n\n<pre><code>template &lt;class T&gt;\nstd::true_type is_public_base_of_impl(T*);\n\ntemplate &lt;class T&gt;\nstd::false_type is_public_base_of_impl(...);\n\ntemplate &lt;class B, class D&gt;\nusing is_public_base_of = decltype(is_public_base_of_impl&lt;B&gt;(std::declval&lt;D*&gt;()));\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fa7f443d778d31f8\" rel=\"noreferrer\">See it live on Coliru</a></p>\n"}, {"tags": [], "owner": {"reputation": 245, "user_id": 5450620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a0e7768411d5de630a1f132f11ac34?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Monkman", "link": "https://stackoverflow.com/users/5450620/thomas-monkman"}, "is_accepted": true, "score": 7, "last_activity_date": 1495669722, "last_edit_date": 1495669722, "creation_date": 1495668591, "answer_id": 44170054, "question_id": 44158904, "link": "https://stackoverflow.com/questions/44158904/static-assert-for-public-inheritance/44170054#44170054", "title": "Static Assert for Public Inheritance", "body": "<p>Thanks to both <a href=\"https://stackoverflow.com/users/3233393/quentin\">Quentin</a> and <a href=\"https://stackoverflow.com/users/4672588/cpplearner\">cpplearner</a> for pointing me in the right direction. I found <a href=\"https://stackoverflow.com/users/3233393/quentin\">Quentins</a> answer worked fine if the assert should pass, but on a failed case the static_assert would not catch the error, instead it would be generated inside the template, removing the benefit of the clear <code>static_assert</code> message.</p>\n\n<p>Then <a href=\"https://stackoverflow.com/users/4672588/cpplearner\">cpplearner</a> mentioned <code>std::is_convertible</code> which I had tried to use before but had forgotten about needing the <code>*</code>, also the B and D seemed to be the wrong way round.</p>\n\n<p>All of this lead me to creating:</p>\n\n<pre><code>static_assert(std::is_convertible&lt;Derived*, Base*&gt;::value, \"Derived must inherit Base as public\");\n</code></pre>\n\n<p>Which seems to do the job, below is the full code as a complete example.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nclass Base { };\nclass Derived : Base { };\nclass DerivedWithPublic : public Base { };\n\nint main() {\n    static_assert(std::is_convertible&lt;DerivedWithPublic*, Base*&gt;::value, \"Class must inherit Base as public\");\n    static_assert(std::is_convertible&lt;Derived*, Base*&gt;::value, \"Derived must inherit Base as public\");\n}\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 5450620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a0e7768411d5de630a1f132f11ac34?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Monkman", "link": "https://stackoverflow.com/users/5450620/thomas-monkman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3703, "favorite_count": 4, "accepted_answer_id": 44170054, "answer_count": 2, "score": 13, "last_activity_date": 1495669722, "creation_date": 1495630174, "question_id": 44158904, "link": "https://stackoverflow.com/questions/44158904/static-assert-for-public-inheritance", "title": "Static Assert for Public Inheritance", "body": "<p>I built a helper class that would construct a custom class via templates, this custom class must inherit from a certain class, I can check for this with <code>std::is_base_of</code>.</p>\n\n<p>However I also need to check that the inheritance is public, how can this be achieved?</p>\n\n<p>For reference, here is a stripped down version of the class, I have the <code>std::is_base_of</code> in there.</p>\n\n<pre><code>template&lt;class CustomSink&gt;\nclass Sink\n{\n    static_assert(std::is_base_of&lt;BaseSink, CustomSink&gt;::value, \"CustomSink must derive from BaseSink\");\n    //Some static assert here to check if custom sink has publicly inherited BaseSink \n    //static_assert(is_public.....\npublic:\n    template&lt;class... Args&gt;\n    Sink(Args&amp;&amp;... args)\n    {\n    }\n    ~Sink()\n    {\n    }       \n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "memory-management"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1495630126, "post_id": 44158835, "comment_id": 75333996, "body": "What makes you think you need to do a nested swap? (the containing vector destroys it&#39;s sub vectors on destruction)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 8, "creation_date": 1495630128, "post_id": 44158835, "comment_id": 75333998, "body": "the correct way to &quot;free&quot; a vectors memory is to do nothing"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495630195, "post_id": 44158835, "comment_id": 75334058, "body": "can you expand on &quot; I would manually free memory.&quot;, because I have the feeling that this is where your actual question resides"}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495630865, "post_id": 44158835, "comment_id": 75334584, "body": "@Borgleader I would be sure that not only the elements are destroyed but that the memory is released, for the nested vectors too. There are always pitfalls and I would be sure to make no mistakes"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495630932, "post_id": 44158835, "comment_id": 75334634, "body": "@Umbert The vector will free the memory on destruction."}, {"owner": {"reputation": 488, "user_id": 7384437, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/386e2d14621537e11c4790308b91dbd0?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/7384437/lars"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495630946, "post_id": 44158835, "comment_id": 75334645, "body": "&quot;the correct way to &quot;free&quot; a vectors memory is to do nothing&quot;  I disagree. It frees nothing. I like the swap-to-free.  @Borgleader So you would allocate the vector on the heap if scope lifetime is not desired behaviour? Seems ugly too imho."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495631161, "post_id": 44158835, "comment_id": 75334826, "body": "Can you give a clear example of your use case? because honestly I don&#39;t know what you&#39;re trying to do, or what problem you&#39;re trying to solve. Your question implied you needed to manually free the memory from a vector which, in general you don&#39;t. Unless you want to keep it under a certain limit within the lifetime of the vector."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 488, "user_id": 7384437, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/386e2d14621537e11c4790308b91dbd0?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/7384437/lars"}, "edited": false, "score": 0, "creation_date": 1495631184, "post_id": 44158835, "comment_id": 75334845, "body": "@lars: If it absolutely must be freed before the function scope completes, just put braces around the block of code where you need the <code>vector</code> to create a nested scope; declare it after the open brace, and it&#39;s guaranteed to be cleaned when you reach the close brace. The <code>swap</code> &quot;trick&quot; costs more, initializing and destroying a junk vector (you could just as easily <code>resize</code> to avoid the garbage vector). And it&#39;s not as flexible; the nested block trick works properly with all RAII resources, even if they don&#39;t support <code>swap</code>-ing."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 488, "user_id": 7384437, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/386e2d14621537e11c4790308b91dbd0?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/7384437/lars"}, "edited": false, "score": 0, "creation_date": 1495631192, "post_id": 44158835, "comment_id": 75334853, "body": "@lars No, doing nothing the system free the memory from yourself. I want free the memory in a definite moment(manually). do simplevector.clear() isn&#39;t enough. The mine is correct procedure but I don&#39;t know if there is same problem for nested vectors"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1495631416, "post_id": 44158835, "comment_id": 75335041, "body": "@Umbert: The nested <code>vector</code>s are destroyed when you <code>clear</code>. Technically, the top level <code>vector</code> might preserve the space to hold items after a <code>clear</code>, but its contents <i>must</i> be destructed by the standard. All you&#39;re getting, at most, by going any further is recovering the reserved space for the the top-level <code>vector</code> (held in case new things are pushed onto it)."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1495631674, "post_id": 44158835, "comment_id": 75335245, "body": "@ShadowRanger Yes you are right, I want be sure that is freed the reserved space that clear does not guarantee and swap yes, but the reserved space for the nested vectors is freed too (or I have to call nested swap)?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495631796, "post_id": 44158835, "comment_id": 75335346, "body": "@Umbert vectors release their memory on destruction so no you dont have to nested swap."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1495631905, "post_id": 44158835, "comment_id": 75335424, "body": "@Umbert: To be clear, the nested vectors are <i>gone</i>. The reserved space to accommodate a <code>vector</code> is trivial (12-24 bytes IIRC), so unless your top-level <code>vector</code> was sized for millions of sub-<code>vector</code>s, what&#39;s left after clearing it is trivial (and odds are, <code>vector.clear</code> will reduce the reserved space if it&#39;s too large). All the actual space reserved by those sub-<code>vector</code>s for their own items is gone, because they themselves are gone."}, {"owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1495632540, "post_id": 44158835, "comment_id": 75335978, "body": "@ShadowRanger I&#39;m training a neural network. Can reach 1 million and more samples the top-level vector. I also have various structures that handle the same set of samples for various purposes. So releasing the reserved memory space at the top-level  may be  important too. The procedure you mentioned in the answer is ok anyway. Thanks"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1495655078, "post_id": 44158835, "comment_id": 75350608, "body": "Have you look at <code>std::vector::shrink_to_fit</code>./"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1495630858, "creation_date": 1495630858, "answer_id": 44159178, "question_id": 44158835, "link": "https://stackoverflow.com/questions/44158835/is-it-necessary-a-nested-freeing-of-reserved-memory-in-a-stdvectorpairvect/44159178#44159178", "title": "Is it necessary a &quot;nested&quot; freeing of reserved memory in a std::vector&lt;pair&lt;vector&lt;int&gt;,int&gt;&gt; for manually free it?", "body": "<p>I suspect what you're asking is how to reduce the <code>capacity</code> of both the outer vector and all nested vectors.</p>\n\n<p>If that is the case, then you'll have to treat each internal vector separately.</p>\n\n<p>For the record, a <code>swap</code> probably won't do it since it's most likely implementation will simply swap the 2 vectors' inner implementations.</p>\n\n<p>If I wanted to reduce a vector's capacity I'd probably do something like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\n\n// general case\ntemplate&lt;class Vector&gt;\nauto reduce_capacity_impl(Vector&amp; target) -&gt; Vector&amp;\n{\n    auto temp = Vector();\n    temp.reserve(target.size());\n    auto first = std::make_move_iterator(target.begin());\n    auto last = std::make_move_iterator(target.end());\n    std::copy(first, last, std::back_inserter(temp));\n    std::swap(temp, target);\n    return target;\n}\n\n// vector of non-vector\ntemplate&lt;class T, class A&gt;\nauto reduce_capacity(std::vector&lt;T, A&gt;&amp; target) -&gt; std::vector&lt;T, A&gt;&amp;\n{\n    return reduce_capacity_impl(target);\n};\n\n// vector of vector\ntemplate&lt;class T, class AOuter, class AInner&gt;\nauto reduce_capacity(std::vector&lt;std::vector&lt;T, AInner&gt;, AOuter&gt;&amp; target) -&gt; std::vector&lt;std::vector&lt;T, AInner&gt;, AOuter&gt;&amp;\n{\n    for (auto&amp; i : target)\n    {\n        reduce_capacity(i);\n    }\n\n    return reduce_capacity_impl(target);\n};\n\n\nint main()\n{\n    std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt; iii;\n\n    reduce_capacity(iii);\n}\n</code></pre>\n\n<p>I could be mistaken, and what you want to do is clear the vector and deallocate all memory associated with it.</p>\n\n<p>In this case, swapping with an empty vector will do what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 6, "last_activity_date": 1495631668, "creation_date": 1495631668, "answer_id": 44159485, "question_id": 44158835, "link": "https://stackoverflow.com/questions/44158835/is-it-necessary-a-nested-freeing-of-reserved-memory-in-a-stdvectorpairvect/44159485#44159485", "title": "Is it necessary a &quot;nested&quot; freeing of reserved memory in a std::vector&lt;pair&lt;vector&lt;int&gt;,int&gt;&gt; for manually free it?", "body": "<p>If you absolutely must guarantee that the <code>vector</code> is cleaned before the function scope exits, just add additional scope.</p>\n\n<p>For original code:</p>\n\n<pre><code>... myfunc(...) {\n\n    ... stuff without vector ...\n\n    vector&lt; pair&lt;vector&lt;int&gt; , int&gt; &gt; mapped_samples;\n\n    ... stuff using vector ...\n\n    ... more stuff without vector ...\n\n}\n</code></pre>\n\n<p>to ensure the <code>vector</code> is completely gone after stuff stops using it, just add braces:</p>\n\n<pre><code>... myfunc(...) {\n\n    ... stuff without vector ...\n\n    {  // Start of vector's block scope\n        vector&lt; pair&lt;vector&lt;int&gt; , int&gt; &gt; mapped_samples;\n\n        ... stuff using vector ...\n\n    }  // End of vector's block scope, guaranteed to be cleaned here\n\n    ... more stuff without vector ...\n\n}\n</code></pre>\n\n<p>This is cleaner than a <code>swap</code> trick (which must create and destroy a garbage <code>vector</code>), and more general; it works for all RAII resources, and is in fact the common way to use <a href=\"http://en.cppreference.com/w/cpp/thread/lock_guard\" rel=\"noreferrer\"><code>std::lock_guard</code></a>.</p>\n"}], "owner": {"reputation": 812, "user_id": 5927678, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3136b410af580233ff7c988479e45ece?s=128&d=identicon&r=PG&f=1", "display_name": "Umbert", "link": "https://stackoverflow.com/users/5927678/umbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 44159485, "answer_count": 2, "score": 1, "last_activity_date": 1495631743, "creation_date": 1495630006, "last_edit_date": 1495631743, "question_id": 44158835, "link": "https://stackoverflow.com/questions/44158835/is-it-necessary-a-nested-freeing-of-reserved-memory-in-a-stdvectorpairvect", "title": "Is it necessary a &quot;nested&quot; freeing of reserved memory in a std::vector&lt;pair&lt;vector&lt;int&gt;,int&gt;&gt; for manually free it?", "body": "<p>I have:</p>\n\n<pre><code>vector&lt; pair&lt;vector&lt;int&gt; , int&gt; &gt; mapped_samples;\n</code></pre>\n\n<p>This is very large. I would manually free memory. I know that a trick for a simple vector is:</p>\n\n<pre><code>vector&lt;int&gt; simple_vector;\nvector&lt;int&gt;().swap(simple_vector); \n</code></pre>\n\n<p>In my case it's ok do:</p>\n\n<pre><code>vector&lt;pair&lt;vector&lt;int&gt; , int&gt;&gt;().swap(mapped_samples);\n</code></pre>\n\n<p>or is necessary do some nested operation?</p>\n\n<p>(I'm using C++11)</p>\n"}, {"tags": ["c++", "pointers", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1495629846, "post_id": 44158771, "comment_id": 75333775, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44158771/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495630673, "post_id": 44158771, "comment_id": 75334425, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 : I agree with the first part of your comment, but to be fair, I believe the OP <i>has</i> included an MCVE."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495630742, "post_id": 44158771, "comment_id": 75334478, "body": "@Martin That&#39;s a stock comment I&#39;m frequently using. I&#39;m not going to adapt it all the time I apply it."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1495631396, "post_id": 44158771, "comment_id": 75335026, "body": "I would relook at your code, it appears that you have no error checking in your <code>reverseSubList</code> function either, so if you have a list of size 10, and your passing in a 3 for K, this means this sublist will run atleast 4 times(so its going to move 12 elements), at which pointer current ends up being null, and your defereferencing null...  maybe change <code>while(sz &gt; 0)</code> to <code>while(sz &gt; 0 &amp;&amp; current != NULL)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1495631336, "creation_date": 1495631336, "answer_id": 44159353, "question_id": 44158771, "link": "https://stackoverflow.com/questions/44158771/segmentation-fault-while-reversing-every-k-elements-of-a-linkedlist/44159353#44159353", "title": "Segmentation fault while reversing every K elements of a linkedlist", "body": "<p>My debugger told me that <code>current</code> is NULL at some point (see below), and dereferencing a <code>NULL</code> pointer is UB (and usually ends up in a segfault).</p>\n\n<pre><code>ListNode* reverseSubList(ListNode* prev, ListNode* start, int sz) {\n\n  ListNode *current, *next;\n  current = start;\n  while (sz&gt;0) {\n    next = current-&gt;next;   // &lt;&lt;&lt; current can be NULL here\n  ....\n</code></pre>\n\n<p>To debug modify like this:</p>\n\n<pre><code>ListNode* reverseSubList(ListNode* prev, ListNode* start, int sz) {\n\n  ListNode *current, *next;\n  current = start;\n  while (sz&gt;0) {\n    if (current == NULL)\n    {\n       printf(\"Fixme\");\n       exit(1);\n    }\n    next = current-&gt;next;   // &lt;&lt;&lt; current can be NULL here\n  ....\n</code></pre>\n\n<p>or better: learn how to use your debugger and use it. It will quickly pay off.</p>\n"}], "owner": {"reputation": 3, "user_id": 8059440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nWjFR.png?s=128&g=1", "display_name": "Code Hero", "link": "https://stackoverflow.com/users/8059440/code-hero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 44159353, "answer_count": 1, "score": -4, "last_activity_date": 1495633633, "creation_date": 1495629805, "last_edit_date": 1495633633, "question_id": 44158771, "link": "https://stackoverflow.com/questions/44158771/segmentation-fault-while-reversing-every-k-elements-of-a-linkedlist", "title": "Segmentation fault while reversing every K elements of a linkedlist", "body": "<p>I am trying to reverse the linked list in C++. Specific problem statement is this:\nGiven a singly linked list and an integer <code>K</code>, reverses the nodes of the list <code>K</code> at a time and returns modified linked list.</p>\n\n<p>Example: Given linked list: 1 -> 2 -> 3 -> 4 -> 5 -> 6 and <code>K=2</code>,</p>\n\n<p>Modified linked list should be:  2 -> 1 -> 4 -> 3 -> 6 -> 5. </p>\n\n<p>But my code runs into segmentation fault. And I tried everything but not able to figure out whats wrong. Please help. TIA.</p>\n\n<p>My code:</p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct ListNode {\n    int val;\n    ListNode *next;\n    ListNode(int x) : val(x), next(NULL) {}\n};\n\nListNode* reverseSubList(ListNode* prev, ListNode* start, int sz){\n\n    ListNode *current, *next;\n    current = start;\n    while (sz&gt;0) {\n        next = current-&gt;next;\n        current-&gt;next = prev;\n        prev = current;\n        current = next;\n        sz--;\n    }\n\n    return prev;  \n}\n\nListNode* reverseList(ListNode* A, int B) {\n\n    ListNode *start, *end;\n    int i;\n    start = A;\n    end = NULL;\n    while (start!=NULL) {\n        end = reverseSubList(end, start, B); //end stores the first element of the last k elements reversed.\n        start = end-&gt;next; \n    }\n\n    return end;   \n}\n\nint main() {\n    ListNode *linkedlist = new ListNode(10);\n    ListNode *temp, *next;\n    temp = linkedlist;\n    int i=9;\n    while (i&gt;0) {\n        next = new ListNode(i*2);\n        temp-&gt;next = next;\n        temp = temp-&gt;next;\n        i--;\n    }\n\n    for (temp=linkedlist; temp-&gt;next!= NULL; temp = temp-&gt;next)\n        cout&lt;&lt;temp-&gt;val&lt;&lt;\" \";\n\n    next = reverseList(linkedlist, 3);\n    cout&lt;&lt;\"\\n\";\n\n    for (temp=next; temp-&gt;next!= NULL; temp = temp-&gt;next)\n        cout&lt;&lt;temp-&gt;val&lt;&lt;\" \";\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "sfinae", "readability", "enable-if"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1495629899, "post_id": 44158691, "comment_id": 75333803, "body": "I believe you are misusing SFINAE. It should be used to disable different overloads. On the other hand we have <i>specializations</i> which are better suited in this case."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1495630056, "post_id": 44158691, "comment_id": 75333929, "body": "@DeiDei  Do you mean specialization at class level, e.g. <code>template&lt;....&gt;class Test&lt;....&gt;{}</code>?   If so, I think I can&#39;t, because I use SNIFAE to avoid code duplication inside a very-similar class. (not sure)"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1495630279, "post_id": 44158691, "comment_id": 75334132, "body": "@javaLover Show us what you really want to do, not how you are trying to achieve it - I don&#39;t see why you would not be able to use specialization here."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1495630562, "post_id": 44158691, "comment_id": 75334333, "body": "@Holt Thank, I edited my question to show more real example."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1495631915, "post_id": 44158691, "comment_id": 75335436, "body": "Do you use template arguments <code>C</code> and <code>D</code> when <code>X</code> has neither? Does the rest of the class depend on <code>A</code> - <code>D</code>? My guess is that you could have a top class with only <code>A</code> and <code>B</code> and then specialize the class depending on <code>X</code> to have different <code>add</code>."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1495633896, "post_id": 44158691, "comment_id": 75337110, "body": "@Holt Around 30% still depends on <code>C</code> and <code>D</code>.    Yes, I agree I can specialize it.  The disadvantage of such approach is that different version &quot;add&quot; will be far from each other (i.e. far-away lines / files), so it may cause maintainability problem."}], "answers": [{"comments": [{"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1495634433, "post_id": 44159934, "comment_id": 75337573, "body": "Thank for the big demo!   Do you happen to know workaround about the last part of question i.e. when those functions actually received different parameter?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1495635493, "post_id": 44159934, "comment_id": 75338433, "body": "@javaLover: From what I can tell, you probably want to specialize the class rather than the functions for that last example. Also, remove the <code>typename</code> for the <code>constexpr</code> booleans if you&#39;re trying to reference another class&#39; <code>static constexpr bool</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1495643043, "post_id": 44159934, "comment_id": 75344200, "body": "@javaLover: <a href=\"https://wandbox.org/permlink/Jnuhby6MsgADhnZP\" rel=\"nofollow noreferrer\">here</a> is the tag dispatch approach applied to your example with different parameters."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1495675977, "post_id": 44159934, "comment_id": 75357661, "body": "After I praise your solution silently, I found that intellisense will no longer work for <code>add()</code>.  Thus, in real life, I will stick with my old solution.  Because of the beauty of your solution, I can&#39;t really resist to press accept though.  Thank."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 3, "last_activity_date": 1495643251, "last_edit_date": 1495643251, "creation_date": 1495632811, "answer_id": 44159934, "question_id": 44158691, "link": "https://stackoverflow.com/questions/44158691/move-sfinae-condition-to-the-left-most-for-readability/44159934#44159934", "title": "Move SFINAE condition to the left-most for readability", "body": "<p>I think that until you get <a href=\"http://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"nofollow noreferrer\">constexpr if</a> with C++17, the most legible way to do this is with tagged dispatch:</p>\n\n<pre><code>template&lt;bool a,bool b&gt;\nclass Test{\npublic:\n    void f()\n    {\n        fhelp(f_tag&lt;&gt;{});\n    }\nprivate:\n    template&lt;bool = a, bool = b&gt;\n    struct f_tag{};\n\n    void  fhelp(f_tag&lt;true, true&gt;){}\n    void  fhelp(f_tag&lt;true, false&gt;){}\n    void  fhelp(f_tag&lt;false, true&gt;){}\n    void  fhelp(f_tag&lt;false, false&gt;){}\n};\n</code></pre>\n\n<p>That way we can be more explicit about what the expected values of <code>a</code> and <code>b</code> are. This works well especially since your conditionals are all <code>&amp;&amp;</code>. It's also more obvious to the naked eye that no two overloads are the same.</p>\n\n<h2><a href=\"https://wandbox.org/permlink/YdrqP7pu8tVCXUzd\" rel=\"nofollow noreferrer\">Demo</a></h2>\n\n<hr>\n\n<h3>Edit</h3>\n\n<p>The C++17 version would have us write our <code>f()</code> like so:</p>\n\n<pre><code>void f()\n{\n    if constexpr (a &amp;&amp; b)\n    {\n         // ...\n    }\n    if constexpr (a &amp;&amp; !b)\n    {\n        // ...\n    }\n    if constexpr (!a &amp;&amp; b)\n    {\n        // ...\n    }\n    if constexpr (!a &amp;&amp; !b)\n    {\n        // ...\n    }\n}\n</code></pre>\n\n<p>In fact this may not be very legible after all. Personally I still prefer the tagged dispatch approach.</p>\n\n<hr>\n\n<h3>Edit2:</h3>\n\n<p>Regarding your \"real-world\" example where the functions have different parameters, you may start to consider specializing the class instead. However, you can still accomplish what you need with tag dispatch. The public-facing function needs to become a variadic template, while the helper functions retain their true types, so you're still safe:</p>\n\n<pre><code>public: \n    template&lt;bool = X::hasC, bool = X::hasD&gt;\n    struct add_tag{};\n\n    template&lt;class... T&gt;\n    void add(T&amp;&amp;... args)\n    {\n        add_help(add_tag&lt;&gt;{}, std::forward&lt;T&gt;(args)...);\n    }\n\nprivate:\n    void add_help(add_tag&lt;false, false&gt;, A a, B b)\n    {/*..*/}\n    void add_help(add_tag&lt;true, false&gt;, A a, B b, C c)\n    {/*..*/}\n    void add_help(add_tag&lt;false, true&gt;, A a, B b, D d)\n    {/*..*/}\n    void add_help(add_tag&lt;true, true&gt;, A a, B b, C c, D d)\n    {/*..*/}\n</code></pre>\n\n<h3><a href=\"https://wandbox.org/permlink/HsSTnCZ60OmieGs5\" rel=\"nofollow noreferrer\">Demo2</a></h3>\n"}], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 44159934, "answer_count": 1, "score": 1, "last_activity_date": 1495643251, "creation_date": 1495629587, "last_edit_date": 1495630844, "question_id": 44158691, "link": "https://stackoverflow.com/questions/44158691/move-sfinae-condition-to-the-left-most-for-readability", "title": "Move SFINAE condition to the left-most for readability", "body": "<p><a href=\"https://stackoverflow.com/questions/15427667/sfinae-working-in-return-type-but-not-as-template-parameter\">Default template arguments are not considered when compiler judges whether there are some duplicate overload function.</a>  </p>\n\n<p>This totally ruins my fun, while I try to push every dirty thing to left-most.</p>\n\n<p>Here is an example.<br>\nAlthough the below code is not compilable, it is relatively beautiful and easy to read :- </p>\n\n<pre><code>template&lt;bool enable= a&amp;&amp; b&gt;  typename std::enable_if_t&lt;enable,void&gt; f(){}\ntemplate&lt;bool enable= a&amp;&amp;!b&gt;  typename std::enable_if_t&lt;enable,void&gt; f(){}\ntemplate&lt;bool enable=!a&amp;&amp; b&gt;  typename std::enable_if_t&lt;enable,void&gt; f(){}\ntemplate&lt;bool enable=!a&amp;&amp;!b&gt;  typename std::enable_if_t&lt;enable,void&gt; f(){}\n                                                             //^ so neat\nlook like : if(enable){instantiate static f(){}} ... so intuitive! \n</code></pre>\n\n<p>... compared to a compilable one :-      </p>\n\n<pre><code>template&lt;bool a1=a,bool b1=b&gt; typename std::enable_if_t&lt; a1&amp;&amp; b1,void&gt; f(){}\ntemplate&lt;bool a1=a,bool b1=b&gt; typename std::enable_if_t&lt; a1&amp;&amp;!b1,void&gt; f(){}\ntemplate&lt;bool a1=a,bool b1=b&gt; typename std::enable_if_t&lt;!a1&amp;&amp; b1,void&gt; f(){}\ntemplate&lt;bool a1=a,bool b1=b&gt; typename std::enable_if_t&lt;!a1&amp;&amp;!b1,void&gt; f(){}\n          ^ two temp \"type\"  ----&gt; scroll -------&gt;      ^ deep hidden logic\n</code></pre>\n\n<p>It may seem to be a trivial problem, but it reoccurs to me in many files.<br>\nIt makes me nervous. I start to code SFINAE with fear.             </p>\n\n<p>Are there some ways to make it works and still be concise and intuitive?<br>\nHere is <strong><a href=\"http://coliru.stacked-crooked.com/a/7f78560683ec7e8f\" rel=\"nofollow noreferrer\">coliru demo</a>.</strong> </p>\n\n<p><strong>Edit:</strong> Here is an example that is more similar to the real world case (beautiful-but-wrong version):-</p>\n\n<pre><code>template&lt;class X,class A,class B,class C,class D&gt;class Database{\n    public: static constexpr bool hasC=typename X::hasC;             \n    public: static constexpr bool hasD=typename X::hasD;    \n    /** some complex field (NOT depend on \"hasC\" and \"hasD\") */    \n    public: template&lt;bool enable=!hasC&amp;&amp;!hasD&gt;      \n      std::enable_if_t&lt;enable,void&gt; add(A a,B b){    \n         /**some complex */\n    }\n    public: template&lt;bool enable=hasC&amp;&amp;!hasD&gt;      \n      std::enable_if_t&lt;enable,void&gt; add(A a,B b,C c){    \n         /**some complex */\n    }\n    public: template&lt;bool enable=!hasC&amp;&amp;hasD&gt;      \n      std::enable_if_t&lt;enable,void&gt; add(A a,B b,D d){    \n         /**some complex */\n    }\n    public: template&lt;bool enable=hasC&amp;&amp;hasD&gt;      \n      std::enable_if_t&lt;enable,void&gt; add(A a,B b,C c,D d){    \n         /**some complex */\n    }\n}; \n</code></pre>\n"}, {"tags": ["c++", "azure", "winapi"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1495647825, "post_id": 44158513, "comment_id": 75346882, "body": "They seem to offer <a href=\"https://dev.applicationinsights.io/\" rel=\"nofollow noreferrer\">public REST API</a> (public preview as for 2017.05.24) which should be suitable for anyone."}, {"owner": {"reputation": 1049, "user_id": 2747755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/011fcb11ff675eb6e09a60a4fc7b9ebc?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Krouwel", "link": "https://stackoverflow.com/users/2747755/andy-krouwel"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1496930147, "post_id": 44158513, "comment_id": 75872872, "body": "The bits of REST API I found seemed to be for querying existing telemetry, not providing it in the first place so I avoided that track."}], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 2747755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/011fcb11ff675eb6e09a60a4fc7b9ebc?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Krouwel", "link": "https://stackoverflow.com/users/2747755/andy-krouwel"}, "edited": false, "score": 1, "creation_date": 1496930100, "post_id": 44234126, "comment_id": 75872833, "body": "I went with a variant on #3, sending data over a socket to a .net service that then passed it on to AI usig the easy APIs it had access to."}, {"owner": {"reputation": 807, "user_id": 173073, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/SIrcJ.jpg?s=128&g=1", "display_name": "Dzmitry Lahoda", "link": "https://stackoverflow.com/users/173073/dzmitry-lahoda"}, "edited": false, "score": 0, "creation_date": 1602179080, "post_id": 44234126, "comment_id": 113645981, "body": "were is REST API to POST data?"}], "tags": [], "owner": {"reputation": 3752, "user_id": 3646920, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e4af72d202540ebf4b7d06a405761287?s=128&d=identicon&r=PG&f=1", "display_name": "ZakiMa", "link": "https://stackoverflow.com/users/3646920/zakima"}, "is_accepted": true, "score": 2, "last_activity_date": 1496027560, "creation_date": 1496027560, "answer_id": 44234126, "question_id": 44158513, "link": "https://stackoverflow.com/questions/44158513/is-there-an-easy-way-to-supply-data-to-application-insights-from-normal-win32-c/44234126#44234126", "title": "Is there an easy way to supply data to Application Insights from normal win32 C++ code?", "body": "<p>Currently there is no Application Insights client library for native applications (c/c++). Though it's in backlog I don't think it will be prioritized higher than java/node.js. So, I would not rely on its release anytime soon.</p>\n\n<p>Customers who wanted to send telemetry from native applications usually picked one of the following options:</p>\n\n<ol>\n<li>Using REST API directly. If application is going to use only couple of telemetry documents then it should be straightforward. With the most complexity coming from own requirements such as persistent channel.</li>\n<li>Host CLR + use .NET Application Insights SDK</li>\n<li>Have .NET service running on a box and implement communication channel between native app and this service.</li>\n</ol>\n\n<p>Depending on environment (for instance, #2 makes sense if app already hosts .NET; #3 makes sense if there is already installed .NET service in addition to native app) you can check whether on of these options will work for you.</p>\n"}], "owner": {"reputation": 1049, "user_id": 2747755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/011fcb11ff675eb6e09a60a4fc7b9ebc?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Krouwel", "link": "https://stackoverflow.com/users/2747755/andy-krouwel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 1, "accepted_answer_id": 44234126, "answer_count": 1, "score": 2, "last_activity_date": 1496027560, "creation_date": 1495629092, "question_id": 44158513, "link": "https://stackoverflow.com/questions/44158513/is-there-an-easy-way-to-supply-data-to-application-insights-from-normal-win32-c", "title": "Is there an easy way to supply data to Application Insights from normal win32 C++ code?", "body": "<p>I'd like to know if there's something like a dll or lib (with headers, and possibly documentation) that can be linked into a normal* win32 C++ solution so it can (by function call) notify Application Insights of page views and send metric values. </p>\n\n<p>This seems like it should exist and be simple to find, but I'm just going round in circles on Google, finding documentation for reading values back out via a web API, or using C#, or projects that other people tried in the past but now have no source available. </p>\n\n<p>This is for updating a diagnostic tool which I'm trying to avoid having to completely re-architect because the logging now needs to go to a slightly different service. </p>\n\n<p>*ie. not Winforms, C++/CX, Xamarin or UWP. Straight, command-line c++. </p>\n"}, {"tags": ["c++", "winusb"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495629865, "post_id": 44158204, "comment_id": 75333785, "body": "Documentation says that &quot;The buffer length must be a multiple of the maximum endpoint packet size.&quot; Maybe that&#39;s it?"}, {"owner": {"reputation": 266, "user_id": 5271942, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VMtEs.png?s=128&g=1", "display_name": "sh5164", "link": "https://stackoverflow.com/users/5271942/sh5164"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495629967, "post_id": 44158204, "comment_id": 75333871, "body": "It might be...Although that sounds like klingon to me. I&#39;ll take a look at what is meant by endpoint packet size. I think it&#39;s about USB_ENDPOINT_DESCRIPTOR"}, {"owner": {"reputation": 266, "user_id": 5271942, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VMtEs.png?s=128&g=1", "display_name": "sh5164", "link": "https://stackoverflow.com/users/5271942/sh5164"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495630065, "post_id": 44158204, "comment_id": 75333944, "body": "@bartop But in the tutorial they just say that the buffer length is a strlen of the UCHAR * passed as a message, they contradict themselves between each documents"}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495630330, "post_id": 44158204, "comment_id": 75334175, "body": "&quot;length is a strlen of the UCHAR *&quot; - that&#39;s perfectly compatible with the fact that the buffer size is restricted to multiple of packet size. Perhaps you have to stuff your &quot;Helo world&quot; with additional chars to make the size of the buffer right"}, {"owner": {"reputation": 266, "user_id": 5271942, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VMtEs.png?s=128&g=1", "display_name": "sh5164", "link": "https://stackoverflow.com/users/5271942/sh5164"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495630649, "post_id": 44158204, "comment_id": 75334404, "body": "@bartop I&#39;ll try that"}, {"owner": {"reputation": 266, "user_id": 5271942, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VMtEs.png?s=128&g=1", "display_name": "sh5164", "link": "https://stackoverflow.com/users/5271942/sh5164"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1495632531, "post_id": 44158204, "comment_id": 75335971, "body": "@bartop No change whatever the size of the buffer..."}], "owner": {"reputation": 266, "user_id": 5271942, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VMtEs.png?s=128&g=1", "display_name": "sh5164", "link": "https://stackoverflow.com/users/5271942/sh5164"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496066292, "creation_date": 1495628191, "last_edit_date": 1496066292, "question_id": 44158204, "link": "https://stackoverflow.com/questions/44158204/writing-to-a-usb-device-via-winusb", "title": "Writing to a USB device via WinUsb", "body": "<p><strong>LAST UPDATE :</strong></p>\n\n<p>Now I have a string compatible with my device (it had to be in a specific format of non-printable bytes), but an infinite loop. The program never exits WinUsb_WritePipe.</p>\n\n<p><strong>ORIGINAL TROUBLE :</strong></p>\n\n<p>After initializing all my WinUsb interface (as precised in this well done MSDN tutorial : <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx</a>)</p>\n\n<p>I get everything well setup and sending true without error, except for the last step.</p>\n\n<pre><code>PWINUSB_INTERFACE_HANDLE piUsbHandle = new WINUSB_INTERFACE_HANDLE();\nUSB_INTERFACE_DESCRIPTOR *eUsbInterfaceDescriptor = new USB_INTERFACE_DESCRIPTOR();\n\nWinUsb_Initialize(sfhDeviceHandle, piUsbHandle) //true\n\ndevInfo-&gt;winUsbHandle = *piUsbHandle;\n\nWinUsb_QueryInterfaceSettings(*piUsbHandle, 1, eUsbInterfaceDescriptor) //true\n\nfor (int i= 0; i &lt;= eUsbInterfaceDescriptor-&gt;bNumEndpoints - 1; i++)\n{\n        if (!WinUsb_QueryPipe((WINUSB_INTERFACE_HANDLE)devInfo-&gt;winUsbHandle, 1, (unsigned char)i, &amp;eWinUsbPipeInformation))\n        {\n            return NULL;\n        }\n        if (((eWinUsbPipeInformation.PipeType == UsbdPipeTypeBulk)\n             &amp; this-&gt;isUsbEndPointDirectionIn(eWinUsbPipeInformation.PipeId)))\n        {\n            UtilityFunctions::displayTrace(\"initializeDevice : devInfo-&gt;bulkInPipe set\");\n            std::cout &lt;&lt; \"New In Pipe = \" &lt;&lt;  (int)eWinUsbPipeInformation.PipeId &lt;&lt; std::endl;\n            devInfo-&gt;bulkInPipe = eWinUsbPipeInformation.PipeId;\n        }\n        else if (((eWinUsbPipeInformation.PipeType == UsbdPipeTypeBulk)\n                  &amp; this-&gt;isUsbEndpointDirectionOut(eWinUsbPipeInformation.PipeId)))\n        {\n            UtilityFunctions::displayTrace(\"initializeDevice : devInfo-&gt;bulkOutPipe set\");\n            std::cout &lt;&lt; \"New Out Pipe = \" &lt;&lt;  (int)eWinUsbPipeInformation.PipeId &lt;&lt; std::endl;\n            devInfo-&gt;bulkOutPipe = eWinUsbPipeInformation.PipeId;\n        }\n        else if (((eWinUsbPipeInformation.PipeType == UsbdPipeTypeInterrupt)\n                  &amp; this-&gt;isUsbEndPointDirectionIn(eWinUsbPipeInformation.PipeId)))\n        {\n            UtilityFunctions::displayTrace(\"initializeDevice : devInfo-&gt;InterruptInPipe set\");\n            devInfo-&gt;interruptInPipe = eWinUsbPipeInformation.PipeId;\n        }\n        else if (((eWinUsbPipeInformation.PipeType == UsbdPipeTypeInterrupt)\n                  &amp; this-&gt;isUsbEndpointDirectionOut(eWinUsbPipeInformation.PipeId)))\n        {\n            UtilityFunctions::displayTrace(\"initializeDevice : devInfo-&gt;InterruptOutPipe set\");\n            devInfo-&gt;interruptOutPipe = eWinUsbPipeInformation.PipeId;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"No settings for \" &lt;&lt; i &lt;&lt; std::endl;\n            continue;\n        }\n}\n</code></pre>\n\n<p>(devInfo is a custom object containing a <code>WINUSB_INTERFACE_HANDLE</code> and the <code>PipeId</code> needed to write on the device)</p>\n\n<p>It prints</p>\n\n<pre><code>initializeDevice : bNumEndpoints =&gt; 6\ninitializeDevice : devInfo-&gt;bulkOutPipe set\nNew Out Pipe = 1\ninitializeDevice : devInfo-&gt;bulkInPipe set\nNew In Pipe = 129\ninitializeDevice : devInfo-&gt;bulkOutPipe set\nNew Out Pipe = 2\ninitializeDevice : devInfo-&gt;bulkOutPipe set\nNew Out Pipe = 4\ninitializeDevice : devInfo-&gt;bulkInPipe set\nNew In Pipe = 134\ninitializeDevice : devInfo-&gt;bulkInPipe set\nNew In Pipe = 136\n</code></pre>\n\n<p>But for the last step, which is writing :</p>\n\n<pre><code>UCHAR ucBuffer[] = \"Hello world\";\nULONG uiBytesToWrite = 11;\nULONG ulBytesWritten = 0;\n\nif (devInfo-&gt;winUsbHandle == INVALID_HANDLE_VALUE)\n{\n    return;\n}\n\n\nWinUsb_WritePipe(devInfo-&gt;winUsbHandle, devInfo-&gt;bulkOutPipe, ucBuffer, uiBytesToWrite, &amp;ulBytesWritten, 0);//ERROR 87 : INVALID PARAMETER\n</code></pre>\n\n<p>I've tried with every PipeId possible (from 0 to 255 since it's on one byte) but still gets the same error.\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff540322(v=vs.85).aspx\" rel=\"nofollow noreferrer\">The WinUsb_WritePipe MSDN documentation</a> doesn't say anything about error 87.</p>\n"}, {"tags": ["c++", "c++11", "const-cast", "addressof"], "comments": [{"owner": {"reputation": 405, "user_id": 2338150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d087dc616eb88a91d26d59b12b12468c?s=128&d=identicon&r=PG", "display_name": "user2338150", "link": "https://stackoverflow.com/users/2338150/user2338150"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495628093, "post_id": 44158139, "comment_id": 75332461, "body": "i posted it already..."}, {"owner": {"reputation": 762, "user_id": 2493292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39ea4f86f873cca1afd4a02edff6483?s=128&d=identicon&r=PG&f=1", "display_name": "jamek", "link": "https://stackoverflow.com/users/2493292/jamek"}, "edited": false, "score": 0, "creation_date": 1495628120, "post_id": 44158139, "comment_id": 75332487, "body": "don&#39;t create another question, just ask in comment."}, {"owner": {"reputation": 405, "user_id": 2338150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d087dc616eb88a91d26d59b12b12468c?s=128&d=identicon&r=PG", "display_name": "user2338150", "link": "https://stackoverflow.com/users/2338150/user2338150"}, "edited": false, "score": 0, "creation_date": 1495628175, "post_id": 44158139, "comment_id": 75332543, "body": "okay, sure, but only this time.:)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1495628339, "post_id": 44158139, "comment_id": 75332687, "body": "btw... a flag as &quot;Possible duplicate&quot; isnt the end of the world. It just means that imho your question does not add enough to the linked question and that imho you could improve your question by making more clear what you thing is missing on that answer"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1495628425, "post_id": 44158139, "comment_id": 75332736, "body": "@user2338150 The reason <code>const_cast</code> is required is because compiler won&#39;t allow you to implicitely cast away <code>const&#47;volatile</code> qualifiers when doing <code>reinterpret_cast</code>."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1495628689, "post_id": 44158139, "comment_id": 75332918, "body": "@StoryTeller I think that the answer to the other question simply does not fully answer the question. It should not be accepted and OP should ask more questions in comments."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1495628737, "post_id": 44158139, "comment_id": 75332950, "body": "@StoryTeller I found a dupe that answers how the whole thing works.  That should satisfy the OP"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1495628758, "post_id": 44158139, "comment_id": 75332969, "body": "@freakish - The dup Nathan linked is an exact one. It answer this question fully (The const cast is needed because of the reinterpret cast, because that is needed, due to). The link in the post, and the one tobi voted as a dup, is not one however."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495628773, "post_id": 44158139, "comment_id": 75332974, "body": "@NathanOliver - Yes, I was just agreeing with you :)"}, {"owner": {"reputation": 405, "user_id": 2338150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d087dc616eb88a91d26d59b12b12468c?s=128&d=identicon&r=PG", "display_name": "user2338150", "link": "https://stackoverflow.com/users/2338150/user2338150"}, "edited": false, "score": 0, "creation_date": 1495628851, "post_id": 44158139, "comment_id": 75333029, "body": "Yes, this is the answer I&#39;ve been looking for, possibly more.:) I&#39;ll read it fully first. Thank you for pointing me to the answer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495628973, "post_id": 44158139, "comment_id": 75333112, "body": "I did vote for reopen, because first it seemed like a &quot;possible dupe&quot; but turened out not to be a duplicate. Imho everything went well here and SO mechanics proved once again to work ok. However, what I dont like is the attidute of getting offended on the smallest critisism and imho OP should remove the &quot;dismissive&quot; from the question because it isnt appropriate to someone who took the time to write an answer (no matter how short it is)"}, {"owner": {"reputation": 405, "user_id": 2338150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d087dc616eb88a91d26d59b12b12468c?s=128&d=identicon&r=PG", "display_name": "user2338150", "link": "https://stackoverflow.com/users/2338150/user2338150"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495650857, "post_id": 44158139, "comment_id": 75348558, "body": "@tobi303: I&#39;ll take that as constructive criticism, but obviously I had reason to get &#39;offended&#39;. It occurred to me that you did not even read the question completely, as the link you posted was the same one mentioned in the question. Besides, the answer mentioned in the post was plainly &#39;...&#39;(fill in a more appropriate word if you must). Anyways, the point of asking and answering is for the benefit of more than both the parties. So, I&#39;m removing the comment posted earlier, and I express my apologies if you found something rude."}], "owner": {"reputation": 405, "user_id": 2338150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d087dc616eb88a91d26d59b12b12468c?s=128&d=identicon&r=PG", "display_name": "user2338150", "link": "https://stackoverflow.com/users/2338150/user2338150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1495628472, "answer_count": 0, "score": 0, "last_activity_date": 1495650138, "creation_date": 1495628009, "last_edit_date": 1495650138, "question_id": 44158139, "link": "https://stackoverflow.com/questions/44158139/possible-implementation-of-stdaddressof", "closed_reason": "Duplicate", "title": "Possible implementation of std::addressof", "body": "<p>This could be a duplicate<a href=\"https://stackoverflow.com/questions/31682995/stdaddressof-strange-implementation\">[link]</a> but, the answer is rather short and not very clear. In a possible implementation like this:</p>\n\n<pre><code>template &lt;class T&gt;\nT * addressof(T &amp; v)\n{\n  return reinterpret_cast&lt;T *&gt;(&amp; const_cast&lt;char&amp;&gt;(reinterpret_cast&lt;const volatile char &amp;&gt;(v)));\n}\n</code></pre>\n\n<p>why is the <code>const_cast</code> needed?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "windows-7-x64"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1495627736, "post_id": 44157974, "comment_id": 75332169, "body": "<code>std::endl</code> does a flush (according to <a href=\"http://en.cppreference.com/w/cpp/io/manip/endl\" rel=\"nofollow noreferrer\">this page</a>) so adding a flush on top of that won&#39;t help (if that had been the problem)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1495627795, "post_id": 44157974, "comment_id": 75332215, "body": "This isn&#39;t the problem, but you&#39;re right that flushing the output stream doesn&#39;t affect this, and that&#39;s why you don&#39;t need <code>std::endl</code>; <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 75, "user_id": 8057948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f59098a760658cb22bbd3a2de85ae3?s=128&d=identicon&r=PG&f=1", "display_name": "John.A.Myer", "link": "https://stackoverflow.com/users/8057948/john-a-myer"}, "edited": false, "score": 0, "creation_date": 1495627857, "post_id": 44157974, "comment_id": 75332260, "body": "Thanks for the fast reply. I don&#39;t know what the problem is, but the flushing (no matter if on top or below the std::cout) did not show anything either."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1495628382, "post_id": 44157974, "comment_id": 75332711, "body": "My VS2013 provides a start menu entry Tools/Developer Command Prompt. It probably opens the cmd.exe with necessary additions to paths. Did you try to run your application in this?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1495629193, "post_id": 44157974, "comment_id": 75333272, "body": "Try this <a href=\"https://stackoverflow.com/a/2633814/8051589\">StackOverflow answer</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1495629314, "post_id": 44157974, "comment_id": 75333368, "body": "@Andre I think the OP did that already and documented it in the question."}, {"owner": {"reputation": 75, "user_id": 8057948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f59098a760658cb22bbd3a2de85ae3?s=128&d=identicon&r=PG&f=1", "display_name": "John.A.Myer", "link": "https://stackoverflow.com/users/8057948/john-a-myer"}, "edited": false, "score": 0, "creation_date": 1495630131, "post_id": 44157974, "comment_id": 75334001, "body": "Thanks for replies. I already did the setting (/SUBSYSTEM:CONSOLE), I can not do the AllocConsole part mentioned in the link from Andre Kampling, as this is in the header <code>windows.h</code>which I did not include (and think I should not?). I found a &quot;Developer Prompt&quot; in directory <code>... IDE\\Microsoft Visual Studio 14.0\\Common7\\Tools</code> and checked if it really is working with <code>clrver</code>but it does not show any output either"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1495631161, "post_id": 44157974, "comment_id": 75334825, "body": "@John.A.Myer I just tried to reproduce your problem in my VS2013. I created a new project, erased all this stdafx things and just typed your &quot;Hello World&quot; example. Ctrl+F5 fine (as in your case). Then I looked for the output directory (in the property dialog), opened cmd.exe and moved to this directory. Calling application from cmd.exe worked as well. So, bad news - cannot reproduce your problem. My guess was that the runtime library (which is linked in by VC) couldn&#39;t be found in your case. Therefore, I recommended to start the cmd.exe with extended environment for VS2013."}, {"owner": {"reputation": 75, "user_id": 8057948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f59098a760658cb22bbd3a2de85ae3?s=128&d=identicon&r=PG&f=1", "display_name": "John.A.Myer", "link": "https://stackoverflow.com/users/8057948/john-a-myer"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1495631417, "post_id": 44157974, "comment_id": 75335042, "body": "@Scheff Thank you for your effort. I think this tells me, the problem is either on my combination of OS and IDE, or something in my system is messed up"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1495631422, "post_id": 44157974, "comment_id": 75335048, "body": "... If you installed VS as usual it should be provided as entry in the Windows Start menu. In my case it is Start/All Apps/Visual Studio 2013/Visual Studio-Tools which opens a folder where you find a link &quot;Developer Command Prompt&quot;. Double clicking this I got a cmd (looking as usual) with probably extended environment. (I typed `echo %path% and saw a lot of VS related paths in it.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1495631604, "post_id": 44157974, "comment_id": 75335190, "body": "The question is whether your application does not find the necessary run-time and if - why. You could try to install the redistributables for this version of VS. In my case, I did this already in the past while trying our own software deploys. (This is valid for release version only.) You can try to find out about (missing) dependencies (to DLLs) using Dependency Walker."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8057948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f59098a760658cb22bbd3a2de85ae3?s=128&d=identicon&r=PG&f=1", "display_name": "John.A.Myer", "link": "https://stackoverflow.com/users/8057948/john-a-myer"}, "is_accepted": false, "score": 0, "last_activity_date": 1495632264, "creation_date": 1495632264, "answer_id": 44159700, "question_id": 44157974, "link": "https://stackoverflow.com/questions/44157974/no-output-on-stdcout-while-outside-of-ide/44159700#44159700", "title": "No output on std::cout while outside of IDE", "body": "<p>After the hint of @Scheff I threw the exe file into \"Dependency Walker\". It gave me a missing <code>UCRTBASED.DLL</code> and lots of second and third level missing dlls (I think this is usually the case on every application?).</p>\n\n<p>I somehow think my (recently installed) anti virus did interfere with that, because it shows some messages in the log regarding my HelloWorld.exe.</p>\n\n<p>However, deinstalling anti virus and restarting machine did the trick. I can finally see Hello World! on cmd.exe.</p>\n"}], "owner": {"reputation": 75, "user_id": 8057948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f59098a760658cb22bbd3a2de85ae3?s=128&d=identicon&r=PG&f=1", "display_name": "John.A.Myer", "link": "https://stackoverflow.com/users/8057948/john-a-myer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495632264, "creation_date": 1495627573, "last_edit_date": 1495629529, "question_id": 44157974, "link": "https://stackoverflow.com/questions/44157974/no-output-on-stdcout-while-outside-of-ide", "title": "No output on std::cout while outside of IDE", "body": "<p>I have this well known c++ program in my Visual Studio 2015 Prof:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"Hello World!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>As expected, it shows \"Hello World!\" if I hit Ctrl+F5. However, if I go to the directory within an cmd.exe and execute the HelloWorld.exe file, it doesn't show anything as output, but does quit (I can type in again).</p>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/10544479/see-stdcout-of-exe\">a similar question</a> I checked the settings of the project but I did not need to change anything, the Configuration Properties -> Linker -> System -> SubSystem already is at <code>Console (/SUBSYSTEM:CONSOLE)</code>.</p>\n\n<p>Flushing the std::cout also didn't help anything. It is reproducable on every freshly created project of VS2015 on my Win 7 64-bit machine and seems to  be presistent after rebooting.</p>\n\n<p>What is wrong with my IDE / settings?</p>\n"}, {"tags": ["java", "c++", "unicode", "utf", "mapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495750047, "post_id": 44157831, "comment_id": 75394981, "body": "<code>PWSTR</code> is a <code>wchar_t*</code>, where <code>wchar_t</code> is 2 bytes on Windows (UTF-16). Since Java strings use UTF-16, there is no conversion needed at all. Just use the Java string data as-is. If you are having trouble with it, you must not be passing the data correctly. Please <a href=\"https://stackoverflow.com/posts/44157831/edit\">edit</a> your question to show your actual Java code."}, {"owner": {"reputation": 394, "user_id": 4730210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/695fb105222177e02a5a384754d4d617?s=128&d=identicon&r=PG&f=1", "display_name": "coconut", "link": "https://stackoverflow.com/users/4730210/coconut"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495815673, "post_id": 44157831, "comment_id": 75424700, "body": "Thanks for your reply - I added the Java code to the post ... so I send the subject and body as a String but when the mail opens I mostly see question marks"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495824179, "post_id": 44157831, "comment_id": 75428990, "body": "Win32&#39;s <code>ULONG</code> is 4 bytes in size, but Java&#39;s <code>Long</code> is 8 bytes. Also, using <code>new String</code> with <code>String</code> input is redundant. And question marks usually imply a charset encoding issue."}, {"owner": {"reputation": 394, "user_id": 4730210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/695fb105222177e02a5a384754d4d617?s=128&d=identicon&r=PG&f=1", "display_name": "coconut", "link": "https://stackoverflow.com/users/4730210/coconut"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495836918, "post_id": 44157831, "comment_id": 75433952, "body": "@RemyLebeau &quot;And question marks usually imply a charset encoding issue&quot; - I am not sure I understand correctly; if my Java String is UTF-16 encoded and it can be passed as-is to PWSTR, then what could be the encoding issue here?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495838259, "post_id": 44157831, "comment_id": 75434297, "body": "First, fix your <code>ULONG</code> issue. You very well might be passing a bad structure to <code>MapiSendMailW()</code>, causing it to see invalid <code>PWSTR</code> pointers due to field offset mismatches. After that, any remaining encoding issue will not be on your end, it would be inside of <code>MailSendMailW()</code> itself when it is encoding the email. If it uses a charset that can&#39;t handle the Unicode characters you are trying to send, that can cause the question marks. Try specifying the <code>MAPI_FORCE_UNICODE</code> flag when calling <code>MapiSendMailW()</code>."}, {"owner": {"reputation": 394, "user_id": 4730210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/695fb105222177e02a5a384754d4d617?s=128&d=identicon&r=PG&f=1", "display_name": "coconut", "link": "https://stackoverflow.com/users/4730210/coconut"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1496060357, "post_id": 44157831, "comment_id": 75493679, "body": "Well the value I pass for the ULONG values is not a Java Long or long but actually a <code>com.sun.jna.NativeLong</code> - that works fine.  I now pass the PWSTR values as a <code>WString</code> (also JNA) and it now displays my subject, body and such correctly (before I only saw a line of &quot;???&quot;), except the unicode characters are sill displayed as question marks. I tried to set the <code>MAPI_FORCE_UNICODE</code> flag but it returned with <code>MAPI_E_UNICODE_NOT_SUPPORTED</code> (rc 27). As I cannot find any further information about that return code I am wondering what exactly does not support unicode here?"}, {"owner": {"reputation": 394, "user_id": 4730210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/695fb105222177e02a5a384754d4d617?s=128&d=identicon&r=PG&f=1", "display_name": "coconut", "link": "https://stackoverflow.com/users/4730210/coconut"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1496070629, "post_id": 44157831, "comment_id": 75500004, "body": "Ok, FYI I just tried the same thing with Outlook and it worked - everything was displayed correctly. The problem seems to be some Thunderbird config. Anyways, @RemyLebeau Thanks for your help!"}], "owner": {"reputation": 394, "user_id": 4730210, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/695fb105222177e02a5a384754d4d617?s=128&d=identicon&r=PG&f=1", "display_name": "coconut", "link": "https://stackoverflow.com/users/4730210/coconut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495815586, "creation_date": 1495627228, "last_edit_date": 1495815586, "question_id": 44157831, "link": "https://stackoverflow.com/questions/44157831/mapi-using-java-what-datatype-to-pass-for-pwstr", "title": "MAPI using Java - What datatype to pass for PWSTR?", "body": "<p>I want to use MAPISendMailW in Java. The function requires a MapiMessageW structure which I defined in my Java Code. The C++ code from the documentation looks like this (<a href=\"https://msdn.microsoft.com/en-us/library/hh707273(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/hh707273(v=vs.85).aspx</a>):</p>\n\n<pre><code>typedef struct {\n  ULONG            ulReserved;\n  PWSTR            lpszSubject;\n  PWSTR            lpszNoteText;\n  PWSTR            lpszMessageType;\n  PWSTR            lpszDateReceived;\n  PWSTR            lpszConversationID;\n  FLAGS            flFlags;\n  lpMapiRecipDescW lpOriginator;\n  ULONG            nRecipCount;\n  lpMapiRecipDescW lpRecips;\n  ULONG            nFileCount;\n  lpMapiFileDescW  lpFiles;\n} MapiMessageW, *lpMapiMessageW;\n</code></pre>\n\n<p>The PWSTR is defined as a pointer to a String of 16-Bit Unicode characters (<a href=\"https://msdn.microsoft.com/en-us/library/aa383751(v=vs.85).aspx#PWSTR\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa383751(v=vs.85).aspx#PWSTR</a>).</p>\n\n<p>The String I want to pass as e.g. the lpszSubject includes Unicode characters - for example String myString = \"sentence with a \u010d\". From my understanding Java uses UTF-16 for Strings. But when I try to pass myString just as the String that it is, it only displays garbage in the mail.\nThe same happens when I try to get the bytes first from the String and then send <strong>new String(subjectBytes, \"UTF-16\"))</strong>.</p>\n\n<p>What is the correct datatype on the java side to pass for the PWSTR values?</p>\n\n<p><strong>EDIT</strong>: as requested in the comments - the jave code</p>\n\n<p>This is where I defined my MapiMessageW:</p>\n\n<pre><code>class MapiMessageW extends Structure {\n        public NativeLong ulReserved;\n        public String lpszSubject;\n        public String lpszNoteText;\n        public String lpszMessageType;\n        public String lpszDateReceived;\n        public String lpszConversationID;\n        public NativeLong flFlags;\n        public Pointer lpOriginator;\n        public NativeLong nRecipCount;\n        public MapiRecipDescWs lpRecips;\n        public NativeLong nFileCount;\n        public MapiFileDescWs lpFiles;\n\n        [...]\n}\n</code></pre>\n\n<p>Filling in the values here - getSubject() and getBody() both return a String:</p>\n\n<pre><code>MapiMessageW message = new MapiMessageW();\nmessage.lpszSubject = new String(email.getSubject());\nmessage.lpszNoteText = new String(email.getBody());\nmessage.nRecipCount = new NativeLong(recipDescs.size());\nmessage.lpRecips = new MapiRecipDescWs(recipDescs);\nmessage.nFileCount = new NativeLong(fileDescs.size());\nmessage.lpFiles = new MapiFileDescWs(fileDescs);\n</code></pre>\n\n<p>Calling MapiSendMailW here, with the message as parameter:</p>\n\n<pre><code>rc = Mapi32W.INSTANCE.MAPISendMailW(sessionPtr.getValue(), null, message,\n        new NativeLong(Mapi32W.MAPI_DIALOG | Mapi32W.MAPI_LOGON_UI), null).longValue();\n</code></pre>\n"}, {"tags": ["c++", "copy-elision"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1495626688, "post_id": 44157579, "comment_id": 75331408, "body": "Look at copy elision."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1495626717, "post_id": 44157579, "comment_id": 75331428, "body": "Warning: You have violated the Rule Of Three!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495626719, "post_id": 44157579, "comment_id": 75331430, "body": "Your copy-constructor doesn&#39;t copy the contents of <code>obj.ptr</code>, it merely set the contents to something other."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495626765, "post_id": 44157579, "comment_id": 75331471, "body": "Also, your <code>show</code> function is <i>very</i> flawed. Where will <code>ptr</code> point after you called the function?"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 1, "creation_date": 1495626923, "post_id": 44157579, "comment_id": 75331593, "body": "<code>k == obj.k;</code> pretty sure you meant <code>k = obj.k</code>. BTW use the initialisation list for the constructor."}, {"owner": {"reputation": 29, "user_id": 5084692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-my1R_Ea4KSg/AAAAAAAAAAI/AAAAAAAAA8I/nc6j22PR-DY/photo.jpg?sz=128", "display_name": "Sadik Khan", "link": "https://stackoverflow.com/users/5084692/sadik-khan"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495627287, "post_id": 44157579, "comment_id": 75331854, "body": "yeah it&#39;s k = obj.k. For initialisation, it&#39;s working but on function return it&#39;s not working @nefas"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495627432, "post_id": 44157579, "comment_id": 75331941, "body": "I don&#39;t understand what you mean by &quot;For initialisation, it&#39;s working but on function return it&#39;s not working&quot;. Sorry"}, {"owner": {"reputation": 29, "user_id": 5084692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-my1R_Ea4KSg/AAAAAAAAAAI/AAAAAAAAA8I/nc6j22PR-DY/photo.jpg?sz=128", "display_name": "Sadik Khan", "link": "https://stackoverflow.com/users/5084692/sadik-khan"}, "edited": false, "score": 0, "creation_date": 1495627514, "post_id": 44157579, "comment_id": 75332005, "body": "Yes, the show function has flaw and I have corrected it. My question is, deep copy is performed on initialising(e.g. A obj2 = obj), But the function return is not performing any deep copy."}, {"owner": {"reputation": 29, "user_id": 5084692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-my1R_Ea4KSg/AAAAAAAAAAI/AAAAAAAAA8I/nc6j22PR-DY/photo.jpg?sz=128", "display_name": "Sadik Khan", "link": "https://stackoverflow.com/users/5084692/sadik-khan"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495627817, "post_id": 44157579, "comment_id": 75332227, "body": "I mean if I am initializing any object say like this ( A obj2 = obj), the copy constructor is getting called. But if I I do something like  this A obj = foo(), the it&#39;s not calling copy constructor @nefas"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495628139, "post_id": 44157579, "comment_id": 75332501, "body": "for that, check the link on top of the question: it has the answer. My comment is just a tip for writing better code (and fix a bug)."}, {"owner": {"reputation": 29, "user_id": 5084692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-my1R_Ea4KSg/AAAAAAAAAAI/AAAAAAAAA8I/nc6j22PR-DY/photo.jpg?sz=128", "display_name": "Sadik Khan", "link": "https://stackoverflow.com/users/5084692/sadik-khan"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1495628285, "post_id": 44157579, "comment_id": 75332634, "body": "thanks @Jarod42 , it&#39;s the case of copy elision, I have disabled copy elision and now it&#39;s working"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495629132, "post_id": 44157579, "comment_id": 75333225, "body": "By disabling copy elision all you&#39;ve really done is get rid of the symptom.  You should make sure you understand the comment by @nefas regarding the <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of three</a>."}], "owner": {"reputation": 29, "user_id": 5084692, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-my1R_Ea4KSg/AAAAAAAAAAI/AAAAAAAAA8I/nc6j22PR-DY/photo.jpg?sz=128", "display_name": "Sadik Khan", "link": "https://stackoverflow.com/users/5084692/sadik-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1495626721, "answer_count": 0, "score": 0, "last_activity_date": 1495626706, "creation_date": 1495626604, "last_edit_date": 1495626706, "question_id": 44157579, "link": "https://stackoverflow.com/questions/44157579/function-returning-object-is-not-performing-deep-copy-why-temp-returned-by-foo", "closed_reason": "Duplicate", "title": "function returning object is not performing deep copy. Why temp returned by foo() not deep copied?", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass A {\n  int k;\n  int *ptr;\npublic:\n  A(int a):k(a) { \n    cout&lt;&lt;\"ctor\\n\";\n    ptr = new int[k];\n    for(int i = 0; i &lt; k; i++) {\n      *(ptr + i) = i*i*i;\n    }\n  }\n  A(const A &amp;obj) {\n    cout&lt;&lt;\"copy ctor\\n\";\n    k == obj.k;\n    ptr = new int[k];\n    for(int i = 0; i &lt; k; i++) {\n      *(ptr + i) = i*i;\n    }\n  } \n  void show() {\n    for(int i = 0; i &lt; k; i++) {\n      cout&lt;&lt;*ptr++&lt;&lt;\" \";\n    }\n  }\n};\n\nA foo() {\n  A temp(5);\n  return temp;\n}\n\nint main() {\n  A obj = foo();\n  obj.show();\n  return 0;\n}\n</code></pre>\n\n<p>**    The temp object returned by foo() is not copied. Normal constructor is called in this but not copy constructor. Can anyone point where exactly I am going wrong.**</p>\n"}, {"tags": ["c++", "xamarin.mac", "visual-studio-mac"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495626137, "post_id": 44157364, "comment_id": 75330991, "body": "Are you linking using the c compiler, not c++?"}, {"owner": {"reputation": 1150, "user_id": 1041929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079961cf3436c6ae2a1c98366cd719e5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1041929/nick"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495626232, "post_id": 44157364, "comment_id": 75331062, "body": "Well, that is a good question. Xcode project is a C++ project (with STL). Visual Studio for Mac compiles with clang. I hunted following command from VSMac output:  xcrun -sdk macosx clang -g -mmacosx-version-min=10.12 -arch x86_64 -fobjc-runtime=macosx -ObjC /Users/mikolaj/Programowanie/Tries/XamarinAndCpp/XamarinMacA&zwnj;&#8203;pp/XamarinMacApp/bin&zwnj;&#8203;/Debug/XamarinWithCp&zwnj;&#8203;p.app/Contents/MonoB&zwnj;&#8203;undle/libMyCppLib.a -u _xamarin_nfloa     etc........ and map:    /Library/Frameworks/Xamarin.Mac.framework/Versions/Current/b&zwnj;&#8203;in/mmp /verbose /debug"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495626305, "post_id": 44157364, "comment_id": 75331113, "body": "The errors are typical for that. Can you show us the linker command line?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495626872, "post_id": 44157364, "comment_id": 75331560, "body": "It should call <code>clang++</code>, I can&#39;t help you how to control that in the IDE though."}, {"owner": {"reputation": 1150, "user_id": 1041929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079961cf3436c6ae2a1c98366cd719e5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1041929/nick"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495626949, "post_id": 44157364, "comment_id": 75331613, "body": "I put Xcode compiler log in gist: <a href=\"https://gist.github.com/dawmster/f848c18228a4fd0c3ce9c51b6db3fe8c#file-compiler_output-txt\" rel=\"nofollow noreferrer\">gist.github.com/dawmster/&hellip;</a>"}, {"owner": {"reputation": 1150, "user_id": 1041929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079961cf3436c6ae2a1c98366cd719e5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1041929/nick"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495627084, "post_id": 44157364, "comment_id": 75331711, "body": "And here is Visual Studio Mac compiler output: <a href=\"https://gist.github.com/dawmster/c6e1fabf3df3ec953faeacfbdce80af3#file-vsmac_xamarinmacapp_compileroutpu-txt\" rel=\"nofollow noreferrer\">gist.github.com/dawmster/&hellip;</a>"}, {"owner": {"reputation": 1133, "user_id": 1981508, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82beccb1f044b4faa0ffbc23c1975fcd?s=128&d=identicon&r=PG", "display_name": "tty6", "link": "https://stackoverflow.com/users/1981508/tty6"}, "edited": false, "score": 0, "creation_date": 1496219621, "post_id": 44157364, "comment_id": 75566132, "body": "are you shure you aren&#39;t using different implementation of standart cpp library?"}, {"owner": {"reputation": 103, "user_id": 2845744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0363d6c8f2b16b383b35105ae662ae?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/2845744/martin"}, "edited": false, "score": 0, "creation_date": 1559933455, "post_id": 44157364, "comment_id": 99588750, "body": "Did someone found a solution for this? I&#39;m currently trying the same."}, {"owner": {"reputation": 1150, "user_id": 1041929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079961cf3436c6ae2a1c98366cd719e5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1041929/nick"}, "edited": false, "score": 0, "creation_date": 1560157273, "post_id": 44157364, "comment_id": 99630728, "body": "I just dropped Xamarin and switched to XCode and objective-c/swift"}], "owner": {"reputation": 1150, "user_id": 1041929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079961cf3436c6ae2a1c98366cd719e5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1041929/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1495801483, "creation_date": 1495626013, "last_edit_date": 1495627514, "question_id": 44157364, "link": "https://stackoverflow.com/questions/44157364/using-c-c-library-in-visual-studio-mac-solution-xamarin-mac-app", "title": "Using C/C++ library in Visual Studio Mac solution (Xamarin.Mac app)?", "body": "<h1>Xamarin.Mac And C++</h1>\n\n<p>I am trying using C++ library (.a) in Visual Studio for Mac (a.k.a. Xamarin)\nI've found online some info on linking native libraries in Xamarin (<a href=\"https://developer.xamarin.com/guides/ios/advanced_topics/native_interop/\" rel=\"noreferrer\">https://developer.xamarin.com/guides/ios/advanced_topics/native_interop/</a>) but it seems outdated since Visual Studio for Mac is out.</p>\n\n<p>I uploaded both project to <a href=\"https://github.com/dawmster/XamarinAndCpp\" rel=\"noreferrer\">https://github.com/dawmster/XamarinAndCpp</a></p>\n\n<h3>Contents</h3>\n\n<ol>\n<li>MyCppLib - XCode project producing libMyCppLib.a</li>\n<li>XamarinMacApp - Visual Studio For Mac solution</li>\n<li>libMyCppLib.a - that is a product of MyCppLib, XamarinMacApp references it.</li>\n</ol>\n\n<h2>What is ok</h2>\n\n<p><em>MyCppLib</em> compiles fine and produces libMyCppLib.a\nI intended to export only two C functions (<code>my_C_Function, my_second_C_Function</code> - <a href=\"https://github.com/dawmster/XamarinAndCpp/blob/master/MyCppLib/MyCppLib/MyCppLib.cpp\" rel=\"noreferrer\">MyCppLib.cpp</a>) but I am unable to strip other sybols - which seems to be root of the problem</p>\n\n<pre><code>extern \"C\" {\n        int my_C_Function();\n        int my_second_C_Function();\n}\n</code></pre>\n\n<p>In XamarinMacApp libMyCppLib.a is referenced (added to solution).\nAnd my_C_Function is called in <a href=\"https://github.com/dawmster/XamarinAndCpp/blob/master/XamarinMacApp/XamarinMacApp/AppDelegate.cs\" rel=\"noreferrer\">AppDelegate.cs</a> as follows:</p>\n\n<pre><code>using System.Runtime.InteropServices;\n\nnamespace XamarinMacApp\n{\n\n    [Register(\"AppDelegate\")]\n    public class AppDelegate : NSApplicationDelegate {\n\n        public AppDelegate(){}\n\n        [DllImport(\"__Internal\")]\n        static extern int my_C_Function();\n        public override void DidFinishLaunching(NSNotification notification)\n        {\n            int myretval = my_C_Function();\n        }\n\n        public override void WillTerminate(NSNotification notification)\n        {\n            // Insert code here to tear down your application\n        }\n    }\n}\n</code></pre>\n\n<h2>What's not ok</h2>\n\n<h3>XamarinMacApp - does not compile with following error :</h3>\n\n<p>Notice that C functions ( <code>my_C_Function, my_second_C_Function</code> is not listed in error below).\nIt seems only C++ Standard Library cannot be linked.</p>\n\n<p><a href=\"https://gist.github.com/dawmster/c6e1fabf3df3ec953faeacfbdce80af3#file-vsmac_xamarinmacapp_compileroutpu-txt\" rel=\"noreferrer\">Full Visual Studio Mac compiler log.</a></p>\n\n<p><a href=\"https://gist.github.com/dawmster/f848c18228a4fd0c3ce9c51b6db3fe8c#file-compiler_output-txt\" rel=\"noreferrer\">Full Xcode compiler log</a> </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n      \"std::__1::locale::use_facet(std::__1::locale::id&amp;) const\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::ios_base::getloc() const\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::__init(unsigned long, char)\", referenced from:\n          l007 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;::~basic_string()\", referenced from:\n          l007 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::put(char)\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::flush()\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::sentry(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;)\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;::sentry::~sentry()\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::cout\", referenced from:\n          l002 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::ctype&lt;char&gt;::id\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::locale::~locale()\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::ios_base::__set_badbit_and_consider_rethrow()\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::__1::ios_base::clear(unsigned int)\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"std::terminate()\", referenced from:\n          l008 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"operator delete(void*)\", referenced from:\n          l001 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"operator new(unsigned long)\", referenced from:\n          l001 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"___cxa_begin_catch\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l008 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"___cxa_end_catch\", referenced from:\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n      \"___gxx_personality_v0\", referenced from:\n          l004 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l005 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          l007 in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n          Dwarf Exception Unwind Info (__eh_frame) in libMyCppLib.a(libMyCppLib.a-x86_64-master.o)\n    ld: symbol(s) not found for architecture x86_64\n    clang : error : linker command failed with exit code 1 (use -v to see invocation)\n\n    MMP : error MM5109: Native linking failed with error code 1.  Check build log for details.\nDone building target \"_CompileToNative\" in project \"XamarinMacApp.csproj\" -- FAILED.\n\nDone building project \"XamarinMacApp.csproj\" -- FAILED.\n</code></pre>\n\n<p>Any ideas how to move forward?</p>\n"}, {"tags": ["c++", "boost", "centos7", "yum"], "comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1495627469, "post_id": 44157279, "comment_id": 75331970, "body": "Try <code>sudo yum remove boost boost-devel boost-system boost-filesystem boost-thread</code> first, maybe there is some old installation."}], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 6695780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be5c18359cba4db19accd89ade1168e?s=128&d=identicon&r=PG", "display_name": "Sherzodbek", "link": "https://stackoverflow.com/users/6695780/sherzodbek"}, "is_accepted": true, "score": 11, "last_activity_date": 1591779283, "last_edit_date": 1591779283, "creation_date": 1528461988, "answer_id": 50761000, "question_id": 44157279, "link": "https://stackoverflow.com/questions/44157279/how-to-install-boost-library-on-centos-7-3-64bit/50761000#50761000", "title": "How to install boost library on CentOS 7.3 64bit?", "body": "<p>Usually on centos 7, I do </p>\n\n<pre><code>yum update\nyum install epel-release\n</code></pre>\n\n<p>and then </p>\n\n<pre><code>yum install boost boost-thread boost-devel\n</code></pre>\n\n<p>So far, it's worked for me.\nMaybe first two commands are what you need to do initially. You can ask if any problem occurs later.\nBe aware that Boost 1.53.0 ist the current version on YUM. If you need a version above that, you'll need to build from source. See <a href=\"https://www.boost.org/doc/libs/1_73_0/more/getting_started/unix-variants.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_73_0/more/getting_started/unix-variants.html</a> for details.</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23179, "favorite_count": 3, "accepted_answer_id": 50761000, "answer_count": 1, "score": 9, "last_activity_date": 1591779283, "creation_date": 1495625804, "question_id": 44157279, "link": "https://stackoverflow.com/questions/44157279/how-to-install-boost-library-on-centos-7-3-64bit", "title": "How to install boost library on CentOS 7.3 64bit?", "body": "<p>I need to build a C++ project which uses Boost library on CentOS. I tried this:</p>\n\n<pre><code>yum install boost-devel\n</code></pre>\n\n<p>But I get dependency errors and Boost is not installed:</p>\n\n<pre><code>--&gt; Processing Dependency: libicuuc.so.42()(64bit) for package: libboost_regex1_59_0-1.59.0-1.x86_64\n--&gt; Processing Dependency: libicui18n.so.42()(64bit) for package: libboost_regex1_59_0-1.59.0-1.x86_64\n--&gt; Processing Dependency: libicudata.so.42()(64bit) for package: libboost_regex1_59_0-1.59.0-1.x86_64\n--&gt; Finished Dependency Resolution\nError: Package: libboost_log1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicuuc.so.42()(64bit)\nError: Package: libboost_locale1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicudata.so.42()(64bit)\nError: Package: libboost_regex1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicudata.so.42()(64bit)\nError: Package: libboost_locale1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicui18n.so.42()(64bit)\nError: Package: libboost_log1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicudata.so.42()(64bit)\nError: Package: libboost_graph1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicuuc.so.42()(64bit)\nError: Package: libboost_regex1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicuuc.so.42()(64bit)\nError: Package: libboost_graph1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicui18n.so.42()(64bit)\nError: Package: libboost_locale1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicuuc.so.42()(64bit)\nError: Package: libboost_regex1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicui18n.so.42()(64bit)\nError: Package: libboost_log1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicui18n.so.42()(64bit)\nError: Package: libboost_graph1_59_0-1.59.0-1.x86_64 (enetres)\n           Requires: libicudata.so.42()(64bit)\n</code></pre>\n\n<p>Am I supposed to install these dependencies manually? Or what is wrong exactly and what should I do?</p>\n"}, {"tags": ["c++", "clang", "default-arguments"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 6, "creation_date": 1495626072, "post_id": 44157251, "comment_id": 75330936, "body": "Well, it&#39;s only a warning, IMO this just means &quot;hey, that&#39;s useless and looks weird, are you sure that&#39;s what you meant?&quot;."}, {"owner": {"reputation": 1839, "user_id": 4463557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uMZ2v.png?s=128&g=1", "display_name": "Jo&#227;o Afonso", "link": "https://stackoverflow.com/users/4463557/jo%c3%a3o-afonso"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495626173, "post_id": 44157251, "comment_id": 75331017, "body": "@Quentin As this appears to be a perfectly valid code, there should no warning."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 6, "creation_date": 1495626258, "post_id": 44157251, "comment_id": 75331075, "body": "There are plenty valid snippets that trigger warnings -- invalid code triggers errors. <code>if(x = something());</code> is another one."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495626292, "post_id": 44157251, "comment_id": 75331101, "body": "@Jo&#227;oAfonso if this is valid but misleading (or dangerous) the compiler can generate a warning (cf misleading indentation gcc warning)"}, {"owner": {"reputation": 1839, "user_id": 4463557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uMZ2v.png?s=128&g=1", "display_name": "Jo&#227;o Afonso", "link": "https://stackoverflow.com/users/4463557/jo%c3%a3o-afonso"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495626858, "post_id": 44157251, "comment_id": 75331545, "body": "@Quentin But there is no warning from clang for this <code>int i =  {1};</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495627155, "post_id": 44157251, "comment_id": 75331763, "body": "Might be the same reasoning from <a href=\"https://stackoverflow.com/a/3462768/4342498\">this answer</a>"}, {"owner": {"reputation": 1839, "user_id": 4463557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uMZ2v.png?s=128&g=1", "display_name": "Jo&#227;o Afonso", "link": "https://stackoverflow.com/users/4463557/jo%c3%a3o-afonso"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495627421, "post_id": 44157251, "comment_id": 75331936, "body": "@NathanOliver Not anymore. GCC doesn&#39;t emit a warning for <code>int i = {1};</code> ."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496175956, "post_id": 44157251, "comment_id": 75550622, "body": "@Jo&#227;oAfonso Maybe they used to have that warning as well, and when they removed it for a normal variable initialization they forgot to do the same for default arguments."}, {"owner": {"reputation": 3808, "user_id": 1597714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mH9hv.png?s=128&g=1", "display_name": "AMA", "link": "https://stackoverflow.com/users/1597714/ama"}, "edited": false, "score": 0, "creation_date": 1497018154, "post_id": 44157251, "comment_id": 75916817, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3462513/gcc-warning-braces-around-scalar-initializer\">gcc warning: braces around scalar initializer</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1497493262, "post_id": 44157251, "comment_id": 76105133, "body": "@Jo&#227;o Afonso: &quot;As this appears to be a perfectly valid code, there should no warning&quot; - this is a rather strange thing to say. <i>Warnings</i> are diagnostic messages that are <i>typically</i> issued for <i>perfectly valid code</i> (well-formed code), which the compiler sees as &quot;valid but suspicious&quot;. <i>Invalid</i> (ill-formed) code normally triggers <i>errors</i>, not warnings. Not every compiler follows this distinction precisely, but nevertheless that&#39;s the idea."}], "answers": [{"tags": [], "owner": {"reputation": 12348, "user_id": 13500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dbd6e171ab0b4822895fee65d9a63571?s=128&d=identicon&r=PG", "display_name": "Colen", "link": "https://stackoverflow.com/users/13500/colen"}, "is_accepted": false, "score": 1, "last_activity_date": 1497496611, "last_edit_date": 1497496611, "creation_date": 1497492976, "answer_id": 44557459, "question_id": 44157251, "link": "https://stackoverflow.com/questions/44157251/why-does-clang-emit-these-warnings/44557459#44557459", "title": "Why does clang emit these warnings?", "body": "<p>Braces are typically used when initializing instances of structs, for example:</p>\n\n<pre><code>struct example {\n  int member1;\n  int member2;\n};\n\nexample x = { 1, 2 };\n</code></pre>\n\n<p>Clang is telling you that your use of braces isn't \"normal\" for initializing a single value. This warning could help if you weren't familiar with the syntax for initializing values in C++, or perhaps if the types had previously been structs before a refactoring of some sort.</p>\n\n<p>You can either stop using braces when initializing integers, or pass the <code>-Wno-braced-scalar-init</code> flag to the compiler to stop it reporting the warning.</p>\n"}], "owner": {"reputation": 1839, "user_id": 4463557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uMZ2v.png?s=128&g=1", "display_name": "Jo&#227;o Afonso", "link": "https://stackoverflow.com/users/4463557/jo%c3%a3o-afonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1497496611, "creation_date": 1495625748, "last_edit_date": 1495625862, "question_id": 44157251, "link": "https://stackoverflow.com/questions/44157251/why-does-clang-emit-these-warnings", "title": "Why does clang emit these warnings?", "body": "<p>The clang compiler emit warnings for the snippet below, as can be seen <a href=\"http://coliru.stacked-crooked.com/a/609c0732db0de9ba\" rel=\"noreferrer\">here</a>. </p>\n\n<pre><code>clang++ -std=c++14 -O0 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nmain.cpp:1:18: warning: braces around scalar initializer [-Wbraced-scalar-init]\nvoid point(int = {1}, int = {2}) {}\n                 ^~~\nmain.cpp:1:29: warning: braces around scalar initializer [-Wbraced-scalar-init]\nvoid point(int = {1}, int = {2}) {}\n                            ^~~\n\n2 warnings generated.\n</code></pre>\n\n<p>Why is this?</p>\n\n<pre><code>void point(int = {1}, int = {2}) {}\n\nint main(){\n    point();\n}\n</code></pre>\n\n<p>As far as I can tell, <code>{1}</code> and <code>{2}</code> are perfectly valid default arguments according to <a href=\"http://eel.is/c++draft/dcl.fct.default#1\" rel=\"noreferrer\">[dcl.fct.default]/1</a>, <a href=\"http://eel.is/c++draft/dcl.fct#3\" rel=\"noreferrer\">[dcl.fct]/3</a> and <a href=\"http://eel.is/c++draft/dcl.init#1\" rel=\"noreferrer\">[dcl.init]/1</a>.</p>\n"}, {"tags": ["c++", "multithreading", "boost"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495625780, "post_id": 44157225, "comment_id": 75330694, "body": "Without a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> it&#39;s going to be really hard to say anything."}, {"owner": {"reputation": 172, "user_id": 5651603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuZe4.png?s=128&g=1", "display_name": "LFLFM", "link": "https://stackoverflow.com/users/5651603/lflfm"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495627137, "post_id": 44157225, "comment_id": 75331753, "body": "the link that I sent &quot;simple thread example&quot; isn&#39;t enough? I&#39;ll paste the code here then... edit: pasted :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1495630170, "post_id": 44157225, "comment_id": 75334036, "body": "once the missing closing quote is added, works fine under clang. Which compiler are you using?"}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1495631752, "post_id": 44157225, "comment_id": 75335309, "body": "When running under VS, there is a stop button which interrupts execution. Did you use that and examine the call stack to see if there are any clues?"}, {"owner": {"reputation": 172, "user_id": 5651603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuZe4.png?s=128&g=1", "display_name": "LFLFM", "link": "https://stackoverflow.com/users/5651603/lflfm"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1495633523, "post_id": 44157225, "comment_id": 75336766, "body": "@RichardHodges VS2017 with all default settings. DarkFalcon: I had, but before I came in here telling you that I had and found nothing I went ahead and tried again and had another look: noticed that I&#39;m getting a message stating that thread 0x### exited with code 255 and if I just let it sit for a while I get another thread that exists with code 0 (all the while everything is still stuck). Found this other question: <a href=\"https://stackoverflow.com/questions/9605186/program-exe-native-has-exited-with-code-255-0xff\">link</a> so I&#39;ll try to recompile boost and get back to you. Probably only tomorrow. thx"}, {"owner": {"reputation": 172, "user_id": 5651603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuZe4.png?s=128&g=1", "display_name": "LFLFM", "link": "https://stackoverflow.com/users/5651603/lflfm"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1495793998, "post_id": 44157225, "comment_id": 75411026, "body": "@DarkFalcon Thanks! I only checked all the debug windows again while trying to give you a full answer and that&#39;s when I found the problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 5651603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuZe4.png?s=128&g=1", "display_name": "LFLFM", "link": "https://stackoverflow.com/users/5651603/lflfm"}, "is_accepted": true, "score": 0, "last_activity_date": 1495793898, "creation_date": 1495793898, "answer_id": 44199066, "question_id": 44157225, "link": "https://stackoverflow.com/questions/44157225/boostthread-hangs-before-program-even-starts/44199066#44199066", "title": "boost::thread hangs before program even starts?", "body": "<p>OK, got it to work; I just rebuilt boost and it all works fine now. Must have seem some static/dynamic mix up as mentioned in the question <a href=\"https://stackoverflow.com/questions/9605186/program-exe-native-has-exited-with-code-255-0xff\">program.exe: Native' has exited with code 255 (0xff)</a>.</p>\n\n<p>I rebuilt with the following parameters:</p>\n\n<pre><code>b2.exe toolset=msvc-14.1 address-model=32 --build-dir=build\\x64 install --prefix=\"C:\\boost\" -j4\n</code></pre>\n\n<p>(and then again for 64bit.</p>\n"}], "owner": {"reputation": 172, "user_id": 5651603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yuZe4.png?s=128&g=1", "display_name": "LFLFM", "link": "https://stackoverflow.com/users/5651603/lflfm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 44199066, "answer_count": 1, "score": 1, "last_activity_date": 1495793898, "creation_date": 1495625678, "last_edit_date": 1495631478, "question_id": 44157225, "link": "https://stackoverflow.com/questions/44157225/boostthread-hangs-before-program-even-starts", "title": "boost::thread hangs before program even starts?", "body": "<p>I've set up a new development machine; it's running windows 10 &amp; Visual Studio 2017 community. Installed and built boost (1.64.0, complete build), all good.</p>\n\n<p>I've been using some IPC and everything is good but then I started getting a strange behavior: my programs started to hang at the very start.</p>\n\n<p>I'm dealing with console apps by the way. The program just starts and the cursor blinks as if it was waiting for some user input or if the main thread was sleeping before any output happens. Even though the very first thing all my programs to is to print a header.</p>\n\n<p>After a lot of painful failures trying to identify the problem, I noticed that it only happens when I use any boost.thread functionality. So I thought maybe it's some problem while migrating projects from VS2015 to VS2017; created a brand new project and the same thing happens.</p>\n\n<p>Even when using the simplest of programs (ex. <a href=\"https://theboostcpplibraries.com/boost.thread-management#ex.thread_01\" rel=\"nofollow noreferrer\">simple thread example</a>)... all I get is a blinking cursor. No matter if I'm building with debug or release profiles and even if try to debug.</p>\n\n<p>VS never arrives at any break point (even when starting the program with the \"step into\" command!). The \"hanging\" seems to happen before my code's entry point.</p>\n\n<p>So I hope the question is clear: \"what the <em>bleep</em> is going on?\"</p>\n\n<p>As mentioned: other boost libraries are working fine, including boost::locale and boost::chrono</p>\n\n<p>--edit: compiles fine, no warnings. Runs \"seemingly\" fine, no errors and doesn't terminate, just hangs there as if the main thread was sleeping.</p>\n\n<p>--edit 2: full code example:</p>\n\n<pre><code>#include &lt;boost/thread.hpp&gt;\n#include &lt;boost/chrono.hpp&gt;\n#include &lt;iostream&gt;\n\nvoid wait(int seconds)\n{\n  boost::this_thread::sleep_for(boost::chrono::seconds{seconds});\n}\n\nvoid thread()\n{\n  for (int i = 0; i &lt; 5; ++i)\n  {\n    wait(1);\n    std::cout &lt;&lt; i &lt;&lt; '\\n';\n  }\n}\n\nint main()\n{\n  //this point is never reached!!?! Hangs before my own code even starts\n  std::cout &lt;&lt; \"start!\" &lt;&lt; std::endl;\n  boost::thread t{thread};\n  t.join();\n}\n</code></pre>\n"}]