[{"tags": ["c++", "string", "std", "stdstring", "wstring"], "comments": [{"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1500509929, "post_id": 45202950, "comment_id": 77373112, "body": "Why not use the first variant, but instead of <code>std::wstring::compare</code> use <code>std::equal</code> with your custom predicate?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500513935, "post_id": 45202950, "comment_id": 77373993, "body": "<code>return ((fName.length() &gt;= 4) &amp;&amp; (0 == fName.compare(fName.length() - 4, 4, L&quot;.txt&quot;)));</code>  What if the extension has more than 3 characters?   Your OS should already have functions that takes a file name and gives you the appropriate parts of the name (ex. the Windows <code>Pathxxx</code> functions).  No need to get tripped up with corner cases."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 1, "creation_date": 1500538285, "post_id": 45202950, "comment_id": 77383967, "body": "@user1034749 Do you mean <code>std::equal(fName.end() - ext.length(), fName.end(), ext.begin(), [](wchar_t ch1, wchar_t ch2) { return tolower(ch1) == ch2; })</code> ? This seems to be the solution indeed!"}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1500511634, "post_id": 45203127, "comment_id": 77373452, "body": "Both of these approaches lead to undefined behavior. Also, does this handle case insensitivity?"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 1, "creation_date": 1500536532, "post_id": 45203127, "comment_id": 77382763, "body": "<code>assumes that the sum of the ASCII values of other extensions won&#39;t match the sum of the ascii values of .txt</code>: I don&#39;t think this is a valid assumption: <code>.txt</code> has same ascii char sum than <code>.tys</code>..."}], "tags": [], "owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "is_accepted": false, "score": -2, "last_activity_date": 1500585957, "last_edit_date": 1500585957, "creation_date": 1500510060, "answer_id": 45203127, "question_id": 45202950, "link": "https://stackoverflow.com/questions/45202950/comparing-last-characters-case-insensitive-with-a-predicate/45203127#45203127", "title": "Comparing last characters, case insensitive (with a predicate?)", "body": "<p>If you want an implementation without assumptions (that also doesn't assume the length of the extension, but assumes that the file has a name at least 4 chars in size):</p>\n\n<pre><code>char * testing = &amp;fName[fName.length() - 4];\nunsigned int index = 1;\nunsigned int total = 0;\nwhile(index &lt; 4) {\n    total += testing[index] &lt;&lt; index;\n    ++index;\n}\nreturn total == ('t' &lt;&lt; 1) + ('x' &lt;&lt; 2) + ('t' &lt;&lt; 3) || total == ('T' &lt;&lt; 1) + ('X' &lt;&lt; 2) + ('T' &lt;&lt; 3);\n</code></pre>\n\n<p>This is quite optimal, but assumes that the sum of the ASCII values of other extensions won't match the sum of the ascii values of the .txt extension (I also assumed that the extension will have 3 chars, like you did above):</p>\n\n<pre><code>int index = fName.length();\nint total = fName[--index] + fName[--index] + fName[--index];\nreturn total == 't' + 'x' + 't' || 'T' + 'X' + 'T';\n</code></pre>\n\n<p>This is a messier version of what is above, but should be faster:</p>\n\n<pre><code>return *((int*)&amp;fName[index - 4]) == '.' + 't' + 'x' + 't';\n</code></pre>\n\n<p>You can optimize this even further if you know that none of the other extensions will end with a \"t\", have an \"x\" in the middle, etc. by doing something like this:</p>\n\n<pre><code>return fName[fName.length() - 1] == 't' || 'T;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": 0, "last_activity_date": 1500650491, "last_edit_date": 1500650491, "creation_date": 1500583285, "answer_id": 45224786, "question_id": 45202950, "link": "https://stackoverflow.com/questions/45202950/comparing-last-characters-case-insensitive-with-a-predicate/45224786#45224786", "title": "Comparing last characters, case insensitive (with a predicate?)", "body": "<p>How about this?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;typename CharT&gt;\nbool HasExtension(const std::basic_string&lt;CharT&gt;&amp; fileName, const std::basic_string&lt;CharT&gt;&amp; ext)\n{\n    auto b = fileName.begin() + fileName.length() - ext.length();\n    auto a = ext.begin();\n\n    while (b != fileName.end())\n    {\n        if (*a++ != tolower(*b++))\n        {\n             return false;\n        }\n    }\n    return true;\n}\n\n\nint  main()\n{\n    std::string ext{\".Txt\"}; // make sure this is a lower case std::string.\n    std::transform(ext.begin(), ext.end(), ext.begin(), tolower);  \n\n    std::string fn{\"test.txt\"};\n\n   return HasExtension(fn, ext) ? 0 : 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "is_accepted": false, "score": 0, "last_activity_date": 1500706847, "creation_date": 1500706847, "answer_id": 45251709, "question_id": 45202950, "link": "https://stackoverflow.com/questions/45202950/comparing-last-characters-case-insensitive-with-a-predicate/45251709#45251709", "title": "Comparing last characters, case insensitive (with a predicate?)", "body": "<p>A suggested solution would be </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nbool isTXT(const std::wstring&amp; str)\n{\n    std::wstring::size_type idx;\n    idx = str.rfind('.');\n    if( idx != std::wstring::npos ){\n        std::wstring ext = str.substr(idx+1);\n        if( ext == L\"txt\" || ext == L\"TXT\" ) // do all possible combinations.\n            return true;\n    }\n    return false;\n}\n\nint main()\n{\n    std::wstring fileName = L\"haihs.TXT\";\n    std::wcout &lt;&lt; isTXT(fileName) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>For the conditional statement <code>ext == L\"txt\" || ext == L\"TXT\"</code>, you can fill out the rest if you don't want to create a wstring to convert it to lower or upper case.</p>\n"}, {"tags": [], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "is_accepted": true, "score": -1, "last_activity_date": 1501018623, "creation_date": 1501018623, "answer_id": 45313919, "question_id": 45202950, "link": "https://stackoverflow.com/questions/45202950/comparing-last-characters-case-insensitive-with-a-predicate/45313919#45313919", "title": "Comparing last characters, case insensitive (with a predicate?)", "body": "<p>As suggested in @fghj's comment, this is a nice solution:</p>\n\n<pre><code>std::equal(fName.end() - ext.length(), fName.end(), ext.begin(),\n           [](wchar_t ch1, wchar_t ch2) { return tolower(ch1) == ch2; });\n</code></pre>\n"}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 45313919, "answer_count": 4, "score": 2, "last_activity_date": 1501018623, "creation_date": 1500508768, "last_edit_date": 1500509080, "question_id": 45202950, "link": "https://stackoverflow.com/questions/45202950/comparing-last-characters-case-insensitive-with-a-predicate", "title": "Comparing last characters, case insensitive (with a predicate?)", "body": "<p>I have a <code>std::wstring fName</code> filename for which I'd like to test <strong>if it has a .txt extension.</strong> This works:</p>\n\n<pre><code>return ((fName.length() &gt;= 4) &amp;&amp; (0 == fName.compare(fName.length() - 4, 4, L\".txt\")));\n</code></pre>\n\n<p>but it's case sensitive, which I don't want: I need <code>blah.tXt</code> and <code>hello.TXT</code> to be both accepted.</p>\n\n<hr>\n\n<p>This should work as a case-insensitive version:</p>\n\n<pre><code>std::wstring ext = L\".txt\";\nwstring::const_iterator it = std::search(fName.end() - 4, fName.end(), ext.begin(), ext.end(), \n                               [](wchar_t ch1, wchar_t ch2) { return tolower(ch1) == ch2; }); \n                    // no need tolower(ch2) because the pattern .txt is already lowercase\nreturn (it != str1.end());\n</code></pre>\n\n<p>but the <code>std::search</code> is probably far from optimal because it searches if it <em>contains</em> a pattern (anywhere in the origin string), and here I only need to <em>compare</em> character by character.</p>\n\n<hr>\n\n<p>As I need to test this for millions of filenames, <strong>how can I improve the performance to check if a filename has an extension (case-insensitive) <code>.txt</code> ?</strong></p>\n\n<p>I don't want the easy solution : </p>\n\n<ul>\n<li><p>let's lowercase the <code>fName</code> in a new variable (or even lowercase just the 4 last char of <code>fName</code>) </p></li>\n<li><p>then compare </p></li>\n</ul>\n\n<p>because this would require new variables, memory, etc. Can I compare <em>in place</em>, with a custom predicate <code>[](wchar_t ch1, wchar_t ch2) { return tolower(ch1) == ch2; })</code> ?</p>\n\n<hr>\n\n<p>Note: I'm not looking for Boost solutions, nor solutions like this one <a href=\"https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c\">Case insensitive string comparison in C++</a> or many similar questions which are not optimized for performance.</p>\n"}, {"tags": ["c++", "c++11", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1500509363, "post_id": 45202932, "comment_id": 77372992, "body": "<code>auto c = std::make_unique&lt;container&gt;(); ... ; return c.release();</code> Now <code>container</code> will be freed automatically in case of abnormal return."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1500509382, "post_id": 45202932, "comment_id": 77372997, "body": "&quot;Is there a better way to do this in C++?&quot;  Use a std::string, not an array of char."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1500509483, "post_id": 45202932, "comment_id": 77373017, "body": "@NeilButterworth In this setup, <code>container</code> is a C-style data structure to be passed to C API. The whole point of the exercise is to translate between C++ classes and C PODs on the boundary."}], "answers": [{"comments": [{"owner": {"reputation": 1930, "user_id": 1717115, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fa7e9cc32f551a10f549fdd9130ce5bc?s=128&d=identicon&r=PG", "display_name": "FSMaxB", "link": "https://stackoverflow.com/users/1717115/fsmaxb"}, "edited": false, "score": 0, "creation_date": 1500535543, "post_id": 45203065, "comment_id": 77382033, "body": "Thanks, this makes my code much cleaner and easier to reason about."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1500510238, "last_edit_date": 1592644375, "creation_date": 1500509549, "answer_id": 45203065, "question_id": 45202932, "link": "https://stackoverflow.com/questions/45202932/how-to-prevent-memory-leak-on-allocation-failure-with-consecutive-uses-of-new/45203065#45203065", "title": "How to prevent memory leak on allocation failure with consecutive uses of &#39;new&#39;", "body": "<blockquote>\n<p>I am responsible for the memory of the data structure</p>\n<p>How to prevent memory leak</p>\n</blockquote>\n<p>The solution is to make somebody else responsible :) That might sound snide, but I find it insightful.</p>\n<p>Put the memory management code inside a RAII container whose single responsibility is to release the memory when out of scope. Since C++11, that is RAII container can be implemented without overhead, and is already implemented for you in the standard library: <code>std::unique_ptr</code>.</p>\n<p>As long as the memory is held by that unique pointer, if the unique pointer goes out of scope due to exception or otherwise, the memory will be freed. The underlying bare pointer can be released from the unique pointer and returned once all code that may throw has executed successfully.</p>\n<hr />\n<blockquote>\n<p>This problem can also happen in C++ only applications</p>\n</blockquote>\n<p>The RAII container is even better in C++ where you keep the container for the entire lifetime of the object instead of releasing the memory into the wild.</p>\n<hr />\n<p>PS.</p>\n<pre><code>if (c-&gt;message != nullptr) {\n    delete[] c-&gt;message;\n}\n</code></pre>\n<p>The test is completely redundant and this can be simplified to just</p>\n<pre><code>delete[] c-&gt;message;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1500516947, "creation_date": 1500516947, "answer_id": 45203971, "question_id": 45202932, "link": "https://stackoverflow.com/questions/45202932/how-to-prevent-memory-leak-on-allocation-failure-with-consecutive-uses-of-new/45203971#45203971", "title": "How to prevent memory leak on allocation failure with consecutive uses of &#39;new&#39;", "body": "<p>Store all pointers in <code>unique_ptr</code>.  Create with <code>make_unique</code> if C++14 or better ideally (may need 17 for arrays with make unique).</p>\n\n<p>After allocating everything and checking, <code>.release</code> the unique pointers.</p>\n"}], "owner": {"reputation": 1930, "user_id": 1717115, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fa7e9cc32f551a10f549fdd9130ce5bc?s=128&d=identicon&r=PG", "display_name": "FSMaxB", "link": "https://stackoverflow.com/users/1717115/fsmaxb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 45203065, "answer_count": 2, "score": 0, "last_activity_date": 1500516947, "creation_date": 1500508626, "question_id": 45202932, "link": "https://stackoverflow.com/questions/45202932/how-to-prevent-memory-leak-on-allocation-failure-with-consecutive-uses-of-new", "title": "How to prevent memory leak on allocation failure with consecutive uses of &#39;new&#39;", "body": "<p>I'm implementing a C-API with C++ and at the interface I have to convert C++ like data structures to existing data structures of the C-API.</p>\n\n<p>I am responsible for the memory of the data structure, so I can use new and delete, but from my understanding the following C++11 code can have a memory leak (this is just a dumbed down example):</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;new&gt;\n\nstruct container {\n    char *message;\n};\n\n/* converts an std::string to a C data structure */\ncontainer *create_container(const std::string&amp; message) {\n    container *c = nullptr;\n    try {\n        container *c = new container;\n        c-&gt;message = new char[message.length() + 1];\n        message.copy(c-&gt;message, message.length());\n        c-&gt;message[message.length()] = '\\0';\n    } catch (std::bad_alloc exception) {\n        return nullptr;\n    }\n\n    return c;\n}\n\nvoid destroy_container(container *c) {\n    if (c != nullptr) {\n        if (c-&gt;message != nullptr) {\n            delete[] c-&gt;message;\n        }\n        delete c;\n    }\n}\n\nint main(void) {\n    container *c = create_container(\"message\");\n    destroy_container(c);\n\n    return 0;\n}\n</code></pre>\n\n<p>It would leak <code>c</code> if allocation of <code>c-&gt;message</code> fails.</p>\n\n<p>So my question: How should I ideally deal with this situation?</p>\n\n<p>What I came up with so far:</p>\n\n<pre><code>    /* ... */\n    } catch (std::bad_alloc exception) {\n        if (c != nullptr) {\n            delete c;\n        }\n        return nullptr;\n    }\n    /* ... */\n</code></pre>\n\n<p>Is there a better way to do this in C++?</p>\n\n<p>This problem can also happen in C++ only applications if memory is managed with <code>new</code> and <code>delete</code> and you happen to use <code>new</code> twice in the same <code>try</code> block that catches <code>std::bad_alloc</code>.</p>\n\n<p>Could this maybe be solved using smart pointers or some other way?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "c-strings"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508327, "post_id": 45202864, "comment_id": 77372728, "body": "first by showing the error message(s) u are getting"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500508363, "post_id": 45202864, "comment_id": 77372738, "body": "<code>endPtr =&amp; myString[count];</code> looks like UB to me."}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500508423, "post_id": 45202864, "comment_id": 77372749, "body": "-drescherjm, UB? -pm100, sorry. Edited post with error."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1500508426, "post_id": 45202864, "comment_id": 77372750, "body": "<b><i>&quot;LNK1168 cannot open Lab06.exe for writing</i></b> Means your last build is likely still running. Or your antivirus is blocking you."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508438, "post_id": 45202864, "comment_id": 77372755, "body": "does it actually compile. Did you try it under a debugger. Look at the value of count as you step thorugh"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1500508481, "post_id": 45202864, "comment_id": 77372768, "body": "@drescherjm - more likely the last run."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508564, "post_id": 45202864, "comment_id": 77372798, "body": "open task manager. look for all instances of lab06.exe and kill them"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500508606, "post_id": 45202864, "comment_id": 77372810, "body": "-drescherjm, completely closed Visual studio 2015 and reopened solution, still the same error, along with &#39;Access Denied&#39; on build errors"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500508635, "post_id": 45202864, "comment_id": 77372816, "body": "UB= Undefined Behavior. You may be stepping out of bounds for your char arrays. I am not exactly sure."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500508639, "post_id": 45202864, "comment_id": 77372817, "body": "@drescherjm why UB, its perfectly valid"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1500508743, "post_id": 45202864, "comment_id": 77372847, "body": "Have you tried compiling with <code>cl.exe</code> on the command line to avoid any caching VS might be doing?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500508757, "post_id": 45202864, "comment_id": 77372849, "body": "I was worried about the combination of that could possibly lead to accessing out of bounds of the array."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1500508765, "post_id": 45202864, "comment_id": 77372855, "body": "@drescherjm it would be UB if he passed in count as intended but in fact he passes in 0"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500508777, "post_id": 45202864, "comment_id": 77372860, "body": "couldn&#39;t find instance of visual studio running, shut down and restarted just in case, still the same error. Something about the code looks odd, but I can&#39;t for the life of me figure out how"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1500508800, "post_id": 45202864, "comment_id": 77372865, "body": "Reboot your PC."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508804, "post_id": 45202864, "comment_id": 77372866, "body": "didnt say anhting about VS running - i said look for lab06 running"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508864, "post_id": 45202864, "comment_id": 77372880, "body": "@pm100. I see now."}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500508911, "post_id": 45202864, "comment_id": 77372891, "body": "i did shut down and restart PC, same error"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500508980, "post_id": 45202864, "comment_id": 77372916, "body": "If you are still getting &quot;LNK1168 cannot open Lab06.exe for writing&quot; after rebooting disable your antivirus especially if you use avast."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500509204, "post_id": 45202864, "comment_id": 77372961, "body": "The <b><i>LNK1168 cannot open Lab06.exe for writing</i></b> error has nothing to do with the code. It means Visual Studio does not have permission to write the executable or the executable already exists and is running or your AV is blocking your executable. The first can be caused by running Visual Studio as an admin then trying to run as a normal user."}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500509508, "post_id": 45202864, "comment_id": 77373022, "body": "disabled AVG, program build worked, console came up, but code itself must be wrong somewhere as it does not do what it is supposed to. prints out the original array correctly and the count size, but then prints out &quot;Hllo world!&quot;, &quot;HHHllo world!&quot; and &quot;HHllo world!&quot; on three separate lines...Gives pop up saying  &quot;Run-Time Check Failure #2 - Stack around the variable &#39;myString&#39; was corrupted.&quot;"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500509603, "post_id": 45202864, "comment_id": 77373039, "body": "The code has several bugs. Use your debugger to step line by line through the code looking at the variables. @pm100 already mentioned that count is wrong (its actually 0) when you call <code>reverser(myString, count);</code> in main()."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500509826, "post_id": 45202864, "comment_id": 77373088, "body": "<b><i>.Gives pop up saying &quot;Run-Time Check Failure #2 - Stack around the variable &#39;myString&#39; was corrupted</i></b> This is likely an out of bounds access to a stack variable. Step up the callstack to your code when this happens to see the line of code that causes that."}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500510088, "post_id": 45202864, "comment_id": 77373138, "body": "@drescherjm How do I do that? I edited the code to call findSize() inside reverser() to try and remedy count issue, no luck"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500510372, "post_id": 45202864, "comment_id": 77373192, "body": "You are passing count by value in <code>findSize()</code>. <code>findSize()</code> returns the count but your code throws it away. If you are going to return the count no need to pass count. If you don&#39;t want to return count change the parameter to pass by reference instead of by value. This is not the only error. You will have to use your debugger. Single step through the code looking at the variables. F11 will single step."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500511769, "post_id": 45203260, "comment_id": 77373482, "body": "code won&#39;t run. char temp messes up Line 43: Error expression must have a constant value\t Line 43: Error\tC2131\texpression did not evaluate to a constant\t Line 47: Error\tC3863\tarray type &#39;char [count]&#39; is not assignable"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500512864, "post_id": 45203260, "comment_id": 77373716, "body": "created completely new program, ported over the code, same errors.  The errors occur at the line with char temp[count + 1]; and again at temp[x] = *endPtr;"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500513095, "post_id": 45203260, "comment_id": 77373770, "body": "@jonthie instead of char temp[count +1] try putting char temp[13"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500513361, "post_id": 45203260, "comment_id": 77373834, "body": "that works! but I can&#39;t use that as that would be a &#39;magic number&#39; and therefore against the style guide I must follow"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500513441, "post_id": 45203260, "comment_id": 77373863, "body": "<code>char temp[count];</code> isn&#39;t legal c++. That will not compile in Visual Studio."}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1500513522, "post_id": 45203260, "comment_id": 77373886, "body": "variable length arrays"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500513555, "post_id": 45203260, "comment_id": 77373893, "body": "I would need to define another int as &#39;count+1&#39; and then cast that into a constant probably"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1500513565, "post_id": 45203260, "comment_id": 77373895, "body": "make int count const in the parameter of reverser function"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1500513592, "post_id": 45203260, "comment_id": 77373904, "body": "VLA is a non standard extension supported by gcc not by msvc"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500513713, "post_id": 45203260, "comment_id": 77373937, "body": "also count is wrong, you should pass in count - 1. If the string has 3 chars the last one is [2] not [3]"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500513941, "post_id": 45203260, "comment_id": 77373997, "body": "@pm100 in this case count is returning 12 not 13 since strlen(myString) is equal to 12 strlen does not count null char"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 1, "creation_date": 1500514571, "post_id": 45203260, "comment_id": 77374142, "body": "no. Defining another int as count+1 and then defining a const int as the first int does not work. putting const outside function also doesn&#39;t work as it is a &#39;non-numerical function&#39;"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500514725, "post_id": 45203260, "comment_id": 77374191, "body": "i am aware that strlen doesnt count the null. I am also aware the c indexes start at 0, not 1. So a string of length one has a first char index of [0]"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1500514863, "post_id": 45203260, "comment_id": 77374218, "body": "well the only solution I have for this is a dynamic array"}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500515350, "post_id": 45203260, "comment_id": 77374346, "body": "wouldn&#39;t it work better if a loop was used instead inside the reverser() function instead of calling findSize()? supposed to have a pointer at start and another at end that swap, then move to second and second to last and swap etc."}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500515835, "post_id": 45203260, "comment_id": 77374458, "body": "@jonthie Yes that is what pm100 did and He was right about the count part I am sorry."}, {"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500516715, "post_id": 45203260, "comment_id": 77374632, "body": "it works, but I hit a snag. the following must be true: &quot;You must reverse the characters in-line, that is, you cannot use another array while you do this work. The function must be written so that it uses pointers only. No square brackets may be used inside of the function. &quot;...I REALLY hate this program"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500516989, "post_id": 45203260, "comment_id": 77374682, "body": "@jonthie okay I edited pm100&#39;s code it should work now I hope he accepts the edit"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500517307, "post_id": 45203260, "comment_id": 77374752, "body": "@jonthie since he&#39;s not accepting the edit <a href=\"http://cpp.sh/9jvws\" rel=\"nofollow noreferrer\">here</a> go down to the reverser function"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500572169, "post_id": 45203260, "comment_id": 77409423, "body": "@jonthie you still would benefit deeply if you learn to effectively use your debugger. Even after 25+ years of c++ development (over 1 million lines of code) I still use the debugger nearly every day."}], "tags": [], "owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "is_accepted": false, "score": 0, "last_activity_date": 1500515731, "last_edit_date": 1500515731, "creation_date": 1500511075, "answer_id": 45203260, "question_id": 45202864, "link": "https://stackoverflow.com/questions/45202864/reversing-an-array-of-characters-in-c-using-pointers/45203260#45203260", "title": "Reversing an array of characters in C++ using pointers", "body": "<pre><code>count = findSize(myString, count);\n</code></pre>\n\n<p>since findSize returns count you need count to equal the value it returns.</p>\n\n<pre><code>void reverser(char myString[])\n{\nint count = findSize(myString);\nchar *endPtr;\nendPtr =&amp; myString[count-1];\nchar *temp = new char[count];\n\nfor (int x = 0; x &lt; count; x++)\n{\n     temp[x] = *endPtr;//this assgins the last letter of myString to the first element of temp \n     endPtr--;//decrement so endPtr points to myString[count - 1];\n}\n//now transfer\nfor(int x = 0; x &lt; count; x++){\n    myString[x] = temp[x];\n}\ndelete [] temp;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "edited": false, "score": 0, "creation_date": 1500514937, "post_id": 45203680, "comment_id": 77374243, "body": "Tried the code, &#39;!H!!!!!orld!&#39; instead of reversed array...not quite sure how that happened"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500516344, "post_id": 45203680, "comment_id": 77374567, "body": "You need to decrement endPtr each loop. --endPtr; after <code>*endPtr = swap;</code>"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1500566354, "last_edit_date": 1500566354, "creation_date": 1500514477, "answer_id": 45203680, "question_id": 45202864, "link": "https://stackoverflow.com/questions/45202864/reversing-an-array-of-characters-in-c-using-pointers/45203680#45203680", "title": "Reversing an array of characters in C++ using pointers", "body": "<p>OK lets start at the top</p>\n\n<p>findsize returns the size, but you are ignoring it. You try to pass in count as an argument and hope to update count in findsize. This isnt how C works. So first do</p>\n\n<pre><code>int findSize(char myString[])\n{\n\n    int count = strlen(myString);\n    cout &lt;&lt; \"The size of the Array is: \" &lt;&lt; count &lt;&lt; endl;\n    return count;\n}\n</code></pre>\n\n<p>now when you call findsize you must remember the result.</p>\n\n<pre><code>int count = findsize(myString);\n</code></pre>\n\n<p>This return a count of the length. Say the string is 'abc', count will be 3.</p>\n\n<p>The string has 3 chars myString[0], mystring[1] and ystring[2]. Note that there is no [3] character.. </p>\n\n<p>Reversing in place is tricky. </p>\n\n<pre><code>void reverser(char myString[])\n{\n    int count = findSize(myString);\n    char *strPtr = myString\n    char *endPtr = &amp;myString[count - 1];\n    strPtr = myString;\n\n    for (int x = 0; x &lt;= count / 2; x++)\n    {\n       char swap = *strPtr;\n       strPtr[x] = *endPtr;\n       *endPtr = swap;\n       endPtr--;\n    }\n}\n</code></pre>\n\n<p>Disclaimer - I have not tested this code.</p>\n"}], "owner": {"reputation": 45, "user_id": 8246117, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/01b8fcffaec2daac849d510b16924b5e?s=128&d=identicon&r=PG&f=1", "display_name": "jon thie", "link": "https://stackoverflow.com/users/8246117/jon-thie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 858, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500566354, "creation_date": 1500508168, "last_edit_date": 1500510019, "question_id": 45202864, "link": "https://stackoverflow.com/questions/45202864/reversing-an-array-of-characters-in-c-using-pointers", "title": "Reversing an array of characters in C++ using pointers", "body": "<p>So the program is supposed to use a loop to count the total size of the array of characters that contains \"Hello World!\", return that count as an int, and then call a function that uses pointers to start at the beginning and end of the array to swap the characters until the null point \" \" in between the words. I have largely figured out the code, but it won't compile correctly and won't display or won't complete the swap, I keep getting the following error:\n\"LNK1168    cannot open Lab06.exe for writing\"<br>\nHow can I fix this?</p>\n\n<pre><code>#include \"targetver.h\"\n#include &lt;iomanip&gt;\n#include &lt;array&gt;\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    //int to hold size of array\n    int count = 0;\n    // declare a c-string to reverse\n    char myString[] = \"Hello world!\";\n    //print array as is\n    cout &lt;&lt; myString &lt;&lt; endl;\n    //find size of the array\n\n\n    // call the reverser function\n    reverser(myString, count);\n\n    // output the result\n    cout &lt;&lt; myString &lt;&lt; endl;\n\n    system(\"PAUSE\");\n    return 0;\n}\n\nint findSize(char myString[], int count)\n{\n\n    count = (unsigned)strlen(myString);\n    cout &lt;&lt; \"The size of the Array is: \" &lt;&lt; count &lt;&lt; endl;\n    return count;\n\n}\n\n\nvoid reverser(char myString[], int count)\n{\n    findSize(myString, count);\n    char *strPtr;\n    char *endPtr;\n    endPtr =&amp; myString[count];\n    strPtr = myString;\n\n    for (int x = 0; x &lt;= count; x++)\n    {\n        strPtr++;\n        *strPtr = myString[x];\n        endPtr--;\n        *endPtr = myString[count--];\n        *strPtr = *endPtr;\n        cout &lt;&lt; strPtr &lt;&lt; endl;\n        cout &lt;&lt; endPtr &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500507539, "post_id": 45202711, "comment_id": 77372496, "body": "you can do bool <code>intersects(AABB *aabb);</code> ie pass in pointers not the full class. Now you can forward declare AABB just saying <code>class AABB;</code> <a href=\"https://stackoverflow.com/questions/4757565/what-are-forward-declarations-in-c\" title=\"what are forward declarations in c\">stackoverflow.com/questions/4757565/&hellip;</a>"}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1500507920, "post_id": 45202711, "comment_id": 77372601, "body": "My gut reaction is that the knowledge of the shape should be hidden inside the shape so that there isn&#39;t an N^2/2 explosion of shape specific methods.      Intersection is such a basic unit of game programming that it would not surprise me that there would be a pattern for it."}, {"owner": {"reputation": 23, "user_id": 3892575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea38afd8be443e74d59106083f579f64?s=128&d=identicon&r=PG&f=1", "display_name": "John181522", "link": "https://stackoverflow.com/users/3892575/john181522"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508607, "post_id": 45202711, "comment_id": 77372811, "body": "ah actually that works @pm100"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3892575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea38afd8be443e74d59106083f579f64?s=128&d=identicon&r=PG&f=1", "display_name": "John181522", "link": "https://stackoverflow.com/users/3892575/john181522"}, "edited": false, "score": 0, "creation_date": 1500508690, "post_id": 45202832, "comment_id": 77372830, "body": "thanks! this solution seems to work well, it avoids code duplication for the collision check"}], "tags": [], "owner": {"reputation": 760, "user_id": 8009379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c808a3b5c059f2b448f39970d384fd33?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8009379/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1500507924, "creation_date": 1500507924, "answer_id": 45202832, "question_id": 45202711, "link": "https://stackoverflow.com/questions/45202711/executing-specialized-code-between-two-derived-classes/45202832#45202832", "title": "Executing specialized code between two derived classes", "body": "<p>To avoid the <code>include</code> loop you can just forward-declare the <code>AABB</code> and <code>Triangle</code> classes in shape.h:</p>\n\n<pre><code>class AABB;\nclass Triangle;\n</code></pre>\n\n<p>To avoid duplicating code based on parameter order you can have a separate function with a canonical order for each overloading pair, and call it with the different orders from the member functions:</p>\n\n<pre><code>bool intersects( AABB *, Triangle * );\n\nAABB::intersects( Triangle *t ) { return intersects( this, t ); }\nTriangle::intersects( AABB *b ) { return intersects( b, this ); }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3892575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea38afd8be443e74d59106083f579f64?s=128&d=identicon&r=PG&f=1", "display_name": "John181522", "link": "https://stackoverflow.com/users/3892575/john181522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 45202832, "answer_count": 1, "score": 2, "last_activity_date": 1500507924, "creation_date": 1500507140, "question_id": 45202711, "link": "https://stackoverflow.com/questions/45202711/executing-specialized-code-between-two-derived-classes", "title": "Executing specialized code between two derived classes", "body": "<p>In an arbitrary physics engine for a game, there exists a \"Shape\" superclass and its derived subclasses such as \"AABB\" or \"Triangle\". Collision detection methods between each pair is unique, for example the AABB-Sphere test will obviously be different from the Triangle-AABB test. If I have two collections of shapes as such and I wish to check some collisions between them:</p>\n\n<pre><code>// somewhere in the program\nShape* shape_a;\nShape* shape_b;\n\n....\n\nif (shape_a-&gt;intersects(shape_b)) {\n    // do something\n}\n</code></pre>\n\n<p>How can specific collision checks (e.g. AABB-ABBB, or AABB-Sphere) be performed? For example, if shape_a points to a derived Triangle object, and shape_b performs to a derived AABB object, how can the intersects function correctly compare a Triangle and AABB object? My current implementation is as follows but it does not compile as an include loop is created (likely due to bad OOP practice).</p>\n\n<p>Shape.h</p>\n\n<pre><code>#include \"AABB.h\"\n#include \"triangle.h\"\n\nclass Shape {\npublic:\n    virtual bool intersects(Shape* shape) = 0;\n    virtual bool intersects(AABB aabb) = 0;\n    virtual bool intersects(Triangle tri) = 0;\n}\n</code></pre>\n\n<p>AABB.h</p>\n\n<pre><code>#include \"shape.h\"\n\nclass AABB : public Shape {\n    // overriden functions\n    bool intersects(Shape* shape);\n    bool intersects(AABB aabb); // aabb-aabb\n    bool intersects(Triangle tri); // aabb-tri\n}\n</code></pre>\n\n<p>triangle.h</p>\n\n<pre><code>#include \"shape.h\"\n\nclass Triangle : public Shape {\n    // overriden functions\n    bool intersects(Shape* shape);\n    bool intersects(AABB aabb); // tri-aabb\n    bool intersects(Triangle tri); // tri-tri\n}\n</code></pre>\n\n<p>The implementation for an intersects(Shape* shape) function looks like:</p>\n\n<pre><code>// in AABB.cpp\nbool intersects(Shape* shape) {\n     return shape.intersects(*this); // where *this is an AABB object\n}\n</code></pre>\n\n<p>And of course, I want to avoid code duplication: the tri-aabb test is the same as the aabb-tri test. Perhaps I am writing code that is fundamentally flawed and is bad OOP practice. In any case, I'd appreciate any help with this problem!</p>\n"}, {"tags": ["c++", "variadic-templates", "c++17", "variadic-functions"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500505562, "post_id": 45202433, "comment_id": 77371930, "body": "What are you trying to do?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500505618, "post_id": 45202433, "comment_id": 77371957, "body": "You might want to submit a bug report if the compiler is segfaulting."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500505683, "post_id": 45202433, "comment_id": 77371982, "body": "Do you expect every function passed in to <code>CallFunctions</code> to take no arguments and return a value?"}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500506760, "post_id": 45202433, "comment_id": 77372286, "body": "Agreed, I&#39;m going to update to the latest version to make sure it is not still affected by this bug. If it is, then I will file a report. Also I have edited the code in the post to better show intent, but @Yakk &#39;s answer was close enough to get me what I needed."}], "answers": [{"comments": [{"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500506699, "post_id": 45202495, "comment_id": 77372258, "body": "This was close enough to get what I needed, please edit the c++17 example to call the functions using the <code>funcs()...</code> syntax and I will accept. I edited the original post to more clearly explain my intent. The body of the <code>CallFunctions</code> function then becomes <code>return std::make_shared&lt;TReturn&gt;(funcs()...);</code>. I will accept this answer when it has been edited accordingly"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500507062, "post_id": 45202495, "comment_id": 77372376, "body": "@howard I did not think <code>funcs()...;</code> is valid C++17; did something change?  Ah, I see, question edited."}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500507529, "post_id": 45202495, "comment_id": 77372492, "body": "The best I can gather is that this syntax is covered by parameter pack expansion: <code>pattern ....</code> as outlined <a href=\"http://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1500508194, "post_id": 45202495, "comment_id": 77372683, "body": "Is <code>decltype(std::make_shared&lt;R&gt;(</code> stuff <code>))</code> ever not <code>std::shared_ptr&lt;R&gt;</code>, which is shorter and clearer?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1500508276, "post_id": 45202495, "comment_id": 77372706, "body": "Oh, I guess you want to be SFINAE-friendlier. Never mind."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1500508343, "post_id": 45202495, "comment_id": 77372732, "body": "@asch the original had overload resolution effects; I wanted to be at least as good."}, {"owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500508349, "post_id": 45202495, "comment_id": 77372733, "body": "@Yakk thanks for the updates. Just one question, are you <code>static_cast</code>ing to the r-value reference just to force move semantics?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500508470, "post_id": 45202495, "comment_id": 77372763, "body": "@howard because that is roughly what convertingmtom<code>std::function&lt;Args()&gt;</code> does to the return value of its argument which is then passed to <code>make_shared</code>; #3 is like #1 but more efficient, and different overload rules (it checks you can make then<code>R</code>, but hard errors if you pass bad lambdas).  I was going to give #3 another check for lambda compatibility, but as I would use #2 myself I decided not to invest more in it."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "edited": false, "score": 0, "creation_date": 1500508724, "post_id": 45202495, "comment_id": 77372841, "body": "@Howard I just convinced myself in C++17 that <code>static_cast&lt;Args&gt;</code> instead of <code>static_cast&lt;Args&amp;&amp;&gt;</code> is a better emulation of what <code>std::function</code> does and relatively cost-free due to prvalue elision."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1500508597, "last_edit_date": 1500508597, "creation_date": 1500505696, "answer_id": 45202495, "question_id": 45202433, "link": "https://stackoverflow.com/questions/45202433/variadic-functions-with-variadic-type-parameters/45202495#45202495", "title": "Variadic Functions With Variadic Type Parameters", "body": "<pre><code>template &lt;class R, class... Args&gt;\nstd::shared_ptr&lt;R&gt; CallFunctions(std::function&lt;Args()&gt;... funcs) {\n  return std::make_shared&lt;R&gt;( funcs()... );\n}\n</code></pre>\n\n<p>this is C++11.  It is inefficient.</p>\n\n<pre><code>template &lt;class R, class... Args&gt;\nauto CallFunctions(Args&amp;&amp;... funcs) \n-&gt; decltype(std::make_shared&lt;R&gt;( funcs()... ))\n{\n  return std::make_shared&lt;R&gt;( funcs()... );\n}\n</code></pre>\n\n<p>which removes the needless type erasure and need to explicly pass the return types.</p>\n\n<p>If you really really want to pass the return types:</p>\n\n<pre><code>template &lt;class R, class... Args, class...Fs&gt;\nauto CallFunctions(Fs&amp;&amp;... funcs) \n-&gt; decltype(std::make_shared&lt;R&gt;( static_cast&lt;Args&gt;(funcs())... ))\n{\n  return std::make_shared&lt;R&gt;( static_cast&lt;Args&gt;(funcs())... );\n}\n</code></pre>\n\n<p>but I advise doing the 2nd solution above.</p>\n"}, {"tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": 0, "last_activity_date": 1500507400, "last_edit_date": 1500507400, "creation_date": 1500506719, "answer_id": 45202642, "question_id": 45202433, "link": "https://stackoverflow.com/questions/45202433/variadic-functions-with-variadic-type-parameters/45202642#45202642", "title": "Variadic Functions With Variadic Type Parameters", "body": "<p>You can use C++17 <code>std::apply</code> to use <code>std::invoke</code> on each element of the parameter pack.  Then you do not need <code>std::function</code> anymore, because <code>std::invoke</code> can only call callable objects and also you don't have to give explicit template arguments anymore (which is an anti-pattern anyway).  As a bonus you can even retrieve the return values of the called functions.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt; typename... R, typename... Args &gt;\nauto CallFunctions(Args... funcs) {\n    // Do stuff here\n  return std::apply(\n    [] (auto&amp;&amp;... x) {\n      return std::make_tuple(std::make_shared&lt;R&gt;(std::invoke(x))...);\n    }, std::make_tuple(funcs...)\n    );\n}\n\nint main() {\n    auto r = CallFunctions&lt;int,double&gt;(\n        [] () { return 5; },\n        [] () { return 3.14; }\n    );\n\n    std::cout &lt;&lt; *std::get&lt;0&gt;(r) &lt;&lt; ' ' &lt;&lt; *std::get&lt;1&gt;(r) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/WGXrvOxVufCFR5Qh\" rel=\"nofollow noreferrer\">Live example</a></kbd></p>\n"}], "owner": {"reputation": 218, "user_id": 2946062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05de1b7d2101dbf786bf65557ee212ed?s=128&d=identicon&r=PG&f=1", "display_name": "Howard", "link": "https://stackoverflow.com/users/2946062/howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 45202495, "answer_count": 2, "score": 2, "last_activity_date": 1500508597, "creation_date": 1500505303, "last_edit_date": 1500506582, "question_id": 45202433, "link": "https://stackoverflow.com/questions/45202433/variadic-functions-with-variadic-type-parameters", "title": "Variadic Functions With Variadic Type Parameters", "body": "<p>I'm not sure if what I'm attempting is allowed by the standard, and may not even make sense to do, so by all means feel free to correct me.</p>\n\n<p>I'm trying to pass a variable number of <code>std::function</code> objects to a function which accepts variadic arguments, and also accepts variadic template parameters. The template parameters specify the return types of the functions that are passed in. The signature of the function looks like so:</p>\n\n<pre><code>template &lt;typename ... TRets&gt;\nvoid DoStuff(std::function&lt;TRets...()&gt; funcs...)\n</code></pre>\n\n<p>What I'm attempting to do is pass the return values from each of the <code>funcs</code> passed in to another function which accepts them in an expanded value form. E.g. <code>std::make_shared&lt;TType&gt;(funcs()...);</code></p>\n\n<p>I'm using g++ 7.1.1 with the <code>--std=c++17</code> flag which causes the compiler to seg fault. Obviously it shouldn't seg fault, but is there anything in the standard that says the above code is invalid? Or perhaps, is there a different syntax to accomplish this goal?</p>\n\n<p>For completeness, here is a minimal working (for some definition of working) example:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;memory&gt;\n\nclass MyClass {\n    public:\n        int m_a;\n        double m_b;\n        MyClass(int a, double b) : m_a(a), m_b(b) {};\n};\n\n\ntemplate &lt;typename TReturn, typename ... Args&gt;\nstd::shared_ptr&lt;TReturn&gt; CallFunctions(std::function&lt;Args...()&gt; funcs...) {\n    // Do stuff here\n    return std::make_shared&lt;TReturn&gt;(funcs()...);\n}\n\nint main(int argc, char * argv[]) {\n    auto x = CallFunctions&lt;MyClass, int, double&gt;(\n        [] () { return 5; },\n        [] () { return 3.14; }\n    );\n\n    return 0;\n}\n</code></pre>\n\n<p>Edited to show better intent of my original question</p>\n"}, {"tags": ["c++", "popen"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1500505207, "post_id": 45202379, "comment_id": 77371819, "body": "what is your question?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1500506403, "post_id": 45202379, "comment_id": 77372167, "body": "You might find <code>popen</code> is too simplistic an interface. You should look at using <code>fork</code>, <code>exec</code> and creating some pipes to communicate with the child process. <a href=\"https://stackoverflow.com/questions/280571/how-to-control-popen-stdin-stdout-stderr-redirection\">This</a> question has some answers with more detail."}], "answers": [{"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501711721, "post_id": 45308042, "comment_id": 77904604, "body": "popen read seems to work.  note the new understanding that the shell you use in a terminal might not be the same shell that popen submits its command to."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501771870, "post_id": 45308042, "comment_id": 77936477, "body": "FYI - My makefile generates the following compile command: g++-5 -m64  -O3 -ggdb -std=c++14 -Wall -Wextra -Wshadow -Wnon-virtual-dtor -pedantic -Wcast-align -Wcast-qual -Wconversion -Wpointer-arith -Wunused -Woverloaded-virtual   -O0   dumy514.cc  -o dumy514  -L../../bag -lbag_i686"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1600819472, "post_id": 45308042, "comment_id": 113206811, "body": "On Linux, it is trivial to change which shell your are using when in interactive mode.  It is probably fairly easy to change which shell is used for non-interactive mode.  Google is your friend."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 7, "last_activity_date": 1501711646, "last_edit_date": 1501711646, "creation_date": 1500997574, "answer_id": 45308042, "question_id": 45202379, "link": "https://stackoverflow.com/questions/45202379/how-does-popen-work-and-how-to-implement-it-into-c-code-on-linux/45308042#45308042", "title": "How does popen() work and how to implement it into c++ code on linux?", "body": "<blockquote>\n  <p>how to use popen() to grab stdout from child programs in Linux to a\n  main C++ program</p>\n</blockquote>\n\n<p>Are you familiar with the UNIX philosophy?  You might read the beginning of the Wikipedia article \"UNIX Philosophy\". Here is a snippet:</p>\n\n<blockquote>\n  <p>The UNIX philosophy is documented by Doug McIlroy[1] in the Bell\n  System Technical Journal from 1978:[2]</p>\n  \n  <p>1) Make each program do one thing well. To do a new job, build afresh\n  rather than complicate old programs by adding new \"features\".</p>\n  \n  <p>2) Expect the output of every program to become the input to another, as\n  yet unknown, program. Don't clutter output with extraneous\n  information. Avoid stringently columnar or binary input formats. Don't\n  insist on interactive input.</p>\n  \n  <p>... and more ... </p>\n</blockquote>\n\n<p>I prefer popen to access many of the Linux tools I find useful.  Examples include sort, unique, and sha256sum, and several others. But you may notice the many equivalents are moving into the C++ libraries (std::sort etc) and, with effort, I have found, for example, the code of sha256sum, suitable for compiling within my c++ app.</p>\n\n<hr>\n\n<p>1) When launched, popen is given a string, which can be in one part identifying an app to run, or in multiple parts, the first is an app, and additions strings are parameters to hand to that app just as if a command line input.  Just as in the shell (hint)</p>\n\n<p>2) When launched in 'r' mode, the stdout pipe of sha256sum is directed into the FILE* handle opened by your invocation of popen.  Thus the output is 'fed back' to your program.</p>\n\n<hr>\n\n<blockquote>\n  <p>But I can't understand how this stuff works.</p>\n</blockquote>\n\n<p>Not really a useful comment, and not a question. Your snippet of code looks straight forward to me (though substantially c code).  Perhaps you should pick a line of code and ask something specific about it?  </p>\n\n<hr>\n\n<p>But, before you work too hard on your code, let me perform some initial investigation where we will manually run the code we wish to use with popen, and capture results for review against your app's output.</p>\n\n<p>Investigation 1 - </p>\n\n<p>In your snippet, you are trying the command, \"which driftnet\".  An unfortunate choice when the program driftnet does not exist on your PATH.</p>\n\n<p>Results on my system:</p>\n\n<pre><code>$ which driftnet\n$\n</code></pre>\n\n<p>Because the command does not exist,, the command 'which' simply returns an empty result.</p>\n\n<p>Hard to tell if we did something wrong or not.  Without driftnet, I can't help you much either.</p>\n\n<hr>\n\n<p>Investigation 2 - a somewhat more interesting trial.</p>\n\n<p>sha256sum requires a file for input ... Here I provide my 'C++ Hello World' program, which you might capture to file \"HelloWorld.cc\" (or any where you want), or use any of your own files.</p>\n\n<pre><code>// If your C++ 'Hello World' has no class ... why bother?\n#include &lt;iostream&gt;\n\nclass Hello_t {\npublic:\n   Hello_t()  { std::cout &lt;&lt; \"\\n  Hello\"  &lt;&lt; std::flush; }\n   ~Hello_t() { std::cout &lt;&lt;    \"World!\" &lt;&lt; std::endl; }\n   void operator() () { std::cout &lt;&lt; \" C++ \"; }\n};\nint main(int, char**) { Hello_t()(); }\n</code></pre>\n\n<p>A total of 10 lines of code, starts with a comment, has 1 blank line after the single include.  I have my editor set to auto-magically remove trailing spaces.  If yours leaves a space in, your result may be different.</p>\n\n<p>So, what happens when you calculate the sha256sum of the file \"HelloWorld.cc\" from the command line?  No need to speculate ... just TRY IT!</p>\n\n<p>On the command line, invoke the command and see its response on the next line:</p>\n\n<pre><code>$ sha256sum HelloWorld.cc\nf91c6c288325fb4f72546482a9b4f1fa560f05071a12aa2a1268474ea3eeea3e  HelloWorld.cc\n</code></pre>\n\n<p>Perhaps you might try <em>your</em> popen code with sha256sum and a known file?</p>\n\n<p>Now you can see what the output (of your popen code) might contain. For this investigation, **the command sha256sum result is 1 long string with a space  in it. </p>\n\n<hr>\n\n<p>FYI - I broke my C++ popen code a few months back during an overhaul of my library.  When I get it fixed, I plan to revisit your effort to see how you are progressing.</p>\n\n<p>If your code starts working ... I encourage you to submit your own answer!</p>\n\n<p>If you can identify more more specific question, refine the question.</p>\n\n<p>I recommend you move to C++ code ... if you are going to learn something, and you want to learn C++, no use studying what you've found.</p>\n\n<hr>\n\n<p>My code is working again.  (update 2017/8/2)</p>\n\n<p>But, first let me share a couple of consequences of UNIX Philosophy, in no particular order:</p>\n\n<hr>\n\n<p>Consequence 1 - pipes and filters</p>\n\n<p>Filters are programs that do one thing well.  They accept an input stream, and produce an output stream, typically 'removing' something.</p>\n\n<p>In the field of code metrics, management can review line counts to get a sense of progress (line count growth slowing), and problems (not slowing).</p>\n\n<p>Every one has an opinion on code metrics ... not every line in a file should be counted.  For example, I think white space is important, but a line of white space should not be counted as code.  Similarly, a full line of comment is not code.  IMHO.</p>\n\n<p>In the following command</p>\n\n<pre><code> f1 &lt; pfn | f2 | f3 | f4\n</code></pre>\n\n<p>f1..fn are filters, all submitted as one command to the shell.  In my code metrics tool, I created</p>\n\n<pre><code>f1: ebl    erase blank lines \nf2: ecppc  erase cpp comments\nf3: ecc    erase c comments\nand several more.\n</code></pre>\n\n<p>Thus</p>\n\n<pre><code>ebl &lt; HelloWorld.cc | ecppc | ecc | ebl | wc \n</code></pre>\n\n<p>is a single string submittal to the shell that ultimately cout's 3 numbers.  </p>\n\n<p>The UNIX like command 'wc' probably exists on your system.  On Ubuntu 15.10:</p>\n\n<pre><code>$ wc &lt; HelloWorld.cc\n 10  52  309\n</code></pre>\n\n<p>Indicating HelloWorld.cc has 10 lines (without filtering).</p>\n\n<hr>\n\n<p>Consequence 2 - command lists</p>\n\n<p>A command list is a list of shell commands that each do one thing well. The list identifies a time sequence of execution.  A more general idea than pipe and filter.</p>\n\n<p>As an example, I have set up my editor (emacs) with an assigned key (F8) to provide the following compile command:</p>\n\n<pre><code>USER_FLAGS='-O0 ' ; export USER_FLAGS ; time make CC='g++-5 -m64 ' dumy514 ; ./dumy514\n</code></pre>\n\n<p>The specific file pfn's are perhaps entered once, but kept in a history buffer inside of emacs and thus no need to reenter them.</p>\n\n<p>Note the 3 semi-colons.  They delimit the multiple commands in one string submitted to the Linux command shell.  A 3 element command list: set an environment variable to override the default option; export the new flag to make it available to the compiler; and launch a make.</p>\n\n<hr>\n\n<p>So?  popen() accepts command lists.  A 'command list' like shell might accept.</p>\n\n<hr>\n\n<p>I finally read the \"man popen\" response with sufficient care.</p>\n\n<p>From the DESCRIPTION:  </p>\n\n<blockquote>\n  <p>The  popen() function opens a process by creating a pipe, forking, and\n  invoking the <strong>shell</strong>.</p>\n</blockquote>\n\n<p>Your command given to popen, runs in a shell.</p>\n\n<blockquote>\n  <p>But I can't understand how this stuff works.</p>\n</blockquote>\n\n<p>This 'stuff' should start to make sense, now. We are accessing the shell to process a command / command list / pipe filters.  This starts the 'other' process, and interacts with the first process using the PIPE.</p>\n\n<p>So how does the output of a command processed in the shell delivered to my code?  some clues to understanding follow.  Some unit test demo's are included, where you can easily change a popen cmd, and then compile and run the new cmd.</p>\n\n<hr>\n\n<p>The following provides code to use popen in one of two modes.  Yes they are in 3 class, a base and two derived. The hope is that this allows you to have more than one of these running at a time.  (Not terribly useful on my 2 core machine.) Feel free to refactor the code, keeping just what you need. The rest will be here for your continued guidance.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;   // sterror\n#include &lt;cstdio&gt;  // popen, FILE, fgets, fputs\n#include &lt;cassert&gt;\n\n\nclass POpen_t    // access to ::popen\n{\nprotected:\n   FILE*        m_FILE;\n   std::string  m_cmd;\n\npublic:\n   POpen_t(void) : m_FILE(nullptr)\n      { }\n\n   virtual ~POpen_t(void) {\n      if (m_FILE) (void)close();\n      m_FILE = 0;\n   }\n\n   // on success: 0 == return.size(), else returns error msg\n   std::string  close()\n      {\n         std::stringstream errSS;\n\n         do // poor man's try block\n         {\n            // pclose() returns the term status of the shell cmd\n            // otherwise -1 and sets errno.\n            assert(nullptr != m_FILE);  // tbr - some sort of logic error\n            // tbr if(0 == m_FILE)  break;  // success?\n\n            int32_t pcloseStat = ::pclose(m_FILE);\n            int myErrno = errno;\n            if (0 != pcloseStat)\n            {\n               errSS &lt;&lt; \"\\n  POpen_t::close() errno \" &lt;&lt; myErrno\n                     &lt;&lt; \"  \" &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               break;\n            }\n\n            m_FILE     = 0;\n\n         }while(0);\n\n         return(errSS.str());\n      } // std::string  close(void)\n\n}; // class POpen_t\n</code></pre>\n\n<p>I think it will be easier for copy/paste to split these into 3 sections.  But remember, I have all the code in one file.  Not a single header file, but it  works for me.  You can refactor into .h and .cc files, if you wish.</p>\n\n<pre><code>class POpenRead_t : public POpen_t    // access to ::popen read-mode\n{\n\npublic:\n   POpenRead_t(void) { }\n\n   // ::popen(aCmd): opens a process (fork), invokes shell, \n   //                and creates a pipe\n   // returns NULL if the fork or pipe calls fail,\n   //              or if it cannot allocate memory.\n   // on success: 0 == return.size(), else returns error msg\n   std::string  open (std::string aCmd)\n      {\n         std::stringstream errSS; // 0 == errSS.str().size() is success\n         assert (aCmd.size() &gt; 0);\n         assert (0 == m_FILE); // can only use serially\n         m_cmd = aCmd; // capture\n\n         do  // poor man's try block\n         {\n            if(true) // diagnosis only\n               std::cout &lt;&lt; \"\\n  POpenRead_t::open(cmd): cmd: '\"\n                         &lt;&lt; m_cmd &lt;&lt; \"'\\n\" &lt;&lt; std::endl;\n\n            // ::popen(aCmd): opens a process by creating a pipe, forking,\n            //                and invoking the shell.\n            // returns NULL if the fork or pipe calls fail,\n            //              or if it cannot allocate memory.\n            m_FILE = ::popen (m_cmd.c_str(), \"r\"); // create 'c-stream' (FILE*)\n            //       ^^ function is not in namespace std::\n\n            int myErrno = errno;\n            if(0 == m_FILE)\n            {\n               errSS &lt;&lt; \"\\n  POpenRead_t::open(\" &lt;&lt; m_cmd\n                     &lt;&lt; \") popen() errno \"   &lt;&lt; myErrno\n                     &lt;&lt; \"  \" &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               break;\n            }\n         } while(0);\n\n         return (errSS.str());\n      } // std::string  POpenRead_t::open(std::string aCmd)\n\n\n        // success when 0 == errStr.size()\n        // all outputs (of each command) captured into captureSS\n   std::string  spinCaptureAll(std::stringstream&amp; captureSS)\n      {\n         const int BUFF_SIZE = 2*1024;\n\n         std::stringstream errSS; // capture or error\n         do\n         {\n            if(0 == m_FILE)\n            {\n               errSS &lt;&lt; \"\\n  ERR: POpenRead_t::spinCaptureAll(captureSS) - m_FILE closed\";\n               break;\n            }\n            size_t discardedBlankLineCount = 0;\n            do\n            {\n               // allocate working buff in auto var, fill with nulls\n               char buff[BUFF_SIZE] = { 0 };\n               if(true) { for (int i=0; i&lt;BUFF_SIZE; ++i) assert(0 == buff[i]); }\n\n               // char * fgets ( char * str, int num, FILE * c-stream );\n               // Reads characters from c-stream and stores them as a C string\n               // into buff until\n               //    a) (num-1) characters have been read\n               //    b) a newline or\n               //    c) the end-of-file is reached\n               // whichever happens first.\n               // A newline character makes fgets stop reading, but it is considered\n               // a valid character by the function and included in the string copied\n               // to str\n               // A terminating null character is automatically appended after the\n               // characters copied to str.\n               // Notice that fgets is quite different from gets: not only fgets\n               // accepts a c-stream argument, but also allows to specify the maximum\n               // size of str and includes in the string any ending newline character.\n\n               // fgets() returns buff or null when feof()\n               char* stat = std::fgets(buff,      // char*\n                                       BUFF_SIZE, // count - 1024\n                                       m_FILE);   // c-stream\n               assert((stat == buff) || (stat == 0));\n               int myErrno = errno; // capture\n\n               if( feof(m_FILE) ) { // c-stream eof detected\n                  break;\n               }\n\n               // when stat is null (and ! feof(m_FILE) ),\n               //   even a blank line contains \"any ending newline char\"\n               // TBD:\n               // if (0 == stat) {\n               //   errSS &lt;&lt; \"0 == fgets(buff, BUFF_SIZE_1024, m_FILE) \" &lt;&lt; myErrno\n               //         &lt;&lt; \"  \" &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               //   break;\n               // }\n\n               if(ferror(m_FILE)) { // file problem\n                  errSS &lt;&lt; \"Err: fgets() with ferror: \" &lt;&lt; std::strerror(myErrno);\n                  break;\n               }\n\n               if(strlen(buff))  captureSS &lt;&lt; buff; // additional output\n               else              discardedBlankLineCount += 1;\n\n            }while(1);\n\n            if(discardedBlankLineCount)\n               captureSS &lt;&lt; \"\\n\" &lt;&lt; \"discarded blank lines: \" &lt;&lt; discardedBlankLineCount &lt;&lt; std::endl;\n\n         } while(0);\n\n         return (errSS.str());\n\n      } // std::string  POpenRead_t::spinCaptureAll(std::stringstream&amp;  ss)\n\n}; // class POpenRead_t\n</code></pre>\n\n<p>And now POpenWrite_t: </p>\n\n<pre><code>class POpenWrite_t : public POpen_t    // access to ::popen\n{\npublic:\n\n   POpenWrite_t(void) { }\n\n\n   // ::popen(aCmd): opens a process (fork), invokes the non-interactive shell,\n   //                and creates a pipe\n   // returns NULL if the fork or pipe calls fail,\n   //              or if it cannot allocate memory.\n   // on success: 0 == return.size(), else returns error msg\n   std::string  open (std::string  aCmd)\n      {\n         std::stringstream errSS;  // 0 == errSS.str().size() is success\n         assert (aCmd.size() &gt; 0);\n         assert (0 == m_FILE);\n         m_cmd = aCmd;  // capture\n\n         do // poor man's try block\n         {\n            if(true) // diagnosis only\n               std::cout &lt;&lt; \"\\n  POpenWrite_t::open(cmd): cmd: \\n  '\"\n                         &lt;&lt; \"'\" &lt;&lt; m_cmd &lt;&lt; std::endl;\n\n            m_FILE = ::popen (m_cmd.c_str(), \"w\"); // use m_FILE to write to sub-task std::in\n\n            int myErrno = errno;\n            if(0 == m_FILE)\n            {\n               errSS &lt;&lt; \"\\n  POpenWrite_t::open(\" &lt;&lt; m_cmd\n                     &lt;&lt; \") popen() errno \"        &lt;&lt; myErrno\n                     &lt;&lt; \"  \"  &lt;&lt; std::strerror(myErrno)  &lt;&lt; std::endl;\n               break;\n            }\n         } while(0);\n\n         return (errSS.str());\n      } // std::string  POpenWrite_t::open(std::string  aCmd)\n\n   // TBR - POpenWrite_t::write(const std::string&amp; s) \n   //           work in progress - see demo write mode\n}; // class POpenWrite_t\n</code></pre>\n\n<p>Next I have what I call T514_t, a class which defines my unit test or demo efforts.  Entry is in 'exec()'.  </p>\n\n<p>It turns out that the shell used in popen might be different than the shell you experience in a terminal.  During the start up of a session, part of shell decides if it is in an interactive (terminal) or non-interactive (no terminal) mode. On my system, the terminal / interactive shell is 'bash', and the popen / non-interactive shell is 'sh'.  Remember this when developing shell commands for popen. </p>\n\n<p>An interesting use of POpenRead_t is in the method \"std::string shellCheck(std::stringstream&amp; rsltSS)\".  </p>\n\n<pre><code>class T514_t\n{\n   const std::string line = \"\\n------------------------------------------------------\";\n   const char escape = 27;\n\npublic:\n\n   T514_t() = default;\n   ~T514_t() = default;\n\n   std::string exec (int argc, char* argv[],\n                     std::stringstream&amp; resultSS )\n      {\n         std::string errStr;\n\n         errStr = shellCheck(resultSS);  // when not bash, make a choice\n\n         if (0 == errStr.size()) // shell is expected\n         {\n            // bash reported, continue\n            switch (argc)\n            {\n\n            case 2 : { errStr = exec (argv, resultSS);       } break;\n\n            default: { errStr = \"  User error\"; usage(argv); } break;\n\n            } // switch (argc)\n         }\n         return (errStr); // when no err, errStr.size() is 0\n      } // int exec()\n\nprivate:\n\n   std::string exec(char* argv[], std::stringstream&amp; resultSS)\n      {\n         std::string       errStr;\n\n         std::cout &lt;&lt; clrscr() &lt;&lt; std::flush;\n\n         switch (std::atoi(argv[1]))\n         {\n\n         case 1:\n         {\n            std::cout &lt;&lt; clrscr() &lt;&lt; boldOff() &lt;&lt; line;\n\n            errStr = demoReadMode(resultSS);\n\n            std::cout &lt;&lt; boldOff() &lt;&lt; std::endl;\n         } break;\n\n         case 2:\n         {\n            std::cout &lt;&lt; clrscr() &lt;&lt; boldOn() &lt;&lt; line;\n\n            errStr = demoWriteMode();\n\n            std::cout &lt;&lt; boldOff() &lt;&lt; std::endl;\n         } break;\n\n\n         default: { usage(argv); } break;\n\n         } // switch (std::atoi(argv[1]))\n\n         return(errStr);\n      } // int exec(char* argv[], std::stringstream&amp; resultSS)\n\n\n   // Ubuntu has 5 (or more) shells available\n   // 1) Bourne shell (' sh'), 2) C shell (' csh'), 3) TC shell (' tcsh'),\n   // 4) Korn shell (' ksh'), 5) Bourne Again shell (' bash')\n   //\n   // bash is  my interactive  shell\n   // sh is my non-interactive shell\n   // which (mildly) influences the cmds of the demo's \n   //\n   // when not bash, what do you want to do?\n\n   std::string shellCheck(std::stringstream&amp; rsltSS)\n      {\n         std::stringstream errValSS;\n         std::string cmd;\n         cmd += \"ps -p \\\"$$\\\" \";\n         {\n            POpenRead_t  popenR;\n\n            errno = 0;\n            std::string rStat = popenR.open(cmd);\n            int myErrno = errno;\n\n            if(0 != rStat.size()) {\n               errValSS &lt;&lt; \"\\n  Err: \" &lt;&lt; cmd &lt;&lt; \" failed.  rStat: \"\n                        &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               return(errValSS.str());\n            }\n\n            do\n            {\n               errno = 0;\n               std::string errSS = popenR.spinCaptureAll (rsltSS);\n               myErrno = errno;\n\n               if (false) { // dianosis only\n                  std::cout &lt;&lt; \"\\n  demoReadMode() ss/myErrno/s:\\n\"\n                            &lt;&lt; rsltSS.str() &lt;&lt; \"  \"\n                            &lt;&lt; myErrno &lt;&lt; \"  '\"\n                            &lt;&lt; errSS &lt;&lt; \"'\" &lt;&lt; std::endl;\n               }\n               break;\n\n               if(0 != myErrno)\n               {\n                  errValSS &lt;&lt; \"\\n  Err: popenR.spinCaputureAll():  cmd / strerror(myErrno): \"\n                           &lt;&lt; cmd &lt;&lt; \" / \" &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n                  return(errValSS.str());\n               }\n\n               if (0 == rsltSS.str().size()) {  // TBR\n                  std::cout &lt;&lt; \"\\n  demoReadMode: ss.str().size() is 0, indicating completed\" &lt;&lt; std::endl;\n               } break;\n\n            }while(1);\n\n            // NOTE:  pclose() returns the termination status of the shell command\n            // otherwise -1 and sets errno.\n            // errno = 0;\n            (void)popenR.close(); // return value is term status of the shell command\n            if(errno != 0)\n            {\n               errValSS &lt;&lt; \"\\n  Err: POpen_t::close() - cmd: \" &lt;&lt; cmd\n                        &lt;&lt; \"   err:\" &lt;&lt; std::strerror(errno) &lt;&lt; std::endl;\n            }\n         }\n\n         std::string s = rsltSS.str();\n         std::string nishell (\" sh\");     // non-interactive shell expected is: \" sh\"\n         size_t indx = s.find(nishell);   // my interactive shell is bash\n\n         // clear\n         rsltSS.str(std::string()); rsltSS.clear(); // too much info\n\n         if (std::string::npos != indx)\n         {\n            // normally I would not include a 'success' message (not the 'UNIX pholosopy'),\n            // but here I have added to the (success) results:\n            if(true)  //&lt;-- feel free to comment out or delete this success action\n               rsltSS &lt;&lt; \"\\n  the reported non-interactive shell is the required '\"\n                      &lt;&lt; nishell &lt;&lt; \"' ... continuing.\\n\" &lt;&lt; std::endl;\n         }\n         else\n         {\n            // TBR - when non-interactive shell is unexpectedly different that nishell,\n            //    this demo code aborts ... (with no results) and the error msg:\n            errValSS &lt;&lt; \"\\n  the reported non-interactive shell is not \" &lt;&lt; nishell\n                     &lt;&lt; \" \\n\" &lt;&lt; s &lt;&lt; \"\\n  ... aborting\\n\";\n\n            // alternative actions are _always_ possible\n            // untested examples:\n            //   the shell can be temporarily changed as part of cmd  (untested)\n            //   the user could change the non-interactive shell\n            //   your use of popen (POpen_t classes above)\n            //        can change 'cmd's based on the discovered shell\n         }\n\n         return(errValSS.str());\n      } // std::string shellCheck(std::stringstream&amp; rsltSS)\n\n\n   std::string demoReadMode(std::stringstream&amp; rsltSS)\n      {\n         std::stringstream errValSS;\n\n         std::string cmd;\n         int i = 1;\n         cmd += \"./HelloWorld ; \";\n         cmd += \"echo  \" + std::to_string(i++)  + \" ; \";\n         cmd += \"./HelloWorld ; \";\n         cmd += \"sha256sum HelloWorld.cc ; \";\n         cmd += \"echo  \" + std::to_string(i++)  + \" ; \";\n         cmd += \"./HelloWorld ; \";\n         cmd += \"echo TEST WORKS ; \";\n         cmd += \"./HelloWorld\";\n\n         {\n            POpenRead_t  popenR;\n\n            errno = 0;\n            std::string rStat = popenR.open(cmd);\n            int myErrno = errno;\n\n            if(0 != rStat.size()) {\n               errValSS &lt;&lt; \"\\n  Err: \" &lt;&lt; cmd &lt;&lt; \" failed.  rStat: \"\n                        &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               return(errValSS.str());\n            }\n\n            do\n            {\n               errno = 0;\n               std::string errSS = popenR.spinCaptureAll (rsltSS);\n               myErrno = errno;\n\n               if (false) { // dianosis only\n                  std::cout &lt;&lt; \"\\n  demoReadMode() ss/myErrno/s:\\n\"\n                            &lt;&lt; rsltSS.str() &lt;&lt; \"  \"\n                            &lt;&lt; myErrno &lt;&lt; \"  '\"\n                            &lt;&lt; errSS &lt;&lt; \"'\" &lt;&lt; std::endl;\n               }\n               break;\n\n               if(0 != myErrno)\n               {\n                  errValSS &lt;&lt; \"\\n  Err: popenR.spinCaputureAll():  cmd / strerror(myErrno): \"\n                           &lt;&lt; cmd &lt;&lt; \" / \" &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n                  return(errValSS.str());\n               }\n\n               if (0 == rsltSS.str().size()) {  // TBR\n                  std::cout &lt;&lt; \"\\n  demoReadMode: ss.str().size() is 0, indicating completed\" &lt;&lt; std::endl;\n               } break;\n\n            }while(1);\n\n            // NOTE:  pclose() returns the termination status of the shell command\n            // otherwise -1 and sets errno.\n            // errno = 0;\n            (void)popenR.close(); // return value is term status of the shell command\n            if(errno != 0)\n            {\n               errValSS &lt;&lt; \"\\n  Err: POpen_t::close() - cmd: \" &lt;&lt; cmd\n                        &lt;&lt; \"   err:\" &lt;&lt; std::strerror(errno) &lt;&lt; std::endl;\n            }\n         }\n         return(errValSS.str());\n      } //    std::string demoReadMode(std::stringstream&amp; rsltSS)\n\n\n   std::string demoWriteMode()\n      {\n         std::stringstream errValSS;\n\n         std::string cmd;\n         int i = 1;\n         cmd += \"./HelloWorld ; \";\n         cmd += \"echo  \" + std::to_string(i++)  + \" ; \";\n         cmd += \"./HelloWorld ; \";\n         cmd += \"sha256sum HelloWorld.cc ; \";\n         cmd += \"echo  \" + std::to_string(i++)  + \" ; \";\n         cmd += \"./HelloWorld ; \";\n\n         {\n            POpenWrite_t  popenW;  // popen in write mode\n\n            // errno = 0;\n            std::string wStat = popenW.open(cmd);\n            int myErrno = errno;\n\n            if (0 != wStat.size()) {\n               errValSS &lt;&lt; \"\\n  Err: \" &lt;&lt; cmd &lt;&lt; \"\\n failed.  wStat: \"\n                        &lt;&lt; std::strerror(myErrno) &lt;&lt; std::endl;\n               return(errValSS.str());\n            }\n\n            // tbd - Work in Progress - what command to receive what data from here\n            //       login - needs root, tbr - can cmd contain sudo?  probably\n            //\n            //\n\n            // NOTE:  pclose() returns the termination status of the shell command\n            // otherwise -1 and sets errno.\n            // errno = 0;\n            (void)popenW.close(); // return value is term status of the shell command\n            if(errno != 0)\n            {\n               errValSS &lt;&lt; \"\\n  Err: POpen_t::close() - cmd: \" &lt;&lt; cmd\n                        &lt;&lt; \"   err:\" &lt;&lt; std::strerror(errno) &lt;&lt; std::endl;\n            }\n         }\n\n         return(errValSS.str());\n      } // std::string demoWriteMode()\n\n   void usage(char* argv[])\n      {\n         std::cout &lt;&lt; \"  executable: \"&lt;&lt; argv[0]\n                   &lt;&lt; \"\\n  USAGE - user must select test mode\"\n                   &lt;&lt; \"\\n  test\"\n                   &lt;&lt; \"\\n   1  - demoReadMode\"\n                   &lt;&lt; \"\\n   2  - demoWriteMode\"\n                   &lt;&lt; std::endl;\n      }\n\n\n   std::string boldOff(){std::string rV; rV.push_back(escape); rV += \"[21m\"; return(rV); } // bold off\n   std::string boldOn() {std::string rV; rV.push_back(escape); rV += \"[1m\";  return(rV); } // bold on\n\n   inline std::string clrscr(void) {\n      std::stringstream ss;\n      ss &lt;&lt; static_cast&lt;char&gt;(escape) &lt;&lt; \"[H\"   // home\n         &lt;&lt; static_cast&lt;char&gt;(escape) &lt;&lt; \"[2J\"; // clrbos\n      return(ss.str());\n   }\n\n}; // class T514_t\n</code></pre>\n\n<p>And finally, my main ... There are only a few things I care to do here.</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n   std::string errStr;\n   std::stringstream resultSS;\n   {\n      T514_t   t514;\n      errStr = t514.exec(argc, argv, resultSS);\n   }\n\n   // display result\n   if (resultSS.str().size())\n      std::cout &lt;&lt; \"\\n\\n  \"&lt;&lt; resultSS.str() &lt;&lt; std::endl;\n\n   if(errStr.size())\n      std::cerr &lt;&lt; errStr &lt;&lt; std::endl;\n\n   return(static_cast&lt;int&gt;(errStr.size()));\n}\n</code></pre>\n\n<p>So, build, and play with the std::string cmd; in the mode you are interested in.  Good luck.  </p>\n\n<p>Questions welcome.</p>\n"}], "owner": {"reputation": 51, "user_id": 8334574, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RRfROTvyxng/AAAAAAAAAAI/AAAAAAAAIEQ/7RzV5Wu79oo/photo.jpg?sz=128", "display_name": "Flareriderdash", "link": "https://stackoverflow.com/users/8334574/flareriderdash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23737, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1501711646, "creation_date": 1500505018, "question_id": 45202379, "link": "https://stackoverflow.com/questions/45202379/how-does-popen-work-and-how-to-implement-it-into-c-code-on-linux", "title": "How does popen() work and how to implement it into c++ code on linux?", "body": "<p>I am having trouble with finding out how to use <strong>popen()</strong> to grab stdout from child programs in Linux to a main C++ program. I was looking around and found this snippet of code that does what I want it to do. But I can't understand how this stuff works. I know the basics of c++ programming (I've been doing it for several months now) but i'm stumped so can someone help me with an explanation of this?</p>\n\n<p>Thank you in advance.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid my_popen( const string&amp; cmd ,vector&lt;string&gt;&amp; out ){\n    FILE*  fp;\n    const int sizebuf=1234;\n    char buff[sizebuf];\n    out = vector&lt;string&gt; ();\n    if ((fp = popen (cmd.c_str (), \"r\"))== NULL){\n\n}\n    string cur_string = \"\";\n    while (fgets(buff, sizeof (buff), fp)) {\n        cur_string += buff;\n}\n    out.push_back (cur_string.substr (0, cur_string.size() -1));\n    pclose(fp);\n}\n\n\n\n\nint main () {\n\n    vector&lt;string&gt; output;\n    my_popen(\"which driftnet\", output);\n    for (vector&lt;string&gt;::iterator itr = output.begin();\n        itr != output.end();\n        ++itr) {\n            cout &lt;&lt; *itr &lt;&lt; endl;\n        }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "wdk", "kernel-mode"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1500506493, "post_id": 45202359, "comment_id": 77372197, "body": "Welcome to Stack Overflow. Your post in its current form is unclear and not a good fit for Stack Overflow. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1500514097, "post_id": 45202359, "comment_id": 77374030, "body": "The canonical method is an IOCTL.  The user-mode call is the DeviceIoControl function.  You can either call this in a separate thread or use asynchronous I/O.  One of the ways the kernel mode driver might deal with such a request when it arrives would be to requeue it to a separate queue that is configured to use the manual dispatch method; that way, when you needed to send the message to user mode, you would just pull the pending request out of the queue with WdfIoQueueRetrieveNextRequest and then complete it as normal."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1500514236, "post_id": 45202359, "comment_id": 77374070, "body": "... the message from the driver should probably include an ID number of some kind, so that when the user-mode program sends an IOCTL to say &quot;true&quot; or &quot;false&quot; it can include the ID number so the driver knows which message the IOCTL is responding to."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1500515968, "post_id": 45202359, "comment_id": 77374484, "body": "ioctl or read call from the user is the correct way.  Call it and wait for the data.  You can&#39;t push from the kernel because you don&#39;t know where to push it to or whether the user process still exists."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 2, "last_activity_date": 1500534038, "creation_date": 1500534038, "answer_id": 45207498, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication/45207498#45207498", "title": "Kernel-Mode to User-Mode communication", "body": "<p>You probably need three IOCTLs.</p>\n\n<ol>\n<li>IOCTL_READ_FROM_KERNEL.  Initially sent after connection, and waits for the first kernel message</li>\n<li>IOCTL_RESPOND_AND_READ_FROM_KERNEL.   Sends a response, and waits for the next message.</li>\n<li>IOCTL_RESPOND.    Sends a response.</li>\n</ol>\n\n<p>The user mode code calls an IOCTL.  IOCTL_RESPOND returns immediately, and the thread probably exits.</p>\n\n<p>The other 2 IOCTLs will wait till kernel has something to send.  This will include some form of ID which can be used to identify the message.\nWhen kernel has a message, it can look for waiting UM threads to send to, or alternatively queue up the message for later delivery.</p>\n\n<p>When a UM connects, it pulls off the delivery queue, or gets added to the waiter queue.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 9115825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP6Dg.gif?s=128&g=1", "display_name": "PspSetProcessPpmPolicy", "link": "https://stackoverflow.com/users/9115825/pspsetprocessppmpolicy"}, "is_accepted": false, "score": 3, "last_activity_date": 1513647303, "creation_date": 1513647303, "answer_id": 47878853, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication/47878853#47878853", "title": "Kernel-Mode to User-Mode communication", "body": "<p>You have loads of options.</p>\n\n<ol>\n<li>Ports</li>\n<li>Named Pipes</li>\n<li>Pending IOCTLs</li>\n<li>Code injection</li>\n<li>Shared Events -> now read a configuration file from user-mode</li>\n</ol>\n\n<p>The first mentioned technique is officially supported for File-System Mini-Filter device drivers, and #3 and #5 are relatively straight-forward. Whereas, #2 and #4 are more complicated and less reliable/appropriate 9 times out of 10.</p>\n\n<p>However, you can implement Named Pipes from kernel-mode with some undocumented magic; the address for NtCreateNamedPipeFile can be extracted from the KeServiceDescriptorTable. NtCreateNamedPipeFile will rely on IoCreateFile - IoCreateFile is an exported kernel-mode routine which you can freely access. Everything else is simple to implement for a  named pipe server in kernel-mode, and if you're only after client implementation, it's even simpler because all you'll need to use is simple Native API routines such as ZwCreateFile, ZwWriteFile, ZwReadFile, etc.</p>\n\n<p>I recommend you look into Ports for communication, Microsoft have some samples of their own for it over on GitHub.</p>\n"}], "owner": {"reputation": 41, "user_id": 7753334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44974869878f2f9747c2eb55a2f12b78?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoflame33", "link": "https://stackoverflow.com/users/7753334/dinoflame33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1513647303, "creation_date": 1500504869, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication", "title": "Kernel-Mode to User-Mode communication", "body": "<p>I'm aware about communicating to kernel-mode from user-mode and I also know of events/inverted calls however I need to send a string value down to a user-mode process from a kernel-mode device driver and then wait in KM for a response (e.g. TRUE or FALSE BOOLEAN).</p>\n\n<p>Take the string \"c:\\file.txt\". Now I need the KM device driver to send this string down to user-mode and then have that UM program re-send back a TRUE or FALSE response for the driver to process. </p>\n\n<p>I've been through a lot of website topics/posts, documentation samples and cannot find what I am looking for.</p>\n\n<p>I was thinking that maybe I could setup a thread in the user-mode program which just continuously waits for data to come down and then in KM I somehow pause until a response is returned back... not sure</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "variable-assignment", "subscript", "nullptr"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1500504751, "post_id": 45202275, "comment_id": 77371683, "body": "Note  that if you allocate something with <code>new[]</code> you must free it with <code>delete[]</code>. And your code would be a lot clearer  and simpler if you used std::strings instead of C-style strings."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500504931, "post_id": 45202275, "comment_id": 77371733, "body": "<code>if (key) delete key;</code> -- Wrong form of <code>delete</code>.  It should be <code>delete [ ]</code>.  Avoid this and just use <code>std::string</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500505101, "post_id": 45202275, "comment_id": 77371789, "body": "<i>This const overload is never invoked.</i> -- Pass <code>lookup</code> as a const reference to a function and try to invoke <code>lookup::operator[ ]</code> inside that function.  The compile has no choice but to call the <code>const</code> version."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500505472, "post_id": 45202275, "comment_id": 77371903, "body": "Also note that <code>std::map::operator[ ]</code> inserts a value if it doesn&#39;t exist.  That&#39;s why you don&#39;t call it if you don&#39;t want that behavior, and functions such as <code>map::insert()</code> exist.  Why not design your class in a similar fashion?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500505551, "post_id": 45202275, "comment_id": 77371925, "body": "@PaulMcKenzie I don&#39;t see how <code>std::map</code> is relevant here. It is not used."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1500505611, "post_id": 45202275, "comment_id": 77371951, "body": "@user2079303 -- My point is that the OP&#39;s design could mimic  what <code>std::map</code> does.  There is no need for extraneous <code>operator [] </code> behavior -- just create an <code>insert()</code> function that actually checks for duplicates."}, {"owner": {"reputation": 1, "user_id": 8334315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34142ecaa2599c05cdf02e0fd4895795?s=128&d=identicon&r=PG&f=1", "display_name": "clns", "link": "https://stackoverflow.com/users/8334315/clns"}, "edited": false, "score": 0, "creation_date": 1500505702, "post_id": 45202275, "comment_id": 77371987, "body": "Thanks all. That pass as const trick fixed it Paul. I will look into the maps once I get more familiar with them."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500506319, "post_id": 45202275, "comment_id": 77372156, "body": "@PaulMcKenzie ah, now I see what you mean. Although I think it&#39;s the <code>map::find</code> that&#39;s what clns is missing."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1500506327, "creation_date": 1500506327, "answer_id": 45202593, "question_id": 45202275, "link": "https://stackoverflow.com/questions/45202275/c-overloading-subscript-dereference-where-nullptr-is-allowed/45202593#45202593", "title": "c++ overloading subscript dereference where nullptr is allowed", "body": "<p>You want <code>tree[\"key\"]</code> to behave differently in <code>const char *x = tree[\"key\"];</code> than in <code>tree[\"key\"] = \"x\";</code>. That is just not possible. The position of the sub expression in the statement has no effect on how that sub expression behaves.</p>\n\n<p>You might achieve behaviour similar to what you're looking for if you can change the return type of the subscript operator. If you never add the missing value to the tree, and return some object whose behaviour is to add the element (if missing) on assignment, then you can use have the above two statements to behave as you like.</p>\n\n<p>That said, the above may be tricky to implement and there may be caveats. Perhaps you don't need to be able to use <code>operator[]</code> to look up an object without inserting on miss. Instead of trying to use an overload, it would be simpler to use a separate function to do it, like <code>std::map</code> which Paul suggested.</p>\n"}], "owner": {"reputation": 1, "user_id": 8334315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34142ecaa2599c05cdf02e0fd4895795?s=128&d=identicon&r=PG&f=1", "display_name": "clns", "link": "https://stackoverflow.com/users/8334315/clns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500506327, "creation_date": 1500504462, "question_id": 45202275, "link": "https://stackoverflow.com/questions/45202275/c-overloading-subscript-dereference-where-nullptr-is-allowed", "title": "c++ overloading subscript dereference where nullptr is allowed", "body": "<p>Hi I'm a student developing various abstract data types for learning purposes. I am trying to overload the subscript operator to look up the keys in these ADT's. I cannot avoid the case where my code inserts missing keys.</p>\n\n<p>It is intended that when reading from these ADT's a return value of nullptr will indicate that the key was not found. I want my ADT's to add new keys only when writing or inserting. My code is incorrect in how it handles the following:</p>\n\n<pre><code>const char *x = tree[\"key\"];\n</code></pre>\n\n<p>Here if \"key\" is not found I wish to avoid adding this key and return nullptr to indicate its absence. The key should only be added in the following situation:</p>\n\n<pre><code>tree[\"key\"] = \"x\";\n</code></pre>\n\n<p>This is a very subtle bug. The following test returns true, but only because the value being tested is hash[\"key\"].val (which happens to be null).</p>\n\n<pre><code>if (!x) printf(\"%s not found!\\n\", \"key\");\n</code></pre>\n\n<p>I believe this can be achieved through the use of const and have used the following signature.</p>\n\n<pre><code>char const *operator[](char *index) const;\n</code></pre>\n\n<p>This const overload is never invoked. Can somebody explain why this is the case and either an example signature which will behave properly (or an example which will force this overload to be evaluated). Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nclass lookup {\n    lookup *left;\n    lookup *right;\n    char *key;\n    char *val;\n\npublic:\n    lookup(char *k) {\n        left = nullptr;\n        right = nullptr;\n        val = nullptr;\n        key = new char[strlen(k)+1];\n        strcpy(key, k);\n    }\n\n    ~lookup() {\n        if (key) delete key;\n        if (val) delete val;\n    }\n\n    /* read/write access */\n    /* if the key does not exist, then create it */\n    char *&amp;operator[](char *index) {\n        printf(\" []= x\\n\");\n\n        int x = strcmp(index, key);\n        if (x &lt; 0) {\n            if (left == nullptr) left = new lookup(index);\n            return (*left)[index];\n        }\n        if (x &gt; 0) {\n            if (right == nullptr) right = new lookup(index);\n            return (*right)[index];\n        }\n        return val;\n    }\n\n    /* read only access */\n    /* if the key does not exist, then return nullptr (not found) */\n    char const *operator[](char *index) const {\n        printf(\" x = *[]\\n\");\n\n        int x = strcmp(index, key);\n        if (x &lt; 0) {\n            if (left == nullptr) return nullptr;\n            else return (*left)[index];\n        }\n        if (x &gt; 0) {\n            if (right == nullptr) return nullptr;\n            else return (*right)[index];\n        }\n        return val;\n    }\n};\n\nint main(void) {\n    lookup tree(\"root\");\n\n    /* this creates the key (which is not intended) */\n    const char *x = tree[\"key\"];\n    if (!x) printf(\"%s not found!\\n\", \"key\");\n\n    /* only now should the key be created */\n    tree[\"key\"] = \"value\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matlab", "indexing", "mex"], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "edited": false, "score": 0, "creation_date": 1500570746, "post_id": 45216318, "comment_id": 77408627, "body": "Thank you so much for the helpful comments! Works perfectly. I&#39;m just wondering, if I remove the <code>const</code>s in front of the declarations of <code>X</code>, <code>Z</code>, and <code>B</code>, and replace <code>out</code> with <code>Z</code> in lines 27 and 33, why does <code>Z</code> not get modified? Doesn&#39;t <code>Z_out</code> now point to an element of <code>Z</code> rather than an element of <code>out</code>, and therefore line 28 modifies <code>Z</code> directly? Would this be faster than duplicating the array?"}, {"owner": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "edited": false, "score": 0, "creation_date": 1500573538, "post_id": 45216318, "comment_id": 77410237, "body": "Also, would it be faster to avoid using <code>mxCalcSingleSubscript</code> / <code>sub2ind</code> and directly index <code>X</code> and <code>temp</code> using <code>i</code>, <code>j</code>, <code>k</code>, and <code>m</code>?"}, {"owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "reply_to_user": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "edited": false, "score": 0, "creation_date": 1500576156, "post_id": 45216318, "comment_id": 77411835, "body": "All inputs to mex functions  including X, Z and B are constant and must/can not be modified. So you should create a copy and change it. <code>Z_out</code> point to an element of <code>out</code>"}, {"owner": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "edited": false, "score": 0, "creation_date": 1500581827, "post_id": 45216318, "comment_id": 77415094, "body": "WOW, I wish I could give you more points! My code is now 7-10 times faster now! Thank you so much!"}, {"owner": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "edited": false, "score": 0, "creation_date": 1500582319, "post_id": 45216318, "comment_id": 77415375, "body": "original matlab... Elapsed time is 1.767017 seconds. linear indexing matlab... Elapsed time is 0.880587 seconds. regular mex... Elapsed time is 0.577665 seconds. optimized mex... Elapsed time is 0.220025 seconds."}], "tags": [], "owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "is_accepted": true, "score": 3, "last_activity_date": 1500581187, "last_edit_date": 1500581187, "creation_date": 1500557605, "answer_id": 45216318, "question_id": 45202161, "link": "https://stackoverflow.com/questions/45202161/indexing-and-accessing-elements-of-cell-arrays-and-matrices-in-mex-functions/45216318#45216318", "title": "Indexing and accessing elements of cell arrays and matrices in mex functions", "body": "<p>-Since all input arrays are <code>const</code> you should make a copy of <code>Z</code>.</p>\n\n<p>-<code>mxCalcSingleSubscript</code> can be used for any type of array including cell arrays. Here I renamed it to <code>sub2ind</code>.</p>\n\n<p>-<code>mxGetPr</code> is used to access elements of an array .</p>\n\n<p>Here is an implementation (hasn't been tested on real data):</p>\n\n<pre><code>#include \"mex.h\"\n#define sub2ind mxCalcSingleSubscript\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    const mxArray* X = prhs[0];\n    const mxArray* Z = prhs[1];\n    const mxArray* B = prhs[2];\n    mxArray * out = mxDuplicateArray (Z);\n    const int* pDims = mxGetDimensions(X);\n\n    mwSize nsubs = mxGetNumberOfDimensions(X);\n    double* B_arr = mxGetPr(B);\n    for (size_t i = 0; i &lt; pDims[0]; i++) {\n        for (size_t j = 0; j &lt; pDims[1]; j++) {\n            for (size_t k = 0; k &lt; pDims[2]; k++) {\n                int subs [] = {i, j, k};\n                mwIndex  idx = sub2ind(X, nsubs, subs);\n                mxArray* temp = mxGetCell(X, idx);\n                double* temp_arr = mxGetPr(temp);\n\n                const int* matDims = mxGetDimensions(temp);\n                mwSize nsubs_temp = mxGetNumberOfDimensions(temp);\n                for (size_t m = 0; m &lt; matDims[0]; m++) {\n                    int subs_out_1 [] = {m,0};\n                    int subs_out_2 [] = {m,1};\n                    mwIndex temp_m_1 = temp_arr[sub2ind(temp, nsubs_temp, subs_out_1)]-1;\n                    mwIndex temp_m_2 = temp_arr[sub2ind(temp, nsubs_temp, subs_out_2)]-1;\n                    double* Z_out = mxGetPr (mxGetCell(out,temp_m_1));\n                    Z_out[temp_m_2] += B_arr[idx];\n                }\n            }\n        }\n    }\n    plhs[0] = out;\n}\n</code></pre>\n\n<p>However both MATLAB and c implementations can be changed to use linear indexing:</p>\n\n<pre><code>function Z = myFunction(X, Z, B)\n    for k = 1:numel(X)\n        for m = 1:size(X{k}, 1)\n            Z{X{k}(m, 1)}(X{k}(m, 2)) = Z{X{k}(m, 1)}(X{k}(m, 2)) + B(k);\n        end\n    end\nend\n\n\n#include \"mex.h\"\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    const mxArray* X = prhs[0];\n    const mxArray* Z = prhs[1];\n    const mxArray* B = prhs[2];\n    mxArray * out = mxDuplicateArray (Z);\n\n    mwSize n_X = mxGetNumberOfElements(X);\n    double* B_arr = mxGetPr(B);\n    for (size_t k = 0; k &lt; n_X; k++) {\n        mxArray* temp = mxGetCell(X, k);\n        double* temp_arr = mxGetPr(temp);\n\n        const int* matDims = mxGetDimensions(temp);\n        size_t rows = matDims[0];\n        for (size_t m = 0; m &lt; rows; m++) {\n            mwIndex temp_m_1 = temp_arr[m]-1;\n            mwIndex temp_m_2 = temp_arr[m+rows]-1;\n            double* Z_out = mxGetPr (mxGetCell(out,temp_m_1));\n            Z_out[temp_m_2] += B_arr[k];\n        }\n    }\n    plhs[0] = out;\n} \n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 424306, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/68cd128462faf8d8739eb37591cddd48?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Subramanian", "link": "https://stackoverflow.com/users/424306/vivek-subramanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 45216318, "answer_count": 1, "score": 2, "last_activity_date": 1500581187, "creation_date": 1500503832, "last_edit_date": 1500504847, "question_id": 45202161, "link": "https://stackoverflow.com/questions/45202161/indexing-and-accessing-elements-of-cell-arrays-and-matrices-in-mex-functions", "title": "Indexing and accessing elements of cell arrays and matrices in mex functions", "body": "<p>I'm trying to write a C++ mex function to iterate through a cell array of matrices, each matrix of which is a different size. In Matlab, I could do this using the following code:</p>\n\n<pre><code>function Z = myFunction(X, Z, B)\n\nfor i = 1:size(X, 1)\n    for j = 1:size(X, 2)\n        for k = 1:size(X, 3)\n            temp = X{i, j, k};\n            for m = 1:size(temp, 1)\n                Z{temp(m, 1)}(temp(m, 2)) = Z{temp(m, 1)}(temp(m, 2)) + B(i, j, k);\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>Here X is a 3-dimensional cell array, where each cell contains a matrix with a variable number of rows and 2 columns. These two columns allow me to index another cell array of vectors Z, where each vector is of different length. Elements of vectors in Z that are indexed are incremented by elements from a 3-dimensional matrix B.</p>\n\n<p>So far, I have the following code in C++ (I have never coded in C++ before):</p>\n\n<pre><code>#include \"mex.h\"\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    const mxArray* X = prhs[0];\n    const mxArray* Z = prhs[1];\n    const mxArray* B = prhs[2];\n\n    const int* pDims = mxGetDimensions(X);\n\n    mwSize nsubs = mxGetNumberOfDimensions(X);\n\n    for (size_t i = 0; i &lt; pDims[0]; i++) {\n        for (size_t j = 0; j &lt; pDims[1]; j++) {\n            for (size_t k = 0; k &lt; pDims[2]; k++) {\n                int subs [] = {i, j, k};\n                mxArray* temp = mxGetCell(X, mxCalcSingleSubscript(X, nsubs, subs));\n\n                const int* matDims = mxGetDimensions(temp);\n                for (size_t m = 0; m &lt; matDims[0]; m++) {\n\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>To access elements of the matrix B, can I use the same mxCalcSingleSubscript function as I did to access elements of the cell array X? If not, how do I do this?</li>\n<li>How do I access elements of <code>temp</code> and perform the indexing as I have done in the Matlab code?</li>\n</ol>\n"}, {"tags": ["c++", "makefile", "cmake"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1500503303, "post_id": 45202048, "comment_id": 77371231, "body": "I can tell you that the top-level <code>CMakeLists.txt</code> needs to pass <code>-I ${top_srcdir}&#47;apriltags</code> to the compiler, but I don&#39;t know how to tell cmake that, and I may have spelled <code>${top_srcdir}</code> incorrectly."}], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 7942311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53d9c375c21733a876826559e827e0a?s=128&d=identicon&r=PG&f=1", "display_name": "utopia", "link": "https://stackoverflow.com/users/7942311/utopia"}, "is_accepted": false, "score": 0, "last_activity_date": 1500554494, "last_edit_date": 1500554494, "creation_date": 1500504441, "answer_id": 45202273, "question_id": 45202048, "link": "https://stackoverflow.com/questions/45202048/cmake-header-files-not-being-found-in-include/45202273#45202273", "title": "CMake header files not being found in include", "body": "<p>Prefer the <code>target_*</code> commands.</p>\n\n<p>apriltags/CMakeLists.txt:</p>\n\n<pre><code>target_include_directories(apriltags\n  PUBLIC\n    \"${CMAKE_CURRENT_SOURCE_DIR}\"\n  PRIVATE\n    \"${CMAKE_CURRENT_SOURCE_DIR}/AprilTags\"\n    /opt/local/include)\n</code></pre>\n\n<p>That says, everything that uses the <code>apriltags</code> target will be able to access any includes in \".\", that <code>apriltags</code> can also use \".\" and only <code>apriltags</code> itself uses content under the \"AprilTags\" and \"/opt/local/include\" directories.</p>\n\n<p>If you really know what you are doing, you can get even more fine-grained by using generator expressions, but that is not necessary here to get it working.</p>\n"}], "owner": {"reputation": 34, "user_id": 7807588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0064761c20ecfbd07250b07419d182?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Jensen", "link": "https://stackoverflow.com/users/7807588/jared-jensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1469, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500554494, "creation_date": 1500503160, "question_id": 45202048, "link": "https://stackoverflow.com/questions/45202048/cmake-header-files-not-being-found-in-include", "title": "CMake header files not being found in include", "body": "<p>I have library, AprilTags, that uses cmake top build it.</p>\n\n<p>I have another project AIV, that uses AprilTags. I want to keep the apriltags library inside of ~/aiv/apriltags but have another file, front_back_camera_demo that uses some of the files inside of AprilTags library.</p>\n\n<p>So the file structure looks like</p>\n\n<pre><code>~/aiv/build/\n     /apriltags/CMakeLists.txt\n     /apriltags/AprilTags/TagDetector.h\n     /apriltags/AprilTags/*.h\n     /front_back_camera_demo.cpp\n     /CMakeLists.txt\n</code></pre>\n\n<p>When I run cmake on the top level CMakeLists.txt, it builds the AprilTags library successfully, but then I get a</p>\n\n<blockquote>\n  <p>front_back_camera_demo.cpp:72:35: fatal error: AprilTags/TagDetector.h: No such file or directory</p>\n</blockquote>\n\n<p>error on the line where I include AprilTags/TagDetector.h</p>\n\n<p>Here are the two relevant CMakeLists.txt:</p>\n\n<p>Top level:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\n\nproject(AIV)\n\nadd_subdirectory(apriltags)\nadd_executable(front_back_camera_demo front_back_camera_demo.cpp \nSerial.cpp)\ntarget_link_libraries(front_back_camera_demo apriltags)\n</code></pre>\n\n<p>Inside apriltags:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(apriltags)\n\n#add_definitions(-pg) #\"-fopenmp)\n\n# pull in the pods macros. See cmake/pods.cmake for documentation\nset(POD_NAME apriltags)\ninclude(cmake/pods.cmake)\n\nfile(GLOB SOURCE_FILES \"src/*.cc\")\ninclude_directories(AprilTags . /opt/local/include)\nadd_library(apriltags ${SOURCE_FILES})\n\nfind_package(OpenCV)\ninclude_directories(${OpenCV_INCLUDE_DIRS})\ntarget_link_libraries(apriltags ${OpenCV_LIBS}) #-pg) #-fopenmp)\npods_use_pkg_config_packages(apriltags eigen3)\n\nif (${CMAKE_SYSTEM_NAME} MATCHES \"Darwin\")\n  target_link_libraries(apriltags -L/opt/local/lib/) # MacPorts \nspecial treatment...\nelse (${CMAKE_SYSTEM_NAME} MATCHES \"Darwin\")\n  pods_use_pkg_config_packages(apriltags libv4l2)\nendif (${CMAKE_SYSTEM_NAME} MATCHES \"Darwin\")\n\npods_install_libraries(apriltags)\n\nfile(GLOB header_files \"AprilTags/*.h\")\npods_install_headers(${header_files} DESTINATION AprilTags/)\n\npods_install_pkg_config_file(apriltags\n    LIBS -lapriltags\n    REQUIRES eigen3 opencv2\n    VERSION 1.0.0)\n\nadd_subdirectory(example)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1500503154, "post_id": 45201996, "comment_id": 77371179, "body": "Didn&#39;t someone just ask this exact question for Python?"}], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 7211710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/600d4335487df1509e29e5b516e4cafb?s=128&d=identicon&r=PG&f=1", "display_name": "Alam", "link": "https://stackoverflow.com/users/7211710/alam"}, "is_accepted": true, "score": 1, "last_activity_date": 1500503299, "last_edit_date": 1500503299, "creation_date": 1500503155, "answer_id": 45202047, "question_id": 45201996, "link": "https://stackoverflow.com/questions/45201996/vector-in-c-printing-input-out-repetitively/45202047#45202047", "title": "Vector in c++ printing input out repetitively", "body": "<p>You need to put your for loop outside the while loop. Right now for every input value it will print out the entire vector. This will print only when you are done with inputting numbers for your program.   </p>\n\n<pre><code>while(cin&gt;&gt;number) \n{\n    numbers.push_back(number);\n}\nfor(int i=0;i&lt;numbers.size();i++)\n{\n    cout&lt;&lt;numbers[i]&lt;&lt;\" \";\n}\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8334259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3102233288d8d34c2a0664827d009f55?s=128&d=identicon&r=PG&f=1", "display_name": "Cas", "link": "https://stackoverflow.com/users/8334259/cas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 45202047, "answer_count": 1, "score": 0, "last_activity_date": 1500503299, "creation_date": 1500502776, "question_id": 45201996, "link": "https://stackoverflow.com/questions/45201996/vector-in-c-printing-input-out-repetitively", "title": "Vector in c++ printing input out repetitively", "body": "<p>My code is supposed to take input from the user terminated by '|' and print out a vector using a while-loop.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main() \n{\n    vector&lt;int&gt; numbers;\n    int number;\n    cout&lt;&lt;\"Enter some numbers: \";\n    while(cin&gt;&gt;number) \n    {\n        numbers.push_back(number);\n        for(int i=0;i&lt;numbers.size();i++)\n            {\n                cout&lt;&lt;numbers[i]&lt;&lt;\" \";\n            }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>However, say I enter the values: <code>1 2 3 4 |</code></p>\n\n<p>The output is: <code>1 1 2 1 2 3 1 2 3 4</code></p>\n\n<p>Please help</p>\n"}, {"tags": ["c++", "random", "double"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1500502077, "post_id": 45201838, "comment_id": 77370849, "body": "Can you use C++11 features?"}, {"owner": {"reputation": 1636, "user_id": 5424833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2198b92f31ea537e71189423aee16b3?s=128&d=identicon&r=PG&f=1", "display_name": "Software2", "link": "https://stackoverflow.com/users/5424833/software2"}, "edited": false, "score": 1, "creation_date": 1500502180, "post_id": 45201838, "comment_id": 77370874, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5008804/generating-random-integer-from-a-range\">Generating random integer from a range</a>"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 2, "creation_date": 1500502196, "post_id": 45201838, "comment_id": 77370882, "body": "You can always regard, 0.0 - 4.0 inclusive as the integers 0 to 40. Do the division after, when appropriate."}, {"owner": {"reputation": 51, "user_id": 8233956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ae1a937606d6b214416f975ea8e8f0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Einhorn", "link": "https://stackoverflow.com/users/8233956/j-einhorn"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1500502369, "post_id": 45201838, "comment_id": 77370939, "body": "@WhiZTiM I can if I really need to, but am trying not to!"}, {"owner": {"reputation": 51, "user_id": 8233956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ae1a937606d6b214416f975ea8e8f0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Einhorn", "link": "https://stackoverflow.com/users/8233956/j-einhorn"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1500503244, "post_id": 45201838, "comment_id": 77371205, "body": "@CaptainGiraffe yup, by far the most efficient way to handle this problem. thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8233956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ae1a937606d6b214416f975ea8e8f0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Einhorn", "link": "https://stackoverflow.com/users/8233956/j-einhorn"}, "edited": false, "score": 0, "creation_date": 1500503121, "post_id": 45201988, "comment_id": 77371168, "body": "this is definitely the easiest way for me to follow, I should&#39;ve thought more about the actual math of it rather than try to have perfect code.  Thank you very much!!"}], "tags": [], "owner": {"reputation": 360, "user_id": 2698483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WOlr5.jpg?s=128&g=1", "display_name": "b13rg", "link": "https://stackoverflow.com/users/2698483/b13rg"}, "is_accepted": true, "score": 1, "last_activity_date": 1500502717, "creation_date": 1500502717, "answer_id": 45201988, "question_id": 45201838, "link": "https://stackoverflow.com/questions/45201838/c-generating-a-double-between-2-doubles/45201988#45201988", "title": "c++ generating a double between 2 doubles", "body": "<p>If it's just to find a gpa to one decimal place, you can find an int between 0 and 41 then divide by 10 to get a decimal.  For example:</p>\n\n<pre><code>double rand2 = (double)(rand()%41)/10;\n</code></pre>\n\n<p>rand()%41 will generate a number that is between 0 and 40 inclusive.  Then we cast it as a double and divide by 10.  So if the generated number is 34, we get 3.4 as a double.</p>\n\n<p>To use other double as the range, you would just multiply them by the number of decimal places you want following the number, then also divide by that number</p>\n\n<pre><code>//Range== 0,34 with 3 decimal places    \ndouble rand2 = (double)(rand()%35000)/1000;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8233956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ae1a937606d6b214416f975ea8e8f0?s=128&d=identicon&r=PG&f=1", "display_name": "J.Einhorn", "link": "https://stackoverflow.com/users/8233956/j-einhorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 45201988, "answer_count": 1, "score": 2, "last_activity_date": 1500503246, "creation_date": 1500501959, "last_edit_date": 1500502240, "question_id": 45201838, "link": "https://stackoverflow.com/questions/45201838/c-generating-a-double-between-2-doubles", "title": "c++ generating a double between 2 doubles", "body": "<p>So I need to randomly generate a double between 2 doubles, and in this specific case, it is to randomly generate a GPA.  I tried at first to do this:</p>\n\n<pre><code>srand(time(NULL));\n\ndouble rands1 = rand() % (4) + ((rand() % (10)) / 10.0);\n</code></pre>\n\n<p>And this does work... mostly.  I can get anywhere from a 0.0 to 3.9, but it has to be from 0.0 to 4.0 inclusive! Changing the 4 in the code to a 5 can give 4.1 and higher as well however, and that is no good. </p>\n\n<p>My question is, what would be a more efficient way to code this?  I apologize if there is a pretty straight forward answer/if this seems simple, but I am pretty new to coding and c++. Thank you!</p>\n"}, {"tags": ["c++", "visual-studio", "linker", "shared-libraries"], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500556059, "post_id": 45202465, "comment_id": 77397359, "body": "I did do this, and the output from dump bin has a line showing: &quot;15   A86_ReadConfigReg&quot;. What is the next step?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500557572, "post_id": 45202465, "comment_id": 77398710, "body": "@user2913869  Check updated answer for your linker issue."}, {"owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500558348, "post_id": 45202465, "comment_id": 77399374, "body": "The calling convention was indeed set to __cdecl (/Gd). Like I mentioned in the original question, the header file does indeed have &quot;extern &quot;C&quot; { } and all the function prototypes listed between the parenthesis. I do see that the prototype is defined in this way: int _stdcall A86_ReadConfigReg (int iHandle, DWORD dwOffset, DWORD* pdwResult); So I also tried changing the &quot;_stdcall&quot; label to &quot;__cdecl&quot;, and then removed it completely, but it still would not build."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500559284, "post_id": 45202465, "comment_id": 77400257, "body": "Well, it&#39;s not normal.  It looks like your headers do not match what&#39;s in the library.  The missing leading _ and @12 are a very strong indicators that that RegConfigReg was compiled with __cdecl, yet the headers defines the function with an explicit __stdcall .  It is almost certain that these headers were not the ones used to compile this library.  Unless...  Is that library written in PASCAL?"}, {"owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500560013, "post_id": 45202465, "comment_id": 77400871, "body": "Unfortunately the library files were provided by a 3rd party, so I have no visibility into how they were generated. I can hunt around for different versions of the same library files. Is there anything that can be done at this point to make it work? I also have a *.dll with the exact same file name. Is it possible that I need to use the *.dll instead of the *.lib?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500560440, "post_id": 45202465, "comment_id": 77401201, "body": "Sure, that&#39;s a definite possibility!!!.  dumpbin works on dll&#39;s as well.  It is also much easier to &#39;hack&#39; the imports/exports table for dlls than for static libraries, if it ever comes to that...  But looking for a different version of the lib / sources is the best you can do at the moment."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1500566408, "post_id": 45202465, "comment_id": 77405903, "body": "<code>extern &quot;C&quot; </code> only suppresses C++ name-mangling, not the OP&#39;s problem.  Calling convention mismatches are tricky when the OP did not give anything to look at, clearly you&#39;ll need to advise him using a telephone."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500566840, "post_id": 45202465, "comment_id": 77406190, "body": "Yes I know...  There&#39;s no way this static library is going to work for him in the current state.  I think he&#39;s got a better shot with the dll and possibly a linker def file, if the names don&#39;t follow the usual __stdcall  convention."}, {"owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "edited": false, "score": 0, "creation_date": 1500572646, "post_id": 45202465, "comment_id": 77409671, "body": "Is there anything that needs to change to use the *.dll? I just change Linker-&gt; Input to point to the DLL file, then put the *.dll into the same directory as the executable? Or are there code changes required?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500579479, "post_id": 45202465, "comment_id": 77413752, "body": "You need to create an import library for your dll, and use that for linking. <a href=\"https://msdn.microsoft.com/en-us/library/0b9xe492.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/0b9xe492.aspx</a>"}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": 3, "last_activity_date": 1500557523, "last_edit_date": 1500557523, "creation_date": 1500505502, "answer_id": 45202465, "question_id": 45201826, "link": "https://stackoverflow.com/questions/45201826/c-visual-studio-unresolved-external-symbol-using-lib-file/45202465#45202465", "title": "c++ visual studio, unresolved external symbol using .lib file", "body": "<p>First thing you should do is inspect the library to make sure the referenced  function is there.  Start an msvc developer command prompt, and run dumpbin.exe</p>\n\n<p>Syntax:</p>\n\n<pre><code>dumpbin /exports &lt;full path library name&gt;\n</code></pre>\n\n<p>This will give you a listing of all exported symbols from the library.  </p>\n\n<p>You'll get a clearer idea of what to do from there.</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>dumpbin told you that your lib exports a function called <code>A86_ReadConfigReg</code>, which is a __cdecl signature and not a __stdcall signature like <code>_A86_ReadConfigReg@12</code> that your linker expects....  At least two things you should do/check in order of priority. </p>\n\n<ol>\n<li><p>Your linker is looking for a pascal call signature and this is very odd. Does your project have __stdcall as a default for function calls? That's controlled by the /Gz switch in <code>Project Properties-&gt;C/C++-&gt;Advanced-&gt;Calling Convention</code>.  Default should be set to __cdecl  (/Gd)</p></li>\n<li><p>You should check that your include files enclose all the function declarations in an <code>extern \"C\" { }</code> block.  If they don't, you can place the block around the #include directive, so you do not have to modify the library's files.  </p></li>\n</ol>\n\n<p>Like so:</p>\n\n<pre><code>extern \"C\" {\n#include &lt;mylib.h&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6928, "favorite_count": 1, "closed_date": 1500580588, "answer_count": 1, "score": 1, "last_activity_date": 1500557523, "creation_date": 1500501889, "question_id": 45201826, "link": "https://stackoverflow.com/questions/45201826/c-visual-studio-unresolved-external-symbol-using-lib-file", "closed_reason": "Duplicate", "title": "c++ visual studio, unresolved external symbol using .lib file", "body": "<p>I have inherited a legacy project which utilizes some external functions from a *.lib. From what I was told, the syntax for using the *.lib was correct and this \nwas buildable in whatever visual studio version they used. (ie, there is an extern \"C\" prototype file, and all the function signatures are correct).</p>\n\n<p>When building, I get \"error LNK2019: unresolved external symbol _A86_ReadConfigReg@12 referenced in function ...\"</p>\n\n<p>I'm pretty confident that this is related to the *.lib file since the *.lib file has \"A86\" in the name...There is also a *.dll with the same name.</p>\n\n<p>I went to project properties -> Linker -> Input and listed the *.lib file name in \"Additional Dependencies\", but no luck. I tried adding the include directories, copying the *.lib &amp; *.dll to the executable location. But no luck.</p>\n\n<p>How do I go about fixing this error?</p>\n"}, {"tags": ["c++", "function", "class", "templates", "non-type"], "comments": [{"owner": {"reputation": 19, "user_id": 7668013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0e969dbc17f5b48a8e6d0083a3c44c?s=128&d=identicon&r=PG", "display_name": "April", "link": "https://stackoverflow.com/users/7668013/april"}, "edited": false, "score": 0, "creation_date": 1500501820, "post_id": 45201771, "comment_id": 77370749, "body": "By the way, with the MyClass&lt;int&gt; syntax that I would guess, I get an error like &quot;expected a constant of size &#39;int&#39;, got &#39;int&#39;&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 2, "last_activity_date": 1500501809, "creation_date": 1500501809, "answer_id": 45201814, "question_id": 45201771, "link": "https://stackoverflow.com/questions/45201771/pass-templated-class-to-templated-function/45201814#45201814", "title": "Pass templated class to templated function", "body": "<blockquote>\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;int&gt;&gt;();\n</code></pre>\n</blockquote>\n\n<p>Should be something like</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;42&gt;&gt;();\n                                       // ^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "is_accepted": false, "score": 0, "last_activity_date": 1500502557, "creation_date": 1500502557, "answer_id": 45201951, "question_id": 45201771, "link": "https://stackoverflow.com/questions/45201771/pass-templated-class-to-templated-function/45201951#45201951", "title": "Pass templated class to templated function", "body": "<p>Take a look <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters#Template_template_arguments\" rel=\"nofollow noreferrer\">here.</a></p>\n\n<p><code>MyClass&lt;int&gt;</code> is not a type (<code>MyClass&lt;42&gt;</code>, for example, is), while the function expects a name of a type (class) as a parameter. For it to be able to take a <em>template</em> as its <em>template parameter</em>, the syntax must be following:</p>\n\n<pre><code>template&lt;template&lt;typename&gt; class T&gt; Parameters validParams();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1500502753, "creation_date": 1500502753, "answer_id": 45201993, "question_id": 45201771, "link": "https://stackoverflow.com/questions/45201771/pass-templated-class-to-templated-function/45201993#45201993", "title": "Pass templated class to templated function", "body": "<p><code>MyClass</code> is a class templates whose template parameter is a value, not a type.</p>\n\n<p><code>MyClass&lt;0&gt;</code> <em>is</em> a valid instantiation of that template that results in a class.<br>\n<code>MyClass&lt;int&gt;</code> <em>is not</em> a valid instantiation of that template.</p>\n\n<p>Hence, the line</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;int&gt;&gt;();\n</code></pre>\n\n<p>is not valid. A valid use will be:</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;0&gt;&gt;();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;X&gt;&gt;();\n</code></pre>\n\n<p>as long as <code>X</code> is a compile time constant.</p>\n"}], "owner": {"reputation": 19, "user_id": 7668013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0e969dbc17f5b48a8e6d0083a3c44c?s=128&d=identicon&r=PG", "display_name": "April", "link": "https://stackoverflow.com/users/7668013/april"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1500502753, "creation_date": 1500501643, "last_edit_date": 1500502150, "question_id": 45201771, "link": "https://stackoverflow.com/questions/45201771/pass-templated-class-to-templated-function", "title": "Pass templated class to templated function", "body": "<p>I have a non-type templated class:</p>\n\n<pre><code>template&lt;int N&gt; class MyClass; // prototype\n</code></pre>\n\n<p>And a generic template function:</p>\n\n<pre><code>template&lt;class T&gt; Parameters validParams(); // prototype\n</code></pre>\n\n<p>What is the correct syntax to use a non-type templated class in a templated function? If I don't use a templated class, then the correct syntax is:</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&gt;(); // prototype\n</code></pre>\n\n<p>I've looked around a bit to try to figure out what the syntax should be here, any help is appreciated! It would make the most sense to me if it were the following, but it's not...</p>\n\n<pre><code>template&lt;&gt; Parameters validParams&lt;MyClass&lt;int&gt;&gt;();\n</code></pre>\n\n<p>With this code I get the following error:</p>\n\n<blockquote>\n<pre><code>expected a constant of size 'int', got 'int'\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "templates", "inheritance", "variadic"], "owner": {"reputation": 99, "user_id": 6850713, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7d09c6d517a37853faa0200f8617bf1?s=128&d=identicon&r=PG&f=1", "display_name": "MrBZapp", "link": "https://stackoverflow.com/users/6850713/mrbzapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1500500702, "answer_count": 0, "score": 1, "last_activity_date": 1500500560, "creation_date": 1500500560, "question_id": 45201535, "link": "https://stackoverflow.com/questions/45201535/nested-template-functions-with-their-own-template-parameters", "closed_reason": "Duplicate", "title": "Nested template functions with their own template parameters", "body": "<p>Say I have a class that has some templated arguments, and a function that can access each one of those arguments such as </p>\n\n<pre><code>template &lt;typename... Types&gt;\nclass Foo\n{\npublic:\n    template &lt;typename Type&gt;\n    Type&amp; get() { return std::get&lt;Type&gt;(member_tuple); }\n\nprotected:\n    std::tuple&lt;Types...&gt; member_tuple;\n};\n</code></pre>\n\n<p>And I want to use this class as a base class and specialize the <code>get()</code> function in the child class to do something ... special ... but not so specialized as to define any of the template arguments just yet. Perhaps something like this:</p>\n\n<pre><code>template &lt;typename... Types&gt;\nclass Bar\n    : public Foo&lt;Types...&gt;\n{\npublic:\n    template &lt;typename Type&gt;\n    Type&amp; special_get() \n    {\n        // do your special thing in here somewhere.\n        return Foo&lt;Types...&gt;::get&lt;Type&gt;(this-&gt;member_tuple); \n    }\n};\n</code></pre>\n\n<p>However, that's a compiler error: it complains that it expected\n<code>return Foo&lt;Types...&gt;::get(this-&gt;member_tuple)</code>.</p>\n\n<p>To confuse me further, if I leave out the <code>&lt;Type&gt;</code> argument, and then try to call that function, I get a \"couldn't deduce template parameter 'Type'\" error instead.</p>\n\n<p>How do I go about passing the additional template argument to the wrapped base class function?</p>\n"}, {"tags": ["c++", "cpp-core-guidelines"], "answers": [{"comments": [{"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "edited": false, "score": 0, "creation_date": 1500620751, "post_id": 45219569, "comment_id": 77427878, "body": "I wonder why do we need a separate class for it? Seems like it is possible to design <code>span</code> in a way that it is applicable to both one and multiple dimensions."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "edited": false, "score": 2, "creation_date": 1500649932, "post_id": 45219569, "comment_id": 77448173, "body": "@Mikhail it is not in GSL, it is a Microsoft own extention. Probably there weren&#39;t concensus on how multidimensional spans should be implemented, or there were some problems with them, so they did not make into GSL. Apparently Microsoft decided that it still wants them, or rolled own proof of concept implementation for testing, so, to not break existing span class, it made a new one."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1557933302, "post_id": 45219569, "comment_id": 98934681, "body": "there&#39;s probably some semantic value in having a separation between a single dimensional vs. multidimensional span."}], "tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": true, "score": 6, "last_activity_date": 1500565740, "creation_date": 1500565740, "answer_id": 45219569, "question_id": 45201524, "link": "https://stackoverflow.com/questions/45201524/what-is-gslmulti-span-to-be-used-for/45219569#45219569", "title": "What is gsl::multi_span to be used for?", "body": "<p>In short, it is a span over contiguous piece of memory, which represents multidimensional array.</p>\n\n<p>Here is an example of use:</p>\n\n<pre><code>int data[6] = {0, 1, 2, 3, 4, 5};\nmulti_span&lt;int, 2, 3&gt; span{data, 6};\nstd::cout &lt;&lt; span[1][1] &lt;&lt; '\\n'; //Outputs 4\n</code></pre>\n\n<p>From the linked source, it seems, that it also supports runtime bounds, but I am not sure about proper syntax for those.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1553, "favorite_count": 2, "accepted_answer_id": 45219569, "answer_count": 1, "score": 6, "last_activity_date": 1500565740, "creation_date": 1500500507, "question_id": 45201524, "link": "https://stackoverflow.com/questions/45201524/what-is-gslmulti-span-to-be-used-for", "title": "What is gsl::multi_span to be used for?", "body": "<p>The C++ core guidelines mention spans, not \"multi-spans\". But - I see that Microsoft's GSL implementation has a <a href=\"https://github.com/Microsoft/GSL/blob/master/include/gsl/multi_span\" rel=\"noreferrer\"><code>multi_span</code> class</a></p>\n\n<pre><code>template &lt;\n    typename ValueType,\n    std::ptrdiff_t FirstDimension,\n    std::ptrdiff_t... RestDimensions\n&gt;\nclass multi_span { ... };\n</code></pre>\n\n<p>So, obviously this is some sort of a multi-dimensional version of <code>gsl::span</code>. But what is that supposed to mean? Why do we need this multi-dimensional span, or rather - when would we use it? I can't seem to find any documentation on this.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "locking", "mutex"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 7223291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e753d77621a89c681ea451a0281efdd?s=128&d=identicon&r=PG&f=1", "display_name": "matanmarkind", "link": "https://stackoverflow.com/users/7223291/matanmarkind"}, "edited": false, "score": 0, "creation_date": 1500582528, "post_id": 45203015, "comment_id": 77415496, "body": "Thanks Michael. I still am now clear on how the double lock occurs. <code>AsyncWorker::m_mtx</code> is a private variable, so Logger can&#39;t lock it. Also I think the try catches show that the issue must be coming from within the lock inside of BunchQueue. Can you take me through what you see as being the double lock as of now?"}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": 1, "last_activity_date": 1500509151, "creation_date": 1500509151, "answer_id": 45203015, "question_id": 45201489, "link": "https://stackoverflow.com/questions/45201489/stdsystem-error-called-when-locking-mutex-with-unique-lock/45203015#45203015", "title": "std::system_error called when locking mutex with unique_lock", "body": "<p>std::mutex is not 'reentrant'.  The exception is thrown because you are trying to lock AsyncWorker::m_mtx while the mutex is already owned by the calling thread.</p>\n\n<p>The path where the double lock occurs is:</p>\n\n<pre><code>AsyncWorker::waitTillNeeded()-&gt;Logger::shouldSleep()\n</code></pre>\n\n<p>Changing the type of <code>AsyncWorker::m_mtx</code> to <code>std::recursive_mutex</code> should fix this problem.  I could not find a locking recursive path on BunchQueue::m_mtx, but it would not hurt to use a recursive mutex there as well.</p>\n\n<p>Other issues:</p>\n\n<ul>\n<li><p>You have a memory leak on BaseQueue::m_vec. <code>free()</code> is never called on that pointer.  I understand you are trying to avoid copying by using realloc (another issue there...) but be advised that realloc <em>will</em> copy the array contents if the current block cannot be resized in place.  I suggest you seriously consider using plain old std::vector.  Use <code>std::vector::reserve()</code> to pre-allocate space for the queue as needed.</p></li>\n<li><p>Your call to realloc in 'ShallowQueue::push_back()` is problematic:</p>\n\n<p>this->m_vec = (T*) realloc(this->m_vec, sizeof(T)*this->m_capacity);</p></li>\n</ul>\n\n<p>What happens if realloc() returns NULL?  You have lost the previous value of   m_vec and cannot access the data that was previously stored.  You also lose the capacity to free memory in an orderly fashion.</p>\n\n<p>The correct way to call realloc would be:</p>\n\n<pre><code> T* p = (T*) realloc(this-&gt;m_vec, sizeof(T)*this-&gt;m_capacity);\n if (!p)\n {\n     // do some error handling..\n     // return\n }\n this-&gt;m_vec = p;  // p is now known to be non-null, it is safe to assign its value to m_vec\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 7223291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e753d77621a89c681ea451a0281efdd?s=128&d=identicon&r=PG&f=1", "display_name": "matanmarkind", "link": "https://stackoverflow.com/users/7223291/matanmarkind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3318, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500509151, "creation_date": 1500500389, "question_id": 45201489, "link": "https://stackoverflow.com/questions/45201489/stdsystem-error-called-when-locking-mutex-with-unique-lock", "title": "std::system_error called when locking mutex with unique_lock", "body": "<p>I am trying to write a multithreaded logger and when I test to see if the queue of lines to write out is empty I get std::system_error with Invalid argument. This happens when constructing a unique_lock. If I pass std::try_to_lock there doesn't seem to be an issue, even though the <a href=\"http://en.cppreference.com/w/cpp/thread/unique_lock/unique_lock\" rel=\"nofollow noreferrer\">conditions</a> for being undefined seem to be the same for both constructors.</p>\n\n<p><strong>general.hh</strong> - nothing especially interesting here I think</p>\n\n<pre><code>#pragma once\n\n#include &lt;stdint.h&gt;\n\n#define likely(x)    __builtin_expect (!!(x), 1)\n#define unlikely(x)  __builtin_expect (!!(x), 0)\n\nnamespace matan {\n\ntypedef int8_t s8;\ntypedef int16_t s16;\ntypedef int32_t s32;\ntypedef int64_t s64;\ntypedef uint8_t u8;\ntypedef uint16_t u16;\ntypedef uint32_t u32;\ntypedef uint64_t u64;\n\ntemplate &lt;typename T, typename... Args&gt;\ninline void place(T* loc, Args&amp;&amp;... args) {\n  ::new (loc) T(args...);\n}\n\ntemplate &lt;typename T, typename... Args&gt;\ninline void replace(T* p, Args&amp;&amp;... args) {\n  p-&gt;~T();\n  ::new (p) T(args...);\n}\n\n} // matan\n</code></pre>\n\n<p><strong>BunchQueue.hh</strong> - the basic data structure that seems to be having the issue.</p>\n\n<pre><code>#pragma once\n\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;mutex&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n#include &lt;condition_variable&gt;\n\n#include &lt;iostream&gt;  //PUSH_ASSERT\n\n#include \"general.hh\"\n\nnamespace matan {\n\ntemplate &lt;typename T&gt;\nclass BaseQueue {\npublic:\n  typedef T value_type;\n  BaseQueue(size_t initCapacity) : m_capacity(initCapacity) {}\n  void reset() { m_size=0; }\n  size_t size() const { return m_size; }\n  T* begin() { return m_vec; }\n  const T* begin() const { return m_vec; }\n  T* end() { return m_vec+m_size; }\n  const T* end() const { return m_vec+m_size; }\n\nprotected:\n  T* m_vec = nullptr;\n  size_t m_capacity = 0;\n  size_t m_size = 0;\n};\n\ntemplate &lt;typename T&gt;\nclass TakerQueue : public BaseQueue&lt;T&gt; {\n  /*\n   * A vector, but you have to use std::move\n   */\npublic:\n  TakerQueue(size_t initCapacity = 1) :  BaseQueue&lt;T&gt;(initCapacity) {\n    this-&gt;m_vec = (T*) malloc(sizeof(T)*(this-&gt;m_capacity));\n  }\n  void push_back(T&amp; t) {\n    if (unlikely(this-&gt;m_size &gt;= this-&gt;m_capacity)) {\n      this-&gt;m_capacity = this-&gt;m_capacity &lt;&lt; 1;\n      T* oldVec = this-&gt;m_vec;\n      this-&gt;m_vec = (T*) malloc(sizeof(T)*(this-&gt;m_capacity));\n      for (size_t i = 0; i &lt; this-&gt;m_size; i++) {\n        new (this-&gt;m_vec+i) T(std::move(oldVec[i]));\n      }\n      delete[] oldVec;\n    }\n    new (this-&gt;m_vec+this-&gt;m_size) T(std::move(t));\n    ++(this-&gt;m_size);\n  }\n};\n\n\ntemplate &lt;typename T&gt;\nclass ShallowQueue : public BaseQueue&lt;T&gt;{\n  //TODO: figure out the correct concept to use to guarantee T is trivially movable at compile time\n  /*\n   * A queue that instead of freeing and allocating memory constantly\n   * simply reuses the same memory overwriting the appropriate values.\n   *\n   * It's use case is to be filled, then iterated through, and then reset.\n   *\n   * Meant for usage with trivial classes, specifically structs as\n   * messages. The use of memcpy means I am not actually constructing\n   * an object in place, but just taking a shallow copy,\n   * and the use of realloc  in vectors is only be valid for a trivially movable\n   * object.\n   *\n   */\npublic:\n  ShallowQueue(size_t initCapacity = 1) : BaseQueue&lt;T&gt;(initCapacity) {\n    this-&gt;m_vec = (T*) malloc(sizeof(T)*(this-&gt;m_capacity));\n  }\n  void push_back(const T&amp; msg) {\n    if (unlikely(this-&gt;m_size &gt;= this-&gt;m_capacity)) {\n      this-&gt;m_capacity = this-&gt;m_capacity &lt;&lt; 1;\n      this-&gt;m_vec = (T*) realloc(this-&gt;m_vec, sizeof(T)*this-&gt;m_capacity);\n    }\n    memcpy(this-&gt;m_vec+this-&gt;m_size, &amp;msg, sizeof(T));\n    ++(this-&gt;m_size);\n  }\n};\n\ntemplate &lt;typename Queue&gt;\nclass BunchQueue {\n  /*\n   * Multi writer single reader.\n   *\n   * Instead of popping off individual messages the reader takes all of them\n   * at once. This works well if the architecture is focused on bunches.\n   * Also good memory wise because it means fewer allocations and frees and\n   * allows for adjacent memory access when reading through the messages.\n   * Drawback is that you have a relatively large memory footprint with 1\n   * vector just sitting around. Works best if you are not RAM bound and can\n   * expect fairly consistent bunch sizes.\n   */\npublic:\n  BunchQueue(size_t initCapacity = 1) :\n    m_queueA(initCapacity), m_queueB(initCapacity) {\n  }\n  void push_back(const typename Queue::value_type&amp; msg) {\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    auto&amp; q = getQueue();\n    q.push_back(msg);\n  }\n\n  void push_back(typename Queue::value_type&amp; msg) {\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    auto&amp; q = getQueue();\n    q.push_back(msg);\n  }\n\n  const Queue&amp; takeQueue() {\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    auto q = &amp;(getQueue());\n    m_whichQueue = !m_whichQueue;\n    getQueue().reset();\n    return *q;\n  }\n\n  bool empty() {\n    try {\n      std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    } catch (const std::system_error&amp; e) {\n      std::cout &lt;&lt; \"error locking BunchQueue mutex: \" &lt;&lt;  e.what() &lt;&lt; std::endl;\n      throw e;\n    }\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    return m_queueA.size() == 0 &amp;&amp; m_queueB.size() == 0;\n  }\n\nprivate:\n  bool m_whichQueue = true;\n  std::mutex m_mtx;\n  Queue m_queueA;\n  Queue m_queueB;\n  Queue&amp; getQueue() {\n    //Only for use in takeQueue, haven't considered general use for thread safety\n    return m_whichQueue ? m_queueA : m_queueB;\n  }\n};\n\ntemplate &lt;typename Msg&gt;\nusing MessageQueue = BunchQueue&lt;ShallowQueue&lt;Msg&gt;&gt;;\n\n} //namespace matan\n</code></pre>\n\n<p><strong>AsyncWorker.hh</strong> - Abstract class which is responsible for organizing condition variables and locking for worker thread.</p>\n\n<pre><code>#pragma once\n\n#include \"BunchQueue.hh\"\n#include &lt;thread&gt;\n#include &lt;atomic&gt;\n\nnamespace matan {\n\nclass AsyncWorker {\n  /*\n   * A class to allow for a process to contain a worker thread that follows\n   * a simple loop. The expected usage is for there to be some sort of queue\n   * like data structure that the owners write to, and the worker thread\n   * will run over each element performing some operation defined by doit.\n   *\n   * This class is capable of Multi writer, single reader (the internal thread).\n   * but the details of implementation will determine the reality of if you\n   * can take multiple writers.\n   */\npublic:\n  AsyncWorker() : m_worker(new std::thread([this]() { this-&gt;workerLoop();})) {}\n  virtual ~AsyncWorker() = 0;\n  AsyncWorker(const AsyncWorker&amp;) = delete;\n\nprotected:\n  void workerLoop() {\n      while (true) {\n        waitTillNeeded();\n        doit();\n        if (unlikely(m_bDone)) {\n          break;\n        }\n      }\n      doit();\n  }\n\n  /*\n   * doit is the function that we actual want the worker thread to perform.\n   * I assume that each doit call is enough to completely utilize all the\n   * contents on the worker threads \"queue.\"\n   */\n  virtual void doit() = 0;\n\n  /*\n   * Checks if there is any work for the worker thread to do, and if not puts\n   * the thread to sleep.\n   */\n  virtual bool shouldSleep() = 0;\n\n  /*\n   * Locked so that waitTillNeeded can't be in an indeterminate state. Either\n   * set beforehand so never wait, or set after already waiting so that the\n   * notify that follows won't be waster in between the boolean and the\n   * actual call to wait.\n   */\n  void done() {\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    m_bDone = true;\n    notifyWorker();\n    lock.unlock();\n    m_worker-&gt;join();\n  }\n\n  void notifyWorker() {\n    m_bRealWakeup = true;\n    m_shouldDoit.notify_one();\n  }\n\n  std::atomic_bool m_bDone{false};\n  std::atomic_bool m_bRealWakeup{false};\n  std::unique_ptr&lt;std::thread&gt; m_worker;\n  std::condition_variable m_shouldDoit;\n\nprivate:\n  void waitTillNeeded() {\n    try {\n      shouldSleep();\n    } catch (const std::system_error&amp; e) {\n      std::cout &lt;&lt; \"error shouldSleep\" &lt;&lt; std::endl;\n    }\n    std::unique_lock&lt;std::mutex&gt; lock(m_mtx);\n    if (!m_bDone &amp;&amp; shouldSleep()) {\n      m_bRealWakeup = false;\n      m_shouldDoit.wait(lock, [this] { return this-&gt;realWakeup(); });\n    }\n  }\n\n  //Prevent spurious system wake up calls\n  bool realWakeup() { return m_bRealWakeup; }\n\n  std::mutex m_mtx;\n};\n\ninline AsyncWorker::~AsyncWorker() {}\n\n} // matan\n</code></pre>\n\n<p><strong>Logger.hh</strong></p>\n\n<pre><code>#pragma once\n\n#include \"AsyncWorker.hh\"\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n/*\n * Has LogQueue, file to write to.\n */\nnamespace matan {\n\nclass Logger : public AsyncWorker {\n  /*\n   * Logger intended to prevent IO from blocking. Pushes the actual writing\n   * to disk onto a separate thread.\n   *\n   * Single writer. To make the interface similar to std::cout we need to allow\n   * separate calls to operator&lt;&lt;. For this to be multi writer we would need\n   * each operator&lt;&lt; call to contain a complete elements, as opposed to\n   * building it within m_buf and only later flushing it. (Please note this\n   * issue would exist even if we actually flushed on every call to flush()).\n   */\npublic:\n  Logger(const std::string&amp; ofname);\n  virtual ~Logger() = default;\n  Logger(const Logger&amp;) = delete;\n  Logger&amp; operator&lt;&lt;(const std::string&amp; str) {m_buf += str; return *this;}\n  Logger&amp; operator&lt;&lt;(const char* c) { m_buf += c; return *this; }\n  Logger&amp; operator&lt;&lt;(char c) { m_buf += c; return *this; }\n  Logger&amp; operator&lt;&lt;(Logger&amp; (*pf)(Logger&amp;)) {return pf(*this);}\n  void flush();\n  void close();\n\nprivate:\n  void doFlush();\n  virtual void doit();\n  virtual bool shouldSleep() { \n    try {\n      return m_contents.empty();\n    } catch (const std::system_error&amp; e) {\n      std::cout &lt;&lt; \"error checking m_contents.empty()\" &lt;&lt; std::endl;\n      throw e;\n    }\n    return m_contents.empty();\n  }\n\n  std::string m_buf;\n  std::ofstream m_ofstream;\n  BunchQueue&lt;TakerQueue&lt;std::string&gt;&gt; m_contents;\n  /*\n   * I'm making a guess here that one page in memory is 4KB and that it will\n   * be fastest if I can stay on one page (I need to pick a threshold\n   * somehow) and that most logs will be less than 1024 characters.\n   */\n  static constexpr std::size_t MAX_LEN = 3 * 1024;\n};\n\n} // matan\n\nnamespace std {\n\ninline matan::Logger&amp; endl(matan::Logger&amp; logger) {\n  logger &lt;&lt; '\\n';\n  logger.flush();\n  return logger;\n}\n\n}\n</code></pre>\n\n<p><strong>Logger.cc</strong></p>\n\n<pre><code>#include \"Logger.hh\"\n\n\nnamespace matan {\n\n\n/**********************    BunchLogger    *******************************/\n\n\nLogger::Logger(const std::string&amp; ofname) :\n    AsyncWorker(),\n    m_ofstream(ofname, std::ios::out) {}\n\nvoid Logger::close() {\n  doFlush();\n  done();\n  m_ofstream.close();\n}\n\nvoid Logger::flush() {\n  if (m_buf.size() &gt; MAX_LEN) {\n    doFlush();\n  }\n}\n\nvoid Logger::doFlush() {\n  m_contents.push_back(m_buf);\n  notifyWorker();\n  m_buf.clear();\n}\n\nvoid Logger::doit() {\n  for (const auto&amp; line : m_contents.takeQueue()) {\n    m_ofstream &lt;&lt; line;\n    m_ofstream.flush();\n  }\n}\n\n} // matan\n</code></pre>\n\n<p><strong>logger.cc</strong></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include \"Logger.hh\"\n\nusing namespace std::chrono;\n\nint main() {\n  std::string lyrics = \"Row, row, row your boat Gently down the stream, Merrily merrily, merrily, merrily Life is but a dream\";\n  std::istringstream iss(lyrics);\n  std::vector&lt;std::string&gt; lyric_vec(std::istream_iterator&lt;std::string&gt;{iss},\n                                     std::istream_iterator&lt;std::string&gt;{});\n  std::ofstream mystream(\"/tmp/logger1.log\", std::ios::out);\n  auto start1 = high_resolution_clock::now();\n  for (auto&amp; lyric : lyric_vec) {\n    mystream &lt;&lt; lyric &lt;&lt; std::endl;\n    mystream.flush();\n  }\n  mystream.close();\n  std::cout\n    &lt;&lt; duration_cast&lt;nanoseconds&gt;(high_resolution_clock::now()-start1).count()\n    &lt;&lt; std::endl;\n\n  matan::Logger bunchLogger(\"/tmp/logger2.log\");\n  auto start2 = high_resolution_clock::now();\n  for (auto&amp; lyric : lyric_vec) {\n    bunchLogger &lt;&lt; lyric &lt;&lt; std::endl;\n  }\n  std::cout\n    &lt;&lt; duration_cast&lt;nanoseconds&gt;(high_resolution_clock::now()-start2).count()\n    &lt;&lt; std::endl;\n\n  bunchLogger.close();\n  std::cout &lt;&lt; \"finish logger\" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p><strong>makefile</strong></p>\n\n<pre><code># to use Makefile variables later in the Makefile: $(&lt;var&gt;)\n#\n#  -g    adds debugging information to the executable file\n#  -Wall turns on most, but not all, compiler warnings\nCC = clang++\nCFLAGS = -g -Wall -std=c++1z -pthread\nBINDIR = bin\n\nbigmap: timsort.hh BigMap.hh bigmap.cc\n                $(CC) $(CFLAGS) bigmap.cc -o $(BINDIR)/bigmap\n\nthreadpool: ThreadPool.hh threadpool.cc\n                $(CC) $(CFLAGS) threadpool.cc -o $(BINDIR)/threadpool\n\nmsgq: BunchQueue.hh message_queue.cc\n                $(CC) $(CFLAGS) message_queue.cc -o $(BINDIR)/msgq\n\nlogger: Logger.o logger.cc\n                $(CC) $(CFLAGS) Logger.o logger.cc -o $(BINDIR)/logger\n\nLogger.o: BunchQueue.hh AsyncWorker.hh Logger.hh Logger.cc\n                $(CC) $(CFLAGS) -c Logger.cc\n\n# .PHONY is so that make doesn't confuse clean with a file\n.PHONY clean: \nclean:\n                rm -r $(BINDIR) &amp;&amp; mkdir $(BINDIR)\n                rm -f *.o *~\n</code></pre>\n"}, {"tags": ["c++", "string", "split", "user-input"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1500500314, "post_id": 45201434, "comment_id": 77370142, "body": "<code>cin &gt;&gt; str;</code> will receive the 1st word of your input only."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1500500426, "post_id": 45201434, "comment_id": 77370205, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/236129/most-elegant-way-to-split-a-string\" title=\"most elegant way to split a string\">stackoverflow.com/questions/236129/&hellip;</a>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500500607, "post_id": 45201434, "comment_id": 77370285, "body": "Have you tried <code>cin &gt;&gt; str_1 &gt;&gt; str_2 &gt;&gt; str_3 &gt;&gt; str_4 &gt;&gt; str_5;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 5636, "user_id": 5026014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S59Z0.jpg?s=128&g=1", "display_name": "Madmint", "link": "https://stackoverflow.com/users/5026014/madmint"}, "edited": false, "score": 0, "creation_date": 1601500390, "post_id": 45201520, "comment_id": 113431547, "body": "Hi, if using the third method, is there a way to tell the compiler how long each split string should be?"}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 1, "last_activity_date": 1500501334, "last_edit_date": 1500501334, "creation_date": 1500500496, "answer_id": 45201520, "question_id": 45201434, "link": "https://stackoverflow.com/questions/45201434/c-how-to-split-a-user-input-string-into-multiple-strings/45201520#45201520", "title": "C++ How to Split a User Input String Into Multiple Strings", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2\" rel=\"nofollow noreferrer\"><code>std::istream&amp; operator&gt;&gt;(std::istream&amp;, std::string)</code></a> already does that <em>splitting</em> for you. Inputs are separated from whitespaces.</p>\n\n<p>So writing</p>\n\n<pre><code>std::string str_1, str_2, str_3, str_4, str_5;\nstd::cin &gt;&gt; str_1 &gt;&gt; str_2 &gt;&gt; str_3 &gt;&gt; str_4 &gt;&gt; str_5;\n</code></pre>\n\n<p>will do what you want to achieve.</p>\n\n<hr>\n\n<p>If you really need to have the input stored into a single string 1st, you should use the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline()</code></a> function:</p>\n\n<pre><code>std::string str;\nstd::getline(std::cin,str);\n</code></pre>\n\n<p>and use a <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> to split up the individual values:</p>\n\n<pre><code>std::istringstream iss(str);\niss &gt;&gt; str_1 &gt;&gt; str_2 &gt;&gt; str_3 &gt;&gt; str_4 &gt;&gt; str_5;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 6510116, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f0db6c386db4f77e94dfc41501961556?s=128&d=identicon&r=PG&f=1", "display_name": "Saubhagya", "link": "https://stackoverflow.com/users/6510116/saubhagya"}, "is_accepted": false, "score": 1, "last_activity_date": 1500502265, "creation_date": 1500502265, "answer_id": 45201886, "question_id": 45201434, "link": "https://stackoverflow.com/questions/45201434/c-how-to-split-a-user-input-string-into-multiple-strings/45201886#45201886", "title": "C++ How to Split a User Input String Into Multiple Strings", "body": "<pre><code>#include &lt;stringstream&gt;\n\nint main()\n{\n    std::string MasterString = \"Super cali\\nfragelistic \\n expialadogis\\n then more words\\n hello world\";\n    std::stringstream iss(MasterString);\n\n    while(iss.good())\n    {\n        std::string SingleLine;\n        getline(iss,SingleLine,'\\n');\n        // Process SingleLine here\n    }\n}\n</code></pre>\n\n<p>something like this.</p>\n"}], "owner": {"reputation": 15, "user_id": 8333738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5KohdXgWPKY/AAAAAAAAAAI/AAAAAAAAABY/TJYEXpcuHCU/photo.jpg?sz=128", "display_name": "jelle66", "link": "https://stackoverflow.com/users/8333738/jelle66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3573, "favorite_count": 0, "accepted_answer_id": 45201520, "answer_count": 2, "score": 1, "last_activity_date": 1500502265, "creation_date": 1500500084, "last_edit_date": 1500501635, "question_id": 45201434, "link": "https://stackoverflow.com/questions/45201434/c-how-to-split-a-user-input-string-into-multiple-strings", "title": "C++ How to Split a User Input String Into Multiple Strings", "body": "<p>im trying to get a user input: \"aa bb cc dd ee\" etc. which is stored in a single string and put it in multiple strings string_1 \"aa\", string_2 \"bb\", string_3 \"cc\", string_4 \"dd\", string_5 \"ee\" etc.</p>\n\n<pre><code>string str;\ncin &gt;&gt; str; //user input\n\n//code to split the string\n\nstring str_1, str_2, str_3, str_4, str_5;\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500500523, "post_id": 45201350, "comment_id": 77370255, "body": "Off topic: I&#39;m not sure I&#39;d like this behaviour. How is the IDE supposed to know you are not simply trying to make an overload unrelated to an existing prototype?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500501971, "post_id": 45201350, "comment_id": 77370810, "body": "If Eclipse did this by default, I probably would have found it by now. Looking under Window-&gt;Preferences-&gt;C/C++-&gt;Editor-&gt;Content  Assist for an option to switch on I can&#39;t find anything that reads like it provides this functionality."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 2, "creation_date": 1500538426, "post_id": 45201350, "comment_id": 77384065, "body": "Eclipse supports this for Java (using Quick-fixes), but not for C/C++. Contributions welcome."}], "owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500499726, "creation_date": 1500499726, "question_id": 45201350, "link": "https://stackoverflow.com/questions/45201350/auto-update-function-definition", "title": "Auto update function definition", "body": "<p>Does Eclipse support automatic update of the function definition based on a function call we are trying to implement?</p>\n\n<p>Example:</p>\n\n<pre><code>My_func_abc(this_exists_in_definition, this_does_not);\n</code></pre>\n\n<p>So the definition would go from:</p>\n\n<pre><code>My_func_abc( Type_of_var this_exists_in_definition);\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>My_func_abc( Type_of_var this_exists_in_definition, Type_of_var this_does_not);\n</code></pre>\n"}, {"tags": ["c#", "c++", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 3433, "user_id": 720934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1OSE.jpg?s=128&g=1", "display_name": "hoodaticus", "link": "https://stackoverflow.com/users/720934/hoodaticus"}, "edited": false, "score": 0, "creation_date": 1500499663, "post_id": 45201203, "comment_id": 77369830, "body": "Once the code is already running it doesn&#39;t really matter if it&#39;s exe or library code - it&#39;s all the same ;)"}], "answers": [{"comments": [{"owner": {"reputation": 6089, "user_id": 465292, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4e49679fdc63e3bd4a8e645094ed597b?s=128&d=identicon&r=PG", "display_name": "newprint", "link": "https://stackoverflow.com/users/465292/newprint"}, "edited": false, "score": 0, "creation_date": 1500499695, "post_id": 45201268, "comment_id": 77369850, "body": "Problem is that <code>A_sol</code>(one that generates C++ .dll) is not an executable solution. it is purely a library solution."}, {"owner": {"reputation": 3433, "user_id": 720934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1OSE.jpg?s=128&g=1", "display_name": "hoodaticus", "link": "https://stackoverflow.com/users/720934/hoodaticus"}, "reply_to_user": {"reputation": 6089, "user_id": 465292, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4e49679fdc63e3bd4a8e645094ed597b?s=128&d=identicon&r=PG", "display_name": "newprint", "link": "https://stackoverflow.com/users/465292/newprint"}, "edited": false, "score": 0, "creation_date": 1500560253, "post_id": 45201268, "comment_id": 77401061, "body": "@newprint - if your library isn&#39;t used in any executables then there is no need for you to debug it, so that&#39;s a self-solving problem.  If it is used in an executable, then you can run that executable and debug it from your library solution using Attach to Process just as I said."}], "tags": [], "owner": {"reputation": 3433, "user_id": 720934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1OSE.jpg?s=128&g=1", "display_name": "hoodaticus", "link": "https://stackoverflow.com/users/720934/hoodaticus"}, "is_accepted": false, "score": 1, "last_activity_date": 1500499385, "creation_date": 1500499385, "answer_id": 45201268, "question_id": 45201203, "link": "https://stackoverflow.com/questions/45201203/debugging-c-solution-from-c-solution/45201268#45201268", "title": "Debugging C++ solution from C# solution", "body": "<ol>\n<li>Run the process you want to debug outside the debugger.</li>\n<li>In the other project, do Debug > Attach to Process > pick your process from the list.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1500500185, "creation_date": 1500500185, "answer_id": 45201447, "question_id": 45201203, "link": "https://stackoverflow.com/questions/45201203/debugging-c-solution-from-c-solution/45201447#45201447", "title": "Debugging C++ solution from C# solution", "body": "<p>How do I debug A_proj from B_proj ?</p>\n\n<p>If I understood you correctly, A_proj is a C++ project. Below I will give my advice based on this assumption.</p>\n\n<p>Note that it doesn't really matter from which project/solution you start debugging as long as you have the debug info (in other words, for C++ projects - if Visual Studio is able to pick up PDB's).</p>\n\n<p>So you may either run your executable from the solution, or, as suggested by @hoodaticus <a href=\"https://stackoverflow.com/a/45201268/5722863\">in his answer</a>, attach to the process which is already running. Whether your project is executable or not, you will be able to attach to it as long as:</p>\n\n<ol>\n<li>DLL is loaded into that process</li>\n<li>You have the PDB file that matches the DLL (generated during the build)</li>\n</ol>\n\n<p>So I'll just repeat the same advice</p>\n\n<blockquote>\n  <p>In the other project, do Debug > Attach to Process > pick your process\n  from the list.</p>\n</blockquote>\n\n<p>but I'll add that you have to pay attention to select \"Debug these code types -> Native\" for the process that contains your C++ dll. This part is often missed and confuses people, taking some time to discover (personally, I often get into it) <a href=\"https://i.stack.imgur.com/NvD9a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NvD9a.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 640, "user_id": 3587084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0441bdfba78eb6e89140ad5ceec07eb9?s=128&d=identicon&r=PG&f=1", "display_name": "Hasso votes to ReinstateMonica", "link": "https://stackoverflow.com/users/3587084/hasso-votes-to-reinstatemonica"}, "is_accepted": false, "score": 0, "last_activity_date": 1565110807, "creation_date": 1565110807, "answer_id": 57380852, "question_id": 45201203, "link": "https://stackoverflow.com/questions/45201203/debugging-c-solution-from-c-solution/57380852#57380852", "title": "Debugging C++ solution from C# solution", "body": "<p>To be able to debug by pressing F5 (rather than having to pick your process each time),</p>\n\n<ul>\n<li>Right-click the startup project (the EXE) and choose Properties</li>\n<li>In the Debug tab, select Enable native code debugging</li>\n</ul>\n\n<p>The above steps are from this tutorial: <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-debug-managed-and-native-code?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-debug-managed-and-native-code?view=vs-2019</a></p>\n"}], "owner": {"reputation": 6089, "user_id": 465292, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4e49679fdc63e3bd4a8e645094ed597b?s=128&d=identicon&r=PG", "display_name": "newprint", "link": "https://stackoverflow.com/users/465292/newprint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 45201447, "answer_count": 3, "score": 1, "last_activity_date": 1565110807, "creation_date": 1500499142, "last_edit_date": 1500499583, "question_id": 45201203, "link": "https://stackoverflow.com/questions/45201203/debugging-c-solution-from-c-solution", "title": "Debugging C++ solution from C# solution", "body": "<p>I have two VS solutions. Solution <code>A_sol</code> is C++/C# projects. Solution <code>B_sol</code> has project <code>B_proj</code> that is C# wrapper around C++ <code>*.dll</code> generated by <code>B_proj</code> project in <code>A_sol</code>. \nHow do I debug <code>A_proj</code> from <code>B_proj</code> ?<br>\nUPDATE: one of the projects in <code>B_sol</code> is an executable. </p>\n"}, {"tags": ["c++", "cuda", "dynamic-parallelism", "cuda-streams"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1500499521, "post_id": 45201062, "comment_id": 77369751, "body": "Regarding serialization, the serialization is due to the size of the kernels.  A kernel launch which fully occupies a GPU will fully occupy the GPU and prevent subsequent kernels from occupying the GPU.    Actually witnessing concurrent kernel execution is hard to do in practice.  Study the relevant CUDA sample code and you will see that that kernel is carefully crafted to make limited usage of GPU resources to enable concurrency.  If you want to see kernel concurrency, run the CUDA sample code, and learn how to design a code like it."}, {"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1500499987, "post_id": 45201062, "comment_id": 77369997, "body": "I see. For this example the design hardly made any sense but I understand what your explained and therefore I would not consider it a problem as the GPU is working at full occupancy or close to that. In my real example, the recursion keeps going as a binary tree so eventually I do produce small kernels that would benefit from concurrency.  I would then have to focus on the second problem, which is the cause for the 3X or more of slowdown. Might it be related to the same cause, i.e., the father occupying the GPU? But the work is N/3 on all three, so no reason to take more time in terms of work"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1500509374, "post_id": 45201062, "comment_id": 77372996, "body": "I&#39;m not suggesting I understand the report about dynamic parallelism extending the duration of the parent kernel that long.  I can&#39;t explain that at the moment.  The serialization is not surprising to me, but it seems to be (from my perspective) the lesser of the two issues.  In other words, I agree.  But I haven&#39;t investigated that other issue yet.  First step is to try to reproduce it and also study your code a bit."}, {"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1500604841, "post_id": 45201062, "comment_id": 77422297, "body": "thanks, It would be very useful if you get the chance to reproduce the code and post back your findings."}, {"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1500646753, "post_id": 45201062, "comment_id": 77446107, "body": "It seems that the &quot;cudaStreamCreateWithFlags(...)&quot; function is the one producing extra time. Launching with no streams at all (no creation as well) makes the CDP run practically as fast as the others at least in non-profiled time. The bad thing of this is that we eliminate any chance of concurrent kernels, which is a bad hit for an eventual recursive algorithm that at some point would produce small kernels. Now, if we launch the kernels from different thread-blocks, would that allow the chance of concurrency if utilization is low for one kernel?"}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "edited": false, "score": 1, "creation_date": 1500813344, "post_id": 45249869, "comment_id": 77493226, "body": "Many thanks. The time went down to be competitive with other methods, also removed the error checking to get a faster time. Now, should we accept this difference in time i.e., 3.18ms (CDP) vs 2.15ms (Others) as part of the CDP overhead ?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "edited": false, "score": 0, "creation_date": 1500851605, "post_id": 45249869, "comment_id": 77504297, "body": "When I tested on a GTX 960 using CUDA 9 EA or CUDA 7.5, the difference in time between the 3 cases was smaller than you are indicating, when I removed the extra error check that I mentioned.  I witnessed 0: 4.8ms, 1: 5.3 ms, 2: 4.7ms (no difference between CUDA 7.5 and CUDA 9 perf.)  On CUDA 8 with a Pascal Titan X, I witnessed 0: 1.08ms, 1: 1.35ms, 2: 1.08ms  Yes I expect child kernel launches will have some overhead, and for a problem that is as trivially simple as this one, it is clearly more efficient to <i>not</i> use CDP.  (All my tests were on linux.)"}, {"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "edited": false, "score": 1, "creation_date": 1500899874, "post_id": 45249869, "comment_id": 77523971, "body": "I see. Regarding the example, yes it was too simple. I will make a recursive CDP version of this problem and see if there is too much overhead or not, but this is out of the scope of this question. In that case I would make another one. Thanks again."}, {"owner": {"reputation": 2670, "user_id": 231742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d756a616899cb9dc1b1dd726ad13b8e2?s=128&d=identicon&r=PG", "display_name": "Andrei Pokrovsky", "link": "https://stackoverflow.com/users/231742/andrei-pokrovsky"}, "edited": false, "score": 0, "creation_date": 1504118201, "post_id": 45249869, "comment_id": 78894124, "body": "I noticed that for a small count the overhead is quite large (100us vs 26us on my p5000 card)"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 5, "last_activity_date": 1500688483, "creation_date": 1500688483, "answer_id": 45249869, "question_id": 45201062, "link": "https://stackoverflow.com/questions/45201062/cuda-dynamic-parallelism-bad-performance/45249869#45249869", "title": "CUDA Dynamic Parallelism, bad performance", "body": "<p>Calls into the device runtime are \"expensive\", just like calls into the host runtime are expensive.  In this case, it  seems that you are calling into the device runtime to create streams <strong>for every thread</strong>, even though this code only requires them for thread 0.</p>\n\n<p>By modifying your code to only request the stream creation for thread 0, we can produce timing parity between the case where we are using separate streams for the child kernel launch, and the case where we are not using separate streams for the child kernel launch:</p>\n\n<pre><code>$ cat t370.cu\n#include &lt;stdio.h&gt;\n#define BLOCKSIZE 512\n\n__global__ void kernel_parent(int *a, int n, int N);\n__global__ void kernel_simple(int *a, int n, int N, int offset);\n\n\n// N is the total array size\n// n is the worksize for a kernel (one third of N)\n__global__ void kernel_parent(int *a, int n, int N){\n    int tid = blockIdx.x * blockDim.x + threadIdx.x;\n    if(tid == 0){\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (n + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n#ifdef USE_STREAMS\n        cudaStream_t s1, s2;\n        cudaStreamCreateWithFlags(&amp;s1, cudaStreamNonBlocking);\n        cudaStreamCreateWithFlags(&amp;s2, cudaStreamNonBlocking);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (a, n, N, n);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s2 &gt;&gt;&gt; (a, n, N, 2*n);\n#else\n        kernel_simple&lt;&lt;&lt; grid, block &gt;&gt;&gt; (a, n, N, n);\n        kernel_simple&lt;&lt;&lt; grid, block &gt;&gt;&gt; (a, n, N, 2*n);\n#endif\n// these next 2 lines add noticeably to the overall timing\n        cudaError_t err = cudaGetLastError();\n        if (err != cudaSuccess) printf(\"oops1: %d\\n\", (int)err);\n    }\n\n    a[tid] += 1;\n}\n\n\n__global__ void kernel_simple(int *a, int n, int N, int offset){\n    int tid = blockIdx.x * blockDim.x + threadIdx.x;\n    int pos = tid + offset;\n    if(pos &lt; N){\n        a[pos] += 1;\n    }\n}\n\nint main(int argc, char **argv){\n    if(argc != 3){\n        fprintf(stderr, \"run as ./prog n method\\nn multiple of 32 eg: 1024, 1048576 (1024^2), 4194304 (2048^2), 16777216 (4096^2)\\nmethod:\\n0 (traditional)  \\n1 (dynamic parallelism)\\n2 (three kernels using unique streams)\\n\");\n        exit(EXIT_FAILURE);\n    }\n    int N = atoi(argv[1])*3;\n    int method = atoi(argv[2]);\n    // init array as 0\n    int *ah, *ad;\n    printf(\"genarray of 3*N = %i.......\", N); fflush(stdout);\n    ah = (int*)malloc(sizeof(int)*N);\n    for(int i=0; i&lt;N; ++i){\n        ah[i] = 0;\n    }\n    printf(\"done\\n\"); fflush(stdout);\n\n    // malloc and copy array to gpu\n    printf(\"cudaMemcpy:Host-&gt;Device..........\", N); fflush(stdout);\n    cudaMalloc(&amp;ad, sizeof(int)*N);\n    cudaMemcpy(ad, ah, sizeof(int)*N, cudaMemcpyHostToDevice);\n    printf(\"done\\n\"); fflush(stdout);\n\n    // kernel launch (timed)\n    cudaStream_t s1, s2, s3;\n    cudaStreamCreateWithFlags(&amp;s1, cudaStreamNonBlocking);\n    cudaStreamCreateWithFlags(&amp;s2, cudaStreamNonBlocking);\n    cudaStreamCreateWithFlags(&amp;s3, cudaStreamNonBlocking);\n    cudaEvent_t start, stop;\n    float rtime = 0.0f;\n    cudaEventCreate(&amp;start);\n    cudaEventCreate(&amp;stop);\n    printf(\"Kernel...........................\", N); fflush(stdout);\n    if(method == 0){\n        // CLASSIC KERNEL LAUNCH\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_simple&lt;&lt;&lt; grid, block &gt;&gt;&gt; (ad, N, N, 0);\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    else if(method == 1){\n        // DYNAMIC PARALLELISM\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N/3 + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_parent&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (ad, N/3, N);\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    else{\n        // THREE CONCURRENT KERNEL LAUNCHES USING STREAMS\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N/3 + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (ad, N/3, N, 0);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s2 &gt;&gt;&gt; (ad, N/3, N, N/3);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s3 &gt;&gt;&gt; (ad, N/3, N, 2*(N/3));\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    printf(\"done\\n\"); fflush(stdout);\n\n\n    printf(\"cudaMemcpy:Device-&gt;Host..........\", N); fflush(stdout);\n    cudaMemcpy(ah, ad, sizeof(int)*N, cudaMemcpyDeviceToHost);\n    printf(\"done\\n\"); fflush(stdout);\n\n    printf(\"checking result..................\"); fflush(stdout);\n    for(int i=0; i&lt;N; ++i){\n        if(ah[i] != 1){\n            fprintf(stderr, \"bad element: a[%i] = %i\\n\", i, ah[i]);\n            exit(EXIT_FAILURE);\n        }\n    }\n    printf(\"done\\n\"); fflush(stdout);\n    cudaEventSynchronize(stop);\n    cudaEventElapsedTime(&amp;rtime, start, stop);\n    printf(\"rtime: %f ms\\n\", rtime); fflush(stdout);\n    return EXIT_SUCCESS;\n}\n$ nvcc -arch=sm_52 -rdc=true -lcudadevrt -o t370 t370.cu\n$ ./t370 16777216 1\ngenarray of 3*N = 50331648.......done\ncudaMemcpy:Host-&gt;Device..........done\nKernel...........................done\ncudaMemcpy:Device-&gt;Host..........done\nchecking result..................done\nrtime: 6.925632 ms\n$ nvcc -arch=sm_52 -rdc=true -lcudadevrt -o t370 t370.cu -DUSE_STREAMS\n$ ./t370 16777216 1\ngenarray of 3*N = 50331648.......done\ncudaMemcpy:Host-&gt;Device..........done\nKernel...........................done\ncudaMemcpy:Device-&gt;Host..........done\nchecking result..................done\nrtime: 6.673568 ms\n$\n</code></pre>\n\n<p>Although not included in the test output above, according to my testing, this also brings the CUDA dynamic parallelism (CDP) case (<code>1</code>) into \"approximate parity\" with the non-CDP cases (<code>0</code>, <code>2</code>).  Note that we can shave about 1 ms (!) off the above time by forgoing the call to <code>cudaGetLastError()</code> in the parent kernel (which I added to your code).</p>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "edited": false, "score": 0, "creation_date": 1504187759, "post_id": 45969652, "comment_id": 78926042, "body": "Thanks. It seems that DP is competitive only when compared against a batch of kernel calls but not against one kernel call."}, {"owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "edited": false, "score": 0, "creation_date": 1506605303, "post_id": 45969652, "comment_id": 79895804, "body": "Tried with a Titan X (Pascal but not the Xp), and got === Single kernel launch === time: 0.007592 ms === 2x sequential kernel launch === time: 0.016331 ms === Nested kernel launch === time: 0.047563 ms"}], "tags": [], "owner": {"reputation": 2670, "user_id": 231742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d756a616899cb9dc1b1dd726ad13b8e2?s=128&d=identicon&r=PG", "display_name": "Andrei Pokrovsky", "link": "https://stackoverflow.com/users/231742/andrei-pokrovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1504126971, "creation_date": 1504126971, "answer_id": 45969652, "question_id": 45201062, "link": "https://stackoverflow.com/questions/45201062/cuda-dynamic-parallelism-bad-performance/45969652#45969652", "title": "CUDA Dynamic Parallelism, bad performance", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n\nusing thrust::host_vector;\nusing thrust::device_vector;\n\n#define BLOCKSIZE 512\n\n__global__ void child(int* a)\n{\n    if (threadIdx.x == 0 &amp;&amp; blockIdx.x == 0)\n        a[0]++;\n}\n\n__global__ void parent(int* a)\n{\n    if (threadIdx.x == 0 &amp;&amp; blockIdx.x == 0)\n        child&lt;&lt;&lt;gridDim, blockDim&gt;&gt;&gt;(a);\n}\n\n#define NBLOCKS 1024\n#define NTHREADS 1024\n#define BENCHCOUNT 1000\n\ntemplate&lt;typename Lambda&gt;\nvoid runBench(Lambda arg, int* rp, const char* name)\n{\n    // \"preheat\" the GPU\n    for (int i = 0; i &lt; 100; i++)\n        child&lt;&lt;&lt;dim3(NBLOCKS,1,1), dim3(NTHREADS,1,1)&gt;&gt;&gt;(rp);\n\n    cudaEvent_t start, stop;\n    float rtime = 0.0f;\n    cudaEventCreate(&amp;start);\n    cudaEventCreate(&amp;stop);\n\n    cudaEventRecord(start, 0);\n    for (int i = 0; i &lt; BENCHCOUNT; i++)\n        arg();\n    cudaEventRecord(stop, 0);\n    cudaEventSynchronize(stop);\n    cudaEventElapsedTime(&amp;rtime, start, stop);\n\n    printf(\"=== %s ===\\n\", name);\n    printf(\"time: %f ms\\n\", rtime/BENCHCOUNT); fflush(stdout);\n    cudaEventDestroy(start);\n    cudaEventDestroy(stop);\n    cudaDeviceSynchronize();\n}\n\nint main(int argc, char **argv)\n{\n    host_vector&lt;int&gt; hv(1);\n    hv[0] = 0xAABBCCDD;\n    device_vector&lt;int&gt; dv(1);\n    dv = hv;\n    int* rp = thrust::raw_pointer_cast(&amp;dv[0]);\n\n    auto benchFun = [&amp;](void) {\n        child&lt;&lt;&lt;dim3(NBLOCKS,1,1), dim3(NTHREADS,1,1)&gt;&gt;&gt;(rp); };\n    runBench(benchFun, rp, \"Single kernel launch\");\n\n    auto benchFun2 = [&amp;](void) {\n        for (int j = 0; j &lt; 2; j++)\n            child&lt;&lt;&lt;dim3(NBLOCKS,1,1), dim3(NTHREADS,1,1)&gt;&gt;&gt;(rp);\n    };\n    runBench(benchFun2, rp, \"2x sequential kernel launch\");\n\n    auto benchFunDP = [&amp;](void) {\n        parent&lt;&lt;&lt;dim3(NBLOCKS,1,1), dim3(NTHREADS,1,1)&gt;&gt;&gt;(rp); };\n    runBench(benchFunDP, rp, \"Nested kernel launch\");\n}\n</code></pre>\n\n<p>To build/run:</p>\n\n<ul>\n<li>Copy/paste code above to dpar.cu</li>\n<li>nvcc -arch=sm_52 -rdc=true -std=c++11 -lcudadevrt -o dpar  dpar.cu</li>\n<li>./dpar</li>\n</ul>\n\n<p>On my p5000 laptop it prints:</p>\n\n<p>=== Single kernel launch ===<br>\ntime: 0.014297 ms<br>\n=== 2x sequential kernel launch ===<br>\ntime: 0.030468 ms<br>\n=== Nested kernel launch ===<br>\ntime: 0.083820 ms     </p>\n\n<p>So the overhead is quite large.. looks like in my case 43 microseconds.</p>\n"}], "owner": {"reputation": 306, "user_id": 4412614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-1XFCaNAJ4J4/AAAAAAAAAAI/AAAAAAAAABc/CaKjA4aESlc/photo.jpg?sz=128", "display_name": "Cristobal Navarro", "link": "https://stackoverflow.com/users/4412614/cristobal-navarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3764, "favorite_count": 5, "accepted_answer_id": 45249869, "answer_count": 2, "score": 6, "last_activity_date": 1509061681, "creation_date": 1500498612, "last_edit_date": 1509061681, "question_id": 45201062, "link": "https://stackoverflow.com/questions/45201062/cuda-dynamic-parallelism-bad-performance", "title": "CUDA Dynamic Parallelism, bad performance", "body": "<p>We are having performance issues when using the CUDA Dynamic Parallelism. At this moment, CDP is performing at least 3X slower than a traditional approach.\nWe made the simplest reproducible code to show this issue, which is to increment the value of all elements of an array by +1. i.e., </p>\n\n<pre><code>a[0,0,0,0,0,0,0,.....,0] --&gt; kernel +1 --&gt; a[1,1,1,1,1,1,1,1,1]\n</code></pre>\n\n<p>The point of this simple example is just to see if CDP can perform as the others, or if there are serious overheads.</p>\n\n<p>The code is here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cuda.h&gt;\n#define BLOCKSIZE 512\n\n__global__ void kernel_parent(int *a, int n, int N);\n__global__ void kernel_simple(int *a, int n, int N, int offset);\n\n\n// N is the total array size\n// n is the worksize for a kernel (one third of N)\n__global__ void kernel_parent(int *a, int n, int N){\n    cudaStream_t s1, s2;\n    cudaStreamCreateWithFlags(&amp;s1, cudaStreamNonBlocking);\n    cudaStreamCreateWithFlags(&amp;s2, cudaStreamNonBlocking);\n\n    int tid = blockIdx.x * blockDim.x + threadIdx.x;\n    if(tid == 0){\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (n + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (a, n, N, n);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s2 &gt;&gt;&gt; (a, n, N, 2*n);\n    }\n\n    a[tid] += 1;\n}\n\n\n__global__ void kernel_simple(int *a, int n, int N, int offset){\n    int tid = blockIdx.x * blockDim.x + threadIdx.x;\n    int pos = tid + offset;\n    if(pos &lt; N){\n        a[pos] += 1;\n    }\n}\n\nint main(int argc, char **argv){\n    if(argc != 3){\n        fprintf(stderr, \"run as ./prog n method\\nn multiple of 32 eg: 1024, 1048576 (1024^2), 4194304 (2048^2), 16777216 (4096^2)\\nmethod:\\n0 (traditional)  \\n1 (dynamic parallelism)\\n2 (three kernels using unique streams)\\n\");\n        exit(EXIT_FAILURE);\n    }\n    int N = atoi(argv[1])*3;\n    int method = atoi(argv[2]);\n    // init array as 0\n    int *ah, *ad;\n    printf(\"genarray of 3*N = %i.......\", N); fflush(stdout);\n    ah = (int*)malloc(sizeof(int)*N);\n    for(int i=0; i&lt;N; ++i){\n        ah[i] = 0;\n    }\n    printf(\"done\\n\"); fflush(stdout);\n\n    // malloc and copy array to gpu\n    printf(\"cudaMemcpy:Host-&gt;Device..........\", N); fflush(stdout);\n    cudaMalloc(&amp;ad, sizeof(int)*N);\n    cudaMemcpy(ad, ah, sizeof(int)*N, cudaMemcpyHostToDevice);\n    printf(\"done\\n\"); fflush(stdout);\n\n    // kernel launch (timed)\n    cudaStream_t s1, s2, s3;\n    cudaStreamCreateWithFlags(&amp;s1, cudaStreamNonBlocking);\n    cudaStreamCreateWithFlags(&amp;s2, cudaStreamNonBlocking);\n    cudaStreamCreateWithFlags(&amp;s3, cudaStreamNonBlocking);\n    cudaEvent_t start, stop;\n    float rtime = 0.0f;\n    cudaEventCreate(&amp;start); \n    cudaEventCreate(&amp;stop);\n    printf(\"Kernel...........................\", N); fflush(stdout);\n    if(method == 0){\n        // CLASSIC KERNEL LAUNCH\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_simple&lt;&lt;&lt; grid, block &gt;&gt;&gt; (ad, N, N, 0);\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    else if(method == 1){\n        // DYNAMIC PARALLELISM\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N/3 + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_parent&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (ad, N/3, N);\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    else{\n        // THREE CONCURRENT KERNEL LAUNCHES USING STREAMS\n        dim3 block(BLOCKSIZE, 1, 1);\n        dim3 grid( (N/3 + BLOCKSIZE - 1)/BLOCKSIZE, 1, 1);\n        cudaEventRecord(start, 0);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s1 &gt;&gt;&gt; (ad, N/3, N, 0);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s2 &gt;&gt;&gt; (ad, N/3, N, N/3);\n        kernel_simple&lt;&lt;&lt; grid, block, 0, s3 &gt;&gt;&gt; (ad, N/3, N, 2*(N/3));\n        cudaDeviceSynchronize();\n        cudaEventRecord(stop, 0);\n    }\n    printf(\"done\\n\"); fflush(stdout);\n\n\n    printf(\"cudaMemcpy:Device-&gt;Host..........\", N); fflush(stdout);\n    cudaMemcpy(ah, ad, sizeof(int)*N, cudaMemcpyDeviceToHost);\n    printf(\"done\\n\"); fflush(stdout);\n\n    printf(\"checking result..................\"); fflush(stdout);\n    for(int i=0; i&lt;N; ++i){\n        if(ah[i] != 1){\n            fprintf(stderr, \"bad element: a[%i] = %i\\n\", i, ah[i]);\n            exit(EXIT_FAILURE);\n        }\n    }\n    printf(\"done\\n\"); fflush(stdout);\n    cudaEventSynchronize(stop);\n    cudaEventElapsedTime(&amp;rtime, start, stop);\n    printf(\"rtime: %f ms\\n\", rtime); fflush(stdout);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Can be compiled with</p>\n\n<pre><code>nvcc -arch=sm_35 -rdc=true -lineinfo -lcudadevrt -use_fast_math main.cu -o prog\n</code></pre>\n\n<p>This example can compute the result with 3 methods:</p>\n\n<ol>\n<li>Simple Kernel: Just a single classic kernel +1 pass on the array.</li>\n<li>Dynamic Parallelism: from main(), call a parent kernel which does +1 on the range [0,N/3), and also calls two child kernels. The first child does +1 in the range [N/3, 2*N/3), the second child in the range [2*N/3,N). Childs are launched using different streams so they can be concurrent.</li>\n<li>Three Streams from Host: This one just launches three non-blocking streams from main(), one for each third of the array.</li>\n</ol>\n\n<p>I get the following profile for method 0 (simple kernel):\n<a href=\"https://i.stack.imgur.com/sPvpP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sPvpP.png\" alt=\"Simple Kernel\"></a>\nThe following for method 1 (dynamic parallelism):\n<a href=\"https://i.stack.imgur.com/qpFIC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qpFIC.png\" alt=\"Dynamic Parallelism\"></a>\nAnd the following for method 2 (Three Streams from Host)\n<a href=\"https://i.stack.imgur.com/hdTj0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hdTj0.png\" alt=\"enter image description here\"></a>\nThe running times are like this:</p>\n\n<pre><code>\u279c  simple-cdp git:(master) \u2717 ./prog 16777216 0\ngenarray of 3*N = 50331648.......done\ncudaMemcpy:Host-&gt;Device..........done\nKernel...........................done\ncudaMemcpy:Device-&gt;Host..........done\nchecking result..................done\nrtime: 1.140928 ms\n\u279c  simple-cdp git:(master) \u2717 ./prog 16777216 1\ngenarray of 3*N = 50331648.......done\ncudaMemcpy:Host-&gt;Device..........done\nKernel...........................done\ncudaMemcpy:Device-&gt;Host..........done\nchecking result..................done\nrtime: 5.790048 ms\n\u279c  simple-cdp git:(master) \u2717 ./prog 16777216 2\ngenarray of 3*N = 50331648.......done\ncudaMemcpy:Host-&gt;Device..........done\nKernel...........................done\ncudaMemcpy:Device-&gt;Host..........done\nchecking result..................done\nrtime: 1.011936 ms\n</code></pre>\n\n<p><strong>The main problem, visible from the pictures, is that in the Dynamic Parallelism method the parent kernel is taking excessive amount of time to close after the two child kernels have finished, which is what is making it take 3X or 4X times more.</strong> Even when considering the worst case, if all three kernels (parent and two childs) run in serial, it should take much less. I.e., there is N/3 of work for each kernel, so the whole parent kernel should take approx 3 child kernels long, which is much less. <strong>Is there a way to solve this problem?</strong></p>\n\n<p>EDIT: The serialization phenomenon of the child kernels, as well as for method 2, have been explained by Robert Crovella in the comments (many thanks). The fact that the kernels did run in serial do not invalidate the problem described in bold text (not for now at least).</p>\n"}, {"tags": ["c++", "arrays", "sorting", "insertion-sort"], "comments": [{"owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 1, "creation_date": 1500498766, "post_id": 45201036, "comment_id": 77369383, "body": "What happens to value at <code>A[i+1]</code> when you execute <code>A[i+1]=A[i];</code>?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1500498787, "post_id": 45201036, "comment_id": 77369395, "body": "<b><i>But I am curious why this code isn&#39;t working</i></b> Why don&#39;t you use your debugger. I mean step through the code line by line looking at your variables."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500498829, "post_id": 45201036, "comment_id": 77369407, "body": "@Pontifex it&#39;s supposed to swap the values I have taken the pseudo code from Introduction to Algorithms CLRS"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500498879, "post_id": 45201036, "comment_id": 77369435, "body": "<b><i>it&#39;s supposed to swap the values</i></b> It certainly does not do that."}, {"owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500498894, "post_id": 45201036, "comment_id": 77369445, "body": "@Saubhagya Srivastava I know what it&#39;s supposed to do. What it does is making two copies of <code>A[i]</code> and none of <code>A[i+1]</code>."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500498939, "post_id": 45201036, "comment_id": 77369459, "body": "@drescherjm I have already tried that only error I can come up with is mention about I can&#39;t see any foreign characters (unrecognised by Dev c++ complier)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1500499007, "post_id": 45201036, "comment_id": 77369488, "body": "You probably did not look carefully enough to notice the bug with the code that was supposed to swap. I mean after this line <code>A[i+1]=A[i];</code> you would have had to inspect A[i+1] and A[i] in your debugger."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500499077, "post_id": 45201036, "comment_id": 77369521, "body": "@Pontifex  I have already tried to make a temp variable and swap the values but the error is still not resolved .."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500499112, "post_id": 45201036, "comment_id": 77369539, "body": "<b><i>I have already tried to make a temp variable and swap the values but the error is still not resolved</i></b> show your implementation of swap. Should be very easy to debug it now that you know what it is supposed to do and what to look for."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "edited": false, "score": 0, "creation_date": 1500499358, "post_id": 45201036, "comment_id": 77369666, "body": "<code>temp = A[i+1]; \t\t\tA[i+1]=A[i]; \t\t\tA[i]=temp;</code>@drescherjm"}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500499799, "post_id": 45201036, "comment_id": 77369901, "body": "@Pontifex is that right?"}, {"owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500499800, "post_id": 45201036, "comment_id": 77369904, "body": "Alright, I checked it. The array actually is sorted, output is correct <b>if you print it outside the loop.</b> You were trying to look into it before sorting had been finished."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500499906, "post_id": 45201036, "comment_id": 77369959, "body": "@Pontifex warning: array subscript is above array bounds [-Warray-bounds] if i print it  out of the for loop, what compiler are you using can you attach the code and link?"}, {"owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500499979, "post_id": 45201036, "comment_id": 77369994, "body": "... and how exactly are you doing that?"}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500500070, "post_id": 45201036, "comment_id": 77370032, "body": "@Pontifex [1] (<a href=\"http://coliru.stacked-crooked.com/a/d5e0e370095149f2\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/d5e0e370095149f2</a>) even without the temp part it&#39;s showing up same error"}, {"owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500500234, "post_id": 45201036, "comment_id": 77370098, "body": "You are reusing variable <code>j</code>, which now contains value <code>6</code>; even if it was a valid index, you would print just a single int. Loop through the array and <code>cout</code> every element."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500337, "post_id": 45201036, "comment_id": 77370153, "body": "<code>cout&lt;&lt;A[j];</code> is not how you print a char array. You need loop. A for loop would do .."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500500348, "post_id": 45201036, "comment_id": 77370160, "body": "@Pontifex  can you please attach the link to your code and how should I do that, shall I re-start the array in another for or try nesting the for?"}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500432, "post_id": 45201036, "comment_id": 77370207, "body": "@drescherjm since it&#39;s inside the first loop i thought the loop will iterate the value of &quot;j&quot;."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500521, "post_id": 45201036, "comment_id": 77370253, "body": "It&#39;s not in the first loop. I fixed the formatting and added the updated code to your question."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500574, "post_id": 45201036, "comment_id": 77370272, "body": "@drescherjm in the code i posted above it was inside the for loop why don&#39;t you show your code and fix this issue?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500665, "post_id": 45201036, "comment_id": 77370317, "body": "for(int var = 0; var &lt; length; var++) { cout &lt;&lt; A[var]; }"}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500500902, "post_id": 45201036, "comment_id": 77370420, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149651/discussion-between-saubhagya-srivastava-and-drescherjm\">continue this discussion in chat</a>."}, {"owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "reply_to_user": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "edited": false, "score": 0, "creation_date": 1500500973, "post_id": 45201036, "comment_id": 77370451, "body": "@Pontifex still wrong output ...<a href=\"http://coliru.stacked-crooked.com/a/f26018db391654c8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/f26018db391654c8</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": true, "score": 2, "last_activity_date": 1500501672, "creation_date": 1500501672, "answer_id": 45201775, "question_id": 45201036, "link": "https://stackoverflow.com/questions/45201036/insertion-sort-printing-wrong-output/45201775#45201775", "title": "Insertion Sort Printing Wrong Output", "body": "<p>Replace:</p>\n\n<pre><code>while(i&gt;0 &amp;&amp; A[i]&gt;key)\n</code></pre>\n\n<p>by:</p>\n\n<pre><code>while (i &gt;= 0 &amp;&amp; A[i] &gt; key)//notice the equality sign!\n</code></pre>\n\n<p>It was just checking till the 1st index while the zeroth index was not touched</p>\n\n<p>And you might want to print the contents of the array like this:</p>\n\n<pre><code>for(int i=0;i&lt;6;i++)\n    cout &lt;&lt; A[i]&lt;&lt;\" \";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1500501861, "creation_date": 1500501861, "answer_id": 45201821, "question_id": 45201036, "link": "https://stackoverflow.com/questions/45201036/insertion-sort-printing-wrong-output/45201821#45201821", "title": "Insertion Sort Printing Wrong Output", "body": "<p>For starters this loop</p>\n\n<pre><code> for (j = 2; j &lt; length; j++) {\n      ^^^^^\n</code></pre>\n\n<p>has an incorrect initial setting. It will not sort an array that has only two elements or the second element will be never swapped with the first element if the second element is less than the first element. </p>\n\n<p>It would be correctly to write the statement like</p>\n\n<pre><code> for (j = 1; j &lt; length; j++) {\n      ^^^^^\n</code></pre>\n\n<p>The inner loop</p>\n\n<pre><code>while (i &gt; 0 &amp;&amp; A[i] &gt; key) {\n</code></pre>\n\n<p>does not touch the element <code>A[0]</code> due to the condition <code>i &gt; 0</code>, Thus the subcondition <code>A[0] &gt; key</code> will be never checked.</p>\n\n<p>It is better instead of swapping each pair of elements that satisfy the condition just to copy elements and then to write the \"added\" element in the required position.</p>\n\n<p>The program can look the following way.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int a[] = { 31, 41, 59, 26, 41, 58 };\n    const size_t N = sizeof(a) / sizeof(*a);\n\n    for (int x : a) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n\n    for (size_t i = 1; i &lt; N; i++)\n    {\n        int value = a[i];\n        size_t j = i;\n\n        for (; j != 0 &amp;&amp; value &lt; a[j - 1]; --j)\n        {\n            a[j] = a[j - 1];\n        }\n\n        if (j != i) a[j] = value;\n    }\n\n    for (int x : a) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>31 41 59 26 41 58\n26 31 41 41 58 59\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 8150487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614355388877186/picture?type=large", "display_name": "Saubhagya Srivastava", "link": "https://stackoverflow.com/users/8150487/saubhagya-srivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 45201775, "answer_count": 2, "score": 0, "last_activity_date": 1500502115, "creation_date": 1500498525, "last_edit_date": 1500502115, "question_id": 45201036, "link": "https://stackoverflow.com/questions/45201036/insertion-sort-printing-wrong-output", "title": "Insertion Sort Printing Wrong Output", "body": "<p>I am trying to sort an array using the code below:-</p>\n\n<p>The expected output should be an array which is sorted in ascending order.</p>\n\n<p>But when i tried to run this code the output comes out to be 59 (6 times)</p>\n\n<p>I have tried debugging it added a watch at first array declaration and added a breakpoint on the first for loop it gives out the error to be :-</p>\n\n<pre><code>-&gt;-&gt;error-begin \nA syntax error in expression, near `A[6]={31,41,59,26,41,58}'.\n#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int A[6]={31,41,59,26,41,58};;\nint j;\nint length = 6;\n    for(j=2;j&lt;length;j++)\n    {\n        int key;\n        key = A[j];\n        int i;\n        i=j-1;\n        while(i&gt;0 &amp;&amp; A[i]&gt;key)\n        {\n            A[i+1]=A[i];\n            i=i-1;\n        }\n    A[i+1]=key;\ncout&lt;&lt;A[j];\n\n    }\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n{\n    int A[6] = { 31, 41, 59, 26, 41, 58 };\n    int temp;\n    int j;\n    int length = 6;\n    for (j = 2; j &lt; length; j++) {\n        int key;\n        key = A[j];\n        int i;\n        i = j - 1;\n        while (i &gt; 0 &amp;&amp; A[i] &gt; key) {\n            temp = A[i + 1];\n            A[i + 1] = A[i];\n            A[i] = temp;\n            i = i - 1;\n        }\n        A[i + 1] = key;\n    }\n    cout &lt;&lt; A[j];\n\n    return 0;\n}\n</code></pre>\n\n<p>It's working is supposed to be like a bubble sort I do know about  </p>\n\n<pre><code>std::sort(std::begin(A), std::end(A));\n</code></pre>\n\n<p>But I am curious why this code isn't working, I have already tried looking up wiki and other sites for similar code but i can't seem to find anything relevant.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user146043"}, "edited": false, "score": 1, "creation_date": 1500498712, "post_id": 45201034, "comment_id": 77369352, "body": "Have you considered stepping through the code with a debugger?"}, {"owner": {"reputation": 27, "user_id": 7826586, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Db_rZmewyzo/AAAAAAAAAAI/AAAAAAAAAyo/wlxi6kRrKec/photo.jpg?sz=128", "display_name": "ASHWIN KUMAR", "link": "https://stackoverflow.com/users/7826586/ashwin-kumar"}, "edited": false, "score": 0, "creation_date": 1500499011, "post_id": 45201034, "comment_id": 77369492, "body": "I compiled it directly in the cygwin"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1500499170, "post_id": 45201034, "comment_id": 77369569, "body": "&quot;... the compiler exits ...&quot; - No. The compiler does not exit, your <i>compiled</i> program does. The compilers job is finished long before you run into your problem."}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 2, "last_activity_date": 1500499012, "creation_date": 1500499012, "answer_id": 45201164, "question_id": 45201034, "link": "https://stackoverflow.com/questions/45201034/why-does-the-program-skip-cin-get-after-a-cin/45201164#45201164", "title": "Why does the program skip cin.get() after a cin?", "body": "<p>One issue here: after the last </p>\n\n<pre><code>cin &gt;&gt; direction;\n</code></pre>\n\n<p>there is an additional newline '\\n' in the stream buffer, which is read by the next </p>\n\n<pre><code>cin.get(str1,10);\n</code></pre>\n\n<p>with the \"illusion\" that it was not executed. In fact, <code>str1</code> will be just the empty string.</p>\n\n<p>The solution is to use </p>\n\n<pre><code>std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>just before <code>cin.get(str1,10)</code> to clear the stream (note that you must <code>#include &lt;limits&gt;</code>).</p>\n"}], "owner": {"reputation": 27, "user_id": 7826586, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Db_rZmewyzo/AAAAAAAAAAI/AAAAAAAAAyo/wlxi6kRrKec/photo.jpg?sz=128", "display_name": "ASHWIN KUMAR", "link": "https://stackoverflow.com/users/7826586/ashwin-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 45201164, "answer_count": 1, "score": -2, "last_activity_date": 1500499767, "creation_date": 1500498520, "last_edit_date": 1500499767, "question_id": 45201034, "link": "https://stackoverflow.com/questions/45201034/why-does-the-program-skip-cin-get-after-a-cin", "title": "Why does the program skip cin.get() after a cin?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    int x,y;\n   char direction ;\n    char str1[10];\n    cout&lt;&lt;\"Please enter the initial position of the bot\";\n    cin&gt;&gt;x&gt;&gt;y;\n    cout &lt;&lt; \"\\n\\n\";\n    cout &lt;&lt; \"enter initial direction in caps (F-forward,L-left,R-right)\";\n    cin &gt;&gt; direction;\n    //cout &lt;&lt; \"chosen direction :\" &lt;&lt; direction ;\n    cout &lt;&lt; \"\\n\\n\";\n    cout &lt;&lt; \"Enter the moves \\n(Without space comma seperated in caps eg-F,L,L\" ;\n    cin.get(str1,10);\n    cout &lt;&lt; \"entered moves :\" &lt;&lt; str1 &lt;&lt; endl ;\n\n    return 0;\n}\n</code></pre>\n\n<p>after execution :\n$ ./intern\nPlease enter the initial position of the bot1 2</p>\n\n<p>enter initial direction in caps (F-forward,L-left,R-right)f</p>\n\n<p>Enter the moves\n(Without space comma seperated in caps eg-F,L,Lentered moves :</p>\n\n<p>KARPAGAVALLI@Ashwin ~\n$</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1500497072, "post_id": 45200654, "comment_id": 77368544, "body": "By definition in the rules of the language, variables are passed by value or copy to a function, unless they are references."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1500497084, "post_id": 45200654, "comment_id": 77368551, "body": "You need to declare <code>x</code> as by reference. That is <code>int&amp;</code> instead of <code>int</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1500497131, "post_id": 45200654, "comment_id": 77368573, "body": "This isn&#39;t the problem, but do you really need the extra stuff that <code>std::endl</code> does? <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1500497167, "post_id": 45200654, "comment_id": 77368600, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2564873/how-do-i-use-reference-parameters-in-c\">How do I use Reference Parameters in C++?</a>"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1500497179, "post_id": 45200654, "comment_id": 77368604, "body": "Given that the <code>setToTen()</code> function receives an integer as argument, it can be invoked as <code>setToTen(4);</code>. In fact, this is how it is invoked in your code too, just that <code>4</code> is not hardcoded but it comes from a memory location usually known as a &quot;variable&quot;."}, {"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 0, "creation_date": 1500497233, "post_id": 45200654, "comment_id": 77368637, "body": "I would give you the tip to delete this question and read more into whatever you are following. Learn something about pointers and references in C++, if you then need help, ask."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1500497245, "post_id": 45200654, "comment_id": 77368641, "body": "Questions should not be downvoted because they are basic or beginner questions. This question states the expected behavior, the observed behavior and provides a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It is well asked, if lacking in research. Specially for a new user."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1500497264, "post_id": 45200654, "comment_id": 77368654, "body": "@PeteBecker good point. I looked it up and what you suggest is mentioned in <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#slio50-avoid-endl\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500497783, "post_id": 45200654, "comment_id": 77368899, "body": "@Thomas Matthews &quot;unless they are references&quot; - nitpick:  or pointers (well, the <i>pointer</i> is passed by value, but you can access what it <i>points to</i>)."}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 19, "user_id": 8320151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387c38018c8424f1c3ab52338c629eb2?s=128&d=identicon&r=PG&f=1", "display_name": "SilicoMar", "link": "https://stackoverflow.com/users/8320151/silicomar"}, "edited": false, "score": 1, "creation_date": 1500498108, "post_id": 45200695, "comment_id": 77369064, "body": "@marouanejaakik: If this answer satisfied you, please accept it."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1500497161, "creation_date": 1500497161, "answer_id": 45200695, "question_id": 45200654, "link": "https://stackoverflow.com/questions/45200654/why-cant-my-function-access-and-modify-the-variable-passed-to-it/45200695#45200695", "title": "Why can&#39;t my function access and modify the variable passed to it?", "body": "<p>In C++ arguments to functions are <em>passed by value</em>. This means that when you write</p>\n\n<pre><code>setToTen(a);\n</code></pre>\n\n<p>the parameter <code>int x</code> in <code>setToTen</code> is given a <em>copy</em> of the value stored in the variable <code>a</code>. In other words, you're not actually handing off the variable <code>a</code> into the <code>setToTen</code> function. Instead, you're giving a copy of that value to <code>setToTen</code>, so the changes made in that function affect the copy rather than the original.</p>\n\n<p>On the other hand, if you change <code>setToTen</code> so that it takes its parameter by reference, like this:</p>\n\n<pre><code>void setToTen(int&amp; x) {\n    x = 10;\n}\n</code></pre>\n\n<p>the story is different. Here, calling <code>setToTen(a)</code> essentially hands <em>the variable <code>a</code></em> into the function <code>setToTen</code>, rather than a copy of the value. That means that changes made to the parameter <code>x</code> in <code>setToTen</code> will change the variable <code>a</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1500497527, "creation_date": 1500497527, "answer_id": 45200780, "question_id": 45200654, "link": "https://stackoverflow.com/questions/45200654/why-cant-my-function-access-and-modify-the-variable-passed-to-it/45200780#45200780", "title": "Why can&#39;t my function access and modify the variable passed to it?", "body": "<p>Your code requests a <em>copy</em> of <code>x</code> by having the signature <code>void setToTen(int x)</code>.</p>\n\n<p>Being able to take things by <em>copy</em> means that reasoning about the behavior of a function is far easier.  This is true both for you, and for the compiler.</p>\n\n<p>For example, imagine this:</p>\n\n<pre><code>int increase_some( int x, int y, int z ) {\n  for (int i = 0; i &lt; y; ++i )\n    x+=z;\n  return x;\n}\n</code></pre>\n\n<p>because <code>x</code> <code>y</code> and <code>z</code> are copies, you can reason about what this does.  If they where references to the values \"outside\" of <code>increase_some</code>, the bit where you <code>x+=z</code> could change <code>y</code> or <code>z</code> and things could get crazy.</p>\n\n<p>But because we know they are copies, we can say <code>increase_some</code> returns <code>x</code> if <code>y&lt;=0</code>, and otherwise returns <code>x+y*z</code>.</p>\n\n<p>Which means that the optimizer could change it to exactly that:</p>\n\n<pre><code>int increase_some( int x, int y, int z ) {\n  if (y&lt;=0) return x;\n  return x + y*z;\n}\n</code></pre>\n\n<p>and generate that output.</p>\n\n<p>This is a toy example, but we took a complex function and turned it into a simple one.  Real optimizers do this all the time with pieces of your complex function.</p>\n\n<p>Going one step further, by taking things by immutable value, and never touching global state, we can treat your code as \"functional\", only depending on its arguments.  Which means the compiler can take repeated calls to a function and reduce them to one call.</p>\n\n<p>This is so valuable that compilers will transform code that doesn't have immutable copies of primitive data into code that does before trying to optimize -- this is known as static single assignment form.</p>\n\n<p>In theory, a complex program with lots of functions taking things by reference could be optimized this same way, and nothing be lost.  But in practice that gets hard, and it is <em>really easy</em> to accidentally screw it up.</p>\n\n<p>That is the other side; making it easier to reason about by people.</p>\n\n<p>And all you have to embrace is the idea of taking arguments by value.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1500498833, "creation_date": 1500498833, "answer_id": 45201109, "question_id": 45200654, "link": "https://stackoverflow.com/questions/45200654/why-cant-my-function-access-and-modify-the-variable-passed-to-it/45201109#45201109", "title": "Why can&#39;t my function access and modify the variable passed to it?", "body": "<p>Function parameters are function local variables that are not alive after exiting function.</p>\n\n<p>You can imagine the function definition and its call</p>\n\n<pre><code>int a = 4;\nsetToTen(a);\n\n//...\n\nvoid setToTen(int x) { x = 10; }\n</code></pre>\n\n<p>the following way</p>\n\n<pre><code>int a = 4;\nsetToTen(a);\n\n//...\n\nvoid setToTen( /* int x */ ) { int x = a; x = 10; }\n</code></pre>\n\n<p>As it is seen within the function there is declared a local variable <code>x</code> which is initialized by the argument <code>a</code>. Any changes of the local variable <code>x</code> do not influence on the original argument <code>a</code>.</p>\n\n<p>If you want to change the original variable itself you should pass it by reference that is the function will deal with a reference to the variable. For example</p>\n\n<pre><code>void setToTen(int &amp;x) { x = 10; }\n</code></pre>\n\n<p>In this case you can imagine the function definition and its call the following way</p>\n\n<pre><code>int a = 4;\nsetToTen(a);\n\n//...\n\nvoid setToTen( /* int x */ ) { int &amp;x = a; x = 10; }\n</code></pre>\n\n<p>As you see the reference <code>x</code> is as usual local. But it references the original argument <code>a</code>. In this case the argument will be changed through the local reference.</p>\n\n<p>Another way is to declare the parameter as pointer. For example</p>\n\n<pre><code>void setToTen(int *x) { *x = 10; }\n</code></pre>\n\n<p>In this case you have to pass the original argument indirectly by its address.</p>\n\n<pre><code>int a = 4;\nsetToTen( &amp;a );\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8320151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387c38018c8424f1c3ab52338c629eb2?s=128&d=identicon&r=PG&f=1", "display_name": "SilicoMar", "link": "https://stackoverflow.com/users/8320151/silicomar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1500498833, "creation_date": 1500496965, "last_edit_date": 1500498231, "question_id": 45200654, "link": "https://stackoverflow.com/questions/45200654/why-cant-my-function-access-and-modify-the-variable-passed-to-it", "title": "Why can&#39;t my function access and modify the variable passed to it?", "body": "<p>i have written this little program to explain my point and my variable a remains unchanged it prints 4. I later learned that I need to use pointers or references; why is that?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid setToTen(int x) { x = 10; }\n\nint main(){  \n    int a = 4;\n    setToTen(a);\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1500497107, "post_id": 45200642, "comment_id": 77368565, "body": "Probably just use a <code>std::vector&lt;item&gt;</code>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500497354, "post_id": 45200642, "comment_id": 77368696, "body": "You should probably not return copies of vector... Simply store everything in <code>std::vector&lt;item&gt;</code> as mentioned by @Justin, <code>get_all_items()</code> returns a <code>(const) std::vector&lt;item&gt;&amp;</code> and for the various part you can just create custom iterators that iterate over items and &quot;sub&quot;-vectors, this way you never have to create vector when you simply need to read something..."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1500498459, "post_id": 45200642, "comment_id": 77369221, "body": "what does <code>get_all_parts_price()</code> want to return? The sum of all prices of all parts, or a list of prices and parts?"}, {"owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1500498533, "post_id": 45200642, "comment_id": 77369257, "body": "@RichardHodges  list of prices of all the parts present in all the items .. basically all the value of parts_prices."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1500498599, "post_id": 45200642, "comment_id": 77369288, "body": "Why is color a vector?  Why do items have both parts and their price?  Why does items return a vector of prices, when each item has a vector of prices?  What is item, and what does it represent in comparison to parts?  You are doing OO design and asking for help, without describing what the objects <i>are</i>.  Why are parts not items, what distinguishes them, and why do parts exist?"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1500635852, "post_id": 45200642, "comment_id": 77438105, "body": "The longer I read your question and your comment, the less I understand. I think you <b>seriously</b> want to step back and A) think hard about your domain, the objects, ... B) improve your question. You can&#39;t even <i>communicate</i> your model. That is a symptom of that model being overly complicated/out of place/..."}], "answers": [{"comments": [{"owner": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "edited": false, "score": 0, "creation_date": 1500580517, "post_id": 45207410, "comment_id": 77414331, "body": "How coincidental! Here&#39;s an example of a domain model I just did for another question similar to this one in the sense that patterns are probably not needed! <a href=\"https://stackoverflow.com/a/45224011/1168342\">stackoverflow.com/a/45224011/1168342</a>"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 7817, "user_id": 1168342, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/122c9c6633aafccdd080dd3a2e449114?s=128&d=identicon&r=PG&f=1", "display_name": "Fuhrmanator", "link": "https://stackoverflow.com/users/1168342/fuhrmanator"}, "edited": false, "score": 0, "creation_date": 1500619006, "post_id": 45207410, "comment_id": 77426840, "body": "Nice, even with UML ;-)"}], "tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1500533825, "creation_date": 1500533825, "answer_id": 45207410, "question_id": 45200642, "link": "https://stackoverflow.com/questions/45200642/what-design-pattern-to-use-for-collection-of-items/45207410#45207410", "title": "What design pattern to use for collection of items?", "body": "<p>It is hard to tell you how to \"design\" your application based on your input - and I think you are focusing on the wrong aspect here. Your item struct contains vectors. That implies <strong>plural</strong>. But still, the class is called <code>item</code>.</p>\n\n<p>In that sense: don't think about patterns here. Instead, step back and have a much closer look at the \"real world things\" you intend to model. You see, the core point of objects and classes is to built a <em>model</em> of the <em>domain</em> you are dealing with. </p>\n\n<p>So a non-answer here: carefully look into the \"real-world\" relation that your objects have, and then <em>focus</em> on creating a OO model that is helpful  to do work flows you intend to implement. </p>\n"}], "owner": {"reputation": 111, "user_id": 7673962, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ffd82714b9275f7a814c3f7f221e6c37?s=128&d=identicon&r=PG&f=1", "display_name": "vanta mula", "link": "https://stackoverflow.com/users/7673962/vanta-mula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500635736, "creation_date": 1500496950, "last_edit_date": 1500635736, "question_id": 45200642, "link": "https://stackoverflow.com/questions/45200642/what-design-pattern-to-use-for-collection-of-items", "title": "What design pattern to use for collection of items?", "body": "<p>I am trying to make this example as natural as possible to make it simple. </p>\n\n<p>Lets say I have groups of items. eg item1, item2, item3, item4 etc.</p>\n\n<p>Currently <code>item</code> is represented by struct: </p>\n\n<pre><code>// only contains data\nstruct item{\n  string name;\n  std::vector&lt;string&gt; parts_name;\n  std::vector&lt;double&gt; parts_price;\n  std::vector&lt;string&gt; item_color;\n  ...\n};\n</code></pre>\n\n<p>itemx item1, item2...</p>\n\n<p>Then I have class called <code>items</code></p>\n\n<pre><code>class items{\n  public:\n  // return name of all items\n  vector&lt;string&gt; get_all_item();\n\n  // return price of all parts \n  vector&lt;double&gt; get_all_parts_price();  \n\n private:\n  // hold vector of item\n  vector&lt;shared_ptr&lt;item&gt;&gt; list_of_items;\n\n  // name of item and its parts price\n  // eg: &lt;item_1_part_1, $1.3&gt;\n  // eg: &lt;item_1_part_2, $2.3&gt;\n  // eg: &lt;item_2_part_1, $4.3&gt;\n  map&lt;string, double&gt;  parts_prices;\n};\n</code></pre>\n\n<p>The problem with my current items class is that it is growing really huge, \nas feature of item increases.</p>\n\n<p>My solution: make struct item contain function which distributes load \nto struct item from class items. </p>\n\n<p>Is there any other better way or any design pattern that is meant for this kind of problem?</p>\n"}, {"tags": ["c++", "qt", "enums", "namespaces"], "comments": [{"owner": {"reputation": 330, "user_id": 7897377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGGai.jpg?s=128&g=1", "display_name": "Cerulean Chelonii ", "link": "https://stackoverflow.com/users/7897377/cerulean-chelonii"}, "edited": false, "score": 0, "creation_date": 1500496233, "post_id": 45200421, "comment_id": 77368073, "body": "Change <code>enum class Operation</code> to <code>enum Operation</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 330, "user_id": 7897377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGGai.jpg?s=128&g=1", "display_name": "Cerulean Chelonii ", "link": "https://stackoverflow.com/users/7897377/cerulean-chelonii"}, "edited": false, "score": 6, "creation_date": 1500496273, "post_id": 45200421, "comment_id": 77368093, "body": "@CeruleanChelonii That is a bad suggestion."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 1, "creation_date": 1500496541, "post_id": 45200421, "comment_id": 77368245, "body": "Are you compiling with C++11? <code>enum class</code> was added in C++11. Use <code>-std=c++11</code> as compiler option if you are using g++ or clang."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1500501881, "post_id": 45201081, "comment_id": 77370774, "body": "Thank you so much for a quick response!"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1500501938, "post_id": 45201081, "comment_id": 77370801, "body": "I got a warning &quot;scoped enums only available with -std=c++11 or -std=g++11 [enabled by default]&quot;"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1500502023, "post_id": 45201081, "comment_id": 77370831, "body": "I assume &quot;[enabled by default]&quot; means that i am already using -std=c++11 flag. Sorry about three comments instead of one but i did not realize that pressing enter posts the message instead of adding new line."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1500537305, "post_id": 45201081, "comment_id": 77383271, "body": "According to <a href=\"https://stackoverflow.com/a/20714141/8113019\">this post</a> &quot;enabled by default&quot; comes from QT-Creator and means something else."}], "tags": [], "owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "is_accepted": true, "score": 0, "last_activity_date": 1500498667, "creation_date": 1500498667, "answer_id": 45201081, "question_id": 45200421, "link": "https://stackoverflow.com/questions/45200421/enum-class-not-a-class-or-namespace/45201081#45201081", "title": "Enum class not a class or namespace", "body": "<p>If you are compiling with gcc up to 5.4, then you have to use compiler option <code>-std=c++11</code><br>\nIf you are using gcc 6.1 or higher, then you don't need that.</p>\n\n<p>With gcc 5.4 the error message says that scoped enums are available only when compiling with c++11 option. Scoped enums was added to c++ with C++11.</p>\n\n<pre><code>&lt;source&gt;:2:1: warning: scoped enums only available with -std=c++11 or -std=gnu++11\n enum class Operation\n ^\n&lt;source&gt;: In function 'int main()':\n&lt;source&gt;:16:14: error: 'Operation' is not a class or namespace\n  operation = Operation::ADD;\n              ^\nCompiler exited with result code 1\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 45201081, "answer_count": 1, "score": -2, "last_activity_date": 1500498667, "creation_date": 1500496131, "question_id": 45200421, "link": "https://stackoverflow.com/questions/45200421/enum-class-not-a-class-or-namespace", "title": "Enum class not a class or namespace", "body": "<p>I get \"'Operation' is not a class or namespace\" (mainwindow.cpp file)in every line I use Operation::ADD, Operation::SUBTRACT, Operation::MULTIPLY or Operation::DIVIDE.</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.setWindowTitle(\"Calculator\");\n    w.resize(300, 475);\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>operationenum.h:</p>\n\n<pre><code>#ifndef OPERATIONENUM_H\n#define OPERATIONENUM_H\n\nenum class Operation\n{\n    ADD,\n    SUBTRACT,\n    MULTIPLY,\n    DIVIDE,\n    MODULO\n};\n\n#endif // OPERATIONENUM_H\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QLabel&gt;\n#include \"operationenum.h\"\n\nnamespace Ui {\nclass MainWindow;\n}\n\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    QLabel* text;\n    void cancel();\n    void plusMinusClicked();\n    void modulo();\n    void add();\n    void subtract();\n    void multiply();\n    void divide();\n    void equals();\n    void dotBtnClicked();\n    void _0BtnClicked();\n    void _1BtnClicked();\n    void _2BtnClicked();\n    void _3BtnClicked();\n    void _4BtnClicked();\n    void _5BtnClicked();\n    void _6BtnClicked();\n    void _7BtnClicked();\n    void _8BtnClicked();\n    void _9BtnClicked();\n\n    long double number1;\n    long double number2;\n    Operation operation;\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QPushButton&gt;\n#include &lt;string&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    text = new QLabel(\"42\", this);\n    // Operation buttons.\n    QPushButton* addBtn = new QPushButton(\"+\", this);\n    QPushButton* subtractBtn = new QPushButton(\"-\", this);\n    QPushButton* multiplyBtn = new QPushButton(\"x\", this);\n    QPushButton* divideBtn = new QPushButton(\"\u00f7\", this);\n    QPushButton* equalsBtn = new QPushButton(\"=\", this);\n    QPushButton* cancelBtn = new QPushButton(\"C\", this);\n    QPushButton* plusMinusBtn = new QPushButton(\"\u00b1\", this);\n    QPushButton* moduloBtn = new QPushButton(\"%\", this);\n    // Digit buttons.\n    QPushButton* dotBtn = new QPushButton(\".\", this);\n    QPushButton* _0Btn = new QPushButton(\"0\", this);\n    QPushButton* _1Btn = new QPushButton(\"1\", this);\n    QPushButton* _2Btn = new QPushButton(\"2\", this);\n    QPushButton* _3Btn = new QPushButton(\"3\", this);\n    QPushButton* _4Btn = new QPushButton(\"4\", this);\n    QPushButton* _5Btn = new QPushButton(\"5\", this);\n    QPushButton* _6Btn = new QPushButton(\"6\", this);\n    QPushButton* _7Btn = new QPushButton(\"7\", this);\n    QPushButton* _8Btn = new QPushButton(\"8\", this);\n    QPushButton* _9Btn = new QPushButton(\"9\", this);\n\n    text -&gt; setGeometry(0, 0, 300, 100);\n    cancelBtn -&gt; setGeometry(0, 100, 75, 75);\n    plusMinusBtn -&gt; setGeometry(75, 100, 75, 75);\n    moduloBtn -&gt; setGeometry(150, 100, 75, 75);\n    divideBtn -&gt; setGeometry(225, 100, 75, 75);\n    _7Btn -&gt; setGeometry(0, 175, 75, 75);\n    _8Btn -&gt; setGeometry(75, 175, 75, 75);\n    _9Btn -&gt; setGeometry(150, 175, 75, 75);\n    multiplyBtn -&gt; setGeometry(225, 175, 75, 75);\n    _4Btn -&gt; setGeometry(0, 250, 75, 75);\n    _5Btn -&gt; setGeometry(75, 250, 75, 75);\n    _6Btn -&gt; setGeometry(150, 250, 75, 75);\n    subtractBtn -&gt; setGeometry(225, 250, 75, 75);\n    _1Btn -&gt; setGeometry(0, 325, 75, 75);\n    _2Btn -&gt; setGeometry(75, 325, 75, 75);\n    _3Btn -&gt; setGeometry(150, 325, 75, 75);\n    addBtn -&gt; setGeometry(225, 325, 75, 75);\n    _0Btn -&gt; setGeometry(0, 400, 150, 75);\n    dotBtn -&gt; setGeometry(150, 400, 75, 75);\n    equalsBtn -&gt; setGeometry(225, 400, 75, 75);\n\n    connect(cancelBtn, &amp;QPushButton::clicked, this, &amp;MainWindow::cancel);\n    connect(_0Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_0BtnClicked);\n    connect(_1Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_1BtnClicked);\n    connect(_2Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_2BtnClicked);\n    connect(_3Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_3BtnClicked);\n    connect(_4Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_4BtnClicked);\n    connect(_5Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_5BtnClicked);\n    connect(_6Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_6BtnClicked);\n    connect(_7Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_7BtnClicked);\n    connect(_8Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_8BtnClicked);\n    connect(_9Btn, &amp;QPushButton::clicked, this, &amp;MainWindow::_9BtnClicked);\n    connect(dotBtn, &amp;QPushButton::clicked, this, &amp;MainWindow::dotBtnClicked);\n    connect(plusMinusBtn, &amp;QPushButton::clicked, this, &amp;MainWindow::plusMinusClicked);\n\n    operation = Operation::ADD;\n    number1 = 0;\n    number2 = 0;\n}\n\nvoid MainWindow::cancel()\n{\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::plusMinusClicked()\n{\n    if((text -&gt; text().toUtf8()).at(0) != '-')\n    {\n        text -&gt; setText(\"-\" + text -&gt; text().toUtf8());\n    }\n    else\n    {\n        text -&gt; setText(text -&gt; text().remove(0, 1));\n    }\n}\n\nvoid MainWindow::add()\n{\n    number2 = (text -&gt; text()).toDouble();\n    if(operation == Operation::ADD)\n    {\n        number1 += number2;\n    }\n    else if(operation == Operation::SUBTRACT)\n    {\n        number1 -= number2;\n    }\n    else if(operation == Operation::MULTIPLY)\n    {\n        number1 *= number2;\n    }\n    else if(operation == Operation::DIVIDE)\n    {\n        number1 /= number2;\n    }\n    else if(operation == Operation::MODULO)\n    {\n        number1 %= number2;\n    }\n    operation = Operation::ADD;\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::subtract()\n{\n    number2 = (text -&gt; text()).toDouble();\n    if(operation == Operation::ADD)\n    {\n        number1 += number2;\n    }\n    else if(operation == Operation::SUBTRACT)\n    {\n        number1 -= number2;\n    }\n    else if(operation == Operation::MULTIPLY)\n    {\n        number1 *= number2;\n    }\n    else if(operation == Operation::DIVIDE)\n    {\n        number1 /= number2;\n    }\n    else if(operation == Operation::MODULO)\n    {\n        number1 %= number2;\n    }\n    operation = Operation::SUBTRACT;\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::multiply()\n{\n    number2 = (text -&gt; text()).toDouble();\n    if(operation == Operation::ADD)\n    {\n        number1 += number2;\n    }\n    else if(operation == Operation::SUBTRACT)\n    {\n        number1 -= number2;\n    }\n    else if(operation == Operation::MULTIPLY)\n    {\n        number1 *= number2;\n    }\n    else if(operation == Operation::DIVIDE)\n    {\n        number1 /= number2;\n    }\n    else if(operation == Operation::MODULO)\n    {\n        number1 %= number2;\n    }\n    operation = Operation::MULTIPLY;\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::divide()\n{\n    number2 = (text -&gt; text()).toDouble();\n    if(operation == Operation::ADD)\n    {\n        number1 += number2;\n    }\n    else if(operation == Operation::SUBTRACT)\n    {\n        number1 -= number2;\n    }\n    else if(operation == Operation::MULTIPLY)\n    {\n        number1 *= number2;\n    }\n    else if(operation == Operation::DIVIDE)\n    {\n        number1 /= number2;\n    }\n    else if(operation == Operation::MODULO)\n    {\n        number1 %= number2;\n    }\n    operation = Operation::DIVIDE;\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::modulo()\n{\n    number2 = (text -&gt; text()).toDouble();\n    if(operation == Operation::ADD)\n    {\n        number1 += number2;\n    }\n    else if(operation == Operation::SUBTRACT)\n    {\n        number1 -= number2;\n    }\n    else if(operation == Operation::MULTIPLY)\n    {\n        number1 *= number2;\n    }\n    else if(operation == Operation::DIVIDE)\n    {\n        number1 /= number2;\n    }\n    else if(operation == Operation::MODULO)\n    {\n        number1 %= number2;\n    }\n    operation = Operation::MODULO;\n    text -&gt; setText(\"\");\n}\n\nvoid MainWindow::equals()\n{\n    text -&gt; setText(number(number1));\n}\n\nvoid MainWindow::_0BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"0\");\n}\n\nvoid MainWindow::_1BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"1\");\n}\n\nvoid MainWindow::_2BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"2\");\n}\n\nvoid MainWindow::_3BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"3\");\n}\n\nvoid MainWindow::_4BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"4\");\n}\n\nvoid MainWindow::_5BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"5\");\n}\n\nvoid MainWindow::_6BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"6\");\n}\n\nvoid MainWindow::_7BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"7\");\n}\n\nvoid MainWindow::_8BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"8\");\n}\n\nvoid MainWindow::_9BtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \"9\");\n}\n\nvoid MainWindow::dotBtnClicked()\n{\n    text -&gt; setText(text -&gt; text().toUtf8() + \".\");\n}\n\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n"}, {"tags": ["c++", "simulation", "physics"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1500495551, "post_id": 45200210, "comment_id": 77367672, "body": "That is a common when performing floating-point calculations"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1500495567, "post_id": 45200210, "comment_id": 77367677, "body": "See <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a> and <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1500495855, "post_id": 45200210, "comment_id": 77367831, "body": "I think it is rather a simulation issue, than a floating point issue. For example, you can improve simulation, if you use the <code>pos+=v_old*t+a&#47;2*t^2</code> formula. Another tip is to decrease deltaT. If the simulation gets better, then it is certainly a simulation issue."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1500495899, "post_id": 45200210, "comment_id": 77367865, "body": "You may also want to change the <a href=\"https://en.wikipedia.org/wiki/Numerical_methods_for_ordinary_differential_equations\" rel=\"nofollow noreferrer\">numerical method</a> you are using."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1500495905, "post_id": 45200210, "comment_id": 77367868, "body": "If you want a nice demonstration, try computing an object on a circular path (centripetal force acting perpendicular to the current velocity at all points). See what you get..."}, {"owner": {"reputation": 5480, "user_id": 2779530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb6a3e18200e5419f3de29b1d385e6d?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/2779530/kyle"}, "edited": false, "score": 1, "creation_date": 1500496753, "post_id": 45200210, "comment_id": 77368350, "body": "This is not a floating point issue.  For forward Euler (the integration scheme you&#39;re currently using), the cumulative error is <code>O(\u0394t)</code> which lines up closely with your plot of the error (it goes down by a factor of 10 in each case because you&#39;re reducing the step size by a factor of 10 in each case).  This is a fundamental issue with numerical integration."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500498892, "post_id": 45200210, "comment_id": 77369443, "body": "BTW, are you programming in C or C++?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 8333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ac21650c9a709e3c7bf75953af4570?s=128&d=identicon&r=PG&f=1", "display_name": "T0T0R", "link": "https://stackoverflow.com/users/8333359/t0t0r"}, "edited": false, "score": 0, "creation_date": 1500548460, "post_id": 45201165, "comment_id": 77391412, "body": "This seems to me a bit complicated because I haven&#39;t learn yet about differential equations... If I understand wou well, decreasing \u0394t (which, in green, is at 0.0001) won&#39;t change errors that much if I keep it in a reasonable range (for a game). So I need to focus on an other method to solve my equations ?"}, {"owner": {"reputation": 5480, "user_id": 2779530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb6a3e18200e5419f3de29b1d385e6d?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/2779530/kyle"}, "reply_to_user": {"reputation": 135, "user_id": 8333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ac21650c9a709e3c7bf75953af4570?s=128&d=identicon&r=PG&f=1", "display_name": "T0T0R", "link": "https://stackoverflow.com/users/8333359/t0t0r"}, "edited": false, "score": 0, "creation_date": 1500560063, "post_id": 45201165, "comment_id": 77400912, "body": "@T0T0R More specifically you need to understand that outside of very narrow circumstances (i.e. when you can get an exact solution) there will always be some amount of error in your solution."}], "tags": [], "owner": {"reputation": 5480, "user_id": 2779530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb6a3e18200e5419f3de29b1d385e6d?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/2779530/kyle"}, "is_accepted": true, "score": 6, "last_activity_date": 1500499013, "creation_date": 1500499013, "answer_id": 45201165, "question_id": 45200210, "link": "https://stackoverflow.com/questions/45200210/physics-simulation-gives-very-inaccurate-positions-for-simple-trajectories-cal/45201165#45201165", "title": "Physics simulation gives (very) inaccurate positions for simple trajectories calculus", "body": "<p>This is not a floating point issue.  In fact, even if you were using exact arithmetic you'd see the same problem.</p>\n\n<p>This error is really fundamental to numerical integration itself and the particular method you're using and the ODE you're solving.</p>\n\n<p>In this case you're using an integration scheme known as Forward Euler.  This is probably the simplest approach to solving a first-order ODE. Of course, this leaves it with some undesirable features.</p>\n\n<p>For one, it introduces error at each step.  The size of the error is <code>O(\u0394t\u00b2)</code>.  That means the error over a single time step is roughly proportional to the square of the size of the time step.  So if you cut the size of the time step in half, roughly you drop the incremental error to 1/4 the value.</p>\n\n<p>But since you decrease the time step, you have to make more steps to simulate the same amount of time.  So you're adding up more but smaller errors.  This is why the cumulative error is <code>O(\u0394t)</code>.  So really over the whole simulated time if you take time steps that are half as big, you get half as much cumulative error.</p>\n\n<p>Ultimately this cumulative error is what you're seeing.  And you can see in your error plot that the ultimate error ends up decreasing by about a factor of 10 each time you increase the number of time steps by a factor of 10: because the time step is 10 times smaller, so the total error ends up about 10 times smaller.</p>\n\n<hr>\n\n<p>The other issue is that Forward Euler exhibits what's known as conditional stability.  This means it's possible for the cumulative error to grow without bound in certain cases.  To see why, let's look at a simple ODE:</p>\n\n<pre><code>x' = -k * x\n</code></pre>\n\n<p>Where k is some constant.  The exact solution of this ODE is <code>x(t) = x(0) * exp( -k * t )</code>.  So as long as k is positive, <code>x</code> should tend to <code>0</code> as time increases.</p>\n\n<p>However, if we try to approximate this using Forward Euler, we get something that looks like this:</p>\n\n<pre><code>x(t + \u0394t) = x(t) + \u0394t * ( -k * x[n] )\n          = ( 1 - k * \u0394t ) * x(t)\n</code></pre>\n\n<p>This is a simple recurrence relation that we can solve:</p>\n\n<pre><code>x(t) = ( 1 - k * \u0394t )^(t / \u0394t) * x(0)\n</code></pre>\n\n<p>Now, we know the exact solution tens to 0 as <code>t</code> gets larger.  But the Forward Euler solution only does that if <code>|1 - k * \u0394t| &lt; 1</code>.  Notice how that expression depends on the step size as well as the <code>k</code> term from our ODE.  If <code>k</code> is really really big, we need a really really tiny time step to keep the solution from blowing up.  This is why it possesses what's known as conditional stability: the stability of the solution is conditional on the time step.</p>\n\n<p>There are also a number of other issues, but this is a broad topic and I can't cover everything in a single answer.</p>\n"}], "owner": {"reputation": 135, "user_id": 8333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ac21650c9a709e3c7bf75953af4570?s=128&d=identicon&r=PG&f=1", "display_name": "T0T0R", "link": "https://stackoverflow.com/users/8333359/t0t0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 45201165, "answer_count": 1, "score": 4, "last_activity_date": 1500499013, "creation_date": 1500495308, "last_edit_date": 1500498588, "question_id": 45200210, "link": "https://stackoverflow.com/questions/45200210/physics-simulation-gives-very-inaccurate-positions-for-simple-trajectories-cal", "title": "Physics simulation gives (very) inaccurate positions for simple trajectories calculus", "body": "<p>I want to implement a physics engine in a game in order to compute trajectories of bodies with forces applied to them.\nThis engine would calculate each state of the object based on its previous state. Of course this means a lot of calculation between two units of time to be sufficiently precise.</p>\n\n<p>To do that properly, I wanted first to know how big are the differences between this method of getting positions, and with kinematic equations.\nSo I made this code which stores the positions (x, y, z) given by the simulations and by the equations in a file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include \"header.h\"\n\n\nBody nouveauCorps(Body body, Vector3 force, double deltaT){\n    double m = body.mass;\n    double t = deltaT;\n\n    //Newton's second law:\n    double ax = force.x/m;\n    double ay = force.y/m;\n    double az = force.z/m;\n\n    body.speedx += ax*t;\n    body.speedy += ay*t;\n    body.speedz += az*t;\n\n    body.x +=t*body.speedx;\n    body.y +=t*body.speedy;\n    body.z +=t*body.speedz;\n\n    return body;\n}\n\nint main()\n{\n    //Initial conditions:\n    double posX = 1.4568899;\n    double posY = 5.6584225;\n    double posZ = -8.8944444;\n    double speedX = 0.232323;\n    double speedY = -1.6565656;\n    double speedZ = -8.6565656;\n    double mass = 558.74;\n\n    //Force applied:\n    Vector3 force = {5.8745554, -97887.568, 543.5875};\n\n    Body body = {posX, posY, posZ, speedX, speedY, speedZ, mass};\n\n    double duration = 10.0;\n    double pointsPS = 100.0; //Points Per Second\n    double pointsTot = duration * pointsPS;\n\n    char name[20];\n    sprintf(name, \"BN_%fs-%fpts.txt\", duration, pointsPS);\n\n    remove(name);\n    FILE* fichier = NULL;\n    fichier = fopen(name, \"w\");\n\n    for(int i=1; i&lt;=pointsTot; i++){\n        body = nouveauCorps(body, force, duration/pointsTot);\n        double t = i/pointsPS;\n\n        //Make a table: TIME | POS_X, Y, Z by simulation | POS_X, Y, Z by modele (reference)\n        fprintf(fichier, \"%e \\t %e \\t %e \\t %e \\t %e \\t %e \\t %e\\n\", t, body.x, body.y, body.z, force.x*(t*t)/2.0/mass + speedX*t + posX, force.y*(t*t)/2.0/mass + speedY*t + posY, force.z*(t*t)/2.0/mass + speedZ*t + posZ);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that with simple numbers (like with a simple fall in a -9.81 gravity field) I got nice positions, but with bigger (and quite random) numbers, I get inaccurate positions.</p>\n\n<p>Is that a floating point issue?</p>\n\n<p>Here are the results, with relative errors. (Note: label axes are in French, Temps = Time).</p>\n\n<p>Graphs</p>\n\n<p><img src=\"https://i.stack.imgur.com/23s6u.jpg\" alt=\"\"></p>\n\n<ul>\n<li>Black+dashed : values from kinematic equations</li>\n<li>Red : 100 points per second</li>\n<li>Orange : 1000 points per second</li>\n<li>Green : 10000 points per second</li>\n</ul>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1500495847, "post_id": 45200124, "comment_id": 77367825, "body": "What style did you use? Test using <code>qApp-&gt;setStyle(&quot;fusion&quot;);</code>"}, {"owner": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1500513245, "post_id": 45200124, "comment_id": 77373805, "body": "give that this is all in Qt Creator, where do I put that code? And what will this give me?"}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "edited": false, "score": 0, "creation_date": 1500551415, "post_id": 45203621, "comment_id": 77393523, "body": "I am using Qt 5.4, and unfortunately the decision to upgrade is beyond my pay-grade. If we do upgrade, thank you, I&#39;ll certainly use that."}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 0, "last_activity_date": 1500514008, "creation_date": 1500514008, "answer_id": 45203621, "question_id": 45200124, "link": "https://stackoverflow.com/questions/45200124/qt-creator-line-edit-and-button-size-for-hi-dpi-and-low-dpi-system/45203621#45203621", "title": "Qt Creator Line edit and button size for hi-dpi and low dpi system", "body": "<p>What version of Qt?</p>\n\n<p>Qt 5.6 introduce High Dpi Support and adjust all the views by the system scale factor. Take a look to the <a href=\"http://doc.qt.io/qt-5/highdpi.html\" rel=\"nofollow noreferrer\">HDPI Displys Documentation</a>. Basically, add this line to your main function before set up your applicatio to enable the automatic scale:</p>\n\n<pre><code>QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\nQGuiApplication app(argc, argv);\n......\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500514008, "creation_date": 1500494942, "question_id": 45200124, "link": "https://stackoverflow.com/questions/45200124/qt-creator-line-edit-and-button-size-for-hi-dpi-and-low-dpi-system", "title": "Qt Creator Line edit and button size for hi-dpi and low dpi system", "body": "<p>I'm have to re-layout a very complicated UI because we've discovered it's essentially unusable on high dpi systems. This is due to the fact that we have used fixed sizes on just about everything in order to get the layout design we want in Qt Creator.</p>\n\n<p>My Question is, how can I size objects (line edits, buttons, spin boxes, etc etc etc) such that they maintain relative sizes to each other to maintain the desired layout?</p>\n\n<p>For example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CvYMo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CvYMo.png\" alt=\"Example Layout with fixed pixel sized objects\"></a></p>\n\n<p>This renderd exactly as it looks on a 1080p screen but it's completely unreadable on a windows tablet with a 2736 x 1824 resolution.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IEkfc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IEkfc.png\" alt=\"Rendered Layout on Hi-DPI\"></a></p>\n\n<p>So how do I fix this? If I remove the absolute pixel size values, all those buttons and line edits expand horizontally out of control and nearly tripple the width of the widget. Not only is this completely unnecessary for the data they will contain, it ruins the UI.</p>\n\n<p>I have tried layouts. Layouts don't stop these objects from expanding. There appears to be some hidden minimum size that is set arbitrarily far too large for my purposes.</p>\n\n<p>I have looked over the Qt Creator resources I can find. Lots of patting themselves on the back for supporting hi-dpi, nothing about how to design for this to achieve a consistent look across devices with different resolutions.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "weak-ptr"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 7, "creation_date": 1500494528, "post_id": 45199947, "comment_id": 77367124, "body": "I believe it&#39;s because otherwise, the <code>weak_ptr</code> wouldn&#39;t be able to know if it was expired. You have the keep the block of memory alive so that the <code>weak_ptr</code>s know that the pointer has expired, but you also want to delete the memory after all the <code>weak_ptr</code>s are gone"}, {"owner": {"reputation": 5215, "user_id": 1370639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7d25f04b35528cffd0b931044d985bbf?s=128&d=identicon&r=PG", "display_name": "Boyu Fang", "link": "https://stackoverflow.com/users/1370639/boyu-fang"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500494735, "post_id": 45199947, "comment_id": 77367229, "body": "@Justin I was like &quot;Can&#39;t you just test wp1&#39;s pointer to the manager object is null&quot; and then I realised &quot;Ah, of course you cannot do that otherwise you solved the problem of deleting a ptr twice will seg fault your program issue.&quot;"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1500494826, "post_id": 45199947, "comment_id": 77367278, "body": "Basically, the only other solution would be to keep a list of all <code>weak_ptr</code>s stored. Then, when the shared count gets to 0, you inform every <code>weak_ptr</code> that the memory was destroyed. This would be less efficient, especially in terms of memory used."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 2, "creation_date": 1500552847, "post_id": 45199947, "comment_id": 77394729, "body": "As a sidenote, your graphic is misleading because the pointer to the managed object is stored inside each <code>shared_ptr</code>/<code>weak_ptr</code>. There may be another pointer inside the deleter (inside the control block aka manager object). This allows different pointer instances to have the same ownership relation but <i>different pointees</i>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1500984118, "post_id": 45199947, "comment_id": 77566642, "body": "<a href=\"https://stackoverflow.com/a/14043328/412080\">stackoverflow.com/a/14043328/412080</a>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1503375539, "post_id": 45199947, "comment_id": 78575251, "body": "@Justin &quot;<i>you inform every weak_ptr that the memory was destroyed</i>&quot; creating the possibility of having some expired and other non expired weak ref to the same object, during a short time which could be extended indefinitely if some weak ref is turned into a strong ref!"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1500495196, "post_id": 45200011, "comment_id": 77367491, "body": "So, you are claiming a new shared pointer adds 1 to both values?"}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1500495334, "post_id": 45200011, "comment_id": 77367555, "body": "@Yakk: Yes, but good implementations make the population of shared_ptrs behave as one weak_ptr."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1503376241, "post_id": 45200011, "comment_id": 78575443, "body": "@Yakk Increment two integers is problematic WRT atomicity."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1503384892, "post_id": 45200011, "comment_id": 78578954, "body": "@curious it doesn&#39;t need atomicity."}], "tags": [], "owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "is_accepted": false, "score": 5, "last_activity_date": 1500494562, "creation_date": 1500494562, "answer_id": 45200011, "question_id": 45199947, "link": "https://stackoverflow.com/questions/45199947/why-shared-ptrs-reference-counting-object-needs-to-keep-track-of-the-number-of/45200011#45200011", "title": "Why shared_ptr&#39;s reference counting object needs to keep track of the number of weak_ptrs pointing to the object too?", "body": "<p>The <code>shared_ptr</code> reference count is the count of owners of the object. The <code>weak_ptr</code> reference count is the count of owners of the reference count control block.</p>\n"}, {"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 2, "creation_date": 1500552957, "post_id": 45200050, "comment_id": 77394825, "body": "Right, if it weren&#39;t so, the control block would need to contain information about all <code>weak_ptr</code> instances so that they can be nulled out (in a thread-safe manner, no less) on expiry. It&#39;s much easier to let the <code>weak_ptr</code> perform polling on <code>lock()</code> instead."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 23, "last_activity_date": 1500494682, "creation_date": 1500494682, "answer_id": 45200050, "question_id": 45199947, "link": "https://stackoverflow.com/questions/45199947/why-shared-ptrs-reference-counting-object-needs-to-keep-track-of-the-number-of/45200050#45200050", "title": "Why shared_ptr&#39;s reference counting object needs to keep track of the number of weak_ptrs pointing to the object too?", "body": "<p><code>std::weak_ptr</code> refers to the control block to know if the object still exists and if so, to provide a <code>std::shared_ptr</code> to it when needed. For that reason, the control block must exist as long as either a <code>std::weak_ptr</code> or a <code>std::shared_ptr</code> exists. You need to track the number of instances of <code>std::weak_ptr</code> to know when the last one is destroyed, just like for <code>std::shared_ptr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 587852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec6aaf4c60c9a976806e913410d8784?s=128&d=identicon&r=PG", "display_name": "Rex Kerr", "link": "https://stackoverflow.com/users/587852/rex-kerr"}, "is_accepted": false, "score": 4, "last_activity_date": 1501525045, "creation_date": 1501525045, "answer_id": 45422703, "question_id": 45199947, "link": "https://stackoverflow.com/questions/45199947/why-shared-ptrs-reference-counting-object-needs-to-keep-track-of-the-number-of/45422703#45422703", "title": "Why shared_ptr&#39;s reference counting object needs to keep track of the number of weak_ptrs pointing to the object too?", "body": "<p>Adding to the answer by Fran\u00e7ois Andrieux:</p>\n\n<p>There is a side effect of this that is very important to understand.</p>\n\n<p>If you use an implementation of std::make_shared that uses the WKWYL optimization (We Know Where You Live) of allocating the control block and the actual object together as one contiguous allocation, the memory WILL NOT BE FREED until after all weak_ptr objects have also gone out of scope.</p>\n\n<p>(my account is seldom used, so I cannot add comments, due to not having enough reputation points, thus adding as an answer rather than a comment)</p>\n"}], "owner": {"reputation": 5215, "user_id": 1370639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7d25f04b35528cffd0b931044d985bbf?s=128&d=identicon&r=PG", "display_name": "Boyu Fang", "link": "https://stackoverflow.com/users/1370639/boyu-fang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2356, "favorite_count": 6, "accepted_answer_id": 45200050, "answer_count": 3, "score": 18, "last_activity_date": 1501525045, "creation_date": 1500494349, "question_id": 45199947, "link": "https://stackoverflow.com/questions/45199947/why-shared-ptrs-reference-counting-object-needs-to-keep-track-of-the-number-of", "title": "Why shared_ptr&#39;s reference counting object needs to keep track of the number of weak_ptrs pointing to the object too?", "body": "<p>Hi I am reading through <a href=\"http://umich.edu/~eecs381/handouts/C++11_smart_ptrs.pdf\" rel=\"noreferrer\">this document</a> and some other documents about C++'s <code>shared_ptr</code> and they all seem to suggest that apart from the number of <code>shared_ptr</code> pointing to the allocated object, the reference count object has to keep track of how many <code>weak_ptr</code> pointer pointing to the object as well. My question is why? From my understanding, <code>weak_ptr</code> is non-owning so if the count of <code>shared_ptr</code> pointing to the object reaches zero the object can be deleted. That is why sometimes we need to use <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr/expired\" rel=\"noreferrer\">expired</a> to check the availability of an object pointed by a <code>weak_ptr</code>. Could you explain the reason for needing to keep track of the number of <code>weak_ptr</code>s?</p>\n\n<p>Why do we need weak count here?\n<a href=\"https://i.stack.imgur.com/YNNI5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YNNI5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 3, "creation_date": 1500494320, "post_id": 45199914, "comment_id": 77367033, "body": "C++ is usually not the best language to figure out as you go; I would recommend looking for books or tutorials online."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1500494347, "post_id": 45199914, "comment_id": 77367053, "body": "You probably want something like <code>std::array&lt;std::array&lt;String,20&gt;50&gt; myArray;</code>"}, {"owner": {"reputation": 723, "user_id": 7818118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nmjg6.jpg?s=128&g=1", "display_name": "DMrFrost", "link": "https://stackoverflow.com/users/7818118/dmrfrost"}, "edited": false, "score": 0, "creation_date": 1500494356, "post_id": 45199914, "comment_id": 77367058, "body": "Go run through some tutorials."}, {"owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 2, "creation_date": 1500494377, "post_id": 45199914, "comment_id": 77367067, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4612328/initializing-a-2-dimensional-array-of-strings\">initializing a 2 dimensional array of strings</a>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1500494498, "post_id": 45199914, "comment_id": 77367116, "body": "A string already contains multiple characters; a 2D array of strings would have three dimensions for characters. Additionally, C++ doesn\u2019t have 2-dimensional arrays <i>per se</i>; it has arrays of arrays. I would recommend either <code>std::array&lt;std::array&lt;char, 20&gt;, 50&gt;</code> or <code>char[20][50]</code>."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1500494715, "post_id": 45199914, "comment_id": 77367217, "body": "@FrancescoC read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1500495107, "post_id": 45199914, "comment_id": 77367443, "body": "Prefer <code>std::array</code> or <code>std::vector</code> over C-style arrays in most (almost all) cases."}, {"owner": {"reputation": 3, "user_id": 7997622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929a52ca5325be60a8b2628c270826ff?s=128&d=identicon&r=PG&f=1", "display_name": "FrancescoC", "link": "https://stackoverflow.com/users/7997622/francescoc"}, "edited": false, "score": 0, "creation_date": 1500538594, "post_id": 45199914, "comment_id": 77384175, "body": "Hi, the syntax of your suggestions gives a lot of errors. I think that is plain C++. I need code for VIsual C++  following - private void closeBtn_Click(object sender, EventArgs e)-   Then I would declare my array ."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1500494743, "creation_date": 1500494743, "answer_id": 45200061, "question_id": 45199914, "link": "https://stackoverflow.com/questions/45199914/how-to-declare-a-a-two-dimentional-string-array-in-visual-studio-c/45200061#45200061", "title": "How to declare a a two dimentional string array in Visual Studio C++?", "body": "<p>There are many way to declare a two <em>dimentional</em> [sic] array of strings:  </p>\n\n<p><strong>Strings</strong>  </p>\n\n<pre><code>std::string matrix[MAX_ROWS][MAX_COLUMNS];\nstd::vector&lt;std::vector&lt;std::string&gt; &gt; matrix_vectors;\nstd::array&lt; std::array&lt;std::string&gt; &gt;  matrix_array;\nstd::string matrix[MAX_ROWS * MAX_COLUMNS];\n</code></pre>\n\n<p><strong>C-Style strings</strong><br>\nA C-Style string is an array of <code>char</code> terminated by a nul, <code>'\\0'</code>, character.  </p>\n\n<p>Since it is an array, we'll be create a 3 dimensional array of characters:  </p>\n\n<pre><code>char matrix[MAX_ROWS][MAX_COLUMNS][MAX_STRING_LENGTH];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7997622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929a52ca5325be60a8b2628c270826ff?s=128&d=identicon&r=PG&f=1", "display_name": "FrancescoC", "link": "https://stackoverflow.com/users/7997622/francescoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1500495184, "creation_date": 1500494200, "last_edit_date": 1500495184, "question_id": 45199914, "link": "https://stackoverflow.com/questions/45199914/how-to-declare-a-a-two-dimentional-string-array-in-visual-studio-c", "title": "How to declare a a two dimentional string array in Visual Studio C++?", "body": "<p>I need help to what seems to be a simple task, but I cannot find how to do this.</p>\n\n<p>I have a form and a button.\nIn the 'button_click' event I want to declare an array like - String myArray [20,50]-</p>\n\n<p>Then I want to populate the array withlines of text that I am reading from a ,txt file. That is, 50 line X 20 character. (I know how to read the file)</p>\n\n<p>Could anyone show me the correct syntax/method\nto get this working.</p>\n"}, {"tags": ["c++", "visual-studio", "unicode", "mfc"], "comments": [{"owner": {"reputation": 216, "user_id": 8235038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e516e7196c01c3f1c7639fc1890096eb?s=128&d=identicon&r=PG", "display_name": "Genaro Morales", "link": "https://stackoverflow.com/users/8235038/genaro-morales"}, "edited": false, "score": 0, "creation_date": 1500494083, "post_id": 45199759, "comment_id": 77366917, "body": "May be you find useful this: <a href=\"https://stackoverflow.com/questions/19715144/how-to-convert-char-to-lpcwstr\" title=\"how to convert char to lpcwstr\">stackoverflow.com/questions/19715144/&hellip;</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500494934, "post_id": 45199759, "comment_id": 77367346, "body": "You should update your entire codebase to properly use wide characters. Actually this should&#39;ve been done 15 years ago."}, {"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500496692, "post_id": 45199759, "comment_id": 77368319, "body": "&quot;char*&quot; is still standard on UTF-8.  Most of software engineers hate &quot;wchar_t*&quot; and adding L for each string expression.  It looks like Microsoft is the only one to force programmers to use UNICODE.  Microsoft wants to discontinue MBCS but I don&#39;t think it&#39;s going to happen sometime soon."}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500500720, "post_id": 45199759, "comment_id": 77370333, "body": "@JazzSoft in this case it has nothing to do with UTF-8. In WinAPI, you either have UTF-16 or ASCII."}, {"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500505388, "post_id": 45199759, "comment_id": 77371870, "body": "What I meant was there are so many libraries using &quot;char*&quot; as text string in the world and Microsoft would not discontinue MBCS.  I developed multi-platform libraries and it&#39;s based on MBCS/UTF-8.  I didn&#39;t want to use UNICODE to develop my libraries.  If you write code in UNICODE, your code may not be portable for other OS like Linux, iOS, macOS, etc."}], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500505633, "post_id": 45201752, "comment_id": 77371967, "body": "I&#39;m using Visual Studio 2017 and didn&#39;t need to install MBCS add-on, although it was needed for VS 2015.  That means Microsoft realized MBCS support is needed at this point."}], "tags": [], "owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1500504284, "last_edit_date": 1500504284, "creation_date": 1500501543, "answer_id": 45201752, "question_id": 45199759, "link": "https://stackoverflow.com/questions/45199759/visual-studio-c-unicode-related-troubleshooting-loop/45201752#45201752", "title": "visual studio c++ UNICODE related troubleshooting loop", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\"><code>CreateEvent</code></a> itself is nothing but a macro <code>#define</code>'d to be one of the two functions which are actually declared in WinAPI's <code>synchapi.h</code></p>\n\n<pre><code>#ifdef UNICODE\n#define CreateEvent  CreateEventW\n#else\n#define CreateEvent  CreateEventA\n#endif // !UNICODE\n</code></pre>\n\n<p>Normally (at least in all Windows projects I used to work with) this UNICODE macro is defined, so in fact one works with <code>CreateEventW</code> function, which accepts <code>LPCWSTR</code> (in other words <code>const wchar_t*</code>), words argument, which is supposed to be a UTF-16 string literal.\nIf it is not defined in your project, then it uses <code>CreateEventA</code>, which accepts <code>LPCSTR</code> argument (in fact, equivalent to <code>const char*</code>), and treats it as ASCII string.</p>\n\n<p>Your project seems to have been set up to support ASCII strings only. And...well, now this is deprecated :) Previously there was some special add-on to enable builds for such situations, called <a href=\"https://msdn.microsoft.com/library/dn251007.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">MFC MBCS DLL Add-on</a>. However, I'm not 100% sure it's still available, here's <a href=\"https://stackoverflow.com/questions/32003428/mfc-multibyte-add-on-for-visual-studio-2015-express-for-desktop\">a question here at StackOverflow about that</a>.</p>\n\n<p>If you don't find such addon or any alternative solution like that, then I'm afraid the only way to make it compile will be porting your project to Unicode strings. Actually, even if you find a workaround, I suggest you to add this activity to your backlog if you're going to maintain this project any further, because such workaround may cease to exist at any moment.</p>\n\n<p>In any case, it would be interesting to learn about your end result.</p>\n"}, {"comments": [{"owner": {"reputation": 3733, "user_id": 203882, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3dace9786e9b3e24d103fb9a852e2e34?s=128&d=identicon&r=PG", "display_name": "n4rzul", "link": "https://stackoverflow.com/users/203882/n4rzul"}, "edited": false, "score": 0, "creation_date": 1505227380, "post_id": 45206864, "comment_id": 79321246, "body": "I have this exact same issue with VS2015"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1500532259, "creation_date": 1500532259, "answer_id": 45206864, "question_id": 45199759, "link": "https://stackoverflow.com/questions/45199759/visual-studio-c-unicode-related-troubleshooting-loop/45206864#45206864", "title": "visual studio c++ UNICODE related troubleshooting loop", "body": "<p>It seems you are using Microsoft Visual Studio 2013. This version was distributed without the MBCS version of MFC. On the other hand Visual Studio 2015 and 2017 come with the MBCS version of MFC.</p>\n\n<p>If you want to build your project with MBCS, you need to download and install this:</p>\n\n<p><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=40770\" rel=\"nofollow noreferrer\">https://www.microsoft.com/en-us/download/details.aspx?id=40770</a></p>\n\n<p>The other option is converting your whole project to Unicode, but this can be a lot of work depending on your project.</p>\n"}], "owner": {"reputation": 413, "user_id": 2913869, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/f142e24edd8e673b5ee9afe60aec5654?s=128&d=identicon&r=PG&f=1", "display_name": "user2913869", "link": "https://stackoverflow.com/users/2913869/user2913869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500532259, "creation_date": 1500493631, "question_id": 45199759, "link": "https://stackoverflow.com/questions/45199759/visual-studio-c-unicode-related-troubleshooting-loop", "title": "visual studio c++ UNICODE related troubleshooting loop", "body": "<p>I inherited a c++ visual studio project that I can't get to build. The problem is that a lot of api calls like \"CreateEvent\" have char* inputs being fed to them but the error code expects \"LPCWSTR.\" It's literally hundreds of lines of code with more or less a similar complaint.</p>\n\n<p>Searching for help, the common solution seems to be that I should disable using the Unicode Character Set. However, when I do this, I get the \"Building an MFC project for a non-Unicode character set is deprecated\" error. Searching for help, the common solution seems to be that I should enable the Unicode Character Set.</p>\n\n<p>So I'm hosed if I do, hosed if I don't. What's the right move here?</p>\n"}, {"tags": ["c++", "qt", "qlist", "qprogressbar"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1500493946, "post_id": 45199708, "comment_id": 77366834, "body": "&quot;Is it possible to create many QProgressDialogs objects, that will show progress different long operations?&quot; - Yes."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1500500515, "post_id": 45199708, "comment_id": 77370250, "body": "Or better use QProgressBar and combine them in some container (maybe with vertical scroll)."}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1500538178, "post_id": 45199708, "comment_id": 77383885, "body": "Having many popups is not very nice for the user, especially if you don&#39;t see them all, you should go for the idea of AlexanderVX or combine the total progress in a unique QProgressDialog."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1500575937, "post_id": 45199708, "comment_id": 77411685, "body": "<i>own progress dialog</i>"}], "owner": {"reputation": 21, "user_id": 8333969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3318d4b779e29528aeb4b00873fbbd46?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolay", "link": "https://stackoverflow.com/users/8333969/nikolay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1500493431, "creation_date": 1500493431, "question_id": 45199708, "link": "https://stackoverflow.com/questions/45199708/is-it-possible-to-create-many-qprogressdialogs-objects-that-will-show-progress", "title": "Is it possible to create many QProgressDialogs objects, that will show progress different long operations?", "body": "<p>I have class, that launches tasks in separate thread:</p>\n\n<pre><code>class SomeTask : public QObject, QRunnable\n{\n    Q_OBJECT\nsignals:\n    void updateProgressBar(int, int);\npublic:\n    SomeTask(int, QWidget*);\n    void run();\n    void runLongOperation(QString)\n    {\n        QThreadPool::globalInstance()-&gt;start(this);\n    }\n};\n</code></pre>\n\n<p>And in MainWindow I create for every long calculation new QProgressBar</p>\n\n<pre><code>class MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    explicit MainWindow(QWidget *parent = 0);\nprivate:\n    QList&lt;QProgressDialog*&gt; m_listProgressDialogs;\npublic slots:\n    void handle(QString) \n    {\n          m_listProgressDialogs.push_back(new QProgressDialog(\"Task in progress...\", \"Cancel\", 0, 100));\n   m_listProgressDialogs.at(m_listProgressDialogs.size()-1)-&gt;show();\n\n   SomeTask *task = new SomeTask(m_listProgressDialogs.size()-1, this);\n   QObject::connect(mv, SIGNAL(updateProgressBar(int)), this, SLOT(setValueProgressBar(int)));\n   task-&gt;runLongOperation(......);\n    }\n    void setValueProgressBar(int);\n};\n</code></pre>\n\n<p>Is it possible to create new QProgressBar for every long task and every task will emit the signal to set value in specific QProgressBar. Is it good to store QProgressBar* in QList, like I wrote ?</p>\n"}, {"tags": ["c++", "memory", "memory-management"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 7, "creation_date": 1500493392, "post_id": 45199683, "comment_id": 77366513, "body": "Undefined behavior. Anything can happen."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1500493446, "post_id": 45199683, "comment_id": 77366546, "body": "Please format your code properly (indent with four spaces)."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 4, "creation_date": 1500493516, "post_id": 45199683, "comment_id": 77366585, "body": "You&#39;re using <code>delete</code> on something you didn&#39;t get from <code>new</code> - <code>a</code>. Don&#39;t do that. And, in general, you should almost never use <code>delete</code>."}, {"owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1500493620, "post_id": 45199683, "comment_id": 77366650, "body": "@AlanStokes Specify more, should i use free() or what?"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 3, "creation_date": 1500493645, "post_id": 45199683, "comment_id": 77366663, "body": "You should only <code>delete</code> what you create with a <code>new</code>, that&#39;s not the case for object <code>a</code>. You don&#39;t have to call <code>delete</code> on it at all, it will be deleted automatically when it&#39;s scope ends."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1500493680, "post_id": 45199683, "comment_id": 77366686, "body": "@sladet You don&#39;t need to use anything like <code>delete</code> or <code>free()</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500493704, "post_id": 45199683, "comment_id": 77366694, "body": "@sladet Also, when you need to heap-allocate, you still don&#39;t need to use <code>new</code>; you can use <code>std::unique_ptr</code> with <code>std::make_shared</code>. Avoiding <code>new</code> and <code>delete</code> makes it easier to avoid bugs"}, {"owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1500493715, "post_id": 45199683, "comment_id": 77366705, "body": "@user0042 Does it just disapear?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1500493730, "post_id": 45199683, "comment_id": 77366717, "body": "Also, <code>Integer[1] = value</code> is out of bounds."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1500493793, "post_id": 45199683, "comment_id": 77366757, "body": "<code>a</code> is a local, automatic variable. It is destroyed for you when you return from <code>main</code>. Local variables are always destroyed for you."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 2, "creation_date": 1500493798, "post_id": 45199683, "comment_id": 77366758, "body": "Yes in this case it just disappears when the scope ends, in this case when the function <code>main()</code> ends (or as soon as it&#39;s no longer useful, optimizer will decide), all objects created on it&#39;s local scope are automatically terminated, unless you dynamically allocated them using <code>new</code>."}, {"owner": {"reputation": 216, "user_id": 8235038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e516e7196c01c3f1c7639fc1890096eb?s=128&d=identicon&r=PG", "display_name": "Genaro Morales", "link": "https://stackoverflow.com/users/8235038/genaro-morales"}, "edited": false, "score": 0, "creation_date": 1500493803, "post_id": 45199683, "comment_id": 77366759, "body": "Only when you are allocating directly the memory like using malloc or calloc you need to call a free to release those memory, if you are only creating objects of a class those objects lives as much as their scope do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1500493905, "post_id": 45199683, "comment_id": 77366813, "body": "Why do you use the nothrow version of new?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1500494022, "post_id": 45199683, "comment_id": 77366884, "body": "@sladet Yes. It <i>&quot;disappears&quot;</i> at the end of the scope."}, {"owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "edited": false, "score": 0, "creation_date": 1500494134, "post_id": 45199683, "comment_id": 77366941, "body": "@manni66 is said so on some tutorial on cplusplus.com"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1500494298, "post_id": 45199683, "comment_id": 77367019, "body": "A tutorial on what? It is used why? The usual way is to simply use new."}, {"owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "edited": false, "score": 0, "creation_date": 1500494417, "post_id": 45199683, "comment_id": 77367086, "body": "@manni66 <a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/dynamic</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1500494565, "post_id": 45199683, "comment_id": 77367140, "body": "And you have to use the other method? Why?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1500494831, "post_id": 45199778, "comment_id": 77367282, "body": "I agree with what you said, but one little note: <code>-Wall -Wextra</code> does <i>not</i> enable <i>all</i> warnings. Many (and a good default set) - yes, but not <i>all</i> - gcc has plenty of additional warnings you can enable (if you want)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1500495744, "last_edit_date": 1500495744, "creation_date": 1500493733, "answer_id": 45199778, "question_id": 45199683, "link": "https://stackoverflow.com/questions/45199683/c-no-code-running-after-delete-statement/45199778#45199778", "title": "c++ no code running after delete statement", "body": "<p>Your code exhibit some <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><strong>undefined behavior</strong></a> (<code>delete</code> on something not obtained by <code>new</code> ....) so be <em>really <a href=\"https://stackoverflow.com/questions/25636753/is-segmentation-fault-actual-undefined-behavior-when-we-refer-to-a-non-static-da/25636788#25636788\">scared</a></em> and read more about UB (a disease you should <em>always</em> avoid).</p>\n\n<p>First, take the habit of compiling with (nearly) all warnings &amp; debug info, so with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compile with <code>g++ -Wall -Wextra -g</code> and improve your code till you get no warnings. Then use the debugger (e.g. <code>gdb</code>) and <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>.</p>\n\n<p>Read more about C++, so take a few days to read some <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ books</a> and look at some <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">C++ reference</a> site. Read about <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII</a> and <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">rule of five</a>.</p>\n\n<p>When possible, use <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard containers</a>. Read about <a href=\"https://en.wikipedia.org/wiki/Smart_pointer\" rel=\"nofollow noreferrer\">smart pointers</a> and use <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">them</a> (so in most cases, avoid raw <code>new</code> and <code>delete</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1500495507, "creation_date": 1500495507, "answer_id": 45200268, "question_id": 45199683, "link": "https://stackoverflow.com/questions/45199683/c-no-code-running-after-delete-statement/45200268#45200268", "title": "c++ no code running after delete statement", "body": "<p>You seem a bit confused about what is dynamically allocated (on the heap) and what is automatically allocated on the stack. Whilst dynamically allocated objects need to be explicitly deallocated, automatic objects get deallocated automatically (read up on <a href=\"http://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a>).</p>\n\n<p>You create <code>a</code> as an automatic variable</p>\n\n<pre><code>k_int a(123);\n</code></pre>\n\n<p>It will get deallocated automatically, in this case when the end of 'main' is reached.</p>\n\n<p>If <code>a</code> were a dynamically allocated object, it would be allocated with <code>new</code> and deallocated with <code>delete</code>. It would be your responsibility to ensure <code>delete</code> gets called. There are many issues related to the correct use and deallocation of dynamic memory, so much so is that the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#S-resource\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a> advises against manual deallocation (I very strongly recommend that you read the Guidelines, they have been set up by Bjarne Stroustrup (inventor of C++) and Herb Sutter (current chair of the C++ standardization committee)).</p>\n\n<p>Getting back to your problem. You try to deallocate <code>a</code> as though it were dynamically allocated, even though it is automatic and doesn't need explicit dellocation. As already mentioned, this is UB. One likely outcome is that the heap gets corrupted and your application terminates abnormally.</p>\n\n<p>The fix is simple, just remove the delete statement.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "edited": false, "score": 0, "creation_date": 1500497004, "post_id": 45200434, "comment_id": 77368503, "body": "Good answer, it seems that you can take data out of this temporaral thingy, which is a good thing. <a href=\"http://cpp.sh/4ont7\" rel=\"nofollow noreferrer\">cpp.sh/4ont7</a> &lt;-- link to some code"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1500496190, "creation_date": 1500496190, "answer_id": 45200434, "question_id": 45199683, "link": "https://stackoverflow.com/questions/45199683/c-no-code-running-after-delete-statement/45200434#45200434", "title": "c++ no code running after delete statement", "body": "<blockquote>\n  <p>The reason I wanna delete variables is that I don't wanna have them running for the rest of the program, that it won't exist after i close my program does not help.</p>\n</blockquote>\n\n<p>Then just limit the scope of your variable so \"you wont have it running for the rest of the program\":</p>\n\n<pre><code>int main() {\n\n   {\n       k_int a(123);\n       a.print();// I did not show the source code for this\n       // a would be destroyed here\n   }\n\n   cout &lt;&lt; \"Test after delete\" &lt;&lt; endl;// Does not run, nothing does :(\n}\n</code></pre>\n\n<p>It is actually a good practice to limit your variable lifetime to be as short as possible. Just do it right way.</p>\n"}], "owner": {"reputation": 43, "user_id": 7090007, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MbO6U.jpg?s=128&g=1", "display_name": "sladet", "link": "https://stackoverflow.com/users/7090007/sladet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 45200434, "answer_count": 3, "score": -4, "last_activity_date": 1500496190, "creation_date": 1500493352, "last_edit_date": 1500494814, "question_id": 45199683, "link": "https://stackoverflow.com/questions/45199683/c-no-code-running-after-delete-statement", "title": "c++ no code running after delete statement", "body": "<p>I am making a class for dynamiclly allocated variables in c++ mostly for learning. And I ran into a bug, where when I delete the class, calling the deconstructor un-allocating the memory, and than deleteing the class, it seems to delete all my code after that as well, why is this? <br>\nHere you have some code from the program:<br><br></p>\n\n<p>Destructor: </p>\n\n<pre><code>k_int::~k_int() {\n  delete[] Integer;\n}\n</code></pre>\n\n<p>Constructor:</p>\n\n<pre><code>k_int::k_int(int value, bool BooleanConstant = false) {\n  Integer = new (nothrow) int[1];\n  constant = BooleanConstant; // if you wanna make your allocated space constant\n  if (Integer == nullptr) {\n    cout &lt;&lt; STD_MEM_ERR &lt;&lt; endl;\n    exit(0);\n  }\n  Integer[1] = value;\n}\n</code></pre>\n\n<p>Main: </p>\n\n<pre><code>int main() {\n\n  k_int a(123);\n  a.print();// I did not show the source code for this\n  delete &amp;a;\n\n  cout &lt;&lt; \"Test after delete\" &lt;&lt; endl;// Does not run, nothing does :(\n\n}\n</code></pre>\n\n<p><br>\nEDIT:\nThe reason I wanna delete variables is that I don't wanna have them running for the rest of the program, that it won't exist after i close my program does not help.</p>\n"}, {"tags": ["c++", "qt", "opengl"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1500494979, "post_id": 45199681, "comment_id": 77367376, "body": "Please show the code. What have multiple QOpenGLWidget to do with your problem? Are you creating the texture in the correct context/widget?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1500495995, "post_id": 45199681, "comment_id": 77367929, "body": "&quot;<i>Calling glIsTexture() on the texture handle returns false.</i>&quot; Then it is not a texture."}, {"owner": {"reputation": 535, "user_id": 2054335, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1ec8e695a700d149e007928fc18e5582?s=128&d=identicon&r=PG", "display_name": "x6herbius", "link": "https://stackoverflow.com/users/2054335/x6herbius"}, "edited": false, "score": 0, "creation_date": 1500528815, "post_id": 45199681, "comment_id": 77378245, "body": "I mentioned the QOpenGLWidgets because they each have their own context, so I am trying to take a FBO created in one context and bind its texture in another. I would have expected this to be OK, because textures are shareable and all my QOpenGLContexts are set to share globally."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1500530447, "post_id": 45199681, "comment_id": 77378919, "body": "I&#39;ve got sharing of a texture from <code>QOpenGLFrameBufferObject</code> to a different context in my project, and it works fine. Can you catch a moment when the texture becomes invalid by inserting <code>glBindTexture()</code> everywhere? It should be valid just after the FBO render, right?"}, {"owner": {"reputation": 535, "user_id": 2054335, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1ec8e695a700d149e007928fc18e5582?s=128&d=identicon&r=PG", "display_name": "x6herbius", "link": "https://stackoverflow.com/users/2054335/x6herbius"}, "edited": false, "score": 0, "creation_date": 1500534499, "post_id": 45199681, "comment_id": 77381273, "body": "I actually have a feeling that my contexts aren&#39;t being shared. I thought that Qt::AA_ShareOpenGLContexts would mean all contexts were shared, but apparently it just means QOpenGLWidget contexts specifically. If I check my render context with the GL widget, apparently they aren&#39;t sharing. Is there a way to get that to work? Really I want to call setShareContext(renderingContext) for each QOpenGLWidget, but I can&#39;t see a way to do that."}], "owner": {"reputation": 535, "user_id": 2054335, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1ec8e695a700d149e007928fc18e5582?s=128&d=identicon&r=PG", "display_name": "x6herbius", "link": "https://stackoverflow.com/users/2054335/x6herbius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500614520, "creation_date": 1500493343, "last_edit_date": 1500614520, "question_id": 45199681, "link": "https://stackoverflow.com/questions/45199681/qopenglframebufferobject-binding-texture-name-from-texture-gives-invalidopera", "title": "QOpenGLFrameBufferObject: binding texture name from texture() gives InvalidOperation error", "body": "<p>In my application I have a module that manages rendering using OpenGL, and renders the results into <code>QOpenGLFrameBufferObjects</code>. I know this much works, because I'm able to save their contents using <code>QOpenGLFrameBufferObject::toImage()</code> and see the render.</p>\n\n<p>I am now attempting to take the texture ID returned from <code>QOpenGLFrameBufferObject::texture()</code>, bind it as a normal OpenGL texture and render it into a <code>QOpenGLWidget</code> viewport using a fullscreen quad. (I'm using this two-step method because I'm not aware of a way to get around the fact that <code>QOpenGLWidgets</code> each work in their own context, but that's a different story.)</p>\n\n<p>The problem here is that <code>glBindTexture()</code> returns <code>InvalidOperation</code> when I call it. According to the OpenGL documentation, this is because \"[The] texture was previously created with a target that doesn't match that of [the input].\" However, I created the frame buffer object by passing <code>GL_TEXTURE_2D</code> into the constructor, and am passing the same in as the target to <code>glBindTexture()</code>, so I'm not sure where I'm going wrong. There isn't much documentation online about how to correctly use <code>QOpenGLFrameBufferObject::texture()</code>.</p>\n\n<p>Other supplementary information, in case it helps:</p>\n\n<ul>\n<li>The creation of the frame buffer object doesn't set any special formats. They're left at whatever defaults Qt uses. As far as I know, this means it also has no depth or stencil attachments as of yet, though once I've got the basics working this will probably change.</li>\n<li>Binding the FBO before binding its texture doesn't seem to make a difference.</li>\n<li><code>QOpenGLFrameBufferObject::isValid()</code> returns true;</li>\n<li>Calling <code>glIsTexture()</code> on the texture handle returns false, but I'm not sure why this would be given that it's a value provided to me by Qt for the purposes of binding an OpenGL texture. The OpenGL documentation does mention that \"a name returned by glGenTextures, but not yet associated with a texture by calling glBindTexture, is not the name of a texture\", but here I can't bind it anyway.</li>\n<li>I'm attempting to bind the texture in a different context to the one the FBO was created in (ie. the <code>QOpenGLWidget</code>'s context instead of the render module's context).</li>\n</ul>\n\n<p>I'll provide some code, but a lot of what I have is specific to the systems that exist in the rendering module, so there's only a small amount of relevant OpenGL code.</p>\n\n<p>In the render module context:</p>\n\n<pre><code>QOpenGLFrameBufferObject fbo = new QOpenGLFrameBufferObject(QSize(...), GL_TEXTURE_2D);\n\n// Do some rendering in this context later\n</code></pre>\n\n<p>In the <code>QOpenGLWidget</code> context, after having rendered to the frame buffer in the rendering module:</p>\n\n<pre><code>GLuint textureId = fbo-&gt;texture();\nglBindTexture(GL_TEXTURE_2D, textureId)) // Invalid operation\n</code></pre>\n\n<hr>\n\n<p>EDIT: It turns out the culprit was that my contexts weren't actually being shared, as I'd misinterpreted what the <code>Qt::AA_ShareOpenGLContexts</code> application attribute did. Once I made them properly shared the issue was fixed.</p>\n"}, {"tags": ["c++", "visual-studio", "opengl", "nuget"], "answers": [{"tags": [], "owner": {"reputation": 51483, "user_id": 7460777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938b7ee32587b28c8634edec4a0f90c2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Liu-MSFT", "link": "https://stackoverflow.com/users/7460777/leo-liu-msft"}, "is_accepted": true, "score": 1, "last_activity_date": 1500540508, "creation_date": 1500540508, "answer_id": 45209802, "question_id": 45199669, "link": "https://stackoverflow.com/questions/45199669/c-nuget-packages-for-opengl/45209802#45209802", "title": "c++ nuget packages for opengl", "body": "<blockquote>\n  <p>Am I misusing nuget, is there something else I should have done?</p>\n</blockquote>\n\n<p>No, do not need to do anything else but just including the <code>opengl32.lib</code>.\n<code>glDrawElements</code> is a \"core\" OpenGL feature. This function resides in opengl32.dll, which you unfortunately forgot to include in your linking libs.</p>\n\n<p>Besides, Some libraries support auto-linking mechanism (for example, freeglut), that is, the header file contains a line like #prgama comment(lib, \"lib1_name.lib\").</p>\n\n<p>To resolve that LNK error, just include the <code>opengl32.lib</code> by the syntax\uff1a</p>\n\n<pre><code>#pragma comment(lib, \"opengl32.lib\")\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 45209802, "answer_count": 1, "score": 0, "last_activity_date": 1500540508, "creation_date": 1500493300, "last_edit_date": 1500493677, "question_id": 45199669, "link": "https://stackoverflow.com/questions/45199669/c-nuget-packages-for-opengl", "title": "c++ nuget packages for opengl", "body": "<p>I try to include opengl via nuget.</p>\n\n<p>This is my packages.config</p>\n\n<pre><code>  &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n  &lt;packages&gt;\n    &lt;package id=\"boost\" version=\"1.64.0.0\" targetFramework=\"Native\" /&gt;\n    &lt;package id=\"boost_atomic-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_chrono-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_date_time-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_filesystem-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_log_setup-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_log-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_system-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_thread-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"boost_unit_test_framework-vc140\" version=\"1.64.0.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"glew.v140\" version=\"1.12.0\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"glfw\" version=\"3.2.1\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"glfw.redist\" version=\"3.2.1\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"GLMathematics\" version=\"0.9.5.4\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"lua\" version=\"5.3.3\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"lua.redist\" version=\"5.3.3\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"nupengl.core\" version=\"0.1.0.1\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"nupengl.core.redist\" version=\"0.1.0.1\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"sdl2\" version=\"2.0.5\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"sdl2.redist\" version=\"2.0.5\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"turtle\" version=\"1.2.6\" targetFramework=\"native\" /&gt;\n    &lt;package id=\"unofficial.flayan.glm\" version=\"0.9.8.4\" targetFramework=\"Native\" /&gt;\n  &lt;/packages&gt;\n</code></pre>\n\n<p>It should contain all I need however i am getting an error:</p>\n\n<pre><code>LNK2019: unresolved external symbol __imp__glDrawElements@16\n</code></pre>\n\n<p>I can \"fix\" that by including <code>opengl32.lib</code>.</p>\n\n<pre><code>#pragma comment(lib, \"opengl32.lib\")\n</code></pre>\n\n<p>But I wonder if I am missing something in my packages. I was under the impression that one just adds the packages and they include the libraries into the build.</p>\n\n<p>Am I misusing nuget, is there something else I should have done?</p>\n"}, {"tags": ["c++", "cmake", "openssl", "libcrypto"], "comments": [{"owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 0, "creation_date": 1500493852, "post_id": 45199650, "comment_id": 77366785, "body": "See the right places the packages were installed with this command: <code>dpkg -L &lt;packagename&gt;</code> (if all of them were installed witih apt-get)."}, {"owner": {"reputation": 3, "user_id": 4352247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VbyPxOPwoWg/AAAAAAAAAAI/AAAAAAAAAVA/_1VSMdF7uw4/photo.jpg?sz=128", "display_name": "Saeid Hashemi", "link": "https://stackoverflow.com/users/4352247/saeid-hashemi"}, "reply_to_user": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "edited": false, "score": 1, "creation_date": 1500495891, "post_id": 45199650, "comment_id": 77367858, "body": "&quot;dpkg -L openssl&quot; returns a few locations, however &quot;dpkg -L libcrypto&quot; returns dpkg-query: package &#39;libcrypto&#39; is not installed.  Which of the results from dpkg should I pass to CMake to satisfy the OPENSSL_INCLUDE_DIRS?   How can I install libcrypto? Apt-get won&#39;t find it."}], "answers": [{"tags": [], "owner": {"reputation": 2986, "user_id": 1930814, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/k3Cu7.jpg?s=128&g=1", "display_name": "Dalton C&#233;zane", "link": "https://stackoverflow.com/users/1930814/dalton-c%c3%a9zane"}, "is_accepted": true, "score": 0, "last_activity_date": 1500496608, "creation_date": 1500496608, "answer_id": 45200547, "question_id": 45199650, "link": "https://stackoverflow.com/questions/45199650/cmake-cant-find-openssl-libcrypto-with-pkg-search-module/45200547#45200547", "title": "Cmake can&#39;t find &quot;openssl&quot; &quot;libcrypto&quot; with pkg_search_module", "body": "<p>Use <code>dpkg -L &lt;packagename&gt;</code> to see where your packages are installed.</p>\n\n<p>To install libcrypto, use <code>sudo apt-get install libssl-dev</code>.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 4352247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VbyPxOPwoWg/AAAAAAAAAAI/AAAAAAAAAVA/_1VSMdF7uw4/photo.jpg?sz=128", "display_name": "Saeid Hashemi", "link": "https://stackoverflow.com/users/4352247/saeid-hashemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2731, "favorite_count": 0, "closed_date": 1500565738, "accepted_answer_id": 45200547, "answer_count": 1, "score": 0, "last_activity_date": 1500496608, "creation_date": 1500493252, "last_edit_date": 1500494487, "question_id": 45199650, "link": "https://stackoverflow.com/questions/45199650/cmake-cant-find-openssl-libcrypto-with-pkg-search-module", "closed_reason": "Duplicate", "title": "Cmake can&#39;t find &quot;openssl&quot; &quot;libcrypto&quot; with pkg_search_module", "body": "<p>I'm building a project and in the CMakeLists.txt there are a few pkg_search_module statements, including two for openssl and libcrypto which throw errors in the build process. </p>\n\n<pre><code>pkg_search_module(LIBXML2 libxml-2.0 REQUIRED)\ninclude_directories(${LIBXML2_INCLUDE_DIRS})\n\npkg_search_module(OPENSSL openssl REQUIRED)\ninclude_directories(${OPENSSL_INCLUDE_DIRS})\n\npkg_search_module(CONFIG libconfig REQUIRED)\ninclude_directories(${CONFIG_INCLUDE_DIRS})\n\npkg_search_module(CRYPTO libcrypto REQUIRED)\ninclude_directories(${CRYPTO_INCLUDE_DIRS})\n</code></pre>\n\n<p>I have these packages installed using apt-get and the way I understand it's possible to give CMake the location of the library if it can't find it, but I'm not sure how to locate them. </p>\n\n<p>I get this output on the terminal:</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.5/Modules/FindPkgConfig.cmake:578 (message):\n   None of the required 'openssl' found\nCall Stack (most recent call first):\n  /home/openair3/openair-cn/build/CMakeLists.txt:814 (pkg_search_module)\n  CMakeLists.txt:41 (include)\n\n\nCMake Error at /usr/share/cmake-3.5/Modules/FindPkgConfig.cmake:578 (message):\n  None of the required 'libcrypto' found\nCall Stack (most recent call first):\n  /home/openair3/openair-cn/build/CMakeLists.txt:820 (pkg_search_module)\n  CMakeLists.txt:41 (include)\n</code></pre>\n\n<p>I'm using Ubuntu 16.04 on a virtual machine.</p>\n\n<p>I appreciate your advice.</p>\n"}, {"tags": ["c++", "netbeans", "embedded", "cross-platform", "gdbserver"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500495894, "post_id": 45199424, "comment_id": 77367860, "body": "I&#39;ve been programming embedded systems for a long time now, and the toolchains do not take up room on the embedded system.  I recommend using a JTAG debugger, provided your embedded system supports the interfaced.  There are many JTAG debuggers that make debugging a &quot;remote&quot; system very easy."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500530351, "post_id": 45199424, "comment_id": 77378866, "body": "@ThomasMatthews jtag debuggers are primarily for debugging bare metal programs and kernels; this question appears to be about debugging a userspace program running under an operating system, which is normally done with tools like the proposed gdbserver."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1500530818, "post_id": 45199424, "comment_id": 77379116, "body": "&quot;NetBeans isn&#39;t behaving how I would expect.&quot; questions here need to state the <i>specific</i> problem."}, {"owner": {"reputation": 73, "user_id": 3888080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9826ab0fd6d273277880d3e7985c4d5c?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/3888080/drew"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1500556135, "post_id": 45199424, "comment_id": 77397421, "body": "@ChrisStratton thank you for pointing that out, I edited for clarity"}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1500561119, "post_id": 45199424, "comment_id": 77401793, "body": "Sounds like this plugin isn&#39;t what you want.  What you need to accomplish is pointing Netbeans at the local <code>gdb</code> just as if you were going to debug locally, but then the Netbeans debugger interface code or configuration must issue the <code>target remote host:port</code> command to <code>gdb</code> (I often did this by invoking <code>gdb</code> with the commandline option to run a script of commands before going interactive).  The debugger interface must also beware of certain differences, for example a remote can <code>cont</code> but not <code>run</code>."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3888080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9826ab0fd6d273277880d3e7985c4d5c?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/3888080/drew"}, "edited": false, "score": 0, "creation_date": 1500556938, "post_id": 45206427, "comment_id": 77398152, "body": "Setting the host to localhost does not restrict access to only the loopback interface. I am able to connect from the NetBeans machine using <code>gdb&gt; target remote 169.254.174.111:6000</code>. An example of someone using gdbserver similar to how I am using it <a href=\"http://www.thegeekstuff.com/2014/04/gdbserver-example/\" rel=\"nofollow noreferrer\">can be found here</a>"}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "reply_to_user": {"reputation": 73, "user_id": 3888080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9826ab0fd6d273277880d3e7985c4d5c?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/3888080/drew"}, "edited": false, "score": 1, "creation_date": 1500560982, "post_id": 45206427, "comment_id": 77401661, "body": "@Drew - the erroneous specification of localhost for the listen end of a remote connection may be <i>ignored</i> by <code>gdbserver</code>, but it&#39;s still <i>erroneous</i> as it would cause a problem if not ignored.  A typical gdbserver &quot;comm&quot; argument (as the ordinary manpage calls it) doesn&#39;t have a host, just a colon and a port."}], "tags": [], "owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "is_accepted": false, "score": 0, "last_activity_date": 1500530758, "creation_date": 1500530758, "answer_id": 45206427, "question_id": 45199424, "link": "https://stackoverflow.com/questions/45199424/how-do-i-cross-compile-for-arm-and-debug-on-another-machine-in-netbeans/45206427#45206427", "title": "How do I cross-compile for ARM and debug on another machine in NetBeans?", "body": "<blockquote>\n  <p>gdbserver --debug localhost:6000 ~/app</p>\n</blockquote>\n\n<p>This doesn't match the invocation syntax documented for versions of <code>gdbserver</code> I'm familiar with, but even without knowing the form, the argument seems mistaken.</p>\n\n<p><strong>\"localhost\"</strong> always refers to the <em>same</em> computer, never another.  So specifying \"localhost\" would imply you were going to run <code>gdbserver</code> and <code>gdb</code> on the same machine, which negates the whole point of using <code>gdbserver</code>.</p>\n\n<p>It's unclear what your command causes <code>gdbserver</code> to do, but neither possibility is good.</p>\n\n<ul>\n<li><p>if it causes <code>gdbserver</code> to <em>listen</em> on the loopback interface rather than INADDR_ANY, then only programs running on the target itself will be able to contact the <code>gdbserver</code> process, which rules out the remote gdb.</p></li>\n<li><p>if it causes <code>gdbserver</code> to attempt to <em>connect</em> to an already running remote <code>gdb</code>, then that won't work either, as it will be attempting to connect to a non-existent <em>local</em> one.</p></li>\n</ul>\n\n<p>Likely what you want to do is something like</p>\n\n<pre><code>target&gt; gdbserver :6000 ~/app\n\ndevmachine&gt;gdb build/app\ngdb&gt; target remote target_machine_ip:6000\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3888080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9826ab0fd6d273277880d3e7985c4d5c?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/3888080/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 830, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1500557044, "creation_date": 1500492490, "last_edit_date": 1500557044, "question_id": 45199424, "link": "https://stackoverflow.com/questions/45199424/how-do-i-cross-compile-for-arm-and-debug-on-another-machine-in-netbeans", "title": "How do I cross-compile for ARM and debug on another machine in NetBeans?", "body": "<p>I am trying to set up a NetBeans x86_64 environment where I can write code and add breakpoints in the IDE, cross-compile for ARM, then run the binary on a raspberry pi (for now) running gdbserver.</p>\n\n<p>A common option is to use a remote build host to build, run, and debug the binary, but I will eventually be working on an embedded device that will not have room for a development toolchain. I am using a pi right now to learn how I will compile and debug once the embedded machines arrive. <strong>Please do not suggest using a remote build host.</strong></p>\n\n<p>Right now, my best guess has been to replace the run command with <code>./run.sh \"${OUTPUT_PATH}\"</code>, where run.sh is a small bash script that transfers the newly compiled binary to the pi, then runs <code>gdbserver --debug localhost:6000 ~/app</code>. There is <a href=\"http://plugins.netbeans.org/plugin/37426/gdbserver\" rel=\"nofollow noreferrer\">a gdbserver plugin for NetBeans</a> that I have been able to attach to, after NetBeans has transferred the binary and run gdbserver, but all that gives me is the stdout of gdb (which makes sense). What I want is setting and stepping through breakpoints using the IDE and watching variables change, but I can't seem to get that to work using this setup.</p>\n\n<p>What is the right way to do this?</p>\n"}, {"tags": ["c++", "libstdc++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1500492213, "post_id": 45199335, "comment_id": 77365796, "body": "Why not follow the obvious approach of just wrapping <i>your</i> utilities into a library and let the user link with your utilities and the standard library? There&#39;s no reason why you&#39;d need to wrap it with libstdc++. Note that, by default, the standard library is not statically linked"}, {"owner": {"reputation": 386, "user_id": 1134813, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33743095bbc2faa1cd3779dde543ec84?s=128&d=identicon&r=PG", "display_name": "Taw", "link": "https://stackoverflow.com/users/1134813/taw"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500492607, "post_id": 45199335, "comment_id": 77366032, "body": "The user does not use my library, only I use these libraries. The problem is that the user does not have libstdc++ on his device and I have to provide it (so my project works), one way or another but I have a restriction for the number of deployed files, that&#39;s why I want to deploy lib_utils.so and libstdc++.so in a single library."}, {"owner": {"reputation": 386, "user_id": 1134813, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33743095bbc2faa1cd3779dde543ec84?s=128&d=identicon&r=PG", "display_name": "Taw", "link": "https://stackoverflow.com/users/1134813/taw"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500492690, "post_id": 45199335, "comment_id": 77366082, "body": "Of course I know the obvious approach, but I want to trick it somehow(because of restrictions), that&#39;s why I asked this question.:-). My question is if it can be done or not."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1500498399, "post_id": 45199335, "comment_id": 77369196, "body": "Out of interest, how is the file count limit explained?"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500534250, "post_id": 45199335, "comment_id": 77381097, "body": "What&#39;s your target architecture? Is it ELF?"}, {"owner": {"reputation": 386, "user_id": 1134813, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33743095bbc2faa1cd3779dde543ec84?s=128&d=identicon&r=PG", "display_name": "Taw", "link": "https://stackoverflow.com/users/1134813/taw"}, "edited": false, "score": 0, "creation_date": 1500541109, "post_id": 45199335, "comment_id": 77386060, "body": "Yes, I would need this on Linux, FreeBSD and OpenBSD. I am not sure if this is possible."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 1134813, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33743095bbc2faa1cd3779dde543ec84?s=128&d=identicon&r=PG", "display_name": "Taw", "link": "https://stackoverflow.com/users/1134813/taw"}, "is_accepted": false, "score": 0, "last_activity_date": 1505137306, "last_edit_date": 1505137306, "creation_date": 1505136390, "answer_id": 46156869, "question_id": 45199335, "link": "https://stackoverflow.com/questions/45199335/combine-libstdc-and-other-functions-into-one-library/46156869#46156869", "title": "Combine libstdc++ and other functions into one library", "body": "<p>I managed to do it:</p>\n\n<pre><code>g++ -std=c++14 -Wl,-whole-archive /usr/lib/gcc/x86_64-linux-gnu/5/libstdc++.a -Wl,-no-whole-archive -shared -fPIC lib.cpp -o libviata.so\n</code></pre>\n\n<p>Then I loaded this library into a simple app and this app does not require libstdc++ anymore, cause it loads my custom library (which is quite big now, 2.1MB)</p>\n\n<pre><code>g++ -std=c++14 test.cpp -o test -L/home/tawfic/Desktop/test -lviata &amp;&amp; ldd test\n</code></pre>\n"}], "owner": {"reputation": 386, "user_id": 1134813, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33743095bbc2faa1cd3779dde543ec84?s=128&d=identicon&r=PG", "display_name": "Taw", "link": "https://stackoverflow.com/users/1134813/taw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505137306, "creation_date": 1500492116, "question_id": 45199335, "link": "https://stackoverflow.com/questions/45199335/combine-libstdc-and-other-functions-into-one-library", "title": "Combine libstdc++ and other functions into one library", "body": "<p>What I am trying to do is to have a dynamic library (lib_utils.so) that links libstdc++ statically and includes also other utility functions (created by me).\nThen I want other binaries to use this library instead of libstdc++.</p>\n\n<p>Seems stupid but I cannot deploy both lib_utils.so and libstdc++.so.6 to my customers and I try to combine them into one single library. I also want to avoid static linking with libstdc++ because I have 5 binaries that need libstdc++.</p>\n\n<p>Is this possible?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "windows", "code-signing", "cab", "authenticode"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1501014238, "post_id": 45199170, "comment_id": 77588209, "body": "It might help to know that signing is usually (always?) done after building as a separate step.  MS apps like SignTool append to the file, but are also smart enough to replace existing certs.  I&#39;d try looking at the source code for a signing tool (OSSLSignCode is one for linux) to see how they find existing certs.  If that failed I&#39;d try either working backwards from the end of file, or just scanning for &quot;this is a signature&quot; headers in the file (like how some archive tools can find the Zip archive embedded in a self-extracting file)"}, {"owner": {"reputation": 21, "user_id": 8195858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f4669a4ae6ac3066caa92f52178c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwa ", "link": "https://stackoverflow.com/users/8195858/vishwa"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1501015394, "post_id": 45199170, "comment_id": 77588822, "body": "@DaveS: That&#39;s exactly what I&#39;m doing at the moment. Modifying osslsigncode (which has no support for cab files) and also looking for patterns at the end of a file. Do you have any ideas what might be worth looking out for? SigCheck does this, but I&#39;m not sure how sigcheck works."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1501024329, "post_id": 45199170, "comment_id": 77592266, "body": "My only idea (besides looking at existing apps) is to scan for the 3 types I know have been used (MD5, SHA-1, SHA-256).  If you know the maximum size of each type, I don&#39;t expect a CAB will ever have more than 2 of them (SHA-1 + -256 together) so you can start scanning near the end of the file at length - max(sizeof(MD5), (sizeof(SHA-1) + sizeof(SHA-256)))"}], "owner": {"reputation": 21, "user_id": 8195858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f4669a4ae6ac3066caa92f52178c9c?s=128&d=identicon&r=PG&f=1", "display_name": "Vishwa ", "link": "https://stackoverflow.com/users/8195858/vishwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 769, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501013663, "creation_date": 1500491477, "last_edit_date": 1501013663, "question_id": 45199170, "link": "https://stackoverflow.com/questions/45199170/digital-signature-information-in-a-cab-file", "title": "Digital signature information in a cab file?", "body": "<p>I've been trying to check for digital signatures on .cab (Windows cabinet) files programmatically. This will likely be deployed on a linux box so I can't use WinVerifyTrust. I've been using Sigcheck to get the actual value (it will show you whether signed or not, and who signed the leaf cert) and I've also looked at <a href=\"https://stackoverflow.com/questions/6475132/detect-a-digital-signature-without-winverifytrust\">Detect a digital signature without WinVerifyTrust</a> which is pretty similar.           </p>\n\n<p>I've gotten Hex Editor Neo to scan for any relevant patterns, since my cab files are often too big for Offvis.     </p>\n\n<p>Edit: Further inspection with Neo shows the presence of certificates near the end of the file, but I'm not sure how to use this more generally.</p>\n\n<p>How do you know if a cab file has been signed? What fields do you look for? \nIs there something similar to  IMAGE_DIRECTORY_ENTRY_SECURITY in PE files? Whether you can write a class to describe its structure or just scan for particular fields using a hexdumper, I'm open to any suggestions. \nMy plan is to eventually write a struct for it when I can get a hold on how to represent a signed cab file.       </p>\n\n<p>Edit: Getting back to it after a couple days, it seems CAB file signatures begin at an arbitrary distance from the end of the actually cabinets. You can see the hex bytes of the cert from a Hex Editor, or using SigCheck to verify if the file is just signed or not. But no logic suggests itself to me as for how to account for this.<br>\nAny insights? </p>\n"}, {"tags": ["html", "c++", "qt", "get"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500492639, "post_id": 45199127, "comment_id": 77366056, "body": "Use  QTextDocument"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8260898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194487fcd5f04ff0c8d9ff2bb7af5448?s=128&d=identicon&r=PG&f=1", "display_name": "lrmlrm97", "link": "https://stackoverflow.com/users/8260898/lrmlrm97"}, "is_accepted": false, "score": 1, "last_activity_date": 1500512837, "last_edit_date": 1500512837, "creation_date": 1500492389, "answer_id": 45199398, "question_id": 45199127, "link": "https://stackoverflow.com/questions/45199127/strange-encoding-on-http-get-response-in-qt/45199398#45199398", "title": "Strange Encoding on HTTP GET response in Qt", "body": "<p>I finally figured it out. One of the headers I was sending was</p>\n\n<pre><code>request.setRawHeader(\"Accept-Encoding\", \"gzip, deflate\");\n</code></pre>\n\n<p>which was causing the response to be compressed. Once I removed this line, everything worked perfectly.</p>\n"}], "owner": {"reputation": 71, "user_id": 8260898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194487fcd5f04ff0c8d9ff2bb7af5448?s=128&d=identicon&r=PG&f=1", "display_name": "lrmlrm97", "link": "https://stackoverflow.com/users/8260898/lrmlrm97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500512837, "creation_date": 1500491330, "question_id": 45199127, "link": "https://stackoverflow.com/questions/45199127/strange-encoding-on-http-get-response-in-qt", "title": "Strange Encoding on HTTP GET response in Qt", "body": "<p>I am trying to simulate webpage activity through Qt (5.8) using QNetworkAccessManager. I have been using the FireBug plugin of Firefox to analyze each Get/Post request, copying the appropriate headers. On my initial GET request, I get a QNetworkReply object. I have inspected all of the headers, and it is the corrent response. However, when I try and read the data, I get a strange format. When viewing this packet in Wireshark, the HTML response shows up as it does in FireBug, something like:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n    &lt;meta http-equiv=\"Content-language\" content=\"en\" /&gt;...\n</code></pre>\n\n<p>However, when I am reading my response to a QByteArray, the debugger says that this variable is:</p>\n\n<pre><code>\\037\\213\\010\\000\\000\\000\\000\\000\\000\\003\u00b5W[S\u00db8\\024~\u00c6\u00bfB\u00d5\u00ccN\u00e0\u00c1v\\234\\033\\t$\u00d9\\013\\224\u00b6;)0\\020\u00a6\u00bbO...\n</code></pre>\n\n<p>and when saving this QByteArray to a text file, it looks like this: </p>\n\n<pre><code>\u2039      \u00b5W[S\u00db8~\u00c6\u00bfB\u00d5\u00ccN\u00e0\u00c1v\u0153    $\u00d9\u201d\u00b6;)0\u00a6\u00bbO\u00d9\u2013mQ\u00d9r%\u2122\u00c0\u00ee\u00ec\u00df#_s-\u00dday \u00f2\u00d1\u00b9|\n\u00e7*\u00c9\u00b2\u00a6\u00ef\u017d\u00cf\u017d\u2013\u017e\u00bfG\u2030N9:\u00bf\u00fam\u00f1\u00e9a\u00dbu\u00bf\u00f4\\\u00f7xy\u0152\u00fe\u00f8\u00b8\u00fc\u00bc@\u017e\u00d3EKI2\u00c54\u00e1\u00ae\u00fb\u00fe#\u00ee\u00ad\u00f5l\u00dd\u00dauB\u00e2\u00b95-\n\u2022\u00de\u00a6&lt;S3\u0153h\u00b8\u00eez\u00bdv\u00d6}G\u00c8\u00d8\u00f5&amp;\u201cI%\n\u00d3'Y&lt;\u00c34\u00c3h\u00b32:(    \u00e7\u00d6\u00ce4\u00a5\u0161 \u00a3\u00c4\u00a6\u00df\nv3\u00c3G\"\u00d34\u00d3\u00f6\u00f2.\u00a7\u00d5\u00d7kz\u00ab]\u00a3\u00f4    \u2018\u0160\u00ea\u00d9\u00d5\u00f2\u00c4c\u00e4\u00be\u00a8\u00c6\u00d8,H\u00dcVe\u00a0&lt;-Dos&amp;\u00a9j\u00f1\u00da\u00des\u00bc\u00b9$qJZ\u00ac\u2122\u00b0$\n\u00b4-\u2018\u201d\u00ce0)t\"d\u2039\u00f53\u2018\u0161e\u00e8#\u00b9\u00e1D?\u00e6D~'Y\u0153\u00e8\u2013\n</code></pre>\n\n<p>Can anyone tell me what I am doing wrong? I feel like it is an encoding issue. My code looks like:</p>\n\n<pre><code>void MainWindow::replyFinished(QNetworkReply *reply)\n{\n    if (reply-&gt;error() == QNetworkReply::NoError)\n    {\n        QByteArray getResponse = reply-&gt;readAll();\n        QList&lt;QNetworkReply::RawHeaderPair&gt; headers = reply-&gt;rawHeaderPairs();\n        output(QString(getResponse));\n        QFile file(\"C:/Users/lrmlrm97/Desktop/Response.txt\");\n        if (file.open(QFile::WriteOnly))\n        {\n            for (int i = 0; i &lt; headers.size(); i++)\n            {\n                file.write(headers.at(i).first + \": \" + headers.at(i).second);\n                file.write(\"\\r\\n\");\n            }\n            file.write(\"\\r\\n\\r\\n\");\n            file.write(getResponse);\n            file.write(\"\\r\\n\\r\\n\");\n            file.close();\n        }\n    }\n}\n</code></pre>\n\n<p>Many thanks!</p>\n\n<p>Lucas</p>\n"}, {"tags": ["c++", "linux", "windows", "portability"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 11, "creation_date": 1500491084, "post_id": 45199037, "comment_id": 77365170, "body": "The behavior of <code>%p</code> is <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf#Parameters\" rel=\"nofollow noreferrer\">implementation defined</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500491237, "post_id": 45199037, "comment_id": 77365260, "body": "Probably what you&#39;d want to do is use <code>uintptr_t</code>. Something like <code>std::cout &lt;&lt; std::hex &lt;&lt; reinterpret_cast&lt;std::uintptr_t&gt;(myPointer)</code>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1500491558, "post_id": 45199037, "comment_id": 77365445, "body": "Use <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\"><code>0x%X</code></a>? not sure if its 100% equivalent."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1500491791, "post_id": 45199037, "comment_id": 77365569, "body": "@Borgleader: It&#39;s not. <code>0x%X</code> requires an argument of type <code>unsigned int</code>; giving it a pointer has undefined behavior. It might happen to work if <code>unsigned int</code> and pointers are the same size (which they very commonly are not); that&#39;s always a possible result of undefined behavior."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1500491842, "post_id": 45199037, "comment_id": 77365602, "body": "Your question is tagged both C and C++. They&#39;re two different languages. Which one are you using? (On rare occasions, you might want to write code that works correctly in both languages; if so, please state that in the question.)"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1500492314, "post_id": 45199037, "comment_id": 77365856, "body": "@KeithThompson What if you were to choose between <code>%lX</code> and <code>%llX</code> based on pointer size? Would that be correct?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1500492506, "post_id": 45199037, "comment_id": 77365977, "body": "@Borgleader <a href=\"http://en.cppreference.com/w/c/types/integer#Format_macro_constants\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/types/integer#Format_macro_constants</a>"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1500492541, "post_id": 45199037, "comment_id": 77365994, "body": "@KeithThompson i have updated the question. It&#39;s in C++"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1500493088, "post_id": 45199037, "comment_id": 77366333, "body": "@Justin There is no specification how a pointer is converted to <code>uintptr_t</code>. Only the conversion to/from those is guaranteed to work."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1500496066, "post_id": 45199037, "comment_id": 77367977, "body": "@Borgleader:  The <code>%x</code> format will not work for pointers of the for <i>segment:offset</i>, such as with some of the Intel platforms.  The <code>%x</code> format assumes a linear addressing space."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1500503510, "post_id": 45199037, "comment_id": 77371289, "body": "@Borgleader: No. <code>%lX</code> requires an argument of type <code>unsigned long</code>, and <code>%llX</code> requires an argument of type <code>unsigned long long</code>. Passing a pointer is still undefined behavior. It&#39;s likely to work, but for example a system might pass pointers and integers in different registers."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500495440, "post_id": 45199655, "comment_id": 77367607, "body": "I&#39;ll want to try this solution but i need to be able to programatically at runntime detect every occurrence of <code>%p</code> in the format string and replace it with <code>PRIXPTR</code>. How can i do that? (detecting is easy but how do i replace the <code>p</code> which is a string, with a macro?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500495595, "post_id": 45199655, "comment_id": 77367693, "body": "@darkThoughts Note that the format macro constants are <code>#define</code>s for a string literal. For example, on coliru, <code>PRIxPTR</code> is the same as <code>&quot;lx&quot;</code> (of course the actual value will be different on different platforms). So you could find occurrences of <code>&quot;%p&quot;</code> and replace them with <code>&quot;%&quot; PRIxPTR</code> (which, on coliru, is equivalent to <code>&quot;%lx&quot;</code>)"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500496294, "post_id": 45199655, "comment_id": 77368107, "body": "but since the define is platform dependent i can&#39;t just statically replace the occurrences of <code>&quot;%p&quot;</code> with <code>&quot;%X&quot;</code> or <code>&quot;%llX&quot;</code> - i have to replace them with the define. How can i do this?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500496409, "post_id": 45199655, "comment_id": 77368171, "body": "@darkThoughts <code>&quot;some string with %p in the middle&quot;</code> -&gt; <code>&quot;some string with %&quot; PRIXPTR &quot; in the middle&quot;</code>"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500496511, "post_id": 45199655, "comment_id": 77368231, "body": "How do i do this replacement - do i need to split the original string around <code>p</code>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500496668, "post_id": 45199655, "comment_id": 77368310, "body": "@darkThoughts It&#39;s not clear what you are asking. If you are looking to do a search-and-replace on your code base, it will take time, but you can search for occurrences of <code>%p</code>, ensure it is the case you want, and replace it with <code>%&quot; PRIXPTR &quot;</code>. If you are taking the format string as input, you can do something similar (but note that if you are taking the format string as input, <a href=\"https://security.stackexchange.com/q/43574\">that is a vulnerability</a>)"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500496925, "post_id": 45199655, "comment_id": 77368462, "body": "I am taking it as an input from a remote session. So how would i replace it in that case? I sounds like i have to in runtime split the string: <code>&quot;before %p after&quot;</code> around <code>p</code> to those parts - <code>&quot;before %&quot;</code> and <code>&quot; after&quot;</code> and then send to <code>vsnprintf </code> the following as format string: <code>&quot;before %&quot; PRIxPTR &quot; after&quot;</code>. correct?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500497016, "post_id": 45199655, "comment_id": 77368513, "body": "@darkThoughts Basically"}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500497448, "post_id": 45199655, "comment_id": 77368732, "body": "By the way - i don&#39;t see a need for <code>reinterpret_cast</code> -= it works the same when i pass <code>&amp;param</code> instead of <code>auto* addr=&amp;param</code> and then sending <code>reinterpret_cast(addr)</code>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "edited": false, "score": 0, "creation_date": 1500497743, "post_id": 45199655, "comment_id": 77368873, "body": "@darkThoughts You can do <code>reinterpret_cast&lt;std::uintptr_t&gt;(&amp;param)</code>, but if you just passed <code>&amp;param</code>, I believe that would be undefined behavior."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1500493268, "creation_date": 1500493268, "answer_id": 45199655, "question_id": 45199037, "link": "https://stackoverflow.com/questions/45199037/c-printf-p-specifier-behaves-differently-in-linux-and-windows/45199655#45199655", "title": "C++ printf %p specifier behaves differently in Linux and Windows", "body": "<p>The string <code>%p</code> prints is <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf#Parameters\" rel=\"nofollow noreferrer\">implementation defined</a>. That's why the behaviour is different on Linux and Windows. If you wanted consistent behaviour, you'd have to implement your own version.</p>\n\n<p>Using <a href=\"http://en.cppreference.com/w/cpp/types/integer#Types\" rel=\"nofollow noreferrer\"><code>uintptr_t</code></a>, we can have an integer that can hold a pointer. So we can <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast#Explanation\" rel=\"nofollow noreferrer\"><code>reinterpret_cast</code></a> the pointer into it. Note that, although the conversion will succeed, it's not specified what the value will hold.</p>\n\n<p>Then, we can print the integer as hex, either using <a href=\"http://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\"><code>std::hex</code></a> or the appropriate <a href=\"http://en.cppreference.com/w/cpp/types/integer#Format_macro_constants\" rel=\"nofollow noreferrer\">format macro constant</a>:</p>\n\n<pre><code>auto* myPointer = ...;\nstd::cout &lt;&lt; std::hex &lt;&lt; reinterpret_cast&lt;std::uintptr_t&gt;(myPointer) &lt;&lt; '\\n';\nstd::printf(\"%\" PRIxPTR \"\\n\", reinterpret_cast&lt;std::uintptr_t&gt;(myPointer));\n</code></pre>\n\n<p><sup><a href=\"http://coliru.stacked-crooked.com/a/c9d67d89142cbe0d\" rel=\"nofollow noreferrer\">Demo</a></sup></p>\n\n<p>The exact formatting would be up to you.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1500504765, "creation_date": 1500504765, "answer_id": 45202339, "question_id": 45199037, "link": "https://stackoverflow.com/questions/45199037/c-printf-p-specifier-behaves-differently-in-linux-and-windows/45202339#45202339", "title": "C++ printf %p specifier behaves differently in Linux and Windows", "body": "<p>As <a href=\"https://stackoverflow.com/a/45199655/827263\">Justin's answer</a> suggests, you can convert the pointer to <code>uintptr_t</code> and format it as you like. This is likely to be 99% portable -- and since you're probably concerned with just Linux and Windows, that's probably good enough. (It can fail on a system where no integer type is big enough to hold a pointer value without loss of information. Such a system won't define <code>uintptr_t</code>. You're unlikely to encounter such a system.)</p>\n\n<p>Another approach is to format the pointer as a string using a <code>%p</code> format, and then manipulate the resulting string to get the consistent results you want. It probably makes sense to create a function that takes a <code>void*</code> argument and returns a <code>std::string</code>.</p>\n\n<p>Here's my attempt (I make no claim that this is good C++ code). It deletes a leading <code>0x</code> or <code>0X</code> if it exists, and it maps all remaining characters to upper case.</p>\n\n<p>Tweak the <code>for</code> loop if you don't have a C++11 compiler.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdio&gt;\n#include &lt;cctype&gt;\n\nstd::string hex(void* ptr) {\n    const int big_enough = 100;\n    char s[big_enough];\n    std::snprintf(s, sizeof s, \"%p\", ptr);\n    std::string result = s;\n    std::string prefix = result.substr(0, 2);\n    if (prefix == \"0x\" || prefix == \"0X\") {\n        result = result.substr(2);\n    }\n    for (auto &amp;&amp;c : result) {\n        c = std::toupper((unsigned char)c);\n    }\n    return result;\n}\n\nint main() {\n    int n;\n    int *ptr = &amp;n;\n    std::printf(\"Using %%p:  %p\\n\", (void*)ptr);\n    std::cout &lt;&lt; \"Using hex(): \" &lt;&lt; hex((void*)ptr) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The output on my Linux system is:</p>\n\n<pre><code>Using %p:  0x7ffd6e8ca884\nUsing hex(): 7FFD6E8CA884\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500504765, "creation_date": 1500490984, "last_edit_date": 1500492513, "question_id": 45199037, "link": "https://stackoverflow.com/questions/45199037/c-printf-p-specifier-behaves-differently-in-linux-and-windows", "title": "C++ printf %p specifier behaves differently in Linux and Windows", "body": "<p>I have a code in C++ that's suppose to work on Linux and Windows. </p>\n\n<p>Part of the code includes using <code>vsnprintf</code> in order to get a string using a format string and params. </p>\n\n<p>I notices that whenever the format string contains %p the results are different on Linux and Windows - Windows doesn't prefix the result with 0x while linux does, and also windows uses uppercase for the letters of the address while Linux uses lowercase. </p>\n\n<p>I couldn't find flags to make the two versions be identical.</p>\n\n<p>My preference is to make the Linux version behave like the Windows one (since the Windows code is the original so that's how the program is expected to behave).</p>\n\n<p>And if it's not possible to change the behavior of <code>vsnprintf</code> in Linux i would like a method to \"fix\" the strings that contain %p after <code>vsnprintf</code> outputs them (in an efficient way). </p>\n"}, {"tags": ["c++", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1500490580, "post_id": 45198845, "comment_id": 77364861, "body": "What&#39;s your question? You literally just posted a description of your pgoram."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1500490614, "post_id": 45198845, "comment_id": 77364879, "body": "What did you observe when stepping through your code using the debugger?"}, {"owner": {"reputation": 1, "user_id": 8333561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43c69563c35b6b1926f3ac0ddc09e92e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Aguilera", "link": "https://stackoverflow.com/users/8333561/jonathan-aguilera"}, "edited": false, "score": 0, "creation_date": 1500490760, "post_id": 45198845, "comment_id": 77364971, "body": "Well I keep receiving a segmentation fault so I was wondering if somebody could help me fix it."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500490946, "post_id": 45198845, "comment_id": 77365095, "body": "Please post a <a href=\"https://stackoverflow.com/help/mcve\">MCVe</a> with an example of inputs that cause a segmentation fault."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500490994, "post_id": 45198845, "comment_id": 77365114, "body": "Run the code in the debugger than came with your development environment. The debugger will halt execution when it segfaults. Use the debugger to inspect the variables involved and the backtrace to see how you got there."}, {"owner": {"reputation": 1, "user_id": 8333561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43c69563c35b6b1926f3ac0ddc09e92e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Aguilera", "link": "https://stackoverflow.com/users/8333561/jonathan-aguilera"}, "edited": false, "score": 0, "creation_date": 1500491416, "post_id": 45198845, "comment_id": 77365372, "body": "Coordinates start_c; //constructor sets coordinates to (0,0);     Data data1; //constructor automatically inserts letter &#39;a&#39;     Node *start = newNode(data1, start_c);     insertNode(start, data1, moveNorth(start_c), start_c);// this should insert start-&gt;north."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500491863, "post_id": 45198845, "comment_id": 77365617, "body": "@JonathanAguilera Edit your post to include that example (instead of as a comment) in a formatted code tag."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1500492526, "post_id": 45198845, "comment_id": 77365987, "body": "If only I could have a dollar for every question about a linked list on SO... Regardless, I&#39;m certain your question has been asked before. Have you tried looking at other questions about linked lists on SO? Have you tried using a debugger, as other commentators have suggested? If you&#39;re in school, have you talked to any classmates or TA&#39;s or the professor for help?"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "is_accepted": false, "score": 0, "last_activity_date": 1500492829, "last_edit_date": 1500492829, "creation_date": 1500491519, "answer_id": 45199180, "question_id": 45198845, "link": "https://stackoverflow.com/questions/45198845/recursive-insert-function-for-node-with-4-pointers-returns-null/45199180#45199180", "title": "Recursive insert function for Node with 4 pointers returns null", "body": "<p>I would hazard a guess that your <code>if (node == null)</code> branch isn't working how you intended.</p>\n\n<p><em>Assuming</em> that <code>compare_coordinates</code> returns true if the current position is \"where you need to be\", you'll immediately return a new node. <strong>This doesn't add the new node into the mesh you're building</strong>, so the next time you try to get to that node, it'll be generated again.</p>\n\n<p>Similarly, if <code>compare_coordinates</code> returns false, it looks like you're just giving up the search - the approach I believe you had in mind would likely add a new \"empty\" node at the current location, then recurse on that node with the current parameters to \"get to where you need to be\".</p>\n\n<p>All speculation, as there's no comments and explanations of vital parts of the code are missing, but this would result in your grid never expanding beyond a single central node, which could cause null-pointer dereferences causing segfaults.</p>\n"}], "owner": {"reputation": 1, "user_id": 8333561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43c69563c35b6b1926f3ac0ddc09e92e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Aguilera", "link": "https://stackoverflow.com/users/8333561/jonathan-aguilera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1500492829, "creation_date": 1500490403, "last_edit_date": 1500491400, "question_id": 45198845, "link": "https://stackoverflow.com/questions/45198845/recursive-insert-function-for-node-with-4-pointers-returns-null", "title": "Recursive insert function for Node with 4 pointers returns null", "body": "<p>I am building essentially a linked lists that can travel in 4 different directions. The vital concepts are as follows:</p>\n\n<ul>\n<li><code>Node</code> is a class in this scenario, with four <code>Node</code> pointers as class members.</li>\n<li><code>Data</code> and <code>Coordinates</code> are also classes. <code>Data</code> is simply data that the node will contain.</li>\n<li><code>raw_coordinates</code> are the coordinates that the new node should have.</li>\n<li><code>Position</code> is the coordinates of the current node.</li>\n<li><code>moveNorth</code>, <code>moveSouth</code>, <code>moveEast</code>, and <code>moveWest</code> return a new coordinate that reflect a change in position. For example, the position node might have coordinates (0,0). <code>moveNorth</code> takes the position and returns (0,1). </li>\n</ul>\n\n<p>Lastly I would like to state that I am not concerned with the child node not point to the parent node. (i.e not interested if the node, node->north, has a valid node->south that returns to the previous node).</p>\n\n<p>The issue is that my function returns <code>null</code>. Here is my code:</p>\n\n<pre><code>Node* Map::insertNode(Node *node, Data raw_data, Coordinates raw_coordinates, Coordinates position)\n{\n    if (node == NULL)\n    {\n        if (compare_coordinates(raw_coordinates, position))\n        {\n            return (newNode(raw_data, raw_coordinates));\n        }\n        else\n        {\n            return node;\n        }\n    }\n    else\n    {\n        if (insertNode(node-&gt;north,raw_data, raw_coordinates, moveNorth(position)) != NULL)\n        {\n            node-&gt;north = insertNode(node-&gt;north, raw_data, raw_coordinates, moveNorth(position));\n        }\n        else if (insertNode(node-&gt;south,raw_data, raw_coordinates, moveSouth(position)) != NULL)\n        {\n            node-&gt;south = insertNode(node-&gt;south, raw_data, raw_coordinates, moveSouth(position));\n        }\n        else if (insertNode(node-&gt;west, raw_data, raw_coordinates, moveWest(position)) != NULL)\n        {\n            node-&gt;west = insertNode(node-&gt;west, raw_data, raw_coordinates, moveWest(position));\n        }\n        else if (insertNode(node-&gt;east, raw_data, raw_coordinates, moveEast(position)) != NULL)\n        {\n            node-&gt;east = insertNode(node-&gt;east, raw_data, raw_coordinates, moveEast(position));\n        }\n\n        return node;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1500497905, "post_id": 45198715, "comment_id": 77368959, "body": "Look at the source code -- <code>libs&#47;mpl&#47;preprocessed</code>"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1500498508, "post_id": 45198715, "comment_id": 77369245, "body": "Why all the close requests asking for MCVE? Based on Boost sources, 50 seems to be a limit of the files generated in MPL, and I&#39;ve yet to find official documentation elaborating on this (I&#39;d welcome to be proven wrong). At most a downvote for not digging through the source enough, since it didn&#39;t really take too long to find the Python scripts that appear to generate it. Nevertheless, is still seems like a useful question, and one that can be answered without further clarification."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1500528618, "post_id": 45198715, "comment_id": 77378163, "body": "surely its about time that mpl was modified to use variadics!!"}], "owner": {"reputation": 21, "user_id": 8333699, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MVTsdReUxa4/AAAAAAAAAAI/AAAAAAAAAGY/yWAw7I7lKrs/photo.jpg?sz=128", "display_name": "Srinivas Karuparthi", "link": "https://stackoverflow.com/users/8333699/srinivas-karuparthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "closed_date": 1500513299, "answer_count": 0, "score": 2, "last_activity_date": 1500508095, "creation_date": 1500490004, "last_edit_date": 1500508095, "question_id": 45198715, "link": "https://stackoverflow.com/questions/45198715/how-to-get-more-than-50-transitions-in-boost-msm", "closed_reason": "Not suitable for this site", "title": "How to get more than 50 transitions in boost msm?", "body": "<p>I am using boost msm to implement HSM and I am at the point where the maximum number of transitions possible is 50. I looked at some blog posts and they said that if we create /mpl/vector/vector60.hpp, it should work. I tried and this is the error I get </p>\n\n<p><a href=\"https://i.stack.imgur.com/bU7a4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bU7a4.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am wondering how I am generate these vector60, vector70.hpp .. files or map60, map70.hpp files so that I can get more transitions.</p>\n"}, {"tags": ["c++", "istream"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1500488792, "post_id": 45198325, "comment_id": 77363812, "body": "<a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_ios/operator_bool</a>"}, {"owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1500488949, "post_id": 45198325, "comment_id": 77363912, "body": "@MooingDuck So when can a stream encounter some error: can you give me some examples, links?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1500489375, "post_id": 45198325, "comment_id": 77364152, "body": "Gurav <code>int x, cin &gt;&gt; x;</code> with user input &quot;FUBAR!&quot;, which cannot be converted to an <code>int</code>. It&#39;s a bit harder with a <code>char</code>."}, {"owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500489602, "post_id": 45198325, "comment_id": 77364275, "body": "@user4581301 An what if there is nothing to input, just plain cin -&gt; I&#39;ve edited the question please have a look."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1500489696, "post_id": 45198325, "comment_id": 77364336, "body": "@Gaurav <code>cin</code> is not in an error state &quot;when it&#39;s not constructed&quot;. It&#39;s in a bad state when it encounters errors while extracting data. An example of how it could fail in your snippet is if it encounters an end of file, such as if your program&#39;s input is being piped from a file or from another program that&#39;s ended."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1500489023, "last_edit_date": 1592644375, "creation_date": 1500489023, "answer_id": 45198446, "question_id": 45198325, "link": "https://stackoverflow.com/questions/45198325/seems-redundant-use-of-cin-as-a-condition-with-if-while/45198446#45198446", "title": "Seems redundant use of cin as a condition with if, while", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/io/cin\" rel=\"nofollow noreferrer\"><code>std::cin</code></a> is an instance of <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream\" rel=\"nofollow noreferrer\"><code>std::basic_istream&lt;char&gt;</code></a>. Since it's being used in the context of a condition, we are interested it's <code>bool</code> conversion operator. From <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool</a> :</p>\n<blockquote>\n<p>std::basic_ios::operator bool</p>\n<p>Returns true if the stream has no errors and is ready for I/O operations. Specifically, returns !fail()</p>\n</blockquote>\n<p>From the documentation, it's clear that <code>if(cin)</code> is meant to check if <code>cin</code> had any errors. More precisely, it's saying <em>&quot;if <code>cin</code> did not encounter an error during it's last operation&quot;</em>.</p>\n<p>The condition in <code>if(cin&amp;&amp;c=='n')</code> follows the same principal, but also checks that the input stream supplied <code>n</code>. In other words, <em>&quot;if <code>cin</code> did not encounter an error and returned the character <code>n</code>&quot;</em>.</p>\n"}], "owner": {"reputation": 203, "user_id": 7939838, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/261f98e589f851d7b69e983f217f82ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/7939838/gaurav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1500495304, "accepted_answer_id": 45198446, "answer_count": 1, "score": 0, "last_activity_date": 1500489433, "creation_date": 1500488688, "last_edit_date": 1500489433, "question_id": 45198325, "link": "https://stackoverflow.com/questions/45198325/seems-redundant-use-of-cin-as-a-condition-with-if-while", "closed_reason": "Duplicate", "title": "Seems redundant use of cin as a condition with if, while", "body": "<p>I got a code which seems redundant to me:</p>\n\n<pre><code>    char c;\n    cin&gt;&gt;c;\n    if(cin&amp;&amp;c=='n')\n    //do something\n</code></pre>\n\n<p>I don't understand the value of introducing <strong>cin</strong> in if, Isn't it always going to have <strong>TRUE</strong> value as I've never encountered any case (in my limited experience) where this istream object is not constructed.</p>\n\n<p>Similarly I've seen this as well:</p>\n\n<pre><code>     if(cin)\n</code></pre>\n\n<p>Please correct me where am I going wrong. Now folks don't post the error-in-stream part as that I already know, the major part is when does a stream fails apart from failure of\n<strong>ios_base::Init</strong></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1500491217, "post_id": 45198117, "comment_id": 77365250, "body": "Are you trying to deploy the app? If so, have you read Qt&#39;s deployment instructions?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500491250, "post_id": 45198117, "comment_id": 77365265, "body": "You probably have a different version of Qt binaries somewhere in your PATH environment variable."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8260898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194487fcd5f04ff0c8d9ff2bb7af5448?s=128&d=identicon&r=PG&f=1", "display_name": "lrmlrm97", "link": "https://stackoverflow.com/users/8260898/lrmlrm97"}, "is_accepted": true, "score": 1, "last_activity_date": 1500492096, "creation_date": 1500492096, "answer_id": 45199327, "question_id": 45198117, "link": "https://stackoverflow.com/questions/45198117/error-in-executing-exe-file-from-qtrelease-generated-file/45199327#45199327", "title": "Error in executing .EXE file from Qt(release) generated file", "body": "<p>You need to run windeployqt on the executable. To do this, put the executable in its own folder, find out where the windeployqt tool is located (mine is in C:\\Qt\\5.8\\mingw53_32\\bin), open a command prompt window, and run the tool with the executable as its argument. For example, if my executable was located at \"C:\\Users\\lrmlrm97\\Desktop\\Program\\program.txt\", I would run:</p>\n\n<pre><code>cd C:\\Qt\\5.8\\mingw53_32\\bin\\\n\nwindeployqt.exe C:\\Users\\lrmlrm97\\Desktop\\Program\\program.exe\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8333027, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HydlkavAHqY/AAAAAAAAAAI/AAAAAAAAHxw/T8b04tyJfKU/photo.jpg?sz=128", "display_name": "Ricardo Sutana", "link": "https://stackoverflow.com/users/8333027/ricardo-sutana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 45199327, "answer_count": 1, "score": -1, "last_activity_date": 1500492096, "creation_date": 1500488040, "last_edit_date": 1500488240, "question_id": 45198117, "link": "https://stackoverflow.com/questions/45198117/error-in-executing-exe-file-from-qtrelease-generated-file", "title": "Error in executing .EXE file from Qt(release) generated file", "body": "<p>I`m trying to run my .EXE file from my project folder. However when I double click on the file, this error show up:</p>\n\n<blockquote>\n  <p>The procedure entry point <strong>?toLatin1@QString@@QGBE?AVQByteArray@@XZ</strong> could not be located at dynamic library C:.......\\MyProject.exe.</p>\n</blockquote>\n\n<p>When I run this code on Qt(release) I don't have any issues to solve.</p>\n\n<p>I`m using :\nQt 5.8.0 MSVC 2015 x86/\nVS 2015 compiler x86/\nOpenCV-2.4.13/\nWindow 10 w/ Windows kits</p>\n\n<p>Does anyone could help-me?</p>\n"}, {"tags": ["c++", "qt", "opencv", "visual-studio-2017"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500489854, "post_id": 45198053, "comment_id": 77364436, "body": "Now this QT project?"}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500490021, "post_id": 45198053, "comment_id": 77364534, "body": "You need to copy .dll files into working directory"}, {"owner": {"reputation": 11, "user_id": 8234322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a25577c9a4027d277636ac4908730bc?s=128&d=identicon&r=PG&f=1", "display_name": "sa5mmm", "link": "https://stackoverflow.com/users/8234322/sa5mmm"}, "reply_to_user": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500491023, "post_id": 45198053, "comment_id": 77365130, "body": "I have copied opencv_highgui320.dll and Qt5Test.dll into myProject folder, but I am still getting the same error. I even went to project properties Configuration properties -&gt; Linker -&gt; General and added C:\\Users\\user\\Documents\\Visual Studio 2017\\projects\\myProject\\myProject in Additional Library Directories. And I am getting the same errors. Also, this is not a Qt project it is a Visual Studio Project that I am trying to use Qt features with."}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500491517, "post_id": 45198053, "comment_id": 77365428, "body": "And you intanavil Qt Visual Studio Tools???"}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500491737, "post_id": 45198053, "comment_id": 77365534, "body": "<a href=\"http://download.qt.io/official_releases/vsaddin/qt-vs-tools-msvc2015-2.0.0.vsix\" rel=\"nofollow noreferrer\">Visual Studio Add-in 2.0.0 for Qt5 MSVC 2015</a>"}, {"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1500492122, "post_id": 45198053, "comment_id": 77365750, "body": "And then open an empty project on the qt creator, then with the help of V Studio open the qt  project, automatically all the library qt at will"}], "owner": {"reputation": 11, "user_id": 8234322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a25577c9a4027d277636ac4908730bc?s=128&d=identicon&r=PG&f=1", "display_name": "sa5mmm", "link": "https://stackoverflow.com/users/8234322/sa5mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 721, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1588443383, "creation_date": 1500487868, "question_id": 45198053, "link": "https://stackoverflow.com/questions/45198053/procedure-entry-point-could-not-be-located-using-qt-with-opencv-and-opencv-contr", "title": "Procedure entry point could not be located Using QT with OpenCV and OpenCV_contrib in Visual Studio", "body": "<p>I am using Visual Studio 2017, OpenCV 3.2.0, OpenCV_contrib 3.2.0, QT 5.6.2, and CMake 3.8.2</p>\n\n<p>I had made a program using OpenCV 3.2.0, and it worked previously, but I wanted to use the extra modules in OpenCV_contrib and the GUI in QT with my project, so I recompiled OpenCV with the above versions. I did not change the program at all yet, and when I run the program it builds but I get these two errors, then the program closes:</p>\n\n<pre><code>The procedure entry point\n?toLower@QString@@QEHAA?AV1@XZ could not be located in the dynamic link library\nC:\\QT\\QT5.6.2\\5.6\\msvc2015_64\\bin\\QT5Test.dll\n</code></pre>\n\n<p>And I get this as well:</p>\n\n<pre><code>The procedure entry point\n?toLatin1@QString@@QEGBA?AVQByteArray@@XZ could not be located in the dynamic link library\nC:\\opencv\\opencv\\build\\install\\x64\\vc15\\bin\\opencv_highgui320.dll.\n</code></pre>\n\n<p>I have also tried to build the program with</p>\n\n<pre><code>//#include&lt;opencv/highgui.hpp&gt;\n</code></pre>\n\n<p>commented, but I still get the second error.</p>\n\n<p>I am not sure what this means, and I looked for the file in question and I found it, but I'm not sure what I'm supposed to do after that. Also, I am using Visual Studio when I get these pop up errors. I have not used QT Creator to create a project. This would be my first time.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1500486163, "post_id": 45197519, "comment_id": 77362286, "body": "What does the actual error text say?  Do note that a struct/class body must end with a <code>;</code>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 6, "creation_date": 1500486245, "post_id": 45197519, "comment_id": 77362334, "body": "You should read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1500486332, "post_id": 45197519, "comment_id": 77362399, "body": "If this is not a learning exercise, just use <code>std::set&lt;T&gt;</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1500486354, "post_id": 45197519, "comment_id": 77362411, "body": "Something to read: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std\u201d considered bad practice?</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1500488042, "post_id": 45197519, "comment_id": 77363345, "body": "It looks like you&#39;re attempting a fusion of C++, Java, and C based on guesswork. Get yourself a good book."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 6, "last_activity_date": 1500487160, "last_edit_date": 1500487160, "creation_date": 1500486236, "answer_id": 45197565, "question_id": 45197519, "link": "https://stackoverflow.com/questions/45197519/basic-creation-set-in-c/45197565#45197565", "title": "Basic creation set in c++", "body": "<p>Your code is illegal (and wrong in many places, so take a few days to read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> then look at some <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">C++ reference</a> website). You can't declare a variable length array as a member of a <code>struct</code> or <code>class</code> (and even if you could, you have the wrong syntax; some compilers support them as an <em>extension</em>, and C99 -but no C++ dialect- has <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array members</a>).</p>\n\n<p>You'll better use existing standard C++ <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a>. If you can't use them, you need pointers (and you should prefer <a href=\"https://en.wikipedia.org/wiki/Smart_pointer\" rel=\"nofollow noreferrer\">smart pointers</a>).</p>\n\n<p>Even if you have some compiler accepting <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a>s as an extension, you probably need to <a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow noreferrer\">dynamically <em>allocate</em></a> a memory zone for them.</p>\n\n<p>I strongly recommend learning to use containers.</p>\n\n<p>Don't forget to enable all warnings &amp; debug info when compiling. With <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>, compile with <code>g++ -Wall -Wextra -g</code>. Use the debugger (<code>gdb</code>) and perhaps <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 8333355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca0a373bbb31606b8c6b69f15ee4882?s=128&d=identicon&r=PG&f=1", "display_name": "DumbSimon", "link": "https://stackoverflow.com/users/8333355/dumbsimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1500487160, "creation_date": 1500486097, "last_edit_date": 1500486315, "question_id": 45197519, "link": "https://stackoverflow.com/questions/45197519/basic-creation-set-in-c", "title": "Basic creation set in c++", "body": "<p>I have tried to realize set by basic metods via struct.\nThis is my variant:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std; \n\nstruct Set&lt;T&gt; {\n    int n;\n    T[n] elements;\n}\n\nint main(){\n    struct Set microSet;\n    int oneElm, length;\n    cin&gt;&gt;length;\n    microSet.n=length;\n    for(int i=0;i&lt;length;i++) {\n        cin&gt;&gt;oneElm;\n        microSet.elements[i]=oneElm;\n    }\n\n    for(int i=0;i&lt;length;i++) \n        cout &lt;&lt; microSet.elements[i];\n\n    return 0;\n}\n</code></pre>\n\n<p>Compilator shows me an error related with sruct.\nWhat've I done wrong?</p>\n"}, {"tags": ["c++", "mouseevent", "wxwidgets", "wxgrid"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7300599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f59230043e14296594183b687c47b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Maaz Azeem", "link": "https://stackoverflow.com/users/7300599/maaz-azeem"}, "is_accepted": true, "score": 0, "last_activity_date": 1500490826, "creation_date": 1500490826, "answer_id": 45198988, "question_id": 45197388, "link": "https://stackoverflow.com/questions/45197388/passing-data-through-mouse-events/45198988#45198988", "title": "Passing data through mouse events", "body": "<p>was able to achieve this by using GetCellValue(); in wxWidgets.</p>\n"}], "owner": {"reputation": 49, "user_id": 7300599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f59230043e14296594183b687c47b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Maaz Azeem", "link": "https://stackoverflow.com/users/7300599/maaz-azeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1500516044, "accepted_answer_id": 45198988, "answer_count": 1, "score": 0, "last_activity_date": 1500490826, "creation_date": 1500485666, "question_id": 45197388, "link": "https://stackoverflow.com/questions/45197388/passing-data-through-mouse-events", "closed_reason": "Needs details or clarity", "title": "Passing data through mouse events", "body": "<p>I have a grid set up with a bunch of columns and rows. Right now im able to double click a cell and create a new frame. But I would like to capture the row data on the double click and display that in the new frame. I understand how to create a new frame and display data in it, i just need help in capturing the row data on the double click</p>\n"}, {"tags": ["java", "android", "c++", "opengl-es"], "comments": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1500492400, "post_id": 45197124, "comment_id": 77365911, "body": "You did this for &quot;memory reasons&quot;? Why do you expect this will use less memory? Also, likely your C++ and Java OpenGL calls are happening on different threads, but, without any code or idea of the iterop between Java and C++, it&#39;s going to be pretty hard to give advice."}, {"owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "reply_to_user": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1500492872, "post_id": 45197124, "comment_id": 77366204, "body": "it will not use less memory but in native i can use more space. Also you are right i will try to provide a sample code tomorrow. I am quite sure that they are on the same thread within the drawFrame call of java."}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 0, "creation_date": 1500547482, "post_id": 45208830, "comment_id": 77390736, "body": "I am trying to do the same however I have a legacy code in Java so my first option is to use these together, by the way in my code i did not call native surface_created and surface changed only surface draw is used. I will look into this, thanks."}, {"owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 1, "creation_date": 1500632857, "post_id": 45208830, "comment_id": 77436233, "body": "I moved my initialization to cpp, but nothing has changed the java triangle is still not being rendered."}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "reply_to_user": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 0, "creation_date": 1500647635, "post_id": 45208830, "comment_id": 77446679, "body": "If you show your initialisation and drawing code, I should be able to understand better then."}, {"owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 0, "creation_date": 1500648703, "post_id": 45208830, "comment_id": 77447366, "body": "Git project uses java init version, for cpp init i only moved viewport and glclearcolor to corresponding parts on cpp that all. What should i add more?"}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "reply_to_user": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 0, "creation_date": 1500652231, "post_id": 45208830, "comment_id": 77449704, "body": "The project you&#39;ve linked to in your OP use precision highp in the shaders. Android GLES usually always uses mediump. I&#39;m packing up and heading home and will look further into it later on."}, {"owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "edited": false, "score": 0, "creation_date": 1500980541, "post_id": 45208830, "comment_id": 77564002, "body": "The device I am using A7 supports highp in the shader, also double checked with &#39;GetShaderPrecisionFormat&#39;"}], "tags": [], "owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "is_accepted": false, "score": 2, "last_activity_date": 1500537666, "creation_date": 1500537666, "answer_id": 45208830, "question_id": 45197124, "link": "https://stackoverflow.com/questions/45197124/android-opengles-rendering-using-c-and-java/45208830#45208830", "title": "Android OpenGLES Rendering using C++ and Java", "body": "<p>The easiest way to do this is to directly call your C++ code from your surface renderer.</p>\n\n<pre><code>private class PlayerRenderer implements GLSurfaceView.Renderer {\n\n    @Override\n    public void onSurfaceCreated(GL10 gl, EGLConfig config) {\n        surface_created(); // native c++\n    }\n\n    @Override\n    public void onSurfaceChanged(GL10 gl, int wid, int hgt) {\n        surface_changed(wid, hgt); // native c++\n    }\n\n    @Override\n    public void onDrawFrame(GL10 gl) {\n        surface_draw(); // native c++\n    }\n}\n\nprivate native void surface_created();\nprivate native void surface_changed(int w, int h);\nprivate native void surface_draw();\n</code></pre>\n\n<p>No need for context switching.</p>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "is_accepted": true, "score": 11, "last_activity_date": 1502180210, "creation_date": 1502180210, "answer_id": 45562916, "question_id": 45197124, "link": "https://stackoverflow.com/questions/45197124/android-opengles-rendering-using-c-and-java/45562916#45562916", "title": "Android OpenGLES Rendering using C++ and Java", "body": "<p>The problem was caused because of not unbinding the buffers.</p>\n\n<pre><code>glBindBuffer(GL_ARRAY_BUFFER, 0);\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n</code></pre>\n\n<p>Adding these two lines to init and render fixes the problem.</p>\n"}], "owner": {"reputation": 601, "user_id": 3985387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe430573d32326faacc88805afe5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Hakes", "link": "https://stackoverflow.com/users/3985387/hakes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 45562916, "answer_count": 2, "score": 12, "last_activity_date": 1502180210, "creation_date": 1500484799, "last_edit_date": 1502126026, "question_id": 45197124, "link": "https://stackoverflow.com/questions/45197124/android-opengles-rendering-using-c-and-java", "title": "Android OpenGLES Rendering using C++ and Java", "body": "<p>I have an android application that uses GLES for rendering. Currently using Java to render stuff, and rendering is fine. Due to limitation in Android Java application memory I plan to integrate native rendering to my Java rendering code.</p>\n\n<p>To do this I followed basic native GLES tutorials. After integrating, Java rendering was not visible, only the things I render in C++ was seen.</p>\n\n<p>The simplest version of the code is at: <a href=\"https://github.com/khedd/JavaCppGLES\" rel=\"noreferrer\">https://github.com/khedd/JavaCppGLES</a>\nJava code renders a Triangle, C++ renders a Quad. If both are called only Quad is renderer.</p>\n\n<p>How can I solve this issue? Should I port everything to C++?</p>\n\n<p>Code in a nutshell.</p>\n\n<pre><code>MyGLRenderer(){\n    mTriangle = new Triangle();\n    mCppRenderer = new MyCppRenderer();\n}\n\n@Override\npublic void onSurfaceCreated(GL10 gl, EGLConfig config) {\n    gl.glClearColor(1.0f, 0.0f, 1.0f, 1.0f);\n\n    //init java triangle\n    mTriangle.init();\n    //init c quad\n    mCppRenderer.init(); //comment this line to make java triangle appear\n}\n\n@Override\npublic void onSurfaceChanged(GL10 gl, int width, int height) {\n    gl.glViewport(0, 0, width, height);\n}\n\n@Override\npublic void onDrawFrame(GL10 gl) {\n    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);\n    mTriangle.draw();\n    mCppRenderer.draw ();\n}\n</code></pre>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1500484857, "post_id": 45197030, "comment_id": 77361551, "body": "You also might want to re-think having a reference member at all - it&#39;s rarely a good idea."}], "answers": [{"comments": [{"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1500485067, "post_id": 45197128, "comment_id": 77361659, "body": "If so then why would even a declaration be allowed?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1500485266, "post_id": 45197128, "comment_id": 77361774, "body": "@anurag86 why not? You might later want to derive <code>SomeClass</code> and use a custom initializer list calling the default ctor of the base class."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1500486134, "post_id": 45197128, "comment_id": 77362271, "body": "@anurag86 because the compiler only cares about the definition. It can&#39;t know whether or not you&#39;ll initialize the reference when all it has is the declaration"}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1500484813, "creation_date": 1500484813, "answer_id": 45197128, "question_id": 45197030, "link": "https://stackoverflow.com/questions/45197030/reference-member-variable-initialization-error-with-default-constructor/45197128#45197128", "title": "Reference member variable initialization error with default constructor", "body": "<p>The compiler requires all references to be initialized. If you define a default constructor that does nothing then the compiler complains because you didn't initialize <code>i</code>. If you declare the default constructor you haven't defined it yet so the compiler has no issue. Consider this:</p>\n\n<pre><code>class SomeClass\n{\n    SomeClass(); // Compiler is fine with this\n    ...\n};\n\nint someInt;\nSomeClass::SomeClass(): i(someInt) {} // OK - i is initialized\n</code></pre>\n\n<p>You defined the constructor later and initialized <code>i</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1500484980, "post_id": 45197130, "comment_id": 77361616, "body": "Well the question is more of : _when i have already provided a way to initialize the member variable through parametrized constructor then why look for default constructor? Moreover in presence of parametrized constructor if definition of a default constructor is not allowed then why should a declaration of default constructor be allowed too? _"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1500485066, "post_id": 45197130, "comment_id": 77361657, "body": "@anurag86 <i>&quot;in presence of parametrized constructor if definition of a default constructor is not allowed&quot;</i> -- The definition of a default constructor <b>is allowed</b>, you have just provided an ill-formed definition because it doesn&#39;t initialize <code>i</code>. <b>You will run into the same errors if you remove your parameterized constructor entirely.</b>"}], "tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 4, "last_activity_date": 1500485536, "last_edit_date": 1500485536, "creation_date": 1500484820, "answer_id": 45197130, "question_id": 45197030, "link": "https://stackoverflow.com/questions/45197030/reference-member-variable-initialization-error-with-default-constructor/45197130#45197130", "title": "Reference member variable initialization error with default constructor", "body": "<blockquote>\n  <p>why defining a default constructor throws compilation error?</p>\n</blockquote>\n\n<p>It's not that you define a default constructor, it's that the default constructor's definition doesn't initialize <code>i</code>. You are <em>required</em> to initialize all member variables that are references, and your empty definition does not do that.</p>\n\n<p>This is for the same reason that you are required to initialize reference variables:</p>\n\n<pre><code>void foo() {\n    int &amp;i; // error: declaration of reference variable 'i' requires an initializer\n}\n</code></pre>\n\n<blockquote>\n  <p>why would the compiler allow declaration of default constructor(without definition)</p>\n</blockquote>\n\n<p>Because the <em>definition</em> is the problem, not the declaration.  For example, moving the ill-formed constructor definition outside of the class definition will yield the same error:</p>\n\n<pre><code>class SomeClass\n{\npublic:\n    SomeClass();\n    int &amp;i;\n};\n\nSomeClass::SomeClass() {} // error: constructor for 'SomeClass' must explicitly initialize the reference member 'i'\n</code></pre>\n\n<p>The only problem with both examples is that you're not initializing <code>i</code>.</p>\n\n<p>Take note of the following examples, which will compile.  Note that the constructor's <em>declaration</em> does not change, but the <em>definition</em> does initialize <code>i</code>.</p>\n\n<pre><code>int someGlobalInt;\n\nclass SomeClass\n{\npublic:\n    SomeClass() : i(someGlobalInt) {}\n    int &amp;i;\n};\n</code></pre>\n\n<hr>\n\n<pre><code>int someGlobalInt;\n\nclass SomeClass\n{\npublic:\n    SomeClass();\n    int &amp;i;\n};\n\nSomeClass::SomeClass() : i(someGlobalInt) {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1500484948, "creation_date": 1500484948, "answer_id": 45197172, "question_id": 45197030, "link": "https://stackoverflow.com/questions/45197030/reference-member-variable-initialization-error-with-default-constructor/45197172#45197172", "title": "Reference member variable initialization error with default constructor", "body": "<p>The first is an implementation of a constructor which fails the required initialisation of the reference member:<br>\n<code>SomeClass(){}</code></p>\n\n<p>The second is only a declaration of a constructor. As long as it does not get executed, the lack of implementation is not a problem. And as long as it is not implemented the (probable) failure to initialise is not a problem:<br>\n<code>SomeClass();</code></p>\n\n<p>Note that a non-parameterised constructor could initialise a reference member correctly, e.g. to a reference to a global or static variable. That might not be useful for anything, but it is possible. So for the compiler, the second version is no immediate problem and does not necessarily indicate an actual problem elsewhere.</p>\n"}], "owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3586, "favorite_count": 1, "accepted_answer_id": 45197130, "answer_count": 3, "score": 3, "last_activity_date": 1500485536, "creation_date": 1500484478, "last_edit_date": 1500484832, "question_id": 45197030, "link": "https://stackoverflow.com/questions/45197030/reference-member-variable-initialization-error-with-default-constructor", "title": "Reference member variable initialization error with default constructor", "body": "<p>I understand that to initialize a reference member variable in a class i have to  use initializers list using a parametrized constructor to initialize the member variable.\nAlso i understand that there is no need of a default constructor. </p>\n\n<p><strong>Question:</strong></p>\n\n<ol>\n<li><p>But what i don't understand is why defining a default constructor throws compilation error?\nIsn't compiler smart enough to consider parametrized constructor in the following case instead of throwing error? </p></li>\n<li><p>If at all there is convincing answer for the above question then why would the compiler allow declaration of default constructor(without definition)? what difference does it make here?</p></li>\n</ol>\n\n<p>:</p>\n\n<pre><code>class SomeClass\n{\npublic:\n    //SomeClass(){} //THIS IS AN ISSUE\n    //SomeClass();  //THIS IS FINE THOUGH\n\n\n    SomeClass(int j):i(j){}\n    int&amp; i;\n\n};\nint main()\n{\n\n    SomeClass obj(2);\n    return 0;\n}\n</code></pre>\n\n<p>I believe the same is the behavior with const member functions too. Is the reason same for reference and const member variables both?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 4, "creation_date": 1500484572, "post_id": 45196994, "comment_id": 77361415, "body": "Use a debugger and step through your code."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 2, "creation_date": 1500485002, "post_id": 45196994, "comment_id": 77361621, "body": "What have you tried so far? What is the output and what is the expected output? Besides from your question, if you want to do C++, you should really start to work with classes. Imagine if you had <code>Population population(starting_population, birth_rate, death_rate); for(size_t i = 0; i &lt; years; i++) { population.simulate_year(); population.print_status(); }</code>"}, {"owner": {"reputation": 1985, "user_id": 7255359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ap90j.jpg?s=128&g=1", "display_name": "Sudheesh Singanamalla", "link": "https://stackoverflow.com/users/7255359/sudheesh-singanamalla"}, "edited": false, "score": 0, "creation_date": 1500485164, "post_id": 45196994, "comment_id": 77361707, "body": "Does <code>double populationCalculator(int Population, double deathRate, double birthRate,  int newArrivals, int peopleWhoLeft) { }</code> help?"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1500485425, "post_id": 45197173, "comment_id": 77361865, "body": "This would be my guess too... but - I would suggest you change your nickname to something less generic."}, {"owner": {"reputation": 13, "user_id": 8333205, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZwDdFI5H4EM/AAAAAAAAAAI/AAAAAAAAAHE/FibtlnsI6vQ/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/8333205/alex"}, "edited": false, "score": 0, "creation_date": 1500490538, "post_id": 45197173, "comment_id": 77364831, "body": "This was the issue, but I just wasn&#39;t sure of how to exactly solve this. I finally ended up declaring the function as a double, changing the population data type to double, returning a double, and assigning the result to a new int variable for displaying to truncate the number (since you can&#39;t have a fraction of a person =P)  My figures were off because of my original truncation, and then passing the truncated value back to the function for new calculations. Keeping the decimals between calculations solved it all. Simple, but damn did it torment me for way longer than it should have."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8333363"}, "is_accepted": true, "score": 1, "last_activity_date": 1500484957, "creation_date": 1500484957, "answer_id": 45197173, "question_id": 45196994, "link": "https://stackoverflow.com/questions/45196994/stumped-with-a-transient-population-program-in-c/45197173#45197173", "title": "Stumped with a transient population program in c++", "body": "<p>Step through your code. You're returning an int where you have double and int multiplication. Make sure that you aren't truncating values that might need to be rounded up or down.</p>\n\n<p>Does birth happen before or after death? Should it occur in steps, or all at once like you have shown?</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1500485310, "post_id": 45197206, "comment_id": 77361791, "body": "But that would totally mess up his results, because he&#39;ll get 0."}], "tags": [], "owner": {"reputation": 786, "user_id": 1207899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9961694ded393a3340925ea62a3ba?s=128&d=identicon&r=PG", "display_name": "victor", "link": "https://stackoverflow.com/users/1207899/victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1500485045, "creation_date": 1500485045, "answer_id": 45197206, "question_id": 45196994, "link": "https://stackoverflow.com/questions/45196994/stumped-with-a-transient-population-program-in-c/45197206#45197206", "title": "Stumped with a transient population program in c++", "body": "<p>try casting to a double in your operations that involve doubles and integers. For example</p>\n\n<pre><code>birthRate = (double)(birthRate / 100);\ndeathRate = (double)(deathRate / 100);\n</code></pre>\n\n<p>Sometimes programming languages will cast a double to an integer, which causes your numbers to be off. </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8333205, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZwDdFI5H4EM/AAAAAAAAAAI/AAAAAAAAAHE/FibtlnsI6vQ/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/8333205/alex"}, "edited": false, "score": 0, "creation_date": 1500487390, "post_id": 45197570, "comment_id": 77363009, "body": "No I&#39;ve tried that, but it didn&#39;t work =[. I know the issue has something to do with rounding, but I am having difficulty figuring out exactly how to fix it =|."}, {"owner": {"reputation": 1, "user_id": 2653872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMa39.jpg?s=128&g=1", "display_name": "Flying Currypuff", "link": "https://stackoverflow.com/users/2653872/flying-currypuff"}, "reply_to_user": {"reputation": 13, "user_id": 8333205, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZwDdFI5H4EM/AAAAAAAAAAI/AAAAAAAAAHE/FibtlnsI6vQ/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/8333205/alex"}, "edited": false, "score": 0, "creation_date": 1500555196, "post_id": 45197570, "comment_id": 77396649, "body": "what did you enter exactly to get that output?"}], "tags": [], "owner": {"reputation": 1, "user_id": 2653872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMa39.jpg?s=128&g=1", "display_name": "Flying Currypuff", "link": "https://stackoverflow.com/users/2653872/flying-currypuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1500486249, "creation_date": 1500486249, "answer_id": 45197570, "question_id": 45196994, "link": "https://stackoverflow.com/questions/45196994/stumped-with-a-transient-population-program-in-c/45197570#45197570", "title": "Stumped with a transient population program in c++", "body": "<p>Perhaps the number were rounded off?\nI assume this is the case because I noticed you declared some variables in double but the end result is integer. Try to change the data type of the method \n<code>populationCalculator()</code>, <code>newPopulation</code> and of course the returning values of the method <code>populationCalculator()</code> from <strong>int</strong> to <strong>double</strong>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8333205, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZwDdFI5H4EM/AAAAAAAAAAI/AAAAAAAAAHE/FibtlnsI6vQ/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/8333205/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 45197173, "answer_count": 3, "score": 0, "last_activity_date": 1500486249, "creation_date": 1500484355, "last_edit_date": 1500485139, "question_id": 45196994, "link": "https://stackoverflow.com/questions/45196994/stumped-with-a-transient-population-program-in-c", "title": "Stumped with a transient population program in c++", "body": "<p>this is my first time posting on here. Whenever I've gotten stuck on a programming problem, I've typically been able to find enough information to get me unstuck. I'm afraid that the issue I'm having though, I can't quite find an answer to. It's something I'd need someone to look at to tell me what I may be doing wrong in my code.</p>\n\n<p>I have the program running successfully, and it DOES work. The issue however, is that my produced output is off by a few numbers when compared to the expected output on My Programming Lab. I'm really not sure of what to do to produce the correct output. Allow me to post both my source code, and a screenshot MPL's results screen.</p>\n\n<p><strong>SOURCE CODE:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint populationCalculator(int, double, double, int, int);\n\nint main()\n{\n    int startingPopulation, newArrivals, peopleWhoLeft, years, \n    newPopulation, finalPopulation;\n\n    double deathRate, birthRate;\n\n    cout &lt;&lt; \"This program calculates population change.\\n\";\n    cout &lt;&lt; \"Enter the starting population size: \";\n    cin &gt;&gt; startingPopulation;\n    while (startingPopulation &lt; 2)\n    {\n        cout &lt;&lt; \"\\nThe starting population may not be less than two. Please \n                   re - enter: \";\n        cin &gt;&gt; startingPopulation;\n    }\n\n    cout &lt;&lt; \"Enter the annual birth rate (as % of current population): \";\n    cin &gt;&gt; birthRate;\n    while (birthRate &lt; 0)\n    {\n       cout &lt;&lt; \"\\nBirth rate percent cannot be negative. Please re - \n                 enter:\";\n        cin &gt;&gt; birthRate;\n    }\n    birthRate = birthRate / 100;\n\n    cout &lt;&lt; \"Enter the annual death rate (as % of current population): \";\n    cin &gt;&gt; deathRate;\n    while (deathRate &lt; 0)\n    {\n        cout &lt;&lt; \"\\nDeath rate percent cannot be negative. Please  re - \n                  enter: \";\n        cin &gt;&gt; deathRate;\n    }\n    deathRate = deathRate / 100;\n\n    cout &lt;&lt; \"How many individuals move into the area each year? \";\n    cin &gt;&gt; newArrivals;\n    while (newArrivals &lt; 0)\n    {\n        cout &lt;&lt; \"\\nArrivals cannot be negative. Please re - enter: \";\n        cin &gt;&gt; newArrivals;\n    }\n\n    cout &lt;&lt; \"How many individuals leave the area each year? \";\n    cin &gt;&gt; peopleWhoLeft;\n    while (peopleWhoLeft &lt; 0)\n    {\n        cout &lt;&lt; \"\\nDepartures cannot be negative. Please re - enter: \";\n        cin &gt;&gt; peopleWhoLeft;\n    }\n\n    cout &lt;&lt; \"For how many years do you wish to view population changes? \";\n    cin &gt;&gt; years;\n    while (years &lt; 1)\n    {\n        cout &lt;&lt; \"\\nYears must be one or more. Please re - enter: \";\n        cin &gt;&gt; years;\n    }\n\n    newPopulation = populationCalculator(startingPopulation, deathRate, \n    birthRate, newArrivals, peopleWhoLeft);\n\n    cout &lt;&lt; \"\\nStarting population: \" &lt;&lt; startingPopulation &lt;&lt; endl;\n    for (int loopCount = 1; loopCount &lt;= years; loopCount++)\n    {\n        newPopulation = populationCalculator(newPopulation, deathRate, \n        birthRate, newArrivals, peopleWhoLeft);\n\n        cout &lt;&lt; \"Population at the end of year \" &lt;&lt; loopCount &lt;&lt; \" is: \" &lt;&lt; \n        newPopulation &lt;&lt; endl;\n    }\n\n    system(\"pause\");\n    return 0;\n}\n\nint populationCalculator(int Population, double deathRate, double birthRate, \nint newArrivals, int peopleWhoLeft)\n{\n    int newPopulationCount;\n\n    newPopulationCount = Population + (Population * birthRate) - (Population \n  * deathRate) + newArrivals - peopleWhoLeft;\n\n    return newPopulationCount;\n}\n</code></pre>\n\n<p><strong>MPL RESULTS:</strong>\n<a href=\"https://imgur.com/a/mRmpc\" rel=\"nofollow noreferrer\">http://imgur.com/a/mRmpc</a></p>\n\n<p>I really will appreciate if anyone can help me figure out why my produced output is off by a few numbers.</p>\n"}, {"tags": ["c++", "windows", "boost", "directory", "boost-filesystem"], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 5, "creation_date": 1500487208, "post_id": 45197169, "comment_id": 77362917, "body": "<i>You need to check whether folder exists and manually generate new names</i> ... and what exactly prevents you from doing that using boost?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1500495102, "post_id": 45197169, "comment_id": 77367438, "body": "@zett42 I assume that by <i>using boost</i> people mean <i>calling this boost function</i>. Of course nothing prevents someone from implementing such function himself."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1500484941, "creation_date": 1500484941, "answer_id": 45197169, "question_id": 45196838, "link": "https://stackoverflow.com/questions/45196838/how-to-create-a-new-folder-using-boost-when-a-folder-with-the-same-name-already/45197169#45197169", "title": "How to create a new folder using boost when a folder with the same name already exists?", "body": "<p>This clearly can not be achieved using boost alone. You need to check whether folder exists and manually generate new names. On Windows you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776476(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>PathMakeUniqueName</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776479(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>PathYetAnotherMakeUniqueName</code></a> shell functions for this purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1500489473, "creation_date": 1500489473, "answer_id": 45198577, "question_id": 45196838, "link": "https://stackoverflow.com/questions/45196838/how-to-create-a-new-folder-using-boost-when-a-folder-with-the-same-name-already/45198577#45198577", "title": "How to create a new folder using boost when a folder with the same name already exists?", "body": "<p>It should be easy to accomplish what you want without using anything platform specific...</p>\n\n<pre><code>std::string dstFolder = \"New Folder\";\nstd::string path(dstFolder);\n\n/*\n * i starts at 2 as that's what you've hinted at in your question\n * and ends before 10 because, well, that seems reasonable.\n */\nfor (int i = 2; boost::filesystem::exists(path) &amp;&amp; i &lt; 10; ++i) {\n  std::stringstream ss;\n  ss &lt;&lt; dstFolder &lt;&lt; \"(\" &lt;&lt; i &lt;&lt; \")\";\n  path = ss.str();\n}\n\n/*\n * If all attempted paths exist then bail.\n */\nif (boost::filesystem::exists(path))\n  throw something_appropriate;\n\n/*\n * Otherwise create the directory.\n */\nboost::filesystem::create_directory(path);\n</code></pre>\n"}], "owner": {"reputation": 1701, "user_id": 2666601, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/066dc9aea11fd29183ee5a56faff052e?s=128&d=identicon&r=PG&f=1", "display_name": "progammer", "link": "https://stackoverflow.com/users/2666601/progammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19879, "favorite_count": 0, "accepted_answer_id": 45198577, "answer_count": 2, "score": 2, "last_activity_date": 1500489473, "creation_date": 1500483923, "last_edit_date": 1500484104, "question_id": 45196838, "link": "https://stackoverflow.com/questions/45196838/how-to-create-a-new-folder-using-boost-when-a-folder-with-the-same-name-already", "title": "How to create a new folder using boost when a folder with the same name already exists?", "body": "<p>I am using <code>boost::filesystem</code> to create an empty folder (in Windows). Let say that the name of the folder that I want to create is <strong>New Folder</strong>. When I run the following program, a new folder with the required name is created, as expected. When the run the program for the second time, I want <strong>New Folder (2)</strong> to be created. Though it is an unreasonable expectation, that is what I want to achieve. Can someone guide me?</p>\n\n<pre><code>#include &lt;boost/filesystem.hpp&gt;\nint main()\n{\n     boost::filesystem::path dstFolder = \"New Folder\";\n     boost::filesystem::create_directory(dstFolder);\n     return 0;\n}\n</code></pre>\n\n<p><em>Expected output:</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/R3icG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R3icG.png\" alt=\"Expected output\"></a></p>\n"}, {"tags": ["c++", "c++-modules"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1500483841, "post_id": 45196778, "comment_id": 77360973, "body": "<b><i>What is the purpose of import std; C++? How to use import std; instead of using namespace std;</i></b> They are completely different concepts. import is about c++ modules."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1500483921, "post_id": 45196778, "comment_id": 77361027, "body": "&quot;here\u2019s an example from the C++0x draft&quot; - the feature never got to C++11 in the first place. About what it&#39;s supposed to do: the page you linked to explains well enough"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1500483927, "post_id": 45196778, "comment_id": 77361030, "body": "not an exact duplicate, but certainly relevant: <a href=\"https://stackoverflow.com/questions/33307657/how-do-i-use-c-modules-in-clang\" title=\"how do i use c modules in clang\">stackoverflow.com/questions/33307657/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1500496397, "last_edit_date": 1500496397, "creation_date": 1500484689, "answer_id": 45197092, "question_id": 45196778, "link": "https://stackoverflow.com/questions/45196778/purpose-of-import-std-in-c/45197092#45197092", "title": "Purpose of &quot;import std;&quot; in C++", "body": "<blockquote>\n  <p>So, What is the purpose of import std; C++?</p>\n</blockquote>\n\n<p>Its purpose is to make names from the <code>std</code> module available. Modules are a language feature that has been proposed for inclusion in a future C++ standard.</p>\n\n<blockquote>\n  <p>How to use <code>import std;</code> instead of using <code>namespace std;</code> in C++?</p>\n</blockquote>\n\n<p>They are not exclusive so you cannot use one <em>instead</em> of another. Namespaces are a separate language feature from modules. You can use both, either or neither.</p>\n\n<blockquote>\n  <p>I tried to compile program in G++ compiler, but I got an error.</p>\n</blockquote>\n\n<p>Considering that the hypothetical future standard version is not yet released, nor is it even decided that modules would definitely be part of a future standard, it's hardly surprising that a compiler hasn't implemented them.</p>\n\n<p>You can find the state of modules in GCC here: <a href=\"https://gcc.gnu.org/wiki/cxx-modules\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/wiki/cxx-modules</a>\nAt the moment of writing, work has begun and is underway on a development branch.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2036, "favorite_count": 3, "accepted_answer_id": 45197092, "answer_count": 1, "score": 4, "last_activity_date": 1500552433, "creation_date": 1500483734, "last_edit_date": 1500552433, "question_id": 45196778, "link": "https://stackoverflow.com/questions/45196778/purpose-of-import-std-in-c", "title": "Purpose of &quot;import std;&quot; in C++", "body": "<p>I have seen following small piece of code on <a href=\"http://cppdepend.com/blog/?p=228\" rel=\"nofollow noreferrer\">cppdepend</a> site. </p>\n\n<pre><code>import std; // Module import directive.\nint main() \n{\n    std::cout&lt;&lt;\"Hello World\\n\";\n}\n</code></pre>\n\n<p>So, What is the purpose of <code>import std;</code> in C++? How to use <code>import std;</code> instead of <code>using namespace std;</code> in C++?</p>\n\n<p>I tried to compile program in <strong>G++</strong> compiler, but I got an error. </p>\n"}, {"tags": ["c++", "priority-queue", "unsigned", "integer-overflow"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500483647, "post_id": 45196698, "comment_id": 77360848, "body": "How about using a 2nd queue.  The insert operation switches on wrap and popping switches when current queue is empty, or just use a flag for the active queue."}, {"owner": {"reputation": 1940, "user_id": 538370, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4DQDf.jpg?s=128&g=1", "display_name": "Display Name", "link": "https://stackoverflow.com/users/538370/display-name"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500483765, "post_id": 45196698, "comment_id": 77360920, "body": "@RichardCritten post this as an answer and I will upvote :)"}], "answers": [{"tags": [], "owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "is_accepted": true, "score": 1, "last_activity_date": 1500483799, "creation_date": 1500483799, "answer_id": 45196800, "question_id": 45196698, "link": "https://stackoverflow.com/questions/45196698/priority-queue-handle-unsigned-overflow-of-priorities/45196800#45196800", "title": "Priority queue handle unsigned overflow of priorities", "body": "<p>How about using a 2nd queue. The insert operation switches on wrap and popping switches when current queue is empty, or just use a flag for the active queue</p>\n"}], "owner": {"reputation": 1940, "user_id": 538370, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4DQDf.jpg?s=128&g=1", "display_name": "Display Name", "link": "https://stackoverflow.com/users/538370/display-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 45196800, "answer_count": 1, "score": 0, "last_activity_date": 1500484432, "creation_date": 1500483487, "last_edit_date": 1500484432, "question_id": 45196698, "link": "https://stackoverflow.com/questions/45196698/priority-queue-handle-unsigned-overflow-of-priorities", "title": "Priority queue handle unsigned overflow of priorities", "body": "<p>I'm processing items in multiple threads, and the producers may output them into buffers out of order. Some later pipeline stages are not memoryless, and I need to put the partially processed items in order, so I have a thread gathering them from buffers output by previous stage workers and putting them into a standard heap-based priority queue, pulling from the top of the heap while the item counter is the successor to the last item that was pulled.</p>\n\n<p>The item are stamped with a 32-bit unsigned counter by the hardware that generates them. There are several thousand items per second, and after a few days the counter wraps around. How do I handle this without switching to 64-bit counters? The program needs to be able to run indefinitely.</p>\n\n<p>[Edit]</p>\n\n<p>One idea I had is that, since the heap is limited in size to a few million items, I can modify the heap comparator to check the difference between the counters being compared and set a threshold of say half the maximum value of the unsigned, which if exceeded would be taken to assume a wraparound has occurred. The downside is the overhead of an extra conditional per each item checked in heap operations, and I don't know if there's some way to reduce it to a combination of subtraction/cast/etc. with just a single comparison.</p>\n"}, {"tags": ["c++", "memory-management", "dll"], "comments": [{"owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "edited": false, "score": 0, "creation_date": 1500483570, "post_id": 45196644, "comment_id": 77360797, "body": "If it makes a difference, I built my DLL using Visual Studio 2015 and its runtime libraries."}, {"owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "edited": false, "score": 0, "creation_date": 1500484545, "post_id": 45196644, "comment_id": 77361403, "body": "Also built the DLL using /MD flag.. But building a plugin for Unreal Engine.. Are they using different runtime libraries?"}], "owner": {"reputation": 307, "user_id": 2977382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bd2926aaeeb439998afe8de517106df?s=128&d=identicon&r=PG&f=1", "display_name": "terminix00", "link": "https://stackoverflow.com/users/2977382/terminix00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500483331, "creation_date": 1500483331, "question_id": 45196644, "link": "https://stackoverflow.com/questions/45196644/deallocate-from-dll-spawns-a-crash", "title": "Deallocate from dll spawns a crash", "body": "<p>I've built a DLL and also the pdb symbols so that I can walk through the code. I have a method with a signature that looks like: </p>\n\n<pre><code>void A::b(\n    const std::map&lt;std::string, int&gt;    &amp;map,\n    const std::vector&lt;std::string&gt;      &amp;names,\n    std::shared_ptr&lt;data&gt;       data_in,\n    const std::map&lt;int32, int32&gt;        index_map_in\n</code></pre>\n\n<p>It runs fine to the end, but when it starts freeing up the local variables it runs into problems. Specifically when it is trying to deallocate index_map_in.</p>\n\n<pre><code>    ntdll.dll!00007ffdef5b771e()    Unknown\n    ntdll.dll!00007ffdef5bdf0a()    Unknown\n    ntdll.dll!00007ffdef564f22()    Unknown\n    ntdll.dll!00007ffdef579024()    Unknown\n    ucrtbase.dll!00007ffdebc3c97b() Unknown\n    my.dll!std::_Deallocate(void * _Ptr, unsigned __int64 _Count, unsigned __int64 _Sz) Line 133    C++\n    my.dll!std::allocator&lt;std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void * __ptr64&gt; &gt;::deallocate(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Ptr, unsigned __int64 _Count) Line 721   C++\n    my.dll!std::_Wrap_alloc&lt;std::allocator&lt;std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void * __ptr64&gt; &gt; &gt;::deallocate(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Ptr, unsigned __int64 _Count) Line 988    C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2042 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Erase(std::_Tree_node&lt;std::pair&lt;int const ,int&gt;,void *&gt; * _Rootnode) Line 2037 C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::clear() Line 1472   C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::erase(std::_Tree_const_iterator&lt;std::_Tree_val&lt;std::_Tree_simple_types&lt;std::pair&lt;int const ,int&gt; &gt; &gt; &gt; _First, std::_Tree_const_iterator&lt;std::_Tree_val&lt;std::_Tree_simple_types&lt;std::pair&lt;int const ,int&gt; &gt; &gt; &gt; _Last) Line 1448    C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::_Tidy() Line 2169   C++\n    my.dll!std::_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;::~_Tree&lt;std::_Tmap_traits&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt;,0&gt; &gt;() Line 1091 C++\n    my.dll!std::map&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt; &gt;::~map&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt; &gt;() C++\n&gt;   my.dll!A::b(const std::map&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;,int,std::less&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; &gt;,std::allocator&lt;std::pair&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; const ,int&gt; &gt; &gt; &amp; joint_map, const std::vector&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;,std::allocator&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt; &gt; &gt; &amp; joint_names, std::shared_ptr&lt;ik_joint_data&gt; joint_data_in, const std::map&lt;int,int,std::less&lt;int&gt;,std::allocator&lt;std::pair&lt;int const ,int&gt; &gt; &gt; parent_index_map_in) Line 258    C++\n</code></pre>\n\n<p>I'm wondering if this has to do with one of the CRT libs that are linked with my DLL?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2013", "initializer-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500483761, "post_id": 45196613, "comment_id": 77360915, "body": "MSVS 2013 Doesn&#39;t have the best <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">C++11 support</a> and it was the first version that supported initializer lists.  I would assume it is a bug and would compile and work in either 2015 or 2017.  If you can upgrade I would recommend doing so to get the most support you can."}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500493866, "post_id": 45196613, "comment_id": 77366792, "body": "Upgrade to a newer compiler is indeed in our nearest scope. I would assume this problem is not present in vs2015 and 2017, but unfortunately cannot check it for the presented scenario, because the issue is not reproducible in isolation. And recompiling the project with all of its dependencies will just not occur until we migrate :)"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500494007, "post_id": 45196613, "comment_id": 77366877, "body": "Anyway, currently my main question regarding this situation is: could I have diagnosed the problem from the assembly output? And if yes, what is wrong in the first version compared to the second one?"}], "owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500496976, "creation_date": 1500483240, "last_edit_date": 1500496976, "question_id": 45196613, "link": "https://stackoverflow.com/questions/45196613/possible-bug-in-visual-c-2013-compiler-when-temporary-initializer-list-is-used", "title": "Possible bug in Visual C++ 2013 compiler when temporary initializer_list is used in for-loop", "body": "<h1>TL;DR: what is wrong in the first piece of assembly output below compared to the second one?</h1>\n\n<hr>\n\n<p>Recently I've encountered a problem related to the usage of rvalue <code>std::initializer_list</code> object in the range-based <code>for-loop</code>, specifically on Microsoft Visual C++ 2013 Update 4 in Release x64.</p>\n\n<p>Luckily, it was solved easily by simplifying the code (I cannot express how much I'd love every problem to be solved like that), namely creating a local variable to store <code>std::initializer_list</code> object.</p>\n\n<p>Anyway, I am still curious about the root cause and hopefully you can help me finding it. So if you could explain what goes wrong in the story below or at least give me some hint, you'll make me a happier man ;-)</p>\n\n<h2>The symptom</h2>\n\n<p>Let's assume that we work with a tree of objects, all of them inherit from the Base class. So Derived1 and Derived2 below both derive from Base.</p>\n\n<pre><code>Derived1* p1, p2;\nDerived2* p3, p4, p5, p6;\n\n// code that initializes p1..p6 and ensures they are not nullptr\n\nconst std::unique_ptr&lt;Base&gt; pObject = /*some factory function call*/;\nfor (auto* ptr : std::initializer_list&lt;Base*&gt;{p1, p2, p3, p4, p5, p6})\n  ptr-&gt;setParent(pObject.get()); // crash occurs here\n</code></pre>\n\n<p>The problem ceases away as I create a local initializer_list variable. All the surrounding code remains the same, only a single line changes.</p>\n\n<pre><code>Derived1* p1, p2;\nDerived2* p3, p4, p5, p6;\n\n// code that initializes p1..p6 and ensures they are not nullptr\n\nconst std::unique_ptr&lt;Base&gt; pObject = /*some factory function call*/;\nconst std::initializer_list&lt;Base*&gt; il{p1, p2, p3, p4, p5, p6};\n\nfor (auto* ptr : il)\n  ptr-&gt;setParent(pObject.get()); // everything goes fine\n</code></pre>\n\n<p><strong>Note</strong>: I can observe such problem only with temporary <code>std::initializer_list</code> object. If I replace it with e.g. temporary <code>std::vector&lt;Base*&gt;</code> object, the problem ceases.\nAlso, I wasn't able to reproduce the crash on a small toy example. It occurs <strong>only in the presence of the surrounding code, in Release x64 with /O2 flag</strong>.</p>\n\n<p>Since such a change in a single line produces a difference in behavior, I made a conclusion that this is a problem with Visual C++ compiler.</p>\n\n<h2>Assembly output</h2>\n\n<p>Of course, I tried to check the generated assembly code. But as I'm not a big expert in that, I was unable to see anything suspicious. Maybe it will give a clue on what was going wrong to those who read this.</p>\n\n<p>I 'anonymized' the accompanying function and variable names, just as in the C++ samples above, but the assembly itself is left intact.</p>\n\n<p>Here is an assembly output from the <strong>first program</strong> <em>which results in access violation</em>:</p>\n\n<pre><code>    const std::unique_ptr&lt;Base&gt; pObject = /*some factory function call*/;\n00007FFE25AC21C5  mov         esi,6  \n00007FFE25AC21CA  mov         rbx,qword ptr [rbp-80h]  \n00007FFE25AC21CE  xchg        ax,ax  \n    for (auto* thing : std::initializer_list&lt;Base*&gt;{ p1, p2,\n00007FFE25AC21D0  mov         rcx,qword ptr [rdi]  \n         p3, p4, p5, p6 })\n      thing-&gt;setParent(pObject.get());\n00007FFE25AC21D3  mov         rax,qword ptr [rcx]  \n00007FFE25AC21D6  xor         r8d,r8d  \n00007FFE25AC21D9  mov         rdx,rbx  \n00007FFE25AC21DC  call        qword ptr [rax+40h]  \n00007FFE25AC21DF  lea         rdi,[rdi+8]  \n    for (auto* thing : std::initializer_list&lt;Base*&gt;{ p1, p2,\n00007FFE25AC21E3  dec         rsi  \n00007FFE25AC21E6  jne         `anonymous namespace'::someUnrelatedFunctionCall+4B0h (07FFE25AC21D0h)\n</code></pre>\n\n<p>And here's one from <strong>the second version</strong> <em>which works fine</em>:</p>\n\n<pre><code>            const std::unique_ptr&lt;Base&gt; pObject = /*some factory function call*/;\n    00007FFE25D021C1  lea         rcx,[pObject]  \n    00007FFE25D021C6  call        Scene_NS::buildSmartPtr&lt;Base&gt; (07FFE25CF55F0h)  \n    00007FFE25D021CB  nop  \n        std::initializer_list &lt; Base* &gt; il{ p1, p2, p3, p4, p5, p6 };\n    00007FFE25D021CC  mov         qword ptr [rbp+50h],r15  \n    00007FFE25D021D0  mov         qword ptr [rbp+58h],r14  \n    00007FFE25D021D4  mov         qword ptr [rbp+60h],rdi  \n    00007FFE25D021D8  mov         qword ptr [rbp+68h],r12  \n    00007FFE25D021DC  mov         qword ptr [rbp+70h],r13  \n    00007FFE25D021E0  mov         qword ptr [rbp+78h],rbx  \n        for (auto* thing : il)\n    00007FFE25D021E4  lea         rdi,[rbp+50h]  \n    const std::unique_ptr&lt;Base&gt; pObject = /*some factory function call*/;\n00007FFE25D021E8  mov         esi,6  \n00007FFE25D021ED  mov         rbx,qword ptr [pObject]  \n00007FFE25D021F2  nop         dword ptr [rax]  \n00007FFE25D021F6  nop         word ptr [rax+rax]  \n    for (auto* thing : il)\n00007FFE25D02200  mov         rcx,qword ptr [rdi]  \n      thing-&gt;setParent(pObject.get());\n00007FFE25D02203  mov         rax,qword ptr [rcx]  \n00007FFE25D02206  xor         r8d,r8d  \n00007FFE25D02209  mov         rdx,rbx  \n00007FFE25D0220C  call        qword ptr [rax+40h]  \n00007FFE25D0220F  lea         rdi,[rdi+8]  \n    for (auto* thing : il)\n00007FFE25D02213  dec         rsi  \n00007FFE25D02216  jne         `anonymous namespace'::someUnrelatedFunctionCall+4E0h (07FFE25\n</code></pre>\n"}, {"tags": ["c++", "pointers", "heap", "shared-ptr", "raw-pointer"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1500483312, "post_id": 45196598, "comment_id": 77360649, "body": "Yes, <code>std::shared_ptr</code> is heavy, but, the times you will need it are pretty small.  In most cases <code>std::unique_ptr</code> is what you really want and in most cases it is a zero overhead abtraction."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1500483529, "post_id": 45196598, "comment_id": 77360771, "body": "<code>string *s = new string(&quot;Hello world&quot;);</code> in most cases you don&#39;t want to do this with std::string."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1500498660, "post_id": 45196598, "comment_id": 77369321, "body": "Regarding the edits and <code>makePerson2</code>: Yes. That would be better, but if you have a C++14 compiler Prefer <code>return std::make_unique&lt;Person&gt;(name, age);</code> as <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\"><code>make_unique</code></a> eliminates a <a href=\"https://stackoverflow.com/questions/37514509/advantages-of-using-make-unique-over-new-operator\">few more possible error cases</a>"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 8284839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154652761177109/picture?type=large", "display_name": "AleksanderNaumenok", "link": "https://stackoverflow.com/users/8284839/aleksandernaumenok"}, "edited": false, "score": 0, "creation_date": 1500486312, "post_id": 45196732, "comment_id": 77362381, "body": "thank you for the reply, I don&#39;t think the code you suggested is going to work for me. See my post for updated main."}, {"owner": {"reputation": 431, "user_id": 1960382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73a3473e680f6719d4fd8415b6e2e58e?s=128&d=identicon&r=PG", "display_name": "Russley Shaw", "link": "https://stackoverflow.com/users/1960382/russley-shaw"}, "edited": false, "score": 0, "creation_date": 1500486739, "post_id": 45196732, "comment_id": 77362653, "body": "I think its worth noting that as of recent (C++11/14/17), its typically better practice to use  <code>std::unique_ptr</code> followed by <code>std::shared_ptr</code> before using C-pointers. Both are type safe and much less likely to cause you problems when memory is mismanaged. Unique pointer shows better ownership of the data than C-pointers."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 141, "user_id": 8284839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154652761177109/picture?type=large", "display_name": "AleksanderNaumenok", "link": "https://stackoverflow.com/users/8284839/aleksandernaumenok"}, "edited": false, "score": 0, "creation_date": 1500486844, "post_id": 45196732, "comment_id": 77362712, "body": "@AleksanderNaumenok The code isn&#39;t going to work for you if you are explicitly experimenting with Dynamic allocation, but keep reading. The lower portion accurately outlines the order in which you should use various allocation methods. 1 and 2 are out because your requirement is Dynamic allocation. That puts you at option 3, and 3 fits your case perfectly."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 431, "user_id": 1960382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73a3473e680f6719d4fd8415b6e2e58e?s=128&d=identicon&r=PG", "display_name": "Russley Shaw", "link": "https://stackoverflow.com/users/1960382/russley-shaw"}, "edited": false, "score": 0, "creation_date": 1500487069, "post_id": 45196732, "comment_id": 77362834, "body": "@RussleyShaw Recommend you re-read (and David Haim, an edit to clarify is probably in order). Point 2 discusses passing Automatic allocations by raw pointer if and only if using a reference cannot apply. It does not have anything to do with allocation. This should probably be point 1B with 1A being a discussion of passing using a reference."}, {"owner": {"reputation": 141, "user_id": 8284839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154652761177109/picture?type=large", "display_name": "AleksanderNaumenok", "link": "https://stackoverflow.com/users/8284839/aleksandernaumenok"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500489974, "post_id": 45196732, "comment_id": 77364502, "body": "@user4581301 if you take a look at the updated main, do you mean I should return a <code>std::unique_ptr</code>instead of a <code>* (raw pointer)</code>? I updated original post to reflect the suggested changes, please take a look when you have time."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 5, "last_activity_date": 1500484225, "last_edit_date": 1500484225, "creation_date": 1500483586, "answer_id": 45196732, "question_id": 45196598, "link": "https://stackoverflow.com/questions/45196598/c-working-with-objects-on-heap/45196732#45196732", "title": "C++ working with objects on heap", "body": "<p>I think that one of the most important thing to know about C++ <em>especially if you come from Java/C# background</em> is:</p>\n\n<p><strong><em>Objects are value-types by default, not reference type!</em></strong></p>\n\n<p>you entire code could have been written as simply: </p>\n\n<pre><code>int main()\n{\n    //this work\n    Person person(\"John Doe\", 22); \n    //this work\n    Child child(\"Johnny Doe\", 2, person);\n    cout &lt;&lt; \"---end of main---\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>See how the code turned into nothing? you don't have to worry about allocations, deleting unused object etc. because <strong>objects are not reference type to begin with!</strong></p>\n\n<p>My personal hierarchy of rules go:</p>\n\n<ol>\n<li>use objects as value types as much as possible. pass them by reference to avoid copies. make sure a valid move constructor is implemented for relevant classes. objects as value types + references should be the default way of programming C++.</li>\n<li>if you can't use a reference, because you want to specify a missing object, use C-pointer. by any way, strict the C-pointers to minimum and never let them manage anything. C-pointers are basically \"viewers\" to something and they can view \"nothing\" (or null). always think if you can replace C-pointer by C++ reference. if you <em>can</em> do it, <em>do</em> it.</li>\n<li>use <code>std::unique_ptr</code> if for some reason you do need dynamic memory allocation, such as dynamic polymorphism. keep in mind that C++ works mostly on templates as static polymorphism, instead of the Java style inherit+override technique. </li>\n<li>use <code>std::shared_ptr</code> rarely,and only when you're sure there are many owners, like an object which is referenced on different threads. <code>std::shared_ptr</code> should be used in extreme cases. always copy the shared pointer. never pass the shared pointer by reference.</li>\n</ol>\n\n<p>Anyway, <code>new</code> , <code>new[]</code> , <code>delete</code> and <code>delete[]</code> are pretty much deprecated. only library writers should use them in very extreme cases. <code>std::make_</code> should be the only way allocating object on the heap, alongside the STL containers such as <code>std::vector</code> and <code>std::list</code>. </p>\n"}], "owner": {"reputation": 141, "user_id": 8284839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154652761177109/picture?type=large", "display_name": "AleksanderNaumenok", "link": "https://stackoverflow.com/users/8284839/aleksandernaumenok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500489963, "creation_date": 1500483205, "last_edit_date": 1500489963, "question_id": 45196598, "link": "https://stackoverflow.com/questions/45196598/c-working-with-objects-on-heap", "title": "C++ working with objects on heap", "body": "<p>I am currently learning C++, coming from C#/Java background, using visual studio 2017.</p>\n\n<p>I have a question in regards to creating objects on heap and referencing them properly down the road. So far I came across multiple tutorials and ways of doing things. Some recommend using smart pointers as much as possible, others swear its <a href=\"http://www.codingwisdom.com/codingwisdom/2012/09/reference-counted-smart-pointers-are-for-retards.html\" rel=\"nofollow noreferrer\">the devils tool</a>.</p>\n\n<p>My current main looks like this:</p>\n\n<pre><code>//Main\nPerson *makePerson()\n{\n    string name;\n    int age;\n    cout &lt;&lt; \"Input name: \";\n    cin &gt;&gt; name;\n    cout &lt;&lt; \"Input age: \";\n    cin &gt;&gt; age;\n    return new Person(name, age);\n}\n\nChild *makeChild(Person &amp;parent)\n{\n    return new Child(*makePerson(), &amp;parent);;\n}\n\nint main()\n{\n    cout &lt;&lt; \"---Input parent data---\" &lt;&lt; endl;\n    Person *person = makePerson();\n    cout &lt;&lt; \"printing: \" &lt;&lt; *person &lt;&lt; endl;\n    cout &lt;&lt; \"---Input child data---\" &lt;&lt; endl;\n    Child *child = makeChild(*person);\n    cout &lt;&lt; \"printing: \" &lt;&lt; *child &lt;&lt; endl;\n    cout &lt;&lt; \"---end of main---\" &lt;&lt; endl;\n    delete person;\n    delete child;\n    return 0;\n}\n</code></pre>\n\n<p>A function handles input of personal data and returns a pointer to new Person object. Then I have a function that handles creation of child object by taking a parent reference and asking makePerson for remaining data.</p>\n\n<p>Can this be considered good C++? How can I make it better? I would really appreciate some code examples.</p>\n\n<p>As some have already suggested, I could replace raw pointers with either <code>shared_ptr&lt;Person&gt; person</code> (heavy) or <code>unique_ptr&lt;Person&gt;</code> (better than shared).</p>\n\n<p>This is code for Person and child classes. Note that Child has a raw pointer of type <code>Person *parent</code>.</p>\n\n<pre><code>//header\nclass Person\n{\nprotected: \n    std::string name;\n    int age;\npublic:\n    Person();\n    Person(const Person&amp; other);\n    Person(std::string inName, int inAge);\n    ~Person();\n    virtual void print() const;\n    std::string getName() const;\n    int getAge() const;\n    Person &amp;operator=(const Person &amp;other);\n    //overload print functionality, act as if it was toString\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Person &amp;p);\n};\n//cpp\nPerson::Person() : name(\"\"), age(0) {\n    std::cout &lt;&lt; \"Person empty constructor\" &lt;&lt; std::endl;\n}\n\nPerson::Person(std::string inName, int inAge) : name(inName), age(inAge) {\n    std::cout &lt;&lt; \"Person (\" &lt;&lt; name &lt;&lt; \") default constructor\" &lt;&lt; std::endl;\n}\n\nPerson::Person(const Person &amp; other) : name(other.name), age(other.age) {\n    std::cout &lt;&lt; \"Person (\" &lt;&lt; name &lt;&lt; \") copy constructor\" &lt;&lt; std::endl;\n}\n\nPerson::~Person() {\n    std::cout &lt;&lt; \"Person (\" &lt;&lt; name &lt;&lt; \") destructor\" &lt;&lt; std::endl;\n}\n\nvoid Person::print() const {\n    std::cout &lt;&lt; name &lt;&lt; \", \" &lt;&lt; age &lt;&lt; std::endl;\n}\n\nstd::string Person::getName() const\n{\n    return name;\n}\n\nint Person::getAge() const\n{\n    return age;\n}\n\nPerson &amp; Person::operator=(const Person &amp; other) {\n    std::cout &lt;&lt; \"Person (\" &lt;&lt; other.name &lt;&lt; \") assignment constructor\" &lt;&lt; std::endl;\n    name = other.name;\n    age = other.age;\n    return *this;\n}\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Person &amp;p) {\n    return out &lt;&lt; p.name &lt;&lt; \", \" &lt;&lt; p.age;\n}\n</code></pre>\n\n<p>A child is a person and it makes sense for a child to have knowledge of who childs parent is. However, am uncertain how to handle this \"knowledge\". Here is code I am using for child class:</p>\n\n<pre><code>//Header\nclass Child : public Person\n{\nprivate:\n    const Person *parent;\npublic:\n    Child();\n    Child(std::string name, int age);\n    Child(std::string name, int age, const Person *parent);\n    Child(const Child &amp;child, const Person *parent);\n    Child(const Person &amp;person);\n    ~Child();\n    Child &amp;operator=(const Child &amp;other);\n    void print() const;\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Child &amp;c);\n};\n//cpp\nChild::Child() {\n    std::cout &lt;&lt; \"Child empty constructor\" &lt;&lt; std::endl;\n}\n\nChild::Child(std::string name, int age) : Person(name, age), parent(nullptr) {\n    std::cout &lt;&lt; \"Orphan (\" &lt;&lt; name &lt;&lt; \") constructor\" &lt;&lt; std::endl;\n}\n\nChild::Child(std::string name, int age, const Person *parent) :\n    Person(name, age), parent(parent) {\n    std::cout &lt;&lt; \"Child (\" &lt;&lt; name &lt;&lt; \") default constructor\" &lt;&lt; std::endl;\n}\n\nChild::Child(const Child &amp;child, const Person *parent) : \n    Person(child.name, child.age), parent(parent) {\n    std::cout &lt;&lt; \"Child (\" &lt;&lt; child.name &lt;&lt; \") copy constructor\" &lt;&lt; std::endl;\n}\n\nChild::Child(const Person &amp;person) : Person(person), parent(nullptr) {\n    std::cout &lt;&lt; \"Child from person (\" &lt;&lt; name &lt;&lt; \") constructor\" &lt;&lt; std::endl;\n}\n\nChild::~Child() {\n    std::cout &lt;&lt; \"Child (\" &lt;&lt; name &lt;&lt; \") destructor\" &lt;&lt; std::endl;\n}\n\nChild &amp; Child::operator=(const Child &amp; other) {\n    name = other.name;\n    age = other.age;\n    parent = other.parent;\n    std::cout &lt;&lt; \"Child (\" &lt;&lt; name &lt;&lt; \") assignment constructor\" &lt;&lt; std::endl;\n    return *this;\n}\n\nvoid Child::print() const {\n    if(parent)\n        std::cout &lt;&lt; *this &lt;&lt; \" is child of \" &lt;&lt; *parent &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; *this &lt;&lt; \" is orphan\" &lt;&lt; std::endl;\n}\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Child &amp;c) {\n    return out &lt;&lt; c.name &lt;&lt; \", \" &lt;&lt; c.age &lt;&lt; \" is \" &lt;&lt; \n        (c.parent ? (\"child of \" + c.parent-&gt;getName() + \", \" + std::to_string(c.parent-&gt;getAge())) : \"orphan\");\n}\n</code></pre>\n\n<p>This is the output I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rvxYy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rvxYy.png\" alt=\"enter image description here\"></a></p>\n\n<p>I suppose my question still remains, could anyone give me an example of how it should look like to be considered good C++?</p>\n\n<p>@user4581301 if you take a look at the updated main, do you mean I should return a <code>std::unique_ptr</code>instead of a <code>* (raw pointer)</code>? In which case my function will look like this: </p>\n\n<pre><code>std::unique_ptr&lt;Person&gt; makePerson2()\n{\n    string name;\n    int age;\n    cout &lt;&lt; \"Input name: \";\n    cin &gt;&gt; name;\n    cout &lt;&lt; \"Input age: \";\n    cin &gt;&gt; age;\n    return std::unique_ptr&lt;Person&gt;(new Person(name, age));\n}\n</code></pre>\n\n<p>And variable declaration as: </p>\n\n<pre><code>std::unique_ptr&lt;Person&gt; upParent = makePerson2();\ncout &lt;&lt; \"printing: \" &lt;&lt; *upParent &lt;&lt; endl;\n</code></pre>\n\n<p>Would this be considered \"better\" C++ than what I have so far?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1500483118, "post_id": 45196544, "comment_id": 77360523, "body": "Why do you expect the second to work?  <code>new</code> returns a pointer."}, {"owner": {"reputation": 101, "user_id": 4926595, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3fd03d96b3b0e770fb3720f1818e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Twtheo", "link": "https://stackoverflow.com/users/4926595/twtheo"}, "edited": false, "score": 0, "creation_date": 1500483168, "post_id": 45196544, "comment_id": 77360558, "body": "duplicate? <a href=\"https://stackoverflow.com/questions/2726356/the-new-operator-in-c-pointer-question\" title=\"the new operator in c pointer question\">stackoverflow.com/questions/2726356/&hellip;</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1500483706, "post_id": 45196544, "comment_id": 77360883, "body": "<a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a>"}, {"owner": {"reputation": 470, "user_id": 7158019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oDjwz.png?s=128&g=1", "display_name": "ytobi", "link": "https://stackoverflow.com/users/7158019/ytobi"}, "edited": false, "score": 1, "creation_date": 1500483892, "post_id": 45196544, "comment_id": 77361007, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2726356/the-new-operator-in-c-pointer-question\">the &quot;new&quot; operator in c++, pointer question</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1500486759, "post_id": 45196544, "comment_id": 77362660, "body": "So what is the difference between <code>int *n</code> and <code>int p</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 7810015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4e2ca6c6b33560262edd6e5003df1f?s=128&d=identicon&r=PG&f=1", "display_name": "Casper Ghost", "link": "https://stackoverflow.com/users/7810015/casper-ghost"}, "is_accepted": false, "score": 0, "last_activity_date": 1500484451, "creation_date": 1500484451, "answer_id": 45197026, "question_id": 45196544, "link": "https://stackoverflow.com/questions/45196544/new-operator-understanding/45197026#45197026", "title": "&#39;new&#39; operator understanding", "body": "<p>new operator used with pointers, not int type\nso </p>\n\n<pre><code>   int x = 5;\n   int *p = &amp;x;\n   int *q = new int(4);\n</code></pre>\n\n<p>and you can use it with classes struct, so on but not pure types\nI mean just int char .. etc. </p>\n\n<p>this is the declaration of new :</p>\n\n<pre><code>  void* operator new[] (std::size_t size);\n  void* operator new[] (std::size_t size, const std::nothrow_t&amp; nothrow_value) noexcept;\n  void* operator new[] (std::size_t size, void* ptr) noexcept;\n</code></pre>\n\n<p>as what you see it's return pointer type void so you cann't in c/c++\nwrite </p>\n\n<pre><code>  int x = p; // error : invalid conversion from 'int*' to 'int'\n</code></pre>\n\n<p>which is the same as what you did.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 5264190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPgNz.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/5264190/sid"}, "is_accepted": false, "score": 0, "last_activity_date": 1500485865, "creation_date": 1500485865, "answer_id": 45197447, "question_id": 45196544, "link": "https://stackoverflow.com/questions/45196544/new-operator-understanding/45197447#45197447", "title": "&#39;new&#39; operator understanding", "body": "<p>It is quite evident from the error message itself..\n<strong>error: invalid conversion from 'int*' to 'int'</strong> </p>\n\n<p><em>Since \"new\" returns a pointer if it is successful</em>. That's why you are getting an error when you are trying to assign it to an int.</p>\n"}], "owner": {"reputation": 1, "user_id": 7920740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7b16b7743f7a0c102d9e5066a0cefe?s=128&d=identicon&r=PG&f=1", "display_name": "b.s.", "link": "https://stackoverflow.com/users/7920740/b-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1500485865, "creation_date": 1500483041, "last_edit_date": 1500483175, "question_id": 45196544, "link": "https://stackoverflow.com/questions/45196544/new-operator-understanding", "title": "&#39;new&#39; operator understanding", "body": "<p>need detailed explanation on the 'new' operator in C++.\nCan somebody explain why the following works: </p>\n\n<pre><code>int *n = new int(10);  // initialize the pointer to integer as '10'\ncout &lt;&lt; *n;            // o/p -&gt; 10\n</code></pre>\n\n<p>but this does not work?</p>\n\n<pre><code>int p = new int (10);  // error: invalid conversion from 'int*' to 'int' [-fpermissive]\n</code></pre>\n"}, {"tags": ["c++", "linux", "bash", "qt", "shell"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1500491494, "post_id": 45196458, "comment_id": 77365417, "body": "What line does QtCreator show when you get that error?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1500491758, "post_id": 45196458, "comment_id": 77365544, "body": "Does it work better if you do <code>&quot;program exited with exit code &quot;+std::to_string(i)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1500483214, "post_id": 45196516, "comment_id": 77360593, "body": "This has some useful links on how to interpret the return code: <a href=\"http://en.cppreference.com/w/cpp/utility/program/system\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/program/system</a>"}, {"owner": {"reputation": 113, "user_id": 5341452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/522816331211719/picture?type=large", "display_name": "Ihsan Izwer", "link": "https://stackoverflow.com/users/5341452/ihsan-izwer"}, "edited": false, "score": 0, "creation_date": 1500484454, "post_id": 45196516, "comment_id": 77361352, "body": "@ikleschenkov I&#39;ve tried that it gives me the following error :  The inferior stopped because it received a signal from the operating system.  Signal name :  SIGSEGV Signal meaning :  Segmentation fault"}], "tags": [], "owner": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1500482949, "creation_date": 1500482949, "answer_id": 45196516, "question_id": 45196458, "link": "https://stackoverflow.com/questions/45196458/capturing-shell-script-exit-status-in-c/45196516#45196516", "title": "Capturing shell script exit status in c++", "body": "<p>Prototype of <code>system</code> command is:</p>\n\n<pre><code>int system(const char *command);\n</code></pre>\n\n<p>and it returns the exit code of the command, that it executed (the shell script in your example). So you have simply use:</p>\n\n<pre><code>int status = system(\"./myscript.sh\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1500485876, "last_edit_date": 1500485876, "creation_date": 1500485205, "answer_id": 45197253, "question_id": 45196458, "link": "https://stackoverflow.com/questions/45196458/capturing-shell-script-exit-status-in-c/45197253#45197253", "title": "Capturing shell script exit status in c++", "body": "<blockquote>\n  <p>I have a requirement of developing a small dependency manager for a Qt based C++ application I am developing.</p>\n</blockquote>\n\n<p>You should consider instead making a proper <a href=\"https://en.wikipedia.org/wiki/Package_manager\" rel=\"nofollow noreferrer\">package</a> for your (or some common) distribution (e.g. some <a href=\"https://en.wikipedia.org/wiki/Deb_(file_format)\" rel=\"nofollow noreferrer\"><code>.deb</code> file</a> for Debian or Ubuntu), because package managers do this job (handing dependency management) better than you reasonably could.</p>\n\n<hr>\n\n<p>The return code of <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">system(3)</a>  is actually the <em>status</em> code given by <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\">waitpid(2)</a>. Read about <a href=\"https://www.gnu.org/software/bash/manual/html_node/Exit-Status.html#Exit-Status\" rel=\"nofollow noreferrer\">exit status</a> of bash and shells. So if the last command executed (by <code>/bin/sh -c</code> started by  <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">system(3)</a>) crashed with a <code>SIGSEGV</code>  (see <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a>...) you could use <code>WIFSIGNALED</code>  then <code>WTERMSIG</code></p>\n\n<p>I guess that some program run by your <code>./myscript.sh</code> crashed badly.</p>\n\n<p>You might consider using the shell <a href=\"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html\" rel=\"nofollow noreferrer\"><code>trap</code>  builtin</a> in your script to handle that.</p>\n"}], "owner": {"reputation": 113, "user_id": 5341452, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/522816331211719/picture?type=large", "display_name": "Ihsan Izwer", "link": "https://stackoverflow.com/users/5341452/ihsan-izwer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1930, "favorite_count": 0, "closed_date": 1500494019, "answer_count": 2, "score": -2, "last_activity_date": 1500485876, "creation_date": 1500482752, "last_edit_date": 1500484847, "question_id": 45196458, "link": "https://stackoverflow.com/questions/45196458/capturing-shell-script-exit-status-in-c", "closed_reason": "Duplicate", "title": "Capturing shell script exit status in c++", "body": "<p>I have a requirement of developing a small dependency manager for a Qt based C++ application I am developing. This C++ application will be targeting Linux systems. So this is how it works. I execute a shell script through the system() function. In the shell script I check whether the required packages are installed, if not I exit the shell script with the status of the last executed command. My question is, how do we capture this in C++ and handle it? (I want to capture it so I can inform the user that some of the dependencies are not installed and seek user permission to install them)</p>\n\n<p>C++ code :</p>\n\n<pre><code>system(\"./myscript.sh\");\n</code></pre>\n\n<p>Shell code :</p>\n\n<pre><code>iwconfig\nexit $?\n</code></pre>\n\n<p>I've tried this aproach earlier on:</p>\n\n<p>in C++ :</p>\n\n<pre><code>int i = system(\"./myscript.sh\");\nif(i!=0)\nQMessageBox::information(this, tr(\"test\"), tr(\"program exited with exit code\"+i));\n</code></pre>\n\n<p>But then I get the following error :\n The inferior stopped because it received a signal from the operating system. Signal name : SIGSEGV Signal meaning : Segmentation fault</p>\n\n<p>How to get it done??</p>\n"}, {"tags": ["c++", "database"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1500482613, "post_id": 45196369, "comment_id": 77360184, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\" title=\"whats the difference between passing by reference vs passing by value\">stackoverflow.com/questions/373419/&hellip;</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500487219, "post_id": 45196369, "comment_id": 77362926, "body": "Also worth reading: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong</a> Consider as a replacement <code>while (readFile &gt;&gt; firstName[count] &gt;&gt; lastName[count] &gt;&gt; passWord[count] &gt;&gt; accountBalance[count]) {     count++;  }</code> This takes advantage of <code>&gt;&gt;</code> returning a reference to the input stream allowing chaining of the IO and <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\"><code>operator bool</code></a>"}, {"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 0, "creation_date": 1500495317, "post_id": 45196369, "comment_id": 77367547, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">What&#39;s the difference between passing by reference vs. passing by value?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 4926595, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3fd03d96b3b0e770fb3720f1818e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Twtheo", "link": "https://stackoverflow.com/users/4926595/twtheo"}, "is_accepted": false, "score": 0, "last_activity_date": 1500483063, "last_edit_date": 1500483063, "creation_date": 1500482724, "answer_id": 45196446, "question_id": 45196369, "link": "https://stackoverflow.com/questions/45196369/c-cant-update-one-of-my-variables/45196446#45196446", "title": "C++ can&#39;t update one of my variables", "body": "<p>You are only changing the value that you pass into the function (thus not changing the accountbalance outside of the function). For your methods where you need to update the accountbalance you either need to:</p>\n\n<ul>\n<li>Pass by reference</li>\n<li>Create a global variable</li>\n<li>use a return value to update the account balance</li>\n</ul>\n\n<p>Try one of these and see how it goes.</p>\n"}], "owner": {"reputation": 13, "user_id": 8287496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a41a409914e4f93b1190b14ec15139?s=128&d=identicon&r=PG&f=1", "display_name": "Blooddy", "link": "https://stackoverflow.com/users/8287496/blooddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500483063, "creation_date": 1500482477, "question_id": 45196369, "link": "https://stackoverflow.com/questions/45196369/c-cant-update-one-of-my-variables", "title": "C++ can&#39;t update one of my variables", "body": "<p>I had this school assignment to build an atm machine. I got it to work but if I deposit or withdrawal money and view my account balance later its still not updated. Can someone tell me what I am doing wrong and any suggestion on how to make my code better, in general, would be appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nvoid WelcomeMenu();\nvoid Menu();\nvoid userChoiceDeposite(double accountbalance);\nvoid userChoiceWithdraw(double accountbalance);\nvoid userChoiceView(double accountbalance);\nvoid printReceipt();\n\n\nint main ()\n{\n//clear receipt.txt from previous transactions\nofstream clearFile(\"Receipt.txt\");\nclearFile.close();\n\n\n//Declaring variables\nstring userInput;\nchar userAction;\n\n//prompt user for input, start the program or quit\ncout &lt;&lt;\"Enter start to continue, or Q/q to quit \";\ngetline (cin, userInput);\ncout &lt;&lt;endl;\n\n//check the input\nif ((userInput == \"q\") || (userInput == \"Q\"))\n{\n    cout &lt;&lt;\"Have a nice day!\" &lt;&lt;endl;\n    return 0;\n}\n\nelse if (userInput == \"start\")\n{\nconst int sizeLimit = 50;\nstring firstName[sizeLimit], lastName[sizeLimit], passWord[sizeLimit];\ndouble accountBalance[sizeLimit];\nint count = 0;\n\nifstream readFile(\"Accounts.txt\");\n\n while (!readFile.eof())\n {\n    readFile &gt;&gt; firstName[count];\n    readFile &gt;&gt; lastName[count];\n    readFile &gt;&gt; passWord[count];\n    readFile &gt;&gt; accountBalance[count];\n    count++;\n }\n    //ask for username/pw\n    string fName, lName, pwd;\n    double accountbalance;\n    bool exists = false;\n\n do\n {\n    cout &lt;&lt;\"Enter First Name: \";\n    cin &gt;&gt; fName;\n    cout &lt;&lt;\"Enter Last Name: \";\n    cin &gt;&gt;lName;\n    cout &lt;&lt;\"Enter Password: \";\n    cin &gt;&gt; pwd;\n\n    for (int i=0; i&lt;sizeLimit; i++)\n    {\n        if (firstName[i] == fName)\n        {\n            if (lastName[i] == lName)\n            {\n                if (passWord[i] == pwd)\n                {\n                    exists = true;\n                    accountbalance = accountBalance[i];\n                }\n            }\n        }\n    }\n }\n while (exists == false);\n    //if correct display menu\n    WelcomeMenu();\n    cin &gt;&gt; userAction;\n    //while login is valid (true)\n    while (userAction != 'q')\n    {\n\n\n        if (userAction == 'D' || userAction == 'd')\n        {\n            userChoiceDeposite(accountbalance);\n        }\n        else if (userAction == 'W' || userAction == 'w')\n        {\n            userChoiceWithdraw(accountbalance);\n        }\n        else if (userAction == 'V' || userAction == 'v')\n        {\n            userChoiceView(accountbalance);\n        }\n        else if (userAction == 'P' || userAction == 'p')\n        {\n            printReceipt();\n            return 0;\n        }\n        else\n        {\n            cout &lt;&lt;\"Have a nice Day\" &lt;&lt;endl;\n            return 0;\n        }\n        Menu();\n        cin &gt;&gt; userAction;\n\n\n    }\n}\n\nelse\n{\n    cout &lt;&lt;\"Input Error...\" &lt;&lt;endl;\n}\n\n\nreturn 0;\n}\n\n\n//welcome menu display function\nvoid WelcomeMenu()\n{\n\ncout &lt;&lt;\"Welcome to your account \" &lt;&lt;endl;\ncout &lt;&lt;endl;\ncout &lt;&lt;\"[D/d] Deposit Money\" &lt;&lt;endl;\ncout &lt;&lt;\"[W/w] Withdraw Money\" &lt;&lt;endl;\ncout &lt;&lt;\"[V/v] View Account Balance\" &lt;&lt;endl;\ncout &lt;&lt;\"[Q/q] Quit\" &lt;&lt;endl;\n\n}\n//function after action was taken (add print option)\nvoid Menu()\n{\ncout &lt;&lt;endl;\ncout &lt;&lt;\"[D/d] Deposit Money\" &lt;&lt;endl;\ncout &lt;&lt;\"[W/w] Withdraw Money\" &lt;&lt;endl;\ncout &lt;&lt;\"[V/v] View Account Balance\" &lt;&lt;endl;\ncout &lt;&lt;\"[P/p] Print Receipt and quit\" &lt;&lt;endl;\ncout &lt;&lt;\"[Q/q] Quit\" &lt;&lt;endl;\n\n}\n//deposit function\nvoid userChoiceDeposite(double accountbalance)\n{\n\nint depositMoney;\ncout &lt;&lt;\"Enter the ammount of money you want to deposit. Max $10000\"         &lt;&lt;endl;\ncin &gt;&gt; depositMoney;\n\nif ((depositMoney &gt; 0) &amp;&amp; (depositMoney &lt;= 10000))\n{\n    accountbalance = accountbalance + depositMoney;\n    ofstream saveAction(\"Receipt.txt\", ios_base::app);\n    saveAction &lt;&lt; \"You made a deposit of $\" &lt;&lt;depositMoney &lt;&lt;endl;\n    saveAction.close();\n\n}\nelse\n{\n    cout &lt;&lt;\"Incorrect ammount\" &lt;&lt;endl;\n    return userChoiceDeposite(1);\n}\n\n}\n//withdraw function\nvoid userChoiceWithdraw(double accountbalance)\n{\nint withdrawMoney;\ncout &lt;&lt;\"Enter the ammount of $ you want to withdraw:\";\ncin &gt;&gt; withdrawMoney;\n\nif (accountbalance &lt; withdrawMoney)\n{\n    cout &lt;&lt;\"You dont have that much money\"&lt;&lt;endl;\n    return userChoiceWithdraw(1);\n}\nelse\n{\n    accountbalance = accountbalance - withdrawMoney;\n    ofstream saveAction(\"Receipt.txt\", ios_base::app);\n    saveAction &lt;&lt; \"You withdrew $\" &lt;&lt;withdrawMoney &lt;&lt;endl;\n    saveAction.close();\n}\n}\n//view function\nvoid userChoiceView(double accountbalance)\n{\ncout &lt;&lt;\"Your account balance is $\" &lt;&lt;accountbalance &lt;&lt;endl;\nofstream saveAction(\"Receipt.txt\", ios_base::app);\nsaveAction &lt;&lt; \"You viewed your account balance\" &lt;&lt;endl;\nsaveAction.close();\n\n\n}\n//print receipt function\nvoid printReceipt()\n{\nofstream saveAction(\"Receipt.txt\", ios_base::app);\nsaveAction &lt;&lt; \"\" &lt;&lt;endl;\nsaveAction &lt;&lt; \"\" &lt;&lt;endl;\nsaveAction &lt;&lt; \"\" &lt;&lt;endl;\nsaveAction &lt;&lt; \"Thank you! Come again!\" &lt;&lt;endl;\nsaveAction.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "tensorflow"], "comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 1, "creation_date": 1500508436, "post_id": 45196330, "comment_id": 77372753, "body": "How are you building that program? It looks like <code>libprotobuf</code> has not been linked in."}, {"owner": {"reputation": 3114, "user_id": 1272205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/213c10c8495b7f85c8747bd767d150b9?s=128&d=identicon&r=PG", "display_name": "Mj1992", "link": "https://stackoverflow.com/users/1272205/mj1992"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1500508491, "post_id": 45196330, "comment_id": 77372772, "body": "i setup the project using this repository <a href=\"https://github.com/cjweeks/tensorflow-cmake\" rel=\"nofollow noreferrer\">github.com/cjweeks/tensorflow-cmake</a> since I wanted to build the c++ project with cmake"}], "answers": [{"tags": [], "owner": {"reputation": 3114, "user_id": 1272205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/213c10c8495b7f85c8747bd767d150b9?s=128&d=identicon&r=PG", "display_name": "Mj1992", "link": "https://stackoverflow.com/users/1272205/mj1992"}, "is_accepted": true, "score": 0, "last_activity_date": 1500561326, "creation_date": 1500561326, "answer_id": 45217794, "question_id": 45196330, "link": "https://stackoverflow.com/questions/45196330/c-tensorflow-error-while-printing-node-names/45217794#45217794", "title": "C++ tensorflow: error while printing node names", "body": "<p>With the help of @mrry's comment. I ended up linking the libprotobuf manually inside my CMakeLists.txt by including the <code>FindProtoBuf.cmake</code> file which is given inside the <a href=\"https://github.com/cjweeks/tensorflow-cmake\" rel=\"nofollow noreferrer\">repository</a>. I copied in the same directory as <code>CMakeLists.txt</code> and followed the commands in <a href=\"https://stackoverflow.com/questions/10010398/how-to-link-google-protobuf-libraries-via-cmake-on-linux\">this</a> answer on how to include ProtoBuf in cmake.</p>\n"}], "owner": {"reputation": 3114, "user_id": 1272205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/213c10c8495b7f85c8747bd767d150b9?s=128&d=identicon&r=PG", "display_name": "Mj1992", "link": "https://stackoverflow.com/users/1272205/mj1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 45217794, "answer_count": 1, "score": 0, "last_activity_date": 1500561326, "creation_date": 1500482368, "question_id": 45196330, "link": "https://stackoverflow.com/questions/45196330/c-tensorflow-error-while-printing-node-names", "title": "C++ tensorflow: error while printing node names", "body": "<p>I am trying to import <code>frozen_model.pb</code> using tensorflow c++. I want to check all the nodes in the graph if they are imported correctly. I found the example <a href=\"https://stackoverflow.com/questions/35508866/tensorflow-different-ways-to-export-and-run-graph-in-c\">here</a> using which I was trying to print the nodeNames. I am using the following code snippet.</p>\n\n<pre><code>int node_count = graph_def.node_size();\nfor (int i = 0; i &lt; node_count; i++) {\n    auto n = graph_def.node(i); // &lt;-- error here\n    cout&lt;&lt; n.name();\n}\n</code></pre>\n\n<p>Once the line with the comment ( error here ) runs. It throws me a strange error. Here's the complete error.</p>\n\n<pre><code>CMakeFiles/c++.dir/main.cc.o: In function `google::protobuf::RepeatedPtrField&lt;tensorflow::NodeDef&gt;::TypeHandler::Type const&amp; google::protobuf::internal::RepeatedPtrFieldBase::Get&lt;google::protobuf::RepeatedPtrField&lt;tensorflow::NodeDef&gt;::TypeHandler&gt;(int) const':\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x3a): undefined reference to `google::protobuf::internal::LogMessage::LogMessage(google::protobuf::LogLevel, char const*, int)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x50): undefined reference to `google::protobuf::internal::LogMessage::operator&lt;&lt;(char const*)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x68): undefined reference to `google::protobuf::internal::LogFinisher::operator=(google::protobuf::internal::LogMessage&amp;)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x7c): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0xb1): undefined reference to `google::protobuf::internal::LogMessage::LogMessage(google::protobuf::LogLevel, char const*, int)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0xc7): undefined reference to `google::protobuf::internal::LogMessage::operator&lt;&lt;(char const*)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0xdf): undefined reference to `google::protobuf::internal::LogFinisher::operator=(google::protobuf::internal::LogMessage&amp;)'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0xf3): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x12a): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\nmain.cc:(.text._ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi[_ZNK6google8protobuf8internal20RepeatedPtrFieldBase3GetINS0_16RepeatedPtrFieldIN10tensorflow7NodeDefEE11TypeHandlerEEERKNT_4TypeEi]+0x14f): undefined reference to `google::protobuf::internal::LogMessage::~LogMessage()'\ncollect2: error: ld returned 1 exit status\nmake[2]: *** [../bin/c++] Error 1\nmake[1]: *** [CMakeFiles/c++.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I get the correct number of <code>node_size</code> which is <code>21</code>. You can see here as I imported and printed the nodes of the same frozen_graph.pb in <code>python</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/fQkYD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fQkYD.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "windows-services", "windows-firewall-api"], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 4544940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34d0e4f3430d4f45ec928ce32850d469?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4544940/andy"}, "is_accepted": true, "score": 0, "last_activity_date": 1501219071, "creation_date": 1501219071, "answer_id": 45365372, "question_id": 45196273, "link": "https://stackoverflow.com/questions/45196273/restricting-a-service-using-windows-firewall-apis-not-finding-service-shortname/45365372#45365372", "title": "Restricting a Service using Windows Firewall APIs not finding service shortname", "body": "<p>It failed to restrict the service because I lacked administrator privileges. Ran it as administrator and worked.</p>\n"}], "owner": {"reputation": 95, "user_id": 4544940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34d0e4f3430d4f45ec928ce32850d469?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/4544940/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 45365372, "answer_count": 1, "score": 0, "last_activity_date": 1501219071, "creation_date": 1500482166, "question_id": 45196273, "link": "https://stackoverflow.com/questions/45196273/restricting-a-service-using-windows-firewall-apis-not-finding-service-shortname", "title": "Restricting a Service using Windows Firewall APIs not finding service shortname", "body": "<p>I am using the example to restrict all except one port for a specific windows service. I took the example from <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd339611(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn</a> and tried it for OpenVPN windows service. Basically I just edited these two lines:</p>\n\n<pre><code>BSTR bstrServiceName = SysAllocString(L\"OpenVPNServiceInteractive\"); \nBSTR bstrAppName = SysAllocString(L\"C:\\\\Program Files\\\\OpenVPN\\\\bin\\\\openvpnserv.exe\");\n</code></pre>\n\n<p>As it needs the shortname and not the display name, I did <code>sc query</code> in my console and found for <em>OpenVPNServiceInteractive</em>, but when I run it doesn't find the service shortname (it fails the handle and says: <em>RestrictService failed: Make sure you specified a valid service shortname</em>)</p>\n\n<p>So it basically can't find the service shortname which I specified. Does it prints (sc query) the real shortname of a service? Why doesn't it finds it?</p>\n"}, {"tags": ["c++", "windows", "qt", "makefile"], "comments": [{"owner": {"reputation": 734, "user_id": 2442002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qONGd.png?s=128&g=1", "display_name": "aatwo", "link": "https://stackoverflow.com/users/2442002/aatwo"}, "edited": false, "score": 0, "creation_date": 1500483079, "post_id": 45196242, "comment_id": 77360496, "body": "My best guess is that you installed the wrong build environment during your Qt install. You can double check this by running the maintenance tool (Usually found at Windows at C:/Qt/MaintenanceTool.exe), choose the option to &#39;add or remove components&#39; and you should see a tree of components to install. Expand the &#39;Qt 5.9.1&#39; section and make sure the options &#39;msvc2015 64-bit&#39; and / or &#39;msvc2017 64-bit&#39; are checked. If not, check what you want and click next to apply the changes. Once finished restart Qt creator and you should be able to use those new targets for builds!"}, {"owner": {"reputation": 1, "user_id": 7764424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6ZtN4y2jIos/AAAAAAAAAAI/AAAAAAAAAog/sCh2x6z25gw/photo.jpg?sz=128", "display_name": "Topkek", "link": "https://stackoverflow.com/users/7764424/topkek"}, "reply_to_user": {"reputation": 734, "user_id": 2442002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qONGd.png?s=128&g=1", "display_name": "aatwo", "link": "https://stackoverflow.com/users/2442002/aatwo"}, "edited": false, "score": 0, "creation_date": 1500489476, "post_id": 45196242, "comment_id": 77364207, "body": "I did that and now i have an error with not finding &quot;cl&quot;. I&#39;m trying to reinstall in again"}], "owner": {"reputation": 1, "user_id": 7764424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6ZtN4y2jIos/AAAAAAAAAAI/AAAAAAAAAog/sCh2x6z25gw/photo.jpg?sz=128", "display_name": "Topkek", "link": "https://stackoverflow.com/users/7764424/topkek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500487677, "creation_date": 1500482072, "last_edit_date": 1500487677, "question_id": 45196242, "link": "https://stackoverflow.com/questions/45196242/qt-wont-build-anything-using-vs2015", "title": "QT Won&#39;t build anything (using VS2015)", "body": "<p>So I installed QT and I had already installed Visual Studio 2015 and 2017</p>\n\n<p>Here is the error: </p>\n\n<pre><code>C:\\Qt\\Tools\\QtCreator\\bin\\jom.exe -f Makefile.Debug\nlink /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /SUBSYSTEM:WINDOWS \"/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'\" /MANIFEST:embed /OUT:debug\\test.exe @C:\\Users\\pc\\AppData\\Local\\Temp\\test.exe.3864.0.jom\n'link' is not recognized as an internal or external command,\noperable program or batch file.\njom: C:\\Users\\pc\\Desktop\\QT\\build-test-Desktop_Qt_5_9_1_MSVC2013_64bit-Debug\\Makefile.Debug [debug\\test.exe] Error 1\njom: C:\\Users\\pc\\Desktop\\QT\\build-test-Desktop_Qt_5_9_1_MSVC2013_64bit-Debug\\Makefile [debug] Error 2\n18:25:04: The process \"C:\\Qt\\Tools\\QtCreator\\bin\\jom.exe\" exited with code 2.\nError while building/deploying project test (kit: Desktop Qt 5.9.1 MSVC2013 64bit)\nThe kit Desktop Qt 5.9.1 MSVC2013 64bit has configuration issues which might be the root cause for this problem.\nWhen executing step \"Make\"\n</code></pre>\n\n<p>And here is my environment <a href=\"https://i.stack.imgur.com/kjM4v.png\" rel=\"nofollow noreferrer\">kits</a> QtVersion 5.9.1 MSVC2013 auto detected and  Manual 5.6.2 <a href=\"https://i.stack.imgur.com/Obgex.png\" rel=\"nofollow noreferrer\">Compiler</a> debugger and CMake are empty.</p>\n\n<p>I run on a windows 7 enterprise 64bits</p>\n"}, {"tags": ["c++", "debugging", "visual-studio-code", "lldb", "stdset"], "answers": [{"comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1500505961, "post_id": 45202497, "comment_id": 77372056, "body": "Data formatters could also fail because the variable has been partially/entirely optimized away."}, {"owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "edited": false, "score": 0, "creation_date": 1500507496, "post_id": 45202497, "comment_id": 77372485, "body": "I use <code>O0</code> and <code>-DDEBUG=2</code>, so there should not be any optimization"}, {"owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "edited": false, "score": 0, "creation_date": 1501005938, "post_id": 45202497, "comment_id": 77583418, "body": "Finally got to try this, but when I do <code>fr v myset</code> i get the size, and {} so it&#39;s not inspecting the object for some reason. Note that the set contain objects itself, so that may be why... but then how to i inspect objects isnide a set?"}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": false, "score": 0, "last_activity_date": 1500505698, "creation_date": 1500505698, "answer_id": 45202497, "question_id": 45196166, "link": "https://stackoverflow.com/questions/45196166/inspect-c-stdset-in-vscode-with-lldb/45202497#45202497", "title": "inspect C++ std::set in VSCode with LLDB", "body": "<p>lldb uses \"data formatters\" to pretty print objects.  See:</p>\n\n<p><a href=\"http://lldb.llvm.org/varformats.html\" rel=\"nofollow noreferrer\">http://lldb.llvm.org/varformats.html</a></p>\n\n<p>for more details.  </p>\n\n<p>lldb has built-in data formatters for std::set from the clang standard libraries.  If VSCode uses that version of the C++ standard library then the data formatters should fire automatically.  If VSCode gives you access to the lldb command line, you can check the std::set data formatter thusly:</p>\n\n<pre><code>(lldb) fr v my_set\n(std::__1::set&lt;int, std::__1::less&lt;int&gt;, std::__1::allocator&lt;int&gt; &gt;) my_set = size=3 {\n  [0] = 100\n  [1] = 200\n  [2] = 300\n}\n</code></pre>\n\n<p>If you see the elements broken out then the data formatters are working (and you can use the console to view them.)  If they use a different version of the STL, then the link above will get you started writing data formatters for their object layout.</p>\n\n<p>The data formatters also hook into the API's lldb provides to inspect values, but it may be that VSCode is using lldb's emulation of gdb's \"Machine Interface\" layer, in which case it won't be able to access the data formatter results.</p>\n"}], "owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 937, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1500505698, "creation_date": 1500481776, "question_id": 45196166, "link": "https://stackoverflow.com/questions/45196166/inspect-c-stdset-in-vscode-with-lldb", "title": "inspect C++ std::set in VSCode with LLDB", "body": "<p>This is a VSCode specific question. </p>\n\n<p>Asking here since the VSCode repo points to asking question on SO.</p>\n\n<p>I'm using <strong>VSCode on Mac OS, with LLDB</strong>.</p>\n\n<p>I'm trying to figure out <strong>how to inspect a</strong> <code>std::set</code>.</p>\n\n<p>I can't find any doc on this; I found some ways to do it with GDB using macros (<a href=\"https://sourceware.org/ml/gdb/2008-02/msg00064/stl-views.gdb\" rel=\"nofollow noreferrer\">https://sourceware.org/ml/gdb/2008-02/msg00064/stl-views.gdb</a>) </p>\n\n<p>but I can't get GDB to work with VS Code (used the WebFreak Native Debug extension but on run I just get \"running executable\" and nothing happening, no error, no log, so I gave up on that)</p>\n\n<p>LLDB has worked good for me so far (using <code>-DDEBUG=2</code> flags to get symbols working right), but I see nothing when trying to open a <code>set</code> in the <code>variables</code> frame. </p>\n\n<p>I only get the number of items in it.</p>\n\n<p>Is there similar macros as the GDB ones to inspect sets in LLDB? Or is there some other way?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 3, "creation_date": 1500481638, "post_id": 45196073, "comment_id": 77359624, "body": "What is difficult about using <code>rand()</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1500481775, "post_id": 45196073, "comment_id": 77359691, "body": "If you are using C++ I would suggest using the new <a href=\"http://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\"><code>&lt;random&gt;</code></a> facilities.  You can get better randomness and after writing a convenience function it becomes really simply to call a function and give it range to return from."}, {"owner": {"reputation": 3, "user_id": 8333065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92edcf7de0f7948c7c2d47a569505877?s=128&d=identicon&r=PG", "display_name": "user8333065", "link": "https://stackoverflow.com/users/8333065/user8333065"}, "edited": false, "score": 0, "creation_date": 1500481828, "post_id": 45196073, "comment_id": 77359716, "body": "Finding seed by feeding array"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1500481853, "post_id": 45196073, "comment_id": 77359726, "body": "Can you explain what you mean by <i>finding the seed</i>? Reverse-engineering the initial seed value given a set of consecutive random numbers is only possible in limited cases."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1500482333, "post_id": 45196073, "comment_id": 77360023, "body": "Please pick a language"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1500483991, "post_id": 45196073, "comment_id": 77361078, "body": "Do I understand correctly, that you want a PRNG (which does by definition practically not allow to determine the next value), with the special attribute that it is always possible to determine the preceding value, if a sequence of a certain minumum length is known?"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1500482273, "post_id": 45196238, "comment_id": 77359978, "body": "Is there a reason you&#39;re using <code>std::bind</code> instead of a lambda?  You don&#39;t really need a <code>std::function</code> object and the type erasure that comes with it here."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500482345, "post_id": 45196238, "comment_id": 77360027, "body": "@NathanOliver No reason except that I just grabbed an old example I had previously written for another purpose. A lambda would work equally well."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500482382, "post_id": 45196238, "comment_id": 77360044, "body": "OK.  Just checking."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 0, "last_activity_date": 1500482565, "last_edit_date": 1500482565, "creation_date": 1500482053, "answer_id": 45196238, "question_id": 45196073, "link": "https://stackoverflow.com/questions/45196073/how-to-generate-pseudorandom-no-easily/45196238#45196238", "title": "How to generate pseudorandom no. easily?", "body": "<p>Here's a simple example that generates 10 evenly distributed random numbers in the range -42 to 42 :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;random&gt;\nint main()\n{\n    std::random_device seed_device;\n    std::mt19937 engine(seed_device());\n    std::uniform_int_distribution&lt;int&gt; distribution(-42, 42);\n    auto rnd = std::bind(distribution, std::ref(engine));\n    for (int i = 0; i &lt; 10; ++i) {\n        std::cout &lt;&lt; \"random number: \" &lt;&lt; rnd() &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>See also:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/header/random</a></p>\n"}], "owner": {"reputation": 3, "user_id": 8333065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92edcf7de0f7948c7c2d47a569505877?s=128&d=identicon&r=PG", "display_name": "user8333065", "link": "https://stackoverflow.com/users/8333065/user8333065"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1500498800, "accepted_answer_id": 45196238, "answer_count": 1, "score": -6, "last_activity_date": 1500482565, "creation_date": 1500481472, "question_id": 45196073, "link": "https://stackoverflow.com/questions/45196073/how-to-generate-pseudorandom-no-easily", "closed_reason": "Needs details or clarity", "title": "How to generate pseudorandom no. easily?", "body": "<p>i am using <code>seed</code> and  functions like  <code>srand()</code> or <code>random()</code>  to generate numbers   from just <code>0 to 5</code> but i  need an easier method that makes also easy to  find <code>seed</code> by feeding array. Please suggest one</p>\n"}, {"tags": ["c++", "linux", "boost", "shared-libraries"], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 1, "creation_date": 1500567618, "post_id": 45211518, "comment_id": 77406728, "body": "really helpful information, I will try to place the project libs inside the project folder, although that entails that any future tool depends on those libs will force me to manually copy the files. Additionally, running <code>ldconfig</code>, creates a symlink inside <code>&#47;usr&#47;local&#47;lib</code> for the libs, without the suffix <code>oldabi</code>. Confusing."}], "tags": [], "owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "is_accepted": false, "score": 1, "last_activity_date": 1500564037, "last_edit_date": 1500564037, "creation_date": 1500544959, "answer_id": 45211518, "question_id": 45195927, "link": "https://stackoverflow.com/questions/45195927/custom-built-and-default-boost-libraries-on-the-same-system/45211518#45211518", "title": "Custom-built and default boost libraries on the same system", "body": "<p>Preamble: If you need your custom boost libraries only for a single tool, it is better to install them into a place which is specific to this single tool. Installing custom libs into a system-wide location (<code>/usr/local/lib</code>) is not a very good idea, because</p>\n\n<ul>\n<li>It increases the risk that also your system-wide apps will use the bad one.</li>\n<li>If you want once cleanup <code>/usr/local/lib</code>, you won't be able to know, what is using the libs there.</li>\n</ul>\n\n<p>It would be better if you would make them available only for your software. For example, if your software is in <code>/srv/niceproject/bin</code>, then the libs could exist in <code>/srv/niceproject/lib</code>.</p>\n\n<p>Note, the shared library handling is enough smart in Linux to handle libraries <em>with different versions</em> available, all the binaries will map in the libs according to their needed versions. But, it depends on special symbols inserted by the linker into the binaries. If you change only the compiler flags, these symbols may be the same, thus a false lib may be linked in.</p>\n\n<p>You can prioritize <code>/usr/local/lib</code> by changing the shared library order in <code>/etc/ld.so.conf</code> and in <code>/etc/ld.so.conf.d</code>, and then calling an <code>ldconfig</code>. To get the list of the currently visible libraries, use <code>ldconfig -p</code>.</p>\n\n<p>There is a lot, so an <code>ldconfig -p|grep libboost</code> could be a nicer result.</p>\n\n<hr>\n\n<p>The shared library directory order is affected also by the <code>LD_LIBRARY_PATH</code> environment variable, what can be specified for every process. Thus, calling your tool with</p>\n\n<pre><code>LD_LIBRARY_PATH=/srv/niceproject/lib /srv/niceproject/bin/mytool\n</code></pre>\n\n<p>will call <code>mytool</code> on a way, that it tries to find the libs in <code>/srv/niceproject/lib</code> first, and looks the system-wide ones only after it. It is a colon-separated list of pathes, like <code>$PATH</code>.</p>\n\n<hr>\n\n<p>Linking your binary with a library given by an absolute path will hardcode the absolute path into the library. So:</p>\n\n<pre><code>gcc -o mytool -l/usr/local/lib/libboost_oldapi_anything.so\n</code></pre>\n\n<p>Also this is a dirty solution in general, but it would solve your problem.</p>\n\n<hr>\n\n<p>You can see, what exactly an actual library is loading, with the <code>ldd</code> tool:</p>\n\n<pre><code># ldd /bin/bash\n    linux-vdso.so.1 =&gt;  (0x00007ffd1c1cf000)\n    libtinfo.so.5 =&gt; /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007f4baa499000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f4baa295000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4ba9eca000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f4baa6d0000)\n</code></pre>\n\n<p><code>ldd</code> is a special binary, you can specify any <code>LD_LIBRARY_PATH</code>, it won't affect it (but it will affect the binary you are checking with it). In my example, with an <code>LD_LIBRARY_PATH=/srv/niceproject/lib ldd /srv/niceproject/bin/mytool</code> will show, how the <code>mytool</code> is affected by this environment variable.</p>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500564037, "creation_date": 1500480954, "question_id": 45195927, "link": "https://stackoverflow.com/questions/45195927/custom-built-and-default-boost-libraries-on-the-same-system", "title": "Custom-built and default boost libraries on the same system", "body": "<p>I've built some boost libraries (particularly <code>system</code> and <code>serialization</code>) with the <code>_GLIBCXX_USE_CXX11_ABI=0</code> macro (<a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html</a>) due to the fact that I'm using <code>boost::asio</code> to share information (by mean) between my code and an old application (Webots 7.4.3, pre GCC-5). However, I already have standard boost libraries installed in my system (required by several other applications). I've opted to install the custom-compiled versions to <code>/usr/local/lib</code> (while the default versions are kept in <code>/usr/lib</code>) and renamed the libraries with the suffix <code>_oldabi</code>: </p>\n\n<pre><code>$ ls -lash /usr/local/lib | grep boost\n1,1M -rw-r--r--  1 root root 1,1M jun 21 14:17 libboost_serialization_oldabi.a\n416K -rw-r--r--  2 root root 415K jun 21 14:17 libboost_serialization_oldabi.so\n416K -rw-r--r--  2 root root 415K jun 21 14:17 libboost_serialization_oldabi.so.1.64.0\n   0 lrwxrwxrwx  1 root root   39 jun 21 14:18 libboost_serialization.so.1.64.0 -&gt; libboost_serialization_oldabi.so.1.64.0\n 48K -rw-r--r--  1 root root  46K jun 21 14:17 libboost_system_oldabi.a\n 20K -rw-r--r--  2 root root  20K jun 21 14:17 libboost_system_oldabi.so\n 20K -rw-r--r--  2 root root  20K jun 21 14:17 libboost_system_oldabi.so.1.64.0\n   0 lrwxrwxrwx  1 root root   32 jun 21 14:18 libboost_system.so.1.64.0 -&gt; libboost_system_oldabi.so.1.64.0\n708K -rw-r--r--  1 root root 706K jun 21 14:17 libboost_wserialization_oldabi.a\n300K -rw-r--r--  2 root root 299K jun 21 14:17 libboost_wserialization_oldabi.so\n300K -rw-r--r--  2 root root 299K jun 21 14:17 libboost_wserialization_oldabi.so.1.64.0\n   0 lrwxrwxrwx  1 root root   40 jun 21 14:18 libboost_wserialization.so.1.64.0 -&gt; libboost_wserialization_oldabi.so.1.64.0\n</code></pre>\n\n<p>The code works well, socket communications work as intended. However, when trying to set up the code on another computer without the default boost libraries installed (only custom-compiled versions of <code>boost::system</code>  and <code>boost::serialization</code>), I get <code>(system:9) Bad file descriptor</code> when performing write/read operations. While trying to figure out the problem, I went back for the original computer and by looking at <code>/proc/XXXX/maps</code> I noticed that my executable was actually loading the default boost libraries under <code>/usr/lib</code> at runtime, despite being linked with the custom-built versions at compilation.</p>\n\n<p>Thus my issues are 1) how to make the system prioritize <code>/usr/local/lib</code> over <code>/usr/lib</code> or force it to identify  the <code>_boost_oldabi</code> suffix as different libraries; and 2) figure out why does adding the GCC ABI macro seems to break the code; The source code, make files and libraries are exactly the same, the only thing that differs between the computers is the OS (Arch Linux and Ubuntu).</p>\n"}, {"tags": ["c++", "templates", "c++17", "template-argument-deduction"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1500482651, "post_id": 45195890, "comment_id": 77360205, "body": "Obvious compiler bug is obvious."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1500483051, "post_id": 45195890, "comment_id": 77360471, "body": "@Barry Templated deduction guides are covered by the general <i>template-declaration</i> grammar."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1500483557, "creation_date": 1500483557, "answer_id": 45196719, "question_id": 45195890, "link": "https://stackoverflow.com/questions/45195890/c17-template-deduction-guide-not-used-for-empty-parameter-set/45196719#45196719", "title": "C++17 template deduction guide not used for empty parameter set?", "body": "<p>This is a gcc bug (just filed <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81486\" rel=\"noreferrer\">81486</a>). When deducing <code>success()</code>, we synthesize an overload set which consists of:</p>\n\n<pre><code>// from the constructors\ntemplate &lt;class T&gt; success&lt;T&gt; foo(T&amp;&amp; ); // looks like a forwarding reference\n                                         // but is really just an rvalue reference\ntemplate &lt;class T&gt; success&lt;T&gt; foo(T const&amp; );\n\n// from the deduction guides\ntemplate &lt;class T&gt; success&lt;T&gt; foo(T ); // this one is a bit redundant\nsuccess&lt;void&gt; foo();\n</code></pre>\n\n<p>And determine the return type as if it were invoked as <code>foo()</code>, which certainly should give you a type of <code>success&lt;void&gt;</code>. That it doesn't is a bug.</p>\n"}], "owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 1, "accepted_answer_id": 45196719, "answer_count": 1, "score": 4, "last_activity_date": 1500483557, "creation_date": 1500480829, "last_edit_date": 1500481869, "question_id": 45195890, "link": "https://stackoverflow.com/questions/45195890/c17-template-deduction-guide-not-used-for-empty-parameter-set", "title": "C++17 template deduction guide not used for empty parameter set?", "body": "<p>Consider the following reduced example which can also be viewed at <a href=\"https://godbolt.org/g/Et56cm\" rel=\"nofollow noreferrer\">https://godbolt.org/g/Et56cm</a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;utility&gt;\n\ntemplate &lt;class T&gt; struct success\n{\n  T value;\n  constexpr success(T &amp;&amp;v)\n      : value(std::move(v))\n  {\n  }\n  constexpr success(const T &amp;v)\n      : value(v)\n  {\n  }\n};\ntemplate &lt;&gt; struct success&lt;void&gt;\n{\n};\ntemplate &lt;class T&gt; success(T /*unused*/)-&gt;success&lt;T&gt;;\nsuccess()-&gt;success&lt;void&gt;;\n\nint main(void)\n{\n    auto a = success{5};        // works\n    auto b = success{};         // works\n    auto c = success{\"hello\"};  // works\n    auto d = success(5);        // works\n    auto e = success();         // FAILS!\n    auto f = success(\"hello\");  // works\n    static_assert(std::is_same&lt;decltype(a), success&lt;int&gt;&gt;::value, \"\");\n    static_assert(std::is_same&lt;decltype(b), success&lt;void&gt;&gt;::value, \"\");\n    static_assert(std::is_same&lt;decltype(c), success&lt;const char *&gt;&gt;::value, \"\");\n    static_assert(std::is_same&lt;decltype(d), success&lt;int&gt;&gt;::value, \"\");\n    static_assert(std::is_same&lt;decltype(e), success&lt;void&gt;&gt;::value, \"\");\n    static_assert(std::is_same&lt;decltype(f), success&lt;const char *&gt;&gt;::value, \"\");\n    return 0;\n}\n</code></pre>\n\n<p>What is surprising to me is that <code>success()</code> does not compile, yet <code>success{}</code> does. I have provided the template deduction guide <code>success() -&gt; success&lt;void&gt;</code>, so I would have thought that <code>success()</code> would work as well.</p>\n\n<p>Is this expected behaviour in the C++ 17 standard, or am I missing something?</p>\n"}, {"tags": ["c++", "string", "variadic-functions"], "comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1500480985, "post_id": 45195779, "comment_id": 77359239, "body": "Can you include the actual error message you are getting?  It will also be very hard to help you with what little code we can see."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1500481023, "post_id": 45195779, "comment_id": 77359261, "body": "<i>This code works fine on Windows</i> -- It may work &quot;fine&quot; on a certain compiler that creates Windows programs.  It may not work if using another compiler or another version of the same compiler."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1500481120, "post_id": 45195779, "comment_id": 77359318, "body": "Just to follow up with what PaulMcKenzie said, can you also include what compilers you are using?  So on both Windows and Linux what are you using to compile your code?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500481266, "post_id": 45195779, "comment_id": 77359404, "body": "Also, where is it stated that an array of void pointers can be understood or casted to a <code>va_list</code>?  This was doomed for failure at some point.  Remove the casts you&#39;re doing and recompile the code.  What compiler errors do you get?  If you get errors, please read them and understand what is being stated by the error."}, {"owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "reply_to_user": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1500482586, "post_id": 45195779, "comment_id": 77360169, "body": "@Eddge i have updated the original code with additional info"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1500489451, "post_id": 45195779, "comment_id": 77364197, "body": "This feels like a <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>, why do you need to erase all type information about <code>paramsList</code>? Can you in anyway meddle with how it is populated?"}], "answers": [{"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 1, "last_activity_date": 1500489245, "creation_date": 1500489245, "answer_id": 45198509, "question_id": 45195779, "link": "https://stackoverflow.com/questions/45195779/c-passing-variable-number-of-locations-from-a-given-array-to-a-function/45198509#45198509", "title": "C++ passing variable number of locations from a given array to a function", "body": "<p><code>va_list</code> is an <em>unspecified</em> type. That means it may be a <code>void* []</code> or something else entirely.</p>\n\n<p>That it worked by chance in some cases is just that <code>va_list</code> is compatible with <code>void* []</code> on one particular platform for one compiler, it is by no means indication that this is legal.</p>\n\n<p>The correct way to deal with this is, unfortunately, to stop using the <code>printf</code> family and parse the format string yourself, there is no standard functionality to reach in and fetch the parsed format string to use for yourself.</p>\n"}], "owner": {"reputation": 303, "user_id": 5718927, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/1b5848b7f0ee59c47516ae018c8b4021?s=128&d=identicon&r=PG&f=1", "display_name": "darkThoughts ", "link": "https://stackoverflow.com/users/5718927/darkthoughts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500489245, "creation_date": 1500480530, "last_edit_date": 1500482549, "question_id": 45195779, "link": "https://stackoverflow.com/questions/45195779/c-passing-variable-number-of-locations-from-a-given-array-to-a-function", "title": "C++ passing variable number of locations from a given array to a function", "body": "<p>The following piece of code works in C++ when running on Windows:</p>\n\n<pre><code>void* paramsList[MAX_PARAMS_NUM] = { 0 };\n\n...some code to populate paramsList (p.s MAX_PARAMS_NUM is a constant)\n\nvsnprintf((char*)pStr, MAXLEN, (char*)pTempFormat, (va_list)paramsList);\n</code></pre>\n\n<p>This code works fine on Windows, but i am trying to make it run on Linux and the program crushes because this conversion of <code>paramsList</code> to <code>va_list</code> doesn't work there. </p>\n\n<p>Now the setting of this scenario is that i get a format string from a server that i don't control. The format string ('pTempFormat') is like the one used in printf of unknown number of % in it (maximum is <code>MAX_PARAMS_NUM</code>) and i populate the paramsList accordingly and then i use <code>vsnprintf</code> to create a string from the format string i got and the values populated in paramsList.(those values can be anything from integers, to hex to char * (aka strings) and any combination of them, according to the format string received from the server). </p>\n\n<p>i don't know how many locations <code>paramsList</code> to pass to <code>vsnprintf</code> until i finish populating it according to the  format string received from the server. So i need to somehow either pass a variable number of locations from <code>paramsList</code>to <code>vsnprintf</code> or to convert those locations into va_list (which i couldn't figure out how to do from what i read online).</p>\n\n<p>I also considered using a combination of variadic templates and va_list - to somehow pass a variable number of locations from <code>paramsList</code>to a variadic function and to pass them on to <code>vsnprintf</code>. But i couldn't figure out how to pass certain locations from a given array to a variadic function either. </p>\n\n<p>Update:</p>\n\n<p>I use Visual Studio 2015 to compile on Windows, and GCC 4.9 on Ubuntu. </p>\n\n<p>The error i am getting when trying to compile this code on Linux is: <code>error: ISO C++ forbids casting to an array type 'va_list {aka __va_list_tag [1]}'</code></p>\n"}, {"tags": ["c++", "c++11", "double"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1500480636, "post_id": 45195751, "comment_id": 77359058, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500480651, "post_id": 45195751, "comment_id": 77359063, "body": "You didn&#39;t show how you determined that the values are not equal."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1500480674, "post_id": 45195751, "comment_id": 77359076, "body": "<a href=\"https://stackoverflow.com/questions/17333/what-is-the-most-effective-way-for-float-and-double-comparison\" title=\"what is the most effective way for float and double comparison\">stackoverflow.com/questions/17333/&hellip;</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1500481590, "post_id": 45195751, "comment_id": 77359595, "body": "That&#39;s a whole lot of &quot;pushing&quot; and &quot;popping&quot; values to prove that the values are not equal.  I would have expected a simple line right after the assignment like <code>if (benchmark-&gt;mintime == elapsed) { ok } else { what!!?? }</code>"}, {"owner": {"reputation": 87, "user_id": 4324793, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe7610eb4820086d5d7f7ec56c68d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Migsi", "link": "https://stackoverflow.com/users/4324793/migsi"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1500481902, "post_id": 45195751, "comment_id": 77359754, "body": "@PaulMcKenzie The &quot;pushing&quot; and &quot;popping&quot; has nothing to do with the prove. I just pasted the whole method, in case you want to see that too! However, on both cout lines, both values are the same, while on the first one the value is != 0, in the second one the values are == 0 and there is nothing else playing around with this variables. There must be an explanation for this behavior?"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4324793, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe7610eb4820086d5d7f7ec56c68d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Migsi", "link": "https://stackoverflow.com/users/4324793/migsi"}, "edited": false, "score": 0, "creation_date": 1500480613, "post_id": 45195789, "comment_id": 77359043, "body": "So I should use a <code>long double</code> instead, to increase the precision?"}, {"owner": {"reputation": 111, "user_id": 8308192, "user_type": "registered", "profile_image": "https://graph.facebook.com/1466950706700199/picture?type=large", "display_name": "Constantin Iliescu", "link": "https://stackoverflow.com/users/8308192/constantin-iliescu"}, "reply_to_user": {"reputation": 87, "user_id": 4324793, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe7610eb4820086d5d7f7ec56c68d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Migsi", "link": "https://stackoverflow.com/users/4324793/migsi"}, "edited": false, "score": 0, "creation_date": 1500480716, "post_id": 45195789, "comment_id": 77359098, "body": "You could try, but be aware, there is always a limit"}, {"owner": {"reputation": 1541, "user_id": 4327053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9865f3562a00b1ec526e3a8d521057d6?s=128&d=identicon&r=PG&f=1", "display_name": "Erich", "link": "https://stackoverflow.com/users/4327053/erich"}, "edited": false, "score": 0, "creation_date": 1500481194, "post_id": 45195789, "comment_id": 77359356, "body": "I would  also add that some numbers which seem easy to represent in decimal are hard to in binary. For example, .1 seems easy to represent in decimal. It&#39;s the basic unit, while in binary you are working with .5, .25, .125 ... ad nauseam of bits. representing .1 is represented as 00111101110011001100110011001101 in IEEE format. This value is equivalent to 0.100000001490116119384765625, not .1 exactly. See: <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">h-schmidt.net/FloatConverter/IEEE754.html</a>"}, {"owner": {"reputation": 87, "user_id": 4324793, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe7610eb4820086d5d7f7ec56c68d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Migsi", "link": "https://stackoverflow.com/users/4324793/migsi"}, "edited": false, "score": 0, "creation_date": 1500481269, "post_id": 45195789, "comment_id": 77359408, "body": "@Constantin Iliescu I tried it, it didn&#39;t help. Anyways, the operation of assignement shouldn&#39;t alter the precision at all, if the value gets assigned from 64bit to 64bit."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500481929, "post_id": 45195789, "comment_id": 77359768, "body": "The precision may be altered depending on the bit width of the hardware floating point support.  Conversions from 64-bit to other bit sizes (larger or smaller) will affect precision."}], "tags": [], "owner": {"reputation": 111, "user_id": 8308192, "user_type": "registered", "profile_image": "https://graph.facebook.com/1466950706700199/picture?type=large", "display_name": "Constantin Iliescu", "link": "https://stackoverflow.com/users/8308192/constantin-iliescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1500480665, "last_edit_date": 1500480665, "creation_date": 1500480560, "answer_id": 45195789, "question_id": 45195751, "link": "https://stackoverflow.com/questions/45195751/double-assignement-alters-value/45195789#45195789", "title": "Double assignement alters value", "body": "<p>It is all about precision. There is a limited precision also for double. If you go beyond that, the value is corrupted. Doesn't matter if you compute anything or not, the assigning of a value is still an operation, the value goes through the processor register, and because is too \"large\" is get truncated</p>\n"}], "owner": {"reputation": 87, "user_id": 4324793, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe7610eb4820086d5d7f7ec56c68d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Migsi", "link": "https://stackoverflow.com/users/4324793/migsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500480900, "creation_date": 1500480449, "last_edit_date": 1500480900, "question_id": 45195751, "link": "https://stackoverflow.com/questions/45195751/double-assignement-alters-value", "title": "Double assignement alters value", "body": "<p>Assigning a double value, stored in variable A to a variable B alters it's value as soon the value gets below 0.000001. I've read about about problems with 80 Bit FPU's, but in this case, that problem shouldn't occur, as I'm only assigning a value, not calculating something with it.\nHere is some piece of example code:</p>\n\n<pre><code>double elapsed = _sinceCreation.elapsed();\nif ( benchmark-&gt;minTime &gt; elapsed ) {\n   benchmark-&gt;minTime = elapsed;\n}\n</code></pre>\n\n<p><code>benchmark-&gt;minTime</code> should equal <code>_sinceCreation.elapsed()</code>, but it surprisingly doesn't! What could be the reason for this? And how can I fix this behavior?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To complete my explanation, here is the method where it behaves weird (inclusive testing output to verify equality):</p>\n\n<pre><code>double elapsed = _sinceCreation.elapsed();\n\nif ( _benchmarkMap.find(benchmark-&gt;methodName) == _benchmarkMap.end() ) {\n  _benchmarkMap[benchmark-&gt;methodName] = benchmark;\n}\n\nif ( benchmark-&gt;times.size() &gt;= _benchmarkLimitPerMethod ||\n     benchmark-&gt;times.size() &gt;= benchmark-&gt;times.max_size() ) {\n  benchmark-&gt;times.pop_front();\n  benchmark-&gt;maxSizeReached = true;\n}\n\nbenchmark-&gt;times.push_back( elapsed );\n\nif ( benchmark-&gt;minTime &gt; elapsed ) {\n  std::cout &lt;&lt; printToString(\"before min time: {0:0.15f} elapsed: {0:0.15f}\", benchmark-&gt;minTime, elapsed) &lt;&lt; std::endl;\n  benchmark-&gt;minTime = elapsed;\n  std::cout &lt;&lt; printToString(\"after min time: {0:0.15f} elapsed: {0:0.15f}\", benchmark-&gt;minTime, elapsed) &lt;&lt; std::endl;\n}\n\nif ( benchmark-&gt;maxTime &lt; elapsed )\n  benchmark-&gt;maxTime = elapsed;\n</code></pre>\n\n<p><code>_sinceCreation</code> is a timestamp class, returning double secs since last <code>setCurrentTime()</code> and <code>printToString()</code> is a own wrapper for fmtlib.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "crashlytics-android"], "comments": [{"owner": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1500555431, "post_id": 45195392, "comment_id": 77396855, "body": "Mike from Fabric here. Do you have external libraries which are creating symbols?"}, {"owner": {"reputation": 7850, "user_id": 1677835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3c3a9d8fd29a51635b0ba2d9bfab476?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey  Pekar", "link": "https://stackoverflow.com/users/1677835/sergey-pekar"}, "reply_to_user": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1500559706, "post_id": 45195392, "comment_id": 77400586, "body": "Hello @MikeBonnell yes I link one dynamic and one static library to my project (both compiled together with my code) and I see two *.cSYM files under app/build/fabric/release/csyms directory"}, {"owner": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1501000002, "post_id": 45195392, "comment_id": 77579702, "body": "Sorry for the delay. That should be fine - what&#39;s the output after running uploadSymbols? Do you see the confirmation of the upload or any other output?"}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503092908, "post_id": 45195392, "comment_id": 78489503, "body": "@MikeBonnell Hi Mike, I have exactly same issue as OP, could you please provide more info about what to look at in the logs? In my case I have <code>15:22:47.644 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :FiosMobile:crashlyticsUploadSymbolsMarketDebug (Thread[Task worker Thread 7,5,main]) completed. Took 2.546 secs.</code> in gradle output, how do I understand if the symbols are actually uploaded? Some specific message in the logs? Some place in Fabric Dashboard?"}, {"owner": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503318650, "post_id": 45195392, "comment_id": 78551916, "body": "Those logs to me indicated that the upload was successful. What do you see for your crashes?  The same one line crash report?"}, {"owner": {"reputation": 7850, "user_id": 1677835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3c3a9d8fd29a51635b0ba2d9bfab476?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey  Pekar", "link": "https://stackoverflow.com/users/1677835/sergey-pekar"}, "reply_to_user": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503319480, "post_id": 45195392, "comment_id": 78552481, "body": "@MikeBonnell yes all the crashes are the same.  Crashed:part.of.my.package.name| SIGABRT -6 0x0000000000002a73 (and this one line from description when I press &lt;/&gt; Raw Text button)"}, {"owner": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503326238, "post_id": 45195392, "comment_id": 78557537, "body": "Gotcha, can you please email support(at)fabric(dot)io and reference this thread and ask for me so I can dive in more with you?"}, {"owner": {"reputation": 7850, "user_id": 1677835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3c3a9d8fd29a51635b0ba2d9bfab476?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey  Pekar", "link": "https://stackoverflow.com/users/1677835/sergey-pekar"}, "reply_to_user": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503333250, "post_id": 45195392, "comment_id": 78561787, "body": "@MikeBonnell sure"}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "reply_to_user": {"reputation": 15867, "user_id": 3975963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hicuX.png?s=128&g=1", "display_name": "Mike Bonnell", "link": "https://stackoverflow.com/users/3975963/mike-bonnell"}, "edited": false, "score": 0, "creation_date": 1503333443, "post_id": 45195392, "comment_id": 78561892, "body": "@MikeBonnell I have also emailed you from pa*.d*@o*.v*.com if you don&#39;t mind."}], "owner": {"reputation": 7850, "user_id": 1677835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a3c3a9d8fd29a51635b0ba2d9bfab476?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey  Pekar", "link": "https://stackoverflow.com/users/1677835/sergey-pekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1500479261, "creation_date": 1500479261, "question_id": 45195392, "link": "https://stackoverflow.com/questions/45195392/fabric-ndk-crash-reporting-for-android-studio-2-3", "title": "Fabric NDK crash reporting for android studio 2.3+", "body": "<p>I am trying to configure fabric NDK bug reporting. I used instructions <a href=\"https://docs.fabric.io/android/crashlytics/ndk.html\" rel=\"nofollow noreferrer\">provided</a> by fabric.</p>\n\n<p>I added NDK dependency to my cradle file.</p>\n\n<pre><code>dependencies {\n    compile('com.crashlytics.sdk.android:crashlytics:2.6.8@aar') {\n        transitive = true;\n    }\n    compile('com.crashlytics.sdk.android:crashlytics-ndk:1.1.6@aar') {\n        transitive = true;\n    }\n}\n\ncrashlytics {\n    enableNdk true\n // according to documentation if I use grade plugin 2.2+ (I use 2.3.3) I can commit setting androidNdkOut and androidNdkLibsOut\n }\n</code></pre>\n\n<p>I compile project using this command </p>\n\n<pre><code>./gradlew crashlyticsUploadSymbolsRelease\n</code></pre>\n\n<p>But all my crash reports look like this one:</p>\n\n<pre><code>Crashed: part.of.my.package.name|\n0  ???                            0x0 (Missing) \n</code></pre>\n\n<p>Does anyone know how to correctly setup crashlytics NDK?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "static-analysis", "pvs-studio"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 8, "creation_date": 1500478942, "post_id": 45195221, "comment_id": 77357976, "body": "If anything I would assume the second example&#39;s use of magic numbers is less safe than the first one, making it more worthy of a warning. It seems that the warning is related to <code>n = 4</code> and not with the use of <code>n</code> as an array size."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1500479159, "post_id": 45195221, "comment_id": 77358127, "body": "I&#39;m personally not very impressed with the quality of PVS Studios analysis, and this result is in line with what I expect from it - low quality warning - not all that useful."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 5, "creation_date": 1500479222, "post_id": 45195221, "comment_id": 77358174, "body": "It is all explained in the link you got from PVS-Studio and posted. Even why <code>int a[4]</code> doesn&#39;t get warning."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 0, "creation_date": 1500480314, "post_id": 45195221, "comment_id": 77358849, "body": "@MarekVitek Unless the page has been updated over the last 48h, it does neither explain specifically <i>why</i> the former does and why the latter doesn&#39;t issue the warning. Mind you, the last paragraph is not satisfactory explanation."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500480363, "post_id": 45195221, "comment_id": 77358878, "body": "@Fran&#231;oisAndrieux Yes, indeed."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1500480416, "post_id": 45195221, "comment_id": 77358909, "body": "@JesperJuhl I don&#39;t want to turn this QA into review of PVS-Studio. FWIW, I&#39;m not entirely satisfied with VS2017 analyzer myself, for instance."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500480915, "post_id": 45195221, "comment_id": 77359205, "body": "My understanding is that the analyzer is complaining about the number <code>4</code>.  As an experiment, try &quot;#define ARRAY_CAPACITY (4U)<code>, instead of </code>const size_t n = 4;`.  You may need to configure the analyzer for C++."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500481377, "post_id": 45195221, "comment_id": 77359461, "body": "@ThomasMatthews Preprocessor macro is 1:1 equivalent to the second case <code>a[4]</code>. Complains about number <code>4</code> is clear, but how on earth one is supposed to use constant/literal without putting there the <code>4</code> ;-)"}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 2, "creation_date": 1500481380, "post_id": 45195221, "comment_id": 77359464, "body": "@mloskot Number 4 is mentioned in the table as one of the numbers that might be causing troubles when porting to 64 bit and require special attention. <code>int a[4]</code> is mentioned as special case that gets exempted from the check. Use 5 as your constant and there will be no warning."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 1, "creation_date": 1500481642, "post_id": 45195221, "comment_id": 77359628, "body": "Or better yet <a href=\"https://www.viva64.com/en/m/0017/#ID0ELH\" rel=\"nofollow noreferrer\">suppress this one instance</a> add <code>&#47;&#47;-V112</code> after line where warning is issued."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1500481652, "post_id": 45195221, "comment_id": 77359632, "body": "The static analyzer may have rules requiring that numbers other than 0 or 1 be a macro; regardless of the equivalency to the second case."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 0, "creation_date": 1500481663, "post_id": 45195221, "comment_id": 77359638, "body": "@MarekVitek Is that seriously and true? I have read the table but as reader, I took &quot;Let&#39;s list magic numbers&quot; as &quot;let&#39;s list all magic numbers we can see in the examples above&quot;, but not as &quot;let&#39;s list PVS-specific magic numbers&quot;. I suspect, most readers would understand it that way, no? I clearly didn&#39;t pay enough attention to the table content besides the <code>4</code> or <code>0xffffffff</code> :-)  FYI, <code>n=4</code> comes from nanodbc library tests, what a coincidence!"}, {"owner": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "edited": false, "score": 1, "creation_date": 1500481944, "post_id": 45195221, "comment_id": 77359775, "body": "Is that seriously and true? Yes. The magic numbers (for detect 64-bit issues) is 4, 32, 0x7FFFFFFF, 0x80000000 and 0xFFFFFFFF. Details: <a href=\"https://www.viva64.com/en/l/0009/\" rel=\"nofollow noreferrer\">viva64.com/en/l/0009</a>"}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "edited": false, "score": 0, "creation_date": 1500482053, "post_id": 45195221, "comment_id": 77359845, "body": "@AndreyKarpov OK. It would be helpful if this article is linked from the docs though. MarekVitek thanks for digging this up!"}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 1, "creation_date": 1500482811, "post_id": 45195221, "comment_id": 77360298, "body": "@mloskot Yes it is seriously true. These numbers have special meaning in lot of code hence the special attention to it. The reason is because in many cases their meaning changes with transition to 64 bit system."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 0, "creation_date": 1500483393, "post_id": 45195221, "comment_id": 77360695, "body": "@MarekVitek I stand corrected. I haven&#39;t paid enough attention reading the docs page, apparently. Thanks"}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "edited": false, "score": 1, "creation_date": 1500483974, "post_id": 45195221, "comment_id": 77361063, "body": "@mloskot Well you are right in one point. The doc page could use bit of rework. Move the table to the top would be first step. And little bit change of wording might  help too. But I am not an user of that tool."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500481075, "post_id": 45195901, "comment_id": 77359296, "body": "How do you get the assumption of using malloc?  The OP is declaring an automatic variable, not using <code>malloc</code> or <code>new</code>.  The constant identifier could be used in assignment or arithmetic expressions."}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1500481236, "post_id": 45195901, "comment_id": 77359379, "body": "As I said, my conclusion was based on what I have read on the link posted on the question: <a href=\"https://www.viva64.com/en/w/V112/print/\" rel=\"nofollow noreferrer\">viva64.com/en/w/V112/print</a> - It uses <code>malloc</code> as example to explain it."}, {"owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500483411, "post_id": 45195901, "comment_id": 77360706, "body": "@ThomasMatthews Because PVS-Studio apparently doesn&#39;t go on deep analysis where the variable is used. It sees const being assigned 4 and issues warning. But maybe I am wrong."}], "tags": [], "owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "is_accepted": false, "score": 2, "last_activity_date": 1500481335, "last_edit_date": 1500481335, "creation_date": 1500480860, "answer_id": 45195901, "question_id": 45195221, "link": "https://stackoverflow.com/questions/45195221/dangerous-magic-number-n-used/45195901#45195901", "title": "Dangerous magic number N used", "body": "<p>Reading the link you posted, I concluded it is a false positive in your case.</p>\n\n<p>The tool is assuming you are going to use <code>n</code> in a <code>malloc</code> (or equivalent allocation procedure) statement to be equivalent to the size of <code>int</code> (or any 4 bytes variable). So the recommendation is to use <code>sizeof(desired type)</code>.</p>\n\n<p>If you were using <code>n</code> inside a <code>malloc</code> statement, it would make sense - since <code>int</code> (or any other type) could vary for different architectures (if not now, in the future). But apparently this is not your case.</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1500480978, "post_id": 45195907, "comment_id": 77359237, "body": "Where did you come up with 64-bit?  I didn&#39;t see it in the example lines.  This could be on a 32-bit or 16-bit system."}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "edited": false, "score": 0, "creation_date": 1500481264, "post_id": 45195907, "comment_id": 77359401, "body": "I have updated my question to clarify I use PVS with VS2017"}, {"owner": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "edited": false, "score": 0, "creation_date": 1500481483, "post_id": 45195907, "comment_id": 77359530, "body": "&gt; &quot;Where did you come up with 64-bit?&quot; This diagnostic was created for detect 64-bit issues. <a href=\"https://www.viva64.com/en/l/0009/\" rel=\"nofollow noreferrer\">viva64.com/en/l/0009</a>"}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "edited": false, "score": 0, "creation_date": 1500481913, "post_id": 45195907, "comment_id": 77359762, "body": "@AndreyKarpov Can you relate to the comments by MarekVitek above? If that is correct, may I suggest to re-phrase the docs as &quot;Let&#39;s list specific magic numbers that PVS-Studio is especially concerned about...&quot; or something alike"}, {"owner": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "edited": false, "score": 1, "creation_date": 1500482180, "post_id": 45195907, "comment_id": 77359915, "body": "I did not understand the question. The magic numbers (for detect 64-bit issues) is 4, 32, 0x7FFFFFFF, 0x80000000 and 0xFFFFFFFF."}], "tags": [], "owner": {"reputation": 965, "user_id": 7772356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6749606abf1529e3bf62e4ae18104d43?s=128&d=identicon&r=PG", "display_name": "AndreyKarpov", "link": "https://stackoverflow.com/users/7772356/andreykarpov"}, "is_accepted": true, "score": 3, "last_activity_date": 1500482698, "last_edit_date": 1500482698, "creation_date": 1500480878, "answer_id": 45195907, "question_id": 45195221, "link": "https://stackoverflow.com/questions/45195221/dangerous-magic-number-n-used/45195907#45195907", "title": "Dangerous magic number N used", "body": "<p>This</p>\n\n<pre><code>size_t const n = 4;\nint a[n] = {};\n</code></pre>\n\n<p>is false positive.</p>\n\n<p>64-bit diagnostics are very noisy and there is nothing you can do about it. Yes, the analyzer produces many false positives such as magic numbers like <code>4</code>, <code>0xFFFFFFFF</code>, etc. In the analyzer a lot of exceptions has already been made when it doesn\u2019t complain (for example: <code>int a[4] = {};</code>). However, there are still so many options of using constants that it\u2019s impossible to foresee all of them.</p>\n\n<p>When porting code to 64-bit system it makes sense to look through all the magic numbers, to make sure that the programmer, for example, does not expect that the pointer size is <code>4</code> bytes somewhere. Then it makes sense to switch off <a href=\"https://www.viva64.com/en/w/V112/\" rel=\"nofollow noreferrer\">V112</a> diagnostic so that it does not bother you. </p>\n"}, {"tags": [], "owner": {"reputation": 1435, "user_id": 8113019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1b7cb4133be670ac94023c9fcc6816?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Vitek", "link": "https://stackoverflow.com/users/8113019/marek-vitek"}, "is_accepted": false, "score": 2, "last_activity_date": 1500482903, "last_edit_date": 1500482903, "creation_date": 1500482277, "answer_id": 45196302, "question_id": 45195221, "link": "https://stackoverflow.com/questions/45195221/dangerous-magic-number-n-used/45196302#45196302", "title": "Dangerous magic number N used", "body": "<p>Number 4 is considered as one of the potentially dangerous numbers when porting from 32 bit to 64 bit hence warning on const being assigned 4. Other numbers are listed in the table behind the link you posted. With examples how it can be dangerous.</p>\n\n<p>You can <a href=\"https://www.viva64.com/en/m/0017/#ID0ELH\" rel=\"nofollow noreferrer\">suppress individual warning</a> by adding <strong>//-V112</strong> at the end of line you are sure is 100% OK.</p>\n\n<pre><code>size_t const n = 4; //-V112\n</code></pre>\n\n<p>This will suppreess the warning and you can focus on your work again.</p>\n\n<p>As for <code>int a[4] = {};</code> PVS-Studio considers it a special case for which it doesn't issue warning. Why it doesn't take it into account in the first case I don't know. But it looks like hardcoded exception for really specific case.</p>\n\n<p>If you are not building 64 bit builds, then I assume it is safe to disable the warning alltogether for now. But be warned - comes from sight comes from mind.</p>\n"}], "owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 45195907, "answer_count": 3, "score": 5, "last_activity_date": 1500482903, "creation_date": 1500478757, "last_edit_date": 1500481249, "question_id": 45195221, "link": "https://stackoverflow.com/questions/45195221/dangerous-magic-number-n-used", "title": "Dangerous magic number N used", "body": "<p><a href=\"https://www.viva64.com/en/pvs-studio/\" rel=\"nofollow noreferrer\">PVS-Studio</a>, the static code analyzer, for  the following bit of code</p>\n\n<pre><code>size_t const n = 4;\nint a[n] = {};\n</code></pre>\n\n<p>reports:</p>\n\n<blockquote>\n  <p><a href=\"https://www.viva64.com/en/w/V112/print/\" rel=\"nofollow noreferrer\">V112</a> Dangerous magic number <code>4</code> used: <code>...t const n = 4;. test.cpp 3</code></p>\n</blockquote>\n\n<p>Although PVS-Studio is used with Visual Studio 2017 project and reports the same warning for both, 32 and 64 bit, those build configurations are not taken into account by the analyzer, AFAIU.</p>\n\n<p>I would have expected the context to be analysed better and treat the code above as equivalent to this</p>\n\n<pre><code>int a[4] = {};\n</code></pre>\n\n<p>for which PVS-Studio does not issue any diagnostics.</p>\n\n<p>In the case above is this <em>dangerous magic number N used</em>, a false positive?</p>\n\n<p>What are the reasons the two code samples above are not analyzed as equivalent?</p>\n"}, {"tags": ["c++", "iteration", "stdlist"], "comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 3, "creation_date": 1500478686, "post_id": 45195173, "comment_id": 77357790, "body": "You should provide appropriate code snippets here, not links."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1500478758, "post_id": 45195173, "comment_id": 77357846, "body": "The link shows three ways of iterating through the list. Which one are you interested in?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1500478812, "post_id": 45195173, "comment_id": 77357885, "body": "The image in <a href=\"http://en.cppreference.com/w/cpp/container/list/end\" rel=\"nofollow noreferrer\">this <code>end</code> reference</a> should hopefully explain things."}, {"owner": {"reputation": 350, "user_id": 5379371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a004e4bb66bb25aa18762e1a04f9b9fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sajad Banooie", "link": "https://stackoverflow.com/users/5379371/sajad-banooie"}, "edited": false, "score": 2, "creation_date": 1500478838, "post_id": 45195173, "comment_id": 77357899, "body": "intList.end() does not point to the last element it points to an element after the last one."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1500478883, "post_id": 45195173, "comment_id": 77357939, "body": "It should also have been explained by <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">any good beginners book</a>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1500478927, "post_id": 45195173, "comment_id": 77357970, "body": "&quot;Is this the case?&quot; No, it is not the case. You don&#39;t need to &quot;solve&quot; it."}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1500480350, "post_id": 45195306, "comment_id": 77358871, "body": "In other words, in any std container, end() points to one past the last element."}], "tags": [], "owner": {"reputation": 84, "user_id": 7767735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04e3d0ac2b8dbc3fff53f1eaef62c63?s=128&d=identicon&r=PG&f=1", "display_name": "SSM", "link": "https://stackoverflow.com/users/7767735/ssm"}, "is_accepted": true, "score": 2, "last_activity_date": 1500479374, "last_edit_date": 1500479374, "creation_date": 1500478976, "answer_id": 45195306, "question_id": 45195173, "link": "https://stackoverflow.com/questions/45195173/does-iteration-go-through-the-whole-list/45195306#45195306", "title": "Does iteration go through the whole list", "body": "<p>Actually, the last item is not skipped. The iterator pointing to <code>intList.end()-1</code> points to the last item instead of <code>intList.end()</code> as you may be thinking.</p>\n"}], "owner": {"reputation": 63, "user_id": 5412889, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1ea36e751368eb5a6249bbc08aa3ec3c?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Smits", "link": "https://stackoverflow.com/users/5412889/rik-smits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45195306, "answer_count": 1, "score": 0, "last_activity_date": 1500527722, "creation_date": 1500478635, "last_edit_date": 1500479534, "question_id": 45195173, "link": "https://stackoverflow.com/questions/45195173/does-iteration-go-through-the-whole-list", "title": "Does iteration go through the whole list", "body": "<p>Take this code:</p>\n\n<pre><code>std::list&lt;int&gt; intList;\nfor (int i = 0; i &lt; 10; ++i) {\n    intList.push_back( 1 &lt;&lt; i );\n}\n\nstd::list&lt;int&gt;::const_iterator iterator;\nfor (iterator = intList.begin(); iterator != intList.end(); ++iterator) {\n    std::cout &lt;&lt; *iterator;\n}\n</code></pre>\n\n<p>I see how to iterate through a list. Looking at the iteration I think you skip the last item. Is this the case and if so what is the best way to solve it.</p>\n"}, {"tags": ["c++", "graphics", "3d", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500491277, "post_id": 45195076, "comment_id": 77365287, "body": "<a href=\"http://www.danielgm.net/cc/\" rel=\"nofollow noreferrer\">danielgm.net/cc</a>"}, {"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500491323, "post_id": 45195076, "comment_id": 77365311, "body": "<a href=\"https://threejs.org/docs/#api/objects/Points\" rel=\"nofollow noreferrer\">threejs.org/docs/#api/objects/Points</a>"}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500493067, "post_id": 45195076, "comment_id": 77366326, "body": "First one looks more like a software. But is there any example for three.js? JS looks good as long as it can process it efficiently."}, {"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500494122, "post_id": 45195076, "comment_id": 77366932, "body": "<a href=\"https://threejs.org/examples/?q=poin#webgl_points_sprites\" rel=\"nofollow noreferrer\">threejs.org/examples/?q=poin#webgl_points_sprites</a>"}, {"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500494189, "post_id": 45195076, "comment_id": 77366971, "body": "First one is software not library but it has a lot of powerfull stuf including a visualizer where you can add multiple clouds and manually translate and rotate them."}, {"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500494308, "post_id": 45195076, "comment_id": 77367024, "body": "three js is just webgl. The efficiency is quite good. Check <a href=\"http://www.potree.org\" rel=\"nofollow noreferrer\">potree.org</a>. The bottleneck in js should be the file loading"}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1500499862, "post_id": 45195076, "comment_id": 77369933, "body": "Thanks. Yes I know of potree. I will look into them again."}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1500478364, "creation_date": 1500478364, "question_id": 45195076, "link": "https://stackoverflow.com/questions/45195076/visualize-multiple-models-in-pcl", "title": "Visualize multiple models in PCL", "body": "<p>I'm trying to visualize <strong>multiple</strong> <code>.ply</code> point clouds (XYZRGB formatted) in a single view using PCL library.</p>\n\n<p>This is what I have which visualizes a single model easily. But I need to have say 3 of the same model, but with different distances from my view (say the middle one be farther and left one be closer- zoomed out or zoomed in applied to them). </p>\n\n<p>How can I do that? I had a huge trouble working with PCL to do this as the API is confusing. If you know of any better tools, preferably in languages other than C/C++, please also suggest.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    //#include &lt;unistd.h&gt;\n    #include &lt;pcl/io/pcd_io.h&gt;\n    #include &lt;pcl/io/ply_io.h&gt;\n    #include &lt;pcl/point_cloud.h&gt;\n    #include &lt;pcl/console/parse.h&gt;\n    #include &lt;pcl/common/transforms.h&gt;\n    #include &lt;pcl/visualization/pcl_visualizer.h&gt;\n\n\n// Main function\nint main(int argc, char **argv)\n{\n    // Fetch point cloud filename in arguments | Works with PLY files\n    std::vector&lt;int&gt; filenames;\n\n    filenames = pcl::console::parse_file_extension_argument(argc, argv, \".ply\");\n\n    // Load file | Works with PLY files\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr source_cloud (new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;());\n\n    pcl::io::loadPLYFile(argv[filenames[0]], *source_cloud);\n\n\n    // Visualization \n    printf(\"\\n Point cloud colors :\\n\"\n        \" \\t white \\t = \\t original point cloud \\n\");\n\n    pcl::visualization::PCLVisualizer viewer(\" Point Cloud Datsets Visualizer\");\n    viewer.setBackgroundColor(0.05, 0.05, 0.05, 0); // Set background to a dark grey                            \n\n                                                    // Define R,G,B colors for the point cloud \n    pcl::visualization::PointCloudColorHandlerRGBField&lt;pcl::PointXYZRGB&gt; rgb(source_cloud);\n\n    // We add the point cloud to the viewer and pass the color handler \n    viewer.addPointCloud(source_cloud, rgb, \"original_cloud\");\n    viewer.setPointCloudRenderingProperties(pcl::visualization::PCL_VISUALIZER_POINT_SIZE, 2, \"original_cloud\");\n\n    //******************************\n    std::vector&lt;Point, Eigen::aligned_allocator&lt;Point&gt;&gt; points = source_cloud-&gt;points;\n\n    //******************************\n    while (!viewer.wasStopped()) {   // Display the visualizer until the 'q' key is pressed\n        viewer.spinOnce();\n\n    }\n\n    return 0;\n} // End main()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gPu1Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gPu1Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "unit-testing", "embedded", "abstraction"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 2, "creation_date": 1500478538, "post_id": 45195006, "comment_id": 77357685, "body": "Your abstraction that you suggested would be a Hardware Abstraction Layer which is not uncommon infact perfectly okay. You would define interfaces on each of your HAL&#39;s and implement them. For Mocks you simply implement that interface and provide the desired behaviour."}, {"owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1500478661, "post_id": 45195006, "comment_id": 77357775, "body": "@SamerTufail Yes, but how do I do that without <code>virtual</code> methods?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1500478863, "post_id": 45195006, "comment_id": 77357926, "body": "I am not sure what you read, please edit and share those sources or the summary. I use interfaces on embedded and have not come across any problems. It depends on your target system and compiler support. If there is something specific against virtuals or inheritance on your target, please share."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1500480632, "post_id": 45195006, "comment_id": 77359056, "body": "If you don&#39;t want to go virtual, you can still have two implementations. Since you never need both simultaneously, instruct your toolchain to build and link the correct implementation."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1500481034, "post_id": 45195006, "comment_id": 77359266, "body": "@Samer Tufail: The usual argument, aside from performance implications, is that by using function pointers the call graph is no longer static. Therefore rendering static tool-assisted proofs of things such as maximum stack usage and branch coverage difficult in safety-critical systems."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1500482929, "post_id": 45195006, "comment_id": 77360385, "body": "@doynax: Is it a saftey critical system? If yes then you have a whole diff set of issues as well dynamic memory being top."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1500483167, "post_id": 45195006, "comment_id": 77360557, "body": "@Samer Tufail: Well, of course. I have no knowledge of the OPs application though."}, {"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500490211, "post_id": 45195006, "comment_id": 77364634, "body": "Yes.  If your compiler supports C++11, you can use std::function.  But using virtual function is the straight-forward approach."}], "answers": [{"tags": [], "owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "is_accepted": false, "score": 5, "last_activity_date": 1500480382, "creation_date": 1500480382, "answer_id": 45195732, "question_id": 45195006, "link": "https://stackoverflow.com/questions/45195006/how-to-make-unit-tests-for-embedded-code/45195732#45195732", "title": "How to make unit tests for embedded code?", "body": "<p>For C++ I would suggest using an interface so say we have a <code>HAL.hpp</code> and in there we define our pure virtual functions we want to implement:</p>\n\n<pre><code>class HAL\n{\n    virtual void func1() = 0;\n    virtual void func2() = 0;\n};\n</code></pre>\n\n<p>Then you can have your <code>Mock.cpp</code> implement this and you can have a Real.cpp implement the same:</p>\n\n<pre><code>Mock.cpp:\nclass Mock : HAL\n{\n        virtual void func1(){ }\n        virtual void func2(){ }\n}\n</code></pre>\n\n<p>Now the other way is you define your functions in <code>HAL.h</code> like and provide no implementation here:</p>\n\n<pre><code>void func1();\nvoid func2();\n</code></pre>\n\n<p>You then create a <code>HAL.cpp</code> and add functionality there you wish to see on the target. Create all of this as library called HAL. Link this library to your main project.</p>\n\n<p>Now for mocking and testing. Create a seperate project for your tests. Add the sources you want to test but do not link the HAL library. Instead create another source file Mock.cpp include the HAL.h and provide implementation for it. In this way instead of your functionality from the HAL library the Mock's implementation would be called.</p>\n"}, {"tags": [], "owner": {"reputation": 38619, "user_id": 33252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0b55a5e4a7eff1bf29eae5bd314f0d?s=128&d=identicon&r=PG", "display_name": "Doug Currie", "link": "https://stackoverflow.com/users/33252/doug-currie"}, "is_accepted": false, "score": 3, "last_activity_date": 1500483081, "creation_date": 1500483081, "answer_id": 45196559, "question_id": 45195006, "link": "https://stackoverflow.com/questions/45195006/how-to-make-unit-tests-for-embedded-code/45196559#45196559", "title": "How to make unit tests for embedded code?", "body": "<p>Create the microcontroller HAL in separate files from the mock HAL. For the microcontroller, include the microcontroller HAL sources in your project. For the unit test system, include the mock HAL sources in your project.</p>\n\n<p>You can also test on-target by using compiler macro defines to switch in pieces of the mock HAL, and switch out pieces of the microcontroller HAL.</p>\n\n<p>You can even use your debugger to force values at interface points to trigger all paths; doing this with a code coverage tool will let you know if you've exercised all paths (and MC/DC if you need it). This is sometimes the only way to simulate hardware failures or exceptional conditions.</p>\n"}], "owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1538, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1500483081, "creation_date": 1500478200, "last_edit_date": 1500478887, "question_id": 45195006, "link": "https://stackoverflow.com/questions/45195006/how-to-make-unit-tests-for-embedded-code", "title": "How to make unit tests for embedded code?", "body": "<p>I'm working on software for a Cortex-M4 based microcontroller in C++. I have a lot of code (drivers, etc.) that is highly machine dependent. And I have higher level code which is closely dependant on the low level code by using the drivers directly. Example: a low-level part is eg. a UART driver which is very hardware-specific, and a high-level part is a communication protocol which is based on UART. (This software runs on \"bare-metal\", ie. there is no operating system underneath.)</p>\n\n<p>This code is currently tightly coupled, thus not unit testable.<br>\nI'd like to make it testable.</p>\n\n<p>So I figured that I'd create an abstraction of the low-level parts, and make the high-level parts depend only on the abstraction. I could then create mocks of the abstraction which would be used by the unit tests, and a real implementation which would run on the microcontroller.</p>\n\n<ul>\n<li>Is this a correct approach?</li>\n<li>How can I create such an abstraction?<br>\nMost of the <a href=\"https://electronics.stackexchange.com/questions/3027/is-c-suitable-for-embedded-systems\">sources</a> <a href=\"https://stackoverflow.com/questions/32478555/avoiding-virtual-functions-on-embedded-target\">I've found</a> strongly discourage the use of inheritance and <code>virtual</code> functions in embedded systems. What other ways are there?</li>\n</ul>\n\n<p>So, in summary, I'd like to create a hardware abstraction layer (HAL), but I'm asking how to do it? Should I use <code>virtual</code> inheritance in C++, or is there another, better way?</p>\n"}, {"tags": ["c++", "constructor", "overloading", "initializer-list", "ambiguous"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500477691, "post_id": 45194756, "comment_id": 77357010, "body": "Does <code>myclass obj3 = {{{1},{2},{3}}};</code> work?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500477867, "post_id": 45194756, "comment_id": 77357147, "body": "How about <code>{{{1}},{{2}},{{3}}}</code>?"}, {"owner": {"reputation": 131, "user_id": 6927833, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8ea9a67f2765cde93b9da3c54dc3f84?s=128&d=identicon&r=PG&f=1", "display_name": "Hybridslinky", "link": "https://stackoverflow.com/users/6927833/hybridslinky"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500478204, "post_id": 45194756, "comment_id": 77357432, "body": "@NathanOliver (and Some-programmer-dude) both solutions works, but I don&#39;t understand why :) In any case, I was looking for a solution allowing to keep the syntax {{1},{2},{3}}, but if it is not possible, I will use one of yours"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "edited": false, "score": 0, "creation_date": 1500478522, "post_id": 45194756, "comment_id": 77357675, "body": "What they are getting at is that {1} looks like the new uniform initialization via a brace. For example, you can say <code>int i = {1};</code> or even <code>int i {1};</code> The compiler thus can&#39;t know you don&#39;t mean this for the interior {1}, {2}, and {3}."}, {"owner": {"reputation": 350, "user_id": 5379371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a004e4bb66bb25aa18762e1a04f9b9fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sajad Banooie", "link": "https://stackoverflow.com/users/5379371/sajad-banooie"}, "edited": false, "score": 0, "creation_date": 1500478595, "post_id": 45194756, "comment_id": 77357728, "body": "maybe {{1,},{2,},{3,}} will work also"}, {"owner": {"reputation": 131, "user_id": 6927833, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8ea9a67f2765cde93b9da3c54dc3f84?s=128&d=identicon&r=PG&f=1", "display_name": "Hybridslinky", "link": "https://stackoverflow.com/users/6927833/hybridslinky"}, "edited": false, "score": 0, "creation_date": 1500478706, "post_id": 45194756, "comment_id": 77357808, "body": "{{{1},{2},{3}}} does not work, it is not ambiguous, but it is equivalent to {{1,2,3}}, so I build a 1x3 matrix and not a 3x1 one."}, {"owner": {"reputation": 131, "user_id": 6927833, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8ea9a67f2765cde93b9da3c54dc3f84?s=128&d=identicon&r=PG&f=1", "display_name": "Hybridslinky", "link": "https://stackoverflow.com/users/6927833/hybridslinky"}, "reply_to_user": {"reputation": 350, "user_id": 5379371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a004e4bb66bb25aa18762e1a04f9b9fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sajad Banooie", "link": "https://stackoverflow.com/users/5379371/sajad-banooie"}, "edited": false, "score": 0, "creation_date": 1500478863, "post_id": 45194756, "comment_id": 77357927, "body": "@sajadbanooie No, your solution does not work, it keeps on saying it is ambiguous"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1500478467, "creation_date": 1500478467, "answer_id": 45195114, "question_id": 45194756, "link": "https://stackoverflow.com/questions/45194756/c-constructor-overload-ambiguity-with-initializer-list/45195114#45195114", "title": "c++ Constructor overload ambiguity with initializer_list", "body": "<p>The reason the compiler says <code>{{1},{2},{3}}</code> is ambiguous is that <code>{1}</code> can both be an <code>int</code> or an <code>std::initializer_list&lt;int&gt;</code>.  So you either have a list of <code>int</code>s or a list of a list of <code>int</code>s and the compiler cannot decide what you actually want</p>\n\n<p>When you do <code>{{{1},{2},{3}}}</code> or <code>{{{1}},{{2}},{{3}}}</code> the innermost braces represents an <code>int</code>, the next innermost represents a list of those <code>int</code>s and then the outermost braces represents a list of that list.  You needs these extra braces to remove the ambiguity for the compiler.</p>\n"}], "owner": {"reputation": 131, "user_id": 6927833, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8ea9a67f2765cde93b9da3c54dc3f84?s=128&d=identicon&r=PG&f=1", "display_name": "Hybridslinky", "link": "https://stackoverflow.com/users/6927833/hybridslinky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 45195114, "answer_count": 1, "score": 0, "last_activity_date": 1500539680, "creation_date": 1500477510, "last_edit_date": 1500539680, "question_id": 45194756, "link": "https://stackoverflow.com/questions/45194756/c-constructor-overload-ambiguity-with-initializer-list", "title": "c++ Constructor overload ambiguity with initializer_list", "body": "<p>I have a class with two constructors:</p>\n\n<pre><code>myclass(std::initializer_list&lt;int&gt;);\nmyclass(std::initializer_list&lt;std::initializer_list&lt;int&gt;);\n</code></pre>\n\n<p>The following declarations work</p>\n\n<pre><code>myclass obj1 = {{1,2},{3,4},{5,6}}; //a 3x2 matrix\nmyclass obj2 = {{1,2,3}}; // a 1x3 matrix\n</code></pre>\n\n<p>But the following declaration does not work, when I try to compile, it says that it is ambiguous</p>\n\n<pre><code>myclass obj3 = {{1},{2},{3}};  //a 3x1 matrix\n</code></pre>\n\n<p>The following solves the problem:</p>\n\n<pre><code>myclass obj3 = {std::initializer_list&lt;int&gt;({1}), \n                std::initializer_list&lt;int&gt;({2}), \n                std::initializer_list&lt;int&gt;({3})};\n</code></pre>\n\n<p>but I find this solution unconfortable and ugly. Is it possible to do something better?</p>\n"}, {"tags": ["c++", "c", "struct", "sizeof"], "comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 13, "creation_date": 1500477597, "post_id": 45194751, "comment_id": 77356934, "body": "The latter is not a valid struct, so the compiler makes up a value of its own by adding features to the c++ language. The idea probably is that sizeof(struct)+sizeof(array) will yield a pointer just past the array and (char*)structpointer+sizeof(struct) gives the first element of the array."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 1, "creation_date": 1500477851, "post_id": 45194751, "comment_id": 77357134, "body": "Related to: <a href=\"https://stackoverflow.com/questions/1626446/what-is-the-size-of-an-empty-struct-in-c\" title=\"what is the size of an empty struct in c\">stackoverflow.com/questions/1626446/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c\" title=\"what happens if i define a 0 size array in c c\">stackoverflow.com/questions/9722632/&hellip;</a>"}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 2, "creation_date": 1500477908, "post_id": 45194751, "comment_id": 77357183, "body": "Interesting, because I just did this with gcc version 6.3.0 and got an output of 0 for both."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1500478139, "post_id": 45194751, "comment_id": 77357370, "body": "And I did it again with g++ (same version of 6.3.0) and got sizeof 1 for the empty struct and sizeof 0 for the struct with a 0 size array."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1500478158, "post_id": 45194751, "comment_id": 77357393, "body": "I suggest looking at the assembly code"}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1500478225, "post_id": 45194751, "comment_id": 77357454, "body": "For C++ see: <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c\" title=\"what happens if i define a 0 size array in c c\">stackoverflow.com/questions/9722632/&hellip;</a>"}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1500478339, "post_id": 45194751, "comment_id": 77357540, "body": "Sum up so far: for C, <code>EmptyStruct</code> causes UB; for C++, <code>StructEmptyArr</code> causes UB. Am I correct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 7, "creation_date": 1500478533, "post_id": 45194751, "comment_id": 77357680, "body": "@duong_dajgja: For standard C, <code>StructEmptyArr</code> is a syntax error (there must be at least one member in the structure C11 &#167;6.7.2.1 &#182;2), as is <code>EmptyStruct</code> (zero size arrays are not permitted in standard C; C11 &#167;6.7.6.2 &#182;1).  GCC has extensions that may make them acceptable, but the standard says &quot;No&quot;."}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "reply_to_user": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1500479147, "post_id": 45194751, "comment_id": 77358121, "body": "@mgarey I suspect this won&#39;t actually help, the compiler (should) will replace the sizeof call with a literal value matching that printed out."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 5, "creation_date": 1500479409, "post_id": 45194751, "comment_id": 77358275, "body": "In passing: the result of <code>sizeof</code> operator is a size_t, so you should be using <code>%zu</code> or similar, not <code>%ld</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1500479876, "post_id": 45194751, "comment_id": 77358574, "body": "gcc and g++ will whinge about the zero-size array, if you ask it to: <code>gcc -std=c11 -Wall -Wextra -Wpedantic</code> or <code>g++ -std=c++17 -Wall -Wextra -Wpedantic</code>."}], "answers": [{"comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1500478158, "post_id": 45194937, "comment_id": 77357392, "body": "But he says that he understands the reason for why the empty struct has its size. And the struct that <i>does</i> have a named member has the confusing size."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 0, "creation_date": 1500478224, "post_id": 45194937, "comment_id": 77357452, "body": "@michael clearly the code is not ISO C, because he uses the tag withithout the tag namespace qualifier"}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500478265, "post_id": 45194937, "comment_id": 77357483, "body": "@JohannesSchaub-litb That&#39;s moot, I answered a direct question above"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 2, "creation_date": 1500478377, "post_id": 45194937, "comment_id": 77357570, "body": "@michael it is not moot because while apples are red, my shirt is blue and in ISO C structs must have a named member, none of this is relevant because the question is not about apples, ISO C, or my shirt"}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 0, "creation_date": 1500478411, "post_id": 45194937, "comment_id": 77357597, "body": "Please see the comment above by PasserBy, that is the question I was answering."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1500479515, "post_id": 45194937, "comment_id": 77358344, "body": "@duong_dajgja; Updated the answer."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500479613, "post_id": 45194937, "comment_id": 77358404, "body": "I must say that your description is incorrect. Since we are in pedantry mode, I must note that c++ allows objects of size 0"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1500480140, "post_id": 45194937, "comment_id": 77358743, "body": "@JohannesSchaub-litb; <a href=\"http://www.stroustrup.com/bs_faq2.html#sizeof-empty\" rel=\"nofollow noreferrer\">Its not my hypothesis</a>. Also: <i>&quot;Unless it is a bit-field (9.6), a most derived object shall have a non-zero size and shall occupy one or more bytes of storage. <b>Base class subobjects may have zero size</b>.&quot;</i>  &#167; 1.8 (p5)"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1500481884, "post_id": 45194937, "comment_id": 77359745, "body": "@hacks you say that the standard forbids objects of size 0, and go on to quote that it allows such. And link to a page that merely says that objects shall have different addresses. If I take numbers 9+0 and 8+0, both are different, yet I added 0 to them."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500557232, "post_id": 45194937, "comment_id": 77398417, "body": "@JohannesSchaub-litb; It also says <i>a most derived object shall have a non-zero size and shall occupy one or more bytes of storage</i>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 40, "last_activity_date": 1500481486, "last_edit_date": 1500481486, "creation_date": 1500478016, "answer_id": 45194937, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array/45194937#45194937", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p>In C, the behavior of a program is undefined if a struct is defined without any named member.  </p>\n\n<p>C11-\u00a76.7.2.1:</p>\n\n<blockquote>\n  <p>If the struct-declaration-list does not contain any named members, either directly or via an anonymous structure or anonymous union, the behavior is undefined.  </p>\n</blockquote>\n\n<p>GCC allows an empty struct as <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Empty-Structures.html#Empty-Structures\" rel=\"noreferrer\">an extension</a> and its size will be <code>0</code>.</p>\n\n<hr>\n\n<p>For C++, <a href=\"http://www.stroustrup.com/bs_faq2.html#sizeof-empty\" rel=\"noreferrer\">the standard doesn't allow an object of size <code>0</code></a> and therefore <code>sizof(EmptyStruct)</code>  returns a value of 1.<br>\nArrays of zero length are not supported by standard C++\u00b9, but are <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/Zero-Length.html\" rel=\"noreferrer\">supported as an extension by GNU</a> and the <code>sizeof</code> operator will return <code>0</code> if applied.   </p>\n\n<hr>\n\n<p><sub> 1. \u00a7 8.5.1-footnote 107) C++ does not have zero length arrays. </sub> </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5368518"}, "is_accepted": false, "score": 5, "last_activity_date": 1500480007, "last_edit_date": 1500480007, "creation_date": 1500478757, "answer_id": 45195220, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array/45195220#45195220", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html</a></p>\n\n<blockquote>\n  <p>G++ treats empty structures as if they had a single member of type char.</p>\n</blockquote>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html</a></p>\n\n<blockquote>\n  <p>Zero-length arrays are allowed in GNU C. They are very useful as the last element of a structure that is really a header for a variable-length object.</p>\n</blockquote>\n"}], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2580, "favorite_count": 3, "accepted_answer_id": 45194937, "answer_count": 2, "score": 35, "last_activity_date": 1501700420, "creation_date": 1500477494, "last_edit_date": 1501700420, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p>I have two structs defined as follows:</p>\n\n<pre><code>struct EmptyStruct{\n\n};\n\nstruct StructEmptyArr{\n    int arr[0];\n};\n\nint main(void){\n    printf(\"sizeof(EmptyStruct) = %ld\\n\", sizeof(EmptyStruct));\n    printf(\"sizeof(StructEmptyArr) = %ld\\n\", sizeof(StructEmptyArr));\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with gcc (g++) 4.8.4 on Ubuntu 14.04, x64.</p>\n\n<p>Output (for both gcc and g++):</p>\n\n<pre><code>sizeof(EmptyStruct) = 1\nsizeof(StructEmptyArr) = 0\n</code></pre>\n\n<p>I can understand why <code>sizeof(EmptyStruct)</code> equals to <code>1</code> but cannot understand why <code>sizeof(StructEmptyArr)</code> equals to <code>0</code>. Why are there differences between two?</p>\n"}, {"tags": ["c++", "performance", "for-loop", "optimization"], "comments": [{"owner": {"reputation": 1180, "user_id": 1763382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gCf2f.png?s=128&g=1", "display_name": "auburg", "link": "https://stackoverflow.com/users/1763382/auburg"}, "edited": false, "score": 3, "creation_date": 1500477434, "post_id": 45194696, "comment_id": 77356802, "body": "Simplest thing: write a test that measures the time taken for both cases"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1500477473, "post_id": 45194696, "comment_id": 77356833, "body": "If there is any performance difference, it&#39;s likely to be dominated by cache locality. The answer will likely depend entirely on the actual use case. The only solution is to try both in your actual application and measure."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500477552, "post_id": 45194696, "comment_id": 77356888, "body": "Keep in mind, the two examples differ in behavior. The first will interweave calls to <code>F1</code> and <code>F2</code> while the second will preform all the calls to <code>F1</code> and then all the calls to <code>F2</code>. Use whichever is correct and easier to read and understand. Only if you later measure a bottleneck in that code should you worry about performance."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500477561, "post_id": 45194696, "comment_id": 77356901, "body": "@Fran&#231;oisAndrieux Additionally, since this is likely to be a cache issue, the performance characteristics of this code may vary considerably from one type of CPU to another. An i5 might handle this in a way totally different from a Xeon used in production. There&#39;s no easy right answer here because as you suggest, the answer begins with &quot;It depends...&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 644, "user_id": 4924737, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371ccb7a2d35c3e43e45f336be416eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Ludvig W", "link": "https://stackoverflow.com/users/4924737/ludvig-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1500477613, "creation_date": 1500477613, "answer_id": 45194788, "question_id": 45194696, "link": "https://stackoverflow.com/questions/45194696/double-simpler-for-loop-vs-one-complex/45194788#45194788", "title": "Double simpler for loop vs one complex", "body": "<p>Well, as you pointed out the amount of operations differ. <strong>However</strong>, if you go with the second solution you can use multiple threads and achieve the same or better performance. Also, <strong>consider readability, testability, expandability, encapsulation</strong>, usually those factors are more important than any small performance gain you might get. And also, the compiler is usually very great at making your code run more effectively, so my advice is focus on your readability more than your performance in most cases.</p>\n"}, {"comments": [{"owner": {"reputation": 984, "user_id": 7263672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57952930cb4ac179a1f33229455f638c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7263672/olivier"}, "edited": false, "score": 0, "creation_date": 1500512477, "post_id": 45194889, "comment_id": 77373655, "body": "The opposite is also possible: if <code>F1</code> and <code>F2</code> access similar data for a given <code>i</code>, the first case will likely be faster."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1500477865, "creation_date": 1500477865, "answer_id": 45194889, "question_id": 45194696, "link": "https://stackoverflow.com/questions/45194696/double-simpler-for-loop-vs-one-complex/45194889#45194889", "title": "Double simpler for loop vs one complex", "body": "<p>It depends on what <code>F1</code> and <code>F2</code> do.</p>\n\n<p>It could not matter at all or you can experience dramatic slow down by having both functions called one after the other.</p>\n\n<p>As an example of the latter case consider <code>F1</code> and <code>F2</code> accessing two different arrays. At each run of <code>F1</code> and <code>F2</code> they read enough data to cause the whole cache to be overwritten. That would probably cause a good slow down.</p>\n\n<p>But is always better not to speculate and measure and benchmark your code instead. If performance is equivalent for both versions go for the most readable.</p>\n"}], "owner": {"reputation": 565, "user_id": 7249674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/efaa0ed1432d33163d0e8704d0a7051d?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomR", "link": "https://stackoverflow.com/users/7249674/phantomr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500477934, "creation_date": 1500477339, "question_id": 45194696, "link": "https://stackoverflow.com/questions/45194696/double-simpler-for-loop-vs-one-complex", "title": "Double simpler for loop vs one complex", "body": "<p>Maybe this is a stupid question, but say I've got like two functions, void F1(int x) and void F2(int x), and I want to execute them in each iteration of a for loop. How much would it difer (performance-wise) if I did one big for loop, like this:</p>\n\n<pre><code>`\nfor(int i = 0; i &lt; 100 ; i++)\n{\n    F1(i);\n    F2(i);\n}\n`\n</code></pre>\n\n<p>compared to doing two separate loops, one in which I call F1, one in which I call F2:</p>\n\n<pre><code>`\nfor(int i = 0 ; i &lt; 100 ; i++)\n    F1(i);\nfor(int i = 0 ; i &lt; 100 ; i++)\n    F2(i);\n`\n</code></pre>\n\n<p>While writing this, it occured to me that the first way is probably faster because there are only aproximately 100 increments and 100 comparisons, while in the second case, we'll get 200 of each. </p>\n\n<p>Say my loop only has to run for 200 iterations. Would the two-for loops approach be pretty much the same in terms of performance, considering, say, CPUs from 2007 and after:)?</p>\n"}, {"tags": ["c++", "windows", "sockets"], "comments": [{"owner": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "edited": false, "score": 0, "creation_date": 1500478842, "post_id": 45194646, "comment_id": 77357902, "body": "You have to use several threads: one for reading the user input and sending it to the server, and second for receiving messages from server and printing. But this will produce mess in the console, because of simultaneous use of it by both threads.."}, {"owner": {"reputation": 85, "user_id": 1784399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mr7Bt.png?s=128&g=1", "display_name": "Bamshad", "link": "https://stackoverflow.com/users/1784399/bamshad"}, "reply_to_user": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "edited": false, "score": 0, "creation_date": 1500500417, "post_id": 45194646, "comment_id": 77370197, "body": "Actually I tried a new code that is attached to the end of question. But still it does not work. Would you please check it and let me know what is the problem?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1500523263, "post_id": 45194646, "comment_id": 77376305, "body": "Your call to _kbhit() won&#39;t ever be executed as long as your thread is blocked inside select().  If you want to do it that way, you&#39;ll need to specify a timeout for your select() call (by changing the last argument to select() so that it points to a timeval struct specifying the amount of time after which select() must return) so that you can periodically call _kbhit().  (Of course, a proper OS would allow you to select() on STDIN_FILENO and avoid polling, but this is Windows and it doesn&#39;t support that)"}, {"owner": {"reputation": 85, "user_id": 1784399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mr7Bt.png?s=128&g=1", "display_name": "Bamshad", "link": "https://stackoverflow.com/users/1784399/bamshad"}, "edited": false, "score": 0, "creation_date": 1500542412, "post_id": 45194646, "comment_id": 77387060, "body": "First I added a thread for receive function, then used _kbhit() to inform me about user input, and finally by the usage of timeout (in select function) the  blocking problem of _kbhit() has been solved. Indeed I am really thankful for both of you that helped me :)"}], "owner": {"reputation": 85, "user_id": 1784399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mr7Bt.png?s=128&g=1", "display_name": "Bamshad", "link": "https://stackoverflow.com/users/1784399/bamshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2426, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1500500337, "creation_date": 1500477200, "last_edit_date": 1500500337, "question_id": 45194646, "link": "https://stackoverflow.com/questions/45194646/tcp-server-and-multiple-clients-in-c-windows", "title": "TCP server and multiple clients in C++ (windows)", "body": "<p>I have a problem in case of multiple clients socket programming in c++. Actually I have downloaded a source code for server side that echo the message to the clients. Also I have a simple client code. Everything works perfectly as long as there is only one client connected to the server. But when the other client connects, the server echo the message to both of them but, in the client side it prints in different order. Indeed it wait for user to enter the input message and then print out the received message. But I want it to be print it as soon as the message is received. For better description of the problem, the output of chat between two clients connected to the server is mentioned bellow. Also the codes of server and client are attached at the end.</p>\n\n<p>in the Bob cmd:</p>\n\n<pre><code>Pleas insert your message: Bob: hello alice.\nThe recieved message:Bob: hello alice.\nPleas insert your message: Bob: how is everything?\nThe recieved message:Alice: hello bob.\nPleas insert your message: Bob: everything is perfect!\nThe recieved message:Bob: how is everything?Alice: it is fine, and you?\nPleas insert your message:\n</code></pre>\n\n<p>in the alice cmd:</p>\n\n<pre><code>Pleas insert your message: Alice: hello bob.\nThe recieved message:Bob: hello alice.\nPleas insert your message: Alice: it is fine, and you?\nThe recieved message:Alice: hello bob.Bob: how is everything?\nPleas insert your message: Alice: cool!\nThe recieved message:Alice: it is fine, and you?Bob: everything is perfect!\nPleas insert your message:\n</code></pre>\n\n<p>and the codes:</p>\n\n<pre><code>/*\nTCP Echo server example in winsock\nLive Server on port 8888\n*/\n#include&lt;stdio.h&gt;\n#include&lt;winsock2.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\") //Winsock Library\n\nint main(int argc , char *argv[])\n{\nWSADATA wsa;\nSOCKET master , new_socket , client_socket[30] , s;\nstruct sockaddr_in server, address;\nint max_clients = 30 , activity, addrlen, i, valread;\n\n//size of our receive buffer, this is string length.\nint MAXRECV = 1024;\n//set of socket descriptors\nfd_set readfds;\n//1 extra for null character, string termination\nchar *buffer;\nchar msg[10] = \"salam\";\nbuffer =  (char*) malloc((MAXRECV + 1) * sizeof(char));\n\nfor(i = 0 ; i &lt; 30;i++)\n{\n    client_socket[i] = 0;\n}\n\nprintf(\"\\nInitialising Winsock...\");\nif (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n{\n    printf(\"Failed. Error Code : %d\",WSAGetLastError());\n    exit(EXIT_FAILURE);\n}\n\nprintf(\"Initialised.\\n\");\n\n//Create a socket\nif((master = socket(AF_INET , SOCK_STREAM , 0 )) == INVALID_SOCKET)\n{\n    printf(\"Could not create socket : %d\" , WSAGetLastError());\n    exit(EXIT_FAILURE);\n}\n\nprintf(\"Socket created.\\n\");\n\n//Prepare the sockaddr_in structure\nserver.sin_family = AF_INET;\nserver.sin_addr.s_addr = INADDR_ANY;\nserver.sin_port = htons( 8888 );\n\n//Bind\nif( bind(master ,(struct sockaddr *)&amp;server , sizeof(server)) == \nSOCKET_ERROR)\n{\n    printf(\"Bind failed with error code : %d\" , WSAGetLastError());\n    exit(EXIT_FAILURE);\n}\n\nputs(\"Bind done\");\n\n//Listen to incoming connections\nlisten(master , 3);\n\n//Accept and incoming connection\nputs(\"Waiting for incoming connections...\");\n\naddrlen = sizeof(struct sockaddr_in);\n\nwhile(TRUE)\n{\n    //clear the socket fd set\n    FD_ZERO(&amp;readfds);\n\n    //add master socket to fd set\n    FD_SET(master, &amp;readfds);\n\n    //add child sockets to fd set\n    for (  i = 0 ; i &lt; max_clients ; i++)\n    {\n        s = client_socket[i];\n        if(s &gt; 0)\n        {\n            FD_SET( s , &amp;readfds);\n        }\n    }\n\n    //wait for an activity on any of the sockets, timeout is NULL , so wait \n    indefinitely\n    activity = select( 0 , &amp;readfds , NULL , NULL , NULL);\n\n    if ( activity == SOCKET_ERROR )\n    {\n        printf(\"select call failed with error code : %d\" , WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    //If something happened on the master socket , then its an incoming connection\n    if (FD_ISSET(master , &amp;readfds))\n    {\n        if ((new_socket = accept(master , (struct sockaddr *)&amp;address, (int *)&amp;addrlen))&lt;0)\n        {\n            perror(\"accept\");\n            exit(EXIT_FAILURE);\n        }\n\n        //inform user of socket number - used in send and receive commands\n        printf(\"New connection , socket fd is %d , ip is : %s , port : %d \\n\" , new_socket , inet_ntoa(address.sin_addr) , ntohs(address.sin_port));\n\n\n        //send( new_socket , msg , valread , 0 );\n        send( new_socket, msg, (int)strlen(msg), 0 );\n\n        //add new socket to array of sockets\n        for (i = 0; i &lt; max_clients; i++)\n        {\n            if (client_socket[i] == 0)\n            {\n                client_socket[i] = new_socket;\n                printf(\"Adding to list of sockets at index %d \\n\" , i);\n                break;\n            }\n        }\n    }\n\n    //else its some IO operation on some other socket :)\n    for (i = 0; i &lt; max_clients; i++)\n    {\n        s = client_socket[i];\n        //if client presend in read sockets\n        if (FD_ISSET( s , &amp;readfds))\n        {\n            //get details of the client\n            getpeername(s , (struct sockaddr*)&amp;address , (int*)&amp;addrlen);\n\n            //Check if it was for closing , and also read the incoming message\n            //recv does not place a null terminator at the end of the string (whilst printf %s assumes there is one).\n            valread = recv( s , buffer, MAXRECV, 0);\n\n            if( valread == SOCKET_ERROR)\n            {\n                int error_code = WSAGetLastError();\n                if(error_code == WSAECONNRESET)\n                {\n                    //Somebody disconnected , get his details and print\n                    printf(\"Host disconnected unexpectedly , ip %s , port %d \\n\" , inet_ntoa(address.sin_addr) , ntohs(address.sin_port));\n\n                    //Close the socket and mark as 0 in list for reuse\n                    closesocket( s );\n                    client_socket[i] = 0;\n                }\n                else\n                {\n                    printf(\"recv failed with error code : %d\" , error_code);\n                }\n            }\n            if ( valread == 0)\n            {\n                //Somebody disconnected , get his details and print\n                printf(\"Host disconnected , ip %s , port %d \\n\" , inet_ntoa(address.sin_addr) , ntohs(address.sin_port));\n\n                //Close the socket and mark as 0 in list for reuse\n                closesocket( s );\n                client_socket[i] = 0;\n            }\n\n            //Echo back the message that came in\n            else\n            {\n                //add null character, if you want to use with printf/puts or other string handling functions\n                buffer[valread] = '\\0';\n                printf(\"%s:%d - %s \\n\" , inet_ntoa(address.sin_addr) , ntohs(address.sin_port), buffer);\n                //for (int j=0;j&lt;4;j++) {\n                send( client_socket[0] , buffer , valread , 0 );\n                send( client_socket[1] , buffer , valread , 0 );\n                //printf(\"%d\",client_socket[j]);\n                //}\n                memset(buffer,'\\0',sizeof(buffer));\n            }\n        }\n    }\n}\n\nclosesocket(s);\nWSACleanup();\n\nreturn 0;\n}\n\n\n/*\n\n\n\n* Client\n*\n*  Created on: May 31, 2017\n*      Author: Bamshad\n*/\n\n#define WIN32_LEAN_AND_MEAN\n\n#define _WIN32_WINNT  0x501\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n#pragma comment (lib, \"Ws2_32.lib\")\n#pragma comment (lib, \"Mswsock.lib\")\n#pragma comment (lib, \"AdvApi32.lib\")\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"8888\"\n\nint __cdecl main(int argc, char **argv)\n{\nWSADATA wsaData;\nSOCKET ConnectSocket;\nstruct addrinfo *result = NULL,\n                *ptr = NULL,\n                hints;\nchar sendbuf[1000];\nchar recvbuf[DEFAULT_BUFLEN];\nint iResult, activity;\nint recvbuflen = DEFAULT_BUFLEN;\n\n// Validate the parameters\nif (argc != 2) {\n    printf(\"usage: %s server-name\\n\", argv[0]);\n    return 1;\n}\n\n// Initialize Winsock\niResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\nif (iResult != 0) {\n    printf(\"WSAStartup failed with error: %d\\n\", iResult);\n    return 1;\n}\n\nZeroMemory( &amp;hints, sizeof(hints) );\nhints.ai_family = AF_UNSPEC;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_protocol = IPPROTO_TCP;\n\n// Resolve the server address and port\niResult = getaddrinfo(argv[1], DEFAULT_PORT, &amp;hints, &amp;result);\nif ( iResult != 0 ) {\n    printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n    WSACleanup();\n    return 1;\n}\n\n// Attempt to connect to an address until one succeeds\nfor(ptr=result; ptr != NULL ;ptr=ptr-&gt;ai_next) {\n\n    // Create a SOCKET for connecting to server\n    ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);\n    //printf(\"%d\\n\",ConnectSocket);\n    if (ConnectSocket == INVALID_SOCKET) {\n        printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    // Connect to server.\n    iResult = connect( ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n    if (iResult == SOCKET_ERROR) {\n        closesocket(ConnectSocket);\n        ConnectSocket = INVALID_SOCKET;\n        continue;\n    }\n    break;\n}\n\nfreeaddrinfo(result);\n\nif (ConnectSocket == INVALID_SOCKET) {\n    printf(\"Unable to connect to server!\\n\");\n    WSACleanup();\n    return 1;\n}\n\nwhile(TRUE) {\n    cout &lt;&lt; \"Lotfan paiam khod ra vared konid: \";\n    cin.getline(sendbuf,1000);\n    send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );\n    memset(sendbuf,'\\0',sizeof(sendbuf));\n    recv(ConnectSocket, recvbuf, recvbuflen, 0);\n    cout &lt;&lt; \"paiam dariaft:\" &lt;&lt; recvbuf &lt;&lt;endl;\n    memset(recvbuf,'\\0',sizeof(recvbuf));\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>I also tried the following code in client side. But still it does not work!</p>\n\n<pre><code>while(TRUE) {\n    FD_ZERO(&amp;fds); //Clearing the set of descriptors\n    //FD_SET(fileno(stdin), &amp;fds); //Adding Keyboard    to set of descriptors\n    FD_SET(ConnectSocket,&amp;fds); //Adding Socket to the set of descriptors\n\n    activity = select( 0 , &amp;fds , NULL , NULL , NULL);\n\n    if ( activity == SOCKET_ERROR )\n    {\n        printf(\"select call failed with error code : %d\" , WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n    if(FD_ISSET(ConnectSocket,&amp;fds))    {\n        recv(ConnectSocket, recvbuf, recvbuflen, 0);\n        cout &lt;&lt; \"paiam dariaft:\" &lt;&lt; recvbuf &lt;&lt;endl;\n        memset(recvbuf,'\\0',sizeof(recvbuf));\n        fflush(stdout);\n    }\n\n\n    //looking if there is user input from keyboard (0 is for stdin)\n    if(!_kbhit())   {\n        //fflush(stdout);\n        cin.getline(sendbuf,1000);\n        send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );\n        memset(sendbuf,'\\0',sizeof(sendbuf));\n\n    }\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1500481311, "post_id": 45194504, "comment_id": 77359420, "body": "There not being any such thing as a Java goal variable, it is difficult to know what you&#39;re talking about."}, {"owner": {"reputation": 21, "user_id": 8065710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nAHten25ZsU/AAAAAAAAAAI/AAAAAAAAS_M/z_zxU1xYM34/photo.jpg?sz=128", "display_name": "Jorge Quintero", "link": "https://stackoverflow.com/users/8065710/jorge-quintero"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1500541430, "post_id": 45194504, "comment_id": 77386332, "body": "Thank you for you reply. I try to explain my project. I want to send with OpenIGTLink images from movil camera. I have the code in C++ to send some images from de sdcard to a server. Now I want to send the images from the camara, so I have a SurfaceView to preview the camera images. The procces I am thinking is, form Java, call a JNI function to establishe the conection to server, and then from java call an another JNI function to send the images. Thnak you very much!!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8065710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nAHten25ZsU/AAAAAAAAAAI/AAAAAAAAS_M/z_zxU1xYM34/photo.jpg?sz=128", "display_name": "Jorge Quintero", "link": "https://stackoverflow.com/users/8065710/jorge-quintero"}, "edited": false, "score": 0, "creation_date": 1500540753, "post_id": 45195730, "comment_id": 77385766, "body": "Thank you very much for your answer. When I try to do your solution I get the next compiler error: Error:error: no matching conversion for C-style cast from &#39;igtl::ClientSocket::Pointer&#39; (aka &#39;SmartPointer&lt;igtl::ClientSocket&gt;&#39;) to &#39;jlong&#39; (aka &#39;long&#39;). So I can&#39;t use your solution. Do you have any other idea, please? Thank you very much!!"}, {"owner": {"reputation": 707, "user_id": 263423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575ce5192b49886a361a1e75d0e46759?s=128&d=identicon&r=PG", "display_name": "Aleksei Potapkin", "link": "https://stackoverflow.com/users/263423/aleksei-potapkin"}, "reply_to_user": {"reputation": 21, "user_id": 8065710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nAHten25ZsU/AAAAAAAAAAI/AAAAAAAAS_M/z_zxU1xYM34/photo.jpg?sz=128", "display_name": "Jorge Quintero", "link": "https://stackoverflow.com/users/8065710/jorge-quintero"}, "edited": false, "score": 0, "creation_date": 1500556007, "post_id": 45195730, "comment_id": 77397326, "body": "I&#39;m not a pro in C++, but you think you should use reinterpret_cast. I&#39;ll try to change the example."}], "tags": [], "owner": {"reputation": 707, "user_id": 263423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575ce5192b49886a361a1e75d0e46759?s=128&d=identicon&r=PG", "display_name": "Aleksei Potapkin", "link": "https://stackoverflow.com/users/263423/aleksei-potapkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1500556204, "last_edit_date": 1500556204, "creation_date": 1500480358, "answer_id": 45195730, "question_id": 45194504, "link": "https://stackoverflow.com/questions/45194504/java-and-jni-global-variables/45195730#45195730", "title": "Java and JNI global variables", "body": "<p>Maybe, it's not the best way but we are doing it so. \nWe are returning a pointer from JNI to Java as jlong and passing it to every call. It works like a self pointer to the object in methods. In your case, it will look somehow like this</p>\n\n<pre><code>jlong Java_es_iac_iactec_infraredsend_Comunicacion_OpenIGTLink_connect(\n     JNIEnv *env,\n     jobject mjobject,\n     jstring host,\n     jint port) {\n     /*some code*/\n     return reinterpret_cast&lt;jlong&gt;(socket);\n }\n</code></pre>\n\n<p>and then </p>\n\n<pre><code> Java_es_iac_iactec_infraredsend_Comunicacion_OpenIGTLink_send(jlong pointer) {\n    /*some code*/\n    igtl::ClientSocket::Pointer socket = reinterpret_cast&lt;igtl::ClientSocket::Pointer&gt;(pointer)\n    socket -&gt; Send(imgMsg-&gt;GetPackPointer(), imgMsg-&gt;GetPackSize());\n }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8065710, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nAHten25ZsU/AAAAAAAAAAI/AAAAAAAAS_M/z_zxU1xYM34/photo.jpg?sz=128", "display_name": "Jorge Quintero", "link": "https://stackoverflow.com/users/8065710/jorge-quintero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500556204, "creation_date": 1500476824, "question_id": 45194504, "link": "https://stackoverflow.com/questions/45194504/java-and-jni-global-variables", "title": "Java and JNI global variables", "body": "<p>I need help, because i don't known what to do. I'm newbie in JNI.</p>\n\n<p>I'm developing a Android application and it has to use a especific protocol (OpenIGTLink).</p>\n\n<p>To use this protocol I use a C library. The problem is that I need to define a global variable to store the conection. You can see in the next example:</p>\n\n<pre><code>igtl::ClientSocket::Pointer socket;\n\n\nJava_es_iac_iactec_infraredsend_Comunicacion_OpenIGTLink_connect(\n    JNIEnv *env,\n    jobject mjobject,\n    jstring host,\n    jint port) {\nsocket = igtl::ClientSocket::New();\n\nconst char *chost = env-&gt;GetStringUTFChars(host, 0);\n\nint r = socket-&gt;ConnectToServer(chost, port);\nif (r != 0) {\n\n    return (jstring) \"Cannot connect to the server.\";\n}\n\nreturn (jstring) \"ok\";\n}\n</code></pre>\n\n<p>and in other method  iwant to do:</p>\n\n<pre><code> Java_es_iac_iactec_infraredsend_Comunicacion_OpenIGTLink_send() {\n    igtl::ImageMessage::Pointer imgMsg = igtl::ImageMessage::New();\n    imgMsg-&gt;SetDimensions(size);\n    imgMsg-&gt;SetSpacing(spacing);\n    imgMsg-&gt;SetScalarType(scalarType);\n    imgMsg-&gt;SetDeviceName(\"ImagerClient\");\n    imgMsg-&gt;SetSubVolume(svsize, svoffset);\n    imgMsg-&gt;AllocateScalars();\n    imgMsg-&gt;Pack();\n\n    socket-&gt;Send(imgMsg-&gt;GetPackPointer(), imgMsg-&gt;GetPackSize());\n }\n</code></pre>\n\n<p>I don't know if I have to declare a java global variable to store de socket object and access it from JNI or if it's possible to define socket like a global variable in the cpp file.</p>\n\n<p>Thank you to all and sorry for my english.</p>\n"}, {"tags": ["c++", "qt", "tensorflow", "qt-creator"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 2, "creation_date": 1500477050, "post_id": 45194458, "comment_id": 77356513, "body": "There is, however, <a href=\"https://github.com/FloopCZ/tensorflow_cc\" rel=\"nofollow noreferrer\">tensorflow_cc</a>  project that builds and installs TF C++ API"}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 7640656, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ljPvMpR8acY/AAAAAAAAAAI/AAAAAAAAAMM/I5a2eX1Awa8/photo.jpg?sz=128", "display_name": "lotfi Raghib", "link": "https://stackoverflow.com/users/7640656/lotfi-raghib"}, "edited": false, "score": 0, "creation_date": 1500482146, "post_id": 45194532, "comment_id": 77359896, "body": "thank you. my project developped in linux (Ubuntu 14.4)  with QtCreator editor. what file should i import ??"}, {"owner": {"reputation": 1395, "user_id": 3051460, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6aae13a1e44542e095166794802b6068?s=128&d=identicon&r=PG&f=1", "display_name": "user3051460", "link": "https://stackoverflow.com/users/3051460/user3051460"}, "edited": false, "score": 0, "creation_date": 1513431439, "post_id": 45194532, "comment_id": 82656443, "body": "@Sv Sv: Could you have any example or tutorial about tha"}], "tags": [], "owner": {"reputation": 317, "user_id": 5967672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b7ebe06a44265a719b7a0594f259fe22?s=128&d=identicon&r=PG&f=1", "display_name": "Sv Sv", "link": "https://stackoverflow.com/users/5967672/sv-sv"}, "is_accepted": false, "score": 0, "last_activity_date": 1500476896, "creation_date": 1500476896, "answer_id": 45194532, "question_id": 45194458, "link": "https://stackoverflow.com/questions/45194458/it-is-possible-to-use-tensorflow-c-api-in-qt-project/45194532#45194532", "title": "It is possible to use Tensorflow C++ API in QT project?", "body": "<p>Yes, there is. Compile tensorflow project as a library (dll) and include it into qt project. </p>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 7640656, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ljPvMpR8acY/AAAAAAAAAAI/AAAAAAAAAMM/I5a2eX1Awa8/photo.jpg?sz=128", "display_name": "lotfi Raghib", "link": "https://stackoverflow.com/users/7640656/lotfi-raghib"}, "edited": false, "score": 0, "creation_date": 1500480049, "post_id": 45194566, "comment_id": 77358691, "body": "thank you for you answer. I built the library with bazel, now i want to integrate it in QT, should i import the libtensorflow_cc.so ?"}, {"owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "reply_to_user": {"reputation": 318, "user_id": 7640656, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ljPvMpR8acY/AAAAAAAAAAI/AAAAAAAAAMM/I5a2eX1Awa8/photo.jpg?sz=128", "display_name": "lotfi Raghib", "link": "https://stackoverflow.com/users/7640656/lotfi-raghib"}, "edited": false, "score": 0, "creation_date": 1500480300, "post_id": 45194566, "comment_id": 77358838, "body": "I am not knowledgeable with QT creator but you should import this library in your project just like any other external library."}], "tags": [], "owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "is_accepted": false, "score": 4, "last_activity_date": 1500477002, "creation_date": 1500477002, "answer_id": 45194566, "question_id": 45194458, "link": "https://stackoverflow.com/questions/45194458/it-is-possible-to-use-tensorflow-c-api-in-qt-project/45194566#45194566", "title": "It is possible to use Tensorflow C++ API in QT project?", "body": "<p>You need bazel (or CMake) to build the tensorflow library, but once it is compiled you are free to use whatever tool you like and treat it like an external library.</p>\n\n<p>Believe me, once you have compiled tensorflow, the last thing you want to do is add it to your project and rebuild it accidentally. This baby takes <em>time</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 9295478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff90be965a7c702179a4d4d136bf085?s=128&d=identicon&r=PG&f=1", "display_name": "GDevT", "link": "https://stackoverflow.com/users/9295478/gdevt"}, "is_accepted": false, "score": 0, "last_activity_date": 1536154811, "creation_date": 1536154811, "answer_id": 52186600, "question_id": 45194458, "link": "https://stackoverflow.com/questions/45194458/it-is-possible-to-use-tensorflow-c-api-in-qt-project/52186600#52186600", "title": "It is possible to use Tensorflow C++ API in QT project?", "body": "<p>It is also possible to use <em>make</em> instead of <em>bazel</em> to build the TensorFlow library for your target platforms.\ud83d\ude42</p>\n\n<p>You can find more information on building TensorFlow with a Makefile at the <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile\" rel=\"nofollow noreferrer\">TensorFlow GitHub</a> project.</p>\n\n<p>You can also have a look at this <a href=\"https://v-play.net/cross-platform-development/machine-learning-add-image-classification-for-ios-and-android-with-qt-and-tensorflow\" rel=\"nofollow noreferrer\">guide and open-source example project</a> for Image Classification and Object Recognition with Qt and TensorFlow. It describes how to build TensorFlow using <em>make</em> and integrates it to your Qt project using the <em>QMAKE</em> build system.</p>\n"}], "owner": {"reputation": 318, "user_id": 7640656, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ljPvMpR8acY/AAAAAAAAAAI/AAAAAAAAAMM/I5a2eX1Awa8/photo.jpg?sz=128", "display_name": "lotfi Raghib", "link": "https://stackoverflow.com/users/7640656/lotfi-raghib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4684, "favorite_count": 3, "protected_date": 1531747007, "answer_count": 3, "score": 6, "last_activity_date": 1536154811, "creation_date": 1500476702, "last_edit_date": 1500483312, "question_id": 45194458, "link": "https://stackoverflow.com/questions/45194458/it-is-possible-to-use-tensorflow-c-api-in-qt-project", "title": "It is possible to use Tensorflow C++ API in QT project?", "body": "<p>I trained a Tensorflow model for image classification using the Python API, then i saved the model checkpoint.</p>\n\n<p>Now I want to load this model in a QT(C++) project.</p>\n\n<p>After looking into documentations, I found that to use Tensorflow C++ API you need to create a  project inside a clone of the TensorFlow github repository, then build it with Bazel, who is not possible in my case.  </p>\n\n<p>Is there a way to include tensorflow library in my QT project ?  </p>\n"}, {"tags": ["c++", "fstream", "signedness"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1500476481, "post_id": 45194333, "comment_id": 77356067, "body": "&quot;The cast from unsigned char to char forces loss of data, no?&quot;  - no."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1500476539, "post_id": 45194333, "comment_id": 77356113, "body": "<code>char</code> and <code>unsigned char</code> have the same size, which is 1 byte. The only difference is signedness: <code>unsigned char</code> is always &gt; 0; the normal <code>char</code> can also be signed (but doesn&#39;t have to be)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1500476645, "post_id": 45194333, "comment_id": 77356211, "body": "There is no practical difference between <code>char</code> and <code>unsigned char</code>. But since most people use <code>char</code> in their program, it is only natural that API accepts mostly used type."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1500476760, "post_id": 45194333, "comment_id": 77356286, "body": "<a href=\"https://stackoverflow.com/q/15078638/1460794\">Can I turn unsigned char into char and vice versa?</a>"}, {"owner": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 0, "creation_date": 1564252701, "post_id": 45194333, "comment_id": 100972441, "body": "Even better question: why isn&#39;t it a void*? That way I can implicitly read data into any pointer without having to do reinterpret_cast."}], "answers": [{"comments": [{"owner": {"reputation": 2911, "user_id": 4266765, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/KeB2V.jpg?s=128&g=1", "display_name": "Pilpel", "link": "https://stackoverflow.com/users/4266765/pilpel"}, "edited": false, "score": 0, "creation_date": 1500477435, "post_id": 45194529, "comment_id": 77356803, "body": "Are c-style casts fine when doing these file io operations? Also, why do these functions still use char and not unsigned char? or even void* as the c equivalents?"}], "tags": [], "owner": {"reputation": 4376, "user_id": 1351465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17845023034a9b3ad336f2883ed79149?s=128&d=identicon&r=PG", "display_name": "JuanR", "link": "https://stackoverflow.com/users/1351465/juanr"}, "is_accepted": false, "score": 0, "last_activity_date": 1500476886, "creation_date": 1500476886, "answer_id": 45194529, "question_id": 45194333, "link": "https://stackoverflow.com/questions/45194333/why-do-fstream-read-and-fstream-write-use-char-and-not-unsigned-char/45194529#45194529", "title": "Why do fstream.read and fstream.write use char and not unsigned char?", "body": "<p>Given that <code>char</code> and <code>unsigned char</code> have the same size, there should be no data loss when converting between them.</p>\n\n<p>Said that, have in mind that <code>fstreamm</code> is just an specialization of <code>std::basic_fstream</code> for chars:</p>\n\n<pre><code>// from &lt;fstream&gt;\ntypedef basic_fstream&lt;char&gt;         fstream;\n</code></pre>\n\n<p>You can create your own type for unsigned char, like this:</p>\n\n<pre><code>typedef basic_fstream&lt;unsigned char&gt; ufstream; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1500508623, "last_edit_date": 1500508623, "creation_date": 1500508047, "answer_id": 45202852, "question_id": 45194333, "link": "https://stackoverflow.com/questions/45194333/why-do-fstream-read-and-fstream-write-use-char-and-not-unsigned-char/45202852#45202852", "title": "Why do fstream.read and fstream.write use char and not unsigned char?", "body": "<blockquote>\n  <p>was taught that the equivalent of a <code>byte</code> in c++ is <code>unsigned char</code></p>\n</blockquote>\n\n<p>I don't know what <code>byte</code> is, but you can use <code>char</code> to represent a <em>byte</em> just fine.</p>\n\n<blockquote>\n  <p>so why do [fstream.read and fstream.write] take char pointers as parameters?</p>\n</blockquote>\n\n<p><code>fstream</code> is an alias of <code>std::basic_fstream&lt;char&gt;</code>. <code>std::basic_fstream</code> is a template whose all operations deal with its specified <code>char_type</code>. Since that <code>char_type</code> is <code>char</code>, all operations deal with <code>char</code>, not <code>unsigned char</code>.</p>\n\n<p>You could use <code>basic_fstream&lt;unsigned char&gt;</code> as Juan suggested, but it's more involved than that. You will need to specialize <code>char_traits&lt;unsigned char&gt;</code> which is the second (defaulted) template argument of <code>basic_fstream&lt;unsigned char&gt;</code>.</p>\n\n<blockquote>\n  <p>The cast from unsigned char to char forces loss of data, no?</p>\n</blockquote>\n\n<p>No. Accessing <code>unsigned char</code> through a <code>char*</code> loses no data. In fact, accessing any type through <code>char*</code> will not lose data.</p>\n\n<hr>\n\n<p>This on the other hand:</p>\n\n<pre><code>*(int*)&amp;header[18]\n</code></pre>\n\n<p>has undefined behaviour, unless the buffer was properly aligned such that <code>header[18]</code> happens to be located at the boundary required by <code>int</code>. I see no such guarantees in the definition of the array. Some architectures do not support unaligned memory access at all. </p>\n"}, {"tags": [], "owner": {"reputation": 2811, "user_id": 6635521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ht17F.jpg?s=128&g=1", "display_name": "David Scarlett", "link": "https://stackoverflow.com/users/6635521/david-scarlett"}, "is_accepted": false, "score": 0, "last_activity_date": 1500509042, "creation_date": 1500509042, "answer_id": 45202995, "question_id": 45194333, "link": "https://stackoverflow.com/questions/45194333/why-do-fstream-read-and-fstream-write-use-char-and-not-unsigned-char/45202995#45202995", "title": "Why do fstream.read and fstream.write use char and not unsigned char?", "body": "<p>In C and C++, the standards do not specify whether <code>char</code> is signed or unsigned, and implementations are free to implement it as either. There are separate types <code>signed char</code> (guaranteed to hold at least the range [-127,127]) and <code>unsigned char</code> (guaranteed to hold at least the range [0,255]), and <code>char</code> will be equivalent to one of them, but it is implementation defined as to which it is.</p>\n\n<p>Given that the ASCII character set only contains values 0 to 127, it makes sense that, historically, a single signed byte would have been seen as adequate for holding a single character, while still using the same convention as larger types, where integral types are signed by default unless explicitly declared as <code>unsigned</code>.</p>\n"}], "owner": {"reputation": 2911, "user_id": 4266765, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/KeB2V.jpg?s=128&g=1", "display_name": "Pilpel", "link": "https://stackoverflow.com/users/4266765/pilpel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1500509042, "creation_date": 1500476368, "last_edit_date": 1500477018, "question_id": 45194333, "link": "https://stackoverflow.com/questions/45194333/why-do-fstream-read-and-fstream-write-use-char-and-not-unsigned-char", "title": "Why do fstream.read and fstream.write use char and not unsigned char?", "body": "<p>As far as I know, <code>read()</code> and <code>write()</code> are there so we can read and write bytes directly from or to a file, and I was taught that the equivalent of a <code>byte</code> in c++ is <code>unsigned char</code>, so why do they take <code>char</code> pointers as parameters?</p>\n\n<p>Also, do take a look at this function from a \"bmp file image reader\" library I found:</p>\n\n<pre><code>bool BMPImage::readInfo()\n{\n    //...\n\n    //read bmp and dib headers\n    unsigned char header[28] = {0};\n    _ifs-&gt;read((char*)header, 28);\n    _width    = *(int*)&amp;header[18]; //width is located in [18] and is 4 bytes size\n    _height   = *(int*)&amp;header[22]; //height is located in [22] and is 4 bytes size\n    _bpp      = (unsigned char) *(short*)&amp;header[28]; //bpp is located in [28] and is 2 bytes size\n    _channels = _bpp / 8; //set num channels manually\n\n    //...\n</code></pre>\n\n<p>Why does the <code>_ifs-&gt;read()</code> line work anyway? The cast from unsigned char to char forces loss of data, no?</p>\n"}, {"tags": ["c++", "c++11", "c++-standard-library"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500479002, "post_id": 45194205, "comment_id": 77358015, "body": "This blog post (and others on the site) may give some background to the process:  <a href=\"https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/\" rel=\"nofollow noreferrer\">herbsutter.com/2017/07/15/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4546925"}, "edited": false, "score": 0, "creation_date": 1500478243, "post_id": 45194346, "comment_id": 77357472, "body": "Where do I find those proposals? The proposed implementation comes with some license?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1500478918, "post_id": 45194346, "comment_id": 77357961, "body": "You can start by looking here: <a href=\"https://isocpp.org/blog/category/standardization\" rel=\"nofollow noreferrer\">isocpp.org/blog/category/standardization</a> As for proposed implementation license, I am guessing it is public domain, but I am no lawyer."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 6, "last_activity_date": 1500476971, "last_edit_date": 1500476971, "creation_date": 1500476400, "answer_id": 45194346, "question_id": 45194205, "link": "https://stackoverflow.com/questions/45194205/how-to-and-who-can-implement-the-standard-library-features-defined-by-the-c/45194346#45194346", "title": "How to (and who can) implement the standard library features defined by the C++ committee?", "body": "<p>Formally, no. As with all standards out there, C++ Standard sets the rules, and does not gives implementation. However, from the practical standpoint, it is nearly impossible to introduce a new feature into Standard Library without proposed implementation, so you often can find those attached to proposals.</p>\n\n<p>As for your questions on \"can you write non-compliant version\", you can do whatever you want. Adoption might depend on your compliance, or might not - a super-widely adopted MSVC is known to violate C++ standard.</p>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1500477033, "creation_date": 1500477033, "answer_id": 45194579, "question_id": 45194205, "link": "https://stackoverflow.com/questions/45194205/how-to-and-who-can-implement-the-standard-library-features-defined-by-the-c/45194579#45194579", "title": "How to (and who can) implement the standard library features defined by the C++ committee?", "body": "<p>Typically, a new feature is not standardized, unless the committee has some solid evidence that it can be implemented, and will be useful.  This very often consists of a prototype implementation in <a href=\"http://www.boost.org/\" rel=\"nofollow noreferrer\">boost</a>, a GNU library, or one of the commercial compiler vendors.  </p>\n\n<p>The standard <em>itself</em> does not contain any implementation guidance - it is purely a specification.  The compiler vendors (or their subcontractors) choose how to implement that specification.</p>\n\n<p>In the specific case of <code>unique_ptr</code>, it was adopted into the standard from <code>boost::unique_ptr</code> - and you can still use the latter.  If you have a compiler that will compile for your microcontroller, it is almost certain that it will be able to build enough of boost to make <code>unique_ptr</code> work.</p>\n\n<p>There is nothing stopping you from writing a non-conforming implementation (apart from the trivial point that if you sold it as being standards-conforming, and it wasn't you might get your local equivalent of Trading Standards come knocking.)</p>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1500477311, "creation_date": 1500477311, "answer_id": 45194684, "question_id": 45194205, "link": "https://stackoverflow.com/questions/45194205/how-to-and-who-can-implement-the-standard-library-features-defined-by-the-c/45194684#45194684", "title": "How to (and who can) implement the standard library features defined by the C++ committee?", "body": "<p>The committee does not release any reference implementations. In the early days, things got standardized and then the tool developers went away and implemented the standard. This has changed, and now the committee looks for features that have been implemented and tested before standardization.</p>\n\n<p>Also major developments usually don't go directly into the standard. First they become <a href=\"http://en.cppreference.com/w/cpp/experimental\" rel=\"nofollow noreferrer\">experimental features</a> called a Technical Specification or TS. These TS may then be incorporated into the main standard at a later date.</p>\n\n<p>You are free to write you own implementation of the C++ standard library. <a href=\"http://www.plumhall.com/suites.html\" rel=\"nofollow noreferrer\">Plum Hall</a> has a test suite (commercial, I have no connection, but Plum Hall are very involved with C++ standardization).</p>\n\n<p>I don't see any issue with not being conformant. Almost all implementations have some extensions. Just don't make any false claims, especially if you want to sell your product.</p>\n\n<p>If you're interested in getting involved, this can be done via your 'National Body' (ANSI for the USA, BSI for the UK etc.). The <a href=\"https://isocpp.org\" rel=\"nofollow noreferrer\">isocpp</a> web site has a section on standardization which would be a good starting place.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 7, "last_activity_date": 1500478873, "last_edit_date": 1500478873, "creation_date": 1500477494, "answer_id": 45194749, "question_id": 45194205, "link": "https://stackoverflow.com/questions/45194205/how-to-and-who-can-implement-the-standard-library-features-defined-by-the-c/45194749#45194749", "title": "How to (and who can) implement the standard library features defined by the C++ committee?", "body": "<p>Usually, </p>\n\n<ul>\n<li><p>every new library feature goes through a <a href=\"https://isocpp.org/std/submit-a-proposal\" rel=\"noreferrer\">proposal</a>. </p></li>\n<li><p>If the proposal makes it to the C++ committee's <strong>Library Evolution Working Group</strong>, it goes through a series of iterations (a \"tough ground\" as I am aware).</p></li>\n<li><p>It undergoes a series of refinement process as described <a href=\"https://isocpp.org/std/the-life-of-an-iso-proposal\" rel=\"noreferrer\">here</a></p></li>\n<li><p>Should it require a (TS) Technical Specification (since C++11), it goes there to be baked. Take for example, the <code>#include &lt;filesystem&gt;</code> was in a <strong>Filesystem TS</strong> prior to C++17.</p></li>\n<li><p>One thing I believe the committee likes, is an <em>implementation experience</em>.</p></li>\n<li><p>More information can be found on the <a href=\"https://isocpp.org/std\" rel=\"noreferrer\">ISOCpp site</a></p></li>\n</ul>\n\n<p>Well, as to the implementation:</p>\n\n<ul>\n<li><p>There are quite a number of \"library features\" that cannot be implemented purely as a library. they require compiler support. And in these case, compilers provides \"intrinsic\" that you could hook on to. Take for example, clang provides <a href=\"http://libcxx.llvm.org/type_traits_design.html\" rel=\"noreferrer\">intrinsics for certain type_traits</a></p></li>\n<li><p>Most library features have some implementation experience, mostly from the <a href=\"http://www.boost.org\" rel=\"noreferrer\">Boost libraries</a>.</p></li>\n<li><p>You could actually look into the source code for the default standard library that ships with your compiler:</p>\n\n<ul>\n<li><a href=\"https://github.com/llvm-mirror/libcxx\" rel=\"noreferrer\">libc++</a> for Clang</li>\n<li><a href=\"https://github.com/gcc-mirror/gcc/tree/master/libstdc%2B%2B-v3\" rel=\"noreferrer\">libstdc++</a> for GCC</li>\n</ul></li>\n<li><p>Sadly most of the implementations use a whole bunch of underscores. Mostly because they are reserved for use by the \"Standard Library\".</p></li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>Can anyone implement parts of the standard library for a platform that doesn't have support for it yet?</p>\n</blockquote>\n\n<p>Yes, you can, so far your compiler supports that platform, and the platform or Operating System provides usable API. For example. <code>std::cout</code>, elements of <code>std::ifstream</code>, and so much more requires platform specific support.</p>\n\n<blockquote>\n  <p>Let say I would like to implement some cool features of the C++ standard library to use it on a microcontroller environment. How could I do that?</p>\n</blockquote>\n\n<p>You can look into the code of others and start from there. We learn from giants. Some Open Source Examples:</p>\n\n<ul>\n<li><a href=\"https://github.com/ETLCPP/etl\" rel=\"noreferrer\">ETL</a></li>\n<li><a href=\"https://github.com/maniacbug/StandardCplusplus\" rel=\"noreferrer\">StandardCPlusPlus</a></li>\n<li><a href=\"https://cxx.uclibc.org/\" rel=\"noreferrer\">uClib++</a></li>\n</ul>\n\n<blockquote>\n  <p>How could I do that? Where should I look for information?</p>\n</blockquote>\n\n<ul>\n<li><p>You could check the paper that introduced the feature into the C++ library. For example, <code>std::optional</code> has a stand-alone implementation <a href=\"https://github.com/akrzemi1/Optional\" rel=\"noreferrer\">here</a> which was used as a reference implementation during the proposal stages.</p></li>\n<li><p>You could check the standard library, and do a laborious study. :-)</p></li>\n<li>Search the internet. :-)</li>\n<li>Or write it from scratch as specified by the standard</li>\n</ul>\n\n<blockquote>\n  <p>Will I need to follow exactly what the standard say or I can write a non-compliant version?</p>\n</blockquote>\n\n<p>There's is no compulsion to follow what the C++ standard library specifies. That would be your \"own\" library.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4546925"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 2, "accepted_answer_id": 45194749, "answer_count": 4, "score": 6, "last_activity_date": 1500478873, "creation_date": 1500476031, "question_id": 45194205, "link": "https://stackoverflow.com/questions/45194205/how-to-and-who-can-implement-the-standard-library-features-defined-by-the-c", "title": "How to (and who can) implement the standard library features defined by the C++ committee?", "body": "<p>When the C++ committee publish a new feature that will be part of the standard library in the next standard of the language, they also release some source code or some kind of guidance on how to implement that feature? </p>\n\n<p>Let's take <code>unique_ptr</code> as an example. The language committee just defines an interface for that class template and let the compiler vendor implement it as it wants? How exactly this process of implementation of the standard library features occurs.</p>\n\n<p>Can anyone implement parts of the standard library for a platform that doesn't have support for it yet? Let say I would like to implement some cool features of the C++ standard library to use it on a microcontroller environment. How could I do that? Where should I look for information? If I decide to turn my project open source, can I do that? Will I need to follow exactly what the standard say or I can write a non-compliant version?</p>\n"}, {"tags": ["c++", "arrays", "vector"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 2, "creation_date": 1500475573, "post_id": 45194010, "comment_id": 77355269, "body": "<a href=\"http://en.cppreference.com/w/cpp/iterator/distance\" rel=\"nofollow noreferrer\"><code>std::distance</code></a>. <code>begin == end</code> &lt;=&gt; <code>size == std::distance(begin, end) == 0</code>."}, {"owner": {"reputation": 1852, "user_id": 8318088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBXoU.jpg?s=128&g=1", "display_name": "Danyal Imran", "link": "https://stackoverflow.com/users/8318088/danyal-imran"}, "edited": false, "score": 1, "creation_date": 1500475715, "post_id": 45194010, "comment_id": 77355400, "body": "<code>begin</code> being equal to <code>end</code> depicts that the container is empty"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500475934, "post_id": 45194010, "comment_id": 77355595, "body": "C++ standard library iterators always use the scheme where the begin iterator is inclusive and the end iterator is exclusive (refers to one-past-the-end)."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1500475910, "post_id": 45194057, "comment_id": 77355573, "body": "This is a short and precise and reliable answer. I&#39;d like to see more of that kind. Excellent."}, {"owner": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "edited": false, "score": 0, "creation_date": 1500477066, "post_id": 45194057, "comment_id": 77356526, "body": "@WhiZTiM If the container is not sequential inside the memory, how does the distance function knows how many bytes is every element inside the container?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "edited": false, "score": 0, "creation_date": 1500477449, "post_id": 45194057, "comment_id": 77356815, "body": "@axcelenator <code>distance</code> will try something like <code>for(; first != last; first++) n++;</code>"}, {"owner": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1500477570, "post_id": 45194057, "comment_id": 77356910, "body": "@PasserBy But without know if type of hop is <code>int</code> or <code>float</code> how much the increment is authentic?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "edited": false, "score": 1, "creation_date": 1500477607, "post_id": 45194057, "comment_id": 77356943, "body": "@axcelenator iterators abstract away <code>operator++</code> for you so that the increment is always valid, this is the whole point of iterators."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "edited": false, "score": 0, "creation_date": 1500479654, "post_id": 45194057, "comment_id": 77358424, "body": "@axcelenator, 1 of 2: C++ concept of an iterator is anything that abstract away the process of accessing elements, one after the other in a container. So, its up to you, the implementer of the container to implement it how you want to. For Sequential and Contiguous containers, its most likely going to be a simple pointer. For other types of data structures, its definitely going to be a little more than incrementing a pointer...."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "edited": false, "score": 1, "creation_date": 1500479754, "post_id": 45194057, "comment_id": 77358494, "body": "@axcelenator. 2 of 2: If you look at <code>std::distance</code>, it would give you the number of elements in the data structure in <code>O(1)</code> if the iterator is <i>RandomAccess</i>, otherwise, it would require incrementing the first argument until the last has been reached; which means making the iterator do &quot;whatever work&quot; is necessary (abstracted away by <code>operator++</code>) to go the next element until the last has been reached."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 8, "last_activity_date": 1500476061, "last_edit_date": 1500476061, "creation_date": 1500475607, "answer_id": 45194057, "question_id": 45194010, "link": "https://stackoverflow.com/questions/45194010/size-of-unknown-container-vector-or-array-c/45194057#45194057", "title": "Size of unknown container, vector or array c++", "body": "<blockquote>\n  <ol>\n  <li>I want that the function will check for the size of the container passed to it. My problems are: if begin iterator equals end iterator does it mean 0 or 1 elements inside container? How can I decalare some universal size type ? </li>\n  </ol>\n</blockquote>\n\n<p>You should use <a href=\"http://en.cppreference.com/w/cpp/iterator/distance\" rel=\"nofollow noreferrer\"><code>std::distance</code></a> for that.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>If I want to sort the unknown container by passing iterators to sort function is that becomes a problem? I have some feeling that it won't work.</li>\n  </ol>\n</blockquote>\n\n<p>It would work, provided the iterators are <a href=\"http://en.cppreference.com/w/cpp/concept/RandomAccessIterator\" rel=\"nofollow noreferrer\">RandomAccessIterators</a> and the value type is <a href=\"http://en.cppreference.com/w/cpp/concept/ValueSwappable\" rel=\"nofollow noreferrer\">swappable</a></p>\n\n<hr>\n\n<p>So, your code could be:</p>\n\n<pre><code>template&lt;class P, class T&gt;\nT my_func(P first, P last)\n{\n   if(first == last) // No elements within the range\n        throw domain_error(\"some message if 0 elements\");\n\n   //Number of Elements within the range\n   auto container_size = std::distance(first, last);\n\n   std::sort(first, last);\n\n   return ...;\n}\n</code></pre>\n\n<p>If my guess is correct, that the template parameter <code>T</code> is supposed to be the value type of the iterator, you can obtain it using <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_traits\" rel=\"nofollow noreferrer\"><code>std::iterator_traits&lt;T&gt;::value_type</code></a></p>\n"}], "owner": {"reputation": 1269, "user_id": 1501608, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2e677965759e1b9096c8376c1f2384bc?s=128&d=identicon&r=PG&f=1", "display_name": "axcelenator", "link": "https://stackoverflow.com/users/1501608/axcelenator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 45194057, "answer_count": 1, "score": 2, "last_activity_date": 1500476061, "creation_date": 1500475460, "question_id": 45194010, "link": "https://stackoverflow.com/questions/45194010/size-of-unknown-container-vector-or-array-c", "title": "Size of unknown container, vector or array c++", "body": "<p>I try to build a template function that gets 2 iterators(<code>begin</code> and <code>end</code>) of either a <code>vector</code> or an <code>array</code>(this must be unknown container passed to function).</p>\n\n<ol>\n<li><p>I want that the function will check for the size of the container passed to it.\nMy problems are: if <code>begin iterator</code> equals <code>end iterator</code> does it mean 0 or 1 elements inside container?\nHow can I decalare some universal size type ? </p></li>\n<li><p>If I want to sort the unknown container by passing iterators to sort function is that becomes a problem? I have some feeling that it won't work.</p></li>\n</ol>\n\n<p>This is my draft of the template function:</p>\n\n<pre><code>    template&lt;class P, class T&gt;\n    T my_func(P beg, P end)\n    {\n       typedef typename ??? container_size;\n       if (beg == end)//first problem to determine if contains 0 or 1 \n                         elements \n\n       throw domain_error(\"some message if 0 elements\");\n\n       sort(beg, end);// scond problem\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "dicom", "gdcm"], "comments": [{"owner": {"reputation": 11126, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 2, "creation_date": 1500531839, "post_id": 45193995, "comment_id": 77379694, "body": "If you check the value of <code>length</code> you&#39;ll realize that the buffer is a C-style array containing all your frames in a single chunk."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "reply_to_user": {"reputation": 11126, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 2, "creation_date": 1500571517, "post_id": 45193995, "comment_id": 77409064, "body": "I did a quick check of the docs and it seems that there is no built in tool. As @malat says, you have access to the buffer, you will need to compute the frame sizes and then extract them yourself one by one. You might be able to use StreamImageReader, but examples are hard to find."}, {"owner": {"reputation": 179, "user_id": 4679616, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed965a119f4da2bd30119d5546e9979c?s=128&d=identicon&r=PG&f=1", "display_name": "masoud khanlo", "link": "https://stackoverflow.com/users/4679616/masoud-khanlo"}, "edited": false, "score": 0, "creation_date": 1500621248, "post_id": 45193995, "comment_id": 77428189, "body": "Thank you guys, finally, I extracted stacks to the single files."}, {"owner": {"reputation": 611, "user_id": 3301836, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100005255407741/picture?type=large", "display_name": "mahmoud nezar sarhan", "link": "https://stackoverflow.com/users/3301836/mahmoud-nezar-sarhan"}, "edited": false, "score": 0, "creation_date": 1508087411, "post_id": 45193995, "comment_id": 80460658, "body": "@masoudkhanlo can you tell me how you did it please ?"}, {"owner": {"reputation": 179, "user_id": 4679616, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed965a119f4da2bd30119d5546e9979c?s=128&d=identicon&r=PG&f=1", "display_name": "masoud khanlo", "link": "https://stackoverflow.com/users/4679616/masoud-khanlo"}, "reply_to_user": {"reputation": 611, "user_id": 3301836, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100005255407741/picture?type=large", "display_name": "mahmoud nezar sarhan", "link": "https://stackoverflow.com/users/3301836/mahmoud-nezar-sarhan"}, "edited": false, "score": 0, "creation_date": 1508240605, "post_id": 45193995, "comment_id": 80524845, "body": "@mahmoud-nezar-sarhan ,  malat was right , if you open a multi-frame dicom file then the image.GetBufferLength() will be as large as all frames size."}], "owner": {"reputation": 179, "user_id": 4679616, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed965a119f4da2bd30119d5546e9979c?s=128&d=identicon&r=PG&f=1", "display_name": "masoud khanlo", "link": "https://stackoverflow.com/users/4679616/masoud-khanlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1007, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1546075990, "creation_date": 1500475422, "last_edit_date": 1500531880, "question_id": 45193995, "link": "https://stackoverflow.com/questions/45193995/how-to-read-multi-frame-dicom-files-using-gdcm", "title": "How to read multi frame DICOM files using GDCM?", "body": "<p>I'm trying to read multi frame DICOM files using gdcm library.</p>\n\n<p>But i can only read single frame dicom files data with this code :</p>\n\n<pre><code>gdcm::ImageReader reader;\nreader.SetFileName(path); \nif(!reader.Read()) return false;\n\nconst gdcm::Pixmap &amp;image = reader.GetPixmap();\nint length = image.GetBufferLength();\nchar *buffer = new char[length];\nimage.GetBuffer(buffer);\n</code></pre>\n\n<p>How i can access to another frames ?</p>\n"}, {"tags": ["c++", "c", "sizeof", "flexible-array-member"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1500475431, "post_id": 45193984, "comment_id": 77355156, "body": "FWIW VLA&#39;s are not standard in C++ so anything you get is going to be implementation defined."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500475565, "post_id": 45193984, "comment_id": 77355260, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18</a>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1500475895, "post_id": 45193984, "comment_id": 77355555, "body": "@Olaf Why did you remove the C++ tag? The question is &quot;C vs C++&quot;. Isn&#39;t that legal or reasonable?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500475946, "post_id": 45193984, "comment_id": 77355599, "body": "A simple look into the standard would have saved time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500475986, "post_id": 45193984, "comment_id": 77355633, "body": "@Scheff Apparently the question applies only to one of the different languages."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500476045, "post_id": 45193984, "comment_id": 77355679, "body": "@Scheff I think it is not illegal. But it is better to have two different question as there are many C experts here and many C++ experts which are not always the same people. The C++ part was the reason I put the link to the C standard in the comment and not made it an answer as I don&#39;t have it from the top of my mind about C++ ."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500476366, "post_id": 45193984, "comment_id": 77355981, "body": "@Olaf For me, that was not so &quot;apparently&quot; (though my stomach had me prevented to do something like this in C++) but I see your intention."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500476502, "post_id": 45193984, "comment_id": 77356083, "body": "It conflicts with the question explicitly asking about differences between C and C++ (and the answer addresses this) -&gt; tag restored."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500476552, "post_id": 45193984, "comment_id": 77356125, "body": "Oje... (Peace, please.)"}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 1, "creation_date": 1500476579, "post_id": 45193984, "comment_id": 77356143, "body": "It <i>works</i> in C++ in both Clang and GCC so the question <i>can be answered</i>. The answer might be &quot;It is not in the standard, but supported but GCC and Clang. On those compilers the size is 4&quot;. That&#39;s useful information."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1500476580, "post_id": 45193984, "comment_id": 77356144, "body": "Not even sure why the question needs to be asked - it&#39;s easy enough to find out what the sizeof would be with a simple call to <code>printf</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500476584, "post_id": 45193984, "comment_id": 77356151, "body": "@Scheff: Must be some German thingie \u2026"}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1500476614, "post_id": 45193984, "comment_id": 77356181, "body": "@ChrisTurner: Because C/C++ is full of undefined and implementation-defined behaviour. <code>printf</code> won&#39;t tell you that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500480131, "post_id": 45193984, "comment_id": 77358737, "body": "Yes, better don&#39;t judge the quality of the question this way. The standard documents aren&#39;t exactly an easy reading, you have to be already very familiar with them in order to find what you&#39;re looking for. And apparently, the question is well received. The duplicate isn&#39;t a perfect one, but as it has been answered that FAMs just don&#39;t exist in C++, it&#39;s ok as a link to a strongly related question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500480184, "post_id": 45193984, "comment_id": 77358769, "body": "@Timmmm: We can only judge from what was presented in the question. And from that it is evident you did no research at all."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1500481415, "post_id": 45193984, "comment_id": 77359485, "body": "I don&#39;t think it&#39;s an exact dupe as this question address c++ along with c tag. Reopened it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500486386, "post_id": 45193984, "comment_id": 77362427, "body": "BE sure to review this find <a href=\"https://stackoverflow.com/a/44870679/2410359\">answer</a> to <a href=\"https://stackoverflow.com/q/44745677/2410359\">Flexible array members can lead to undefined behavior?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 1, "creation_date": 1500476735, "post_id": 45194073, "comment_id": 77356269, "body": "Thanks! I actually can&#39;t find any reference to it in C++14, but I think it is safe to assume that Clang/GCC/etc apply the same behaviour to it in C++ as they do in C (and by experiment they seem to)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1500481430, "post_id": 45194073, "comment_id": 77359496, "body": "@felix: <code>struct { char a; double d[]; };</code>. If you ignored <code>d</code>, the size could be 1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1500481626, "post_id": 45194073, "comment_id": 77359616, "body": "@rici yes, that&#39;s a simple one, but <a href=\"https://stackoverflow.com/q/44745677/2371524\">have a look at the discussion here</a> ;) (I just see I might have confused this with some other quotes... sorry)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500490762, "post_id": 45194073, "comment_id": 77364973, "body": "@felix I saw that discussion earlier but chose to avoid entering the fray. The C Standard is not in the business of deliberately building false expectations, nor is it a kind of Delphic Oracle whose mysterious pronouncements can only be unravelled by high priests skilled in the magic arts. Rather, it is a description of a programming language intended to be used (and to be usable). A feature described by the standard must be usable; otherwise it would not be there. If the wording makes that impossible, it is a defect and should be corrected; it won&#39;t be the first nor the last such error..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500491141, "post_id": 45194073, "comment_id": 77365207, "body": "... The question that you link to struck me as a misappropriation of energy: if OP&#39;s argument is valid, it should be presented as a DR to the standardisation committee. Using it instead to discourage the use of FAMs strikes me as a tactic by someone whose aesthetic sensibilities are offended by FAMs, and who therefore believes that they should be extirpated from the language. (A serious argument to that effect would also better be submitted to the committee but I expect it would not prosper.) Now: what interesting example were you referring to?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500493766, "post_id": 45194073, "comment_id": 77366742, "body": "@rici As I understood his comments, he <b>did</b> prepare a DR. But I&#39;m not sure his argumentation holds ;) The passage in this answer just reminded me having seen this discussion."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500497841, "post_id": 45194073, "comment_id": 77368931, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149647/discussion-between-rici-and-felix-palmen\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 7, "last_activity_date": 1500480712, "last_edit_date": 1500480712, "creation_date": 1500475654, "answer_id": 45194073, "question_id": 45193984, "link": "https://stackoverflow.com/questions/45193984/size-of-a-struct-with-flexible-array-member/45194073#45194073", "title": "Size of a struct with flexible array member", "body": "<p>The compiler will ignore the flexible array member as it were not there.  </p>\n\n<p>C11-\u00a76.7.2.1 (p18)</p>\n\n<blockquote>\n  <p>[...] In most situations, the flexible array member is ignored. In particular, <strong>the size of the structure is as if the flexible array member were omitted</strong> except that it may have more trailing padding than the omission would imply [...].  </p>\n</blockquote>\n\n<p>AFAIK, flexible array member is not the part of C++ standard till c++14. But, GNU support it as <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">an extension</a>. Behaviour will be similar for both C and C++.</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "accepted_answer_id": 45194073, "answer_count": 1, "score": 6, "last_activity_date": 1500481368, "creation_date": 1500475394, "last_edit_date": 1500476407, "question_id": 45193984, "link": "https://stackoverflow.com/questions/45193984/size-of-a-struct-with-flexible-array-member", "title": "Size of a struct with flexible array member", "body": "<p>Given</p>\n\n<pre><code>struct Foo {\n    uint32_t a;\n    uint32_t b[];\n};\n</code></pre>\n\n<p>What is <code>sizeof(Foo)</code>? Is it implementation-defined or undefined behaviour? Does the answer differ for C vs C++?</p>\n"}, {"tags": ["c++", "maps"], "comments": [{"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500476100, "post_id": 45193980, "comment_id": 77355727, "body": "Do you pass your map of maps to the function by reference? You may be copying it so not making persistent changes within your function. Also, are you overwriting the value by mistake, rather than adding a new value?"}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500476227, "post_id": 45193980, "comment_id": 77355858, "body": "Nop, because the map of maps belong to the class where i have the function. So its only call the map of map"}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500476288, "post_id": 45193980, "comment_id": 77355918, "body": "Post some more code - the relevant bits of the two functions and the class they&#39;re members of."}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500476371, "post_id": 45193980, "comment_id": 77355989, "body": "I define the maps in my class.h, so in class.cpp its only to call the map of maps inside the function i need."}, {"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500477243, "post_id": 45193980, "comment_id": 77356668, "body": "Well there doesn&#39;t seem to be anything wrong in this code, so without posting more code we won&#39;t be able to find what <i>is</i> wrong."}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500479137, "post_id": 45193980, "comment_id": 77358111, "body": "I already found my problem.. its because i cannot have two elements in same map with same key, in this case... TYPE_REQ_USER... if i put other key and try again the map have the size 2..."}, {"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1500479493, "post_id": 45193980, "comment_id": 77358332, "body": "Yes, sorry i dont see."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "edited": false, "score": 0, "creation_date": 1500480221, "post_id": 45195452, "comment_id": 77358796, "body": "Thanks. I already solve this problem, when i inserting in loop iterating i do:  outMap[it-&gt;first][req-&gt;number] = req;  the it-&gt;first is equal to TYPE_REQ_USER so for the same TYPE_REQ_USER i have two different elements.  Please see my edit 2, to see my new problem"}], "tags": [], "owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "is_accepted": true, "score": 1, "last_activity_date": 1500479461, "creation_date": 1500479461, "answer_id": 45195452, "question_id": 45193980, "link": "https://stackoverflow.com/questions/45193980/c-insert-data-into-map-of-map-loop/45195452#45195452", "title": "C++ - Insert data into map of map loop", "body": "<p>(comment converted to answer for completeness)</p>\n\n<p>Using a <code>std::map</code>, inserting an item that already exists will <strong>overwrite</strong> the existing item. You can check if you've overwritten an item by using <code>std::map::insert</code> and checking the second item of the returned pair, as described <a href=\"http://www.cplusplus.com/reference/map/map/insert/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 89, "user_id": 8219876, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c66c2b9ee88f4126a3bb2373ac9a6717?s=128&d=identicon&r=PG&f=1", "display_name": "RMRMaster", "link": "https://stackoverflow.com/users/8219876/rmrmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 45195452, "answer_count": 1, "score": 0, "last_activity_date": 1500480023, "creation_date": 1500475384, "last_edit_date": 1500480023, "question_id": 45193980, "link": "https://stackoverflow.com/questions/45193980/c-insert-data-into-map-of-map-loop", "title": "C++ - Insert data into map of map loop", "body": "<p>During a map of map loop what is the correct way to insert data?</p>\n\n<p>In first moment in my code inside one function i insert some data to my map of map like this (and its work good):</p>\n\n<pre><code>outMap[TYPE_REQ_USER][req-&gt;number] = req;\n</code></pre>\n\n<p>After this my map size is 1.</p>\n\n<p>In second moment, inside other function, i need to iterate the map and if i found the key <code>TYPE_REQ_USER</code> i need to add a new data to the map of map. I try like this but after this i print the map size and we said its 1 and not 2 (the expected)</p>\n\n<p>My map of map loop to insert data:</p>\n\n<pre><code> for (outMap_t::iterator itOutMap = outMap.begin(); itOutMap != outMap.end(); ++ itOutMap)\n {\n      for (intMap_t::iterator itInMap = itOutMap-&gt;second.begin(); itInMap != itOutMap-&gt;second.end(); ++itInMap)\n      {\n        if (itOutMap-&gt;first == TYPE_REQ_USER)\n        {\n          //map insert\n          outMap[TYPE_REQ_USER][req-&gt;number] = req;\n        }\n      }\n }\n</code></pre>\n\n<p>So what is wrong in my loop insert? </p>\n\n<p>EDIT 2</p>\n\n<p>So now for the same key (TYPE_REQ_USER) i can have two different elements. </p>\n\n<p>So know when i'm trying to iterate the map and delete the elements for the key i'm having the segmentation fault error, because in first iteration i do:</p>\n\n<p>qnRunningType_JobId.erase(itOutMap);</p>\n\n<p>But in second iteration i have the sementation fault error because i'm trying to delete the <code>itOutMap</code> but we already deleted in first iteration.. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500475231, "post_id": 45193795, "comment_id": 77354986, "body": "Consider, that a reference may have side effects. If it refers to a variable which could be altered &quot;out of scope&quot; e.g. in a called function which is not obvious. This is true for const references as well (and may be in this case less expected). A local variable may not be changed &quot;secretly&quot; (if not passed to other functions by reference or pointer)."}, {"owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "edited": false, "score": 1, "creation_date": 1500475566, "post_id": 45193795, "comment_id": 77355264, "body": "I don&#39;t think this is an exact duplicate. In the linked question, the OP is using an object type as return type. In this case, an <code>int</code> is used and some other things must be considered."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "is_accepted": true, "score": 1, "last_activity_date": 1500475247, "creation_date": 1500475247, "answer_id": 45193936, "question_id": 45193795, "link": "https://stackoverflow.com/questions/45193795/what-is-the-importance-of-adding-the-const-qualifier-in-the-return-for-the-funct/45193936#45193936", "title": "What is the importance of adding the const qualifier in the return for the function below?", "body": "<p>In the case of an <code>int</code>, copy is inexpensive and this is the most preferred way:</p>\n\n<pre><code>int foo(const int &amp;y)\n</code></pre>\n\n<p>When using a <code>const int&amp;</code> for such a small data type, the indirection will make the code less cache-friendly and probably less efficient than the copy version.</p>\n"}], "owner": {"reputation": 24862, "user_id": 492372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81dd7ca53fcae94443677a01ac638676?s=128&d=identicon&r=PG", "display_name": "London guy", "link": "https://stackoverflow.com/users/492372/london-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 45193936, "answer_count": 1, "score": 1, "last_activity_date": 1500476215, "creation_date": 1500474922, "question_id": 45193795, "link": "https://stackoverflow.com/questions/45193795/what-is-the-importance-of-adding-the-const-qualifier-in-the-return-for-the-funct", "title": "What is the importance of adding the const qualifier in the return for the function below?", "body": "<p>I have the following codebase</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nint foo(const int &amp;y) {\n    static int z = y;\n    z = z + 1;\n    return z;\n}\n\n\nint main(int argv, char *args[]) {\n    int x = 6;\n    int r = foo(x);\n    printf(\"The value returned is %d\\n\", r);\n    printf(\"The vlaue of x is %d\\n\", x);\n    r = foo(x);\n    printf(\"The value returned is %d\\n\", r);\n    printf(\"The vlaue of x is %d\\n\", x);\n\n}\n</code></pre>\n\n<p>Now, the above code prints the same output</p>\n\n<pre><code>The value returned is 7\nThe value of x is 6\nThe value returned is 8\nThe value of x is 6\n</code></pre>\n\n<p>no matter whether the function is defined like below:</p>\n\n<pre><code>int foo(const int &amp;y) {\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>const int &amp; foo(const int &amp;y) {\n</code></pre>\n\n<p>So my question is what is the side effect or why is it important to use/not-use the <code>const int &amp;</code> return type instead of <code>int</code> returntype</p>\n"}, {"tags": ["c++", "variant", "wsh"], "comments": [{"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 1, "creation_date": 1500474369, "post_id": 45193456, "comment_id": 77354289, "body": "Whether this is the cause or not, you don&#39;t generally want to use types like <code>VT_UINT</code> with old COM hosts. <code>VT_I4</code> should be the right one."}, {"owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1500474604, "post_id": 45193456, "comment_id": 77354497, "body": "@RomanR. You may be right, but when I attached wscript.exe process to Visual Studio Debugger and checked status, it said <code>wscript.exe has triggered a breakpoint. occurred</code> just before crashed dialog appears. :-("}, {"owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1500474780, "post_id": 45193456, "comment_id": 77354645, "body": "@RomanR. tried with <code>VT_I4</code>, same thing happened. Can I share this full code with you?"}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 1, "creation_date": 1500474854, "post_id": 45193456, "comment_id": 77354708, "body": "It is a good idea to post both ATL C++ and script code snippets because your question in its present form is not well defined."}, {"owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1500517941, "post_id": 45193456, "comment_id": 77374912, "body": "@RomanR. I used <code>CComVariant</code> class and it worked fine, unlike before I am getting a <code>Type Mismatch</code> when function passes a <code>BSTR</code> like <code>123456Hello</code> and try to convert to <code>unsigned int</code>, and no more breakpoints. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "is_accepted": true, "score": 0, "last_activity_date": 1500527364, "last_edit_date": 1500527364, "creation_date": 1500517506, "answer_id": 45204033, "question_id": 45193456, "link": "https://stackoverflow.com/questions/45193456/c-com-atl-variantchangetype-causes-wsh-to-crash/45204033#45204033", "title": "C++ COM ATL VariantChangeType causes WSH to crash", "body": "<p>I fixed this issue by using <code>CComVariant::ChangeType</code> instead of using <code>VariantChangeType</code> function like below:</p>\n\n<pre><code>CComVariant CV = Variant;\n\nHRESULT Result = CV.ChangeType(VT_I2);\n</code></pre>\n"}], "owner": {"reputation": 1294, "user_id": 6536104, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/NFbmf.jpg?s=128&g=1", "display_name": "GTAVLover", "link": "https://stackoverflow.com/users/6536104/gtavlover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 45204033, "answer_count": 1, "score": 0, "last_activity_date": 1500527364, "creation_date": 1500474180, "question_id": 45193456, "link": "https://stackoverflow.com/questions/45193456/c-com-atl-variantchangetype-causes-wsh-to-crash", "title": "C++ COM ATL VariantChangeType causes WSH to crash", "body": "<p>I have following line of code in my COM ATL project which causes WSH to crash:</p>\n\n<pre><code>Result = VariantChangeType(&amp;Variant, &amp;Variant, VARIANT_NOUSEROVERRIDE, VT_UINT);\n</code></pre>\n\n<p>When above function gets called prior to crash, <code>Variant</code>'s type is <code>VT_BSTR</code>, that's why I used <code>VARIANT_NOUSEROVERRIDE</code> flag. I tried removing flag with no success.</p>\n\n<p>What is wrong here for WSH to crash? I am sure that this is the line that causes the crash because message box which is prior to this line is displaying but message box after this line isn't displaying. Then Windows says:</p>\n\n<blockquote>\n  <p>Microsoft \u00ae Windows Based Script Host has stopped working</p>\n</blockquote>\n\n<p>Is my syntax wrong here?</p>\n"}, {"tags": ["c++", "pointers", "vector"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1500475200, "post_id": 45193455, "comment_id": 77354967, "body": "1. Why are you doing this? 2. Have you ever seen  <code>++</code> applied to a pointer?"}, {"owner": {"reputation": 1114, "user_id": 4398166, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ke3eX.jpg?s=128&g=1", "display_name": "Vim", "link": "https://stackoverflow.com/users/4398166/vim"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1500523210, "post_id": 45193455, "comment_id": 77376292, "body": "@n.m. 1. I want to make sure pointers of consecutive elements are also consecutive, so that <code>*(&amp;vec[i]+1)</code> points to <code>vec[i+1]</code>. 2. Not exactly sure what you mean but I think I was applying <code>++</code> to the index of an element instead of the pointer, although I think it will also work for pointers."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1500529931, "post_id": 45193455, "comment_id": 77378699, "body": "So you have found exactly what you wanted to verify. Are you surprised that <code>(&amp;vec[i]+1)-(&amp;vec[i])==1</code>?"}, {"owner": {"reputation": 1114, "user_id": 4398166, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ke3eX.jpg?s=128&g=1", "display_name": "Vim", "link": "https://stackoverflow.com/users/4398166/vim"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1500531226, "post_id": 45193455, "comment_id": 77379360, "body": "@n.m. No but I was surprised that <code>&amp;vec[0] =  01485048</code> and <code>&amp;vec[1] = 0148504C</code> and <code>&amp;vec[1]-&amp;vec[0]</code> is <code>1</code> instead of <code>4</code>. Now my confusion has been clarified. As the accepted answer says, I am not supposed to treat pointer values as ordinary integer objects."}], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 4398166, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ke3eX.jpg?s=128&g=1", "display_name": "Vim", "link": "https://stackoverflow.com/users/4398166/vim"}, "edited": false, "score": 0, "creation_date": 1500474426, "post_id": 45193528, "comment_id": 77354336, "body": "Yeah I know int should have four bytes. But the problem is, why the first result is two 1&#39;s? Shouldn&#39;t they be two 4&#39;s instead?"}, {"owner": {"reputation": 1114, "user_id": 4398166, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ke3eX.jpg?s=128&g=1", "display_name": "Vim", "link": "https://stackoverflow.com/users/4398166/vim"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1500474701, "post_id": 45193528, "comment_id": 77354580, "body": "@Barry ok thanks. I finally understand what it means by the help of an answer below."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 4, "last_activity_date": 1500474625, "last_edit_date": 1500474625, "creation_date": 1500474329, "answer_id": 45193528, "question_id": 45193455, "link": "https://stackoverflow.com/questions/45193455/c-pointers-to-consecutive-vector-elements-are-paradoxical/45193528#45193528", "title": "C++ pointers to consecutive vector elements are paradoxical", "body": "<p>Nothing particular to <code>vector</code>. C++ pointer arithmetic (and iterator arithmetic) is done in terms of elements. And indeed, <code>vec[i+1]</code> and <code>vec[i]</code> are one element apart. </p>\n\n<p>One element here happens to be 4 bytes, which is what you see when printing the bit pattern of the pointers. You can double-check this with <code>sizeof(vec[0])</code></p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 8087509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc1bbb2f67887a736986b20c234de59?s=128&d=identicon&r=PG&f=1", "display_name": "Pontifex", "link": "https://stackoverflow.com/users/8087509/pontifex"}, "is_accepted": true, "score": 1, "last_activity_date": 1500474502, "creation_date": 1500474502, "answer_id": 45193616, "question_id": 45193455, "link": "https://stackoverflow.com/questions/45193455/c-pointers-to-consecutive-vector-elements-are-paradoxical/45193616#45193616", "title": "C++ pointers to consecutive vector elements are paradoxical", "body": "<p>Calculating a difference between two pointers returns <strong>number of objects</strong> between them - that's why you cannot perform arithmetic on two pointers of different types. If you want to know the distance of <strong>bytes</strong> between them, either cast both pointers to <code>char*</code> or multiply the result of substraction by <code>sizeof(your_type)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1500474693, "post_id": 45193632, "comment_id": 77354575, "body": "Eww. You could also multiply the result by <code>sizeof(*pointer)</code>, which is portable (and far less ugly, but that&#39;s subjective)"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1500474841, "post_id": 45193632, "comment_id": 77354698, "body": "@MSalters Not really, just imagine the situations when two pointers to <code>uint32_t</code> point at memory blocks that are 13 bytes away from each other."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1500475412, "post_id": 45193632, "comment_id": 77355139, "body": "That would be illegal, as you&#39;re not allowed to subtract pointers unless they both point to the same array. And clearly there&#39;s no <code>uint32_t[N]</code> with 13 bytes between elements (ignoring 32 bits bytes for a moment)."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1500476271, "post_id": 45193632, "comment_id": 77355902, "body": "@MSalters <i>That would be illegal</i> is exactly what i&#39;m talking about. Method with casting to intptr is universal."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1500476591, "post_id": 45193632, "comment_id": 77356155, "body": "Well, universal in the sense that it produces a number, not in the sense that it is meaningful. In particular, it&#39;s not necessarily suitable for arithmetic. E.g. you&#39;re not even guaranteed that <code>uintptr_t</code> has the same endianness as <code>int*</code> (!)"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 1, "last_activity_date": 1500474526, "creation_date": 1500474526, "answer_id": 45193632, "question_id": 45193455, "link": "https://stackoverflow.com/questions/45193455/c-pointers-to-consecutive-vector-elements-are-paradoxical/45193632#45193632", "title": "C++ pointers to consecutive vector elements are paradoxical", "body": "<p>You should cast pointers to <code>uintptr_t</code> so substraction will yield amount of bytes in between them:</p>\n\n<pre><code>cout &lt;&lt; (reinterpret_cast&lt; uintptr_t &gt;(&amp;vec[i+1]) - reinterpret_cast&lt; uintptr_t &gt;(&amp;vec[i])) &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 1114, "user_id": 4398166, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ke3eX.jpg?s=128&g=1", "display_name": "Vim", "link": "https://stackoverflow.com/users/4398166/vim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 45193616, "answer_count": 3, "score": 0, "last_activity_date": 1500474625, "creation_date": 1500474177, "last_edit_date": 1500474359, "question_id": 45193455, "link": "https://stackoverflow.com/questions/45193455/c-pointers-to-consecutive-vector-elements-are-paradoxical", "title": "C++ pointers to consecutive vector elements are paradoxical", "body": "<p>I want to find out the \"distances\" between locations of consecutive vector elements in the memory. So I try the following code</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n    vector&lt;int&gt; vec(3);\n    for (int i = 0; i &lt;= 1; i++)\n    {\n        cout &lt;&lt; &amp;vec[i+1] - &amp;vec[i] &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The result are unsurprisingly two <code>1</code>s. However, when I try printing the individual pointers:</p>\n\n<pre><code>vector&lt;int&gt; vec(3);\nfor (int i = 0; i &lt;= 2; i++)\n{\n    cout &lt;&lt; &amp;vec[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>01485048\n0148504C\n01485050\n</code></pre>\n\n<p>So the difference between two consecutive elements should be <code>4</code>. Seemingly a contradiction to the previous result. What goes wrong here?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500474302, "post_id": 45193406, "comment_id": 77354248, "body": "Because it&#39;s senseless to have both <code>const</code> and non-<code>const</code> when you take by value. That constness communicates no useful information to the caller. Either way, they both accept the same arguments and make the same guarantees to the user. That constness is only relevant to the implementation of the function, where it prevents you modifying the argument&#39;s copy if you want that protection."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 3, "last_activity_date": 1500474339, "creation_date": 1500474339, "answer_id": 45193533, "question_id": 45193406, "link": "https://stackoverflow.com/questions/45193406/why-same-function-signature-with-only-difference-that-the-other-get-the-param-by/45193533#45193533", "title": "Why same function signature with only difference that the other get the param by const is a redefenition?", "body": "<p>The rule is that top-level <code>const</code> qualifiers are discarded when the compiler looks at overloads. So <code>f(const int)</code> is treated as <code>f(int)</code>, which is a redefinition of the previous <code>f(int)</code>. The reason for this rule is that any argument that can be passed to <code>f(int)</code> can also be passed to <code>f(const int)</code>, because, as you say, the call copies the value.</p>\n\n<p>The reason that this doesn't apply to <code>f(const int&amp;)</code> is that the <code>const</code> here is not at the top level. From the caller's perspective, the difference between <code>f(const int&amp;)</code> and <code>f(int&amp;)</code> is that when you have, for example, <code>const int i = 3;</code>, you can pass that to <code>f(const int&amp;)</code> but you can't pass it to <code>f(int&amp;)</code>.</p>\n"}], "owner": {"reputation": 554, "user_id": 2671102, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d500b1f411c75363b4d051e74066bfbf?s=128&d=identicon&r=PG", "display_name": "TheLogicGuy", "link": "https://stackoverflow.com/users/2671102/thelogicguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500474339, "creation_date": 1500474070, "question_id": 45193406, "link": "https://stackoverflow.com/questions/45193406/why-same-function-signature-with-only-difference-that-the-other-get-the-param-by", "title": "Why same function signature with only difference that the other get the param by const is a redefenition?", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f(int t) {\n    std::cout &lt;&lt; 1 &lt;&lt; std::endl;\n}\n\nvoid f(const int t) {\n    std::cout &lt;&lt; 2 &lt;&lt; std::endl;\n}\n\nint main() {\n    const int i = 5;\n    f(i);\n    return 0;\n}\n</code></pre>\n\n<p>I get the following compilation error:</p>\n\n<pre><code>q2.cpp: In function \u2018void f(int)\u2019:\nq2.cpp:7:6: error: redefinition of \u2018void f(int)\u2019\n void f(const int t) {\n      ^\nq2.cpp:3:6: error: \u2018void f(int)\u2019 previously defined here\n void f(int t) {\n</code></pre>\n\n<p>Why it's considered redefenition if the following compiles fine?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f(int&amp; t) {\n    std::cout &lt;&lt; 1 &lt;&lt; std::endl;\n}\n\nvoid f(const int&amp; t) {\n    std::cout &lt;&lt; 2 &lt;&lt; std::endl;\n}\n\nint main() {\n     int i = 5;\n    f(i);\n    return 0;\n}\n</code></pre>\n\n<p>Is it because sending <code>int</code> by value copies it? If so have they made it on purpose because it's senseless to pass by value and make it const or is it some limitation of C++11?</p>\n"}, {"tags": ["c++", "c++14", "template-meta-programming"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1500474182, "post_id": 45193399, "comment_id": 77354148, "body": "How would you know if they had a unique return type or not? And what would you use this information for? (let&#39;s say <code>g</code> returned <code>float</code> unless both <code>x</code> and <code>y</code> were <code>tuple&lt;tuple&lt;char&gt;&gt;</code>, in which case it returns <code>int</code>?)"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1500474225, "post_id": 45193399, "comment_id": 77354187, "body": "What if the return type depended on an explicit template parameter, or the deduction of a template argument?"}, {"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1500474975, "post_id": 45193399, "comment_id": 77354813, "body": "Then these callables don&#39;t satisfy the constrain that the return type should not depend on argument types so I would expect a compiler error meaning &quot;you are trying to apply unique_result_of to a callable that can return different types depending on its argument types&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1500474247, "creation_date": 1500474247, "answer_id": 45193491, "question_id": 45193399, "link": "https://stackoverflow.com/questions/45193399/get-unique-return-type-of-template-function-generic-lambda/45193491#45193491", "title": "get unique return type of template function/generic lambda", "body": "<p>Unfortunately, <strong>there is no way of doing this at the moment</strong>, as there is no way of asking the compiler what the developer put after <code>-&gt;</code> in a <em>trailing return type</em>. Maybe <em>reflection</em> could make this possible in the future.</p>\n\n<p>Your best bet is either specifying the argument types or using a type that's implicitly convertible to anything else to simulate an invocation of the lambda:</p>\n\n<pre><code>struct any_type\n{\n    template &lt;typename T&gt;\n    constexpr operator T() { return *this; }\n};\n</code></pre>\n\n<p>This is not perfect as it doesn't work if the lambda's body tries to invoke a method that <code>any_type</code> doesn't \"mock\".</p>\n"}, {"comments": [{"owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "edited": false, "score": 0, "creation_date": 1500538062, "post_id": 45197229, "comment_id": 77383793, "body": "Thank you for this detailed answer. Indeed the main restriction is that it can&#39;t be used with template functions, even if they are wrapped in a generic lambda. This seems to be a dead end. As for the first caveat, it seems very minor: don&#39;t expect good results when asking for meaningless operations."}], "tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 4, "last_activity_date": 1500495684, "last_edit_date": 1500495684, "creation_date": 1500485111, "answer_id": 45197229, "question_id": 45193399, "link": "https://stackoverflow.com/questions/45193399/get-unique-return-type-of-template-function-generic-lambda/45197229#45197229", "title": "get unique return type of template function/generic lambda", "body": "<p>Your given example will work with the following, but there are some caveats, mentioned below</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;utility&gt;\n\nstruct ubiq\n{\n    template&lt;typename T&gt;\n    constexpr operator T&amp;() const;\n};\n\ntemplate&lt;size_t&gt;\nubiq make_ubiq();\n\nstruct broken_t;\n\ntemplate&lt;typename T&gt;\nstatic constexpr bool is_broken_v = std::is_same_v&lt;T, broken_t&gt;;\n\ntemplate&lt;typename T, size_t I0, size_t... I&gt;\nauto call(std::index_sequence&lt;I0, I...&gt;)\n    -&gt; decltype(std::declval&lt;T&gt;()(make_ubiq&lt;I0&gt;(), make_ubiq&lt;I&gt;()...));\n\ntemplate&lt;typename T&gt;\nauto call(std::index_sequence&lt;&gt;) -&gt; decltype(std::declval&lt;T&gt;()());\n\ntemplate&lt;typename T, size_t... I&gt;\nauto call(std::index_sequence&lt;I...&gt;) -&gt; broken_t;\n\ntemplate&lt;typename T, size_t N&gt;\nusing call_t = decltype(call&lt;T&gt;(std::make_index_sequence&lt;N&gt;{}));\n\ntemplate&lt;typename Void, typename...&gt;\nstruct collapse\n{\n    using type = broken_t;  \n};\n\ntemplate&lt;typename T&gt;\nstruct collapse&lt;std::enable_if_t&lt;!is_broken_v&lt;T&gt;&gt;, T&gt;\n{\n    using type = T;  \n};\n\ntemplate&lt;typename T, typename... Ts&gt;\nstruct collapse&lt;std::enable_if_t&lt;!is_broken_v&lt;T&gt;&gt;, T, broken_t, Ts...&gt; :\n    collapse&lt;void, T, Ts...&gt; {};\n\ntemplate&lt;typename... Ts&gt;\nstruct collapse&lt;void, broken_t, Ts...&gt; :\n    collapse&lt;void, Ts...&gt; {};\n\ntemplate&lt;typename T, typename... Ts&gt;\nstruct collapse&lt;std::enable_if_t&lt;!is_broken_v&lt;T&gt;&gt;, T, T, Ts...&gt; :\n    collapse&lt;void, T, Ts...&gt; {};\n\ntemplate&lt;typename... Ts&gt;\nusing collapse_t = typename collapse&lt;void, Ts...&gt;::type;\n\ntemplate&lt;typename, typename&gt;\nstruct unique_call;\n\ntemplate&lt;typename T, size_t... Ns&gt;\nstruct unique_call&lt;T, std::index_sequence&lt;Ns...&gt;&gt;\n{\n    using type = collapse_t&lt;call_t&lt;T, Ns&gt;...&gt;;\n};\n\ntemplate&lt;typename T, size_t N = 10&gt;\nusing unique_call_t = typename unique_call&lt;T, std::make_index_sequence&lt;N&gt;&gt;::type;\n</code></pre>\n\n<p>The following asserts passes</p>\n\n<pre><code>auto f = [](auto x, auto y, int z) -&gt; int {return 42;};\nauto g = [](double x, auto y) -&gt; float {return 4.2;};\n\nstatic_assert(std::is_same_v&lt;int, unique_call_t&lt;decltype(f)&gt;&gt;);\nstatic_assert(std::is_same_v&lt;float, unique_call_t&lt;decltype(g)&gt;&gt;);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8e2f789d4b0ad3ef\" rel=\"nofollow noreferrer\">Live</a></p>\n\n<p>The way this works is by \"scanning\" a type and seeing if any number of arguments can be used to call it. The upper limit of arguments has to be pre-specified, but realistically if someone gives me something with more than ten parameters, I'm just gonna pretend that it doesn't exist anyways :D</p>\n\n<p>The set of possible return types are then checked, if there are different types in there, or if there is none, the resulting type will be <code>broken_t</code>.</p>\n\n<pre><code>struct S\n{\n    int operator()(int);\n    float operator()(float);\n};\nstruct U {};\n\nstatic_assert(std::is_same_v&lt;broken_t, unique_call_t&lt;S&gt;&gt;);  // passes\nstatic_assert(std::is_same_v&lt;broken_t, unique_call_t&lt;U&gt;&gt;);  // passes\n</code></pre>\n\n<h3>Caveats</h3>\n\n<p>This method cannot differentiate non-existent <code>operator()</code> and one that is overloaded for the same argument count. The following type will be perceived as only having <code>int operator()()</code>.</p>\n\n<pre><code>struct S\n{\n    int operator()();\n    int operator()(int);\n    float operator()(float);\n};\nstatic_assert(std::is_same_v&lt;int, unique_call_t&lt;S&gt;&gt;);  // passes!??\n</code></pre>\n\n<p>I have yet to think of a method that <em>can</em> do this.</p>\n\n<p>Another problem is with templates</p>\n\n<pre><code>template&lt;typename T, std::enable_if_t&lt;std::is_integral&lt;T&gt;&gt;* = nullptr&gt;\nint operator()(T);\n</code></pre>\n\n<p>Since we cheated and created the type <code>ubiq</code> and used that as a placeholder for arguments, it won't play nice with templates, <code>T</code> won't be an integral in this case.</p>\n"}], "owner": {"reputation": 2302, "user_id": 1583122, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/61e3c0a15501f879955689b3cfa71ac5?s=128&d=identicon&r=PG", "display_name": "B&#233;renger", "link": "https://stackoverflow.com/users/1583122/b%c3%a9renger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1500495684, "creation_date": 1500474051, "question_id": 45193399, "link": "https://stackoverflow.com/questions/45193399/get-unique-return-type-of-template-function-generic-lambda", "title": "get unique return type of template function/generic lambda", "body": "<p>Is there a way to obtain the return type of a template function/generic lambda without having to specify the argument types?</p>\n\n<pre><code>template&lt;class F&gt;\nstruct unique_result_of {\n    using type = std::result_of_t&lt;F( *any valid parameter combination that F can be called upon* )&gt;;\n}\n\nauto f = [](auto x, auto y, int z) -&gt; int {};\nauto g = [](double x, auto y) -&gt; float {};\n\nusing return_type_f = typename unique_result_of&lt;decltype(f)&gt;::type; // should be int\nusing return_type_g = typename unique_result_of&lt;decltype(g)&gt;::type; // should be float\n</code></pre>\n\n<p>Of couse this should only work if all functions generated by the same template function name do have a unique return type.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "cmake"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500473994, "post_id": 45193167, "comment_id": 77354005, "body": "Perhaps it is this: <a href=\"https://stackoverflow.com/questions/30553318/cmake-cl-exe-is-not-able-to-compile-a-simple-test-program\" title=\"cmake cl exe is not able to compile a simple test program\">stackoverflow.com/questions/30553318/&hellip;</a>"}, {"owner": {"reputation": 37, "user_id": 7189967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9866654391e2b33e452ac2d01e2f55f?s=128&d=identicon&r=PG&f=1", "display_name": "andresouris", "link": "https://stackoverflow.com/users/7189967/andresouris"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500474301, "post_id": 45193167, "comment_id": 77354246, "body": "I already tried but it still does not work."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500474433, "post_id": 45193167, "comment_id": 77354342, "body": "Are you running this as a normal user in a Visual Studio 2015 command prompt ( 32 or 64 bit)?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1500474455, "post_id": 45193167, "comment_id": 77354367, "body": "<b><i>NMAKE : fatal error U1045: spawn failed : Invalid argument</i></b> Seems to be the problem. I am unfamiliar with this error."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1500496121, "post_id": 45193167, "comment_id": 77368004, "body": "<code>I am trying to compile my programme using microsoft visual studio 2015</code> - If so, why do you use &quot;CodeBlocks - NMake Makefiles&quot; <a href=\"https://cmake.org/cmake/help/v3.7/manual/cmake-generators.7.html\" rel=\"nofollow noreferrer\">CMake generator</a>? Use &quot;Visual Studio 14 2015&quot; generator instead."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 679124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65686db2c738678175a599e9454092bf?s=128&d=identicon&r=PG", "display_name": "qwerity", "link": "https://stackoverflow.com/users/679124/qwerity"}, "is_accepted": false, "score": 1, "last_activity_date": 1522247829, "creation_date": 1522247829, "answer_id": 49537404, "question_id": 45193167, "link": "https://stackoverflow.com/questions/45193167/cmake-and-visual-studio-2015-the-c-compiler-cl-exe-is-not-able-to-compile-a-si/49537404#49537404", "title": "CMake and Visual studio 2015 - The C compiler cl.exe is not able to compile a simple test program", "body": "<p>I solve it adding jom.exe to the path</p>\n"}, {"tags": [], "owner": {"reputation": 895, "user_id": 954747, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/5FWmv.jpg?s=128&g=1", "display_name": "Linh Dao", "link": "https://stackoverflow.com/users/954747/linh-dao"}, "is_accepted": false, "score": 0, "last_activity_date": 1581910430, "creation_date": 1581910430, "answer_id": 60255592, "question_id": 45193167, "link": "https://stackoverflow.com/questions/45193167/cmake-and-visual-studio-2015-the-c-compiler-cl-exe-is-not-able-to-compile-a-si/60255592#60255592", "title": "CMake and Visual studio 2015 - The C compiler cl.exe is not able to compile a simple test program", "body": "<p>I solved this problem for Visual Studio 2019 and QT 5.14.1 (Qt creator 4.11.0) by changing CMake generator in Tools > Options > Kits to Ninja. </p>\n"}], "owner": {"reputation": 37, "user_id": 7189967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9866654391e2b33e452ac2d01e2f55f?s=128&d=identicon&r=PG&f=1", "display_name": "andresouris", "link": "https://stackoverflow.com/users/7189967/andresouris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2740, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1581910430, "creation_date": 1500473461, "question_id": 45193167, "link": "https://stackoverflow.com/questions/45193167/cmake-and-visual-studio-2015-the-c-compiler-cl-exe-is-not-able-to-compile-a-si", "title": "CMake and Visual studio 2015 - The C compiler cl.exe is not able to compile a simple test program", "body": "<p>I am trying to compile my programme using microsoft visual studio 2015 combine with cmake on Qt creator and I get this error that I really do not know how to solve.</p>\n\n<pre><code>Running \"C:\\Program Files\\CMake\\bin\\cmake.exe C:/Users/SEVLH/Documents/sodis\"-GCodeBlocks - NMake Makefiles\" \"-DCMAKE_CXX_COMPILER:STRING=C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe\" \"-DCMAKE_C_COMPILER:STRING=C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe\" \"-DCMAKE_PREFIX_PATH:STRING=C:/Qt/Qt5.8.0/5.8/msvc2015_64\" \"-DQT_QMAKE_EXECUTABLE:STRING=C:/Qt/Qt5.8.0/5.8/msvc2015_64/bin/qmake.exe\"\" in C:\\Users\\SEVLH\\AppData\\Local\\Temp\\qtc-cmake-Yu2EZw.\n-- The C compiler identification is unknown\n-- The CXX compiler identification is unknown\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe -- broken\nCMake Error at C:/Program Files/CMake/share/cmake-3.8/Modules/CMakeTestCCompiler.cmake:51 (message):\nThe C compiler \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe\" is not able to compile a simple test program.\n\nIt fails with the following output:\n\nChange Dir: C:/Users/SEVLH/AppData/Local/Temp/qtc-cmake-Yu2EZw/CMakeFiles/CMakeTmp\n\n\n\nRun Build Command:\"nmake\" \"/NOLOGO\" \"cmTC_eda15\\fast\"\n\n\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\nmake.exe\" -f CMakeFiles\\cmTC_eda15.dir\\build.make \n/nologo -L CMakeFiles\\cmTC_eda15.dir\\build\n\nBuilding C object CMakeFiles/cmTC_eda15.dir/testCCompiler.c.obj\n\nC:\\PROGRA~2\\MICROS~1.0\\VC\\bin\\amd64\\cl.exe -o\nCMakeFiles\\cmTC_eda15.dir\\testCCompiler.c.obj -c\nC:\\Users\\SEVLH\\AppData\\Local\\Temp\\qtc-cmake-Yu2EZw\\CMakeFiles\\CMakeTmp\\testCCompiler.c\n\n\nNMAKE : fatal error U1045: spawn failed : Invalid argument\n\n Stop.\n\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\nmake.exe\"' : return code '0x2'\n\n Stop.\n\n\n\n\n\nCMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\nCMakeLists.txt:3 (project)\n</code></pre>\n"}, {"tags": ["c++", "methods", "compiler-errors"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1500473526, "post_id": 45193134, "comment_id": 77353606, "body": "<code>vectors_distance</code> is a <i>function-template</i> whose arguments does not favor <i>function Template Argument Deduction</i>. Did you provide the explicit template argument <code>vectors_distance&lt;T&gt;(numbers, numbers2)</code>?. Besides, I see no use of the template there. Perhaps, <a href=\"http://coliru.stacked-crooked.com/a/fe8387b63f6a1f90\" rel=\"nofollow noreferrer\"><b>this</b></a> is what you want?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500473547, "post_id": 45193134, "comment_id": 77353623, "body": "You do not supply the template argument <code>T</code> and it can&#39;t be deduced. In fact it appears unused."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1500473588, "post_id": 45193134, "comment_id": 77353665, "body": "1) <i>and get the error E0304</i> <b>Copy-paste</b> the error message. We don&#39;t memorize error codes (even if we were - error codes are implementation dependent, hence - would change from compiler to compiler). 2) <code>T</code> can never be deduced for your function, since you don&#39;t provide it explicitly, and your arguments don&#39;t depend on it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331308"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1500473641, "post_id": 45193134, "comment_id": 77353714, "body": "@AlgirdasPreid\u017eius I would to, but as I am German the error message is in german."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500473682, "post_id": 45193134, "comment_id": 77353747, "body": "You should be aware that <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\"><code>std::vector::shrink_to_fit</code></a> is a non-binding request. In most implementation it will reduce capacity to a value it would naturally increase to through repeated <code>push_back</code>. In this use case, these implementations would never do anything, since <code>aux</code> is already as that capacity. Instead, consider using <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>std::vector::reserve</code></a> before inserting into it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1500473706, "post_id": 45193134, "comment_id": 77353763, "body": "@Unnamed Then translate it to English. Read point 2."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1500473786, "post_id": 45193134, "comment_id": 77353836, "body": "Better still, give us the German, along with a translation of the human readable parts. We too can use Google Translate."}, {"owner": {"reputation": 513, "user_id": 5105585, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-MQDERXC5FUk/AAAAAAAAAAI/AAAAAAAAASU/RUhJXR4ae60/photo.jpg?sz=128", "display_name": "Viktoria", "link": "https://stackoverflow.com/users/5105585/viktoria"}, "edited": false, "score": 0, "creation_date": 1500474030, "post_id": 45193134, "comment_id": 77354035, "body": "I think @Unnamed means something like that <a href=\"https://www.quantnet.com/threads/compile-time-error-from-implementing-templates.29120/\" rel=\"nofollow noreferrer\">quantnet.com/threads/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331308"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1500474440, "post_id": 45193134, "comment_id": 77354348, "body": "@AlgirdasPreid\u017eius did it, see edit im my question. For the second point: okay, how can I fix it?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500474707, "post_id": 45193134, "comment_id": 77354582, "body": "@Unnamed No. That&#39;s not how templates work. You aren&#39;t using it for anything, <code>std::accumulate</code> deduces it&#39;s own template arguments. Even if you supplied the argument yourself, the only type you could correctly pass is <code>double</code>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1500474892, "post_id": 45193134, "comment_id": 77354739, "body": "@Unnamed What does the book, you are learning C++ from, tells you on the topic on templates? Either use generic type, in the function, instead of <code>double</code>, or drop the template entirely, if the only type, the function makes sense on is <code>double</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8331308"}, "edited": false, "score": 0, "creation_date": 1500552581, "post_id": 45194665, "comment_id": 77394516, "body": "Your second advise does not return the same calculation as my method above."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1500556479, "post_id": 45194665, "comment_id": 77397707, "body": "Yeah, okay.   Wrote too fast.  Order of last two arguments was wrong."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1500556392, "last_edit_date": 1500556392, "creation_date": 1500477252, "answer_id": 45194665, "question_id": 45193134, "link": "https://stackoverflow.com/questions/45193134/error-at-the-list-of-arguments-of-a-method/45194665#45194665", "title": "Error at the list of arguments of a method", "body": "<p>The reason is that you have specified the function as a template, but neither of the function arguments are related to the template argument.</p>\n\n<p>If you want the function to only work for <code>std::vector&lt;double&gt;</code>, the function doesn't need to be a template.</p>\n\n<pre><code>double  vectors_distance(vector&lt;double&gt; vec1, vector&lt;double&gt; vec2)\n{\n     // same body you have\n}\n</code></pre>\n\n<p>If you want the function to work for a <code>std::vector&lt;T&gt;</code> (assuming <code>T</code> is a type that can be supplied to <code>pow()</code>, etc)  then keep it as a template, and change <code>double</code> to <code>T</code> within the function.  For example;</p>\n\n<pre><code>template &lt;typename T&gt;\nT vectors_distance(vector&lt;T&gt; vec1, vector&lt;T&gt; vec2)\n{\n      // same function body, but replace \"double\" by \"T\" everywhere\n}\n</code></pre>\n\n<p>A couple of other comments.</p>\n\n<p>Firstly, it is usually better to pass <code>std::vector</code> arguments by <code>const</code> reference, not by value.</p>\n\n<p>Second, it is not necessary to build a temporary vector to hold intermediate results.  Simply use a better algorithm.  For example the non-template version might be written</p>\n\n<pre><code>double  vectors_distance(const vector&lt;double&gt; &amp;vec1, const vector&lt;double&gt; &amp;vec2)\n{\n     return std::sqrt(\n              std::inner_product(vec1.begin(), vec1.end(), vec2.begin(), 0.0,\n                                 std::plus&lt;double&gt;(),\n                                 [](double e1, double e2) {return (e1-e2)*(e1-e2);}\n                                )\n             );\n}\n</code></pre>\n\n<p>Read the documentation for <code>std::inner_product()</code> to see what this does.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331308"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1180, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500556392, "creation_date": 1500473399, "last_edit_date": 1500474224, "question_id": 45193134, "link": "https://stackoverflow.com/questions/45193134/error-at-the-list-of-arguments-of-a-method", "title": "Error at the list of arguments of a method", "body": "<p>Using <a href=\"http://www.cplusplus.com/forum/general/209784/\" rel=\"nofollow noreferrer\">this thread as help</a> I want to calculate the distance between two vectors. So my method to do this will be: </p>\n\n<pre><code>template &lt;typename T&gt;\ndouble  vectors_distance(vector&lt;double&gt; vec1, vector&lt;double&gt; vec2) {\n    std::vector&lt;double&gt; aux;\n\n    std::transform(vec1.begin(), vec1.end(), vec2.begin(), std::back_inserter(aux), \n        [](double element1, double element2) {return pow((element1 - element2), 2); \n    });\n    aux.shrink_to_fit();\n\n    return  std::sqrt(std::accumulate(aux.begin(), aux.end(), 0.0));\n}\n</code></pre>\n\n<p>In another method I create two <code>vector&lt;double&gt; numbers, numbers1</code> and fill them up with some values, like this: </p>\n\n<pre><code>stringstream ss(coordSynth);\n        double num;\n        while (ss &gt;&gt; num) {\n            numbers.push_back(num);\n            cout &lt;&lt; typeid(numbers).name() &lt;&lt; endl;\n        }\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As background knowledge: <code>coordSynth</code> is a string, which contains <code>doubles</code> as values (ie: \"0.0, 45.3, 2.0\"). For <code>number1</code> happens exactly the same (as for <code>number</code>).\nFine, now I'm calling <code>vectors_distance(numbers, numbers1);</code> and get the error <code>E0304 No instance of function template \"vectors_distance\" matches the argument list.</code>. But how? My method has exactly two parameters and I put in there also two vectors? </p>\n"}, {"tags": ["c++", "image-processing", "buffer", "rawimage"], "comments": [{"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1500473451, "post_id": 45193089, "comment_id": 77353534, "body": "I would suggest using OpenCV - <a href=\"http://www.opencv.org/\" rel=\"nofollow noreferrer\">opencv.org</a> but there are plenty of libs that does that..."}, {"owner": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "reply_to_user": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1500482019, "post_id": 45193089, "comment_id": 77359825, "body": "@LeonardoAlvesMachado using an entire image processing framework to just save images to a file sounds pretty overkill to me ;)"}, {"owner": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 0, "creation_date": 1500482108, "post_id": 45193089, "comment_id": 77359875, "body": "why don&#39;t you just google &quot;save jpeg c++&quot;?"}, {"owner": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 1, "creation_date": 1500482119, "post_id": 45193089, "comment_id": 77359879, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6044543/save-pixel-array-to-jpeg-image-file-c\">save pixel array to jpeg image file c++</a> and multiple other questions"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 0, "creation_date": 1500492999, "post_id": 45193089, "comment_id": 77366293, "body": "@Piglet: the JPEG library is as big as the framework itself ;-)"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1500493387, "post_id": 45193089, "comment_id": 77366511, "body": "It may also be that the camera SDK has resources to save files."}, {"owner": {"reputation": 1, "user_id": 8332132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6546ae0279a96dc371e46381edfe6698?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/8332132/gab"}, "edited": false, "score": 0, "creation_date": 1500644931, "post_id": 45193089, "comment_id": 77444723, "body": "Thanks a lot for your suggestions. I solved it using &#39;ofsstream&#39; and writing the buffer into a file."}], "answers": [{"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 0, "last_activity_date": 1500493244, "creation_date": 1500493244, "answer_id": 45199646, "question_id": 45193089, "link": "https://stackoverflow.com/questions/45193089/loading-and-saving-to-file-an-image-from-a-raw-data-memory-structure-in-c/45199646#45199646", "title": "Loading and saving to file an image from a raw data memory structure in c++", "body": "<p>You can integrate the libjpeg or libpng freewares, which are the most complete, but be ready for hard work.</p>\n"}], "owner": {"reputation": 1, "user_id": 8332132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6546ae0279a96dc371e46381edfe6698?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/8332132/gab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500493244, "creation_date": 1500473296, "question_id": 45193089, "link": "https://stackoverflow.com/questions/45193089/loading-and-saving-to-file-an-image-from-a-raw-data-memory-structure-in-c", "title": "Loading and saving to file an image from a raw data memory structure in c++", "body": "<p>I have a piece of code that retrieves images from a camera and store them in a structure. The structure provides the pointer to the first pixel of the image as well as the image dimension, its width and height.\nMy question is: how can I save the image stored in the structure in a say .jpg or .png file to be displayed and processed ?</p>\n\n<p>Thanks in advance !</p>\n"}, {"tags": ["c++", "count", "iterator", "metaprogramming"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500473404, "post_id": 45192991, "comment_id": 77353505, "body": "Can you elaborate on what is too complex? It seems to me like what you are trying to do is a textbook example of a set intersection. I also don&#39;t understand what the title of your question means."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1500473505, "post_id": 45192991, "comment_id": 77353585, "body": "Boost has <a href=\"http://www.boost.org/doc/libs/1_50_0/libs/iterator/doc/counting_iterator.html\" rel=\"nofollow noreferrer\">counting_iterator</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1500473575, "post_id": 45192991, "comment_id": 77353650, "body": "If you want to build a histogram a <code>std::map</code> works really well for that and only requires a linear traversal of the data set to populate it."}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500473863, "post_id": 45192991, "comment_id": 77353908, "body": "@Fran&#231;oisAndrieux The too complex part is the construction of a new vector instead of just counting."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500474102, "post_id": 45192991, "comment_id": 77354086, "body": "@AdamHunyadi You can write your own output iterator for this. See the <a href=\"http://en.cppreference.com/w/cpp/concept/OutputIterator\" rel=\"nofollow noreferrer\">OutputIterator</a> concept page at cppreference.com. You simply have to implement the four operations specified there and the two operations specified in the Iterator concept page. You can specialise <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_traits\" rel=\"nofollow noreferrer\"><code>std::iterator_traits</code></a> for your new iterator type."}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500474107, "post_id": 45192991, "comment_id": 77354090, "body": "@NathanOliver I want something like 50 different histograms with some data-filtering reused."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500474194, "post_id": 45192991, "comment_id": 77354157, "body": "@AdamHunyadi That shouldn&#39;t be to hard to do.  You could do a vector of maps or map of maps depending on how you wan to access the different histograms."}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500474291, "post_id": 45192991, "comment_id": 77354241, "body": "@Fran&#231;oisAndrieux can you point me to an example code of how I write something that is an OutputIterator?"}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500474399, "post_id": 45192991, "comment_id": 77354313, "body": "@NathanOliver I don&#39;t think the implementation is relevant there. Using vectors for this kind of problem is much more efficient anyway."}], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1500475845, "post_id": 45193949, "comment_id": 77355511, "body": "Sugoi! This is what I was looking for, thank you. :)"}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1500476445, "post_id": 45193949, "comment_id": 77356041, "body": "Why the change? Was something wrong with the first code?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1500476673, "post_id": 45193949, "comment_id": 77356226, "body": "@AdamHunyadi: I added <code>operator++(int)</code> to allow <code>myCounter++</code>."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1500475955, "last_edit_date": 1500475955, "creation_date": 1500475297, "answer_id": 45193949, "question_id": 45192991, "link": "https://stackoverflow.com/questions/45192991/is-there-a-default-counter-object-in-stl/45193949#45193949", "title": "Is there a default counter object in STL", "body": "<p>You could <em>almost</em> use a plain <code>int</code>.</p>\n\n<p><code>std::set_intersection</code> calls two operators on the output iterator, unary <code>operator*</code> and <code>operator++</code>. Calling the latter on <code>int</code> is how you count, but you need a wrapper to ignore <code>operator*</code>. </p>\n\n<p>How do you ignore <code>operator*</code>? It must return something which allows <code>*iter = value</code>. Well, your wrapper could return <code>*this</code>. That just means <code>operator=</code> also gets called on your wrapper. That again can just return <code>*this</code>. </p>\n\n<p>So, to put it all together :</p>\n\n<pre><code>class counter {\n   size_t count = 0; // Let's count a bit further\npublic:\n   counter&amp; operator++() { ++count; return *this; }    // ++X\n   counter&amp; operator++(int) { ++count; return *this; } // X++\n   counter&amp; operator*() { return *this; }\n   template&lt;typename T&gt; counter&amp; operator=(T&amp;&amp;) { return *this; }\n   counter&amp; operator=(counter&amp;) = default; // Don't break normal assignment.\n\n   operator size_t() const { return count; }\n};\n</code></pre>\n"}], "owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 45193949, "answer_count": 1, "score": 1, "last_activity_date": 1500475955, "creation_date": 1500473057, "question_id": 45192991, "link": "https://stackoverflow.com/questions/45192991/is-there-a-default-counter-object-in-stl", "title": "Is there a default counter object in STL", "body": "<p>I have a task where I have to count how many of different kinds of objects there are and save the result to later create graphs out of them. What I am doing is creating sorted vectors holding elements that satisfy different conditions, and calling <code>std::set_intersection</code> on them to find how many of them satisfy a composite statement. For example:</p>\n\n<pre><code>// Count round and black objects\nstd::vector&lt;SomeObject*&gt; roundAndBlackObjects;\nstd::set_intersection(roundObjects.begin(), roundObjects.end(),\n    blackObjects.begin(), blackObjects.end(), \n    std::back_inserter(roundAndBlackObjects));\nstd::size_t numRoundAndBlackObjects = roundAndBlackObjects.size();\n</code></pre>\n\n<p>This seems to be too complex though. I only wanted to count the common elements after all. Is there a way to omit the unnecessary vector push_backs? Is there an easy way to do this? Something like an output iterator generator, that creates a dummy output iterator that does not construct anything, just counts the calls to its increments. That way I could do something like this:</p>\n\n<pre><code>// Count round and black objects\nstd::size_t numRoundAndBlackObjects = 0;\nstd::set_intersection(roundObjects.begin(), roundObjects.end(),\n    blackObjects.begin(), blackObjects.end(),\n    std::iterator_callback_counter&lt;SomeObject*&gt;(numRoundAndBlackObjects));\n</code></pre>\n\n<p>If there is no such thing, is there an easy way to create such a meta-object?</p>\n"}, {"tags": ["c++", "c", "api-design"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500474383, "post_id": 45192937, "comment_id": 77354301, "body": "In such a situation, I finally adopted the principle of the OpenGL API. Our simulation system got a context object (actually a <code>struct</code>) which stores the current states. There are methods to get/set states. Other functions (to perform simulation) rely on these states. For new features, we may add states (and get()/set()). For backwards compatibility, we assign a default value (in constructor of context <code>struct</code>) so that the resp. functions work as before if the new state is never touched."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500474529, "post_id": 45192937, "comment_id": 77354435, "body": "Don&#39;t use multiple parameters but declare your enum members as flags (powers of 2). A common notation would be <code>1&lt;&lt;0</code>, <code>1&lt;&lt;1</code>, <code>1&lt;&lt;2</code>, <code>1&lt;&lt;3</code> and so on. This is often seen <i>in the wild</i>."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5368518"}, "is_accepted": true, "score": 1, "last_activity_date": 1500477289, "last_edit_date": 1500477289, "creation_date": 1500474925, "answer_id": 45193798, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead/45193798#45193798", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>Adding meaningless arguments that you plan to implement some day (or maybe never) is bug prone. Imagine that you have an argument <code>option4</code> that is ignored by the function and your program works just fine. In some time later you add meaning to that argument and for some unknown reason your program becomes unstable. That may happen if in some places you call your function giving that argument some random values and it went unnoticed in the past since the <code>option4</code> was ignored. Now, how do you find out in which calls it has a good value and in which it is the value that you gave it by mistake before it was implemented? And moreover, what if there is not just one such argument but a few of them?</p>\n\n<p>Creating a structure, which will contain all the extra arguments and passing it to the function seems to be a better solution:</p>\n\n<pre><code>struct args_ex\n{\n    bool foo;\n    bool bar;\n    bool spam;\n\n    // add more later\n};\n\nvoid your_function (... , const struct args_ex * extra)\n{\n    ...\n\n    if (extra)\n        // Do something with an extra arguments\n}\n</code></pre>\n\n<p>Later you will add members to that structure and modify the function. In places where you call this function with only some arguments being passed, you initialize the entire structure to zero and the members you need.</p>\n\n<pre><code>struct args_ex extra =\n{\n    .foo = true,\n    .bar = true,\n};\n\nyour_function (... , &amp; extra);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1500479617, "creation_date": 1500479617, "answer_id": 45195494, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead/45195494#45195494", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>In order to avoid passing all your parameters in one go, you could create an object. You could then follow the advice in this <a href=\"https://people.mpi-inf.mpg.de/~jblanche/api-design.pdf\" rel=\"nofollow noreferrer\">pdf</a>, so then you could write</p>\n\n<pre><code>MyObject myObject(someParams);\nmyObject.setOption1(foo);\nmyObject.setOption2(bar);\n\nmyObject.doFunction();\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3456599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a283a30c20435118ecae7f054a70476e?s=128&d=identicon&r=PG&f=1", "display_name": "calofr", "link": "https://stackoverflow.com/users/3456599/calofr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45193798, "answer_count": 2, "score": 1, "last_activity_date": 1500479617, "creation_date": 1500472936, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>I currently need to extend a function's API that is very often used in my aplication with a new (boolean) parameter. I also foresee that, as more features are added to the program, the same function may (not yet certain) need more functionality, that (if needed) can be controled by boolean parameters. The extra functionality will only be needed by new function calls, not by the existing ones.</p>\n\n<p>So, to simplify its extension in the future, I plan on adding two or tree extra enumerated parameters to its API, so that new features can be added without chasing and editing all fuction calls everytime something is added. So, instead of extending to this:</p>\n\n<pre><code>function(currparams..., bool option1, bool option2, bool option3, bool option4);\n</code></pre>\n\n<p>It would extend to this:</p>\n\n<pre><code>typedef enum{\n    noopt,\n    opt1,\n    opt2,\n    opt3,\n    ...\n}APIoptions;\n\nfunction(currparams..., APIoptions option1, APIoptions option2);\n</code></pre>\n\n<p>As long as the enumerated arguments I add now are enough for the future needs, this should make extending the API easier. However I don't recall seing this type of programming in the wild and would like to understand its disadvantages and potential problems and why it wouldn't be more often used.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "c++", "c", "android-ndk", "c-libraries"], "owner": {"reputation": 8243, "user_id": 5045201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qB7Z8.jpg?s=128&g=1", "display_name": "Sapnesh Naik", "link": "https://stackoverflow.com/users/5045201/sapnesh-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1500472374, "creation_date": 1500472374, "question_id": 45192677, "link": "https://stackoverflow.com/questions/45192677/android-ndk-native-library-for-usb-storage-management", "title": "Android NDK| native library for USB storage management.", "body": "<p>I am trying to build an app which involves formatting usb drives, changing the partition scheme and creating partitions. \nAfter a lot of research I found that Android SDK does not provide tools or ways to access the information needed to do such tasks even with root.</p>\n\n<p>So is there any C/C++ library which I could use? Or is there a better way? </p>\n"}, {"tags": ["c++", "input", "stream"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1500472550, "post_id": 45192601, "comment_id": 77352757, "body": "Are you certain that the strings are identical? Whitespace in particular can be very difficult to spot."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500472686, "post_id": 45192601, "comment_id": 77352877, "body": "If you are launching your application with an IDE or debugger, the working directory may not be the same as the executable&#39;s location."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1500472743, "post_id": 45192601, "comment_id": 77352939, "body": "You should learn to use <a href=\"http://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow noreferrer\">references</a>. You are making a whole bunch of unnecessary copies of your strings."}], "answers": [{"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1500529697, "post_id": 45193285, "comment_id": 77378603, "body": "These are C++ <code>std::string</code>s, not C strings."}, {"owner": {"reputation": 1, "user_id": 8099499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gka4q.jpg?s=128&g=1", "display_name": "M. Dehnel", "link": "https://stackoverflow.com/users/8099499/m-dehnel"}, "edited": false, "score": 0, "creation_date": 1500557790, "post_id": 45193285, "comment_id": 77398921, "body": "That link was very good but has me even more confused.  All my declarations are using C++ approach &quot;string variable;&quot;  and according to the link copying a string is C++ is as I have done it with the &#39;=&#39; sign.  It makes me believe it has something to do with the compile error I get when I use this approach: &#39;code&#39; femn.open(cCCA.get_EMNfn()); &#39;code&#39;   I get a compile error C2664 ...cannot convert parameter 1 from &#39;class std::basic_string,class std::allocator &gt;&#39; to &#39;const char *&#39;"}], "tags": [], "owner": {"reputation": 121, "user_id": 7330069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0547e23814878c91d82de171b8d873e0?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7330069/john"}, "is_accepted": false, "score": -1, "last_activity_date": 1500473783, "creation_date": 1500473783, "answer_id": 45193285, "question_id": 45192601, "link": "https://stackoverflow.com/questions/45192601/opening-a-file-where-the-filename-is-a-stored-variable/45193285#45193285", "title": "opening a file where the filename is a stored variable", "body": "<p>You are not assigning strings correctly!string variables  should not be assigned with <code>=</code> operator . <a href=\"http://cs.stmarys.ca/~porter/csc/ref/c_cpp_strings.html\" rel=\"nofollow noreferrer\">Here</a> is a reference for working with strings.  </p>\n\n<p>There are lots of ways for doing your task here is one:</p>\n\n<p><code>#include &lt;string.h&gt;\n...\nstrcpy(CcaAna::EMNfn,s);//instead of CcaAna::EMNfn=s;</code></p>\n\n<p>maybe this might work,if not check the link and use a correct way to work with strings.</p>\n\n<p>cheers </p>\n"}], "owner": {"reputation": 1, "user_id": 8099499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gka4q.jpg?s=128&g=1", "display_name": "M. Dehnel", "link": "https://stackoverflow.com/users/8099499/m-dehnel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500559106, "creation_date": 1500472188, "last_edit_date": 1500559106, "question_id": 45192601, "link": "https://stackoverflow.com/questions/45192601/opening-a-file-where-the-filename-is-a-stored-variable", "title": "opening a file where the filename is a stored variable", "body": "<p>I have a class where I store a filename that a user has provided:</p>\n\n<pre><code>string EMNfn;               // IDF file EMN name\n\n// IDF file EMN name\nvoid CcaAna::put_EMNfn(string s)\n{\n    CcaAna::EMNfn = s;\n}\n\nstring CcaAna::get_EMNfn()\n{\n    return EMNfn;\n}\n</code></pre>\n\n<p>However, when I try to open the file, and I know it exists in the current directory that I am using with the following:</p>\n\n<pre><code>femn.open(cCCA.get_EMNfn());\n</code></pre>\n\n<p>I get a compile error C2664 ...cannot convert parameter 1 from 'class std::basic_string,class std::allocator >' to 'const char *'</p>\n\n<p>When I try using:</p>\n\n<pre><code>femn.open(cCCA.get_EMNfn().c_str());\n</code></pre>\n\n<p>it compiles but trips my error code:</p>\n\n<pre><code>if(!femn)\n{\n    cout &lt;&lt; \"Open of Original EMN file failed\\n\";\n    cout &lt;&lt; \"EMN file: \" &lt;&lt; cCCA.get_EMNfn() &lt;&lt; endl;\n    cout &lt;&lt; \"Press any key to exit\" &lt;&lt; endl;\n    ch = getchar();\n    return 1;\n}\n</code></pre>\n\n<p>However when I type it in directly everthing works fine:</p>\n\n<pre><code>femn.open(\"262-003841-7-23.emn\");\n</code></pre>\n\n<p>running out of ideas is there another way to open the stream?</p>\n\n<p><strong>molbdnilo - I think you are on to something (see below)</strong></p>\n\n<p>OK I added the two COUT lines after and I have included the OUTPUT below the code:</p>\n\n<pre><code>cout &lt;&lt; \"EMN file: \" &lt;&lt; cCCA.get_EMNfn() &lt;&lt; endl;\n//  THIS WORKS\n//  femn.open(\"262-003841-7-23.emn\");\n    femn.open(cCCA.get_EMNfn().c_str());\n//  femn.open(cCCA.get_EMNfn());\n\ncout &lt;&lt; \"this works: \" &lt;&lt; \"262-003841-7-23.emn\" &lt;&lt; endl;\ncout &lt;&lt; \"*****\" &lt;&lt; cCCA.get_EMNfn() &lt;&lt; \"*****\" &lt;&lt; endl;\n</code></pre>\n\n<p>OUTPUT:<br>\nPROCESSING USER INPUT FILE ...<br>\nEMN file: \"262-003841-7-23.emn\"<br>\nthis works: 262-003841-7-23.emn<br>\n*****\"262-003841-7-23.emn\"*****<br>\nOpen of Original EMN file failed<br>\nEMN file: \"262-003841-7-23.emn\"<br>\nPress any key to exit  </p>\n\n<p>What I am seeing is that the stored string has \" around it.  Is there a C++ way to remove those?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500472202, "post_id": 45192582, "comment_id": 77352450, "body": "Have you considered <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>? It allows you to use arrays just like any other object."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500472207, "post_id": 45192582, "comment_id": 77352457, "body": "If you use <code>std::array</code> it becomes pretty easy."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1500472293, "post_id": 45192582, "comment_id": 77352540, "body": "The code snippet tool doesn&#39;t work for c++. It&#39;s mostly for web stuff that can be rendered in browser."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1500472306, "post_id": 45192582, "comment_id": 77352549, "body": "You should return by reference, preferably const, not by pointer (which is needless if it cannot be null) or value (the caller can make their own copy if they need one for some reason). <code>std::array</code> can do either, though"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1500472447, "creation_date": 1500472447, "answer_id": 45192707, "question_id": 45192582, "link": "https://stackoverflow.com/questions/45192582/is-there-any-way-to-return-2-dimensional-array-as-a-member-variable-via-getter/45192707#45192707", "title": "Is there any way to return 2 dimensional array as a member variable via getter?", "body": "<p>Ugly syntax:</p>\n\n<pre><code>class Tile\n{\nprivate:\n    char mBlockTile[22][24];\npublic:\n    char (&amp;getBlock()) [22][24] { return mBlockTile; }\n};\n</code></pre>\n\n<p>With <code>using</code></p>\n\n<pre><code>class Tile\n{\nprivate:\n    char mBlockTile[22][24];\n    using blockType = char[22][24];\npublic:\n    blockType&amp; getBlock() { return mBlockTile; }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 5, "last_activity_date": 1500472953, "last_edit_date": 1500472953, "creation_date": 1500472464, "answer_id": 45192717, "question_id": 45192582, "link": "https://stackoverflow.com/questions/45192582/is-there-any-way-to-return-2-dimensional-array-as-a-member-variable-via-getter/45192717#45192717", "title": "Is there any way to return 2 dimensional array as a member variable via getter?", "body": "<p>You should use <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> if you can:</p>\n\n<pre><code>#include &lt;array&gt;\n\nclass Tile {\n    std::array&lt;std::array&lt;char, 24&gt;, 22&gt; mBlockTile;\n    auto&amp; GetBlockTile() { // return a reference, you don't want a copy\n        return mBlockTile;\n    }\n};\n</code></pre>\n\n<hr>\n\n<p>If you cannot use <code>std::array</code>, the old way (prior to c++11 and <code>auto</code> / <code>decltype</code>) would be:</p>\n\n<pre><code>char (*GetBlockTile())[24] {\n    return mBlockTile;\n}\n</code></pre>\n\n<p>Or a reference:</p>\n\n<pre><code>char (&amp;GetBlockTile())[22][24] {\n    return mBlockTile;\n}\n// (freaky) const version\nconst char (&amp;GetBlockTile() const)[22][24] {\n    return mBlockTile;\n}\n</code></pre>\n\n<p>...at which point you probably want to start using a <code>typedef</code>:</p>\n\n<pre><code>typedef char tBlockTile[22][24];\ntBlockTile mBlockTile;\n\nconst tBlockTile&amp; g() const {\n    return mBlockTile;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8332086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab9d2331fe8fc4b1b7eb6d2bcc471af?s=128&d=identicon&r=PG&f=1", "display_name": "user8332086", "link": "https://stackoverflow.com/users/8332086/user8332086"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "closed_date": 1500487393, "answer_count": 2, "score": 0, "last_activity_date": 1500472953, "creation_date": 1500472122, "last_edit_date": 1500472324, "question_id": 45192582, "link": "https://stackoverflow.com/questions/45192582/is-there-any-way-to-return-2-dimensional-array-as-a-member-variable-via-getter", "closed_reason": "Duplicate", "title": "Is there any way to return 2 dimensional array as a member variable via getter?", "body": "<p>I'm working on my personal project.\nWhat i wanna know is this</p>\n\n<pre><code>class Tile\n{\nprivate:\n    char mBlockTile[22][24];\n</code></pre>\n\n<p>I just wanna return that 2D array through getter, like</p>\n\n<pre><code>char* GetBlockTile()\n{\n  return mBlockTile;\n}\n</code></pre>\n\n\n\n<p>But i totally don't know how to do this.\nI modified data type of the function many times and tried to return 2D array,\nbut it doesn't work. :(\nPlease help as quickly as possible.\nThanks!</p>\n"}, {"tags": ["c++", "qt", "coordinates", "qgraphicsitem"], "comments": [{"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1500473063, "post_id": 45192453, "comment_id": 77353233, "body": "I suggest subclassing the class and overriding the <a href=\"http://doc.qt.io/qt-4.8/qgraphicsrectitem.html#paint\" rel=\"nofollow noreferrer\">paint function</a> to also draw the coordinates of each item. You&#39;ll learn a lot about coordinate systems that way. Also, check out the <a href=\"http://doc.qt.io/qt-4.8/qgraphicsitem.html#pos\" rel=\"nofollow noreferrer\">pos()</a> that is set for both items. Finally, what are the values for x,y,width,height?"}, {"owner": {"reputation": 1, "user_id": 5199570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84faa5f7a666bbb3734e028d69eed0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Vi Pie", "link": "https://stackoverflow.com/users/5199570/vi-pie"}, "reply_to_user": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1500474338, "post_id": 45192453, "comment_id": 77354269, "body": "y,widht,height are values depending on the viewport size. In this particular case y = viewport_height/2, width = viewport_width - 2*a_margin_value and height = viewport_height/2-a_margin. x = a_margin_value, again, thus I have the parent rect item in the position that&#39;s shown in the figure. I don&#39;t understand why the child isn&#39;t positioned in the center of the parent, as the documentation states."}, {"owner": {"reputation": 1, "user_id": 5199570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84faa5f7a666bbb3734e028d69eed0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Vi Pie", "link": "https://stackoverflow.com/users/5199570/vi-pie"}, "reply_to_user": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1500474832, "post_id": 45192453, "comment_id": 77354686, "body": "I&#39;ve followed your suggestion and printed the values for qRect (the parent) pos and qRect2 (the child) pos. The parent pos is (0,0)... don&#39;t really know why, since I have &quot;told&quot; the constructor to put the rect in (x,y). If I eventually call qRect-&gt;setPos(x,y) it works. Still, I wonder why."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1500474935, "post_id": 45192453, "comment_id": 77354767, "body": "<b>I have &quot;told&quot; the constructor to put the rect in (x,y)</b> - the constructor is setting the local coordinates of the item, not the coordinates of the scene. When you add the item (parent) to the scene, it will start at (0,0) in scene coordinates, but it&#39;s local coordinates won&#39;t have changed."}, {"owner": {"reputation": 1, "user_id": 5199570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84faa5f7a666bbb3734e028d69eed0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Vi Pie", "link": "https://stackoverflow.com/users/5199570/vi-pie"}, "reply_to_user": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 1, "creation_date": 1500477410, "post_id": 45192453, "comment_id": 77356785, "body": "Ok. I think i got it: (x,y) define the position of the rendered QRectF inside the item. The item will be placed in the scene center (0,0) (upper left corner in this case) and thus its local coordinate system starts there as well. If I call the constructor passing 0,0 and then eventually call setPos(x,y) I get the whole item put in (x,y) which will be the center of the new local coords system."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1500480976, "post_id": 45192453, "comment_id": 77359232, "body": "Yup, that sounds about right. I personally prefer defining all items inherited from <code>QGraphicsItem</code> (or <code>QGraphicsObject</code> if you want signal and slots) and setting their bounding rect so that their local centre point is at (0,0) by using (-width/2, -height/2, width, height). setPos(0,0) will now place the origin at the centre of the parent item, in relation to its parent, rather than at the top left."}], "owner": {"reputation": 1, "user_id": 5199570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84faa5f7a666bbb3734e028d69eed0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Vi Pie", "link": "https://stackoverflow.com/users/5199570/vi-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500471795, "creation_date": 1500471795, "question_id": 45192453, "link": "https://stackoverflow.com/questions/45192453/qgraphicsrectitem-local-coordinate-not-working-in-qt-4-8", "title": "QGraphicsRectItem local coordinate not working in Qt 4.8", "body": "<p><br>\nI'm trying to write a simple program in C++ using Qt 4.8 and I got stuck with this issue:<br>\nI want a QGraphicsRectItem to be the parent of another one. When the parent is showed, anyway, the child is shown outside, as if it was using scene coordinates instead of parent's local coordinates.<br>\nHere is my code</p>\n\n<pre><code>    QGraphicsRectItem* qRect = new QGraphicsRectItem(x,y,width,height);\nQGraphicsRectItem* qRect2 = new QGraphicsRectItem(0,0,100, 100, qRect);\n    qRect2-&gt;setParentItem(qRect);\n\n_pcChooseMenuScene-&gt;addItem(qRect);\n_game.getGameGraphicsView()-&gt;setScene(_pcChooseMenuScene);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/r1lDg.png\" rel=\"nofollow noreferrer\">The output Image</a>\n<br>\nHave I misunderstood the parent/child relationship, does it not work in this case or is this a version issue?<br>\nThanks in advance for your replies.</p>\n"}]