[{"tags": ["c++", "c++11", "math", "random", "uniform-distribution"], "comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1511391884, "post_id": 47445158, "comment_id": 81845675, "body": "Yes, all of those outputs are possible and no, the likely hood isn&#39;t different between 1 and 3"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1511391889, "post_id": 47445158, "comment_id": 81845679, "body": "Sure a random number generator can produce those results. A 100-sided die can come up with 5 1s in a row, or any other sequence. Just because it doesn&#39;t <i>look</i> random to us doesn&#39;t mean it <i>isn&#39;t.</i> The probability that the generator produces a &#39;2&#39; isn&#39;t dependent on what it previously produced--the outputs are meant to (be a good approximation of) independent of one another."}, {"owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "edited": false, "score": 0, "creation_date": 1511392026, "post_id": 47445158, "comment_id": 81845729, "body": "Yeah, I figured these kinds of answers might be the case. Isn&#39;t it true though, that when rolling a dice, the chances of rolling the same number 100 times is less likely than rolling mostly different numbers every time? Or is that complete hogwash? I mean, this is supposed to be a uniform distribution, when wouldn&#39;t it be uniformly distributed?... Am I misunderstanding what uniform distribution means?..."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1511392171, "post_id": 47445158, "comment_id": 81845767, "body": "(using the 100-sided die) It is, but they&#39;re apples and oranges. The probability of rolling a <i>specific sequence</i> is 100^n, where <i>n</i> is the number of elements in the sequence. That&#39;s the case regardless of how random the numbers in a sequence look: 1,2,3,4,5 is as likely as 55, 32, 41, 97, 10. The probability of rolling a different number from what you just did is 99/100, but the probability of rolling <i>any specific</i> number is 1/100."}, {"owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "edited": false, "score": 0, "creation_date": 1511392388, "post_id": 47445158, "comment_id": 81845829, "body": "So, if the sequence is a hundred 1s in a row, when generating numbers between 1 and 2,000,000,  the 101st number is no more likely to be different to 1 even though the last 100 have been a 1?... That kinda sucks to think about. There I was thinking I&#39;d been beating roulette all this time, but actually I just got lucky.   Ohhh, your last edit made a bit more sense. The chance of a different number is 99/100 but the chance of rolling a specific number is 1/100... Does that not affect the likelihood of my list having different numbers rather than all the same? At all?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511392430, "post_id": 47445158, "comment_id": 81845845, "body": "For rolling the same number each time in an n-trial set, you&#39;ve got a likelihood of 100 * 1/100^n: for 1, 1, 1..., the likelihood is 1/100^n. But then you&#39;ve got 2, 2, 2... and 3, 3, 3... etc. There are 100 possible sequences like that, so multiply the 1/100^n probability by 100 to get the probability of all the elements being the same."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511392459, "post_id": 47445158, "comment_id": 81845850, "body": "@Matthew exactly right!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511392487, "post_id": 47445158, "comment_id": 81845862, "body": "Injecting a bit of humour: <a href=\"https://xkcd.com/221/\" rel=\"nofollow noreferrer\">xkcd.com/221</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511392567, "post_id": 47445158, "comment_id": 81845884, "body": "Try it with a die with a smaller number of faces, like 6 or even 2 (a coin)--over enough trials, you&#39;ll be able to see that the likelihood of any number isn&#39;t influenced by the previous number."}, {"owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "edited": false, "score": 0, "creation_date": 1511392770, "post_id": 47445158, "comment_id": 81845944, "body": "I think what I mean is, although I completely accept that, that&#39;s how &quot;random&quot; works... When generating using uniform_int_distribution I can put a mapping together of how often a certain number is generated and it&#39;s in line with the rest. There are no numbers that peak or trough significantly. This is the bit I am questioning. Or is the answer still the same even though it appears (over 100,000 generations) that the distribution really is even?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511392900, "post_id": 47445158, "comment_id": 81845982, "body": "@Matthew sort of, and also sort of not. As detailed, the probability of any specific sequence happening is 1/100^n, and there are only 100 specific sequences that are just the same number repeated over and over, compared with the orders of magnitude more numbers of sequences where that isn&#39;t the case. So it&#39;s very unlikely, <i>but</i> no more unlikely than any other specific sequence. It&#39;s just you can recognize the sequence better than most others, and it doesn&#39;t look &#39;random&#39; to you--because humans are good at finding patterns even where there aren&#39;t any."}, {"owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "edited": false, "score": 0, "creation_date": 1511392971, "post_id": 47445158, "comment_id": 81846005, "body": "Well then why does it get to call itself a uniform distribution? If it isn&#39;t always uniform... (Hopefully narrowing down to the question I had intended to ask)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511393160, "post_id": 47445158, "comment_id": 81846071, "body": "Why would you call a die a uniform number generator if it rolls three 1s in a row? Because even if it may occasionally do that, it&#39;s still within the realm of appropriate behavior for a uniform number generator. Short enough sequences will <i>appear</i> to have some order some of the time, but that&#39;s an illusion."}, {"owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "edited": false, "score": 0, "creation_date": 1511393290, "post_id": 47445158, "comment_id": 81846096, "body": "So, why is a uniform number generator different from a non-uniform random number generator if that is true? OHHHH hold on, does it just mean that the likelyhood of each number appearing is uniform? Unlike, for example, rolling a pear and it standing on one <i>end</i> it&#39;s more likely to fall on a side? Unlike a dice where each side is (more or less) just as likely as another?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1511393330, "post_id": 47445158, "comment_id": 81846111, "body": "@Matthew because as the trials go to infinity, the distribution of results becomes uniform"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1511393486, "post_id": 47445158, "comment_id": 81846164, "body": "Maybe think of it the opposite way? If rolling a &#39;6&#39; made a &#39;6&#39; less likely for the next trial, it would make the number generator <i>more</i> predictable, not less--you&#39;d be right more often if you guessed &#39;7&#39; than if you guessed &#39;6&#39; as the next result. With fully independent, uniformly distributed results, you wouldn&#39;t be better off choosing any number over any other--each would have a probability of 1/100."}], "answers": [{"tags": [], "owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "is_accepted": true, "score": 2, "last_activity_date": 1511393158, "creation_date": 1511393158, "answer_id": 47445385, "question_id": 47445158, "link": "https://stackoverflow.com/questions/47445158/is-it-possible-for-a-uniform-discrete-distribution-uniform-int-distribution-to/47445385#47445385", "title": "Is it possible for a uniform discrete distribution (uniform_int_distribution) to generate sequential (or the same) numbers when used correctly?", "body": "<p>You are much more likely to get a list with lots of different numbers than a list with lots of repeats. However, a true RNG will produce any number of 1s in a row if used long enough, and inasmuch as a PRNG is supposed to look like a true RNG, a PRNG might be expected to do the same.</p>\n\n<p>True RNGs typically have independent trials, meaning the outcome of one trial does not tell you anything about the outcome of the other. Knowing one hundred 1s have come up in a row tells you nothing about what such a RNG will do on the next trial. Inasmuch as PRNGs are meant to look like RNGs, you might expect the same from them.</p>\n\n<p>In summary, it is possible, though unlikely, to get a lot of repeats. If you want no repeats, I would recommend picking elements yourself and then shuffling. That way the order is random whereas the elements have whatever distribution you want, exactly.</p>\n"}], "owner": {"reputation": 257, "user_id": 7158175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12fdcb0b37eab4cbd36025d0a1101a64?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7158175/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 47445385, "answer_count": 1, "score": -2, "last_activity_date": 1511393599, "creation_date": 1511391709, "last_edit_date": 1511393599, "question_id": 47445158, "link": "https://stackoverflow.com/questions/47445158/is-it-possible-for-a-uniform-discrete-distribution-uniform-int-distribution-to", "title": "Is it possible for a uniform discrete distribution (uniform_int_distribution) to generate sequential (or the same) numbers when used correctly?", "body": "<p>Going to put my edit up here:</p>\n\n<p>In the comments, the actual nature of randomness has been discussed. What I do understand is that no number is more or less likely than another to be generated when generating \"random\" numbers.  </p>\n\n<p>Hopefully a fairer re-phrase of my question is:</p>\n\n<p>If no number is more or less likely than another, then, why can a uniform distribution function call itself that if the numbers aren't always going to be uniformly distributed?</p>\n\n<hr>\n\n<p>Just to be clear before I ask, I am only asking out of curiosity. Lucky for me I am not a cat.</p>\n\n<p>I have created a quick sort function for a University project, and thought that maybe (rather than just bashing away at the keyboard for a while) I could test it with some lists of integers generated randomly.</p>\n\n<pre><code>std::vector&lt;int&gt; unsorted_list;\nstd::random_device ran_dev; // Initialise a new random device\nstd::uniform_int_distribution&lt;&gt; uni_dist(1, 100); // Create Uniform Distribution\nfor (int i = 0; i &lt; 5; i++) {\n    unsorted_list.push_back(uni_dist(ran_dev));\n}\n</code></pre>\n\n<p>Can I fully rely on this implementation to produce random numbers that do always appear to actually be random (evenly distributed)?  </p>\n\n<p>You might think I'm being silly... Clearly the class states that it is a uniform distribution, as in, it's not possible to be non-uniform... But are any of these outputs even <em>possible</em>? And if so, how likely?</p>\n\n<pre><code>(1, 1, 1, 1, 1)\n(1, 2, 3, 4, 5)\n(2, 4, 6, 8, 10)\n</code></pre>\n\n<p>I suppose the last output is more likely than the first or second (especially when using bounds of 0 to 100), but my curiosity still has me.<br>\nAm I being particularly foolish? I've never been <em>very</em> good at maths, so, although I'm beginning to understand symbols and terminology, I still look at some explanations and simply \"glaze over\", so my googling so far hasn't been helpful.</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1511390937, "post_id": 47445036, "comment_id": 81845376, "body": "Using <code>std::memcpy</code> is the &quot;safe&quot; way to do this."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511390983, "post_id": 47445036, "comment_id": 81845387, "body": "Why are the local variables <code>static</code>? And why don&#39;t you return anything?"}, {"owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511391119, "post_id": 47445036, "comment_id": 81845422, "body": "@Someprogrammerdude, I just threw this code together as I was writing this question. I edited it a bit. <code>static</code> is common in firmware, especially when you find the callback being executed asynchronously when triggered by an external interrupt. Static is great for tracking state -- in this case the number of bytes so far received. There may be another component of the firmware waiting for <code>g_msg_recvd_flag</code> to be set before going off and parsing/using it for something. This is like top and bottom halves in the Linux kernel, if you are familiar."}, {"owner": {"reputation": 57641, "user_id": 34855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a1bd79c7364ca280ec9016ffbe41d65?s=128&d=identicon&r=PG", "display_name": "Ferdinand Beyer", "link": "https://stackoverflow.com/users/34855/ferdinand-beyer"}, "edited": false, "score": 4, "creation_date": 1511391330, "post_id": 47445036, "comment_id": 81845492, "body": "You cannot cast a struct to a pointer. Maybe you want to cast the <i>address</i> of <code>msg</code> to <code>uint8_t</code>? <code>reinterpret_cast&lt;uint8_t*&gt;(&amp;msg)</code> would be the most idiomatic C++."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1511391367, "post_id": 47445036, "comment_id": 81845502, "body": "You are simply missing a <code>&amp;</code> before <code>msg</code> after the cast. There&#39;s nothing C++ specific here, it wouldn&#39;t work exactly the same in C."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511391402, "post_id": 47445036, "comment_id": 81845508, "body": "Unless you need to keep a value between calls <code>static</code> is not needed. And even then there are usually better solutions (even if they involve global variables!). And don&#39;t just &quot;throw&quot; some code together, put some thought inti your <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1511391462, "post_id": 47445036, "comment_id": 81845531, "body": "@Someprogrammerdude: AFAICT the state being kept around is the message being constructed; <code>recv_msg</code> is intended a bit like an interrupt handler for &quot;a byte has been received&quot;. Of course in &quot;saner&quot; (and more generic code) you&#39;d have a context pointer or something like that not to limit the callback to operate on a single message."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511391528, "post_id": 47445036, "comment_id": 81845546, "body": "C style casts all still work in C++.  C++ adds more cast syntax that helps to avoid programmer errors"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1511391609, "post_id": 47445036, "comment_id": 81845574, "body": "@Justin <code>memcpy</code> is equivalent to a series of character assignments . OP code is attempting to do a series of character assignments; there is nothing to be gained by somehow using memcpy"}, {"owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511391641, "post_id": 47445036, "comment_id": 81845583, "body": "@Someprogrammerdude, The state is the number of bytes received. The struct does not need to be static in this example, as I could be writing off to some globally scope address, sure. It all depends on how the code is architected. This may work by executing <code>memcpy</code> after all bytes are received, but I did not fully write all of that as it was not relevant to the question. This example is complete insofar as information is available that is needed to answer the question."}, {"owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1511391654, "post_id": 47445036, "comment_id": 81845588, "body": "@MatteoItalia msg might be a wrapper for a char array."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "edited": false, "score": 0, "creation_date": 1511391814, "post_id": 47445036, "comment_id": 81845650, "body": "@Cppplus1: as long as it&#39;s a &quot;regular&quot;, C-style <code>struct</code> with no particular operator overloading or implicit casts, the specific content is completely irrelevant; if instead you throw that in the mix, it depends from exactly what implicit casts/operator you implement."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511393841, "post_id": 47445036, "comment_id": 81846261, "body": "The solution has been quietly edited into the question. I&#39;m voting to close as unclear since this question makes no sense now"}, {"owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1511394054, "post_id": 47445036, "comment_id": 81846320, "body": "@MatteoItalia, Geeze. Thanks all. It indeed was a simple missing ampersand in this case. I have not worked often enough with C++ compilers I suppose. I didn&#39;t recognize what the output error was describing. I edited the post, but included a note in the edit summary."}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 1090031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66a6a22b36a296042a97ff6ea7db6b3?s=128&d=identicon&r=PG", "display_name": "Giel", "link": "https://stackoverflow.com/users/1090031/giel"}, "is_accepted": false, "score": 0, "last_activity_date": 1511393194, "creation_date": 1511393194, "answer_id": 47445390, "question_id": 47445036, "link": "https://stackoverflow.com/questions/47445036/arbitrary-type-casting-in-c/47445390#47445390", "title": "Arbitrary type casting in C++", "body": "<pre><code>std::vector&lt;uint8_t&gt; max\n</code></pre>\n\n<p>or</p>\n\n<pre><code>uint8_t msg[max_data]\n</code></pre>\n\n<p>and then you can use the assignment operator\nmsg[bytes_recvd] = data</p>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1511395881, "post_id": 47445470, "comment_id": 81846773, "body": "I wonder if there&#39;s any way to have an <code>uint8_t</code> that is not a <code>typedef</code> for <code>unsigned char</code>... the standard mandates <code>CHAR_BITS</code> to be at least 8 (but not smaller). OTOH, there can be no type smaller than <code>unsigned char</code>, since its size is 1 by definition (i.e., it corresponds to the granularity of the address space). So, either you don&#39;t have <code>uint8_t</code> period (e.g. on a DSP whose minimum data type size is 16 bit), or it must be of the same size as <code>unsigned char</code>. Still, I think it&#39;s technically possible for an implementation to provide it as an identical but distinct type."}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 1, "last_activity_date": 1511393961, "creation_date": 1511393961, "answer_id": 47445470, "question_id": 47445036, "link": "https://stackoverflow.com/questions/47445036/arbitrary-type-casting-in-c/47445470#47445470", "title": "Arbitrary type casting in C++", "body": "<p>Use <code>unsigned char</code> instead of <code>uint8_t</code>, and you'll avoid strict aliasing violation.</p>\n\n<p><code>unsigned char</code> can be used for read/modify any object: <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/reinterpret_cast</a></p>\n\n<blockquote>\n  <p>Whenever an attempt is made to read or modify the stored value of an\n  object of type DynamicType through a glvalue of type AliasedType, the\n  behavior is undefined unless one of the following is true:</p>\n  \n  <p>[...]</p>\n  \n  <p>AliasedType is std::byte, (since C++17)char, or <strong>unsigned char: this\n  permits examination of the object representation of any object as an\n  array of bytes.</strong></p>\n</blockquote>\n\n<p>So use this:</p>\n\n<p><code>reinterpret_cast&lt;unsigned char*&gt;(&amp;msg)[bytes_recvd] = data;</code></p>\n"}], "owner": {"reputation": 4192, "user_id": 2446071, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3f590d99e58f1370b9846fcd29e0d43f?s=128&d=identicon&r=PG", "display_name": "sherrellbc", "link": "https://stackoverflow.com/users/2446071/sherrellbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "closed_date": 1511394274, "answer_count": 2, "score": 0, "last_activity_date": 1511393961, "creation_date": 1511390862, "last_edit_date": 1511391875, "question_id": 47445036, "link": "https://stackoverflow.com/questions/47445036/arbitrary-type-casting-in-c", "closed_reason": "Needs details or clarity", "title": "Arbitrary type casting in C++", "body": "<p>I have a series of bytes coming in across a transport medium (one byte at a time) that I need to reconstitute into a message structure. The two ends share a common header file in which the message structure is <code>packed</code>. Both ends are also compiled using the same compiler, though it should not matter given the packing attribute. This is simple in C, but I must fit this code into a larger code-base written in C++. I have tried playing around with various modes of casting in C++, but I can't seem to properly use them. </p>\n\n<p>I have been writing embedded firmware in C for a while, but have mostly only read C++ code. So, what is the \"proper\" way to do something like this in C++? Assuming <code>recv_msg</code> is a callback function that is executed when a new byte is available to be read:</p>\n\n<pre><code>void recv_msg(uint8_t data)\n{\n    static int bytes_recvd = 0;\n    static struct msg = {0};\n\n    ((uint8_t*)&amp;msg)[bytes_recvd] = data;\n    if(++bytes_recvd == sizeof(struct msg)){\n        printf(\"Msg received\\n\");\n        bytes_recvd = 0;\n        g_msg_recvd_flag = 1;\n    }\n}\n</code></pre>\n\n<p>The problem I am running into is the strict typing of C++ not allowing me to make an arbitrary cast of <code>msg</code> into an array of <code>uint8_t</code>. Such a thing makes it <em>very</em> simple to reconstruct the message struct one byte at a time.</p>\n\n<p>Assuming I have <code>bytes_recvd</code> and <code>struct msg</code> as members of a related C++ class, how can something analogous be done in C++?</p>\n"}, {"tags": ["python", "c++", "opencv", "bitwise-and"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1511431383, "post_id": 47444783, "comment_id": 81860025, "body": "As far as I know, OpenCV does not have anything like that, but you can use  std::find_if with cv::Mat iterators and a predicate that returns true when your condition is met(in this case that a pixel is not white). It will stop at the first True value and it will only check the image once. If all are white it will return iterator end, which you can compare after it finishes it."}], "answers": [{"tags": [], "owner": {"reputation": 1130, "user_id": 5672459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153733019839707/picture?type=large", "display_name": "Danilo Souza Mor&#227;es", "link": "https://stackoverflow.com/users/5672459/danilo-souza-mor%c3%a3es"}, "is_accepted": true, "score": 2, "last_activity_date": 1516391962, "creation_date": 1516391962, "answer_id": 48348652, "question_id": 47444783, "link": "https://stackoverflow.com/questions/47444783/how-to-simulate-short-circuit-and-in-opencv/48348652#48348652", "title": "How to simulate short circuit and in opencv", "body": "<p>I ended up finding a solution. I implemented the short-circuit and operation in python which turned out to be a lot slower than the cv2.bitwise_and followed by a cv2.bitwise_xor. But then I used numba to pre compile that function and I ended up having a function that runs 4x as fast as the cv2 one. Here's the code:</p>\n\n<pre><code>@numba.jit(\"b1(u1[:,:],u1[:,:])\")\ndef is_template_in(template, image):\n    for y in range(0, template.shape[0]):\n        for x in range(0, template.shape[1]):\n            if template[y][x] and not image[y][x]:\n                return False\n    return True\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 5672459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153733019839707/picture?type=large", "display_name": "Danilo Souza Mor&#227;es", "link": "https://stackoverflow.com/users/5672459/danilo-souza-mor%c3%a3es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48348652, "answer_count": 1, "score": 0, "last_activity_date": 1516391962, "creation_date": 1511389440, "last_edit_date": 1511389996, "question_id": 47444783, "link": "https://stackoverflow.com/questions/47444783/how-to-simulate-short-circuit-and-in-opencv", "title": "How to simulate short circuit and in opencv", "body": "<p>I am trying to check whether a binary image (template) is contained inside another image (source). To do that, I first started doing something like this:</p>\n\n<p>(its a pseudo code resembling python, but I'm more interested in the right technique than in the language implementation)</p>\n\n<pre><code>#this code runs once at startup\ntemplate_nonzero = count_nonzero(template)\n\n#this code is run inside a function\nmask = bitwise_and(template, source)\nis_contained = count_nonzero(mask) == template_nonzero\n</code></pre>\n\n<p>Then I realized I could speed things up by avoiding count_nonzero:</p>\n\n<pre><code>mask = bitwise_and(template, source)\nmask_against_template = bitwise_xor(template, mask)\nis_contained = not mask_against_template.any()\n</code></pre>\n\n<p>This code is almost 3 times faster than the first one. I'm now wondering if there is such a thing as a short circuit and operator in opencv that would return true if bitwise_and is true for all white pixels or false upon finding the first false operation. This way I wouldnt have to use xor or even run through the entire image in a bitwise_and.</p>\n\n<p>Any ideas?</p>\n\n<p>Edit:</p>\n\n<p>I forgot to mention that I even tried this code, but using xor is a bit faster than using ==:</p>\n\n<pre><code>mask = bitwise_and(template, source)\nmask_against_template = template == mask\nis_contained = mask_against_template.all()\n</code></pre>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1511388842, "post_id": 47444622, "comment_id": 81844600, "body": "Why make it static? There are no linkage issues with non-static consts."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1511388918, "post_id": 47444622, "comment_id": 81844642, "body": "This is going to compiler defined but I would assume any decent compiler would optimize it out and use the literal value in its place as long as you don&#39;t ODR-use it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1511393071, "post_id": 47444622, "comment_id": 81846041, "body": "Optimizing compilers are allowed to do anything that meets the &quot;as-if rule&quot;. If the constant&#39;s address is never taken, there&#39;s no way to tell if it&#39;s in memory or not."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511393659, "post_id": 47444622, "comment_id": 81846222, "body": "It may or may not use memory, you can&#39;t say"}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1511395888, "post_id": 47444622, "comment_id": 81846775, "body": "@NeilButterworth convention-IMHO very few people know that const implies static in C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1511396082, "post_id": 47444622, "comment_id": 81846831, "body": "&quot;-IMHO very few people know that const implies static in C++.&quot; - possibly because it doesn&#39;t? And use of const instead of macros has been the norm since before C++ was standardised - it&#39;s one way that Stroustrup tried to get rid of uses of the preprocessor. If people don&#39;t know about this kind of use of const I&#39;d suggest the C++ code they write is not worth using. This is very basic C++."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1511401869, "post_id": 47444622, "comment_id": 81848091, "body": "it does for globals"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511388529, "creation_date": 1511388529, "question_id": 47444622, "link": "https://stackoverflow.com/questions/47444622/do-static-variables-that-did-not-have-their-address-taken-need-to-exist-in-optim", "title": "Do static variables that did not have their address taken need to exist in optimized build executable?", "body": "<p>This question came when I was telling people to not use preprocessor, \nfor example:</p>\n\n<p>NO:</p>\n\n<pre><code>#define SIZE 5;\n</code></pre>\n\n<p>YES:</p>\n\n<pre><code>static const size_t SIZE = 5;\n</code></pre>\n\n<p>Then argument was made that variable uses memory, while define is as if you wrote 5 directly in the place you use it.</p>\n\n<p>So my question is(assuming SIZE address is not ever taken, so it is invisible to the rest of the program beside the place where it is used to define array size or for loop iteration count)\nDoes <code>static const size_t SIZE</code> must exist in the memory of the resulting program or are optimizing compilers/linkers allowed to remove it.</p>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1511388258, "post_id": 47444421, "comment_id": 81844392, "body": "You should clarify what you mean by &quot;moving installed files to another machine&quot;."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "edited": false, "score": 0, "creation_date": 1511393667, "post_id": 47444421, "comment_id": 81846224, "body": "@Marcel The files that are generated by calling make-install"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1511424530, "post_id": 47444421, "comment_id": 81855575, "body": "<code>Why this is happining?</code> - Because <code>find_package(Boost)</code> sets absolute paths to boost library, so CMake packaging mechanism store these paths into <code>.cmake</code> scripts used for search your package. <code>how can I prevent this?</code> - Write <code>MyLibConfig.cmake</code> (or files included by it, like <code>MyLibTargets.cmake</code>) <b>manually</b>. As for simpler ways... You want to tell CMake that Boost is installed into standard location, which is automatically searched by the linker (libraries are not required full path), and by the compiler (include directories are not required full path), don&#39;t you?"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1511453504, "post_id": 47444421, "comment_id": 81873759, "body": "@Tsyvarev Thank you very much. it was very helpful."}], "answers": [{"comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1511393651, "post_id": 47444647, "comment_id": 81846220, "body": "Thanks. Actually, I did not move the build directory. I moved the file that make-install generated."}], "tags": [], "owner": {"reputation": 1395, "user_id": 6256451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5271ddbb0e7b464e61ea8a0ae2eaa68e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/6256451/marcel"}, "is_accepted": false, "score": 0, "last_activity_date": 1511388638, "creation_date": 1511388638, "answer_id": 47444647, "question_id": 47444421, "link": "https://stackoverflow.com/questions/47444421/cmake-exports-targets-with-absolute-path/47444647#47444647", "title": "CMake exports targets with absolute path", "body": "<p>If you took the cmake build directory and used it from another machine, this won't work. cmake is not intended to support different platforms from the same working directory.</p>\n\n<p>You need to use out of source builds for this purpose. But once you did an in place build with cmake the directory is burned and out of source builds no longer work for this source tree. You need to delete all cmake temporary files and folders to get the source tree working again in this case.</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1511393598, "creation_date": 1511387511, "last_edit_date": 1511393598, "question_id": 47444421, "link": "https://stackoverflow.com/questions/47444421/cmake-exports-targets-with-absolute-path", "title": "CMake exports targets with absolute path", "body": "<p>I am developing a static library and I am using CMake. This library needs Boost. So I did the following:</p>\n\n<pre><code>set(LIBRARY_NAME \"MyLib\")\nset(LIBRARY_VERSION 1.0.0)\nproject(${LIBRARY_NAME} VERSION ${LIBRARY_VERSION})\n\nset(Boost_USE_STATIC_LIBS   ON)\nset(Boost_USE_MULTITHREADED ON) \nfind_package(Boost COMPONENTS system filesystem regex thread date_time log log_setup REQUIRED)\ninclude_directories(${Boost_INCLUDE_DIR})\nlink_directories(${Boost_LIBRARY_DIR})\n\nadd_library(${LIBRARY_NAME} STATIC xx.cpp)\n\ntarget_link_libraries(${LIBRARY_NAME} PUBLIC ${Boost_LIBRARIES})\n</code></pre>\n\n<p>Everything is fine till now.</p>\n\n<p>Now, I need to make this library install-able. So, I follow this tutorial <a href=\"https://cmake.org/cmake/help/v3.0/manual/cmake-packages.7.html\" rel=\"nofollow noreferrer\">https://cmake.org/cmake/help/v3.0/manual/cmake-packages.7.html</a></p>\n\n<p>Everything looks fine on my machine. However, when I moved the installed files (The files that are generated by calling make-install) into another machine and tried to use it using find_package(MyLib), problem raised saying that it could find boost in the in a place supposed to be on my original machine. I dig into the file MyLibTargets.cmake and I saw <strong>absolute</strong> paths of <strong>Boost</strong> library! </p>\n\n<p>Why this is happining? how can I prevent this?</p>\n"}, {"tags": ["c++", "performance", "user-interface", "desktop-application", "immediate-mode"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1511386731, "post_id": 47444189, "comment_id": 81843739, "body": "I strongly recommend you don&#39;t implement your own GUI library, even as a hobby project. It&#39;s extremely hard to get right, and there are a lot of details, and it&#39;s easy to get wrong. Even if no GUI library exists that you like, it would be far better to implement your hobby GUI library as thin wrappers around an existing library (basically, use one of the existing libraries with wrappers to make the API more like what you want). GUI libraries are too big to be a fun hobby project"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1511387265, "post_id": 47444189, "comment_id": 81843957, "body": "Think about how detailed or deep you want your GUI library to be.  For example are you writing wrappers around an OS api, or are you bypassing the OS and writing directly to the hardware?  You should check out WxWidgets and Qt to see how big the project is going to be."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "edited": false, "score": 15, "creation_date": 1511387433, "post_id": 47444189, "comment_id": 81844028, "body": "Well I will certainly stop when I am not having fun anymore, right now I do, so I will continue. We&#39;ll see for how long. That is not really relevant to the question though, my point is also important to me if I decide to use an existing gui framework: is imGUI viable in a non gaming context, and if so, what are the performance implications?"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "edited": false, "score": 6, "creation_date": 1511387509, "post_id": 47444189, "comment_id": 81844060, "body": "I see now that I maybe stressed the part of it beeing my own framework a bit too much. I am interested in the performance implications wether or not I will end up with somebody else&#39;s framework."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1511396132, "post_id": 47444189, "comment_id": 81846843, "body": "Immediate mode rendering has been around for 30+ years.  It is intuitive, uses limited hardware resources well, leverages the idea of having widgets that carve out their own niche in the main window.  Retained mode rendering is a very different ball-game, you &quot;retain&quot; rendering by programming the GPU.  Big difference, the GPU can do a much better job of spitting pixels onto the screen than you could ever do by writing code that runs on the CPU.   But you can&#39;t ignore the need to program the GPU, and there isn&#39;t just one of them.  It is the job of a framework that hides the differences."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1511430534, "post_id": 47444189, "comment_id": 81859376, "body": "@HansPassant You seem to imply that an immediate mode GUI could only use the CPU for rendering, not the GPU. I don&#39;t see why that would be the case, the &quot;immedate&quot; in immediate mode GUI really only applies to the control flow and how you think about graphical elements, how you render them is a different game. If I am not mistaken rendering would be possible in both manners and not limited to the CPU."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1609706882, "post_id": 47444189, "comment_id": 115900787, "body": "Did you consider uising <a href=\"https://qt.io/\" rel=\"nofollow noreferrer\">Qt</a> or <a href=\"https://fltk.org/\" rel=\"nofollow noreferrer\">FLTK</a> for your GUI Interface?"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1609796036, "post_id": 47444189, "comment_id": 115929932, "body": "@BasileStarynkevitch I considered Qt, but it is the culmination of everything I dislike about current GUIs: It mandates that it owns the program, not you, it dictates control flow, it is GIAGANTIC (download was ~40GB at the time, when it should just be a .lib and a header), It has its own build system, it wants to be everything (this thing is closer to an operating system than a GUI) and the list goes on. If I &quot;just want a gui&quot; this thing is a nightmare.I remember stumbling about FLTK and avoiding it because the website looks like its from the 90s, but I haven&#39;t really looked into it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1609825405, "post_id": 47444189, "comment_id": 115936186, "body": "You could also try the  <a href=\"http://fox-toolkit.org/\" rel=\"nofollow noreferrer\">FOX toolkit</a> or make your software some Web server using e.g. <a href=\"https://www.webtoolkit.eu/wt\" rel=\"nofollow noreferrer\">Wt</a> or <a href=\"https://www.coralbits.com/libonion/\" rel=\"nofollow noreferrer\">libonion</a>"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1609843734, "post_id": 47444189, "comment_id": 115942470, "body": "@BasileStarynkevitch I downloaded two of the example applications done with FOX toolkit, and they look quite dated and out of place, so thats not an option for me.  Wt would in many ways be worse than Qt. I don&#39;t see how &quot;add a webserver&quot; would possibly get me closer to &quot;I just want a simple GUI&quot;. It does the opposite of what I want, it makes everything more annoying.  libonion doesn&#39;t even seem to have anything to do with UI, thats just a webserver library.  I want to point out that this is not a question about which GUI framework to use, so suggesting them is beside the point anyway."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1609846917, "post_id": 47444189, "comment_id": 115943769, "body": "@pulp_user: You don&#39;t define what a &quot;simple GUI&quot; means, and GUIs are operating system specific. They are different on Linux, on FreeBSD, on Windows, on MacOSX. Also, GUIs are complex. See <a href=\"https://www.osdev.org/\" rel=\"nofollow noreferrer\">osdev.org</a> to get an intuition why."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1609849479, "post_id": 47444189, "comment_id": 115944981, "body": "@BasileStarynkevitch You have gone completely off topic. This is a question about performance implications of a certain api-style for a GUI. I didn&#39;t ask for advice on what gui framework to use, or why existing ones don&#39;t have the properties I want from a GUI. So please stop trying to find the right GUI framework for me. Thanks."}, {"owner": {"reputation": 325, "user_id": 801618, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/090ee8cf7453dc9e627f3b06bd9b2992?s=128&d=identicon&r=PG", "display_name": "MerseyViking", "link": "https://stackoverflow.com/users/801618/merseyviking"}, "edited": false, "score": 1, "creation_date": 1611973219, "post_id": 47444189, "comment_id": 116629461, "body": "It&#39;s 2 am and I just gad an epiphany. OP you wrote on the hacker news thread that you thought it was stupid to have to write an application &quot;in&quot; &lt;insert framework&gt; rather than have it as just a dependency of the application. That&#39;s something that has stuck in my craw for years without me realising it, and thanks to that simple sentence I see things much more clearly!"}], "answers": [{"comments": [{"owner": {"reputation": 1414, "user_id": 610966, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/48b5a21d389d6f40ad4d786c73b4f719?s=128&d=identicon&r=PG", "display_name": "Philip Guin", "link": "https://stackoverflow.com/users/610966/philip-guin"}, "edited": false, "score": 8, "creation_date": 1589598705, "post_id": 59828450, "comment_id": 109364861, "body": "An answer three years in the making. Great work! First question: how did you go about comparing the two paradigms? Second question: do you have a link to implementation details of your project? Thank you!"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 1414, "user_id": 610966, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/48b5a21d389d6f40ad4d786c73b4f719?s=128&d=identicon&r=PG", "display_name": "Philip Guin", "link": "https://stackoverflow.com/users/610966/philip-guin"}, "edited": false, "score": 3, "creation_date": 1589985279, "post_id": 59828450, "comment_id": 109510556, "body": "I came across the paradigm by Casey Muratori&#39;s Handmade Hero, and the DearImgui Library. I decided to explore this topic in my Masters Thesis, after I &quot;just wanted a GUI for my programm&quot; and learned how ridiculously bad the landscape of GUI-Frameworks for end user programs is. It&#39;s all horrible. So I took the &quot;it can&#39;t be that hard&quot; approach.   I haven&#39;t uploaded my implementation anywhere, mainly because it is of truly academic quality (pretty crappy) and I don&#39;t want to curse others with it. If you want to take a look at an ImGUI implementation, check out DearImgui or Nuklear on Github."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 1414, "user_id": 610966, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/48b5a21d389d6f40ad4d786c73b4f719?s=128&d=identicon&r=PG", "display_name": "Philip Guin", "link": "https://stackoverflow.com/users/610966/philip-guin"}, "edited": false, "score": 7, "creation_date": 1589985770, "post_id": 59828450, "comment_id": 109510843, "body": "I just realized I didn&#39;t really answer your first question: First, I compared them from a theoretical standpoint: In ImGUI you describe the state you want the UI to have, in retained mode, you specify the transitions between the states. I wont go deep into it, but it boils down to: retained mode can have n&#178; complexity, while immediate mode pretty much stays linear.  I then built an application to compare performance to other retained-mode applications. This was not very scientific, so there is no real knowledge to be had, besides &quot;it works and mostly better so&quot; (for my usecase)."}, {"owner": {"reputation": 525, "user_id": 3730772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c947533967733ba6f96dd3b2c955b95?s=128&d=identicon&r=PG", "display_name": "mohamedmoussa", "link": "https://stackoverflow.com/users/3730772/mohamedmoussa"}, "edited": false, "score": 29, "creation_date": 1590402539, "post_id": 59828450, "comment_id": 109656948, "body": "I&#39;m glad you didn&#39;t take the advice of the comment that said you shouldn&#39;t write your own :) Well done."}, {"owner": {"reputation": 5287, "user_id": 973485, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EZ8Vm.jpg?s=128&g=1", "display_name": "BjarkeCK", "link": "https://stackoverflow.com/users/973485/bjarkeck"}, "edited": false, "score": 0, "creation_date": 1592139623, "post_id": 59828450, "comment_id": 110311386, "body": "Hey @pulp_user I love your reply and the fact you made a modern application with ImGUI, I am also working on a custom ImGui project in the handmade spirit. Which aims to show how that many of the problems people have with ImGui can easily be addressed or does not exist, and then explore what it would be like to make the UI for Discord or Spotify as a demo. Would love to learn more about your project, ask a ton of questions, see how you solved various problems, and maybe get some feedback on my approach if you have time and are willing :) perhaps over Discord?"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 5287, "user_id": 973485, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EZ8Vm.jpg?s=128&g=1", "display_name": "BjarkeCK", "link": "https://stackoverflow.com/users/973485/bjarkeck"}, "edited": false, "score": 0, "creation_date": 1592140648, "post_id": 59828450, "comment_id": 110311769, "body": "@BjarkeCK I&#39;d be totally up for that, but I have no idea how to exchange contact info over stackoverflow that doesn&#39;t involve posting comments for everyone to see. Any suggestions?"}, {"owner": {"reputation": 5287, "user_id": 973485, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EZ8Vm.jpg?s=128&g=1", "display_name": "BjarkeCK", "link": "https://stackoverflow.com/users/973485/bjarkeck"}, "edited": false, "score": 0, "creation_date": 1592146591, "post_id": 59828450, "comment_id": 110313900, "body": "@pulp_user That&#39;s great, thanks! Couldn&#39;t find a way to message you directly either, apparently that is not a thing on SO hehe. I&#39;ve added you, so you can delete the comment with your username if you like:)"}, {"owner": {"reputation": 12674, "user_id": 35440, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VAkMs.png?s=128&g=1", "display_name": "Tomas Andrle", "link": "https://stackoverflow.com/users/35440/tomas-andrle"}, "edited": false, "score": 2, "creation_date": 1609705462, "post_id": 59828450, "comment_id": 115900363, "body": "@pulp_user well done! Have you tried not rendering every frame but only when there is some user input or internal state change with visible effect? Perhaps in some cases if you could filter those reliably you could save even the 3% CPU most of the time."}, {"owner": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "edited": false, "score": 14, "creation_date": 1609706467, "post_id": 59828450, "comment_id": 115900666, "body": "please share your thesis when it&#39;s publicly released :)"}, {"owner": {"reputation": 2165, "user_id": 22355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/8R39v.jpg?s=128&g=1", "display_name": "Mark Bostleman", "link": "https://stackoverflow.com/users/22355/mark-bostleman"}, "edited": false, "score": 0, "creation_date": 1609715201, "post_id": 59828450, "comment_id": 115902996, "body": "Hoping that Justin will weigh in."}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 21, "creation_date": 1609715613, "post_id": 59828450, "comment_id": 115903076, "body": "Congrats on making it to Hacker News: <a href=\"https://news.ycombinator.com/item?id=25624044\" rel=\"nofollow noreferrer\">news.ycombinator.com/item?id=25624044</a> Please absolutely <i>do</i> consider sharing your code, even if it&#39;s &quot;academic&quot; quality. Only good can come of it. Besides, this is exactly what the CRAPL licence is for :p"}, {"owner": {"reputation": 1630, "user_id": 62709, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/002c19193e3976723d5681cf4864bebb?s=128&d=identicon&r=PG", "display_name": "Stuart Axon", "link": "https://stackoverflow.com/users/62709/stuart-axon"}, "edited": false, "score": 2, "creation_date": 1609716462, "post_id": 59828450, "comment_id": 115903258, "body": "Fantastic work.  I guess part of this is because you just can&#39;t get away with things being slow in an immediate mode GUI.  Retained mode may hide all sorts of slow paths.   It makes me wonder if every retained mode GUI should have an immediate mode to make sure it remains performant."}, {"owner": {"reputation": 607, "user_id": 1452351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a124ed341afc9a9379101e9cb74a6253?s=128&d=identicon&r=PG&f=1", "display_name": "Shane", "link": "https://stackoverflow.com/users/1452351/shane"}, "edited": false, "score": 1, "creation_date": 1609719479, "post_id": 59828450, "comment_id": 115903878, "body": "OMG This is the greatest answer I have read on SO in a long time!!! NICE work :)"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 12674, "user_id": 35440, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VAkMs.png?s=128&g=1", "display_name": "Tomas Andrle", "link": "https://stackoverflow.com/users/35440/tomas-andrle"}, "edited": false, "score": 1, "creation_date": 1609796525, "post_id": 59828450, "comment_id": 115930110, "body": "@TomasAndrle No, because it wouldn&#39;t have helped much in my usecase. Since you only know that the internal state hasn&#39;t changed AFTER the application rebuilt the entire UI, you have already spent 80% of the total CPU time at that point. It didn&#39;t feel useful, given time constraints, to immensly complicate the logic (and make some design decisions) to shave of 20% or so. TBH, this optimization maybe would have actually been a net loss, since the caching-logic might have taken more time than the total rendering. But thats hard to tell. I would have gotten more out of improving text rendering."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 1, "creation_date": 1609798773, "post_id": 59828450, "comment_id": 115930839, "body": "@TasosPapastylianou so thats how all of you ended up here :D I will consider releasing it now, but the CRAPL license is way too wordy. Maybe I will just invent my own license: &quot;This is shit code, please don&#39;t use it.&quot; should do."}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1609801246, "post_id": 59828450, "comment_id": 115931530, "body": "Release it as <a href=\"https://en.wikipedia.org/wiki/Beerware\" rel=\"nofollow noreferrer\">beerware</a> then. Short and sweet :)"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 1, "creation_date": 1609801307, "post_id": 59828450, "comment_id": 115931543, "body": "@TasosPapastylianou I don&#39;t like beer, so thats also not the license for me :D I will find something!"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "edited": false, "score": 2, "creation_date": 1609801921, "post_id": 59828450, "comment_id": 115931684, "body": "@Louise unfortunately, my thesis is in german, so it won&#39;t be useful to the vast majority of people. I&#39;m thinking about translating the chapter with examples though, that way I could bundle it with the source code, and people can at least figure things out by example. I don&#39;t trust a machine translated pdf to be very readable."}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 683, "user_id": 740764, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5e836c45590de7477d89cd5fa64e7803?s=128&d=identicon&r=PG", "display_name": "Louise", "link": "https://stackoverflow.com/users/740764/louise"}, "edited": false, "score": 1, "creation_date": 1610047866, "post_id": 59828450, "comment_id": 116016437, "body": "@Louise I added a download link to my thesis. I opted to not translate the section, but clean up the code-examples so they will hopefully be understandable for other people (and won&#39;t crash immediately). A machine translated version I looked at looked ... ok-ish, so I hope the thesis itself can also be of some use for you."}, {"owner": {"reputation": 25224, "user_id": 254635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17ZAK.png?s=128&g=1", "display_name": "ib.", "link": "https://stackoverflow.com/users/254635/ib"}, "edited": false, "score": 1, "creation_date": 1610084673, "post_id": 59828450, "comment_id": 116025630, "body": "The thesis looks great! Thank you for releasing it. (Modern machine translation is indeed good enough for it to be quite readable auto-translated into English.)"}, {"owner": {"reputation": 69, "user_id": 9138660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a56f5da32b45685a39ccd4411372ef?s=128&d=identicon&r=PG", "display_name": "brightprogrammer", "link": "https://stackoverflow.com/users/9138660/brightprogrammer"}, "edited": false, "score": 0, "creation_date": 1612335241, "post_id": 59828450, "comment_id": 116730977, "body": "Did you use opengl to draw your widgets? From the bold text I can&#39;t really deduce which one drains more battery? Retained Mode or Immediate Mode? Also which one is more customizable and flexible according to you?"}, {"owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "reply_to_user": {"reputation": 69, "user_id": 9138660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a56f5da32b45685a39ccd4411372ef?s=128&d=identicon&r=PG", "display_name": "brightprogrammer", "link": "https://stackoverflow.com/users/9138660/brightprogrammer"}, "edited": false, "score": 1, "creation_date": 1612422404, "post_id": 59828450, "comment_id": 116762901, "body": "@brightprogrammer I used DirectX11. If you optimize enough, I think retained mode still comes out ahead, it&#39;s just that many current frameworks have horrible performance and this higher battery usage when interacted with. I can&#39;t really say &quot;this one is better&quot; in this regard, just that both are viable approaches. And customizable and flexible is sort of up to the implementation details. You can make very customizable retained mode and uncostomizable immediate mode guide, and vice versa. This is really more a question about how you design the api."}], "tags": [], "owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "is_accepted": true, "score": 218, "last_activity_date": 1610982771, "last_edit_date": 1610982771, "creation_date": 1579542114, "answer_id": 59828450, "question_id": 47444189, "link": "https://stackoverflow.com/questions/47444189/what-are-the-performance-implications-of-using-an-immediate-mode-gui-compared-to/59828450#59828450", "title": "What are the performance implications of using an immediate-mode GUI compared to a retained-mode GUI?", "body": "<p>Since there seems to be some interest in this question still (judging by the views), I thought I might as well post an update.</p>\n<p>I ended up implementing an immediate-mode GUI as my master\u2019s thesis, and have some numbers in on the performance. The gist is:</p>\n<p><strong>Immediate mode is better (faster) in <em>a lot</em> of cases, and worse (slower) only in <em>some</em> cases. Overall, it is a completely viable approach to creating a GUI that responds fast and does not drain the battery.</strong></p>\n<p>I created a Spotify clone with about 50% of the UI elements, and rendering a single frame was in the microsecond range. In fact, the application consistently used less than 400\u00a0\u03bcs for a single frame. With V-Sync enabled on a 60\u00a0Hz monitor, this equates to roughly\u00a03% CPU load <em>on a single core</em> (400\u00a0\u03bcs per 16\u00a0ms). Furthermore, a decent chunk of these 400\u00a0\u03bcs were caused by constant factors that wouldn\u2019t increase the load with more UI elements (e.g., receiving input or setting up GPU state that doesn\u2019t scale with UI complexity).</p>\n<p>The perfectionist in me still disliked the fact that a GUI that did nothing was consuming cycles, but the upsides were tremendous: <em>When the GUI was being heavily interacted with, or when the window was being resized, it was still hitting 400\u00a0\u03bcs!</em> This blows many existing retained-mode GUIs out of the water. Try resizing Spotify, Windows Explorer, Visual Studio, or basically any other desktop application, and see how it reacts, to understand what I mean. My guess would be that Spotify goes down to about 2\u00a0fps on my PC when resizing.</p>\n<p>And changing the UI is basically free. If you display a hundred buttons in one frame, and then replace them all with textboxes in the next, there is still no difference to the performance. Retained-mode GUIs tend to struggle in such scenarios.</p>\n<p>Three more thoughts:</p>\n<ul>\n<li><p>Most of the time is spent on text rendering, the rest is close to irrelevant. If you want to heavily optimize, this is going to be the thing to focus on. But even with little optimization, it can be made decent.</p>\n</li>\n<li><p>I doubt that the vast difference in performance can be explained only\u2014or even at all\u2014by the difference between the retained and immediate modes. For example, Spotify uses a Web stack for UI; that\u2019s bound to be slow.</p>\n<p>I guess, WPF, Win32, and the likes are just slow because they can get away with it, or because they were optimized for completely different hardware than the one we use nowadays. They also do more, of course, but not remotely enough to justify the difference.</p>\n</li>\n<li><p>I\u2019m sure you could make a retained-mode GUI that is a lot faster than my immediate-mode GUI. There is just little incentive for it in general, which is a little sad, to be honest; I like efficient things.</p>\n</li>\n</ul>\n<p>The key takeaway for me is: <strong>IMGUI is fine, you can make it fast.</strong></p>\n<h3>Update</h3>\n<p>Since a couple of people asked, <strong>I\u2019ve decided to release my thesis.</strong></p>\n<p>Please be aware that you will be looking at something that was not meant for public release and doesn\u2019t pass my personal lowest quality expectations for a publicly released piece of software (which is why I\u00a0hadn\u2019t released it in the first place). So please only use it for educational purposes and not for building actual software with it. I\u00a0won\u2019t be supporting it, either.</p>\n<p>The download includes the thesis itself (<strong>in German!</strong>), some pre-built executables for Windows, and the source code (in C++):</p>\n<p><a href=\"https://1drv.ms/u/s!AsdZfH5hzKtp9zy1YZtHgeSMApOp?e=FbxLUs\" rel=\"noreferrer\">https://1drv.ms/u/s!AsdZfH5hzKtp9zy1YZtHgeSMApOp?e=FbxLUs</a></p>\n<p>Have fun!</p>\n"}], "owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39290, "favorite_count": 36, "accepted_answer_id": 59828450, "answer_count": 1, "score": 150, "last_activity_date": 1610982771, "creation_date": 1511386408, "last_edit_date": 1609814440, "question_id": 47444189, "link": "https://stackoverflow.com/questions/47444189/what-are-the-performance-implications-of-using-an-immediate-mode-gui-compared-to", "title": "What are the performance implications of using an immediate-mode GUI compared to a retained-mode GUI?", "body": "<p>I am currently working on a standard Windows desktop application (standard meaning no fancy stuff: just buttons, text, sliders, etc.), and have decided to write a GUI framework on my own, after looking into some GUI frameworks and being repelled by all of them. Since it\u2019s a hobby project, I am also willing to experiment, and decided to make the GUI immediate-mode, not retained-mode, as I really like the way it simplifies the code. Here is the question, though:</p>\n<p><strong>What are the performance implications of using an immediate-mode GUI compared to a retained-mode GUI, when using it for a typical desktop application?</strong></p>\n<p>I always hear that an IMGUI performs worse, since it has to redraw every frame (or, if it somehow caches, it still has to do the logic every frame). But of how much more are we talking here? Am I burning twice the CPU time? More? If I hypothetically ran 20\u00a0IMGUI programs, would it max out the CPU (presuming I already optimized it)? I just want to know the ballpark and whether the tradeoffs are still viable in a non-game environment, where there is no need to redraw every frame.</p>\n<p>There is also one more implication concerning latency that I don\u2019t understand. In the <a href=\"http://www.johno.se/book/imgui.html\" rel=\"noreferrer\">chapter discussing IMGUI</a> in a <a href=\"http://www.johno.se/book/index.html\" rel=\"noreferrer\">work-in-progress book</a> by <a href=\"http://www.johno.se/\" rel=\"noreferrer\">Johannes Norneby</a>, it is explained as follows:</p>\n<blockquote>\n<h3>Frame shearing</h3>\n<p>One aspect of IMGUI to be aware of in the context of real-time\napplications (constantly rendering new frames many times per second)\nis that user interactions will always be in response to something that\nwas drawn on a previous frame. This is because the user interface must\nbe drawn at least once for the user to be aware that there are widgets\nthere to be interacted with. Most of the time this doesn\u2019t cause any\nproblems if the frame rate is high enough, but it is something to be\naware of.</p>\n</blockquote>\n<p>How is this any different in a retained-mode GUI? Does it mean that I have one more frame of input lag over a retained-mode GUI?</p>\n"}, {"tags": ["c++", "vector", "sfml", "segmentation-fault"], "answers": [{"tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1511431616, "creation_date": 1511431616, "answer_id": 47452761, "question_id": 47444182, "link": "https://stackoverflow.com/questions/47444182/two-dimensional-vector-return-sigsegv-sfml-game/47452761#47452761", "title": "Two dimensional vector return SIGSEGV. SFML Game", "body": "<p>You have <strong>seven</strong> textures in your array <code>sf::Texture tekstury[7];</code>. Yet you try to load 8 images because you have <strong>eight</strong> types. And when you try to access the eighth texture... well.</p>\n\n<p>You will need to fix that. Stop using magic numbers in your code. Use a single constant that knows how many types you have. Some people end their enums with a <code>COUNT</code> value... because that value then knows how many there are, even if you add some in the middle. But a simple <code>const size_t FieldTypeCount = 8;</code> might work, too.  </p>\n"}], "owner": {"reputation": 25, "user_id": 8993257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adc42629bcb0b8aa2219cf1d606cffe?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142", "link": "https://stackoverflow.com/users/8993257/micha%c5%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 47452761, "answer_count": 1, "score": -1, "last_activity_date": 1511431616, "creation_date": 1511386393, "last_edit_date": 1511389274, "question_id": 47444182, "link": "https://stackoverflow.com/questions/47444182/two-dimensional-vector-return-sigsegv-sfml-game", "title": "Two dimensional vector return SIGSEGV. SFML Game", "body": "<p>I've just written a code, which loads tilemap from .txt file. All was good and my \"game\" compiled. After this I wrote code which was responisble for adding object like House on the map. \nNow code compile, but when I launch this, there is SIGSEGV error. I'm working with SFML 2.4.2. Whats up? The debugger sends me to 780 linetypes stl_vector.h and also to line in Level.cpp:</p>\n\n<pre><code>tiles[i][j].setTexture(tekstury[tiles_atributes[i][j].type])\n</code></pre>\n\n<h1>Level.h</h1>\n\n<pre><code>class Object;\n\nclass Level\n{\npublic:\n\n    Level();\n    Level(std::string filename);\n\n    void loadFromFile(std::string filename, Object &amp;object);        //load level from .txt\n\n    ~Level(void);\n\n\n    enum FieldType {\n        GRASS,\n        STONE,\n        WATER,\n        WATER_1,\n        WATER_2,\n        WATER_3,\n        WATER_4,\n        GRASS_BLOCK};\n\n    struct Tile\n    {\n        FieldType type;\n        bool isWall;\n    };\n\n    int width;\n    int height;\n\n    const static int tile_width = 40;       //width and height of single tile\n    const static int tile_height = 40;\n\n    sf::Texture tekstury[7];\n    std::vector &lt;std::vector &lt; sf::Sprite &gt; &gt; tiles;\n    std::vector &lt; std::vector &lt; Tile &gt; &gt; tiles_atributes;\n\n};\n\nclass Object  \n{\n    public:\n\n    int l;\n    Object();\n    ~Object();\n\n    std::vector &lt;sf::Texture&gt; objects_textures;\n    std::vector &lt;sf::Sprite&gt; objects_sprites;\n    /*std::vector &lt;std::vector&lt;sf::Sprite&gt;&gt; additional_sprites;*/\n};\n</code></pre>\n\n<h1>Level.cpp</h1>\n\n<pre><code>void Level::loadFromFile(std::string filename, Object &amp;object)\n{\n\n    std::fstream file;\n    file.open(filename, std::ios::in);      \n\n    if (!file.is_open())\n    {\n        std::cout &lt;&lt; \"Not found \" + filename;\n        return;\n    }\n\n\n    file &gt;&gt; width &gt;&gt; height;\n\n\n    tiles.resize(height);\n    tiles_atributes.resize(height);\n    for (int i = 0; i &lt; height; i++)\n    {\n        tiles[i].resize(width);\n        tiles_atributes[i].resize(width);\n    }\n\n\n    for (int y = 0; y &lt; height; y++)\n    {\n        for (int x = 0; x &lt; width; x++)\n        {\n\n            int tmp = 0;\n            file &gt;&gt; tmp;\n\n            tiles_atributes[y][x].type = FieldType(tmp);\n\n            if(tmp==2 || tmp==3 ||\n                    tmp==4 || tmp==5 ||\n                    tmp==6)\n                tiles_atributes[y][x].isWall = true;\n\n            else\n                tiles_atributes[y][x].isWall = false;\n        }\n    }\n\n    int j=0;\n\n    for (int i = 0; i &lt;8; i++)\n    {\n        std::stringstream ss;\n        ss&lt;&lt; \"Img/Kafelki/tekstura\" &lt;&lt; i &lt;&lt;\".png\";\n        std::string zrodlo;\n        ss&gt;&gt;zrodlo;\n\n        tekstury[i].loadFromFile(zrodlo);\n\n        j++;\n    }\n\n\n\n    for (int i = 0; i &lt; height; i++)\n    {\n        for (int j = 0; j &lt; width; j++)\n        {\n            tiles[i][j].setTexture(tekstury[tiles_atributes[i][j].type]);\n            tiles[i][j].setPosition(j*tile_width, i*tile_height);\n        }\n    }\n\n    int m=0;\n    int p=0;\n\n    while (!file.eof())\n    {\n\n        std::string name;        // nazwa specjalnego Objectu\n        file &gt;&gt; name;\n        std::cout&lt;&lt; name;\n\n        if (name == \"[House]\")\n        {\n            unsigned short x, y;\n            file &gt;&gt; x &gt;&gt; y;\n            m++;\n\n\n            object.objects_sprites.resize(m);\n            object.objects_sprites[p].setTexture(object.objects_textures[0]);\n            object.objects_sprites[p].setPosition(x, y);\n\n            int ob_height= object.objects_sprites[p].getGlobalBounds().height;\n            int ob_width= object.objects_sprites[p].getGlobalBounds().width;\n\n            int point_x=object.objects_sprites[p].getGlobalBounds().left;\n            int point_y=object.objects_sprites[p].getGlobalBounds().top;\n\n            for (int i = point_y/tile_height; i &lt; ob_height/tile_height; i++)\n            {\n                for (int j = point_x/tile_width; j &lt; ob_width/tile_width; j++)\n                {\n                    tiles_atributes[i][j].type = FieldType(7);\n                }\n            }\n\n            for (int i = point_y/tile_height; i &lt; ob_height/tile_height; i++)\n            {\n                for (int j = point_x/tile_width; j &lt; ob_width/tile_width; j++)\n                {\n                    tiles[i][j].setTexture(tekstury[tiles_atributes[i][j].type]);\n                }\n            }\n\n\n\n            p++;\n\n        }\n\n    }\n\n    file.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "language-lawyer"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1511386307, "post_id": 47444081, "comment_id": 81843564, "body": "I&#39;m 99% sure that they have to be the same size. E.g. there&#39;s <code>std::byte</code>, which is just <code>enum class byte : unsigned char</code> (can&#39;t remember signed or unsigned), and it&#39;s guaranteed to be the same size. I&#39;m not sure where it is in the standard, though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1511386397, "post_id": 47444081, "comment_id": 81843603, "body": "What size would it be otherwise?"}, {"owner": {"reputation": 878, "user_id": 6209703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fCEFLG7A_SE/AAAAAAAAAAI/AAAAAAAAAK4/dyc-zQvZ2DU/photo.jpg?sz=128", "display_name": "Jan Tu\u0161il", "link": "https://stackoverflow.com/users/6209703/jan-tu%c5%a1il"}, "edited": false, "score": 0, "creation_date": 1511386529, "post_id": 47444081, "comment_id": 81843655, "body": "@NeilButterworth any larger? It has to be at least as large as the UT, because it has to store all its values."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1511386933, "post_id": 47444081, "comment_id": 81843821, "body": "I  think there are arguments that say it could be smaller - for example, if an enum has a only two values, it can be stored in  a char, but the specified underlying type might be an int. Note I&#39;m <i>not</i> saying this is what happens."}, {"owner": {"reputation": 878, "user_id": 6209703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fCEFLG7A_SE/AAAAAAAAAAI/AAAAAAAAAK4/dyc-zQvZ2DU/photo.jpg?sz=128", "display_name": "Jan Tu\u0161il", "link": "https://stackoverflow.com/users/6209703/jan-tu%c5%a1il"}, "edited": false, "score": 0, "creation_date": 1511389413, "post_id": 47444081, "comment_id": 81844836, "body": "@NeilButterworth That may be true for plain old C enums (aka unscoped enums whose UT is not fixed) ."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511392027, "post_id": 47444081, "comment_id": 81845730, "body": "1.  It&#39;s in the standard. 2. It&#39;s in the standard."}], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 2, "last_activity_date": 1511388688, "last_edit_date": 1511388688, "creation_date": 1511387448, "answer_id": 47444410, "question_id": 47444081, "link": "https://stackoverflow.com/questions/47444081/in-c-does-the-size-of-an-enumeration-have-to-be-equal-to-the-size-of-its-unde/47444410#47444410", "title": "In C++, does the size of an enumeration have to be equal to the size of its underlying type?", "body": "<p>Taken from: <a href=\"https://stackoverflow.com/questions/1122096/what-is-the-underlying-type-of-a-c-enum\">What is the underlying type of a c++ enum?</a>, An older C++ standard stated at 7.2/5:</p>\n\n<blockquote>\n  <p>The underlying type of an enumeration is an integral type that can\n  represent all the enumerator values defined in the enumeration. It is\n  implementation-defined which integral type is used as the underlying\n  type for an enumeration except that the underlying type shall not be\n  larger than int unless the value of an enu- merator cannot fit in an\n  int or unsigned int. If the enumerator-list is empty, the underlying\n  type is as if the enumeration had a single enumerator with value 0.\n  The value of sizeof() applied to an enu- meration type, an object of\n  enumeration type, or an enumerator, is the value of sizeof() applied\n  to the underlying type.</p>\n</blockquote>\n\n<p>From <code>draft n4606</code> the closest I could find is 7.2/7 + 8 which states:</p>\n\n<blockquote>\n  <p>7) For an enumeration whose underlying type is not fixed, the underlying\n  type is an integral type that can represent all the enumerator values\n  defined in the enumeration. If no integral type can represent all the\n  enumerator values, the enumeration is ill-formed. It is\n  implementation-defined which integral type is used as the underlying\n  type except that the underlying type shall not be larger than int\n  unless the value of an enumerator cannot fit in an int or unsigned\n  int. If the enumerator-list is empty, the underlying type is as if the\n  enumeration had a single enumerator with value 0.</p>\n  \n  <p>8) For an enumeration whose underlying type is fixed, the values of the enumeration are the\n  values of the underlying type. Otherwise, for an enumeration where\n  emin is the smallest enumerator and emax is the largest, the values of\n  the enumeration are the values in the range bmin to bmax, defined as\n  follows: Let K be 1 for a two\u2019s complement representation and 0 for a\n  ones\u2019 complement or sign-magnitude representation. bmax is the\n  smallest value greater than or equal to max(|emin| \u2212 K, |emax|) and\n  equal to 2M \u2212 1, where M is a non-negative integer. bmin is zero if\n  emin is non-negative and \u2212(bmax + K) otherwise. The size of the\n  smallest bit-field large enough to hold all the values of the\n  enumeration type is max(M, 1) if bmin is zero and M + 1 otherwise. It\n  is possible to define an enumeration that has values not defined by\n  any of its enumerators. If the enumerator-list is empty, the values of\n  the enumeration are as if the enumeration had a single enumerator with\n  value 0</p>\n</blockquote>\n\n<p>On the one hand it seems close enough, on the other hand, the specific demand for the <code>sizeof()</code> operator was removed.\nStill I think it is safe enough to state that answer for both the questions is yes.</p>\n"}, {"comments": [{"owner": {"reputation": 878, "user_id": 6209703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fCEFLG7A_SE/AAAAAAAAAAI/AAAAAAAAAK4/dyc-zQvZ2DU/photo.jpg?sz=128", "display_name": "Jan Tu\u0161il", "link": "https://stackoverflow.com/users/6209703/jan-tu%c5%a1il"}, "edited": false, "score": 0, "creation_date": 1511389803, "post_id": 47444768, "comment_id": 81844973, "body": "Thanks. I&#39;ve found this too. It says &quot;its underlying type&quot;, so i would say it only defines an underlying type for wchar_t in similar fashion  to 7.2/5 for enums."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 878, "user_id": 6209703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fCEFLG7A_SE/AAAAAAAAAAI/AAAAAAAAAK4/dyc-zQvZ2DU/photo.jpg?sz=128", "display_name": "Jan Tu\u0161il", "link": "https://stackoverflow.com/users/6209703/jan-tu%c5%a1il"}, "edited": false, "score": 0, "creation_date": 1511390031, "post_id": 47444768, "comment_id": 81845061, "body": "@JanTu\u0161il: yes, but the text differs a little bit. Here, it&#39;s &quot;called its underlying type&quot;, so can be interpreted in a way meaning &quot;underlying type has these attributes, that&#39;s the definition&quot; (not just for wchar_t). For enums, they don&#39;t say this way. But yeah, one can interpret it like you say, too. The standard is unclear here, should be improved. Even if you accept this definition, the answer for 1. is not 100% precise, as nowhere is written that the underlying repr should be the same. But it would be very strange if it wasn&#39;t (why would it have the name &quot;underlying&quot; then?)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392369, "post_id": 47444768, "comment_id": 81845824, "body": "I would say that this quote only defines &quot;underlying type&quot; for wchar_t"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511392814, "post_id": 47444768, "comment_id": 81845958, "body": "M.M: it&#39;s unclear for me. The fact that the index for &quot;underlying type&quot; refers here, supports this is the definition. On the other hand, it&#39;s written in <code>wchar_t</code> context, so it can define just for <code>wchar_t</code>. This definition should have its own bullet point. This should be clarified. But to be honest, I don&#39;t think that the definition for underlying type should differ for various types (and I hope this is the intention of the committee too). C++ is insanely complex, let&#39;s not complicate this further."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1591834879, "post_id": 47444768, "comment_id": 110210404, "body": "Also, I don&#39;t think &quot;same size, signedness and alignment requirements&quot; guarantees identical representation. For example an enum might be big-endian while the underlying type is little-endian, and those three equivalences still hold."}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 1, "last_activity_date": 1511389367, "creation_date": 1511389367, "answer_id": 47444768, "question_id": 47444081, "link": "https://stackoverflow.com/questions/47444081/in-c-does-the-size-of-an-enumeration-have-to-be-equal-to-the-size-of-its-unde/47444768#47444768", "title": "In C++, does the size of an enumeration have to be equal to the size of its underlying type?", "body": "<p>I've searched the standard, and this is best I could find (I know this may not be adequate):</p>\n\n<p><em>Underlying type</em> is defined implicitly here (3.9.1/5 of C++14):</p>\n\n<blockquote>\n  <p>Type wchar_t is a distinct type whose values can represent distinct\n  codes for all members of the largest extended character set speci\ufb01ed\n  among the supported locales (22.3.1). Type wchar_t <strong>shall have the same\n  size, signedness, and alignment requirements (3.11) as one of the\n  other integral types, called its underlying type</strong>. Types char16_t and\n  char32_t denote distinct types with the same size, signedness, and\n  alignment as uint_least16_t and uint_least32_t, respectively, in\n  &lt;cstdint&gt;, called the underlying types.</p>\n</blockquote>\n\n<p>This definition is about <code>wchar_t</code>, but I think it's safe to say that that's the definition for <em>underlying type</em>.\n(at least, that's the best definition the standard gives. Besides, the index of C++14 standard for <em>underlying type</em> refers to here)</p>\n\n<p>That means:</p>\n\n<ol>\n<li><p>the representation must be the same</p></li>\n<li><p>size must be equal</p></li>\n</ol>\n\n<p>(But I do think that <em>underlying type</em> should be defined better in the standard)</p>\n"}], "owner": {"reputation": 878, "user_id": 6209703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fCEFLG7A_SE/AAAAAAAAAAI/AAAAAAAAAK4/dyc-zQvZ2DU/photo.jpg?sz=128", "display_name": "Jan Tu\u0161il", "link": "https://stackoverflow.com/users/6209703/jan-tu%c5%a1il"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1511389367, "creation_date": 1511385904, "question_id": 47444081, "link": "https://stackoverflow.com/questions/47444081/in-c-does-the-size-of-an-enumeration-have-to-be-equal-to-the-size-of-its-unde", "title": "In C++, does the size of an enumeration have to be equal to the size of its underlying type?", "body": "<p>I often assume that size of an enumeration is the same as the size of its underlying type. But is it mandated by the standard?</p>\n\n<p>The standard (C++14, n4296) says that every enumeration has an underlying type (7.2/5). The standard also says that objects are represented as sequences of bytes, and that the size of an object is related to its representation:</p>\n\n<blockquote>\n  <p>3.9/4 The object representation of an object of type T is the sequence of N\n  unsigned char objects taken up by the object of type T, where N equals\n  sizeof(T).</p>\n  \n  <p>5.3.3/1 The sizeof operator yields the number of bytes in the object\n  representation of its operand.</p>\n</blockquote>\n\n<p>However, I was not able to find any relation between an enum's underlying type and the object representation. Is there any? If not, than I would argue that sizeof of an enumeration does not have to be sizeof of its underlying type.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Is there any relation between an enum's underlying type and its object representation?</p></li>\n<li><p>Does the standard really require that <code>sizeof(std::underlying_type_t&lt;E&gt;) == sizeof(E)</code> for any enumeration E?</p></li>\n</ol>\n"}, {"tags": ["c++", "numbers", "parity"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1511386025, "post_id": 47444058, "comment_id": 81843450, "body": "Can you provide a test case where #2 does not work?"}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1511386139, "post_id": 47444058, "comment_id": 81843498, "body": "I am not allowed to see the tests on this problem and I could not find any cases on paper on which the second statement does not work."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511386317, "post_id": 47444058, "comment_id": 81843572, "body": "What types are <code>a</code> and <code>b</code>?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1511386541, "post_id": 47444058, "comment_id": 81843661, "body": "I think the problem must be in code you haven&#39;t posted. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1511386766, "post_id": 47444058, "comment_id": 81843751, "body": "Try with negatives and positive/negative mixes."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1511386998, "post_id": 47444058, "comment_id": 81843851, "body": "@Yunnosch: I bet that&#39;s it."}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1511387018, "post_id": 47444058, "comment_id": 81843863, "body": "@Yunnosch, I have tried and I can not see anything wrong in both cases."}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1511387032, "post_id": 47444058, "comment_id": 81843870, "body": "@FredLarson, this is the problem that I am talking about: <a href=\"https://www.pbinfo.ro/?pagina=probleme&amp;id=1366\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511387044, "post_id": 47444058, "comment_id": 81843875, "body": "@1201ProgramAlarm, they are of the type int."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1511387064, "post_id": 47444058, "comment_id": 81843884, "body": "I found differences. For example, -49943 8833."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1511387072, "post_id": 47444058, "comment_id": 81843888, "body": "Right.  And what result do you get when you take the remainder of a negative number?"}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1511387495, "post_id": 47444058, "comment_id": 81844055, "body": "@FredLarson, if I use your example I do not see anything wrong. <code>-49943 % 2 = 1</code> and <code>8833 % 2 = 1</code>, so both numbers have the same parity and if I sum up them, I get <code>-49943 + 8833 = -41110</code>. <code>-41110 % 2 = 0</code>, so, again, they have the same parity."}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511387525, "post_id": 47444058, "comment_id": 81844067, "body": "@1201ProgramAlarm, the remainder is a positive number."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1511387598, "post_id": 47444058, "comment_id": 81844098, "body": "Are you computing that, or is C++ computing that? I get <code>-49943%2 == -1</code>."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 2, "creation_date": 1511387599, "post_id": 47444058, "comment_id": 81844100, "body": "Nope.  It is unspecified in the language if it is negative or positive.  On many hardware platforms, including x86, it will be a negative number."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1511387929, "post_id": 47444058, "comment_id": 81844249, "body": "<a href=\"https://stackoverflow.com/q/11630321/10077\">stackoverflow.com/q/11630321/10077</a>"}, {"owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "edited": false, "score": 0, "creation_date": 1511388203, "post_id": 47444058, "comment_id": 81844368, "body": "Thanks for the information! It is very useful. But if you sum the numbers in your example, you also get a negative number, so even my first line of code (which worked on all tests) should not work in this case."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1511388507, "post_id": 47444058, "comment_id": 81844495, "body": "Only if it&#39;s odd, and then the sign doesn&#39;t matter in the first case. -1 is still not 0."}], "answers": [{"tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 5, "last_activity_date": 1511389595, "last_edit_date": 1511389595, "creation_date": 1511389042, "answer_id": 47444712, "question_id": 47444058, "link": "https://stackoverflow.com/questions/47444058/which-is-the-correct-way-to-determine-if-two-numbers-have-the-same-parity/47444712#47444712", "title": "Which is the correct way to determine if two numbers have the same parity?", "body": "<p>I would not recommend either of the methods in your post, you should use one of these instead:</p>\n\n<pre><code>if ((a &amp; 1) == (b &amp; 1)) {} // this is clearer\n\nif (((a ^ b) &amp; 1) == 0) {} // this is faster\n\nif (!((a ^ b) &amp; 1)) {}     // this is as fast as faster\n</code></pre>\n\n<p>These depend on the fact that bit 0 will be set for odd values, even if negative.  Avoid integer division (and modulo) whenever possible, it's one of the slowest instructions on any CPU.</p>\n"}], "owner": {"reputation": 111, "user_id": 5640663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c7df4feea51fa18244bc1c57589824?s=128&d=identicon&r=PG", "display_name": "Tudor G\u0103l\u0103\u021ban", "link": "https://stackoverflow.com/users/5640663/tudor-g%c4%83l%c4%83%c8%9ban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 47444712, "answer_count": 1, "score": 5, "last_activity_date": 1511389595, "creation_date": 1511385735, "question_id": 47444058, "link": "https://stackoverflow.com/questions/47444058/which-is-the-correct-way-to-determine-if-two-numbers-have-the-same-parity", "title": "Which is the correct way to determine if two numbers have the same parity?", "body": "<p>I found two solutions to find out if two numbers have the same parity (both are odd numbers or both are even). In C++, they look like this:</p>\n\n<pre><code>if ((a+b)%2 == 0)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (a%2 == b%2)\n</code></pre>\n\n<p>The problem is that the first one works on 100% of cases and the second one only on 80% of the cases (the tests of a problem that I have submitted on a website) and I do not understand why. For me, both lines of code should work fine on all cases. Can somebody explain me why does the first line of code work in all cases and the second one does not? And which method (those showed by me or another) would you recommend?</p>\n"}, {"tags": ["c++", "unit-testing", "misra"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511386281, "post_id": 47443981, "comment_id": 81843548, "body": "It&#39;s a bit unclear, what you want to test actually. Do you want to ensure that a number of calls to <code>trigger()</code> is made from the <code>Spectrometer</code> class?"}], "answers": [{"comments": [{"owner": {"reputation": 240, "user_id": 6726187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d783a5831e3bd0f83312c986b071a212?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/6726187/nikolai"}, "edited": false, "score": 0, "creation_date": 1511419538, "post_id": 47444290, "comment_id": 81853231, "body": "Thank you for giving the full solution as an example. I wanted to avoid passing in the FlashLamp, because in the real system there are many more components so I did not think in this direction.  However your solution is so good, that I think I just need to create a compound object with all the components and pass this in."}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 2, "last_activity_date": 1511386939, "creation_date": 1511386939, "answer_id": 47444290, "question_id": 47443981, "link": "https://stackoverflow.com/questions/47443981/unit-test-a-call-to-function-of-instance-variable/47444290#47444290", "title": "Unit test a call to function of instance variable", "body": "<p>The idiomatic way in <em>unit testing</em> is to use <em>interfaces</em> and <em>Mock Classes</em>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// The interface definition\nstruct IFlashLamp {\n    virtual ~IFlashLamp() {}\n    virtual void trigger() = 0;\n};\n\nclass FlashLamp : public IFlashLamp \n{\npublic:\n    virtual void trigger() override {\n        std::cout &lt;&lt; \"Trigger FlashLamp\" &lt;&lt; std::endl;\n    }\n};\n\nclass Spectrometer\n{\npublic:\n    IFlashLamp&amp; mFlashLamp;\n\n    Spectrometer(IFlashlamp&amp; flashLamp) : mFlashLamp(flashLamp) {}\n    void foo(){\n        for( int i=0; i&lt;5; i++ ){\n            mFlashLamp.trigger();\n        }\n    }\n\n};\n</code></pre>\n\n<hr>\n\n<p>You'll implement the interface with a mock class, that allows you to inspect the expectations regarding calls to the interface:</p>\n\n<pre><code>class FlashLampMock : public IFlashlamp {\n    int triggerCallCounter;\npublic:\n    FlashLampMock() : triggerCallCounter(0) {}\n    virtual void trigger() override {\n        ++triggerCallCounter;\n    }\n    int getTriggerCallCounter() const { return triggerCallCounter; }\n};\n</code></pre>\n\n<hr>\n\n<p>This is the unit test then:</p>\n\n<pre><code>int main(){\n    FlashLampMock flashLampMock;\n    Spectrometer S(FlashLampMock);\n    S.foo();\n    assert(flashLampMock.getTriggerCallCounter() == 5);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 240, "user_id": 6726187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d783a5831e3bd0f83312c986b071a212?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/6726187/nikolai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 47444290, "answer_count": 1, "score": 3, "last_activity_date": 1511386939, "creation_date": 1511385294, "question_id": 47443981, "link": "https://stackoverflow.com/questions/47443981/unit-test-a-call-to-function-of-instance-variable", "title": "Unit test a call to function of instance variable", "body": "<p>I have some C++ code similar to the example given below. I would like to write a unit test to verify that mFlashLamp.trigger is called exactly five times. \nHowever, up to now I was not able to figure out a good way to do this. </p>\n\n<p>I have the following restraints: \nCompliance to Misra / GoogleTest / GoogleMock</p>\n\n<pre><code>include &lt;iostream&gt;\n\nclass FlashLamp\n{\npublic:\n    virtual void trigger(){\n        std::cout &lt;&lt; \"Trigger FlashLamp\" &lt;&lt; std::endl;\n    }\n};\n\nclass Spectrometer\n{\npublic:\n    FlashLamp mFlashLamp;\n\n    void foo(){\n        for( int i=0; i&lt;5; i++ ){\n            mFlashLamp.trigger();\n        }\n    }\n\n};\n\nint main(){\n    Spectrometer S;\n    S.foo();\n    return 0;\n}\n</code></pre>\n\n<p>Does anybody have a good and clean solution for a unit test. \nOne solution I can think of is to </p>\n\n<pre><code>class Spectrometer\n{\npublic:\n    FlashLamp mFlashLamp;\n    FlashLamp* pFlashLamp;\n}\n</code></pre>\n\n<p>have an additional pointer to the instance variable and use this to access the trigger. But this would mean some code bloat as it requires a null pointer check on every dereference. \nDoes anybody have an idea for a better solution. </p>\n\n<p>PS: \nI really tried to come up with a good title but couldn't. If someone has any improvements please feel free to edit it. </p>\n"}, {"tags": ["c++", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1511385348, "post_id": 47443922, "comment_id": 81843113, "body": "You can <a href=\"https://stackoverflow.com/a/13787502/3484570\">check if a member exists</a> (maybe not the best link). Not so sure about free functions."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1519350823, "post_id": 47443922, "comment_id": 84887009, "body": "@Justin - both answers were good, but I didn&#39;t accept one immediately since I hadn&#39;t tried them out, and then forgot! I accepted the one now that had a C++11 solution, since that&#39;s what I asked for and the other one relied on newer features. Thanks for the poke!"}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 3758488, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9de1f72ec724e0a9205efaf66af4bc50?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/3758488/steven"}, "edited": false, "score": 0, "creation_date": 1602184729, "post_id": 47444032, "comment_id": 113648233, "body": "This solution generally works for me, but I have the logic reversed such that the free-function lookup is performed first. However, if the free function isn&#39;t defined BEFORE the has_free method, has_free fails, even if the free function is defined prior to the invocation of call_foo. This is MSDEV2019. Any insight?  I will admit this behaviour is different between call_foo&lt;int&gt; and call_foo&lt;MyObject&gt;. I wonder if built-ins are causing me trouble."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 557, "user_id": 3758488, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9de1f72ec724e0a9205efaf66af4bc50?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/3758488/steven"}, "edited": false, "score": 0, "creation_date": 1602188365, "post_id": 47444032, "comment_id": 113649642, "body": "@Steven I don&#39;t know what MSDEV2019 is, but if you can use C++20, it&#39;s easiest to use concepts. Something like <code>requires(T t) { foo(t); }</code>. Otherwise, I&#39;d want to concrete example to play around with to get the behavior you desire. If you want to ask another question on this variation, perhaps that would be appropriate. I wouldn&#39;t mind if you pinged me with a link to said question, but you&#39;ll probably get good answers regardless."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 18, "last_activity_date": 1511387783, "last_edit_date": 1511387783, "creation_date": 1511385602, "answer_id": 47444032, "question_id": 47443922, "link": "https://stackoverflow.com/questions/47443922/calling-a-member-function-if-it-exists-falling-back-to-a-free-function-and-vice/47444032#47444032", "title": "Calling a member function if it exists, falling back to a free function and vice-versa", "body": "<p>This isn't too hard. There are many methods of checking whether an arbitrary expression is valid. You can combine this with <code>if constexpr</code> in C++17 or tag dispatch earlier to get the behaviour you desire.</p>\n\n<p>This uses C++17, but everything can be done in prior versions:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\n// This is just one way to write a type trait, it's not necessarily\n// the best way. You could use the Detection Idiom, for example\n// (http://en.cppreference.com/w/cpp/experimental/is_detected).\ntemplate &lt;typename T, typename = void&gt;\nstruct has_member_fn\n    : std::false_type\n{};\n\n// std::void_t is a C++17 library feature. It can be replaced\n// with your own implementation of void_t, or often by making the\n// decltype expression void, whether by casting or by comma operator\n// (`decltype(expr, void())`)\ntemplate &lt;typename T&gt;\nstruct has_member_fn&lt;T,\n    std::void_t&lt;decltype(std::declval&lt;T&gt;().foo())&gt;&gt;\n    : std::true_type\n{};\n\n\ntemplate &lt;typename T, typename = void&gt;\nstruct has_free_fn\n    : std::false_type\n{};\n\ntemplate &lt;typename T&gt;\nstruct has_free_fn&lt;T,\n    // Be wary of ADL. You're basically asking the compiler,\n    // \"What's the result of foo(T{}) if I were to call that\n    // here?\" That syntax can call functions via ADL\n    std::void_t&lt;decltype(foo(std::declval&lt;T&gt;()))&gt;&gt;\n    : std::true_type\n{};\n\n\ntemplate &lt;typename T&gt;\nint call_foo(T t) {\n    // if constexpr is C++17, but you can use tag dispatch to\n    // do the same in prior versions\n    if constexpr (has_member_fn&lt;T&gt;::value) {\n        return t.foo();\n    } else {\n        // you could make this an `else if constexpr (has_free_fn&lt;T&gt;::value)`\n        // and provide a better case for if neither exists\n        return foo(t);\n    }\n}\n</code></pre>\n\n<p><sup><a href=\"https://godbolt.org/g/NNULZ2\" rel=\"noreferrer\">Live on Godbolt</a></sup></p>\n"}, {"comments": [{"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1519432585, "post_id": 47444208, "comment_id": 84923167, "body": "I accepted this answer, but <a href=\"https://stackoverflow.com/a/47444032/149138\">the other one</a> deserves a look too if you are on C++17 or above."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1519435309, "post_id": 47444208, "comment_id": 84923653, "body": "@BeeOnRope - I&#39;m agree: I&#39;ve up-voted the other one."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 8, "last_activity_date": 1511389623, "last_edit_date": 1511389623, "creation_date": 1511386510, "answer_id": 47444208, "question_id": 47443922, "link": "https://stackoverflow.com/questions/47443922/calling-a-member-function-if-it-exists-falling-back-to-a-free-function-and-vice/47444208#47444208", "title": "Calling a member function if it exists, falling back to a free function and vice-versa", "body": "<p>Pre C++17 you can's compile/not compile different parts of the same function with <code>if constexpr</code>.</p>\n\n<p>So, pre C++17, you have to do, somewhere, two different functions.</p>\n\n<p>An example: if you prepare a couple of helper functions</p>\n\n<pre><code>template &lt;typename T&gt;\nauto call_foo_h (T t, int) -&gt; decltype( t.foo() )\n { return t.foo(); }\n\ntemplate &lt;typename T&gt;\nauto call_foo_h (T t, long) -&gt; decltype( foo(t) )\n { return foo(t); }\n</code></pre>\n\n<p>that are SFINAE enabled only if <code>T::foo()</code> exist (the first one) or if a free <code>foo()</code> exist (the second one), you can write <code>call_foo()</code> as follows</p>\n\n<pre><code>template &lt;typename T&gt;\nint call_foo (T const &amp; t)\n { return call_foo_h(t, 0); }\n//......................^ a int value\n</code></pre>\n\n<p>Observe the second (unused) parameter in <code>call_foo_h()</code>; an <code>int</code> in the <code>T::foo()</code> version, a <code>long</code> in the free version.</p>\n\n<p>Here is the trick: calling <code>call_foo_h</code> with an <code>int</code> (<code>0</code>) you call preferably the <code>int</code> version (the <code>T::foo()</code>), when available, and the <code>long</code> version otherwise.</p>\n\n<blockquote>\n  <p>How about the reverse case: preferring a free function <code>foo</code> before the member function?</p>\n</blockquote>\n\n<p>In this case write <code>call_foo()</code> as follows</p>\n\n<pre><code>template &lt;typename T&gt;\nint call_foo (T const &amp; t)\n { return call_foo_h(t, 0L); }\n//......................^^ a long value\n</code></pre>\n\n<p>That is: call <code>call_foo_h</code> with a <code>long</code> value, giving the precedence to the free <code>foo()</code> version.</p>\n"}], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 5, "accepted_answer_id": 47444208, "answer_count": 2, "score": 13, "last_activity_date": 1511389623, "creation_date": 1511385010, "last_edit_date": 1511388201, "question_id": 47443922, "link": "https://stackoverflow.com/questions/47443922/calling-a-member-function-if-it-exists-falling-back-to-a-free-function-and-vice", "title": "Calling a member function if it exists, falling back to a free function and vice-versa", "body": "<p>Can I write a template function taking an argument T that calls a member function <code>foo</code> if it exists on <code>T</code>, and if it doesn't calls a free function <code>foo(T)</code> instead (and fails to compile if neither exists)?</p>\n\n<p>Something like:</p>\n\n<pre><code>template&lt;typename T&gt;\nint call_foo(T t) {\n// if T::foo() exists\n    return t.foo();\n// else return foo(t);\n}\n</code></pre>\n\n<p>How about the reverse case: preferring a free function <code>foo</code> before the member function? I cannot use any features introduced after C++11.</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1511383588, "post_id": 47443602, "comment_id": 81842298, "body": "The compiler can figure it out the proper template arguments itself : <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/template_argument_deducti&zwnj;&#8203;on</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1511383607, "post_id": 47443602, "comment_id": 81842305, "body": "The function <code>duration_cast</code> has 3 template arguments. If you specify none of them, the compiler will attempt to figure them out via <i>template argument deduction</i>. However, you can specify the first template arguments, as you can see here. The remainder still undergo template argument deduction"}, {"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1511384582, "post_id": 47443602, "comment_id": 81842743, "body": "The result of t2-t1 helps the compiler figure out Rep and Period"}], "answers": [{"comments": [{"owner": {"reputation": 2659, "user_id": 581085, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5ef2ca8729e462595f1500b554ef95e0?s=128&d=identicon&r=PG", "display_name": "Dragno", "link": "https://stackoverflow.com/users/581085/dragno"}, "edited": false, "score": 0, "creation_date": 1511464016, "post_id": 47447425, "comment_id": 81878709, "body": "So we have something like partial function application but at the type level. We can partially apply type values and the compiler will infer the rest for us. Very nice."}, {"owner": {"reputation": 1832, "user_id": 586033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc2333147bdab568184e55ff0eff5d9?s=128&d=identicon&r=PG", "display_name": "Breno Salgado", "link": "https://stackoverflow.com/users/586033/breno-salgado"}, "edited": false, "score": 0, "creation_date": 1614019870, "post_id": 47447425, "comment_id": 117251189, "body": "I&#39;m thinking I&#39;ll never be smart enough for c++ :p"}], "tags": [], "owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "is_accepted": true, "score": 1, "last_activity_date": 1511410243, "creation_date": 1511410243, "answer_id": 47447425, "question_id": 47443602, "link": "https://stackoverflow.com/questions/47443602/how-is-possible-to-give-only-one-type-parameter-in-stdchronoduraction-cast-w/47447425#47447425", "title": "How is possible to give only one type parameter in std::chrono::duraction_cast while the template has 3?", "body": "<p>it is based on the <em>\"Template Arguments Type Deduction\"</em></p>\n\n<p><strong>this is how it works</strong></p>\n\n<p>usually we do:</p>\n\n<pre><code>auto t2 = std::chrono::high_resolution_clock::now();\n// some operations\nauto t1 = std::chrono::high_resolution_clock::now();\n// then\nauto diff = t2 - t1;\n</code></pre>\n\n<p>the type of t2, t1 is:</p>\n\n<pre><code>std::chrono::time_point&lt;std::chrono::high_resolution_clock&gt;\n</code></pre>\n\n<p><strong>std::chrono::time_point</strong>, itself is a template class as follow:</p>\n\n<pre><code>template &lt;typename Clock, typename Duration = typename Clock::duration&gt; time_point;\n</code></pre>\n\n<p>In the type <strong>std::chrono::time_point</strong>, we define the operator- like follow:</p>\n\n<pre><code>template&lt;class C, class D1, class D2&gt;\n    typename std::common_type&lt;D1, D2&gt;::type\n    operator- (const time_point&lt;C,D1&gt;&amp; pt_lhs, const timpe_point&lt;C,D2&gt;&amp; pt_rhs);\n</code></pre>\n\n<p>which is a function that takes two </p>\n\n<pre><code>const time_point&lt;C,D&gt;&amp; \n</code></pre>\n\n<p>and returns a variable of type: </p>\n\n<pre><code>std::common_type&lt;D1, D2&gt;::type\n</code></pre>\n\n<p>the common type between the two duration is a duration itself, i.e, <strong>operator-</strong> returns a variable of type</p>\n\n<pre><code>template &lt;class Rep, class Period = std::ratio&lt;1&gt;&gt; class duration;\n</code></pre>\n\n<p>thus the type of t2 - t1 is:</p>\n\n<pre><code>decltype(t2 - t1) = class duration &lt;class Rep, class Period = std::ratio&lt;1&gt;&gt; \n// &lt;- pseudo code, you cannot write this in C++.\n</code></pre>\n\n<p>so, one of the template argument of the function </p>\n\n<pre><code>std::chrono::duration_cast&lt;class ToDuration, class Rep, class Period&gt; \n</code></pre>\n\n<p>is already defined by the default value</p>\n\n<pre><code>class Period = std::ratio&lt;1&gt;\n</code></pre>\n\n<p>the first argument of this function is defined by the parameter of the function itself:</p>\n\n<pre><code>class ToDuration = decltype(std::chrono::milliseconds);\n</code></pre>\n\n<p>we need to deduce the 2nd template argument of the function <strong>duration_cast</strong>, and we are done.</p>\n\n<pre><code>class Rep = decltype(?)\n</code></pre>\n\n<p>again we deduce it from the return type of the result coming from the <strong>operator-</strong> i.e</p>\n\n<pre><code>decltype(t2 -t1) = template &lt;typename Rep?, class Period = std::ratio&lt;1&gt;&gt;\n</code></pre>\n\n<p>if you check the documentation of the template class <strong>duration</strong> you will find the <strong>class Rep</strong> is implementation defined(relies on the implementer of the STL library .that is. WindowsOS, LinuxOs, MacOs...) and it's either an integer or a float (<strong>arithmetic type</strong>)</p>\n\n<p>Done!!!</p>\n\n<p>all the 3 template arguments are well known for the compiler now:</p>\n\n<pre><code>template &lt;class ToDuration, class Rep, class Period&gt;\n        constexpr ToDuration duration_cast(const duration&lt;Rep,Period&gt;&amp; d);\n// with\n// class ToDuration = std::chrono::milliseconds\n// class Rep = arithmetic type relying on the implementation deduced from \n   the return value of std::chrono::high_resolution_clock::now()\n// class Period = std::ratio&lt;1&gt; by default and it can be something else\n   like std::ratio&lt;0.001&gt; for exple\n</code></pre>\n\n<p>that's it, there is no magic behind it and never settle for this kind of answer : \"IT'S COMPILER MAGIC\" there is no such thing as MAGIC, even MAGIC could be explained scientifically. ;)</p>\n\n<p>Good Luck.</p>\n"}], "owner": {"reputation": 2659, "user_id": 581085, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5ef2ca8729e462595f1500b554ef95e0?s=128&d=identicon&r=PG", "display_name": "Dragno", "link": "https://stackoverflow.com/users/581085/dragno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 47447425, "answer_count": 1, "score": 2, "last_activity_date": 1511410243, "creation_date": 1511383434, "question_id": 47443602, "link": "https://stackoverflow.com/questions/47443602/how-is-possible-to-give-only-one-type-parameter-in-stdchronoduraction-cast-w", "title": "How is possible to give only one type parameter in std::chrono::duraction_cast while the template has 3?", "body": "<p>When we use the std::chrono::duraction_cast we write something like this:</p>\n\n<pre><code> auto int_ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(t2 - t1);\n</code></pre>\n\n<p>we give only one type in the type parameters. But the definition of duration_cast is this:</p>\n\n<pre><code>template &lt;class ToDuration, class Rep, class Period&gt;\nconstexpr ToDuration duration_cast(const duration&lt;Rep,Period&gt;&amp; d);\n</code></pre>\n\n<p>it has three parameters.</p>\n\n<p>How is this possible?</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 0, "creation_date": 1511384147, "post_id": 47443600, "comment_id": 81842561, "body": "It is <code>O(n * m)</code>"}, {"owner": {"reputation": 4258, "user_id": 1993909, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8a4896fd6dc637ba4ecb827021044bdd?s=128&d=identicon&r=PG", "display_name": "Daniel Cheung", "link": "https://stackoverflow.com/users/1993909/daniel-cheung"}, "edited": false, "score": 0, "creation_date": 1513346043, "post_id": 47443600, "comment_id": 82630519, "body": "This question is more suitable on CodeReview. You may migrate your question there."}], "answers": [{"tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 4, "last_activity_date": 1511384591, "creation_date": 1511384591, "answer_id": 47443841, "question_id": 47443600, "link": "https://stackoverflow.com/questions/47443600/c-algorithm-how-can-i-improve-efficiency-of-this-code-big-o/47443841#47443841", "title": "C++ Algorithm: How can I improve efficiency of this code? [Big-O]", "body": "<p>I'll cite Numerical Recipes, chapter 5, because it's fun:</p>\n\n<blockquote>\n  <p>We assume that you know enough never to evaluate a polynomial this\n  way:</p>\n  \n  <p><code>p=c[0]+c[1]*x + c[2]*x*x +c[3]*x*x*x + c[4]*x*x*x*x;</code></p>\n  \n  <p>or (even worse!),</p>\n  \n  <p><code>p=c[0]+c[1]*x+c[2]*pow(x,2.0)+c[3]*pow(x,3.0)+c[4]*pow(x,4.0);</code></p>\n  \n  <p>Come\n  the (computer) revolution, all persons found guilty of such criminal\n  behavior will be summarily executed, and their programs won\u2019t be! It\n  is a matter of taste, however, whether to write</p>\n  \n  <p><code>p=c[0]+x*(c[1]+x*(c[2]+x*(c[3]+x*c[4])));</code></p>\n  \n  <p>or</p>\n  \n  <p><code>p=(((c[4]*x+c[3])*x+c[2])*x+c[1])*x+c[0];</code></p>\n  \n  <p>...</p>\n</blockquote>\n\n<p>At least this will remove the <code>m</code> out of your <code>O(m*n)</code> implementation (where <code>m</code> is the exponent and <code>n</code> the polynomial order).</p>\n"}], "owner": {"reputation": 79, "user_id": 4493414, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-hfZfTyNX05k/AAAAAAAAAAI/AAAAAAAAAG4/yigFrfjGzAg/photo.jpg?sz=128", "display_name": "Shivam Gupta", "link": "https://stackoverflow.com/users/4493414/shivam-gupta"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "closed_date": 1511386582, "answer_count": 1, "score": -3, "last_activity_date": 1511384591, "creation_date": 1511383425, "last_edit_date": 1511384144, "question_id": 47443600, "link": "https://stackoverflow.com/questions/47443600/c-algorithm-how-can-i-improve-efficiency-of-this-code-big-o", "closed_reason": "Needs more focus", "title": "C++ Algorithm: How can I improve efficiency of this code? [Big-O]", "body": "<p>How can I re-write the code below in a way that I can improve his efficiency?</p>\n\n<pre><code>Fraction Polynomial::solve(const Fraction&amp; x) const\n{\n    Fraction rc;\n\n    auto it = poly_.begin();\n    while (it != poly_.end())\n    {\n        Term t = *it;\n        //find x^exp\n        Fraction curr(1, 1);\n        for (int i = 0; i &lt; t.exponent_; i++)\n        {\n            curr = curr * x;\n        }\n        rc += t.coefficient_ * curr;\n        it++;\n\n    }\n    return rc;\n}\n</code></pre>\n\n<p>What is the current Big-O notation for this code? [I think it's O(N^2)]</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1511383959, "post_id": 47443590, "comment_id": 81842474, "body": "Look at <code>std::ostringstream</code>."}, {"owner": {"reputation": 699, "user_id": 5249411, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWaUR.png?s=128&g=1", "display_name": "Aram Becker", "link": "https://stackoverflow.com/users/5249411/aram-becker"}, "edited": false, "score": 0, "creation_date": 1511384033, "post_id": 47443590, "comment_id": 81842514, "body": "Just initialize an empty string before your loop and append your name and your number in every iteration. You can just write text += name + &quot;(&quot; + to_string(number) +&quot;)&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1511384065, "creation_date": 1511384065, "answer_id": 47443724, "question_id": 47443590, "link": "https://stackoverflow.com/questions/47443590/generating-a-string-based-on-vector-data/47443724#47443724", "title": "Generating a string based on vector data", "body": "<p>You can use <code>std::ostringstream</code>:</p>\n\n<pre><code>std::ostringstream out_stream;\nout_stream &lt;&lt; name &lt;&lt; \"(\" &lt;&lt; \"number\" &lt;&lt; \")\";\n//...\nstd::cout &lt;&lt; out_stream.str() &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 0, "last_activity_date": 1511384132, "creation_date": 1511384132, "answer_id": 47443743, "question_id": 47443590, "link": "https://stackoverflow.com/questions/47443590/generating-a-string-based-on-vector-data/47443743#47443743", "title": "Generating a string based on vector data", "body": "<p>Use stringstream</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;utility&gt;\n\nint main()\n{\n\n    std::vector&lt;std::pair&lt;std::string, int&gt;&gt; array;\n    array.push_back(std::make_pair(\"jack\", 10)); //index 0\n    array.push_back(std::make_pair(\"alice\", 15)); //index 1\n    array.push_back(std::make_pair(\"bob\", 20)); //index 2\n\n    std::ostringstream oss;\n    for (auto &amp;el : array)\n    {\n        oss &lt;&lt; el.first &lt;&lt; \"(\" &lt;&lt; el.second &lt;&lt; \")\";\n    }\n\n    std::string text = oss.str();\n    std::cout &lt;&lt; text;\n\n    return 0;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>jack(10)alice(15)bob(20)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7605766, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/aa3ea3dcc543e7128c758ef470caff0a?s=128&d=identicon&r=PG&f=1", "display_name": "Yunus Emre Guney Student", "link": "https://stackoverflow.com/users/7605766/yunus-emre-guney-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 47443743, "answer_count": 2, "score": 0, "last_activity_date": 1511389936, "creation_date": 1511383387, "last_edit_date": 1511389936, "question_id": 47443590, "link": "https://stackoverflow.com/questions/47443590/generating-a-string-based-on-vector-data", "title": "Generating a string based on vector data", "body": "<p>Let's say that i have an unknown size  array like 0,1,2,3...</p>\n\n<pre><code>for(int i = 0; i &lt; array.size(); i++)\n{\n  string name;\n  int number;\n\n  if (array[i] == 0)\n  {\n    name =\"jack\";\n    number=\"10\";\n  }\n  else if (array[i] == 1)\n  {\n    name=\"alice\";\n    number=15\"; \n  }\n  //....\n}\n</code></pre>\n\n<p>Using this data I would like to generate a string like:</p>\n\n<pre><code>string text = name(number)+name(number)+name(number)...\n</code></pre>\n\n<p>There must be  array.size() times name(number) in string</p>\n\n<p>How do I do write code for this?</p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "edited": false, "score": 1, "creation_date": 1511383681, "post_id": 47443545, "comment_id": 81842339, "body": "Why the minus points? What is wrong with this question?"}, {"owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1511389841, "post_id": 47443545, "comment_id": 81844987, "body": "I updated the question to contain some minimal code."}], "answers": [{"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 1, "creation_date": 1511392790, "post_id": 47445073, "comment_id": 81845952, "body": ":) I&#39;ve discovered that &quot;\\x02\\x00\\x00\\x00&quot; is the correct byte order. But you were faster. Anyway, I am glad it is working now."}], "tags": [], "owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1511391517, "last_edit_date": 1511391517, "creation_date": 1511391128, "answer_id": 47445073, "question_id": 47443545, "link": "https://stackoverflow.com/questions/47443545/cut-and-paste-clipboard-exchange-between-qt-application-and-windows-explorer/47445073#47445073", "title": "cut and paste clipboard exchange between Qt application and Windows Explorer", "body": "<p>It seems I found the answer. The byte order was wrong, it has to be little Endian for some reason (the default order in Qt is big Endian). So the code in the example should be:</p>\n\n<pre><code>QByteArray data;\nQDataStream stream(&amp;data, QIODevice::WriteOnly);\nstream.setByteOrder(QDataStream::LittleEndian);\nstream &lt;&lt; dropEffect;\n</code></pre>\n\n<p>This way other file managers are able to interoperate using copy/cut and paste with my Qt application. The reversal process of decoding the clipboard contents is left to the reader (it is not difficult, just reverse the operations done to encode the data to clipboard). Of course it is also necessary to handle copying or moving/deleting of the files which is much more work but it is straightforward. </p>\n\n<p>So I was wrong, I was actually looking for a bug... Thanks to scopchanov for forcing me to write the minimal code! :)</p>\n"}], "owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1454, "favorite_count": 0, "accepted_answer_id": 47445073, "answer_count": 1, "score": 1, "last_activity_date": 1511391517, "creation_date": 1511383178, "last_edit_date": 1511391303, "question_id": 47443545, "link": "https://stackoverflow.com/questions/47443545/cut-and-paste-clipboard-exchange-between-qt-application-and-windows-explorer", "title": "cut and paste clipboard exchange between Qt application and Windows Explorer", "body": "<p>I have a simple file handling widget which can copy/cut/paste selected files from/to clipboard. I would like to be able to exchange files using these commands between this widget and Windows Explorer (potentially other file managers such as Total Commander or Free Commander). I already found that I can store the file names to the clipboard as <code>QList&lt;QUrl&gt;</code> using <code>QMimeData::setUrls()</code> and restore them similarly. This way I am able to copy and paste between my widget and the above mentioned file managers because they seem to use the same format for storing file names. But I do not know how to cut items to clipboard (i.e. delete after the file is pasted). I assume that the receiver (the application which pastes the data) is responsible for deleting the cut files. In that case it must be somehow encoded in the clipboard data, that the files have been cut rather than copied, this information can be retrieved by the receiving application. How is this done? Or is there any other way? I know this is possible because this works perfectly between Windows Explorer and Free Commander. I.e. when you cut files in Window Explorer and paste them to Free Commander, the original file is deleted and vice versa.</p>\n\n<p>UPDATE:\nI found there is also another part of MIME data <code>\"Preferred DropEffect\"</code> which can have value of <code>5</code> (copy) or <code>2</code> (cut). When I set the <code>QByteArray</code> to 4 bytes which correspond to an integer of value <code>5</code> or <code>2</code>, I can distinguish whether Windows Explorer initiated cut or copy. If it is cut, then I can move the file rather than copy. It works well. Unfortunately this still works one way only from Windows Explorer to Qt application. I still have not found why the opposite direction does not work. There are also some other MIME data which are however hard to decode for me. Maybe there is the key.</p>\n\n<p>UPDATE 2: \nMimimal code to reproduce the behvaiour is here. Make sure the file hardcoded in the program exists. Try to run the program and after closing the window open open Windows Explorer go to arbitrary folder where you can write and press Ctrl+V... Then the copy of the file should appear in that directory but it is not deleted from the source directory. The program below uses constant 2 which means cut rather than copy which means the original file should disappear. </p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QClipboard&gt;\n#include &lt;QDataStream&gt;\n#include &lt;QMimeData&gt;\n#include &lt;QUrl&gt;\n#include &lt;QWidget&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication application(argc, argv);\n\n    auto mimeData = new QMimeData;\n\n    // store the URL to files which I want to cut\n    QList&lt;QUrl&gt; urls;\n    urls.append(QUrl::fromLocalFile(\"C:/mypath/myfile.txt\")); // use your path or make sure this file exist\n    mimeData-&gt;setUrls(urls);\n\n    // store drop effect indicating whether I want to cut or copy\n    int dropEffect = 2; // 2 for cut and 5 for copy\n    QByteArray data;\n    QDataStream stream(&amp;data, QIODevice::WriteOnly);\n    stream &lt;&lt; dropEffect;\n    mimeData-&gt;setData(\"Preferred DropEffect\", data);\n\n    QApplication::clipboard()-&gt;setMimeData(mimeData);\n\n    QWidget window;\n    window.show();\n    return application.exec();\n}\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/2889723/how-to-programmatically-cut-copy-get-files-to-from-the-windows-clipboard-in-a-sy\">How to programmatically cut/copy/get files to/from the Windows clipboard in a system standard compliant form?</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776904(v=vs.85).aspx#delete_on_paste\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/bb776904(v=vs.85).aspx#delete_on_paste</a></p>\n"}, {"tags": ["c++", "opencv", "memory", "memory-management"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511386323, "post_id": 47443426, "comment_id": 81843574, "body": "How are you measuring memory consumption? And by &quot;memory&quot;, do you mean RAM or virtual memory (address space)?"}, {"owner": {"reputation": 297, "user_id": 7033055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DgO5C.png?s=128&g=1", "display_name": "yode", "link": "https://stackoverflow.com/users/7033055/yode"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511403274, "post_id": 47443426, "comment_id": 81848389, "body": "@DavidSchwartz The task manager will show the value of memory. I mean that value. But I don&#39;t know which you mean."}], "answers": [{"tags": [], "owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "is_accepted": false, "score": 2, "last_activity_date": 1511385369, "creation_date": 1511385369, "answer_id": 47443993, "question_id": 47443426, "link": "https://stackoverflow.com/questions/47443426/question-about-the-consumption-of-memory-in-opencv/47443993#47443993", "title": "Question about the consumption of memory in OpenCV", "body": "<p>Below - guesswork and hints. This is a large comment. Please dont mark it as answer even if it was helpful in finding/solving the problem. Rather than that, if you manage to find the cause, write your own answer instead. I'll probably remove this one later.</p>\n\n<hr>\n\n<p>Most probably, image/bitmap operations like <code>threshold(img, bin, ..)</code> create copies of the original image. Hard to say how many, but it surely creates at least one, as you can see by the second <code>bin</code> variable. Then goes <code>clone</code> and <code>whiteEdge</code>, so third copy. Also, operations like <code>whiteEdge - bin</code> probably create at least one copy (result) as well. <code>rectangle</code>, <code>dilate</code> and <code>floodfill</code> probably work in-place and use one of the Mat variables passed as workarea and output at the same time.</p>\n\n<p>That means you have at least 4 copies of the image, probably a bit more, but let's say it's 4 * 1.7mb, so ~7mb out of 19mb increase you have observed.</p>\n\n<p>So, we've got 12mb to explain, or so it seems.</p>\n\n<p>First of all, it's possible that the image operations allocate some extra buffers and keep for later reuse. That costs memory, but it's \"amortized\", so it wont cost you again if you do these operations again.</p>\n\n<p>It's also possible that at the moment those image operations were called, that fact might have caused some dynamic libraries to be loaded. That's also a one-time operation that won't cost you the memory if used again.</p>\n\n<p>Next thing to note is that the process and the memory usage as reported by Windows by simple tools is .. not accurate. As the process allocates and relases the memory, the memory consumption reported by Windows usually only increases, and does not decrease upon release. At least not immediatelly. The process may keep some \"air\" or \"vacuum\". There are many causes to this, but the point is that this \"air\" is often reusable when the program tries to allocate memory again. A process, with base memory usage of 30mb, that periodically allocates 20mb and releases 20mb may be displayed by Windows as always taking up 50mb.</p>\n\n<p>Having said that, I have to say I actually doubt in your memory measurements methodology, or at least conclusions from observations. After a single run of your <code>removeBlackEdge</code> you cannot say it consumed that amount of the memory. What you observed is only that the process' working memory pool has grown by that much. This itself does not tell you much.</p>\n\n<p>If you suspect that temporary copies of the image are taking up too much space, try getting rid of them. This may mean things as obvious as writing the code to use less <code>Mat</code> variables and temporaries, or reusing/deallocating bitmaps that are no longer needed and just wait until function ends, or less obvious things like selecting different algorithms or writing your own. You may also try confirming of that's the case by running the program several times with input images of different sizes, and plotting a chart of observed-memory--vs--input-\nsize. If it grows linearly (i.e. \"memory consumption\" is always ~10x input size) then probably that's really some copies.</p>\n\n<p>On the other hand, if you suspect a memory leak, run that <code>removeBlackEdge</code> several times. Hundreds or thousands or millions of times. Observe if the \"memory consumption\" steadily grows overtime or not. If it does, then probably there's a leak. On the other hand, if it grows only once at start and then keeps steady at the same level, then probably there's nothing wrong and it was only some one-time initializations or amortized caches/workspaces/etc.</p>\n\n<p>I'd suggest you do those two tests now. Further work and analysis depends on what you observe during such a long run. Also, I have to note that this piece of code is relatively short and simple. Aren't you optimising a bit too soon? sidenote - be sure to turn on proper optimisations (speed/memory) in the compiler. If you happen to use and observe a \"debug\" version, than you can dismiss your speed/memory observations immediatelly.</p>\n"}], "owner": {"reputation": 49, "user_id": 8944324, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6be9c63e51f7ce1434cc3a7d69e35c3?s=128&d=identicon&r=PG&f=1", "display_name": "Make", "link": "https://stackoverflow.com/users/8944324/make"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1574171129, "creation_date": 1511382720, "last_edit_date": 1574171129, "question_id": 47443426, "link": "https://stackoverflow.com/questions/47443426/question-about-the-consumption-of-memory-in-opencv", "title": "Question about the consumption of memory in OpenCV", "body": "<p>Cross post <a href=\"http://answers.opencv.org/question/178949/problem-about-the-consumption-of-memory/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<hr>\n\n<p>I have such simple code:</p>\n\n<pre><code>//OpenCV 3.3.1 project\n#include&lt;opencv.hpp&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nusing namespace cv;\n\n\nMat removeBlackEdge(Mat img) {\n    if (img.channels() != 1)\n        cvtColor(img, img, COLOR_BGR2GRAY);\n    Mat bin, whiteEdge;\n    threshold(img, bin, 0, 255, THRESH_BINARY_INV + THRESH_OTSU);\n    rectangle(bin, Rect(0, 0, bin.cols, bin.rows), Scalar(255));\n    whiteEdge = bin.clone();\n    floodFill(bin, Point(0, 0), Scalar(0));\n    dilate(whiteEdge - bin, whiteEdge, Mat());\n    return whiteEdge + img;\n}\n\nint main() {               //13.0M\n    Mat emptyImg = imread(\"test.png\", 0);   //14.7M\n    emptyImg = removeBlackEdge(emptyImg);   //33.0M\n    waitKey();\n    return 0;\n}\n</code></pre>\n\n<p>And this is my <a href=\"https://i.stack.imgur.com/MvKja.jpg\" rel=\"nofollow noreferrer\">test.png</a>.\nAs the Windows show, it's size is about <code>1.14M</code>. Of course I know it will be larger when it is read in memory. But I fill cannot accept the huge consumption of memory. \nIf I use F10, I can know the <code>project.exe</code> take up <code>13.0M</code>. I have nothing to say about it\nWhen I run <code>Mat emptyImg = imread(\"test.png\", 0);</code>, the consumption of memory is <code>14.7M</code>. It is normal also.\nBut why when I run <code>emptyImg = removeBlackEdge(emptyImg);</code>, the consumption of memory is up to <code>33.0M</code>??  It mean function <code>removeBlackEdge</code> cost my extra <code>18.3M</code> memory. Can anybody tell me some thing? I cannot totally accept such huge consumption of memory. Is there I miss something? I use new <code>emptyImg</code> to replace the old <code>emptyImg</code>. I think I don't need extra memory to cost?</p>\n\n<p><strong>Ps:</strong> If I want implement to do same thing by my <code>removeBlackEdge</code>( delete that black edge in the image), how to adjust it to cost minimum consumption of memory?</p>\n"}, {"tags": ["c++", "cin"], "answers": [{"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 0, "last_activity_date": 1511383001, "creation_date": 1511383001, "answer_id": 47443490, "question_id": 47443279, "link": "https://stackoverflow.com/questions/47443279/input-data-in-one-line-to-array-of-bool/47443490#47443490", "title": "Input data in one line to array of bool", "body": "<p>You can read the whole input into a string and then convert '1' and '0' <code>char</code>s into <code>bool</code>s:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n\n    std::string input;\n    std::cin &gt;&gt; input;\n\n    std::cout &lt;&lt; \"Input length was: \" &lt;&lt; input.length() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Output: \";\n\n    for (auto c : input)\n    {\n        std::cout &lt;&lt; static_cast&lt;bool&gt;(c - '0');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bayHJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bayHJ.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "reply_to_user": {"reputation": 133, "user_id": 5243736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d46d69989e3b9e5252b33f6f8d6153e?s=128&d=identicon&r=PG&f=1", "display_name": "Prime_Bull", "link": "https://stackoverflow.com/users/5243736/prime-bull"}, "edited": false, "score": 0, "creation_date": 1511389103, "post_id": 47444149, "comment_id": 81844718, "body": "char is in fact 8 (on most architectures) bit integer of the value equivalent to ASCII value of character it holds. The operation subtract ASCII value of character &#39;0&#39; (48) from ASCII value of character c, so &#39;0&#39; becomes 0, and &#39;1&#39; becomes 1. Then it can be cast to bool, as integer 0 equals false and 1 equals true."}], "tags": [], "owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "is_accepted": true, "score": 0, "last_activity_date": 1511386225, "creation_date": 1511386225, "answer_id": 47444149, "question_id": 47443279, "link": "https://stackoverflow.com/questions/47443279/input-data-in-one-line-to-array-of-bool/47444149#47444149", "title": "Input data in one line to array of bool", "body": "<p>You can read characters from input and convert them to bool, like:</p>\n\n<pre><code>for(int i = 0; i &lt; a; ++i) {\n    char c;\n    cin &gt;&gt; c;\n    b[i] = static_cast&lt;bool&gt;(c - '0');\n}\n</code></pre>\n\n<p>Note: this will allow to enter both in single line and multiple ones, as cin ignore whitespace characters.</p>\n"}], "owner": {"reputation": 133, "user_id": 5243736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d46d69989e3b9e5252b33f6f8d6153e?s=128&d=identicon&r=PG&f=1", "display_name": "Prime_Bull", "link": "https://stackoverflow.com/users/5243736/prime-bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 47444149, "answer_count": 2, "score": 0, "last_activity_date": 1511386225, "creation_date": 1511381982, "question_id": 47443279, "link": "https://stackoverflow.com/questions/47443279/input-data-in-one-line-to-array-of-bool", "title": "Input data in one line to array of bool", "body": "<p>It's possible to type data in correct way to array of bool in one line?\nI have something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n\n  unsigned short a;\n  cin &gt;&gt; a;\n\n  bool *b = new bool[a];\n\n  for(int i = 0; i &lt; a; ++i)\n    cin &gt;&gt; b[i]; \n\n  for(int i = 0; i &lt; a; ++i)\n    cout &lt;&lt; b[i]; \n\n  delete [] b;\n\n  return 0;\n}\n</code></pre>\n\n<p>For example:</p>\n\n<p>Correct input:</p>\n\n<pre><code>5\n1\n0\n1\n0\n1\n</code></pre>\n\n<p>Correct output:</p>\n\n<pre><code>10101\n</code></pre>\n\n<p>But I want in this way:</p>\n\n<p>Input:</p>\n\n<pre><code>5\n10101\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10101\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1511382684, "post_id": 47443261, "comment_id": 81841862, "body": "There is something smelling in this design. Ask yourself: logically, is a <code>Hand</code> a <code>Pile</code>? Does calling <code>shuffleDeck()</code> on an <code>Hand</code> instance is meaningful? Inheritance does not seems the kind of relationship to use here (and actually, neither an <code>has a</code> relationship seems the right one)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511383373, "post_id": 47443261, "comment_id": 81842197, "body": "The <code>Pile</code> constructor seems a very bad place to deal a hand unless the <code>Pile</code> instance  needs that hand to be dealt. A constructor should do no   more than initialize an object and exit. Also think hard on <code>dealHand</code> returning <code>void</code>. Odds are good that someone will want the hand that&#39;s been dealt, and it doesn&#39;t look like you&#39;ve provided any way for them to get it."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1511388384, "post_id": 47443261, "comment_id": 81844440, "body": "You can do it with hacks by passing pointers to the derived class into a base constructor that accepts a derived pointer. But don&#39;t, it breaks a lot of rules because you&#39;re supposed to treat each class as its own contained type and you aren&#39;t supposed to touch or rely on anything during construction except yourself and parents."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1511384191, "creation_date": 1511384191, "answer_id": 47443754, "question_id": 47443261, "link": "https://stackoverflow.com/questions/47443261/c-can-you-initialize-data-in-a-child-class-using-the-parents-constructor/47443754#47443754", "title": "c++: Can you initialize data in a child class using the parents constructor?", "body": "<p><code>SomeCards</code> is a blob of cards.</p>\n\n<pre><code>class SomeCards {\n  std::vector&lt;int&gt; cards;\npublic:\n  SomeCards( std::vector&lt;int&gt; cards_in = {} ):cards(std::move(cards_in)) {}\n  std::vector&lt;int&gt; allCards() const { return cards; }\n  void shuffleCards(); // TODO\n  SomeCards drawCards(std::size_t count) {\n    std::vector&lt;int&gt; r;\n    for(std::size_t i = 0; i &lt; count; ++i) {\n      if (!cards.empty()) {\n        r.push_back(cards.back());\n        cards.pop_back();\n      }\n    }\n    return r;\n  }\n  void addCards( SomeCards in ) {\n    cards.insert( cards.end(), in.cards.begin(), in.cards.end() );\n  }\n};\n</code></pre>\n\n<p>A <code>Hand</code> is some cards with extra features.  Also, we want to block dealing hands from hands.</p>\n\n<pre><code>class Hand : private SomeCards\n{\npublic:\n  using SomeCards::allCards;\n  using SomeCards::addCards;\n\n  using SomeCards::SomeCards;\n  // TODO more?\n};\n</code></pre>\n\n<p>A <code>Deck</code> is also some cards with extra features:</p>\n\n<pre><code>class Deck : private SomeCards\n{\npublic:\n  using SomeCards::SomeCards;\n  using SomeCards::shuffleCards;\n  Hand drawHand(std::size_t size) {\n    return drawCards(size);\n  }\n  std::vector&lt;Hand&gt; drawHands(std::size_t count, std::size_t size) {\n    std::vector&lt;Hand&gt; r;\n    r.reserve(count);\n    for (std::size_t i = 0; i &lt; count; ++i)\n      r.push_back( drawHand(size) );\n    return r;\n  }\n  std::size_t drawTo( Hand&amp; hand, std::size_t count ) {\n    auto cards = drawCards(count);\n    hand.addCards( cards );\n    return cards.size();\n  }\n};\n</code></pre>\n\n<p>Then we build a game from this:</p>\n\n<pre><code>class Game {\n  Deck deck;\n  std::vector&lt;Hand&gt; hands;\npublic:\n  // TODO\n};\n</code></pre>\n\n<p>Note <code>SomeCards</code> is being inherited from, but privately, because I put common operations on it (that don't identify what the cards are), and I'm using <code>using SomeCards::operation</code> to inject them into the private children.</p>\n\n<p>Treating Decks and Hands interchangably is questionable.</p>\n\n<p>We could also strip the non-common functionality out of <code>SomeCards</code> and inherit publicly.</p>\n\n<p>This design opens up the possibility that you can write a simple <code>OrderedHand</code> that behaves much like a <code>Hand</code>, but shuffling it makes sense.</p>\n\n<p>I didn't make much attempt to avoid needless copies above.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1511393567, "creation_date": 1511393567, "answer_id": 47445427, "question_id": 47443261, "link": "https://stackoverflow.com/questions/47443261/c-can-you-initialize-data-in-a-child-class-using-the-parents-constructor/47445427#47445427", "title": "c++: Can you initialize data in a child class using the parents constructor?", "body": "<p>The base class constructor runs before the initialization of derived class members. Therefore, it can only modify those members if they have trivial initialization; otherwise it will be undefined behaviour for using a member before its lifetime began.</p>\n\n<p>I would recommend designing your classes differently to avoid such a need.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7431424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511393567, "creation_date": 1511381888, "question_id": 47443261, "link": "https://stackoverflow.com/questions/47443261/c-can-you-initialize-data-in-a-child-class-using-the-parents-constructor", "title": "c++: Can you initialize data in a child class using the parents constructor?", "body": "<p>I'm trying to find out if I can use data initialized by a Parent classes constructor and then use it to populate the child classes vectors. I've been looking for something like this, but the closest I've come to it is here \n<a href=\"https://stackoverflow.com/questions/25838128/using-the-parent-constructor-to-initialize-a-child-class\">Using the Parent constructor to initialize a child class</a> , that didn't help unfortunately.</p>\n\n<p>My parent class looks like this</p>\n\n<pre><code>class Pile\n{\nprotected:\n    vector&lt;int&gt; cards;\n\npublic:\n  Pile();\n\n  vector&lt;int&gt; getCards();\n  void shuffleDeck();\n  void dealHand();\n\n  void displayGame();\n};\n</code></pre>\n\n<p>Child class:</p>\n\n<pre><code>class Hand : public Pile\n{\nprotected:\n  deque&lt;int&gt; hand1;\n};\n</code></pre>\n\n<p>It's implementation:</p>\n\n<pre><code>#include \"Declarations.h\"\nPile::Pile()\n{\n\n\n  for(int i = 1;i &lt;= 52; i++)\n    cards.push_back(i);\n\n\n  shuffleDeck();\n\n  // What I would like to do.\n  // dealHand();\n\n}\n</code></pre>\n\n<p>Ideally, I create a deck of cards, shuffle them, then deal them out where they need to be (the child classes). I know how to do that by instantiating the child classes, creating methods for them, and passing in the vector from the parent class, but that seems awful.</p>\n\n<p>Can you show me a way to move one element from the Pile classes vector 'cards' to it's child class Hand's deque 'hand1' without instantiating Hand? If not, is there a more direct approach than my fallback? </p>\n"}, {"tags": ["c++", "operator-overloading", "language-lawyer", "user-defined-types"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511381861, "post_id": 47443172, "comment_id": 81841439, "body": "I <i>think</i> the answer is \u201cno\u201d and at least one of the types must be user-defined, but I can\u2019t find the reference for that now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511382466, "post_id": 47443172, "comment_id": 81841750, "body": "@Daniel std::string is a user-defined type. The user in this case is people that implemented std::string in the standard library."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511382598, "post_id": 47443172, "comment_id": 81841824, "body": "@NeilButterworth It\u2019s defined by the implementation (which includes the standard library). I don\u2019t think \u201cuser-defined type\u201d is a defined term in the standard, but if it is and it includes implementation-defined types, then I\u2019m wrong about the term."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1511382766, "post_id": 47443172, "comment_id": 81841889, "body": "The term isn&#39;t <a href=\"http://www.slashslash.info/2014/01/what-is-a-user-defined-type/\" rel=\"nofollow noreferrer\">consistently defined</a>. In fact there was a proposal to clarify this (I can&#39;t find it at the moment), but it hasn&#39;t yet been accepted."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511383050, "post_id": 47443172, "comment_id": 81842014, "body": "@DanielH One of the types must be a class type or an enum (or reference to class or enum), there&#39;s no user-defined restriction."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511383147, "post_id": 47443172, "comment_id": 81842061, "body": "Yes, my thought was wrong. That\u2019s why I made it a comment instead of an answer."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1511506791, "post_id": 47443172, "comment_id": 81890056, "body": "You can only <b>override</b> virtual functions of a base class."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1511383277, "last_edit_date": 1511383277, "creation_date": 1511382381, "answer_id": 47443361, "question_id": 47443172, "link": "https://stackoverflow.com/questions/47443172/is-it-allowed-to-overload-operator-for-a-standard-library-type-and-a-built-in-t/47443361#47443361", "title": "Is it allowed to overload operator+ for a standard library type and a built-in type?", "body": "<blockquote>\n  <p>For example, is it legal to implement the following operator in the default namespace or a user-defined namespace:</p>\n\n<pre><code>std::string operator+(const std::string&amp; s, int right) { ... }\n</code></pre>\n</blockquote>\n\n<p>Yes, it's perfectly legal to do this. The only restrictions are about adding names to <code>namespace std</code> or specializing member function function templates or class templates or adding deduction guides for class templates in <code>std</code>. </p>\n\n<p>There's nothing that stops you from writing something like:</p>\n\n<pre><code>namespace N {\n    std::string operator+(std::string s, int ) { return s; }\n}\n</code></pre>\n\n<p>That is a well-formed program, per the standard. However note that since by definition your operators will not have any program-defined types in them, they will never be found by ADL. Since they are operators, which typically are found by ADL, this in of itself may be a reason to avoid such a pattern:</p>\n\n<pre><code>namespace U {\n    auto foo() {\n        return \"hello\"s + 1; // error: name lookup doesn't find our operator\n    }\n\n    auto bar() {\n        using namespace N;\n        return \"hello\"s + 1; // ok: for some definition of ok\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511383091, "post_id": 47443373, "comment_id": 81842031, "body": "Wait, maybe I\u2019m misreading that, but it looks like it\u2019ll work in the same namespace as the overload is declared in. Where are you getting that it ignores global functions?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1511383219, "post_id": 47443373, "comment_id": 81842107, "body": "Weird, it works for every compiler I threw at it (gcc, clang, MSVC, icc), where the operator was called in the same namespace (the default namespace) as it was declared."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511383399, "post_id": 47443373, "comment_id": 81842209, "body": "The reference 6.4.2 is to ADL, but based on the text it looks like it does both non-ADL and ADL lookups, just like for a regular unqualified function call. Especially because otherwise it wouldn\u2019t need to discard member functions, which wouldn\u2019t be found by ADL."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1511387168, "post_id": 47443373, "comment_id": 81843921, "body": "You&#39;re misreading. Nicol never said it ignores global functions?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1511469675, "post_id": 47443373, "comment_id": 81880767, "body": "@Barry - unless I misunderstood Nicol here, he&#39;s saying &quot;it won&#39;t work because ADL lookup will fail&quot;. It does work fine in practice because the non-ADL lookup works fine. So you can <i>effectively</i> overload operators without opening up the namespace (but you&#39;ll have to be aware of what namespace your operator is declared in, of course)."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1511382461, "creation_date": 1511382461, "answer_id": 47443373, "question_id": 47443172, "link": "https://stackoverflow.com/questions/47443172/is-it-allowed-to-overload-operator-for-a-standard-library-type-and-a-built-in-t/47443373#47443373", "title": "Is it allowed to overload operator+ for a standard library type and a built-in type?", "body": "<p>It is legal to write that. But it won't necessarily do what you want.</p>\n\n<p>If your goal is to make <code>some_string + 4</code> legal C++ code, then its legality will depend on exactly where that expression appears. Operator overloading will use ADL to look up the operator [over.match.oper]/3.2:</p>\n\n<blockquote>\n  <p>The set of non-member candidates is the result of the unqualified lookup of operator@ in the context of the expression according to the usual rules for name lookup in unqualified function calls (6.4.2) except that all member functions are ignored. However, if no operand has a class type, only those non-member\n  functions in the lookup set that have a first parameter of type T1 or \u201creference to cv T1 \u201d, when T1 is an enumeration type, or (if there is a right operand) a second parameter of type T2 or \u201creference to cv T2\u201d, when T2 is an enumeration type, are candidate functions.</p>\n</blockquote>\n\n<p>But since your <code>operator+</code> is <em>not</em> in the same namespace as either argument, ADL lookup will fail. And the list of non-member candidates will not automatically include global functions, there's no chance for it to find the right <code>operator+</code>.</p>\n\n<p>So you cannot <em>effectively</em> overload an operator like this without opening up the namespace. Which of course is forbidden for <code>std</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511382766, "post_id": 47443409, "comment_id": 81841888, "body": "C++17 is officially <a href=\"https://www.iso.org/stage-codes.html#60.00\" rel=\"nofollow noreferrer\">\u201cunder publication\u201d</a> now, it might be time to use <a href=\"https://timsong-cpp.github.io/cppwp/n4659\" rel=\"nofollow noreferrer\">N4659</a>. Failing that, I\u2019d think you should at least use C++14\u2019s <a href=\"https://timsong-cpp.github.io/cppwp/n4140/\" rel=\"nofollow noreferrer\">N4140</a> for non-version-tagged questions."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1511382954, "post_id": 47443409, "comment_id": 81841968, "body": "@DanielH, I feel pretty up to date for me when I can use C++11 as the guide since I am still required to use VS2008 at work :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511383011, "post_id": 47443409, "comment_id": 81841996, "body": "GCC 3.3 for me a lot of the time. I&#39;d kill for some of that C++11 goodness."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1511469543, "post_id": 47443409, "comment_id": 81880727, "body": "Thanks, this is perfect. There were a couple of equivalently correct answers so I chose the other based on timestamp, but nothing wrong with this one either."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1511382593, "creation_date": 1511382593, "answer_id": 47443409, "question_id": 47443172, "link": "https://stackoverflow.com/questions/47443172/is-it-allowed-to-overload-operator-for-a-standard-library-type-and-a-built-in-t/47443409#47443409", "title": "Is it allowed to overload operator+ for a standard library type and a built-in type?", "body": "<p>It's perfectly OK to overload <code>operator+</code> between <code>std::string</code> and <code>int</code>. The only restriction that the standard places on that is (<a href=\"https://timsong-cpp.github.io/cppwp/n3337/over.oper#6\" rel=\"nofollow noreferrer\">https://timsong-cpp.github.io/cppwp/n3337/over.oper#6</a>):</p>\n\n<blockquote>\n  <p>An operator function shall either be a non-static member function or be a non-member function and have at least one parameter whose type is a class, a reference to a class, an enumeration, or a reference to an enumeration.</p>\n</blockquote>\n\n<p>There is no restriction on the being able to define them in your namespace for even the types from the standard library.</p>\n"}], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 1, "accepted_answer_id": 47443361, "answer_count": 3, "score": 3, "last_activity_date": 1511506885, "creation_date": 1511381539, "last_edit_date": 1511506885, "question_id": 47443172, "link": "https://stackoverflow.com/questions/47443172/is-it-allowed-to-overload-operator-for-a-standard-library-type-and-a-built-in-t", "title": "Is it allowed to overload operator+ for a standard library type and a built-in type?", "body": "<p>Is it allowed to overload operators, such as <code>operator+</code> for a combination of a standard library type and a built-in type, when such an overload doesn't exist?</p>\n\n<p>For example, is it legal to implement the following operator in the default namespace or a user-defined namespace:</p>\n\n<pre><code>std::string operator+(const std::string&amp; s, int right) { ... }\n</code></pre>\n\n<p>I know there are various restrictions about implementing things <em>in</em> the <code>std::</code> namespace, but it isn't clear to me if there is any rule against the above (whether it's a good idea is of course an entirely different matter!).</p>\n"}, {"tags": ["c++", "list", "c++-concepts", "c++20"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 1415, "user_id": 1391625, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d6cab1133ecef21555b14b6f372b450f?s=128&d=identicon&r=PG", "display_name": "Dylan Lawrence", "link": "https://stackoverflow.com/users/1391625/dylan-lawrence"}, "edited": false, "score": 0, "creation_date": 1511380978, "post_id": 47442992, "comment_id": 81841039, "body": "@DylanLawrence Are you sure? I am <b>not</b> asking about std::sort. But a <b>self defined</b> sort!"}, {"owner": {"reputation": 1415, "user_id": 1391625, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d6cab1133ecef21555b14b6f372b450f?s=128&d=identicon&r=PG", "display_name": "Dylan Lawrence", "link": "https://stackoverflow.com/users/1391625/dylan-lawrence"}, "edited": false, "score": 0, "creation_date": 1511381056, "post_id": 47442992, "comment_id": 81841072, "body": "@GhostCat then it doesn&#39;t make sense unless the self defined sort was written in such a way as to require random iterators, in which case it&#39;s just a special case of why <code>std::sort</code> fails."}, {"owner": {"reputation": 1325, "user_id": 8949166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zGGTy.png?s=128&g=1", "display_name": "realharry", "link": "https://stackoverflow.com/users/8949166/realharry"}, "edited": false, "score": 0, "creation_date": 1511381124, "post_id": 47442992, "comment_id": 81841100, "body": "I&#39;ve never seen <code>requires</code> before, and I just looked it up. It&#39;s C++20 feature?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 1325, "user_id": 8949166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zGGTy.png?s=128&g=1", "display_name": "realharry", "link": "https://stackoverflow.com/users/8949166/realharry"}, "edited": false, "score": 1, "creation_date": 1511381215, "post_id": 47442992, "comment_id": 81841137, "body": "@realharry it&#39;s part of the much anticipated concepts. Finger crossed it makes C++20."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 1325, "user_id": 8949166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zGGTy.png?s=128&g=1", "display_name": "realharry", "link": "https://stackoverflow.com/users/8949166/realharry"}, "edited": false, "score": 1, "creation_date": 1511381220, "post_id": 47442992, "comment_id": 81841141, "body": "@realharry I updated my question accordingly. Yes, C++20."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 1415, "user_id": 1391625, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d6cab1133ecef21555b14b6f372b450f?s=128&d=identicon&r=PG", "display_name": "Dylan Lawrence", "link": "https://stackoverflow.com/users/1391625/dylan-lawrence"}, "edited": false, "score": 0, "creation_date": 1511381291, "post_id": 47442992, "comment_id": 81841166, "body": "@DylanLawrence I do not follow you. The function uses the <code>Sortable</code> concept. I am asking why this concept doesn&#39;t apply to a list of int. I really don&#39;t see how that duplicated question is answering that."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1511382058, "post_id": 47442992, "comment_id": 81841536, "body": "@bolov It\u2019s been merged into C++20, but I suppose they could un-merge it."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1511382083, "post_id": 47442992, "comment_id": 81841558, "body": "I&#39;m with op on this one - Q: &quot;Does <code>std::sort</code> work on <code>list&lt;int&gt;</code>?&quot; A: &quot;No as it would be ineffiecient.&quot;. Q: Is a <code>list&lt;int&gt;</code> <i>sortable</i>? A: It most definitely is."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1511382416, "post_id": 47442992, "comment_id": 81841724, "body": "Note that the most recent Ranges TS draft (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4685.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4685.pdf</a>) defines <code>Sortable</code> to only require forward iterators."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1511385533, "post_id": 47442992, "comment_id": 81843213, "body": "@Rakete1111 although similar, this question deals with <b>c++20 concepts</b>, so I feel it is not a duplicate"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1511385847, "post_id": 47442992, "comment_id": 81843375, "body": "@Rakete1111, <i>as the author and others point out</i>, this question is about concepts, and definitely not about <code>std::sort</code>. It\u2019s possible, <i>but irrelevant to the question</i>, that the <code>sort</code> function defined in the article the OP was reading requires random-access iterators or is implemented by calling <code>std::sort</code>. But it is not <code>std::sort</code>, and there are sorting algorithms which work on non-random-access iterators."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1511385994, "post_id": 47442992, "comment_id": 81843434, "body": "@bolov But it&#39;s a bit like the same thing. This deals with the fact that <code>std::list</code> doesn&#39;t meet the requirements for <code>Sortable</code>, which is also how <code>std::sort</code> requires its range to be. The answer in both is &quot;Sortable requires random access iterators, which std::list doesn&#39;t have&quot;."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1511387982, "post_id": 47442992, "comment_id": 81844271, "body": "@Rakete1111 more or less. Maybe more. But see Nawaz answer. It deals with defining your own concept, something which doesn&#39;t apply to the other questions."}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511385635, "post_id": 47443166, "comment_id": 81843265, "body": "This isn\u2019t a question about <code>RandomAccessIterator</code> vs. <code>ForwardIterator</code> vs. <code>BidirectionalIterator</code>. It\u2019s more related to the question you linked, but that\u2019s still somewhat different."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1511381515, "creation_date": 1511381515, "answer_id": 47443166, "question_id": 47442992, "link": "https://stackoverflow.com/questions/47442992/why-is-a-stdlistint-not-sortable/47443166#47443166", "title": "Why is a std::list&lt;int&gt; not sortable?", "body": "<p><code>std::list</code> is mostly a <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">doubly-linked list</a>. So it obviously is not randomly accessible: accessing the n<sup>th</sup> element requires O(n) linear time (not constant, i.e. O(1)).</p>\n\n<p><code>std::vector</code> is randomly accessible; accessing the n<sup>th</sup> element requires constant time. So it has a random-access-iterator.</p>\n\n<p><a href=\"https://stackoverflow.com/q/34619540/841108\">This</a> is a related question.</p>\n"}, {"comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 2, "creation_date": 1511382151, "post_id": 47443195, "comment_id": 81841592, "body": "Makes a lot of sense. More sense than the various &quot;duplicates&quot; that were put up by others."}], "tags": [], "owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": true, "score": 7, "last_activity_date": 1511447812, "last_edit_date": 1511447812, "creation_date": 1511381622, "answer_id": 47443195, "question_id": 47442992, "link": "https://stackoverflow.com/questions/47442992/why-is-a-stdlistint-not-sortable/47443195#47443195", "title": "Why is a std::list&lt;int&gt; not sortable?", "body": "<blockquote>\n  <p>And no, I am not asking about <strong>std::sort</strong>. I am asking: why does the concept Sortable not work for a  std::list?</p>\n</blockquote>\n\n<p>Well, it all depends on <em>how</em> you define the concept <strong>Sortable</strong>. So in the context of the text which you're reading, it is probably assuming that the <em>Sortable</em> container must operate on random-access-iterator &mdash; <code>std::sort</code> for example takes a pair of random-access-iterators; it <em>cannot</em> sort elements of container, say <code>std::list</code>, which doesn't support random-access-iterator. </p>\n\n<p>However, that does <strong>not</strong> mean that you cannot define your own concept, say <strong>FlexySortable</strong> (along with an algorithm <code>flexy_sort</code>) that may operate on <em>non-random-access-iterator</em> as well. The text is simply giving <strong>an</strong> example of <strong>a</strong> concept to explain the general idea as to how <em>concepts</em> may help you to express your intent and your assumptions directly in the code which the compiler can verify by executing predicates (i.e the concepts).</p>\n"}, {"comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1511383737, "post_id": 47443364, "comment_id": 81842360, "body": "Also helpful. No, the article just started using that concept, without giving any further details. Thus I assumed that <i>Sortable</i> is a common &quot;standard&quot; thing."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1511385676, "post_id": 47443364, "comment_id": 81843283, "body": "@GhostCat, when was the article written? The Ranges TS has been through a bunch of changes, and it\u2019s plausible that an earlier version of <code>Sortable</code> did require a random access iterator."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1511412472, "post_id": 47443364, "comment_id": 81850614, "body": "This article is printed in the iX magazine - December issue. So it is brand new."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1511413732, "post_id": 47443364, "comment_id": 81850972, "body": "@GhostCat Then I have no idea. It&#39;s been that way for at least a year (it looks like it&#39;s probably longer, but I don&#39;t like GitHub&#39;s blame interface enough to find a specific change which might not exist) according to the Git history of <a href=\"https://github.com/ericniebler/stl2/blob/master/iterators.tex\" rel=\"nofollow noreferrer\">github.com/ericniebler/stl2/blob/master/iterators.tex</a>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1511428354, "post_id": 47443364, "comment_id": 81857856, "body": "That&#39;s not the full story; the RAI requirement got pinned to <code>sort</code> itself (and friends) instead."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1511382411, "creation_date": 1511382411, "answer_id": 47443364, "question_id": 47442992, "link": "https://stackoverflow.com/questions/47442992/why-is-a-stdlistint-not-sortable/47443364#47443364", "title": "Why is a std::list&lt;int&gt; not sortable?", "body": "<p>The <code>Sortable</code> concept is not defined in the language; you must define it yourself. Presumably it was defined earlier in the chapter?</p>\n\n<p>Note that the <a href=\"http://wg21.link/ranges\" rel=\"nofollow noreferrer\">Ranges TS</a>, which unlike concepts is <em>not</em> yet part of C++2a, defines a <a href=\"https://timsong-cpp.github.io/cppwp/ranges-ts/commonalgoreq#sortable\" rel=\"nofollow noreferrer\"><code>Sortable</code> concept</a>. The only requirement that places on the iterators is from <a href=\"https://timsong-cpp.github.io/cppwp/ranges-ts/commonalgoreq#permutable\" rel=\"nofollow noreferrer\"><code>Permutable</code></a>, which only requires <code>ForwardIterator</code>s.</p>\n"}], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 47443195, "answer_count": 3, "score": 7, "last_activity_date": 1511447812, "creation_date": 1511380808, "last_edit_date": 1511428084, "question_id": 47442992, "link": "https://stackoverflow.com/questions/47442992/why-is-a-stdlistint-not-sortable", "title": "Why is a std::list&lt;int&gt; not sortable?", "body": "<p>I am just reading a (printed, German) article about C++ concepts (C++20 that is).</p>\n\n<p>The article gives an example for a function template, using the <code>Sortable</code> concept:</p>\n\n<pre><code>template&lt;typename Cont&gt;\n  requires Sortable&lt;Cont&gt;()\nvoid sort(Cont&amp; container) { ... }\n</code></pre>\n\n<p>And it claims that a compiler would reject the following code:</p>\n\n<pre><code>std::list&lt;int&gt; lst = { 1, 7, 5, 12 };\nsort(lst);\n</code></pre>\n\n<p>with an error like:</p>\n\n<blockquote>\n  <p>ERROR: lst is not random-access container with &lt;</p>\n</blockquote>\n\n<p>Assuming that the article is correct - why exactly is a <strong>list</strong> of <strong>int</strong> values not sortable? To me, a list of whole numbers is like the canonical example when thinking about something \"sortable\"?!</p>\n\n<p>And no, I am not asking about <strong>std::sort</strong>. I am asking: why does the <em>concept</em> Sortable not work for a <code>std::list&lt;int&gt;</code>?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2015", "cmake"], "comments": [{"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1511387835, "post_id": 47442858, "comment_id": 81844209, "body": "Try cleaning the cache, the object files an rebuild again. Also note that &#39;MD_DynamicRelease&#39; doesn&#39;t match value &#39;MDd_DynamicDebug&#39;  message is telling that you are invoking or using a wrong <a href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_BUILD_TYPE.html\" rel=\"nofollow noreferrer\">CMAKE_BUILD_TYPE</a>"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1511389384, "post_id": 47442858, "comment_id": 81844824, "body": "@Joel: it&#39;s not cache problem or rebuild, and <code>CMAKE_BUILD_TYPE</code> is not relevant in VS case"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1511402689, "post_id": 47442858, "comment_id": 81848274, "body": "Is it possible both /MD and /MDd are used on the command line? (Check the &quot;Command Line&quot; in the project settings). Maybe /MDd is overriding /MD, and the IDE isn&#39;t displaying it correctly in the project settings."}], "answers": [{"tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": true, "score": 0, "last_activity_date": 1511447667, "creation_date": 1511447667, "answer_id": 47457887, "question_id": 47442858, "link": "https://stackoverflow.com/questions/47442858/vs-how-to-configure-debugwithreleasecrt/47457887#47457887", "title": "VS: How to configure DebugWithReleaseCRT?", "body": "<p>The problem is related with VS precompiler definition <a href=\"https://msdn.microsoft.com/en-us/library/0b98s6w8.aspx\" rel=\"nofollow noreferrer\">_DEBUG</a></p>\n\n<blockquote>\n  <p>The compiler defines _DEBUG when you specify the /MTd or /MDd option.\n  These options specify debug versions of the C run-time library.</p>\n</blockquote>\n\n<p>As my <code>DebugWithReleaseCRT</code> config was based on <code>Debug</code>, it copied <code>_DEBUG</code> definition too. Turns out that if <code>_DEBUG</code> is defined it overrules <code>/MD</code> flag (<code>MD_DynamicRelease</code>) and VS still links with debug CRT (hey Visual Studio team, that was a surprise!). </p>\n\n<p>The problem was solved by removing <code>_DEBUG</code> from <code>DebugWithReleaseCRT</code>. Actually it was solved by replacing <code>_DEBUG</code> by <code>NDEBUG</code> because some 3rd-party dependencies required exactly one of them to be defined. I'm still not sure it's a clean way to configure <code>DebugWithReleaseCRT</code>, I don't feel particularly confident about defining <code>NDEBUG</code> in kind of debug config.</p>\n"}], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 47457887, "answer_count": 1, "score": 0, "last_activity_date": 1511447667, "creation_date": 1511380228, "last_edit_date": 1511380636, "question_id": 47442858, "link": "https://stackoverflow.com/questions/47442858/vs-how-to-configure-debugwithreleasecrt", "title": "VS: How to configure DebugWithReleaseCRT?", "body": "<p>I added a new configuration <code>DebugWithReleaseCRT</code> to our CMake scripts, which is based on pretty standard <code>Debug</code> config but links with Release CRT (<code>/MD</code> instead of <code>/MDd</code>) and defines <code>_ITERATOR_DEBUG_LEVEL=0</code>. I checked generated project file settings and all looks good: </p>\n\n<blockquote>\n  <p>C/C++ -> Code Generation -> RuntimeLibrary = Multi-Threaded DLL (/MD)</p>\n</blockquote>\n\n<p>However when I build it I get errors like:</p>\n\n<blockquote>\n  <p>3>3rd-party.lib(3rd-party.obj) : error LNK2038: mismatch detected\n  for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value\n  'MDd_DynamicDebug' in My.obj</p>\n</blockquote>\n\n<p>which I read as: </p>\n\n<blockquote>\n  <p>your <code>My.cpp</code> file is compiled with debug CRT\n  (<code>MDd_DynamicDebug</code>) while you're trying to link with library\n  <code>3rd-party.lib</code> that is built with release CRT (<code>MD_DynamicRelease</code>)</p>\n</blockquote>\n\n<p>I also checked this particular file (<code>My.cpp</code>) settings but nothing fancy there, it inherited <code>/MD</code> flag from the parent project.</p>\n\n<p>Why my project is linked with Debug CRT despite of specified <code>/MD</code> flag?</p>\n"}, {"tags": ["c++", "qt", "static", "dependencies", "static-libraries"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1511380420, "post_id": 47442783, "comment_id": 81840796, "body": "My crystal ball says that your compilers runtime library and the C++ standard library are amongst your non-static dependencies. Why not just ship the required libraries as part of your program and have its installer/package install them? In the long run that&#39;s probably going to be easier (and what most programs <i>do</i>) than building and maintaining a completely static executable.. just my 2 cents."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1511380592, "post_id": 47442783, "comment_id": 81840880, "body": "System DLLs like Kernel32 and ntdll cannot be statically linked. This wouldn&#39;t be desirable even if it were possible as it would pin your program to only working on a single version of Windows."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1511384785, "post_id": 47442783, "comment_id": 81842833, "body": "If I was linking against some library statically I would make sure that library was actually built statically. And usually on Windows the static library represented by *.lib and maybe separate *.obj files and not some derivatives of *.dll e.g. dll.a. Or at least that was the story when I did quite a lot of Windows platform development."}], "owner": {"reputation": 187, "user_id": 7644020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/92c10cbb8baf1eb57cd6ccb52c89c678?s=128&d=identicon&r=PG&f=1", "display_name": "poppy", "link": "https://stackoverflow.com/users/7644020/poppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511379934, "creation_date": 1511379934, "question_id": 47442783, "link": "https://stackoverflow.com/questions/47442783/qt-opencv-statically-compiled-executable-still-contains-dependencies", "title": "Qt, OpenCv Statically Compiled Executable Still Contains Dependencies", "body": "<p>I am trying to use Qt Creator to build a standalone executable which uses Qt and OpenCv - so I'm attempting static compilation. I built a static version of Qt. I built a static version of OpenCv. I set my Qt version to the statically built version. I set my build kit to this new static build. In my .pro file, I put...</p>\n\n<pre><code>INCLUDEPATH += C:\\opencv-build\\install\\include\n\nCONFIG += static\n\nLIBS += C:\\opencv-build\\lib\\libopencv_core320.dll.a\nLIBS += C:\\opencv-build\\lib\\libopencv_highgui320.dll.a\nLIBS += C:\\opencv-build\\lib\\libopencv_imgcodecs320.dll.a\nLIBS += C:\\opencv-build\\lib\\libopencv_imgproc320.dll.a\nLIBS += C:\\opencv-build\\lib\\libopencv_features2d320.dll.a\nLIBS += C:\\opencv-build\\lib\\libopencv_calib3d320.dll.a\n</code></pre>\n\n<p>But when I attempt to start the resultant .exe, I receive the following error:</p>\n\n<p>The procedure entry point _ZNKSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEE4findEPKcjj could not be located in the dynamic link library libstdc++-6.dll</p>\n\n<p>I used Dependency Walker to analyze the exe: apparently it still requires tons of dlls(including libopencv_core320.dll and KERNEL32.DLL (but no Qt libraries), for example). What am I doing wrong? I followed all the steps listed <a href=\"http://dimitris.apeiro.gr/2015/06/24/build-a-static-qt5-for-windows-by-compiling/%22here%22\" rel=\"nofollow noreferrer\">here</a>. This is my first time attempting a static build, so I'm unclear on how to further troubleshoot this.</p>\n"}, {"tags": ["c++", "readonly", "protected"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 4, "creation_date": 1511379467, "post_id": 47442643, "comment_id": 81840334, "body": "What do you think <code>const</code> is for?? Also that can be fixed using the bas class constructor in the member initializer list: <code>ElectricPump::ElectricPump() : Pump(5.0) {</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511380088, "post_id": 47442643, "comment_id": 81840637, "body": "Worth a quick reminder that all member variables and base classes are constructed before entering the body of the constructor. You should have gotten another error message saying that <code>Pump</code> could not be constructed because of the missing default constructor."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 2, "creation_date": 1511380551, "post_id": 47442643, "comment_id": 81840862, "body": "Closing this question as &#39;unclear what you&#39;re asking&#39; is ridiculous. This is a perfectly fine question, and any reasonable C++ programmer is going to understand exactly what the OP was asking almost immediately. My main concern would be that I strongly suspect it&#39;s a dupe."}], "answers": [{"comments": [{"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 33, "user_id": 8705886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b2e0e4b978cf90ca79072952189119?s=128&d=identicon&r=PG&f=1", "display_name": "SoupSeeker", "link": "https://stackoverflow.com/users/8705886/soupseeker"}, "edited": false, "score": 1, "creation_date": 1511380689, "post_id": 47442736, "comment_id": 81840916, "body": "@SoupSeeker - It&#39;s considered polite to click on the little green check for the answer that answers your question. :-)"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1511379891, "last_edit_date": 1511379891, "creation_date": 1511379758, "answer_id": 47442736, "question_id": 47442643, "link": "https://stackoverflow.com/questions/47442643/assigning-value-to-read-only-member-c/47442736#47442736", "title": "Assigning value to read-only member - C++", "body": "<p>Members declared as const cannot be assigned, only initialized, e.g. in the course of an initializer list of a constructor. So as a subclass cannot initialize data members of its superclass, you'll have to \"call\" the superclass' constructor:</p>\n\n<pre><code>ElectricPump::ElectricPump() : Pump(5.0) { }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 1524637, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/343a2291134bced0aa8272eb68c6fbe7?s=128&d=identicon&r=PG", "display_name": "Taylor Bishop", "link": "https://stackoverflow.com/users/1524637/taylor-bishop"}, "is_accepted": false, "score": 0, "last_activity_date": 1511381081, "creation_date": 1511381081, "answer_id": 47443067, "question_id": 47442643, "link": "https://stackoverflow.com/questions/47442643/assigning-value-to-read-only-member-c/47443067#47443067", "title": "Assigning value to read-only member - C++", "body": "<p>Members marked as <code>const</code> must have a value assigned before the construction of the object. On top of this, you must either declare a default constructor for <code>Pump</code> or explicitly call the defined constructor in the <code>ElectricPump</code> class.</p>\n\n<p>Note that the initializer list is ran before construction of the object, so <code>const</code> members can be set in that. To fix your issue, use this:</p>\n\n<pre><code>ElectricPump::ElectricPump()\n    : Pump(5.0)\n{ }\n</code></pre>\n\n<p>This will call the constructor for <code>Pump</code> with your passed in value before construction of <code>ElectricPump</code>. I highly suggest reading up on <a href=\"https://www.cprogramming.com/tutorial/initialization-lists-c++.html\" rel=\"nofollow noreferrer\">initializer lists</a> and how they are used.</p>\n"}], "owner": {"reputation": 33, "user_id": 8705886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b2e0e4b978cf90ca79072952189119?s=128&d=identicon&r=PG&f=1", "display_name": "SoupSeeker", "link": "https://stackoverflow.com/users/8705886/soupseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 47442736, "answer_count": 2, "score": 0, "last_activity_date": 1511381081, "creation_date": 1511379427, "question_id": 47442643, "link": "https://stackoverflow.com/questions/47442643/assigning-value-to-read-only-member-c", "title": "Assigning value to read-only member - C++", "body": "<p>How would I go about making an ElectricPump and assigning the value \"rate\" within that object. I get the following error with my current code:</p>\n\n<pre><code>../src/Boat.cpp:144:7: error: assignment of read-only member 'Pump::rate'\n</code></pre>\n\n<p>Below is my class declaration:</p>\n\n<pre><code>class Pump\n{\nprotected:\n    Pump(float rate);\n    virtual void pump(Boat &amp;) = 0;\n    const float rate;\n};\n\nclass ElectricPump : public Pump\n{\npublic:\n    ElectricPump();\n    virtual void pump(Boat &amp;);\n};\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>Pump::Pump(float r) : rate(r){}\n\nElectricPump::ElectricPump(){\n    rate = 5.0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "crtp"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1511377913, "post_id": 47442195, "comment_id": 81839572, "body": "Don&#39;t you want to instantiate <code>lion</code> and <code>tiger</code> instead of <code>feline&lt;lion&gt;</code> and <code>feline&lt;tiger&gt;</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1511377936, "post_id": 47442195, "comment_id": 81839580, "body": "if you want to create a lion you should write <code>lion lionx;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1511377962, "post_id": 47442195, "comment_id": 81839592, "body": "btw using same names for variables and types is rather confusing"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1511378079, "post_id": 47442195, "comment_id": 81839656, "body": "You call the constructor for both <code>lion</code> and <code>feline&lt;lion&gt;</code> by constructing an instance of <code>lion</code>. I feel like this might be an XY Problem. What are you actually trying to do?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1511378348, "post_id": 47442195, "comment_id": 81839789, "body": "@tobi303 I think <code>lion lion_o</code> may be more fitting in this case."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511378460, "post_id": 47442195, "comment_id": 81839838, "body": "@user4581301 why? because <code>_o</code> stands for &quot;object&quot;? If thats your reasoning then I strongly disagree. Naming an object &quot;object&quot; is completely pointless."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511379172, "post_id": 47442195, "comment_id": 81840171, "body": "@user4581301 I get it :-)"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1511378611, "last_edit_date": 1511378611, "creation_date": 1511378216, "answer_id": 47442312, "question_id": 47442195, "link": "https://stackoverflow.com/questions/47442195/how-can-i-call-the-constructor-of-the-derived-class-when-using-crtp/47442312#47442312", "title": "How can I call the constructor of the derived class when using CRTP?", "body": "<p>You are using CRTP slightly wrong. For a moment forget about the fact that the base class is parametrized on the inheriting class, then what you do is something like:</p>\n\n<pre><code>struct feline { };\nstruct lion : feline {};\n\nfeline roary;        // in your actual code this is parametrized with lion\n                     // but still it is no lion !\n</code></pre>\n\n<p>when you actually wanted to create a lion:</p>\n\n<pre><code>lion roary;          // this is a lion !\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4376, "user_id": 1351465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17845023034a9b3ad336f2883ed79149?s=128&d=identicon&r=PG", "display_name": "JuanR", "link": "https://stackoverflow.com/users/1351465/juanr"}, "is_accepted": true, "score": 7, "last_activity_date": 1542115280, "last_edit_date": 1542115280, "creation_date": 1511378685, "answer_id": 47442441, "question_id": 47442195, "link": "https://stackoverflow.com/questions/47442195/how-can-i-call-the-constructor-of-the-derived-class-when-using-crtp/47442441#47442441", "title": "How can I call the constructor of the derived class when using CRTP?", "body": "<p>Because you never create an actual lion.</p>\n\n<p>CRTP requires an object of the actual class in order to work properly.</p>\n\n<p>Remember that the base class will never instantiate the child class directly because its all about forcing the class to support some functions and not classical inheritance.</p>\n\n<p>Your code could crash but it doesn't, and that's because the function <code>do_roar</code> does not access any private variables. Try adding some members to <code>lion</code> and using them in <code>do_roar</code>, you'll see...</p>\n\n<p>If you want a lion use the <code>lion</code> class, <code>feline&lt;lion&gt;</code> is just an instantiation of <code>feline&lt;T&gt;</code> where <code>T = lion</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1507, "user_id": 1161273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3b7e863645e1461848874b3c7f1018d?s=128&d=identicon&r=PG", "display_name": "pixelgrease", "link": "https://stackoverflow.com/users/1161273/pixelgrease"}, "is_accepted": false, "score": 0, "last_activity_date": 1556663559, "creation_date": 1556663559, "answer_id": 55929476, "question_id": 47442195, "link": "https://stackoverflow.com/questions/47442195/how-can-i-call-the-constructor-of-the-derived-class-when-using-crtp/55929476#55929476", "title": "How can I call the constructor of the derived class when using CRTP?", "body": "<p>You declared new classes but did not use them.</p>\n\n<p>Below is a revised <code>main()</code> that uses your new classes:</p>\n\n<pre><code>int main()\n{\n    lion l;\n    l.roar();\n    tiger t;\n    t.roar();\n}\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>Feline ctor\nLion ctor\nLion roar\nFeline ctor\nTiger ctor\nTiger roar\n</code></pre>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 47442441, "answer_count": 3, "score": 0, "last_activity_date": 1556663559, "creation_date": 1511377772, "question_id": 47442195, "link": "https://stackoverflow.com/questions/47442195/how-can-i-call-the-constructor-of-the-derived-class-when-using-crtp", "title": "How can I call the constructor of the derived class when using CRTP?", "body": "<p>I have the following setup:</p>\n\n<pre><code>#include &lt;iostream&gt;\ntemplate &lt;typename T&gt;\nstruct feline {\n  void roar() noexcept {\n      static_cast&lt;T*&gt;(this)-&gt;do_roar();\n  }\n      feline() noexcept {\n      std::cerr &lt;&lt; \"Feline ctor\" &lt;&lt; std::endl;\n  }\n};\n\nstruct lion : public feline&lt;lion&gt; {\n  lion() noexcept : feline() {\n    std::cerr &lt;&lt; \"Lion ctor\" &lt;&lt; std::endl;\n  }\n  void do_roar() noexcept {\n      std::cerr &lt;&lt; \"Lion roar\" &lt;&lt; std::endl;\n  }\n};\n\nstruct tiger : public feline&lt;tiger&gt; {\n  tiger() noexcept : feline() {\n    std::cerr &lt;&lt; \"Tiger ctor\" &lt;&lt; std::endl;\n  }\n  void do_roar() noexcept {\n      std::cerr &lt;&lt; \"Tiger roar\" &lt;&lt; std::endl;\n  }\n};\n\nint main()\n{\n    feline&lt;lion&gt; lion;\n    lion.roar();\n    feline&lt;tiger&gt; tiger;\n    tiger.roar();\n}\n</code></pre>\n\n<p>and when I execute it I get the following result:</p>\n\n<pre><code>Feline ctor\nLion roar\nFeline ctor\nTiger roar\n</code></pre>\n\n<p>Which means the constructors for Lion and Tiger are never called. How can I make that happen?</p>\n"}, {"tags": ["c++", "c", "argv"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 5, "creation_date": 1511376693, "post_id": 47441911, "comment_id": 81838902, "body": "an array of character pointers. ..so <code>C</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511376750, "post_id": 47441911, "comment_id": 81838932, "body": "You are right. Consider that <code>char** argv</code> is another way to think about it. If <code>char*</code> is an array of characters (a string), then what is <code>char**</code>?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1511376821, "post_id": 47441911, "comment_id": 81838979, "body": "@coderredoc: I interpreted it to mean &quot;array of pointers to character&quot; singular. As in, pointers to only one character. Which could never be the case (unless you can pass an empty command line argument)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1511376985, "post_id": 47441911, "comment_id": 81839080, "body": "@AndyG The syntax <code>char *ptr</code> doesn&#39;t distinguish between a pointer to one or a pointer to many. It&#39;s just a pointer to <code>char</code>."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1511377010, "post_id": 47441911, "comment_id": 81839093, "body": "Imagine that if you&#39;d run your program (let&#39;s call it <i>your_program</i>) like: <code>your_program argument1 argumenr2 path&#47;to&#47;argument3 &quot;argument 4&quot;</code> those <b>5</b> strings (<code>char*</code>s) would be held by <code>argv</code> (that is how you would access them from your program)."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1511377111, "post_id": 47441911, "comment_id": 81839148, "body": "Yes, a pointer points to a single character. Since C has no &quot;string&quot; type, string-like functions are often made to assume that such pointers are pointing to the first character of a sequence in memory. That is, the address of a &quot;string&quot; is really just the address of its first character."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1511377124, "post_id": 47441911, "comment_id": 81839153, "body": "@user3386109: Yes but think of it in terms of <code>main</code> (command line argument). If it was a pointer to a singular character, it would somehow have to be the NUL character. Plus, the standard says that it must contain Nul-terminated multibyte strings..."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377239, "post_id": 47441911, "comment_id": 81839225, "body": "First lesson, C is not C++ is not C, tag only one language ! Second lesson, you must be able to find information on your own, like you said it&#39;s a basic question and there are tons of duplicate on this site."}, {"owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377404, "post_id": 47441911, "comment_id": 81839313, "body": "@Stargateur I found a few other examples that were similar, however I failed to understand the concept. Even after learning about argv the question my professor gave us seems unclear to me. I just wanted to see if none of the above was correct and I understood properly."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511377727, "post_id": 47441911, "comment_id": 81839484, "body": "@NickK Maybe your problem is that you don&#39;t understand pointer ? Because <a href=\"https://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean\">this</a> is clear to me, you should search question about <a href=\"https://stackoverflow.com/questions/tagged/c%20pointers?sort=votes&amp;mode=all\">how pointer work in C</a>. By the way, <a href=\"https://cdecl.org/?q=char+%2A%2Aargv%3B\" rel=\"nofollow noreferrer\">this</a> is the correct answer to what is <code>argv</code> in <code>main()</code>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1511377965, "post_id": 47441911, "comment_id": 81839593, "body": "@NickK E is indeed correct, because <code>argv</code> is a pointer to a pointer to a character, which is none of the above. We cannot however know whether you&#39;ve understood properly and you should ask your professor if you don&#39;t understand the concept."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511381189, "post_id": 47441911, "comment_id": 81841124, "body": "I nominated to reopen because (a) this question is not a duplicate of the purported original, (b) the top answer there does not discuss the type of <code>argv</code>, and (c) none of the answers there correctly give the type of <code>argv</code>, which is a pointer (not an array) to pointer to <code>char</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511385127, "post_id": 47441911, "comment_id": 81843000, "body": "@Stargateur: Yes, C and C++ are two different languages, and a question normally should have just one tag or the other. In this case, though, the answer happens to be the same for C and for C++."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511385976, "post_id": 47441911, "comment_id": 81843422, "body": "@AndyG <code>char *</code> is pointer to character. Not an array, and not a string.  A <code>char *</code> does not contain a string (and the standard does not say that it does).  It may point to a character which is in a string."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1511386098, "post_id": 47441911, "comment_id": 81843478, "body": "@EricPostpischil I like how one of those who closed as duplicate, also posted the wrong answer in a comment. (currently the top comment)"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511386477, "post_id": 47441911, "comment_id": 81843632, "body": "@KeithThompson until C++ or C change this fact and we will have to create a question where all answer will need to be updated and answer differently for C and C++. Duplicate is one of this usecase, you have an question and answers for C++, someone ask for C, and we close the C because C++ answer to the C question, if in the future this is not anymore the case, we can reopen the duplicate question in C. Easy, clean, etc. And I disagree, c standard say that argv will contain pointer to string where c++ standard say that argv with contain pointer to c-string."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511389720, "post_id": 47441911, "comment_id": 81844941, "body": "@M.M.: &quot;arguments shall be supplied in argv[0] through argv[argc-1] as pointers to the initial characters of null-terminated multibyte strings (ntmbs s)&quot;  is what the C++ standard specifies."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511391442, "post_id": 47441911, "comment_id": 81845526, "body": "@AndyG Yes, that is consistent with my comment. The <code>char *</code> in this case points to the initial character of a string. The <code>char *</code> is not an array nor a string, and does not contain a string."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392336, "post_id": 47441911, "comment_id": 81845817, "body": "@M.M: In C, a <code>char*</code> value may be a pointer to a string. (The term <i>pointer to a string</i> is defined in the C standard, 7.1.1p1: &quot;A <i>pointer to a string</i> is a pointer to its initial (lowest addressed) character.&quot;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511392446, "post_id": 47441911, "comment_id": 81845848, "body": "@KeithThompson Yes, that is what I am saying. &quot;A pointer to a string&quot; is a different concept to &quot;a string&quot;"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511392722, "post_id": 47441911, "comment_id": 81845928, "body": "@Stargateur: As I said, I agree that it should have been tagged with one language or the other. But neither C nor C++ is likely to change in this area. BTW, the C++ standard (ISO 2012) says that <code>argv[0]</code> through <code>argv[argc-1]</code> are &quot;pointers to the initial characters of null-terminated multibyte strings (NTMBSs)&quot;, not &quot;c-strings&quot;. In any case, the meaning is essentially identical."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392984, "post_id": 47441911, "comment_id": 81846012, "body": "@M.M. I see what you&#39;re saying. Splitting hairs a little here, perhaps, but you&#39;re right, it points to the first character of the multibyte string. The way your comments read to me made it sound like you really believed there&#39;s only ever one character there :-)"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "edited": false, "score": 0, "creation_date": 1511383803, "post_id": 47443144, "comment_id": 81842395, "body": "Thanks a lot Eric! This is exactly what I was looking for!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1511385071, "post_id": 47443144, "comment_id": 81842979, "body": "&quot;<i>Either your instructor mistakenly intended C</i>&quot; -- On first reading, I thought you mean that the instructor meant to ask about C rather  than C++. I now realize that you meant choice C. I&#39;ll edit."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511396187, "post_id": 47443144, "comment_id": 81846857, "body": "The citation is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow noreferrer\">C11 Standard -5.1.2.2.1 Program startup (draft n1570)</a> and this is an evil question. <code>argv</code> is an array of pointers to char, but when passed as a parameter to the function <code>main</code> the first level of indirection is converted to a pointer providing a pointer to pointer to char in <code>main()</code>. So it really is two distinct questions &quot;What is it?&quot; or &quot;What is its resulting type in <code>main()</code> after being passed as a parameter?&quot; question."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511397734, "post_id": 47443144, "comment_id": 81847230, "body": "@DavidC.Rankin I don&#39;t get your point, standard only say &quot;the  array  members argv[0]&quot;, this make me feel strange because standard shouldn&#39;t say that <code>argv</code> is an array. More, I don&#39;t think that C standard want to force an implementation to use an array for <code>argv</code>. Or maybe all my life is a lie, I don&#39;t know."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511402983, "post_id": 47443144, "comment_id": 81848330, "body": "The standard says <code>&quot;the array members argv[0] through argv[argc-1] inclusive shall contain pointers to strings&quot;</code>."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511403817, "post_id": 47443144, "comment_id": 81848532, "body": "@DavidC.Rankin: Undoubtedly it is intended that <code>argv</code> point to the members of an array, and <code>argv[0]</code> through <code>argv[argc-1]</code> are those members. Nonetheless, <code>argv</code> is not an array. If I write <code>int x[3]; int *y = x;</code>, then <code>x</code> is an array, <code>y</code> is a pointer to <code>int</code>, and <code>y[0]</code> is the first member of the array <code>x</code>. <code>y[0]</code> is <b>an</b> array member, but it is not <b>y\u2019s</b> array member. <code>y[0]</code> is a member of the array <code>x</code> because <code>y</code> points to <code>x[0]</code>, and the subscript operator evaluates to the object that is <code>x[0]</code>, so <code>y[0]</code> <b>is</b> <code>x[0]</code>. Further, the question asks about \u201cThe parameter <code>argv</code>.\u201d"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1511410518, "post_id": 47443144, "comment_id": 81850129, "body": "I&#39;m just a simple person. When the standard says <code>&quot;the array members argv[0] through argv[argc-1]...&quot;</code> who am I to argue? I don&#39;t mean to mince words either. The array, as I understand it, is an array of pointers. Which is what allows indexing and pointer arithmetic, and why the declaration for main is <code>int main(int argc, char *argv[])</code>. I agree with the semantics that for all practical purposes within <code>main</code> argv is a <i>pointer to pointer to char</i>. Which is also why <code>int main (int argc, char **argv)</code> is a valid declaration. Beyond that, I&#39;ll defer to your wisdom <code>:)</code>"}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 5, "last_activity_date": 1511394992, "last_edit_date": 1511394992, "creation_date": 1511381404, "answer_id": 47443144, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv/47443144#47443144", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>The correct answer is E, none of the above. Although the parameter declaration looks like an array of pointer to <code>char</code>, the rules of C adjust it to pointer to pointer to <code>char</code>, and so do the rules of C++.</p>\n\n<p>Either your instructor mistakenly intended choice C or your instructor designed a question inappropriately tricky for an introductory class, unless it is extra credit.</p>\n"}, {"comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511395272, "post_id": 47445552, "comment_id": 81846637, "body": "You confuse array and pointer in a question that ask about this difference ;). &quot;The data referred to by <code>argv</code> is an array,&quot; wrong, &quot;Please note <code>args</code> must be an array.&quot;, wrong. That remind me some funny mail, <a href=\"https://lkml.org/lkml/2015/9/3/428\" rel=\"nofollow noreferrer\">lkml.org/lkml/2015/9/3/428</a>. &quot;By definition, though, it&#39;s a pointer to the start of an array of char*&quot;, nope"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511399586, "post_id": 47445552, "comment_id": 81847640, "body": "I&#39;m not confused.  I described how an array is passed as a pointer. While exec(3) is free to construct an array of pointers for argv, or accept such an array and pass it verbatim (or copy it) the fact remains that argv points to the start of an array, else the locations up to argv[argc-1] wouldn&#39;t be valid.  If you think that&#39;s not so, you haven&#39;t offered any evidence."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511404453, "post_id": 47445552, "comment_id": 81848678, "body": "First <code>exec()</code> family are not a part of C standard. &quot;argv points to the start of an array, else the locations up to argv[argc-1] wouldn&#39;t be valid.&quot;, You confuse a pointer that contain the address of contigus numbers of element type and an array. An array is only with the syntax &quot;[5](fixed size) or [n](VLA) or [](automatic size at compilation time only if initialized)&quot;, <code>char **args;</code> is not an array, <code>char *argv[];</code> is not an array, <code>char *args[5]</code> is not an array but a pointer to an array of size 5. <code>int *p = (int [3]){1, 2, 3};</code> is a pointer. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p20\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.2.5p20</a>"}, {"owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511451733, "post_id": 47445552, "comment_id": 81872685, "body": "&quot;<code>char *args[5]</code> is not an array but a pointer to an array of size 5&quot;.  Really?  What is <code>sizeof(args)</code> in that case?  If the answer surprises you, I can only refer you to K&amp;R.  I&#39;m sorry if &quot;points to the start of an array&quot; is unclear; to me your description is less clear because redundant, but equivalent."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1511452067, "post_id": 47445552, "comment_id": 81872922, "body": "Oh yeah, my bad <code>char *argv[5];</code> is an array of size 5 of pointer. I confuse with <code>char (*argv)[5];</code> Whatever, <code>char *argv[];</code> is not an array. Array and pointer are not equivalent. Sorry, I&#39;m not a good english speaker, so I can&#39;t explain it very well."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 2, "last_activity_date": 1511394657, "creation_date": 1511394657, "answer_id": 47445552, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv/47445552#47445552", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>I think your professor wants <strong>C</strong>, even though the pedanticly correct answer is <strong>E</strong>.  The data referred to by <code>argv</code> <em>is</em> an array, but the variable itself is a pointer.  I think it's worth exploring why, because it has nothing to do with the type of array or <code>main</code>.</p>\n\n<p>Consider an array of integers,</p>\n\n<pre><code>int a[] = { 1, 2, 3 };\n</code></pre>\n\n<p>This allocates 3 adjacent integers.  The size of the array is <code>sizeof(int) * 3</code>.</p>\n\n<p>Now let's write a function to double the values of each member,</p>\n\n<pre><code>void F( int m[], size_t n ) {\n    for( int i=0; i &lt; n; i++ ) {\n        m[i] *= 2;\n    }\n\nint main( int argc, char *argv[] ) {\n    F(a, sizeof(a)/sizeof(a[0]));\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>What is <code>m</code>?  It's declared to be an array, but it's really a pointer: <code>sizeof(m) == sizeof(int*)</code>.  That's because C <em>doesn't pass arrays as function arguments</em>.  The term of art in C is that an array argument <em>decays</em> to a pointer.</p>\n\n<p>It sorta kinda doesn't matter, because C <em>syntax</em> hides a host of sins, er, differences.  You can use the subscript notation with both arrays and pointers.  For that reason, our function <code>F</code> can treat <code>m</code> <em>almost</em> like an array, except that it requires the length, because it can't derive the length from the size, because the size is the size of the pointer.</p>\n\n<p>Let me say that a different way.  When <code>F</code> is called, the \"arguments on the stack\" are not the values of <code>a</code>, namely <code>1</code>, <code>2</code>, and <code>3</code>.  There is just one such argument, a pointer to the first element of <code>a</code> (often thought of as the address of the first element).  You can use that pointer as an array partly because the name of an array <em>also</em> refers to the address of the first element.  </p>\n\n<p>Now let's back up to your friend <code>argv</code>.  Array, or pointer?  Let's say your program <em>foo</em> is invoked on the command line:</p>\n\n<pre><code>$ foo sam I am\n</code></pre>\n\n<p>What does the operating system do?  Somehow, it has to pass those 4 strings (character arrays) to your program.  Somewhere, it has to allocate contiguous space for them.  <em>Conceptually</em>, the shell might do something like:</p>\n\n<pre><code>char **args = calloc(5, sizeof(char*));\nargs[0] = \"foo\"; \nargs[1] = \"sam\"; \nargs[2] = \"I\"; \nargs[3] = \"am\"; \n</code></pre>\n\n<p>or,</p>\n\n<pre><code>char args[5] = { \"foo\", \"sam\", \"I\", \"am\" };\n</code></pre>\n\n<p>Either way, it could pass <code>args</code> to <strong>execv</strong>(3), invoking your <code>main</code>, and passing you a ... pointer.  After all, it can't pass you an array, right?</p>\n\n<p>Please note <code>args</code> <em>must</em> be an array.  If it weren't <code>argv[1]</code> would be meaningless.  </p>\n\n<p>(Why 5 elements, you ask, when there are only 4 arguments?   There's a rule -- C or Posix, i don't remember -- that the last element in the array (!) must be a NULL pointer.)</p>\n\n<p>Array or pointer?  Wave or particle?  Where you stand depends on where you sit.  <code>argv</code> is pointer a to <code>char*</code>, certainly.  By definition, though, it's a pointer to the start of an array of <code>char*</code>.  </p>\n"}], "owner": {"reputation": 125, "user_id": 7618567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d7db90d7271bd521a26d4eef5fb75c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7618567/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 47443144, "answer_count": 2, "score": 2, "last_activity_date": 1511394992, "creation_date": 1511376576, "last_edit_date": 1511382212, "question_id": 47441911, "link": "https://stackoverflow.com/questions/47441911/the-parameter-argv-in-the-function-mainint-argc-char-argv", "title": "The parameter argv in the function main(int argc, char *argv[])", "body": "<p>Sorry if this seems like a basic question. I've been studying for a midterm I have coming up and I can't seem to wrap my head around this. I understand that <code>argv</code> can be used in the command line when you need to send it arguments, but none of the answers my professor gave us seems to make sense.</p>\n\n<blockquote>\n  <p>The parameter <code>argv</code> in the function <code>main(int argc, char *argv[])</code> is:<br>\n  A. An array of characters<br>\n  B. A string<br>\n  C. An array of pointers to character<br>\n  D. A character pointer<br>\n  E. None of the above  </p>\n</blockquote>\n\n<p>I feel like it is none of the above, but it could be because I don't fully understand the concept of <code>argv</code>. Any help would be appreciated!</p>\n"}, {"tags": ["python", "c++", "subprocess", "std"], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "is_accepted": false, "score": 0, "last_activity_date": 1511391869, "creation_date": 1511391869, "answer_id": 47445183, "question_id": 47441877, "link": "https://stackoverflow.com/questions/47441877/python-subprocesses-passing-multiple-commands-in-a-loop/47445183#47445183", "title": "Python subprocesses - passing multiple commands in a loop", "body": "<p>There was a deadlock situation. You need to exactly count the number of lines written to <code>stdout</code> and only then write to <code>stdin</code>. </p>\n"}], "owner": {"reputation": 516, "user_id": 5043357, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/efeb4b2e5899c59b9e65008393ca5019?s=128&d=identicon&r=PG&f=1", "display_name": "rishran", "link": "https://stackoverflow.com/users/5043357/rishran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511391869, "creation_date": 1511376432, "question_id": 47441877, "link": "https://stackoverflow.com/questions/47441877/python-subprocesses-passing-multiple-commands-in-a-loop", "title": "Python subprocesses - passing multiple commands in a loop", "body": "<p>I am trying to run a <code>c++</code> implementation of a model (<code>sent2Vec</code>) from a <code>python</code>p program using the <code>subprocess</code> module. The <code>c++</code> program runs a loop like the following:</p>\n\n<pre><code>while(raw_input):\n    print(perform_action(input))\n</code></pre>\n\n<p>This is because it loads a huge model into memory and then uses it as and when a query is passed to it. So, the c++ output looks like this:</p>\n\n<pre><code>Pre-computing vectors... done.\nQuery sentence?\n\nquery\n0.603723 1 a1\n0.306778 2 a2\n0.262201 4 a3\n0.198674 0 a4\n0.131687 3 a5\n0.121209 5 a6\n0 6\n\nQuery sentence?\n</code></pre>\n\n<p>I would like to run the program and then when required send an input and read the output. I know the number of lines of generated per query so it's fine if I have to read the entire output every time.</p>\n\n<p>I tried the following:</p>\n\n<p><code>process = Popen(cmd, stdin=PIPE, stdout=PIPE)\nprocess.stdin.write(query)\nprocess.stdout.readlines()</code></p>\n\n<p>However, this seems to get stuck in a loop. I looked at multiple stackoverflow threads and most of them suggest what I tried. I would really appreciate any help.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "assembly", "cpu-registers", "arm64", "calling-convention"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1511377557, "post_id": 47441813, "comment_id": 81839395, "body": "BTW, register selection for function calls is a compiler decision, not an assembly language issue.  The compiler may pass a parameter in R8."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1511388395, "post_id": 47441813, "comment_id": 81844447, "body": "ARM syntax is <code>mnemonic  dst, src</code>, so  you want <code>mov w1, w0</code> to make a copy of <code>w0</code> (your first arg)."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1511615583, "post_id": 47441813, "comment_id": 81927453, "body": "there is no reason why the output cannot overwrite an input register.  The pointer that comes into the function is pass by reference but it is a copy of the address put there just for that function, if that function calls another function it will also overwrite that parameter register and on and on, and the returns of all nested functions will overwrite on the way back up.  the stack can be used or if the parameter is not needed then simply overwrite."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1515217822, "post_id": 47441813, "comment_id": 83226243, "body": "AT&amp;T syntax is the only syntax I know that puts dest at the end"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1575084020, "post_id": 47441813, "comment_id": 104456752, "body": "@phuclv: m68k syntax puts the dst last, too.  And AT&amp;T syntax was inspired by PDP-11 syntax which also does that."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1511377670, "creation_date": 1511377670, "answer_id": 47442170, "question_id": 47441813, "link": "https://stackoverflow.com/questions/47441813/arm-assembly-access-parameter-vs-return-value/47442170#47442170", "title": "ARM assembly - access parameter vs return value?", "body": "<p>IMHO, your best solution is to write the C function, or minimal function, then tell the compiler to output the assembly language.  This will show the calling interface for functions.</p>\n\n<p>You could also look up the register passing convention in your compiler's documentation.  </p>\n\n<p>If you want to preserve register values, you should use the PUSH instruction (or it's equivalent, depending on ARM mode or Thumb mode).  Also remember to POP the registers before the end of the function.  </p>\n"}, {"tags": [], "owner": {"reputation": 3543, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "is_accepted": false, "score": 1, "last_activity_date": 1515195079, "creation_date": 1515195079, "answer_id": 48122735, "question_id": 47441813, "link": "https://stackoverflow.com/questions/47441813/arm-assembly-access-parameter-vs-return-value/48122735#48122735", "title": "ARM assembly - access parameter vs return value?", "body": "<p>You may want to write your assembly code in compliance with the <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.den0024a/ch09s01s01.html\" rel=\"nofollow noreferrer\">ABI for ARM 64-bit Architecture</a>. <br/> \nIn the example above, you could keep the address for c_style_string in a 'Callee-saved' register (X19-X29)', and copy it to x0/w0 every time you are calling a Palindrome() - I am assuming here Palindrome() is a C function, and is therefore itself compliant with the ARCH 64-bit ABI. <br/>\nA desirable side-effect would be that your C code could call always your assembly code, and vice-versa.</p>\n"}], "owner": {"reputation": 3, "user_id": 7186009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1ab76eea16dd50e52c12ebcd0310fd?s=128&d=identicon&r=PG&f=1", "display_name": "tyger2020", "link": "https://stackoverflow.com/users/7186009/tyger2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575083937, "creation_date": 1511376085, "last_edit_date": 1575083937, "question_id": 47441813, "link": "https://stackoverflow.com/questions/47441813/arm-assembly-access-parameter-vs-return-value", "title": "ARM assembly - access parameter vs return value?", "body": "<p>I have a function prototype <code>int Palindrome(const char *c_style_string);</code></p>\n\n<p>In ARM v8 assembly, I believe that the parameter is stored in register w0. However, isn't this also the register that <code>ret</code> outputs the value of?</p>\n\n<p>If so, what do I need to do so that values do not get overwritten? I was thinking something like <code>mov w0, w1</code> at the beginning of my code so that I refer to c_style_string as w1 whenever I parse through it, and then edit w0 to store an int...would this be right?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1511375674, "post_id": 47441672, "comment_id": 81838370, "body": "Threads when created will be scheduled to run. Without synchronization controlling their start times, we cannot predict if one will start before another, even if we insert a small wait before creating the next one. (Although this is purely theoretical discussion; in practice they start pretty soon after creation, so waiting for 3 seconds is more than adequate)"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1511375677, "post_id": 47441672, "comment_id": 81838373, "body": "They may start whenever, they may get processor time whenever, it&#39;s handled by the operating system. If you start them quickly they might run at the same time, in the order of creation or randomly."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 2, "creation_date": 1511375726, "post_id": 47441672, "comment_id": 81838400, "body": "Threads are scheduled by the operating system. You can never know when they start. However in a &#39;normal&#39; non busy system they will probably start asap."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1511375782, "post_id": 47441672, "comment_id": 81838432, "body": "&quot;Same time&quot; sounds like a real word, but it&#39;s actually not at all something you can observe from within the program. The only way to establish a time ordering between threads is via synchronization."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511376070, "post_id": 47441672, "comment_id": 81838575, "body": "If you need thread 2 to start doing stuff after thread 1, look into <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\"><code>std::condition_variable</code></a> and work your way up from there."}], "answers": [{"comments": [{"owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1511376395, "post_id": 47441747, "comment_id": 81838762, "body": "What is the difference between thread &quot;launch&quot; and thread &quot;run&quot; as you have mentioned?"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "edited": false, "score": 0, "creation_date": 1511376651, "post_id": 47441747, "comment_id": 81838881, "body": "Launch is when the kernel data structures are set up for another set of instructions to begin execution. A thread is running when a CPU is actually processing these instructions. Execution may begin at any moment after those data structures are set up. They may even start executing before any instructions in the launching thread execute."}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": true, "score": 4, "last_activity_date": 1511377858, "last_edit_date": 1511377858, "creation_date": 1511375804, "answer_id": 47441747, "question_id": 47441672, "link": "https://stackoverflow.com/questions/47441672/multi-threading-do-threads-start-running-at-the-exact-same-time/47441747#47441747", "title": "Multi-threading - Do threads start running at the exact same time?", "body": "<p>Counting on anything about when a thread starts or doesn't is generally a programming error. Yes, technically a thread is launched as soon as you create it. But that doesn't means it starts running immediately. The OS scheduler might do any number of things there.</p>\n\n<p>Your attempt to coax the scheduler into doing what you want with sleep isn't even guaranteed to work, as you likely are aware.</p>\n\n<p>If you need threads to synchronize their execution with respect to one another, you need to do something explicit to make that happen. Your sleep doesn't count, it's just a prayer in the hopes that things come out the way you want.</p>\n\n<p>Synchronization primitives like <code>::std::mutex</code> are popular. I've also used communication on a pipe, though that's more commonly used to synchronize between processes.</p>\n\n<p>In Linux, for example, creating a <code>::std::thread</code> results in a call to the <a href=\"http://man7.org/linux/man-pages/man2/clone.2.html\" rel=\"nofollow noreferrer\">the <code>clone</code> system call</a>. This call acts directly opposite to the usual saying (two enter, but only one may leave) instead one enters and two leave. One thread makes the system call, and it's returned from twice, once in each thread. Which thread it returns in first is completely arbitrary. And if you have two cores, there may be no sensible answer to that question. A thread is executing as soon as that system call is returned from.</p>\n\n<p>So, if you are creating multiple threads in a sequence of instructions executing in one thread, the kernel data structures describing these new threads are created in the order of execution that appears in your program. But that doesn't mean any of their instructions run. It may be that the instructions to create all four of them run in a continuous uninterrupted sequence, and then the kernel decides to suspend the original thread and execute the fourth one, but only 5 CPU instructions worth, and then the 1st, and then the 3rd. It might be that the kernel immediately schedules the first thread you create on a separate core so it's instructions execute literally at the same time as the kernel data structure for the next thread is being created.</p>\n\n<p>All that's guaranteed here about execution order is that the original thread will make four sequential requests to create 4 new kernel data structures describing four new threads of execution. Those structures will be created in sequential order, but the order of their creation has absolutely nothing whatsoever to do with the order in which any of their instructions are executed.</p>\n"}], "owner": {"reputation": 1207, "user_id": 278910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OB8dM.jpg?s=128&g=1", "display_name": "ontherocks", "link": "https://stackoverflow.com/users/278910/ontherocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 47441747, "answer_count": 1, "score": 2, "last_activity_date": 1511377858, "creation_date": 1511375467, "question_id": 47441672, "link": "https://stackoverflow.com/questions/47441672/multi-threading-do-threads-start-running-at-the-exact-same-time", "title": "Multi-threading - Do threads start running at the exact same time?", "body": "<p>Trying to understand multi-threading. If I understand correctly, threads do not start at the same exact time, they just run in parallel starting one after the other in the sequence written. Let's take an example</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nvoid task(string msg, int index)\n{\n    cout &lt;&lt; \"Thread \" &lt;&lt; index &lt;&lt; \" says: \" &lt;&lt; msg &lt;&lt; endl;    \n}\n\nint main()\n{\n    cout &lt;&lt; \"Main thread begins\" &lt;&lt; endl;\n\n    thread t1(task, \"Hello\", 1);\n    thread t2(task, \"Hello\", 2);\n    thread t3(task, \"Hello\", 3);\n    thread t4(task, \"Hello\", 4);\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n\n    cout &lt;&lt; \"Back in main thread\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Since the program executes line by line, so thread t1 will start first, t2 second, t3 third and t4 fourth. Once started, they will run in parallel (along with the main thread). The above program will display incoherent strings because this is a too simple and quick operation for each thread racing to write to the console. </p>\n\n<p>If we give each thread some time, then the output will be coherent. For example</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\nusing namespace std::this_thread;\nusing namespace std::chrono;\n\nvoid task(string msg, int index)\n{\n    cout &lt;&lt; \"Thread \" &lt;&lt; index &lt;&lt; \" says: \" &lt;&lt; msg &lt;&lt; endl;    \n}\n\nint main()\n{\n    cout &lt;&lt; \"Main thread begins\" &lt;&lt; endl;\n\n    thread t1(task, \"Hello\", 1);\n    sleep_for(seconds(3));\n    thread t2(task, \"Hello\", 2);\n    sleep_for(seconds(3));\n    thread t3(task, \"Hello\", 3);\n    sleep_for(seconds(3));\n    thread t4(task, \"Hello\", 4);\n    sleep_for(seconds(3));\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n\n    cout &lt;&lt; \"Back in main thread\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Did not find stated explicitly anywhere about the starting time of threads. Is this understanding correct?</p>\n"}, {"tags": ["c++", "optional", "c++17"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 4, "creation_date": 1511375521, "post_id": 47441623, "comment_id": 81838293, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/optional/reset\" rel=\"nofollow noreferrer\"><code>myOptional.reset()</code></a>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511375713, "post_id": 47441623, "comment_id": 81838395, "body": "Braced initializers are allowed in several places across the language: <code>foo({x, y})</code>, <code>return {x, y}</code>, <code>p = {x, y}</code> ... In general, <code>x = {}</code> is a way to assign a value-initialized object to <code>x</code>. I&#39;d say none of the three methods mentioned is &quot;the standard method&quot;."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511375960, "post_id": 47441623, "comment_id": 81838521, "body": "<code>std::optional</code> shares operations with other library types (<code>reset()</code> like <code>std::unique_ptr</code> for instance). And their semantics are fairly the same. I imagine it&#39;s to allow for optional&#39;s use in more generic ways (templated code). All those methods are &quot;standard&quot;."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 1, "creation_date": 1511380573, "post_id": 47441623, "comment_id": 81840872, "body": "Not a direct answer but probably interesting for you (when wondering about different ways to assign to <code>std::optional</code>): Roland Bock gave a 5-min talk at CppCon 2017 with the title <a href=\"https://www.youtube.com/watch?v=QB0oY5f6q-E\" rel=\"nofollow noreferrer\">&quot;Making optional optional&quot;</a>. At the end of the talk he proposes an elegant way how <code>std::optional</code> could be used (after telling the story how he arrived there). Basically he proposes the ternary operator to combine <code>std::optional</code> and <code>std::nullopt</code> in this way: <code>map.count(key) ? std::optional{map.at(key)} : std::nullopt</code>."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "reply_to_user": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 1, "creation_date": 1511426019, "post_id": 47441623, "comment_id": 81856447, "body": "Q&amp;A somewhat related to @Julius comment: <a href=\"https://stackoverflow.com/questions/45389872\">Return Optional value with ?: operator</a>."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 14, "last_activity_date": 1511376349, "last_edit_date": 1511376349, "creation_date": 1511376017, "answer_id": 47441801, "question_id": 47441623, "link": "https://stackoverflow.com/questions/47441623/how-to-assign-nothing-to-stdoptionalt/47441801#47441801", "title": "How to assign &quot;nothing&quot; to std::optional&lt;T&gt;?", "body": "<p>I wouldn't say there is one \"standard\" way to assign nothing to std::optional.</p>\n\n<p>If you read <a href=\"https://isocpp.org/files/papers/N3672.html#rationale.reset_syntaxl\" rel=\"noreferrer\">the proposal</a> for <code>std::optional</code> (\"A proposal to add a utility class to represent optional objects\") the authors present two ways, in this order:</p>\n\n<blockquote>\n  <p>We put the extra requirements in the standardese to make sure that the following syntax works for resetting the optional:</p>\n</blockquote>\n\n<pre><code>op = {};\n</code></pre>\n\n<blockquote>\n  <p>We consider that this will become a common idiom for resetting (putting into default-constructed state) values in C++</p>\n  \n  <p>Note that it is not the only way to disengage an optional object. You can also use:</p>\n</blockquote>\n\n<pre><code>op = std::nullopt;\n</code></pre>\n\n<p><code>std::optional::reset</code> did not exist at the time of writing that proposal, so it was not mentioned, however it is also a valid way to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 10, "last_activity_date": 1511380594, "last_edit_date": 1511380594, "creation_date": 1511379468, "answer_id": 47442658, "question_id": 47441623, "link": "https://stackoverflow.com/questions/47441623/how-to-assign-nothing-to-stdoptionalt/47442658#47442658", "title": "How to assign &quot;nothing&quot; to std::optional&lt;T&gt;?", "body": "<p>This is a choose your own adventure. You have three options:</p>\n\n<ol>\n<li><p><a href=\"http://en.cppreference.com/w/cpp/utility/optional/reset\" rel=\"noreferrer\"><code>my_opt.reset()</code></a>. Just directly set the optional to a disengaged state.</p></li>\n<li><p><code>my_opt = std::nullopt;</code> This uses <a href=\"http://en.cppreference.com/w/cpp/utility/optional/operator%3D\" rel=\"noreferrer\"><code>operator=()</code></a> overload #1</p></li>\n<li><p><code>my_opt = {};</code> This uses <a href=\"http://en.cppreference.com/w/cpp/utility/optional/operator%3D\" rel=\"noreferrer\"><code>operator=()</code></a> overload #3.</p></li>\n</ol>\n\n<p>Yes, (3) uses the <code>optional</code>'s move assignment operator (a default-constructed <code>optional</code> is disengaged, so this does the right thing). This is because <code>{}</code> will not match the <a href=\"http://en.cppreference.com/w/cpp/utility/optional/nullopt_t\" rel=\"noreferrer\"><code>std::nullopt_t</code> constructor</a>, and the perfect-forward assignment (overload #4) would be less preferred in the case where <code>T</code> is constructible from <code>{}</code> because it's a template. </p>\n\n<p>(1) and (2) always work, regardless of <code>T</code>. (3) only works if <code>T</code> is move assignable, because we're going through the assignment operator. But (3) is the shortest. So YMMV. </p>\n\n<p>If (3) makes no sense to you, that's fine, don't use it. Braced-init-lists are a particularly odd part of the language, and you can't go wrong with <code>reset()</code> or assigning to <code>nullopt</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8370684"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4028, "favorite_count": 1, "accepted_answer_id": 47441801, "answer_count": 2, "score": 15, "last_activity_date": 1511380594, "creation_date": 1511375299, "question_id": 47441623, "link": "https://stackoverflow.com/questions/47441623/how-to-assign-nothing-to-stdoptionalt", "title": "How to assign &quot;nothing&quot; to std::optional&lt;T&gt;?", "body": "<p>Reading about <a href=\"http://en.cppreference.com/w/cpp/utility/optional\" rel=\"noreferrer\"><code>std::optional</code></a>, I'm confused about what is the standard way to assign a value of <em>something</em> and <em>nothing</em> to an <code>optional</code>.</p>\n\n<p>I guess <code>operator=</code> would be the standard mechanism to assign a value to an optional. Seems to work. Does this imply a copy of the underlying object?</p>\n\n<p>What is the standard method to assign <em>nothing</em>? I've seen <code>x = {}</code> (which makes no sense to me as <code>{}</code> is an empty block) and <code>x = std::nullopt</code>. </p>\n"}, {"tags": ["c++", "winapi", "mfc", "comctl32"], "comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1511375110, "post_id": 47441460, "comment_id": 81838095, "body": "Oh, and we&#39;ve got our first unhelpful downvote/close vote.  You win the internet my friend."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375549, "post_id": 47441460, "comment_id": 81838312, "body": "You can select whetever you like in the list box and ensure it is visible. But it is up to you to handle the logic. When you select one item in one listbox, follow your logic to update the second. Just becare you don&#39;t get stuck in a loop of the second being updated and thus trying to update the first. So you need a flag."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375618, "post_id": 47441460, "comment_id": 81838341, "body": "It is also not fully clear what you want to do. It also sounds like you want to set the vertical scroll step ratio in one to be relative to the other."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375654, "post_id": 47441460, "comment_id": 81838362, "body": "I think you have the down vote because you have not showed what you have tried nor attempted to visually explain what you are trying to do."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375676, "post_id": 47441460, "comment_id": 81838371, "body": "@AndrewTruckle How do I position the viewed top to be not located on an item boundary.  I only see <code>int CListBox::SetTopIndex(int nIndex)</code>."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375813, "post_id": 47441460, "comment_id": 81838449, "body": "Can&#39;t you calculate it? If you know how many rows fit the visual part of the display, then why can&#39;t you offset the top index as needed. Eg: if you want index 20 at the bottom, and you can only see 10 at a time, set top index to 11."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511375979, "post_id": 47441460, "comment_id": 81838531, "body": "@AndrewTruckle From what I&#39;ve seen of a CListBox control, it allows vertical scrolling in (apparently) indivisible rows.  i.e. I do not know how to get the top item to only be partially shown, since <code>nIndex</code> refers to a row number, not an arbitrary window position."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1511376831, "post_id": 47441460, "comment_id": 81838990, "body": "Then maybe you should possibly look at the scrollbar properties? I can&#39;t suggest anymore myself. Sorry."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511379527, "post_id": 47441460, "comment_id": 81840371, "body": "I&#39;m afraid this is not possible with the standard list view control. I think you need to rewrite this more or less from scratch."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1511379854, "post_id": 47441460, "comment_id": 81840520, "body": "@MichaelWalz, not exactly what I&#39;m looking to hear. You don&#39;t think it would be possible to have an encapsulating window to be able to do this?  I&#39;m thinking that it could forward messages to the encapsulated window, and somehow move the encapsulated window when positioning to manage the points between the rows.  Just that I don&#39;t know how difficult this would be. \u2639\ufe0f"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1511387670, "post_id": 47441460, "comment_id": 81844134, "body": "Can you use a <b>ListView</b> control instead? ListView allows for pixel-precise scroll positioning."}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511379564, "creation_date": 1511374749, "last_edit_date": 1511379564, "question_id": 47441460, "link": "https://stackoverflow.com/questions/47441460/how-to-position-the-content-of-a-clistbox-on-a-non-item-boundary", "title": "How to position the content of a CListBox on a non-item boundary?", "body": "<p>Not sure if this is possible, but I have two <code>CListBox</code> controls which I need to vertically sync, but the controls may have different amount of data in them <em>as well as</em> each row may be of different heights.  I want it such that no matter what is in each control, when I get to the top or bottom of one, I get to the same top or bottom of the other.</p>\n\n<p>To do this right, I need to vertically scroll the items such that they don't necessarily align on an item boundary.  Like the following example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/b70rs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b70rs.png\" alt=\"Showing 2 things that can be done and 1 that I need to be done\"></a></p>\n\n<p>Left side shows the top of row one, the middle shows the top of row two.  The right image shows a partial of row 1, which is what I need.</p>\n\n<p>Is this possible, or am I going to have to do a major refactor requiring that I swap the controls out with something else? (definitely not preferable due to potential risk)</p>\n\n<p>Oh, and before anyone asks why it was done like this, the answer is <em>legacy</em>.</p>\n\n<p>I'm still looking into this, but if the control can't be forced to to this, might there be a workaround where I could have some sort of virtual <code>CListBox</code> which I could possibly <code>BitBlt</code> from, or would that entail more work then swapping out controls?  Is there a better way?</p>\n\n<p>Perhaps I could encapsulate the control in another window which would be able to have a larger view and clip that view to what I want to see?</p>\n"}, {"tags": ["c++", "types", "template-meta-programming"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511374834, "post_id": 47441457, "comment_id": 81837955, "body": "Are you looking for <code>std::tuple</code>?"}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "edited": false, "score": 0, "creation_date": 1511374953, "post_id": 47441457, "comment_id": 81838014, "body": "No, that&#39;s not what I am looking for. If you look at my question, you can see that I allready have the typelist aspects working, my question is how to build it in the background without breaking the Component API."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511375090, "post_id": 47441457, "comment_id": 81838085, "body": "@moka I do not understand the question. By dynamically build this list, do you mean at runtime? What do you mean by &quot;in the background&quot;? What do you mean by &quot;breaking the simple Component API&quot;? What have you tried that breaks it and how does it break?"}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511375325, "post_id": 47441457, "comment_id": 81838194, "body": "@Fran&#231;oisAndrieux I want to accumulate all the types that were created using the Component&lt;&gt; template into a typelist automatically without breaking the existing API (that&#39;s what I meant with &quot;in the background&quot;, I don&#39;t want you to have to explicitly build the typelist). Hope that makes more sense! I have a feeling that is not possible but I am throwing it out there to see if anybody has an idea."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511375543, "post_id": 47441457, "comment_id": 81838310, "body": "@moka That makes sense to me. Unfortunately, that is not supported by c++. You can&#39;t know at compile time all of the concrete instances of a template that will exist. One way of looking at it is that you can never know that no other translation unit will define a new one down the line. Perhaps there is a platform specific solution, or one that uses external tools, but this can&#39;t be done in standard c++."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1511375598, "post_id": 47441457, "comment_id": 81838332, "body": "@moka: I think that would require some degree of reflection. I don&#39;t think there&#39;s a way to do it otherwise without breaking your existing API."}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "edited": false, "score": 0, "creation_date": 1511375702, "post_id": 47441457, "comment_id": 81838389, "body": "Okay, thanks everybody, thats what I though. I kinda hoped there was a way :/"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1511376011, "post_id": 47441457, "comment_id": 81838549, "body": "At the moment, no idea how to solve your problem but... do you accept solution with old c-style (and evil) macros?"}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1511376266, "post_id": 47441457, "comment_id": 81838668, "body": "I don&#39;t really think that I will end up using any macro based solutions, but I think they certainly deserve to be explored here! @HolyBlackCat the solution I had in mind really should list all template instantiations of Component&lt;&gt; if that makes sense."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1511376506, "post_id": 47441457, "comment_id": 81838821, "body": "Are all <code>using Blah = Component&lt;Blah&gt;;</code> lines located in one place?"}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1511376574, "post_id": 47441457, "comment_id": 81838850, "body": "@HolyBlackCat No, that&#39;s kind of the issue I am trying to overcome, they can be spread out and sit in different namespaces."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1511376627, "post_id": 47441457, "comment_id": 81838870, "body": "Then I&#39;m taking my words on macro solutions back, they probably won&#39;t work."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 1, "creation_date": 1511379045, "post_id": 47441457, "comment_id": 81840102, "body": "Under the hood of <a href=\"https://github.com/google/googletest\" rel=\"nofollow noreferrer\">Google Test</a> there seems to be a macro solution for exactly that kind of problem: Spread across different translation units one may type <code>TEST(SomeClass, Works) { EXPECT_EQ(SomeClass{}.calc(), 42); }</code>. Then in the <code>main</code> one can <code>::testing::InitGoogleTest(&amp;argc, argv); return RUN_ALL_TESTS();</code> which magically knows all tests."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 1, "creation_date": 1511379805, "post_id": 47441457, "comment_id": 81840500, "body": "Probably one could come up with a <a href=\"https://stackoverflow.com/questions/44267673/is-stateful-metaprogramming-ill-formed-yet\">&quot;not-yet-ill-formed&quot;</a> solution based on stateful metraprogramming (<a href=\"http://b.atch.se/posts/constexpr-counter/\" rel=\"nofollow noreferrer\">&quot;constexpr counter&quot;</a>), but you are probably interested in a useful solution to a real problem rather than the answer to the question &quot;is it possible accepting all evil things&quot;?"}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "reply_to_user": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1511389649, "post_id": 47441457, "comment_id": 81844917, "body": "@Julius yes, I am rather interested in a useful solution but this is a good mind bender :). I am pretty sure its not worth the trouble at this point and that I might just have to build the typelist from hand."}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1530265306, "post_id": 47441457, "comment_id": 89184966, "body": "What about composition? You can use ADL as in <code>make_tuple</code>, but overload the operators of your choice to combine these types, e.g. <code>container(1)+container(2.0f)+container(3.0d)</code> = <code>Container&lt;int, float, double&gt;{1, 2.0f, 3.0d}</code> via <code>container(T) -&gt; Container&lt;T&gt;</code> and <code>Container&lt;S...&gt;::operator+(Container&lt;T...&gt;) -&gt; Container&lt;S..., T...&gt;</code>. Furthermore, you can &quot;zip&quot;, &quot;cross-multiply&quot;, &quot;splice&quot;, etc. with other operators/methods. If you don&#39;t want to explicitly type, then you want to implicitly type, and ADL in general can get you there."}, {"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1530265849, "post_id": 47441457, "comment_id": 89185278, "body": "To make this a bit more expressive, you can use other tags to infix operations: <code>container(1) + cross{} + (container(2.0f) + container(3.0d))</code> = <code>Cross&lt;Container&lt;int&gt;&gt;{{1}} + Container&lt;float, double&gt;{2.0f, 3.0d}</code> = <code>Cross&lt;Container&lt;int&gt;, Container&lt;float, double&gt;&gt;{{1}, {2.0f, 3.0d}}</code> = <code>Container&lt;Container&lt;int, float&gt;, Container&lt;int, double&gt;&gt;{{1, 2.0f}, {1, 3.0d}}</code>. Am I making sense? I&#39;m not 100% sure I understood you, but I suggest looking at Traits/Concepts for ideas. Explicit instantiation has its uses, but no one should expect you (or vice versa) to use it exclusively."}, {"owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "reply_to_user": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1530293984, "post_id": 47441457, "comment_id": 89200817, "body": "@JohnP I don&#39;t think that will work in this case as there is no way to keep track of the overall list of types as Fran&#231;oise correctly noted in one of the comments above. The problem is not building type lists in general, but being able to store and modify that list somehow without having to pass it along manually."}], "owner": {"reputation": 4109, "user_id": 300713, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f419659a57c1497173c0e009da3c7adc?s=128&d=identicon&r=PG", "display_name": "moka", "link": "https://stackoverflow.com/users/300713/moka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1511375652, "creation_date": 1511374743, "last_edit_date": 1511375652, "question_id": 47441457, "link": "https://stackoverflow.com/questions/47441457/dynamically-build-typelist-in-c", "title": "Dynamically build typelist in C++", "body": "<p>I am looking for a way to dynamically build a type list at compile time. I am creating components holding different types and under the hood I'd like to build a type list that holds all the types registered as components. Imagine the following:</p>\n\n<pre><code>using Name = Component&lt;std::string&gt;;\nusing Position = Component&lt;Vec2f&gt;;\n</code></pre>\n\n<p>I'd then like to be able to end up with a type list which holds <code>std::string</code> and <code>Vec2f</code> in this case that I can access and expand, i.e. something like this:</p>\n\n<pre><code>using AllComponents = SomeMagicTypeThatHoldsAllComponents;\n</code></pre>\n\n<p>I build the typelist portion already and it works something like this:</p>\n\n<pre><code>using List = typename MakeTypeList&lt;int, double, std::string&gt;::List;\n</code></pre>\n\n<p>You can append or prepend a type to <code>List</code> like this:</p>\n\n<pre><code>using Append = typename AppendType&lt;List, float&gt;::List;\nusing Prepend = typename PrependType&lt;List, Vec2f&gt;::List;\n</code></pre>\n\n<p>And get types by index like this (which basically allows you to expand the types with the help of <code>std::integer_sequence</code>):</p>\n\n<pre><code>using FirstType = typename TypeAt&lt;List, 0&gt;::Type;\n</code></pre>\n\n<p>The issue I can't wrap my head around is <strong>how to dynamically build this list in the background without breaking the simple Component API</strong>. Does anybody have suggestions if or how this could be achieved?</p>\n\n<p><strong>EDIT:</strong>\nTo Clarify, the only solution I could come up with for now is to pass the type list along as an extra template argument, i.e.</p>\n\n<pre><code>using AllTypes = using MakeTypeList&lt;&gt;::List;\nusing Name = Component&lt;AllTypes, std::string&gt;;\nusing Position = Component&lt;AllTypes, Vec2f&gt;;\n</code></pre>\n\n<p>I am interested in a solution where I don't have to pass the typelist along.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "namespaces", "operator-overloading", "boost-propertytree"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511373760, "post_id": 47441202, "comment_id": 81837341, "body": "&quot;<i>I would <b>really</b> prefer not to move the streaming operator into the same namespace as the class.</i>&quot; Then you <b>really</b> prefer for your code not to work."}, {"owner": {"reputation": 652, "user_id": 1517350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d84dba16fa83d0d7e1007f89c0be6d91?s=128&d=identicon&r=PG", "display_name": "Olaf Mandel", "link": "https://stackoverflow.com/users/1517350/olaf-mandel"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511373961, "post_id": 47441202, "comment_id": 81837441, "body": "@Nicol Bolas: Could you please elaborate why moving the operator should be required? That is the main part of the question."}, {"owner": {"reputation": 652, "user_id": 1517350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d84dba16fa83d0d7e1007f89c0be6d91?s=128&d=identicon&r=PG", "display_name": "Olaf Mandel", "link": "https://stackoverflow.com/users/1517350/olaf-mandel"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511374458, "post_id": 47441202, "comment_id": 81837733, "body": "To clarify my reluctance to extend <code>NS1</code>: in my real code, <code>NS1</code> is <code>std</code>, <code>Foo</code> is <code>tuple</code> and it is undefined behaviour to add something to <code>std</code> (with a few exceptions that apparently don&#39;t cover this case)."}], "owner": {"reputation": 652, "user_id": 1517350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d84dba16fa83d0d7e1007f89c0be6d91?s=128&d=identicon&r=PG", "display_name": "Olaf Mandel", "link": "https://stackoverflow.com/users/1517350/olaf-mandel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511374848, "creation_date": 1511373660, "last_edit_date": 1511374848, "question_id": 47441202, "link": "https://stackoverflow.com/questions/47441202/operator-lookup-in-boostproperty-tree", "title": "Operator lookup in boost::property_tree", "body": "<p>Having a custom type in a namespace and the streaming-operator in a parent namespace, the compiler fails to find the operator in a <code>boost::property_tree::ptree::get()</code> operation. Example:</p>\n\n<pre><code>#include &lt;boost/property_tree/ptree.hpp&gt;\n\nnamespace NS1 {\n    struct Foo { int foo; };\n}\n\ntemplate&lt;typename IStream&gt;\nIStream&amp; operator&gt;&gt;(IStream&amp; is, NS1::Foo&amp; val) {\n    is &gt;&gt; val.foo;\n    return is;\n}\n\nnamespace NS2 {\n    void bar() {\n        std::stringstream ss;\n        auto&amp; is = static_cast&lt;std::istream&amp;&gt;(ss);\n        NS1::Foo foo;\n        is &gt;&gt; foo;                         // line 1\n    }\n}\n\nint main() {\n    NS2::bar();                            // line 2\n\n    boost::property_tree::ptree tree;\n    tree.get_value_optional&lt;NS1::Foo&gt;();   // line 3\n}\n</code></pre>\n\n<p>In the example, the compiler fails to find the operator unless it is moved into the <code>NS1</code> namespace. But just the call in line 2 without line 3 does compile! Before line 1 the <code>bar()</code> function even casts the stream to the same type that <code>boost</code> uses in the <code>customize_stream::extract()</code> function that fails the lookup.</p>\n\n<p>My main problem is: what does the call in line 3 do differently from the one in lines 2 that the lookup fails?</p>\n\n<p>And no: I would <strong>really</strong> prefer not to move the streaming operator into the same namespace as the class.</p>\n"}, {"tags": ["c++", "arrays", "swift", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8684122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a05b473af2446e23e145777ad29b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Andreev", "link": "https://stackoverflow.com/users/8684122/igor-andreev"}, "edited": false, "score": 0, "creation_date": 1511883040, "post_id": 47478289, "comment_id": 82027209, "body": "I&#39;ve decided to use 1D arrays and pass pointers to those using <code>&amp;</code> operator. <code>C++</code> stuff treat audio channels as separate arrays anyway. Works like a charm."}], "tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1511547040, "creation_date": 1511547040, "answer_id": 47478289, "question_id": 47441134, "link": "https://stackoverflow.com/questions/47441134/cant-pass-float-array-into-objective-c/47478289#47478289", "title": "Can&#39;t pass [[Float]] array into Objective-C++", "body": "<p>The problem here is that code like</p>\n\n<pre><code>let dataInPtr = UnsafeMutablePointer(mutating: [UnsafeMutablePointer(mutating: dataIn[0]), UnsafeMutablePointer(mutating: dataIn[1])])\n</code></pre>\n\n<p>uses <strong>implicit bridging</strong> to create <code>UnsafePointer</code>s from arrays.  Those pointers are (indirectly) saved for later use, which is undefined behavior. See <code>UnsafePointer</code> and <code>UnsafeMutablePointer</code> documentation at <a href=\"https://developer.apple.com/documentation/swift/unsafepointer\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/swift/unsafepointer</a> and <a href=\"https://developer.apple.com/documentation/swift/unsafemutablepointer\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/swift/unsafemutablepointer</a>.  As stated there, </p>\n\n<blockquote>\n  <p>The pointer created through implicit bridging of an instance or of an\n  array\u2019s elements is only valid during the execution of the called\n  function. Escaping the pointer to use after the execution of the\n  function is undefined behavior. In particular, do not use implicit\n  bridging when calling an <code>UnsafePointer</code> initializer.</p>\n</blockquote>\n\n<p>Before trying to solve this problem in a way that works, one should explore the possibility of writing a wrapper in such a way that an input or output buffer passed between Swift and the wrapper is a region in memory where all channel data is stored contiguously.  Then the buffers won't need to be treated as arrays of pointers, and passing arrays of, say, floats between Objective-C(++) and Swift is easier.</p>\n"}], "owner": {"reputation": 177, "user_id": 8684122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26a05b473af2446e23e145777ad29b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Andreev", "link": "https://stackoverflow.com/users/8684122/igor-andreev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 47478289, "answer_count": 1, "score": 1, "last_activity_date": 1511547040, "creation_date": 1511373422, "question_id": 47441134, "link": "https://stackoverflow.com/questions/47441134/cant-pass-float-array-into-objective-c", "title": "Can&#39;t pass [[Float]] array into Objective-C++", "body": "<p>I am processing sound inside my app. The DSP algorithm is written in <code>C++</code>. I need to pass data into <code>C++</code> and then pass the result into audio subsystem in <code>Swift</code>.</p>\n\n<p>To pass data into <code>C++</code> I've written an <code>Objective-C++</code> class:</p>\n\n<pre><code>#define BufferSize 10240\n\n@interface EffectsWrapper : NSObject\n-   (void) processBuffer: (float * _Nonnull *_Nonnull) dataIn ofSize: (int) dataSize intoOutputBuffer: (float * _Nonnull *_Nonnull) dataOut;\n@end\n\n@implementation EffectsWrapper\n-   (void) processBuffer: (float * _Nonnull *_Nonnull) dataIn ofSize: (int) dataSize intoOutputBuffer: (float * _Nonnull *_Nonnull) dataOut\n{\n    for(int channel = 0; channel &lt; 2; channel ++)\n    {\n        for(int i = 0; i &lt; dataSize; i ++)\n        {\n            float data =  dataIn[channel][i];\n            dataOut[channel][i] = data;\n        }\n    }\n}\n@end\n</code></pre>\n\n<p>As you can see, right now it just copies the input into the output.</p>\n\n<p>The invocation of the method is done inside <code>MTAudioProcessingTapProcessCallback</code> closure, which is described as a property of <code>MyClass</code>. <code>EffectsWrapper</code> is also a property of this class.</p>\n\n<p>To \"process\" data, firstly, I create input and output arrays like so:</p>\n\n<pre><code>var dataIn: [[Float]] = Array(repeating: Array(repeating: 0.0, count: framesCount), count: 2)\nvar dataOut: [[Float]] = Array(repeating: Array(repeating: 0.0, count: framesCount), count: 2)\n</code></pre>\n\n<p>Secondly, I fill in the input array with data. And then I invoke <code>EffectsWrapper.process</code> method like so:</p>\n\n<pre><code>let dataInPtr = UnsafeMutablePointer(mutating: [UnsafeMutablePointer(mutating: dataIn[0]), UnsafeMutablePointer(mutating: dataIn[1])])\nlet dataOutPtr = UnsafeMutablePointer(mutating: [UnsafeMutablePointer(mutating: dataOut[0]), UnsafeMutablePointer(mutating: dataOut[1])])\nmyClass.effectsWrapper.processBuffer(dataInPtr, ofSize: Int32(framesCount), intoOutputBuffer: dataOutPtr)\n</code></pre>\n\n<p>The problem is that data inside <code>EffectsWrapper</code> is complete garbage. Sometimes it even throws me an allocation error. And I do not get why the pointers I create are pointing onto some random places in memory rather than the elements of arrays I need them to point to.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["c++", "winapi", "modern-ui"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1511373977, "post_id": 47441124, "comment_id": 81837452, "body": "<a href=\"https://stackoverflow.com/questions/37953472/\">The <code>Translation</code> table is not always reliable</a>"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511378587, "post_id": 47441124, "comment_id": 81839895, "body": "@RemyLebeau: Well, that is not exactly the same thing. I don&#39;t even get to calling <code>VerQueryValue</code> on <code>L&quot;\\\\StringFileInfo\\\\%04x%04x\\\\FileDescription&quot;</code>, the call with <code>L&quot;\\\\VarFileInfo\\\\Translation&quot;</code> returns size for 1 language when I am expecting 3. That is my issue."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511379383, "post_id": 47441124, "comment_id": 81840284, "body": "I understand the issue. My point is, the translation table is susceptible to human error, and it is a  common mistake to code the table incorrectly. You may have 3 languages available but the table only has 1 entry. Use a resource editor to verify. Some resource compilers don&#39;t report mismatches like this."}], "answers": [{"comments": [{"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511379786, "post_id": 47442505, "comment_id": 81840486, "body": "I see. So what you&#39;re saying is that one of my options is to parse PE header manually. (I don&#39;t have an <code>HMODULE</code> handle for <code>EnumResourceLanguages</code>.)"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511380970, "post_id": 47442505, "comment_id": 81841033, "body": "If this is some sort of PE version viewer/utility and you want to support all version types then yes, you must do some manual parsing. You might be able to trick <code>VerQueryValueW</code> on non-Win9x systems into reading raw resource data but it is a bit risky because it might do some extra work in <code>GetFileVersionInfo</code> to massage the data."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511383578, "post_id": 47442505, "comment_id": 81842290, "body": "No I need it to be compatible with Windows 95."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511384339, "post_id": 47442505, "comment_id": 81842639, "body": "Then you must parse yourself, the 32-bit version resource is stored in Unicode and the API on Win9x uses extra data to store translated strings."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511387246, "post_id": 47442505, "comment_id": 81843949, "body": "Yeah, dude, I&#39;m kidding about Win95. But yes, otherwise it looks like I need to be parsing it manually. (I just stepped into <code>GetFileVersionInfo*</code> and <code>VerQueryValue</code> APIs and besides raising &amp; muting all kinds of exceptions internally, they are very inefficient. Each API basically calls <code>LoadLibraryEx</code> to map the file into memory and then releases it. Even if all you need is the size of the resource.)"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1511443703, "post_id": 47442505, "comment_id": 81867676, "body": "<code>GetFileVersionInfoSize</code> does not return just the size of the resource, it might lie and return a larger size if the other functions might require space to do Unicode conversion. Not sure if NT systems support 16-bit ANSI resources, if not then it will not lie in the W version of the functions."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 1, "last_activity_date": 1511378954, "creation_date": 1511378954, "answer_id": 47442505, "question_id": 47441124, "link": "https://stackoverflow.com/questions/47441124/how-to-traverse-a-multi-language-version-resource/47442505#47442505", "title": "How to traverse a multi-language version resource?", "body": "<p>There are two ways to store multi-language version resources.</p>\n\n<p>The best way is of course to have one resource entry with multiple translation blocks. These will be accessible with <code>VerQueryValue</code>.</p>\n\n<p>The other way is to store multiple resource entries, one for each language. This is the way you store other types of localized resources (bitmaps, strings etc.). <code>EnumResourceLanguages</code> should be able to enumerate them but <code>GetFileVersionInfo</code> will probably just pick the language that matches your thread or UI language.</p>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1599343308, "creation_date": 1511373376, "last_edit_date": 1599343308, "question_id": 47441124, "link": "https://stackoverflow.com/questions/47441124/how-to-traverse-a-multi-language-version-resource", "title": "How to traverse a multi-language version resource?", "body": "<p>I'm trying to use the code snippet shown <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647464%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">at the end of this page</a> to read multi-language version resource for executable files.</p>\n\n<p>But, for example, when I run the code below for this file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0On73.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0On73.png\" alt=\"enter image description here\"></a></p>\n\n<p>I get my <code>nCnt</code> as <code>1</code> for only one resource, i.e. English.</p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>LPCTSTR buff = L\"path-to\\\\file.exe\";\n\nstruct LANGANDCODEPAGE {\n  WORD wLanguage;\n  WORD wCodePage;\n} *lpTranslate;\n\nDWORD dwDummy;\nDWORD dwSz = GetFileVersionInfoSize(buff, &amp;dwDummy);\nif(dwSz &gt; 0)\n{\n    BYTE* pData = new (std::nothrow)BYTE[dwSz];\n    if(pData)\n    {\n        if(GetFileVersionInfo(buff, NULL, dwSz, pData))\n        {\n            //Get language info\n            UINT ncbSz;\n            LANGANDCODEPAGE* pLcp;\n            if(VerQueryValue(pData, L\"\\\\VarFileInfo\\\\Translation\", (VOID**)&amp;pLcp, &amp;ncbSz))\n            {\n                UINT nCnt = ncbSz / sizeof(struct LANGANDCODEPAGE);\n\n                CString strQuery;\n                UINT nczBufLn;\n                LPCTSTR pDescBuf;\n\n                for(UINT i = 0; i &lt; nCnt; i++)\n                {\n                    strQuery.Format(L\"\\\\StringFileInfo\\\\%04x%04x\\\\FileDescription\", \n                        pLcp[i].wLanguage, pLcp[i].wCodePage);\n                    if(VerQueryValue(pData, (LPTSTR)strQuery.GetString(), (VOID**)&amp;pDescBuf, &amp;nczBufLn))\n                    {\n                        wprintf(L\"Description%d: %s\\n\", i, pDescBuf);\n                    }\n                }\n            }\n        }\n\n        delete[] pData;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "uncrustify"], "comments": [{"owner": {"reputation": 136, "user_id": 1797436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f329482d36437621152da5e12be288e?s=128&d=identicon&r=PG", "display_name": "CDanU", "link": "https://stackoverflow.com/users/1797436/cdanu"}, "edited": false, "score": 0, "creation_date": 1511446961, "post_id": 47441111, "comment_id": 81869768, "body": "Your example works for me on Uncrustify-0.66.1-2-f9c285db. So it&#39;s either something else in your config and/or code. Post links to both."}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "reply_to_user": {"reputation": 136, "user_id": 1797436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f329482d36437621152da5e12be288e?s=128&d=identicon&r=PG", "display_name": "CDanU", "link": "https://stackoverflow.com/users/1797436/cdanu"}, "edited": false, "score": 0, "creation_date": 1511449074, "post_id": 47441111, "comment_id": 81871074, "body": "@CDanU Thanks for the information; it&#39;s valuable to know that there&#39;s something locally wrong. Unfortunately, the config and sample code are on my work machine, and unavailable to me for the next few days. I can say that my test code was very simple, essentially:"}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "reply_to_user": {"reputation": 136, "user_id": 1797436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f329482d36437621152da5e12be288e?s=128&d=identicon&r=PG", "display_name": "CDanU", "link": "https://stackoverflow.com/users/1797436/cdanu"}, "edited": false, "score": 0, "creation_date": 1511449569, "post_id": 47441111, "comment_id": 81871375, "body": "Sorry - got caught by the 5 minute editing limit. The test code was basically a file containing:  void foo() { int val; bool flag; if (flag) val = 10; }"}], "answers": [{"tags": [], "owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "is_accepted": true, "score": 2, "last_activity_date": 1512056667, "last_edit_date": 1512056667, "creation_date": 1511878635, "answer_id": 47533749, "question_id": 47441111, "link": "https://stackoverflow.com/questions/47441111/configuring-uncrustify-to-add-braces/47533749#47533749", "title": "Configuring uncrustify to add braces", "body": "<p>It turns out that the problem was setting \"mod_full_brace_if_chain\" to \"true\". </p>\n\n<p>The documentation says:</p>\n\n<blockquote>\n  <p>Make all if/elseif/else statements in a chain be braced or not. Overrides mod_full_brace_if.</p>\n  \n  <p>If any must be braced, they are all braced.  If all can be unbraced, then the braces are removed.</p>\n</blockquote>\n\n<p>I didn't read the last sentence closely enough when setting the value.</p>\n"}], "owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 47533749, "answer_count": 1, "score": 1, "last_activity_date": 1512056667, "creation_date": 1511373327, "last_edit_date": 1511831932, "question_id": 47441111, "link": "https://stackoverflow.com/questions/47441111/configuring-uncrustify-to-add-braces", "title": "Configuring uncrustify to add braces", "body": "<p>I'm using version of 0.66.1 of uncrustify, and am puzzled by the behavior of 'mod_full_brace_if' which I've set to 'force'. Its comment says:</p>\n\n<blockquote>\n  <p>Add or remove braces on single-line 'if' statement. Will not remove the braces if they contain an 'else'.</p>\n</blockquote>\n\n<p>Given the line:</p>\n\n<pre><code>if (flag) val = 10;\n</code></pre>\n\n<p>I hoped/expected it to be transformed to</p>\n\n<pre><code>if (flag) { val = 10; }\n</code></pre>\n\n<p>Instead it remains unchanged.</p>\n\n<p>Is this just my misunderstanding of the behavior of 'mod_full_brace_if'?</p>\n\n<p>Later:\nI had some time to do a little experimentation at home. I started off by creating a new format file, and modified some of the settings having to do with forcing braces to be on the same line as various keywords, as well as some settings forcing braces to surround a one-line body. I made a test file with the following contents:</p>\n\n<pre><code>void foo() {\nbool flag;\nint var;\nif (flag) var = 10;\nif (!flag)\n    var = 20; \n}\n</code></pre>\n\n<p>Running uncrustify with my new config file yielded the same lack of transformation that I saw at work.</p>\n\n<p>I then created another config file and only changed 'mod_full_brace_if' (to 'force'). Using it on my test file resulted in braces surrounding the bodies of the if statements. Clearly there's some weird interaction of multiple settings. I see some change-a-setting-and-test drudgery in my future.</p>\n"}, {"tags": ["c++", "recursion", "binary-search-tree"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 3, "creation_date": 1511373046, "post_id": 47441009, "comment_id": 81836973, "body": "Use a debugger. Always use a debugger before you ask ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1511373093, "post_id": 47441009, "comment_id": 81836992, "body": "Suppose only one of <code>left</code> and <code>right</code> is null?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1511373481, "post_id": 47441009, "comment_id": 81837183, "body": "<b><i>I debugged my code and for some reason, I got access violation error.</i></b> If you have Visual Studio when it hits an access violation walk up the callstack to your code to see the line of your code that caused the access violation. I expect gdb will do the same."}, {"owner": {"reputation": 41, "user_id": 8969711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95265cf504b4abba90758052b6807ab?s=128&d=identicon&r=PG&f=1", "display_name": "I.Klein", "link": "https://stackoverflow.com/users/8969711/i-klein"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511373642, "post_id": 47441009, "comment_id": 81837274, "body": "@drescherjm I fixed the post. The line is the if condition."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1511374116, "post_id": 47441009, "comment_id": 81837536, "body": "BTW, you don&#39;t need to use <code>this-&gt;</code> syntax when accessing members; only use if the member has the same name as the parameter (in that case, rename the parameter)."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8969711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95265cf504b4abba90758052b6807ab?s=128&d=identicon&r=PG&f=1", "display_name": "I.Klein", "link": "https://stackoverflow.com/users/8969711/i-klein"}, "edited": false, "score": 0, "creation_date": 1511374420, "post_id": 47441260, "comment_id": 81837714, "body": "Thank you very much! I understand where I was wrong. Fixed my code."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 8969711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95265cf504b4abba90758052b6807ab?s=128&d=identicon&r=PG&f=1", "display_name": "I.Klein", "link": "https://stackoverflow.com/users/8969711/i-klein"}, "edited": false, "score": 0, "creation_date": 1511375106, "post_id": 47441260, "comment_id": 81838093, "body": "@I.Klein No at all. You are welcome.:)"}, {"owner": {"reputation": 41, "user_id": 8969711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95265cf504b4abba90758052b6807ab?s=128&d=identicon&r=PG&f=1", "display_name": "I.Klein", "link": "https://stackoverflow.com/users/8969711/i-klein"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511380390, "post_id": 47441260, "comment_id": 81840784, "body": "@drescherjm I accepted."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 5, "last_activity_date": 1511373856, "creation_date": 1511373856, "answer_id": 47441260, "question_id": 47441009, "link": "https://stackoverflow.com/questions/47441009/get-height-of-binary-search-tree-recursively/47441260#47441260", "title": "Get Height of binary search tree recursively", "body": "<p>The negation of the condition in this if statement</p>\n\n<pre><code>if (this-&gt;_left == nullptr &amp;&amp; this-&gt;_right == nullptr)\n</code></pre>\n\n<p>is</p>\n\n<pre><code>else if ( not ( this-&gt;_left == nullptr &amp;&amp; this-&gt;_right == nullptr) )\n</code></pre>\n\n<p>that is in turn equivalent to</p>\n\n<pre><code>else if ( this-&gt;_left != nullptr || this-&gt;_right != nullptr )\n</code></pre>\n\n<p>However in the function there is ignored the fact that either <code>this-&gt;_left</code> or <code>this-&gt;_right</code> can be equal to nullptr.</p>\n\n<pre><code>    return std::max(this-&gt;_left-&gt;getHeight(), this-&gt;_right-&gt;getHeight()) + 1;\n</code></pre>\n\n<p>Also it is unclear why the height has the signed type <code>int</code> instead of some unsigned type as for example <code>size_t</code>.</p>\n\n<p>I suppose that the head of the tree is always unequal to <code>nullptr</code>. Otherwise you should rewrite the function as a static member function with one parameter: pointer to the head node.</p>\n\n<p>The function can look the following way</p>\n\n<pre><code>size_t BSNode::getHeight() const //Returns the height of the tree.\n{\n        return  1 + std::max(\n                this-&gt;_left  == nullptr ? 0 : this-&gt;_left-&gt;getHeight(), \n                this-&gt;_right == nullptr ? 0 : this-&gt;_right-&gt;getHeight());\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8969711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95265cf504b4abba90758052b6807ab?s=128&d=identicon&r=PG&f=1", "display_name": "I.Klein", "link": "https://stackoverflow.com/users/8969711/i-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "closed_date": 1511389159, "accepted_answer_id": 47441260, "answer_count": 1, "score": 0, "last_activity_date": 1511373951, "creation_date": 1511372954, "last_edit_date": 1511373951, "question_id": 47441009, "link": "https://stackoverflow.com/questions/47441009/get-height-of-binary-search-tree-recursively", "closed_reason": "Not suitable for this site", "title": "Get Height of binary search tree recursively", "body": "<p>I've been trying make a function to get the height of a binary tree in recursive way.</p>\n\n<pre><code>int BSNode::getHeight() const //Returns the height of the tree.\n{\n    if (this-&gt;_left == nullptr &amp;&amp; this-&gt;_right == nullptr)\n    {\n        return 0;\n    }\n    else\n    {\n        return std::max(this-&gt;_left-&gt;getHeight(), this-&gt;_right-&gt;getHeight()) + 1;\n    }\n}\n</code></pre>\n\n<p>I debugged my code and for some reason, I got access violation error on the 'if condition' line. I can't see why I'm still getting this error. I'm suppose that it happening because one of my left or right is null, but I cant see other way to make it.\nThis is my function for inserting a node to the tree:</p>\n\n<pre><code>void BSNode::insert(string value) //Inserts node to the tree.\n{\n    if (value &gt; this-&gt;_data)\n    {\n        if (this-&gt;_right != NULL)\n        {\n            this-&gt;_right-&gt;insert(value);\n        }\n        else\n        {\n            this-&gt;_right = new BSNode(value);\n        }\n    }\n    else if (value &lt; this-&gt;_data)\n    {\n        if (this-&gt;_left != NULL)\n        {\n            this-&gt;_left-&gt;insert(value);\n        }\n        else\n        {\n            this-&gt;_left = new BSNode(value);\n        }\n    }\n}\n</code></pre>\n\n<p>This is the class I built:</p>\n\n<pre><code>class BSNode\n{\n    private:\n        string _data;\n        BSNode* _left;\n        BSNode* _right;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1511372980, "post_id": 47440921, "comment_id": 81836940, "body": "<code>Q_DECLARE_METATYPE</code> goes in the header file. There is an example here about namespaces: <a href=\"http://doc.qt.io/qt-5/qmetatype.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qmetatype.html</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511373139, "post_id": 47440921, "comment_id": 81837011, "body": "Note that the documentation states <b><i>If MyStruct is in a namespace, the Q_DECLARE_METATYPE() macro has to be outside the namespace:</i></b>"}], "answers": [{"tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": true, "score": 2, "last_activity_date": 1511373418, "last_edit_date": 1592644375, "creation_date": 1511373418, "answer_id": 47441133, "question_id": 47440921, "link": "https://stackoverflow.com/questions/47440921/where-to-place-q-declare-metatype-statement-when-using-header-and-source-files/47441133#47441133", "title": "Where to place Q_DECLARE_METATYPE statement when using header and source files?", "body": "<p>From <a href=\"http://doc.qt.io/qt-5/qmetatype.html#Q_DECLARE_METATYPE\" rel=\"nofollow noreferrer\">the documentation</a> (emphasis is mine):</p>\n<blockquote>\n<p>This macro makes the type <em>Type</em> known to <a href=\"http://doc.qt.io/qt-5/qmetatype.html\" rel=\"nofollow noreferrer\">QMetaType</a> <strong>as long as it provides a public default constructor, a public copy constructor and a public destructor</strong>. It is needed to use the type Type as a custom type in <a href=\"http://doc.qt.io/qt-5/qvariant.html\" rel=\"nofollow noreferrer\">QVariant</a>.</p>\n<p>This macro requires that <em>Type</em> is a <strong>fully defined</strong> type at the point where it is used.</p>\n</blockquote>\n<p>That's why the header-only solution works, and AFAIK there is no way but providing a full definition of the type before declaring it as a metatype.</p>\n"}], "owner": {"reputation": 1505, "user_id": 4118460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31e169d81e1a37c7837dbd8e48b1ea46?s=128&d=identicon&r=PG&f=1", "display_name": "vicrucann", "link": "https://stackoverflow.com/users/4118460/vicrucann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1917, "favorite_count": 1, "accepted_answer_id": 47441133, "answer_count": 1, "score": 1, "last_activity_date": 1511374852, "creation_date": 1511372573, "last_edit_date": 1511374852, "question_id": 47440921, "link": "https://stackoverflow.com/questions/47440921/where-to-place-q-declare-metatype-statement-when-using-header-and-source-files", "title": "Where to place Q_DECLARE_METATYPE statement when using header and source files?", "body": "<p>I'm using my custom <code>struct</code> within <code>QWizard</code> pages. Let's say a <code>struct</code> (or <code>class</code>) like so:</p>\n\n<pre><code>// foo.h\n\nnamespace nm{\n\nstruct Foo\n{\n    Foo();\n    void bar();\n};\n\n}\n</code></pre>\n\n<p>I want to be able to <code>registerField</code> with a <code>Q_PROPERTY</code> of type <code>nm::Foo</code>, for example:</p>\n\n<pre><code>// within some QWizardPage class\nQ_PROPERTY(nm::Foo foo READ getFoo WRITE setFoo)\n</code></pre>\n\n<p>I know that in order for me to use it, I have to declare it as Qt metatype: </p>\n\n<pre><code>Q_DECLARE_METATYPE(nm::Foo)\n</code></pre>\n\n<p>But I cannot figure out where to correctly place the above statement. I tried to place it at the end of <code>Foo.cpp</code>, but get a compilation error:</p>\n\n<blockquote>\n  <p>path/QtCore/qglobal.h:738: error: static assertion failed: Type is not registered, please use the Q_DECLARE_METATYPE macro to make it known to Qt's meta-object system. #define Q_STATIC_ASSERT_X(Condition, Message) static_assert(bool(Condition), Message)</p>\n</blockquote>\n\n<p>If I place it at the end of header file while also having a source file, I get: </p>\n\n<blockquote>\n  <p>/usr/lib/gcc/x86_64-linux-gnu/5/include/stddef.h:149: error: expected constructor, destructor, or type conversion before \u2018typedef\u2019\n   typedef PTRDIFF_TYPE ptrdiff_t;</p>\n</blockquote>\n\n<p>If I move all the definitions to the <code>Foo.h</code> and use it as a header-only file, then if I place the statement at the end of the file (outside of the namespace), it works. However, my class definitions are kind of long, and I want my class definitions to be placed at the source file.</p>\n\n<p>Is there any way I can use <code>Q_DECLARE_METATYPE</code> while having header and source files for my class and not a header-only file?</p>\n\n<p><strong>EDIT (Solution):</strong> I had to <em>fully define</em> my class, i.e., provide public default ctor, copy ctor and dtor. The final code looks like:</p>\n\n<pre><code>// somewhere in Foo.h\n#include &lt;QMetaType&gt;\n\nnamespace nm{\nstruct Foo\n{\n    Foo();\n    Foo(const Foo&amp; other);\n    ~Foo();\n\n    void bar();\n};\n} \n\nQ_DECLARE_METATYPE(nm::Foo)\n</code></pre>\n"}, {"tags": ["c++", "console-application", "windows-embedded"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1511371045, "post_id": 47440297, "comment_id": 81835889, "body": "Hmm. Your linked page says &quot;<i>If the EWX_FORCEIFHUNG value is specified, the system forces hung applications to close and does not display the dialog box.</i>&quot;."}, {"owner": {"reputation": 32992, "user_id": 15369, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/418a18dde0d9cb4cc434bd38a329190c?s=128&d=identicon&r=PG", "display_name": "Jon Cage", "link": "https://stackoverflow.com/users/15369/jon-cage"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1511422791, "post_id": 47440297, "comment_id": 81854668, "body": "Yes indeed but that does not appear to be what windows does."}, {"owner": {"reputation": 640, "user_id": 1288259, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/280551ca7234213d3b669732912b9137?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1288259/alex"}, "edited": false, "score": 0, "creation_date": 1511429924, "post_id": 47440297, "comment_id": 81858942, "body": "How do you know your program doesn&#39;t exit cleanly? What&#39;s the exit code?"}, {"owner": {"reputation": 32992, "user_id": 15369, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/418a18dde0d9cb4cc434bd38a329190c?s=128&d=identicon&r=PG", "display_name": "Jon Cage", "link": "https://stackoverflow.com/users/15369/jon-cage"}, "edited": false, "score": 0, "creation_date": 1511436777, "post_id": 47440297, "comment_id": 81863476, "body": "Logs finish abruptly but that&#39;s a good point; I should check the exit code to double-check whether this is an issue from the logging rather than the shutdown mechanism."}], "owner": {"reputation": 32992, "user_id": 15369, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/418a18dde0d9cb4cc434bd38a329190c?s=128&d=identicon&r=PG", "display_name": "Jon Cage", "link": "https://stackoverflow.com/users/15369/jon-cage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511370326, "creation_date": 1511370326, "question_id": 47440297, "link": "https://stackoverflow.com/questions/47440297/how-do-i-initiate-a-clean-windows-shutdown-without-waiting-for-a-user", "title": "How do I initiate a clean windows shutdown without waiting for a user?", "body": "<p>I'm trying to make an embedded windows 7 application shut the machine down gracefully.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>ExitWindowsEx(EWX_POWEROFF | EWX_FORCE,\n        SHTDN_REASON_MAJOR_OPERATINGSYSTEM |\n        SHTDN_REASON_MINOR_UPGRADE |\n        SHTDN_REASON_FLAG_PLANNED);\n</code></pre>\n\n<p>which appears to instantly kill everything (my app doesn't exit cleanly, it just dies).</p>\n\n<p>I've tried swapping <code>EWX_FORCE</code> for <code>EWX_FORCEIFHUNG</code> but that presents the user with a dialog which, in contrast to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa376868%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">the docs</a> doesn't seem to offer any timeout.</p>\n\n<p>Is there a way of doing this elegently or do I simply need to record the need to shutdown and then call the forcible shutdown as the last thing my app does?</p>\n"}, {"tags": ["c++", "loops", "casting"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1511370132, "post_id": 47440217, "comment_id": 81835297, "body": "The expression <code>p&#47;k</code> with <code>int p</code> and <code>int k</code> looks like a bad idea in the context of what you&#39;re hoping to achieve, since it gives an integer result (for example, <code>1&#47;2 == 0</code>). You might want to use <code>float</code> or <code>double</code> instead..."}, {"owner": {"reputation": 878, "user_id": 6911973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-l6J99KFNfBM/AAAAAAAAAAI/AAAAAAAAAWs/QMDeg2Waeoc/photo.jpg?sz=128", "display_name": "Jay Joshi", "link": "https://stackoverflow.com/users/6911973/jay-joshi"}, "edited": false, "score": 2, "creation_date": 1511370255, "post_id": 47440217, "comment_id": 81835376, "body": "try <code>(float)p &#47; k</code> instead of <code>p&#47;k</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1511372843, "post_id": 47440217, "comment_id": 81836889, "body": "Debugger.  Use a debugger.  A debugger will allow you to single-step through the code, <i>watching</i> values of variables.  Often, debugging is faster than creating a correct post to StackOverflow and waiting for somebody to inspect your code or debug your code for you."}, {"owner": {"reputation": 3568, "user_id": 5811973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/B4tie.jpg?s=128&g=1", "display_name": "Ishpreet", "link": "https://stackoverflow.com/users/5811973/ishpreet"}, "edited": false, "score": 0, "creation_date": 1511420282, "post_id": 47440217, "comment_id": 81853585, "body": "Just change <code>h+=(p&#47;k)</code> to <code>h+=((p*1.0)&#47;k)</code> so that p/k will be converted to floating point value."}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "is_accepted": false, "score": 0, "last_activity_date": 1511375876, "creation_date": 1511375876, "answer_id": 47441766, "question_id": 47440217, "link": "https://stackoverflow.com/questions/47440217/the-output-of-the-program-is-always-0/47441766#47441766", "title": "The output of the program is always &#39;0&#39;?", "body": "<p>The problem here is that you haven't declared <code>p</code> and <code>k</code> as <code>float</code> or <code>double</code>or explicitly cast them as such before the calculation and assignment to <code>h</code>.</p>\n\n<p>What's happening is for every iteration of the loop <code>p &lt; k</code> (by nature of the problem) since <code>p</code> and <code>k</code> are both declared as <code>int</code>, <code>p / k = 0</code>. So you're just summing 0 for every iteration. </p>\n\n<p>Either declare <code>p</code> and <code>k</code> as <code>float</code> or <code>double</code> or do this:</p>\n\n<pre><code>h += ((float) p) / ((float) k)\n</code></pre>\n\n<p>Also, for this specific problem I assume you're looking for precision, so be wary and look into that as well <a href=\"https://stackoverflow.com/questions/1074474/should-i-use-double-or-float\">Should I use double or float?</a></p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "is_accepted": false, "score": 0, "last_activity_date": 1511384682, "creation_date": 1511384682, "answer_id": 47443861, "question_id": 47440217, "link": "https://stackoverflow.com/questions/47440217/the-output-of-the-program-is-always-0/47443861#47443861", "title": "The output of the program is always &#39;0&#39;?", "body": "<p>implicit conversion and type casting are a trap where all newbies fall.\nin the instruction:</p>\n\n<pre><code>h += p/k;\n</code></pre>\n\n<p>the compiler performs an integer division first, then a promotion of the result to floating point type.\nand since:</p>\n\n<pre><code>p &lt; k ; for all i,j &lt; n\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>res = (p / k) &lt; 1 =&gt; truncates to 0;  // by integer division\n</code></pre>\n\n<p>thus:</p>\n\n<pre><code>sum(1-&gt;n) of p/k = sum (1-&gt;n) 0 = 0;\n</code></pre>\n\n<p>finally:</p>\n\n<pre><code>h = conversion to float of (0) = 0.0f;\n</code></pre>\n\n<p>that's why you have the result of 0.0f at the end.</p>\n\n<p>the solution:</p>\n\n<p>1- first of all you need to use the natural type for floating point of c++ which is \"double\" (under the hood c++ promotes float to double, so use it directly).</p>\n\n<p>2- declare all your variable as double, except the number of terms n:</p>\n\n<p>3- the number of terms is never negative, you need to express that in your code by declaring it as an unsigned int.</p>\n\n<p>4- if you do step 3, make sure to catch overflow errors, that is if the user enters a negative number your risk to have a very big number in \"n\", expel : n =-1 converts to 0xffffffff positive number.</p>\n\n<p>5- engineer your code sometimes is better.</p>\n\n<p>6- include only the headers that you need, and avoid a importing any namespace in your global namespace.</p>\n\n<p>here is how i think you should write your program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ndouble sum_serie(unsigned int n)\n{\n    double prod = 1.0, sum = 0.0;\n    for (double c=1; c&lt;=n ; c++)\n    {\n         prod *= ( ( 2*c ) - 1 ) / ( 2*c ); // remark the parenthesis\n         sum += prod;\n    }\n    return sum;\n}\n\nint main()\n{\n    unsigned int n = 0;\n    int temp = 0;\n    std::cout &lt;&lt; \" enter the number of terms n: \";\n    std::cin  &gt;&gt; temp;\n    if (temp &gt; 0) \n        n = temp; // this is how you catch overflow\n    else\n    {\n        std::cout &lt;&lt; \" n &lt; 0, no result calculated \" &lt;&lt; std::endl;\n        return 0;\n    }\n    std::cout &lt;&lt; \" the result is sum = \" &lt;&lt; sum_serie(n) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I know that the question was about the implicit conversion and casting in C++, but even the way of writing a code can show you what bugs you have in it, so try to learn a proper way of expressing your ideas into code, debugging comes natural afterward.</p>\n\n<p>Good Luck </p>\n"}], "owner": {"reputation": 1, "user_id": 8992212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73853480bb43c9901b5f28624e962d43?s=128&d=identicon&r=PG&f=1", "display_name": "Apurba Mondal", "link": "https://stackoverflow.com/users/8992212/apurba-mondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511384682, "creation_date": 1511370075, "last_edit_date": 1511379706, "question_id": 47440217, "link": "https://stackoverflow.com/questions/47440217/the-output-of-the-program-is-always-0", "title": "The output of the program is always &#39;0&#39;?", "body": "<p>I want to find the sum up to the 'n'th term for the following series:</p>\n\n<p>(1/2)+((1*3)/(2*4))+((1*3*5)/(2*4*6))....</p>\n\n<p>So, I wrote the following program in c++ :</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\nint main()\n{\nint p=1, k=1, n=0;\nfloat h=0;\ncout&lt;&lt;\"Enter the term: \";\ncin&gt;&gt;n;\nfor(int i=1; i&lt;=n; i++)\n{\n    for(int j=1; j&lt;=i; j++)\n    {\n        p*=((2*j)-1);\n        k*=(2*j);\n    }\n    h+=(p/k);\n    p=1;\n    k=1;\n\n}\ncout&lt;&lt;\"The sum is : \"&lt;&lt;h;\nreturn 0;\ngetch();\n\n}\n</code></pre>\n\n<p>However, the output of the program always gives me '0'. I can't figure out the problem with the program.</p>\n\n<p>N.B. I'm new to programming.</p>\n"}, {"tags": ["c++", "gcc", "optimization", "compilation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user955340"}, "edited": false, "score": 2, "creation_date": 1511369974, "post_id": 47440118, "comment_id": 81835197, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19689014/gcc-difference-between-o3-and-os\">GCC: Difference between -O3 and -Os</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user955340"}, "edited": false, "score": 0, "creation_date": 1511370010, "post_id": 47440118, "comment_id": 81835218, "body": "I should add that while the question I&#39;ve flagged doesn&#39;t specifically ask about -O2, it is answered by the accepted answer there."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1511370190, "post_id": 47440118, "comment_id": 81835335, "body": "Your question title refers to compilation time, but your question text seems more concerned about execution time, which isn&#39;t the same thing."}, {"owner": {"reputation": 85, "user_id": 7982621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d228e1e915fe39f33f9348ce6c0577ff?s=128&d=identicon&r=PG", "display_name": "Monstermania", "link": "https://stackoverflow.com/users/7982621/monstermania"}, "edited": false, "score": 0, "creation_date": 1511370382, "post_id": 47440118, "comment_id": 81835474, "body": "Yes, you are right. I changed it. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7982621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d228e1e915fe39f33f9348ce6c0577ff?s=128&d=identicon&r=PG", "display_name": "Monstermania", "link": "https://stackoverflow.com/users/7982621/monstermania"}, "edited": false, "score": 0, "creation_date": 1511370173, "post_id": 47440179, "comment_id": 81835328, "body": "Thanks! I managed to pass only -O0, where my assembly code runs in 57s and -O1-3 in about 33s. It is that good?"}, {"owner": {"reputation": 509, "user_id": 8857328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a43855efb44db02b57d0f7253394882?s=128&d=identicon&r=PG&f=1", "display_name": "VladP", "link": "https://stackoverflow.com/users/8857328/vladp"}, "reply_to_user": {"reputation": 85, "user_id": 7982621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d228e1e915fe39f33f9348ce6c0577ff?s=128&d=identicon&r=PG", "display_name": "Monstermania", "link": "https://stackoverflow.com/users/7982621/monstermania"}, "edited": false, "score": 0, "creation_date": 1511370403, "post_id": 47440179, "comment_id": 81835490, "body": "Yes, it is that good, and for further optimization, you probably need to spend a lot of time and effort. C++ code is typically more difficult to optimize in comparison to C code. If you can, you may try to play with memory optimization by changing the size of stack and heap. Sometimes, it helps."}], "tags": [], "owner": {"reputation": 509, "user_id": 8857328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a43855efb44db02b57d0f7253394882?s=128&d=identicon&r=PG&f=1", "display_name": "VladP", "link": "https://stackoverflow.com/users/8857328/vladp"}, "is_accepted": true, "score": 1, "last_activity_date": 1511369943, "creation_date": 1511369943, "answer_id": 47440179, "question_id": 47440118, "link": "https://stackoverflow.com/questions/47440118/optimized-execution-time/47440179#47440179", "title": "Optimized Execution Time", "body": "<p>Yes, it is usual. Take the -Ox optimization as guide-lines. In average, they produce optimization that is advertise, but a lot depends on the style in which the code is written, memory layout, as well as the compiler itself. \nSometimes, you need to try and fail many times before getting the optimal code.\n-O2 indeed gives the best optimization in most of the cases.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1511370735, "last_edit_date": 1511370735, "creation_date": 1511369984, "answer_id": 47440198, "question_id": 47440118, "link": "https://stackoverflow.com/questions/47440118/optimized-execution-time/47440198#47440198", "title": "Optimized Execution Time", "body": "<p>Notice that GCC has <em>many other</em> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#\" rel=\"nofollow noreferrer\">optimization flags</a>.</p>\n\n<p>There is no guarantee that <code>-O3</code>  gives faster code than <code>-O2</code>; a compiler can apply more optimization  passes, but they are all heuristics and might be unsuccessful (or even slow down slightly your particular code). Hence it does happen that <code>-O3</code> gives some slightly slower code than <code>-O2</code> (on some <em>particular</em> input source code).</p>\n\n<p>You could try a more recent version of GCC (the latest -in November 2017- is <a href=\"https://gcc.gnu.org/gcc-7/\" rel=\"nofollow noreferrer\">GCC 7</a>, GCC 8 will go out in few months). You could also try some <a href=\"https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html#\" rel=\"nofollow noreferrer\">better</a> <code>-march=</code>  or <code>-mtune=</code> option.</p>\n\n<p>At last, with your <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">GCC plugin</a>, you might add your <em>own</em> optimization pass, or change the order (and the set) of applied optimization  passes (there are several hundreds different optimization passes in GCC). But you'll need a lot of work (perhaps a year or two) to be able to extend GCC.</p>\n\n<p>You could tune optimization parameters, and some project (<a href=\"http://ctuning.org/wiki/index.php?title=CTools:MilepostGCC\" rel=\"nofollow noreferrer\">MILEPOST</a>) has even used machine learning techniques to improve them.</p>\n\n<p>See also slides and references on my (old) <a href=\"http://starynkevitch.net/Basile/gcc-melt/docum.html\" rel=\"nofollow noreferrer\">GCC MELT documentation</a>.</p>\n"}], "owner": {"reputation": 85, "user_id": 7982621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d228e1e915fe39f33f9348ce6c0577ff?s=128&d=identicon&r=PG", "display_name": "Monstermania", "link": "https://stackoverflow.com/users/7982621/monstermania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 1, "accepted_answer_id": 47440179, "answer_count": 2, "score": 7, "last_activity_date": 1511370735, "creation_date": 1511369753, "last_edit_date": 1511370354, "question_id": 47440118, "link": "https://stackoverflow.com/questions/47440118/optimized-execution-time", "title": "Optimized Execution Time", "body": "<p>Because of a school assignment I have to convert a C++ code to assembly(ARMv8). Then I have to compile the C++ code using GCC's -O0,-O1,-O2,-O3 and -Os optimizations, write down the time and compare with the execute time of my assembly code. As, I think I know -O3 have to be faster than -O1 and -O2. However, I get that -O2 is the fastest, then are -O1,-O3,-Os,-O0. Is that usual? (Calculated times are about 30 seconds).</p>\n"}, {"tags": ["c++", "json", "rapidjson"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1511371409, "post_id": 47440099, "comment_id": 81836106, "body": "Well, if you want to add the object at the end just before the closing ] or }, you can trucate the file, add the subobject and add the close tag."}], "answers": [{"comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1582302656, "post_id": 47440829, "comment_id": 106743231, "body": "As I understand it, he doesn&#39;t want to load all in ram."}], "tags": [], "owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "is_accepted": false, "score": -1, "last_activity_date": 1511372227, "creation_date": 1511372227, "answer_id": 47440829, "question_id": 47440099, "link": "https://stackoverflow.com/questions/47440099/rapidjson-c-efficient-and-scalable-way-to-append-json-object-to-file/47440829#47440829", "title": "RapidJSON c++ efficient and scalable way to append json object to file", "body": "<p>I do not know if there is a readymade library for that, but if you decide to do it yourself is not impossible.\nIn few steps you could:</p>\n\n<p>1) Load the all JSON in ram.\n2) Take every request to append JSON and save it to a log file\n3) Update JSON In RAM after written request to log\n4) Every x seconds block changes, write the all JSON to disk and clear the log file\n5) Unblock changes\n6) Goto 2</p>\n\n<p>Further optimizations could b:</p>\n\n<p>1) Check for log file on start (after a crash) and apply log requests\n2) When you write the JSON file do not rewrite completely but check if there were only appends at the end and write only the new part.\nHow does this sound ? </p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 4647560, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ChM78.jpg?s=128&g=1", "display_name": "Jonese1234", "link": "https://stackoverflow.com/users/4647560/jonese1234"}, "edited": false, "score": 0, "creation_date": 1591988943, "post_id": 60342633, "comment_id": 110273396, "body": "This does not work once the file size reaches 65536b  or roughly (67kb). Meaning any large data collection with this method is limited to a small size."}, {"owner": {"reputation": 113, "user_id": 4647560, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ChM78.jpg?s=128&g=1", "display_name": "Jonese1234", "link": "https://stackoverflow.com/users/4647560/jonese1234"}, "edited": false, "score": 0, "creation_date": 1591991617, "post_id": 60342633, "comment_id": 110274501, "body": "Follow up on this. Its the <code>create file if it doesn&#39;t exist </code> Part that breaks it. It returns false for me when the file is over the 65536b limit."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "reply_to_user": {"reputation": 113, "user_id": 4647560, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ChM78.jpg?s=128&g=1", "display_name": "Jonese1234", "link": "https://stackoverflow.com/users/4647560/jonese1234"}, "edited": false, "score": 0, "creation_date": 1592000846, "post_id": 60342633, "comment_id": 110277776, "body": "@Jonese1234, the size of the write buffer used by rapidjson has nothing to do with the document size. Also, if the &quot;create file&quot; part returns false, it is because the file does not exist."}, {"owner": {"reputation": 113, "user_id": 4647560, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ChM78.jpg?s=128&g=1", "display_name": "Jonese1234", "link": "https://stackoverflow.com/users/4647560/jonese1234"}, "edited": false, "score": 0, "creation_date": 1592055287, "post_id": 60342633, "comment_id": 110290168, "body": "Not when i was working with it. For what ever reason. However, if i just create the file myself and remove that section it does not stop at 65536b."}], "tags": [], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "is_accepted": false, "score": 1, "last_activity_date": 1592000963, "last_edit_date": 1592000963, "creation_date": 1582302114, "answer_id": 60342633, "question_id": 47440099, "link": "https://stackoverflow.com/questions/47440099/rapidjson-c-efficient-and-scalable-way-to-append-json-object-to-file/60342633#60342633", "title": "RapidJSON c++ efficient and scalable way to append json object to file", "body": "<p>This question is from some years ago, but this answer is still relevant.</p>\n\n<p>The goal is to append a <code>json</code> object with <code>rapidjson</code> to a potentially already existing file which contains a <code>json</code> array. The following is satisfied:</p>\n\n<ol>\n<li>No reading or parsing of the already existing file.</li>\n<li>The new object is added directly to the already existing file without document merging.</li>\n<li>Time does not depend on what has been added previously.</li>\n</ol>\n\n<p>Here is the code with comments:</p>\n\n<pre><code>bool appendToFile(const std::string&amp; filename, const rapidjson::Document&amp; document)\n{\n    using namespace rapidjson;\n\n\n\n// create file if it doesn't exist\nif (FILE* fp = fopen(filename.c_str(), \"r\"); !fp)\n{\n    if (fp = fopen(filename.c_str(), \"w\"); !fp)\n        return false;\n    fputs(\"[]\", fp);\n    fclose(fp);\n}\n\n// add the document to the file\nif (FILE* fp = fopen(filename.c_str(), \"rb+\"); fp)\n{\n    // check if first is [\n    std::fseek(fp, 0, SEEK_SET);\n    if (getc(fp) != '[')\n    {\n        std::fclose(fp);\n        return false;\n    }\n\n    // is array empty?\n    bool isEmpty = false;\n    if (getc(fp) == ']')\n        isEmpty = true;\n\n    // check if last is ]\n    std::fseek(fp, -1, SEEK_END);\n    if (getc(fp) != ']')\n    {\n            std::fclose(fp);\n            return false;\n    }\n\n    // replace ] by ,\n    fseek(fp, -1, SEEK_END);\n    if (!isEmpty)\n        fputc(',', fp);\n\n    // append the document\n    char writeBuffer[65536];\n    FileWriteStream os(fp, writeBuffer, sizeof(writeBuffer));\n    Writer&lt;FileWriteStream&gt; writer(os);\n    document.Accept(writer);\n\n    // close the array\n    std::fputc(']', fp);\n    fclose(fp);\n    return true;\n}\nreturn false;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 3030524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKRPv.jpg?s=128&g=1", "display_name": "UmairAhmad", "link": "https://stackoverflow.com/users/3030524/umairahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1592000963, "creation_date": 1511369693, "question_id": 47440099, "link": "https://stackoverflow.com/questions/47440099/rapidjson-c-efficient-and-scalable-way-to-append-json-object-to-file", "title": "RapidJSON c++ efficient and scalable way to append json object to file", "body": "<p>i have a json file that has array of json objects. i am using rapidjson c++.</p>\n\n<p>i want to append new object to json  array that is inside this file</p>\n\n<p>currently what i do is that i read the whole file in a json object using fileread stream and the i add new member (new json object) using AddMember inside array of that document that i read previously. and now i overwrite this new object inside the file and repeat the process for new objects.</p>\n\n<p>this solution is not scalable. Can someone pointout anyother solution using rapidjson or raw filestream. help will be appreciated, i've been looking all over the internet but no luck.</p>\n\n<p>is there something like append to file incrementally using json.\nor any other scalable solution because my file size will get very large with time and thus reading the whole file everytime and then appending a new object and then rewrite the whole file will be a waste to memory and cpu time.</p>\n\n<p>help me with this one please</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1511369681, "post_id": 47440029, "comment_id": 81834997, "body": "The condition variable unlocks its acquired lock and waits to be signaled, hence <code>open_gate</code> may proceed."}, {"owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1511369989, "post_id": 47440029, "comment_id": 81835207, "body": "OK, so when the cv unlocks it remains blocked un til the other thread sets the gate_open and then calls the notify_all. This then calls the cv.wait handler, which if true (which it will be), unblocks the cv.wait? This all correct?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1511370025, "post_id": 47440029, "comment_id": 81835231, "body": "Saying the same as @PasserBy, but in a little more detail:  the <code>cv.wait(lock,...)</code> call <i>unlocks</i> the mutex, and then it waits to be notified, and then it re-locks the mutex before it returns."}, {"owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "edited": false, "score": 0, "creation_date": 1511370135, "post_id": 47440029, "comment_id": 81835299, "body": "I&#39;ll accept an answer that has a detailed sequence of operations in cluding the gate_open and notify_all."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1511377690, "post_id": 47440029, "comment_id": 81839468, "body": "Detailed sequence described: <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/condition_variable</a>. Tutorial on posix condition variables: <a href=\"https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables\" rel=\"nofollow noreferrer\">computing.llnl.gov/tutorials/pthreads/#ConditionVariables</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "is_accepted": true, "score": 0, "last_activity_date": 1511430027, "creation_date": 1511430027, "answer_id": 47452148, "question_id": 47440029, "link": "https://stackoverflow.com/questions/47440029/understanding-stdcondition-variable/47452148#47452148", "title": "Understanding std::condition_variable", "body": "<p>OK, since no one is going to post, here's my answer, helped by the comments and the following links (from which quoted text is from, which slight modification for readability):</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/thread/condition_variable</a>, <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/thread/condition_variable/wait</a>, <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/thread/condition_variable/notify_all</a></p>\n\n<p>It assumes two threads, one, named <code>OG</code>, calling <code>open_gate()</code> and the other, named <code>WG</code>, calling <code>wait_at_gate()</code>.</p>\n\n<p>1) Both functions are protected with locks, it is a requirement that \"any thread that intends to wait on <code>std::condition_variable</code>\" acquires \"a <code>std::unique_lock&lt;std::mutex&gt;</code>, on the same mutex as used to protect the shared variable\". </p>\n\n<p>2) If <code>OG</code> gets the lock first then it will open the gate before releasing the lock. <code>WG</code> then gets its lock, the gate is already opened. For this case since (from linked references):</p>\n\n<pre><code>while (!pred()) {\n    wait(lock);\n} \n</code></pre>\n\n<p>then there is no wait.</p>\n\n<p>3) If <code>WG</code> gets its lock first then its call to <code>cv.wait</code> \"atomically releases the mutex and suspends the execution of the thread.\"</p>\n\n<p>4) This allows <code>OG</code> to proceed, which then sets the shared flag. <code>WG</code> \"will then be unblocked when <code>notify_all()</code> is executed\" by <code>OG</code>.</p>\n"}], "owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 47452148, "answer_count": 1, "score": 0, "last_activity_date": 1511430027, "creation_date": 1511369431, "question_id": 47440029, "link": "https://stackoverflow.com/questions/47440029/understanding-stdcondition-variable", "title": "Understanding std::condition_variable", "body": "<p>I refer to the accepted answer here: <a href=\"https://stackoverflow.com/questions/41769934/using-stdconditional-variable-to-wait-on-a-condition\">Using std::conditional_variable to wait on a condition</a> and in particular the code (copied):</p>\n\n<pre><code>struct gate {\n  bool gate_open = false;\n  mutable std::condition_variable cv;\n  mutable std::mutex m;\n\n  void open_gate() {\n    std::unique_lock&lt;std::mutex&gt; lock(m);\n    gate_open=true;\n    cv.notify_all();\n  }\n  void wait_at_gate() const {\n    std::unique_lock&lt;std::mutex&gt; lock(m);\n    cv.wait( lock, [this]{ return gate_open; } );\n  }\n};\n</code></pre>\n\n<p>I don't understand how this works as an event class. How exactly does the code inside the mutex in <code>open_gate</code> execute if something is already waiting via the <code>wait_at_gate</code> functions. I'm guessing it has something to do with the <code>std::condition_variable</code>.</p>\n"}, {"tags": ["c++", "visual-c++", "static-initialization"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1511368748, "post_id": 47439739, "comment_id": 81834358, "body": "Have you tried setting a global variable at an appropriate time in DLLMain to indicate that the static initialization is complete?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511368829, "post_id": 47439739, "comment_id": 81834424, "body": "@1201ProgramAlarm yes! But <code>DllMain</code> is in fact called <i>before</i> the DLL&#39;s static initialization... Which sounds dumb but kind of makes sense since it receives the <code>DLL_PROCESS_ATTACH</code> notification."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511369286, "post_id": 47439739, "comment_id": 81834715, "body": "Are you using post <code>C++11</code>?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1511369422, "post_id": 47439739, "comment_id": 81834824, "body": "Hmm, this is a chicken-and-egg problem.  Suppose you <i>can</i> detect this and somehow can&#39;t debug the deadlock, <i>what are you going to do about it?</i>  If you know what to do about it then just always do it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511369464, "post_id": 47439739, "comment_id": 81834853, "body": "@Galik yes! ---"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511369713, "post_id": 47439739, "comment_id": 81835020, "body": "I was thinking that somehow this here may be of use: <a href=\"http://en.cppreference.com/w/cpp/thread/call_once\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/call_once</a> Also static variable inside functions are initialized in a thread safe way after <code>C++11</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1511369800, "post_id": 47439739, "comment_id": 81835080, "body": "@HansPassant why, I&#39;ll just skip it and try again next time <code>Init</code> is called of course! At least I&#39;m reasonably sure that all of the applications end up calling it somewhere at the beginning of their <code>main</code> :) -- The whole situation <i>is</i> a mess, but now I&#39;m curious whether the core problem of detecting static initialization can be solved in general."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511370312, "post_id": 47439739, "comment_id": 81835421, "body": "@Galik I&#39;m afraid that wouldn&#39;t help... Sure, I could skip redundant calls to <code>Init</code>, but the issue is that the first one is made too early. And of course, I can&#39;t detect the last one..."}, {"owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1511370922, "post_id": 47439739, "comment_id": 81835810, "body": "All static initialisation must be complete before entering main. I think that is the best we can do. This is probably why we still have libraries that require you to call an initialization function in main."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 1, "creation_date": 1511370975, "post_id": 47439739, "comment_id": 81835841, "body": "@JustinFinnerty He&#39;s writing a library, he doesn&#39;t have any control over <code>main()</code>."}, {"owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1511371504, "post_id": 47439739, "comment_id": 81836170, "body": "@Barmar, I realise that. If you know your library is not used in the definition of any static variables you can handle this problem by detecting use of your library. But this is obviously not a general solution, and I doubt if there is one."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 1, "creation_date": 1511371678, "post_id": 47439739, "comment_id": 81836259, "body": "@JustinFinnerty The question specifically says that his <code>Init()</code> method is called from static constructors."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1511374089, "post_id": 47439739, "comment_id": 81837516, "body": "Is postponing creation of the <code>deadline_timer</code> until the first time it is needed unfeasible?  Or when some other (non-Init) function is called, but before the deadline_timer is needed? And creating a one-shot timer to create it 1 or 2 or 42 seconds after Init is called isn&#39;t 100% reliable, so that&#39;s out."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511375018, "post_id": 47439739, "comment_id": 81838053, "body": "@1201ProgramAlarm in fact (I forgot to mention this at first, my bad) the timer is not required for the DLL to operate. It&#39;s an autosave-in-the-background-regularly deal. There&#39;s no issue with skipping it within static initialization because <code>Init()</code> does the flush before anything else, but it should end up available for use during the application&#39;s lifetime, after the <code>Init()</code> fest. The one-shot timer could actually end up being okay-ish... if starting a timer wasn&#39;t the issue to begin with ;)"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1511375522, "post_id": 47439739, "comment_id": 81838294, "body": "Ah, right, because <code>SetTimer</code> is in <code>User32.dll</code> which you can&#39;t call during the load lock. Is there some other function, or small collection of functions, that users of your DLL would call, like a Create or Open type function that isn&#39;t called frequently but on some level is necessary?  You could create the timer then if it hasn&#39;t been created yet."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511376667, "post_id": 47439739, "comment_id": 81838885, "body": "@Quentin The answer to the question you linked about deadlock said that the initialization was done before <code>DllMain</code> was called. Is this not actually true?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511392904, "post_id": 47439739, "comment_id": 81845985, "body": "I assume you mean to ask whether the function was called as part of the initialization of static variables. (The term &quot;static initialization&quot; excludes cases where the initializer is not a constant expression; those are known as &quot;dynamic initialization&quot;)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511393308, "post_id": 47439739, "comment_id": 81846106, "body": "The standard doesn&#39;t cover the behaviour of DLLs. For example, I have observed that calling FreeLibrary means static objects are destroyed (and may even be recreated by calling LoadLibrary again), which is at odds with the standard. I&#39;d suggest adding platform tags."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511441315, "post_id": 47439739, "comment_id": 81866222, "body": "@DanielH indeed, that looks like an error over there... Here is a <a href=\"https://pastebin.com/e7DPbD0h\" rel=\"nofollow noreferrer\">pastebin</a> of the callstack from a breakpoint triggered on <code>DLL_PROCESS_ATTACH</code>. You can see that I&#39;m still inside the initialization of the DLL. That could&#39;ve been the last call in the procedure, but constructing the <code>io_service</code> from <code>DllMain</code> deadlocks as well, hence my conclusion."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511441335, "post_id": 47439739, "comment_id": 81866236, "body": "@M.M yes, I&#39;ll revise the question."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511441596, "post_id": 47439739, "comment_id": 81866382, "body": "@1201ProgramAlarm I don&#39;t have any obvious candidate function at hand -- other initialization functions suffer from the same issue, and stuffing that in an unrelated function sounds even worse to me than what I already have :p"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511442030, "post_id": 47439739, "comment_id": 81866658, "body": "@M.M I do wish to remain close to a theoretical &quot;can we spot static initialization in the general case&quot;. Even though I happened to come across the issue with a DLL, I feel like it&#39;s only a detail here."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511481278, "post_id": 47439739, "comment_id": 81884065, "body": "@Quentin in the general case you can just set a global flag as the first line of <code>main</code> (or whatever the platform entry point is)"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511481341, "post_id": 47445259, "comment_id": 81884081, "body": "Can confirm... have published a DLL with two-stage init where every single entry point started with <code>if ( init_has_been_called() )</code>"}, {"owner": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1511489676, "post_id": 47445259, "comment_id": 81885597, "body": "The problem remains if Frobnicate is called in the Init code of another DLL."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 329, "user_id": 7547003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NxQdJDNAifI/AAAAAAAAAAI/AAAAAAAAABQ/54b_SY8iHZI/photo.jpg?sz=128", "display_name": "Justin Finnerty", "link": "https://stackoverflow.com/users/7547003/justin-finnerty"}, "edited": false, "score": 0, "creation_date": 1511655405, "post_id": 47445259, "comment_id": 81938842, "body": "@Justin Finnerty:  Yeah, it&#39;s a no-win situation.  The clients never should have called anything from static initialization methods, but they did and we&#39;re trying our best to keep that from breaking things.  If they&#39;re doing &quot;real work&quot; form static initialization, then all hope is probably lost."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1511392370, "creation_date": 1511392370, "answer_id": 47445259, "question_id": 47439739, "link": "https://stackoverflow.com/questions/47439739/finding-out-whether-static-initialization-is-over/47445259#47445259", "title": "Finding out whether static initialization is over", "body": "<p>For the moment, let's assume your DLL has two entry points:  <code>Init</code> and <code>Frobnicate</code>.</p>\n\n<p><code>Init</code> effectively does nothing.  <code>Frobnicate</code> checks a global boolean to find out if the DLL has ever <em>really</em> initialized.  If not, it first does the real initialization, which also sets the <em>I've-really-initialized</em> flag, before actually frobnicating.</p>\n\n<p>Likely, you have more entry points (<code>Frobnicate2</code>, <code>Fronbnicate3</code>, ...), so you'd have to add this logic into every one of those.  This is tedious but not unheard of.  Back in the day, we used to have to write our own delay-load mechanisms, which were very similar.  Of course, we only presented C-style interfaces from DLLs back then, not C++-style objects with mangled method names, but it must still be do-able.</p>\n\n<p>This assumes that it's OK to delay initialization until the first non-<code>Init</code> call into the DLL.  That may or may not be a good assumption.</p>\n\n<p>Other hacky ideas:</p>\n\n<ul>\n<li>Find a way to detect the loader lock (other than actually deadlocking).  If the loader lock is held when <code>Init</code> is called, then this is one of those \"too soon\" moments.  This is on par with your walk-the-stack-to-find-<code>WinMain</code> solution.</li>\n<li>Do something that <em>guarantees</em> a deadlock when <code>Init</code> is called too soon, and make your clients fix their damn code.</li>\n<li>Create a hidden message-only window and post a message to it.  Assuming the client is a traditional GUI app that will pump messages on the same thread, then, by the time you receive the message, it should be safe to do real initialization (and, hopefully, not too late).</li>\n</ul>\n"}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 1, "answer_count": 1, "score": 13, "last_activity_date": 1612254589, "creation_date": 1511368529, "last_edit_date": 1612254589, "question_id": 47439739, "link": "https://stackoverflow.com/questions/47439739/finding-out-whether-static-initialization-is-over", "title": "Finding out whether static initialization is over", "body": "<h3>The abridged problem (Y)</h3>\n\n<p>Suppose you need to know, from within a function, whether this function has been called as part of the initialization of a static object, or not. Is there a standard or platform-specific way to do so?</p>\n\n<h3>The backstory (X)</h3>\n\n<p>I'm knee-deep into the source code of a DLL that is used by many applications. This DLL exposes an <code>Init</code> function, and this function should construct a <code>boost::asio::deadline_timer</code> to be used later (but the DLL can work without it in a degraded mode).</p>\n\n<p>The issue is that the timer cannot be constructed during the initialization of static objects (DLL load time), <a href=\"https://stackoverflow.com/q/45638531/3233393\">lest its constructor deadlock</a>.</p>\n\n<p>Of course, everyone and their cat calls <code>Init</code> from everywhere (yes, multiple times!), including static constructors from source code I shan't edit, hence the need to detect that situation and bail out.</p>\n\n<p>After pragmatism overcame disgust, I ended up <em>walking up the callstack to try and find <code>wWinMain</code> and deduce that static initialization is over</em>. It's awful and doesn't work with dynamically-loaded binaries, which thankfully was outside the scope of my particular case. I sure wish there were a cleaner way.</p>\n"}, {"tags": ["c++", "bit-shift"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511368344, "post_id": 47439616, "comment_id": 81834088, "body": "Without trawling through standardese, you can see how the operators work with a <a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">reference</a>."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511368856, "post_id": 47439616, "comment_id": 81834453, "body": "I&#39;ve seen bitwise shift before and understand its use... I&#39;d just never seen it used with a <code>bool</code> type. I know my compiler allows it, but will others? That&#39;s what I want to know."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1511369202, "post_id": 47439616, "comment_id": 81834657, "body": "What should a bitshift on a bool do logically?"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 0, "creation_date": 1511369455, "post_id": 47439616, "comment_id": 81834848, "body": "@manni66 My concern was that a bitshift of <code>true &lt;&lt; N</code> would simply toggle the bool <code>N</code> times on some compilers. If N=5 that would have resulted in a value of false instead of 32. See <a href=\"https://stackoverflow.com/a/4330321/1666676\">stackoverflow.com/a/4330321/1666676</a>"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1511369794, "post_id": 47439616, "comment_id": 81835074, "body": "Regarless of whether it&#39;s valid C++, it seems like an invalid <i>idea</i> to call something <code>BOOL</code> if you&#39;re going to treat it like a bit array."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1511369922, "post_id": 47439616, "comment_id": 81835158, "body": "@jameslarge Exactly my line of thinking, though I think he&#39;s packing bool values into a bit array, which I suppose is why this might be expected behavior."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511370908, "post_id": 47439616, "comment_id": 81835803, "body": "@Phlucious Then he shouldn\u2019t be defining it to be equivalent to <code>bool</code>."}, {"owner": {"reputation": 1458, "user_id": 2032771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UNFib.jpg?s=128&g=1", "display_name": "avrono", "link": "https://stackoverflow.com/users/2032771/avrono"}, "edited": false, "score": 0, "creation_date": 1511371524, "post_id": 47439616, "comment_id": 81836180, "body": "Why would you want to bitshift a bool - surely it&#39;s either true or false. Use an int instead ?"}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1511368614, "post_id": 47439700, "comment_id": 81834280, "body": "The value follows usual bool-int conversions. <code>false</code> is converted to 0 and vice-versa, while <code>true</code> is converted to 1 and anything but 0 is converted to <code>true</code>. At that point, it&#39;s a regular shift on an <code>int</code>, with conversions to and from <code>bool</code> before and after the shift."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511368850, "post_id": 47439700, "comment_id": 81834445, "body": "@chris: Thanks. Updated."}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 0, "creation_date": 1511369068, "post_id": 47439700, "comment_id": 81834567, "body": "Thanks for clarifying that it&#39;s intended behavior. Can you update those citations to links? I don&#39;t understand the [foo.bar] syntax."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 1, "creation_date": 1511369136, "post_id": 47439700, "comment_id": 81834601, "body": "@Phlucious: I&#39;m citing the standard document. I think there&#39;s an online draft somewhere I can point at. One sec."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "edited": false, "score": 0, "creation_date": 1511369291, "post_id": 47439700, "comment_id": 81834721, "body": "@Phlucious: Updated to links."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1511371219, "post_id": 47439700, "comment_id": 81835983, "body": "I think it might be bettor to base the links on <a href=\"https://timsong-cpp.github.io/cppwp/n4659\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/n4659</a> (C++17 minus some editorial changes) instead of <a href=\"http://eel.is/c++draft/\" rel=\"nofollow noreferrer\">eel.is/c++draft</a> (latest standard, which is \u201can early draft [which is] known to be incomplet, incorrekt, and has lots of <b>bad</b> <i>formatt</i> <code>ing</code>.\u201d)"}, {"owner": {"reputation": 374, "user_id": 9858322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hUNcB.jpg?s=128&g=1", "display_name": "rsonx", "link": "https://stackoverflow.com/users/9858322/rsonx"}, "edited": false, "score": 0, "creation_date": 1613368103, "post_id": 47439700, "comment_id": 117043770, "body": "and could <code>int</code> get demoted to <code>bool</code>."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 10, "last_activity_date": 1511378746, "last_edit_date": 1511378746, "creation_date": 1511368391, "answer_id": 47439700, "question_id": 47439616, "link": "https://stackoverflow.com/questions/47439616/can-you-bitwise-shift-a-bool-in-c/47439700#47439700", "title": "Can you bitwise shift a bool in C++?", "body": "<p>From <strong>Shift operators</strong> <a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.shift#1\" rel=\"nofollow noreferrer\">[expr.shift]</a></p>\n\n<blockquote>\n  <p>The operands shall be of integral or unscoped enumeration type and integral promotions are performed.\n  The type of the result is that of the promoted left operand</p>\n</blockquote>\n\n<p><code>bool</code> is an integral type so the code is well formed (<code>bool</code> is promoted to <code>int</code> and result is an <code>int</code>).</p>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/n4659/conv.prom#6\" rel=\"nofollow noreferrer\">[conv.prom]</a>, we show what integers the booleans get promoted to:</p>\n\n<blockquote>\n  <p>A prvalue of type <code>bool</code> can be converted to a prvalue of type <code>int</code>, with <code>false</code> becoming zero and true becoming <code>one</code> </p>\n</blockquote>\n\n<p>Afterwards, the shift behaves normally. (Thanks, @chris)</p>\n"}, {"tags": [], "owner": {"reputation": 12668, "user_id": 1234087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623981dff194e144f20676961a2b6dba?s=128&d=identicon&r=PG", "display_name": "Mos&#232; Raguzzini", "link": "https://stackoverflow.com/users/1234087/mos%c3%a8-raguzzini"}, "is_accepted": false, "score": 0, "last_activity_date": 1513767450, "creation_date": 1513767450, "answer_id": 47904442, "question_id": 47439616, "link": "https://stackoverflow.com/questions/47439616/can-you-bitwise-shift-a-bool-in-c/47904442#47904442", "title": "Can you bitwise shift a bool in C++?", "body": "<p>The result type of shifting a bool is always int, regardless of what's on the right hand side.</p>\n"}], "owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2419, "favorite_count": 0, "accepted_answer_id": 47439700, "answer_count": 2, "score": 15, "last_activity_date": 1513767450, "creation_date": 1511368165, "question_id": 47439616, "link": "https://stackoverflow.com/questions/47439616/can-you-bitwise-shift-a-bool-in-c", "title": "Can you bitwise shift a bool in C++?", "body": "<p>I'm using someone else's code that was written with an older compiler that mapped a special <code>BOOL</code> type to an <code>unsigned int</code>, but in my compiler it's mapped to a true <code>bool</code>. In some places in his code he uses the bitwise shift operator <code>&lt;&lt;</code> on the <code>bool</code> type, which I had never seen before and my compiler surprised me when it didn't complain.</p>\n\n<p>Is that valid C++? Does the <code>bool</code> automatically get promoted to an <code>int</code> or <code>uint</code>?</p>\n\n<p>I saw <a href=\"https://stackoverflow.com/questions/24542/using-bitwise-operators-for-booleans-in-c\">this related question</a>, which provided some clarity on another issue, but it doesn't address the shift operators.</p>\n"}, {"tags": ["c++", "windows", "qt"], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1511374439, "post_id": 47439839, "comment_id": 81837726, "body": "I wouldn&#39;t use <code>wstring</code> for the variable name, to avoid confusion with <code>std::wstring</code>"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511374967, "post_id": 47439839, "comment_id": 81838023, "body": "@RemyLebeau fair enough, updated the answer to reflect your suggestion"}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 3, "last_activity_date": 1511374954, "last_edit_date": 1511374954, "creation_date": 1511368872, "answer_id": 47439839, "question_id": 47439556, "link": "https://stackoverflow.com/questions/47439556/how-to-convert-pwstr-to-qstring-to-display-in-a-listbox/47439839#47439839", "title": "How to convert PWSTR to QString to display in a listbox", "body": "<p>You should use QString's <a href=\"http://doc.qt.io/qt-4.8/qstring.html#fromWCharArray\" rel=\"nofollow noreferrer\"><code>fromWCharArray</code></a> static function:</p>\n\n<pre><code>wchar_t* my_string = ...;\nQString qstring = QString::fromWCharArray(my_string);\n</code></pre>\n\n<p>Note that if <code>my_string</code> is not null-terminated, <code>fromWCharArray()</code> has an overload that takes a 2nd parameter for the string length:</p>\n\n<pre><code>wchar_t* my_string = ...;\nsize_t my_len = ...;\nQString qstring = QString::fromWCharArray(my_string, my_len);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 2, "last_activity_date": 1511369400, "creation_date": 1511369400, "answer_id": 47440012, "question_id": 47439556, "link": "https://stackoverflow.com/questions/47439556/how-to-convert-pwstr-to-qstring-to-display-in-a-listbox/47440012#47440012", "title": "How to convert PWSTR to QString to display in a listbox", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/47439839/7478597\">Steve Lorimers answer</a>, here mine with <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n#include &lt;shlobj.h&gt;\n\nint main()\n{\n  qDebug() &lt;&lt; \"Qt Version: \" &lt;&lt; QT_VERSION_STR;\n\n  wchar_t *localAppData = nullptr;\n  SHGetKnownFolderPath(FOLDERID_LocalAppData, 0, NULL, &amp;localAppData);\n\n  QString qStr = QString::fromWCharArray(localAppData);\n  CoTaskMemFree(static_cast&lt;void*&gt;(localAppData));\n\n  qDebug() &lt;&lt; \"localAppData (as QString):\" &lt;&lt; qStr;\n  return 0;\n}\n</code></pre>\n\n<p>Compiled and tested with VS2013:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Qt Version:  5.9.2\nlocalAppData (as QString): \"C:\\\\Users\\\\Scheff\\\\AppData\\\\Local\"\n</code></pre>\n\n<p>The resp. function is <a href=\"http://doc.qt.io/qt-5/qstring.html#fromWCharArray\" rel=\"nofollow noreferrer\"><code>QString::fromWCharArray()</code></a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6717730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec0db494504492eeae0a5117fbdb21f?s=128&d=identicon&r=PG&f=1", "display_name": "dmazterzz", "link": "https://stackoverflow.com/users/6717730/dmazterzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 47439839, "answer_count": 2, "score": 0, "last_activity_date": 1511374954, "creation_date": 1511367967, "last_edit_date": 1511369820, "question_id": 47439556, "link": "https://stackoverflow.com/questions/47439556/how-to-convert-pwstr-to-qstring-to-display-in-a-listbox", "title": "How to convert PWSTR to QString to display in a listbox", "body": "<p>I'm  trying to get text displayed in a listbox on Qt. I know that a listbox on Qt only accepts QString, so I've tried using the example here: <a href=\"https://stackoverflow.com/questions/7448057/how-do-i-convert-pwstr-to-string-in-c\">How do I convert PWSTR to string in C++?</a> and converted it to a wstring before converting to to a QString.\nDoing this, I get something similar to this in the listbox:</p>\n\n<p>\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u1349\u974f\u1e6e\u8000\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u00dd</p>\n\n<p>If I print it out on the console it gives me what I want. How can I get it to display correctly in the listbox. \nHow can I get it to display in the listbox correctly?</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1511367882, "post_id": 47439420, "comment_id": 81833761, "body": "&quot;don&#39;t work&quot; is not a useful description of a problem"}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 0, "creation_date": 1511367897, "post_id": 47439420, "comment_id": 81833778, "body": "Why are you using <code>First</code> and <code>Last</code>.  Just do <code>arr[0][0]</code>.  Also <code>Last</code> is not necessarily the second item which is what you&#39;re looking for in the C++ code."}, {"owner": {"reputation": 8486, "user_id": 4366237, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PeNn9.jpg?s=128&g=1", "display_name": "Umair M", "link": "https://stackoverflow.com/users/4366237/umair-m"}, "reply_to_user": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 1, "creation_date": 1511367973, "post_id": 47439420, "comment_id": 81833844, "body": "@juharr the statement is guarded by a count check."}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "reply_to_user": {"reputation": 8486, "user_id": 4366237, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PeNn9.jpg?s=128&g=1", "display_name": "Umair M", "link": "https://stackoverflow.com/users/4366237/umair-m"}, "edited": false, "score": 0, "creation_date": 1511368074, "post_id": 47439420, "comment_id": 81833908, "body": "@UmairM A count check of the length of<code>arr</code> but not the length of the inner list.  But the big problem is that it kills readability."}, {"owner": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "edited": false, "score": 0, "creation_date": 1511368202, "post_id": 47439420, "comment_id": 81833992, "body": "No. It&#39;s not wrong in First or Last. I checked. It&#39;s wrong when Recursion start. You know. Arr suppose not change but it&#39;s change when Recursion start."}, {"owner": {"reputation": 20705, "user_id": 5174469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/cXyx5.jpg?s=128&g=1", "display_name": "Mong Zhu", "link": "https://stackoverflow.com/users/5174469/mong-zhu"}, "edited": false, "score": 1, "creation_date": 1511368218, "post_id": 47439420, "comment_id": 81834000, "body": "&quot; So C# sucks? Or I&#39;ve something wrong in my code?&quot; given that you said &quot; but in C# it don&#39;t work.&quot; leaves only one conclusion...."}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 0, "creation_date": 1511368280, "post_id": 47439420, "comment_id": 81834049, "body": "@Minh I didn&#39;t say that was the problem. It&#39;s just unnecessary."}, {"owner": {"reputation": 20705, "user_id": 5174469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/cXyx5.jpg?s=128&g=1", "display_name": "Mong Zhu", "link": "https://stackoverflow.com/users/5174469/mong-zhu"}, "edited": false, "score": 1, "creation_date": 1511368344, "post_id": 47439420, "comment_id": 81834087, "body": "&quot;Arr suppose not change but it&#39;s change when Recursion start.&quot; if you do this <code>arr2 = arr</code> and make changes to <code>arr2</code> it will change <code>arr</code> because you don&#39;t copy the matrix but only assign the reference to it. both elements still point to the same object! Also if recursion starts then you have a different object with one row less that you have passed into the recursive call, why do you wonder?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "edited": false, "score": 0, "creation_date": 1511368720, "post_id": 47439724, "comment_id": 81834342, "body": "It seem right. But how exactly I make a copy when I can&#39;t use &quot;=&quot; in c#?"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1511368465, "creation_date": 1511368465, "answer_id": 47439724, "question_id": 47439420, "link": "https://stackoverflow.com/questions/47439420/determinant-of-matrix-using-recursion-in-c-and-c/47439724#47439724", "title": "Determinant of Matrix using Recursion in C++ and C#", "body": "<p>The <code>arr2 = arr;</code> statement does different things in the two languages.</p>\n\n<p>In C++, it makes a copy of the data, so that changes to <code>arr2</code> will not change <code>arr</code>.</p>\n\n<p>In C#, this assignment will update what <code>arr2</code> refers to, without making a copy.  So changes to <code>arr2</code> will also change <code>arr</code>.  You'll need to explicitly make a copy of <code>arr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "edited": false, "score": 0, "creation_date": 1511370566, "post_id": 47439774, "comment_id": 81835584, "body": "It&#39;s keeping delete arr when use new like you said. It&#39;s impossible. &gt;&lt;"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "edited": false, "score": 0, "creation_date": 1511378881, "post_id": 47439774, "comment_id": 81840026, "body": "@minh What do you mean?"}, {"owner": {"reputation": 48, "user_id": 6825478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05b6dc57a89e6e83bf43fb1cf09f6370?s=128&d=identicon&r=PG", "display_name": "CanereCurrere", "link": "https://stackoverflow.com/users/6825478/canerecurrere"}, "edited": false, "score": 0, "creation_date": 1511426692, "post_id": 47439774, "comment_id": 81856850, "body": "You also have to Copy the <code>k</code> inside the <code>foreach</code>. Short way to Copy the inside of the List is to do this. <code>arr2 = new List&lt;List&lt;double&gt;&gt;(arr.Select(x =&gt; new List&lt;double&gt;(x)));</code>"}, {"owner": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "edited": false, "score": 0, "creation_date": 1511437439, "post_id": 47439774, "comment_id": 81863865, "body": "Okayyy. It works. Thank you very very much. But honestly, now I start hating C#.. &gt;&lt;"}], "tags": [], "owner": {"reputation": 48, "user_id": 6825478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05b6dc57a89e6e83bf43fb1cf09f6370?s=128&d=identicon&r=PG", "display_name": "CanereCurrere", "link": "https://stackoverflow.com/users/6825478/canerecurrere"}, "is_accepted": true, "score": 3, "last_activity_date": 1511427348, "last_edit_date": 1511427348, "creation_date": 1511368654, "answer_id": 47439774, "question_id": 47439420, "link": "https://stackoverflow.com/questions/47439420/determinant-of-matrix-using-recursion-in-c-and-c/47439774#47439774", "title": "Determinant of Matrix using Recursion in C++ and C#", "body": "<blockquote>\n  <p>And I check when the loop reach i=1, \"arr\" isn't the same when Recursion start.</p>\n</blockquote>\n\n<p>Yes, that is because you are using <code>arr2 = arr</code>, which doesn't copy the List, <code>arr2</code> is still the Reference to <code>arr</code> . What you can do is <code>arr2 = new List&lt;List&lt;double&gt;&gt;(arr);</code> to make a new List with the Elements of <code>arr</code>.</p>\n\n<p><strong>EDIT</strong> \nTo Copy the List inside of the List, you can do this.\n<code>arr2 = new List&lt;List&lt;double&gt;&gt;(arr.Select(x =&gt; new List&lt;double&gt;(x)));</code></p>\n"}], "owner": {"reputation": 3, "user_id": 8990751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e62b4fffa890520467af5586723e1b?s=128&d=identicon&r=PG&f=1", "display_name": "Minh", "link": "https://stackoverflow.com/users/8990751/minh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 47439774, "answer_count": 2, "score": 0, "last_activity_date": 1511427348, "creation_date": 1511367583, "last_edit_date": 1511392178, "question_id": 47439420, "link": "https://stackoverflow.com/questions/47439420/determinant-of-matrix-using-recursion-in-c-and-c", "title": "Determinant of Matrix using Recursion in C++ and C#", "body": "<p>Using C++ to calculate Determinant of Matrix:</p>\n\n<pre><code>int pw(int a){\n    if(a%2==0)return 1;else return -1;\n}\nfloat det(vector&lt;vector&lt;float&gt; &gt; &amp;arr, int rows){   \n    vector&lt;vector&lt;float&gt; &gt; arr2;\n    float dett=0,hk;\n    if(rows==2){        \n       dett= (arr[0][0]*arr[1][1]-arr[0][1]*arr[1][0]);\n    } else {        \n        for(int i=0;i&lt;rows;i++){            \n           hk=arr[0][i];arr2=arr;\n           arr2.erase(arr2.begin());\n           for(int k=0;k&lt;rows-1;k++)arr2[k].erase(arr2[k].begin()+i);\n           dett=dett+pw(i)*hk*det(arr2,rows-1);\n         }  \n    }\n    return dett;\n}\n</code></pre>\n\n<p>The same function in C# has an issue: when the loop reaches i=1, <code>arr</code> isn't the same between the c++ and c#.</p>\n\n<pre><code>    int pw(int a)\n    {\n        if (a % 2 == 0) return 1; else return -1;\n    }\n    double det(List&lt;List&lt;double&gt;&gt; arr)\n    {\n\n        int rows = arr.Count;\n        List&lt;List&lt;double&gt;&gt; arr2;\n        double dett = 0, hk;\n        if (rows == 2)\n        {\n            dett = (arr.First().First() * arr.Last().Last() - arr.First().Last() * arr.Last().First());\n        }\n        else\n        {\n            for (int i = 0; i &lt; arr.Count; i++)\n            {\n                hk = arr[0][i]; arr2 = arr;\n                arr2.RemoveAt(0);\n                foreach (List&lt;double&gt; k in arr2) k.RemoveAt(i);\n                dett = dett + pw(i) * hk * det(arr2);\n            }\n        }\n        return dett;\n    }\n</code></pre>\n"}, {"tags": ["c++", "excel", "windows", "winapi"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1511369024, "post_id": 47439353, "comment_id": 81834552, "body": "Try to add <code>XL.AddRef();</code> after <code>XL-&gt;Visible = true;</code>."}, {"owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1511429310, "post_id": 47439353, "comment_id": 81858506, "body": "@zett42 OK it does the job! thank you. But when I quit this new instance and also the parent instance of Excel, I still have a Microsoft Excel processus running in the Windows Task Manager... So it might not be the perfect solution. Could you or anyone explain to me why incrementing the reference count for the IUnknown interface has this effect ? I am eagger to understand more about this ! :)"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1511452965, "post_id": 47439353, "comment_id": 81873423, "body": "COM objects get deleted only when the reference count reaches zero. By calling <code>AddRef()</code> without a matching <code>Release()</code>, it will never reach zero, so the process won&#39;t be terminated. It thinks you are still using it. I have no better idea how to deal with this, though. What are you actually trying to achieve by creating an Excel COM object? If you give some more details, we might be able to find another solution."}, {"owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1511453825, "post_id": 47439353, "comment_id": 81873923, "body": "@zett42 It is my first attempt to interface Excel Object Model with C++. For now I would just like to open a new Application independent from caller. I noticed that if I add a Workbook to my new Application, then close it (back to an Application with a Workbooks collection&#39;s count = 0), the new Application seems correctly independent : stays open + both processes quit properly. I would just like to end up with the same behavior without using a workbook, just for fun and to learn :)"}], "owner": {"reputation": 450, "user_id": 2981328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55b5a57989320394ee6a2acaf766c01f?s=128&d=identicon&r=PG&f=1", "display_name": "hymced", "link": "https://stackoverflow.com/users/2981328/hymced"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511368619, "creation_date": 1511367368, "last_edit_date": 1511368619, "question_id": 47439353, "link": "https://stackoverflow.com/questions/47439353/windows-c-how-to-disconnect-child-process-from-parent-desktop-application", "title": "Windows C++: How to &quot;disconnect&quot; child process from parent Desktop Application", "body": "<p>I have the following main.cpp for a C++ Desktop Application (Console or DLL) that creates an Excel Application:</p>\n\n<pre><code>#include \"stdafx.h\"\n\n#include &lt;comutil.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma comment(lib, \"comsuppw.lib\")\n#pragma comment(lib, \"kernel32.lib\")\n\n#import \\\n\"C:\\Program Files (x86)\\Microsoft Office\\root\\VFS\\ProgramFilesCommonX86\\Microsoft Shared\\OFFICE16\\mso.dll\" \\\nrename(\"DocumentProperties\", \"DocumentPropertiesXL\") \\\nrename(\"RGB\", \"RBGXL\")\n\n#import \\\n\"C:\\Program Files (x86)\\Microsoft Office\\root\\VFS\\ProgramFilesCommonX86\\Microsoft Shared\\VBA\\VBA6\\VBE6EXT.OLB\"\n\n#import \"C:\\Program Files (x86)\\Microsoft Office\\root\\Office16\\EXCEL.EXE\" \\\nrename(\"DialogBox\", \"DialogBoxXL\") rename(\"RGB\", \"RBGXL\") \\\nrename(\"DocumentProperties\", \"DocumentPropertiesXL\") \\\nrename(\"ReplaceText\", \"ReplaceTextXL\") \\\nrename(\"CopyFile\", \"CopyFileXL\") \\\nexclude(\"IFont\", \"IPicture\") no_dual_interfaces\n\nusing namespace std;\n\nint main()\n{\n    Excel::_ApplicationPtr XL;\n    try\n    {\n        //Initialise COM interface\n        CoInitialize(NULL);\n        //Start the Excel Application\n        XL.CreateInstance(L\"Excel.Application\");\n        //Make the Excel Application visible\n        XL-&gt;Visible = true;\n    }\n    //If a communication error is thrown, catch it and complain\n    catch (_com_error &amp;error)\n    {\n        cout &lt;&lt; \"COM error\" &lt;&lt; endl;\n    }\n    Sleep(2000);\n    return 0;\n}\n</code></pre>\n\n<p>the thing is that the new Excel process quits as soon as the main function has completed (I can see the window for 2 seconds thanks to the <code>Sleep(2000);</code>).</p>\n\n<p>I have found that using <code>exit(1);</code> prevents the Excel App from quitting in the end. But is there another way to \"detach/disconnect\" the child process from the parent console process ? I have found this for UNIX but I fail making it work in my case: <a href=\"https://stackoverflow.com/questions/46621463/detach-child-process-from-parent\">Detach child process from parent</a></p>\n\n<p>Plus, I just found that if make a DLL (not a Console Application), using <code>exit(1);</code> quits the Excel Application that calls the main function of the DLL before starting the new Application. This is not what I'd like to do. (it even seems the process becomes a zombie)</p>\n"}, {"tags": ["c++", "c++11", "template-specialization", "sfinae", "crtp"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8987766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I3xAK1HEkUY/AAAAAAAAAAI/AAAAAAAAAq4/1DUVWYZvDf4/photo.jpg?sz=128", "display_name": "yvan herreros", "link": "https://stackoverflow.com/users/8987766/yvan-herreros"}, "edited": false, "score": 0, "creation_date": 1511424580, "post_id": 47439849, "comment_id": 81855599, "body": "my problem was not  only for is_arithmetic but also for diffrents traits. I updated the sample without code and it still does not compile fwith Clang or visual C++"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 21, "user_id": 8987766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I3xAK1HEkUY/AAAAAAAAAAI/AAAAAAAAAq4/1DUVWYZvDf4/photo.jpg?sz=128", "display_name": "yvan herreros", "link": "https://stackoverflow.com/users/8987766/yvan-herreros"}, "edited": false, "score": 0, "creation_date": 1511432471, "post_id": 47439849, "comment_id": 81860772, "body": "@yvanherreros - because remain the problem that, according clang++ and visual c++, the specialization with <code>typer</code> isn&#39;t more specialized of the generic version; I don&#39;t&#39; know if is right g++ (that consider that specialization more specialized) or clang++/visual c++, but I showed a way to solve the problem with all compilers: add a default template type and use <code>typer</code> over the second type. Modified my answer according your new example."}, {"owner": {"reputation": 21, "user_id": 8987766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I3xAK1HEkUY/AAAAAAAAAAI/AAAAAAAAAq4/1DUVWYZvDf4/photo.jpg?sz=128", "display_name": "yvan herreros", "link": "https://stackoverflow.com/users/8987766/yvan-herreros"}, "edited": false, "score": 0, "creation_date": 1511443747, "post_id": 47439849, "comment_id": 81867703, "body": "Works fine. Thank a lot. ! At first reading of your previous answer , I didn&#39;t catch the trick of the second template parameter."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1511432511, "last_edit_date": 1511432511, "creation_date": 1511368902, "answer_id": 47439849, "question_id": 47439344, "link": "https://stackoverflow.com/questions/47439344/sfinae-for-specialization-of-traits-on-crtp-struct/47439849#47439849", "title": "SFINAE for specialization of traits on CRTP struct", "body": "<p>Frankly, I don't know if is right g++ or clang++.</p>\n\n<p>Anyway, <s>I don't think is a good idea specialize a standard class</s> is forbidden specialize <code>std::arithmetic</code> (see <a href=\"https://stackoverflow.com/a/47439999/6022656\">Quentin's answer</a>).</p>\n\n<p>To avoid this sort of problems, I suggest you to define another (not-standard) type-traits, say <code>isAr</code>, as follows</p>\n\n<pre><code>template &lt;typename T, typename = T&gt;\nstruct isAr : public std::is_arithmetic&lt;T&gt;\n { };\n\ntemplate &lt;typename T&gt;\nstruct isAr&lt;T, typer&lt;T, typename T::base_type, typename T::typed_type&gt;&gt;\n    : public isAr&lt;typename T::base_type&gt;\n { };\n</code></pre>\n\n<p>Now</p>\n\n<pre><code>static_assert(isAr&lt;CRTPInt&gt;::value, \"failed\");\nstatic_assert(isAr&lt;CRTPInt::base_type&gt;::value, \"failed\");\n</code></pre>\n\n<p>compile with both g++ and clang++.</p>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>For your modified example, my suggestion become</p>\n\n<pre><code>template &lt;typename T, typename = T&gt;\nstruct isAr : public std::false_type\n { };\n\ntemplate &lt;&gt;\nstruct isAr&lt;int&gt; : public std::true_type\n { };\n\ntemplate &lt;typename T&gt;\nstruct isAr&lt;T, typer&lt;T, typename T::base_type, typename T::typed_type&gt;&gt;\n    : public isAr&lt;typename T::base_type&gt;\n { };\n\nstatic_assert(isAr&lt;CRTPInt&gt;::value, \"failed\");\nstatic_assert(isAr&lt;CRTPInt::base_type&gt;::value, \"failed\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 1, "last_activity_date": 1511369468, "last_edit_date": 1511369468, "creation_date": 1511369134, "answer_id": 47439927, "question_id": 47439344, "link": "https://stackoverflow.com/questions/47439344/sfinae-for-specialization-of-traits-on-crtp-struct/47439927#47439927", "title": "SFINAE for specialization of traits on CRTP struct", "body": "<p>The error from the compiler is saying the <code>is_arithmetic</code> specialization isn't actually specializing the template. When the conditions are met, and removing the clutter, it reads</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct is_arithmetic&lt;T&gt; : is_arithmetic&lt;typename T::base_type&gt; {};\n</code></pre>\n\n<p><strike>To specialize, you may specialize it for your <code>Base</code></p>\n\n<pre><code>template&lt;typename T, typename B&gt;\nstruct is_arithmetic&lt;Base&lt;T, B&gt;&gt; : is_arithmetic&lt;B&gt; {};\n</code></pre>\n\n<p></strike></p>\n\n<p><a href=\"https://stackoverflow.com/a/47439999/4832499\">It is illegal to specialize <code>is_arithmetic</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 6, "last_activity_date": 1511369374, "creation_date": 1511369374, "answer_id": 47439999, "question_id": 47439344, "link": "https://stackoverflow.com/questions/47439344/sfinae-for-specialization-of-traits-on-crtp-struct/47439999#47439999", "title": "SFINAE for specialization of traits on CRTP struct", "body": "<blockquote>\n  <p>[meta.type.synop:1]<br>\n  The behavior of a program that adds specializations for any of the templates defined in this subclause is undefined unless otherwise specified.</p>\n</blockquote>\n\n<p>That subsection includes <code>std::is_arithmetic</code>, so unfortunately you are not allowed to make this specialization at all.</p>\n"}], "owner": {"reputation": 21, "user_id": 8987766, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I3xAK1HEkUY/AAAAAAAAAAI/AAAAAAAAAq4/1DUVWYZvDf4/photo.jpg?sz=128", "display_name": "yvan herreros", "link": "https://stackoverflow.com/users/8987766/yvan-herreros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1511451839, "creation_date": 1511367340, "last_edit_date": 1511451839, "question_id": 47439344, "link": "https://stackoverflow.com/questions/47439344/sfinae-for-specialization-of-traits-on-crtp-struct", "title": "SFINAE for specialization of traits on CRTP struct", "body": "<p>I am tryng to specialize some traits (for instance std::is_arithmetic or assertion_traits in cppunit) for a template class (CRTP) that can hold a value of the template parameter type (something similar to <code>BOOST_STRONG_TYPEDEF</code>)</p>\n\n<p>I try to use SFINAE to restrict my specialization</p>\n\n<p>the sample code works fine with gcc6 and upper, but does not compile with Visual c++ (2015 or 2017) </p>\n\n<pre><code>error C2753: 'is_ar&lt;T&gt;': partial specialization cannot match argument list for primary template\n</code></pre>\n\n<p>or clang6</p>\n\n<pre><code>error: class template partial specialization does not specialize any template argument; to define the primary template, remove the template argument list\n</code></pre>\n\n<p>the sample code:</p>\n\n<pre><code>template&lt;class T, typename B&gt;\nstruct Base\n{\n    using typed_type = T ;\n    using  base_type = B ;\n    base_type x;\n}; \n\ntemplate &lt;typename T&gt;\nstruct MyType\n{\n    using base_type = T;\n    base_type x;\n};\n\nstruct CRTPInt : Base&lt;CRTPInt, int&gt; { };\n\n template &lt;typename T&gt;\nstruct is_ar \n{\n    static const bool value = false;\n};\n\ntemplate &lt;&gt;\nstruct is_ar&lt;int&gt;\n{\n    static const bool value = true;\n};\n\ntemplate &lt;class T, typename...&gt;\nusing typer = T;\n\n\ntemplate &lt;typename T&gt;\nstruct is_ar&lt;typer&lt;T, typename T::base_type, typename T::typed_type&gt;&gt; : is_ar&lt;typename T::base_type&gt;\n{\n    static const bool value = true;\n};\n\n\nstatic_assert(is_arithmetic&lt;CRTPInt&gt;::value, \"failed\");\nstatic_assert(is_arithmetic&lt;CRTPInt::base_type&gt;::value, \"failed\");\n</code></pre>\n\n<p>What did i do wrong ?</p>\n\n<p>Is it valid c++11 ?\nHow can I make it work with Visual C++ compiler ?</p>\n\n<p>the answer from max66 work fine assuming that I can modify the initial definition of the trait. but in practice i would like to specialize framework traits (cppunit::assertion_traits for instance) for the class created by the macro</p>\n\n<pre><code>#define MY_TYPEDEF(type , base) struct type: Base&lt;type , base&gt; { };\n</code></pre>\n\n<p>the classes declared by this macro are not template classes so I do not find a way to specialize for all the classes generated this way.</p>\n\n<p>The only common denominator beeing the typenames <em>base_type</em> and <em>typed_type</em> being defined.</p>\n\n<p>Any Idea ?</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "stl"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1511366833, "post_id": 47439123, "comment_id": 81833027, "body": "<code>std::begin(vals)</code> and <code>std::end(vals)</code> should be well defined as long as <code>vals</code> is an array and not just a pointer."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1511366923, "post_id": 47439123, "comment_id": 81833100, "body": "Have you considered just using a <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> instead?"}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511367184, "post_id": 47439123, "comment_id": 81833284, "body": "@Fran&#231;ois Andrieux is right, std::end not only gets rid of the warning, it is also much more readable: <a href=\"http://coliru.stacked-crooked.com/a/a8c7fa79c91b405c\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/a8c7fa79c91b405c</a>"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 1, "creation_date": 1511367776, "post_id": 47439123, "comment_id": 81833695, "body": "The error is in your code, not with the way iterators work. Since ANSI C the standard has always said that a pointer or an index has a well-defined value when it points to one past the end. So, if that&#39;s where you were pointing, you wouldn&#39;t get that error. But, you aren&#39;t. You&#39;re pointing two past the end. You don&#39;t need the +1 there. <code>val[size]</code> (aka <code>val + size</code>) is one past the end. Valid elements are 0 through size - 1, which is size elements."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1511374199, "post_id": 47439123, "comment_id": 81837578, "body": "I understand having to support very old processors and OS&#39;s, why do you have to support very old <i>compilers</i>?"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1511421004, "post_id": 47439123, "comment_id": 81853881, "body": "Because the systems are not under our control; we don&#39;t own nor maintain them. We have to assume only the compiler that was shipped with the O/S is available. For Debian that can be quite old - only /recently/ our users switched from Debian Etch to Debian Wheezy ..."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 4, "last_activity_date": 1511367151, "creation_date": 1511367151, "answer_id": 47439279, "question_id": 47439123, "link": "https://stackoverflow.com/questions/47439123/stl-algorithms-ctors-dont-work-anymore-for-raw-pointers-to-c-arrays-because/47439279#47439279", "title": "STL algorithms + c&#39;tors don&#39;t work anymore for raw pointers to C arrays because of pointing one past end", "body": "<pre><code>vals + vals.size + 1 \n</code></pre>\n\n<p>is one past one past the end (or two past the end). The last pointer in the array is </p>\n\n<pre><code>vals + vals.size - 1\n</code></pre>\n\n<p>hence one past the end should be </p>\n\n<pre><code>vals + vals.size\n</code></pre>\n\n<p>If you fix this in your code, <a href=\"http://coliru.stacked-crooked.com/a/78146a7f35bc1a20\" rel=\"nofollow noreferrer\">the warning is gone and it compiles</a>.</p>\n\n<p>However, consider using <code>std::begin()</code> and <code>std::end()</code> or simply a <code>std::array</code>. That syntax to get the size of a C style array is so horrible that I allowed myself to use a short way of writing it above.</p>\n"}], "owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 47439279, "answer_count": 1, "score": 2, "last_activity_date": 1511373915, "creation_date": 1511366695, "last_edit_date": 1511373915, "question_id": 47439123, "link": "https://stackoverflow.com/questions/47439123/stl-algorithms-ctors-dont-work-anymore-for-raw-pointers-to-c-arrays-because", "title": "STL algorithms + c&#39;tors don&#39;t work anymore for raw pointers to C arrays because of pointing one past end", "body": "<p>I just ran into an issue with my compiler settings (\"-Werror\") in combination with using raw pointers to C-style arrays as STL iterators. I get an </p>\n\n<pre><code>array_bounds_problem.cc:12:36: error: array subscript is above array bounds [-Werror=array-bounds]\n     const int*  p = std::find(vals, vals + (sizeof(vals)/sizeof(vals[0]))+1, 12);\n                           ~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>The problem is that for using STL algorithms/constructors using a pair of iterators that the <code>end</code> iterator must be pointing one-past-the-end ... which is <em>indeed</em> outside e.g. the storage of a C-style array.</p>\n\n<p>An example is here: <a href=\"http://coliru.stacked-crooked.com/a/59ad7b82fe63211d\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/59ad7b82fe63211d</a></p>\n\n<p>Any ideas how I can compile with \"-Werror\" and still use C-style arrays mixed with STL algorithms/containers??</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Right! Thanks a <em>lot</em> for the answers!\nUnfortunately I cannot use <code>std::array</code> / <code>std::begin()/end()</code> because the code must be compatible with pre C++11 :-(\n(we have to support (very) old systems ...)</p>\n\n<p><a href=\"https://stackoverflow.com/a/47439279/26083\">tobi303</a> and Omnifarious's suggestions are obviously what's happening ...\nI fell for the age old off-by-one error. I feel very stupid now.</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["c++", "random", "gpu", "gpgpu", "metal"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 1, "creation_date": 1511374250, "post_id": 47439008, "comment_id": 81837614, "body": "What does the client code of this RNG code look like? You should probably create a class to represent the RNG with the functions as member functions and the state (last seed) as a member variable. You would create an instance of this class as a local in the calling code, initialized with the initial seed. If you need to use it in multiple functions, you&#39;ll have to pass a reference to the instance around, which is annoying but doable."}, {"owner": {"reputation": 1414, "user_id": 5420846, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Bq7Rc.jpg?s=128&g=1", "display_name": "QuantumHoneybees", "link": "https://stackoverflow.com/users/5420846/quantumhoneybees"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1511382089, "post_id": 47439008, "comment_id": 81841563, "body": "I&#39;m using it for a monte carlo path tracer. Your suggestions worked! I&#39;m in the process of packaging up the code into a neat framework for anyone to use. I&#39;ll share a link to the repo as soon as I&#39;m done! Thanks a bunch (:"}, {"owner": {"reputation": 1414, "user_id": 5420846, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Bq7Rc.jpg?s=128&g=1", "display_name": "QuantumHoneybees", "link": "https://stackoverflow.com/users/5420846/quantumhoneybees"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1514235291, "post_id": 47439008, "comment_id": 82913537, "body": "<a href=\"https://github.com/YoussefV/Loki\" rel=\"nofollow noreferrer\">Link to the repo as mentioned before</a>. There are also instructions on how to use the RNG in the repo for any future wanderers."}], "answers": [{"tags": [], "owner": {"reputation": 1414, "user_id": 5420846, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Bq7Rc.jpg?s=128&g=1", "display_name": "QuantumHoneybees", "link": "https://stackoverflow.com/users/5420846/quantumhoneybees"}, "is_accepted": true, "score": 0, "last_activity_date": 1514235419, "creation_date": 1514235419, "answer_id": 47971991, "question_id": 47439008, "link": "https://stackoverflow.com/questions/47439008/metal-namespace-variable-that-is-local-to-a-thread/47971991#47971991", "title": "Metal - Namespace variable that is local to a thread?", "body": "<p>I ended up using @KenThomases' suggestions and I just created a class for the RNG. I packaged the code and called the RNG <code>Loki</code>. <a href=\"https://github.com/YoussefV/Loki\" rel=\"nofollow noreferrer\">Here is the link to the repo</a> if anyone wants to use it in the future.</p>\n"}], "owner": {"reputation": 1414, "user_id": 5420846, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Bq7Rc.jpg?s=128&g=1", "display_name": "QuantumHoneybees", "link": "https://stackoverflow.com/users/5420846/quantumhoneybees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 47971991, "answer_count": 1, "score": 1, "last_activity_date": 1514235419, "creation_date": 1511366301, "last_edit_date": 1512000645, "question_id": 47439008, "link": "https://stackoverflow.com/questions/47439008/metal-namespace-variable-that-is-local-to-a-thread", "title": "Metal - Namespace variable that is local to a thread?", "body": "<p>I'm trying to create a Pseudo Random Number Generator (PRNG) in Metal, akin to <code>thrust</code>'s RNG , where every time you call the RNG <em>within a thread</em> it produces a different random number given a particular seed, which in this case, will be the <code>thread_position_in_grid</code>. I have it set up perfectly, and I get a nice uniformly random picture right now using the code I have.</p>\n\n<p>However, my code only works once per thread. I want to implement a <code>next_rng()</code> function that returns a new <code>rng</code> using the last result as a seed. I am having trouble storing that last result, however, as my RNG is a namespace, and I can only store the last result in <code>constant</code> address space, which is un-updateable. Is there any way to get around this/restructure my code to avoid this?</p>\n\n<p>The best help I could find online was <a href=\"https://stackoverflow.com/questions/22471466/why-program-global-scope-variables-must-be-constant\">this SO post</a> that unfortunately doesn't work with me because I can't declare a variable as static within a function as they do in their solution.</p>\n\n<p><strong>I'm open for restructuring my code in any way if that helps. Can I maybe turn this into a static class or a class or something? No clue, but I just want a PRNG</strong></p>\n\n<p>My code (simplified) basically has the same structure as that post's:</p>\n\n<pre><code>namespace metal_rng {\n\n    thread unsigned* last_seed() {\n        thread uint last_seed = 1; // Doesn't work because last-seed falls out of scope after the function quits\n\n        // The following comment line doesn't even compile:\n        // thread static uint last_seed = 1;\n\n        return &amp;last_seed;\n    }\n\n    unsigned TausStep(const unsigned z, const int s1, const int s2, const int s3, const unsigned M)\n    {\n        unsigned b=(((z &lt;&lt; s1) ^ z) &gt;&gt; s2);\n        return (((z &amp; M) &lt;&lt; s3) ^ b);\n    }\n\n    device float rng(const int initial_seed) {\n        int seed = initial_seed * 1099087573UL;\n\n        unsigned hashed = (1664525*(*last_seed()) + 1013904223UL);\n        *last_seed() = hashed\n        return (hashed) * 2.3283064365387e-10;\n    }\n\n    device float next_rng() {\n          if (*last_seed() == 0) {\n              return 0.0;\n          } else {\n              unsigned hashed = (1664525*(*last_seed()) + 1013904223UL);\n              return (hashed) * 2.3283064365387e-10;\n          }\n    }\n}\n</code></pre>\n\n<h3>Edit:</h3>\n\n<p>Framework is done and packaged neatly here: <a href=\"https://github.com/YoussefV/Loki/tree/master\" rel=\"nofollow noreferrer\">Link</a></p>\n"}, {"tags": ["c++", "language-lawyer", "iostream", "sstream"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1511375814, "post_id": 47438863, "comment_id": 81838450, "body": "This sounds like a library issue rather than a compiler issue."}], "answers": [{"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1511367835, "post_id": 47439311, "comment_id": 81833734, "body": "Looks like std::basic_ostream::sentry is responsible for setting the failbit if eof occurs."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1511368837, "post_id": 47439311, "comment_id": 81834433, "body": "@BoPersson The requirements are different for input and output functions. According to the standard, &quot;Formatted output functions&quot; should be responsible for setting the <code>failbit</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1511369518, "post_id": 47439311, "comment_id": 81834877, "body": "Yes, I quoted different sections from the different documents. A mixup. However, the text quoted here doesn&#39;t say explicitly what happens when the first if-condition is false, and the stream doesn&#39;t even attempt to generate anything. [ostream::sentry] says, a bit vague, &quot;During preparation, the constructor may call setstate(failbit)&quot;."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 3, "last_activity_date": 1511404948, "last_edit_date": 1511404948, "creation_date": 1511367219, "answer_id": 47439311, "question_id": 47438863, "link": "https://stackoverflow.com/questions/47438863/what-value-should-stdstringstreamfail-return-after-reading-then-writing/47439311#47439311", "title": "What value should `std::stringstream::fail()` return after reading then writing? (gcc vs clang)", "body": "<p>Gcc is correct. <code>std::stringstream</code> inherits from <code>std::basic_ostream</code>, and according to the behavior of <a href=\"http://eel.is/c++draft/ostream.formatted#ostream.inserters.character-4\" rel=\"nofollow noreferrer\"><code>operator&lt;&lt;(std::basic_ostream)</code></a> (which is invoked from <code>ss &lt;&lt; \"foo\";</code>),</p>\n\n<blockquote>\n  <p>Effects: Behaves like a formatted inserter (as described in [ostream.formatted.reqmts]) of out.</p>\n</blockquote>\n\n<p>And from <a href=\"http://eel.is/c++draft/ostream.formatted.reqmts#1\" rel=\"nofollow noreferrer\">\u00a730.7.5.2.1/1 Common requirements [ostream.formatted.reqmts]</a>:</p>\n\n<p>(emphasis mine)</p>\n\n<blockquote>\n  <p>Each formatted output function begins execution by constructing an object of class sentry. If this object returns true when converted to a value of type bool, the function endeavors to generate the requested output. <strong>If the generation fails, then the formatted output function does setstate(ios_\u00adbase\u200b::\u200bfailbit)</strong>, which might throw an exception.</p>\n</blockquote>\n\n<p>And <a href=\"http://eel.is/c++draft/ostream::sentry\" rel=\"nofollow noreferrer\">\u00a730.7.5.1.3 Class basic_\u00adostream\u200b::\u200bsentry [ostream::sentry]</a>:</p>\n\n<blockquote>\n  <p>If os.good() is nonzero, prepares for formatted or unformatted output.\n  If os.tie() is not a null pointer, calls os.tie()->flush().</p>\n  \n  <p>If, after any preparation is completed, os.good() is true, ok_\u00ad ==\n  true otherwise, ok_\u00ad == false. During preparation, the constructor may\n  call setstate(failbit) (which may throw ios_\u00adbase\u200b::\u200b\u200bfailure\n  ([iostate.flags]))</p>\n</blockquote>\n\n<p>And <a href=\"http://eel.is/c++draft/iostate.flags\" rel=\"nofollow noreferrer\">\u00a730.5.5.4 basic_\u00adios flags functions [iostate.flags]</a>:</p>\n\n<blockquote>\n  <p>iostate rdstate() const;<br>\n  Returns: The error state of the stream buffer.</p>\n  \n  <p>bool good() const;<br>\n  Returns: rdstate() == 0</p>\n  \n  <p>bool eof() const;<br>\n  Returns: true if eofbit is set in rdstate().</p>\n</blockquote>\n\n<p><code>eofbit</code> has been set in this case, then <code>std::basic_ios::good</code> returns nonzero and causes writing failed (as the result showed), then <code>failbit</code> should be set.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 1, "accepted_answer_id": 47439311, "answer_count": 1, "score": 8, "last_activity_date": 1511404948, "creation_date": 1511365865, "question_id": 47438863, "link": "https://stackoverflow.com/questions/47438863/what-value-should-stdstringstreamfail-return-after-reading-then-writing", "title": "What value should `std::stringstream::fail()` return after reading then writing? (gcc vs clang)", "body": "<p>Consider the following code snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n    std::stringstream ss;\n    ss &lt;&lt; \"12345\";\n    unsigned short s;\n    ss &gt;&gt; s;\n    ss &lt;&lt; \"foo\";\n\n    std::cout &lt;&lt; std::boolalpha\n              &lt;&lt; \"\\nss.eof()  = \" &lt;&lt; ss.eof()\n              &lt;&lt; \"\\nss.good() = \" &lt;&lt; ss.good()\n              &lt;&lt; \"\\nss.bad()  = \" &lt;&lt; ss.bad()\n              &lt;&lt; \"\\nss.fail() = \" &lt;&lt; ss.fail()\n              &lt;&lt; \"\\nss.str()  = \" &lt;&lt; ss.str();\n}\n</code></pre>\n\n<hr>\n\n<p>clang++ trunk prints the following result:</p>\n\n<blockquote>\n<pre><code>ss.eof()  = true\nss.good() = false\nss.bad()  = false\nss.fail() = false\nss.str()  = 12345\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://wandbox.org/permlink/6WLJhkpnmMbM49fm\" rel=\"noreferrer\"><strong>on wandbox</strong></a></p>\n\n<hr>\n\n<p>g++ trunk prints the following result:</p>\n\n<blockquote>\n<pre><code>ss.eof()  = true\nss.good() = false\nss.bad()  = false\nss.fail() = true\nss.str()  = 12345\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://wandbox.org/permlink/RcAGQjV55MnG7jPq\" rel=\"noreferrer\"><strong>on wandbox</strong></a></p>\n\n<hr>\n\n<p>As you can see, the value of <code>ss.fail()</code> is different between the two compilers. What does the Standard say regarding the behavior of <code>std::stringstream</code> in this case? Is it implementation-defined to set <code>failbit</code>/<code>badbit</code> when writing to a stream that has already been consumed?</p>\n"}, {"tags": ["c++", "vector", "stl", "containers", "boost-interprocess"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1511364255, "post_id": 47438291, "comment_id": 81831118, "body": "As per <a href=\"http://en.cppreference.com/w/cpp/container/vector/resize\" rel=\"nofollow noreferrer\">cppreference</a>: <i>If an exception is thrown, this function has no effect (strong exception guarantee).</i> (I&#39;ll let someone with a copy of the standard answer the question)"}, {"owner": {"reputation": 6703, "user_id": 249810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41073fa4fa33840f81aceaefff9ec31c?s=128&d=identicon&r=PG", "display_name": "ezod", "link": "https://stackoverflow.com/users/249810/ezod"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1511364319, "post_id": 47438291, "comment_id": 81831176, "body": "I see a possible duplicate now (although the answer wording is specific to <code>push_back</code> and <code>push_front</code>): <a href=\"https://stackoverflow.com/questions/8899814/state-of-stdvector-after-stdbad-alloc\" title=\"state of stdvector after stdbad alloc\">stackoverflow.com/questions/8899814/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 5, "last_activity_date": 1511364315, "creation_date": 1511364315, "answer_id": 47438333, "question_id": 47438291, "link": "https://stackoverflow.com/questions/47438291/does-vector-resize-throwing-bad-alloc-invalidate-the-original-data/47438333#47438333", "title": "Does vector resize throwing bad_alloc invalidate the original data?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/resize\" rel=\"noreferrer\"><code>std::vector::resize</code></a> is exception safe.</p>\n\n<blockquote>\n  <p>If an exception is thrown, this function has no effect (strong exception guarantee).</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/resize#Exceptions\" rel=\"noreferrer\">Link to the exception specification.</a> The specification doesn't mention any particular requirement on the allocator and must hold regardless of the allocator you provide.</p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 3, "last_activity_date": 1511365028, "last_edit_date": 1511365028, "creation_date": 1511364685, "answer_id": 47438449, "question_id": 47438291, "link": "https://stackoverflow.com/questions/47438291/does-vector-resize-throwing-bad-alloc-invalidate-the-original-data/47438449#47438449", "title": "Does vector resize throwing bad_alloc invalidate the original data?", "body": "<blockquote>\n  <p>is the original data still valid and accessible in the <code>std::vector</code> object?</p>\n</blockquote>\n\n<p>Yes, <code>std::vector::resize</code> has strong exception guarantee (except for the case mentioned as follows). <a href=\"http://eel.is/c++draft/vector.capacity#15\" rel=\"nofollow noreferrer\">\u00a726.3.11.3/15 vector capacity [vector.capacity]</a>:</p>\n\n<blockquote>\n  <p>If an exception is thrown other than by the move constructor of a non-CopyInsertable T there are no effects.</p>\n</blockquote>\n\n<p>The guarantee has nothing to do with what kind of allocator is specified; so it's always true.</p>\n"}], "owner": {"reputation": 6703, "user_id": 249810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41073fa4fa33840f81aceaefff9ec31c?s=128&d=identicon&r=PG", "display_name": "ezod", "link": "https://stackoverflow.com/users/249810/ezod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 47438333, "answer_count": 2, "score": 2, "last_activity_date": 1511365028, "creation_date": 1511364190, "question_id": 47438291, "link": "https://stackoverflow.com/questions/47438291/does-vector-resize-throwing-bad-alloc-invalidate-the-original-data", "title": "Does vector resize throwing bad_alloc invalidate the original data?", "body": "<p>After <code>std::vector::resize()</code> throws a <code>std::bad_alloc</code> exception, is the original data still valid and accessible in the <code>std::vector</code> object?</p>\n\n<p>Does the answer hold for other allocators, e.g. if <code>boost::interprocess::allocator</code> is used as the allocator, and <code>boost::interprocess::bad_alloc</code> is thrown?</p>\n"}, {"tags": ["c++", "templates", "type-deduction"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1511363948, "post_id": 47438130, "comment_id": 81830873, "body": "What&#39;s the purpose of <code>template&lt;typename&gt;</code> in <code>template&lt;template&lt;typename&gt; class T&gt;</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1511364010, "post_id": 47438130, "comment_id": 81830922, "body": "The error message is broken: that&#39;s a mismatch between the expected type, and the <i>template</i> that <code>T</code> is. IOW, <code>std::shared_ptr&lt;T&lt;something&gt;&gt;</code> would work."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1511364024, "post_id": 47438130, "comment_id": 81830933, "body": "@AlgirdasPreid\u017eius means (I suppose) that everything works just fine once you remove <code>template&lt;typename&gt;</code> and define Foo` as a <code>template&lt;class T&gt;</code>."}, {"owner": {"reputation": 910, "user_id": 4449456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c419e5814a56046a5d8cce892970993b?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Kazbekov", "link": "https://stackoverflow.com/users/4449456/alan-kazbekov"}, "edited": false, "score": 0, "creation_date": 1511365903, "post_id": 47438130, "comment_id": 81832358, "body": "I&#39;m using several template arguments and I want to force compiler error when someone tries instantiate template class with different template types. Updated question."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1511366062, "post_id": 47438130, "comment_id": 81832459, "body": "@AlanKazbekov Then you could use it as <code>BaseGrabber&lt;int, Bar&gt;</code>, and instantiate the template inside <code>BaseGrabber</code> with the template parameter <code>TObject</code>."}, {"owner": {"reputation": 910, "user_id": 4449456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c419e5814a56046a5d8cce892970993b?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Kazbekov", "link": "https://stackoverflow.com/users/4449456/alan-kazbekov"}, "edited": false, "score": 0, "creation_date": 1511366339, "post_id": 47438130, "comment_id": 81832682, "body": "That is not the option. There is <code>run()</code>, that takes pointer to buffer as function argument."}], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 4449456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c419e5814a56046a5d8cce892970993b?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Kazbekov", "link": "https://stackoverflow.com/users/4449456/alan-kazbekov"}, "edited": false, "score": 0, "creation_date": 1511434622, "post_id": 47439017, "comment_id": 81862187, "body": "Thanks for #1 and thanks for #2! Just discovered <code>static_assert(sizeof(T) == 0, &quot;...&quot;);</code> for myself as a common practice!"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 1, "last_activity_date": 1511366341, "creation_date": 1511366341, "answer_id": 47439017, "question_id": 47438130, "link": "https://stackoverflow.com/questions/47438130/type-deduction-for-template-template-parameters-c/47439017#47439017", "title": "Type deduction for template template parameters (C++)", "body": "<p><strong>Question 1:</strong></p>\n\n<blockquote>\n  <p>[I] can't figure out why <code>T</code> is not properly deduced for <code>shared_pointer</code>?</p>\n</blockquote>\n\n<pre><code>template&lt;template&lt;typename&gt; class T&gt;\nclass Foo{\npublic:\n    std::shared_ptr&lt;T&gt; shared_pointer;\n};\n</code></pre>\n\n<hr>\n\n<p><strong>Answer:</strong> <code>T</code> cannot be deduced for <code>shared_ptr</code> because <code>T</code> is a templated type, and you're not giving it any template arguments. Simply reduce it to <code>class T</code> and it will work:</p>\n\n<pre><code>template&lt;class T&gt;\nclass Foo{\npublic:\n    std::shared_ptr&lt;T&gt; shared_pointer;\n};\n</code></pre>\n\n<hr>\n\n<p><strong>Question 2:</strong></p>\n\n<blockquote>\n  <p>I want to force compiler error when someone write something like:<br/>\n  <code>BaseGrabber&lt;int, Bar&lt;long&gt;&gt; grabber;</code></p>\n</blockquote>\n\n<p><strong>Answer:</strong>\nWe shall write an empty primary specialization for <code>BaseGrabber</code>, and then specialize it for when the second argument uses the same template argument type as the first argument:</p>\n\n<pre><code>template&lt;class T, class U&gt;\nclass BaseGrabber{\n    static_assert(sizeof(T) == 0, \"Template argument is not correct\");\n};\n\ntemplate&lt;class T, template&lt;class&gt; class U&gt;\nclass BaseGrabber&lt;T, U&lt;T&gt;&gt; {\npublic:\n    virtual void run(std::shared_ptr&lt;T&gt;){};\n}\n</code></pre>\n\n<p>Test it like so:</p>\n\n<pre><code>int main()\n{\n    Foo&lt;Bar&lt;std::string&gt;&gt; foo;\n    //BaseGrabber&lt;int, Bar&lt;long&gt;&gt; grabber; // compiler error\n    BaseGrabber&lt;int, Bar&lt;int&gt;&gt; grabber;\n}\n</code></pre>\n\n<h3><a href=\"https://wandbox.org/permlink/pNoUUUuo1jFwyGRw\" rel=\"nofollow noreferrer\">Live Demo</a></h3>\n"}], "owner": {"reputation": 910, "user_id": 4449456, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c419e5814a56046a5d8cce892970993b?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Kazbekov", "link": "https://stackoverflow.com/users/4449456/alan-kazbekov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 47439017, "answer_count": 1, "score": 1, "last_activity_date": 1511366341, "creation_date": 1511363674, "last_edit_date": 1511366021, "question_id": 47438130, "link": "https://stackoverflow.com/questions/47438130/type-deduction-for-template-template-parameters-c", "title": "Type deduction for template template parameters (C++)", "body": "<p>With the code below I've got compiler error:</p>\n\n<p><code>type/value mismatch at argument 1 in template parameter list for 'template&lt;class _Tp&gt; class std::shared_ptr'\n     std::shared_ptr&lt;T&gt; shared_pointer;\n                      ^\n../test/main.cpp:16:22: note:   expected a type, got 'T'</code></p>\n\n<p>Can't figure out why <code>T</code> is not properly deduced for <code>shared_pointer</code>?</p>\n\n<pre><code>template&lt;typename K&gt;\nclass Bar{\n    K k;\n};\n\ntemplate&lt;template&lt;typename&gt; class T&gt;\nclass Foo{\npublic:\n    std::shared_ptr&lt;T&gt; shared_pointer;\n};\n\n\nint main(void)\n{\n    Foo&lt;Bar&lt;std::string&gt;&gt; foo;\n}\n</code></pre>\n\n<p><strong>Update:</strong>\nAnother example:</p>\n\n<pre><code>template&lt;typename TObject, template&lt;TObject&gt; class TBuffer&gt;\nclass BaseGrabber {\n\npublic:\n    virtual void run(std::shared_ptr&lt;TBuffer&gt;){};\n};\n</code></pre>\n\n<p>I want to force compiler error when someone write something like </p>\n\n<pre><code>BaseGrabber&lt;int, Bar&lt;long&gt;&gt; grabber;\n</code></pre>\n\n<p>so <code>Bar</code> never specialized with type that differs from first <code>BaseGrabber</code> template parameter.</p>\n"}, {"tags": ["c++", "arrays", "iterator"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 9, "creation_date": 1511362745, "post_id": 47437692, "comment_id": 81829930, "body": "Undefined behavior is undefined."}, {"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1511362975, "post_id": 47437692, "comment_id": 81830128, "body": "Since it is undefined behaviour anything can happen, it can even look like it works."}, {"owner": {"reputation": 4101, "user_id": 3382549, "user_type": "registered", "profile_image": "https://graph.facebook.com/531045015/picture?type=large", "display_name": "Tim Rutter", "link": "https://stackoverflow.com/users/3382549/tim-rutter"}, "edited": false, "score": 0, "creation_date": 1511363137, "post_id": 47437692, "comment_id": 81830267, "body": "Perhaps at some point it happens to hit the end of the a array so stops, up to that point its been merrily copying past the end of your b array which just happens not to have had any noticeable effect."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1511363174, "post_id": 47437692, "comment_id": 81830298, "body": "It is UB, but in your case, in memory you have <code>c, b, a</code> (reverse order with stack), so it happens you copy 10 elements from <code>b</code> (5,6,7,8,9, 0,1,2,3,4) to <code>c</code>, overwriting b with <code>0,1,2,3,4</code>."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1511363482, "post_id": 47437692, "comment_id": 81830517, "body": "It fails here: <a href=\"https://ideone.com/bSqNEw\" rel=\"nofollow noreferrer\">ideone.com/bSqNEw</a> You were unlucky, all those months, when it &quot;worked&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511365493, "post_id": 47437692, "comment_id": 81832050, "body": "Many c++ errors cause undefined behavior and are not required to be detected by the compiler. Unfortunately, in c++, successfully compiling code, running it and obtaining the expected result is not enough to prove that your code is legal. Undefined behavior may appear to work for some time and suddenly change unexpectedly."}, {"owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511371470, "post_id": 47437692, "comment_id": 81836154, "body": "@Jarod42 You&#39;re right, when after the std::copy the contents of A and B are identical. Thanks!"}], "owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511363256, "creation_date": 1511362474, "question_id": 47437692, "link": "https://stackoverflow.com/questions/47437692/copying-from-the-start-of-one-iterator-to-the-end-of-another-objects-iterator", "title": "Copying from the start of one iterator to the end of another objects iterator", "body": "<p>This puzzling code was found in my application where I had written an std::copy with an iterator of one array for the first parameter, and then mistakenly used the end iterator of another array for the second parameter. When looking at this code I would have imagined that either nothing would have happened, or the code would have blown up entirely. However this piece of code has been working correctly for months, always producing the same result.</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;stdio.h&gt;\n\nusing std::array;\nusing std::printf;\n\nint main()\n{\n    array&lt;int,5&gt; a = {0,1,2,3,4};\n    array&lt;int,5&gt; b = {5,6,7,8,9};\n\n    array&lt;int,5&gt; c;\n    std::fill(c.begin(), c.end(), 0);\n\n    std::copy(b.begin(), a.end(), c.begin());\n    for(int element : c)\n        printf(\"%d\", element);\n}\n</code></pre>\n\n<p>If you run this code <a href=\"https://tio.run/##lY7LDoIwEEXXna9oMCYlGYkvfIDyJW7KULAJFoK6MMZvx7bGR3TlZh733skZattRRdQPtKH6XCi@kV0nLxm8heOp0E20zwDOR20qbvck8an0U2k7bU5l2tvKD1IbEcIVmM9trIZxxiXf8usYJzjFGc5v6ZedOzvGBS5xhesfm1IAYJ5V6roWFOWqchzkFClTuGEc2hArm064N1StDsr2hFMIjD0@FMGwCPDp2fxL35nAn3sENe1F5G@EfCJeWHf6H@nW93c\" rel=\"nofollow noreferrer\">here</a> you will see that the output is <code>56789</code>, the contents of the array b. I am wondering why this is the case.</p>\n"}, {"tags": ["c++", "multithreading", "boost-asio"], "comments": [{"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1511363896, "post_id": 47437563, "comment_id": 81830827, "body": "Did you come across a certain tutorial, I think on gamedev? I can dig it out for you, but I used it a few years ago to do the io_service / tcp thing. From what I recall, the io_service/run thing is a way to make a bunch of threads, which can do whatever you like, but are meant to be used with asio&#39;s various sockets and such."}, {"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1511363935, "post_id": 47437563, "comment_id": 81830864, "body": "<a href=\"http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=11\" rel=\"nofollow noreferrer\">gamedev.net/blog/950/&hellip;</a> Found it, happened to be in my favourites"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1511364210, "post_id": 47437563, "comment_id": 81831081, "body": "@Carlos how does adding 1 more tutorial help?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511364242, "post_id": 47437563, "comment_id": 81831108, "body": "@DevSolar, how about starting a thread for each handler and just passing the iostream or socket into it?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511364337, "post_id": 47437563, "comment_id": 81831194, "body": "@sehe: But I would need a <i>separate</i> <code>tcp::iostream</code> for each <code>Handler</code>, wouldn&#39;t I?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511364354, "post_id": 47437563, "comment_id": 81831202, "body": "Yes. Precisely."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511364534, "post_id": 47437563, "comment_id": 81831357, "body": "@sehe: There is some communication disconnect here. I know how I could spawn a couple of <code>io_service</code> objects (as the Boost examples showcase), but I don&#39;t know how to get from there to <code>tcp::iostream</code> (as its <a href=\"http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_socket_iostream/basic_socket_iostream/overload2.html\" rel=\"nofollow noreferrer\">constructor</a> wants <i>resolver query</i> parameters)...?!? And I can&#39;t just spawn threads and have each one&#39;s <code>tcp::iostream</code> listen to the same port, or can I? (Address already in use...)"}, {"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511369056, "post_id": 47437563, "comment_id": 81834562, "body": "@sehe it&#39;s nice to know if he&#39;s already tried one path."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511431875, "post_id": 47437563, "comment_id": 81860373, "body": "Why combine the two approaches at all? Why not just use the traditional asio approach which sounds like it should be optimal for your use case?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511432349, "post_id": 47437563, "comment_id": 81860704, "body": "@DavidSchwartz: Ref. &quot;Rationale for going with <code>tcp::iostream</code>&quot;...? I very much like the fact that I can have <i>one</i> <code>Handler</code> class that does the processing regardless of whether it&#39;s file-based, <code>cin</code> / <code>cout</code>, or over the network. Also, the chaining of <code>async_*()</code> calls and callbacks (which I assume you mean by &quot;the traditional asio approach&quot;) feels cumbersome."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511432390, "post_id": 47437563, "comment_id": 81860733, "body": "@DevSolar You can use stackful coroutines then. But actually now that I think about it, it sounds like you may just want to dispatch the long-running work to a separate pool of threads."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1511432719, "post_id": 47437563, "comment_id": 81860938, "body": "@DavidSchwartz: Using coroutines  would still not give me a transparent <code>std::iostream</code> interface. I don&#39;t see your point. I could have picked a dozen other ways, but <code>tcp::iostream</code> was what I wanted because I <i>need</i> <code>Handler</code> to be able to do file-based work as well. You could also ask why I don&#39;t use C++11 -- because I have to support SLES 11 with it&#39;s pre-C++11 compiler. Or why I limit myself to 127.0.0.1 -- because this is strictly back-end stuff, as the front end (which does user authorization, encryption, billing etc.) already exist and the service must not be available from off-system."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511365171, "post_id": 47438617, "comment_id": 81831818, "body": "I used c++11 thread for speed here, obviously you&#39;d use Boost Thread for c++03 compatibilty"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511367040, "post_id": 47438617, "comment_id": 81833182, "body": "I am sorry to ask this of you, but could you turn this into C++03 / Boost.Thread-using code? Looking at the (also unfamiliar) <code>std::future</code> parts interspersed with the Boost.Asio code which I am struggling to grasp is somewhat compounding my frustration about being too dense to &quot;get&quot; it."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511368102, "post_id": 47438617, "comment_id": 81833923, "body": "Or, to put it differently -- all the multithreading examples from the Boost docs are about making multiple calls to <code>io_service::run()</code>. Your example does not call <code>io_service::run()</code> even <i>once</i>. I see the code well enough, but I fail to grasp the concept(s) behind it. :-("}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511368163, "post_id": 47438617, "comment_id": 81833970, "body": "Hah - Boost Future and Boost Move in C++03 are... complicated. I don&#39;t know how to use <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/BOOST_MOVE_RET.html\" rel=\"nofollow noreferrer\">BOOST_MOVE_RET</a> yet, but in your case you might not care about the return: here&#39;s a start <a href=\"http://coliru.stacked-crooked.com/a/9c2337e92446511d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9c2337e92446511d</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511368182, "post_id": 47438617, "comment_id": 81833980, "body": "<code>io_service::run()</code> is for async use"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511368503, "post_id": 47438617, "comment_id": 81834193, "body": "Indeed, there is no return of <code>Handler::run()</code> in my case, so you can do away with that. I don&#39;t see where I am supposed to spawn threads, i.e. what is shared (the acceptor?) and what isn&#39;t. Sorry but I cannot phrase the question any better. I <i>know</i> I&#39;ll be slapping my forehead once the lightbulb switches on..."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511373585, "post_id": 47438617, "comment_id": 81837245, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/159610/discussion-between-sehe-and-devsolar\">continue this discussion in chat</a>."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511374910, "post_id": 47438617, "comment_id": 81837996, "body": "And if you wholly don&#39;t care how many requests (ie. threads) are running at a given time and also don&#39;t care about orderly shutdown, you can use the naive approach with detached threads each time: <a href=\"http://coliru.stacked-crooked.com/a/b79c4b08c1dd24c7\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/b79c4b08c1dd24c7</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511431739, "post_id": 47438617, "comment_id": 81860289, "body": "Fixing link: Here&#39;s a different approach when you want to explicitly control the number of threads. <a href=\"http://coliru.stacked-crooked.com/a/4aa30918f9acc3ff\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4aa30918f9acc3ff</a> - in this case we use <code>io_service</code> for an extra purpose: it serves as a task-queue (see post)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1511431633, "last_edit_date": 1511431633, "creation_date": 1511365150, "answer_id": 47438617, "question_id": 47437563, "link": "https://stackoverflow.com/questions/47437563/boost-asio-tcpiostream-and-multithreading/47438617#47438617", "title": "Boost.Asio, tcp::iostream, and multithreading", "body": "<p>I think I'm subtly missing the question here. It doesn't seen related to Asio:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/8f19771340930145\" rel=\"nofollow noreferrer\">Live C++03 On Coliru</a></kbd></strong></p>\n\n<pre><code>#define BOOST_THREAD_USES_MOVE\n#include &lt;boost/enable_shared_from_this.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/basic_socket_iostream.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n\nstruct Handler {\n    std::istream&amp; is;\n    std::ostream&amp; os;\n\n    Handler(std::istream&amp; is, std::ostream&amp; os) : is(is), os(os){}\n    void run() {\n        std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; \":\" &lt;&lt; __LINE__ &lt;&lt; std::endl;\n        std::string line;\n\n        while (getline(is, line)) {\n            std::reverse(line.begin(), line.end());\n            os &lt;&lt; line &lt;&lt; std::endl;\n        }\n    }\n};\n\nstruct SocketRequest : boost::enable_shared_from_this&lt;SocketRequest&gt; {\n    boost::asio::ip::tcp::iostream stream;\n\n    void start() {\n        boost::async(boost::launch::async, boost::bind(&amp;SocketRequest::do_run, shared_from_this()));\n    }\n\n  private:\n    void do_run() {\n        return Handler(stream, stream).run();\n    }\n};\n\nint main() {\n    boost::asio::io_service io_service;\n\n    unsigned short port_ = 6767;\n    boost::asio::ip::tcp::endpoint endpoint(boost::asio::ip::tcp::v4(), port_);\n    boost::asio::ip::tcp::acceptor acceptor(io_service, endpoint);\n\n    for (;;)\n    {\n        boost::shared_ptr&lt;SocketRequest&gt; req = boost::make_shared&lt;SocketRequest&gt;();\n\n        acceptor.accept(*req-&gt;stream.rdbuf());\n        req-&gt;start();\n    }\n}\n</code></pre>\n\n<p>For sample clients:</p>\n\n<pre><code>(for req in HELLO BYE; do sleep 1; netcat 127.0.0.1 6767 &lt;&lt;&lt; \"$req\"; done)&amp;\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>void Handler::run():16\nOLLEH\nvoid Handler::run():16\nEYB\n</code></pre>\n"}], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 1, "accepted_answer_id": 47438617, "answer_count": 1, "score": 2, "last_activity_date": 1511431633, "creation_date": 1511362064, "question_id": 47437563, "link": "https://stackoverflow.com/questions/47437563/boost-asio-tcpiostream-and-multithreading", "title": "Boost.Asio, tcp::iostream, and multithreading", "body": "<p><strong>tl;dr</strong></p>\n\n<p>How do I make a <code>tcp::iostream</code> based server, as in the code below, accept multiple connections in separate threads?</p>\n\n<hr>\n\n<p>I am trying my hand at implementing a server / client interface for a preexisting library using Boost.Asio, feeling my way along the <a href=\"http://www.boost.org/doc/libs/release/doc/html/boost_asio/examples/cpp03_examples.html\" rel=\"nofollow noreferrer\">examples</a>. (Yes, pre-C++11. Bear with me.)</p>\n\n<p><strong>Rationale for going with tcp::iostream.</strong></p>\n\n<p>Due to circumstances, the whole server process is optional; i.e. when the client is invoked with <code>port = 0</code>, it passes the request to a local <code>Handler</code> instance. In every other case, it connects with the server hopefully listening at that port number, and the server passes the request to a <code>Handler</code> instance of the server process.</p>\n\n<p>(This is all strictly 127.0.0.1. The server exists because there is significant shared state between multiple <code>Handler</code> instances, so if all users would send their requests to one server running on the machine, it would be much easier on memory and start-up times. The \"local\", <code>port = 0</code> option exists because that way I can get away with only one client executable for both server-based and local use.)</p>\n\n<p>Anyway. There is <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/overview/networking/iostreams.html\" rel=\"nofollow noreferrer\"><code>boost::asio::ip::tcp::iostream</code></a>, which makes things really easy:</p>\n\n<pre><code>boost::asio::io_service io_service;\n\nboost::asio::ip::tcp::endpoint endpoint( boost::asio::ip::tcp::v4(), port_ );\nboost::asio::ip::tcp::acceptor acceptor( io_service, endpoint );\n\nfor (;;)\n{\n    boost::asio::ip::tcp::iostream stream;\n    boost::system::error_code ec;\n    acceptor.accept( *stream.rdbuf(), ec );\n    if ( ! ec )\n    {\n        Handler( stream, stream ).run(); // &lt;---- This is the \"why\"\n    }\n    else\n    {\n        throw ec.message();\n    }\n    stream.close();\n}\n</code></pre>\n\n<p>You see where this is going. The <code>Handler</code> class takes one input stream and one output stream. Instead of passing <code>tcp::iostream</code>, I could pass <code>std::cin</code> / <code>std::cout</code>, or some <code>std::fstream</code> pointing to a request file and a log file. This works very nicely for me.</p>\n\n<p><strong>The big \"but\"</strong></p>\n\n<p>The problem is that the above code is strictly single-threaded. As the job done by <code>Handler</code> takes <em>significant</em> time (minutes), I need more than one worker thread.</p>\n\n<p>And all the examples and tutorials on \"how to make Boost.Asio multithreaded\" -- e.g. the HTTP examples <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/example/cpp03/http/server2/server.cpp\" rel=\"nofollow noreferrer\">server2</a> (using a pool of individual <code>io_service</code> objects) and <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/example/cpp03/http/server3/server.cpp\" rel=\"nofollow noreferrer\">server3</a> (using several threads each calling <code>io_service::run()</code>) -- are going a completely different way (<code>acceptor::async_accept()</code> working on a <code>tcp::socket</code> object contained in a separate <code>connection</code> object).</p>\n\n<p>Blame it on either my confusion about the overall architecture of Boost.Asio, or a lacking documentation, but I cannot figure out how to combine the two approaches, i.e. have multiple worker threads, each handling its connection as a <code>tcp::iostream</code>. There seems to be no way to retrieve a <code>tcp::socket</code> from <code>tcp::iostream</code>, nor a way to feed one to it, at which point I am a bit stumped.</p>\n"}, {"tags": ["c++", "object", "dynamic-arrays", "static-functions"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1511362279, "post_id": 47437497, "comment_id": 81829558, "body": "When you say object, do you mean <code>class</code>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 5, "creation_date": 1511362363, "post_id": 47437497, "comment_id": 81829632, "body": "<i>&quot;my prof gave me main.cpp&quot;</i>. So sorry about that code :-/"}, {"owner": {"reputation": 11, "user_id": 8990774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c063bdeecf39a8c0e405c108878e14?s=128&d=identicon&r=PG&f=1", "display_name": "NBell", "link": "https://stackoverflow.com/users/8990774/nbell"}, "edited": false, "score": 0, "creation_date": 1511362411, "post_id": 47437497, "comment_id": 81829665, "body": "yes, a .h and .cpp file that make the ToDo class"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1511362675, "post_id": 47437497, "comment_id": 81829861, "body": "Why not just <code>ToDo::highestPriority()</code>? Why does it have to return an object whose sole purpose (it seems) is to return a task, i.e. <code>ToDo::highestPriority()-&gt;getTask()</code>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511362803, "post_id": 47437497, "comment_id": 81829980, "body": "For me you need a <code>static std::vector&lt;ToDo*&gt; instances;</code> and <code>static ToDo* ToDo::highestPriority()</code> would just do a <code>std::max_element</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1511362854, "post_id": 47437497, "comment_id": 81830022, "body": "That <code>getRand</code> function is <i>horrible</i>. Horribly biased depending on the passed in range due to the use of modulo and may overflow depending on the passed in min with nothing guarding against that. Also <code>rand()</code> eeew."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511365699, "post_id": 47437497, "comment_id": 81832227, "body": "<code>delete tasks;</code> should be <code>delete[] tasks;</code>; in fact I fail to find any line of that main which isn&#39;t wrong or wasn&#39;t already obsolete when the spice girls where #1. (edit: found one line: <code>}</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1511363625, "post_id": 47437984, "comment_id": 81830627, "body": "And tell your instructor that <code>std::vector&lt;ToDo&gt;</code> is much easier to use than <code>ToDo**</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1511363775, "post_id": 47437984, "comment_id": 81830743, "body": "In fact there is barely a <i>single line</i> in that <code>main</code> that <i>isn&#39;t</i> a textbook example of &quot;C with inappropriate C++ keywords&quot;"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511363954, "post_id": 47437984, "comment_id": 81830878, "body": "constness can even be fixed in final version."}, {"owner": {"reputation": 11, "user_id": 8990774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c063bdeecf39a8c0e405c108878e14?s=128&d=identicon&r=PG&f=1", "display_name": "NBell", "link": "https://stackoverflow.com/users/8990774/nbell"}, "edited": false, "score": 0, "creation_date": 1511365532, "post_id": 47437984, "comment_id": 81832093, "body": "I&#39;d told my instructor 5 different ways we could do this that would be better and easier but he doesn&#39;t really care."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1511364123, "last_edit_date": 1511364123, "creation_date": 1511363288, "answer_id": 47437984, "question_id": 47437497, "link": "https://stackoverflow.com/questions/47437497/using-a-static-function-in-c-my-prof-wants-me-to-tell-main-which-object-has-th/47437984#47437984", "title": "Using a static function in c++ my prof wants me to tell main which object has the highest priority without passing anything", "body": "<p>You need to define a <code>class Todo</code>, and there is existing usage of it.</p>\n\n<p>Let's start with the minimal implementation that will compile:</p>\n\n<pre><code>class Todo {\npublic:\n    static ToDo * highestPriority() { return nullptr; }\n\n    Todo (int, std::string) {}\n\n    int getPriority() { return {}; }\n    std::string getTask() { return {}; }\n    std::string output(std::string) { return {}; }\n\n    void increasePriority(int) {}\n}\n</code></pre>\n\n<p>Now we need to do something sensible with each of those</p>\n\n<pre><code>class ToDo;\nbool todo_less(ToDo const * lhs, ToDo const * rhs) { return lhs-&gt;getPriority() &lt; rhs-&gt;getPriority(); }\n\nclass ToDo {\n    int priority;\n    std::string task;\n    static std::vector&lt;ToDo*&gt; instances;\npublic:\n    static ToDo * highestPriority() { return *std::max_element(instances.begin(), instances.end(), todo_less); }\n\n    ToDo (int _priority, std::string _task) : priority(_priority), task(_task) { instances.push_back(this); }\n    ~ToDo() { instances.erase(std::find(instances.begin(), instances.end(), this)); }\n\n    int getPriority() const { return priority; }\n    std::string getTask() const { return task; }\n    std::string output(std::string joiner) const { return to_string(priority) + joiner + task; }\n\n    void increasePriority(int inc) { priority += inc; }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8990774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c063bdeecf39a8c0e405c108878e14?s=128&d=identicon&r=PG&f=1", "display_name": "NBell", "link": "https://stackoverflow.com/users/8990774/nbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511364123, "creation_date": 1511361880, "last_edit_date": 1511362965, "question_id": 47437497, "link": "https://stackoverflow.com/questions/47437497/using-a-static-function-in-c-my-prof-wants-me-to-tell-main-which-object-has-th", "title": "Using a static function in c++ my prof wants me to tell main which object has the highest priority without passing anything", "body": "<p>I was given the the following main function and I have to code the object to pass.</p>\n\n<p>Here's main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;ctime&gt;\n#include &lt;stdexcept&gt;\n#include \"ToDo.h\"\nusing namespace std;\n\nint getRand(int min, int range) {\n    return (rand() % range) + min;     \n}\n\n\nconst unsigned int NUM_VERB = 4;\nconst unsigned int NUM_ACTIVITY = 7;\n\nconst string VERB[] = { \"Play\", \"Work on\", \"Practice\",\"Eat\", };\nconst string TARGET[] = { \"homework\", \"dishes\", \"games\", \"guitar\",\"vacuuming\",\"aardvarking\",\"coding\" };\n\nint main()\n{\n    srand(static_cast&lt;unsigned int&gt;(time(NULL))); // seed random number generator\n    int numTask = getRand(3, 3); // number of tasks is 3-&gt;3+3\n    ToDo** tasks = new ToDo*[numTask]; // create array of ToDo pointers, sized with numTask\n\n    // creates new ToDo objects and keeps the pointers in tasks array\n    for (int i = 0; i &lt; numTask; i++) {\n        tasks[i] = new ToDo(getRand(1, 9), VERB[rand() % NUM_VERB] + \" \" + TARGET[rand() % 7]);\n    }\n\n    cout &lt;&lt; \"The tasks are:\\n\" &lt;&lt; \"Priority\\tTask\\n\";\n    // lists the ToDo objects using the output() member\n    for (int i = 0; i &lt; numTask; i++) {\n        cout &lt;&lt; tasks[i]-&gt;output(\"\\t\\t\") &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"\\nYou should work on:\\n\";\n    cout &lt;&lt; \":==&gt; \" &lt;&lt; ToDo::highestPriority()-&gt;getTask() &lt;&lt; endl &lt;&lt; endl;\n\n    unsigned int increaseBy = rand() % 7 + 1;\n    cout &lt;&lt; \"But if i increase the priority of: \" &lt;&lt; tasks[numTask -1]-&gt;getTask() &lt;&lt; \" by \" &lt;&lt; increaseBy &lt;&lt; endl;\n\n    tasks[numTask - 1]-&gt;increasePriority(increaseBy);\n\n    cout &lt;&lt; \"\\nYou should work on:\\n\";\n    cout &lt;&lt; \":==&gt; \" &lt;&lt; ToDo::highestPriority()-&gt;output(\": \") &lt;&lt; endl;\n\n    // make sure all priorities are greator than 0\n    for (int i = 0; i &lt; numTask; i++) {\n        if (tasks[i]-&gt;getPriority() &lt; 1) {\n            throw invalid_argument(\"Invalid Priority Found!\");\n        }\n    }\n\n    // de-allocate memory, pointer null-ing not important as end of progran\n    for (int i = 0; i &lt; numTask; i++) {\n        delete tasks[i];\n    }\n    delete tasks;\n\n\n    getchar();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>I'm confused about <code>ToDo::highestPriority()-&gt;getTask()</code> and <code>ToDo::highestPriority()-&gt;output(\": \")</code> I don't know how I would use those to tell main which position in the array has the highest priority.</p>\n\n<p>My running theory is to use 3 static <code>int</code>s as follows:</p>\n\n<ul>\n<li>to keep track of the number of objects (a counter)</li>\n<li>to keep track of which object has the highest priority (by making it equal counter at the highest priority), and</li>\n<li>to keep track of what number the highest priority is.</li>\n</ul>\n\n<p>I still can't figure out how to tell main which position in the array has the highest priority.</p>\n\n<p>I cannot edit the main function and can only create one object, could anyone help me solve this?</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1511361906, "post_id": 47437404, "comment_id": 81829283, "body": "Implement <code>D::foo()</code> with the body <code>{A::foo();   print(&quot;D&quot;);}</code>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1511361977, "post_id": 47437404, "comment_id": 81829338, "body": "There is no way to do that automatically, but each <code>foo</code> function can call <code>A::foo()</code> if they need to."}, {"owner": {"reputation": 31, "user_id": 7924268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a776e98dc385f1b23248e9d52e413?s=128&d=identicon&r=PG&f=1", "display_name": "shaiel cohen", "link": "https://stackoverflow.com/users/7924268/shaiel-cohen"}, "edited": false, "score": 0, "creation_date": 1511363311, "post_id": 47437404, "comment_id": 81830397, "body": "thx , that&#39;s what i though just wanted to make sure of it."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7924268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a776e98dc385f1b23248e9d52e413?s=128&d=identicon&r=PG&f=1", "display_name": "shaiel cohen", "link": "https://stackoverflow.com/users/7924268/shaiel-cohen"}, "edited": false, "score": 0, "creation_date": 1511363145, "post_id": 47437576, "comment_id": 81830276, "body": "thx for the answear! EDIT: but you missed my point. I will have to do this in EVERY class that inherits A. My question is is there a way to set that for ALL derived classes."}, {"owner": {"reputation": 292, "user_id": 7132156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431a2aee038ef8498c512c0b68e6fa89?s=128&d=identicon&r=PG&f=1", "display_name": "xEric_xD", "link": "https://stackoverflow.com/users/7132156/xeric-xd"}, "reply_to_user": {"reputation": 31, "user_id": 7924268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a776e98dc385f1b23248e9d52e413?s=128&d=identicon&r=PG&f=1", "display_name": "shaiel cohen", "link": "https://stackoverflow.com/users/7924268/shaiel-cohen"}, "edited": false, "score": 0, "creation_date": 1511363257, "post_id": 47437576, "comment_id": 81830351, "body": "There&#39;s no way to do it automatically, you&#39;ll just have to do this for every derived class"}], "tags": [], "owner": {"reputation": 292, "user_id": 7132156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431a2aee038ef8498c512c0b68e6fa89?s=128&d=identicon&r=PG&f=1", "display_name": "xEric_xD", "link": "https://stackoverflow.com/users/7132156/xeric-xd"}, "is_accepted": false, "score": 3, "last_activity_date": 1511362090, "creation_date": 1511362090, "answer_id": 47437576, "question_id": 47437404, "link": "https://stackoverflow.com/questions/47437404/calling-parent-function-on-a-specific-function-call-of-every-child-c/47437576#47437576", "title": "calling parent function on a specific function call of every child C++", "body": "<p>You can call the parent class's implementation of a function using <code>A::foo()</code>.\nIn your case, simply adding that function call will achieve the result you want:</p>\n\n<pre><code>class B:public A\n{\npublic: \n   void foo()\n   {\n      A::foo();\n      print(\"B\");\n   }\n};\n</code></pre>\n\n<p>As a side note, whenever you intend to override functions, you should declare it as <code>virtual</code>:</p>\n\n<pre><code> class A\n{\npublic:\n  virtual void foo()\n  {\n     print('A');\n  }\n};\n</code></pre>\n\n<p>And then when overriding it, use the <code>override</code> keyword:</p>\n\n<pre><code>class B:public A\n{\npublic: \n   void foo() override\n   {\n      print(\"B\");\n   }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7924268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a776e98dc385f1b23248e9d52e413?s=128&d=identicon&r=PG&f=1", "display_name": "shaiel cohen", "link": "https://stackoverflow.com/users/7924268/shaiel-cohen"}, "edited": false, "score": 0, "creation_date": 1511384146, "post_id": 47442023, "comment_id": 81842560, "body": "the only question is does it compile the same way that a virtual function will meaning only compiling the relevant function when it&#39;s called or will this compile as a function within a function"}], "tags": [], "owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "is_accepted": true, "score": 0, "last_activity_date": 1511435490, "last_edit_date": 1511435490, "creation_date": 1511377032, "answer_id": 47442023, "question_id": 47437404, "link": "https://stackoverflow.com/questions/47437404/calling-parent-function-on-a-specific-function-call-of-every-child-c/47442023#47442023", "title": "calling parent function on a specific function call of every child C++", "body": "<p>What you've called a workaround is an established solution to this question, and whilst some people might call it a workaround many wouldn't.</p>\n\n<p>Its even got a name that covers it. The non-virtual interface pattern.</p>\n\n<p>herb sutter :- <a href=\"http://www.gotw.ca/publications/mill18.htm\" rel=\"nofollow noreferrer\">http://www.gotw.ca/publications/mill18.htm</a></p>\n\n<p>One example from S.O., there's probably more:-\n<a href=\"https://stackoverflow.com/questions/6481260/non-virtual-interface-design-pattern-in-c-c\">Non-virtual interface design pattern in C#/C++</a></p>\n\n<p>I'd argue that this IS a way to do it automatically.</p>\n\n<p>As to your aside that its redundant because there are 2 functions - well there were 2 before (the base version and derived version).</p>\n\n<p>One benefit of this approach in some designs is that if the virtual method foo2 is pure virtual (which would make A abstract) then this forces all immediate derived classes to implement foo2. (I say immediate because if B derives from A it must implement foo2 but if C then derives from B C isn't forced to implement foo2, it has access to B::foo2 )</p>\n"}], "owner": {"reputation": 31, "user_id": 7924268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865a776e98dc385f1b23248e9d52e413?s=128&d=identicon&r=PG&f=1", "display_name": "shaiel cohen", "link": "https://stackoverflow.com/users/7924268/shaiel-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 47442023, "answer_count": 2, "score": 0, "last_activity_date": 1511435490, "creation_date": 1511361607, "last_edit_date": 1511364366, "question_id": 47437404, "link": "https://stackoverflow.com/questions/47437404/calling-parent-function-on-a-specific-function-call-of-every-child-c", "title": "calling parent function on a specific function call of every child C++", "body": "<p>So assume there is class A with function foo.<br>\nClass A is the parent of a few classes which all have the function foo.<br>\nAll of the child classes  need the functionality of\n    <code>A::foo</code> and adds upon it.<br>\nFor example:</p>\n\n<pre><code>    class A\n    {\n    public:\n      void foo()\n      {\n         print('A');\n      }\n    };\n\n    class B:public A\n    {\n    public: \n       void foo()\n       {\n          print(\"B\");\n       }\n    };\n    class C:public A\n    {\n    public:\n      void foo()\n        {\n           print(\"C\");\n        }\n    };\n    void main()\n    {\n       B b;\n       C c;\n       c.foo()// now only goes to C::foo(), meaning print C. I want it to to also go into A::foo() meaning print AC\n       b.foo()//now only goes to B::foo(),meaning print B. want it to print AB\n    }\n</code></pre>\n\n<p>And if I want to add <code>class D : A</code> with foo function it will also do <code>A::foo()</code> and then <code>D::foo()</code>    </p>\n\n<p>Sorry if I am missing something obvious.  </p>\n\n<p>EDIT : since it wasn't clear the question was if there is an automatic way to do so.  </p>\n\n<p>EDIT : found a workaround:</p>\n\n<pre><code>    class A\n    {\n    virtual void foo2(){}\n    public:\n      void foo()\n      {\n         print('A');\n         foo2();\n      }\n\n    };\n\n    class B:public A\n    {\n       void foo2()\n       {\n          print(\"B\");\n       }\n    public: \n    };\n    class C:public A\n    {\n              void foo2()\n        {\n           print(\"C\");\n        }\n        public:\n    };\n    void main()\n    {\n       B b;\n       C c;\n       c.foo()// now prints AC\n       b.foo()//now prints AB\n    }\n</code></pre>\n\n<p>seems redundant since now there are 2 functions now.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 1, "creation_date": 1511361807, "post_id": 47437397, "comment_id": 81829219, "body": "inherit the <code>MainWindow</code> instead of <code>QMainWindow</code>, i.e. <code>class TrackWindow : public MainWindow</code> then you can call the <code>function()</code> function"}, {"owner": {"reputation": 139, "user_id": 8482095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7b8a64a2be49f778fa581fa37c2c1466?s=128&d=identicon&r=PG&f=1", "display_name": "Lizard_Paszczyk", "link": "https://stackoverflow.com/users/8482095/lizard-paszczyk"}, "reply_to_user": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511362067, "post_id": 47437397, "comment_id": 81829406, "body": "Problem with inheriting - that what I got after inherit MainWindow instead of QMainWindow: &quot;expected class-name before &#39;{&#39; token&quot; (&quot;{&quot; just under &#39;class TrackWindow : public MainWindow&#39;)"}, {"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511362398, "post_id": 47437397, "comment_id": 81829656, "body": "show your code please"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1511362697, "post_id": 47437397, "comment_id": 81829889, "body": "I believe <code>TrackWindow</code> in your code snippet should have been <code>SecondWindow</code>. I edited it. Is that correct?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1511362788, "post_id": 47437397, "comment_id": 81829967, "body": "Also, your design looks suspect to me. Can you explain why <code>MainWindow</code> needs a pointer to a <code>SecondWindow</code> in the first place?"}, {"owner": {"reputation": 139, "user_id": 8482095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7b8a64a2be49f778fa581fa37c2c1466?s=128&d=identicon&r=PG&f=1", "display_name": "Lizard_Paszczyk", "link": "https://stackoverflow.com/users/8482095/lizard-paszczyk"}, "edited": false, "score": 0, "creation_date": 1511362963, "post_id": 47437397, "comment_id": 81830116, "body": "Here is a bit more code - directly from my project: <a href=\"http://textuploader.com/dq91u\" rel=\"nofollow noreferrer\">textuploader.com/dq91u</a>  . I I didn&#39;t give all my code here on stack, becouse don&#39;t want to make littering."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1511363237, "post_id": 47437397, "comment_id": 81830341, "body": "You don&#39;t need to post full code. You only need to explain in English what it is you&#39;re trying to do. Why does <code>MainWindow</code> need a pointer to a <code>SecondWindow</code>? Because right now, it&#39;s very confusing. There are virtually zero cases where a base class needs a pointer to a derived class, yet you seem to want to make <code>SecondWindow</code> derive from <code>MainWindow</code>."}, {"owner": {"reputation": 139, "user_id": 8482095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7b8a64a2be49f778fa581fa37c2c1466?s=128&d=identicon&r=PG&f=1", "display_name": "Lizard_Paszczyk", "link": "https://stackoverflow.com/users/8482095/lizard-paszczyk"}, "edited": false, "score": 0, "creation_date": 1511363413, "post_id": 47437397, "comment_id": 81830464, "body": "I&#39;m adding it to layout, so I use pointer for it"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 1, "creation_date": 1511363743, "post_id": 47437397, "comment_id": 81830723, "body": "Does <code>function()</code> need to be in <code>MainWindow</code>? Does it access private or protected members?"}, {"owner": {"reputation": 139, "user_id": 8482095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7b8a64a2be49f778fa581fa37c2c1466?s=128&d=identicon&r=PG&f=1", "display_name": "Lizard_Paszczyk", "link": "https://stackoverflow.com/users/8482095/lizard-paszczyk"}, "edited": false, "score": 0, "creation_date": 1511364326, "post_id": 47437397, "comment_id": 81831184, "body": "Probably I could place it in second window, but I was curious about this problem. Thank you for replies. At the moment I think that I have to work hard on this problem."}], "answers": [{"tags": [], "owner": {"reputation": 2119, "user_id": 5879778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ELi77pnET0A/AAAAAAAAAAI/AAAAAAAAAEQ/7gEOlIOZ6ow/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5879778/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1511365035, "last_edit_date": 1511365035, "creation_date": 1511362052, "answer_id": 47437555, "question_id": 47437397, "link": "https://stackoverflow.com/questions/47437397/qt-how-to-transfer-base-class-to-object-created-in-that-class/47437555#47437555", "title": "Qt: How to transfer base class to object created in that class", "body": "<p>You would want to inherit your MainWindow class, which would then inherit QMainWindow()</p>\n\n<p>So in secondwindow.h you would change</p>\n\n<pre><code>class SecondWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    SecondWindow();\n\n};\n</code></pre>\n\n<p>to</p>\n\n<pre><code>#include \"mainwindow.h\"    \nclass SecondWindow : public MainWindow\n{\n    Q_OBJECT\npublic:\n    SecondWindow();\n\n};\n</code></pre>\n\n<p>And you will then be able to use function() in secondwindow.cpp</p>\n\n<p>Also, you have another issue at hand and it's that your mainwindow uses a pointer to second window, but you will then have a circular dependence issue. (You need SecondWindow in order to compile MainWindow, however, you want SecondWindow to be able to use <code>function()</code>). </p>\n\n<p>To resolve this, you need to forward-declare SecondWindow in your MainWindow class.</p>\n\n<p>In mainwindow.h remove <code>#include \"secondwindow.h\"</code> and replace it with <code>class SecondWindow;</code></p>\n"}], "owner": {"reputation": 139, "user_id": 8482095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7b8a64a2be49f778fa581fa37c2c1466?s=128&d=identicon&r=PG&f=1", "display_name": "Lizard_Paszczyk", "link": "https://stackoverflow.com/users/8482095/lizard-paszczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511365035, "creation_date": 1511361580, "last_edit_date": 1511362656, "question_id": 47437397, "link": "https://stackoverflow.com/questions/47437397/qt-how-to-transfer-base-class-to-object-created-in-that-class", "title": "Qt: How to transfer base class to object created in that class", "body": "<p>I've created base class - MainWindow. In this class I create object of another class \"SecondWindow\". By using object of SecondWindow I want to use function() method that is defined in base class. How can I do this?</p>\n\n<p>I've tried to transfer my base class as a parameter to SecondWindow object but that wasn't working (probably becouse in MainWindow I have included \"secondWindow.h\" and in SecondWindow I tried to include \"mainwindow.h\" header files). Is there way to simply use functions/variables of base class?</p>\n\n<p>mainwindow.h</p>\n\n<pre><code>#include&lt;QMainWindow&gt;\n#include \"secondwindow.h\"\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    MainWindow();\n    SecondWindow *secondWindow;\n    void function();\n}\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\nMainWindow::MainWindow()\n{\n    secondWindow = new secondWindow();\n    function();\n}\nvoid MainWindow::function()\n{\n    qDebug()&lt;&lt;\"yes\";\n}\n</code></pre>\n\n<p>secondwindow.h</p>\n\n<pre><code>class SecondWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    SecondWindow();\n\n}\n</code></pre>\n\n<p>secondwindow.cpp</p>\n\n<pre><code>#include \"secondwindow.h\"\n\nSecondWindow::SecondWindow()\n{\n//here I want to use function();\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "padding", "undefined-behavior", "standard-layout"], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511362207, "post_id": 47437418, "comment_id": 81829501, "body": "Isn&#39;t it UB? Do padding bytes have defined value?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1511362253, "post_id": 47437418, "comment_id": 81829536, "body": "No, there is no &quot;mechanism&quot; for UB to manifest itself when reading via <code>unsigned char*</code>."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511362319, "post_id": 47437418, "comment_id": 81829596, "body": "What will happen <code>if (*p==42) { }</code>, if <code>unsigned char *p</code> points to a padding byte? Will the branch taken, or not?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511362489, "post_id": 47437418, "comment_id": 81829728, "body": "@geza: I&#39;ve added the missing final paragraph."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1511362818, "post_id": 47437418, "comment_id": 81829991, "body": "Hmm, I thought that reading from uninitialized memory is UB. Maybe I&#39;m wrong, I&#39;ve never actually checked the standard about this."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511362960, "post_id": 47437418, "comment_id": 81830110, "body": "@geza: Only if you violate alignment requirements, have the potential for trap representations in the receiving type, or if the compiler is able to store the object in a register (which it can&#39;t if an address is taken - I&#39;m careful to point that out)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511363358, "post_id": 47437418, "comment_id": 81830429, "body": "Could implementation defined mean UB here? I mean, can an implementation say for an implementation defined thing that it is actually UB? Because I don&#39;t really see, how an implementation could say, what will happen for this. In my experience, compilers simply ignore padding bytes, don&#39;t initialize them. So a compare on them has undefined result, an implementation won&#39;t tell you, what will happen at <code>*p==42</code>. Where am I wrong? Maybe it&#39;s time for me to look at the standard about this :)"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511364743, "post_id": 47437418, "comment_id": 81831510, "body": "@geza I expect implementations to just read that byte and whatever value happens to be in the memory is what is being used. That doesn&#39;t count as undefined behavior in the sense of the standard. Although I did expect the standard to say UB here also, so who knows."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1511366159, "post_id": 47437418, "comment_id": 81832532, "body": "<i>..., and (iv) the explicit exemption of <code>char</code> types from strict aliasing rules</i> Already using <code>uint8_t</code> instead of <code>char</code> can kill your well-definedness."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1511366257, "post_id": 47437418, "comment_id": 81832611, "body": "@cmaster: I think I&#39;m going to pinch that."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1511367827, "post_id": 47437418, "comment_id": 81833731, "body": "Is <code>std::byte</code> from C++17 also excluded from the strict aliasing rules? Cppreference page on strict aliasing doesn&#39;t mention it <a href=\"http://en.cppreference.com/w/c/language/object#Strict_aliasing\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/object#Strict_aliasing</a>, but the page on <code>reinterpret_cast</code> does <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/reinterpret_cast</a>."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511372745, "post_id": 47437418, "comment_id": 81836838, "body": "I&#39;ve added another answer. I didn&#39;t found that it would be implementation defined. Am I wrong somewhere?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511408383, "post_id": 47437418, "comment_id": 81849587, "body": "Disagree with your final point. Behaviour which depends on unspecified values is unspecified, not implementation-defined."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511426194, "post_id": 47437418, "comment_id": 81856569, "body": "@M.M yes there was a missing step. Fixed."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 9, "last_activity_date": 1511426152, "last_edit_date": 1511426152, "creation_date": 1511361665, "answer_id": 47437418, "question_id": 47437349, "link": "https://stackoverflow.com/questions/47437349/is-it-undefined-behavior-to-read-and-compare-padding-bytes-of-a-pod-type/47437418#47437418", "title": "Is it undefined behavior to read and compare padding bytes of a POD type?", "body": "<p>The behaviour of your program is <em>implementation defined</em> on two counts:</p>\n\n<hr>\n\n<p>1) Prior to C++14: Due to the possibility of a 1's complement or signed magnitude <code>signed</code> type for your <code>char</code>, you <em>might</em> return a surprising result due to comparing +0 and -0.</p>\n\n<p>The truly watertight way would be to use a <code>const unsigned char*</code> pointer. This obviates any concerns with the now abolished (from C++14) 1's complement or signed magnitude <code>char</code>.</p>\n\n<hr>\n\n<p>Since (i) you own the memory, (ii) you are taking a pointer to <code>x</code>, and (iii) an <code>unsigned char</code> cannot contain a trap representation, (iv) <code>char</code>, <code>unsigned char</code>, and <code>signed char</code> being exempted from the <em>strict aliasing rules</em>, the behaviour on using <code>const unsigned char*</code> to read uninitialised memory is perfectly well defined.</p>\n\n<hr>\n\n<p>2) But since you don't know what is contained in that uninitialised memory, the behaviour on reading it is unspecified and that means the program behaviour is implementation defined since the char types cannot contain trap representations.</p>\n"}, {"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 2, "last_activity_date": 1511372565, "creation_date": 1511372565, "answer_id": 47440920, "question_id": 47437349, "link": "https://stackoverflow.com/questions/47437349/is-it-undefined-behavior-to-read-and-compare-padding-bytes-of-a-pod-type/47440920#47440920", "title": "Is it undefined behavior to read and compare padding bytes of a POD type?", "body": "<p>It depends on the conditions.</p>\n\n<p>If <code>x</code> is zero-initialized, then padding has zero bits, so this case is <strong>well defined</strong> (8.5/6 of C++14):</p>\n\n<blockquote>\n  <p>To zero-initialize an object or reference of type T means:</p>\n  \n  <p>\u2014 if T is a scalar type (3.9), the object is initialized to the value\n  obtained by converting the integer literal</p>\n  \n  <p>0 (zero) to T;105</p>\n  \n  <p>\u2014 if T is a (possibly cv-quali\ufb01ed) non-union class type, each\n  non-static data member and each base-class</p>\n  \n  <p>subobject is zero-initialized and <strong>padding is initialized to zero bits</strong>;</p>\n  \n  <p>\u2014 if T is a (possibly cv-quali\ufb01ed) union type, the object\u2019s \ufb01rst\n  non-static named data member is zero-</p>\n  \n  <p>initialized and <strong>padding is initialized to zero bits</strong>;</p>\n  \n  <p>\u2014 if T is an array type, each element is zero-initialized; \u2014 if T is a\n  reference type, no initialization is performed.</p>\n</blockquote>\n\n<p>However, if <code>x</code> is default-initialized, then padding isn't specified, so it has indeterminate value (inferred by the fact that there's no mention of padding here) (8.5/7):</p>\n\n<blockquote>\n  <p>To default-initialize an object of type T means:</p>\n  \n  <p>\u2014 if T is a (possibly cv-quali\ufb01ed) class type (Clause 9), the default\n  constructor (12.1) for T is called (and the initialization is\n  ill-formed if T has no default constructor or overload resolution\n  (13.3) results in an ambiguity or in a function that is deleted or\n  inaccessible from the context of the initialization);</p>\n  \n  <p>\u2014 if T is an array type, each element is default-initialized;</p>\n  \n  <p>\u2014 otherwise, no initialization is performed.</p>\n</blockquote>\n\n<p>And comparing indeterminate values is <strong>UB for this case</strong>, as none of the mentioned exceptions apply, as you compare the indeterminate value to something (8.5/12):</p>\n\n<blockquote>\n  <p>If no initializer is speci\ufb01ed for an object, the object is\n  default-initialized. When storage for an object with automatic or\n  dynamic storage duration is obtained, the object has an indeterminate\n  value, and if no initialization is performed for the object, that\n  object retains an indeterminate value until that value is replaced\n  (5.17). [ Note: Objects with static or thread storage duration are\n  zero-initialized, see 3.6.2. \u2014 end note ] <strong>If an indeterminate value is\n  produced by an evaluation, the behavior is unde\ufb01ned except in the\n  following cases:</strong></p>\n  \n  <p>\u2014 If an indeterminate value of unsigned narrow character type (3.9.1)\n  is produced by the evaluation of:</p>\n  \n  <p>......\u2014 the second or third operand of a conditional expression (5.16),</p>\n  \n  <p>......\u2014 the right operand of a comma expression (5.18),</p>\n  \n  <p>......\u2014 the operand of a cast or conversion to an unsigned narrow character type (4.7, 5.2.3, 5.2.9, 5.4),</p>\n  \n  <p>or</p>\n  \n  <p>......\u2014 a discarded-value expression (Clause 5), then the result of the\n  operation is an indeterminate value.</p>\n  \n  <p>\u2014 If an indeterminate value of unsigned narrow character type is\n  produced by the evaluation of the right operand of a simple assignment\n  operator (5.17) whose \ufb01rst operand is an lvalue of unsigned narrow\n  character type, an indeterminate value replaces the value of the\n  object referred to by the left operand.</p>\n  \n  <p>\u2014 If an indeterminate value of\n  unsigned narrow character type is produced by the evaluation of the\n  initialization expression when initializing an object of unsigned\n  narrow character type, that object is initialized to an indeterminate\n  value.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511408497, "post_id": 47447101, "comment_id": 81849611, "body": "Can you link to some evidence that the compiler treats reading uninitialized padding as <code>unsigned char</code> as UB?  The valgrind report does not necessarily indicate UB, just unspecified behaviour."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1511457943, "post_id": 47447101, "comment_id": 81876107, "body": "@M.M: Consider <code>uint16_t a,b; unsigned char *ap=&amp;a, *bp=&amp;b,t0,t1; ...; t0=bp[0]^1; t1=bp[1]^1; ap[0]=t0^1; ap[1]=t1^1;</code> Both clang and gcc will treat the sequence of <code>unsigned char</code>-based operations as equivalent to <code>a=b;</code> even in cases where the latter would be undefined, and may generate code that leaves <code>a</code> holding a value outside the range 0-65535."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1511476806, "post_id": 47447101, "comment_id": 81882901, "body": "@supercat this question was about padding bytes in structs, so there is no issue such as what value they hold. Your example is substantively different"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511487892, "post_id": 47447101, "comment_id": 81885253, "body": "@M.M: The Standard would imply that using an <code>unsigned char*</code> to read out data from any object should always yield a value 0..CHAR_MAX, even when the value of the object is uninitialized, but gcc and clang don&#39;t uphold that.  If a struct in automatic storage is written, but no special effort is made with regard to padding bytes, I know of nothing that would require that compilers define the behavior of padding bytes more thoroughly than the behavior of anything else in the struct."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1511491309, "post_id": 47447101, "comment_id": 81885939, "body": "@supercat the standard doesn&#39;t say any such thing. Reading objects of indeterminate value produces an indeterminate value, which is UB except for a handful of circumstances , all of which involve either discarding the value or assigning it to another variable which thereby becomes indeterminate also. (This is all in C++14 dcl.init/12)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1511492361, "post_id": 47447101, "comment_id": 81886153, "body": "@M.M: Reading an object via <code>unsigned char*</code> is by my reading one of the exceptions which is explicitly not UB (the fact that one is using a pointer would imply that the object&#39;s address has been taken).  Are you implying that reading via <code>unsigned char*</code> is UB despite the rules that would seem to allow it, or that the behavior is defined in a way that could yield a value outside the range of <code>unsigned char</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1511495345, "post_id": 47447101, "comment_id": 81886735, "body": "@supercat Indeterminate values do not have a range so your comments about &quot;range outside of unsigned char&quot; don&#39;t even start to make sense.  The terminology &quot;reading an object&quot; is not used by dcl.init/12 and I can&#39;t understand what you are trying to ask me sorry. The rules allow producing an indeterminate value via an evaluation  in certain cases only. IDK which cases you are counting as &quot;reading an object&quot;."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1511408122, "last_edit_date": 1511408122, "creation_date": 1511407795, "answer_id": 47447101, "question_id": 47437349, "link": "https://stackoverflow.com/questions/47437349/is-it-undefined-behavior-to-read-and-compare-padding-bytes-of-a-pod-type/47447101#47447101", "title": "Is it undefined behavior to read and compare padding bytes of a POD type?", "body": "<p>Bathsheba's answer correctly describes the letter of the C++ standard.  </p>\n\n<p>The bad news is that all modern compilers I have tested (GCC, Clang, MSVC, and ICC) all ignore the letter of the standard on this point.  They instead treat the bald statement in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">Annex J.2</a> to the C standard</p>\n\n<blockquote>\n  <p>[the behavior is undefined if] the value of an object with automatic storage duration is used while it is indeterminate</p>\n</blockquote>\n\n<p>as if it were 100% normative, in both C and C++, even though Annex J is not normative.  This applies to <em>all</em> possible read accesses to uninitialized storage, including those carefully performed through <code>unsigned char *</code>, and, yes, including read accesses to padding bytes.</p>\n\n<p>Moreover, if you were to file a bug report, I am confident that you would be told that, to the extent the normative text of the standard does not agree with what they are doing, it is the <em>standard</em> that is defective.</p>\n\n<p>The <em>good</em> news is that you will only incur UB upon access to padding bytes if you <em>inspect</em> the contents of the padding bytes.  Copying them around is OK.  In particular, if you initialize all the named fields of a POD structure, it will be safe to copy it around by structure assignment and by <code>memcpy</code>, but it will <em>not</em> be safe to compare it to another such structure using <code>memcmp</code>.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 6, "accepted_answer_id": 47437418, "answer_count": 3, "score": 12, "last_activity_date": 1511426152, "creation_date": 1511361465, "question_id": 47437349, "link": "https://stackoverflow.com/questions/47437349/is-it-undefined-behavior-to-read-and-compare-padding-bytes-of-a-pod-type", "title": "Is it undefined behavior to read and compare padding bytes of a POD type?", "body": "<p>Today I've encountered some code that roughly looks like the following snippet. Both <code>valgrind</code> and <code>UndefinedBehaviorSanitizer</code> detected reads of uninitialized data.</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(const T&amp; x)\n{\n    static_assert(std::is_pod_v&lt;T&gt; &amp;&amp; sizeof(T) &gt; 1);\n    auto p = reinterpret_cast&lt;const char*&gt;(&amp;x);\n\n    std::size_t i = 1; \n    for(; i &lt; sizeof(T); ++i)\n    {\n        if(p[i] != p[0]) { break; }\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>The aforementioned tools complained about the <code>p[i] != p[0]</code> comparison when an \nobject containing padding bytes was passed to <code>foo</code>. Example:</p>\n\n<pre><code>struct obj { char c; int* i; };\nfoo(obj{'b', nullptr});\n</code></pre>\n\n<p><strong>Is it undefined behavior to read padding bytes from a POD type and compare them to something else?</strong> I couldn't find a definitive answer neither in the Standard nor on StackOverflow.</p>\n"}, {"tags": ["c++", "quantlib"], "comments": [{"owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "edited": false, "score": 0, "creation_date": 1511442624, "post_id": 47437330, "comment_id": 81867015, "body": "I believe it is related to the boost I am using I tried 1.49.0 and 1.53.0, is there a particular one for quantlib?"}, {"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511540072, "post_id": 47437330, "comment_id": 81908434, "body": "A more recent Boost is probably better. The code has been tested with the latest.  Anyway: what operating system and compiler are you using? Did you change the .cpp file, or is it the released version?"}, {"owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511816038, "post_id": 47437330, "comment_id": 81995540, "body": "I am using QT creator under Linux, the compiler for c++ is a gcc.  I didn&#39;t change the code, I am using the released version.  So if there is something wrong its either with my installation/boost version, or with how I link the library to the project, for the last one I just added the library as an external one,  and the compiler doesn&#39;t complain, the errors occurs while the run."}, {"owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511817197, "post_id": 47437330, "comment_id": 81996147, "body": "For the installation of the library I followed the indication on the website so: unzip-&gt; cd quantlib_directory-&gt; ./configure  --with-boost-include=BOOST_PATH/include --with-boost-lib=BOOST_PATH/lib/ --prefix=LOCAL_PATH/   -&gt; make -&gt; make install, for the test I took the code from Bond.cpp put it in my &#39;empty&#39; main.cpp"}, {"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511857934, "post_id": 47437330, "comment_id": 82010096, "body": "This is probably not the most convenient place to go back and forth and try to diagnose the problem. I suggest you post on the QuantLib mailing list (you&#39;ll also reach more people there)."}, {"owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511881645, "post_id": 47437330, "comment_id": 82026219, "body": "Thanks I will post it there"}, {"owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1511951476, "post_id": 47437330, "comment_id": 82057684, "body": "I solved the problem I installed quantlib with a relatively new boost version 1.6.0, I had to link my project to the &#39;same&#39; version of boost (1.6.0) too."}], "owner": {"reputation": 1, "user_id": 6536251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e92feb81a70289ce1728c11df08712?s=128&d=identicon&r=PG&f=1", "display_name": "ayoub", "link": "https://stackoverflow.com/users/6536251/ayoub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513323426, "creation_date": 1511361407, "last_edit_date": 1513323426, "question_id": 47437330, "link": "https://stackoverflow.com/questions/47437330/quantlib-callablebond-cpp-in-examples-has-some-one-been-able-to-compile-and-exe", "title": "Quantlib CallableBond.cpp in Examples, has some one been able to compile and execute it?", "body": "<p>I tried to use the Quantlib Example CallableBond.cpp but an error occur while the run with the check_delete first with the nullCalendar in the example, than when I changed the null calendar by a defined one I got another check_delete error with the Handle.</p>\n\n<p>I manage to use the library for some fixed Rate bond example, and it worked fine but when I tried a FixedRateCallableBond bond I got those errors.</p>\n\n<p>has some one worked on that example? Is it a problem with the version? (I am using 1.11) or something wrong that could happened while the installation?</p>\n"}, {"tags": ["c++", "c++11", "stl", "noexcept"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511361332, "post_id": 47437237, "comment_id": 81828862, "body": "<i>&quot;So, I need to specify noexcept for this function&quot;</i> I fail to see the causality. Why not simply use sfinae?"}, {"owner": {"reputation": 233, "user_id": 2695899, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UPoVz.png?s=128&g=1", "display_name": "brightside90", "link": "https://stackoverflow.com/users/2695899/brightside90"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511361428, "post_id": 47437237, "comment_id": 81828941, "body": "@YSC in this certain situation I can&#39;t use SFINAE"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511361931, "post_id": 47437237, "comment_id": 81829301, "body": "This will only work if <code>operator+(T,T)</code> is defined <code>noexcept</code>. What <a href=\"http://coliru.stacked-crooked.com/a/786d48b2253bfce0\" rel=\"nofollow noreferrer\">if it&#39;s not</a>?"}, {"owner": {"reputation": 233, "user_id": 2695899, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UPoVz.png?s=128&g=1", "display_name": "brightside90", "link": "https://stackoverflow.com/users/2695899/brightside90"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511362194, "post_id": 47437237, "comment_id": 81829490, "body": "@YSC this is just my attempt to define this function with such operator+, if you know another way of solving this problem, please write it here"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511362364, "post_id": 47437237, "comment_id": 81829634, "body": "Well, sfinae but you said you could (aren&#39;t allowed?) not."}, {"owner": {"reputation": 233, "user_id": 2695899, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UPoVz.png?s=128&g=1", "display_name": "brightside90", "link": "https://stackoverflow.com/users/2695899/brightside90"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511363511, "post_id": 47437237, "comment_id": 81830548, "body": "@YSC I should solve this task in terms of noexcept, but it will be interesting to see solution with sfinae"}], "answers": [{"tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": true, "score": 4, "last_activity_date": 1511361656, "creation_date": 1511361656, "answer_id": 47437415, "question_id": 47437237, "link": "https://stackoverflow.com/questions/47437237/noexcept-for-different-operations-with-template-type-inside-function/47437415#47437415", "title": "noexcept for different operations with template type inside function", "body": "<p><code>noexcept(foo&lt;int&gt;());</code> is false because <code>std::is_assignable&lt;int, int&gt;::value</code> is false, e.g. you cannot write <code>1 = 1</code>. What you might have wanted to do is to use <code>std::is_assignable&lt;T&amp;, T&gt;</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 0, "last_activity_date": 1511361941, "creation_date": 1511361941, "answer_id": 47437512, "question_id": 47437237, "link": "https://stackoverflow.com/questions/47437237/noexcept-for-different-operations-with-template-type-inside-function/47437512#47437512", "title": "noexcept for different operations with template type inside function", "body": "<p>The problem is with your <code>std::is_assignable&lt;int, int&gt;</code> (which is <code>false</code>). You cannot in general assign to an <code>int</code>, only to an <code>int&amp;</code> (i.e. an l-value reference, which implies the existence of an actual object that you're modifying). Without the reference qualifier, r-values would have to be assignable as well (for example the statement <code>1=1</code> would have to be valid).</p>\n\n<p>So change your <code>T</code> to a <code>T&amp;</code> in the <code>std::is_assignable</code> expression. </p>\n"}, {"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1511363499, "creation_date": 1511363499, "answer_id": 47438057, "question_id": 47437237, "link": "https://stackoverflow.com/questions/47437237/noexcept-for-different-operations-with-template-type-inside-function/47438057#47438057", "title": "noexcept for different operations with template type inside function", "body": "<p>You try to check the existence of a <code>T operator+(T,T)</code> with <code>noexcept()</code>, but this will only detect <code>noexcept operator+</code>. In my opinion, we can do better.</p>\n\n<pre><code>namespace detail\n{\n    template&lt;class&gt;\n    struct sfinae_true : std::true_type{};\n\n    template&lt;class T&gt;\n    static auto can_add(int) -&gt; sfinae_true&lt;decltype(std::declval&lt;T&gt;() + std::declval&lt;T&gt;())&gt;;\n\n    template&lt;class&gt;\n    static auto can_add(long) -&gt; std::false_type;\n}\ntemplate&lt;class T&gt;\nstruct can_add : decltype(detail::can_add&lt;T&gt;(0))\n{};\n</code></pre>\n\n<p>This defines a trait to check if, for a given type <code>T</code>, the expression <code>T{}+T{}</code> bears meaning.</p>\n\n<p>Test cases:</p>\n\n<pre><code>struct s1 {};\ns1 operator+(s1,s1) { return s1{}; }\n\nstruct s2 {};\ns2 operator+(s2 const&amp;, s2 const&amp;) { return s2{}; }\n\nstruct s3 {};\n\n#include &lt;iostream&gt;\nint main()\n{\n    std::cout &lt;&lt; can_add&lt;s1&gt;::value &lt;&lt; \"\\n\"; // true\n    std::cout &lt;&lt; can_add&lt;s2&gt;::value &lt;&lt; \"\\n\"; // true\n    std::cout &lt;&lt; can_add&lt;s3&gt;::value &lt;&lt; \"\\n\"; // false\n}\n</code></pre>\n\n<hr>\n\n<p>You can then define:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct is_foo_compatible : std::conjunction&lt;\n    can_add&lt;T&gt;,\n    std::is_copy_constructible&lt;T&gt;,\n    std::is_assignable&lt;T&amp;, T&gt;\n&gt; {};\n</code></pre>\n\n<p>And It Just Works\u2122.</p>\n"}], "owner": {"reputation": 233, "user_id": 2695899, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/UPoVz.png?s=128&g=1", "display_name": "brightside90", "link": "https://stackoverflow.com/users/2695899/brightside90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 47437415, "answer_count": 3, "score": -1, "last_activity_date": 1511363499, "creation_date": 1511361169, "question_id": 47437237, "link": "https://stackoverflow.com/questions/47437237/noexcept-for-different-operations-with-template-type-inside-function", "title": "noexcept for different operations with template type inside function", "body": "<p>I want to write a template function foo, that do some operations on type T, and inside this function values of type T can be:</p>\n\n<ul>\n<li>copied</li>\n<li>assigned</li>\n<li>summed with operator+</li>\n</ul>\n\n<p>So, I need to specify noexcept for this function with restrictions I've mentioned above.</p>\n\n<p>Here is my code, but it isn't work properly:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid foo() \n    noexcept(noexcept(std::declval&lt;T&gt;() + std::declval&lt;T&gt;()) &amp;&amp; std::is_copy_constructible&lt;T&gt;::value &amp;&amp; std::is_assignable&lt;T, T&gt;::value)\n{}\n\nbool b1 = noexcept(foo&lt;int&gt;()); // false, but should return true\nbool b2 = noexcept(foo&lt;std::string&gt;()); // false\n</code></pre>\n\n<p>What should I do, to make it work right?</p>\n"}, {"tags": ["c++", "visual-studio-2012", "visual-studio-2017", "remote-debugging"], "comments": [{"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1511362322, "post_id": 47437219, "comment_id": 81829600, "body": "If there is version mismatch the debugging monitor will not show any message. You may also check if port numbers on both sides are the same. Nevertheless it should not be hard to find the &quot;Remote debugger&quot; directory in the VS 2017 repository and copy it to the remote machine."}], "answers": [{"tags": [], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "is_accepted": true, "score": 0, "last_activity_date": 1511366589, "creation_date": 1511366589, "answer_id": 47439090, "question_id": 47437219, "link": "https://stackoverflow.com/questions/47437219/how-to-setup-remote-debugging/47439090#47439090", "title": "How to setup remote debugging", "body": "<p>As mentioned by Jszpilewski, simply copying the \"Remote Debugger\" directory to the remote machine and launching msvsmon.exe from there is the start of the answer.</p>\n\n<p>Following point: once the remote debugger is started, it says something like \"Msvsmon started a new server named <code>'&lt;Machine_Name:Port&gt;'</code>.</p>\n\n<p>On the local machine you just need to copy/paste this into the \"Connection Target\" box => Don't try to use the \"Find\" button, it's a waste of time.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 47439090, "answer_count": 1, "score": 0, "last_activity_date": 1511366589, "creation_date": 1511361112, "question_id": 47437219, "link": "https://stackoverflow.com/questions/47437219/how-to-setup-remote-debugging", "title": "How to setup remote debugging", "body": "<p>I'm working with Visual Studio 2017. On a remote machine, there is Visual Studio 2012. There I start up msvsmon.exe as administrator, and in the \"Tools\" menu, I set \"No authentication\", \"Allow any user to debug\" (in order to be really sure that I'm not blocked because of permission issues).</p>\n\n<p>On my local PC, I try to setup a debugging session, as follows:</p>\n\n<ul>\n<li>Connection Type:   Remote (no authentication)</li>\n<li>Connection Target: Find => MachineName: \"&lt;_remote_machine>\"</li>\n</ul>\n\n<p>A <code>ping</code> request to \"&lt;_remote_machine>\" is successful.</p>\n\n<p>However now connections are found, and in the msvsmon.exe debugging monitor, no messages are seen.</p>\n\n<p>What can cause this and how can I solve it?</p>\n\n<p>P.s. I know that there might be mismatches between the 2012 and 2017 versions, but in that case I expect an error message to be shown in the debugging monitor, but as I said there is nothing there.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1732, "user_id": 2062965, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6cc71dae7c2d7e685c4818b2624621a1?s=128&d=identicon&r=PG&f=1", "display_name": "strpeter", "link": "https://stackoverflow.com/users/2062965/strpeter"}, "edited": false, "score": 0, "creation_date": 1511370451, "post_id": 47436995, "comment_id": 81835516, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18597850/c-using-space-as-a-delimiter\">C++ &#39;Using space as a delimiter&#39;</a>"}, {"owner": {"reputation": 1732, "user_id": 2062965, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6cc71dae7c2d7e685c4818b2624621a1?s=128&d=identicon&r=PG&f=1", "display_name": "strpeter", "link": "https://stackoverflow.com/users/2062965/strpeter"}, "edited": false, "score": 0, "creation_date": 1511370485, "post_id": 47436995, "comment_id": 81835533, "body": "The only thing you have to do is replacing the space by a comma!"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1732, "user_id": 2062965, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6cc71dae7c2d7e685c4818b2624621a1?s=128&d=identicon&r=PG&f=1", "display_name": "strpeter", "link": "https://stackoverflow.com/users/2062965/strpeter"}, "edited": false, "score": 0, "creation_date": 1511458729, "post_id": 47436995, "comment_id": 81876462, "body": "@strpeter : The duplicate you suggest would turn (in python notation) <code>&#39;a &quot;b c&quot;&#39;</code> into <code>[&#39;a&#39;, &#39;&quot;b&#39;, &#39;c&quot;&#39;]</code>, the OP wants <code>[&#39;a&#39;, &#39;&quot;b c&quot;&#39;]</code>"}, {"owner": {"reputation": 1732, "user_id": 2062965, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6cc71dae7c2d7e685c4818b2624621a1?s=128&d=identicon&r=PG&f=1", "display_name": "strpeter", "link": "https://stackoverflow.com/users/2062965/strpeter"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511962738, "post_id": 47436995, "comment_id": 82064965, "body": "@MartinBonner: I understood the question the other way round."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8972153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wkZy1LU_Z0E/AAAAAAAAAAI/AAAAAAAAABY/9_vY7zoeq_Y/photo.jpg?sz=128", "display_name": "Tentacle Slinger", "link": "https://stackoverflow.com/users/8972153/tentacle-slinger"}, "edited": false, "score": 0, "creation_date": 1511360840, "post_id": 47437089, "comment_id": 81828485, "body": "oh i see. is there another way to do it the actual text im working with isnt as nice looking"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1, "user_id": 8972153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wkZy1LU_Z0E/AAAAAAAAAAI/AAAAAAAAABY/9_vY7zoeq_Y/photo.jpg?sz=128", "display_name": "Tentacle Slinger", "link": "https://stackoverflow.com/users/8972153/tentacle-slinger"}, "edited": false, "score": 0, "creation_date": 1511360891, "post_id": 47437089, "comment_id": 81828527, "body": "@TentacleSlinger: Did you read this answer with sufficient care?"}, {"owner": {"reputation": 1, "user_id": 8972153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wkZy1LU_Z0E/AAAAAAAAAAI/AAAAAAAAABY/9_vY7zoeq_Y/photo.jpg?sz=128", "display_name": "Tentacle Slinger", "link": "https://stackoverflow.com/users/8972153/tentacle-slinger"}, "edited": false, "score": 0, "creation_date": 1511360930, "post_id": 47437089, "comment_id": 81828554, "body": "i didnt i redid my question :/ sorry"}, {"owner": {"reputation": 29, "user_id": 8987616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a39ff37c3d6bc914200c3d8e59564a?s=128&d=identicon&r=PG&f=1", "display_name": "typeid", "link": "https://stackoverflow.com/users/8987616/typeid"}, "edited": false, "score": 0, "creation_date": 1511360983, "post_id": 47437089, "comment_id": 81828604, "body": "If you add a space after the comma &quot;, &quot; will filter out numbers like &#39;2,000&#39;, as there is no space between the comma and the 0."}, {"owner": {"reputation": 1, "user_id": 8972153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wkZy1LU_Z0E/AAAAAAAAAAI/AAAAAAAAABY/9_vY7zoeq_Y/photo.jpg?sz=128", "display_name": "Tentacle Slinger", "link": "https://stackoverflow.com/users/8972153/tentacle-slinger"}, "edited": false, "score": 0, "creation_date": 1511361083, "post_id": 47437089, "comment_id": 81828674, "body": "&quot;Billing Office/Provider : doctor place P.SC., office location  &quot;,&quot;Provider : Name, LAstname&quot;,Classification : No Classification,99215,OFFICE OUTPATIENT VISIT 4,Private,1,1,0,&quot;1,060&quot;,0,0"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1511361227, "post_id": 47437089, "comment_id": 81828789, "body": "Unfortunately <code>getline</code> only allows single character delimiters."}], "tags": [], "owner": {"reputation": 29, "user_id": 8987616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47a39ff37c3d6bc914200c3d8e59564a?s=128&d=identicon&r=PG&f=1", "display_name": "typeid", "link": "https://stackoverflow.com/users/8987616/typeid"}, "is_accepted": false, "score": 2, "last_activity_date": 1511361403, "last_edit_date": 1511361403, "creation_date": 1511360718, "answer_id": 47437089, "question_id": 47436995, "link": "https://stackoverflow.com/questions/47436995/how-to-process-txt-with-comma-delimiter-that-also-has-comma-as-the-thousands-sep/47437089#47437089", "title": "How to process txt with comma delimiter that also has comma as the thousands separator?", "body": "<p>You could use the sequence <code>\", \"</code> as delimiter. By adding the space after the comma you filter out the second part of numbers. </p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 8945252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd86e72a7d12c9b1a15e47da7e864bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Light", "link": "https://stackoverflow.com/users/8945252/light"}, "is_accepted": false, "score": 0, "last_activity_date": 1511361228, "creation_date": 1511361228, "answer_id": 47437256, "question_id": 47436995, "link": "https://stackoverflow.com/questions/47436995/how-to-process-txt-with-comma-delimiter-that-also-has-comma-as-the-thousands-sep/47437256#47437256", "title": "How to process txt with comma delimiter that also has comma as the thousands separator?", "body": "<p>You could use \",\" as delimiter and do a second pass where you will merge string containing digit (using std::isdigit per example).</p>\n"}], "owner": {"reputation": 1, "user_id": 8972153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wkZy1LU_Z0E/AAAAAAAAAAI/AAAAAAAAABY/9_vY7zoeq_Y/photo.jpg?sz=128", "display_name": "Tentacle Slinger", "link": "https://stackoverflow.com/users/8972153/tentacle-slinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511364546, "creation_date": 1511360449, "last_edit_date": 1511364546, "question_id": 47436995, "link": "https://stackoverflow.com/questions/47436995/how-to-process-txt-with-comma-delimiter-that-also-has-comma-as-the-thousands-sep", "title": "How to process txt with comma delimiter that also has comma as the thousands separator?", "body": "<p>Example of text:  </p>\n\n<blockquote>\n  <p>OUTPATIENT VISIT 4,Private,1,1,0,60,0,0<br>\n  OUTPATIENT VISIT 4,Private,1,1,0,\"1,260\",0,0 </p>\n</blockquote>\n\n<p>At the moment I'm just separating the string like so:  </p>\n\n<pre><code>std::stringstream ss(checkLine);\n\n        getline(ss, something, ',');\n        getline(ss, somethingElse, ',');\n        getline(ss, somethingElse1, ',');\n        getline(ss, somethingElse2, ','); \n        getline(ss, somethingElse3, ','); \n        getline(ss, somethingElse4, ','); \n        getline(ss, somethingElse5, ','); \n        getline(ss, somethingElse6, ',');   \n</code></pre>\n\n<p>The way I'm doing it works for the first line of text but when it comes to the second line is goes to crap. There are a ton more lines its not only 2</p>\n\n<p>I need to store each parsed section of the string onto its own string. How do I use the commas as delimiter and also deal with numbers using comma as a thousands separator? </p>\n"}, {"tags": ["c++", "stl", "pass-by-reference"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1511360297, "post_id": 47436919, "comment_id": 81828104, "body": "You should not care too much about the performance of unoptimized code. First use the flag <code>-O3</code>, then decide if the performance is good enough and if it isn&#39;t use a profiler to figure out what needs improving."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1511360317, "post_id": 47436919, "comment_id": 81828121, "body": "Without <code>std::ref</code> your argument is copied, regardless of what your function expects."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511360377, "post_id": 47436919, "comment_id": 81828167, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14851163/why-does-stdasync-copy-its-const-arguments\">Why does std::async copy its const &amp; arguments?</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1511360476, "post_id": 47436919, "comment_id": 81828231, "body": "I&#39;ve retracted my duplicate vote because I realize that the question isn&#39;t an exact duplicate. It doesn&#39;t answer why by-value appears faster than by-const-reference."}, {"owner": {"reputation": 3401, "user_id": 1134387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c36029f02494282a4bb455f584b522e6?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/1134387/bernhard"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511360647, "post_id": 47436919, "comment_id": 81828354, "body": "@nwp If I add the <code>-O3</code> flag, I obtain more or less the same differences."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1511360926, "post_id": 47436919, "comment_id": 81828549, "body": "Can we get some hard numbers on &quot;slow&quot; and &quot;fast&quot;? Perhaps some statistical significance?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1511366870, "post_id": 47436919, "comment_id": 81833059, "body": "There are no measurements in the code. What and how do you measure?"}, {"owner": {"reputation": 3401, "user_id": 1134387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c36029f02494282a4bb455f584b522e6?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/1134387/bernhard"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1511506057, "post_id": 47436919, "comment_id": 81889772, "body": "@AndyG I now added the timing details. I already got a useful answer, but perhaps you find this interesting."}], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 0, "last_activity_date": 1511362174, "creation_date": 1511362174, "answer_id": 47437606, "question_id": 47436919, "link": "https://stackoverflow.com/questions/47436919/why-is-passing-by-const-ref-slower-when-using-stdasync/47437606#47437606", "title": "Why is passing by const ref slower when using std::async", "body": "<p>As people said, without std::ref the object is being copied.</p>\n\n<p>Now I believe that the reason that passing by value is actually faster might have something to do with the following question: <a href=\"https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference\">Is it better in C++ to pass by value or pass by constant reference?</a></p>\n\n<p>What might happen, that in the internal implementation of async, the vector being copied once to the new thread. And then internally being passed by reference, to a function which take ownership of the vector, which mean it will than be copied once again. On the other hand, if you pass it by value, it will copy it once to the new thread, but than will move it twice inside the new thread. Resulting in 2 copies if the object is being passed by reference, and 1 copy and 2 move in the second case if the object is passed by value.</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 6, "last_activity_date": 1511436782, "last_edit_date": 1592644375, "creation_date": 1511429432, "answer_id": 47451933, "question_id": 47436919, "link": "https://stackoverflow.com/questions/47436919/why-is-passing-by-const-ref-slower-when-using-stdasync/47451933#47451933", "title": "Why is passing by const ref slower when using std::async", "body": "<h3>The short story</h3>\n<p>given a <em>copy and move-constructible</em> type T</p>\n<pre><code>V f(T);\nV g(T const&amp;);\n\nT t;\nauto v = std::async(f,t).get();\nauto v = std::async(g,t).get();\n</code></pre>\n<p>the only relevant difference concerning the two async calls is that, in the first one, t's copy is destroyed as soon as f returns; in the second, t's copy <em>may</em> be destroyed as per effect of the get() call.\nIf the async calls happen in a loop with the future being <em>get()</em> later, the first will have constant memory on avarage (assuming a constant per-thread workload), the second a linearly growing memory at worst, resulting in more cache hits and worse allocation performance.</p>\n<h3>The long story</h3>\n<p>First of all, I can reproduce the observed slowdown (consistently ~2x in my system) on both gcc and clang; moreover, the same code with equivalent <code>std::thread</code> invocations does <em>not</em> manifest the same behavior, with the const&amp; version turning out slightly faster as expected. Let's see why.</p>\n<p>Firstly, the specification of async reads:</p>\n<blockquote>\n<p><strong>[futures.async]</strong> If launch::async is set in policy, calls INVOKE(DECAY_COPY(std::forward(f)), DECAY_COPY(std::forward(args))...) (23.14.3, 33.3.2.2) as if in a new thread of execution represented by a thread object with the calls to DECAY_COPY() being evaluated in the thread that called async[...]<strong>The thread object is stored in the shared state and affects the behavior of any asynchronous return objects that reference that state.</strong></p>\n</blockquote>\n<p>so, async will copy the arguments forwarding those copies to the callable, preserving rvalueness; in this regard, it's the same as of <code>std::thread</code> constructor, and there's no difference in the two OP versions, both copy the vector.</p>\n<p><strong>The difference is in the bold part</strong>: the thread object is part of the shared state and will not be freed until the latter gets released (eg. by a future::get() call).</p>\n<p><strong>Why is this important ?</strong> because the standard does not specify to who the decayed copies are bound, we only know that they must outlive the callable invocation, but we don't know if they will be destroyed immediately after the call or at thread exit or when the thread object is destroyed (along with the shared state).</p>\n<p>In fact, it turns out that gcc and clang implementations store the decayed copies in the shared state of the resulting future.</p>\n<p>Consequently, in the <em>const&amp;</em> version the vector copy is stored in the shared state and destroyed at <code>future::get</code>: <strong>this results in the &quot;Start threads&quot; loop allocating a new vector at each step, with a linear growth of memory</strong>.</p>\n<p>Conversely, in the <em>by-value</em> version the vector copy is moved in the callable argument and destroyed as soon as the callable returns; at <code>future::get</code>, a moved, empty vector will be destroyed. So, if the callable is fast enough to destroy the vector before a new one is created, <strong>the same vector will be allocated over and over and memory will stay almost constant. This will result in less cache hits and faster allocations, explaining the improved timings.</strong></p>\n"}], "owner": {"reputation": 3401, "user_id": 1134387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c36029f02494282a4bb455f584b522e6?s=128&d=identicon&r=PG", "display_name": "Bernhard", "link": "https://stackoverflow.com/users/1134387/bernhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 2, "accepted_answer_id": 47451933, "answer_count": 2, "score": 13, "last_activity_date": 1511505940, "creation_date": 1511360169, "last_edit_date": 1592644375, "question_id": 47436919, "link": "https://stackoverflow.com/questions/47436919/why-is-passing-by-const-ref-slower-when-using-stdasync", "title": "Why is passing by const ref slower when using std::async", "body": "<p>As an exercise to learn about <code>std::async</code> I wrote a small program that calculates the sum of a large <code>vector&lt;int&gt;</code>, distributed about a lot of threads.</p>\n<p>My code below is as follows</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;future&gt;\n#include &lt;chrono&gt;\n\ntypedef unsigned long long int myint;\n\n// Calculate sum of part of the elements in a vector\nmyint partialSum(const std::vector&lt;myint&gt;&amp; v, int start, int end)\n{\n    myint sum(0);\n    for(int i=start; i&lt;=end; ++i)\n    {\n        sum += v[i];\n    }\n    return sum;\n}\n\nint main()\n{\n    const int nThreads = 100;\n    const int sizePerThread = 100000;\n    const int vectorSize = nThreads * sizePerThread;\n    \n    std::vector&lt;myint&gt; v(vectorSize);   \n    std::vector&lt;std::future&lt;myint&gt;&gt; partial(nThreads);\n    myint tot = 0;\n    \n    // Fill vector  \n    for(int i=0; i&lt;vectorSize; ++i)\n    {\n        v[i] = i+1;\n    }\n    std::chrono::steady_clock::time_point startTime = std::chrono::steady_clock::now();\n    \n    // Start threads\n    for( int t=0; t &lt; nThreads; ++t)\n    {\n        partial[t] = std::async( std::launch::async, partialSum, v, t*sizePerThread, (t+1)*sizePerThread -1);               \n    }\n    \n    // Sum total\n    for( int t=0; t &lt; nThreads; ++t)\n    {\n        myint ps = partial[t].get();\n        std::cout &lt;&lt; t &lt;&lt; &quot;:\\t&quot; &lt;&lt; ps &lt;&lt; std::endl;\n        tot += ps;\n    }\n    std::cout &lt;&lt; &quot;Sum:\\t&quot; &lt;&lt; tot &lt;&lt; std::endl;\n    \n    std::chrono::steady_clock::time_point endTime = std::chrono::steady_clock::now();\n    std::cout &lt;&lt; &quot;Time difference = &quot; &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(endTime - startTime).count() &lt;&lt;std::endl;\n}\n</code></pre>\n<p>My question is concerned about the calls to the function <code>partialSum</code>, and then especially how the large vector is passed. The function is called as follows:</p>\n<pre><code>        partial[t] = std::async( std::launch::async, partialSum, v, t*sizePerThread, (t+1)*sizePerThread -1);       \n</code></pre>\n<p>with the definition as follows</p>\n<pre><code>myint partialSum(const std::vector&lt;myint&gt;&amp; v, int start, int end)\n</code></pre>\n<p>With this approach, the calculation is relatively slow. If I use <code>std::ref(v)</code> in the <code>std::async</code> function call, my function is a lot quicker and more efficient. This still makes sense to me.</p>\n<p>However, if I still call by <code>v</code>, instead of <code>std::ref(v)</code>, but replace the function with</p>\n<pre><code>myint partialSum(std::vector&lt;myint&gt; v, int start, int end)\n</code></pre>\n<p>the program also runs a lot quicker (and uses less memory). I don't understand why the const ref implementation is slower. How does the compiler fix this without any references in place?</p>\n<p>With the const ref implementation this program typically takes 6.2 seconds to run, without 3.0. (Note that with const ref, and <code>std::ref</code> it runs in 0.2 seconds for me)</p>\n<p>I am compiling with <code>g++ -Wall -pedantic</code> using (adding the <code>-O3</code> when passing just <code>v</code> demonstrates the same effect)</p>\n<blockquote>\n<p>g++ --version</p>\n<p>g++ (Rev1, Built by MSYS2 project) 6.3.0\nCopyright (C) 2016 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n</blockquote>\n"}, {"tags": ["c++", "render", "vtk", "projection", "contour"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 8988595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2717b16ac116944ac4430cdcfdcae58?s=128&d=identicon&r=PG&f=1", "display_name": "ita", "link": "https://stackoverflow.com/users/8988595/ita"}, "is_accepted": true, "score": 1, "last_activity_date": 1511365787, "creation_date": 1511365787, "answer_id": 47438835, "question_id": 47436669, "link": "https://stackoverflow.com/questions/47436669/vtk-c-update-contour-from-contourfilter/47438835#47438835", "title": "vtk c++ update contour from contourfilter", "body": "<p>Just found the answer.</p>\n\n<p>As mentioned in the warning in the detailed description of the <code>vtkWindowToImageFilter</code> class reference webpage (<a href=\"https://www.vtk.org/doc/nightly/html/classvtkWindowToImageFilter.html\" rel=\"nofollow noreferrer\">https://www.vtk.org/doc/nightly/html/classvtkWindowToImageFilter.html</a>), <code>vtkWindows</code> generally do not rerender unless you call their <code>Modified()</code> function. Now my projected views are updated like I wanted.</p>\n\n<p>So I changed</p>\n\n<pre><code>// Get the image and apply a contourfilter\nwindowToImageFilter-&gt;SetInput(renderWindow);\nwindowToImageFilter-&gt;Update();\n</code></pre>\n\n<p>to</p>\n\n<pre><code>// Get the image and apply a contourfilter\nwindowToImageFilter-&gt;Modified();\nwindowToImageFilter-&gt;SetInput(renderWindow);\nwindowToImageFilter-&gt;Update();\n</code></pre>\n\n<p>See here the warning text in case the link above ever stops working:</p>\n\n<blockquote>\n  <p>Warning:\n      A vtkWindow doesn't behave like other parts of the VTK pipeline: its modification time doesn't get updated when an image is rendered. As a result, naive use of vtkWindowToImageFilter will produce an image of the first image that the window rendered, but which is never updated on subsequent window updates. This behavior is unexpected and in general undesirable.\n      To force an update of the output image, call vtkWindowToImageFilter's Modified method after rendering to the window.\n      In VTK versions 4 and later, this filter is part of the canonical way to output an image of a window to a file (replacing the obsolete SaveImageAsPPM method for vtkRenderWindows that existed in 3.2 and earlier). Connect this filter to the output of the window, and filter's output to a writer such as vtkPNGWriter.\n      Reading back alpha planes is dependent on the correct operation of the render window's GetRGBACharPixelData method, which in turn is dependent on the configuration of the window's alpha planes. As of VTK 4.4+, machine-independent behavior is not automatically assured because of these dependencies.</p>\n</blockquote>\n"}], "owner": {"reputation": 85, "user_id": 8988595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2717b16ac116944ac4430cdcfdcae58?s=128&d=identicon&r=PG&f=1", "display_name": "ita", "link": "https://stackoverflow.com/users/8988595/ita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 1, "accepted_answer_id": 47438835, "answer_count": 1, "score": 1, "last_activity_date": 1511365787, "creation_date": 1511359423, "question_id": 47436669, "link": "https://stackoverflow.com/questions/47436669/vtk-c-update-contour-from-contourfilter", "title": "vtk c++ update contour from contourfilter", "body": "<p>I have a 3D .vtk model that I render and I extract the contour from the resulting image using a <code>vtkContourFilter</code> (using vtk version 7.0.0 on Ubuntu 16.04).</p>\n\n<p>I would like to project it from different perspectives, but as I loop over the different camera positions (I checked that the camera positions are indeed changed) the interactive viewer that launches with each iteration always shows the contour from the first image.</p>\n\n<p>When I output the first few coordinates of the found contour points (which I store as a <code>vtkPolyData</code>) I also noticed that the content in my set of contour points does not change.</p>\n\n<p>I have tried some online suggestions that worked for others, such as adding:</p>\n\n<pre><code>ContFilter-&gt;Modified();\nContFilter-&gt;Update();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>polyData-&gt;Modified(); // This is the 3D vtkPolyData that I project\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ContFilter-&gt;SetValue(0, 10);\nContFilter-&gt;SetValue(0, 255);\n</code></pre>\n\n<p>As a wild guess I also tried adding:</p>\n\n<pre><code>polyData-&gt;Modified();\n\n// Remove old links\nrenderWindow-&gt;RemoveRenderer(renderer);\nmapper-&gt;RemoveAllInputs();\n\n\n// Set new links\nrenderer-&gt;SetActiveCamera(camera);\nrenderWindow-&gt;AddRenderer(renderer);\nrenderer-&gt;Modified();\nrenderer-&gt;ResetCameraClippingRange();\n\nrenderWindow-&gt;Modified();\n\nmapper-&gt;SetInputData(polyData);\nrenderWindow-&gt;Render();\n</code></pre>\n\n<p>within the for loop, before using the ContourFilter, but it still does not update. With that I tried everything I could think of and find online.</p>\n\n<p>This is the relevant code:</p>\n\n<pre><code>   // Prepare the rendering environment to project the 3D model to an image from different perspectives\n   vtkSmartPointer&lt;vtkDataSetMapper&gt; mapper = vtkSmartPointer&lt;vtkDataSetMapper&gt;::New();\n   mapper-&gt;SetInputData(polyData);\n   mapper-&gt;ScalarVisibilityOff();\n\n   vtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n   actor-&gt;SetMapper(mapper);\n   actor-&gt;GetProperty()-&gt;SetInterpolationToFlat();\n\n   vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n   renderer-&gt;SetBackground(1,1,1);\n   renderer-&gt;AddActor(actor);\n\n   vtkSmartPointer&lt;vtkCamera&gt; camera = vtkSmartPointer&lt;vtkCamera&gt;::New();\n   vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::New();\n   renderWindow-&gt;SetOffScreenRendering(1);\n   vtkSmartPointer&lt;vtkWindowToImageFilter&gt; windowToImageFilter = vtkSmartPointer&lt;vtkWindowToImageFilter&gt;::New();\n   vtkSmartPointer&lt;vtkContourFilter&gt; ContFilter = vtkSmartPointer&lt;vtkContourFilter&gt;::New();\n   vtkSmartPointer&lt;vtkPolyData&gt; contour = vtkSmartPointer&lt;vtkPolyData&gt;::New();\n\n   // Loop over the camera positions. At each iteration render/project, \n   // extract the contour and finally render the 3D model and the found \n   // contour\n   double * iPoint;\n   double * camPos;\n   double * contourStart;\n   int nContours;\n   for(int i=0; i&lt;positions-&gt;GetNumberOfPoints(); i++){\n      // Print the camera position\n      iPoint = positions-&gt;GetPoint(i);\n      std::cout &lt;&lt; iPoint[0] &lt;&lt; \" \" &lt;&lt; iPoint[1] &lt;&lt; \" \" &lt;&lt; iPoint[2] &lt;&lt; std::endl;\n\n      //Move camera\n      camera-&gt;SetPosition(iPoint[0], iPoint[1], iPoint[2]);\n      camera-&gt;SetFocalPoint(focalPointOrig[0], focalPointOrig[1], focalPointOrig[2]);\n      camera-&gt;SetViewAngle(viewAngle);\n      camera-&gt;Modified();\n      camera-&gt;SetRoll(90);\n\n      // Does this help to update the view?\n      polyData-&gt;Modified();\n\n      // Remove old links and set them again\n      renderWindow-&gt;RemoveRenderer(renderer);\n      mapper-&gt;RemoveAllInputs();\n      renderer-&gt;SetActiveCamera(camera);\n      renderWindow-&gt;AddRenderer(renderer);\n      renderer-&gt;Modified();\n      renderer-&gt;ResetCameraClippingRange();\n      renderWindow-&gt;Modified();\n\n      // Render/project the data\n      mapper-&gt;SetInputData(polyData);\n      renderWindow-&gt;Render();\n\n      // Print camera position for debugging\n      camera-&gt;GetPosition(camPos);\n      std::cout &lt;&lt; camPos[0] &lt;&lt; \" \" &lt;&lt; camPos[1] &lt;&lt; \" \" &lt;&lt; camPos[2] &lt;&lt; std::endl;\n\n      // Get the image and apply a contourfilter\n      windowToImageFilter-&gt;SetInput(renderWindow);\n      windowToImageFilter-&gt;Update();\n      ContFilter-&gt;SetInputConnection(windowToImageFilter-&gt;GetOutputPort());\n\n      // Saw someone do this as a workaround for updating the view\n      ContFilter-&gt;SetValue(0, 10);\n      ContFilter-&gt;SetValue(0, 255);\n\n      // Does this help to update the view?\n      ContFilter-&gt;Modified();\n\n      //Get the contour from the contourfilter\n      ContFilter-&gt;Update();\n      contour = ContFilter-&gt;GetOutput();\n\n      // Print the first points coordinates to see if they changed\n      contourStart = contour-&gt;GetPoint(1);\n      std::cout &lt;&lt; contourStart[0] &lt;&lt; \" \" &lt;&lt; contourStart[1] &lt;&lt; \" \" &lt;&lt; std::endl;\n\n      // Print the number of contours to see if it may be stored as an additional contour\n      nContours = ContFilter-&gt;GetNumberOfContours();\n      std::cout &lt;&lt; nContours &lt;&lt; std::endl;\n\n\n      // Render the 3D model and the found contour\n      actor-&gt;GetProperty()-&gt;SetColor(0.9,0.9,0.8);\n\n      // Create a mapper and actor of the silhouette\n      vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper_contour = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\n      mapper_contour-&gt;SetInputData(contour);\n\n      // Try this again here\n      polyData-&gt;Modified();\n\n      vtkSmartPointer&lt;vtkActor&gt; actor_contour = vtkSmartPointer&lt;vtkActor&gt;::New();\n      actor_contour-&gt;SetMapper(mapper_contour);\n      actor_contour-&gt;GetProperty()-&gt;SetLineWidth(2.);\n\n      // 2 renderers and a render window\n      vtkSmartPointer&lt;vtkRenderer&gt; renderer1 = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n      renderer1-&gt;AddActor(actor);\n      vtkSmartPointer&lt;vtkRenderer&gt; renderer2 = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n      renderer2-&gt;AddActor(actor_contour);\n\n      // Set the 3D model renderer to the same perspective but don't change the camera perspective of the contour\n      renderer1-&gt;SetActiveCamera(camera);\n\n      // Setup the window\n      vtkSmartPointer&lt;vtkRenderWindow&gt; renderwindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::New();\n      renderwindow-&gt;SetSize(1600, 800);\n      renderwindow-&gt;AddRenderer(renderer1);\n      renderer1-&gt;SetViewport(0., 0., 0.5, 1.);\n      renderwindow-&gt;AddRenderer(renderer2);\n      renderer2-&gt;SetViewport(0.5, 0., 1., 1.);\n\n      // Setup the interactor\n      vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::New();\n      vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();\n      iren-&gt;SetRenderWindow( renderwindow);\n      iren-&gt;SetInteractorStyle(style);\n\n      // Display the coordinate system axes\n      vtkSmartPointer&lt;vtkAxesActor&gt; axes = vtkSmartPointer&lt;vtkAxesActor&gt;::New();\n      vtkSmartPointer&lt;vtkOrientationMarkerWidget&gt; widget = vtkSmartPointer&lt;vtkOrientationMarkerWidget&gt;::New();\n      widget-&gt;SetOutlineColor( 0.9300, 0.5700, 0.1300 );\n      widget-&gt;SetOrientationMarker( axes );\n      widget-&gt;SetInteractor( iren );\n      widget-&gt;SetViewport( 0.0, 0.0, 0.4, 0.4 );\n      widget-&gt;SetEnabled( 1 );\n      widget-&gt;InteractiveOn();\n\n      // Render the 3D model and the found contour\n      renderwindow-&gt;Render();\n      iren-&gt;Start();\n\n   }\n</code></pre>\n"}, {"tags": ["c++", "char", "cmath"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 3, "creation_date": 1511358942, "post_id": 47436401, "comment_id": 81827215, "body": "New to programming or not, surely you could do something about that title, dude. Some punctuation within the question wouldn&#39;t harm either..."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1511359041, "post_id": 47436401, "comment_id": 81827278, "body": "It is not possible to read keystrokes in standard C++.  Standard streams like <code>cin</code> don&#39;t do that."}, {"owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511359114, "post_id": 47436401, "comment_id": 81827323, "body": "so your saying i can only use numbers?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1511360097, "post_id": 47436401, "comment_id": 81827953, "body": "You might be interested in our <a href=\"https://stackoverflow.com/q/388242/1782465\">list of good C++ books</a>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511358964, "post_id": 47436453, "comment_id": 81827231, "body": "ok thanks for the help but im not sure how to get the conversion working i just want to enter f and have that pattern be on the screen, thanks for the help"}], "tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 1, "last_activity_date": 1511358806, "creation_date": 1511358806, "answer_id": 47436453, "question_id": 47436401, "link": "https://stackoverflow.com/questions/47436401/input-the-letter-f-or-any-letter-and-cout-an-alphabet-pattern-like-a-abc-abcd-ab/47436453#47436453", "title": "input the letter f or any letter and cout an alphabet pattern like a abc abcd abcde abcdef but it only works if i press 0", "body": "<p>The variable <code>f</code> is an int.  When you press the key 'f', the <code>cin</code> istream tries to set the <code>int</code> to 'f', which isn't a number, so the conversion from a character to a number fails.</p>\n\n<p>That failure sets the bad-bit in <code>cin</code>, which breaks out of the while loop.</p>\n"}, {"comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 2, "creation_date": 1511359529, "post_id": 47436661, "comment_id": 81827608, "body": "This function loops until god knows when c is not in the range a-z"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511359542, "post_id": 47436661, "comment_id": 81827613, "body": "Hence my second comment; although we could clamp the output by putting s[i] as the loop conditional. You know I might just do that!"}, {"owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511359695, "post_id": 47436661, "comment_id": 81827699, "body": "im pretty much just trying write a program that inputs a letter from A to Z and displays all the letters similar to the following output (which is based on the input of F): ABCDEF ABCDE ABCD ABC AB A"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1511359737, "last_edit_date": 1511359737, "creation_date": 1511359397, "answer_id": 47436661, "question_id": 47436401, "link": "https://stackoverflow.com/questions/47436401/input-the-letter-f-or-any-letter-and-cout-an-alphabet-pattern-like-a-abc-abcd-ab/47436661#47436661", "title": "input the letter f or any letter and cout an alphabet pattern like a abc abcd abcde abcdef but it only works if i press 0", "body": "<p>Reading the input into a <code>char</code> is the easy bit: <code>std::cin &gt;&gt; c</code> for a <code>char c</code> will do it.</p>\n\n<p>The fun bit is writing a <em>portable</em> way of printing the letters up to a certain character. Here's one way:</p>\n\n<pre><code>// Prints up to and including 'c'.\n// Outputs the alphabet if 'c' is not a lower case letter.\nvoid print(char c)\n{\n    static const char s[] = \"abcdefghijklmnopqrstuvwxyz\";\n    for (std::size_t i = 0; s[i]; ++i){\n        std::cout &lt;&lt; s[i];\n        if (s[i] == c){\n            std::cout &lt;&lt; '\\n';\n            return;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511359810, "post_id": 47436677, "comment_id": 81827777, "body": "im pretty much just trying write a program that inputs a letter from A to Z and displays all the letters similar to the following output (which is based on the input of F): ABCDEF ABCDE ABCD ABC AB A"}, {"owner": {"reputation": 21, "user_id": 8036899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e07b4ee5382cf4b919ab6b14bc7b1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp G.", "link": "https://stackoverflow.com/users/8036899/philipp-g"}, "reply_to_user": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511432348, "post_id": 47436677, "comment_id": 81860703, "body": "I edited my answer hopefully this will bring more carification"}], "tags": [], "owner": {"reputation": 21, "user_id": 8036899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e07b4ee5382cf4b919ab6b14bc7b1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp G.", "link": "https://stackoverflow.com/users/8036899/philipp-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1511432310, "last_edit_date": 1511432310, "creation_date": 1511359441, "answer_id": 47436677, "question_id": 47436401, "link": "https://stackoverflow.com/questions/47436401/input-the-letter-f-or-any-letter-and-cout-an-alphabet-pattern-like-a-abc-abcd-ab/47436677#47436677", "title": "input the letter f or any letter and cout an alphabet pattern like a abc abcd abcde abcdef but it only works if i press 0", "body": "<p>If you enter f you cause an error because it is expecting an integer. You can convert the a char to an integer. If you want to turn a result if you enter f you have to options:</p>\n\n<p>1.</p>\n\n<pre><code>char input;\nstd:cin &gt;&gt; input;\nif((int)input == 102){\n   .....\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>char input;\nstd:cin &gt;&gt; input;\nif(input == 'f'){\n    .....\n</code></pre>\n\n<p>EDIT:\nIf you want to print the Alphabet in descending order Michael Roy had a nice solutions but in accesnding order</p>\n\n<pre><code> if....\n    for(char i = input; i &gt;= 'a'; --i)\n       cout &lt;&lt; i - 32; //the 32 is for converting the lower case char into upper case\n    cout &lt;&lt; '\\n';\n</code></pre>\n\n<p>So in total it could look something like this:</p>\n\n<pre><code>char input;\nstd:cin &gt;&gt; input;\nif('a' &lt; input &lt; 'z'){\n     for(char i = input; i &gt;= 'a'; --i)\n        cout &lt;&lt; i - 32;\n     cout &lt;&lt; '\\n';\n }else{\n     cout &lt;&lt; \"Not a valid input\";\n }\n System(\"Pause\");//so the console doesn't close automatically\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511360266, "post_id": 47436855, "comment_id": 81828073, "body": "thanks for the help but we get this error                                       main.cpp:10:21: error: expected primary-expression before &#39;&lt;&#39; token      if (&#39;a&#39; &lt;= c &amp;&amp; &lt; c &lt;= &#39;z&#39;) // test for the range we want"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "edited": false, "score": 0, "creation_date": 1511360803, "post_id": 47436855, "comment_id": 81828453, "body": "@matt: The answerer had a typo, which I&#39;ve fixed."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511360849, "post_id": 47436855, "comment_id": 81828493, "body": "It&#39;s a pity you didn&#39;t go for a portable solution but this is clear."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 0, "last_activity_date": 1511360781, "last_edit_date": 1511360781, "creation_date": 1511359980, "answer_id": 47436855, "question_id": 47436401, "link": "https://stackoverflow.com/questions/47436401/input-the-letter-f-or-any-letter-and-cout-an-alphabet-pattern-like-a-abc-abcd-ab/47436855#47436855", "title": "input the letter f or any letter and cout an alphabet pattern like a abc abcd abcde abcdef but it only works if i press 0", "body": "<p>Here's one way to make your program do what you want:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n  char c = 0;  // we want chars, not integers.\n  int z;\n  cout &lt;&lt; \"\";\n  while (cin &gt;&gt; c)\n  {\n    if ('a' &lt;= c &amp;&amp; c &lt;= 'z') // test for the range we want\n    {\n      // print all glyphs from a to 'c'\n      for (char i = 'a'; i &lt;= c; ++i)\n        cout &lt;&lt; i;\n      cout &lt;&lt; '\\n';\n      break;\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8825419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e219fde89f1d56d4cafce2d67e1cfb?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/8825419/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 47436855, "answer_count": 4, "score": 0, "last_activity_date": 1511432310, "creation_date": 1511358626, "last_edit_date": 1511360877, "question_id": 47436401, "link": "https://stackoverflow.com/questions/47436401/input-the-letter-f-or-any-letter-and-cout-an-alphabet-pattern-like-a-abc-abcd-ab", "title": "input the letter f or any letter and cout an alphabet pattern like a abc abcd abcde abcdef but it only works if i press 0", "body": "<p>So far nothing happens when you enter f it only works when 0 is entered but I want it so when you press f you get this a ab abc abcd abcde abcdef </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\nint f = 0;\nint z;\ncout &lt;&lt; \"\";\nwhile(cin &gt;&gt; f)\n{\n    if(f == 0)\n    {\n        cout &lt;&lt; \"ABCDEF\\nABCDE\\nABCD\\nABC\\nAB\\nA\";\n        break;\n     }\n   }\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "segmentation-fault"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 18, "creation_date": 1511358586, "post_id": 47436354, "comment_id": 81826935, "body": "undefined behavior is undefined."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1511358636, "post_id": 47436354, "comment_id": 81826974, "body": "Going out of bounds is undefined behavior. End of story really."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1511358926, "post_id": 47436354, "comment_id": 81827199, "body": "It can result in a segmentation fault, or it might exploit an elevated permission weakness of your shell and format your hard drive, or it might get up at night and put a tortoise under your blanket. Thus are the delights of UB. You cannot rely on something happening or not happening."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1511359039, "post_id": 47436354, "comment_id": 81827277, "body": "A compiler could still foreseeably recognize this UB and optimize around that. Say this is in an <code>if (ptr == nullptr)</code> block. Then a reasonable optimization would be to assume <code>ptr</code> is never null, which can lead to more regular segfaults. In short, you can&#39;t rely on UB continuing to work."}], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 4, "last_activity_date": 1511359129, "creation_date": 1511359129, "answer_id": 47436563, "question_id": 47436354, "link": "https://stackoverflow.com/questions/47436354/can-writing-into-reserved-space-of-stdvector-result-in-a-segmentation-fault/47436563#47436563", "title": "Can writing into reserved space of std::vector result in a segmentation fault?", "body": "<p>Once you have undefined behaviour, it is well, undefined behaviour.\nOne of the key aspects of undefined behaviour is that you can't be sure what the behaviour would be on different system and compiler. Now you could look at the code of a specific compiler and a specific library implementation and you will see it acts as you expect it to.</p>\n\n<p>But I don't think you will find anyone who is willing to bet that this will work across all different systems, compilers and library implementations.</p>\n\n<p>Just for instance, what if a specific vector implementation decide to use the reserved memory for internal information? Maybe it is unlikely, but how can you be sure no system is actually doing it?</p>\n"}, {"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1511359712, "creation_date": 1511359712, "answer_id": 47436772, "question_id": 47436354, "link": "https://stackoverflow.com/questions/47436354/can-writing-into-reserved-space-of-stdvector-result-in-a-segmentation-fault/47436772#47436772", "title": "Can writing into reserved space of std::vector result in a segmentation fault?", "body": "<p>Let us consider a concrete example - the std::vector implementation that when reserve() is called, it allocates the memory, but then starts performing the copy on a background thread - because it can...  <em>shrugs</em> who knows what will happen in the near future!  So while it's copying, all reads are unlocked and go straight to the old memory area because that's still good for reading.</p>\n\n<p>Now attempting to read something out of range will be attempting to read random memory, and not what you're asserting should be your new allocated memory.</p>\n\n<p>So as the comments and the other answer says, undefined is undefined.</p>\n"}], "owner": {"reputation": 2292, "user_id": 1092381, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pHhcc.png?s=128&g=1", "display_name": "philkark", "link": "https://stackoverflow.com/users/1092381/philkark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511359712, "creation_date": 1511358511, "question_id": 47436354, "link": "https://stackoverflow.com/questions/47436354/can-writing-into-reserved-space-of-stdvector-result-in-a-segmentation-fault", "title": "Can writing into reserved space of std::vector result in a segmentation fault?", "body": "<p>I hope this is not a too controversial question, but I cannot find a proper full answer on SO. This is also not a question about the difference between the methods <code>reserve</code> and <code>resize</code> or the difference between <code>capacity</code> and <code>size</code>, which are (hopefully) clear to me and have often enough been asked on SO. Also, this is not a question, if this is good practice at all, which it is not!</p>\n\n<p>Consider the following situation:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct Foo\n{\n  double a, b;\n};\n\nint main(int argc, char* argv[])\n{\n  std::vector&lt;Foo&gt; Vec;\n  Vec.reserve(100);\n\n  Foo foo;\n  foo.a = -13.131;\n  foo.b = 3.141;\n\n  for(int i = 0; i &lt; 100; ++i)\n    Vec[i] = foo;\n\n  for(int i = 0; i &lt; 100; ++i)\n    std::cout &lt;&lt; Vec[i].a &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>I first create a <code>std::vector</code> of Foo and the reserve memory, but don't resize the vector. Clearly <code>size() = 0</code>, BUT the memory for 100 elements has been allocated and may now be freely used by my program, so technically, writing to and reading from any position in memory of these elements cannot result in a segmentation fault, is that correct?</p>\n\n<p>I have tried to run this code on Ubuntu 14.04 and everything works as expected, all 100 elements have been written to successfully and all outputs are also -13.131, even though the vector size remains at 0. If I look for through many answers on SO, they all correctly point out that it results in undefined behaviour, because the elements are not initialized, but could it actually result in a segmentation fault in any way (not talking about accessing elements of unitialized pointers in a vector etc.)?</p>\n\n<p>A question similar to this has been asked <a href=\"https://stackoverflow.com/questions/25348026/stdvector-segmentation-fault-with-and-without-initialization\">here</a> and that seems to confirm my thought, but would it in principle work accross all platforms that support compilation of C++?</p>\n"}, {"tags": ["c++", "zeromq", "ros"], "answers": [{"comments": [{"owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511359176, "post_id": 47436485, "comment_id": 81827368, "body": "I see. Is there any chance that <code>zmq_socket.recv(&amp;msg)</code> receive same message again? It may be possible that <code>while</code> loop is too fast or something like that? I am not sure if it makes sense or not."}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "reply_to_user": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511359466, "post_id": 47436485, "comment_id": 81827562, "body": "Assuming you are not sending  multipart message, if one message is sent, only one message will be received. The loop won&#39;t be too fast since it will block on the <code>recv</code> call until a message is received or you reach the timeout."}, {"owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511359675, "post_id": 47436485, "comment_id": 81827690, "body": "Yeah. One more question. Is there a way that a <i>publisher</i> can know if any <i>subscriber</i> is connected to it or not? Basically, what I am thinking is I can pause the <i>publisher</i> doing its job and only resume it when <i>subscriber</i> is connected."}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "reply_to_user": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511360251, "post_id": 47436485, "comment_id": 81828059, "body": "A message sent to a topic that noone is listening will be dropped by a PUB socket. Otherwise, you can use XPUB to see the subscribe / unsubscribe message manually."}, {"owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511360503, "post_id": 47436485, "comment_id": 81828253, "body": "You mean that there is no harm in keep publishing messages because ZeroMQ is going to drop it if no subscriber is connected? Actually to build the message for publishing, I need to do a lot of calculations (functions call). I can skip it if I can know connected subscriber by using API."}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "reply_to_user": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "edited": false, "score": 0, "creation_date": 1511361095, "post_id": 47436485, "comment_id": 81828684, "body": "From a networking point of view , yes there is no harm in publishing message that noone wants. If you want to manage a list of subscriber, you need to do it manually using XPUB socket"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511365612, "post_id": 47436485, "comment_id": 81832171, "body": "With all due respect, most distributed-systems programming <b>never allows a blocking</b> mode of any <code>.recv()</code> to ever happen, it is an awfully bad habit even for a school-book grade examples, as it is a resources devastating anti-pattern for any professionally meant software. Always expect not to wait a nanosecond on any attempt to receive using <b><code>.recv( ..., ZMQ_DONTWAIT )</code></b> and rather pre-<code>poll()</code> or just loop-through with a due ex-post return code handler."}], "tags": [], "owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "is_accepted": true, "score": 1, "last_activity_date": 1511365310, "last_edit_date": 1511365310, "creation_date": 1511358903, "answer_id": 47436485, "question_id": 47436219, "link": "https://stackoverflow.com/questions/47436219/does-a-sub-subscriber-in-zeromq-have-any-callback-mechanism-as-in-ros/47436485#47436485", "title": "Does a SUB subscriber in ZeroMQ have any &quot;callback&quot;-mechanism as in ROS?", "body": "<p>No, there is no callback system in ZMQ. You have to call <code>recv()</code> function in order to receive a message. </p>\n\n<p>You can implement one using <code>recv()</code> since it blocks and returns a status, so you can use it in an <code>if</code> condition and a <code>while</code> loop.</p>\n\n<p>I often use a pattern like this one with a timeout : </p>\n\n<pre><code>zmq::context_t zmq_context(1);\nzmq::socket_t zmq_socket(zmq_context, ZMQ_SUB);\n\nzmq_socket.connect(\"tcp://127.0.0.1:58951\");\n\nstd::string TOPIC = \"\";\n\nzmq_socket.setsockopt(ZMQ_SUBSCRIBE, TOPIC.c_str(), TOPIC.length()); // allow all messages\nzmq_socket.setsockopt(ZMQ_RCVTIMEO, 1000); // Timeout to get out of the while loop since recv is blocking\nwhile(run) {\n    zmq::message_t msg;\n    int rc = zmq_socket.recv(&amp;msg);  // Is blocking until you receive a message\n    if(rc) { \n        // You received a message : your data is in msg\n        // Do stuff here : call your function with the parameters received from zmq\n    }\n}\n// Clean up your socket and context here\nzmq_socket.setsockopt(ZMQ_LINGER, linger);\nzmq_socket.close();\nzmq_context.close();\n</code></pre>\n"}], "owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 1, "accepted_answer_id": 47436485, "answer_count": 1, "score": 2, "last_activity_date": 1511366402, "creation_date": 1511358106, "last_edit_date": 1511366402, "question_id": 47436219, "link": "https://stackoverflow.com/questions/47436219/does-a-sub-subscriber-in-zeromq-have-any-callback-mechanism-as-in-ros", "title": "Does a SUB subscriber in ZeroMQ have any &quot;callback&quot;-mechanism as in ROS?", "body": "<p>I am a newbie in ZeroMQ.</p>\n\n<p>I use <a href=\"http://www.ros.org/\" rel=\"nofollow noreferrer\">ROS</a> frequently. Hence I am confused by the subscriber in ZeroMQ. Most of the time in ROS, the subscriber is having a callback function, which is called automatically whenever data is available in the corresponding rostopic.</p>\n\n<p>Please see below code snippet, borrowed from <a href=\"http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29\" rel=\"nofollow noreferrer\">ROS wiki</a>:</p>\n\n<pre><code>void chatterCallback(const std_msgs::String::ConstPtr&amp; msg)\n{\n  ROS_INFO(\"I heard: [%s]\", msg-&gt;data.c_str());\n}\n//define subscriber and callback function associated with it\nros::Subscriber sub = n.subscribe(\"chatter\", 1000, chatterCallback);\n</code></pre>\n\n<p>However, in ZeroMQ, it seems that subscriber is kept in a loop to receive the data, as shown below:</p>\n\n<pre><code>for (int update_nbr = 0; update_nbr &lt; 100; update_nbr++)\n{\n    zmq::message_t update;\n    int zipcode, temperature, relhumidity;\n    // receive the data\n    subscriber.recv(&amp;update);\n    // do something with data\n    std::istringstream iss(static_cast&lt;char*&gt;(update.data()));\n    iss &gt;&gt; zipcode &gt;&gt; temperature &gt;&gt; relhumidity;\n}\n</code></pre>\n\n<p>The above code is borrowed from <a href=\"http://zguide.zeromq.org/cpp:wuclient\" rel=\"nofollow noreferrer\">ZeroMQ wiki</a>.</p>\n\n<p>Does there exist any callback-mechanism, similar to ROS Subscriber, in ZeroMQ too?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1511358384, "post_id": 47436201, "comment_id": 81826793, "body": "Whoever taught you <code>void main</code> ignore them from now on and look <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282\">here</a> instead."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511358710, "post_id": 47436201, "comment_id": 81827039, "body": "@nwp ... and <code>using namespace std;</code>, and <code>std::random_shuffle</code>, and <code>&lt;stdlib.h&gt;</code> :p"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1511358777, "post_id": 47436201, "comment_id": 81827096, "body": "Stop reading that thing. It went outdated about 20 years ago."}], "answers": [{"comments": [{"owner": {"reputation": 9951, "user_id": 519882, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cf3e8e6aeb0333c68b235284d2437127?s=128&d=identicon&r=PG", "display_name": "venkysmarty", "link": "https://stackoverflow.com/users/519882/venkysmarty"}, "edited": false, "score": 0, "creation_date": 1511358780, "post_id": 47436293, "comment_id": 81827098, "body": "Thanks for quick response. Got the mistake"}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": false, "score": 2, "last_activity_date": 1511358330, "creation_date": 1511358330, "answer_id": 47436293, "question_id": 47436201, "link": "https://stackoverflow.com/questions/47436201/back-inserter-error-for-vector/47436293#47436293", "title": "back_inserter error for vector", "body": "<pre><code>void iota_n (ForwardIterator first, int n, T value)\n</code></pre>\n\n<p>This prototype requires the iterator as the first argument, but you're passing it as the initial value instead.</p>\n\n<p>When you replace the <code>iota_n</code> call with </p>\n\n<pre><code>iota_n (back_inserter(v), 100, 42);\n</code></pre>\n\n<p>and fix the assignment inside the function:</p>\n\n<pre><code>*first++ = value++;\n</code></pre>\n\n<p>You'll get the result you want.</p>\n"}], "owner": {"reputation": 9951, "user_id": 519882, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cf3e8e6aeb0333c68b235284d2437127?s=128&d=identicon&r=PG", "display_name": "venkysmarty", "link": "https://stackoverflow.com/users/519882/venkysmarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511358330, "creation_date": 1511358062, "question_id": 47436201, "link": "https://stackoverflow.com/questions/47436201/back-inserter-error-for-vector", "title": "back_inserter error for vector", "body": "<p>I am reading STL tutorial at following link</p>\n\n<p><a href=\"http://cs.brown.edu/people/jak/proglang/cpp/stltut/tut.html\" rel=\"nofollow noreferrer\">http://cs.brown.edu/people/jak/proglang/cpp/stltut/tut.html</a></p>\n\n<p>How to fix compilation error?</p>\n\n<p>Here following code is mentioned </p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\ntemplate &lt;class ForwardIterator, class T&gt;\nvoid iota_n (ForwardIterator first, int n, T value)\n{\n  for (int i = 0; i &lt; n; i++) {\n      *first++ = *value++;\n  }\n}\n\n\nvoid main ()\n{\n\n  vector&lt;int&gt; v;\n  iota_n (v.begin(), 100, back_inserter(v));\n\n  random_shuffle (v.begin(), v.end());                         // shuffle\n  copy (v.begin(), v.end(), ostream_iterator&lt;int&gt; (cout, \"\\n\")); // print\n\n}\n</code></pre>\n\n<p>While compiling facing following error.</p>\n\n<p>error C2440: '=' : cannot convert from 'std::back_insert_iterator&lt;_Container>' to 'int'</p>\n"}, {"tags": ["c++", "zeromq"], "comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511365046, "post_id": 47436031, "comment_id": 81831736, "body": "Ok, you ask Community Members to suggest / advise, but you have <b>not expressed any single measure</b> to use to decide what is good choice with respect to some assessment metric ( the best a quantitative one ). <b>So, kindly share</b> with us, mortals, <b>how do you decide on your own what is a set of features and qualities a good design in your opinion has and what is a sign of a not good design, ok?</b>"}, {"owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511365224, "post_id": 47436031, "comment_id": 81831865, "body": "@user3666197: I want to create multiple <i>publishers</i> but I am not sure if creating multiple instances of <code>zmq::socket_t</code> is a good idea or not. Thanks for your kind cooperation."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1511365330, "post_id": 47436031, "comment_id": 81831929, "body": "How do you measure goodness? Do you want to know if it&#39;s maintainable? Or if meets some latency requirement? Or a bandwidth requirement? Or something else?"}, {"owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1511365503, "post_id": 47436031, "comment_id": 81832064, "body": "@Useless: my current concern is speed. Since the data is huge, that is why I am planning to have multiple <i>publishers</i> on separate port. I would like to receive the data as fast as possible from <i>publisher</i>."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511366044, "post_id": 47436031, "comment_id": 81832441, "body": "<b><i>Speed</i></b>? Be rather quantitative, ok? Express this as a maximum duration in [ms], [us] or [ns] for some activity to happen, <b>right?</b> Next, <b><i>huge</i></b>? Be rather quantitative, ok? Express this as a maximum size in [kB], [MB] or [GB] for an object of interest + how often it has to re-process such an item in time in [1/s] or [kHz] et al, <b>right?</b> Next, <b>what are your resources -- RAM, CPU, cache, LAN / other non-local transport interconnects ...</b> where do you plan to operate the processing, <b>right?</b>"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1511366291, "post_id": 47436031, "comment_id": 81832644, "body": "+ as was asked and misleadingly answered in your other question -- most distributed-systems programming <b>never allows a blocking</b> mode of any <code>.recv()</code> to ever happen, it is an awfully bad habit even for a school-book grade examples, as it is a resources devastating anti-pattern for any professionally meant software ( MANY TIMES MORE IN ROBOTICS AND ANY SIMILAR REAL-TIME-CONTROL SYSTEM ). Always expect not to wait a nanosecond on any attempt to receive using <b><code>.recv( ..., ZMQ_DONTWAIT )</code></b> and rather pre-<code>poll()</code> or just loop-through with a due ex-post return code handler."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 2, "last_activity_date": 1511425449, "creation_date": 1511425449, "answer_id": 47450695, "question_id": 47436031, "link": "https://stackoverflow.com/questions/47436031/multiple-publisher-in-zeromq-c-is-this-a-good-choice-or-not/47450695#47450695", "title": "Multiple publisher in ZeroMQ C++ Is this a good choice or not?", "body": "<h2>Still waiting for any quantitative fact, but let's start:</h2>\n\n<p>ZeroMQ is a concept of using smart enabling tools, whereas the low-level system programming is hidden by the ZeroMQ core element, the <strong><code>Context</code></strong>-engine.</p>\n\n<p>This said, the high-level tools, formalised as Scalable Formal Communication Pattern Archetypes, deliver some sort of human-mimicking behaviour -- <code>PUB</code> Publishers indeed \"publish\", <strong><code>SUB</code></strong> Subscribers can \"subscribe\", <strong><code>REQ</code></strong> Requestors can \"request\", <strong><code>REP</code></strong> Repliers can indeed \"reply\", etc.</p>\n\n<p>These AccessPoints with behaviour can <strong><code>.bind()/.connect()</code></strong> into some sort of a distributed-behavioural infrastructure, once having been granted some elementary rules. One of such rule is do not bother with actual transport-classes', all being indeed feature-rich technologies, currently spanning landscapes of <code>{ inproc:// | ipc:// | tcp:// | pgm:// | epgm:// | vmci:// }</code>,  low-level details, the <strong><code>Context()</code></strong>-instance will handle all these \ntransparently to your high-level behaviour. Simply forget about this. Another rule is, you can be sure every message sent is either delivered error-free or not at all - no compromise in this, no tortured trash ever delivered to fool or crash the recipient's AccessPoint post-processing.</p>\n\n<p>Failing to understand this, ZeroMQ is not used to it's maximum to deliver us both the comfort and the powers that were engineered into this luxurious tool.</p>\n\n<h2>Back to your dilemma:</h2>\n\n<p>Having said the few remarks above and having your primary architecture not clear yet, it is still possible to help you here.</p>\n\n<p>ZeroMQ abstract, distributed-behaviour Socket-tool is principally a pure-<strong><code>[SERIAL]</code></strong> schedulling device. This means, none of any of your receiving AccessPoints <code>{ .bind() | .connect() }</code>-associated with a Socket can expect to arbitrarily re-order a pure-sequantial flow of messages.</p>\n\n<p>This means, in any case, where either a \"just\"-<strong><code>[CONCURRENT]</code></strong> process-scheduling or in an extreme case, where a true-<strong><code>[PARALLEL]</code></strong> process-scheduling is technically orchestrated, a single \"pure\"-<strong><code>[SERIAL]</code></strong> delivery channel will not allow a <code>{ [CONCURRENT] | [PARALLEL] }</code>-system to keep delivering such mode of process-scheduling and will chop the flow of events / processing into a \"pure\"-<strong><code>[SERIAL]</code></strong> sequence of messages.</p>\n\n<p><strong>A )</strong> This indeed <strong>could be both a reason and a must</strong> for introducing multiple independently operated ZeroMQ distributed-behaviour Socket instances.</p>\n\n<p><strong>B )</strong> On the other side, not knowing anything about the global distributed-system behaviour, <strong>no one can yet tell for sure</strong>, whether going into multiple independently operated Socket instance is not just a waste of time and resources, delivering unreasonably under-average or unacceptably poor end-to-end system behaviour performance because of an extremely wrong or totally missing initial engineering decision.</p>\n\n<hr>\n\n<h1>Performance?</h1>\n\n<p>Do not guess in this domain, never. Rather start with first quantitatively declared needs, based on which a technically reasoned design will be able to proceed and define all the steps needed in the resources mapping and performance tweaking up to the platform limits.</p>\n\n<p>ZeroMQ has been for the last two decades gloriously equipped for doing this with ultimate performance characteristics and the Design &amp; Engineering team has done a great deal in polishing both the scalability and performance envelopes, while keeping latency on level hardly to achieve by an ad-hoc programmer. Indeed a great piece of system-programming hidden in the ZeroMQ basement.</p>\n\n<p>\"<em>data is huge</em>\" -- ok, <strong>define the <em>size</em></strong> -- delivering <strong><code>1E+9</code></strong> messages having <strong><code>1 [B]</code></strong> in size has other performance tweaking than delivering 1E+3 messages having <strong><code>1.000.000 [B]</code></strong> in size.</p>\n\n<p>\"<em>as fast as possible</em>\" -- ok, <strong>define the <em>fast</em></strong> for a <strong>given size</strong> and intended cadence of messages 1/s ~ <strong><code>1 [Hz]</code></strong>, 10/s ~ <strong><code>10 [Hz]</code></strong>, 1000/s ~ <strong><code>1 [kHz]</code></strong></p>\n\n<p>Sure, under some certain circumstances such mix of requirements may wander outside of the contemporary computing-devices capabilities horizons. That has to get reviewed best before any programming has ever started, because otherwise you have just spoilt some amount of programming efforts on a thing, that will never fly, so better to have a positive proof of the solution architecture being feasible and doable within an acceptable resources and costs perimeter.</p>\n\n<p>So, if your Project needs something, <strong>first</strong> define and quantitatively specify what that actually is, <strong>next</strong> the solution architecture can start to sort it out and provide decisions, what tools and what tool-configurations can match the defined target levels of functionality and performance objectives.</p>\n\n<p>Building a house, having started by raising a roof will never answer the questions how to layout the basement wall a what would be a sufficient and yet not over-designed thickness of the iron-concrete armouring, that will carry an unknown amount of high-raised building floors. Having a roof already built is easy to show up, but has nothing to do with a systematic and rigorous design &amp; engineering practice.</p>\n"}], "owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 2, "accepted_answer_id": 47450695, "answer_count": 1, "score": 1, "last_activity_date": 1511425449, "creation_date": 1511357503, "last_edit_date": 1511364841, "question_id": 47436031, "link": "https://stackoverflow.com/questions/47436031/multiple-publisher-in-zeromq-c-is-this-a-good-choice-or-not", "title": "Multiple publisher in ZeroMQ C++ Is this a good choice or not?", "body": "<p>I am new to ZeroMQ. I want to create multiple publishers, where each publisher is publishing specific data, such as following:</p>\n\n<ol>\n<li>Publisher 1: Publishing image data</li>\n<li>Publisher 2: Publishing audio data</li>\n<li>Publisher 3: Publishing text data</li>\n</ol>\n\n<p>Basically, my requirement is to publish the data from multiple publishers and receive using multiple receivers on the other side.</p>\n\n<p>Please see the sample code below:</p>\n\n<p><strong>data_publisher.cpp</strong></p>\n\n<pre><code>//  Prepare our context and all publishers\nzmq::context_t context(1);\nzmq::socket_t publisher1(context, ZMQ_PUB);\nzmq::socket_t publisher2(context, ZMQ_PUB);\nzmq::socket_t publisher3(context, ZMQ_PUB);\nzmq::socket_t publisher4(context, ZMQ_PUB);\n\npublisher1.bind(\"tcp://*:5556\");\npublisher2.bind(\"tcp://*:5557\");\npublisher3.bind(\"tcp://*:5558\");\npublisher4.bind(\"tcp://*:5559\");\n\n//  Initialize random number generator\nsrandom((unsigned)time(NULL));\nwhile (1) {\n    // sample data\n    int zipcode1 = within(100000);\n    int zipcode2 = within(100000);\n    int zipcode3 = within(100000);\n    int zipcode4 = within(100000);\n\n    int temperature1 = within(215) - 80;\n    int temperature2 = within(215) - 80;\n    int temperature3 = within(215) - 80;\n    int temperature4 = within(215) - 80;\n\n    int relhumidity1 = within(50) + 10;\n    int relhumidity2 = within(50) + 10;\n    int relhumidity3 = within(50) + 10;\n    int relhumidity4 = within(50) + 10;\n\n    zmq::message_t message1(20);\n    zmq::message_t message2(20);\n    zmq::message_t message3(20);\n    zmq::message_t message4(20);\n\n    snprintf((char*)message1.data(), 20, \"%05d %d %d\", zipcode1, temperature1, relhumidity1);\n    snprintf((char*)message2.data(), 20, \"%05d %d %d\", zipcode2, temperature2, relhumidity2);\n    snprintf((char*)message3.data(), 20, \"%05d %d %d\", zipcode3, temperature3, relhumidity3);\n    snprintf((char*)message4.data(), 20, \"%05d %d %d\", zipcode4, temperature4, relhumidity4);\n\n    publisher1.send(message1);\n    publisher2.send(message2);\n    publisher3.send(message3);\n    publisher4.send(message4);\n}\n</code></pre>\n\n<p><strong>data_receiver.cpp</strong></p>\n\n<pre><code>zmq::context_t context(1);\n\n//  Socket to talk to server\nzmq::socket_t subscriber1(context, ZMQ_SUB);\nzmq::socket_t subscriber2(context, ZMQ_SUB);\nzmq::socket_t subscriber3(context, ZMQ_SUB);\nzmq::socket_t subscriber4(context, ZMQ_SUB);\n\nsubscriber1.connect(\"tcp://localhost:5556\");\nsubscriber2.connect(\"tcp://localhost:5557\");\nsubscriber3.connect(\"tcp://localhost:5558\");\nsubscriber4.connect(\"tcp://localhost:5559\");\n\nconst char* filter = (argc &gt; 1) ? argv[1] : \"10001 \";\nsubscriber1.setsockopt(ZMQ_SUBSCRIBE, filter, strlen(filter));\nsubscriber2.setsockopt(ZMQ_SUBSCRIBE, filter, strlen(filter));\nsubscriber3.setsockopt(ZMQ_SUBSCRIBE, filter, strlen(filter));\nsubscriber4.setsockopt(ZMQ_SUBSCRIBE, filter, strlen(filter));\n\n//  Process 100 updates\nint update_nbr;\nlong total_temp1 = 0;\nlong total_temp2 = 0;\nlong total_temp3 = 0;\nlong total_temp4 = 0;\n\nfor (update_nbr = 0; update_nbr &lt; 100; update_nbr++)\n{\n    zmq::message_t update1;\n    zmq::message_t update2;\n    zmq::message_t update3;\n    zmq::message_t update4;\n    int zipcode1, temperature1, relhumidity1;\n    int zipcode2, temperature2, relhumidity2;\n    int zipcode3, temperature3, relhumidity3;\n    int zipcode4, temperature4, relhumidity4;\n\n    subscriber1.recv(&amp;update1);\n    subscriber2.recv(&amp;update2);\n    subscriber3.recv(&amp;update3);\n    subscriber4.recv(&amp;update4);\n\n    std::istringstream iss1(static_cast&lt;char*&gt;(update1.data()));\n    std::istringstream iss2(static_cast&lt;char*&gt;(update2.data()));\n    std::istringstream iss3(static_cast&lt;char*&gt;(update3.data()));\n    std::istringstream iss4(static_cast&lt;char*&gt;(update4.data()));\n\n    iss1 &gt;&gt; zipcode1 &gt;&gt; temperature1 &gt;&gt; relhumidity1;\n    iss2 &gt;&gt; zipcode2 &gt;&gt; temperature2 &gt;&gt; relhumidity2;\n    iss3 &gt;&gt; zipcode3 &gt;&gt; temperature3 &gt;&gt; relhumidity3;\n    iss4 &gt;&gt; zipcode4 &gt;&gt; temperature4 &gt;&gt; relhumidity4;\n\n    total_temp1 += temperature1;\n    total_temp2 += temperature2;\n    total_temp3 += temperature3;\n    total_temp4 += temperature4;\n}\n\nstd::cout &lt;&lt; \"Average temperature for zipcode '\" &lt;&lt; filter &lt;&lt; \"' was \"\n          &lt;&lt; (int)(total_temp1 / update_nbr) &lt;&lt; \"F\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Average temperature for zipcode '\" &lt;&lt; filter &lt;&lt; \"' was \"\n          &lt;&lt; (int)(total_temp2 / update_nbr) &lt;&lt; \"F\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Average temperature for zipcode '\" &lt;&lt; filter &lt;&lt; \"' was \"\n          &lt;&lt; (int)(total_temp3 / update_nbr) &lt;&lt; \"F\" &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Average temperature for zipcode '\" &lt;&lt; filter &lt;&lt; \"' was \"\n          &lt;&lt; (int)(total_temp4 / update_nbr) &lt;&lt; \"F\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Please note that the above code is a sample code to get the suggestions / advice.</p>\n\n<p><strong>I want to know if it is a good choice or not as shown in the sample code above?</strong></p>\n"}, {"tags": ["c++", "boost", "preprocessor", "boost-preprocessor"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1511356364, "post_id": 47435453, "comment_id": 81825340, "body": "Include _s in the tokens?"}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1511357032, "post_id": 47435453, "comment_id": 81825860, "body": "What do you mean? If I do <code>VMS_s</code> I won&#39;t be able to get to the boost macro from that"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1511361854, "post_id": 47435453, "comment_id": 81829252, "body": "Move the <code>_</code> from  <code>## _ ##</code> in <code>MAKE_STMT_I</code> to <code>_CYGWIN</code> or what have you."}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1511362602, "post_id": 47435453, "comment_id": 81829811, "body": "Most of the OS Macros are defined this way. So this would make it worse. <a href=\"http://www.boost.org/doc/libs/1_55_0/libs/predef/doc/html/predef/reference/boost_os_operating_system_macros.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_55_0/libs/predef/doc/html/predef/refere&zwnj;&#8203;nce/&hellip;</a>"}, {"owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "edited": false, "score": 0, "creation_date": 1511363634, "post_id": 47435453, "comment_id": 81830635, "body": "<code>(##AIX##)</code> is also illegal, because <code>(AIX)</code> is not a single preprocessor token."}], "answers": [{"comments": [{"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1511357070, "post_id": 47435684, "comment_id": 81825892, "body": "Yeah, was thinking about that too. Would be a lot of undefs though."}, {"owner": {"reputation": 314, "user_id": 8576366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTEwi.jpg?s=128&g=1", "display_name": "Pablo Oliva", "link": "https://stackoverflow.com/users/8576366/pablo-oliva"}, "edited": false, "score": 0, "creation_date": 1511357478, "post_id": 47435684, "comment_id": 81826169, "body": "Whenever you get clever with the preprocessor, you are asking for trouble down the line. Is there a way to use a macro name which isn&#39;t being used elsewhere?"}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 1, "creation_date": 1511358792, "post_id": 47435684, "comment_id": 81827110, "body": "I need to get to e.g. <code>BOOST_OS_VMS</code> and <code>BOOST_OS_VMS_NAME</code> and want to avoid repetition. So possibly the only variant I could use is <code>OS_VMS</code> (prefix all with <code>OS_</code> which should not be defined before) at the price of a bit repetition."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1511356512, "creation_date": 1511356512, "answer_id": 47435684, "question_id": 47435453, "link": "https://stackoverflow.com/questions/47435453/avoid-expansion-of-macros-while-using-boost-preprocessor-sequences/47435684#47435684", "title": "Avoid expansion of macros while using boost preprocessor sequences", "body": "<p>Since you rely on the token <code>VMS</code> being undefined, a quick solution is a simple <code>#undef VMS</code>. Obviously, to avoid breaking code which relies on that macro, you should put your Boost PP code in its own .cpp file.</p>\n"}, {"comments": [{"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1511394956, "post_id": 47439494, "comment_id": 81846549, "body": "2 is essentially my idea in a comment to MSalters answer. 3 is unbearable as this won&#39;t save me any work at all, but nice to know the number prefix trick."}], "tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": false, "score": 2, "last_activity_date": 1511367748, "creation_date": 1511367748, "answer_id": 47439494, "question_id": 47435453, "link": "https://stackoverflow.com/questions/47435453/avoid-expansion-of-macros-while-using-boost-preprocessor-sequences/47439494#47439494", "title": "Avoid expansion of macros while using boost preprocessor sequences", "body": "<blockquote>How can I avoid the expansion in the sequence completely?</blockquote>\n\n<p>You can't.  Passing high level data structures as an argument to a macro necessarily involves evaluating the data structure.</p>\n\n<p>You could avoid this problem and still use the boost macros in basically three ways:</p>\n\n<h2>1. Undefine problem macros before the call</h2>\n\n<p>This is essentially what MSalters recommended.</p>\n\n<p>The idea being that if <code>VMS</code> isn't defined, its evaluation won't expand it.</p>\n\n<p>Here, you risk <code>VMS</code> being left undefined, which could have dire consequences, so you have to mitigate that (MSalters touched on this).</p>\n\n<h2>2. Build high level macros from different data</h2>\n\n<p>2 might for example use:</p>\n\n<pre><code>#define OS_LIST (S_AIX)(S_BEOS)(S_VMS)\n</code></pre>\n\n<p>...and require you to change your <code>MAKE_STMT</code> macro complex; for example, this:</p>\n\n<pre><code>#define MAKE_STMT_I2(PREFIX) if(PREFIX) return PREFIX ## _NAME;\n#define MAKE_STMT_I(curName) MAKE_STMT_I2(BOOST_O ## curName)\n#define MAKE_STMT(s, type, curName) MAKE_STMT_I(curName)\n#define OS_LIST (S_AIX)(S_AMIGAOS)(S_ANDROID)(S_BEOS)(S_BSD)(S_CYGWIN)(S_HPUX)(S_IRIX)(S_LINUX)(S_MACOS)(S_OS400)(S_QNX)(S_SOLARIS)(S_UNIX)(S_SVR4)(S_VMS)(S_WINDOWS)(S_BSDI)(S_DRAGONFLY)(S_BSD_FREE)(S_BSD_NET)(S_BSD_OPEN)\n</code></pre>\n\n<p>(Note: Here I'm ignoring the type; it's not necessary to pass <code>OS</code> in as data to the iteration sequence anyway).</p>\n\n<p>The idea here is to find a different shared portion of <code>BOOST_OS_FOO</code> and <code>BOOST_OS_FOO_NAME</code> to put in your data, so that your data doesn't include the macros you're defining.</p>\n\n<p>Here, you risk <code>S_FOO</code> being defined at some higher level messing you up.  You could mitigate this by finding a different piece to use in your data.</p>\n\n<h2>3. Build wrapper identifiers</h2>\n\n<p>This is easiest to define by example:</p>\n\n<pre><code>#define OS_LIST (AIX)(BEOS)(8VMS)\n#define BOOST_OS_8VMS BOOST_OS_VMS\n#define BOOST_OS_8VMS_NAME BOOST_OS_VMS_NAME\n</code></pre>\n\n<p>The idea here is that you're building <em>different</em> <code>BOOST_OS_xxx</code> / <code>BOOST_OS_xxx_NAME</code> form macros, then remapping those back to the desired ones.  Using a numeric prefix has the advantage of becoming immune to expansion (such entities are valid preprocessor tokens (pp-numbers), but they cannot be object-like macros).</p>\n"}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1511367748, "creation_date": 1511355808, "question_id": 47435453, "link": "https://stackoverflow.com/questions/47435453/avoid-expansion-of-macros-while-using-boost-preprocessor-sequences", "title": "Avoid expansion of macros while using boost preprocessor sequences", "body": "<p>I'm trying to get the OS and compiler name as a string in C++. Although there are many questions about this I did not find a definitive answer. So I tried to use Boost.Predef 1.55 which defines macros of the type <code>BOOST_OS_&lt;OS&gt;</code> and <code>BOOST_OS_&lt;OS&gt;_NAME</code>.</p>\n\n<p>Hence one could simply do <code>if(BOOST_OS_&lt;OS&gt;) return BOOST_OS_&lt;OS&gt;_NAME;</code> for every OS boost supports. Same for compilers with <code>COMP</code> instead of <code>OS</code>. To avoid the repetition I wanted to use Boost.Preprocessor and put them all in a loop.</p>\n\n<p>What I came up with is this:</p>\n\n<pre><code>#define MAKE_STMT_I2(PREFIX) if(PREFIX) return PREFIX ## _NAME;\n#define MAKE_STMT_I(type, curName) MAKE_STMT_I2(BOOST_ ## type ## _ ## curName)\n#define MAKE_STMT(s, type, curName) MAKE_STMT_I(type, curName)\n#define OS_LIST (AIX)(AMIGAOS)(ANDROID)(BEOS)(BSD)(CYGWIN)(HPUX)(IRIX)(LINUX)(MACOS)(OS400)(QNX)(SOLARIS)(UNIX)(SVR4)(VMS)(WINDOWS)(BSDI)(DRAGONFLY)(BSD_FREE)(BSD_NET)(BSD_OPEN)\n\n    BOOST_PP_SEQ_FOR_EACH(MAKE_STMT, OS, OS_LIST)\n</code></pre>\n\n<p>However I run into problems where the values are expanded to soon. E.g. VMS defines already a macro named <code>VMS</code> which then gets replaced in <code>OS_LIST</code>. Even doing something like <code>#define OS_LIST (##AIX##)(##AMIGAOS##)(...</code> does not help as it seems to get expanded in boost later.</p>\n\n<p>How can I avoid the expansion in the sequence completely?</p>\n"}, {"tags": ["c++", "arrays", "c++14"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1511355900, "post_id": 47435451, "comment_id": 81825042, "body": "Did your debugger tell you anything useful?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 7, "creation_date": 1511355969, "post_id": 47435451, "comment_id": 81825086, "body": "What do you think that <code>std::string listofthings[]{};</code> does?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1511355994, "post_id": 47435451, "comment_id": 81825100, "body": "What is this <code>std::string listofthings[] {};</code>?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1511356024, "post_id": 47435451, "comment_id": 81825119, "body": "It compiles for you? because <a href=\"http://coliru.stacked-crooked.com/a/729fcd6e2b7bd426\" rel=\"nofollow noreferrer\">it doesnt</a> for me."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1511356269, "post_id": 47435451, "comment_id": 81825277, "body": "@Borgleader: It&#39;s a clang extension (a dangerous one)"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 5, "last_activity_date": 1511357509, "last_edit_date": 1511357509, "creation_date": 1511355982, "answer_id": 47435514, "question_id": 47435451, "link": "https://stackoverflow.com/questions/47435451/while-loops-crashing-not-adding-words-to-the-array/47435514#47435514", "title": "While loops crashing, not adding words to the array", "body": "<p>You defined <code>listofthings</code> as an empty C-style array (zero elements).</p>\n\n<pre><code>std::string listofthings[]\n{\n};\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/a/47435756/6022656\">pointed by AndyG</a>, the language require that a size grather than zero, so your program is ill-formed. </p>\n\n<p>So, when you use it, </p>\n\n<pre><code>listofthings[counter] = word;\n</code></pre>\n\n<p>the behavior is undefined and, in your case, the program crash.</p>\n\n<p>Suggestion: transform <code>listofthings</code> in a <code>std::vector</code></p>\n\n<pre><code>std::vector&lt;std::string&gt; listofthings;\n</code></pre>\n\n<p>and add elements using <code>emplace_back()</code> or <code>push_back()</code></p>\n\n<pre><code>listofthings.emplace_back(std::move(word));\n</code></pre>\n\n<p>There is no need of <code>counter</code> and <code>listnr</code> (you can use <code>listofthings.size()</code>) and the print cycle become</p>\n\n<pre><code>for ( auto const &amp; str : listofthings )\n   std::cout &lt;&lt; str &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 3, "last_activity_date": 1511357071, "last_edit_date": 1511357071, "creation_date": 1511356738, "answer_id": 47435756, "question_id": 47435451, "link": "https://stackoverflow.com/questions/47435451/while-loops-crashing-not-adding-words-to-the-array/47435756#47435756", "title": "While loops crashing, not adding words to the array", "body": "<p>The statement </p>\n\n<pre><code>std::string listofthings[]\n{\n};\n</code></pre>\n\n<p>Is ill-formed C++ because the language requires that the initializer for an array contain more than zero elements ([dcl.init.aggr]):</p>\n\n<blockquote>\n  <p>An array of unknown size initialized with a brace-enclosed initializer-list containing <code>n</code> <em>initializer-clauses</em>,\n  where <code>n</code> shall be greater than zero, is defined as having <code>n</code> elements.</p>\n</blockquote>\n\n<p>You just got unlucky because it appears you're using clang, which allows an extension for zero-sized arrays. (clang will warn if you have <a href=\"http://clang.llvm.org/docs/DiagnosticsReference.html#wpedantic\" rel=\"nofollow noreferrer\"><code>-Wpedantic</code></a> or <a href=\"http://clang.llvm.org/docs/DiagnosticsReference.html#wzero-length-array\" rel=\"nofollow noreferrer\"><code>-Wzero-length-array</code></a> turned on)</p>\n\n<p>You should instead declare your array to have enough space for what you need, OR, <a href=\"https://stackoverflow.com/a/47435514/27678\">follow max66's advice and use a std::vector</a></p>\n"}], "owner": {"reputation": 111, "user_id": 7047330, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bf7e1f696f5f97b3505a891a369e860e?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Palmkvist", "link": "https://stackoverflow.com/users/7047330/adam-palmkvist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1511357509, "creation_date": 1511355804, "last_edit_date": 1511357496, "question_id": 47435451, "link": "https://stackoverflow.com/questions/47435451/while-loops-crashing-not-adding-words-to-the-array", "title": "While loops crashing, not adding words to the array", "body": "<p>My program is supposed to ask the user to add a word that then will be added to the <code>string</code> array and after that, all words will be printed out. However, the program crashes in the while loop and strings don't get added to the array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int counter = 0;\n    bool isRunning = true;\n\n    std::string listofthings[]\n    {\n    };\n\n    while(isRunning)\n    {\n        char play;\n        std::string word;\n        std::cout &lt;&lt; \"Enter a word\" &lt;&lt; std::endl;\n        std::cin &gt;&gt; word;\n        listofthings[counter] = word;\n        counter++;\n        std::cout &lt;&lt; \"Word added! q to Quit, any other key to continue\" &lt;&lt; std::endl;\n        std::cin &gt;&gt; play;\n        if(play == 'q')\n            isRunning = false;\n    }\n\n    int listnr = sizeof(listofthings)/sizeof(listofthings[0]);\n\n    for(int i = 0; i &lt; listnr; i++)\n    {\n        std::cout &lt;&lt; listofthings[i] &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8331793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92e29182e74782d0e5fdec7d247d9f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rushikesh", "link": "https://stackoverflow.com/users/8331793/rushikesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1511355867, "creation_date": 1511355867, "answer_id": 47435470, "question_id": 47435428, "link": "https://stackoverflow.com/questions/47435428/error-running-a-c-code-in-eclipse-it-says-your-program-cannot-output/47435470#47435470", "title": "Error running a C++ code in Eclipse.It says &#39;Your program cannot output..&#39;", "body": "<p>Even I had this problem a few days ago. You have to just press the red terminate button after you run the program.\nThis may be because your program might be still running on the OS.</p>\n"}], "owner": {"reputation": 13, "user_id": 8990219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a9a729793a8258dd017403e87efd7e?s=128&d=identicon&r=PG&f=1", "display_name": "John Ray", "link": "https://stackoverflow.com/users/8990219/john-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47435470, "answer_count": 1, "score": -1, "last_activity_date": 1511355867, "creation_date": 1511355726, "question_id": 47435428, "link": "https://stackoverflow.com/questions/47435428/error-running-a-c-code-in-eclipse-it-says-your-program-cannot-output", "title": "Error running a C++ code in Eclipse.It says &#39;Your program cannot output..&#39;", "body": "<p>This error is coming a lot of times. Everytime I run the code it says that your program cannot display output.</p>\n"}, {"tags": ["c++", "windows-10", "visual-studio-2017", "64-bit", "zbar"], "answers": [{"tags": [], "owner": {"reputation": 372, "user_id": 8568787, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a89f0fc803ad700b627a8b417901c1bc?s=128&d=identicon&r=PG&f=1", "display_name": "Max Krappmann", "link": "https://stackoverflow.com/users/8568787/max-krappmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1531958407, "last_edit_date": 1531958407, "creation_date": 1511360077, "answer_id": 47436888, "question_id": 47435274, "link": "https://stackoverflow.com/questions/47435274/zbar-in-cpp-project-libiconv-lib-not-found/47436888#47436888", "title": "Zbar in CPP Project libiconv.lib not found", "body": "<p>Added <code>ZBarWin64-master\\zbar\\libiconv</code> to system variables <strong>PATH</strong>.\nAdded <code>ZBarWin64-master\\zbar\\libiconv\\dll_x64</code> to system variables <strong>PATH</strong>.</p>\n\n<p>Don't know what fixed it, but now it is running like a charm :) </p>\n"}], "owner": {"reputation": 372, "user_id": 8568787, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/a89f0fc803ad700b627a8b417901c1bc?s=128&d=identicon&r=PG&f=1", "display_name": "Max Krappmann", "link": "https://stackoverflow.com/users/8568787/max-krappmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531958407, "creation_date": 1511355212, "question_id": 47435274, "link": "https://stackoverflow.com/questions/47435274/zbar-in-cpp-project-libiconv-lib-not-found", "title": "Zbar in CPP Project libiconv.lib not found", "body": "<p>Hello I try to integrate Zbar 64bit version into my visual studio cpp project. I downloaded the build from <a href=\"https://github.com/NaturalHistoryMuseum/ZBarWin64\" rel=\"nofollow noreferrer\">https://github.com/NaturalHistoryMuseum/ZBarWin64</a> and I set up my IncludePath to both include and \\zbar\\include also included both libs lib + zbar\\lib-64. The linker was also set to 64 version but now I'm getting an error. </p>\n\n<blockquote>\n  <p>The code execution cannot proceed because libiconv.dll was not found. Reinstalling the program may fix this problem. </p>\n</blockquote>\n\n<p>I already set the linker and lib path to the folder where the dll is. But still getting the error. </p>\n\n<p>Any suggestions? </p>\n\n<p>Kind regards </p>\n\n<p>Max</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1511354357, "post_id": 47434941, "comment_id": 81823958, "body": "that is not a newline character"}, {"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1511355638, "post_id": 47434941, "comment_id": 81824858, "body": "@tobi303 thanks for correcting that"}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1511354539, "post_id": 47435014, "comment_id": 81824084, "body": "C++ <code>std::string</code>s can contain <code>\\0</code> and <code>cout</code> will consider it part of the string. The issue is with C strings."}, {"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511355777, "post_id": 47435014, "comment_id": 81824953, "body": "what interjay said is also verified by the second cout statement"}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": -2, "last_activity_date": 1511354969, "last_edit_date": 1511354969, "creation_date": 1511354469, "answer_id": 47435014, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435014#47435014", "title": "Why is the content after the zero character not assigned?", "body": "<p><code>\u2019\\0\u2019</code> denotes the end of a string, so any characters coming behind it are not considered a part of the string by most functions, including <code>cout</code>.</p>\n\n<p>Consider that these functions need to have a way to know how far to go in the string (otherwise they would continue through all the memory), and th <code>\u2019\\0\u2019</code> is the agreed-upon end-marker.</p>\n\n<p>If you want a newline, use <code>\u2019\\n\u2019</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511355914, "post_id": 47435056, "comment_id": 81825055, "body": "i intented to write \\0 not a newline character. You can edit that accordingly"}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 2, "last_activity_date": 1511354593, "creation_date": 1511354593, "answer_id": 47435056, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435056#47435056", "title": "Why is the content after the zero character not assigned?", "body": "<p>In C++, <strong>C-style strings are terminated by a zero character</strong>.</p>\n\n<p>This code:</p>\n\n<pre><code>a = \"this is string\\0 this part not assigned why?\";\n</code></pre>\n\n<p>You're calling the function <code>string&amp; string::operator =(const char*)</code>, which <strong>determines the end of string by an occurrence of a zero</strong>. Of course it thinks the string is over when it sees <code>\\0</code>.</p>\n\n<p>FYR, if you want a newline character, use <code>\\n</code> instead of a zero character.</p>\n"}, {"comments": [{"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 2, "creation_date": 1511356110, "post_id": 47435076, "comment_id": 81825181, "body": "i dont think c++ marks the end of string with \\0 character , i think its only for C style strings"}], "tags": [], "owner": {"reputation": 739, "user_id": 7559012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/695e8ec49e5dae82f56dd6874ff187a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bonje Fir", "link": "https://stackoverflow.com/users/7559012/bonje-fir"}, "is_accepted": false, "score": 1, "last_activity_date": 1511356568, "last_edit_date": 1511356568, "creation_date": 1511354640, "answer_id": 47435076, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435076#47435076", "title": "Why is the content after the zero character not assigned?", "body": "<p>C and C++(for c-style strings) mark end of string with <code>'\\0'</code> character. Suppose <code>\"hi\"</code> as an string. It contains three characters i.e <code>h</code>, <code>i</code> and <code>\\0</code> actually.</p>\n"}, {"comments": [{"owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "edited": false, "score": 0, "creation_date": 1511356377, "post_id": 47435170, "comment_id": 81825353, "body": "can you explain more about the &#39;s&#39; suffix"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1511363367, "post_id": 47435170, "comment_id": 81830432, "body": "Note the <i>assignment operator</i> is called the way the OP has it. In your case, yes, the constructor is called."}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 3, "last_activity_date": 1511464781, "last_edit_date": 1511464781, "creation_date": 1511354906, "answer_id": 47435170, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435170#47435170", "title": "Why is the content after the zero character not assigned?", "body": "<p>You are <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%3D\" rel=\"nofollow noreferrer\">assigning</a> the value of a null terminated <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">string literal</a> to your <code>std::string</code> variable. The string literal gets <em>cut off</em> at the null terminator <code>\\0</code> because it is of type <code>const char[]</code> so the resulting string is:</p>\n\n<blockquote>\n  <p><code>this is string</code></p>\n</blockquote>\n\n<p>If you want to keep the entire string then use the string's  <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%22%22s\" rel=\"nofollow noreferrer\">operator\"\"s</a>, add the <code>s</code> suffix and compile with the C++14 support enabled. This will form a string literal of type <code>std::string</code>:</p>\n\n<pre><code>std::string a = \"this is string\\0 this part not assigned why?\"s;\nstd::cout &lt;&lt; a;\n</code></pre>\n\n<p>The result is now:</p>\n\n<blockquote>\n  <p><code>this is string this part not assigned why?</code></p>\n</blockquote>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">reference</a> states (emphasis mine):</p>\n\n<blockquote>\n  <p>Initialization with a string literal that contains embedded '\\0'\n  characters uses the overload (5), which <strong>stops</strong> at the first null\n  character. This can be avoided by specifying a different constructor\n  or by using <strong>operator\"\"s</strong>:</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1511363300, "post_id": 47435207, "comment_id": 81830382, "body": "No, <code>a</code> is default-constructed in the line above."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1511354987, "creation_date": 1511354987, "answer_id": 47435207, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435207#47435207", "title": "Why is the content after the zero character not assigned?", "body": "<p>The expression <code>a = \"this is string\\0 this part not assigned why?\"</code> is using the <code>std::string</code> assignment operator takes a <code>const char*</code> as an argument. (The <code>const char[]</code> literal decays to a <code>const char*</code>.)</p>\n\n<p>That operator is defined to stop reading when it encounters the first NUL-terminator. In your case, that will be the explicit <code>\\0</code> in the input literal, not the implicit one at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 1, "last_activity_date": 1511358643, "last_edit_date": 1511358643, "creation_date": 1511355549, "answer_id": 47435378, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned/47435378#47435378", "title": "Why is the content after the zero character not assigned?", "body": "<p>To use the entire string literal as the value of the string variable, you can pass in the length of the string literal.  That can include the explicit and implicit <code>'\\0'</code> characters as well.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing std::string;\nusing std::cout;\nusing std::endl;\n\ntemplate&lt;typename T, std::size_t size&gt;\nstd::size_t GetArrayLength(T(&amp;)[size]){\n  return size;\n}\n\nint main() {\n  string a;\n  char const s[] = \"this is a string\\0 this part not assigned why?\";\n  a = string{s, GetArrayLength(s)};\n  cout &lt;&lt; a &lt;&lt; endl;\n  for (auto c : a) {\n    if (c &gt;= ' ' &amp;&amp; c &lt;= '~')\n      cout &lt;&lt; c;\n    else\n      cout &lt;&lt; \"&lt;\" &lt;&lt; (int)c &lt;&lt; \"&gt;\";\n  }\n  cout &lt;&lt; endl;\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 8667423, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/537e0ba00355c2a7431d571a2917824f?s=128&d=identicon&r=PG&f=1", "display_name": "rimalroshan", "link": "https://stackoverflow.com/users/8667423/rimalroshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 47435170, "answer_count": 6, "score": 0, "last_activity_date": 1511464781, "creation_date": 1511354270, "last_edit_date": 1511354506, "question_id": 47434941, "link": "https://stackoverflow.com/questions/47434941/why-is-the-content-after-the-zero-character-not-assigned", "title": "Why is the content after the zero character not assigned?", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\nint main(){\n    string a;\n    a=\"this is string\\0 this part not assigned why?\";\n    cout&lt;&lt;a;\n    cout&lt;&lt;\"sth\";\ncout&lt;&lt;endl;\n    a.push_back('\\0');\n        cout&lt;&lt;a;\n        cout&lt;&lt;\"sth\";\n}\n</code></pre>\n\n<p>Q: Why is the content after the <code>\\0</code> not assigned to the string <code>a</code>?    </p>\n"}, {"tags": ["c++", "permissions", "compiler-optimization"], "comments": [{"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1511354757, "post_id": 47434860, "comment_id": 81824236, "body": "Just a remark; some people don&#39;t like exceptions being raised in constructors and/or throwing (expensive) exception for typical testing purposes."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 2, "creation_date": 1511354878, "post_id": 47434860, "comment_id": 81824335, "body": "@Stefan: Those people are wrong. And I&#39;m not going to call that subjective. C++ constructors and exceptions were designed hand in hand. For instance, the inability to return an error code from a constructor is justified by the fact that you throw exceptions instead of returning error codes."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511355222, "post_id": 47434860, "comment_id": 81824542, "body": "@MSalters: maybe that&#39;s why I never found a true satisfying answer backing their argument ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 2, "creation_date": 1511355725, "post_id": 47434984, "comment_id": 81824908, "body": "@Stefan I was strongly considering downvoting, but then didn&#39;t. The reason is recommending <code>volatile</code>. That is not what <code>volatile</code> is for and it absolutely doesn&#39;t signal <i>&quot;this object does something interesting in constructor or destructor&quot;</i> to me. And if you need to add <code>volatile</code> here to fix your broken compiler you are just in a world of hurt that adding <code>volatile</code> will not fix."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511355852, "post_id": 47434984, "comment_id": 81825007, "body": "I did improve that <code>volatile</code> is not necessary. But I strongly think that some annotation is required."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1511356127, "post_id": 47434984, "comment_id": 81825195, "body": "Besides the use of <code>volatile</code>; I do believe the argument of an (unexpected-)side-effect-only-by-constructor-object is valid. I think it led OP to the question in the first place."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1511357684, "post_id": 47434984, "comment_id": 81826314, "body": "I&#39;d remove volatile from the answer altogether, it has nothing to do with this. If the annotation is needed, then it&#39;s bad design. If <code>Permission</code> does something important, it should do it with a proper function call, by a proper name, not &quot;hidden&quot; in the constructor."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1511357798, "last_edit_date": 1511357798, "creation_date": 1511354402, "answer_id": 47434984, "question_id": 47434860, "link": "https://stackoverflow.com/questions/47434860/unused-objects-and-link-time-optimization/47434984#47434984", "title": "Unused objects and link time optimization", "body": "<blockquote>\n  <p>Is there a guarantee that these permission objects won't be optimized out because I just construct them but never use them again (They need to throw if the permission is denied)?</p>\n</blockquote>\n\n<p>I believe that yes, per the \"as-if-rule\" (and the same guarantees apply to <a href=\"http://en.cppreference.com/w/cpp/thread/lock_guard\" rel=\"nofollow noreferrer\"><code>std::lock_guard</code></a> which is generally used likewise). </p>\n\n<p>Be sure to <strong>add some comment</strong> (since a side-effecting-only constructor might be very surprising, especially if the constructor normally don't do anything useful unless some exception is thrown).</p>\n\n<p><strike>a previous version of that answer mentioned <code>volatile</code> which is not relevant</strike></p>\n\n<p><sup>BTW, compilers should not LTO-optimize such a code, but that might be an infrequent case, so you might check that they do not.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1511354578, "creation_date": 1511354578, "answer_id": 47435049, "question_id": 47434860, "link": "https://stackoverflow.com/questions/47434860/unused-objects-and-link-time-optimization/47435049#47435049", "title": "Unused objects and link time optimization", "body": "<p>Yes. Optimizations are mostly based on the \"as-if-rule\", meaning a compiler can do whatever it wants as long as the result behaves as if the compiler had strictly followed the standard and not done any optimizations.</p>\n\n<p>The optimization in question would change the behavior (exception thrown vs not thrown) so it is not allowed. Unless of course you have some UB in the code because then strictly following the standard becomes irrelevant (no guarantees whatsoever).</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1511354741, "creation_date": 1511354741, "answer_id": 47435111, "question_id": 47434860, "link": "https://stackoverflow.com/questions/47434860/unused-objects-and-link-time-optimization/47435111#47435111", "title": "Unused objects and link time optimization", "body": "<p>Yes. Optimizations work by the as-if rule. The program has to behave as if it's running on a compliant C++ implementation. Now the particular \"compliant behavior\" might not always be what you expect from the actual hardware. E.g. the speed of a empty loop might be too fast for your CPU model, because the loop was optimized out. </p>\n\n<p>However, every implementation must behave <em>as if</em> it calls your constructor. That does include inlining the constructor (no function call in assembly), but the actual content of the ctor, such as console I/O, still has to happen</p>\n"}], "owner": {"reputation": 787, "user_id": 5666503, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/03717a78503b9c561206ff55176b3174?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/5666503/gustavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1511357798, "creation_date": 1511354040, "question_id": 47434860, "link": "https://stackoverflow.com/questions/47434860/unused-objects-and-link-time-optimization", "title": "Unused objects and link time optimization", "body": "<p>Let's consider I have a class Permission which is constructed with a username and a permission identifier. The constructor of this permission class will check if the user has that specific permission and throws if not. </p>\n\n<p>Inside the api request handler, these permission objects are stack variables and constructed with a user and a permission. I expect a throw if there is no permission for that user. </p>\n\n<p>Is there a guarantee that these permission objects won't be optimized out because I just construct them but never use them again (They need to throw if the permission is denied)?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "signals-slots", "qt-signals"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1511354183, "post_id": 47434694, "comment_id": 81823857, "body": "Those aren&#39;t <i>invoking</i> the slot - but you&#39;ve established a <i>queued connection</i>, which will serialise the invocations."}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1511354212, "post_id": 47434694, "comment_id": 81823877, "body": "Interesting question but in what use case would that occur ? It would mean you are processing the slot in a thread while other methods from the same object are running in the other threads and potentially emitting the signal. Both the method who emits the signal and the slot-method could then access data from <code>A a;</code> at the same time, no matter the connection."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "edited": false, "score": 0, "creation_date": 1511354398, "post_id": 47434694, "comment_id": 81823989, "body": "@ymoreau, let&#39;s say the thread of <code>class A</code> is a TCP thread which sends data to server. Now thread B and C are sending their own data at their own convenience. This is the use case for me as of now."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1511354582, "post_id": 47434694, "comment_id": 81824120, "body": "I was not quite right in my first comment - this is an <i>auto</i> connection, not a <i>queued</i> connection."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1511354826, "post_id": 47434694, "comment_id": 81824291, "body": "@TobySpeight, I have updated the Qn. Due to complexity, the code example is not possible. Will <code>Qt::QueuedConnection</code> will eliminate the need of Mutexes? If possible, plz expand your comment in form of answer with more details."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1511354973, "post_id": 47434694, "comment_id": 81824389, "body": "I claim that the code example <i>is</i> possible.  What do you need - two objects and two threads?  Is it really so hard?"}], "answers": [{"tags": [], "owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1511354420, "creation_date": 1511354420, "answer_id": 47434992, "question_id": 47434694, "link": "https://stackoverflow.com/questions/47434694/is-mutex-required-in-qt-if-different-threads-are-invoking-same-signal-of-anothe/47434992#47434992", "title": "Is mutex required in Qt, if different threads are invoking same signal of another different thread?", "body": "<blockquote>\n  <p>Do I need mutex-locking to protect data of A a;?</p>\n</blockquote>\n\n<p>In case you are accessing <code>a</code>'s data outside of the thread in which <code>a</code>'s event loop lives, yes you do need a lock. </p>\n"}, {"comments": [{"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511354969, "post_id": 47435034, "comment_id": 81824386, "body": "Do you mean that if from 2 different processors, if <code>thread B &amp; C</code> together invoke <code>MySignal()</code>, then without any mutexes in the slot method, Qt will make the <code>MySlot()</code> invocations sequential? That implies that Qt must be using mutexes."}, {"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "reply_to_user": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511355084, "post_id": 47435034, "comment_id": 81824457, "body": "Yes. You&#39;re right. For <code>Qt::QueuedConnection</code> Qt internally uses mutexes to put an event to the receiver&#39;s event loop."}], "tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 1, "last_activity_date": 1511430912, "last_edit_date": 1511430912, "creation_date": 1511354527, "answer_id": 47435034, "question_id": 47434694, "link": "https://stackoverflow.com/questions/47434694/is-mutex-required-in-qt-if-different-threads-are-invoking-same-signal-of-anothe/47435034#47435034", "title": "Is mutex required in Qt, if different threads are invoking same signal of another different thread?", "body": "<p>Assume those threads have been created on the main thread and since <code>connect</code> by default uses <code>Qt::AutoConnection</code> and docs say:</p>\n\n<blockquote>\n  <p>(Default) If the receiver lives in the thread that emits the signal, <code>Qt::DirectConnection</code> is used. Otherwise, <code>Qt::QueuedConnection</code> is used. The connection type is determined when the signal is emitted.</p>\n</blockquote>\n\n<p>By the time a thread emits a signal, since sender (the code running in <code>QThread::run()</code>) and receiver (the thread who has created the <code>QThread</code> object itself) are different threads, <code>Qt::QueuedConnection</code> is used. That is:</p>\n\n<blockquote>\n  <p>The slot is invoked when control returns to the event loop of the receiver's thread. The slot is executed in the receiver's thread.</p>\n</blockquote>\n\n<p>So all <code>MySlot</code> will be sequentially executed on the main thread.</p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>You've somewhat changed your question! In general, The following connection means: <code>MySignal</code> could be emitted in any threads (i.e. the thread in which you've called <code>emit MySignal()</code>), <strong>but</strong> <code>MySlot</code> is <em>only</em> called in the thread which <code>objectA</code> belongs to (i.e. thread affinity). If those threads are the same, the slot is executed synchronously. </p>\n\n<pre><code>connect(&amp;objectA, SIGNAL(MySignal()), &amp;objectA, SLOT(MySlot())); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511355097, "post_id": 47435160, "comment_id": 81824467, "body": "Let&#39;s imagine that objects of <code>B &amp; C</code> have their own versions of <code>MySignal()</code> which are connected with <code>A::MySlot()</code> with <code>QueuedConnetion</code>. Even in that case, is it possible that <code>MySlot()</code> will be executed in sequential way? If yes, then that means that Qt must be using mutexes internally to make sure that both the calls are sequential."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511355338, "post_id": 47435160, "comment_id": 81824631, "body": "If the <code>B</code> and <code>C</code> objects emit their own signals, then yes, those will be queued until the event loop of the <code>A</code> thread processes them.  Yes, Qt performs the appropriate locking when it posts events.  See <code>QCoreApplication::postEvent()</code> and <code>QAbstractEventDispatcher::processEvents()</code>"}, {"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1511356531, "post_id": 47435160, "comment_id": 81825460, "body": "<i>&quot;and emitted only from code running in that object&#39;s thread.&quot;</i> That&#39;s wrong!"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1511358395, "post_id": 47435160, "comment_id": 81826801, "body": "@Hiim, I guess you have a different definition of &quot;normal&quot;, then.  (That said, I think your answer is clearer and more directly answers the question - I&#39;ve voted)."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1511354889, "creation_date": 1511354889, "answer_id": 47435160, "question_id": 47434694, "link": "https://stackoverflow.com/questions/47434694/is-mutex-required-in-qt-if-different-threads-are-invoking-same-signal-of-anothe/47435160#47435160", "title": "Is mutex required in Qt, if different threads are invoking same signal of another different thread?", "body": "<p>There's something suspect in your design.</p>\n\n<p>Normally, signals are <code>protected</code>, and emitted only from code running in that object's thread.  A more conventional design would have objects B and C emit <em>their own</em> signals, and you would connect those signals to the slots of <code>objectA</code>.</p>\n\n<p>Whilst what you have might <em>work</em>, it will be hard to reason about, and it's probably a good time to review your design before it becomes too tangled to understand what happens in which thread.</p>\n"}, {"comments": [{"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511362043, "post_id": 47436722, "comment_id": 81829385, "body": "The language is not clear. Can you plz describe in more details? Who should have <code>BlockingConnection</code> and who should have <code>QueuedConnection</code>?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "reply_to_user": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 1, "creation_date": 1511362323, "post_id": 47436722, "comment_id": 81829601, "body": "@iammilind If the <code>emit</code> happens on a different thread, and you want the <code>emit</code> to block, use a blocking connection. If you don&#39;t want the <code>emit</code> to block, use a mutex to protect the data. If the <code>emit</code> happens on the same thread, it&#39;s going to be a blocking connection anyway. If the <code>emit</code> happens in several threads, then you always need a mutex."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1511396666, "post_id": 47436722, "comment_id": 81846981, "body": "By any chance is it feasible that fair a low priority thread we use queued connection and for higher priority thread we use blicking connection? Or both threads must use blocking?"}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1511362453, "last_edit_date": 1511362453, "creation_date": 1511359585, "answer_id": 47436722, "question_id": 47434694, "link": "https://stackoverflow.com/questions/47434694/is-mutex-required-in-qt-if-different-threads-are-invoking-same-signal-of-anothe/47436722#47436722", "title": "Is mutex required in Qt, if different threads are invoking same signal of another different thread?", "body": "<p>If the object the slot is executed on is in a different thread than the object that does the <code>emit</code>, then the call is not sequential. The <code>emit</code> will not block. Thus if you access data that the emitting object might be writing to after the <code>emit</code>, you need to either synchronize that access with a mutex, or use a blocking connection (which means you're forcing sequential execution, meaning <code>emit</code> will block until the slot has returned.)</p>\n\n<p>So, if the <code>emit</code> happens on a different thread, and you want it to block, use a blocking connection. If you don't want the <code>emit</code> to block, use a mutex to protect the data. If the <code>emit</code> happens on the same thread, it's going to be a blocking connection anyway.</p>\n\n<p>However, if the <code>emit</code> happens in several threads, then you always need a mutex.</p>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1511430912, "creation_date": 1511353533, "last_edit_date": 1511354648, "question_id": 47434694, "link": "https://stackoverflow.com/questions/47434694/is-mutex-required-in-qt-if-different-threads-are-invoking-same-signal-of-anothe", "title": "Is mutex required in Qt, if different threads are invoking same signal of another different thread?", "body": "<p>Let <code>class A</code> is having only one object named as <code>objectA</code> and it's being on a separate thread (say \"TCP\"):</p>\n\n<pre><code>connect(&amp;objectA, SIGNAL(MySignal()), &amp;objectA, SLOT(MySlot()));    \n</code></pre>\n\n<p><strong>Note</strong>: I assume that <code>Qt::AutoConnection</code> will take care of whether it's <code>QueuedConnection</code> or <code>DirectConnection</code>. I am OK with any type, which makes it safer.</p>\n\n<p>Now if B (say \"Processor\") &amp; C (say \"Utility\") are different threads, which are invoking <code>MySignal()</code> with their own convenience.<br>\nIn the <code>MySlot()</code>, some data of <code>objectA</code> is getting written.</p>\n\n<p><strong>Question</strong>:<br>\nDo I need mutex-locking to protect data of <code>A a;</code>?<br>\nOR<br>\nThe <code>MySignal()</code> will be queued automatically and hence the <code>MySlot()</code> will get sequentially invoked?</p>\n\n<p><strong>Use case</strong>: Currently I am having a TCP thread which send/receive data to/from server. At times, 2 threads may send the data at same time. It's likely to run 2 threads in perfect parallel now a days due to multi-processor architecture.</p>\n"}, {"tags": ["c++", "c++11", "gcc"], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 3, "last_activity_date": 1511354913, "creation_date": 1511354913, "answer_id": 47435173, "question_id": 47434643, "link": "https://stackoverflow.com/questions/47434643/c-11-regex-expression-does-not-return-groups-as-expected/47435173#47435173", "title": "C++ 11 regex expression does not return groups as expected", "body": "<p>1) Your regex doesn't match the last part, change it to:</p>\n\n<pre><code>  const std::string  regex_str(\"([^\\\\[]+)(\\\\[[^\\\\]]*\\\\])(\\\\s+|\\\\n|$)\");\n</code></pre>\n\n<p>2) <code>match.str()</code> returns the <em>whole</em> matched string, to extract matched <em>groups</em>, use <code>operator[]</code>:</p>\n\n<pre><code>  std::smatch  match = *i;\n  std::cout &lt;&lt; \"got: 1='\" &lt;&lt; match[1] &lt;&lt; \"' 2='\" &lt;&lt; match[2] &lt;&lt; \"' 3='\" &lt;&lt; match[3] &lt;&lt; \"'\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>regex string = '([^\\[]+)(\\[[^\\]]*\\])(\\s+|\\n|$)'\ngot: 1='First Title' 2='[]' 3='  '\ngot: 1='Second Title' 2='[]' 3='   '\ngot: 1='-Third Title' 2='[]' 3=''\n</code></pre>\n"}], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 47435173, "answer_count": 1, "score": 2, "last_activity_date": 1511355037, "creation_date": 1511353387, "last_edit_date": 1511355037, "question_id": 47434643, "link": "https://stackoverflow.com/questions/47434643/c-11-regex-expression-does-not-return-groups-as-expected", "title": "C++ 11 regex expression does not return groups as expected", "body": "<p>I want to write a regulare expression that parses the syntax of a special format string. It should help me to detect format errors and also split the format string into the separate parts to handle.</p>\n\n<p>But, as hard as I try, I cannot get the splitting to work as expected.</p>\n\n<p>From what I've read in the documentation, the '(?: )' syntax should define a non-splitting group, whereas the normal bracket expression '( )' should define a sub-match that is returned separately. But it doesn't.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n\nstd::string parseCode( std::regex_constants::error_type etype);\n\nint main()\n{\n   const std::string  regex_str( \"(?:([^\\\\[]+)(\\\\[[^\\\\]]*\\\\])( +|\\\\n))\");\n   std::regex  atr;\n\n   std::cout &lt;&lt; \"regex string = '\" &lt;&lt; regex_str &lt;&lt; \"'\" &lt;&lt; std::endl;\n\n   try\n   {\n      atr.assign( regex_str);\n   } catch (const std::regex_error&amp; e)\n   {\n      std::cerr &lt;&lt; \"Error: \" &lt;&lt; e.what() &lt;&lt; \"; code: \" &lt;&lt; parseCode(e.code()) &lt;&lt; std::endl;\n      exit( EXIT_FAILURE);\n   } // end try\n\n   {\n      const std::string  title( \"First Title[]  Second Title[]   -Third Title[]\");\n      auto  regex_begin = std::sregex_iterator( title.begin(), title.end(), atr);\n\n      for (std::sregex_iterator i = regex_begin; i != std::sregex_iterator(); ++i)\n      {\n         std::smatch  match = *i;\n         std::cout &lt;&lt; \"got: '\" &lt;&lt; match.str() &lt;&lt; \"'\" &lt;&lt; std::endl;\n      } // end for\n\n      auto  subregex_begin = std::sregex_token_iterator( title.begin(),\n         title.end(), atr, -1);\n\n      for (std::sregex_token_iterator i = subregex_begin; i != std::sregex_token_iterator(); ++i)\n      {\n         std::cout &lt;&lt; \"got sub: '\" &lt;&lt; *i &lt;&lt; \"'\" &lt;&lt; std::endl;\n      } // end for\n   } // end scope\n\n}\n\nstd::string parseCode( std::regex_constants::error_type etype)\n{\n\n   switch (etype)\n   {\n   case std::regex_constants::error_collate:\n       return \"error_collate: invalid collating element request\";\n   case std::regex_constants::error_ctype:\n       return \"error_ctype: invalid character class\";\n   case std::regex_constants::error_escape:\n       return \"error_escape: invalid escape character or trailing escape\";\n   case std::regex_constants::error_backref:\n       return \"error_backref: invalid back reference\";\n   case std::regex_constants::error_brack:\n       return \"error_brack: mismatched bracket([ or ])\";\n   case std::regex_constants::error_paren:\n       return \"error_paren: mismatched parentheses(( or ))\";\n   case std::regex_constants::error_brace:\n       return \"error_brace: mismatched brace({ or })\";\n   case std::regex_constants::error_badbrace:\n       return \"error_badbrace: invalid range inside a { }\";\n   case std::regex_constants::error_range:\n       return \"erro_range: invalid character range(e.g., [z-a])\";\n   case std::regex_constants::error_space:\n       return \"error_space: insufficient memory to handle this regular expression\";\n   case std::regex_constants::error_badrepeat:\n       return \"error_badrepeat: a repetition character (*, ?, +, or {) was not preceded by a valid regular expression\";\n   case std::regex_constants::error_complexity:\n       return \"error_complexity: the requested match is too complex\";\n   case std::regex_constants::error_stack:\n       return \"error_stack: insufficient memory to evaluate a match\";\n   default:\n       return \"\";\n   }\n}\n</code></pre>\n\n<p>And here's the output:</p>\n\n<pre><code>regex string = '(?:([^\\[]+)(\\[[^\\]]*\\])( +))'\ngot: 'First Title[]  '\ngot: 'Second Title[]   '\ngot sub: ''\ngot sub: ''\ngot sub: '-Third Title[]'\n</code></pre>\n\n<p>And this is what I want/expect:</p>\n\n<pre><code>regex string = '(?:([^\\[]+)(\\[[^\\]]*\\])( +))'\ngot: 'First Title[]  '\ngot: 'Second Title[]   '\ngot: '-Third Title[]'\ngot sub: 'First  Title'\ngot sub: '[]'\ngot sub: '  '\ngot sub: 'Second  Title'\ngot sub: '[]'\ngot sub: '  '\ngot sub: '-Third Title'\ngot sub: '[]'\n</code></pre>\n\n<p>I am using g++ 5.3.1 on RHEL 7.2.<br>\nGot the same result with g++ 6.3 on IdeOne.com: <a href=\"https://ideone.com/dj4Mqf\" rel=\"nofollow noreferrer\">https://ideone.com/dj4Mqf</a></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "cmake"], "comments": [{"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1511353572, "post_id": 47434632, "comment_id": 81823461, "body": "You can try <code>set_target_properties(MyAppExecutable PROPERTIES VS_GLOBAL_AppDataFolder &quot;D:\\\\myappdata&quot;)</code>"}, {"owner": {"reputation": 223, "user_id": 525732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52e6bd28b81edb61b0d667785f9d1b21?s=128&d=identicon&r=PG", "display_name": "teupoui", "link": "https://stackoverflow.com/users/525732/teupoui"}, "reply_to_user": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1511358495, "post_id": 47434632, "comment_id": 81826881, "body": "I tried it and it works ! Thanks for the suggestion. Can you make an answer, so that I can select it as the solution ?"}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1511358737, "post_id": 47434632, "comment_id": 81827062, "body": "You&#39;re welcome. Put my comment into an answer. I think you can even use <code>$&lt;SHELL_PATH:...&gt;</code> generator expression if the path is known to CMake (to avoid manually converting to backslashes)."}], "answers": [{"tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": true, "score": 4, "last_activity_date": 1511358718, "creation_date": 1511358718, "answer_id": 47436428, "question_id": 47434632, "link": "https://stackoverflow.com/questions/47434632/how-can-cmake-add-custom-entry-in-a-projects-vcxproj-propertygroup/47436428#47436428", "title": "How can cmake add custom entry in a project&#39;s vcxproj PropertyGroup?", "body": "<p><em>Turning my comment into an answer</em></p>\n\n<p>For setting a global VS project property you can use the <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/VS_GLOBAL_variable.html\" rel=\"nofollow noreferrer\"><code>VS_GLOBAL_&lt;variable&gt;</code></a> target property:</p>\n\n<pre><code>set_target_properties(MyAppExecutable PROPERTIES VS_GLOBAL_AppDataFolder \"D:\\\\myappdata\")\n</code></pre>\n\n<p><strong>Reference</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/44468507/how-to-add-linux-compilation-to-cmake-project-in-visual-studio\">How to Add Linux Compilation to Cmake Project in Visual Studio</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 223, "user_id": 525732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52e6bd28b81edb61b0d667785f9d1b21?s=128&d=identicon&r=PG", "display_name": "teupoui", "link": "https://stackoverflow.com/users/525732/teupoui"}, "is_accepted": false, "score": 0, "last_activity_date": 1511359022, "creation_date": 1511359022, "answer_id": 47436523, "question_id": 47434632, "link": "https://stackoverflow.com/questions/47434632/how-can-cmake-add-custom-entry-in-a-projects-vcxproj-propertygroup/47436523#47436523", "title": "How can cmake add custom entry in a project&#39;s vcxproj PropertyGroup?", "body": "<p>A way of doing it could be to generate a PowerShell script and make cmake call it at the end of the generation process.</p>\n\n<p>Here is an example of PowerShell script I have written :</p>\n\n<pre><code>$myvcxprojpath = 'D:\\build\\myapp\\PLATFORM\\MyAppExecutable.vcxproj'\n$mydatapath = 'D:\\myappdata'\n\n[xml]$xml = (Get-Content $myvcxprojpath)\n$globalpropgroup = $xml.Project.PropertyGroup | where {$_.Label -eq 'Globals'}\n$datapath = $globalpropgroup.AppDataFolder\nif ($datapath -eq $null)\n{\n    $newNode = $xml.CreateElement(\"AppDataFolder\")\n    $newNode.set_InnerXML($mydatapath)\n    $globalpropgroup.AppendChild($newNode)\n}\nelse\n{\n    $globalpropgroup.AppDataFolder= $mydatapath\n}\n$xml = [xml]$xml.OuterXml.Replace(\" xmlns=`\"`\"\", \"\")\n$xml.Save($myvcxprojpath)\n</code></pre>\n\n<p>This script looks for the AppDataFolder entry. If it is not present it creates one ; in the other case it simply updates its content.</p>\n\n<p>I had to add a line to remove the empty <code>xmlns</code> label in the new xml node.</p>\n"}], "owner": {"reputation": 223, "user_id": 525732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52e6bd28b81edb61b0d667785f9d1b21?s=128&d=identicon&r=PG", "display_name": "teupoui", "link": "https://stackoverflow.com/users/525732/teupoui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 1, "accepted_answer_id": 47436428, "answer_count": 2, "score": 0, "last_activity_date": 1511359022, "creation_date": 1511353352, "question_id": 47434632, "link": "https://stackoverflow.com/questions/47434632/how-can-cmake-add-custom-entry-in-a-projects-vcxproj-propertygroup", "title": "How can cmake add custom entry in a project&#39;s vcxproj PropertyGroup?", "body": "<p>I am using cmake to generate a Windows/VisualStudio solution of a multi-platform C++ project.</p>\n\n<p>There is a specific entry (a simple path to a folder data) in project's properties that I would like cmake to fill in for me. This entry is added by an external plug-in I cannot modify.</p>\n\n<p>Filling the option in VS project properties adds the following entry in the <code>MyAppExecutable.vcxproj</code> file :</p>\n\n<pre><code>&lt;PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|PLATFORM'\"&gt;\n  &lt;AppDataFolder&gt;D:\\myappdata&lt;/AppDataFolder&gt;\n&lt;/PropertyGroup&gt;\n</code></pre>\n\n<p>I would like cmake to add this <code>AppDataFolder</code> value for me.</p>\n\n<p>It would be even better if it could set it at once for all possible <code>PLATFORM</code>, and whether compiling in <code>Release</code>, <code>Debug</code> or whatever else. Hopefully adding it inside <code>&lt;PropertyGroup Label=\"Globals\"&gt;</code> would achieve this objective ?</p>\n\n<p>Is there a way to make cmake set this value inside the project's file ?</p>\n"}, {"tags": ["c++", "breadth-first-search", "path-finding"], "comments": [{"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1511354065, "post_id": 47434560, "comment_id": 81823791, "body": "put all cells in &quot;not visited list&quot;, at start, while &quot;not visited&quot; list is not empty, construct path from current cell to first from the list. Upon entering cell, check if it is in &quot;not visited&quot; list and remove if it is, and do your stuff in the cell. It is not the most efficient way, but quite easy to implement using existing path-finding algorithm without modifying it."}, {"owner": {"reputation": 27, "user_id": 7999772, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3c80af86bad8a1e2e09cd66f83ddf39?s=128&d=identicon&r=PG&f=1", "display_name": "Emil", "link": "https://stackoverflow.com/users/7999772/emil"}, "reply_to_user": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1511357886, "post_id": 47434560, "comment_id": 81826443, "body": "@AndrewKashpur I&#39;ve done this, and implemented a function that traverses all nodes in a list. My issue is, that each node must have both x- and y-coordinates, so I can send information to the car, to make it turn etc. whenever it encounters a &quot;corner&quot;. I&#39;m having trouble understanding how to implement this however, do you happen to have any pointers?"}, {"owner": {"reputation": 2121, "user_id": 6468580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cJyP7.jpg?s=128&g=1", "display_name": "Luke Garrigan", "link": "https://stackoverflow.com/users/6468580/luke-garrigan"}, "edited": false, "score": 0, "creation_date": 1511438306, "post_id": 47434560, "comment_id": 81864392, "body": "If you show us your code we will be able to give you some pointers @Emil"}], "answers": [{"tags": [], "owner": {"reputation": 297, "user_id": 9102877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074040db5e59bc608cfcebf9b259ebc7?s=128&d=identicon&r=PG", "display_name": "QuIcKmAtHs", "link": "https://stackoverflow.com/users/9102877/quickmaths"}, "is_accepted": false, "score": 0, "last_activity_date": 1514190460, "last_edit_date": 1592644375, "creation_date": 1514190460, "answer_id": 47966984, "question_id": 47434560, "link": "https://stackoverflow.com/questions/47434560/visiting-all-nodes-in-a-grid-using-pathfinding/47966984#47966984", "title": "Visiting all nodes in a grid using pathfinding?", "body": "<h1>Logic</h1>\n<p>So first, we check all the squares if they contain metal.  Then we store the squares with metal in a boolean grid.</p>\n<h1>Pseudo-Code</h1>\n<pre><code>bool grid[10000][10000];\nfor (int i = 0; i &lt; width; i++){\n    for(int j = 0; j &lt; height; j++){\n       if (square is metal){\n           grid[i][j] = true; //means its visited.\n       }\n    }\n}\n//Conduct bfs here\ntypedef pair&lt;int , int&gt; pi; //introduce priority queues\ntypedef pair&lt;pi, int&gt; ppi;\nint dx[8] = {-1,-2, 1 ,2 ,-1, -2, 1, 2};//introduce movement coordinates\nint dy[8] = {-2,-1, -2,-1, 2, 1, 2, 1};\n//Check if the coordinates of the grid is true(visited) or false(unvisited)\n</code></pre>\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 27, "user_id": 7999772, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d3c80af86bad8a1e2e09cd66f83ddf39?s=128&d=identicon&r=PG&f=1", "display_name": "Emil", "link": "https://stackoverflow.com/users/7999772/emil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514190460, "creation_date": 1511353109, "question_id": 47434560, "link": "https://stackoverflow.com/questions/47434560/visiting-all-nodes-in-a-grid-using-pathfinding", "title": "Visiting all nodes in a grid using pathfinding?", "body": "<p>In our semester project we're attempting to make a small car which can search an area for metal in the ground. Each time it encounters an object in the ground, it has to mark down the coordinates for it, and find a path around it to visit all remaining nodes.</p>\n\n<p>We've implemented a way in which we can get the area noted down in a grid, so we have it all in a x-y coordinate. We've considered using a modified version of a pathfinding algorithm (breadth-first, A* or other) to find our way through the system, but we're having trouble with the implementation of it.</p>\n\n<p>Is it possible to modify any of these algorithms so instead of going from node A to B, it searches each coordinate, and \"re-paths\" if it encounters an object in the ground?</p>\n"}, {"tags": ["c++", "msbuild", "devenv"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 2331760, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0ee6aa2c4a3b21321850cd99c63d2ac7?s=128&d=identicon&r=PG", "display_name": "user2331760", "link": "https://stackoverflow.com/users/2331760/user2331760"}, "edited": false, "score": 0, "creation_date": 1511357574, "post_id": 47435649, "comment_id": 81826238, "body": "The build order is correct only  . that&#39;s why it is working with devenv. But with msbuild it is not picking the order present in solution file"}, {"owner": {"reputation": 2585, "user_id": 2980510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170931a3be1521d9b9266b084ecd6e79?s=128&d=identicon&r=PG", "display_name": "Rolo", "link": "https://stackoverflow.com/users/2980510/rolo"}, "reply_to_user": {"reputation": 91, "user_id": 2331760, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0ee6aa2c4a3b21321850cd99c63d2ac7?s=128&d=identicon&r=PG", "display_name": "user2331760", "link": "https://stackoverflow.com/users/2331760/user2331760"}, "edited": false, "score": 0, "creation_date": 1511360272, "post_id": 47435649, "comment_id": 81828081, "body": "That&#39;s why I said &quot;And/Or&quot; for dependencies and build order. The build order may look correct in VS, but if you still have errors due to the order, you may want to force some project dependencies, that will be respected by msbuild."}], "tags": [], "owner": {"reputation": 2585, "user_id": 2980510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170931a3be1521d9b9266b084ecd6e79?s=128&d=identicon&r=PG", "display_name": "Rolo", "link": "https://stackoverflow.com/users/2980510/rolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1511356422, "creation_date": 1511356422, "answer_id": 47435649, "question_id": 47434503, "link": "https://stackoverflow.com/questions/47434503/how-to-set-msbuild-to-take-compilation-or-build-order-from-solution-file/47435649#47435649", "title": "How to set MSBuild to take compilation or build order from solution file", "body": "<p>Open your solution in VisualStudio, on the solution explorer right click the solution name and look for \"Project Dependencies...\" and/or \"Project Build Order...\"</p>\n\n<p>The UI is self explanatory, so configure as required, save all and try the MsBuild command again.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XrEqq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XrEqq.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 91, "user_id": 2331760, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0ee6aa2c4a3b21321850cd99c63d2ac7?s=128&d=identicon&r=PG", "display_name": "user2331760", "link": "https://stackoverflow.com/users/2331760/user2331760"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 766, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511356422, "creation_date": 1511352963, "question_id": 47434503, "link": "https://stackoverflow.com/questions/47434503/how-to-set-msbuild-to-take-compilation-or-build-order-from-solution-file", "title": "How to set MSBuild to take compilation or build order from solution file", "body": "<p>We have set the parallel execution count to 1 so that all the projects will build one after other.In the Visual Studio settings.</p>\n\n<p>With below command from Devenv.exe we are able to compile the solution correctly.</p>\n\n<p>call vcvarsall.bat x86_amd64\ndevenv /Build \"Release|x64\" \"w:/Frameworks/Frameworks.sln\"</p>\n\n<p>But with MSBuild, with below command, the solution is failing to compile, when I cross check the log, the order of compilation of projects is not correct, not taking from solution file.</p>\n\n<p>call vcvarsall.bat x86_amd64\n\"C:\\Program Files (x86)\\MSBuild\\12.0\\Bin\\MSBuild.exe\" \"W:\\Frameworks\\Frameworks.sln\" /t:build /fl /flp:logfile=Frameworks.log;verbosity=normal /p:Configuration=Release;Platform=x64 /m:1</p>\n\n<p>Any suggestion, how to fix set msbuild to compile only from order mentioned in solution file.</p>\n"}, {"tags": ["c++", "function", "recursion"], "comments": [{"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 2, "creation_date": 1511351816, "post_id": 47434096, "comment_id": 81822369, "body": "What is <code>f</code> supposed to do?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 9, "creation_date": 1511351825, "post_id": 47434096, "comment_id": 81822378, "body": "<code>f(n)</code> calls <code>f(n)</code>. You pass the same parameter as argument, <b>unchanged</b>. When exactly should it stop?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511351866, "post_id": 47434096, "comment_id": 81822406, "body": "For anything other than <code>n==2</code> this will just infinitely call <code>f(n)</code> until something breaks."}, {"owner": {"reputation": 1638, "user_id": 366956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac48f00b4d8020a21400d54f8a5ff88?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/366956/steve"}, "edited": false, "score": 3, "creation_date": 1511352108, "post_id": 47434096, "comment_id": 81822565, "body": "(n-1)==1. That&#39;s a rather strange way of saying n==2. Unrelated to your problem however, which has been pointed out already by others."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1511352847, "post_id": 47434096, "comment_id": 81823019, "body": "@Bilkokuya - Quite the opposite if the shop has any sort of code review process"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1511352899, "post_id": 47434096, "comment_id": 81823039, "body": "Think also about the <i>mathematical</i> equation <code>f(n) = 2*f(n)-n</code> ...."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1511357907, "post_id": 47434096, "comment_id": 81826458, "body": "If <code>(n-1)==1</code> is false (i.e. if <code>n != 2</code>) a call of <code>f(n)</code> calls <code>f(n)</code>.   That is infinite recursion."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 10, "last_activity_date": 1511435153, "last_edit_date": 1511435153, "creation_date": 1511351868, "answer_id": 47434145, "question_id": 47434096, "link": "https://stackoverflow.com/questions/47434096/recursive-function-crash-in-c/47434145#47434145", "title": "Recursive function crash in C++", "body": "<p>Compile with all warnings and debug info (e.g. <code>g++ -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>), improve your code to get no warnings, then <strong>run your program <em>step by step</em> in a debugger</strong> (e.g. <code>gdb</code>).</p>\n\n<p>You'll discover -when using the debugger- that you have an infinite recursion, since <code>f(n)</code> is calling <code>f(n)</code>.</p>\n\n<p>When coding recursive functions, beware of excessive <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stack</a> depth. As a rule of thumb, each individual call frame should be less than a kilobyte, and the entire call stack is limited to about a megabyte (or a few of them). Details are implementation and operating system specific.</p>\n\n<p>Be also aware that some <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimizing compilers</a> (including recent <code>g++</code> when invoked with <code>-O2</code> or better) are able to optimize <em>some</em> <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\">tail calls</a> into iterative code.</p>\n"}], "owner": {"reputation": 35, "user_id": 7303502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a3f8e5327eceaf888640c2b1cfc954?s=128&d=identicon&r=PG&f=1", "display_name": "White S.", "link": "https://stackoverflow.com/users/7303502/white-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511435153, "creation_date": 1511351678, "question_id": 47434096, "link": "https://stackoverflow.com/questions/47434096/recursive-function-crash-in-c", "title": "Recursive function crash in C++", "body": "<p>I'm told by an online friend that this should work (shouldn't crash), but he hasn't given me any actual advice how to fix this..\nApologies if this question is overly simple, I'm still a beginner!</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint f(int n)\n{\nif((n-1)==1) return 1;\nelse return 2*f(n)-n;\n}\n\nint main()\n{\ncout&lt;&lt;f(1)&lt;&lt;endl;\ncout&lt;&lt;f(1)&lt;&lt;endl;\ncout&lt;&lt;f(0)&lt;&lt;endl;\ncout&lt;&lt;f(-3)&lt;&lt;endl;\ncout&lt;&lt;f(-10)&lt;&lt;endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1511352886, "post_id": 47434046, "comment_id": 81823032, "body": "Beware, identifiers starting with an underscore followed by an upper case letter are reserved. This is undefined behavior to declare one. Rule under <a href=\"http://eel.is/c++draft/lex.name#3.1\" rel=\"nofollow noreferrer\"><code>[lex.name]&#47;3.1</code></a>."}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "edited": false, "score": 4, "creation_date": 1511353357, "post_id": 47434046, "comment_id": 81823335, "body": "<b>SFINAE</b>, not SNIFAE. Substitution Failure Is Not An Error."}], "answers": [{"tags": [], "owner": {"reputation": 4954, "user_id": 893819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2wHm8.jpg?s=128&g=1", "display_name": "odinthenerd", "link": "https://stackoverflow.com/users/893819/odinthenerd"}, "is_accepted": true, "score": 6, "last_activity_date": 1511352164, "creation_date": 1511352164, "answer_id": 47434247, "question_id": 47434046, "link": "https://stackoverflow.com/questions/47434046/variadic-template-template-and-sfinae/47434247#47434247", "title": "Variadic template template and SFINAE", "body": "<pre><code>template &lt;template &lt;typename _Type, typename _State&gt; class, typename... _Inputs&gt;\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n{\n};\n</code></pre>\n\n<p>needs to be </p>\n\n<pre><code>template &lt;typename _Type, typename _State, typename... _Inputs&gt;\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n{\n};\n</code></pre>\n\n<p>in the pattern <code>Input&lt;_Type, _State&gt;</code> _Type and _State are just type wildcards, you only need the <code>template &lt;typename, typename&gt; class F</code> template template parameter syntax if you need to match a template template parameter with a wild card. In this case you are matching the template with a known template named Input</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 0, "creation_date": 1511352777, "post_id": 47434264, "comment_id": 81822980, "body": "You mention the underscore I use. What are you calling the implementation ?"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 0, "creation_date": 1511352975, "post_id": 47434264, "comment_id": 81823097, "body": "@sylvain The compiler and standard library."}, {"owner": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 0, "creation_date": 1511354836, "post_id": 47434264, "comment_id": 81824296, "body": "Is there any convention ? The _ is quite convenient."}, {"owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "reply_to_user": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 1, "creation_date": 1511356087, "post_id": 47434264, "comment_id": 81825166, "body": "@sylvain The most common way is to just capitalize template parameters and not use the underscore."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 0, "creation_date": 1511357242, "post_id": 47434264, "comment_id": 81826006, "body": "@sylvain avoiding <code>_Names _Like _This</code> is not just a convention, it&#39;s a rule that you must follow or be destroyed^W gently corrected. See <a href=\"http://stackoverflow.com/q/228783/981959\">reserved names</a>. It&#39;s not &quot;convenient&quot; to litter your code with unnecessary noise, and it&#39;s certainly not convenient to risk making your code fail to compile because you used names reserved for the implementation."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 5, "last_activity_date": 1511352217, "creation_date": 1511352217, "answer_id": 47434264, "question_id": 47434046, "link": "https://stackoverflow.com/questions/47434046/variadic-template-template-and-sfinae/47434264#47434264", "title": "Variadic template template and SFINAE", "body": "<p>Your partial specialization for the last case is not correct. You need to deduce <code>_Type</code> and <code>_State</code>, not have a template template parameter.</p>\n\n<pre><code>template &lt;class _Type, class _State, typename... _Inputs&gt;\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n{\n};\n</code></pre>\n\n<p>In your original code, the names inside the template template parameter do not introduce template parameters for that partial specialization.</p>\n\n<p>Also note that names beginning with an underscore and capital letter are reserved to the implementation, so you should not use them in your own code.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "edited": false, "score": 0, "creation_date": 1511357897, "post_id": 47435783, "comment_id": 81826448, "body": "I provided a small sample of the whole thing for solving my compilation failure. But you are true there is a lot of termination cases to handle in my code."}], "tags": [], "owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1511356790, "creation_date": 1511356790, "answer_id": 47435783, "question_id": 47434046, "link": "https://stackoverflow.com/questions/47434046/variadic-template-template-and-sfinae/47435783#47435783", "title": "Variadic template template and SFINAE", "body": "<p>Other than the perfect answers already provided by others, may I ask what your expected outcome is of a type like <code>Inputs&lt;Input&lt;float, IsFree&gt;, int, Input&lt;int, IsFree&gt;&gt;</code>? Notice the stray <code>int</code> in the middle. Would you like the base class recursion to stop at the first non-<code>Input&lt;&gt;</code> argument, as currently is the case in your example, or rather have a compile error?</p>\n\n<p>If the latter, might I suggest changing the general <code>Inputs</code> template definition to be an incomplete type, and then specializing for an empty struct in case of zero template arguments, like so:</p>\n\n<pre><code>// General case, incomplete type\ntemplate&lt;class... T&gt;\nstruct Inputs;\n\n// Special case for zero arguments, empty struct\ntemplate&lt;&gt;\nstruct Inputs&lt;&gt;\n{\n};\n</code></pre>\n\n<p>Together with your specialization for <code>Inputs&lt;Input&lt;*,*&gt;, ...&gt;</code>, this will make sure you can never instantiate a template using arguments that are not a list of <code>Input&lt;*,*&gt;</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 8989505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c584fe2e0a8917243f81b0a3c13bb0d?s=128&d=identicon&r=PG", "display_name": "sylvain", "link": "https://stackoverflow.com/users/8989505/sylvain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 47434247, "answer_count": 3, "score": 2, "last_activity_date": 1511356790, "creation_date": 1511351582, "last_edit_date": 1511353580, "question_id": 47434046, "link": "https://stackoverflow.com/questions/47434046/variadic-template-template-and-sfinae", "title": "Variadic template template and SFINAE", "body": "<p>I'm toying with SFINAE and I try to check my Inputs is made of Input of various types. The error provided by clang doesn't help much. Do you have any idea ?</p>\n\n<p>Thanks</p>\n\n<pre><code>struct IsFree\n{\n};\n\ntemplate &lt;typename _Type, typename _State&gt;\nstruct Input\n{\n};\n\ntemplate &lt;typename... _Inputs&gt;\nstruct Inputs\n{\n};\n\ntemplate &lt;template &lt;typename _Type, typename _State&gt; class, typename... _Inputs&gt;\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n{\n};\n</code></pre>\n\n<p>Somewhere else :</p>\n\n<pre><code>auto temp = Inputs&lt;Input&lt;float, IsFree&gt;, Input&lt;float, IsFree&gt;&gt; {};\n</code></pre>\n\n<p>I get using clang-5.0 and -std=c++17 :</p>\n\n<pre><code>13 : &lt;source&gt;:13:21: error: use of undeclared identifier '_Type'\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n                    ^\n13 : &lt;source&gt;:13:35: error: expected a type\nstruct Inputs&lt;Input&lt;_Type, _State&gt;, _Inputs...&gt; : public Inputs&lt;_Inputs...&gt;\n                                  ^\n2 errors generated.\nCompiler exited with result code 1\n</code></pre>\n"}, {"tags": ["c++", "command-line-arguments"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511351702, "post_id": 47434030, "comment_id": 81822294, "body": "For C++ we have better choices, e.g. Boost Program Options. That&#39;s native C++, without need for an extra build tool."}, {"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511355579, "post_id": 47434030, "comment_id": 81824805, "body": "Unfortunately I cannot change the way the software works"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "edited": false, "score": 0, "creation_date": 1511371544, "post_id": 47435620, "comment_id": 81836193, "body": "A primitive solution, but it might work! Thanks :) Voted +"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1511356329, "creation_date": 1511356329, "answer_id": 47435620, "question_id": 47434030, "link": "https://stackoverflow.com/questions/47434030/gengetopt-allow-only-option-and-not-option/47435620#47435620", "title": "GenGetOpt - Allow only &quot;--option&quot; and not &quot;-option&quot;", "body": "<p>The easiest solution might be to just check <code>argv[]</code> yourself before passing it over to the generated <code>cmdline_parser()</code>. </p>\n"}], "owner": {"reputation": 73, "user_id": 4124964, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1250847273/picture?type=large", "display_name": "Nisan Bahar", "link": "https://stackoverflow.com/users/4124964/nisan-bahar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511356329, "creation_date": 1511351552, "question_id": 47434030, "link": "https://stackoverflow.com/questions/47434030/gengetopt-allow-only-option-and-not-option", "title": "GenGetOpt - Allow only &quot;--option&quot; and not &quot;-option&quot;", "body": "<p>I am having troubles to define an option to only accept \"--\" and not \"-\" version.</p>\n\n<p>for example:</p>\n\n<blockquote>\n  <p>option \"test\" - \"a test option\" string typestr=\"[value]\" optional\n  multiple</p>\n</blockquote>\n\n<p>When running my program, it is allowed to run both:</p>\n\n<blockquote>\n  <p>run -test asd</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>run --test asd</p>\n</blockquote>\n\n<p>I wish -test to not be allowed and fail the software.\nI read the gengetopt manuals but didn't seem to find anything related to that.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "qt", "qt5", "qstring"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511351782, "post_id": 47433995, "comment_id": 81822349, "body": "There are at least 5 simple, reasonable answers. Why do you ask?"}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511351878, "post_id": 47433995, "comment_id": 81822414, "body": "Because I tried them with no success."}, {"owner": {"reputation": 739, "user_id": 7559012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/695e8ec49e5dae82f56dd6874ff187a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bonje Fir", "link": "https://stackoverflow.com/users/7559012/bonje-fir"}, "edited": false, "score": 0, "creation_date": 1511351884, "post_id": 47433995, "comment_id": 81822417, "body": "I don&#39;t have Qt now but try this: <code>string ans = str.remove( QRegExp( &quot;\\\\\\&quot; ) );</code>"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1511352264, "post_id": 47433995, "comment_id": 81822671, "body": "You don&#39;t want to remove bsckslahes, you want to unescape a JavaScript string. That&#39;s a quite different problem."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1511352270, "post_id": 47433995, "comment_id": 81822678, "body": "Are you sure you need to remove them? They are escape characters"}, {"owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "edited": false, "score": 0, "creation_date": 1511353429, "post_id": 47433995, "comment_id": 81823374, "body": "What do you really want to do?"}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1511356971, "post_id": 47433995, "comment_id": 81825804, "body": "Editing the question to explain better, maybe the problem is as @MatteoItalia suggested"}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "reply_to_user": {"reputation": 739, "user_id": 7559012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/695e8ec49e5dae82f56dd6874ff187a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bonje Fir", "link": "https://stackoverflow.com/users/7559012/bonje-fir"}, "edited": false, "score": 0, "creation_date": 1511357108, "post_id": 47433995, "comment_id": 81825928, "body": "@BonjeFir the problem with that is that the compiler consider everything that comes after the last \\ as a string, so it prompts error"}, {"owner": {"reputation": 739, "user_id": 7559012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/695e8ec49e5dae82f56dd6874ff187a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bonje Fir", "link": "https://stackoverflow.com/users/7559012/bonje-fir"}, "edited": false, "score": 0, "creation_date": 1511357884, "post_id": 47433995, "comment_id": 81826440, "body": "@FrancescoPegoraro Check four backslashes. Two of them for match pattern in regex and Two of them to determine a backslash in string. <code>QRegExp( &quot;\\\\\\\\&quot; )</code>"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 2, "creation_date": 1511357952, "post_id": 47433995, "comment_id": 81826490, "body": "Have you verified that the backslashes are actually in the string? If you&#39;re trying to print a string using <code>qDebug()</code>, you need to use <code>qDebug().noquote()</code> if you don&#39;t want <code>qDebug()</code> to artificially insert backslashes in the ouput."}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1511358119, "post_id": 47433995, "comment_id": 81826583, "body": "@NikosC. yes! with noquote() it printed without any king of carriage"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1511358220, "post_id": 47433995, "comment_id": 81826670, "body": "That means the string doesn&#39;t have backslashes in it, thus there&#39;s nothing to remove. You can also test it by writing the QString to a file. Open the file in a text editor. If the backslashes aren&#39;t there, there&#39;s nothing for you to do; there&#39;s no backslashes in the string. It&#39;s just <code>qDebug()</code> that&#39;s adding them."}, {"owner": {"reputation": 3420, "user_id": 4613742, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1a4884b0bd945c1450ea8ab0d7dca1ee?s=128&d=identicon&r=PG", "display_name": "Telokis", "link": "https://stackoverflow.com/users/4613742/telokis"}, "edited": false, "score": 2, "creation_date": 1511358238, "post_id": 47433995, "comment_id": 81826682, "body": "I&#39;ll second what @NikosC.just said: the backslashes are not in your string at all. It would make it an invalid json. You see them <b>because</b> you are printing the string."}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1511358393, "post_id": 47433995, "comment_id": 81826800, "body": "Yes, you are right, so it&#39;s something else."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1511358605, "post_id": 47433995, "comment_id": 81826945, "body": "Try <a href=\"http://doc.qt.io/qt-5/qjsondocument.html#fromJson\" rel=\"nofollow noreferrer\">QJsonDocument::fromJson</a> with the string you receive as it is."}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1511358954, "post_id": 47433995, "comment_id": 81827222, "body": "It wasn&#39;t working because I was accessing the model where I wanted to save the json data with uppercase attributes name but the header was defined in lower case. Sorry for bothering all of you. Anyway I learned something today. Thank You"}], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1511351973, "post_id": 47434137, "comment_id": 81822477, "body": "Doesen&#39;t work with backslashes because they are considered escape. Thank you"}, {"owner": {"reputation": 910, "user_id": 6084726, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/booMP.png?s=128&g=1", "display_name": "M4HdYaR", "link": "https://stackoverflow.com/users/6084726/m4hdyar"}, "reply_to_user": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1511352305, "post_id": 47434137, "comment_id": 81822698, "body": "@FrancescoPegoraro Answer edited , What about &#39;\\\\&#39; ?"}, {"owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "edited": false, "score": 0, "creation_date": 1511356895, "post_id": 47434137, "comment_id": 81825747, "body": "doesnt work in my case, I&#39;ll explain better in question. Thank you"}], "tags": [], "owner": {"reputation": 910, "user_id": 6084726, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/booMP.png?s=128&g=1", "display_name": "M4HdYaR", "link": "https://stackoverflow.com/users/6084726/m4hdyar"}, "is_accepted": false, "score": 0, "last_activity_date": 1511352088, "last_edit_date": 1511352088, "creation_date": 1511351821, "answer_id": 47434137, "question_id": 47433995, "link": "https://stackoverflow.com/questions/47433995/how-to-remove-backslashes-from-qstring/47434137#47434137", "title": "How to remove backslashes from QString?", "body": "<p>As described in the <a href=\"http://doc.qt.io/qt-5/qstring.html#remove\" rel=\"nofollow noreferrer\">documentation</a> You can remove a character with remove function</p>\n\n<pre><code>QString t = \"Ali Baba\";\nt.remove(QChar('a'), Qt::CaseInsensitive);\n// Will result \"li Bb\"\n</code></pre>\n\n<p>You can put '\\\\' instead of 'a' to remove your backslashes from your QString</p>\n"}, {"comments": [{"owner": {"reputation": 1350, "user_id": 8894131, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-l0nq1teJBEY/AAAAAAAAAAI/AAAAAAAAABY/mImWApyef9M/photo.jpg?sz=128", "display_name": "SSBakh", "link": "https://stackoverflow.com/users/8894131/ssbakh"}, "edited": false, "score": 1, "creation_date": 1601287300, "post_id": 47436332, "comment_id": 113350143, "body": "I&#39;m a little late here, but it should be mentioned that <code>QString::simplified()</code> can be also used to remove escape characters such as <code>\\n</code> and <code>\\r</code> (anything that for which <code>QString::isSpace()</code> returns true) and replacing sequences of whitespaces with a single whitespace. <a href=\"https://doc.qt.io/qt-5/qstring.html#simplified\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qstring.html#simplified</a>"}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1511358433, "creation_date": 1511358433, "answer_id": 47436332, "question_id": 47433995, "link": "https://stackoverflow.com/questions/47433995/how-to-remove-backslashes-from-qstring/47436332#47436332", "title": "How to remove backslashes from QString?", "body": "<p>You're probably running into <code>qDebug</code>'s feature that escapes quotes and newlines. Your string most probably doesn't actually have any backslashes in it.</p>\n\n<p>When you're trying to print a string using <code>qDebug()</code>, you need to use <code>qDebug().noquote()</code> if you don't want qDebug() to artificially insert backslashes in the output.</p>\n\n<p>So your string should be fine. It doesn't have any backslashes in it at all.</p>\n"}], "owner": {"reputation": 683, "user_id": 6145828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207373113578692/picture?type=large", "display_name": "Francesco Pegoraro", "link": "https://stackoverflow.com/users/6145828/francesco-pegoraro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2982, "favorite_count": 0, "accepted_answer_id": 47436332, "answer_count": 2, "score": 2, "last_activity_date": 1511358433, "creation_date": 1511351402, "last_edit_date": 1511357952, "question_id": 47433995, "link": "https://stackoverflow.com/questions/47433995/how-to-remove-backslashes-from-qstring", "title": "How to remove backslashes from QString?", "body": "<p>Using <code>QNetworkManager</code> <code>get</code> method I am receiving a json from a url.<br>\nDoing: <code>qDebug()&lt;&lt;(QString)reply-&gt;readAll();</code> the result is:</p>\n\n<pre><code>\"\\r\\n[{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"Jhon\\\",\\\"surname\\\":\\\"Snow\\\",\\\"phone\\\":\\\"358358358\\\"}]\"\n</code></pre>\n\n<p>So I am doing <code>strReply = strReply.simplified();</code> , and the result is:</p>\n\n<pre><code>\"[{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"Jhon\\\",\\\"surname\\\":\\\"Snow\\\",\\\"phone\\\":\\\"358358358\\\"}]\"\n</code></pre>\n\n<p>But I can't use that to parse it like a Json to use it in my qt program.\nSo I think I need to remove every backslashes <code>\\</code> and obtain:</p>\n\n<pre><code>\"[{\"id\":\"1\",\"name\":\"Jhon\",\"surname\":\"Snow\",\"phone\":\"348348348\"}]\"\n</code></pre>\n\n<p>I tried <code>strReply.remove(QRegExp( \"\\\\\\\" ) );</code> but any odd concatenation of <code>\\</code> is causing the interpreter to think at every thing that comes after the last <code>\\</code> as a string.</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1511353389, "post_id": 47433972, "comment_id": 81823345, "body": "Nice brain teaser. You can see this as a tree traversal problem."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511355600, "post_id": 47433972, "comment_id": 81824828, "body": "Ouch.. It took me quite a while to work out what those <code>C[ ]</code> things were doing, and I can&#39;t imagine it being efficient."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 5821790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7FJuh.png?s=128&g=1", "display_name": "Vepir", "link": "https://stackoverflow.com/users/5821790/vepir"}, "edited": false, "score": 0, "creation_date": 1511359930, "post_id": 47435377, "comment_id": 81827843, "body": "This appears to be slower than my initial solution. I&#39;ve ran both codes 20,000 times for case x=100, where my initial solution took around 30 seconds, and this took around 60 seconds. I&#39;ve managed to get access to the recursive solution I&#39;ve heard about which I posted as a separate answer. That one ran trough the 20,000 iterations in a single second."}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 0, "last_activity_date": 1511356658, "last_edit_date": 1511356658, "creation_date": 1511355546, "answer_id": 47435377, "question_id": 47433972, "link": "https://stackoverflow.com/questions/47433972/ways-of-combining-digits-to-a-given-number-using-addition-subtraction-and-conca/47435377#47435377", "title": "Ways of combining digits to a given number using addition, subtraction and concatenation", "body": "<p>Here you can find a full working recursive sample:</p>\n\n<p>I wrote two recursive methods, </p>\n\n<p><code>test_combo</code> - to evaluate the combo</p>\n\n<p><code>make_combo</code> - to generate the combo  </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n//recursivly evaluate the combo.\nint test_combo( const std::string&amp; s, int sign)\n{ \n    size_t next_pos = s.find_first_of(\"+-\");\n    int sum = sign * strtol(s.substr(0,next_pos).c_str(),0,0);;\n    if(next_pos == string::npos)\n    {\n        return sum;\n    }\n    else\n    {   \n        char op = s[next_pos];\n        switch(op)\n        {\n           case '+':\n              sum+=test_combo(s.substr(next_pos+1),1);\n              return sum;\n           case '-':\n              sum+=test_combo(s.substr(next_pos+1),-1);\n              return sum;\n        }\n    }\n}\n//recursivly build the combo.\nvoid make_combo(int n, const std::string&amp; s )\n{\n    if(n==10)\n    {\n        int sum=test_combo(s,1);\n        if(sum==100)\n            cout&lt;&lt;s&lt;&lt;\"=\"&lt;&lt;sum&lt;&lt;endl;\n    }\n    else\n    {\n        char next_digit = '0'+n;          //we have 3 options:\n        make_combo(n+1,s+next_digit);     //append next digit with no op\n        make_combo(n+1,s+'+'+next_digit); //append next digit with + op\n        make_combo(n+1,s+'-'+next_digit); //append next digit with - op\n    }\n}\n\nint main()\n{\n    make_combo(2,\"1\");//string always start with a '1'\n    return  0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1511355799, "creation_date": 1511355799, "answer_id": 47435449, "question_id": 47433972, "link": "https://stackoverflow.com/questions/47433972/ways-of-combining-digits-to-a-given-number-using-addition-subtraction-and-conca/47435449#47435449", "title": "Ways of combining digits to a given number using addition, subtraction and concatenation", "body": "<p>The trick to all such challenges is not to do the same work twice. That is to say, <code>12345678-9</code>, <code>12345678+9</code> and <code>12345678 * 10 + 9</code> all share the same logic to evaluate <code>12345678</code>. </p>\n\n<p>There are many ways in which this can be achieved, but a recursive solution is reasonable enough. </p>\n"}, {"tags": [], "owner": {"reputation": 537, "user_id": 5821790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7FJuh.png?s=128&g=1", "display_name": "Vepir", "link": "https://stackoverflow.com/users/5821790/vepir"}, "is_accepted": true, "score": 1, "last_activity_date": 1511359810, "creation_date": 1511359810, "answer_id": 47436794, "question_id": 47433972, "link": "https://stackoverflow.com/questions/47433972/ways-of-combining-digits-to-a-given-number-using-addition-subtraction-and-conca/47436794#47436794", "title": "Ways of combining digits to a given number using addition, subtraction and concatenation", "body": "<p><strong>Update:</strong> This is not my solution but is the recursive one I've heard about. Way faster than my initial solution, and very elegant.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint x;\n\nint count(int n, int num, int sum) {\n\n    if (n == 9) { return sum + num == x; }\n\n    int next = n + 1;\n    int counter = 0;\n\n    counter += count(next, next, sum + num);\n    counter += count(next, -next, sum + num);\n\n    num *= 10;\n    if (num &lt; 0)\n        num -= next;\n    else\n        num += next;\n\n    counter += count(next, num, sum);\n    return counter;\n}\n\nint main(int x) {\n    cin &gt;&gt; x;\n    cout &lt;&lt; count(1, 1, 0) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 5821790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7FJuh.png?s=128&g=1", "display_name": "Vepir", "link": "https://stackoverflow.com/users/5821790/vepir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 47436794, "answer_count": 3, "score": 4, "last_activity_date": 1511359810, "creation_date": 1511351341, "last_edit_date": 1511351821, "question_id": 47433972, "link": "https://stackoverflow.com/questions/47433972/ways-of-combining-digits-to-a-given-number-using-addition-subtraction-and-conca", "title": "Ways of combining digits to a given number using addition, subtraction and concatenation", "body": "<p>I've solved this <code>c++</code> exercise by brute force checking all combinations in my own way. <br>I'm wondering if there's a better, more elegant, and/or shorter/faster solution?</p>\n\n<p>Here's the translated problem: (\"nothing\" refers to concatenation)</p>\n\n<pre><code>/*\n\nWrite a program that outputs the number of possible ways to:\nCombine ascending digits 1...9 using +, -, and \"nothing\" to get the result of input x.\n\nExample:\nInput: 100\nOutput: 11\n\n(That's because we have 11 ways to get 100:)\n123 - 45 - 67 + 89 = 100 \n123 + 4 - 5 + 67 - 89 = 100 \n123 + 45 - 67 + 8 - 9 = 100 \n123 - 4 - 5 - 6 - 7 + 8 - 9 = 100\n12 - 3 - 4 + 5 - 6 + 7 + 89 = 100 \n12 + 3 + 4 + 5 - 6 - 7 + 89 = 100 \n12 + 3 - 4 + 5 + 67 + 8 + 9 = 100 \n1 + 23 - 4 + 56 + 7 + 8 + 9 = 100 \n1 + 2 + 34 - 5 + 67 - 8 + 9 = 100 \n1 + 23 - 4 + 5 + 6 + 78 - 9 = 100 \n1 + 2 + 3 - 4 + 5 + 6 + 78 + 9 = 100 \n\n*/\n</code></pre>\n\n<p>Here's my solution:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\n\nint power(int a, int n) {\n    int rez = 1;\n    for (int i = 0; i&lt;n; i++) {\n        rez *= a;\n    }\n    return rez;\n}\n\nvoid makeCombo(int c, int C[]) {\n    int digit = 0;\n    while (c != 0) {\n        C[digit] = c % 3;\n        c /= 3;\n        digit++;\n    }\n}\n\nbool testCombo(int C[], int x) {\n    int a = 9;\n    int sum = 0; \n    int concatenator = 0;\n    int concatenation = 0;\n\n    for (int i = 0; i &lt; 8; i++) {\n        if (C[7-i] == 0) {\n            concatenator += a*power(10,concatenation);\n            concatenation++;\n        } else if (C[7-i] == 1) {\n            sum += a*power(10,concatenation);\n            sum += concatenator;\n            concatenator = 0;\n            concatenation = 0;\n        } else if (C[7-i] == 2) {\n            sum -= a*power(10,concatenation); \n            sum -= concatenator; \n            concatenator = 0;\n            concatenation = 0;\n        }\n        a--;\n    }\n    sum += a*power(10,concatenation);\n    sum += concatenator;\n\n    return (sum == x);\n}\n\nint main() {\n    int x, count = 0;\n    cin &gt;&gt; x;\n\n    int combo = 0;\n    int C[8] = {0,0,0,0,0,0,0,0}; \n    while (combo &lt; power(3,8)) {\n        makeCombo(combo, C);\n        if (testCombo(C, x)) { count++; }\n        combo++;\n    }\n\n    cout &lt;&lt; count &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><br>\nI've heard that there's a short recursive solution possible and I'm wondering how you would solve this like that, and/or is there an even \"better\" solution, and how can you \"see it\"?</p>\n"}, {"tags": ["c++", "uwp", "coroutine"], "comments": [{"owner": {"reputation": 10000, "user_id": 5620055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7e3M5.jpg?s=128&g=1", "display_name": "Sunteen Wu", "link": "https://stackoverflow.com/users/5620055/sunteen-wu"}, "edited": false, "score": 0, "creation_date": 1511417294, "post_id": 47433244, "comment_id": 81852203, "body": "&quot;Most of the time my code works, but sometimes&quot;, so this is not a 100% reproduced issue? Any specials for the times which are failed? Did the server side has any constraints on the put request?"}, {"owner": {"reputation": 43, "user_id": 8411016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a2ff3c50b6696ce9d4b06f13591c54?s=128&d=identicon&r=PG&f=1", "display_name": "Morten", "link": "https://stackoverflow.com/users/8411016/morten"}, "reply_to_user": {"reputation": 10000, "user_id": 5620055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7e3M5.jpg?s=128&g=1", "display_name": "Sunteen Wu", "link": "https://stackoverflow.com/users/5620055/sunteen-wu"}, "edited": false, "score": 0, "creation_date": 1511425022, "post_id": 47433244, "comment_id": 81855863, "body": "Maybe 10% of the times I unplug the cable and replug, the co_await PutAsync never &quot;returns&quot; or completes. It is like a timeout is missing."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 8411016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a2ff3c50b6696ce9d4b06f13591c54?s=128&d=identicon&r=PG&f=1", "display_name": "Morten", "link": "https://stackoverflow.com/users/8411016/morten"}, "is_accepted": false, "score": 0, "last_activity_date": 1511524900, "creation_date": 1511524900, "answer_id": 47472906, "question_id": 47433244, "link": "https://stackoverflow.com/questions/47433244/co-await-httpclientputasync-never-completes-using-c-coroutine-uwp/47472906#47472906", "title": "co_await HttpClient::PutAsync never completes (using c++, coroutine, UWP)", "body": "<p>This works, but is not a good solution:</p>\n\n<pre><code>//response = co_await progress;\nfor (int timeout = 5*60*100; true; timeout--)\n{\n    if (progress-&gt;Status != AsyncStatus::Started)\n        break;\n    co_await winrt::resume_after(10ms);\n    if (timeout == 0)\n    {\n        debugOut(\"--- http fail timeout\");\n        mResult = NoInternet;\n        mAnswer.clear();\n        co_return mResult;\n    }\n}\nresponse = progress-&gt;GetResults();\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8411016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a2ff3c50b6696ce9d4b06f13591c54?s=128&d=identicon&r=PG&f=1", "display_name": "Morten", "link": "https://stackoverflow.com/users/8411016/morten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511524900, "creation_date": 1511349098, "question_id": 47433244, "link": "https://stackoverflow.com/questions/47433244/co-await-httpclientputasync-never-completes-using-c-coroutine-uwp", "title": "co_await HttpClient::PutAsync never completes (using c++, coroutine, UWP)", "body": "<p>I do http requests and when they fail I repeat the requests. I simulate it by unplugging the internet cable to my computer and replugging it. Most of the time my code works, but sometimes</p>\n\n<p>co_await HttpClient::PutAsync() never \"returns\" or completes.</p>\n\n<p>My code looks something like this: </p>\n\n<pre><code>task&lt;Aws::Result&gt; Aws::S3Request::tryExecute()\n{\n    // content\n    IHttpContent^ httpContent;\n    httpContent = ref new HttpBufferContent(mBufferContent);\n    httpContent-&gt;Headers-&gt;ContentType = ref new Headers::HttpMediaTypeHeaderValue(ref new String(mContentType.c_str()));\n\n    std::wstring signature = getSignature();\n\n    // client\n    auto filter = ref new ::Filters::HttpBaseProtocolFilter;\n    filter-&gt;AllowUI = false;\n    filter-&gt;CacheControl-&gt;ReadBehavior = Filters::HttpCacheReadBehavior::NoCache;\n    filter-&gt;CacheControl-&gt;WriteBehavior = Filters::HttpCacheWriteBehavior::NoCache;\n    HttpClient^ httpClient = ref new HttpClient(filter);\n    httpClient-&gt;DefaultRequestHeaders-&gt;Authorization = ref new Headers::HttpCredentialsHeaderValue(L\"AWS\", ref new String((mUser.mAccessKey + L\":\" + signature).c_str()));\n    httpClient-&gt;DefaultRequestHeaders-&gt;Append(L\"Date\", ref new String(mDate.c_str()));\n    httpClient-&gt;DefaultRequestHeaders-&gt;Append(L\"x-amz-acl\", L\"public-read\");\n    httpClient-&gt;DefaultRequestHeaders-&gt;Append(L\"x-amz-security-token\", ref new String(mUser.mSessionToken.c_str()));\n\n    // http req\n    Uri^ uri = ref new Uri(ref new String(mUri.c_str()));\n    HttpResponseMessage^ response;\n    IAsyncOperationWithProgress&lt;HttpResponseMessage^, HttpProgress&gt;^ progress;\n    try\n    {\n        progress = httpClient-&gt;PutAsync(uri, httpContent);\n        progress-&gt;Progress = ref new AsyncOperationProgressHandler&lt;HttpResponseMessage^, HttpProgress&gt;(\n            [this](IAsyncOperationWithProgress&lt;HttpResponseMessage^, HttpProgress&gt;^ pretask, HttpProgress progressInfo)\n        {\n            /*double got = progressInfo.BytesReceived + progressInfo.BytesSent;\n            double total = 0;\n            if (progressInfo.TotalBytesToReceive)\n            total += progressInfo.TotalBytesToReceive-&gt;Value;\n            if (progressInfo.TotalBytesToSend)\n            total += progressInfo.TotalBytesToSend-&gt;Value;\n            float progress = (total &gt;= 1) ? float(got / total) : 0.0f;\n            debugOut(\"--- part progress = \", progress);\n            if (mProgress)\n            *mProgress = progress;*/\n        }\n        );\n        response = co_await progress;\n        progress = nullptr;\n        if (!response-&gt;IsSuccessStatusCode)\n            debugOut(\"--- http fail error\");\n    }\n    catch (Platform::COMException^)\n    {\n        debugOut(\"--- http fail nointernet\");\n        progress = nullptr;\n        mResult = NoInternet;\n        mAnswer.clear();\n        co_return mResult;\n    }\n\n    // answer\n    mAnswer = response-&gt;Content-&gt;ToString()-&gt;Data();\n    debugOut(L\"--- Http answer=\", mAnswer);\n    mResult = response-&gt;IsSuccessStatusCode ? Success : Error;\n\n    co_return mResult;\n}\n</code></pre>\n\n<p>If it fails, tryExecute() is called again.</p>\n\n<p>By the way, the IAsyncOperationWithProgress only gives me either 0% or 100% and not the inbetweens. I upload sizes of 5 Mbytes in each request.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1511349895, "post_id": 47433229, "comment_id": 81821111, "body": "A reasonable place to start seems to be &quot;the exact algorithm described in the lecture notes&quot;. Don&#39;t forget to &quot;please refer to the webpage description for details&quot;."}, {"owner": {"reputation": 39, "user_id": 8988876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d326e0d0802851809ce6a2212ffd71f8?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/8988876/peter"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1511350079, "post_id": 47433229, "comment_id": 81821228, "body": "In the notes most of the example have the root, left and right, but this do not have, so I don&#39;t know how to start."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1511350613, "post_id": 47433229, "comment_id": 81821604, "body": "The &quot;webpage description&quot; should contain information about how to encode those in a sequential container. (You&#39;re most likely going to use indexes as &quot;pointers&quot;.)"}, {"owner": {"reputation": 39, "user_id": 8988876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d326e0d0802851809ce6a2212ffd71f8?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/8988876/peter"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1511354932, "post_id": 47433229, "comment_id": 81824361, "body": "ok, now I know how to do it. Thank you!"}], "owner": {"reputation": 39, "user_id": 8988876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d326e0d0802851809ce6a2212ffd71f8?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/8988876/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511349051, "creation_date": 1511349051, "question_id": 47433229, "link": "https://stackoverflow.com/questions/47433229/bstree-add-function", "title": "BSTree add function", "body": "<p>I am trying to do the add function in BSTree.However, I have no idea where to start. Can anyone give me some hints which part I need to consider first. I don't know where is the new Pair(key, value); to use and what is the using Tree::data;. I just want to get the hints but not the answer. Thank you.</p>\n\n<p>Below is the Pair.h file</p>\n\n<pre><code>#ifndef PAIR_H_\n#define PAIR_H_\n\n//a key-value pair\n//this simple class is pretty much self-explanatory\n//all its implementation is already given\ntemplate&lt;typename KeyType, typename ValueType&gt;\nclass Pair\n{\npublic:\n    Pair(KeyType k, ValueType v) :\n            key(k), value(v)\n    {\n    }\n\n    KeyType getKey() const\n    {\n        return key;\n    }\n\n    void setKey(KeyType key)\n    {\n        this-&gt;key = key;\n    }\n\n    ValueType getValue() const\n    {\n        return value;\n    }\n\n    void setValue(ValueType value)\n    {\n        this-&gt;value = value;\n    }\n\nprivate:\n    KeyType key;\n    ValueType value;\n};\n\n#endif /* PAIR_H_ */\n</code></pre>\n\n<p>Below is the Tree.h</p>\n\n<pre><code>template&lt;typename Container, typename KeyType, typename ValueType&gt;\nclass Tree\n{\npublic:\n    virtual bool add(KeyType key, ValueType value) = 0; //pure virtual     function here, description can be found in BSTree class\n    virtual bool remove(KeyType key) = 0; //pure virtual function here, description can be found in BSTree class\n    virtual ValueType getValue(KeyType key) = 0; //pure virtual function here, description can be found in BSTree class\n    virtual ~Tree(){}; //an empty destructor\n\nprotected:\n    Container data; //the data container (a vector, which is either a ListVector or ArrayVector in this assignment)\n                    //that stores all the node data of the tree\n                    //how the node is stored in the data container is very specific\n                    //please refer to the webpage description for details\n\n    //treeToString in Utility is this class's only friend... :(\n    template&lt;typename aContainer, typename aKeyType, typename aValueType&gt;\n    friend string treeToString(Tree&lt;aContainer, aKeyType, aValueType&gt;* tree);\n};\n\n#endif\n</code></pre>\n\n<p>Below is the BSTree.h file</p>\n\n<pre><code>#ifndef BSTREE_H_\n#define BSTREE_H_\n\n#include \"Tree.h\"\n#include \"Pair.h\"\n#include &lt;typeinfo&gt;\nusing namespace std;\n\n//the Binary Search Tree class\n//the keys have to be unique in the tree - you need to make sure of that when performing the insertion\ntemplate&lt;typename Container, typename KeyType, typename ValueType&gt;\nclass BSTree : public Tree&lt;Container, KeyType, ValueType&gt;\n{\npublic:\nBSTree(){};\n~BSTree();\n//add a node to the tree, according to the given key and value\n//you have to use the exact algorithm described in the lecture notes\n//so that you will have the exact same result as our demo and sample output\n//it should do nothing to the tree and return false when there is already a node that has the same key\n//otherwise, it should add the node and return true\n//hint: you probably will have a statement to allocate the space for the new pair, like so: \"new Pair&lt;KeyType, ValueType&gt;(key, value);\"\nbool add(KeyType key, ValueType value);\nbool remove(KeyType key);\nValueType getValue(KeyType key);\nint getHeight();\nusing Tree&lt;Container, KeyType, ValueType&gt;::data;\n};\n#include \"BSTree.tpp\"\n\n#endif /* BSTREE_H_ */\n</code></pre>\n"}, {"tags": ["c++", "qt", "encoding", "base64", "decoding"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511350149, "post_id": 47433091, "comment_id": 81821282, "body": "I don&#39;t see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here. What type is <code>msg-&gt;output</code> and what is <code>myMethod()</code>? Why should <code>cout</code> and <code>qDebug()</code> behave exactly the same?"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1511350950, "post_id": 47433091, "comment_id": 81821802, "body": "I made some edits. <code>cout</code> is used there instead of <code>qDebug()</code> because the latter does not support <code>unsigned char *</code> directly. In any case, QByteArray should honour the binary representation. The question is not about the behaviour of qDebug() vs cout, it is about why the encode and decode does not return the same binary representation back."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1511353253, "post_id": 47433091, "comment_id": 81823270, "body": "I mean how did you make sure the backslashes aren&#39;t added by <code>qDebug()</code>? A piece of code one can copy&amp;paste to reproduce your issue locally (IOW, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) would be nice..."}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1511353320, "post_id": 47433091, "comment_id": 81823313, "body": "I will try to add somethinf  bit more concrete. I verified that ny reading it into a ByteArray again and checking the values. I will make some edits."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6264801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hQRMB.jpg?s=128&g=1", "display_name": "Sarath AK", "link": "https://stackoverflow.com/users/6264801/sarath-ak"}, "is_accepted": false, "score": 1, "last_activity_date": 1556397576, "creation_date": 1556397576, "answer_id": 55884692, "question_id": 47433091, "link": "https://stackoverflow.com/questions/47433091/qt-base64-encode-decode-adds-escape-characters/55884692#55884692", "title": "qt base64 encode/decode adds escape characters", "body": "<p>Try like below,</p>\n\n<p>Base 64 Encode :</p>\n\n<p><code>unsigned char* Ciphertext = Encypt();\n       QByteArray qByteArray((char*)(Ciphertext),(int)strlen((char *)Ciphertext));\n       qDebug()&lt;&lt;\"Ciphertext : \"&lt;&lt; qByteArray.toBase64();</code></p>\n\n<p>Output :</p>\n\n<pre><code>Ciphertext :  \"WLdC+ri94z940BiAven6qXQH6rPbE64nQXt5aFByLGPFh1n//tOGLG02zBSoZ79qMA\"\n</code></pre>\n\n<p>Base 64 Decode :</p>\n\n<pre><code>QString data = QString::fromLatin1(QByteArray::fromBase64(Base64QByteArray.toBase64()).data());\n</code></pre>\n\n<p>in my case i used this base64 conversion for AES encyption, make it shoultable for yours. </p>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556397576, "creation_date": 1511348694, "last_edit_date": 1511351113, "question_id": 47433091, "link": "https://stackoverflow.com/questions/47433091/qt-base64-encode-decode-adds-escape-characters", "title": "qt base64 encode/decode adds escape characters", "body": "<p>I have a method that returns an <code>unsigned char *</code> array and I am trying to encode this as base64 and decode it later. So what I am doing is as follows:</p>\n\n<pre><code>unsigned char * val = myMethod();\nchar * encodedMsg = reinterpret_cast&lt;char *&gt;(val);\nstd::cout &lt;&lt; \"Returned message: \" &lt;&lt; val &lt;&lt; std::endl;\nQByteArray raw = QByteArray(encodedMsg).toBase64(QByteArray::Base64Encoding | QByteArray::OmitTrailingEquals);\n</code></pre>\n\n<p>The output from the method is <code>\\u0001z\\ri!i,</code> and the encoded value is <code>XHUwMDAxelxyaSFpLA</code>.</p>\n\n<p>Now, I decode it as follows:</p>\n\n<pre><code>QByteArray decoded = QByteArray::fromBase64(raw,\n                            QByteArray::Base64Encoding | QByteArray::OmitTrailingEquals);\n\nqDebug() &lt;&lt; decoded;\n</code></pre>\n\n<p>Now this returns <code>\\\\u0001z\\\\ri!i,</code>. Notice that the slashes have been escaped. </p>\n\n<p>I know I can replace this as a post processing step but is there a way to avoid this. Perhaps I am using the encoding/decoding incorrectly?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "concurrency"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511348498, "post_id": 47432720, "comment_id": 81820217, "body": "How do you do anything with <code>loop</code>? You can&#39;t access it and you can&#39;t send events to it."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511349622, "post_id": 47432720, "comment_id": 81820934, "body": "@nwp, by creating some objects just before the <code>exec()</code>. Something like a socket, pass an IP address to connect and <code>std::function</code> callback for data."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1511350174, "post_id": 47432720, "comment_id": 81821302, "body": "I&#39;m not seeing how you communicate with the event loop via sockets. It looks a bit like you are re-implementing <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\"><code>QThread</code></a>. It already comes with an event loop and signal/slot support."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511351403, "post_id": 47432720, "comment_id": 81822097, "body": "@nwp, I don&#39;t need <code>QThread</code>. The question is about <code>std::thread</code>. Added a usage example to the question."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511351537, "post_id": 47432720, "comment_id": 81822179, "body": "I don&#39;t understand what <code>MySocket s</code> is for. It cannot be used by the worker thread because it is stuck in <code>loop.exec()</code> and it cannot be used by anyone else because it&#39;s a local variable."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511352633, "post_id": 47432720, "comment_id": 81822883, "body": "@nwp, it&#39;s processed in <code>loop.exec()</code> (all its slots, signals, timers, etc.). Are you sure that you&#39;ve used these Qt classes before?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1511353200, "post_id": 47432720, "comment_id": 81823240, "body": "I am using <code>std::thread</code> and <code>QEventLoop</code> extensively. From that statement I can imagine <code>MySocket</code> is actually <code>QTcpSocket</code> and there is some connecting of slots going on that is not shown. By the way, with <code>QThread</code> you could totally create the <code>loop</code> outside the thread and then just use <a href=\"http://doc.qt.io/qt-5/qobject.html#moveToThread\" rel=\"nofollow noreferrer\"><code>moveToThread</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511352296, "post_id": 47434019, "comment_id": 81822692, "body": "The <code>~Connector()</code> may be executed before the <code>event_loop = std::make_unique&lt;QEventLoop&gt;();</code>. And it&#39;ll crash on the NULL pointer in this case."}, {"owner": {"reputation": 2581, "user_id": 1036725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4cc8671ced170328aad83f4cadada8c?s=128&d=identicon&r=PG", "display_name": "katrasnikj", "link": "https://stackoverflow.com/users/1036725/katrasnikj"}, "reply_to_user": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511353183, "post_id": 47434019, "comment_id": 81823232, "body": "True. You could add a <code>std::atomic_flag</code> to the constructor and wait until it is set by the thread after the make_unique call. Then in the destructor you could call <code>event_loop-&gt;isRunning()</code> to check if it can be exited."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511353587, "post_id": 47434019, "comment_id": 81823468, "body": "Then the <code>event_loop-&gt;isRunning()</code> in <code>~Connector()</code> may be executed after the <code>event_loop = std::make_unique&lt;QEventLoop&gt;();</code> and the <code>std::atomic_flag</code> but before the call to <code>loop-&gt;exec()</code>. It&#39;ll call <code>event_loop-&gt;exit();</code> without any effect (or you may not even call it if you check <code>isRunning()</code>), then the thread will hang in <code>loop-&gt;exec();</code> while the main thread will lock up in <code>m_worker.join();</code>."}], "tags": [], "owner": {"reputation": 2581, "user_id": 1036725, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4cc8671ced170328aad83f4cadada8c?s=128&d=identicon&r=PG", "display_name": "katrasnikj", "link": "https://stackoverflow.com/users/1036725/katrasnikj"}, "is_accepted": false, "score": 0, "last_activity_date": 1511351515, "creation_date": 1511351515, "answer_id": 47434019, "question_id": 47432720, "link": "https://stackoverflow.com/questions/47432720/how-to-properly-embed-qeventloop-in-the-stdthread/47434019#47434019", "title": "How to properly embed QEventLoop in the std::thread?", "body": "<p>Maybe you could pass a reference to a unique_ptr of QEventLoop to the thread and at destruction call exit on that pointer. Like this:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;QEventLoop&gt;\n\nstruct Connector\n{\n    Connector()\n    {\n        m_worker = std::thread([=]()\n        {\n            event_loop = std::make_unique&lt;QEventLoop&gt;();\n            loop-&gt;exec();\n        });\n    }\n\n    ~Connector()\n    {\n        event_loop-&gt;exit();\n        m_worker.join();\n    }\n\n    std::unique_ptr&lt;QEventLoop&gt; event_loop;\n    std::thread worker;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 1, "creation_date": 1511358770, "post_id": 47435951, "comment_id": 81827089, "body": "The <code>barrier.set_value();</code> is never executed. The <code>event_loop-&gt;exec();</code> blocks before that. But it&#39;s nice that you&#39;ve mentioned the <code>std::promise</code>. I&#39;ll use it in my QSemaphore solution instead of the semaphore. I&#39;ve updated the question."}, {"owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511857709, "post_id": 47435951, "comment_id": 82009979, "body": "There is a problem with calling <code>QTimer::singleShot()</code>: an error <code>Timers can only be used with threads started with QThread</code>. So can&#39;t really start a timer from a non-EventLoop main thread."}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511857822, "post_id": 47435951, "comment_id": 82010034, "body": "You should be able to use <code>invokeMethod</code> instead, in this case. I&#39;ll prepare an example in 1-2h."}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "edited": false, "score": 0, "creation_date": 1511857973, "post_id": 47435951, "comment_id": 82010119, "body": "Yeah, I don&#39;t see why it wouldn&#39;t work, so that&#39;s also an option."}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1511358880, "last_edit_date": 1511358880, "creation_date": 1511357285, "answer_id": 47435951, "question_id": 47432720, "link": "https://stackoverflow.com/questions/47432720/how-to-properly-embed-qeventloop-in-the-stdthread/47435951#47435951", "title": "How to properly embed QEventLoop in the std::thread?", "body": "<p>Here's my take on it, based on katrasnikj's answer and <a href=\"http://en.cppreference.com/w/cpp/thread/promise\" rel=\"nofollow noreferrer\">std::promise docs</a> to ensure that the thread is running by the time the constructor finishes.</p>\n\n<pre><code>struct Connector\n{\n    Connector()\n    {\n        std::promise&lt;void&gt; barrier;\n        auto fut = barrier.get_future();\n        worker = std::thread([=](std::promise&lt;void&gt;&amp;&amp; barrier)\n        {\n            event_loop = std::make_unique&lt;QEventLoop&gt;();\n            barrier.set_value();\n            event_loop-&gt;exec();\n        }, std::move(barrier));\n        fut.wait();\n    }\n\n    ~Connector()\n    {\n        QTimer::singleShot(0, event_loop.get(), &amp;QEventLoop::quit);\n        worker.join();\n    }\n\n    std::unique_ptr&lt;QEventLoop&gt; event_loop;\n    std::thread worker;\n};\n</code></pre>\n\n<p>But you might want to look into using <code>QThread</code> instead, since it's capable of running its own event loop.</p>\n"}], "owner": {"reputation": 5817, "user_id": 4742108, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/GvE0m.jpg?s=128&g=1", "display_name": "Velkan", "link": "https://stackoverflow.com/users/4742108/velkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1511359083, "creation_date": 1511347612, "last_edit_date": 1511359083, "question_id": 47432720, "link": "https://stackoverflow.com/questions/47432720/how-to-properly-embed-qeventloop-in-the-stdthread", "title": "How to properly embed QEventLoop in the std::thread?", "body": "<p>There is an object that contains <code>std::thread</code> that I want to be finished when the object is destroyed.</p>\n\n<p>Minimal working code:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;future&gt;\n#include &lt;QEventLoop&gt;\n\nstruct Connector\n{\n    Connector(std::string addr, std::function&lt;void(std::string)&gt; cb)\n    {\n        std::promise&lt;void&gt; barrier;\n        auto fut = barrier.get_future();\n\n        m_worker = std::thread([addr, cb, &amp;barrier]()\n        {\n            QEventLoop loop;\n            QTimer::singleShot(0, [this, &amp;barrier, &amp;loop]\n            {\n                m_quit = [&amp;loop] { QTimer::singleShot(0, &amp;loop, &amp;QEventLoop::quit); };\n                barrier.set_value();\n            });\n\n            MySocket s(addr, cb);\n\n            loop.exec();\n        });\n\n        fut.wait();\n    }\n\n    ~Connector()\n    {\n        m_quit();\n        m_worker.join();\n    }\n\n    std::thread worker;\n    std::function&lt;void()&gt; m_quit;\n};\n</code></pre>\n\n<p>It becomes complex very fast: you can call <code>exit()</code> on the <code>loop</code> only after it enters the <code>exec()</code>, you can't create the <code>loop</code> outside of the thread.</p>\n\n<p>I only have a solution with a semaphore that is released by a handler that is queued for the execution in this loop. When the semaphore is released I can be sure that the loop is created and running, so it can be terminated with a <code>quit()</code> message when needed.</p>\n\n<p>Am I missing a simpler way?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "dll", "visual-studio-2013", "shared-ptr"], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 737347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vz9OJ.jpg?s=128&g=1", "display_name": "ivanmoskalev", "link": "https://stackoverflow.com/users/737347/ivanmoskalev"}, "is_accepted": true, "score": 3, "last_activity_date": 1511731684, "last_edit_date": 1511731684, "creation_date": 1511348735, "answer_id": 47433103, "question_id": 47432671, "link": "https://stackoverflow.com/questions/47432671/link2019-unresolved-external-symbol-for-a-function-returning-shared-ptrint/47433103#47433103", "title": "LINK2019: unresolved external symbol for a function returning shared_ptr&lt;int&gt;", "body": "<p><strong>Short answer:</strong> </p>\n\n<p>use pure-C API for your dll <strong><em>OR</em></strong> use the same toolset versions for the DLL and the executable</p>\n\n<p><strong>Long answer:</strong> </p>\n\n<p>C++ is not <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a>-compatible across different compiler versions. This means that different versions of toolsets will not produce compatible binaries. C++ names can be mangled differently, memory layout is different etc \u2013 this will either lead to the linker not being able to find the right functions, or some dire runtime errors. The only way to be sure stuff is ABI-compatible is to use a language that is guaranteed to be ABI-stable between toolset versions, and that is C.</p>\n\n<p>This is basically the reason why Windows APIs that are exposed through DLLs are C functions with plain C structures and stuff.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/440161/dll-compatibility-between-compilers\">Some more info</a> on StackOverflow.</p>\n"}], "owner": {"reputation": 1303, "user_id": 2338522, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0851940df9b53b337c8234e408ad8ab5?s=128&d=identicon&r=PG", "display_name": "Or B", "link": "https://stackoverflow.com/users/2338522/or-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 47433103, "answer_count": 1, "score": 0, "last_activity_date": 1511731684, "creation_date": 1511347498, "last_edit_date": 1511619782, "question_id": 47432671, "link": "https://stackoverflow.com/questions/47432671/link2019-unresolved-external-symbol-for-a-function-returning-shared-ptrint", "title": "LINK2019: unresolved external symbol for a function returning shared_ptr&lt;int&gt;", "body": "<p>I am using a dll exporting a function that returns a shared_ptr.</p>\n\n<p>The code from the dll project:</p>\n\n<pre><code>#ifdef _WRAPPER\n    #define WRAPPER_DLL_EXT __declspec(dllexport)\n#else\n    #define WRAPPER_DLL_EXT __declspec(dllimport)\n#endif\n\n\nstd::shared_ptr&lt;int&gt; WRAPPER_DLL_EXT func()\n{\n    return std::make_shared&lt;int&gt;(5);\n}\n</code></pre>\n\n<p>The code from the project using the dll:</p>\n\n<pre><code>std::shared_ptr&lt;int&gt; myPointer = func();\n</code></pre>\n\n<p>I get error <code>LINK2019: unresolved external symbol</code> for <code>func()</code>.</p>\n\n<p>The dll project is compiled using <strong>Visual Studio 2013 Toolset</strong>, whereas the project using the dll is using <strong>Visual Studio 2010 Toolset</strong>.</p>\n\n<p>Compiling the dll using VS2010 toolset prevents the error, but I am using VS2013 features in the implementation so I cannot actually compile the dll with VS2010.\nNote that I cannot upgrade the using project to VS2013.</p>\n\n<p>How can I make it work <strong>using VS2013 toolset</strong> for the project using the dll?</p>\n\n<p>Edit: it works if I change <code>shared_ptr</code> to <code>unique_ptr</code> (but, of course, it's not what I need).</p>\n"}, {"tags": ["c++", "warnings", "preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 5967672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b7ebe06a44265a719b7a0594f259fe22?s=128&d=identicon&r=PG&f=1", "display_name": "Sv Sv", "link": "https://stackoverflow.com/users/5967672/sv-sv"}, "is_accepted": false, "score": -1, "last_activity_date": 1511347573, "creation_date": 1511347573, "answer_id": 47432700, "question_id": 47432645, "link": "https://stackoverflow.com/questions/47432645/keep-getting-the-warning-4996-even-after-defining-crt-secure-no-warnings/47432700#47432700", "title": "Keep getting the Warning 4996, even after defining _CRT_SECURE_NO_WARNINGS", "body": "<p>Consider using</p>\n\n<pre><code>#pragma warning(disable: 4996)\n</code></pre>\n\n<p>instead. </p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8910135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39506795df2e8f1f9aa71cfad9c53442?s=128&d=identicon&r=PG&f=1", "display_name": "Giraffpaj", "link": "https://stackoverflow.com/users/8910135/giraffpaj"}, "edited": false, "score": 0, "creation_date": 1511348081, "post_id": 47432770, "comment_id": 81819939, "body": "I still gave me the same  errors apperently, I put it back in Main on top, now I have it in both  C/C++ -&gt; preprocessor -&gt; definitions and in the code, is that a problem?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1, "user_id": 8910135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39506795df2e8f1f9aa71cfad9c53442?s=128&d=identicon&r=PG&f=1", "display_name": "Giraffpaj", "link": "https://stackoverflow.com/users/8910135/giraffpaj"}, "edited": false, "score": 0, "creation_date": 1511348278, "post_id": 47432770, "comment_id": 81820079, "body": "@Giraffpaj you don&#39;t need to have it in both places, but if you have it in both places it wil work too. I recommend to have it only in one place."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1, "user_id": 8910135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39506795df2e8f1f9aa71cfad9c53442?s=128&d=identicon&r=PG&f=1", "display_name": "Giraffpaj", "link": "https://stackoverflow.com/users/8910135/giraffpaj"}, "edited": false, "score": 1, "creation_date": 1511352497, "post_id": 47432770, "comment_id": 81822806, "body": "@Giraffpaj: Note that C++ uses separate compilation. Every .cpp file can cause C4996, so they all need this. Adding it only to the .cpp which defines <code>int main()</code> is probably insufficient. But if you use MSVC&#39;s precompiled headers, putting it as the first line in the shared, precompiled header does work."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1511348093, "last_edit_date": 1511348093, "creation_date": 1511347768, "answer_id": 47432770, "question_id": 47432645, "link": "https://stackoverflow.com/questions/47432645/keep-getting-the-warning-4996-even-after-defining-crt-secure-no-warnings/47432770#47432770", "title": "Keep getting the Warning 4996, even after defining _CRT_SECURE_NO_WARNINGS", "body": "<p>You need to put <code>#define _CRT_SECURE_NO_WARNINGS</code> at the very beginning of the program:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;iostream&gt;\n\nint main()\n{\n  FILE *f = fopen(\"a\", \"r\");\n}\n</code></pre>\n\n<p>But following compiles with the warning because <code>#define _CRT_SECURE_NO_WARNINGS</code> comes after <code>#include &lt;iostream&gt;</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define _CRT_SECURE_NO_WARNINGS\n\nint main()\n{\n  FILE *f = fopen(\"a\", \"r\");\n}\n</code></pre>\n\n<p>The same for <code>#pragma warning(disable: 4996)</code>, you need to put it at the beginning of the program (or at least before <code>#include &lt;iostream&gt;</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1511352357, "post_id": 47433586, "comment_id": 81822727, "body": "Disagree. The &quot;security enhancements&quot; are Microsoft-proprietary functions, which &quot;coincidentally&quot; make your code non-portable."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1511359427, "post_id": 47433586, "comment_id": 81827540, "body": "The old functions are not really deprecated, and the new ones are not always seen as an &quot;enhancement&quot;. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511374292, "post_id": 47433586, "comment_id": 81837634, "body": "@MSalters Utilization of security enhancements in CRT has no impact on portability."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": -1, "last_activity_date": 1511350155, "creation_date": 1511350155, "answer_id": 47433586, "question_id": 47432645, "link": "https://stackoverflow.com/questions/47432645/keep-getting-the-warning-4996-even-after-defining-crt-secure-no-warnings/47433586#47433586", "title": "Keep getting the Warning 4996, even after defining _CRT_SECURE_NO_WARNINGS", "body": "<p>Do not define <code>_CRT_SECURE_NO_WARNINGS</code> or other warning suppressions, it is a workaround that is supposed to be used when upgrading code not yet utilizing security enhancements in CRT. Fix the code that is causing them.</p>\n"}], "owner": {"reputation": 1, "user_id": 8910135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39506795df2e8f1f9aa71cfad9c53442?s=128&d=identicon&r=PG&f=1", "display_name": "Giraffpaj", "link": "https://stackoverflow.com/users/8910135/giraffpaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 803, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511350155, "creation_date": 1511347426, "last_edit_date": 1511348906, "question_id": 47432645, "link": "https://stackoverflow.com/questions/47432645/keep-getting-the-warning-4996-even-after-defining-crt-secure-no-warnings", "title": "Keep getting the Warning 4996, even after defining _CRT_SECURE_NO_WARNINGS", "body": "<p>Hi I'm been struggling to get my preprocessor to quit bugging me about this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/98PIh.png\" rel=\"nofollow noreferrer\"></a></p>\n\n<p>So I added <code>_CRT_SECURE_NO_WARNINGS</code> in the <code>C/C++ -&gt; preprocessor -&gt; definitions</code></p>\n\n<p>But it still said the same, so I defined it below as shown in the code below.\nthough it didnt work. It is shown in output as an error though and not a warning. Is there anything else I should do?</p>\n\n<pre><code>#include \"texture.h\"\n#include &lt;iostream&gt;\n#define _CRT_SECURE_NO_WARNINGS\n#include \"stb_image.h\"\n#define STB_IMAGE_IMPLEMENTATION\n\nTexture::Texture(const std::string&amp; fileName)\n{\n    int width, height, numComponents;\n    unsigned char* data = stbi_load((fileName).c_str(), &amp;width, &amp;height, \n    &amp;numComponents, 4);\n\n   //rest isnt really neccesary i guess\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1511347178, "post_id": 47432494, "comment_id": 81819285, "body": "do you want to fine one &quot;E&quot; or all of them?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1511347253, "post_id": 47432494, "comment_id": 81819340, "body": "and if you want one, does it matter which one? And how do you determine that?"}, {"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 0, "creation_date": 1511348781, "post_id": 47432494, "comment_id": 81820382, "body": "How should the result look like? A bool indicating presence/absence? A pointer to the result? A pair of iterators?"}], "answers": [{"tags": [], "owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "is_accepted": true, "score": 5, "last_activity_date": 1511350703, "last_edit_date": 1511350703, "creation_date": 1511347503, "answer_id": 47432673, "question_id": 47432494, "link": "https://stackoverflow.com/questions/47432494/how-to-find-an-element-in-a-vector-of-vectors/47432673#47432673", "title": "how to find an element in a vector of vectors", "body": "<p>Keep it simple:</p>\n\n<pre><code>for (auto const &amp;stringVector : v) {\n    auto it = std::find(std::begin(stringVector), std::end(stringVector), x);\n    if (it != std::end(stringVector)) {\n         // do what you want\n         break;\n    }\n}\n</code></pre>\n\n<p>I'd like to make a comment, perhaps as a side-note. Your title asks \"How to find an element in a vector of vectors\". Your question, however, asks \"How to use <code>std::find</code> for my case?\" </p>\n\n<p>You shouldn't use <code>std::find</code> because that's what you're \"supposed to do\". Use it when it's helpful, and avoid it when its harmful. Start from your data, not from the code. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To answer your edit, you can use <code>std::find_if</code>.</p>\n\n<pre><code>using namespace std;\n\nbool find_string(vector&lt;vector&lt;string&gt;&gt; const &amp;v, string const &amp;x) {\n    return find_if(begin(v), end(v), [&amp;x] (vector&lt;string&gt; const &amp;stringVector) {\n        return find(begin(stringVector), end(stringVector), x) == end(stringVector);\n    }) != end(v);\n}\n</code></pre>\n\n<p>But this is less readable in my view. </p>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1511352177, "last_edit_date": 1511352177, "creation_date": 1511347560, "answer_id": 47432694, "question_id": 47432494, "link": "https://stackoverflow.com/questions/47432494/how-to-find-an-element-in-a-vector-of-vectors/47432694#47432694", "title": "how to find an element in a vector of vectors", "body": "<p>What about searching each vector in a loop and then using <code>std::find</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;    \n\n//using namespace std;\nint main(){\n    std::vector&lt;std::string&gt; vA{\"A\", \"B\", \"C\"};\n    std::vector&lt;std::string&gt; vB{\"D\", \"E\", \"F\"};\n\n    std::string x = \"E\";\n    std::vector&lt;std::vector&lt;std::string&gt;&gt; v{vA, vB};\n\n    for(auto inner_vec : v){\n        auto res = std::find(std::begin(inner_vec), std::end(inner_vec), x);\n        if(res != std::end(inner_vec))\n            std::cout &lt;&lt; *res;\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 1, "last_activity_date": 1511347563, "creation_date": 1511347563, "answer_id": 47432695, "question_id": 47432494, "link": "https://stackoverflow.com/questions/47432494/how-to-find-an-element-in-a-vector-of-vectors/47432695#47432695", "title": "how to find an element in a vector of vectors", "body": "<p>If you're fine with just a pointer to the string:</p>\n\n<pre><code>std::string* foo(const std::vector&lt;std::vector&lt;std::string&gt;&gt;&amp; v, \n                 const std::string_view needle)\n{\n    for(const auto&amp; inner : v)\n        for(const auto&amp; s : inner)\n            if(s == needle) return &amp;s;\n\n    return nullptr;\n}\n</code></pre>\n\n<hr>\n\n<p>If you want the iterators:</p>\n\n<pre><code>auto foo(const std::vector&lt;std::vector&lt;std::string&gt;&gt;&amp; v, \n         const std::string_view needle)\n{\n    for(auto oit = std::begin(v); oit != std::end(v); ++oit)\n        for(auto it = std::begin(inner); it != std::end(inner); ++it)\n            if(*it == needle) return std::make_pair(oit, it);\n\n    return std::make_pair(std::end(v), decltype(v[0].begin()){});\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1511351626, "creation_date": 1511351626, "answer_id": 47434074, "question_id": 47432494, "link": "https://stackoverflow.com/questions/47432494/how-to-find-an-element-in-a-vector-of-vectors/47434074#47434074", "title": "how to find an element in a vector of vectors", "body": "<p>With <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">range-v3</a>, it would be:</p>\n\n<pre><code>auto flat_view = v | ranges::view::join;\nauto it = ranges::find(flat_view, x);\nif (it != end(flat_view)) {\n    std::cout &lt;&lt; \"found\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e34599f521361b5b\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 7539, "user_id": 1371057, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8a771bfb70b2d4600cd424585787cd05?s=128&d=identicon&r=PG", "display_name": "Irbis", "link": "https://stackoverflow.com/users/1371057/irbis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2393, "favorite_count": 1, "accepted_answer_id": 47432673, "answer_count": 4, "score": 1, "last_activity_date": 1511352177, "creation_date": 1511347019, "last_edit_date": 1511349159, "question_id": 47432494, "link": "https://stackoverflow.com/questions/47432494/how-to-find-an-element-in-a-vector-of-vectors", "title": "how to find an element in a vector of vectors", "body": "<p>I want to find string <strong>x</strong> in vector of vectors <strong>v</strong>:</p>\n\n<pre><code>std::vector&lt;std::string&gt; vA{\"A\", \"B\", \"C\"};\nstd::vector&lt;std::string&gt; vB{\"D\", \"E\", \"F\"};\n\nstd::string x = \"E\";\nstd::vector&lt;std::vector&lt;std::string&gt;&gt; v{vA, vB};\n</code></pre>\n\n<p>How to use std::find for my case ? Do you have some other ideas ?</p>\n\n<p><strong>Edit</strong> A result that bool value which indicates that at least one \"E\" has been found.</p>\n\n<p>I wonder if it is possible to use somehow std::find* this way:</p>\n\n<pre><code>std::find*(v.begin(), v.end(), /*lambda with next std::find*/) \n</code></pre>\n"}, {"tags": ["c++", "class", "oop", "templates", "conditional-statements"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1511346854, "post_id": 47432410, "comment_id": 81819061, "body": "Note, <code>_B</code> is a generally reserved identifier. Avoid those."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511347198, "post_id": 47432410, "comment_id": 81819302, "body": "On another (unrelated) note: you don&#39;t need the template when declaring the constructor or destructor. E.g. <code>A();</code> is just fine, the compiler will do the right thing anyway."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1511348309, "post_id": 47432410, "comment_id": 81820104, "body": "is <code>B</code> vs <code>_B</code> a typo or on purpose?"}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1511347611, "last_edit_date": 1511347611, "creation_date": 1511346902, "answer_id": 47432445, "question_id": 47432410, "link": "https://stackoverflow.com/questions/47432410/condition-in-class-definition/47432445#47432445", "title": "Condition in class definition", "body": "<p>You can do it with a <a href=\"http://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">full specialization</a>. e.g.</p>\n\n<pre><code>class B {};\n\ntemplate &lt;class T&gt;\nclass A\n{\n    private:\n        std::vector&lt;std::shared_ptr&lt;T&gt;&gt; ptrVector;\n    public:\n        A();\n        void pushBack(std::shared_ptr&lt;T&gt; t);\n        ~A(){};\n};\n\ntemplate &lt;&gt;\nclass A&lt;B&gt;\n{\n    private:\n        std::vector&lt;std::shared_ptr&lt;B&gt;&gt; ptrVector;\n    public:\n        A();\n        void pushBack(std::shared_ptr&lt;B&gt; t);\n        void doSth();\n        ~A(){};\n};\n</code></pre>\n\n<p>You can also consider about making a common base class to avoid code duplication.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 8988570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49da7e1891093bd8948cf21baed8906?s=128&d=identicon&r=PG&f=1", "display_name": "Farkor123", "link": "https://stackoverflow.com/users/8988570/farkor123"}, "edited": false, "score": 1, "creation_date": 1511348339, "post_id": 47432519, "comment_id": 81820128, "body": "Thats EXACTLY what i was looking for, thanks a lot &lt;3"}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1511349021, "post_id": 47432519, "comment_id": 81820530, "body": "Interesting construction. Can you 1) explain the <code>-&gt;</code> construction a bit more, and 2) explain what <code>auto</code> does in this context?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 1, "creation_date": 1511349398, "post_id": 47432519, "comment_id": 81820769, "body": "@Chiel: <code>auto foo(...) -&gt; R</code> is a <i>trailing return type</i>, introduced in C++11. <a href=\"https://www.ibm.com/developerworks/community/blogs/5894415f-be62-4bc0-81c5-3956e82276f3/entry/introduction_to_the_c_11_feature_trailing_return_types?lang=en\" rel=\"nofollow noreferrer\">ibm.com/developerworks/community/blogs/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 8988570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49da7e1891093bd8948cf21baed8906?s=128&d=identicon&r=PG&f=1", "display_name": "Farkor123", "link": "https://stackoverflow.com/users/8988570/farkor123"}, "edited": false, "score": 0, "creation_date": 1511351504, "post_id": 47432519, "comment_id": 81822153, "body": "<a href=\"https://hastebin.com/xijiqocupe.hpp\" rel=\"nofollow noreferrer\">hpp</a> , <a href=\"https://hastebin.com/uzokulepoz.cpp\" rel=\"nofollow noreferrer\">cpp</a> , these are the files i wrote, but i keep getting error: prototype in .cpp doesn&#39;t match any in .h. How should it look?"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 5, "last_activity_date": 1511347077, "creation_date": 1511347077, "answer_id": 47432519, "question_id": 47432410, "link": "https://stackoverflow.com/questions/47432410/condition-in-class-definition/47432519#47432519", "title": "Condition in class definition", "body": "<p>You can use <code>std::enable_if</code> to conditionally make <code>doSth</code> available without having to specialize the entire class:</p>\n\n<pre><code>template &lt;class T&gt;\nclass A\n{\n    private:\n        std::vector&lt;std::shared_ptr&lt;T&gt;&gt; ptrVector;\n    public:\n        A&lt;T&gt;();\n        void pushBack(std::shared_ptr&lt;T&gt; t);    \n\n        template &lt;typename U = T&gt;\n        auto doSth() -&gt; std::enable_if_t&lt;std::is_same&lt;U, B&gt;::value&gt;;     \n\n        ~A&lt;T&gt;(){};\n};\n</code></pre>\n\n<p>You need <code>template &lt;typename U = T&gt;</code> because <code>std::enable_if_t</code> relies on SFINAE. See <a href=\"https://stackoverflow.com/questions/6972368/stdenable-if-to-conditionally-compile-a-member-function\">std::enable_if to conditionally compile a member function</a> for more information.</p>\n"}], "owner": {"reputation": 39, "user_id": 8988570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49da7e1891093bd8948cf21baed8906?s=128&d=identicon&r=PG&f=1", "display_name": "Farkor123", "link": "https://stackoverflow.com/users/8988570/farkor123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1511348705, "creation_date": 1511346777, "last_edit_date": 1511348705, "question_id": 47432410, "link": "https://stackoverflow.com/questions/47432410/condition-in-class-definition", "title": "Condition in class definition", "body": "<p>I'm trying to do something like:</p>\n\n<pre><code>#pragma once\n#include &lt;memory&gt;\n#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\nclass B{}\n\ntemplate &lt;class T&gt;\nclass A\n{\n    private:\n        std::vector&lt;std::shared_ptr&lt;T&gt;&gt; ptrVector;\n    public:\n        A&lt;T&gt;();\n        void pushBack(std::shared_ptr&lt;T&gt; t);\n        if(std::is_same&lt;T, B&gt;::value)\n        {\n            void doSth();\n        }\n        ~A&lt;T&gt;(){};\n};\n</code></pre>\n\n<p>is it even possible to do a condition like this, somehow?\nNo, I can't inherit from this class, and need doSth() ONLY if <code>A&lt;B&gt;</code>, the doSth() should not exist if <code>A&lt;C&gt;</code>.</p>\n"}, {"tags": ["c++", "arrays", "time"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1511346729, "post_id": 47432368, "comment_id": 81818965, "body": "Did you turn on optimizations?"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511346758, "post_id": 47432368, "comment_id": 81818988, "body": "@nwp I think he would need to turn them off, relative to the default."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 1, "creation_date": 1511346818, "post_id": 47432368, "comment_id": 81819028, "body": "@kabanus All compilers and IDEs I know default to optimizing for debugging, not for runtime performance."}, {"owner": {"reputation": 538, "user_id": 2950316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7716c1ef06d41777a5dee35a8116c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2950316/alexander"}, "edited": false, "score": 1, "creation_date": 1511347126, "post_id": 47432368, "comment_id": 81819249, "body": "<a href=\"https://godbolt.org/g/6phKFq\" rel=\"nofollow noreferrer\">godbolt.org/g/6phKFq</a> - compiler is not as smart - it does not know that the array contains only zeros"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 538, "user_id": 2950316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7716c1ef06d41777a5dee35a8116c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2950316/alexander"}, "edited": false, "score": 1, "creation_date": 1511347381, "post_id": 47432368, "comment_id": 81819429, "body": "@Alexander <a href=\"https://godbolt.org/g/kjM7bX\" rel=\"nofollow noreferrer\">Making the array local helps</a>. Unfortunately <a href=\"https://godbolt.org/g/uzeg9e\" rel=\"nofollow noreferrer\">not on mscv</a>."}, {"owner": {"reputation": 538, "user_id": 2950316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7716c1ef06d41777a5dee35a8116c2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2950316/alexander"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511347626, "post_id": 47432368, "comment_id": 81819603, "body": "@nwp not for all the compilers. clang still does not know."}], "answers": [{"comments": [{"owner": {"reputation": 1767, "user_id": 7148586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5758390a3f6cf3ee875b5ae2bfb511?s=128&d=identicon&r=PG&f=1", "display_name": "hyun woo Cho", "link": "https://stackoverflow.com/users/7148586/hyun-woo-cho"}, "edited": false, "score": 0, "creation_date": 1511347823, "post_id": 47432553, "comment_id": 81819739, "body": "However, execute the code d = data [i] in the if statement, the operation time is 0."}], "tags": [], "owner": {"reputation": 1625, "user_id": 737347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vz9OJ.jpg?s=128&g=1", "display_name": "ivanmoskalev", "link": "https://stackoverflow.com/users/737347/ivanmoskalev"}, "is_accepted": false, "score": 0, "last_activity_date": 1511347166, "creation_date": 1511347166, "answer_id": 47432553, "question_id": 47432368, "link": "https://stackoverflow.com/questions/47432368/c-array-value-assignment-time/47432553#47432553", "title": "c++ array value assignment time", "body": "<p>What you see is probably the raw time of iterating over the 100m array. </p>\n\n<p>Theoretically, it may change if the compiler somehow deduces that the array is filled with zeroes, and, consequently, the <code>if</code> branch will never be executed. In this case, it may remove the loop.</p>\n\n<p>I have not encountered such a smart compiler yet.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1511347941, "creation_date": 1511347941, "answer_id": 47432839, "question_id": 47432368, "link": "https://stackoverflow.com/questions/47432368/c-array-value-assignment-time/47432839#47432839", "title": "c++ array value assignment time", "body": "<p>The only way to be sure would be to examine what code is output by the compiler, to determine what the compiler is doing with the loop (removing it entirely, replacing it with some simpler construct, emitting code for it \"as is\").</p>\n\n<p>Most modern compilers are configured, by default, to NOT optimise for performance.   If you want such optimisations, you need to specifically enable it (IDE setting or compiler-specific command line option, depending on how you invoke the compiler).</p>\n\n<p>Even with optimisation enabled, it is possible the compiler will not optimise the loop out of existence.  <code>GetTickCount()</code> is a library function and - particularly since <code>arr</code> is a global - the compiler may allow for the possibility that it affects the data stored in <code>arr</code> - which will mean it cannot not optimise the loop out of existence entirely.    Since it is a windows API function, compilers targeting windows might have \"in-built\" knowledge of what <code>GetTickCount()</code> does, but that is not guaranteed.   Without such in-built knowledge, the compiler would probably be less aggressive (or more conservative) with optimisation.</p>\n\n<p>With aliasing in play (such as your case of having a pointer referencing the array) the compiler may also play it conservatively.</p>\n\n<p>No matter what the compiler does, measured times will be affected by load on the host system (e.g. what other programs are consuming CPU cycles).</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1511349016, "creation_date": 1511349016, "answer_id": 47433218, "question_id": 47432368, "link": "https://stackoverflow.com/questions/47432368/c-array-value-assignment-time/47433218#47433218", "title": "c++ array value assignment time", "body": "<p>You are right on one point: the total time taken by assignment is 0 in your program. <em>But</em> the program does not reduce to assignments, it also contains tests (and at a lower level <em>jumps</em> to allow loops and conditionals). And here you ask for 100000000 tests...</p>\n\n<p>Of course a normal human being can easily deduce that as the array was initialized to 0, and never modified, all the tests will return false and that the loop is just a no-op and could be optimized out. But unfortunately, that is too complex for most compilers, and IMHO most will just execute all the tests, which spends the observed duration.</p>\n"}], "owner": {"reputation": 1767, "user_id": 7148586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5758390a3f6cf3ee875b5ae2bfb511?s=128&d=identicon&r=PG&f=1", "display_name": "hyun woo Cho", "link": "https://stackoverflow.com/users/7148586/hyun-woo-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511349016, "creation_date": 1511346680, "last_edit_date": 1511347481, "question_id": 47432368, "link": "https://stackoverflow.com/questions/47432368/c-array-value-assignment-time", "title": "c++ array value assignment time", "body": "<p>I am wondering how long it takes to allocate a value to an array in c ++.<br>\nI test a code which assign array arr = 0 and then, arr to change the value if arr> 20. </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt; windows.h &gt;\n\nusing namespace std;\n\n#define N 100000000\nint arr[N] = { 0, };\n\nint main(){\n    int d;\n\n    int *data;\n    data = arr;\n\n    double start = GetTickCount();\n    for(int i = 0; i &lt; N; i++){\n        if (data[i] &gt; 20){ //All data is zero\n            // d = data[i];\n            data[i] = 10;\n        }\n    }\n\n    double end = GetTickCount();\n    cout &lt;&lt; (end - start) / (double)1000 &lt;&lt; endl;\n\n    return -1;\n}\n</code></pre>\n\n<p>I think there is no data allocated to arr, \nbecause all the data is less than 20,<br>\nso the calculation time should be close to 0. but the calculation time is as 0.188s.<br>\nWhat is the reason?<br>\nenviroment: visual studio 2013 community<br>\ncompile option(optimaztion): /O2(0.188s), /Ox(0.141)</p>\n"}, {"tags": ["c++", "serialization", "sparse-matrix", "eigen", "suitesparse"], "comments": [{"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1511385393, "post_id": 47432356, "comment_id": 81843135, "body": "If you are using <code>CholmodSupernodalLLT</code> then look at Cholmod&#39;s userguide to see if Cholmod offers that. If so, then you can indeed subclass <code>CholmodSupernodalLLT</code> to easily achieve your goals."}, {"owner": {"reputation": 166, "user_id": 940644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9fffb37fd53bf09c9e5de5fa6af20a?s=128&d=identicon&r=PG", "display_name": "sordid", "link": "https://stackoverflow.com/users/940644/sordid"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1511433158, "post_id": 47432356, "comment_id": 81861222, "body": "Thanks for the reply @ggael, however it does not. Do any of the other Eigen solvers allow for serialization?"}, {"owner": {"reputation": 166, "user_id": 940644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9fffb37fd53bf09c9e5de5fa6af20a?s=128&d=identicon&r=PG", "display_name": "sordid", "link": "https://stackoverflow.com/users/940644/sordid"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1511528182, "post_id": 47432356, "comment_id": 81902059, "body": "I ended up writing my own function building on <code>cholmod_copy_factor</code> to serialize to a file stream."}], "owner": {"reputation": 166, "user_id": 940644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9fffb37fd53bf09c9e5de5fa6af20a?s=128&d=identicon&r=PG", "display_name": "sordid", "link": "https://stackoverflow.com/users/940644/sordid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511346663, "creation_date": 1511346663, "question_id": 47432356, "link": "https://stackoverflow.com/questions/47432356/is-there-a-way-to-get-set-the-factorization-of-large-sparse-matrices-within-eige", "title": "Is there a way to get/set the factorization of large sparse matrices within Eigen solvers?", "body": "<p>I have a program where the system matrix within the sparse solver (using the Eigen library) is often the same, and could be precomputed once and loaded as a file. Ideally I would want to serialize the whole solver, but there seems to be no way to do that with Eigen.</p>\n\n<p>I am currently using <code>CholmodSupernodalLLT</code>, so I suppose one way could be to subclass <code>CholmodSupernodalLLT</code> and find a way to serialize <code>cholmod_factor</code>, however I am at a loss on how to serialize this type as well.</p>\n\n<p>I am willing to use other solvers (preferably LLT) or even other libraries if they have this capability.</p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "template-meta-programming", "partial-application"], "comments": [{"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1511346634, "post_id": 47432221, "comment_id": 81818909, "body": "What error does Clang give?"}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "reply_to_user": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1511346958, "post_id": 47432221, "comment_id": 81819138, "body": "@piwi <i>clang++</i> and <i>vc++</i> error messages are available at <a href=\"https://godbolt.org/g/XeaEpr\" rel=\"nofollow noreferrer\">the link to the <b>godbolt.org</b> in the question</a>. I have added them to the question, too."}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1511347180, "post_id": 47432221, "comment_id": 81819287, "body": "My bad did not see it before posting the comment."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1511347364, "post_id": 47432221, "comment_id": 81819418, "body": "Add a 3rd template parameter <code>typename...</code> to <code>Bar</code>?"}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "reply_to_user": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1511348588, "post_id": 47432221, "comment_id": 81820283, "body": "@songyuanyao <code>Bar</code> and <code>Foo</code> are the example classes here to demonstrate the problem. Their characteristics are given from outside. In fact it is the smallest MWE that demonstrates the problem in some complex template code."}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1511349447, "post_id": 47432221, "comment_id": 81820806, "body": "I cannot tell which is compliant but to me the error seems relevant; when deducing the <code>apply&lt;Bar, int, char&gt;::type</code> template alias, <code>Bar&lt;int, char&gt;</code> is fully specialized, therefore there is no way additional types can be fed to <code>Functor</code> later on."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1511349833, "post_id": 47432221, "comment_id": 81821071, "body": "<a href=\"https://timsong-cpp.github.io/cppwp/temp.res#8.3\" rel=\"nofollow noreferrer\">&#91;temp.res&#93;/8.3</a>. This is ill-formed NDR. But see <a href=\"https://wg21.link/CWG2067\" rel=\"nofollow noreferrer\">core issue 2067</a>."}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1511350431, "post_id": 47432221, "comment_id": 81821492, "body": "@T.C. Thank you for your references! But how such code can be fixed to be compiled?"}], "answers": [{"comments": [{"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "edited": false, "score": 0, "creation_date": 1511351173, "post_id": 47433821, "comment_id": 81821953, "body": "Thank you. Could you copy your workaround code to your answer?"}], "tags": [], "owner": {"reputation": 4954, "user_id": 893819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2wHm8.jpg?s=128&g=1", "display_name": "odinthenerd", "link": "https://stackoverflow.com/users/893819/odinthenerd"}, "is_accepted": false, "score": 5, "last_activity_date": 1511779104, "last_edit_date": 1511779104, "creation_date": 1511350908, "answer_id": 47433821, "question_id": 47432221, "link": "https://stackoverflow.com/questions/47432221/apply-template-compiles-in-g-but-not-in-clang-and-vc/47433821#47433821", "title": "`apply` template compiles in g++ but not in clang++ and vc++", "body": "<p><strong>note:</strong> after looking at this, this answer would be correct if Bar were an alias template rather than a class template. The workaround works but for other reasons. See Constructors answer for the correct answer of the OP.</p>\n\n<p>This problem is known as the 'alias flaw' and we had a lot of challenges with it in the implementation of kvasir::mpl. The problem is that Bar takes exactly two parameters but <code>sizeof...(FixedArguments)+sizeof...(FreeArguments)</code> could add up to something besides 2. </p>\n\n<p>The compiler can either try and track the potential arity through all the alias calls and only issue errors when the user actually passes something besides 2 or it can \"eagerly\" give an error simply by proving that an error could occur. </p>\n\n<p>The work around I have found effective in dealing with this is to make the alias call dependant on the size of the input <a href=\"https://godbolt.org/g/PT4uaE\" rel=\"nofollow noreferrer\">https://godbolt.org/g/PT4uaE</a></p>\n\n<pre><code>template&lt;bool&gt;\nstruct depends{\n    template&lt;template&lt;typename...&gt; class F, typename...Ts&gt;\n    using f = F&lt;Ts...&gt;;\n};\n\ntemplate&lt;&gt;\nstruct depends&lt;false&gt;{\n    template&lt;template&lt;typename...&gt; class F, typename...Ts&gt;\n    using f = void;\n};\n\ntemplate &lt;template &lt;typename...&gt; class Functor, typename... FixedArguments&gt;\nstruct apply\n{\n    template &lt;typename... FreeArguments&gt;\n    using type = typename depends&lt;(sizeof...(FixedArguments)+sizeof...(FreeArguments) == 2)&gt;::template f&lt;Functor, FixedArguments..., FreeArguments...&gt;;\n};\n\ntemplate &lt;typename, typename&gt;\nstruct Bar{};\n\ntemplate &lt;template &lt;typename...&gt; class&gt;\nstruct Foo{};\n\nint main()\n{\n    (void)Foo&lt;apply&lt;Bar, int, char&gt;::type&gt;{};\n}\n</code></pre>\n\n<p>It should be noted that constraining to exactly two is not needed on all compiler I have tested, one could just as easilty constrain to be <code>sizeof...(FixedArguments)+sizeof...(FreeArguments) != 100000</code> and the compiler will still take it only issuing an error if things actually don'T work out on a concrete call.</p>\n\n<p>I would actually like to improve my mental model of how this works internally in order to come up with faster work arounds, in kvasir::mpl we are currently experimenting with tracking the arity manually behind the scenes in order to eliminate the dependant calls which do slow things down a little.</p>\n"}, {"comments": [{"owner": {"reputation": 4954, "user_id": 893819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2wHm8.jpg?s=128&g=1", "display_name": "odinthenerd", "link": "https://stackoverflow.com/users/893819/odinthenerd"}, "edited": false, "score": 0, "creation_date": 1511740370, "post_id": 47437965, "comment_id": 81960296, "body": "I think this is actually the correct answer and my solution just happens to work. SHould be noted though that the workaround creates a type and will, therefore, be slower."}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "reply_to_user": {"reputation": 4954, "user_id": 893819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2wHm8.jpg?s=128&g=1", "display_name": "odinthenerd", "link": "https://stackoverflow.com/users/893819/odinthenerd"}, "edited": false, "score": 0, "creation_date": 1511986072, "post_id": 47437965, "comment_id": 82079602, "body": "@odinthenerd I&#39;ve added the necessary note."}, {"owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "reply_to_user": {"reputation": 4954, "user_id": 893819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2wHm8.jpg?s=128&g=1", "display_name": "odinthenerd", "link": "https://stackoverflow.com/users/893819/odinthenerd"}, "edited": false, "score": 0, "creation_date": 1511986160, "post_id": 47437965, "comment_id": 82079653, "body": "@odinthenerd Do you not mind that I accept my answer instead of yours?"}], "tags": [], "owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "is_accepted": true, "score": 1, "last_activity_date": 1511986020, "last_edit_date": 1511986020, "creation_date": 1511363247, "answer_id": 47437965, "question_id": 47432221, "link": "https://stackoverflow.com/questions/47432221/apply-template-compiles-in-g-but-not-in-clang-and-vc/47437965#47437965", "title": "`apply` template compiles in g++ but not in clang++ and vc++", "body": "<p>As <a href=\"https://stackoverflow.com/users/2756719/t-c\"><strong>@T.C.</strong></a> <a href=\"https://stackoverflow.com/questions/47432221/apply-template-compiles-in-g-but-not-in-clang-and-vc#comment81821071_47432221\">noted in the comments to the question</a> such code is ill-formed (no diagnostic required).</p>\n\n<p><strong>C++14 standard, section \"Name resolution\" [temp.res], paragraph 8:</strong></p>\n\n<blockquote>\n  <p>If every valid specialization of a variadic template requires an empty\n  template parameter pack, the template is ill-formed, no diagnostic\n  required.</p>\n</blockquote>\n\n<p><strong>Latest drafts of the C++ standard, section \"Name resolution\" [temp.res], paragraph 8.3:</strong></p>\n\n<blockquote>\n  <p>...The program is ill-formed, no diagnostic required, if:  </p>\n  \n  <ul>\n  <li>...</li>\n  <li>every valid specialization of a variadic template requires an empty template parameter pack...</li>\n  </ul>\n</blockquote>\n\n<p>Additional information: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#2067\" rel=\"nofollow noreferrer\"><strong>Core Issue 2067</strong></a>.</p>\n\n<p>In accordance with the standard requirements such simple workaround can be written:</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class Functor, typename... Arguments&gt;\nstruct invoke\n{\n    using type = Functor&lt;Arguments...&gt;;\n};\n\ntemplate &lt;template &lt;typename...&gt; class Functor, typename... FixedArguments&gt;\nstruct apply\n{\n    template &lt;typename... FreeArguments&gt;\n    using type = typename invoke&lt;Functor, FixedArguments..., FreeArguments...&gt;::type;\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/xBzjW6\" rel=\"nofollow noreferrer\"><kbd>Live demo</kbd></a></p>\n\n<p><strong>Update:</strong> As <a href=\"https://stackoverflow.com/users/893819/odinthenerd\"><strong>@odinthenerd</strong></a> <a href=\"https://stackoverflow.com/questions/47432221/apply-template-compiles-in-g-but-not-in-clang-and-vc#comment81960296_47437965\">noted in the comments</a> this workaround uses an additional type which leads to a slower compilation of the program.</p>\n"}], "owner": {"reputation": 6883, "user_id": 3043539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9b4da211d51b30b90ac532d6f0b07884?s=128&d=identicon&r=PG&f=1", "display_name": "Constructor", "link": "https://stackoverflow.com/users/3043539/constructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 47437965, "answer_count": 2, "score": 2, "last_activity_date": 1511986020, "creation_date": 1511346289, "last_edit_date": 1511346820, "question_id": 47432221, "link": "https://stackoverflow.com/questions/47432221/apply-template-compiles-in-g-but-not-in-clang-and-vc", "title": "`apply` template compiles in g++ but not in clang++ and vc++", "body": "<p>The following code <a href=\"https://godbolt.org/g/XeaEpr\" rel=\"nofollow noreferrer\">compiles successfully</a> in <em>g++ 7.2.0</em> (compilation flags are <code>-std=c++14 -Wall -Wextra -Werror -pedantic-errors</code>), but it fails to compile in <em>clang++ 5.0.0</em> (with the same flags, <code>-std=c++14 -Wall -Wextra -Werror -pedantic-errors</code>) and <em>vc++ 15.4</em> (compilation flags are <code>/EHsc /Za /std:c++14 /permissive-</code>):</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class Functor, typename... FixedArguments&gt;\nstruct apply\n{\n    template &lt;typename... FreeArguments&gt;\n    using type = Functor&lt;FixedArguments..., FreeArguments...&gt;;\n};\n\ntemplate &lt;typename, typename&gt;\nstruct Bar{};\n\ntemplate &lt;template &lt;typename...&gt; class&gt;\nstruct Foo{};\n\nint main()\n{\n    (void)Foo&lt;apply&lt;Bar, int, char&gt;::type&gt;{};\n}\n</code></pre>\n\n<p>Which compiler behavior is standard compliant? How such template <code>apply</code> may be changed to be compiled on <em>clang++</em>, too?</p>\n\n<p><em>clang++</em> error messages:</p>\n\n<blockquote>\n<pre><code>5 : &lt;source&gt;:5:15: error: too many template arguments for class template 'Bar'\n        using type = Functor&lt;FixedArguments..., FreeArguments...&gt;;\n                     ^                          ~~~~~~~~~~~~~~~~~\n16 : &lt;source&gt;:16:15: note: in instantiation of template class 'apply&lt;Bar, int, char&gt;' requested here\n    (void)Foo&lt;apply&lt;Bar, int, char&gt;::type&gt;{};\n              ^\n9 : &lt;source&gt;:9:8: note: template is declared here\nstruct Bar{};\n</code></pre>\n</blockquote>\n\n<p><em>vc++</em> error messages:</p>\n\n<blockquote>\n<pre><code>5 : &lt;source&gt;(5): error C2977: 'Bar': too many template arguments\n9 : &lt;source&gt;(9): note: see declaration of 'Bar'\n16 : &lt;source&gt;(16): note: see reference to class template instantiation 'apply&lt;Bar,int,char&gt;' being compiled\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "windows", "compiler-errors", "v8"], "comments": [{"owner": {"reputation": 256, "user_id": 558555, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2d89d033ae40d0db8e7ca6d85a74d617?s=128&d=identicon&r=PG", "display_name": "Ujjwal", "link": "https://stackoverflow.com/users/558555/ujjwal"}, "edited": false, "score": 0, "creation_date": 1511346474, "post_id": 47432131, "comment_id": 81818781, "body": "Building such big projects on windows is always been a big mess. Try linux you will breeze through the build process."}, {"owner": {"reputation": 92, "user_id": 8988073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f4bb1a6f0c3e7412631aaeadbe43d1?s=128&d=identicon&r=PG&f=1", "display_name": "notvita", "link": "https://stackoverflow.com/users/8988073/notvita"}, "reply_to_user": {"reputation": 256, "user_id": 558555, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2d89d033ae40d0db8e7ca6d85a74d617?s=128&d=identicon&r=PG", "display_name": "Ujjwal", "link": "https://stackoverflow.com/users/558555/ujjwal"}, "edited": false, "score": 0, "creation_date": 1511346930, "post_id": 47432131, "comment_id": 81819108, "body": "Unfortunately I&#39;m trying to embed the engine into a Windows application I&#39;m working on. I might do that though so I can at least play around with it until I get it to compile on Windows."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5776353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999210dd1e142f3de81922f8c67304a1?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/5776353/pierre"}, "is_accepted": false, "score": 0, "last_activity_date": 1520531155, "last_edit_date": 1520531155, "creation_date": 1520328631, "answer_id": 49127457, "question_id": 47432131, "link": "https://stackoverflow.com/questions/47432131/lnk1181-error-when-compiling-v8-engine-on-win10/49127457#49127457", "title": "LNK1181 error when compiling V8 engine on Win10", "body": "<p>You can try to compile v8 using Visual Studio as explained here: <a href=\"https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md#using-the-visual-studio-ide\" rel=\"nofollow noreferrer\">https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md#using-the-visual-studio-ide</a></p>\n\n<p>By running the following commands:</p>\n\n<pre><code>$ gn gen --ide=vs out.gn/x64.release\n$ cd out.gn/x64.release\n$ msbuild all.sln\n</code></pre>\n\n<p>You can see a full example here: <a href=\"https://github.com/phpv8/v8js/issues/272#issuecomment-262848754\" rel=\"nofollow noreferrer\">https://github.com/phpv8/v8js/issues/272#issuecomment-262848754</a></p>\n\n<p>Apparently this method is not officially supported anymore, but I had the same problem as you have and this solved the issue for me.</p>\n\n<p>Note that after this I had another issue, the unit tests failed to be compiled due to a linking error, but I had the necessary libraries to use v8. So there may be deeper problem that is causing all of this that I'm missing.</p>\n\n<p>Edit:</p>\n\n<p>Also, you could try to set the following parameters with <code>gn args</code>:</p>\n\n<pre><code>visual_studio_path = \"...\"\nvisual_studio_version = \"2017\"\nwdk_path = \"...\"\nwindows_sdk_path = \"C:\\Program Files (x86)\\Windows Kits\\10\"\n</code></pre>\n\n<p>To set those parameters, do:</p>\n\n<pre><code>gn args out.gn/x64.release\n</code></pre>\n\n<p>This will open a text editor where you can write the extra parameters you are interested in.</p>\n\n<p>To see the full list of parameters you can specify:</p>\n\n<pre><code>gn args --list out.gn/x64.release\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 492, "user_id": 8865723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521dc6011257c1cd34e46a41005638f5?s=128&d=identicon&r=PG&f=1", "display_name": "AbrahamCoding", "link": "https://stackoverflow.com/users/8865723/abrahamcoding"}, "is_accepted": false, "score": 0, "last_activity_date": 1521438681, "creation_date": 1521438681, "answer_id": 49356577, "question_id": 47432131, "link": "https://stackoverflow.com/questions/47432131/lnk1181-error-when-compiling-v8-engine-on-win10/49356577#49356577", "title": "LNK1181 error when compiling V8 engine on Win10", "body": "<p>I was following this guide <a href=\"https://medium.com/dailyjs/how-to-build-v8-on-windows-and-not-go-mad-6347c69aacd4\" rel=\"nofollow noreferrer\">https://medium.com/dailyjs/how-to-build-v8-on-windows-and-not-go-mad-6347c69aacd4</a> and also ran into the error </p>\n\n<pre><code>LINK1181: cannot open input file 'advapi32.lib'\n</code></pre>\n\n<p>I'm pretty sure it was because I had the wrong versions of the Windows 10 SDK. Similar to you I had versions:</p>\n\n<pre><code>Windows Kits/10/Lib/10.0.10240.0\nWindows Kits/10/Lib/10.0.16299.0\n</code></pre>\n\n<p>But according to <a href=\"https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md#Setting-up-Windows\" rel=\"nofollow noreferrer\">https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md#Setting-up-Windows</a> (Which I think is relevant) you need version <code>10.0.15063.0</code></p>\n\n<p>After installing version <code>10.0.15063.0</code> (with the visual studio installer) to</p>\n\n<pre><code>Windows Kits/10/Lib/10.0.15063.0\n</code></pre>\n\n<p>I was able to continue with the build.</p>\n"}], "owner": {"reputation": 92, "user_id": 8988073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f4bb1a6f0c3e7412631aaeadbe43d1?s=128&d=identicon&r=PG&f=1", "display_name": "notvita", "link": "https://stackoverflow.com/users/8988073/notvita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1521438681, "creation_date": 1511346059, "question_id": 47432131, "link": "https://stackoverflow.com/questions/47432131/lnk1181-error-when-compiling-v8-engine-on-win10", "title": "LNK1181 error when compiling V8 engine on Win10", "body": "<p>I'm following this guide on <a href=\"https://github.com/v8/v8/wiki/Building-with-GN\" rel=\"nofollow noreferrer\">building V8</a> but I am hitting some issues on the compilation step. I am running Windows 10 x64. I am trying to compile with options to embed the engine also.</p>\n\n<p>Running the following command: </p>\n\n<p><code>ninja -C out.gn/x64.release</code></p>\n\n<p>Gives me this error:</p>\n\n<pre><code>ninja: Entering directory `out.gn/x64.release'\n[1/471] LINK mksnapshot.exe mksnapshot.exe.pdb\nFAILED: mksnapshot.exe mksnapshot.exe.pdb\nC:/Workspace/depot_tools/win_tools-2_7_6_bin/python/bin/python.exe ../../build/toolchain/win/tool_wrapper.py link-wrapper environment.x64 False link.exe /nologo /OUT:./mksnapshot.exe /PDB:./mksnapshot.exe.pdb @./mksnapshot.exe.rsp\nLINK : fatal error LNK1181: cannot open input file 'comdlg32.lib'\nninja: build stopped: subcommand failed.\n</code></pre>\n\n<hr>\n\n<p>Now I believe I have narrowed down the error to looking for the <code>.lib</code> files in the wrong directory. I have (had) multiple versions installed, so there were multiple folders in my Windows Kit install.</p>\n\n<p><code>Windows Kits/10/Lib/10.0.16299.0</code><br>\n<code>Windows Kits/10/Lib/10.0.15xxx.0</code></p>\n\n<p>If I dragged and dropped the <code>comdlg32.lib</code> file from <code>10.0.16299.0</code> into the <code>10.0.15xxx.0</code> directory then the error changed to a <code>LNK1181</code> error with a different input file. I did this a few times but I was unsure if this was going to cause issues with different versions and there was probably going to be a lot.</p>\n\n<p>I uninstalled the <code>10.0.15xxx.0</code> version which left behind the folder I mentioned, so I removed that and after doing so I have started getting the <code>LNK1181</code> error with a different input file (<code>advapi32.lib</code> I assume the very first file it can't find). This is how I came to the conclusion about the path being incorrect.</p>\n\n<hr>\n\n<p>So I have tried a few things to change the path (I hoped just uninstalling the old version would fix it) such as:</p>\n\n<ul>\n<li>Uninstalling the old version.</li>\n<li>Going through registry entries to see if I can find an install path or something using that path, which I didn't. I did notice that there was still installation and data in the registry for the <code>10.0.15xxx.0</code> install, I might try deleting that from the registry directly as a last resort?</li>\n<li>I have tried to explicitly set the path by setting <code>&lt;TargetUniversalCRTVersion&gt;10.0.16299.0&lt;/TargetUniversalCRTVersion&gt;</code> in this file: <code>C:\\Program Files (x86)\\Windows Kits\\10\\DesignTime\\CommonConfiguration\\Neutral\\uCRT.props</code></li>\n<li>I have never used Ninja before so I tried looking for a way to set some kind of <code>lib-path</code> in the command but couldn't really find anything.</li>\n<li>I looked through the python scripts being executed to try and locate something to do with the libs path but couldn't see anything.</li>\n</ul>\n\n<hr>\n\n<p>I would be grateful for any help and suggestions. Thanks.</p>\n"}, {"tags": ["c++", "qt", "qtimer"], "comments": [{"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511345953, "post_id": 47432007, "comment_id": 81818401, "body": "I think your missing the function scope in your class. <code>QTimer * YourClass::timerStart(..)</code>, add this function to your class h file."}, {"owner": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "reply_to_user": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511346777, "post_id": 47432007, "comment_id": 81818999, "body": "sir i tried but that gives me an error,"}, {"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511347421, "post_id": 47432007, "comment_id": 81819463, "body": "please share more code, so I can help you."}, {"owner": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "reply_to_user": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511347781, "post_id": 47432007, "comment_id": 81819707, "body": "sir i have updated the code."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1511348431, "post_id": 47432007, "comment_id": 81820183, "body": "<code>timer</code> is visible only within the constructor. If you want to access it elsewhere, declare it as a class member."}, {"owner": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "edited": false, "score": 0, "creation_date": 1511348865, "post_id": 47432007, "comment_id": 81820437, "body": "Sir its a great help if you can give me an example how to declare it as a class member to return the timer."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "edited": false, "score": 0, "creation_date": 1511364823, "post_id": 47435961, "comment_id": 81831561, "body": "thank you sir, this really helped me. you save my day sir"}, {"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "reply_to_user": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "edited": false, "score": 1, "creation_date": 1511366340, "post_id": 47435961, "comment_id": 81832681, "body": "@AlexDRex great, glad I helped you :)"}], "tags": [], "owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "is_accepted": true, "score": 1, "last_activity_date": 1511357302, "creation_date": 1511357302, "answer_id": 47435961, "question_id": 47432007, "link": "https://stackoverflow.com/questions/47432007/how-to-stop-the-qtimer-upon-a-condition/47435961#47435961", "title": "how to stop the Qtimer upon a condition", "body": "<p>Declare the QTimer as a member in you class</p>\n\n<p>h file:</p>\n\n<pre><code>class Ball: public QObject, public QGraphicsRectItem{\n{\n  Q_OBJECT\n\n  public:\n    // constructor\n    Ball(QGraphicsItem* parent=Q_NULLPTR);\n    // control your timer\n    void start();\n    void stop();\n    ...\n  private:\n    QTimer * m_poTimer;\n}\n</code></pre>\n\n<p>Initiate the timer object in your constractor</p>\n\n<p>cpp file:</p>\n\n<pre><code>Ball::Ball(QGraphicsItem* parent) :\n      QGraphicsItem(parent)\n{  \n  m_poTimer = new QTimer(this); // add this as a parent to control the timer resource\n  m_poTimer-&gt;setInterval(4000);\n\n  connect(m_poTimer,SIGNAL(timeout()),this,SLOT(move()));\n}\n\nvoid Ball::start()\n{\n   // start timer\n   m_poTimer-&gt;start();\n}\n\nvoid Ball::stop()\n{\n   // stop timer\n   m_poTimer-&gt;stop();\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7148824, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/615884848613786/picture?type=large", "display_name": "Alex D Rex", "link": "https://stackoverflow.com/users/7148824/alex-d-rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1911, "favorite_count": 0, "protected_date": 1531352383, "accepted_answer_id": 47435961, "answer_count": 1, "score": -2, "last_activity_date": 1531352109, "creation_date": 1511345727, "last_edit_date": 1511347746, "question_id": 47432007, "link": "https://stackoverflow.com/questions/47432007/how-to-stop-the-qtimer-upon-a-condition", "title": "how to stop the Qtimer upon a condition", "body": "<p>when i executing this Qtimer it says \"invalid use of 'this' in non-member function\"</p>\n\n<pre><code>QTimer *timerStart( )\n{\nQTimer* timer = new QTimer(  );\nBall *b = new Ball();\n\nQObject::connect(timer,SIGNAL(timeout()),b,SLOT(move()));\n//timer-&gt;start( timeMillisecond );\ntimer-&gt;start(15);\nreturn timer;\n}\n</code></pre>\n\n<p>my ball.h file</p>\n\n<pre><code>class Ball: public QObject, public QGraphicsRectItem{\nQ_OBJECT\npublic:\n// constructors\nBall(QGraphicsItem* parent=NULL);\n\n// public methods\ndouble getCenterX();\n\n\n\n\npublic slots:\n// public slots\nvoid move();\n\n\n\nprivate:\n// private attributes\ndouble xVelocity;\ndouble yVelocity;\nint counter = 0;\nQTimer timerStart( );\n\n\n\n// private methods\nvoid stop();\nvoid resetState();\nvoid reverseVelocityIfOutOfBounds();\nvoid handlePaddleCollision();\nvoid handleBlockCollision();\n};\n\n#endif // BALL_H\n</code></pre>\n\n<p>the move() function is in the same class. what i want to do is stop the returned timer upon a if condition is satisfied.</p>\n\n<p>when i issue this code in Ball::Ball constructor in Cpp it works fine. the ball is moving.</p>\n\n<pre><code>  QTimer* timer = new QTimer();\n  timer-&gt;setInterval(4000);\n\n  connect(timer,SIGNAL(timeout()),this,SLOT(move()));\n\n  timer-&gt;start(15);\n</code></pre>\n\n<p>but when i add Qtimer *timerStart beyond the Ball::Ball constructor, iT doesnt work</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 37311, "user_id": 468724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YiUg8.jpg?s=128&g=1", "display_name": "Inder Kumar Rathore", "link": "https://stackoverflow.com/users/468724/inder-kumar-rathore"}, "edited": false, "score": 0, "creation_date": 1511345649, "post_id": 47431918, "comment_id": 81818198, "body": "Because that&#39;s what your code is doing. What was your expected o/p"}, {"owner": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "reply_to_user": {"reputation": 37311, "user_id": 468724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YiUg8.jpg?s=128&g=1", "display_name": "Inder Kumar Rathore", "link": "https://stackoverflow.com/users/468724/inder-kumar-rathore"}, "edited": false, "score": 0, "creation_date": 1511345687, "post_id": 47431918, "comment_id": 81818227, "body": "My expected output was ABCEF"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1511345725, "post_id": 47431918, "comment_id": 81818258, "body": "I think you may have misunderstood <code>continue</code>. Did you mean <code>break</code>?"}, {"owner": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "edited": false, "score": 0, "creation_date": 1511345870, "post_id": 47431918, "comment_id": 81818353, "body": "What I understand is that continue will skip to print letter D"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "edited": false, "score": 0, "creation_date": 1511345941, "post_id": 47431997, "comment_id": 81818396, "body": "Thank you for your answer"}], "tags": [], "owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "is_accepted": false, "score": 0, "last_activity_date": 1511345700, "creation_date": 1511345700, "answer_id": 47431997, "question_id": 47431918, "link": "https://stackoverflow.com/questions/47431918/printing-character-with-continue-statement-in-c/47431997#47431997", "title": "printing character with continue statement in c++", "body": "<p>Your code checks whether <code>ch &gt; 'F'</code> after incrementing and printing it, in other words when <code>ch = 'G'</code> has been printed the condition becomes false and the loop terminates.</p>\n\n<p>As for why the other characters aren't printed, well when <code>ch &lt;= D</code> it is incremented and the <code>continue</code> causes it to skip the <code>putchar</code> and jump back to the <code>while</code>-statement.</p>\n\n<p>EDIT: Apparently the expected output was <code>ABCEF</code>. Keep in mind that without a <code>break</code>-statement a <code>switch-case</code> just continues to the next case. The value of <code>ch</code> determines at what case code starts executing, but unless it finds a <code>break</code> statement, it just falls through to the next case.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "edited": false, "score": 0, "creation_date": 1511345962, "post_id": 47432058, "comment_id": 81818407, "body": "Thanks you for the answer"}], "tags": [], "owner": {"reputation": 37311, "user_id": 468724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YiUg8.jpg?s=128&g=1", "display_name": "Inder Kumar Rathore", "link": "https://stackoverflow.com/users/468724/inder-kumar-rathore"}, "is_accepted": false, "score": 1, "last_activity_date": 1511345985, "last_edit_date": 1511345985, "creation_date": 1511345842, "answer_id": 47432058, "question_id": 47431918, "link": "https://stackoverflow.com/questions/47431918/printing-character-with-continue-statement-in-c/47432058#47432058", "title": "printing character with continue statement in c++", "body": "<p>From <code>A</code> to <code>D</code> the while loop is continued i.e. whenever while hits continue it goes back to the top <code>while (condition)</code></p>\n\n<p>And when char is <code>E</code> it increments the <code>ch</code> and <code>ch</code> has now <code>F</code> which is being put on o/p.</p>\n\n<p>Now the char is <code>F</code> in while condition and it increments the <code>ch</code> in switch and <code>ch</code> has <code>G</code> and that is being put on console.</p>\n\n<p>Thus the o/p is <code>FG</code></p>\n\n<p>Also it's worth noting that <code>continue</code> statement will execute if <code>ch</code> is one of these characters <code>A</code>,<code>B</code>,<code>C</code> or <code>D</code> because switch case falls if it has no statements</p>\n"}, {"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "edited": false, "score": 0, "creation_date": 1511346441, "post_id": 47432146, "comment_id": 81818753, "body": "I don&#39;t understand the question - it works the same way as in your program and everywhere else."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1511346099, "creation_date": 1511346099, "answer_id": 47432146, "question_id": 47431918, "link": "https://stackoverflow.com/questions/47431918/printing-character-with-continue-statement-in-c/47432146#47432146", "title": "printing character with continue statement in c++", "body": "<p>The <code>continue</code> interrupts the loop and starts the next iteration from the beginning.</p>\n\n<p>Your loop is equivalent to</p>\n\n<pre><code>  while (ch &lt;='F'){\n      if (ch == 'A' || ch == 'B' || ch == 'C' || ch == 'D')\n      {\n          ch++;\n      }\n      else if (ch == 'E' || ch == 'F')\n      {\n          ch++;\n          putchar(ch);\n      }\n  }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8246934, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921157061488418/picture?type=large", "display_name": "Cayden B Rani", "link": "https://stackoverflow.com/users/8246934/cayden-b-rani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511348987, "creation_date": 1511345502, "last_edit_date": 1511348987, "question_id": 47431918, "link": "https://stackoverflow.com/questions/47431918/printing-character-with-continue-statement-in-c", "title": "printing character with continue statement in c++", "body": "<pre><code>void main()\n{\n    char ch = 'A';\n    while (ch &lt;= 'F')\n    {\n        switch (ch)\n        {\n            case 'A':\n            case 'B':\n            case 'C':\n            case 'D':\n                ch++;\n                continue;\n            case 'E':\n            case 'F':\n                ch++;\n        }\n        putchar (ch);\n    }\n}\n</code></pre>\n\n<p>My question is why does the above code print only FG even when the condition of while loop is less than 'F'. Why does it doesn't print the other character.</p>\n"}]