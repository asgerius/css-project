[{"tags": ["c++", "memory", "segmentation-fault", "eigen"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1509582098, "post_id": 47065371, "comment_id": 81079562, "body": "Use a debugger!"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1509611147, "post_id": 47065371, "comment_id": 81089205, "body": "Not a solution, but this is why your &quot;solution&quot; does not make a difference: You are creating objects on the heap which (themselves) are only a few bytes large. The actual data was already allocated on the heap."}, {"owner": {"reputation": 626, "user_id": 3152208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f09663fd5fc04bad5e5b09daddb86fe6?s=128&d=identicon&r=PG", "display_name": "yixuan", "link": "https://stackoverflow.com/users/3152208/yixuan"}, "edited": false, "score": 1, "creation_date": 1511240145, "post_id": 47065371, "comment_id": 81764385, "body": "I&#39;m the author of Spectra. How large and sparse is your matrix? And which step triggers the segfault?"}], "owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509579910, "creation_date": 1509579910, "question_id": 47065371, "link": "https://stackoverflow.com/questions/47065371/c-memory-issue-when-using-spectra-to-compute-eigenvalues", "title": "C++: memory issue when using Spectra to compute eigenvalues", "body": "<p>I'm using the library called <code>Spectra</code> to compute eigenvalues of an <code>Eigen</code> sparse matrix. The <a href=\"https://spectralib.org/quick-start.html\" rel=\"nofollow noreferrer\">sample code</a>  provided by the package says that we should do this:</p>\n\n<pre><code>// Construct matrix operation object using the wrapper class SparseGenMatProd\nSparseGenMatProd&lt;double&gt; op(M);\n\n// Construct eigen solver object, requesting the largest three eigenvalues\nGenEigsSolver&lt; double, LARGEST_MAGN, SparseGenMatProd&lt;double&gt; &gt; eigs(&amp;op, 3, 30);\n\n// Initialize and compute\neigs.init();\nint nconv = eigs.compute();\n\n// Retrieve results\nEigen::VectorXcd evalues;\nif(eigs.info() == SUCCESSFUL)\n    evalues = eigs.eigenvalues();\n</code></pre>\n\n<p>In the code excerpt above and below, <code>M</code> is an <code>Eigen::SparseMatrix&lt;double&gt;</code>. However, my sparse matrix is really big and it would consume a lot of memory. Using the sample code leads to a segmentation fault. Therefore, I had to create the matrix operation object on the heap by doing:</p>\n\n<pre><code>SparseGenMatProd&lt;double&gt;* op = new SparseGenMatProd&lt;double&gt;(M);\n\n// Construct eigen solver object, requesting the smallest three eigenvalues\nGenEigsSolver&lt; double, SMALLEST_MAGN, SparseGenMatProd&lt;double&gt; &gt;* eigs = new GenEigsSolver&lt; double, SMALLEST_MAGN, SparseGenMatProd&lt;double&gt; &gt;(op, 3, 30);\n\n// Initialize and compute\neigs-&gt;init(); int nconv = eigs-&gt;compute();\n</code></pre>\n\n<p>This, unfortunately, doesn't fix the issue. I still see a segmentation fault. I'm not sure if that's because my matrix <code>M</code> is too big and I should pass it by reference (if i'm not already doing it). If so, how should I accomplish that?</p>\n"}, {"tags": ["c++", "omnet++", "veins", "inet"], "comments": [{"owner": {"reputation": 1768, "user_id": 6077193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TY6WI.jpg?s=128&g=1", "display_name": "Julian Heinovski", "link": "https://stackoverflow.com/users/6077193/julian-heinovski"}, "edited": false, "score": 0, "creation_date": 1509612319, "post_id": 47065248, "comment_id": 81089901, "body": "Which versions of OMNeT++ and INET do you use?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8666366"}, "reply_to_user": {"reputation": 1768, "user_id": 6077193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TY6WI.jpg?s=128&g=1", "display_name": "Julian Heinovski", "link": "https://stackoverflow.com/users/6077193/julian-heinovski"}, "edited": false, "score": 0, "creation_date": 1509642970, "post_id": 47065248, "comment_id": 81111234, "body": "@JulianHeinovski Omnet++ 5.1.1 and INET 3.6.0"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8666366"}, "reply_to_user": {"reputation": 1768, "user_id": 6077193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TY6WI.jpg?s=128&g=1", "display_name": "Julian Heinovski", "link": "https://stackoverflow.com/users/6077193/julian-heinovski"}, "edited": false, "score": 0, "creation_date": 1509643352, "post_id": 47065248, "comment_id": 81111497, "body": "@JulianHeinovski The guide that I was following can be found at <a href=\"http://simulte.com/add_veins.html\" rel=\"nofollow noreferrer\">simulte.com/add_veins.html</a>"}], "owner": {"user_type": "does_not_exist", "display_name": "user8666366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509578904, "creation_date": 1509578904, "question_id": 47065248, "link": "https://stackoverflow.com/questions/47065248/class-omnetppcosgcanvas-has-no-member-getscene", "title": "&#39;class omnetpp::cOsgCanvas&#39; has no member &#39;getScene()&#39;", "body": "<p>I am trying to install and build the inet framework (veins + simulte integration) in Omnet++. When I build it, I get 'class omnetpp::cOsgCanvas' has no member 'getScene()'. The error is on line 60 of /inet/src/common/geometry/common/CoordinateSystem.cc Does anyone know how to remedy this issue? I would really like to check out the example simulations for reference. Thanks!</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 3, "creation_date": 1509578362, "post_id": 47065144, "comment_id": 81078512, "body": "It&#39;s not the memory (usually) so much as it is the time taken copying the object."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509578431, "post_id": 47065144, "comment_id": 81078532, "body": "You probably won&#39;t use up a significant amount of memory by not passing by reference. Instead, you&#39;d have to go through the entire string and copy the data, only to not use anything that required a copy. As a real-life example, I wrote some code where I inadvertently had a single useless copy that <i>all</i> of my data went through, and my program (which runs pretty fast anyway) was about half as fast as when I fixed it"}, {"owner": {"reputation": 140, "user_id": 8524668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/123478a1e020e5fd43928c0c105a4071?s=128&d=identicon&r=PG&f=1", "display_name": "Pouya", "link": "https://stackoverflow.com/users/8524668/pouya"}, "edited": false, "score": 0, "creation_date": 1509578535, "post_id": 47065144, "comment_id": 81078565, "body": "using const is for data security so you don&#39;t change the value. Also passing by reference allows you to save memory."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1509578689, "post_id": 47065144, "comment_id": 81078603, "body": "You are passing by reference to indicate that a copy will not be made.  The reference is <code>const</code> because the interface says the referrant will not be modified.  Also, using a reference says that the item already exists, whereas passing a pointer doesn&#39;t satisfy that guarantee."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1509579021, "post_id": 47065144, "comment_id": 81078694, "body": "Passing by reference is a performance improvement, as there is no copy.  Passing by <code>const</code> reference has two effects:   it constrains the method implementation not to change the object, and  it allows the compiler to construct temporaries at the call site, which can simplify the calling code."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1509579326, "last_edit_date": 1509579326, "creation_date": 1509578805, "answer_id": 47065220, "question_id": 47065144, "link": "https://stackoverflow.com/questions/47065144/what-is-the-significance-of-passing-const-reference-parameters-does-it-make-a-b/47065220#47065220", "title": "What is the significance of passing const-reference parameters? Does it make a big impact?", "body": "<blockquote>\n  <p>Would a program use up a significant amount of memory just because we don't pass by reference? </p>\n</blockquote>\n\n<p>A copy of the string (that would be made if you passed the parameter by value [unless the call is expanded inline, in which case it matters not how the parameter is passed]) would use as much memory as the original string. Thus such program would use twice as much memory for the string and its copy as another program would use for the one string that wasn't copied.</p>\n\n<p>The difference is not limited to the amount of used memory. Copying memory takes more time than not copying memory. The overhead from passing by reference is constant both by speed and memory use, while the overhead of copying a string increases linearly as the length of the string increases.</p>\n\n<p>The linear complexity of copying the string can be significant if the string is not guaranteed to be small. Even if the string is small, the allocation overhead can be significant if the function is called often.</p>\n\n<blockquote>\n  <p>What is the significance of passing <strong>const</strong>-reference parameters?</p>\n</blockquote>\n\n<p>When you use a <strong>const</strong> reference rather than non-const, it will be easier to reason about the correctness of your program, since you implicitly know just by the declaration of the function, that it will not modify the referred object. It also allows you to pass const objects, and temporaries to the function.</p>\n\n<p>Passing by values has those same advantages, but it requires a copy which can have significant performance impact as I explained in earlier paragraph. If the function itself would make a copy of the string anyway, then it may be better to pass by value, so that the copy is apparent to the reader.</p>\n"}], "owner": {"reputation": 1004, "user_id": 1692517, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/893889b69fb20b6f02e3cb7a182e1c47?s=128&d=identicon&r=PG", "display_name": "user1692517", "link": "https://stackoverflow.com/users/1692517/user1692517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1509578837, "answer_count": 1, "score": 1, "last_activity_date": 1509579326, "creation_date": 1509578269, "last_edit_date": 1509578286, "question_id": 47065144, "link": "https://stackoverflow.com/questions/47065144/what-is-the-significance-of-passing-const-reference-parameters-does-it-make-a-b", "closed_reason": "Duplicate", "title": "What is the significance of passing const-reference parameters? Does it make a big impact?", "body": "<p>e.g.  <code>Person(const string &amp; aName){...}</code></p>\n\n<p>Would a program use up a significant amount of memory just because we don't pass by reference? I know how to use const-reference but am having trouble understanding why I'm using them.</p>\n"}, {"tags": ["c++", "vector", "struct", "constructor", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 4893245, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ab14bb287e61eabba4f2fb1a864ed040?s=128&d=identicon&r=PG&f=1", "display_name": "Terry Martin", "link": "https://stackoverflow.com/users/4893245/terry-martin"}, "edited": false, "score": 0, "creation_date": 1509581665, "post_id": 47065481, "comment_id": 81079432, "body": "Thanks for breaking down some of the terminology.  Looking at the documentation for member initializer lists was helpful in understanding what is going on."}], "tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": true, "score": 1, "last_activity_date": 1509580888, "creation_date": 1509580888, "answer_id": 47065481, "question_id": 47065137, "link": "https://stackoverflow.com/questions/47065137/dlib-how-to-initialize-an-mmod-rect-with-its-ignore-flag-set-to-1/47065481#47065481", "title": "Dlib: How to initialize an mmod_rect with its ignore flag set to 1?", "body": "<p>The thing after the colon in the constructor is a \"member initializer list\". See: <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/initializer_list</a> or search here for \"c++ member initializer list.\"</p>\n\n<p>Indeed the reason pushing a <code>rectangle</code> onto a <code>std::vector</code> of <code>mmod_rect</code> is because <code>mmod_rect</code> can be constructed from a <code>rectangle</code>. C++ allows one level of implicit constructor to be used. A constructor can be marked <code>explicit</code> to prevent it from being used automatically in such situations.</p>\n\n<p>In effect <code>rectangle</code> and <code>mmod_rect</code> are \"value\" types. This means you can treat them as if they were e.g. numbers. (Often more sophisticated types have to be treated as if they share substructure or cannot be copied easily, etc.) The <code>ignored_mmod_rect</code> function simply transforms one value to another. This you can write something like:</p>\n\n<pre><code>rects.push_back(ignored_mmod_rect(rectangle(left, top, right, bottom));\n</code></pre>\n\n<p>In a top-notch API design today, this would likely be done via a method on <code>mmod_rect</code> and there would be an initializer-list based constructor for <code>rectangle</code> so one could just write <code>{left, top, right, bottom}</code> instead of <code>rectangle(left, top, right, bottom)</code>.</p>\n"}], "owner": {"reputation": 389, "user_id": 4893245, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ab14bb287e61eabba4f2fb1a864ed040?s=128&d=identicon&r=PG&f=1", "display_name": "Terry Martin", "link": "https://stackoverflow.com/users/4893245/terry-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 47065481, "answer_count": 1, "score": 0, "last_activity_date": 1509580888, "creation_date": 1509578209, "question_id": 47065137, "link": "https://stackoverflow.com/questions/47065137/dlib-how-to-initialize-an-mmod-rect-with-its-ignore-flag-set-to-1", "title": "Dlib: How to initialize an mmod_rect with its ignore flag set to 1?", "body": "<p>Fair warning for those that don't like answering basic questions: I haven't so much as seen C++ code in a long time.  Some of what I am asking is basic syntax stuff that I just don't know enough about the language to formulate questions about.  I don't know what to google.  Hopefully some of you can help me out in editing my question into something cohesive.</p>\n\n<p>So the issue is this.  I am currently working on a project involving dlib.  In dlib, there is a struct called an mmod_rect defined <a href=\"http://dlib.net/dlib/image_processing/full_object_detection.h.html\" rel=\"nofollow noreferrer\" title=\"mmod_rect documentation\">here</a>.</p>\n\n<pre><code>struct mmod_rect\n{\n    mmod_rect() = default; \n    mmod_rect(const rectangle&amp; r) : rect(r) {}\n    mmod_rect(const rectangle&amp; r, double score) : rect(r),detection_confidence(score) {}\n    mmod_rect(const rectangle&amp; r, double score, const std::string&amp; label) : rect(r),detection_confidence(score), label(label) {}\n\n    rectangle rect;\n    double detection_confidence = 0;\n    bool ignore = false;\n    std::string label;\n\n    operator rectangle() const { return rect; }\n    bool operator == (const mmod_rect&amp; rhs) const\n    { \n        return rect == rhs.rect \n               &amp;&amp; detection_confidence == rhs.detection_confidence\n               &amp;&amp; ignore == rhs.ignore \n               &amp;&amp; label == rhs.label;\n    }\n};\n\ninline mmod_rect ignored_mmod_rect(const rectangle&amp; r)\n{\n    mmod_rect temp(r);\n    temp.ignore = true;\n    return temp;\n}\n</code></pre>\n\n<p>If it is relevant, the documentation for rectangles is found <a href=\"http://dlib.net/dlib/geometry/rectangle.h.html\" rel=\"nofollow noreferrer\">here</a>.  Basically, rectangle is a class that is initialized by passing in integers for left, top, right, and bottom.</p>\n\n<p>The working code I was provided with first defines a vector of mmod_rects as follows:</p>\n\n<pre><code>std::vector&lt;mmod_rect&gt; rects;\n</code></pre>\n\n<p>Then it pushes to the vector with the line:</p>\n\n<pre><code>rects.push_back(rectangle(left, top, right, bottom));\n</code></pre>\n\n<p>I am confused by the above line.  Since rects is a vector of mmod_rects and NOT a vector of rects, how is it that the code gets away with calling the constructor for a rect and pushing it on to the vector.  Why doesn't this throw a compiler error?  I assume it has to do with the line in mmod_rect's struct definition, where it says:</p>\n\n<pre><code>mmod_rect(const rectangle&amp; r) : rect(r) {}\n</code></pre>\n\n<p>My understanding is that this means that you can construct an mmod_rect by passing in a reference to a rectangle.  I am just confused by the syntax using the colon </p>\n\n<pre><code> : rect(r) {}\n</code></pre>\n\n<p>If someone could explain what exactly this syntax does, and how the push_back operation here works, that'd be great.</p>\n\n<p>Now on to the main thing I want to ask.  My goal is to populate the vector rects with mmod_rects that have their ignore flag set to 1.  How would I go about doing this?  Would the following code accomplish the goal?</p>\n\n<pre><code>mmod_rect r(rectangle(left, top, right, bottom));\nr.ignore = 1;\nrects.push_back(r);\n</code></pre>\n\n<p>is there a better way to do this using ignored_mmod_rect?  I don't fully understand what the code does.  </p>\n"}, {"tags": ["c++", "hashmap", "singly-linked-list"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1509580228, "post_id": 47065125, "comment_id": 81079046, "body": "What do you mean by &#39;it doesn&#39;t work&#39;?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1509580236, "post_id": 47065125, "comment_id": 81079052, "body": "You have unfortunately built the linked list directly into the hash table. That make is more difficult to isolate the problem."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509580578, "post_id": 47065125, "comment_id": 81079152, "body": "When i try to delete a value that is located at the front of the linked list it says it deleted it but it doesn&#39;t and when I try to delete a value that is located elsewhere in the linked list it says it is not in the list"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1509582560, "post_id": 47065125, "comment_id": 81079688, "body": "When you delete a node, <code>entry-&gt;next</code> needs to be stored <i>somewhere</i>.  You don&#39;t store it anyplace when <code>prev</code> is <code>NULL</code>.  Where should it be stored?"}], "owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 857, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509578116, "creation_date": 1509578116, "question_id": 47065125, "link": "https://stackoverflow.com/questions/47065125/deleting-a-node-from-hash-table", "title": "Deleting a node from hash table", "body": "<p>I have created a hash table that contains a singly linked list in each slot of the hash table. I recently changed my code so that when I insert a new node into that hash table, each slot will be a sorted linked list (just insert it into correct spot, rather than sorting it). I currently have this as my delete function:</p>\n\n<pre><code>void hashDelete(int key){\n    int hashLoc = h(key);\n    HashNode *entry = hTable[hashLoc];\n    HashNode *prev = NULL;\n\n    if(entry == NULL || entry-&gt;value != key){\n        cout &lt;&lt; \"No element found at key\" &lt;&lt; endl;\n       return;\n    }\n\n    while(entry-&gt;next != NULL){\n        prev = entry;\n        entry = entry-&gt;next;\n    }\n    if(prev != NULL){\n        prev-&gt;next = entry-&gt;next;\n    }\n    delete entry;\n    cout &lt;&lt; \"Entry Successfully Deleted\" &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>This worked for my insert when I would just insert a new node to the end of the linked list but it now doesn't work when I insert a new node to the correct sorted spot of the linked list. </p>\n\n<p>How would I adjust this delete function so that it properly finds and deletes the correct value.</p>\n\n<p>Note: Here is my search function that will search for the value and say whether it is in the hashmap (which works correctly)</p>\n\n<pre><code>int hashSearch(int key){\n    bool flag = false;\n    int hashLoc = h(key);\n    HashNode *entry = hTable[hashLoc];\n    while(entry != NULL){\n        if(entry-&gt;value == key){\n            return 1;\n            flag = true;\n        }\n        entry = entry-&gt;next;\n    }\n    if(!flag)\n        return -1;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "class"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1509578141, "post_id": 47065111, "comment_id": 81078437, "body": "<code>Name=Name;</code> assigns the function parameter to itself, and does nothing to the member."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1509578244, "post_id": 47065111, "comment_id": 81078474, "body": "Naming collision between the member variable and the parameter. The <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Member Initiallizer List</a> can help you here"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1509579309, "post_id": 47065111, "comment_id": 81078785, "body": "or <code>this-&gt;Name=Name</code>, but really just change the parameter or member name."}], "answers": [{"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 3, "last_activity_date": 1509605524, "last_edit_date": 1509605524, "creation_date": 1509579472, "answer_id": 47065310, "question_id": 47065111, "link": "https://stackoverflow.com/questions/47065111/how-can-i-return-a-string-of-an-object-in-a-class-in-c/47065310#47065310", "title": "How can I return a String of an object in a class in c++?", "body": "<p>If you use the name of a member as a name for a parameter, you need to access the member via the <code>this</code> pointer.</p>\n\n<p>So change:</p>\n\n<pre><code>Name=Name;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>this-&gt;Name = Name;\n</code></pre>\n\n<p>And the same goes for the other two:</p>\n\n<pre><code>this-&gt;Z = Z;\nthis-&gt;N = N;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 4, "last_activity_date": 1509638707, "last_edit_date": 1509638707, "creation_date": 1509579743, "answer_id": 47065349, "question_id": 47065111, "link": "https://stackoverflow.com/questions/47065111/how-can-i-return-a-string-of-an-object-in-a-class-in-c/47065349#47065349", "title": "How can I return a String of an object in a class in c++?", "body": "<p>For <em>constructors</em> you should use an <em>initialization list</em> where the compiler knows the difference between the parameter and the member:</p>\n\n<pre><code>class element {\n    std::string Name;\n    int Z;\n    double N;\n  public:\n    element (std::string,int,double);\n    double M (void) {return (Z+N);}\n    std::string NameF () {return (Name);}\n};\n\nelement::element (std::string Name, int Z, double N)\n: Name(Name), Z(Z), N(N) // &lt;- the compiler knows which is parameter and which is member\n{\n    // no need to put anything here for this\n}\n</code></pre>\n\n<p>Otherwise you can differentiate explicitly using <code>this</code>:</p>\n\n<pre><code>void element::set_name(std::string const&amp; Name)\n{\n    // tell the compiler which is the member of `this`\n    // and which is the parameter\n    this-&gt;Name = Name; \n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8871017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ca06253e60a36f9edb073e87a92d30?s=128&d=identicon&r=PG&f=1", "display_name": "Niko", "link": "https://stackoverflow.com/users/8871017/niko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1509588108, "answer_count": 2, "score": 2, "last_activity_date": 1509638707, "creation_date": 1509578025, "question_id": 47065111, "link": "https://stackoverflow.com/questions/47065111/how-can-i-return-a-string-of-an-object-in-a-class-in-c", "closed_reason": "Not suitable for this site", "title": "How can I return a String of an object in a class in c++?", "body": "<p>I want to have access of a string which is part of my class and I can't seem to make it work.\nHere's the example code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;vector&gt;\n\n\nclass element {\n    std::string Name;\n    int Z;\n    double N;\n  public:\n    element (std::string,int,double);\n    double M (void) {return (Z+N);}\n    std::string NameF () {return (Name);}\n};\n\nelement::element (std::string Name, int Z, double N) {\n\n    Name=Name;\n    Z=Z;\n    N=N;\n}\n\nint main () {\n\n\n  element H (\"Hydrogen\",1,1.);\n  element O (\"Oxygen\",8,8);\n\n    std::vector&lt;element&gt; H2O ={H,H,O};\n\n    std::cout&lt;&lt;\"Mass of \" &lt;&lt;O.NameF()&lt;&lt;\" is: \" &lt;&lt; O.M() &lt;&lt; std::endl;\n    std::cout&lt;&lt;H2O[1].NameF()&lt;&lt;std::endl;\n\n  return 0;\n  }\n</code></pre>\n\n<p>I am not able to get a string out of my objects in the class...\nMaybe I can't even get them into the class.\nDoes the standard constructor work like that with strings?\nI just want a sting (i.e. a name) of my objects that I can call.\nWhat's the proper way to do so?</p>\n\n<p>I'd appreciate any help,</p>\n\n<p>cheers\nNiko</p>\n"}, {"tags": ["c++", "class", "c++11", "callback", "portaudio"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1509584780, "post_id": 47065089, "comment_id": 81080274, "body": "This is parameter-<i>passing</i>, not &#39;parsing&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1509582857, "post_id": 47065678, "comment_id": 81079770, "body": "Ahh... I get it now... Thats genius!"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1509582268, "creation_date": 1509582268, "answer_id": 47065678, "question_id": 47065089, "link": "https://stackoverflow.com/questions/47065089/passing-member-function-pointer-when-a-non-member-function-pointer-was-expected/47065678#47065678", "title": "Passing member function pointer when a non-member function pointer was expected?", "body": "<p>The <a href=\"https://stackoverflow.com/questions/8045322/c-function-callbacks-cannot-convert-from-a-member-function-to-a-function-sign\">duplicate</a> of your <a href=\"https://stackoverflow.com/questions/47064112/type-conversion-occured-when-parsing-callback-function-to-function\">previous question</a> lists some ideas but lacks concrete code, so here's a sample.</p>\n\n<p>First, modify <code>class record</code> by adding in a static callback function:</p>\n\n<pre><code>static int myCallback(const void *inputBuffer, void outputBuffer, unsigned long framesPerBuffer, const PaStreamCallbackTimeInfo* timeInfo, PaStreamCallbackFlags statusFlags, void *userData);\n</code></pre>\n\n<p>Note that this has the same signature as your existing callback, except that it is a static function, so you can pass it to <code>Pa_OpenStream</code>.</p>\n\n<p>Define that function to call your member function callback:</p>\n\n<pre><code>int record::myCallback(const void *inputBuffer, void outputBuffer, unsigned long framesPerBuffer, const PaStreamCallbackTimeInfo* timeInfo, PaStreamCallbackFlags statusFlags, void *userData)\n{\n    record *pThis = (record *)userData;\n    return pThis-&gt;recordCallback(inputBuffer, outputBuffer, framesPerBuffer, timeInfo, statusFlags, nullptr);\n}\n</code></pre>\n\n<p>We're passing <code>nullptr</code> as the user data pointer here since all the user data we need is held within the class.  Since this callback is only used internally, you can just delete that last parameter from both here and in the function.</p>\n\n<p>When you register the callback, pass in the new callback, with <code>this</code> as the user data parameter.</p>\n\n<pre><code>err = Pa_OpenStream(\n      &amp;this-&gt;stream,\n      &amp;this-&gt;inputParameters,\n      NULL,                  /* &amp;outputParameters, */\n      SAMPLE_RATE,\n      FRAMES_PER_BUFFER,\n      paClipOff,      /* we won't output out of range samples so don't bother clipping them */\n      &amp;this-&gt;myCallback,\n      this);\n</code></pre>\n\n<p>Then in <code>recordCallback</code>, you can access all the members of your class as you normally would.</p>\n"}, {"comments": [{"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1509582886, "post_id": 47065697, "comment_id": 81079778, "body": "Thanks for the solution.. Its a indeed a genius solution!"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 1, "creation_date": 1509582932, "post_id": 47065697, "comment_id": 81079790, "body": "You&#39;re welcome...  It&#39;s a very common pattern.  Well worth remembering."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": false, "score": 2, "last_activity_date": 1509582375, "creation_date": 1509582375, "answer_id": 47065697, "question_id": 47065089, "link": "https://stackoverflow.com/questions/47065089/passing-member-function-pointer-when-a-non-member-function-pointer-was-expected/47065697#47065697", "title": "Passing member function pointer when a non-member function pointer was expected?", "body": "<p>The way this is usually done is by passing the 'this' pointer in the data context, and extract it later on in your callback.  You can declare the callback a simple private static stub.</p>\n\n<p>Example:</p>\n\n<pre><code>class record\n{\n    // ...\n\n     void start_record();\n     {\n         err = Pa_OpenStream(\n                   &amp;this-&gt;stream,\n                   &amp;this-&gt;inputParameters,\n                   NULL,                  /* &amp;outputParameters, */\n                   SAMPLE_RATE,\n                   FRAMES_PER_BUFFER,\n                   paClipOff,      /* we won't output out of range samples so don't bother clipping them */\n                   &amp;record::recordCallbackStub,  // call back our static stub\n                   this );   // 'this' is the data\n     }\n\nprivate:\n    // our member function called back, can be virtual\n    int recordCallback(\n        const void *inputBuffer, void *outputBuffer,\n        unsigned long framesPerBuffer,\n        const PaStreamCallbackTimeInfo* timeInfo,\n        PaStreamCallbackFlags statusFlags)  // no 'userData' param, since it's 'this'\n    {\n        // do your thing within the record context\n    }\n\n    // the stub to keep C happy, can be declared as extern \"C\" or whatever call \n    // convention is required from the library, WINAPI comes to mind.\n    static int recordCallbackStub(\n        const void *inputBuffer, \n        void *outputBuffer,\n        unsigned long framesPerBuffer,\n        const PaStreamCallbackTimeInfo* timeInfo,\n        PaStreamCallbackFlags statusFlags\n        void* userData)\n    {\n         auto pThis = reinterpret_cast&lt;record*&gt;(userData);  // get back the this pointer.\n         return pThis-&gt;recordCallback( /* all parameters, except userData */);\n    }\n}; \n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 47065678, "answer_count": 2, "score": 0, "last_activity_date": 1509584769, "creation_date": 1509577891, "last_edit_date": 1509584769, "question_id": 47065089, "link": "https://stackoverflow.com/questions/47065089/passing-member-function-pointer-when-a-non-member-function-pointer-was-expected", "title": "Passing member function pointer when a non-member function pointer was expected?", "body": "<p>I am currently having some problems with passing my member-function callback function, to a non-member function defined by the library portaudio. </p>\n\n<p>This is how my class is defined: </p>\n\n<pre><code>class record {\npublic:\n    record();\n    void start_record();\n    int recordCallback(const void *inputBuffer, void *outputBuffer,\n                       unsigned long framesPerBuffer,\n                       const PaStreamCallbackTimeInfo* timeInfo,\n                       PaStreamCallbackFlags statusFlags, void *userData);\nprivate:\n    PaStreamParameters  inputParameters,\n                        outputParameters;\n    PaStream*           stream;\n    PaError             err = paNoError;\n    paTestData          data;\n    int                 totalFrames;\n    int                 numSamples;\n    int                 numBytes;\n    SAMPLE              max, val;\n    double              average;\n};\n</code></pre>\n\n<p>Within <code>start_record()</code> I pass the member function to a non-member function.. Meaning I pass a member-function of the class record (the callback), to a non-member function Pa_OpenStream().</p>\n\n<pre><code>err = Pa_OpenStream(\n          &amp;this-&gt;stream,\n          &amp;this-&gt;inputParameters,\n          NULL,                  /* &amp;outputParameters, */\n          SAMPLE_RATE,\n          FRAMES_PER_BUFFER,\n          paClipOff,      /* we won't output out of range samples so don't bother clipping them */\n          this-&gt;recordCallback,\n          &amp;data );\nif( err != paNoError )\n{\n    std::cout &lt;&lt; \"Something wrong  - open_stream check\" &lt;&lt; std::endl;\n    exit(1);\n}\n</code></pre>\n\n<p><code>portaudio</code> expects a function pointer of type </p>\n\n<pre><code>int (*)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, PaStreamCallbackFlags, void*)\nand not\n</code></pre>\n\n<p>and not </p>\n\n<pre><code>int (record::)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, PaStreamCallbackFlags, void*) \n</code></pre>\n\n<p>A quick solution would be to define the function outside the class scope, and make the variables which it uses and defined within the class global, but I would like to avoid that. So how do I handle this? </p>\n"}, {"tags": ["c++", "error-handling", "clang-format"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 8043075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5964b618099f5ef2cbe373625fdbd45e?s=128&d=identicon&r=PG", "display_name": "likask", "link": "https://stackoverflow.com/users/8043075/likask"}, "edited": false, "score": 0, "creation_date": 1509707471, "post_id": 47093137, "comment_id": 81138064, "body": "Thank you for this, very useful."}, {"owner": {"reputation": 195, "user_id": 8043075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5964b618099f5ef2cbe373625fdbd45e?s=128&d=identicon&r=PG", "display_name": "likask", "link": "https://stackoverflow.com/users/8043075/likask"}, "edited": false, "score": 0, "creation_date": 1509796068, "post_id": 47093137, "comment_id": 81170770, "body": "@Guillaume.Gris see how I modified your snippet."}, {"owner": {"reputation": 1721, "user_id": 5034140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H4LtHEu4ABU/AAAAAAAAAAI/AAAAAAAABfc/vgbjnSLypvo/photo.jpg?sz=128", "display_name": "Guillaume Gris", "link": "https://stackoverflow.com/users/5034140/guillaume-gris"}, "reply_to_user": {"reputation": 195, "user_id": 8043075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5964b618099f5ef2cbe373625fdbd45e?s=128&d=identicon&r=PG", "display_name": "likask", "link": "https://stackoverflow.com/users/8043075/likask"}, "edited": false, "score": 0, "creation_date": 1509835793, "post_id": 47093137, "comment_id": 81182748, "body": "Note that I choose &lt;&lt; operator randomly, and considering operator precedence, it might be better to use &quot;=&quot;. Note also that this is only a hack to emulate a keyword syntax. The simplest way is probably a CHECKERROR(ERR) macro"}, {"owner": {"reputation": 195, "user_id": 8043075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5964b618099f5ef2cbe373625fdbd45e?s=128&d=identicon&r=PG", "display_name": "likask", "link": "https://stackoverflow.com/users/8043075/likask"}, "edited": false, "score": 0, "creation_date": 1509871166, "post_id": 47093137, "comment_id": 81189047, "body": "Thanks. I am aware of arbitrary choice of &lt;&lt; but that can be quickly changed, since operator is never used directly only in definition. I use CHKERQ(ierr) at the moment, as in initial question. Do you see potential problem where precedence could be important in this particular context?"}], "tags": [], "owner": {"reputation": 1721, "user_id": 5034140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H4LtHEu4ABU/AAAAAAAAAAI/AAAAAAAABfc/vgbjnSLypvo/photo.jpg?sz=128", "display_name": "Guillaume Gris", "link": "https://stackoverflow.com/users/5034140/guillaume-gris"}, "is_accepted": true, "score": 1, "last_activity_date": 1509704347, "last_edit_date": 1509704347, "creation_date": 1509703800, "answer_id": 47093137, "question_id": 47064995, "link": "https://stackoverflow.com/questions/47064995/clang-format-function-and-error-check-in-the-same-line/47093137#47093137", "title": "clang-format Function and error check in the same line", "body": "<p>I use clang-format a lot and I don't think it can achieve this kind of formatting.</p>\n\n<p>I've encountered this pattern a lot in libraries using OpenGL and DirectX. You have a API with error codes or an error stack like in OpenGL and every function might fail or issue a warning. You want your code to be optimized in release and still have a debug mode to find preciselly where things went wrong in case you spot a bug.</p>\n\n<p>Some libraries provide some kind of error callback that you can set and will effectively be called each time there is a relevent error.</p>\n\n<p>In case you want something more customized or no error callback is provided, you can write a simple wrapper that does a systematic error checking and warnings logging.</p>\n\n<p>With these solutions you can even implement some mechanism to activate the debugging at runtime.</p>\n\n<p>Now, if you are writing the library or functions that return errors returned this way, you might want to include the debug mode directly in the library with the debug callback strategy.</p>\n\n<hr>\n\n<p>Now, if you want to stick to the macro solution, you could do the following:</p>\n\n<pre><code>struct ErrorChecker\n{\n    ErrorChecker&amp; operator &lt;&lt; (int ierr)\n    {\n        // Error checking code\n        return *this;\n    }\n};\n\n#define CHKERR ErrorChecker() &lt;&lt;\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>CHKERR fun();\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 8043075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5964b618099f5ef2cbe373625fdbd45e?s=128&d=identicon&r=PG", "display_name": "likask", "link": "https://stackoverflow.com/users/8043075/likask"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 47093137, "answer_count": 1, "score": 1, "last_activity_date": 1509797337, "creation_date": 1509577332, "last_edit_date": 1509797337, "question_id": 47064995, "link": "https://stackoverflow.com/questions/47064995/clang-format-function-and-error-check-in-the-same-line", "title": "clang-format Function and error check in the same line", "body": "<p>I struggle to set up clang-format to allow short lines for such format,</p>\n\n<pre><code>ierr = fun(); CHKERRQ(ierr);\n</code></pre>\n\n<p>clang-format break the line, as result</p>\n\n<pre><code> ierr = fun(); \n CHKERRQ(ierr);\n</code></pre>\n\n<p>It is a solution to stop clang-fromat to break short lines? Or this is in principle wrong idea to format code like this. Any advice very appreciated.</p>\n\n<hr>\n\n<p><strong>EDIT: Following Guillaume answer</strong></p>\n\n<p>In fact, I have a slightly more complex problem, where errors codes of different types are returned by two libraries, in particular, PETSc and MoAB. Also, this system has own error codes, which need to be handled. All without compromising efficiency.</p>\n\n<pre><code>struct ErrorCheckerCode {\n  inline void operator&lt;&lt;(const MoFEMErrorCode err) {\n    if (PetscUnlikely(err)) {\n      // Handle &amp; thorw PETSc/MoFEM error\n    }\n    return;\n  }\n  inline void\n  operator&lt;&lt;(const moab::ErrorCode err) {\n    if (PetscLikely(MB_SUCCESS != err)) {\n      // Handle &amp; trow MOAB error \n    }\n    return;\n  }\n  static const char *fUNC;\n  static const char *fILE;\n  static int lINE;\n};\n\nstruct ErrorCheckerFunction {\n  inline ErrorCheckerCode operator&lt;&lt;(const char *func) {\n    ErrorCheckerCode::fUNC = func;\n    return ErrorCheckerCode();\n  }\n };\n\nstruct ErrorCheckerFile {\n  inline ErrorCheckerFunction operator&lt;&lt;(const char *file) {\n    ErrorCheckerCode::fILE = file;\n    return ErrorCheckerFunction();\n  }\n};\n\nstruct ErrorCheckerLine {\n  inline ErrorCheckerFile operator&lt;&lt;(int line) {\n    ErrorCheckerCode::lINE = line;\n    return ErrorCheckerFile();\n  }\n};\n</code></pre>\n\n<p>And definition follows this:</p>\n\n<pre><code>#define CHKERR                                                                 \\\n  ErrorCheckerLine() &lt;&lt; __LINE__ &lt;&lt; __FILE__ &lt;&lt; PETSC_FUNCTION_NAME &lt;&lt;\n</code></pre>\n\n<p>So at the end I can handle errors like this</p>\n\n<pre><code>CHKERR fun_moab();\nCHKERR fun_petsc();\nCHKERR fun_mofem();\n</code></pre>\n\n<p>This implementation is essential, so it has to be done optimally, I wonder if that can be done in simpler, more efficient way. <strong>Criticism or advice is very welcome.</strong></p>\n\n<p><strong>Note:</strong></p>\n\n<p>As a commend. It is funny how formatting of code triggers this type of developments.</p>\n"}, {"tags": ["c++", "visual-studio-2008", "memory-leaks", "attach-to-process"], "answers": [{"tags": [], "owner": {"reputation": 694, "user_id": 2160290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da403b7839453e0dd04600de49d5ca11?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Rastogi", "link": "https://stackoverflow.com/users/2160290/amit-rastogi"}, "is_accepted": false, "score": 0, "last_activity_date": 1509651461, "creation_date": 1509651461, "answer_id": 47083333, "question_id": 47064939, "link": "https://stackoverflow.com/questions/47064939/memory-leak-detection-via-attach-to-process/47083333#47083333", "title": "Memory leak detection via attach to process", "body": "<p>You can use umdh utility to find out memory leak in your dll. UMDH is included in Debugging Tools for Windows. For more details check out the following link-\n<a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/using-umdh-to-find-a-user-mode-memory-leak\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/using-umdh-to-find-a-user-mode-memory-leak</a></p>\n\n<p>In case you would like to use a memory leak tool which is having an easy to use GUI for setting up memory leak detection as well as leak reporting then you may go for C++ Memory Validator tool from Software Verify. Although its a paid tool however you can check out its trial version to evaluate it.  </p>\n"}], "owner": {"reputation": 11, "user_id": 6567593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8a780bf03bcb98fae4640f94b24e2?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby Pardridge", "link": "https://stackoverflow.com/users/6567593/bobby-pardridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509651461, "creation_date": 1509577009, "question_id": 47064939, "link": "https://stackoverflow.com/questions/47064939/memory-leak-detection-via-attach-to-process", "title": "Memory leak detection via attach to process", "body": "<p>I am developing a Visual Studio 2008 plugin DLL which runs in a larger application. I can build it in debug, attach to process, and step through my code. Main problem I have right now is memory leak detection. </p>\n\n<p>Normally I use VLD, but that only seems to give me output when I launch an executable from Visual Studio. VLD isn't giving me any output via attach to process, even after terminating the main program hosting my plugin.</p>\n\n<p>I could build my own test container, however that will take some time and it still won't cover a large portion of the functionality.</p>\n\n<p>Is there a simple way to do memory leak detection via attach to process?</p>\n\n<p>I have tried _CrtDumpMemoryLeaks(), however it isn't working, it isn't detecting a simple line like</p>\n\n<p><code>int * memoryleak = new int[5000000];</code></p>\n\n<p>which it normally detects when running directly from within Visual Studio</p>\n\n<p>Any help appreciated, thanks!</p>\n"}, {"tags": ["c++", "image", "duplicates"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1509577394, "post_id": 47064837, "comment_id": 81078218, "body": "This may help <a href=\"https://stackoverflow.com/a/25204466/2836621\">stackoverflow.com/a/25204466/2836621</a>"}], "answers": [{"comments": [{"owner": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "edited": false, "score": 0, "creation_date": 1509577659, "post_id": 47065034, "comment_id": 81078289, "body": "i&#39;ll check it out, i did use hashing first to delete most of the duplicate photos. now i need another method to delete the rest."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "edited": false, "score": 0, "creation_date": 1509577952, "post_id": 47065034, "comment_id": 81078374, "body": "@ShmulikCohen well then this method should be enough to solve it"}, {"owner": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "edited": false, "score": 0, "creation_date": 1509578915, "post_id": 47065034, "comment_id": 81078660, "body": "sorry for the question but, i dont understand how to use the cpp code. i dont have all the header files (and i cant find all of them in the github repo)"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "edited": false, "score": 0, "creation_date": 1509579521, "post_id": 47065034, "comment_id": 81078854, "body": "You need to install OpenCV first. If you&#39;re using visual studio you can find on github precompiled dll"}, {"owner": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "edited": false, "score": 0, "creation_date": 1509582330, "post_id": 47065034, "comment_id": 81079630, "body": ",found it. its working :).  i checked a sample images and its working i will try to write my own code tomorrow for my using with this algorithm.  Thank you very much !"}], "tags": [], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "is_accepted": false, "score": 2, "last_activity_date": 1509577577, "creation_date": 1509577577, "answer_id": 47065034, "question_id": 47064837, "link": "https://stackoverflow.com/questions/47064837/how-can-i-identify-duplicate-image-that-has-a-different-size/47065034#47065034", "title": "How can i identify duplicate image that has a different size", "body": "<p>In addition to the hashing algorithm, you could calculate the <a href=\"https://en.wikipedia.org/wiki/Image_histogram\" rel=\"nofollow noreferrer\">histogram</a> for each image and then <a href=\"https://en.wikipedia.org/wiki/Histogram_matching\" rel=\"nofollow noreferrer\">compare them</a></p>\n\n<p>In rotated images histogram should be exactly the same, for resized images it should be very similar.</p>\n\n<p><a href=\"https://docs.opencv.org/2.4/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html\" rel=\"nofollow noreferrer\">Here</a> there's an example of histogram comparison using OpenCV.</p>\n\n<p>I still suggest to use hashing in first place because it should be way more fast and remove the first set of duplicates, then refines it using histogram comparison.</p>\n"}], "owner": {"reputation": 464, "user_id": 2120874, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/57cc2e0bbcbdc62c47c9d33cae75dd89?s=128&d=identicon&r=PG", "display_name": "ShmuelCohen", "link": "https://stackoverflow.com/users/2120874/shmuelcohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509577577, "creation_date": 1509576317, "question_id": 47064837, "link": "https://stackoverflow.com/questions/47064837/how-can-i-identify-duplicate-image-that-has-a-different-size", "title": "How can i identify duplicate image that has a different size", "body": "<p>The problem is that iv'e got a folder with more than 80k images and about 40% of them are duplicate. (some of the pictures are rotated, some have different size, but still its the same image).</p>\n\n<p>At first I used hashing algorithm (with c++/java) to delete all the duplicate images(that have the same size and other properties).\nBut it seems it didnt delete all of them because some picture has a difrrent size (but are visually identical)</p>\n\n<p>iv'e searched alot on the net to find any efficnt algoritam for this problem </p>\n\n<p>the best code i found for my problem is with pHash, but its outdated and isn't working with VS anymore.</p>\n\n<p>if someone have an idea for me, it will be awesome.</p>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "c++11", "object"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1509576012, "post_id": 47064751, "comment_id": 81077765, "body": "You need to call <code>srand</code> only once in your <b>entire program</b>."}, {"owner": {"reputation": 637, "user_id": 1549389, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/lRnzn.png?s=128&g=1", "display_name": "Lithy", "link": "https://stackoverflow.com/users/1549389/lithy"}, "edited": false, "score": 0, "creation_date": 1509576307, "post_id": 47064751, "comment_id": 81077861, "body": "You must also remove it from setX()"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1509577615, "post_id": 47064751, "comment_id": 81078274, "body": "@Ahmet\u0130lgin Are you following your code?  You need to realize that a program does exactly what you tell it to do -- all <code>getX()</code> does is print the value of <code>x</code>.  It doesn&#39;t change the value of <code>x</code>."}], "answers": [{"tags": [], "owner": {"reputation": 617, "user_id": 6773365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10211361015407645/picture?type=large", "display_name": "Yifei Xu", "link": "https://stackoverflow.com/users/6773365/yifei-xu"}, "is_accepted": false, "score": 3, "last_activity_date": 1509576309, "creation_date": 1509576309, "answer_id": 47064836, "question_id": 47064751, "link": "https://stackoverflow.com/questions/47064751/c-create-object-array-same-random-value/47064836#47064836", "title": "C++ create object array same random value", "body": "<p>from the C++ documentation: <a href=\"http://www.cplusplus.com/reference/cstdlib/srand/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdlib/srand/</a></p>\n\n<blockquote>\n  <p>For every different seed value used in a call to srand, the\n  pseudo-random number generator can be expected to generate a different\n  succession of results in the subsequent calls to rand.</p>\n  \n  <p>Two different initializations with the same seed will generate the\n  same succession of results in subsequent calls to rand</p>\n</blockquote>\n\n<p>Think of srand() as making a list of random numbers based on the given seed. Since you keep giving it the same seed, all of the rand() calls are getting the first element in the list. The solution is just to call srand() once, and use one rand() call each time you want to assign a value to X</p>\n"}], "owner": {"reputation": 35, "user_id": 5786911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804552098864/picture?type=large", "display_name": "Ahmet \u0130lgin", "link": "https://stackoverflow.com/users/5786911/ahmet-%c4%b0lgin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "closed_date": 1509579115, "answer_count": 1, "score": -3, "last_activity_date": 1509576313, "creation_date": 1509575845, "last_edit_date": 1509576313, "question_id": 47064751, "link": "https://stackoverflow.com/questions/47064751/c-create-object-array-same-random-value", "closed_reason": "Duplicate", "title": "C++ create object array same random value", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nclass A{\n    int x;\n    public:\n    void setX(){\n        srand( time(NULL));\n        x = rand() % 15;    \n    }\n    int getX(){\n        return x;\n    }\n\n\n};\n\nint main()\n{\n    A dizi[5];\n    for(int i = 0; i &lt; 5;i++){\n        dizi[i].setX();\n        cout&lt;&lt;dizi[i].getX()&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nclass A{\n    int x;\n    public:\n        void setX(){\n            srand( time(NULL));\n            x = rand() % 15;    \n        }\n        int getX(){\n            cout&lt;&lt;x&lt;&lt;endl;\n        }    \n    };\n\n    int main()\n    {\n        A dizi[3];\n       dizi[0].setX();\n       dizi[1].setX();\n       dizi[2].setX();\n       dizi[0].getX();\n       dizi[1].getX();\n       dizi[2].getX();\n    }\n</code></pre>\n\n<p>x is always printing the same value. How can I assign different random values to each object of the array.</p>\n\n<p>I've tried srand(time (0)) and srand(time (NULL))</p>\n\n<p>but they didn't work.</p>\n\n<p>every class instance produces same random value, why?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "edited": false, "score": 1, "creation_date": 1509575602, "post_id": 47064659, "comment_id": 81077636, "body": "If you want polymorphism your vector should hold references or pointers, not solid objects."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1509576227, "post_id": 47064659, "comment_id": 81077832, "body": "Try <code>vector&lt;shared_ptr&lt;Base&gt;&gt; l = { make_shared&lt;Foo&gt;(), make_shared&lt;Bar&gt;() }</code> with <code>x-&gt;print()</code>..."}], "owner": {"reputation": 1430, "user_id": 703764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e0f702b5287daf26382d035d915480d8?s=128&d=identicon&r=PG", "display_name": "jack_carver", "link": "https://stackoverflow.com/users/703764/jack-carver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1509575373, "answer_count": 0, "score": 0, "last_activity_date": 1509575252, "creation_date": 1509575252, "question_id": 47064659, "link": "https://stackoverflow.com/questions/47064659/virtual-override-function-not-getting-called", "closed_reason": "Duplicate", "title": "virtual override function not getting called", "body": "<p>The following code when run throws exception instead of printing correctly. I am not able to understand why the virtual override isn't working here ?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct Base {\n    virtual ~Base() = default;\n    virtual void print()  const {\n        throw runtime_error(\"\");\n    }\n};\n\nstruct Foo : public Base {\n    void print() const override {\n        cout &lt;&lt; \"foo\" &lt;&lt; endl;\n    }\n};\n\nstruct Bar : public Base {\n    void print() const override {\n        cout &lt;&lt; \"bar\" &lt;&lt; endl;\n    }\n};\n\nint main(int argc, char const *argv[]) {\n    vector&lt;Base&gt; l = {\n        Foo(),\n        Bar(),\n    };\n\n    for(const auto&amp; x : l) {\n        x.print();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "haxe", "hxcpp"], "answers": [{"comments": [{"owner": {"reputation": 12211, "user_id": 404568, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/W1j32.jpg?s=128&g=1", "display_name": "David Given", "link": "https://stackoverflow.com/users/404568/david-given"}, "edited": false, "score": 0, "creation_date": 1598994111, "post_id": 47066963, "comment_id": 112634669, "body": "I know this is old, but: <code>sys.db.Sqlite</code> isn&#39;t very good --- no parameterised queries and no prepared statements, which is error-prone and kills performance. I&#39;m having to roll my own for that reason."}, {"owner": {"reputation": 12211, "user_id": 404568, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/W1j32.jpg?s=128&g=1", "display_name": "David Given", "link": "https://stackoverflow.com/users/404568/david-given"}, "edited": false, "score": 0, "creation_date": 1599089980, "post_id": 47066963, "comment_id": 112668833, "body": "Here it is: <a href=\"https://github.com/davidgiven/stellation/blob/stellation7/src/runtime/cpp/Sqlite.hx\" rel=\"nofollow noreferrer\">github.com/davidgiven/stellation/blob/stellation7/src/runtim&zwnj;&#8203;e/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11495, "user_id": 1026023, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/71ec7895cada78741057c644d858b0e3?s=128&d=identicon&r=PG", "display_name": "Jeff Ward", "link": "https://stackoverflow.com/users/1026023/jeff-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1509592690, "last_edit_date": 1509592690, "creation_date": 1509592146, "answer_id": 47066963, "question_id": 47064589, "link": "https://stackoverflow.com/questions/47064589/how-to-include-libsqlite3-in-my-haxe-hxcpp-build/47066963#47066963", "title": "How to include libsqlite3 in my Haxe/hxcpp build?", "body": "<p>I don't know a lot about using CPP external libraries (so this doesn't precisely answer your question), but I do know that an SQLLite implementation is built into Haxe (for the cpp, hl, java, lua, macro, neko, php, and python platforms.) Here're some related documentation:</p>\n\n<ul>\n<li><a href=\"https://api.haxe.org/sys/db/Sqlite.html\" rel=\"nofollow noreferrer\">https://api.haxe.org/sys/db/Sqlite.html</a></li>\n<li><a href=\"https://api.haxe.org/sys/db/Connection.html\" rel=\"nofollow noreferrer\">https://api.haxe.org/sys/db/Connection.html</a></li>\n<li><a href=\"https://api.haxe.org/sys/db/ResultSet.html\" rel=\"nofollow noreferrer\">https://api.haxe.org/sys/db/ResultSet.html</a></li>\n</ul>\n\n<p>Here's a snippet (from this <a href=\"https://gist.github.com/jcward/a2bc21576cba2587bba1d18b647c0f7d\" rel=\"nofollow noreferrer\">full example gist</a>.)</p>\n\n<pre><code>var conn = sys.db.Sqlite.open(\"test.db\");\n\nvar rs = conn.request('\n  CREATE TABLE IF NOT EXISTS artists_backup\n  (\n    artistid INTEGER PRIMARY KEY AUTOINCREMENT,\n    name NVARCHAR\n  );\n');\n\nvar rs = conn.request('INSERT INTO artists_backup (name) VALUES (\"John\");');\n</code></pre>\n\n<p>Note that a <code>ResultSet</code> is an <code>Iterator&lt;Dynamic&gt;</code>, but you can put in a type hint to keep your DB code nice and type-safe:</p>\n\n<pre><code>typedef RecordType = { name:String, id:Int };\n\nfor (record in (rs:Iterator&lt;RecordType&gt;)) {\n  // While record is still a Dynamic object, the TypeDef alias tells\n  // the compiler that .name and .id are the only valid fields.\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5210, "user_id": 470339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ed7adb8c3e536d5456814daff372070b?s=128&d=identicon&r=PG", "display_name": "Alastair", "link": "https://stackoverflow.com/users/470339/alastair"}, "edited": false, "score": 0, "creation_date": 1509636170, "post_id": 47068636, "comment_id": 81106437, "body": "Been trying to find exactly this kind of documentation forever! Thank you very much."}, {"owner": {"reputation": 1487, "user_id": 2801377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8fcb705ceb412aaef2ebc9fa500a30?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Malaco", "link": "https://stackoverflow.com/users/2801377/jonas-malaco"}, "reply_to_user": {"reputation": 5210, "user_id": 470339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ed7adb8c3e536d5456814daff372070b?s=128&d=identicon&r=PG", "display_name": "Alastair", "link": "https://stackoverflow.com/users/470339/alastair"}, "edited": false, "score": 1, "creation_date": 1509636603, "post_id": 47068636, "comment_id": 81106786, "body": "Happy to help, @Alastair! I can also recommend that you check Hugh Sanderson&#39;s talks on past WWXs (<a href=\"https://www.youtube.com/watch?v=hltXpZ3Upxg\" rel=\"nofollow noreferrer\">2015</a>, <a href=\"https://www.youtube.com/watch?v=1yuMSS5nR4g\" rel=\"nofollow noreferrer\">2016</a>) or <a href=\"https://www.youtube.com/watch?v=mTsr38FaMW0\" rel=\"nofollow noreferrer\">this year&#39;s Haxe Summit</a>.  This year&#39;s workshop on writing C++ externs was also <a href=\"https://www.youtube.com/watch?v=p4kw2QSaSi8\" rel=\"nofollow noreferrer\">recorded</a>."}], "tags": [], "owner": {"reputation": 1487, "user_id": 2801377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8fcb705ceb412aaef2ebc9fa500a30?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Malaco", "link": "https://stackoverflow.com/users/2801377/jonas-malaco"}, "is_accepted": true, "score": 2, "last_activity_date": 1509639995, "last_edit_date": 1509639995, "creation_date": 1509602687, "answer_id": 47068636, "question_id": 47064589, "link": "https://stackoverflow.com/questions/47064589/how-to-include-libsqlite3-in-my-haxe-hxcpp-build/47068636#47068636", "title": "How to include libsqlite3 in my Haxe/hxcpp build?", "body": "<p>According to the <a href=\"https://github.com/HaxeFoundation/hxcpp/blob/master/docs/build_xml/Linker.md\" rel=\"nofollow noreferrer\">hxcpp build XML documentation</a>, I believe you should replace</p>\n\n<pre><code>&lt;compilerflag value=\"-lsqlite3\"/&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;flag value=\"-lsqlite3\"/&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;lib base=\"sqlite3\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 5210, "user_id": 470339, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ed7adb8c3e536d5456814daff372070b?s=128&d=identicon&r=PG", "display_name": "Alastair", "link": "https://stackoverflow.com/users/470339/alastair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 47068636, "answer_count": 2, "score": 1, "last_activity_date": 1509639995, "creation_date": 1509574779, "question_id": 47064589, "link": "https://stackoverflow.com/questions/47064589/how-to-include-libsqlite3-in-my-haxe-hxcpp-build", "title": "How to include libsqlite3 in my Haxe/hxcpp build?", "body": "<p>I have a very simple test put together to include SQLite3 in my Haxe build (I know it has SQLite built in, but this issue doesn't just apply here). It looks like so:</p>\n\n<pre><code>@:include(\"sqlite3.h\")\n@:buildXml('&lt;files id=\"haxe\" append=\"true\"&gt;&lt;compilerflag value=\"-lsqlite3\"/&gt;&lt;/files&gt;')\nextern class SQLite3 {\n    @:native(\"sqlite3_open\") public static function sqlite3_open(path: String, outReference:Reference&lt;DBPointer&gt;):Int;\n}\n\n@:include(\"sqlite3.h\")\n@:native(\"sqlite3\")\nextern class DBPointer {\n\n}\n</code></pre>\n\n<p>This doesn't throw any Haxe errors, but when I try to compile, I get the following error in C++ compilation:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"_sqlite3_open\", referenced from:\n    Main_obj::main() in aea44ed0_Main.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>I had figured that adding the <code>buildXml</code> instructions you can see there would be enough to dynamically reference the macOS SQLite library, but it seems that is not the case.</p>\n\n<p>How can I go about including SQLite here?</p>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1509574911, "post_id": 47064393, "comment_id": 81077412, "body": "Without your code, it&#39;s going to be hard to say something really useful. I suggest you bring the code down to a minimum viable example that exposes the problem."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 2, "last_activity_date": 1509575256, "last_edit_date": 1509575256, "creation_date": 1509574907, "answer_id": 47064602, "question_id": 47064393, "link": "https://stackoverflow.com/questions/47064393/boost-asio-async-connect-callback-not-called-even-when-connection-was-establishe/47064602#47064602", "title": "boost asio async_connect callback not called even when connection was established", "body": "<p>Without your code, it's going to be hard to say something really useful. I suggest you bring the code down to a minimum viable example that exposes the problem.</p>\n\n<blockquote>\n  <ol>\n  <li>Is there a way to investigate why the async_connect callback was not called to denote successful connection establishment?</li>\n  </ol>\n</blockquote>\n\n<p>You may benefit from <a href=\"http://www.boost.org/doc/libs/1_65_1/doc/html/boost_asio/overview/core/handler_tracking.html\" rel=\"nofollow noreferrer\">Handler Tracking</a>. When enabled you get a pretty complete picture of what operations are pending when and what completion handlers are (not) called.</p>\n\n<p>Sample looks like:</p>\n\n<pre><code>@asio|1298160085.070638|0*1|signal_set@0x7fff50528f40.async_wait\n@asio|1298160085.070888|0*2|socket@0x7fff50528f60.async_accept\n@asio|1298160085.070913|0|resolver@0x7fff50528e28.cancel\n@asio|1298160118.075438|&gt;2|ec=asio.system:0\n@asio|1298160118.075472|2*3|socket@0xb39048.async_receive\n@asio|1298160118.075507|2*4|socket@0x7fff50528f60.async_accept\n@asio|1298160118.075527|&lt;2|\n@asio|1298160118.075540|&gt;3|ec=asio.system:0,bytes_transferred=122\n@asio|1298160118.075731|3*5|socket@0xb39048.async_send\n@asio|1298160118.075778|&lt;3|\n@asio|1298160118.075793|&gt;5|ec=asio.system:0,bytes_transferred=156\n@asio|1298160118.075831|5|socket@0xb39048.close\n@asio|1298160118.075855|&lt;5|\n@asio|1298160122.827317|&gt;1|ec=asio.system:0,signal_number=2\n@asio|1298160122.827333|1|socket@0x7fff50528f60.close\n@asio|1298160122.827359|&lt;1|\n@asio|1298160122.827370|&gt;4|ec=asio.system:125\n@asio|1298160122.827378|&lt;4|\n@asio|1298160122.827394|0|signal_set@0x7fff50528f40.cancel\n</code></pre>\n\n<p>Note that Asio comes with a perl script to generate graphviz graphs from this: </p>\n\n<pre><code>~/custom/boost/libs/asio/tools/handlerviz.pl /tmp/raw.log | dot -Tpng -o q.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/421vh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/421vh.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is it possible that io_service queue was overloaded? </li>\n  </ol>\n</blockquote>\n\n<p>Only if you program it that way. The usual pattern is that all tasks posted to <code>io_service</code> should be non-blocking and short lived. If so, you should be able to multiplex serious IO load on just 1 thread no problem.</p>\n\n<blockquote>\n  <p>If so, what explains the async_connect_callback getting called as a result of the timeout? </p>\n</blockquote>\n\n<p>This is by design when the service object (in your case, the socket) gets closed (or even destructed). The docs say that all pending asynchronous operations are canceled in such a case, and the completion handlers will fire with ec=125 (<code>boost::asio::error::operation_abored</code>) exactly like you say.</p>\n\n<blockquote>\n  <p>Also the program uses a threadpool of 40 threads, if it matters.</p>\n</blockquote>\n\n<p>Erm. That's a lot. Why is this? Do you actually have 40 logical CPU cores? Are you using the service for more than just IO tasks? In the latter case I strongly suspect the problem is that you \"abuse\" the IO queue for long-running or (god forbid) blocking tasks, which means that IO tasks <em>can</em> be starved.</p>\n\n<p>This might seem unlikely, but the likelihood increases in the presence of strands, and in particular if the strand participates in such a blocking operation. In that case, the whole pool logically acts as-if 1 single thread for every operation on the strand.</p>\n"}], "owner": {"reputation": 45, "user_id": 7614117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r2apJTo5QGo/AAAAAAAAAAI/AAAAAAAAEcA/aPU5qY66qQg/photo.jpg?sz=128", "display_name": "Kavya Kotacherry", "link": "https://stackoverflow.com/users/7614117/kavya-kotacherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509575256, "creation_date": 1509573707, "question_id": 47064393, "link": "https://stackoverflow.com/questions/47064393/boost-asio-async-connect-callback-not-called-even-when-connection-was-establishe", "title": "boost asio async_connect callback not called even when connection was established", "body": "<p>I am running into this issue occasionally. \nWe have an http client implemented with boost::asio and a deadline_timer to handle connection/request timeout.</p>\n\n<ol>\n<li><code>async_connect</code> is called. deadline_timer is started with a 120 sec timeout.</li>\n<li><code>deadline_timer</code> callback gets called after 120 sec and it explicitly closes the connection.</li>\n<li><code>async_connect_callback</code> is called with error_code <code>boost::system::errc::operation_canceled</code> and here I also see that the timer has expired.</li>\n<li>TcpDump to capture network traffic shows that the tcp connection was established successfully and it is closed after 120 secs.</li>\n</ol>\n\n<p>Questions:</p>\n\n<ol>\n<li>Is there a way to investigate why the async_connect callback was not called to denote successful connection establishment?</li>\n<li>Is it possible that io_service queue was overloaded? If so, what explains the async_connect_callback getting called as a result of the timeout?\nAlso the program uses a threadpool of 40 threads, if it matters.</li>\n</ol>\n"}, {"tags": ["c++", "templates", "hash"], "comments": [{"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 1, "creation_date": 1509576694, "post_id": 47064358, "comment_id": 81077974, "body": "I think he meant to compare <code>index == hash(entries[index].key)</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1509576715, "post_id": 47064358, "comment_id": 81077979, "body": "What you describe sounds good to me. The hash of the key tells you where in the table your value should go. If the value is not in the table at the location suggested by the hash of the key, you have had a collision. Your code makes two mistakes that I see: 1. it doesn&#39;t take into account that a location in the table might be unused. 2. it doesn&#39;t compute the hash of the key"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1509577112, "post_id": 47064358, "comment_id": 81078117, "body": "Actually, third mistake? Why pass in <code>k</code>?"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1509581903, "post_id": 47064358, "comment_id": 81079508, "body": "I&#39;m voting to close this question as off-topic because it belongs to <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7767987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dbc22a5811ffcf9c572a528f2bf4d65?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7767987/matt"}, "edited": false, "score": 0, "creation_date": 1509579075, "post_id": 47065008, "comment_id": 81078714, "body": "ugh thank you! idk why i didn&#39;t think of that, it makes so much more sense than what I was trying to do. You&#39;re a lifesaver. :)"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1509580762, "last_edit_date": 1509580762, "creation_date": 1509577419, "answer_id": 47065008, "question_id": 47064358, "link": "https://stackoverflow.com/questions/47064358/count-total-hash-collisions-in-template-class-c/47065008#47065008", "title": "count total hash collisions in template class c++", "body": "<p>The hash of the key tells you where in the table your value should go. If the value is not in the table at the location suggested by the hash of the key, you have had a collision. </p>\n\n<p>Your code makes two mistakes counting collisions that I see: 1. it doesn't take into account that a location in the table might be unused. 2. it doesn't compute and test against the hash of the key.</p>\n\n<pre><code>template&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::collision() const // doesn't seem to be any reason to pass in a key\n{\n    size_t count = 0; // returning size_t, might as well use size_t\n                      // negative collisions isn't a possibility anyway\n    for (size_t j = 0; j &lt; SIZE; j++) // compare like datatypes where possible\n    {\n        if (entries[j].used) // can't be a collision if the location is empty\n        {\n            size_t index = hash(entries[j].key); // get correct index for key\n            if (j != index) // increment count if in wrong slot in table\n            {\n                count++;\n            }\n        }\n\n    }\n    return count;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7767987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dbc22a5811ffcf9c572a528f2bf4d65?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/7767987/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1509580762, "creation_date": 1509573502, "last_edit_date": 1509576310, "question_id": 47064358, "link": "https://stackoverflow.com/questions/47064358/count-total-hash-collisions-in-template-class-c", "title": "count total hash collisions in template class c++", "body": "<p>Created a template class that hashes a string into an integer from 0 - 999 3 different ways. I am trying to compare the hashed value and the index value, and when they are different adding to a count and then return that number for a total number of collisions. My question is if I am doing this correctly, because I was just guessing when I threw this all together.</p>\n\n<p>code:</p>\n\n<pre><code>#include &lt;string&gt;\n\n#include &lt;list&gt;\n\ntemplate&lt;typename T&gt;\nclass Hash\n{\nprotected:\n\n    // Capacity of the hash table\n    static const size_t SIZE = 1000;\n\n    // Defines an entry in the hash table\n    class Entry\n    {\n    public:\n        std::string key;\n        T value;\n        bool used;\n        Entry()\n        {\n            used = false;\n            value = T();\n        }\n    };\n\n    // The hash table entries\n    Entry entries[SIZE];\n\n    // Hash function #1\n    size_t hash1(const std::string&amp; k) const;\n\n    // Hash function #2\n    size_t hash2(const std::string&amp; k) const;\n\n    // Hash function #3\n    size_t hash3(const std::string&amp; k) const;\n\n    // Calculate the hash of a given key\n    //  TODO: change this to use the desired hash function\n    size_t hash(const std::string&amp; k) const\n    {\n        return hash1(k);\n    }\n\n    // Perform linear probing on the given key and index to get index\n    size_t probe(const std::string&amp; k, size_t i) const;\npublic:\n    // Access data item in hash for the given key\n    T&amp; operator[](const std::string&amp; k);\n\n    void print() const\n    {\n        for (size_t i = 0; i &lt; SIZE; i++)\n            std::cout &lt;&lt; i &lt;&lt; \"-\" &lt;&lt; entries[i].used &lt;&lt; \"-\" &lt;&lt; entries[i].key\n                    &lt;&lt; \"-\" &lt;&lt; entries[i].value &lt;&lt; std::endl;\n    }\n    size_t collision(const std::string&amp; k) const;\n};\n\ntemplate&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::hash1(const std::string&amp; k) const\n{\n    int index = 0;\n    for (size_t i = 0; i &lt; k.size(); i++)\n        index += k[i];\n    return index % SIZE;\n}\n\ntemplate&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::hash2(const std::string&amp; k) const\n{\n    int index = 0;\n    for (size_t i = 0; i &lt; k.size(); i++)\n    {\n        index += (k[i] + 27 * k[i] + 729 * k[i]);\n    }\n    return index % SIZE;\n}\n\ntemplate&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::hash3(const std::string&amp; k) const\n{\n    int index = 0;\n    for (size_t i = 0; i &lt; k.size(); i++)\n    {\n        index += 37 * index + k[i];\n    }\n    return index % SIZE;\n}\n\ntemplate&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::probe(const std::string&amp; k, size_t i) const\n{\n    int index = i;\n    int count = 0;\n    while (entries[index].used &amp;&amp; entries[index].key != k &amp;&amp; count &lt; SIZE)\n        index = (index + 1) % SIZE;\n    return index;\n}\n\ntemplate&lt;typename T&gt;\nT&amp; Hash&lt;T&gt;::operator[](const std::string&amp; k)\n{\n    int index = hash(k);\n    if (entries[index].used &amp;&amp; entries[index].key != k)\n        index = probe(k, index);\n    if (!entries[index].used)\n    {\n        entries[index].key = k;\n        entries[index].used = true;\n    }\n    return entries[index].value;\n}\n\ntemplate&lt;typename T&gt;\nsize_t Hash&lt;T&gt;::collision(const std::string&amp; k) const\n{\n    int count = 0;\n    for (int j = 0; j &lt; SIZE; j++)\n    {\n        if (j == entries[j].value)\n        {\n            count++;\n        }\n    }\n    return count;\n}\n</code></pre>\n\n<p>Since the size of the list is a constant 1000, the index values are always 0 to 999. Knowing this, if i compare that number to the hashed value (entries[j].value) and they are the same then I know that the values are the same and there was a collision, so i can then add to the count.</p>\n\n<p>I am trying it this way because my professor stated \"You can\ndetermine this by examining each entry in the hash table and comparing the stored key value\u2019s hash value to the index within the table.\" and truthfully I'm not sure what he means by that. I'm going to apologize in advance because I have a strong feeling this is completely wrong.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1509573413, "post_id": 47064317, "comment_id": 81076854, "body": "If you think it has anything to do with typedefs, remove the typedefs."}, {"owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1509573502, "post_id": 47064317, "comment_id": 81076893, "body": "its a huge file with 11K lines of code. removing typedefs where ever they are used in that one would be terribly laborious"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1509573648, "post_id": 47064317, "comment_id": 81076940, "body": "That is your problem. You need to find ways to understand your own code."}, {"owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1509573695, "post_id": 47064317, "comment_id": 81076961, "body": "Isn&#39;t there a smart way to iterate and compare what I want??"}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1509573769, "creation_date": 1509573769, "answer_id": 47064403, "question_id": 47064317, "link": "https://stackoverflow.com/questions/47064317/iterate-over-a-vector-thats-defined-as-a-typedef-c/47064403#47064403", "title": "iterate over a vector thats defined as a typedef C++", "body": "<p>In your call to <code>find</code>, you're iterating over a container that holds a bunch of <code>pinType</code> objects, while you're searching for a <code>string</code> value.  The compiler will need an overload of <code>operator==</code> that takes a <code>pinType</code> on the left and a <code>string</code> on the right.</p>\n\n<p>So you'll want to either provide that operation, or define a lambda or comparison class to handle it.</p>\n"}], "owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509573769, "creation_date": 1509573287, "question_id": 47064317, "link": "https://stackoverflow.com/questions/47064317/iterate-over-a-vector-thats-defined-as-a-typedef-c", "title": "iterate over a vector thats defined as a typedef C++", "body": "<p>I have a struct as follows</p>\n\n<pre><code>struct pins\n{\n    PType pintypes;\n    GType Grouptypes\n};\n</code></pre>\n\n<p>where PType and GType are defined as </p>\n\n<pre><code>typedef std::vector&lt; pInfo &gt; PType;\ntypedef std::vector&lt;gInfo&gt; GType;\n</code></pre>\n\n<p>where pInfo and gInfo are classes with sample members as </p>\n\n<pre><code>struct pInfo {\n    std::string pinNumber;\n    std::string pinName;\n};\n</code></pre>\n\n<p>Now I am comparing two PinInfos from pins variable.I want to see if given two pins, they have exactly the same pintypes.</p>\n\n<p>I am trying as follows.</p>\n\n<pre><code>for (std::vector&lt;pInfo&gt;::const_iterator prim1Pin = pins.pinTypes.begin(); prim1Pin != pins.pinTypes.end(); prim1Pin++)\n    {\n        if (bRet)\n        {\n            std::vector&lt;pInfo&gt;::const_iterator prim2pin = std::find(prim2.pinTypes.begin(), prim2.pinTypes.end(), (*prim1Pin).pinNumber);\n            if (prim2pin!=prim2.pinTypes.end())\n            {\n                bRet &amp;= ((*prim2pin).PinNumber== (*prim1Pin).PinNumber&amp;&amp; (*prim2pin).pinName == (*prim1Pin).pinName)                    \n            }\n            else\n                bRet &amp;= false;\n        }\n    }\n</code></pre>\n\n<p>when I compile this I get the following error in <code>algorithm.h</code> file </p>\n\n<p><code>Error  C2678   binary '==' : no operator found which takes a left-hand operand of type 'pInfo' (or there is no acceptable conversion)  C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\algorithm    41</code>\nNot sure whats wrong with this.\nI am using some version less than C++ 11. </p>\n"}, {"tags": ["c++", "xml", "qt", "parsing", "qml"], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 4909309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10206597254391341/picture?type=large", "display_name": "Romy", "link": "https://stackoverflow.com/users/4909309/romy"}, "edited": false, "score": 0, "creation_date": 1509614104, "post_id": 47065078, "comment_id": 81090938, "body": "All valid points. However, I&#39;m planning to work with very small xml files, 100-200kb in size. But even that isn&#39;t the problem, I&#39;m very much open to any method that can just parse the xml file in a more editable form, be it sqlite database like @eyllanesc commented, or a simple JSON object model. After I get the data out of XML, its easy to manipulate it later. The parsing is what is bothering me right now."}], "tags": [], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "is_accepted": false, "score": 2, "last_activity_date": 1509577807, "creation_date": 1509577807, "answer_id": 47065078, "question_id": 47064287, "link": "https://stackoverflow.com/questions/47064287/qml-qt-parse-xml-and-convert-it-as-a-lisviews-listmodel/47065078#47065078", "title": "QML Qt- Parse XML and convert it as a LisView&#39;s ListModel", "body": "<p>You should not convert it into a  <code>ListModel</code>. Instead implement your own descendent of the <code>QAbstractListModel</code> that has your needed capatibilities.</p>\n\n<p>However there is likely a reason, why Qt does provide the <code>XmlListModel</code> as read-only. <a href=\"https://stackoverflow.com/questions/30642827/how-to-write-to-middle-of-a-file-in-c\">You can't just <em>insert</em> into a file. <strong>(AFAIK)</strong></a> So if a entry is added or removed, and that change is not at the very end of the file, the whole content needs to be copied. And that is needed to be done, when ever the data changes. Not good for performance.</p>\n\n<p>If you consider doing something like that, don't write back permanently. Think, when it is a good time to do the write-back. An obvious point is when the model is being destroyed. But as there might be some problems, so the object can't be destroyed properly, you might want to save every now and then.</p>\n\n<p>You might use a timer, to save, e.g. 10 Seconds after a change (expecting, that if one change happened, many changes will happen soon after)</p>\n\n<p>You might also use a more complex format for the XML, where you indeed just append basically logging the changes. From time to time you do a clean-up rewriting the file, so that the history is lost, but the changes are really applied to your xml structure.</p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 4909309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10206597254391341/picture?type=large", "display_name": "Romy", "link": "https://stackoverflow.com/users/4909309/romy"}, "is_accepted": true, "score": 0, "last_activity_date": 1512430778, "creation_date": 1512430778, "answer_id": 47643775, "question_id": 47064287, "link": "https://stackoverflow.com/questions/47064287/qml-qt-parse-xml-and-convert-it-as-a-lisviews-listmodel/47643775#47643775", "title": "QML Qt- Parse XML and convert it as a LisView&#39;s ListModel", "body": "<p>In the end, I've used<code>QDomDocument</code> class to read XML file, iterate through all of the nodes and write values that I want to JSON objects like so:\n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QDomElement root = doc.firstChildElement();\nQDomNodeList programme = root.elementsByTagName(\"node\");\nnodeCollection.push_back(ListElements(program, \"title\", \"lang\"));\n</code></pre>\n\n<p>...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QJsonObject ListElements (QDomElement root, QString tagname, QString attribute)\n{\n\n        QDomNodeList items = root.elementsByTagName(tagname);\n\n        for(int i = 0; i &lt; items.count(); i++)\n        {\n            QDomNode itemnode = items.at(i);\n            if (itemnode.isElement())\n            {\n                QDomElement itemElement = itemnode.toElement();\n                qInfo() &lt;&lt; itemElement.tagName(); // &lt;-element name\n                qInfo() &lt;&lt; itemElement.attribute(\"lang\"); // &lt;-element attribute\n                qInfo() &lt;&lt; itemElement.text(); // &lt;-element text\n\n// putting the values above inside JSOn object:\n\n                auto nodeData = QJsonObject(\n                {\n                qMakePair(QString(itemElement.tagName()), QJsonValue(itemElement.text())),\n                qMakePair(QString(\"lang\"), QJsonValue(itemElement.attribute(\"lang\"))),\n                });\n\n                return nodeData;\n            }\n        }\n    }\n</code></pre>\n\n<p>so this:\n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>  &lt;node&gt;\n    &lt;title lang=\"en\"&gt;Title1&lt;/title&gt;\n    &lt;category lang=\"en\"&gt;Category1&lt;/category&gt;\n    &lt;desc lang=\"en\"&gt;Description1&lt;/desc&gt;\n  &lt;/node&gt;\n</code></pre>\n\n<p>becomes (this is what <code>ListElements</code> returns):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code> QJsonObject({\"title\":\"Title1\",\"lang\":\"en\"})\n QJsonObject({\"category\":\"Category1\",\"lang\":\"en\"})\n QJsonObject({\"desc\":\"Description1\",\"lang\":\"en\"})\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 4909309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10206597254391341/picture?type=large", "display_name": "Romy", "link": "https://stackoverflow.com/users/4909309/romy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 47643775, "answer_count": 2, "score": 1, "last_activity_date": 1512430778, "creation_date": 1509573136, "last_edit_date": 1509615005, "question_id": 47064287, "link": "https://stackoverflow.com/questions/47064287/qml-qt-parse-xml-and-convert-it-as-a-lisviews-listmodel", "title": "QML Qt- Parse XML and convert it as a LisView&#39;s ListModel", "body": "<p>I'm new to Qt and QML. With that said, I am making a editable list in QML which I would like to import and export as XML file. Right now I'm stuck on importing it from XML file and setting it as my <code>ListView</code>'s model from the C++ side.</p>\n\n<p>I'm hoping I can transform the XML to a form\nI want to be able to add, remove and edit rows in my ListView from the QML side, so using <code>XmlListModel</code> looks like a bad idea, i.e. it doesn't offer those abilities.\n</p>\n\n<p>my main.qml in which I am choosing the file location:</p>\n\n<pre><code>    FileDialog {\n        id: exportDialog\n        title: \"Please choose an XML TV file\"\n        nameFilters: [(\"*.xml\")]\n\n        onAccepted: {\n            fileio.parse(importDialog.fileUrl)\n        }\n        onRejected: {\n            console.log(\"Canceled\")\n        }\n    }\n</code></pre>\n\n<p>My C++ header file in which I would like the conversion to happen:\n</p>\n\n<pre><code>#ifndef FILEIO_H\n#define FILEIO_H\n\n#include &lt;QObject&gt;\n#include &lt;QFile&gt;\n#include &lt;QTextStream&gt;\n#include &lt;QXmlStreamReader&gt;\n#include &lt;QDebug&gt;\n\nclass FileIO : public QObject\n{\n    Q_OBJECT\n\npublic slots:\n    bool parse(const QString&amp; source)\n    {\n        if (source.isEmpty())\n            return false;\n\n        QFile file(source);\n        if (!file.open(QFile::WriteOnly | QFile::Truncate))\n            return false;    \n\n        QFile* mjau = new QFile(source);\n        if (!mjau-&gt;open(QIODevice::ReadOnly | QIODevice::Text)) {\n                printf(\"Load XML File Problem\");\n                return false;\n        }\n\n        QXmlStreamReader reader(mjau);\n        while(!reader.atEnd() &amp;&amp; !reader.hasError()) {\n            if(reader.readNext() == QXmlStreamReader::StartElement &amp;&amp; reader.name() == \"parent\") {\n                 qDebug() &lt;&lt; reader.readElementText();\n                //printf(reader.readElementText())\n            }\n        }\n    }\npublic:\n    FileIO() {}\n};\n\n#endif // FILEIO_H\n</code></pre>\n\n<p>Example of xml file I'd like to parse, multitude of  entries:</p>\n\n<pre><code>&lt;notes&gt;\n    &lt;note&gt;\n        &lt;heading&gt;Help&lt;/heading&gt;\n        &lt;body&gt;I want to make this work!&lt;/body&gt;\n    &lt;/note&gt;\n    &lt;note&gt;\n        &lt;heading&gt;Because&lt;/heading&gt;\n        &lt;body&gt;I love QML &lt;3&lt;/body&gt;\n    &lt;/note&gt;\n    ...\n&lt;/notes&gt;\n</code></pre>\n\n<p>To something like this:</p>\n\n<pre><code>ListModel {\n    id: notes\n    ListElement {\n        heading: \"Help\"\n        body: \"I want to make this work!\"\n    }\n    ListElement {\n        heading: \"Because\"\n        body: \"I love QML &lt;3\"\n    }\n}\n</code></pre>\n\n<p>Right now, when I choose the XML file nothing happens, but that same file is \"cleaned out\", becomes a blank .xml file.\nHow could I parse it properly, and after that, convert the parsed data into QML's ListView <code>ListModel</code> or any model that can support editing from the QML's side?</p>\n\n<p><strong>--UPDATE--</strong> \nParsing of the XML file will be a one-time procedure, after the parse I intend to work with the data in javascript, so it would be cool if  the data could be parsed in JSON object structure. </p>\n"}, {"tags": ["c++", "class", "callback", "type-conversion", "portaudio"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1509572623, "post_id": 47064112, "comment_id": 81076514, "body": "A non-<code>static</code> member function pointer is not a non-member function pointer. You are trying to use a non-<code>static</code> member function when a pointer to a non-member function is expected. Please remember that there is an implicit <code>this</code> in a non-<code>static</code> member function."}, {"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1509573150, "post_id": 47064112, "comment_id": 81076739, "body": "so parsing  <code>this-&gt;callback()</code> work?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1509573357, "post_id": 47064112, "comment_id": 81076834, "body": "You can make the function call <code>this-&gt;callback()</code>, but you can&#39;t pass <code>this-&gt;callback</code> as a function pointer where a non-member function pointer is expected."}, {"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1509573765, "post_id": 47064112, "comment_id": 81076990, "body": "Ahh.. that  makes sense. So I guess I have to define my callback outside the class, as the library (portaudio) seem to have this limitation.. no way to get around it?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1509573871, "post_id": 47064112, "comment_id": 81077037, "body": "You can pass <code>this</code> as the user data pointer to the callback, then in the callback recover the <code>this</code> pointer from it and use that to call the callback within the class."}, {"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1509574039, "post_id": 47064112, "comment_id": 81077093, "body": "@1201ProgramAlarm not sure I understand.. If the callback is defined outside the class scope, how do I then have access to the class variable using <code>this</code> ?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1509574159, "post_id": 47064112, "comment_id": 81077135, "body": "Something like <code>record *pThis = (record *) userData; pThis-&gt;realCallback(parameters);</code>"}, {"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1509574539, "post_id": 47064112, "comment_id": 81077269, "body": "Not sure I understand.. you make an instance of the class, and then define the callback function, within the instance/class.. was is not basically that which caused this error in the first place?"}, {"owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "edited": false, "score": 0, "creation_date": 1509574813, "post_id": 47064112, "comment_id": 81077386, "body": "I guess my problem now is, since my callback function is defined within the class, it alters the member variables of its instance. but since I need to define my callback function outside the class scope, I don&#39;t have access to the member variable of the instance, forcing me to make all the variables global.. Not wanted..  Any suggestions?@1201ProgramAlarm"}], "owner": {"reputation": 682, "user_id": 5585502, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cb140b447b19caac8f9228911a618288?s=128&d=identicon&r=PG&f=1", "display_name": "Lamda", "link": "https://stackoverflow.com/users/5585502/lamda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1509572906, "answer_count": 0, "score": 0, "last_activity_date": 1509572394, "creation_date": 1509572394, "question_id": 47064112, "link": "https://stackoverflow.com/questions/47064112/type-conversion-occured-when-parsing-callback-function-to-function", "closed_reason": "Duplicate", "title": "type conversion occured when parsing callback function to function", "body": "<p>I seem to have pretty weird error with my callback function that I am trying to parse to my function that calls it.. </p>\n\n<p>record.h</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include \"portaudio.h\"\n#include &lt;algorithm&gt;\n#define SAMPLE_RATE (44100)\n\ntypedef double SAMPLE;\n#define NUM_SECONDS 30\n\n#define NUM_CHANNELS  2\n#define SAMPLE_SILENCE 0.0f\n#define PA_SAMPLE_TYPE  paFloat32\n#define FRAMES_PER_BUFFER (512)\n\n\ntypedef struct\n{\n    int     frameIndex;\n    int     maxFrameindex;\n    SAMPLE  *recordedSamples;\n}\npaTestData;\n\nclass record {\npublic:\n    record();\n    void start_record();\n    int recordCallback(const void *inputBuffer, void *outputBuffer,\n                       unsigned long framesPerBuffer,\n                       const PaStreamCallbackTimeInfo* timeInfo,\n                       PaStreamCallbackFlags statusFlags, void *userData);\nprivate:\n    PaStreamParameters  inputParameters,\n                        outputParameters;\n    PaStream*           stream;\n    PaError             err = paNoError;\n    paTestData          data;\n    int                 totalFrames;\n    int                 numSamples;\n    int                 numBytes;\n    SAMPLE              max, val;\n    double              average;\n};\n</code></pre>\n\n<p>record.cpp</p>\n\n<pre><code>#include \"record.h\"\n\n\nrecord::record()\n{\n    std::cout &lt;&lt; \"Record object made\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; Pa_GetVersion() &lt;&lt; std::endl;\n    this-&gt;data.maxFrameindex = this-&gt;totalFrames = NUM_SECONDS * SAMPLE_RATE;\n    this-&gt;data.frameIndex = 0;\n    this-&gt;numSamples = this-&gt;totalFrames * NUM_CHANNELS;\n    numBytes = numSamples * sizeof(SAMPLE);\n    data.recordedSamples = (SAMPLE *) malloc( numBytes ); /* From now on, recordedSamples is initialised. */\n    if( data.recordedSamples == NULL )\n    {\n        std::cout &lt;&lt; \"Could not allocate record array\" &lt;&lt; std::endl;\n        exit(1);\n    }\n\n    std::fill_n(this-&gt;data.recordedSamples,numSamples,0);\n    int err = Pa_Initialize();\n\n    if( err != paNoError )\n    {\n        std::cout &lt;&lt; \"Error\" &lt;&lt; std::endl;\n        printf(  \"PortAudio error: %s\\n\", Pa_GetErrorText( err ) );\n    }\n    else\n    {\n       printf(  \"PortAudio init: %s\\n\", Pa_GetErrorText( err ) );\n    }\n\n    this-&gt;inputParameters.device = Pa_GetDefaultInputDevice(); /* default input device */\n\n\n    if (this-&gt;inputParameters.device == paNoDevice) {\n        std::cout &lt;&lt; \"Error: No default input device\" &lt;&lt; std::endl;\n        exit(1);\n    }\n\n    this-&gt;inputParameters.channelCount = 2;                    /* stereo input */\n    this-&gt;inputParameters.sampleFormat = PA_SAMPLE_TYPE;\n    this-&gt;inputParameters.suggestedLatency = Pa_GetDeviceInfo( this-&gt;inputParameters.device )-&gt;defaultLowInputLatency;\n    this-&gt;inputParameters.hostApiSpecificStreamInfo = NULL;\n\n}\n\nint record::recordCallback(const void *inputBuffer, void *outputBuffer,\n                           unsigned long framesPerBuffer,\n                           const PaStreamCallbackTimeInfo* timeInfo,\n                           PaStreamCallbackFlags statusFlags, void *userData)\n{\n    this-&gt;data = (paTestData&amp;) userData;\n    const SAMPLE *rptr = (const SAMPLE*)inputBuffer;\n    SAMPLE *wptr = &amp;this-&gt;data.recordedSamples[this-&gt;data.frameIndex * NUM_CHANNELS];\n    long framesToCalc;\n    long i;\n    int finished;\n    unsigned long framesLeft = this-&gt;data.maxFrameindex - this-&gt;data.frameIndex;\n\n    (void) outputBuffer; /* Prevent unused variable warnings. */\n    (void) timeInfo;\n    (void) statusFlags;\n    //(void) userData;\n\n    if( framesLeft &lt; framesPerBuffer )\n    {\n        framesToCalc = framesLeft;\n        finished = paComplete;\n    }\n    else\n    {\n        framesToCalc = framesPerBuffer;\n        finished = paContinue;\n    }\n\n    if( inputBuffer == NULL )\n    {\n        for(int i=0; i&lt;framesToCalc; i++ )\n        {\n            *wptr++ = SAMPLE_SILENCE;  /* left */\n            if( NUM_CHANNELS == 2 ) *wptr++ = SAMPLE_SILENCE;  /* right */\n        }\n    }\n    else\n    {\n        for(int i=0; i&lt;framesToCalc; i++ )\n        {\n            *wptr++ = *rptr++;  /* left */\n            if( NUM_CHANNELS == 2 ) *wptr++ = *rptr++;  /* right */\n        }\n    }\n    this-&gt;data.frameIndex += framesToCalc;\n    return finished;\n}\n\nvoid record::start_record()\n{\n\n    err = Pa_OpenStream(\n              &amp;this-&gt;stream,\n              &amp;this-&gt;inputParameters,\n              NULL,                  /* &amp;outputParameters, */\n              SAMPLE_RATE,\n              FRAMES_PER_BUFFER,\n              paClipOff,      /* we won't output out of range samples so don't bother clipping them */\n              recordCallback,\n              &amp;data );\n    if( err != paNoError )\n    {\n        std::cout &lt;&lt; \"Something wrong  - open_stream check\" &lt;&lt; std::endl;\n        exit(1);\n    }\n\n    if( this-&gt;stream )\n    {\n        this-&gt;err = Pa_StartStream( this-&gt;stream );\n        if( err != paNoError )\n        {\n            std::cout &lt;&lt; \"Something wrong in stream check\" &lt;&lt; std::endl;\n            exit(1);\n        }\n\n        std::cout &lt;&lt; \"Waiting for playback to finish\" &lt;&lt; std::endl;\n\n        while( ( err = Pa_IsStreamActive( stream ) ) == 1 )\n        {\n            Pa_Sleep(100);\n        }\n        if( err &lt; 0 )\n        {\n            std::cout &lt;&lt; \"error check with isStreamActive - something wrong\" &lt;&lt; std::endl;\n            exit(1);\n        }\n\n        err = Pa_CloseStream( stream );\n        if( err != paNoError )\n        {\n            std::cout &lt;&lt; \"error check with close_stream- something wrong\" &lt;&lt; std::endl;\n            exit(1);\n        }\n\n\n        std::cout &lt;&lt; \"Everythin done!\" &lt;&lt; std::endl;\n    }\n\n\n}\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>record/record.cpp:107:21: error: cannot convert \u2018record::recordCallback\u2019 from type \u2018int (record::)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, PaStreamCallbackFlags, void*) {aka int (record::)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, long unsigned int, void*)}\u2019 to type \u2018int (*)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, PaStreamCallbackFlags, void*) {aka int (*)(const void*, void*, long unsigned int, const PaStreamCallbackTimeInfo*, long unsigned int, void*)}\u2019\n               &amp;data );\n                     ^\nmake[2]: *** [src/include/record/CMakeFiles/record.dir/record.cpp.o] Error 1\nmake[1]: *** [src/include/record/CMakeFiles/record.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>It program written here is a bit of a copy of this <a href=\"https://github.com/EddieRingle/portaudio/blob/master/examples/paex_record.c\" rel=\"nofollow noreferrer\">github code post</a>,\nwhere I tried to format it a bit c++ style.  the problem seem to be with the <code>start_recording()</code> function, in which I parse the callback function  <code>RecordCallback()</code> to the function <code>Pa_OpenStream()</code>.. For some reason is it seen that as a type conversion, but even the error message states that both versions are identical, which make me question... why does it think it is a type conversion, and how do fix it?</p>\n"}, {"tags": ["c++", "r", "boost", "rcpp"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 3, "creation_date": 1509574556, "post_id": 47064077, "comment_id": 81077275, "body": "You are confusing usage by <i>Rcpp Attributes</i> within a session (which parses and uses <code>[[Rcpp::depends(BH)]]</code>) which what a <i>package</i> does where we rely on standard R infrastructure.  Hence <code>LinkingTo:</code> as per the answer below, and of course as clearly delineated in <i>Writing R Extensions</i>."}], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 1, "creation_date": 1509574569, "post_id": 47064464, "comment_id": 81077278, "body": "Correct.  See my comment above."}, {"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 0, "creation_date": 1509577152, "post_id": 47064464, "comment_id": 81078137, "body": "Oh!  Thanks.  Confusing, since we&#39;re not actually linking to anything, this is a header-only dependency and just adds a <code>-I</code> flag to the compiler (not linker) invocation.  It does clearly say that in the docs, I just didn&#39;t grok that &quot;LinkingTo&quot; applies to situations other than linking."}], "tags": [], "owner": {"reputation": 3759, "user_id": 5861244, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d91f85d745992f8fee734d44f3f8c8f?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Christoffersen", "link": "https://stackoverflow.com/users/5861244/benjamin-christoffersen"}, "is_accepted": true, "score": 4, "last_activity_date": 1509574392, "last_edit_date": 1509574392, "creation_date": 1509574092, "answer_id": 47064464, "question_id": 47064077, "link": "https://stackoverflow.com/questions/47064077/rcpp-isnt-finding-boost-headers/47064464#47064464", "title": "Rcpp isn&#39;t finding Boost headers", "body": "<p>Have you added it to <code>LinkingTo</code> as mentioned <a href=\"http://dirk.eddelbuettel.com/code/bh.html\" rel=\"nofollow noreferrer\">here</a>? </p>\n\n<p><a href=\"http://dirk.eddelbuettel.com/code/rcpp/Rcpp-attributes.pdf\" rel=\"nofollow noreferrer\">Further</a>, </p>\n\n<blockquote>\n  <p>Note that while the <code>Rcpp::depends</code> attribute establishes dependencies\n  for <code>sourceCpp</code>, it\u2019s important to note that if you include the same\n  source file in an R package these dependencies must still be listed in\n  the <code>Imports</code> and/or <code>LinkingTo</code> fields of the package <code>DESCRIPTION</code> file.\n  ...\n  Packages that provide only C++ header files (and no shared library) need only be referred to using <code>LinkingTo</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 47064464, "answer_count": 1, "score": 3, "last_activity_date": 1509574392, "creation_date": 1509572182, "question_id": 47064077, "link": "https://stackoverflow.com/questions/47064077/rcpp-isnt-finding-boost-headers", "title": "Rcpp isn&#39;t finding Boost headers", "body": "<p>I have a file called <code>src/windows.cpp</code> (windowing functions for vectors, nothing to do with MS Windows!) in an R package project.  The top of the file looks like this:</p>\n\n<pre><code>// [[Rcpp::depends(BH)]]\n// [[Rcpp::plugins(cpp11)]]\n\n#include &lt;Rcpp.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;boost/algorithm/string/join.hpp&gt;\n\nusing namespace Rcpp;\n</code></pre>\n\n<p>That doesn't seem to be enough to let it find the Boost headers - when I do a <code>devtools::load_all(.)</code> to trigger compilation, I see this build failure:</p>\n\n<pre><code>* installing *source* package \u2018MyPackage\u2019 ...\n** libs\ng++ -m64  -I/usr/include/R -DNDEBUG  -I\"/home/rstudio/R/x86_64-redhat-linux-gnu-library/3.4/Rcpp/include\" \n-I/usr/local/include  -std=c++11 -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2\n-fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic  -c windows.cpp -o windows.o\nwindows.cpp:6:43: fatal error: boost/algorithm/string/join.hpp: No such file or directory\n #include &lt;boost/algorithm/string/join.hpp&gt;\n                                           ^\ncompilation terminated.\n</code></pre>\n\n<p>I've got <code>BH</code> installed, and the relevant headers are present:</p>\n\n<pre><code>&gt; .libPaths()[1]\n[1] \"/home/rstudio/R/x86_64-redhat-linux-gnu-library/3.4\"\n\n&gt; dir(file.path(.libPaths()[1], 'BH/include/boost/algorithm/string'))\n [1] \"case_conv.hpp\"             \"classification.hpp\"        \"compare.hpp\"              \n [4] \"concept.hpp\"               \"config.hpp\"                \"constants.hpp\"            \n [7] \"detail\"                    \"erase.hpp\"                 \"find_format.hpp\"          \n[10] \"find_iterator.hpp\"         \"find.hpp\"                  \"finder.hpp\"               \n[13] \"formatter.hpp\"             \"iter_find.hpp\"             \"join.hpp\"                 \n[16] \"predicate_facade.hpp\"      \"predicate.hpp\"             \"regex_find_format.hpp\"    \n[19] \"regex.hpp\"                 \"replace.hpp\"               \"sequence_traits.hpp\"      \n[22] \"split.hpp\"                 \"std\"                       \"std_containers_traits.hpp\"\n[25] \"trim_all.hpp\"              \"trim.hpp\"                  \"yes_no_type.hpp\"   \n</code></pre>\n\n<p>It looks like the core problem is that the <code>[[Rcpp::depends(BH)]]</code> directive isn't adding the relevant Boost directory to the compiler directives, right?  What should I look for in my setup that might be causing this?</p>\n\n<p>I've added <code>BH</code> to the <code>Imports:</code> section of my <code>DESCRIPTION</code> file, is that correct/advisable?</p>\n"}, {"tags": ["c++", "memory", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 8206202, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f98a1dfbe765113c5c21d88d6faaa958?s=128&d=identicon&r=PG&f=1", "display_name": "db7638", "link": "https://stackoverflow.com/users/8206202/db7638"}, "edited": false, "score": 0, "creation_date": 1509573010, "post_id": 47064167, "comment_id": 81076671, "body": "For debugging purposes, do people usually copy the memory from device to host so they can view it? Could you please include how I would accomplish this? I thought I could view the device memory because I read <a href=\"http://developer.download.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/View_Memory.htm\" rel=\"nofollow noreferrer\">this</a> but I guess the memory I&#39;m trying to read is not global, shared, or local?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1509580941, "post_id": 47064167, "comment_id": 81079238, "body": "If you use the device code debugging feature of Nsight VSE, and set a breakpoint in device code (and hit/stop at that breakpoint), I believe you should be able to inspect device data at that point."}, {"owner": {"reputation": 398, "user_id": 4248409, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ed0b051c4d7c8f7d008d8d019066c506?s=128&d=identicon&r=PG&f=1", "display_name": "BAdhi", "link": "https://stackoverflow.com/users/4248409/badhi"}, "edited": false, "score": 0, "creation_date": 1509598133, "post_id": 47064167, "comment_id": 81083528, "body": "Using <code>cuda-gdb</code> one can access memory by casting it as <code>(@global char *) data</code>. Might not be useful in this case since its Windows platform though"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 2, "last_activity_date": 1509631676, "last_edit_date": 1509631676, "creation_date": 1509572596, "answer_id": 47064167, "question_id": 47064031, "link": "https://stackoverflow.com/questions/47064031/memory-allocated-using-cudamalloc-shows-up-as/47064167#47064167", "title": "Memory allocated using cudaMalloc shows up as `?? ?? ??`", "body": "<p>You can't view this memory in the host (= CPU) debugger. <code>cudaMalloc</code> allocates device (= GPU) memory, so the pointer returned points into GPU memory and makes no sense whatsoever on the host. From the host's point of view, a device-memory pointer is just a black-box value. Only device code can dereference that.</p>\n\n<p>To be able to view contents of device memory when debugging, you have to use a device debugger (such as NSight or cuda-gdb) and put a breakpoint in device code. I have no experience with this, though, so I cannot provide more info.</p>\n\n<p>If you want to view such memory on the host, you have to copy it into host memory. That's what <code>cudaMemcpy(..., cudaMemcpyDeviceToHost)</code> and similar functions do.</p>\n"}], "owner": {"reputation": 362, "user_id": 8206202, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f98a1dfbe765113c5c21d88d6faaa958?s=128&d=identicon&r=PG&f=1", "display_name": "db7638", "link": "https://stackoverflow.com/users/8206202/db7638"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 47064167, "answer_count": 1, "score": 1, "last_activity_date": 1509631676, "creation_date": 1509572007, "question_id": 47064031, "link": "https://stackoverflow.com/questions/47064031/memory-allocated-using-cudamalloc-shows-up-as", "title": "Memory allocated using cudaMalloc shows up as `?? ?? ??`", "body": "<p>I downloaded NVIDIA Computing Toolkit (containing CUDA 9.0 SDK). Inside the SDK, there is a Visual Studio project called <code>cppIntegration</code>.</p>\n\n<p>In <code>cppIntegration</code> project, there are variables with type <code>char*</code>that are allocated memory using <code>cudaMalloc()</code> and then data is copied to these variables using <code>cudaMemcpy()</code>. While debugging the project in Visual Studio I can see the memory address pointed by the <code>char*</code> variable but when I try to read that memory using the memory window in the debugger I just see <code>?? ?? ??</code> repeatedly.</p>\n\n<p>The <code>.cu</code> file in the <code>cppIntegration</code> project is as follows (only showing code relevant to the question):</p>\n\n<pre><code>extern \"C\" bool\nrunTest(const int argc, const char **argv, char *data, int2 *data_int2, unsigned int len)\n{\n    // use command-line specified CUDA device, otherwise use device with highest Gflops/s\n    findCudaDevice(argc, (const char **)argv);\n\n    const unsigned int num_threads = len / 4;\n    assert(0 == (len % 4));\n    const unsigned int mem_size = sizeof(char) * len;\n    const unsigned int mem_size_int2 = sizeof(int2) * len;\n\n    // allocate device memory\n    char *d_data;\n    checkCudaErrors(cudaMalloc((void **) &amp;d_data, mem_size));\n    // copy host memory to device\n    checkCudaErrors(cudaMemcpy(d_data, data, mem_size,\n                               cudaMemcpyHostToDevice));\n    ...\n    ...\n    ...\n}\n</code></pre>\n\n<p><code>runTest()</code> is called from <code>main()</code>.</p>\n\n<p>I tried viewing data pointed by <code>d_data</code> but it shows up as <code>?? ?? ??</code>. <strong>How do I view the actual memory data pointed by the <code>char*</code>?</strong></p>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1509573498, "post_id": 47063988, "comment_id": 81076892, "body": "Use <b>absolute path</b> to include directories: <code>set(BEAST_INCLUDE_DIR </code>${CMAKE_CURRENT_SOURCE_DIR}/../beast/include)<code>. </code>"}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1509600008, "post_id": 47063988, "comment_id": 81084112, "body": "Whats your Boost and your CMake version?"}, {"owner": {"reputation": 196, "user_id": 2187493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2c46778500ac128b806d8399ba45b6e?s=128&d=identicon&r=PG", "display_name": "Savino", "link": "https://stackoverflow.com/users/2187493/savino"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1509607575, "post_id": 47063988, "comment_id": 81087324, "body": "@Tsyvarev I tried absolute path. Same problem."}, {"owner": {"reputation": 196, "user_id": 2187493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2c46778500ac128b806d8399ba45b6e?s=128&d=identicon&r=PG", "display_name": "Savino", "link": "https://stackoverflow.com/users/2187493/savino"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1509607654, "post_id": 47063988, "comment_id": 81087373, "body": "@usr1234567 Boost 1.63.0. CMake 3.8.2"}], "answers": [{"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 1, "last_activity_date": 1535994926, "last_edit_date": 1535994926, "creation_date": 1509655575, "answer_id": 47084349, "question_id": 47063988, "link": "https://stackoverflow.com/questions/47063988/cmake-include-boost-beast-header-only/47084349#47084349", "title": "CMake include Boost Beast (header only)", "body": "<p>I would suggest creating <a href=\"https://cmake.org/cmake/help/v3.0/manual/cmake-buildsystem.7.html#interface-libraries\" rel=\"nofollow noreferrer\">an interface library</a> for Beast which you can then add as a dependency to your library.</p>\n\n<p><strong>Create interface library for Beast:</strong></p>\n\n<pre><code>add_library(boost_beast INTERFACE)\n\ntarget_include_directories(boost_beast\n                           SYSTEM\n                           PUBLIC\n                           \"${CMAKE_CURRENT_LIST_DIR}/../beast/include\")\n</code></pre>\n\n<p>Note in the call to <a href=\"https://cmake.org/cmake/help/v3.0/command/target_include_directories.html\" rel=\"nofollow noreferrer\"><code>target_include_directories</code></a> I've specified:</p>\n\n<ul>\n<li><code>SYSTEM</code>: tells the compiler the directories are meant as system include directories</li>\n<li><code>PUBLIC</code>: tells the compiler the directories should be made visible to both the target itself (<code>boost_beast</code>) and the users of the target (your library)</li>\n</ul>\n\n<p><strong>Add Beast as a dependency to your library:</strong></p>\n\n<p>Then you can add <code>boost_beast</code> as a dependency to your library:</p>\n\n<pre><code>add_library(my_lib ${SOURCE_FILES})\n\ntarget_link_libraries(my_lib boost_beast)\n</code></pre>\n\n<p>At this point, <code>my_lib</code> will transitively have the Boost Beast include directory available to it.</p>\n"}], "owner": {"reputation": 196, "user_id": 2187493, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2c46778500ac128b806d8399ba45b6e?s=128&d=identicon&r=PG", "display_name": "Savino", "link": "https://stackoverflow.com/users/2187493/savino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2359, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535994926, "creation_date": 1509571839, "last_edit_date": 1535994719, "question_id": 47063988, "link": "https://stackoverflow.com/questions/47063988/cmake-include-boost-beast-header-only", "title": "CMake include Boost Beast (header only)", "body": "<p>I want to include <a href=\"https://github.com/boostorg/beast\" rel=\"nofollow noreferrer\">Boost Beast</a> into my project. It's a header-only library. I have cloned the Beast repository into the same directory as my project.</p>\n\n<p>I am using the following in CMake to include the header:</p>\n\n<pre><code>set(BEAST_INCLUDE_DIR ../beast/include)\n\ninclude_directories(${BEAST_INCLUDE_DIR})\n\nset(SOURCE_FILES ${BEAST_INCLUDE_DIR}/boost/beast.hpp ...)\n\nadd_library(my_lib ${SOURCE_FILES})\n</code></pre>\n\n<p>I'm including using the following (alongside other Boost includes):</p>\n\n<pre><code>#include &lt;boost/beast.hpp&gt;\n#include &lt;boost/asio/io_service.hpp&gt;\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<blockquote>\n  <p>fatal error: boost/beast.hpp: No such file or directory</p>\n</blockquote>\n\n<p>Do I need to do something special to include another \"boost\" directory?\nThe path of the header is:</p>\n\n<pre><code>beast/include/boost/beast.hpp\n</code></pre>\n"}, {"tags": ["c++", "hashtable", "singly-linked-list"], "comments": [{"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "edited": false, "score": 1, "creation_date": 1509572422, "post_id": 47063986, "comment_id": 81076417, "body": "You don&#39;t need to add it to the last location of the link, just add it before the node that has a bigger value than it. You can use a comparison function or lambda for this instead of less or bigger than operator. You still need to allocate new HashNode for it and set the next pointer value of the node before to it and set the next value of it to the next node right after. one to the node after."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "reply_to_user": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "edited": false, "score": 0, "creation_date": 1509573253, "post_id": 47063986, "comment_id": 81076785, "body": "What would I set the new HashNode i have to create to equal?"}, {"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "edited": false, "score": 0, "creation_date": 1509578097, "post_id": 47063986, "comment_id": 81078420, "body": "the key you are adding"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509575540, "post_id": 47064451, "comment_id": 81077621, "body": "In the last link of code, where you have <code>entry-&gt;prev</code>, I have no <code>prev</code> in hash node since I&#39;m using  a singly linked list."}, {"owner": {"reputation": 8150, "user_id": 406009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3au2T.jpg?s=128&g=1", "display_name": "Lalaland", "link": "https://stackoverflow.com/users/406009/lalaland"}, "reply_to_user": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509576302, "post_id": 47064451, "comment_id": 81077858, "body": "Oops, my mistake."}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509576756, "post_id": 47064451, "comment_id": 81077999, "body": "awesome, that works perfectly. I see now how it sets the next  of the new entry to the entry that is currently there already. Thanks for the help!"}, {"owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "edited": false, "score": 0, "creation_date": 1509577027, "post_id": 47064451, "comment_id": 81078090, "body": "Okay now that I have correctly implemented the insert, it is now not deleting correctly"}], "tags": [], "owner": {"reputation": 8150, "user_id": 406009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3au2T.jpg?s=128&g=1", "display_name": "Lalaland", "link": "https://stackoverflow.com/users/406009/lalaland"}, "is_accepted": true, "score": 0, "last_activity_date": 1509576319, "last_edit_date": 1509576319, "creation_date": 1509574048, "answer_id": 47064451, "question_id": 47063986, "link": "https://stackoverflow.com/questions/47063986/creating-a-hash-map-with-sorted-linked-list-in-each-slot/47064451#47064451", "title": "Creating a hash map with sorted linked list in each slot", "body": "<p>The main trick for keeping each slot sorted is to insert in the correct location, which in this case would be right before the first larger value.</p>\n\n<p>In your code, you enforce inserting at the end of the list with the following while loop.</p>\n\n<pre><code>while(entry != NULL){\n    prev = entry;\n    entry = entry-&gt;next;\n}\n</code></pre>\n\n<p>Instead, we want to modify this condition so that instead of simply looking for the end of the list (entry == NULL), we also look for a larger value.</p>\n\n<pre><code>while(entry != NULL &amp;&amp; entry-&gt;value &lt; value_to_insert){\n    prev = entry;\n    entry = entry-&gt;next;\n}\n</code></pre>\n\n<p>This modified for loop correctly pinpoints the correct place to put your new entry, right between <code>prev</code> and <code>entry</code>.</p>\n\n<p>Another issue in this case is that your insertion logic has a couple of bugs in it.</p>\n\n<p>This is your insertion logic:</p>\n\n<pre><code>if(entry == NULL){\n    entry = new HashNode(key);\n    if(prev == NULL){\n        hTable[hashLoc] = entry;\n    }\n    else{\n\n        prev-&gt;next = entry;\n    }\n}\nelse{\n    entry-&gt;value = key;\n}\n</code></pre>\n\n<p>The main issue is that the logic is invalid for the else branch of the <code>if(entry==NULL)</code> if statement.</p>\n\n<p>In that case, you need to create a new entry, fix the prev pointers and also fix the next pointers.</p>\n\n<p>It would actually be simpler to rewrite this to the following:</p>\n\n<pre><code>new_entry = new HashNode(key);\nnew_entry-&gt;value = value_to_insert;\nif(prev == NULL){\n    hTable[hashLoc] = new_entry;\n}\nelse{\n    prev-&gt;next = new_entry;\n}\n\nnew_entry-&gt;next = entry;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7632112, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/34bc7a6872b5876d204ce9e07db523e7?s=128&d=identicon&r=PG&f=1", "display_name": "zsloan112", "link": "https://stackoverflow.com/users/7632112/zsloan112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 47064451, "answer_count": 1, "score": 0, "last_activity_date": 1509576319, "creation_date": 1509571834, "question_id": 47063986, "link": "https://stackoverflow.com/questions/47063986/creating-a-hash-map-with-sorted-linked-list-in-each-slot", "title": "Creating a hash map with sorted linked list in each slot", "body": "<p>I have successfully made a hash map with chaining and singly linked list in each slot. When I use insert it sends the new node to the back of each linked list, however I need to have each slot be sorted when I insert a new node. How can I edit the following <code>insert</code> function so that instead of having to sort each slot afterwards it will insert it in the correct spot to begin with?</p>\n\n<pre><code>void hashInsert(int key){\n    int hashLoc = h(key);\n    HashNode* prev = NULL;\n    HashNode* entry = hTable[hashLoc];\n    while(entry != NULL){\n        prev = entry;\n        entry = entry-&gt;next;\n    }\n    if(entry == NULL){\n        entry = new HashNode(key);\n        if(prev == NULL){\n            hTable[hashLoc] = entry;\n        }\n        else{\n\n            prev-&gt;next = entry;\n        }\n    }\n    else{\n        entry-&gt;value = key;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "callback", "c++-cli"], "comments": [{"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 1, "creation_date": 1509571654, "post_id": 47063922, "comment_id": 81076056, "body": "Most likely <a href=\"https://msdn.microsoft.com/en-us/library/c320cx3h.aspx\" rel=\"nofollow noreferrer\">a delegate</a> ?"}, {"owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1509575241, "post_id": 47063922, "comment_id": 81077513, "body": "Thanks! That seems to be the way to go, but I can&#39;t find a way to use them across multiple files. If I try to declare the delegate in both header files, I get a redefinition error (duh). If I declare the delegate in only one of the files, I get a unknown identifier error in the other file. And there does not seem to be a way to forward-declare the delegate in that file."}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 1, "creation_date": 1509578205, "post_id": 47063922, "comment_id": 81078459, "body": "<a href=\"https://stackoverflow.com/a/1147523/7034621\">This answer</a> suggests declaring delegate in stdafx.h"}, {"owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1509715610, "post_id": 47063922, "comment_id": 81143287, "body": "I found this earlier, but didn&#39;t pursue it. Now I&#39;ve got it working though. Thanks again! I&#39;ll write up a short answer for anyone else looking."}], "answers": [{"comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1509717459, "post_id": 47097380, "comment_id": 81144562, "body": "You are re-inventing the BackgroundWorker class.  Nobody can tell if that was intentional, but it doesn&#39;t exactly look like it."}, {"owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1509717712, "post_id": 47097380, "comment_id": 81144757, "body": "I&#39;ve never used a BackgroundWorker before. I&#39;ll read into it, thanks!"}, {"owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1510302775, "post_id": 47097380, "comment_id": 81386481, "body": "Update: a BackgroundWorker was exactly what I needed. Thanks again!"}], "tags": [], "owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "is_accepted": true, "score": 0, "last_activity_date": 1510302952, "last_edit_date": 1510302952, "creation_date": 1509716999, "answer_id": 47097380, "question_id": 47063922, "link": "https://stackoverflow.com/questions/47063922/passing-callback-function-to-thread-in-c-cli/47097380#47097380", "title": "Passing callback function to thread in C++/CLI", "body": "<p>I've got it working. However, as pointed out by @Hans Passant, this is pretty much mimicking the behavior of a <code>BackgroundWorker</code>. Anyway, below is the answer to the top question, without using a <code>BackgroundWorker</code>. It feels not very clean, though.</p>\n\n<hr>\n\n<p>As pointed by @orhtej2, <a href=\"https://msdn.microsoft.com/en-us/library/c320cx3h.aspx\" rel=\"nofollow noreferrer\">a <code>delegate</code> is what's needed</a>. For both of the above header files to recognize it, I had to declare the delegate in <code>stdafx.h</code> (as suggested <a href=\"https://stackoverflow.com/questions/1005892/how-do-i-forward-declare-a-delegate-in-c-cli/1147523#1147523\">here</a>), for example like this:</p>\n\n<pre><code>delegate void aFancyDelegate(System::String^);\n</code></pre>\n\n<p>I then passed such a delegate to the constructor of OtherClass, so the object initialization line in <code>MyForm</code> changed from</p>\n\n<pre><code>o = gcnew OtherClass;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>aFancyDelegate^ del = gcnew aFancyDelegate(this, &amp;MyForm::callbackFunction);\no = gcnew OtherClass(del);\n</code></pre>\n\n<p>.</p>\n\n<p>Lastly, to be able to update UI elements from <code>callbackFunction</code>, even if it was called from another thread, it had to include something like this, as suggested in <a href=\"https://stackoverflow.com/a/18116993/1798629\">this answer</a>:</p>\n\n<pre><code>void callbackFunction(String^ msg) {\n\n            //Make sure were editing from the right thread\n            if (this-&gt;txtBox_Log-&gt;InvokeRequired) {\n                aFancyDelegate^ d =\n                    gcnew aFancyDelegate(this, &amp;MyForm::callbackFunction);\n                this-&gt;Invoke(d, gcnew array&lt;Object^&gt; { msg });\n                return;\n            }\n\n            //Update the UI and stuff here.\n            //...\n        }\n</code></pre>\n"}], "owner": {"reputation": 180, "user_id": 1798629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f3f1f8f86d276f9981e8e4132e00f1?s=128&d=identicon&r=PG", "display_name": "jmb", "link": "https://stackoverflow.com/users/1798629/jmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 47097380, "answer_count": 1, "score": 0, "last_activity_date": 1536075894, "creation_date": 1509571559, "last_edit_date": 1536075894, "question_id": 47063922, "link": "https://stackoverflow.com/questions/47063922/passing-callback-function-to-thread-in-c-cli", "title": "Passing callback function to thread in C++/CLI", "body": "<p>Some context: I know basic C++. For the first time, I'm trying to create a GUI application in Visual Studio using C++/CLI. However, I can't find much answers online about the latter.</p>\n\n<p>I've got two classes: <code>MyForm</code>, the main class corresponding to a Windows Form, and <code>OtherClass</code>. <code>MyForm</code>has an object of type <code>OtherClass</code> as a member. A function of <code>MyForm</code>, in this example <code>myButton_Click</code>, initializes this object and calls one of its function in a thread:</p>\n\n<pre><code>using namespace System::Threading;\n\nref class MyForm;\nref class OtherClass;\n\npublic ref class MyForm : public System::Windows::Forms::Form {\n    public:\n\n    //...\n\n    private:\n        OtherClass^ o;\n\n        System::Void myButton_Click(System::Object^  sender, System::EventArgs^  e) {\n\n             //When the button is clicked, start a thread with o-&gt;foo\n             o = gcnew OtherClass;\n             Thread^ testThread = gcnew Thread(gcnew ThreadStart(o, &amp;OtherClass::foo));\n             newThread-&gt;Start();\n\n        }\n\n\n\n};\n</code></pre>\n\n<hr>\n\n<pre><code>ref class OtherClass {\n    public:\n        void foo() {\n            //Do some work;\n        }\n};\n</code></pre>\n\n<p>This seems to be working, so far. What I want is to <strong>pass some kind of callback function from <code>MyClass</code> to <code>o-&gt;foo</code></strong> to update the UI with values from <code>foo</code> while it's running.</p>\n\n<p>What's the best way to do this? Simply passing function pointers doesn't work because of CLI.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1509571514, "post_id": 47063713, "comment_id": 81075990, "body": "The first thing is that you need to use <code>wchar_t</code> instead of <code>char</code> everywhere and corresponding wide variants of functions. Another thing is that you never call <code>::GetLastError</code> to check why something fails and just silently ignore."}, {"owner": {"reputation": 69, "user_id": 4411242, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72b1a81cf351f077ffa57b78b7b3f3f2?s=128&d=identicon&r=PG", "display_name": "PSXGamerPro1", "link": "https://stackoverflow.com/users/4411242/psxgamerpro1"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1509585240, "post_id": 47063713, "comment_id": 81080380, "body": "It seem by looking that <code>EnumProcessModules</code> returns <code>ERROR_INVALID_HANDLE</code> despite the handle being cached in the <code>setup</code> struct."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 4411242, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72b1a81cf351f077ffa57b78b7b3f3f2?s=128&d=identicon&r=PG", "display_name": "PSXGamerPro1", "link": "https://stackoverflow.com/users/4411242/psxgamerpro1"}, "is_accepted": true, "score": 0, "last_activity_date": 1509808084, "creation_date": 1509808084, "answer_id": 47112127, "question_id": 47063713, "link": "https://stackoverflow.com/questions/47063713/c-getmodulefilename-does-not-return-correct-strings/47112127#47112127", "title": "C++ GetModuleFileName does not return correct strings", "body": "<p>The fix was to definately use the Unicode versions and to make the whole function use wide unicode strings. And the reason for this is because of a struct (related to PEB) that is internal and undocumented to ntdll.dll.</p>\n\n<p>So, basically changing everything to the GetModuleBaseNameW function because of the fact I was going to basename them anyway later, the wstring, noticing a second loop using <code>i</code> causing an overwrite of the <code>i</code> on the outer for loop and removing it, and adding checks on GetLastError for when the Handle is invalidated and toreturn the error code to the end user to handle cleanup.</p>\n\n<p>The result is then this code:</p>\n\n<pre><code>void _scan_dll_data(VBTrpSetup_t &amp;setup, VBTrp_DetectData_t &amp;_ret, VBTrp_InjectData_t &amp;_dlllists) {\n    BOOL _detected_injected_dll = FALSE;\n    std::vector&lt;std::wstring&gt; _ModuleContainer;\n    HANDLE hProcess;\n    std::vector&lt;HMODULE&gt; hMods;\n    DWORD cbNeeded;\n    hProcess = GetCurrentProcess();\n    _ret.int_value = 0;\n    if (EnumProcessModulesEx(hProcess, hMods.data(), setup.NumOfModules, &amp;cbNeeded, LIST_MODULES_ALL)) {\n        for (unsigned int i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++) {\n            wchar_t *szModName = L'\\x0';\n            std::wstring _ModuleName;\n            if (GetModuleBaseNameW(hProcess, hMods[i], reinterpret_cast&lt;LPWSTR&gt;(szModName), MAX_PATH)) {\n                _ModuleName = szModName;\n                // item must not be in the ModuleExcludeList!!!\n                if (!_dlllists.ModuleExcludeList[i].compare(_ModuleName)) {\n                    _ModuleContainer.push_back(_ModuleName);\n                }\n            } else {\n                _ret.error_code = GetLastError();\n            }\n        }\n    } else {\n        _ret.error_code = GetLastError();\n    }\n    if (_ret.error_code != ERROR_INVALID_HANDLE) {\n        for (unsigned int j = 0; j &lt; _dlllists.ModuleList.size(); j++) {\n            if (_dlllists.ModuleList[j] != _ModuleContainer[j]) {\n                _detected_injected_dll = TRUE;\n                _ret.int_value = -1;\n                _ret.DLLName = (LPWSTR)_ModuleContainer[j].c_str();\n                // to avoid overwriting the first one.\n                break;\n            }\n        }\n        _ret.value = _detected_injected_dll;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4411242, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/72b1a81cf351f077ffa57b78b7b3f3f2?s=128&d=identicon&r=PG", "display_name": "PSXGamerPro1", "link": "https://stackoverflow.com/users/4411242/psxgamerpro1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 47112127, "answer_count": 1, "score": 0, "last_activity_date": 1509808084, "creation_date": 1509570624, "question_id": 47063713, "link": "https://stackoverflow.com/questions/47063713/c-getmodulefilename-does-not-return-correct-strings", "title": "C++ GetModuleFileName does not return correct strings", "body": "<p>Sometimes GetModuleFileName returns the correct string, however 99% of the time currently with current code I am using the string returns as <code>\u00c0\u00d9\u00e1\u00f8\u00db\u00e1ws\\system32\\HID.DLL</code> instead of <code>E:\\Windows\\system32\\HID.DLL</code> that should be the correct value. With this in mind I can't compare the string with an list of all modules that should be loaded to see if that string is in the list, if not someone injected that DLL.</p>\n\n<p>This code below might not be the best, however it is the code I attempted to use for this. I did try all sorts of code changes to try to figure it out like not using TCHAR and investigating the returns from <code>EnumProcessModules</code>.</p>\n\n<pre><code>void _scan_dll_data(VBTrpSetup_t &amp;setup, VBTrp_DetectData_t &amp;_ret, VBTrp_InjectData_t &amp;_dlllists) {\n    bool _detected_injected_dll = false;\n    std::vector&lt;std::string&gt; _ModuleContainer;\n    std::string _ModuleName;\n    HMODULE hMods[1024];  /* Hopefully enough for this. */\n    DWORD cbNeeded;\n    if (EnumProcessModules(setup.GameProcHandle, hMods, sizeof(hMods), &amp;cbNeeded)) {\n        for (unsigned int i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++ ) {\n            char szModName[MAX_PATH];\n            if (GetModuleFileName(hMods[i], szModName, sizeof(szModName) / sizeof(char))) {\n                _ModuleName = szModName;\n                for (unsigned int i = 0; i &lt; _dlllists.ModuleExcludeList.size(); i++) {\n                    // item must not be in the ModuleExcludeList!!!\n                    if (!_dlllists.ModuleExcludeList[i].compare(_ModuleName)) {\n                        _ModuleContainer.push_back(_ModuleName);\n                    }\n                }\n            }\n        }\n    }\n    if (_dlllists.ModuleList != _ModuleContainer) {\n        _detected_injected_dll = true;\n        _ret.DLLName = reinterpret_cast&lt;LPCSTR&gt;(_ModuleName.c_str());\n    }\n    if (_detected_injected_dll) {\n        _ret.value = TRUE;\n    }\n    else {\n        _ret.value = FALSE;\n    }\n    if (_ret.value == TRUE) {\n        _ret.int_value = -1;\n    } else {\n        _ret.int_value = NULL;\n    }\n}\n</code></pre>\n\n<p>Hopefully the answer is something simple that I must have missed. I did do some parts of this according to MSDN examples. Maybe those examples was wrong. I am not so sure.\nDoes anyone know how to fix this string issue it returns?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1509570648, "post_id": 47063699, "comment_id": 81075624, "body": "<a href=\"https://stackoverflow.com/q/4757565/1896169\">stackoverflow.com/q/4757565/1896169</a>"}, {"owner": {"reputation": 792, "user_id": 3183610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2b0aff981925dc8c789fa9cfe1134?s=128&d=identicon&r=PG&f=1", "display_name": "m. c.", "link": "https://stackoverflow.com/users/3183610/m-c"}, "edited": false, "score": 1, "creation_date": 1509571606, "post_id": 47063699, "comment_id": 81076031, "body": "forward declaration, to avoid circular loop in header files."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 792, "user_id": 3183610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2b0aff981925dc8c789fa9cfe1134?s=128&d=identicon&r=PG&f=1", "display_name": "m. c.", "link": "https://stackoverflow.com/users/3183610/m-c"}, "edited": false, "score": 1, "creation_date": 1509572736, "post_id": 47063699, "comment_id": 81076559, "body": "@m.c. ... and to reduce the amount of code the compiler has to parse when compiling files which <code>#include</code> the header containing the forward decl."}, {"owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "edited": false, "score": 0, "creation_date": 1509573306, "post_id": 47063699, "comment_id": 81076809, "body": "Lookup Forward declaration."}, {"owner": {"reputation": 13, "user_id": 8609911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c38438d2911573cfd5bc3fc855a46c?s=128&d=identicon&r=PG&f=1", "display_name": "link Go", "link": "https://stackoverflow.com/users/8609911/link-go"}, "reply_to_user": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "edited": false, "score": 0, "creation_date": 1509615221, "post_id": 47063699, "comment_id": 81091668, "body": "@Victor Ok.. I knew this thing about function, but it was new to me that it can be done generaly. just to be clear - the Qt guys aclocated a new memory for the <code>QPushButton</code> new object, while they could put it in the stack as a usual variable, without loosing any system abilities?"}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1509639862, "post_id": 47063699, "comment_id": 81109151, "body": "<code>they could put it in the stack</code> Putting m_button inside Window class means to have the same memory allocation, as Window object(s), which is not necessarily on the stack. In fact, the only overhead is an extra call of a memory allocation routine (QPushButton&#39;s constructor must be called anyway), which is a common thing in C++. But the gain could be significant in medium or large project development: if class A is used in Class B, which is used in class C, then changing A won&#39;t require recompiling C. So it&#39;s a good habit, though it&#39;s not so important in this particular example."}], "owner": {"reputation": 13, "user_id": 8609911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c38438d2911573cfd5bc3fc855a46c?s=128&d=identicon&r=PG&f=1", "display_name": "link Go", "link": "https://stackoverflow.com/users/8609911/link-go"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1509572748, "answer_count": 0, "score": 0, "last_activity_date": 1509572809, "creation_date": 1509570546, "last_edit_date": 1509572354, "question_id": 47063699, "link": "https://stackoverflow.com/questions/47063699/why-does-the-qt-tutorial-build-the-header-class-like-this", "closed_reason": "Duplicate", "title": "Why does the Qt tutorial build the header class like this?", "body": "<p>I am learning how to use Qt. I am in the middle of the beginner's tutorials, and I ran into a problem.</p>\n\n<p>I have this class here:</p>\n\n<pre><code>#ifndef WINDOW_H\n#define WINDOW_H\n\n#include &lt;QWidget&gt;\n\nclass QPushButton;\nclass Window : public QWidget\n{\n    public:\n        explicit Window(QWidget *parent = 0);\n\n    private:\n        QPushButton *m_button;\n};\n\n#endif // WINDOW_H\n</code></pre>\n\n<p>I know the purpose of any row but this one:</p>\n\n<pre><code>class QPushButton;\n</code></pre>\n\n<p>In my all years I learned cpp, I never encountered this such a thing.\nI know that when I want to declare a class, I have to do this with\nthis basic template:</p>\n\n<pre><code>class ClassName:\n{\n    public:\n        //Optional public.\n    private:\n        //Optional private.\n}\n</code></pre>\n\n<p>But one row declaration?</p>\n\n<p>I want to ask more then that:</p>\n\n<ul>\n<li>Why do the Qt guys work like this?</li>\n<li>Why don't they <code>#include\"</code> the <code>QPushButton</code> in the header?</li>\n</ul>\n\n<p>They included this button class within the implementation. Why?:</p>\n\n<pre><code>#include \"window.h\"\n#include &lt;QPushButton&gt;\n\nWindow::Window(QWidget *parent) :\n QWidget(parent)\n{\n    // Set size of the window\n    setFixedSize(100, 50);\n\n    // Create and position the button\n    m_button = new QPushButton(\"Hello World\", this);\n    m_button-&gt;setGeometry(10, 10, 80, 30);\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "game-engine"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1509598230, "post_id": 47063650, "comment_id": 81083559, "body": "Can you post a screenshot with expected result along with your current output?"}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1509598276, "post_id": 47063650, "comment_id": 81083570, "body": "BTW, why are you using D3DX math library? You should use DirectXMath library instead"}, {"owner": {"reputation": 116, "user_id": 6397713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e48af9f7179e1593066bef70cacbb05?s=128&d=identicon&r=PG&f=1", "display_name": "aPlutonicCoder", "link": "https://stackoverflow.com/users/6397713/aplutoniccoder"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1509613735, "post_id": 47063650, "comment_id": 81090720, "body": "I am using d3dx10math.h header. Also added a screenshot."}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1509681047, "post_id": 47063650, "comment_id": 81125947, "body": "Looks like there&#39;s an issue with your texture coordinates"}, {"owner": {"reputation": 398, "user_id": 7175690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aManf.jpg?s=128&g=1", "display_name": "ErnieDingo", "link": "https://stackoverflow.com/users/7175690/erniedingo"}, "edited": false, "score": 0, "creation_date": 1517174691, "post_id": 47063650, "comment_id": 83976048, "body": "revisiting this, manually set the alignments to 16 and 32 on yoru texture and normal.  I usually go the full RGBA32 bit format on the registers here also, just so im explcitly using the right alignment.  You aren&#39;t compelled in HLSL code to use all 4 floats, just helps.  This should then ensure your byte alignment in your normal and texture registers is correct.  Im guessing from what I can see that your normal buffer is aligning on a 8 byte boundary (not a 16 byte boundary)."}], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 7175690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aManf.jpg?s=128&g=1", "display_name": "ErnieDingo", "link": "https://stackoverflow.com/users/7175690/erniedingo"}, "is_accepted": false, "score": 1, "last_activity_date": 1516312920, "creation_date": 1516312920, "answer_id": 48331048, "question_id": 47063650, "link": "https://stackoverflow.com/questions/47063650/c-directx11-texture-on-terrain-not-rendering-properly/48331048#48331048", "title": "C++ DirectX11 Texture On Terrain Not Rendering Properly", "body": "<p>Im looking at your screenshot, and your not only is your texture not rendering correctly, but your normals aren't either otherwise you would have a diffuse at least shading it properly.  I would summise, that although your stride is correct, what you are pulling out of the buffer for UV and Normal is not aligned properly.   My first thoughts.</p>\n"}], "owner": {"reputation": 116, "user_id": 6397713, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e48af9f7179e1593066bef70cacbb05?s=128&d=identicon&r=PG&f=1", "display_name": "aPlutonicCoder", "link": "https://stackoverflow.com/users/6397713/aplutoniccoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516312920, "creation_date": 1509570315, "last_edit_date": 1509918643, "question_id": 47063650, "link": "https://stackoverflow.com/questions/47063650/c-directx11-texture-on-terrain-not-rendering-properly", "title": "C++ DirectX11 Texture On Terrain Not Rendering Properly", "body": "<p>I am developing a game engine using the <a href=\"http://www.rastertek.com/\" rel=\"nofollow noreferrer\">Rastertek</a> tutorials.\nMy problem is that the terrain texture isn't loading properly.</p>\n\n<p>Pixel Shader:</p>\n\n<pre><code>   Texture2D shaderTexture;\nSamplerState SampleType;\n\ncbuffer LightBuffer\n{\n    float4 ambientColor;\n    float4 diffuseColor;\n    float3 lightDirection;\n    float padding;\n};\n\n\n//////////////\n// TYPEDEFS //\n//////////////\nstruct PixelInputType\n{\n    float4 position : SV_POSITION;\n    float2 tex : TEXCOORD0;\n    float3 normal : NORMAL;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Pixel Shader\n////////////////////////////////////////////////////////////////////////////////\nfloat4 TerrainPixelShader(PixelInputType input) : SV_TARGET\n{\n    float4 textureColor;\n    float3 lightDir;\n    float lightIntensity;\n    float4 color;\n\n\n    // Sample the pixel color from the texture using the sampler at this texture coordinate location.\n    textureColor = shaderTexture.Sample(SampleType, input.tex);\n\n    // Set the default output color to the ambient light value for all pixels.\n    color = ambientColor;\n\n    // Invert the light direction for calculations.\n    lightDir = -lightDirection;\n\n    // Calculate the amount of light on this pixel.\n    lightIntensity = saturate(dot(input.normal, lightDir));\n\n    if(lightIntensity &gt; 0.0f)\n    {\n        // Determine the final diffuse color based on the diffuse color and the amount of light intensity.\n        color += (diffuseColor * lightIntensity);\n    }\n\n    // Saturate the final light color.\n    color = saturate(color);\n\n    // Multiply the texture pixel and the final light color to get the result.\n    color = color * textureColor;\n</code></pre>\n\n<p>Vertex Shader:</p>\n\n<pre><code>cbuffer MatrixBuffer\n{\n    matrix worldMatrix;\n    matrix viewMatrix;\n    matrix projectionMatrix;\n};\n\n\n//////////////\n// TYPEDEFS //\n//////////////\nstruct VertexInputType\n{\n    float4 position : POSITION;\n    float2 tex : TEXCOORD0;\n    float3 normal : NORMAL;\n};\n\nstruct PixelInputType\n{\n    float4 position : SV_POSITION;\n    float2 tex : TEXCOORD0;\n    float3 normal : NORMAL;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Vertex Shader\n////////////////////////////////////////////////////////////////////////////////\nPixelInputType TerrainVertexShader(VertexInputType input)\n{\n    PixelInputType output;\n\n\n    // Change the position vector to be 4 units for proper matrix calculations.\n    input.position.w = 1.0f;\n\n    // Calculate the position of the vertex against the world, view, and projection matrices.\n    output.position = mul(input.position, worldMatrix);\n    output.position = mul(output.position, viewMatrix);\n    output.position = mul(output.position, projectionMatrix);\n\n    // Store the texture coordinates for the pixel shader.\n    output.tex = input.tex;\n\n    // Calculate the normal vector against the world matrix only.\n    output.normal = mul(input.normal, (float3x3)worldMatrix);\n\n    // Normalize the normal vector.\n    output.normal = normalize(output.normal);\n\n    return output;\n}\n</code></pre>\n\n<p>Terrain Shader Class:</p>\n\n<pre><code>    bool TerrainShaderClass::SetShaderParameters(ID3D11DeviceContext* deviceContext, D3DXMATRIX world, D3DXMATRIX view,\n        D3DXMATRIX projection, D3DXVECTOR4 ambientColor, D3DXVECTOR4 diffuseColor, D3DXVECTOR3 lightDirection,\n        ID3D11ShaderResourceView* texture)\n    {\n        HRESULT result;\n        D3D11_MAPPED_SUBRESOURCE mappedResource;\n        unsigned int bufferNumber;\n        MatrixBufferType* matrixData;\n        LightBufferType* lightData;\n\n        D3DXMatrixTranspose(&amp;world, &amp;world);\n        D3DXMatrixTranspose(&amp;view, &amp;view);\n        D3DXMatrixTranspose(&amp;projection, &amp;projection);\n\n        result = deviceContext-&gt;Map(m_matrixBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &amp;mappedResource);\n        if (FAILED(result))\n        {\n            return false;\n        }\n\n        matrixData = (MatrixBufferType*)mappedResource.pData;\n        matrixData-&gt;world = world;\n        matrixData-&gt;view = view;\n        matrixData-&gt;projection = projection;\n\n        deviceContext-&gt;Unmap(m_matrixBuffer, 0);\n\n        bufferNumber = 0;\n\n        deviceContext-&gt;VSSetConstantBuffers(bufferNumber, 1, &amp;m_matrixBuffer);\n\n        deviceContext-&gt;Map(m_lightBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &amp;mappedResource);\n\n        lightData = (LightBufferType*)mappedResource.pData;\n        lightData-&gt;ambientColor = ambientColor;\n        lightData-&gt;diffuseColor = diffuseColor;\n        lightData-&gt;lightDirection = lightDirection;\n        lightData-&gt;padding = 0.0f;\n\n        deviceContext-&gt;Unmap(m_lightBuffer, 0);\n\n        bufferNumber = 0;\n\n        deviceContext-&gt;PSSetConstantBuffers(bufferNumber, 1, &amp;m_lightBuffer);\n        deviceContext-&gt;PSSetShaderResources(0, 1, &amp;texture);\n\n        return true;\n    }\n\n    void TerrainShaderClass::OutputShaderErrorMessage(ID3D10Blob* errorMessage, HWND hwnd, LPCSTR shaderFileName)\n    {\n        char* compileErrors = (char*)(errorMessage-&gt;GetBufferPointer());\n        unsigned long bufferSize = errorMessage-&gt;GetBufferSize();\n        ofstream fout;\n\n        fout.open(\"shader-error.txt\");\n\n        for (unsigned long i = 0; i &lt; bufferSize; i++)\n        {\n            fout &lt;&lt; compileErrors[i];\n        }\n\n        fout.close();\n\n        errorMessage-&gt;Release();\n        errorMessage = nullptr;\n\n        MessageBox(hwnd, \"Error compiling shader.  Check shader-error.txt for message.\", shaderFileName, MB_OK);\n    }\n\n    void TerrainShaderClass::RenderShader(ID3D11DeviceContext* deviceContext, int indexCount)\n    {\n        deviceContext-&gt;IASetInputLayout(m_layout);\n        deviceContext-&gt;VSSetShader(m_vertexShader, NULL, 0);\n        deviceContext-&gt;PSSetShader(m_pixelShader, NULL, 0);\n        deviceContext-&gt;PSSetSamplers(0, 1, &amp;m_samplerState);\n        deviceContext-&gt;DrawIndexed(indexCount, 0, 0);\n    }\n\nbool TerrainShaderClass::InitializeShader(ID3D11Device* device, HWND hwnd, LPCSTR vsFileName, LPCSTR psFileName)\n{\n    HRESULT result;\n    ID3D10Blob* errorMessage = nullptr;\n    ID3D10Blob* vertexShaderBuffer = nullptr;\n    ID3D10Blob* pixelShaderBuffer = nullptr;\n    D3D11_INPUT_ELEMENT_DESC polygonLayout[3];\n    unsigned int numElements;\n    D3D11_SAMPLER_DESC samplerDesc;\n    D3D11_BUFFER_DESC matrixBufferDesc;\n    D3D11_BUFFER_DESC lightBufferDesc;\n\n    result = D3DX11CompileFromFile(vsFileName, NULL, NULL, \"TerrainVertexShader\", \"vs_5_0\", D3D10_SHADER_ENABLE_STRICTNESS,\n        0, NULL, &amp;vertexShaderBuffer, &amp;errorMessage, NULL);\n    if (FAILED(result))\n    {\n        if (errorMessage)\n        {\n            OutputShaderErrorMessage(errorMessage, hwnd, vsFileName);\n        }\n        else\n        {\n            MessageBox(hwnd, \"Missing Shader File\", vsFileName, MB_OK);\n        }\n\n        return false;\n    }\n\n    result = D3DX11CompileFromFile(psFileName, NULL, NULL, \"TerrainPixelShader\", \"ps_5_0\", D3D10_SHADER_ENABLE_STRICTNESS,\n        0, NULL, &amp;pixelShaderBuffer, &amp;errorMessage, NULL);\n    if (FAILED(result))\n    {\n        if (errorMessage)\n        {\n            OutputShaderErrorMessage(errorMessage, hwnd, psFileName);\n        }\n        else\n        {\n            MessageBox(hwnd, \"Missing Shader File\", psFileName, MB_OK);\n        }\n\n        return false;\n    }\n\n    result = device-&gt;CreateVertexShader(vertexShaderBuffer-&gt;GetBufferPointer(), vertexShaderBuffer-&gt;GetBufferSize(), NULL, &amp;m_vertexShader);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    result = device-&gt;CreatePixelShader(pixelShaderBuffer-&gt;GetBufferPointer(), pixelShaderBuffer-&gt;GetBufferSize(), NULL, &amp;m_pixelShader);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    polygonLayout[0].SemanticName = \"POSITION\";\n    polygonLayout[0].SemanticIndex = 0;\n    polygonLayout[0].Format = DXGI_FORMAT_R32G32B32_FLOAT;\n    polygonLayout[0].InputSlot = 0;\n    polygonLayout[0].AlignedByteOffset = 0;\n    polygonLayout[0].InputSlotClass = D3D11_INPUT_PER_VERTEX_DATA;\n    polygonLayout[0].InstanceDataStepRate = 0;\n\n    polygonLayout[1].SemanticName = \"TEXCOORD\";\n    polygonLayout[1].SemanticIndex = 0;\n    polygonLayout[1].Format = DXGI_FORMAT_R32G32_FLOAT;\n    polygonLayout[1].InputSlot = 0;\n    polygonLayout[1].AlignedByteOffset = D3D11_APPEND_ALIGNED_ELEMENT;\n    polygonLayout[1].InputSlotClass = D3D11_INPUT_PER_VERTEX_DATA;\n    polygonLayout[1].InstanceDataStepRate = 0;\n\n    polygonLayout[2].SemanticName = \"NORMAL\";\n    polygonLayout[2].SemanticIndex = 0;\n    polygonLayout[2].Format = DXGI_FORMAT_R32G32B32_FLOAT;\n    polygonLayout[2].InputSlot = 0;\n    polygonLayout[2].AlignedByteOffset = D3D11_APPEND_ALIGNED_ELEMENT;\n    polygonLayout[2].InputSlotClass = D3D11_INPUT_PER_VERTEX_DATA;\n    polygonLayout[2].InstanceDataStepRate = 0;\n\n    numElements = sizeof(polygonLayout) / sizeof(polygonLayout[0]);\n\n    result = device-&gt;CreateInputLayout(polygonLayout, numElements, vertexShaderBuffer-&gt;GetBufferPointer(), vertexShaderBuffer-&gt;GetBufferSize(), &amp;m_layout);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    vertexShaderBuffer-&gt;Release();\n    vertexShaderBuffer = nullptr;\n    pixelShaderBuffer-&gt;Release();\n    pixelShaderBuffer = nullptr;\n\n    samplerDesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;\n    samplerDesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;\n    samplerDesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;\n    samplerDesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;\n    samplerDesc.MipLODBias = 0.0f;\n    samplerDesc.MaxAnisotropy = 1;\n    samplerDesc.ComparisonFunc = D3D11_COMPARISON_ALWAYS;\n    samplerDesc.BorderColor[0] = 0;\n    samplerDesc.BorderColor[1] = 0;\n    samplerDesc.BorderColor[2] = 0;\n    samplerDesc.BorderColor[3] = 0;\n    samplerDesc.MinLOD = 0;\n    samplerDesc.MaxLOD = D3D11_FLOAT32_MAX;\n\n    result = device-&gt;CreateSamplerState(&amp;samplerDesc, &amp;m_samplerState);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    matrixBufferDesc.Usage = D3D11_USAGE_DYNAMIC;\n    matrixBufferDesc.ByteWidth = sizeof(MatrixBufferType);\n    matrixBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;\n    matrixBufferDesc.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;\n    matrixBufferDesc.MiscFlags = 0;\n    matrixBufferDesc.StructureByteStride = 0;\n\n    result = device-&gt;CreateBuffer(&amp;matrixBufferDesc, NULL, &amp;m_matrixBuffer);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    //ByteWidth must be a multiple of 16 if using D3D11_BIND_CONSTANT_BUFFER or CreateBuffer will fail.\n    lightBufferDesc.Usage = D3D11_USAGE_DYNAMIC;\n    lightBufferDesc.ByteWidth = sizeof(LightBufferType);\n    lightBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;\n    lightBufferDesc.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;\n    lightBufferDesc.MiscFlags = 0;\n    lightBufferDesc.StructureByteStride = 0;\n\n    device-&gt;CreateBuffer(&amp;lightBufferDesc, NULL, &amp;m_lightBuffer);\n    if (FAILED(result))\n    {\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>The texture is supposed to look like displayed on the link, but instead looks like really weird (can't seem to be able to take a screen shot, will add if possible).</p>\n\n<p>I tried looking into other questions here, but none solved the issue.</p>\n\n<p>I am still fairly new to DX11, so any help is much appreciated.</p>\n\n<p><strong>Edit:</strong> Here is a screenshot (left side: supposed, right side: my game)</p>\n\n<p><a href=\"https://i.stack.imgur.com/h3s12.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h3s12.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "arrays", "file", "loops"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1509570325, "post_id": 47063597, "comment_id": 81075470, "body": "You aren&#39;t resetting the file between the two sets of reads, so you aren&#39;t getting any contents into <code>message</code>. You&#39;re printing the garbage that was left over when it was allocated."}, {"owner": {"reputation": 52, "user_id": 6010691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6904ac0abe028e33dfc36129fefedb0?s=128&d=identicon&r=PG&f=1", "display_name": "King Twix", "link": "https://stackoverflow.com/users/6010691/king-twix"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1509570449, "post_id": 47063597, "comment_id": 81075524, "body": "@Ron adding the contents of the file to a char array. So if the file conatined &quot;hello world&quot; it would go to an array as {&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;,. . . }"}, {"owner": {"reputation": 52, "user_id": 6010691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6904ac0abe028e33dfc36129fefedb0?s=128&d=identicon&r=PG&f=1", "display_name": "King Twix", "link": "https://stackoverflow.com/users/6010691/king-twix"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1509570575, "post_id": 47063597, "comment_id": 81075586, "body": "@MarkRansom Ah... I had no idea that was required. Thank you!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1509570752, "post_id": 47063597, "comment_id": 81075669, "body": "<a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">why <code>while (!infile.eof())</code> is wrong</a>"}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1509570752, "post_id": 47063597, "comment_id": 81075670, "body": "You are reading the all file into a string why do not you transform the string into an array instead of reading again?"}, {"owner": {"reputation": 52, "user_id": 6010691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6904ac0abe028e33dfc36129fefedb0?s=128&d=identicon&r=PG&f=1", "display_name": "King Twix", "link": "https://stackoverflow.com/users/6010691/king-twix"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1509570913, "post_id": 47063597, "comment_id": 81075736, "body": "@Barmar I did that trying to test something else, forgot to update. it should be &quot;While(inFile)&quot;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1509571013, "post_id": 47063597, "comment_id": 81075776, "body": "That&#39;s still wrong. It should be <code>while(infile.get(message[i])))</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1509573649, "post_id": 47063597, "comment_id": 81076941, "body": "You are using Variable Length Arrays, which are not part of the standard C++ language.  Use dynamic memory (<code>char * message = new char[arraySize];</code>) or std::vector (<code>std::vector&lt;char&gt; message(array_size);</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 1, "last_activity_date": 1509717044, "last_edit_date": 1509717044, "creation_date": 1509575518, "answer_id": 47064700, "question_id": 47063597, "link": "https://stackoverflow.com/questions/47063597/appending-a-text-file-to-a-char-array-receiving-garbage-output/47064700#47064700", "title": "Appending a text file to a char array, receiving garbage output", "body": "<p>The reason is you reached the end of file when you count the length of the text thus the read pointer is at the end of the file and you used it again to read the text file.</p>\n\n<p>To do it: Get the read pointer again to the beginning:</p>\n\n<pre><code>inFile.clear();\ninFile.seekg(0, ios::beg);\nwhile(inFile.get(message[i])){\n    i++;\n}\n</code></pre>\n\n<p>Also don't use: <code>while (!infile.eof())</code> it is considered to be incorrect.</p>\n\n<ul>\n<li><p>What I recommend is to use <code>std::vector</code> you don not mind about the file size or any allocation / de-allocation of memory. So your code can be like this:</p>\n\n<pre><code>std::ifstream inFile(\"data.txt\"); // your file name here\nstd::string strLine;\nstd::vector&lt;std::string&gt; vecStr;\n\nwhile(std::getline(inFile, strLine))\n    vecStr.push_back(strLine);\n\nfor(int i(0); i &lt; vecStr.size(); i++)\n    std::cout &lt;&lt; vecStr[i] &lt;&lt; std::endl;\n\ninFile.close();\n</code></pre></li>\n</ul>\n\n<p>Have you seen how the code is charm above?</p>\n\n<ul>\n<li>NB: You got the garbage values because the array is only declared but not initialized:</li>\n</ul>\n\n<p>The first read gets the length of the text. But moved the read pointer to the end and then you did:</p>\n\n<pre><code>while(inFile.good() &amp;&amp; !inFile.eof()){ // Will fail because inFile.eof() is true from the previous read.\n    //std::cout &lt;&lt; \"Inside the reading loop\" &lt;&lt; std::endl;\n    inFile.get(message[i]);\n    i++;\n}\n</code></pre>\n\n<p>As you can see above the loop will not be executed because the previous read reached the <code>eof</code> thus the array is just declared without being initialized thus as you know it contains garbage values.</p>\n\n<p>To confirm that the loop is not executed un-comment the line above and see if the loop is executed. The result is no printing message which means it was not executed.</p>\n"}], "owner": {"reputation": 52, "user_id": 6010691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6904ac0abe028e33dfc36129fefedb0?s=128&d=identicon&r=PG&f=1", "display_name": "King Twix", "link": "https://stackoverflow.com/users/6010691/king-twix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 47064700, "answer_count": 1, "score": 1, "last_activity_date": 1509717044, "creation_date": 1509570031, "last_edit_date": 1509570791, "question_id": 47063597, "link": "https://stackoverflow.com/questions/47063597/appending-a-text-file-to-a-char-array-receiving-garbage-output", "title": "Appending a text file to a char array, receiving garbage output", "body": "<p>When I add a file to a char array, then print, I get garbage output (random ASCII symbols). The file contains only text (a paragraph).</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>int arraySize = 0;\nstring line;\nwhile(getline(inFile, line)){\n    //cout &lt;&lt; line &lt;&lt; endl; // this will print array fine.\n    arraySize += line.length();\n}\nchar message[arraySize];\nchar encrypted[arraySize];\n//adds file to array\nint i = 0;\nwhile(inFile.good() &amp;&amp; !inFile.eof()){\n    inFile.get(message[i]);\n    i++;\n}\nmessage[i] = '\\0';\n//prints array\nfor(int i = 0; i &lt; arraySize; i++){\n    cout &lt;&lt; message[i]; //this returns garbage values\n}\n</code></pre>\n\n<p>I believe its printing garbage because it thinks there's nothing in the array messages, but I do not know why there is \"nothing there.\"</p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1509570043, "post_id": 47063552, "comment_id": 81075335, "body": "Why do you need this? It might be an instance of the <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1509570047, "post_id": 47063552, "comment_id": 81075336, "body": "There are a few options. You can return a <code>void*</code> and allocate the <code>std::function</code> on the heap, and also provide functions to call back into C++, cast, and perform whatever operations on the function you wanted. Exactly how you convert the <code>std::function</code> into a C compatible data type is up to you; you could even put it into a raw character array (wrapped in a struct perhaps). There are a lot of options"}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1509570067, "post_id": 47063552, "comment_id": 81075347, "body": "<a href=\"https://stackoverflow.com/questions/2399344/calling-c-code-from-c\" title=\"calling c code from c\">stackoverflow.com/questions/2399344/calling-c-code-from-c</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1509570102, "post_id": 47063552, "comment_id": 81075365, "body": "You could make a pass through that returned a raw function pointer (e.g. <code>int (*AdderFunction)(int)</code>), but you cannot pass a <code>std::function</code>. This is essentially what <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\"><code>std::function::target</code></a> does"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570483, "post_id": 47063552, "comment_id": 81075538, "body": "@IharobAlAsimi context is I&#39;m trying to manually define an interface to C++ code for Javascript with Emscripten. Embind works, but creates a lot of excess code and uses <code>eval</code> to achieve it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570565, "post_id": 47063552, "comment_id": 81075581, "body": "That&#39;s interesting. Emscripten? Never heard of it. I will check that to learn about it."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1509570862, "post_id": 47063552, "comment_id": 81075722, "body": "Regarding my comment: &quot;<i>BTW: I cannot reproduce it with gcc</i>&quot; Of course, it compiles with g++ but it&#39;s not possible to call it from c."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1509571596, "post_id": 47063552, "comment_id": 81076024, "body": "@CoryKramer Isn\u2019t language linkage part of a function type, so <code>std::function::target</code> would still not work?"}], "answers": [{"comments": [{"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509571121, "post_id": 47063647, "comment_id": 81075820, "body": "Yep, I tried this, unfortunately <code>target</code> returns a null pointer. The code looks like this:      <code>CAdderFunction* makeCAdder(int amount) {         return makeAdder(amount).target&lt;CAdderFunction&gt;();     }</code>"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509571227, "post_id": 47063647, "comment_id": 81075877, "body": "I believe the above is because the <code>target_type</code> is different, as mentioned here <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target_type\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function/&hellip;</a>"}, {"owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "reply_to_user": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 0, "creation_date": 1509571460, "post_id": 47063647, "comment_id": 81075967, "body": "@StuartK Try making the return type of makeAdder <code>std::function&lt;CAdderFunction&gt;</code>?"}, {"owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "reply_to_user": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 0, "creation_date": 1509572328, "post_id": 47063647, "comment_id": 81076373, "body": "Another possibility is <code>return makeAdder(amount).target&lt;int(int)&gt;();</code> , I believe this should implicitly convert to CAdderFunction."}], "tags": [], "owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "is_accepted": false, "score": 4, "last_activity_date": 1509571362, "last_edit_date": 1509571362, "creation_date": 1509570301, "answer_id": 47063647, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063647#47063647", "title": "Can I call a std::function from C?", "body": "<p>You need to put the typedef inside the <code>extern \"C\"</code> block at the minimum (to get it to compile as C++). I'm not sure that will work from C, however. What will work from C is just to use plain function pointers, e.g.</p>\n\n<pre><code>extern \"C\" {\nusing AdderFunction = int(int);\n// old-style: typedef int(*AdderFunction)(int);\n}\n</code></pre>\n\n<p>Edit: If you're using an API that gives you <code>std::function</code> objects, you can use the <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\"><code>std::function::target()</code></a> method to obtain the (C-callable) raw function pointer it refers to.</p>\n\n<pre><code>using AdderFunction = std::function&lt;int(int)&gt;;\nextern \"C\" {\nusing CAdderFunction = int(int);\nCAdderFunction makeCAdder(int amount)\n{\n        return makeAdder(amount).target&lt;CAdderFunction&gt;();\n}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509570510, "post_id": 47063656, "comment_id": 81075557, "body": "Will that let you actually <i>call</i> <code>f</code>, though?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509570575, "post_id": 47063656, "comment_id": 81075585, "body": "@DanielH, as in, use <code>makeCAdder(10).f(20);</code>?"}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509570829, "post_id": 47063656, "comment_id": 81075702, "body": "Thanks for the answer, unfortunately this results in a similar/the same warning: <code>&#39;makeCAdder&#39; has C-linkage specified, but returns user-defined type &#39;AdderWrapper&#39; which is incompatible with C</code>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1509571537, "post_id": 47063656, "comment_id": 81076002, "body": "@RSahu Yes, that\u2019s what the OP said he actually wants to do. I think the only way to do that is an <code>extern C</code> wrapper function which actually makes that call, but I\u2019m not confident enough in my ability to write it to make that an answer."}, {"owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "edited": false, "score": 1, "creation_date": 1509576375, "post_id": 47063656, "comment_id": 81077880, "body": "Great, the expanded <code>make</code>/<code>invoke</code>/<code>delete</code> pattern works. Thanks!"}, {"owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "edited": false, "score": 0, "creation_date": 1509581976, "post_id": 47063656, "comment_id": 81079529, "body": "You can avoid one level of indirection by creating the <code>function&lt;int(int)&gt;</code> using new and C casting to/from your struct type."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1509603804, "post_id": 47063656, "comment_id": 81085529, "body": "<code>__cplusplus</code> should be in lowercase if you&#39;re intending to use <a href=\"http://en.cppreference.com/w/cpp/preprocessor/replace#Predefined_macros\" rel=\"nofollow noreferrer\">the standard macro</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 15, "last_activity_date": 1510070846, "last_edit_date": 1510070846, "creation_date": 1509570346, "answer_id": 47063656, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063656#47063656", "title": "Can I call a std::function from C?", "body": "<p>The most portable method to interface between C/C++ will be to use pointers to pass data between languages and use non-member functions to make function calls.</p>\n\n<p>The .h file:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n   // Declare the struct.\n   struct Adder;\n\n   // Declare functions to work with the struct.\n   Adder* makeAdder(int amount);\n\n   int invokeAdder(Adder* adder, int n);\n\n   void deleteAdder(Adder* adder);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Implement them in a .cpp file as:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntypedef std::function&lt;int(int)&gt; AdderFunction;\nstruct Adder\n{\n   AdderFunction f;\n};\n\nAdderFunction makeAdderFunction(int amount) {\n    return [amount] (int n) {\n        return n + amount;\n    };\n}\n\nAdder* makeAdder(int amount)\n{\n   Adder* adder = new Adder;\n   adder-&gt;f = makeAdderFunction(amount);\n   return adder;\n}\n\nint invokeAdder(Adder* adder, int n)\n{\n   return adder-&gt;f(n);\n}\n\nvoid deleteAdder(Adder* adder)\n{\n   delete adder;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 8, "last_activity_date": 1509571854, "creation_date": 1509571854, "answer_id": 47063995, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47063995#47063995", "title": "Can I call a std::function from C?", "body": "<p>It's not possible to call a <code>std::function</code> from C, because C doesn't support the language features that are required. C doesn't have templates, access modifiers, callable objects, virtual methods, or anything else that <code>std::function</code> could use under the hood. You need to come up with a strategy that C can understand.</p>\n\n<p>One such strategy is to copy/move your <code>std::function</code> to the heap and return it as an opaque pointer. Then, you would provide another function through your C++ interface that takes that opaque pointer and calls the function that it contains.</p>\n\n<pre><code>// C side\nstruct function_opaque;\nint call_opaque(struct function_opaque*, int param);\n\n// C++ side\nextern \"C\" {\n    struct function_opaque {\n        std::function&lt;int(int)&gt; f;\n    };\n\n    int call_opaque(function_opaque* func, int param) {\n        return func-&gt;f(param);\n    }\n};\n</code></pre>\n\n<p>Of course, this comes with memory management implications.</p>\n"}, {"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 1, "creation_date": 1509714382, "post_id": 47065066, "comment_id": 81142431, "body": "This is an unsolvable problem (except by using run time code generation). There are a bunch of workarounds such as using thread-local variables, or templates if the argument value is known at compile time. Many C APIs allow passing an arbitrary <code>void *data</code> in addition to the callback function, though. In simple cases, you could just <code>reinterpret_cast&lt;void *&gt;(myInt)</code>, or else point to a data structure."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1509578620, "last_edit_date": 1509578620, "creation_date": 1509577737, "answer_id": 47065066, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47065066#47065066", "title": "Can I call a std::function from C?", "body": "<p>The problem with this solution is when you call <code>makeAdder</code> with parameter values.. Couldn't solve it but I'm posting just in case someone else can..</p>\n\n<pre><code>template &lt;typename FunctionPointerType, typename Lambda, typename ReturnType, typename ...Args&gt;\ninline FunctionPointerType MakeFunc(Lambda&amp;&amp; lambda, ReturnType (*)(Args...))\n{\n    thread_local std::function&lt;ReturnType(Args...)&gt; func(lambda);\n\n    struct Dummy\n    {\n        static ReturnType CallLambda(Args... args)\n        {\n            return func(std::forward&lt;Args&gt;(args)...);\n        }\n    };\n\n    return &amp;Dummy::CallLambda;\n}\n\ntemplate &lt;typename FunctionPointerType, typename Lambda&gt;\nFunctionPointerType MakeFunc(Lambda&amp;&amp; lambda)\n{\n    return MakeFunc&lt;FunctionPointerType, Lambda&gt;(std::forward&lt;Lambda&gt;(lambda), FunctionPointerType());\n}\n\n\ntypedef int(*AdderFunction)(int);\n\nAdderFunction makeAdder(int amount) {\n    return MakeFunc&lt;int(*)(int)&gt;([amount] (int n) {\n        return n + amount;\n    });\n}\n\nextern \"C\" {\n    typedef int(*CAdderFunction)(int);\n\n    CAdderFunction makeCAdder(int amount)\n    {\n        return makeAdder(amount);\n    }\n}\n</code></pre>\n\n<p>It works by storing the lambda a thread local <code>std::function</code>. Then return a pointer to a static function which will call the lambda with the parameters passed in.</p>\n\n<p>I thought about using an <code>unordered_map</code> and keeping track of each <code>makeAdder</code> call but then you can't reference it from static context..</p>\n"}, {"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": false, "score": 1, "last_activity_date": 1509583825, "last_edit_date": 1509583825, "creation_date": 1509583525, "answer_id": 47065848, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c/47065848#47065848", "title": "Can I call a std::function from C?", "body": "<p>Another solution is to split the <code>std::function</code> into a pointer to the closure and a pointer to the member function, and pass three things to the C function that wants to invoke the lambda:</p>\n\n<ul>\n<li>The address of a C++ function that knows how to invoke the function on the closure type-safely</li>\n<li>The closure pointer (unsafely cast to <code>void *</code>)</li>\n<li>The member function pointer (hidden inside a wrapper struct and cast to <code>void *</code> as well)</li>\n</ul>\n\n<p>Here\u2019s a sample implementation.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nstruct MemberFunctionPointer\n{\n    Result (Closure::*value)(Args...) const;\n};\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nMemberFunctionPointer&lt;Closure, Result, Args...&gt;\nmember_function_pointer(\n    Result (Closure::*const value)(Args...) const)\n{\n    return MemberFunctionPointer&lt;Closure, Result, Args...&gt;{value};\n}\n\ntemplate&lt;typename Closure, typename Result, typename... Args&gt;\nResult\ncall(\n    const void *const function,\n    const void *const closure,\n    Args... args)\n{\n    return\n        ((reinterpret_cast&lt;const Closure *&gt;(closure))\n        -&gt;*(reinterpret_cast&lt;const MemberFunctionPointer&lt;Closure, Result, Args...&gt;*&gt;(function)-&gt;value))\n        (std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>Sample usage from the C side:</p>\n\n<pre><code>int\nc_call(\n    int (*const caller)(const void *, const void *, int),\n    const void *const function,\n    const void *const closure,\n    int argument)\n{\n    return caller (function, closure, argument);\n}\n</code></pre>\n\n<p>Sample usage from the C++ side:</p>\n\n<pre><code>int\nmain()\n{\n    int captured = 5;\n    auto unwrapped = [captured] (const int argument) {\n        return captured + argument;\n    };\n    std::function&lt;int(int)&gt; wrapped = unwrapped;\n\n    auto function = member_function_pointer(&amp;decltype(unwrapped)::operator());\n    auto closure = wrapped.target&lt;decltype(unwrapped)&gt;();\n    auto caller = &amp;call&lt;decltype(unwrapped), int, int&gt;;\n    std::cout\n        &lt;&lt; c_call(\n            caller,\n            reinterpret_cast&lt;const void *&gt;(&amp;function),\n            reinterpret_cast&lt;const void *&gt;(closure),\n            10)\n        &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The reason for the wrapper struct is that you can\u2019t cast a member function pointer to <code>void *</code> or any other object pointer type, not even with <code>reinterpret_cast</code>, so instead we pass the <em>address</em> of the member function pointer. You can choose to place the <code>MemberFunctionPointer</code> structure on the heap, e.g. with <code>unique_ptr</code>, if it needs to live longer than it does in this simple example.</p>\n\n<p>You can also wrap these three arguments in a single structure on the C side, rather than pass them individually:</p>\n\n<pre><code>struct IntIntFunction\n{\n    int (*caller)(const void *, const void *, int);\n    const void *function;\n    const void *closure;\n};\n\n#define INVOKE(f, ...) ((f).caller((f).function, (f).closure, __VA_ARGS__))\n\nint\nc_call(IntIntFunction function)\n{\n    return INVOKE(function, 10);\n}\n</code></pre>\n"}], "owner": {"reputation": 3007, "user_id": 100172, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/80e9429d71c6a81807032275d57c7859?s=128&d=identicon&r=PG", "display_name": "Stuart K", "link": "https://stackoverflow.com/users/100172/stuart-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3845, "favorite_count": 5, "accepted_answer_id": 47063656, "answer_count": 5, "score": 20, "last_activity_date": 1510070846, "creation_date": 1509569834, "last_edit_date": 1509570001, "question_id": 47063552, "link": "https://stackoverflow.com/questions/47063552/can-i-call-a-stdfunction-from-c", "title": "Can I call a std::function from C?", "body": "<p>I have some C++ code that returns a <code>std::function</code>. I would like to call this from some C code. Is this possible? As an example I have the following code:</p>\n\n<pre><code>typedef std::function&lt;int(int)&gt; AdderFunction;\n\nAdderFunction makeAdder(int amount) {\n    return [amount] (int n) {\n        return n + amount;\n    };\n}\n\nextern \"C\" {\n    AdderFunction makeCAdder(int amount) {\n        return makeAdder(amount);\n    }\n}\n</code></pre>\n\n<p>with <code>clang++ -std=c++11 test.cpp</code> it results in the following warning:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>'makeCAdder' has C-linkage specified, but returns user-defined type 'AdderFunction' (aka 'function&lt;int (int)&gt;') which is incompatible with C\n</code></pre>\n\n<p>I understand why this is happening, but wondering if there is a pattern to make it possible?</p>\n"}, {"tags": ["c++", "chrono"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1509570126, "post_id": 47063507, "comment_id": 81075386, "body": "The problem is that the return type of the <code>+</code> operator is <b><i>not</i></b> the same <code>time_point</code>, but <a href=\"http://en.cppreference.com/w/cpp/chrono/time_point/operator_arith2\" rel=\"nofollow noreferrer\"><code>time_point&lt;C, typename std::common_type&lt;D1, duration&lt;R2,P2&gt;&gt;::type&gt;</code></a>. Basically, you need to express your duration in terms of <code>std::steady_clock::duration</code>. You can use <code>std::duration_cast</code> for that purpose, but, yes, you&#39;ll get rounding errors. No way to avoid them."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 5862756, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EzYCp.png?s=128&g=1", "display_name": "VorpalSword", "link": "https://stackoverflow.com/users/5862756/vorpalsword"}, "edited": false, "score": 0, "creation_date": 1509589971, "post_id": 47063762, "comment_id": 81081441, "body": "Thanks for the great link! The most entertaining video I&#39;ve seen recently that didn&#39;t feature Daenerys Targaryen. Now let&#39;s find out if my gcc has C++ 17..."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 3, "last_activity_date": 1509655086, "last_edit_date": 1509655086, "creation_date": 1509570829, "answer_id": 47063762, "question_id": 47063507, "link": "https://stackoverflow.com/questions/47063507/ratio-math-not-working-with-stdchronoduration/47063762#47063762", "title": "ratio math not working with std::chrono::duration", "body": "<p>You have identified the issue correctly.  You can use <code>return time_point_cast&lt;steady_clock::duration&gt;(ref + NTSC_FPS_t(frames));</code> which will truncate towards zero to the next <code>steady_clock::duration</code> (nanosecond).</p>\n\n<p>In C++17, you will have other rounding modes:</p>\n\n<ul>\n<li><code>floor</code></li>\n<li><code>ceil</code></li>\n<li><code>round</code></li>\n</ul>\n\n<p>You're welcome to use them from here if you want them prior to C++17:  <a href=\"https://github.com/HowardHinnant/date/blob/master/include/date/date.h\" rel=\"nofollow noreferrer\">https://github.com/HowardHinnant/date/blob/master/include/date/date.h</a></p>\n\n<p>If it helps, here is a video tutorial for <code>&lt;chrono&gt;</code>: <a href=\"https://www.youtube.com/watch?v=P32hvk8b13M\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=P32hvk8b13M</a></p>\n\n<p>You could also use <a href=\"https://github.com/HowardHinnant/date/blob/master/include/date/date.h\" rel=\"nofollow noreferrer\">\"date.h\"</a> to explore the units that <em>do</em> result from <code>steady_clock::time_point + NTSC_FPS_t</code> like this:</p>\n\n<pre><code>#include \"date/date.h\"\n#include &lt;iostream&gt;\n\ntypedef std::chrono::duration&lt;int, std::ratio&lt;1001,30000&gt;&gt; NTSC_FPS_t;\n\nint\nmain()\n{\n    using date::operator&lt;&lt;;\n    auto tp = std::chrono::steady_clock::now() + NTSC_FPS_t{1};\n    std::cout &lt;&lt; tp.time_since_epoch() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>For me this just output:</p>\n\n<pre><code>4680675375035054[1/3000000000]s\n</code></pre>\n\n<p>Indicating that the sum of <code>nanoseconds</code> and <code>NTSC_FPS_t</code> has units of <sup>1</sup>/<sub>3</sub> of a nanosecond.</p>\n"}], "owner": {"reputation": 861, "user_id": 5862756, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EzYCp.png?s=128&g=1", "display_name": "VorpalSword", "link": "https://stackoverflow.com/users/5862756/vorpalsword"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 47063762, "answer_count": 1, "score": 2, "last_activity_date": 1547833380, "creation_date": 1509569641, "last_edit_date": 1547833380, "question_id": 47063507, "link": "https://stackoverflow.com/questions/47063507/ratio-math-not-working-with-stdchronoduration", "title": "ratio math not working with std::chrono::duration", "body": "<p>I don't understand <code>std::chrono::duration</code>.</p>\n\n<p>I'm trying to calculate a future timepoint based on a video frame rate. I need to do the same again (and again) once that timepoint has been reached.</p>\n\n<p>Like this:</p>\n\n<pre><code>#include &lt;chrono&gt;\nusing namespace std::chrono;\ntypedef duration&lt;int, std::ratio&lt;1,10&gt;&gt; TenFPS_t;\ntypedef duration&lt;int, std::ratio&lt;1001,30000&gt;&gt; NTSC_FPS_t;\n// this compiles ok\ntime_point&lt;steady_clock&gt; compiles (time_point&lt;steady_clock&gt;&amp; ref, int frames) {\nreturn ref + TenFPS_t(frames);\n}\n// this one, when uncommented spits out many complaints\ntime_point&lt;steady_clock&gt; wontCompile (time_point&lt;steady_clock&gt;&amp; ref, int frames) {\nreturn ref + NTSC_FPS_t(frames);\n}\n</code></pre>\n\n<p>I guess the issue is that 30,000 / 1,001 isn't an integer number of nanoseconds which is (I think) the resolution of the <code>std::chrono::steady_clock</code> I'm using. So I need to pick the nearest integer to the frame period and accumulate errors to feed into the calculation for the next one. Am I right?</p>\n\n<p>Compiler error follows:</p>\n\n<pre><code>$ g++ -Wall -ggdb -std=gnu++0x -fPIC example.cpp  -c -o example.o\nexample.cpp:12:9: error: no viable conversion from returned value of type\n      'time_point&lt;[...], duration&lt;[...], ratio&lt;[...], __static_lcm&lt;ratio&lt;1,\n      1000000000&gt;::den, ratio&lt;1001, 24000&gt;::den&gt;::value aka 3000000000&gt;&gt;&gt;' to\n      function return type 'time_point&lt;[...], duration&lt;[...], ratio&lt;[...],\n      1000000000&gt;&gt;&gt;'\n        return ref + NTSC_FPS_t(frames);\n               ^~~~~~~~~~~~~~~~~~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:831:28: note: \n      candidate constructor (the implicit copy constructor) not viable: no known\n      conversion from 'time_point&lt;std::__1::chrono::steady_clock, typename\n      common_type&lt;duration&lt;long long, ratio&lt;1, 1000000000&gt; &gt;, duration&lt;int,\n      ratio&lt;1001, 24000&gt; &gt; &gt;::type&gt;' (aka\n      'time_point&lt;std::__1::chrono::steady_clock, duration&lt;long long,\n      ratio&lt;__static_gcd&lt;ratio&lt;1, 1000000000&gt;::num, ratio&lt;1001,\n      24000&gt;::num&gt;::value, __static_lcm&lt;ratio&lt;1, 1000000000&gt;::den, ratio&lt;1001,\n      24000&gt;::den&gt;::value&gt; &gt; &gt;') to 'const\n      std::__1::chrono::time_point&lt;std::__1::chrono::steady_clock,\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 1000000000&gt; &gt; &gt;\n      &amp;' for 1st argument\nclass _LIBCPP_TEMPLATE_VIS time_point\n                           ^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:831:28: note: \n      candidate constructor (the implicit move constructor) not viable: no known\n      conversion from 'time_point&lt;std::__1::chrono::steady_clock, typename\n      common_type&lt;duration&lt;long long, ratio&lt;1, 1000000000&gt; &gt;, duration&lt;int,\n      ratio&lt;1001, 24000&gt; &gt; &gt;::type&gt;' (aka\n      'time_point&lt;std::__1::chrono::steady_clock, duration&lt;long long,\n      ratio&lt;__static_gcd&lt;ratio&lt;1, 1000000000&gt;::num, ratio&lt;1001,\n      24000&gt;::num&gt;::value, __static_lcm&lt;ratio&lt;1, 1000000000&gt;::den, ratio&lt;1001,\n      24000&gt;::den&gt;::value&gt; &gt; &gt;') to\n      'std::__1::chrono::time_point&lt;std::__1::chrono::steady_clock,\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 1000000000&gt; &gt; &gt;\n      &amp;&amp;' for 1st argument\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:853:13: note: \n      candidate template ignored: disabled by 'enable_if' [with _Duration2 =\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 3000000000&gt; &gt;]\n            is_convertible&lt;_Duration2, duration&gt;::value\n            ^\n1 error generated.\nL-REMJNAYLOR:poc jnaylor$ g++ -Wall -ggdb -std=gnu++0x -fPIC example.cpp  -c -o example.o\nexample.cpp:12:9: error: no viable conversion from returned value of type\n      'time_point&lt;[...], duration&lt;[...], ratio&lt;[...], __static_lcm&lt;ratio&lt;1,\n      1000000000&gt;::den, ratio&lt;1001, 30000&gt;::den&gt;::value aka 3000000000&gt;&gt;&gt;' to\n      function return type 'time_point&lt;[...], duration&lt;[...], ratio&lt;[...],\n      1000000000&gt;&gt;&gt;'\n        return ref + NTSC_FPS_t(frames);\n               ^~~~~~~~~~~~~~~~~~~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:831:28: note: \n      candidate constructor (the implicit copy constructor) not viable: no known\n      conversion from 'time_point&lt;std::__1::chrono::steady_clock, typename\n      common_type&lt;duration&lt;long long, ratio&lt;1, 1000000000&gt; &gt;, duration&lt;int,\n      ratio&lt;1001, 30000&gt; &gt; &gt;::type&gt;' (aka\n      'time_point&lt;std::__1::chrono::steady_clock, duration&lt;long long,\n      ratio&lt;__static_gcd&lt;ratio&lt;1, 1000000000&gt;::num, ratio&lt;1001,\n      30000&gt;::num&gt;::value, __static_lcm&lt;ratio&lt;1, 1000000000&gt;::den, ratio&lt;1001,\n      30000&gt;::den&gt;::value&gt; &gt; &gt;') to 'const\n      std::__1::chrono::time_point&lt;std::__1::chrono::steady_clock,\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 1000000000&gt; &gt; &gt;\n      &amp;' for 1st argument\nclass _LIBCPP_TEMPLATE_VIS time_point\n                           ^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:831:28: note: \n      candidate constructor (the implicit move constructor) not viable: no known\n      conversion from 'time_point&lt;std::__1::chrono::steady_clock, typename\n      common_type&lt;duration&lt;long long, ratio&lt;1, 1000000000&gt; &gt;, duration&lt;int,\n      ratio&lt;1001, 30000&gt; &gt; &gt;::type&gt;' (aka\n      'time_point&lt;std::__1::chrono::steady_clock, duration&lt;long long,\n      ratio&lt;__static_gcd&lt;ratio&lt;1, 1000000000&gt;::num, ratio&lt;1001,\n      30000&gt;::num&gt;::value, __static_lcm&lt;ratio&lt;1, 1000000000&gt;::den, ratio&lt;1001,\n      30000&gt;::den&gt;::value&gt; &gt; &gt;') to\n      'std::__1::chrono::time_point&lt;std::__1::chrono::steady_clock,\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 1000000000&gt; &gt; &gt;\n      &amp;&amp;' for 1st argument\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/chrono:853:13: note: \n      candidate template ignored: disabled by 'enable_if' [with _Duration2 =\n      std::__1::chrono::duration&lt;long long, std::__1::ratio&lt;1, 3000000000&gt; &gt;]\n            is_convertible&lt;_Duration2, duration&gt;::value\n            ^\n1 error generated\n</code></pre>\n"}, {"tags": ["c++", "file-io", "directory", "readdir", "dirent.h"], "comments": [{"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1509572559, "post_id": 47063467, "comment_id": 81076488, "body": "You have few problems in this code, first of all you are trying to create an endless loop that will keep your pc busy all the time, then you are taking for granted that new files will end up at the end of the list but I would not be so sure. But beside those 2 problems and talking about your code you are assigning a value to total_files and you are doing anything with that."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1509573209, "post_id": 47063467, "comment_id": 81076765, "body": "@Marco Look at my updates. Looks like the count_files changes the dir pointer. The total_files is used in another file."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "reply_to_user": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 0, "creation_date": 1509573769, "post_id": 47063467, "comment_id": 81076993, "body": "Looks like <code>myFileCount</code> function I was using increments the file pointer. So I have to add another <code>rewinddir(dp)</code> after <code>total_files = MyDataUtil::count_files(dp);</code>. At least it works now."}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1509597357, "post_id": 47063467, "comment_id": 81083312, "body": "Look at the sleep() function - it will pause for a number of seconds if you don&#39;t expect new files to appear at a fast rate"}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1509610686, "post_id": 47063467, "comment_id": 81088969, "body": "They appear around every few seconds."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8164513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8892cb1a4bbfd448023c5f6610f50f39?s=128&d=identicon&r=PG&f=1", "display_name": "Drunk Engineer", "link": "https://stackoverflow.com/users/8164513/drunk-engineer"}, "edited": false, "score": 0, "creation_date": 1509597162, "post_id": 47067631, "comment_id": 81083249, "body": "<a href=\"https://imgur.com/a/l5iMf\" rel=\"nofollow noreferrer\">Here</a> is origin state of the specific directory"}, {"owner": {"reputation": 11, "user_id": 8164513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8892cb1a4bbfd448023c5f6610f50f39?s=128&d=identicon&r=PG&f=1", "display_name": "Drunk Engineer", "link": "https://stackoverflow.com/users/8164513/drunk-engineer"}, "edited": false, "score": 0, "creation_date": 1509597215, "post_id": 47067631, "comment_id": 81083268, "body": "And <a href=\"https://imgur.com/a/75bWV\" rel=\"nofollow noreferrer\">this</a> is after adding New Text Document.txt"}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 1, "creation_date": 1509597281, "post_id": 47067631, "comment_id": 81083292, "body": "That is of course windows specific - the poster&#39;s soln is for any posix os"}, {"owner": {"reputation": 11, "user_id": 8164513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8892cb1a4bbfd448023c5f6610f50f39?s=128&d=identicon&r=PG&f=1", "display_name": "Drunk Engineer", "link": "https://stackoverflow.com/users/8164513/drunk-engineer"}, "reply_to_user": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1509607478, "post_id": 47067631, "comment_id": 81087279, "body": "@MartinBeckett Oops, sorry I didn&#39;t notice that."}], "tags": [], "owner": {"reputation": 11, "user_id": 8164513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8892cb1a4bbfd448023c5f6610f50f39?s=128&d=identicon&r=PG&f=1", "display_name": "Drunk Engineer", "link": "https://stackoverflow.com/users/8164513/drunk-engineer"}, "is_accepted": false, "score": 0, "last_activity_date": 1509597085, "creation_date": 1509597085, "answer_id": 47067631, "question_id": 47063467, "link": "https://stackoverflow.com/questions/47063467/c-read-new-files-added-to-a-directory/47067631#47067631", "title": "C++ read new files added to a directory", "body": "<p><br/>\nHere is another way, maybe you can try it.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;Locale.h&gt;\n\nusing namespace std;\n\nvoid ListFile(std::list&lt;std::wstring&gt; &amp;list_Steady)\n{\n    setlocale(LC_ALL, \"chs\");\n    WIN32_FIND_DATAW FindFileData;  \n    HANDLE hFind;\n    LPCWSTR s = L\"C:\\\\Test_Monitor\\\\*.*\";//The path of Directory you want to Monitor\n\n    hFind = FindFirstFileW(s, &amp;FindFileData);\n\n    if (hFind == INVALID_HANDLE_VALUE)\n    {  \n        printf (\"FindFirstFile failed (%d)\\n\", GetLastError());\n        return ;\n    }  \n    else  \n    {  \n        wcout &lt;&lt; \"The first file found is \" &lt;&lt; FindFileData.cFileName &lt;&lt; endl;\n        list_Steady.push_back(FindFileData.cFileName);\n    }  \n\n    while(FindNextFile(hFind, &amp;FindFileData))\n    {\n        wcout &lt;&lt; \"The next file found is \" &lt;&lt; FindFileData.cFileName &lt;&lt; endl;\n        list_Steady.push_back(FindFileData.cFileName);\n    }\n\n    FindClose(hFind);\n    hFind = NULL;\n}\n\nvoid CompareFile(std::list&lt;std::wstring&gt; &amp;new_list , std::list&lt;std::wstring&gt; &amp;steady_list)\n{\n    bool bFound = false;\n\n        for (std::list&lt;std::wstring&gt;::iterator it = new_list.begin(); it != new_list.end(); ++it)\n        {\n            bFound = false;\n            for (std::list&lt;std::wstring&gt;::iterator steady_it = steady_list.begin(); steady_it != steady_list.end(); ++steady_it)\n            {\n                //Compare to origin list, if file still exist will return true\n                if(it-&gt;compare(steady_it-&gt;c_str()) == 0)\n                {\n                    bFound = true;\n\n                }\n            }       \n\n            //else this is a new file\n            if(!bFound)\n            {\n                wcout &lt;&lt; it-&gt;c_str() &lt;&lt; L\" new file detected\" &lt;&lt; endl;\n            }           \n        }\n\n    bool bfound2 = false;\n\n        for (std::list&lt;std::wstring&gt;::iterator it = steady_list.begin(); it != steady_list.end(); ++it)\n        {\n            bfound2 = false;\n            for (std::list&lt;std::wstring&gt;::iterator new_it = new_list.begin(); new_it != new_list.end(); ++new_it)\n            {\n                //Compare to origin list, if file still exist will return true\n                if(it-&gt;compare(new_it-&gt;c_str()) == 0)\n                {\n                    bfound2 = true;\n                }\n            }\n\n            //else this file has been deleted\n            if(!bfound2)\n            {\n                wcout&lt;&lt; it-&gt;c_str() &lt;&lt; L\" This file has disappeared\" &lt;&lt; endl;\n\n            }\n        }\n}\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    list&lt;wstring&gt; Steady_Directory;\n    list&lt;wstring&gt; New_Directory;\n    DWORD WaitStatus = 0;\n\n    Steady_Directory.clear(); New_Directory.clear(); //be sure that list is clean\n    ListFile(Steady_Directory);\n    HANDLE FileChange = INVALID_HANDLE_VALUE;\n    FileChange = ::FindFirstChangeNotification(L\"C:\\\\Test_Monitor\",FALSE,FILE_NOTIFY_CHANGE_FILE_NAME);\n\n    if(FileChange == INVALID_HANDLE_VALUE)\n    {\n        cout &lt;&lt; \"LOG : FAIL to get File Change, With error code: \" &lt;&lt; ::GetLastError() &lt;&lt; endl;\n        return -1;\n    }\n\n    WaitStatus = ::WaitForSingleObject(FileChange, INFINITE);\n    if (WaitStatus == WAIT_OBJECT_0)\n    {\n        ListFile(New_Directory);\n        CompareFile(New_Directory, Steady_Directory);\n    }\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>I use two list, one stand for old state, the other is for the next state, and use <strong>::FindFirstChangeNotification</strong> to subscribe specific directory's state.<br/> \nAny file change in the directory will set the HANDLE <code>Filechange</code>, then will call the function <code>CompareFile</code> to make sure which file has been added or deleted. <br/>\nYou can make a for/while loop to make this monitor work constantly</p>\n"}, {"comments": [{"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1509632782, "post_id": 47074926, "comment_id": 81103834, "body": "Yes, I know that. One question I had was how to use a threaded version of that and use a queue."}, {"owner": {"reputation": 500, "user_id": 1145103, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d970defee5e6f9ade872db0f674ce44d?s=128&d=identicon&r=PG", "display_name": "Waslap", "link": "https://stackoverflow.com/users/1145103/waslap"}, "reply_to_user": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1509638935, "post_id": 47074926, "comment_id": 81108546, "body": "Probably best you ask that in a new question. In short, thread, setup inotify in new thread, endless loop select on its fd, process events, mutex lock, enqueue, condition signal, mutex unlock, back to top all in new thread. In original, endles loop, mutex lock, while queue empty condition wait, deque, mutex unlock, use q item, back to top of loop of original thread"}], "tags": [], "owner": {"reputation": 500, "user_id": 1145103, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d970defee5e6f9ade872db0f674ce44d?s=128&d=identicon&r=PG", "display_name": "Waslap", "link": "https://stackoverflow.com/users/1145103/waslap"}, "is_accepted": false, "score": 1, "last_activity_date": 1509624506, "creation_date": 1509624506, "answer_id": 47074926, "question_id": 47063467, "link": "https://stackoverflow.com/questions/47063467/c-read-new-files-added-to-a-directory/47074926#47074926", "title": "C++ read new files added to a directory", "body": "<p>Use inotify on Linux to get asynchronous notifications when files are added / removed / changed in a directory of your choice \n<a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man7/inotify.7.html</a></p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1509624506, "creation_date": 1509569471, "last_edit_date": 1509573146, "question_id": 47063467, "link": "https://stackoverflow.com/questions/47063467/c-read-new-files-added-to-a-directory", "title": "C++ read new files added to a directory", "body": "<p>I have a C++ program that when starts, gets the list of all files in a directory and does some processing with them (packetizes them for transmission over network). The current version is static and the program only sees the files at the time the program starts. Now I want to change it to a dynamic version where it can continuously see the new files added in the directory (let's assume they have a meaningful incremented name; for instance f1, f2, f3, ... so next one coming would be f4. This way I can use some index).</p>\n\n<p>Right now this is the piece of code (static reading of all files):</p>\n\n<pre><code>DIR *dp;\nstruct dirent *dirp;\nchar * dir = new char[inData-&gt;dir.length() + 1];\nstrcpy(dir, inData-&gt;dir.c_str());\ndp = opendir(dir);\nint file_index = 0;\nint total_files = DataUtil::count_files(dp);\n\nif (readdir(dp) == NULL)\n    rewinddir(dp);\n\n//for each file in the directory\n    while ((dirp = readdir( dp ))) {\n        string f_name = dirp-&gt;d_name;\n        if (f_name != \".\" &amp;&amp; f_name != \"..\") {  // except . and ..\n            //Do some processing\n            my_function(f_name, file_index);\n            file_index++;               \n        }\n    }\n    closedir(dp);\n</code></pre>\n\n<p>I modified the code using the <code>rewinddir(dp);</code> function and <code>file_index</code> to notice new files. But it doesn't work. Where is the problem?</p>\n\n<pre><code>DIR *dp;\nstruct dirent *dirp;\nchar * dir = new char[inData-&gt;dir.length() + 1];\nstrcpy(dir, inData-&gt;dir.c_str());\ndp = opendir(dir);\nint file_index = 0;\nint total_files = MyDataUtil::count_files(dp);\n\nif (readdir(dp) == NULL)\n    rewinddir(dp);\n\n//for each file in the directory\n    while ((dirp = readdir( dp ))) {\n        string f_name = dirp-&gt;d_name;\n        if (f_name != \".\" &amp;&amp; f_name != \"..\") {\n        //skip files already read\n        for (int var = 0; var &lt; file_index; var++) {\n            readdir(dp);\n        }\n            //Do some processing\n            my_function(f_name, file_index);\n            file_index++;\n\n        //reset dir stream, and update total_files\n        rewinddir(dp);\n        total_files = MyDataUtil::count_files(dp);            \n        }\n    }\n    closedir(dp);\n</code></pre>\n\n<p>The total_files function:</p>\n\n<pre><code>int MyDataUtil::count_files(DIR *dp){\n    struct dirent *dirp;\n    int num = 0;\n\n    while ((dirp = readdir( dp ))) {\n        string f_name = dirp-&gt;d_name;\n        if (f_name != \".\" &amp;&amp; f_name != \"..\")\n            num++;\n    }\n    return num;\n}\n</code></pre>\n\n<p>Here is the <code>rewinddir</code> documentation. It says ' might or might not be returned'!</p>\n\n<pre><code>Description:\n\nThe rewinddir function is used to reinitialize the directory stream dirstream, so that if you call readdir \n it returns information about the first entry in the directory again. This function also notices if files \n have been added or removed to the directory since it was opened with opendir. (Entries for these files \n might or might not be returned by readdir if they were added or removed since you last called opendir \n or rewinddir.) \n</code></pre>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 5, "creation_date": 1509568324, "post_id": 47063183, "comment_id": 81074511, "body": "Can&#39;t you just output <code>A</code>, then a slash, then <code>B</code>? Shown the code you have."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1509568334, "post_id": 47063183, "comment_id": 81074513, "body": "It is unclear what you are asking. Please clarify."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1509568430, "post_id": 47063183, "comment_id": 81074560, "body": "You have to manage the numerator and the denominator as two diffrent integars, and display them as requested.  But please, if you do problems try to solve them vefore asking here...."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 2, "creation_date": 1509568658, "post_id": 47063183, "comment_id": 81074681, "body": "<b><i>Show Code</i></b>"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1509574777, "post_id": 47063183, "comment_id": 81077372, "body": "Exactly what result do you have that you want to output that way. Two integers for a fraction, a single floating-point value, or something else?"}, {"owner": {"reputation": 69, "user_id": 8236482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCyo4.png?s=128&g=1", "display_name": "sayed ashraf", "link": "https://stackoverflow.com/users/8236482/sayed-ashraf"}, "edited": false, "score": 0, "creation_date": 1509583262, "post_id": 47063183, "comment_id": 81079879, "body": "I want to output 1/2 not 0.5"}, {"owner": {"reputation": 69, "user_id": 8236482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCyo4.png?s=128&g=1", "display_name": "sayed ashraf", "link": "https://stackoverflow.com/users/8236482/sayed-ashraf"}, "edited": false, "score": 0, "creation_date": 1509583517, "post_id": 47063183, "comment_id": 81079946, "body": "I already solve the problem but I can&#39;t output 1/2 only the program output 0.5"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 1, "last_activity_date": 1509891377, "creation_date": 1509891377, "answer_id": 47122573, "question_id": 47063183, "link": "https://stackoverflow.com/questions/47063183/how-to-cout-irreducible-fraction-like-1-2-in-c/47122573#47122573", "title": "how to cout irreducible fraction like 1/2 in c++", "body": "<p>The list of values you need to consider is so short, you can do it as a switch-case:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int Y, W;\n\n   cin&gt;&gt;Y&gt;&gt;W;\n\n   switch( max(Y,W) )\n   {\n    case 1: cout &lt;&lt; \"1/1\" &lt;&lt; endl; break;\n    case 2: cout &lt;&lt; \"5/6\" &lt;&lt; endl; break;\n    case 3: cout &lt;&lt; \"2/3\" &lt;&lt; endl; break;\n    case 4: cout &lt;&lt; \"1/2\" &lt;&lt; endl; break;\n    case 5: cout &lt;&lt; \"1/3\" &lt;&lt; endl; break;\n    case 6: cout &lt;&lt; \"1/6\" &lt;&lt; endl; break;\n   }\n   system(\"pause\");\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 8236482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCyo4.png?s=128&g=1", "display_name": "sayed ashraf", "link": "https://stackoverflow.com/users/8236482/sayed-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 47122573, "answer_count": 1, "score": -5, "last_activity_date": 1509891377, "creation_date": 1509568258, "last_edit_date": 1509652142, "question_id": 47063183, "link": "https://stackoverflow.com/questions/47063183/how-to-cout-irreducible-fraction-like-1-2-in-c", "title": "how to cout irreducible fraction like 1/2 in c++", "body": "<p>I'm trying to solve a <a href=\"http://codeforces.com/contest/9/problem/A\" rel=\"nofollow noreferrer\">problem</a> in codeforces and the output must be in format \u00abA/B\u00bb I want to output 1/2 not 0.5 but I don't know how to make the output in this format any help ?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\n    int main(){\n        int A, B, big = 0, i = 1;\n        double result = 0;\n        cin&gt;&gt;A&gt;&gt;B;\n        if(A == B)\n            cout&lt;&lt;1/1&lt;&lt;endl;\n        if(A &gt; B)\n            big = A;\n        else\n            big = B;\n\n        for( i ; big != 6 ; i++){\n            big++;\n        }\n\n        cout&lt;&lt;i/6.0&lt;&lt;endl;\n        system(\"pause\");\n    }\n</code></pre>\n"}, {"tags": ["c++", "stl", "stdstring"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1509568153, "post_id": 47063130, "comment_id": 81074435, "body": "<code>#define String ...</code> <b>really bad idea</b>. Don&#39;t use the preprocessor for this, use a type alias: <code>using String = ...</code> (just changing exactly the <code>#define String</code> into <code>using String = </code> will do everything you need)"}, {"owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509568217, "post_id": 47063130, "comment_id": 81074468, "body": "@Justin, thank you for the comment, I&#39;ll remember it. But it&#39;s made by one of my teachers."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1509568340, "post_id": 47063130, "comment_id": 81074518, "body": "<i>&quot;...did not allocate any memory ...&quot;</i>  lookup: &quot;small string optimisation&quot; (small strings are allocation in the std::string class directly not on the heap via the allocator).  Also strings (and vector) sometimes can grow by a multiple of the space required. (1.6 and 2 are common multiples)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568354, "post_id": 47063130, "comment_id": 81074526, "body": "I think your teacher has made a mistake, because he&#39;s pairing <code>new[]</code> with <code>delete</code>, which is UB."}, {"owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1509568396, "post_id": 47063130, "comment_id": 81074551, "body": "Thank you @Richard Critten! I&#39;ve been on this subject since yesterday and couldn&#39;t figure out the reason behind it. You just saved my day!"}, {"owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568520, "post_id": 47063130, "comment_id": 81074615, "body": "@ChristianHackl, it&#39;s been 2 weeks and half with C++ and I didn&#39;t get what you want to point out. So new with delete = ok but new[] with delete = not ok? So it should be new[] with delete [] ?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568784, "post_id": 47063130, "comment_id": 81074737, "body": "@HanseulSHIN: Wow, if it&#39;s been 2 weeks and a half with C++, then you should not struggle with an exotic voodoo feature like custom allocators! What does your teacher think this will accomplish?! In any case, yes, you must pair <code>new</code> with <code>delete</code> and <code>new[]</code> with <code>delete[]</code>, or else the behaviour of your program is undefined. And <code>new[]</code>/<code>delete[]</code> is almost always a bad idea anyway; you will notice that the standard library instead uses placement new to separate memory management from constructor/destructor calls. However, as I said, this is <i>far</i> from beginner&#39;s stuff."}, {"owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509569017, "post_id": 47063130, "comment_id": 81074847, "body": "@ChristianHackl Thank you for your answer! I&#39;ll remember that!"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "edited": false, "score": 0, "creation_date": 1509639962, "post_id": 47079978, "comment_id": 81109228, "body": "Thank you for the clarification!"}], "tags": [], "owner": {"reputation": 36, "user_id": 4154315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfd42e20d5d7400d1941c41d9ebd4f8b?s=128&d=identicon&r=PG", "display_name": "Vincent Nicopolsky", "link": "https://stackoverflow.com/users/4154315/vincent-nicopolsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1509639454, "creation_date": 1509639454, "answer_id": 47079978, "question_id": 47063130, "link": "https://stackoverflow.com/questions/47063130/having-hard-time-understanding-stdbasic-string-memory-allocation/47079978#47079978", "title": "Having hard time understanding std::basic_string memory allocation", "body": "<p>Here what we get when we look at the <strong>basic_string.h</strong> of the <strong>STDLib</strong></p>\n\n<pre><code>enum\n{\n    _S_local_capacity = 15 / sizeof(_CharT)\n};\n\nunion\n{\n    _CharT _M_local_buf[_S_local_capacity + 1];\n    size_type _M_allocated_capacity;\n};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1662107/whats-the-difference-between-stdstring-and-stdbasic-string-and-why-are-bot\">We know that <code>std::string</code> is a <code>typedef</code> for a specialization of a std::basic_string with <code>char</code> type.</a></p>\n\n<p><a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/9a59970d-c7bf-4ed5-8267-e482c4e461a7/stl-string-is-a-memory-hog?forum=vclanguage\" rel=\"nofollow noreferrer\"><code>basic_string</code> contains a 15 bytes fixed buffer for short strings then we +1 for the <code>\\0</code>.</a> So when we concatenate 2 strings which are stored into the small buffer, it will concatenate the whole then add +1 for the <code>\\0</code>. So it will be 15 + 15 + 1 = 31.</p>\n\n<p>That's what I understood from the reading of <code>basic_string.h</code></p>\n"}], "owner": {"reputation": 39, "user_id": 8791655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfabfc02d1b715c6b4a127b0494152af?s=128&d=identicon&r=PG&f=1", "display_name": "Hanseul SHIN", "link": "https://stackoverflow.com/users/8791655/hanseul-shin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 47079978, "answer_count": 1, "score": 1, "last_activity_date": 1509639454, "creation_date": 1509568065, "last_edit_date": 1509568169, "question_id": 47063130, "link": "https://stackoverflow.com/questions/47063130/having-hard-time-understanding-stdbasic-string-memory-allocation", "title": "Having hard time understanding std::basic_string memory allocation", "body": "<p>I'm currently learning STL and I came across an example made by one of my teachers.</p>\n\n<pre><code>template &lt;class T&gt;\nstruct SpyAllocator : std::allocator&lt;T&gt;\n{\ntypedef T   value_type;\n\nSpyAllocator(/*vector args*/) = default;\n\ntemplate&lt;class U&gt;\nSpyAllocator(const SpyAllocator&lt;U&gt;&amp; other){}\n\ntemplate&lt;class U&gt;\nstruct rebind\n{\n    using other = SpyAllocator&lt;U&gt;;\n};\n\nT*  allocate(std::size_t n)\n{\n    T* p = (T*) new char[sizeof(T) * n];\n\n    memorySpy.NotifyAlloc(sizeof(T), n, p);\n    return p;\n};\n\nvoid    deallocate(T* p, std::size_t n)\n{\n    memorySpy.NotifyDealloc(p, n);\n    delete (char*)p;\n}\n\ntypedef T*          pointer;\ntypedef const T*    const_pointer;\ntypedef T&amp;          reference;\ntypedef const T&amp;    const_reference;\n};\n\ntemplate &lt;class T, class U&gt;\nbool    operator==(const SpyAllocator&lt;T&gt;&amp;, const SpyAllocator&lt;U&gt;&amp;) { return \nfalse; }\n\ntemplate &lt;class T, class U&gt;\nbool    operator!=(const SpyAllocator&lt;T&gt;&amp;, const SpyAllocator&lt;U&gt;&amp;) { return \nfalse; }\n</code></pre>\n\n<p>Above is his allocator implementation.</p>\n\n<pre><code>#define String      std::basic_string&lt;char, std::char_traits&lt;char&gt;, SpyAllocator&lt;char&gt;&gt;\n</code></pre>\n\n<p>He defined <code>std::basic_string</code> as <code>String</code>.</p>\n\n<p>In the main.cpp file, </p>\n\n<pre><code>int main()\n{\n    DO(String s1 = \"Bonjour\");\n    DO(String s2 = \" le monde !\");\n    DO(String s3 = s1 + s2);\n    printf(\"s3 : %s\\n\", s3.c_str());\n\n    printf(\"\\nDestroy vector\\n\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>He is testing + operator and copy constructor and the result is</p>\n\n<pre><code>String s1 = \"Bonjour\"\n\nString s2 = \" le monde !\"\n\nString s3 = s1 + s2\n*** Allocate block 1 : 31 elem of 1 bytes\n\ns3 : Bonjour le monde !\n\nDestroy vector\n\n*** Deallocate block 1 : 31 elem of 1 bytes\n</code></pre>\n\n<p>my questions are:</p>\n\n<p>1- I've counted the number of characters(including \\0) of <code>String s1</code> and <code>String s2</code>, it's 19. But 31 is allocated. <code>Allocate block 1 : 31 elem of 1 bytes</code></p>\n\n<p>What is the reason behind this?  </p>\n\n<p>2- It seems like <code>String s1</code> and <code>String s2</code> constructors did not allocate any memory but <code>String s1</code> and <code>String s2</code> still have the value.</p>\n\n<p>How is it possible?</p>\n\n<p>Thank you for your time! </p>\n"}, {"tags": ["c++", "c++11", "doubly-linked-list", "sortedcollection"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1509568355, "post_id": 47063123, "comment_id": 81074527, "body": "Big 3 is now big 5 FYI."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1509577340, "post_id": 47063123, "comment_id": 81078200, "body": "Hi, your <code>insert</code> and <code>delete</code> methods seems ok. Your print method is also ok for me but why are you using pointer to pointer unnecessarily? Can you provide me the code how are you calling method <code>insert</code> and <code>delete</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 16565, "user_id": 3235496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8ea8f12cc0983b9b878120f7d052e42?s=128&d=identicon&r=PG", "display_name": "manlio", "link": "https://stackoverflow.com/users/3235496/manlio"}, "is_accepted": false, "score": 0, "last_activity_date": 1509786877, "last_edit_date": 1509786877, "creation_date": 1509720121, "answer_id": 47098388, "question_id": 47063123, "link": "https://stackoverflow.com/questions/47063123/sorted-list-template-implemented-using-doubly-linked-list/47098388#47098388", "title": "Sorted list template implemented using doubly linked list", "body": "<p>The <code>Delete</code> function has a strange asymmetry: if the element to be removed is the first one, the function only removes that single element; otherwise it removes all the occurrences of the element.</p>\n\n<p>For example:</p>\n\n<pre><code>SortedList&lt;char&gt; l;\n\nl.Insert('z');\nl.Insert('z');\nl.Insert('a');\nl.Insert('a');\nl.Insert('x');\nl.Insert('x');\n// l == {'a','a', 'x', 'x', 'z', 'z'}\n</code></pre>\n\n<p>now:</p>\n\n<pre><code>l.Delete('z');\n// l = {'a','a', 'x', 'x'}\n</code></pre>\n\n<p>all the occurrences of <code>'z'</code> are gone.</p>\n\n<p>While:</p>\n\n<pre><code>l.Delete('a');\n// l = {'a', 'x', 'x'}\n</code></pre>\n\n<p>just removes one element.</p>\n\n<p>This explains the different results you get.</p>\n\n<p>You should change:</p>\n\n<pre><code>if (head-&gt;data == n)\n{\n  Node&lt;T&gt; *temp = head;\n  head = head-&gt;next;\n  if (head != NULL)\n    head-&gt;pre = NULL;\n  delete(temp);\n}\n</code></pre>\n\n<p>to handle multiple deletions.</p>\n"}], "owner": {"reputation": 19, "user_id": 8870482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65aae865b4def6413548f77718e16e77?s=128&d=identicon&r=PG&f=1", "display_name": "mhs88499", "link": "https://stackoverflow.com/users/8870482/mhs88499"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509786877, "creation_date": 1509568015, "last_edit_date": 1509720791, "question_id": 47063123, "link": "https://stackoverflow.com/questions/47063123/sorted-list-template-implemented-using-doubly-linked-list", "title": "Sorted list template implemented using doubly linked list", "body": "<p>I am working on this program where I have to write a sorted list template implemented using doubly linked list. The SortedList.cpp is given to me, which contains the test bed main. I should implement the template in SortedList.h file. </p>\n\n<p>The template has a Insert, Delete and Print Function, a default constructor and the Big 3. Copy the content of the Print function in your own template:</p>\n\n<pre><code>// Implementation of Print function\nint i = 1;\nNode * p = list;\nwhile ( p != NULL )\n{\n    cout &lt;&lt; \"Node \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; p-&gt;data &lt;&lt; endl;\n    p = p-&gt;next;\n    i++;\n}\n</code></pre>\n\n<p>I did write SortedList.h, but when I compare my output with the correct output, I find that it doesn't match. </p>\n\n<p>Here is SortedList.h: </p>\n\n<pre><code>// SortedList.h list template implemented using doubly linked list.\n#ifndef SORTEDLIST_H_\n#define SORTEDLIST_H_\n# include &lt;iostream&gt;\nusing namespace std;\n// struct defining the node of the linked list\ntemplate &lt;typename T&gt;\nstruct Node {\n    T data;\n    Node&lt;T&gt; *next, *pre;\n};\n// class which defines the linked list\ntemplate &lt;typename T&gt;\nclass SortedList {\nprivate:\n    Node&lt;T&gt; *head;\npublic:\n    // default constructor\n    SortedList&lt;T&gt;()\n    {\n        head = NULL;\n    }\n    // fucntion Insert to insert the node at the end of the list\n    void Insert(T n)\n    {\n        Node&lt;T&gt; *newNode = new Node&lt;T&gt;;\n        newNode-&gt;data = n;\n        newNode-&gt;next = NULL;\n        newNode-&gt;pre = NULL;\n        if (head == NULL)\n        {\n            head = newNode;\n        }\n        else if (head-&gt;data &gt; n)\n        {\n            Node&lt;T&gt;* temp = head;\n            head = newNode;\n            newNode-&gt;next = temp;\n            temp-&gt;pre = head;\n        }\n        else {\n            Node&lt;T&gt; *temp = head;\n            Node&lt;T&gt; *prev = NULL;\n            bool inserted = false;\n            while (temp != NULL)\n            {\n                if (temp-&gt;data &gt; n)\n                {\n                    //Node* _temp = temp;\n                    newNode-&gt;pre = temp-&gt;pre;\n                    newNode-&gt;next = temp;\n                    temp-&gt;pre = newNode;\n                    if (newNode-&gt;pre != NULL)\n                    {\n                        newNode-&gt;pre-&gt;next = newNode;\n                    }\n                    inserted = true;\n                    break;\n                }\n                prev = temp;\n                temp = temp-&gt;next;\n            }\n            if (!inserted)\n            {\n                newNode-&gt;pre = prev;\n                prev-&gt;next = newNode;\n            }\n        }\n    }\n    // function to delete the node with the data n\n    void Delete(T n)\n    {\n        if (head == NULL)\n        {\n            return;\n        }\n        else {\n            if (head-&gt;data == n)\n            {\n                Node&lt;T&gt; *temp = head;\n                head = head-&gt;next;\n                if (head != NULL)\n                    head-&gt;pre = NULL;\n                delete(temp);\n            }\n            else {\n                Node&lt;T&gt; *temp = head-&gt;next;\n                while (temp != NULL)\n                {\n                    if (temp-&gt;data == n)\n                    {\n                        {\n                            temp-&gt;pre-&gt;next = temp-&gt;next;\n                            if (temp-&gt;next != NULL)\n                                temp-&gt;next-&gt;pre = temp-&gt;pre;\n                        }\n                        Node&lt;T&gt;* toDelete = temp;\n                        temp = temp-&gt;pre;\n                        if (toDelete != NULL)\n                            delete(toDelete);\n                    }\n                    temp = temp-&gt;next;\n                }\n            }\n        }\n    }\n    // function to print the list\n    void Print()\n    {\n        if (head == NULL)\n            cout &lt;&lt; \"\\n Empty list \";\n        else\n        {\n            int i = 1;\n            cout &lt;&lt; \"\\n List \" &lt;&lt; endl;\n            Node&lt;T&gt; **temp = &amp;head;\n            while ((*temp) != NULL)\n            {\n                cout &lt;&lt; \" Node \" &lt;&lt; i &lt;&lt; \":\" &lt;&lt; (*temp)-&gt;data &lt;&lt; endl;\n                temp = &amp;((*temp)-&gt;next);\n                i++;\n            }\n        }\n    }\n};\n#endif /* SORTEDLIST_H_ */\n// End of Sorted.h\n</code></pre>\n\n<p>the Output I get: </p>\n\n<pre><code>   1: \n   2:  List \n   3:  Node 1: \n   4:  Node 2: \n   5:  Node 3: \n   6:  Node 4: \n   7:  Node 5: \n   8:  Node 6: \n   9:  Node 7: \n  10:  Node 8: \n  11:  Node 9: \n  12:  Node 10:!\n  13:  Node 11:a\n  14:  Node 12:a\n  15:  Node 13:e\n  16:  Node 14:e\n  17:  Node 15:e\n  18:  Node 16:g\n  19:  Node 17:g\n  20:  Node 18:h\n  21:  Node 19:h\n  22:  Node 20:i\n  23:  Node 21:i\n  24:  Node 22:i\n  25:  Node 23:i\n  26:  Node 24:l\n  27:  Node 25:n\n  28:  Node 26:n\n  29:  Node 27:o\n  30:  Node 28:r\n  31:  Node 29:r\n  32:  Node 30:r\n  33:  Node 31:s\n  34:  Node 32:s\n  35:  Node 33:s\n  36:  Node 34:s\n  37:  Node 35:s\n  38:  Node 36:t\n  39:  Node 37:t\n  40:  Node 38:t\n  41:  Node 39:t\n  42:  Node 40:t\n  43:  Node 41:t\n  44:  Node 42:v\n  45:  Node 43:v\n  46:  Node 44:y\n  47:  Node 45:y\n  48: Which one do you want to delete?\n  49: Which one do you want to delete?\n  50: Which one do you want to delete?\n  51: Which one do you want to delete?\n  52: Which one do you want to delete?\n  53: Which one do you want to delete?\n  54: \n  55:  List \n  56:  Node 1: \n  57:  Node 2: \n  58:  Node 3: \n  59:  Node 4: \n  60:  Node 5: \n  61:  Node 6: \n  62:  Node 7: \n  63:  Node 8: \n  64:  Node 9: \n  65:  Node 10:!\n  66:  Node 11:e\n  67:  Node 12:e\n  68:  Node 13:e\n  69:  Node 14:g\n  70:  Node 15:g\n  71:  Node 16:h\n  72:  Node 17:h\n  73:  Node 18:l\n  74:  Node 19:n\n  75:  Node 20:n\n  76:  Node 21:o\n  77:  Node 22:r\n  78:  Node 23:r\n  79:  Node 24:r\n  80:  Node 25:s\n  81:  Node 26:s\n  82:  Node 27:s\n  83:  Node 28:s\n  84:  Node 29:s\n  85:  Node 30:t\n  86:  Node 31:t\n  87:  Node 32:t\n  88:  Node 33:t\n  89:  Node 34:t\n  90:  Node 35:t\n  91:  Node 36:v\n  92:  Node 37:v\n  93:  Node 38:y\n  94:  Node 39:y\n  95: \n  96:  List \n  97:  Node 1:3.14\n</code></pre>\n\n<p>Here is the correct output I should get: </p>\n\n<pre><code>1: Node 1:  \n   2: Node 2: !\n   3: Node 3: a\n   4: Node 4: e\n   5: Node 5: g\n   6: Node 6: h\n   7: Node 7: i\n   8: Node 8: l\n   9: Node 9: n\n  10: Node 10: o\n  11: Node 11: r\n  12: Node 12: s\n  13: Node 13: t\n  14: Node 14: v\n  15: Node 15: y\n  16: Which one do you want to delete?\n  17: Which one do you want to delete?\n  18: Which one do you want to delete?\n  19: Which one do you want to delete?\n  20: Which one do you want to delete?\n  21: Which one do you want to delete?\n  22: Node 1:  \n  23: Node 2: !\n  24: Node 3: e\n  25: Node 4: g\n  26: Node 5: h\n  27: Node 6: l\n  28: Node 7: n\n  29: Node 8: o\n  30: Node 9: r\n  31: Node 10: s\n  32: Node 11: t\n  33: Node 12: v\n  34: Node 13: y\n  35: Node 1: 3.14\n</code></pre>\n\n<p>Would anyone be able to tell me what I am doing wrong? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1509568292, "post_id": 47063096, "comment_id": 81074500, "body": "<code>ios::app</code> tells it to append. You need to keep the stream object around. Don&#39;t open the file every time you need to write something to it."}, {"owner": {"reputation": 728, "user_id": 7049669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1256258031072147/picture?type=large", "display_name": "Michael Grinnell", "link": "https://stackoverflow.com/users/7049669/michael-grinnell"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1509568482, "post_id": 47063096, "comment_id": 81074588, "body": "ok, I see what your saying. I should open the file outside the for loop and then append each song object to it yes?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1509568516, "post_id": 47063096, "comment_id": 81074613, "body": "Pretty much. I&#39;ll make an answer."}], "answers": [{"tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1509568687, "creation_date": 1509568687, "answer_id": 47063276, "question_id": 47063096, "link": "https://stackoverflow.com/questions/47063096/c-writing-data-to-file-without-duplicates/47063276#47063276", "title": "c++ writing data to file without duplicates", "body": "<p>You need to open the file once and write to the same stream object. Without the <code>ios::app</code> parameter it will truncate the file when it's opened for writing. Also, you don't need to <code>close()</code> a <code>std::ofstream</code> because it's closed automatically in its destructor.</p>\n\n<pre><code>void SongLibrary::SaveAllToFile(const std::string&amp; filename)\n{\n    std::ofstream outfile(filename);\n    for(auto&amp; song: m_songs)\n        outfile &lt;&lt; song.ToFileString();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2776, "user_id": 8300271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0ORw.jpg?s=128&g=1", "display_name": "Rahul Verma", "link": "https://stackoverflow.com/users/8300271/rahul-verma"}, "is_accepted": false, "score": 1, "last_activity_date": 1509569055, "last_edit_date": 1509569055, "creation_date": 1509568696, "answer_id": 47063279, "question_id": 47063096, "link": "https://stackoverflow.com/questions/47063096/c-writing-data-to-file-without-duplicates/47063279#47063279", "title": "c++ writing data to file without duplicates", "body": "<p>You shouldn't open/close the file each time you're writing something in it, as you did in your <code>WriteToFile</code> function (in append mode)</p>\n\n<p>Just create an <code>ofstream</code> object and pass it to your <code>WriteToFile</code> function like this. </p>\n\n<pre><code>void SongLibrary::SaveAllToFile(string fileName)\n{\n    ofstream outfile(filename);\n\n    for (Song song : m_songs)\n    {\n        WriteToFile(song.ToFileString(),outfile);\n    }\n\n    outfile.close();\n}\n</code></pre>\n\n<p>And change your <code>WriteToFile</code> function to handle this object : </p>\n\n<pre><code>void SongLibrary::WriteToFile(string data, ofstream&amp; outfile)\n{\n        outfile &lt;&lt; data;\n}\n</code></pre>\n"}], "owner": {"reputation": 728, "user_id": 7049669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1256258031072147/picture?type=large", "display_name": "Michael Grinnell", "link": "https://stackoverflow.com/users/7049669/michael-grinnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 47063276, "answer_count": 2, "score": 0, "last_activity_date": 1509569055, "creation_date": 1509567945, "question_id": 47063096, "link": "https://stackoverflow.com/questions/47063096/c-writing-data-to-file-without-duplicates", "title": "c++ writing data to file without duplicates", "body": "<p>I have created some methods which will write song data to a text file.\nIf the file doesn't exist it will create a new one.</p>\n\n<p>The problem I am having is that every time I run the application again it will append to the file and duplicate all the data.</p>\n\n<p><strong>This Method is called first</strong></p>\n\n<pre><code>void SongLibrary::SaveAllToFile(string fileName)\n{\n    for (Song song : m_songs)\n    {\n        WriteToFile(song.ToFileString(),fileName);\n    }\n}\n</code></pre>\n\n<p><strong>This method is called once for each song object</strong></p>\n\n<pre><code>void SongLibrary::WriteToFile(string data, string fileName)\n{\n    if (FileExists(fileName))\n    {\n        ofstream outfile;\n        outfile.open(fileName, ios::app);\n        outfile &lt;&lt; data;\n\n        outfile.close();\n    }\n    else\n    {\n        CreateFile(fileName);\n        WriteToFile(data, fileName);\n    }\n}\n</code></pre>\n\n<p><strong>This method creates a file</strong></p>\n\n<pre><code>void SongLibrary::CreateFile(string fileName)\n{\n    ofstream outfile(fileName);\n    outfile.close();\n}\n</code></pre>\n\n<p><strong>This method checks if a file exists</strong></p>\n\n<pre><code>inline bool SongLibrary::FileExists(const string&amp; fileName) \n{\n    struct stat buffer;\n    return (stat(fileName.c_str(), &amp;buffer) == 0);\n}\n</code></pre>\n"}, {"tags": ["c++", "swap"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 5, "creation_date": 1509567921, "post_id": 47063074, "comment_id": 81074316, "body": "<code>void swap1(double&amp; num1, double&amp; num2);</code> in your main function is a function declaration, not a function call"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 2, "creation_date": 1509568093, "post_id": 47063074, "comment_id": 81074407, "body": "Not worth the downvotes and close votes. It&#39;s an MCVE and the error is not obvious for a beginner because there aren&#39;t even compiler warnings."}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509568153, "post_id": 47063074, "comment_id": 81074434, "body": "@Justin I didnt notice I did that, thank you so much"}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568271, "post_id": 47063074, "comment_id": 81074491, "body": "@ChristianHackl sorry if my questions are bad, I am a beginner and still learning to read some errors."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568312, "post_id": 47063074, "comment_id": 81074506, "body": "@ChristianHackl Maybe it&#39;s reasonable to not downvote this question as it is well formulated, but IMO the close votes are appropriate. This is a typo, and especially I don&#39;t see this being &quot;resolved in a manner [likely] to help future readers.&quot; Anyone who has ever called a function in C++ will not run into this problem"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568509, "post_id": 47063074, "comment_id": 81074610, "body": "@Vincent: You misunderstand - <i>I</i> am not the one who thought the question was bad :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509568595, "post_id": 47063074, "comment_id": 81074651, "body": "@Justin: I&#39;m not entirely sure it&#39;s really a typo, and the <i>&quot;function does nothing&quot;</i> part in the title may well match someone&#39;s search terms."}], "answers": [{"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 1, "last_activity_date": 1509567994, "creation_date": 1509567994, "answer_id": 47063111, "question_id": 47063074, "link": "https://stackoverflow.com/questions/47063074/c-swap-function-does-nothing/47063111#47063111", "title": "C++ SWAP Function does nothing?", "body": "<blockquote>\n<pre><code>cout &lt;&lt; \"Original: \" &lt;&lt; num1 &lt;&lt; \", \" &lt;&lt; num2 &lt;&lt; endl;\nvoid swap1(double&amp; num1, double&amp; num2);\n</code></pre>\n</blockquote>\n\n<p>This does not call <code>swap1</code>. It is a (re-)declaration, not a function call. Use this instead:</p>\n\n<pre><code>swap1(num1, num2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1509568001, "creation_date": 1509568001, "answer_id": 47063115, "question_id": 47063074, "link": "https://stackoverflow.com/questions/47063074/c-swap-function-does-nothing/47063115#47063115", "title": "C++ SWAP Function does nothing?", "body": "<p>Change:</p>\n\n<pre><code> void swap1(double&amp; num1, double&amp; num2);\n void swap2(double&amp; num1, double&amp; num2);\n</code></pre>\n\n<p>In your main function to:</p>\n\n<pre><code>swap1(num1, num2);\nswap2(num1, num2);\n</code></pre>\n\n<p>And it should work, since you are using a function, not declaring it in your main function.</p>\n"}], "owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1509568135, "accepted_answer_id": 47063115, "answer_count": 2, "score": 0, "last_activity_date": 1509568010, "creation_date": 1509567826, "question_id": 47063074, "link": "https://stackoverflow.com/questions/47063074/c-swap-function-does-nothing", "closed_reason": "Not suitable for this site", "title": "C++ SWAP Function does nothing?", "body": "<p>For some reason this returns the original values, can someone tell me why? thank you! I set temp, not sure if this is right since num1 and num2 need to be set equal and they would both hold 1 value if I didn't.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid swap1(double&amp; num1, double&amp; num2);\nvoid swap2(double&amp; num1, double&amp; num2);\n\ndouble num1, num2;\n\nint main(){\n    cout &lt;&lt; \"Give me two numbers to swap: \";\n    cin &gt;&gt; num1 &gt;&gt; num2;\n\n    cout &lt;&lt; \"Original: \" &lt;&lt; num1 &lt;&lt; \", \" &lt;&lt; num2 &lt;&lt; endl;\n    void swap1(double&amp; num1, double&amp; num2);\n    cout &lt;&lt; \"First swap: \" &lt;&lt; num1 &lt;&lt; \", \" &lt;&lt; num2 &lt;&lt; endl;\n    void swap2(double&amp; num1, double&amp; num2);\n    cout &lt;&lt; \"Second swap: \" &lt;&lt; num1 &lt;&lt; \", \" &lt;&lt; num2 &lt;&lt; endl;\n\n\n}\n\nvoid swap1(double&amp; num1, double&amp; num2){\n    double temp1;\n    temp1 = num1;\n    num1 = num2;\n    num2 = temp1;\n}\n\nvoid swap2 (double&amp; num1, double&amp; num2){\n    double temp2;\n    temp2 = num1;\n    num1 = num2;\n    num2 = temp2;\n}\n</code></pre>\n\n<p>Output: Sorry for bad formatting! </p>\n\n<pre><code>Running /home/ubuntu/workspace/ASSIGN#31.cpp\nGive me two numbers to swap: 10 20\nOriginal: 10, 20\nFirst swap: 10, 20\nSecond swap: 10, 20\n</code></pre>\n"}, {"tags": ["c++", "unique-ptr"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509567747, "post_id": 47063039, "comment_id": 81074250, "body": "You are missing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. There&#39;s no way for us to know what your code is unless you show it to us."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1509567847, "post_id": 47063039, "comment_id": 81074278, "body": "<code>priority_queue::top</code> returns a <code>const&amp;</code> to the element"}, {"owner": {"reputation": 647, "user_id": 4324307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e6317b0559133034165efa17657e17d?s=128&d=identicon&r=PG&f=1", "display_name": "zcahfg2", "link": "https://stackoverflow.com/users/4324307/zcahfg2"}, "edited": false, "score": 0, "creation_date": 1509568485, "post_id": 47063039, "comment_id": 81074591, "body": "I think I supplied more than enough information for this question. I was asking a general question why a member of certain data structure can be moved while others cannot..."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 1, "last_activity_date": 1509567945, "creation_date": 1509567945, "answer_id": 47063095, "question_id": 47063039, "link": "https://stackoverflow.com/questions/47063039/c-unique-ptr-rvalue-passing-using-stdmove-not-working/47063095#47063095", "title": "C++ unique_ptr rvalue passing using std::move not working", "body": "<p><code>std::priority_queue::top()</code> only has a <code>const</code> overload returning a <code>const</code> reference. This cannot be moved from.</p>\n\n<p><code>std::deque::front()</code> on the other hand has const and non-const overloads returning equally qualified references. You seem to be using the non-const overload, the result of which can be moved from.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1509568490, "last_edit_date": 1509568490, "creation_date": 1509568085, "answer_id": 47063135, "question_id": 47063039, "link": "https://stackoverflow.com/questions/47063039/c-unique-ptr-rvalue-passing-using-stdmove-not-working/47063135#47063135", "title": "C++ unique_ptr rvalue passing using std::move not working", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue/top\" rel=\"nofollow noreferrer\">documentation of std::priority_queue::top()</a></p>\n\n<blockquote>\n  <p>const_reference top() const;</p>\n</blockquote>\n\n<p>it returns const reference, which by <code>std::move</code> would be converted to <code>const T &amp;&amp;</code> . On another side <code>const T &amp;&amp;</code> is not accepted by move ctor of <code>std::unqiue_ptr</code>, as it does not have such overload, it only accepts <code>T &amp;&amp;</code> (without <code>const</code>) see <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/unique_ptr\" rel=\"nofollow noreferrer\">documentation of std::unqiue_ptr ctors</a></p>\n\n<p>On why const reference is accepted by <code>std::move</code> see here <a href=\"https://stackoverflow.com/questions/28595117/why-can-we-use-stdmove-on-a-const-object\">Why can we use <code>std::move</code> on a <code>const</code> object?</a></p>\n"}], "owner": {"reputation": 647, "user_id": 4324307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e6317b0559133034165efa17657e17d?s=128&d=identicon&r=PG&f=1", "display_name": "zcahfg2", "link": "https://stackoverflow.com/users/4324307/zcahfg2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 47063135, "answer_count": 2, "score": -1, "last_activity_date": 1509568490, "creation_date": 1509567645, "question_id": 47063039, "link": "https://stackoverflow.com/questions/47063039/c-unique-ptr-rvalue-passing-using-stdmove-not-working", "title": "C++ unique_ptr rvalue passing using std::move not working", "body": "<pre><code>error: call to implicitly-deleted copy of 'unique_ptr&lt;Searchable&gt;'                                                                      \nunique_ptr&lt;Searchable&gt; current(std::move(searchSpace.top()));\n</code></pre>\n\n<p>Hello,   </p>\n\n<p>I am trying to figure out why this doesn't compile. Search space is priority queue and I am trying to move rvalue searchSpace.top() to new current object.</p>\n\n<p>Strangely enough, If I change priority queue to deque :</p>\n\n<pre><code>        unique_ptr&lt;Searchable&gt; current(std::move(Q.front()));\n</code></pre>\n\n<p>This worked fine when Q is deque.</p>\n\n<p>So why is the latter one working not the first one?</p>\n\n<p>rest of the error message:</p>\n\n<pre><code> copy constructor is implicitly deleted because 'unique_ptr&lt;Searchable,\n  std::__1::default_delete&lt;Searchable&gt; &gt;' has a user-declared move\n  constructor\n_LIBCPP_INLINE_VISIBILITY unique_ptr(unique_ptr&amp;&amp; __u) _NOEXCEPT  \n</code></pre>\n"}, {"tags": ["c++", "arrays", "constexpr"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1509567618, "post_id": 47062986, "comment_id": 81074193, "body": "What happens to the loop is entirely up to the compiler. The compiler is free to unroll the loop in this manner, but is not required to. The compiler can simply generate unoptimized code. The compiler can do different things depending on the compilation options. The C++ standard allows the compiler to make any optimization, as long as there are no observable effects of the optimization."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509567661, "post_id": 47062986, "comment_id": 81074215, "body": "You&#39;re using <code>std::array</code>, so why not iterate over it properly rather than presume there&#39;s 5 entries?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1509567733, "post_id": 47062986, "comment_id": 81074246, "body": "I think in this case you have simplified it to the point where you are correct that there is no reason. The advantages of std::array over C arrays are basically that they fit the STL container metaphors, so you only have to learn one thing. In this case, for example, you could rewrite the for as for(auto param: params_name), which you couldn&#39;t do so easily with a C array."}, {"owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1509568004, "post_id": 47062986, "comment_id": 81074364, "body": "@tadman : I&#39;ve edited my code."}, {"owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1509568194, "post_id": 47062986, "comment_id": 81074454, "body": "@Ron : compile fine in VS2015 though !"}, {"owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1509568198, "post_id": 47062986, "comment_id": 81074456, "body": "@Sam Varshavchik : I don&#39;t understand however how it would work during run time if the loop has not been unrolled ? The array would have to be initialized at run time right, bypassing the use of the &#39;constexpr&#39; keyword then ?"}, {"owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1509568352, "post_id": 47062986, "comment_id": 81074525, "body": "@Gem Taylor : the point of the question is about the use of constexpr, not about the use of std::array over a rough C style array ;)"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1509569495, "post_id": 47062986, "comment_id": 81075052, "body": "&quot;as long as there are no observable effects&quot;. A <code>constexpr</code> object is not etched in stone. There is no requirement, whatsoever, that the contents of the <code>constexpr</code> object are hardcoded into the executable. The C++ compiler is free to generate code that uses a random number generator until it randomly produces the contents of the <code>constexpr</code> object, <b><i>as long as there are no observable effects</i></b>. That is, as long as your application, your code, at runtime, cannot &quot;observe&quot; the contents of the incomplete object. As long as it is not possible for the code to &quot;see&quot; the incomplete object."}], "answers": [{"tags": [], "owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "is_accepted": false, "score": 0, "last_activity_date": 1511233674, "creation_date": 1511233674, "answer_id": 47404546, "question_id": 47062986, "link": "https://stackoverflow.com/questions/47062986/constexpr-and-array/47404546#47404546", "title": "Constexpr and array", "body": "<p>One problem with your code is that at present <code>std::array</code> isn't constexpr-enabled. You can work around this by simply using a regular array such as</p>\n\n<pre><code>constexpr char const * const my_array[5] = { /* ... */ };\n</code></pre>\n\n<p>As for your question:</p>\n\n<p>All <code>constexpr</code> really means is \"this value is known at compile time\".</p>\n\n<blockquote>\n  <p>Is the loop unrolled and becomes ?</p>\n</blockquote>\n\n<p>I don't know. It depends on your compiler, architecture, standard library implementation, and optimization settings. I wouldn't think about this too much. You can be confident that at reasonable optimization levels (-O1 and -O2) your compiler will weigh the benefits and drawbacks of doing this vs not, and pick <strong>a good option</strong>.</p>\n\n<blockquote>\n  <p>If it's the case, is the behaviour identical regardless the number of elements contained in the params_name array ?</p>\n</blockquote>\n\n<p>Yes! It doesn't matter whether the compiler unrolls the loop. When your code runs, it will appear to behave exactly like what you wrote. This is called the \"as-if\" rule, meaning that no matter what optimizations the compiler does, the resulting program must behave \"as-if\" it does what you wrote (assuming your code doesn't invoke undefined behavior).</p>\n\n<blockquote>\n  <p>could be more interesting just to store those values in a regular array built at run time to avoid code expansion?</p>\n</blockquote>\n\n<p>From where would these values come if you did? From standard input? From a file? If yes, then the compiler can't know what they will be or how many there will be, so it has little choice but to make a runtime loop. If no, then even if the array is not <code>constexpr</code>, the compiler is likely smart enough to figure out what you mean and optimize the program to be the same as with a <code>constexpr</code> array.</p>\n\n<p>To summarize: don't worry about things like loop unrolling or code duplication. Modern compilers are pretty smart and will usually generate the right code for your situation. The amount of extra memory spent on loop unrolling like this is usually more than offset by the performance improvements. Unless you're on an embedded system where every byte matters, just don't worry about it.</p>\n"}], "owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511233674, "creation_date": 1509567405, "last_edit_date": 1509567981, "question_id": 47062986, "link": "https://stackoverflow.com/questions/47062986/constexpr-and-array", "title": "Constexpr and array", "body": "<p>Consider the following code snippet (of course this piece of code is not useful at all but I've simplified it just to demonstrate my question) :</p>\n\n<pre><code>constexpr std::array&lt;char*, 5&gt; params_name\n{\n    \"first_param\",\n    \"second_param\",\n    \"third_param\",\n    \"fourth_param\",\n    \"fifth_param\"\n};\n\nint main()\n{\n    std::vector&lt;std::string&gt; a_vector;\n    for (int i = 0; i &lt; params_name.size(); ++i) {\n        a_vector.push_back(params_name[i]);\n    }\n}\n</code></pre>\n\n<p>I would like to be sure understanding what happens to the for loop during compilation. Is the loop unrolled and becomes ? :</p>\n\n<pre><code>a_vector.push_back(\"first_param\")\na_vector.push_back(\"second_param\")\na_vector.push_back(\"third_param\")\na_vector.push_back(\"fourth_param\")\na_vector.push_back(\"fifth_param\")\n</code></pre>\n\n<p>If it's the case, is the behaviour identical regardless the number of elements contained in the params_name array ? If yes, then I'm wondering whether it could be more interesting just to store those values in a regular array built at run time to avoid code expansion ? </p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c++", "fstream", "pbs"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1509566950, "post_id": 47062859, "comment_id": 81073853, "body": "You should probably try <a href=\"https://stackoverflow.com/questions/1599459/optimal-lock-file-method\">locking the file</a> to avoid concurrent writes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1509567052, "post_id": 47062859, "comment_id": 81073909, "body": "No way of doing this with C++ Standard Library - your OS may have features that support it."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1509567220, "post_id": 47062859, "comment_id": 81074001, "body": "This has little to do with the C++. More like consuming OS specific APIs."}, {"owner": {"reputation": 13578, "user_id": 1328439, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CuI4k.jpg?s=128&g=1", "display_name": "Dmitri Chubarov", "link": "https://stackoverflow.com/users/1328439/dmitri-chubarov"}, "edited": false, "score": 0, "creation_date": 1509598049, "post_id": 47062859, "comment_id": 81083503, "body": "What operating system and file system are you using? Some distributed file systems such as NFS support <code>flock</code>."}], "owner": {"reputation": 11, "user_id": 8338717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a84c1f3f0d1dd0278992a524adfe0bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/8338717/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509566843, "creation_date": 1509566843, "question_id": 47062859, "link": "https://stackoverflow.com/questions/47062859/checking-to-see-whether-or-not-a-file-is-open-in-another-program", "title": "Checking to see whether or not a file is open in another program", "body": "<p>I have a c++ program that is split into pbs jobs and is then submitted to a computing cluster. I want the output of each job to be written to the same file; I have tried appending the file but this leads to abunch of nonsense since the same file gets opened by each job so not every job gets to write all of its output to the file. I was wondering if there is a way to check whether or not a file is open or closed in another program?</p>\n\n<p>P.S. I checked if there were any helpful answers about similar question and there were not so I felt the need to ask this version </p>\n"}, {"tags": ["c++", "recursion", "dynamic-programming", "minmax-heap"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509566065, "post_id": 47062656, "comment_id": 81073355, "body": "Is this a quiz? homework? It&#39;s definitely not a question."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1509568515, "creation_date": 1509568515, "answer_id": 47063243, "question_id": 47062656, "link": "https://stackoverflow.com/questions/47062656/how-should-i-implement-recursion-method-to-find-number-of-ways-to-form-max-heap/47063243#47063243", "title": "How should I implement recursion method to find number of ways to form max heap in C++?", "body": "<p>I believe that you're missing the loop that encloses the formula you posted.  You vary <code>n1</code> from <code>1</code> through <code>n-1</code>.  If \"max heap\" requires that you consume all <code>n</code> nodes, then you have simply <code>n2 = n-n1</code>.  If you can use fewer, then you need another loop to vary <code>n2</code> from <code>1</code> through <code>n-n1</code>.</p>\n\n<p>Return the sum of all those computed quantities.</p>\n"}], "owner": {"reputation": 101, "user_id": 8486543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yDEBk.png?s=128&g=1", "display_name": "Prateek Oraon", "link": "https://stackoverflow.com/users/8486543/prateek-oraon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1509568515, "creation_date": 1509565992, "question_id": 47062656, "link": "https://stackoverflow.com/questions/47062656/how-should-i-implement-recursion-method-to-find-number-of-ways-to-form-max-heap", "title": "How should I implement recursion method to find number of ways to form max heap in C++?", "body": "<p>If dp[n] stores the number of ways of forming max heap containing n elements, then we have.</p>\n\n<pre><code>dp[n] = nCr(n - 1, n1) * dp[n1] * dp[n2];\n</code></pre>\n\n<p>i.e.</p>\n\n<ol>\n<li><p>Select n1 elements out of n - 1 for left subtree.</p></li>\n<li><p>Elements in left subtree can form max heap in dp[n1] ways.</p></li>\n<li><p>Elements in right subtree can form max heap in dp[n2] ways.</p></li>\n</ol>\n\n<p>How to calculate n1 and n2?</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "remote-debugging"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6357139"}, "edited": false, "score": 0, "creation_date": 1509566078, "post_id": 47062648, "comment_id": 81073360, "body": "You can debug C++ with <code>gdbserver</code> on Linux"}, {"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1509566123, "post_id": 47062648, "comment_id": 81073390, "body": "First: post <i>one</i> question, not <i>four</i>. Second: Why not try it out? Anyway: would an answer such as &quot;yes, maybe, no, no&quot; help you at all? I suppose no. But that&#180;s what you probably get when posting such unspecific questions. So please post an actual specific problem, not just a fictious issue."}, {"owner": {"reputation": 403, "user_id": 818117, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/f8c0a0ae972b7bc4195ef41f8fcc282a?s=128&d=identicon&r=PG", "display_name": "user818117", "link": "https://stackoverflow.com/users/818117/user818117"}, "edited": false, "score": 1, "creation_date": 1509566525, "post_id": 47062648, "comment_id": 81073618, "body": "@everyone remote debugging is supported,question is edit-and-continue supported or not,not debugging itself"}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 4579959, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c7fad646b1aa65332ceb4d063c32a573?s=128&d=identicon&r=PG&f=1", "display_name": "Ksdmg", "link": "https://stackoverflow.com/users/4579959/ksdmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1511253040, "creation_date": 1511253040, "answer_id": 47408471, "question_id": 47062648, "link": "https://stackoverflow.com/questions/47062648/is-edit-and-continue-supported-on-remote-debugging-with-c-or-c/47408471#47408471", "title": "Is edit-and-continue supported on remote-debugging with c++ or c#?", "body": "<p>According to MSDocs, for C# I found the following information:</p>\n\n<blockquote>\n  <p>Do not make changes to the code or rebuild (or you must repeat this\n  step). The executable you copied to the remote machine must exactly\n  match your local source and symbols.\n  <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/remote-debugging-csharp\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/debugger/remote-debugging-csharp</a></p>\n</blockquote>\n\n<p>For c++ this information is a little bit more cryptic:</p>\n\n<blockquote>\n  <p>Alternatively, you can deploy the files as a separate step. In the\n  Solution Explorer, right-click the mymfc node and then choose Deploy.\n  <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/remote-debugging-cpp\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/debugger/remote-debugging-cpp</a></p>\n</blockquote>\n\n<p>So for my understanding this means, that there is no way around manually deploying the files to the remote machine because your local files must always match the remote file.</p>\n"}], "owner": {"reputation": 403, "user_id": 818117, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/f8c0a0ae972b7bc4195ef41f8fcc282a?s=128&d=identicon&r=PG", "display_name": "user818117", "link": "https://stackoverflow.com/users/818117/user818117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511253040, "creation_date": 1509565943, "question_id": 47062648, "link": "https://stackoverflow.com/questions/47062648/is-edit-and-continue-supported-on-remote-debugging-with-c-or-c", "title": "Is edit-and-continue supported on remote-debugging with c++ or c#?", "body": "<p>is edit-and-continue debugging supported in below platforms remotely ?</p>\n\n<ul>\n<li>c++ remote-debugging on windows ?</li>\n<li>c++ remote-debugging on Linux ?</li>\n<li>c#  remote-debugging on windows ?</li>\n<li>c#  remote-debugging on Linux with mono/dotnet core ?</li>\n</ul>\n"}, {"tags": ["c++", "base-class"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1509565708, "post_id": 47062562, "comment_id": 81073124, "body": "Did you mean to make <code>B1</code> a private base? If not, make it <code>class D1 : public B1 {...};</code> If yes, then the error message is proper and expected - the whole point of private inheritance is to make the base class inaccessible."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 38, "last_activity_date": 1509565696, "creation_date": 1509565696, "answer_id": 47062590, "question_id": 47062562, "link": "https://stackoverflow.com/questions/47062562/conversion-to-inaccessible-base-class-is-not-allowed/47062590#47062590", "title": "conversion to inaccessible base class is not allowed", "body": "<pre><code>class D1 :B1\n</code></pre>\n\n<p>Inheritance of classes is <code>private</code> by default, you should make it <code>public</code>:</p>\n\n<pre><code>class D1 : public B1\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14510, "favorite_count": 2, "closed_date": 1509566358, "answer_count": 1, "score": 14, "last_activity_date": 1509565696, "creation_date": 1509565602, "question_id": 47062562, "link": "https://stackoverflow.com/questions/47062562/conversion-to-inaccessible-base-class-is-not-allowed", "closed_reason": "Duplicate", "title": "conversion to inaccessible base class is not allowed", "body": "<p>I define a class B1 and a derived class D1 at first. Then I want to define a reference to B1 and initialize that to the D1 object I just defined. Here comes the error, saying that \"conversion to inaccessible base class 'B1' is not allowed\", which I don't know why.</p>\n\n<pre><code>#include \"std_lib_facilities.h\"\n\nclass B1 {\npublic:\n    virtual void vf() { cout &lt;&lt; \"B1::vf()\\n\"; };\n    void f() { cout &lt;&lt; \"B1::f()\\n\"; };\n};\n\nclass D1 :B1 {\npublic:\n    void vf() { cout &lt;&lt; \"D1:vf()\\n\"; };\n    void f() { cout &lt;&lt; \"D1::f()\\n\"; };\n};\n\n\n\n\nint main()\n{\n    B1 b1;\n    b1.vf();\n    b1.f();\n\n    D1 d1;\n    d1.vf();\n    d1.f();\n\n    B1&amp; db=d1;//error\n\n    keep_window_open();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 6, "creation_date": 1509565119, "post_id": 47062419, "comment_id": 81072822, "body": "It holds an invalid address. No telling what it points to"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1509565194, "post_id": 47062419, "comment_id": 81072877, "body": "Yes, its value doesn&#39;t change."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1509565229, "post_id": 47062419, "comment_id": 81072895, "body": "@James: Perhaps, but the set of things you can do with that value just became empty."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509565263, "post_id": 47062419, "comment_id": 81072912, "body": "@BenVoigt Agreed, its value is useless."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1509565286, "post_id": 47062419, "comment_id": 81072920, "body": "@JamesAdkison actually I believe to read value of that pointer is UB, so there is now way to check if value did change"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1509565362, "post_id": 47062419, "comment_id": 81072949, "body": "But you may write <code>cout &lt;&lt; *a;</code> and the program prints 1. You are not allowed to do that, but it may work."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509565486, "post_id": 47062419, "comment_id": 81073008, "body": "@manni66 The set of things you can do with <code>a</code> excludes anything that causes undefined behavior like <code>cout &lt;&lt; *a</code>. It&#39;s not because it compiles that you are allowed to do it."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1509565503, "post_id": 47062419, "comment_id": 81073018, "body": "@Slava I know dereferencing the pointer would be UB. However, just reading (e.g., <code>std::cout &lt;&lt; a &lt;&lt; &quot;\\n&quot;;</code>) is also UB?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 5, "creation_date": 1509565577, "post_id": 47062419, "comment_id": 81073061, "body": "@JamesAdkison See <a href=\"https://stackoverflow.com/a/44182938/7359094\">stackoverflow.com/a/44182938/7359094</a>"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509565750, "post_id": 47062419, "comment_id": 81073153, "body": "@Fran&#231;oisAndrieux Thanks!"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1509565752, "post_id": 47062419, "comment_id": 81073154, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44182049/pointers-in-c-after-delete\">Pointers in c++ after delete</a>"}, {"owner": {"reputation": 676, "user_id": 8340131, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213822252052614/picture?type=large", "display_name": "Johnathan Gross", "link": "https://stackoverflow.com/users/8340131/johnathan-gross"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509566187, "post_id": 47062419, "comment_id": 81073427, "body": "@Fran&#231;oisAndrieux It isn&#39;t exactly the same question, but the top comment does answer mine, &quot;undefined behavior&quot;."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509570031, "post_id": 47062419, "comment_id": 81075329, "body": "Related: <a href=\"https://stackoverflow.com/questions/45149756/is-delete-allowed-to-modify-its-parameter\" title=\"is delete allowed to modify its parameter\">stackoverflow.com/questions/45149756/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/45839129/are-underlying-bytes-of-an-object-allowed-to-change-if-the-value-is-not-changed\" title=\"are underlying bytes of an object allowed to change if the value is not changed\">stackoverflow.com/questions/45839129/&hellip;</a>. The conclusion of these answers is the standard is not clear on this subject (as far as I understand)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509570387, "post_id": 47062419, "comment_id": 81075498, "body": "And there is one implementation which <b>changes</b> pointer value after delete: visual studio with the option <code>&#47;sdl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1509565182, "creation_date": 1509565182, "answer_id": 47062455, "question_id": 47062419, "link": "https://stackoverflow.com/questions/47062419/what-does-a-deleted-pointer-point-to/47062455#47062455", "title": "What does a deleted pointer point to?", "body": "<p>It doesn't point to anything. There is nothing useful you can do with its value now.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1509565339, "post_id": 47062483, "comment_id": 81072937, "body": "Actually does language specify if value is changed or not? There is no way to check if it changed"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1509565427, "post_id": 47062483, "comment_id": 81072983, "body": "<i>&quot;After the delete, the pointer&#39;s value is unchanged.&quot;</i> That&#39;s not guaranteed."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1509565589, "post_id": 47062483, "comment_id": 81073070, "body": "@BaummitAugen: Would you agree that all of the following guarantee the pointer <code>a</code>&#39;s value is unchanged? <code>delete +a;</code>  <code>delete a+0;</code>  <code>delete ((int*)a);</code>  <code>auto c = a; delete c;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509565627, "post_id": 47062483, "comment_id": 81073081, "body": "afaik implementations are allow to set the pointer to <code>nullptr</code> during <code>delete</code>,"}, {"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509565729, "post_id": 47062483, "comment_id": 81073137, "body": "@tobi303: the argument to delete may be a rvalue expression, so it might not be modifieable at all"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1509565760, "post_id": 47062483, "comment_id": 81073159, "body": "@tobi303: It is certainly difficult to detect whether it has changed, without introducing undefined behavior.  I believe however that one could safely <code>memcpy</code> the pointer value (not dereferenced!) to a byte buffer of sufficient size."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509565760, "post_id": 47062483, "comment_id": 81073160, "body": "@BenVoigt I think so, but how would you check that? Copy its object representation to a <code>char[]</code> and compare that?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 0, "creation_date": 1509565806, "post_id": 47062483, "comment_id": 81073191, "body": "@AndreasH. It is possible that the value does not change, but this answer states something different: &quot;After the delete, the pointer&#39;s value is unchanged&quot; which is: it cannot change"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1509565808, "post_id": 47062483, "comment_id": 81073194, "body": "@BaummitAugen: Yes, that&#39;s the only legal operation I can think of, on a pointer holding an invalid value."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509566001, "post_id": 47062483, "comment_id": 81073313, "body": "@BenVoigt I have to admit that I am a little bit confused after reading <a href=\"https://stackoverflow.com/a/44182938/4117728\">this answer</a>. I am starting to believe that there a millions of programs with UB out there and I am just happy that I didnt use any <code>delete</code> since ages"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509566292, "post_id": 47062483, "comment_id": 81073481, "body": "@tobi303 I&#39;m certain that there are millions of programs with UB out there."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1509578320, "post_id": 47062483, "comment_id": 81078497, "body": "@Slava: actually, there may be a way. As far as I know, it depends on how one interprets the standard. You&#39;re maybe able to check the change with <code>memcpy</code>. <a href=\"https://stackoverflow.com/questions/45149756/is-delete-allowed-to-modify-its-parameter\" title=\"is delete allowed to modify its parameter\">stackoverflow.com/questions/45149756/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": false, "score": 4, "last_activity_date": 1509565282, "creation_date": 1509565282, "answer_id": 47062483, "question_id": 47062419, "link": "https://stackoverflow.com/questions/47062419/what-does-a-deleted-pointer-point-to/47062483#47062483", "title": "What does a deleted pointer point to?", "body": "<p>Don't confuse the pointer's value with what it points <em>to</em>.  After the delete, the pointer's value is unchanged.  It isn't set to <code>nullptr</code> or anything like that.  The thing it points <em>to</em> is undefined.  All to often, it ends up pointing to exactly what it did before, which leads to all manner of interesting bugs.</p>\n"}, {"comments": [{"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 5, "creation_date": 1509570224, "post_id": 47062647, "comment_id": 81075429, "body": "\u201cthe value of the pointer a is not changed\u201d. That\u2019s not what that snippet says. It describes what\u2019s undefined and then states that everything else is <i>implementation-defined</i>. That includes reading the pointer\u2019s value. For example it would be perfectly compliant for a compiler to change the value of all deleted pointers to nullptr."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 0, "creation_date": 1509572271, "post_id": 47062647, "comment_id": 81076335, "body": "@besc: are you sure? <code>nullptr</code> is not an invalid pointer value."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509572392, "post_id": 47062647, "comment_id": 81076398, "body": "@geza nullptr did not point to an object while we are speaking about pointers that pointed to objects. So I do not understand what you mean."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509572499, "post_id": 47062647, "comment_id": 81076456, "body": "@VladfromMoscow: besc said that a compiler could change the pointer value to nullptr. But the standard says that the pointer value becomes invalid pointer value. And a <code>nullptr</code> is clearly not an invalid pointer value."}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 1, "creation_date": 1509572935, "post_id": 47062647, "comment_id": 81076638, "body": "What I mean is that you cannot make any assumptions about which value the pointer variable contains after the delete without speaking about a specific (version of a) compiler. The standard says that \u2013 excluding the UB cases \u2013 any access to that pointer\u2019s value has implementation-defined behaviour. That means the behaviour is entirely up to the compiler vendor, but they must document it. Setting to nullptr was just a quick example of what a vendor could decide. I\u2019m not saying that\u2019s reasonable or even technically possible. I\u2019m just saying the standard explicitly allows things like that."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 0, "creation_date": 1509573404, "post_id": 47062647, "comment_id": 81076848, "body": "@besc, but if the implementation chooses nullptr, then it is not an invalid pointer value. So, in a way, it violates the standard, which says that the pointer value becomes an invalid pointer value."}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509573489, "post_id": 47062647, "comment_id": 81076889, "body": "@geza I\u2019d have to read the standard in a bit more detail to be sure. How I understand \u201cinvalid pointer value\u201d is that this pointer does not point to a valid object anymore, not that the value stored in the pointer variable itself becomes invalid somehow. Provided nobody changed it, essentially it\u2019s still just an integer number that represents a memory address."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 0, "creation_date": 1509574101, "post_id": 47062647, "comment_id": 81077115, "body": "@besc: maybe :) I&#39;m not nitpicking. I&#39;ve asked a similar question before (check the comments I&#39;ve made at the question), and unfortunately, it seems that a clear answer cannot be derived from the standard."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 0, "creation_date": 1509577238, "post_id": 47062647, "comment_id": 81078166, "body": "@besc - When we delete a large memory object, the memory manager might return it to the operating system which unmaps the address range. If so, the &quot;integer number&quot; no longer represents a memory address. On some hardware, loading an unmapped value into an address register will trap."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1509578056, "post_id": 47062647, "comment_id": 81078407, "body": "@BoPersson: which CPU works like this? Does it have a C++11 compiler? I ask this because of my <a href=\"https://stackoverflow.com/questions/45119928/c11-on-exotic-hardware\">question</a>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509578642, "post_id": 47062647, "comment_id": 81078588, "body": "@geza - I was thinking of the 68000 with dedicated address registers, and the segment registers present in 32-bit x86 (both of which you already have in an answer). It is &quot;just&quot; that nobody cared to support far pointers in a 32-bit OS, but the hardware is still there. Can a language standard forbid the use of those features?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1509579223, "post_id": 47062647, "comment_id": 81078761, "body": "@BoPersson, why not, if they don&#39;t add anything useful. As I see, we are fine without segment register support (we needed them in the 16-bit era, but currently they&#39;re not very useful in a 32/64-bit C++ program). And maybe there is no C++11 compiler for 68000 or with segment register support at all. Thanks for the info on 68000 (I didn&#39;t programmed it)."}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "edited": false, "score": 1, "creation_date": 1509623000, "post_id": 47062647, "comment_id": 81096954, "body": "For practical purposes I think it\u2019s safe to say that after the object behind a pointer is deleted there are only two sensible things to do with that pointer variable. Re-assign it or let it go out of scope and be cleaned up. If you do anything else, you shall burn in code review! ;) From the language-lawyer perspective I don\u2019t see the ambiguity. To do anything with the \u201cinvalid pointer value\u201d there is no way around reading it, which falls under \u201cany other use\u201d and is implementation-defined."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1509565942, "creation_date": 1509565942, "answer_id": 47062647, "question_id": 47062419, "link": "https://stackoverflow.com/questions/47062419/what-does-a-deleted-pointer-point-to/47062647#47062647", "title": "What does a deleted pointer point to?", "body": "<p>According to the C++ Standard (6.7 Storage duration)</p>\n\n<blockquote>\n  <p>4 When the end of the duration of a region of storage is reached, the\n  values of all pointers representing the address of any part of that\n  region of storage <strong>become invalid pointer values</strong> (6.9.2).\n  Indirection through an invalid pointer value and passing an invalid\n  pointer value to a deallocation function have undefined behavior. Any\n  other use of an invalid pointer value has implementation-defined\n  behavior.</p>\n</blockquote>\n\n<p>So after this expression statement</p>\n\n<pre><code>delete a;\n</code></pre>\n\n<p>the value of the pointer <code>a</code> is not changed but has became invalid. Neither object exists at this address.</p>\n"}, {"comments": [{"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1561390523, "post_id": 47063551, "comment_id": 100038523, "body": "<i>A few other answers incorrectly say &quot;the value doesn&#39;t change&quot;</i> I&#39;ve downvoted that answers."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 6, "last_activity_date": 1509569829, "creation_date": 1509569829, "answer_id": 47063551, "question_id": 47062419, "link": "https://stackoverflow.com/questions/47062419/what-does-a-deleted-pointer-point-to/47063551#47063551", "title": "What does a deleted pointer point to?", "body": "<p>A few other answers incorrectly say \"the value doesn't change\". However it does:  before the deletion it was valid, and after the deletion it is invalid; this is a change.</p>\n\n<p>Further, the representation of the value may change too. For example the implementation could set <code>a</code> to be null, or some pattern that the debugger will recognize to help with detecting invalid uses of variables.</p>\n"}], "owner": {"reputation": 676, "user_id": 8340131, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213822252052614/picture?type=large", "display_name": "Johnathan Gross", "link": "https://stackoverflow.com/users/8340131/johnathan-gross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1509569829, "creation_date": 1509565033, "question_id": 47062419, "link": "https://stackoverflow.com/questions/47062419/what-does-a-deleted-pointer-point-to", "title": "What does a deleted pointer point to?", "body": "<pre><code>int*a=nullptr; //NULL before C++11\na=new int(1);\ndelete a;\n</code></pre>\n\n<p>What does <code>a</code> point to now? Does it point to <code>nullptr</code> or does it point to the address it was pointing to before it was deleted?</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1509564709, "post_id": 47062326, "comment_id": 81072593, "body": "Please show the full source code that produces this output."}, {"owner": {"reputation": 27, "user_id": 8383764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-j-l2ajlQLBc/AAAAAAAAAAI/AAAAAAAAAFM/CTeXRhoRxYA/photo.jpg?sz=128", "display_name": "Dylan Dodds", "link": "https://stackoverflow.com/users/8383764/dylan-dodds"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1509565122, "post_id": 47062326, "comment_id": 81072825, "body": "What i gave was really all the code related. But i edited my post to include the block of code running this section during application startup."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1509566584, "post_id": 47062326, "comment_id": 81073661, "body": "If you look at derhass answer, then you know why it is so important to provide a complete example."}], "answers": [{"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 2, "last_activity_date": 1509565586, "creation_date": 1509565586, "answer_id": 47062556, "question_id": 47062326, "link": "https://stackoverflow.com/questions/47062326/opengl-compiling-with-incorrect-version/47062556#47062556", "title": "OpenGL compiling with incorrect version", "body": "<p>You must not call any GLFW functions before <code>glfwInit()</code>. In your case, the window hints will be completely reset by the <code>glfwInit()</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 8383764, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-j-l2ajlQLBc/AAAAAAAAAAI/AAAAAAAAAFM/CTeXRhoRxYA/photo.jpg?sz=128", "display_name": "Dylan Dodds", "link": "https://stackoverflow.com/users/8383764/dylan-dodds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 47062556, "answer_count": 1, "score": 0, "last_activity_date": 1509631882, "creation_date": 1509564647, "last_edit_date": 1509631882, "question_id": 47062326, "link": "https://stackoverflow.com/questions/47062326/opengl-compiling-with-incorrect-version", "title": "OpenGL compiling with incorrect version", "body": "<p>I am trying to compile my application with OpenGL 3.3. I've searched my graphics card online and it supports up to 4.4.</p>\n\n<p>Here is the return of glxinfo | grep OpenGL</p>\n\n<pre><code>OpenGL vendor string: Intel Open Source Technology Center\nOpenGL renderer string: Mesa DRI Intel(R) HD Graphics 520 (Skylake GT2) \nOpenGL core profile version string: 4.5 (Core Profile) Mesa 17.2.3\nOpenGL core profile shading language version string: 4.50\nOpenGL core profile context flags: (none)\nOpenGL core profile profile mask: core profile\nOpenGL core profile extensions:\nOpenGL version string: 3.0 Mesa 17.2.3\nOpenGL shading language version string: 1.30\nOpenGL context flags: (none)\nOpenGL extensions:\nOpenGL ES profile version string: OpenGL ES 3.2 Mesa 17.2.3\nOpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.20\nOpenGL ES profile extensions:\n</code></pre>\n\n<p>I am telling GLFW to use major version 3 minor version 3</p>\n\n<pre><code>glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\nglfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n</code></pre>\n\n<p>and do use core profile:</p>\n\n<pre><code>glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n</code></pre>\n\n<p>I built glad pointing to version 3.3 and core profile:</p>\n\n<pre><code>python -m glad --api \"gl=3.3\" --generator c --out-path ./output --profile core --spec gl\n</code></pre>\n\n<p>But when I call</p>\n\n<pre><code>glGetString(GL_VERSION)\n</code></pre>\n\n<p>I get back </p>\n\n<pre><code>3.0 Mesa 17.2.3\n</code></pre>\n\n<p>I cannot for the life of me figure out what i'm missing.</p>\n\n<p>Section running this code</p>\n\n<pre><code>{\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);\n    glfwWindowHint(GLFW_FLOATING, GL_TRUE);\n    glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);\n\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n\n    if (!glfwInit()) {\n        std::cout &lt;&lt; \"glfw not inited\" &lt;&lt; std::endl;\n    }\n\n    glfwSetErrorCallback(error_callback);\n    m_game_window = glfwCreateWindow(800, 600, \"window\", NULL, NULL);\n\n    if (!m_game_window) {\n        std::cout &lt;&lt; \"window creation failed\" &lt;&lt; std::endl;\n        glfwTerminate();\n        //crash\n    }\n\n    glfwMakeContextCurrent(m_game_window);\n    gladLoadGLLoader((GLADloadproc) glfwGetProcAddress);\n\n    glViewport(0, 0, 800, 600);\n\n    char *version = (char*)glGetString(GL_VERSION);\n    std::cout &lt;&lt; version;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "nested"], "comments": [{"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1509564206, "post_id": 47062165, "comment_id": 81072303, "body": "The getters and setters are a bit of a smell, but it looks like the original developer was applying the <a href=\"https://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow noreferrer\">Law of Demeter</a>. There are pros and cons to it."}, {"owner": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "reply_to_user": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1509564482, "post_id": 47062165, "comment_id": 81072474, "body": "The cons seem obvious - adding a ton of more code. What are the cons? (Besides what I already mentioned, i.e. <code>obj.obj1.get_a()</code> vs. <code>obj.get_a()</code>)"}, {"owner": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "reply_to_user": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1509564632, "post_id": 47062165, "comment_id": 81072549, "body": "Nevermind... the Wikipedia page explains it pretty well. Thanks!"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509567710, "post_id": 47062165, "comment_id": 81074237, "body": "Why don&#39;t you just ask the people who wrote the code if they are still in the company? The question is legitimate, but there are hundreds of good reasons I can think of, so there&#39;s not much point in asking here at SO."}, {"owner": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1509568386, "post_id": 47062165, "comment_id": 81074544, "body": "@ChristianHackl I thought of that, but most of the code was written over 10 years ago by a contracting company from another country. Even if I had a name of who wrote the code, there&#39;s no guarantee they work there anymore and even if they did, I doubt they would be eager to answer my questions. I wanted to ask on SO because I thought there could be a general reason why this is done, plus the community here is generally good at getting an answer fairly quickly."}], "answers": [{"comments": [{"owner": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "edited": false, "score": 0, "creation_date": 1509565067, "post_id": 47062358, "comment_id": 81072793, "body": "<i>In general, forcing calling code to write something like obj.obj1.get_a() is discouraged, because it reveals implementations details.</i> Wow, good point, never thought of it that way. It definitely makes the code that uses the C class a lot cleaner, just makes the C class itself seemingly have a lot of &quot;overhead&quot; type code. Anyway, your explanation here is great and exactly what I was looking for."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "edited": false, "score": 1, "creation_date": 1509565426, "post_id": 47062358, "comment_id": 81072982, "body": "@ImaginaryHuman072889 btw the code in your post looks like what I was thaught in school and it took me many years to understand that given only that code there really is no single good reason to use getters and setters. I think it is important to know why following guidelines, because sometimes you dont want to follow it ;)"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 1, "last_activity_date": 1509565220, "last_edit_date": 1509565220, "creation_date": 1509564770, "answer_id": 47062358, "question_id": 47062165, "link": "https://stackoverflow.com/questions/47062165/c-relaying-member-functions-in-nested-classes/47062358#47062358", "title": "C++ Relaying Member Functions in Nested Classes?", "body": "<p>There can be many reasons. One is the following:</p>\n\n<p>Imagine you write a function that does something with the member <code>a</code>. You want the same code to accept an <code>A</code> as well as a <code>C</code>. Your function could look like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(T&amp; t) {\n    std::cout &lt;&lt; \" a = \" &lt;&lt; t.get_a();\n}\n</code></pre>\n\n<p>This would not work with your <code>C</code> because it has a different interface.</p>\n\n<p>Encapsulation has its benefits, but I agree with you that encapsulation for the sake of encapsulation very often leads to much more code and often to nothing else than that.</p>\n\n<p>In general, forcing calling code to write something like <code>obj.obj1.get_a()</code> is discouraged, because it reveals implementations details. If you ever change e.g the type of <code>a</code> then your <code>C</code> has no control whatsoever on that change. On the other hand if in the origninal code <code>a</code> changes from <code>int</code> to <code>double</code> then <code>C</code> can decide whether to keep the <code>int</code> interface and do some conversion (if applicable) or to change its interface.</p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 1, "last_activity_date": 1509564785, "creation_date": 1509564785, "answer_id": 47062367, "question_id": 47062165, "link": "https://stackoverflow.com/questions/47062165/c-relaying-member-functions-in-nested-classes/47062367#47062367", "title": "C++ Relaying Member Functions in Nested Classes?", "body": "<p>It does add a little extra code, but the important thing is your interface.  A class has a responsibility, and the members it holds are implementation details.  If you expose internal objects and force users to \"get the object, then make calls on it\" you are coupling the caller to the implementation more than if you just provide an interface that does the job for the user.  As an analogy, [borrowed from wikipedia] when one wants a dog to walk, one does not command the dog's legs to walk directly; instead one commands the dog which then commands its own legs.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow noreferrer\">Law of Demeter / Wikipedia</a></p>\n\n<blockquote>\n  <p>More formally, the Law of Demeter for functions requires that a method m of an object O may only invoke the methods of the following kinds of objects:</p>\n</blockquote>\n\n<ul>\n<li>O itself</li>\n<li>m's parameters</li>\n<li>Any objects created/instantiated within m</li>\n<li>O's direct component objects</li>\n<li>A global variable, accessible by O, in the scope of m</li>\n</ul>\n\n<blockquote>\n  <p>In particular, an object should avoid invoking methods of a member object returned by another method. For many modern object oriented languages that use a dot as field identifier, the law can be stated simply as \"use only one dot\". That is, the code a.b.c.Method() breaks the law where a.b.Method() does not. </p>\n</blockquote>\n"}], "owner": {"reputation": 4326, "user_id": 8370633, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gxmCt.png?s=128&g=1", "display_name": "ImaginaryHuman072889", "link": "https://stackoverflow.com/users/8370633/imaginaryhuman072889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47062358, "answer_count": 2, "score": 2, "last_activity_date": 1509565220, "creation_date": 1509564002, "question_id": 47062165, "link": "https://stackoverflow.com/questions/47062165/c-relaying-member-functions-in-nested-classes", "title": "C++ Relaying Member Functions in Nested Classes?", "body": "<p>I work at a manufacturing plant that uses a large C++ project to automate the manufacturing process.</p>\n\n<p>I see a certain practice all over the place that just seems to make code unnecessarily long and I was wondering if there is a specific reason this practice is used.</p>\n\n<p>See below for a simplified example that demonstrates this practice.</p>\n\n<p>First file:</p>\n\n<pre><code>class A {\n\nprivate:\n   int a;\n\npublic:\n   int get_a()\n   { return a; }\n\n   void set_a(int arg)\n   { a = arg; }\n};\n</code></pre>\n\n<p>Second file:</p>\n\n<pre><code>class B {\n\nprivate:\n   int b;\n\npublic:\n   int get_b()\n   { return b; }\n\n   void set_b(int arg)\n   { b = arg; }\n};\n</code></pre>\n\n<p>Third file:</p>\n\n<pre><code>class C {\n\nprivate:\n   A obj1;\n   B obj2;\n\npublic:\n   int get_a()\n   { return obj1.get_a(); }\n\n   int get_b()\n   { return obj2.get_b(); }\n\n   void set_a(int arg)\n   { obj1.set_a(arg); }\n\n   void set_b(int arg)\n   { obj2.set_b(arg); }\n};\n</code></pre>\n\n<p>It seems to me like a slight change in design philosophy could have drastically reduced the amount of code in the third file. Something like this:</p>\n\n<pre><code>class C {\n\npublic:\n   A obj1;\n   B obj2;\n\n};\n</code></pre>\n\n<p>Having <code>obj1</code> and <code>obj2</code> be <code>public</code> members in the <code>C</code> class does not seem to be unsafe, because the <code>A</code> and <code>B</code> classes each safely handle the getting and setting of their own member variables.</p>\n\n<p>The only disadvantage I can think of to doing it this way is that any instances of the <code>C</code> class that calls a function would need to do something like <code>obj.obj1.get_a()</code> instead of just <code>obj.get_a()</code> but this seems like much less of an inconvenience than having private <code>A</code> and <code>B</code> object instances in the <code>C</code> class and then manually needing to \"relay\" all of their member functions.</p>\n\n<p>I realize for this simple example, it is not much extra code, but for this large project that my company uses, it adds literally <em>tens of thousands</em> of lines of code.</p>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["c++", "metaprogramming", "boost-mpl", "boost-fusion"], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 2996361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fba27942a4030303eaeae33cd35642?s=128&d=identicon&r=PG&f=1", "display_name": "qduyang", "link": "https://stackoverflow.com/users/2996361/qduyang"}, "is_accepted": false, "score": 1, "last_activity_date": 1510740716, "creation_date": 1510740716, "answer_id": 47304605, "question_id": 47062111, "link": "https://stackoverflow.com/questions/47062111/how-to-get-member-type-of-boostmpl-placeholders-during-fold/47304605#47304605", "title": "How to get member type of boost::mpl placeholders during fold", "body": "<p>Place holders are meta-functions and should be used with lazy evaluation. The <strong>::type</strong>s inside placeholders _1 &amp; _2 are some complex types before evaluation (You could check them by <strong>typeof</strong> (with g++)).</p>\n\n<p>As class A &amp; B are not meta functions, so probably you have to write meta functions to handle interactions with class A &amp; B.</p>\n\n<p>e.g.</p>\n\n<pre><code>template &lt;class PT1, class... PTs&gt;\nstruct map_type\n{\n    typedef typename map_type&lt;PTs...&gt;::type pts_map;\n    typedef typename boost::fusion::result_of::as_map&lt;\n        boost::fusion::joint_view&lt;\n            boost::fusion::map&lt;\n                boost::fusion::pair&lt; typename PT1::Key, typename PT1::Value&gt;\n            &gt;,\n            pts_map\n        &gt;\n    &gt;::type type;\n};\n\ntemplate &lt;class PT1&gt;\nstruct map_type&lt;PT1&gt;\n{\n    typedef boost::fusion::map&lt;\n        boost::fusion::pair&lt; typename PT1::Key, typename PT1::Value&gt;\n    &gt; type;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b939ac6746350b8b\" rel=\"nofollow noreferrer\">Live on Coliru</a></p>\n"}], "owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510740716, "creation_date": 1509563792, "question_id": 47062111, "link": "https://stackoverflow.com/questions/47062111/how-to-get-member-type-of-boostmpl-placeholders-during-fold", "title": "How to get member type of boost::mpl placeholders during fold", "body": "<p>Say there are two classes:</p>\n\n<pre><code>struct A\n{\n    using Key = int;\n    using Value = char;\n};\n\nstruct B\n{\n    using Key = char;\n    using Value = float;\n};\n</code></pre>\n\n<p>I want to use their member types to define the Fusion map:</p>\n\n<pre><code>typedef boost::fusion::map\n&lt;\n    boost::fusion::pair&lt; int , char &gt; ,\n    boost::fusion::pair&lt; char , float &gt;\n&gt; desired_type;\n</code></pre>\n\n<p>So I decided to use MPL fold to obtain the type:</p>\n\n<pre><code>typedef boost::fusion::result_of::as_map&lt; boost::mpl::fold\n&lt;\n    boost::mpl::vector&lt; A , B &gt; ,\n\n    boost::fusion::map&lt; &gt; ,\n\n    boost::fusion::result_of::push_back\n    &lt;\n        boost::mpl::_1 ,\n        boost::fusion::result_of::make_pair\n        &lt;\n            boost::mpl::_2 ::Key , boost::mpl::_2 ::Value\n        &gt;\n    &gt;\n&gt;::type &gt;::type map_type;\n</code></pre>\n\n<p>But of course that couldn't work, as <code>boost::mpl::_N</code> are really metafunctions returning the Nth argument.</p>\n\n<p>So, I defined two auxiliary metafunctions:</p>\n\n<pre><code>template&lt; class T &gt;\nstruct GetInnerKey\n{\n    typedef typename T::Key type;\n};\n\ntemplate&lt; class T &gt;\nstruct GetInnerValue\n{\n    typedef typename T::Value type;\n};\n</code></pre>\n\n<p>and defined the fold properly:</p>\n\n<pre><code>typedef boost::fusion::result_of::as_map&lt; boost::mpl::fold\n&lt;\n    boost::mpl::vector&lt; A , B &gt; ,\n\n    boost::fusion::map&lt; &gt; ,\n\n    boost::fusion::result_of::push_back\n    &lt;\n        boost::mpl::_1 ,\n        boost::fusion::result_of::make_pair\n        &lt;\n            GetInnerKey&lt; boost::mpl::_2 &gt; , GetInnerValue&lt; boost::mpl::_2 &gt;\n        &gt;\n    &gt;\n&gt;::type &gt;::type map_type;\n</code></pre>\n\n<p>(<a href=\"http://coliru.stacked-crooked.com/a/c915a2bc5b9a9138\" rel=\"nofollow noreferrer\">Live at Coliru</a>)</p>\n\n<p><strong>My questions are:</strong></p>\n\n<ul>\n<li><p>Is there a way to get rid of <code>GetInnerKey&lt; &gt;</code> and <code>GetInnerValue&lt; &gt;</code> using something already defined in MPL or Fusion?</p></li>\n<li><p>Is there a way to avoid using <code>boost::fusion::result_of::as_map&lt; &gt;</code>?</p></li>\n<li><p>Is this the right approach to accomplish my intent?</p></li>\n</ul>\n"}, {"tags": ["c++", "windows", "winapi", "hook", "microsoft-edge"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 8670895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/864c1727a1d9ba048a5585332730d59d?s=128&d=identicon&r=PG&f=1", "display_name": "Roger1990", "link": "https://stackoverflow.com/users/8670895/roger1990"}, "is_accepted": false, "score": 0, "last_activity_date": 1510585740, "last_edit_date": 1510585740, "creation_date": 1510585389, "answer_id": 47267351, "question_id": 47061952, "link": "https://stackoverflow.com/questions/47061952/unable-to-detect-touch-inside-internet-explorer-or-microsoft-edge/47267351#47267351", "title": "Unable to detect touch inside internet explorer or microsoft edge", "body": "<blockquote>\n  <p>To hook all applications on the desktop of a 64-bit Windows\n  installation, install a 32-bit global hook and a 64-bit global hook,\n  each from appropriate processes, and be sure to keep pumping messages\n  in the hooking application to avoid blocking normal functioning. If\n  you already have a 32-bit global hooking application and it doesn't\n  need to run in each application's context, you may not need to create\n  a 64-bit version.</p>\n</blockquote>\n\n<p>The above extract is from somewhere in the below mentioned link:\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 29, "user_id": 8670895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/864c1727a1d9ba048a5585332730d59d?s=128&d=identicon&r=PG&f=1", "display_name": "Roger1990", "link": "https://stackoverflow.com/users/8670895/roger1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510585740, "creation_date": 1509563104, "last_edit_date": 1510265179, "question_id": 47061952, "link": "https://stackoverflow.com/questions/47061952/unable-to-detect-touch-inside-internet-explorer-or-microsoft-edge", "title": "Unable to detect touch inside internet explorer or microsoft edge", "body": "<p>I have setup a global hook for WH_GETMESSAGE and WH_CALLWNDPROC. And I am trying to detect touch made on the screen. I am able to do so for everything that's there in the screen except for Microsoft Edge and the client area of Internet Explorer. </p>\n\n<p>By that, I mean I am unable to detect if somebody touches an open edge or the client area of an Internet Explorer Window. But the same works for Google Chrome or other browsers. Any idea why this is happening and what should my approach be, to deal with it?</p>\n\n<p>I have shared a portion of my hook proc code below. </p>\n\n<pre><code>LRESULT CALLBACK GetMsgProc(int nCode, WPARAM wParam, LPARAM lParam)\n{\n    switch (lpMsg-&gt;message)\n    {\n    case WM_POINTERDOWN:\n        UINT32 pointerId = GET_POINTERID_WPARAM(lpMsg-&gt;wParam);\n        POINTER_INPUT_TYPE pointerType;\n        GetPointerType(pointerId, &amp;pointerType);\n\u00a0\n        if (pointerType == PT_TOUCH)\n        {\n                   MessageBox(NULL, TEXT(\"Its a touch\"), TEXT(\"In a DLL\"), MB_OK);\n\u00a0\n\n        }\n        return CallNextHookEx(NULL, nCode, wParam, lParam);\n    }\n    return CallNextHookEx(NULL, nCode, wParam, lParam);\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "cmake"], "comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1509563438, "post_id": 47061944, "comment_id": 81071901, "body": "<code>find_library</code> is used to search for one library, where <code>NAMES</code> is a list of possible names for that library. As such, you&#39;re likely finding the first (<code>libboost_atomic</code>), at which point <code>find_library</code> returns, and the rest of your libraries aren&#39;t linked"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 2, "creation_date": 1509563480, "post_id": 47061944, "comment_id": 81071918, "body": "consider using <code>find_package</code> instead of <code>find_library</code> (see <a href=\"https://cmake.org/cmake/help/v3.0/module/FindBoost.html\" rel=\"nofollow noreferrer\"><code>FindBoost</code></a>)"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1509563517, "post_id": 47061944, "comment_id": 81071946, "body": "<code>include_directories</code> is considered a code smell these days, better to use <code>target_include_directories</code>"}, {"owner": {"reputation": 485, "user_id": 2511938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7cc5dd4f1a53e9786a85197cfe9c9e8c?s=128&d=identicon&r=PG", "display_name": "rXp", "link": "https://stackoverflow.com/users/2511938/rxp"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1509564787, "post_id": 47061944, "comment_id": 81072631, "body": "@SteveLorimer what if I want to specify the path to the libs ?"}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1509567568, "post_id": 47061944, "comment_id": 81074162, "body": "What&#39;s your Boost version? For 1.65 or newer you need CMake 3.9.3, cf. <a href=\"https://stackoverflow.com/a/42124857/2799037\">stackoverflow.com/a/42124857/2799037</a>"}], "answers": [{"tags": [], "owner": {"reputation": 485, "user_id": 2511938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7cc5dd4f1a53e9786a85197cfe9c9e8c?s=128&d=identicon&r=PG", "display_name": "rXp", "link": "https://stackoverflow.com/users/2511938/rxp"}, "is_accepted": true, "score": 0, "last_activity_date": 1509702352, "creation_date": 1509702352, "answer_id": 47092653, "question_id": 47061944, "link": "https://stackoverflow.com/questions/47061944/cmake-am-i-linking-the-wrong-lib/47092653#47092653", "title": "CMAKE, Am I linking the wrong lib?", "body": "<p>I needed to use </p>\n\n<blockquote>\n  <p>find_package</p>\n</blockquote>\n\n<p>for boost (<a href=\"https://cmake.org/cmake/help/v3.0/module/FindBoost.html\" rel=\"nofollow noreferrer\">FindBoost</a>) or </p>\n\n<blockquote>\n  <p>find_library</p>\n</blockquote>\n\n<p>for EACH file.</p>\n"}], "owner": {"reputation": 485, "user_id": 2511938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7cc5dd4f1a53e9786a85197cfe9c9e8c?s=128&d=identicon&r=PG", "display_name": "rXp", "link": "https://stackoverflow.com/users/2511938/rxp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 47092653, "answer_count": 1, "score": 0, "last_activity_date": 1509702352, "creation_date": 1509563076, "question_id": 47061944, "link": "https://stackoverflow.com/questions/47061944/cmake-am-i-linking-the-wrong-lib", "title": "CMAKE, Am I linking the wrong lib?", "body": "<p>I made a working C++ project with boost and std on windows with visual studio.\nAfter some hours of coding I realise that was stupide of me to use a VS2017 since I will need to test the software on mac and linux.\nSo I went on my mac, and now I am trying to just compile everything.\nI built boost on mac :</p>\n\n<blockquote>\n  <p>./bootstrap.sh &amp;&amp;  ./b2 threading=multi link=static\n  runtime-link=static install</p>\n</blockquote>\n\n<p>Then I took the lib I need (chrono, thread, regex, system, thread, date_time) and copy the libboost_xxx.a files into a folder of my project.</p>\n\n<p>Now this is my current makefile :</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(AuthServer)\n\ninclude_directories(${CMAKE_SOURCE_DIR}/Include)\n\nset(CMAKE_VERBOSE_MAKEFILE ON)\n\nset(CMAKE_CXX_STANDARD 11)\n\nset(SOURCE_FILES\n        AuthServer/Client.cpp\n        AuthServer/Client.h\n        AuthServer/main.cpp\n        AuthServer/NetworkManager.cpp\n        AuthServer/NetworkManager.h)\n\nfind_library(BOOST_LIBRARY\n        NAMES libboost_atomic boost_chrono boost_date_time boost_regex boost_thread boost_system\n        PATHS ${CMAKE_SOURCE_DIR}/Lib/mac/x64\n        NO_DEFAULT_PATH)\n\nadd_executable(AuthServer ${SOURCE_FILES})\n\ntarget_link_libraries(AuthServer ${BOOST_LIBRARY})\n</code></pre>\n\n<p>As you can see I don't have much going on but nonetheless it cannot be built :</p>\n\n<pre><code>/Applications/CLion.app/Contents/bin/cmake/bin/cmake --build \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\"\n--target AuthServer -- -j 4 /Applications/CLion.app/Contents/bin/cmake/bin/cmake\n-H\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer\" -B\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\"\n--check-build-system CMakeFiles/Makefile.cmake 0 /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/Makefile2 AuthServer /Applications/CLion.app/Contents/bin/cmake/bin/cmake\n-H\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer\" -B\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\"\n--check-build-system CMakeFiles/Makefile.cmake 0 /Applications/CLion.app/Contents/bin/cmake/bin/cmake -E cmake_progress_start \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug/CMakeFiles\" 4 /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/Makefile2 CMakeFiles/AuthServer.dir/all /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/AuthServer.dir/build.make CMakeFiles/AuthServer.dir/depend cd \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\" &amp;&amp; /Applications/CLion.app/Contents/bin/cmake/bin/cmake -E cmake_depends \"Unix Makefiles\" \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer\" \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer\" \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\" \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug\" \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/cmake-build-debug/CMakeFiles/AuthServer.dir/DependInfo.cmake\"\n--color= /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/AuthServer.dir/build.make CMakeFiles/AuthServer.dir/build [ 25%] Building CXX object CMakeFiles/AuthServer.dir/AuthServer/Client.cpp.o [ 50%] Building CXX object CMakeFiles/AuthServer.dir/AuthServer/main.cpp.o /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n-I\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/Include\"  -g -arch x86_64\n-mmacosx-version-min=10.12   -std=gnu++11 -o CMakeFiles/AuthServer.dir/AuthServer/Client.cpp.o -c \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/AuthServer/Client.cpp\" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n-I\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/Include\"  -g -arch x86_64\n-mmacosx-version-min=10.12   -std=gnu++11 -o CMakeFiles/AuthServer.dir/AuthServer/main.cpp.o -c \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/AuthServer/main.cpp\" [ 75%] Building CXX object CMakeFiles/AuthServer.dir/AuthServer/NetworkManager.cpp.o /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n-I\"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/Include\"  -g -arch x86_64\n-mmacosx-version-min=10.12   -std=gnu++11 -o CMakeFiles/AuthServer.dir/AuthServer/NetworkManager.cpp.o -c \"/Users/rxp/Code Project/MagesBattleAuthServerCPP/AuthServer/AuthServer/NetworkManager.cpp\" [100%] Linking CXX executable AuthServer /Applications/CLion.app/Contents/bin/cmake/bin/cmake -E cmake_link_script CMakeFiles/AuthServer.dir/link.txt --verbose=1 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n-g -arch x86_64 -mmacosx-version-min=10.12 -Wl,-search_paths_first -Wl,-headerpad_max_install_names  CMakeFiles/AuthServer.dir/AuthServer/Client.cpp.o CMakeFiles/AuthServer.dir/AuthServer/main.cpp.o CMakeFiles/AuthServer.dir/AuthServer/NetworkManager.cpp.o  -o AuthServer ../Lib/mac/x64/libboost_chrono.a  Undefined symbols for architecture x86_64:   \"boost::this_thread::interruption_point()\", referenced from:\n      boost::condition_variable::wait(boost::unique_lock&lt;boost::mutex&gt;&amp;) in NetworkManager.cpp.o   \"boost::this_thread::disable_interruption::disable_interruption()\", referenced from:\n      boost::shared_mutex::lock_shared() in NetworkManager.cpp.o\n      boost::shared_mutex::lock() in NetworkManager.cpp.o   \"boost::this_thread::disable_interruption::~disable_interruption()\", referenced from:\n      boost::shared_mutex::lock_shared() in NetworkManager.cpp.o\n      boost::shared_mutex::lock() in NetworkManager.cpp.o   \"boost::detail::thread_data_base::~thread_data_base()\", referenced from:\n      boost::detail::thread_data&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf1&lt;void, NetworkManager, boost::shared_ptr&lt;boost::asio::io_service&gt; &gt;, boost::_bi::list2&lt;boost::_bi::value&lt;NetworkManager*&gt;, boost::_bi::value&lt;boost::shared_ptr&lt;boost::asio::io_service&gt; &gt; &gt; &gt;\n&gt;::~thread_data() in NetworkManager.cpp.o   \"boost::detail::get_current_thread_data()\", referenced from:\n      boost::detail::interruption_checker::interruption_checker(_opaque_pthread_mutex_t*,\n_opaque_pthread_cond_t*) in NetworkManager.cpp.o   \"boost::system::system_category()\", referenced from:\n      boost::asio::error::get_system_category() in Client.cpp.o\n      boost::system::error_code::error_code() in Client.cpp.o\n      ___cxx_global_var_init.2 in Client.cpp.o\n      boost::asio::error::get_system_category() in main.cpp.o\n      ___cxx_global_var_init.2 in main.cpp.o\n      boost::asio::error::get_system_category() in NetworkManager.cpp.o\n      boost::system::error_code::error_code() in NetworkManager.cpp.o\n      ...   \"boost::system::generic_category()\", referenced from:\n      boost::system::error_category::std_category::equivalent(int, std::__1::error_condition const&amp;) const in Client.cpp.o\n      boost::system::error_category::std_category::equivalent(std::__1::error_code const&amp;, int) const in Client.cpp.o\n      boost::thread_exception::thread_exception(int, char const*) in Client.cpp.o\n      ___cxx_global_var_init in Client.cpp.o\n      ___cxx_global_var_init.1 in Client.cpp.o\n      boost::system::error_category::std_category::equivalent(int, std::__1::error_condition const&amp;) const in main.cpp.o\n      boost::system::error_category::std_category::equivalent(std::__1::error_code const&amp;, int) const in main.cpp.o\n      ...   \"boost::thread::join_noexcept()\", referenced from:\n      boost::thread::join() in NetworkManager.cpp.o   \"boost::thread::native_handle()\", referenced from:\n      boost::thread::get_id() const in NetworkManager.cpp.o   \"boost::thread::hardware_concurrency()\", referenced from:\n      _main in main.cpp.o   \"boost::thread::start_thread_noexcept()\", referenced from:\n      boost::thread::start_thread() in NetworkManager.cpp.o   \"boost::thread::detach()\", referenced from:\n      boost::thread::~thread() in NetworkManager.cpp.o   \"boost::thread::joinable() const\", referenced from:\n      boost::thread_group::join_all() in NetworkManager.cpp.o   \"typeinfo for boost::detail::thread_data_base\", referenced from:\n      typeinfo for boost::detail::thread_data&lt;boost::_bi::bind_t&lt;void, boost::_mfi::mf1&lt;void, NetworkManager, boost::shared_ptr&lt;boost::asio::io_service&gt; &gt;, boost::_bi::list2&lt;boost::_bi::value&lt;NetworkManager*&gt;, boost::_bi::value&lt;boost::shared_ptr&lt;boost::asio::io_service&gt; &gt; &gt; &gt; &gt; in NetworkManager.cpp.o   \"vtable for boost::detail::thread_data_base\", referenced from:\n      boost::detail::thread_data_base::thread_data_base() in NetworkManager.cpp.o   NOTE: a missing vtable usually means the first non-inline virtual member function has no definition. ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) make[3]: *** [AuthServer] Error 1 make[2]: *** [CMakeFiles/AuthServer.dir/all] Error 2 make[1]:\n*** [CMakeFiles/AuthServer.dir/rule] Error 2 make: *** [AuthServer] Error 2\n</code></pre>\n\n<p>I've been working on windows only with C++ until now and so I might have made so giant mistake with the Cmake file but I don't know what.</p>\n\n<p>The libs I look for are found and everything seems to work. I know the libs are the right ones since on the windows version, they are the one I use.</p>\n\n<p>Down the line I want to make one makefile for windows and unix so I can stop working with the SLN.</p>\n"}, {"tags": ["c++", "qt", "qpainterpath"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509562222, "post_id": 47061629, "comment_id": 81071283, "body": "You could show a picture what you get and what you want to get, In addition to providing a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509562976, "post_id": 47061629, "comment_id": 81071666, "body": "Edited my question"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563008, "post_id": 47061629, "comment_id": 81071684, "body": "You could show a picture of what you are getting to understand what the problem is."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563074, "post_id": 47061629, "comment_id": 81071706, "body": "Also show your current code, this is a new question and it is necessary that you provide an MVCE for this question."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563374, "post_id": 47061629, "comment_id": 81071869, "body": "Its not that easy, I can&#39;t just paste my code here. I will work on writing a simple version to post here."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563537, "post_id": 47061629, "comment_id": 81071958, "body": "The most advisable is to place the part you use, that is the essential part, if you have more code you could upload it to github, gist or similar and attach the link in your question."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563641, "post_id": 47061629, "comment_id": 81072011, "body": "I am working on simplifying it down now."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563663, "post_id": 47061629, "comment_id": 81072024, "body": "What you want to have and what you get has a different line so that confuses me. :P"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509563673, "post_id": 47061629, "comment_id": 81072030, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/158015/discussion-between-bauervision-and-eyllanesc\">continue this discussion in chat</a>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991058, "post_id": 47061629, "comment_id": 81235935, "body": "On what depends the variation of the colors?"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991184, "post_id": 47061629, "comment_id": 81235994, "body": "Just a simple int variable.  1, 2, 3 equates to each of the 3 colors. It is set by a button press."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991332, "post_id": 47061629, "comment_id": 81236058, "body": "I do not mean that, but that depends on which part of the path changes color?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991463, "post_id": 47061629, "comment_id": 81236120, "body": "I see that in the graphic you want the first 2 lines are red and orange respectively, but in the third to the middle of the line you change the colors."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991485, "post_id": 47061629, "comment_id": 81236130, "body": "As that variable changes, new points being drawn on the path need to reflect the new color."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991660, "post_id": 47061629, "comment_id": 81236206, "body": "In that picture the change in color has nothing to do with the angle change. Angle change is separate.  All color changes depend on the variable."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991683, "post_id": 47061629, "comment_id": 81236218, "body": "I imagine you mean that as if the path was a tube and then it is filled with 3 fluids with different colors that are changed each time the button is pressed. I am right?"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991734, "post_id": 47061629, "comment_id": 81236241, "body": "Yes. Exactly! Sorry for the confusion"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991810, "post_id": 47061629, "comment_id": 81236275, "body": "Then you should that the colors will vary according to the time, and what color the path initially has if the button is never pressed."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509991910, "post_id": 47061629, "comment_id": 81236325, "body": "I essentially made that point in my final edit where I said &quot;To help better clarify the behavior...&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 0, "creation_date": 1510064629, "post_id": 47157093, "comment_id": 81270020, "body": "Is this going to work within a GraphicsView / GraphicsScene? I guess it wasn&#39;t clear in my question, I will edit it now. This concept is what I&#39;m looking for, as long as I can get it to work with the GraphicsScene."}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 1, "creation_date": 1510065288, "post_id": 47157093, "comment_id": 81270426, "body": "@bauervision Yes, GraphicsView / GraphicsScene like widgets use <code>QPainter</code>, so the underlying algorithms will be the same."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 0, "creation_date": 1510065403, "post_id": 47157093, "comment_id": 81270510, "body": "Applying it now, will accept as the correct answer when I get it to work. Standby.  When I apply the Path to my PathItem, I assume I just don&#39;t apply a QPen?"}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 0, "creation_date": 1510065597, "post_id": 47157093, "comment_id": 81270655, "body": "@bauervision You can either have your own <code>QGraphicsItem</code> class and reimplement the <code>paint()</code> function. The only change from my code sample is that you have to use the <code>QPainter *</code> provided in the function arguments. Or you can have several <code>QGraphicsPathItem</code>, each having its own QPainterPath. In the example, I would have 2 items, own for the red and one for the blue. The important part being the use of <code>moveTo()</code> to prevent extra lines between sub paths."}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 0, "creation_date": 1510065866, "post_id": 47157093, "comment_id": 81270835, "body": "Yes that is essentially where I&#39;m at with it. If you look at the code provided in the link (the solution) I&#39;m not switching out different paths, but using the same path.  Do I need to apply a QPainter if I&#39;m using the QGraphicsPathItem&#39;s? My guess is no."}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "edited": false, "score": 0, "creation_date": 1510066773, "post_id": 47157093, "comment_id": 81271481, "body": "If you use <code>QGraphicsPathItem</code>, you only need to call <code>QGraphicsPathItem::setPath()</code> . The rest is already cared for. See <a href=\"https://code.woboq.org/qt5/qtbase/src/widgets/graphicsview/qgraphicsitem.cpp.html#_ZN17QGraphicsPathItem5paintEP8QPainterPK24QStyleOptionGraphicsItemP7QWidget\" rel=\"nofollow noreferrer\">code.woboq.org/qt5/qtbase/src/widgets/graphicsview/&hellip;</a>"}, {"owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "reply_to_user": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "edited": false, "score": 0, "creation_date": 1510073105, "post_id": 47157093, "comment_id": 81275957, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/158435/discussion-between-bauervision-and-benjamin-t\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "is_accepted": true, "score": 6, "last_activity_date": 1510054981, "creation_date": 1510054981, "answer_id": 47157093, "question_id": 47061629, "link": "https://stackoverflow.com/questions/47061629/how-can-i-color-qpainterpath-subpaths-differently/47157093#47157093", "title": "How can I color QPainterPath subpaths differently?", "body": "<p>You can use multiple <code>QPainterPath</code>, one for each color. And then paint them all with the proper color. Be sure to use <code>moveTo()</code> to deplace the current path cursor without drawing a line.</p>\n\n<pre><code>void Widget::paintEvent(QPaintEvent *event)\n{\n    QPainterPath redPath;\n    QPainterPath bluePath;\n    redPath.moveTo(0,0);\n    redPath.lineTo(60,60);\n    bluePath.moveTo(60,60);\n    bluePath.lineTo(70,20);\n    redPath.moveTo(70,20);\n    redPath.lineTo(100,100);\n    bluePath.moveTo(100,100);\n    bluePath.lineTo(160,260);\n\n\n    QPainter painter(this);\n    painter.setRenderHint(QPainter::HighQualityAntialiasing, true);\n    painter.setPen(QPen(Qt::red, 4));\n    painter.drawPath(redPath);\n    painter.setPen(QPen(Qt::blue, 4));\n    painter.drawPath(bluePath);\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jqxm3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jqxm3.png\" alt=\"render\"></a></p>\n\n<p>If you feel the calls to \"moveTo\" and \"lineTo\" are a bit heavy, you can encapsulate all the QPainterPaths in you own class with a <code>lineTo(QPointF, QColor)</code> function that will handle the path switching when you change the color.</p>\n"}], "owner": {"reputation": 575, "user_id": 3229381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000448580016/picture?type=large", "display_name": "bauervision", "link": "https://stackoverflow.com/users/3229381/bauervision"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 1, "accepted_answer_id": 47157093, "answer_count": 1, "score": 7, "last_activity_date": 1510064788, "creation_date": 1509561973, "last_edit_date": 1510064788, "question_id": 47061629, "link": "https://stackoverflow.com/questions/47061629/how-can-i-color-qpainterpath-subpaths-differently", "title": "How can I color QPainterPath subpaths differently?", "body": "<p>As the title suggests, I'm looking for a way to color the subpaths of a QPainterPath different colors which is applied to a QGraphicsPathItem, OR simply change the color along the PathItem with a QGradient QPen. </p>\n\n<p>Ultimately I am trying to find the correct solution which will give me the ability to visibly draw a single line, which changes colors based on external variables. </p>\n\n<p>I am using a QGraphicsScene to draw everything.</p>\n\n<p>My current solution has me creating multiple QGraphicsPathItems, each colored differently with their respective QPens. As I get data, I populate the PainterPath associated with those PathItems. This gives me the multicolored lines I need, but the lines are visibly disconnected.</p>\n\n<p>I either need to be able to make subpaths of the QPainterPath invisible during the color change, or alter the gradient applied to a single PathItem. Or maybe there is another approach I am missing.\nAny help would be wonderful.</p>\n\n<p>-Edit:</p>\n\n<p>This is how I am currently doing the drawing, as noted in the solution to my question. Again, note that I am using a GraphicsScene.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/43147889/bearing-formula-calculations-in-graphicsscene-producing-erratic-results\">Bearing Formula calculations in GraphicsScene producing erratic results</a></p>\n\n<p>Here is what I'm trying to do.\n<a href=\"https://i.stack.imgur.com/gG64c.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gG64c.png\" alt=\"Desired Result\"></a></p>\n\n<p>As you can see the line changes color as it is drawn, by external variables. I'm afraid a Qgradient might not work because the line will not always be straight; the color needs to flow along the line.</p>\n\n<p>Here is what is happening:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ms1uW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ms1uW.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, the red line (PathItem) jumps from where it last was visible to the new position. </p>\n\n<p>To help better clarify the behavior, imagine that this line is being drawn over time. It starts out red, soon a variable gets set and the color of the line segments being drawn change to orange. The red portions of the line remain intact so we can see historically what the state of the variable was at that time. At different times, the variable adjusts and the color applied to new portions of the line update accordingly.</p>\n\n<p>When the line has finished drawing, we can look at it and see when the colors changed.</p>\n\n<p>I hope this all makes sense.</p>\n"}, {"tags": ["c++", "linux", "can-bus"], "comments": [{"owner": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1509628102, "post_id": 47061559, "comment_id": 81100547, "body": "Do you have a device talking Lawicel protocol aka SLCAN? If yes, you can use <code>slcand</code> to create a <code>slcan0</code> device and use it as any other SocketCAN device. See this <a href=\"https://elinux.org/Bringing_CAN_interface_up#SLCAN_based_Interfaces\" rel=\"nofollow noreferrer\">article</a>."}, {"owner": {"reputation": 11, "user_id": 8869863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f24c379e7d1f6a7d314d5017dd9455?s=128&d=identicon&r=PG&f=1", "display_name": "zhizun", "link": "https://stackoverflow.com/users/8869863/zhizun"}, "reply_to_user": {"reputation": 4252, "user_id": 1113139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d875f6bb3d484f227b68a7b2923de948?s=128&d=identicon&r=PG", "display_name": "yegorich", "link": "https://stackoverflow.com/users/1113139/yegorich"}, "edited": false, "score": 0, "creation_date": 1509634669, "post_id": 47061559, "comment_id": 81105318, "body": "Thanks, I have solved it, using cross-platform serial port library."}], "owner": {"reputation": 11, "user_id": 8869863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f24c379e7d1f6a7d314d5017dd9455?s=128&d=identicon&r=PG&f=1", "display_name": "zhizun", "link": "https://stackoverflow.com/users/8869863/zhizun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1509561592, "creation_date": 1509561592, "question_id": 47061559, "link": "https://stackoverflow.com/questions/47061559/can232-windows-convert-to-linux", "title": "CAN232 Windows convert to Linux", "body": "<p>I have codes for CAN232, but it is on windows system. I tried to convert it to Linux one, and failed. I am very confused.  Can anyone help me ? \nThe windows code for CAN232 is below:</p>\n\n<pre><code>  #include &lt;stdlib.h&gt;\n  #include &lt;stdio.h&gt;\n  #include &lt;windows.h&gt;\n\n  //define command packet for sending to Videoray\n\n typedef struct\n{\n    unsigned char PortThruster;     //Port (left) thruster current (0-220)\n    unsigned char StbdThruster;     //Starboard (right) thruster current         (0-220)\n    unsigned char VertThruster;     //Vertical thruster current (0-220)\n    unsigned char Lights;           //Light current (0-200)\n    unsigned char CtrlBits1;            //8 control bits (D0 = LSB)\n                        //D0 = 0, Manip close;      D0 = 1, Manip open;\n                        //D1 = 0, Manip disable;    D1 = 1, Manip enable;\n                        //D6 = 0, Front light/cam;  D6 = 1, Rear           light/camera;\nunsigned char CtrlBits2;            //D0 = 0, Tilt up;          D0 = 1, Tilt down;\n                        //D1 = 0, Tilt disable;     D1 = 1, Tilt enable;\n                        //D2 = 0, Focus near;       D2 = 1, Focus far;\n                        //D3 = 0, Focus disable;    D3 = 1, Focus enable;\n                        //D4 = 0, Port backward;    D4 = 1, Port forward;\n                        //D5 = 0, Stbd backward;    D5 = 1, Stbd forward;\n                        //D6 = 0, Vertical up;      D6 = 1, Vertical down;\n} VideoRayCommandPacket;\n\nVideoRayCommandPacket Command;\n\n//Global variables\n\nHANDLE hCom;                            //serial port handle\nCOMMTIMEOUTS timeouts = {0,0,50,0,0};   //20ms timeout for reading\nDCB dcb;\nunsigned long NoBytes=0;\nunsigned char Key;\nunsigned Heading,Depth,KeyDelay=0;\nchar Data[50];\n\n//InitCAN function\n\nint InitCAN()\n{\n//setup serial port (57600,8,1,N)\nCloseHandle(hCom);\nhCom = CreateFile(\"COM1\",GENERIC_READ | GENERIC_WRITE,0,NULL,OPEN_EXISTING,0,NULL);\nif (hCom == INVALID_HANDLE_VALUE)\n    {\n    printf(\"Cannot open COM1...\\n\\n\");\n    exit(0);\n    }\nif(!GetCommState(hCom, &amp;dcb))\n    {\n    printf(\"Cannot get DCB...\\n\\n\");\n    exit(0);\n    }\ndcb.BaudRate = 57600;           //9600 Baud \ndcb.ByteSize = 8;\ndcb.Parity = NOPARITY;\ndcb.StopBits = ONESTOPBIT;\nif(!SetCommState(hCom, &amp;dcb))\n    {\n    printf(\"Cannot set DCB...\\n\\n\");\n    exit(0);\n    }\nSetCommTimeouts(hCom,&amp;timeouts);\nPurgeComm(hCom,PURGE_TXABORT|PURGE_RXABORT|PURGE_TXCLEAR|PURGE_RXCLEAR);\nWriteFile(hCom,\"\\r\\r\\r\\r\\r\\r\\r\\r\",8,&amp;NoBytes,NULL);     //clear CAN232 buffer\nReadFile(hCom,Data,20,&amp;NoBytes,NULL);\nWriteFile(hCom,\"C\\r\",2,&amp;NoBytes,NULL);          //close CAN channel \nReadFile(hCom,Data,1,&amp;NoBytes,NULL);\nWriteFile(hCom,\"X1\\r\",3,&amp;NoBytes,NULL);         //set auto poll \nReadFile(hCom,Data,1,&amp;NoBytes,NULL);\nif(Data[0] != 13) return(0);\nWriteFile(hCom,\"s82EB\\r\",6,&amp;NoBytes,NULL);      //set CAN bit rate      \nReadFile(hCom,Data,1,&amp;NoBytes,NULL);\nif(Data[0] != 13) return(0);\nWriteFile(hCom,\"O\\r\",2,&amp;NoBytes,NULL);          //open CAN channel\nReadFile(hCom,Data,1,&amp;NoBytes,NULL);\nif(Data[0] != 13) return(0);\nWriteFile(hCom,\"t010103\\r\",8,&amp;NoBytes,NULL);    //connect to videoray       \nReadFile(hCom,Data,2,&amp;NoBytes,NULL);\nif((Data[0] == 'z') &amp;&amp; (Data[1] == 13))\n    {\n    printf(\"Videoray CAN bus connected\\r\\n\");\n    return(1);\n    }\nelse return(0);\n}\n\n//SendCan function\n\nint SendCAN(VideoRayCommandPacket c)\n   {\nsprintf(Data,\"t010703%02x%02x%02x%02x%02x%02x\\r\",c.StbdThruster,c.PortThruster,c.VertThruster,\n    c.Lights,c.CtrlBits1,c.CtrlBits2);\nWriteFile(hCom,Data,strlen(Data),&amp;NoBytes,NULL);        \nReadFile(hCom,Data,2,&amp;NoBytes,NULL);\nif((Data[0] == 'z') &amp;&amp; (Data[1] == 13)) return(1);\nelse return(0);\n}\n\n //ReceiveCAN function\n\nunsigned DataType,HeadingLow,HeadingHigh,DepthLow,DepthHigh;\n\nint ReceiveCAN(unsigned int *h,unsigned int *d)\n   {\n     int temp;\n\n       ReadFile(hCom,Data,18,&amp;NoBytes,NULL);\n       if(NoBytes == 18) \n       {\n          sscanf(Data,\"t0186%2x%2x%2x%2x%2x\",&amp;DataType,&amp;HeadingLow,\n         &amp;HeadingHigh,&amp;DepthLow,&amp;DepthHigh);\n    temp = 256*HeadingHigh + HeadingLow;    //calculate true heading\n    temp = 360-temp;\n    if(temp &lt; 90) *h = 270 + temp;\n    else *h = temp - 90;\n    *d = 256*DepthHigh + DepthLow;      //calculate depth\n    return(1);\n    }\nelse return(0);\n}\n\n void main(void)\n {\n\n while(InitCAN() == 0) printf(\"Cannot connect!!!\\r\\n\");     //initialise     CAN bus connection to Videoray\n\n //Initialise command packet\n\nCommand.PortThruster = 0;\nCommand.StbdThruster = 0;  \nCommand.VertThruster = 0;\nCommand.Lights = 0;\nCommand.CtrlBits1 = 0;\nCommand.CtrlBits2 = 0;\n\nwhile(1)\n{\nif(kbhit())                     //check for keystroke\n    {\n    Key = getch();\n    switch(Key)\n        {\n        case 'u':                           //up\n            Command.VertThruster = 100; \n            Command.CtrlBits2 = 0;          //D6 = 0\n            break;\n        case 'd':                           //down\n            Command.VertThruster = 100; \n            Command.CtrlBits2 = 0x40;       //D6 = 1\n            break;\n        case 72:                            //forward (up arrow)\n            Command.PortThruster = 50;  \n            Command.StbdThruster = 50;\n            Command.CtrlBits2 = 0x20;       //D4=0,D5 = 1;\n            break;\n        case 80:                            //back (down arrow)\n            Command.PortThruster = 50;  \n            Command.StbdThruster = 50;\n            Command.CtrlBits2 = 0x10;       //D4=1,D5 = 0;\n            break;\n        case 75:                            //left (left arrow)\n            Command.PortThruster = 50;  \n            Command.StbdThruster = 50;\n            Command.CtrlBits2 = 0x30;       //D4 = 1, D5 = 1;\n            break;\n        case 77:                            //right (right arrow)\n            Command.PortThruster = 50;  \n            Command.StbdThruster = 50;\n            Command.CtrlBits2 = 0;          //D4 = 0, D5 = 0;\n            break;\n        case 'l':                           //light on\n            Command.Lights = 100;\n            break;\n        case 'o':                           //light off\n            Command.Lights = 0;\n            break;\n        }\n    }\nelse if((++KeyDelay) == 20)                 //stop all thrusters when key is released\n    {                                       //(each comms cycle takes 15.6ms\n    Command.VertThruster = 0;               //so we must allow for the delay in the keyboard repeat)\n    Command.PortThruster = 0;\n    Command.StbdThruster = 0;\n    Command.VertThruster = 0;\n    Command.CtrlBits1 = 0;\n    Command.CtrlBits2 = 0;\n    KeyDelay = 0;\n    }\nif(SendCAN(Command) == 0)                   //send command packet to videoray\n    {\n    printf(\"Error sending command....\\r\\n\");        \n    while(InitCAN() == 0) printf(\"Cannot connect!!!\\r\\n\");      //initialise CAN bus connection to Videoray\n    }\nif(ReceiveCAN(&amp;Heading,&amp;Depth) == 0)                //get data back from videoray\n    {\n    printf(\"Error receiving data from Videoray....\\r\\n\");       \n    }\nelse\n    {\n    printf(\"Heading = %d\\tDepth = %d\\t\\r\",Heading,Depth);       //display heading &amp; depth\n    }   \n}\n}\n</code></pre>\n\n<p>The linux one I write is:</p>\n\n<pre><code>    #include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n//define command packet for sending to Videoray\n\ntypedef struct\n    {\n    unsigned char PortThruster;     //Port (left) thruster current (0-220)\n    unsigned char StbdThruster;     //Starboard (right) thruster current (0-220)\n    unsigned char VertThruster;     //Vertical thruster current (0-220)\n    unsigned char Lights;           //Light current (0-200)\n    unsigned char CtrlBits1;            //8 control bits (D0 = LSB)\n                            //D0 = 0, Manip close;      D0 = 1, Manip open;\n                            //D1 = 0, Manip disable;    D1 = 1, Manip enable;\n                            //D6 = 0, Front light/cam;  D6 = 1, Rear light/camera;\n    unsigned char CtrlBits2;            //D0 = 0, Tilt up;          D0 = 1, Tilt down;\n                            //D1 = 0, Tilt disable;     D1 = 1, Tilt enable;\n                            //D2 = 0, Focus near;       D2 = 1, Focus far;\n                            //D3 = 0, Focus disable;    D3 = 1, Focus enable;\n                            //D4 = 0, Port backward;    D4 = 1, Port forward;\n                            //D5 = 0, Stbd backward;    D5 = 1, Stbd forward;\n                            //D6 = 0, Vertical up;      D6 = 1, Vertical down;\n    } VideoRayCommandPacket;\n\nVideoRayCommandPacket Command;\n\n//Global variables\n\nint fd;                         //serial port handle\nunsigned char Key;\nunsigned Heading,Depth,KeyDelay=0;\nstruct termios tty;\n\nchar Data[50];\n//Data[0]='z';\nchar cmd[50];\n\n\n\n\n\n\n//InitCAN function\n\nint InitCAN()\n    {\n    //setup serial port (57600,8,1,N)\n    close(fd);\n    int bytes;\n    fd=open(\"/dev/ttyUSB0\", O_RDWR | O_NOCTTY);\n    if (fd == -1)\n        {\n        printf(\"Cannot open ttyUSB0...\\n\\n\");\n        return 0;\n        }\n    if(tcgetattr ( fd, &amp;tty ) != 0)\n        {\n        printf(\"Cannot get Setting...\\n\\n\");\n        return 0;\n        }\n\n    //memset(&amp;tty, 0, sizeof(tty)); \n    cfsetospeed (&amp;tty, (speed_t)B57600);\n    cfsetispeed (&amp;tty, (speed_t)B57600);\n\n    /* Setting other Port Stuff */\n    tty.c_cflag     &amp;=  ~PARENB;            // Make 8n1\n    tty.c_cflag     &amp;=  ~CSTOPB;\n    tty.c_cflag     &amp;=  ~CSIZE;\n    tty.c_cflag     |=  CS8;\n    //tty.c_iflag     |=  IGNPAR ;\n    //tty.c_oflag = 0; \n    //tty.c_lflag = 0;\n\n    //tty.c_cflag   |=(CREAD | CLOCAL | CS8 );//enable receiver\n    tty.c_cc[VMIN]  = 0; /* Read 10 characters */  \n    tty.c_cc[VTIME] =50;  /* Wait indefinitely   */\n\n    tcflush( fd, TCIFLUSH );\n\n    if( tcsetattr ( fd, TCSANOW, &amp;tty ) != 0)\n        {\n        printf(\"Cannot set Port...\\n\\n\");\n        return 0;\n        }\n    write(fd,\"\\r\\r\\r\\r\\r\\r\\r\\r\",8);     //clear CAN232 buffer\n    read(fd,Data,20);\n    write(fd, \"V\\r\",2);\n    read(fd, &amp;Data, 6);\n    write(fd,\"C\\r\",2);          //close CAN channel\n    sprintf(cmd, \"C\\r\");\n    write(fd, cmd, sizeof(cmd));\n    read(fd,Data,1);\n    write(fd,\"X1\\r\",3);         //set auto poll\n    read(fd,Data,1);\n    if(int(Data[0]) != 13) return(0); \n    write(fd,\"s82EB\\r\",6);      //set CAN bit rate      \n    read(fd,Data,1);\n    if(int(Data[0]) != 13) return(0);\n    write(fd,\"O\\r\",2);          //open CAN channel\n    read(fd,Data,1);\n    if(int(Data[0]) != 13) return(0);\n    write(fd,\"t010103\\r\",8);    //connect to videoray\n    read(fd,Data,2);\n    if((char (Data[0]) == 'z') &amp;&amp; (int (Data[1]) == 13))\n        {\n        printf(\"Videoray CAN bus connected\\r\\n\");\n        return(1);\n        }\n    else {   \n            return(0);\n         }\n    }\n\n//SendCan function\n\nint SendCAN(VideoRayCommandPacket c)\n    {\n    sprintf(cmd,\"t010703%02x%02x%02x%02x%02x%02x\\r\",c.StbdThruster,c.PortThruster,c.VertThruster,\n        c.Lights,c.CtrlBits1,c.CtrlBits2);\n    write(fd,cmd,sizeof(cmd));      \n    read(fd,Data,2);\n    if((int (Data[0]) == 10) &amp;&amp; (int (Data[1]) == 10)) return(1);\n    else{ \n\n        return(0);\n    }\n\n    }\n\n//ReceiveCAN function\n\nunsigned DataType,HeadingLow,HeadingHigh,DepthLow,DepthHigh;\n\nint ReceiveCAN(unsigned int *h,unsigned int *d)\n    {\n    int temp;\n    int bytes;\n    bytes=read(fd,&amp;Data,18);\n    if(bytes == 18) \n        {\n        sscanf(Data,\"t0186%2x%2x%2x%2x%2x\",&amp;DataType,&amp;HeadingLow,\n            &amp;HeadingHigh,&amp;DepthLow,&amp;DepthHigh);\n        temp = 256*HeadingHigh + HeadingLow;    //calculate true heading\n        temp = 360-temp;\n        if(temp &lt; 90) *h = 270 + temp;\n        else *h = temp - 90;\n        *d = 256*DepthHigh + DepthLow;      //calculate depth\n        return(1);\n        }\n    else return(0);\n    }\n\n\n\n\n\nint kbhit(void)\n    {\n\n        struct termios oldt, newt;\n        int ch;\n        int oldf;\n\n        tcgetattr(STDIN_FILENO, &amp;oldt);\n        newt=oldt;\n        newt.c_lflag &amp;=~(ICANON | ECHO);\n        tcsetattr(STDIN_FILENO, TCSANOW, &amp;newt);\n        oldf=fcntl(STDIN_FILENO, F_GETFL, 0);\n        fcntl(STDIN_FILENO, F_SETFL, oldf|O_NONBLOCK);\n\n        ch=getchar();\n\n        tcsetattr(STDIN_FILENO, TCSANOW, &amp;oldt);\n        fcntl(STDIN_FILENO, F_SETFL,oldf);\n\n        if (ch !=EOF)\n        {\n            ungetc(ch, stdin);\n            return 1;\n        }\n\n        return 0;   \n    }\n\nchar getch()\n   {\n        char c;\n        system(\"stty raw\");\n        c=getchar();\n        system(\"stty sane\");\n\n        return(c);\n    }\n\n\n\n\n\n\n\nint main( )\n{\n\nwhile(InitCAN() == 0) printf(\"Cannot connect!!!\\r\\n\");      //initialise CAN bus connection to Videoray\n\n//Initialise command packet\n\nCommand.PortThruster = 0;\nCommand.StbdThruster = 0;\nCommand.VertThruster = 0;\nCommand.Lights = 0;\nCommand.CtrlBits1 = 0;\nCommand.CtrlBits2 = 0;\n\nwhile(1)\n    {\n    if(kbhit())                     //check for keystroke\n        {\n        Key = getch();\n        switch(Key)\n            {\n            case 'u':                           //up\n                Command.VertThruster = 100; \n                Command.CtrlBits2 = 0;          //D6 = 0\n                break;\n            case 'd':                           //down\n                Command.VertThruster = 100; \n                Command.CtrlBits2 = 0x40;       //D6 = 1\n                break;\n            case 72:                            //forward (up arrow)\n                Command.PortThruster = 50;  \n                Command.StbdThruster = 50;\n                Command.CtrlBits2 = 0x20;       //D4=0,D5 = 1;\n                break;\n            case 80:                            //back (down arrow)\n                Command.PortThruster = 50;  \n                Command.StbdThruster = 50;\n                Command.CtrlBits2 = 0x10;       //D4=1,D5 = 0;\n                break;\n            case 75:                            //left (left arrow)\n                Command.PortThruster = 50;  \n                Command.StbdThruster = 50;\n                Command.CtrlBits2 = 0x30;       //D4 = 1, D5 = 1;\n                break;\n            case 77:                            //right (right arrow)\n                Command.PortThruster = 50;  \n                Command.StbdThruster = 50;\n                Command.CtrlBits2 = 0;          //D4 = 0, D5 = 0;\n                break;\n            case 'l':                           //light on\n                Command.Lights = 100;\n                break;\n            case 'o':                           //light off\n                Command.Lights = 0;\n                break;\n            }\n        }\n    else if((++KeyDelay) == 20)                 //stop all thrusters when key is released\n        {                                       //(each comms cycle takes 15.6ms\n        Command.VertThruster = 0;               //so we must allow for the delay in the keyboard repeat)\n        Command.PortThruster = 0;\n        Command.StbdThruster = 0;\n        Command.VertThruster = 0;\n        Command.CtrlBits1 = 0;\n        Command.CtrlBits2 = 0;\n        KeyDelay = 0;\n        }\n    if(SendCAN(Command) == 0)                   //send command packet to videoray\n        {\n        printf(\"Error sending command....\\r\\n\");        \n        while(InitCAN() == 0) printf(\"Cannot connect!!!\\r\\n\");      //initialise CAN bus connection to Videoray\n        }\n    if(ReceiveCAN(&amp;Heading,&amp;Depth) == 0)                //get data back from videoray\n        {\n        printf(\"Error receiving data from Videoray....\\r\\n\");       \n        }\n    else\n        {\n        printf(\"Heading = %d\\tDepth = %d\\t\\r\",Heading,Depth);       //display heading &amp; depth\n        }   \n    }\n}\n</code></pre>\n\n<p>The above are my codes. As I mentioned, my Linux code does not work. I think it is because I may not set port properly. Can anyone give me some suggestions ? Hence I can modify some parts in the code.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1509561559, "post_id": 47061504, "comment_id": 81070922, "body": "What&#39;s the specific error you&#39;re getting with this code?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509561580, "post_id": 47061504, "comment_id": 81070935, "body": "You can&#39;t selectively make member functions be friends. And the general principle you&#39;ve just stumbled upon is that any friend classes should generally be part of the same module (and header)."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1509561589, "post_id": 47061504, "comment_id": 81070939, "body": "Don&#39;t include &quot;Foo.h&quot; info &quot;Bar.h&quot; - a forward declaration is sufficient, as in <code>class Foo;</code> . Then you can include &quot;Bar.h&quot; into &quot;Foo.h&quot; instead, and write <code>friend void Bar::mutateX(Foo &amp;foo);</code>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509561690, "post_id": 47061504, "comment_id": 81071000, "body": "BTW, if your idea of separate compilation is that each class should have a completely separate header/implementation file, I think you are misguided."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1509561735, "post_id": 47061504, "comment_id": 81071026, "body": "@StoryTeller <i>&quot;You can&#39;t selectively make member functions be friends&quot;</i>  <a href=\"http://rextester.com/BYKZ70551\" rel=\"nofollow noreferrer\">Can too</a>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1509561782, "post_id": 47061504, "comment_id": 81071054, "body": "@IgorTandetnik - Fancy that. It&#39;s news to me. I need to consult the standard."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509562124, "post_id": 47061504, "comment_id": 81071226, "body": "Aha! <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.mfct#6\" rel=\"nofollow noreferrer\">Found it</a>. I&#39;ll leave my erroneous comment for its other half. But yes, I was wrong on the first assumption."}, {"owner": {"reputation": 33, "user_id": 8846417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a4fabfc0ea4cf19f12c885e46b69c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Key", "link": "https://stackoverflow.com/users/8846417/l-key"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509562543, "post_id": 47061504, "comment_id": 81071438, "body": "@StoryTeller Interesting, makes sense that friend classes should be part of the same module, I&#39;m still in my early stages of learning C++ and didn&#39;t think about it like that."}, {"owner": {"reputation": 33, "user_id": 8846417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a4fabfc0ea4cf19f12c885e46b69c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Key", "link": "https://stackoverflow.com/users/8846417/l-key"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1509562759, "post_id": 47061504, "comment_id": 81071567, "body": "@IgorTandetnik I tried making the changes you suggested and compiling with:      g++ -c -std=c++0x -Wall Bar.cpp  But the compiler spat out some errors saying invalid use of Incomplete type &#39;class Foo&#39; In particular it pointed to the statement foo.x = 1; in Bar.cpp"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1509562763, "post_id": 47061504, "comment_id": 81071568, "body": "@L.Key - Well, it&#39;s a step above just programming in C++. It&#39;s about designing software modules. Think about it like this: if some entity is a friend of a class, it means that entity participates in implementing/affecting the classes functionality (otherwise, why would it need the access?). It logically follows that they should be part of the same module if encapsulation is a priority."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1509562935, "post_id": 47061504, "comment_id": 81071645, "body": "In Bar.cpp you now need to include Foo.h, of course."}, {"owner": {"reputation": 33, "user_id": 8846417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a4fabfc0ea4cf19f12c885e46b69c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Key", "link": "https://stackoverflow.com/users/8846417/l-key"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1509563260, "post_id": 47061504, "comment_id": 81071814, "body": "@IgorTandetnik There we go! That did it haha. So it seems like seperating out the program like this isn&#39;t the most elegant way of doing things, and instead I should have made the Bar class be part of the same header as Foo due to their friendly nature?"}], "owner": {"reputation": 33, "user_id": 8846417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a4fabfc0ea4cf19f12c885e46b69c?s=128&d=identicon&r=PG&f=1", "display_name": "L. Key", "link": "https://stackoverflow.com/users/8846417/l-key"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509561574, "creation_date": 1509561362, "last_edit_date": 1509561574, "question_id": 47061504, "link": "https://stackoverflow.com/questions/47061504/c-making-a-member-function-a-friend-with-seperate-compilation", "title": "C++ Making a Member Function a Friend With Seperate Compilation", "body": "<p>My question is very similar <a href=\"https://stackoverflow.com/questions/31342839/member-function-a-friend\">to a previously answered question</a> except I'm trying to rewrite the same program using seperate compilation in order to practice proper C++ coding style. I've simplified the program to highlite the problamatic areas.</p>\n\n<p>Currently this program runs fine if I declare the entire class as a friend, but this feels inherently dangerous, giving the entire class friend access.</p>\n\n<p>File Foo.h</p>\n\n<pre><code>#ifndef FOO_H\n#define FOO_H\n\nclass Foo{\nfriend class Bar;\n\npublic:\n    // getX defined in header for simplicity.\n    const int &amp;getX() const{\n        return x;\n    }\n\nprivate:\n    int x = 0;\n};\n\n#endif\n</code></pre>\n\n<p>File Bar.h</p>\n\n<pre><code>#ifndef BAR_H\n#define BAR_H\n\n#include \"Foo.h\"\n\nclass Bar{\npublic:\n    void mutateX(Foo &amp;foo);\n};\n\n#endif\n</code></pre>\n\n<p>File Bar.cpp</p>\n\n<pre><code>#include \"Bar.h\"\n\nvoid Bar::mutateX(Foo &amp;foo){\n    foo.x = 1;\n}\n</code></pre>\n\n<p>I can't wrap my head around how to just make the mutateX member as a friend. Any help will be greatly appreciated!</p>\n\n<p>Here's a tester class main.cpp</p>\n\n<pre><code>#include \"Foo.h\"\n#include \"Bar.h\"\n#include &lt;iostream&gt;\n\nint main(){\n    Foo foo;\n    Bar bar;\n\n    std::cout &lt;&lt; foo.getX() &lt;&lt; std::endl;\n\n    bar.mutateX(foo);\n    std::cout &lt;&lt; foo.getX() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1509560418, "post_id": 47061274, "comment_id": 81070301, "body": "So, what&#39;s the problem? What&#39;s not working? What errors to you get?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1509560521, "post_id": 47061274, "comment_id": 81070369, "body": "Have you checked a <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream\" rel=\"nofollow noreferrer\"><code>std::istream</code> reference</a>? I&#39;m sure you will quickly find a function to <i>ignore</i> the remaining line."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1509560734, "post_id": 47061274, "comment_id": 81070507, "body": "once you read the line with <code>getline</code> you dont need to ignore it anymore because it was already read. not clear what is the problem"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 1, "creation_date": 1509560985, "post_id": 47061274, "comment_id": 81070630, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7868936/read-file-line-by-line\">Read file line by line</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1509562551, "post_id": 47061274, "comment_id": 81071442, "body": "What fails to work with your current solution?"}, {"owner": {"reputation": 57, "user_id": 8202009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0c46cdaee293b9eabb96a94d8bebfed?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/8202009/kai"}, "edited": false, "score": 0, "creation_date": 1509574421, "post_id": 47061274, "comment_id": 81077227, "body": "It basically works for me but my main intention was, if there&#39;s a possibility to do it without reading the whole line, every time."}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 991073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0d7245e645bc4a2dc6499aae42a230?s=128&d=identicon&r=PG", "display_name": "\u628a\u53cb\u60c5\u7559\u5728\u65e0\u76d0", "link": "https://stackoverflow.com/users/991073/%e6%8a%8a%e5%8f%8b%e6%83%85%e7%95%99%e5%9c%a8%e6%97%a0%e7%9b%90"}, "edited": false, "score": 0, "creation_date": 1553168399, "post_id": 47061356, "comment_id": 97288961, "body": "This way remaining text is still not consumed."}], "tags": [], "owner": {"reputation": 125, "user_id": 8619231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458069254db035a1f3e4fe7b30c80257?s=128&d=identicon&r=PG", "display_name": "Vedant", "link": "https://stackoverflow.com/users/8619231/vedant"}, "is_accepted": false, "score": -1, "last_activity_date": 1509561142, "last_edit_date": 1509561142, "creation_date": 1509560713, "answer_id": 47061356, "question_id": 47061274, "link": "https://stackoverflow.com/questions/47061274/discard-ignore-the-rest-of-a-line-form-a-file-in-c/47061356#47061356", "title": "Discard/Ignore the rest of a line form a file in c++", "body": "<p>One can solution for this can be by putting delimiter charcter before part to be ignored.\nAnd then setting the custom delimiter character, for <code>getline()</code> function\nCode:</p>\n\n<pre><code>while (getline (inputFile,puffer,(delimiter))\n{ \n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": true, "score": -1, "last_activity_date": 1538407215, "last_edit_date": 1538407215, "creation_date": 1509561995, "answer_id": 47061639, "question_id": 47061274, "link": "https://stackoverflow.com/questions/47061274/discard-ignore-the-rest-of-a-line-form-a-file-in-c/47061639#47061639", "title": "Discard/Ignore the rest of a line form a file in c++", "body": "<p>Let's say you have a class <code>Bike</code> defined as such.</p>\n\n<pre><code>struct Bike {\n    std::string brand, model;\n    int year, price;\n};\n</code></pre>\n\n<p>Then I suggest you define an input operator for class <code>Bike</code>.</p>\n\n<pre><code>std::istream&amp; operator&gt;&gt;(std::istream&amp; in, Bike&amp; b) {\n    if (std::string line; std::getline(in, line)) {\n        std::istringstream line_stream{line};\n        line_stream &gt;&gt; b.brand &gt;&gt; b.model &gt;&gt; b.year &gt;&gt; b.price;\n    }\n    return in;\n}\n</code></pre>\n\n<p><sup>(Note the use of the C++17 <a href=\"https://isocpp.org/blog/2016/08/cpp17-if-statement-with-initializer-steve-lorimer\" rel=\"nofollow noreferrer\">if-with-initializers</a> syntax).</sup></p>\n\n<p>Now it is simply a matter of constructing an <code>std::istream_iterator</code> pair for filling your vector from any input stream (let's say the stream is called <code>input</code> here).</p>\n\n<pre><code>std::vector&lt;Bike&gt; vecBikes{std::istream_iterator&lt;Bike&gt;{input},\n                        std::istream_iterator&lt;Bike&gt;{}};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/132a2534e745fde8\" rel=\"nofollow noreferrer\"><strong>Live example</strong></a></p>\n"}], "owner": {"reputation": 57, "user_id": 8202009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0c46cdaee293b9eabb96a94d8bebfed?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/8202009/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 47061639, "answer_count": 2, "score": 1, "last_activity_date": 1538407215, "creation_date": 1509560331, "last_edit_date": 1509560649, "question_id": 47061274, "link": "https://stackoverflow.com/questions/47061274/discard-ignore-the-rest-of-a-line-form-a-file-in-c", "title": "Discard/Ignore the rest of a line form a file in c++", "body": "<p>I'm looking for a way to read only specific sets of data from a text file. Later I need to \"feed\" a class with it's content and store the objects in a vector.</p>\n\n<p>My problem is, that I don't need the whole content of the lines and would like to discard or ignore what's coming next and jump to the next line of the text.</p>\n\n<p>I would be very happy if you have a solution or tips for me :)</p>\n\n<p>Each line in the file is structured like this:</p>\n\n<blockquote>\n  <p>brand modelName yearOfProduction price moreStuffIDontCareAbout</p>\n</blockquote>\n\n<p>Here's what I've come up with so far.</p>\n\n<pre><code>while (inputFile &gt;&gt; brand &gt;&gt; modell &gt;&gt; yearofproduction &gt;&gt; prize) {     \n    vecBikes.push_back(Bike(brand, modell, yearofproduction, prize));\n    getline(inputFile, puffer);\n}\n</code></pre>\n"}, {"tags": ["c++", "logging", "visual-studio-2008", "windows-ce", "log4cxx"], "comments": [{"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1509560390, "post_id": 47061152, "comment_id": 81070284, "body": "Out of morbid curiosity, which line exactly is this error on? Also, you might want to add a tag for VS 2008, or Windows CE, or both, since this issue looks like it&#39;s specific to that environment."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509560635, "post_id": 47061152, "comment_id": 81070445, "body": "probably the error is in the line with <code>LOG4CXX_EXPORT</code>. What is that? Did you try to find where this is defined?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4984149"}, "reply_to_user": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1509561362, "post_id": 47061152, "comment_id": 81070823, "body": "@Omnifarious it is on the line with LOG4CXX_EXPORT as tobi guessed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4984149"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509561406, "post_id": 47061152, "comment_id": 81070847, "body": "@tobi303 I did not try because I actually assumed that LOG4CXX_EXPORT was being defined right there, as I misunderstood the syntax.. I can attempt to look for where that&#39;s defined."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1509561599, "post_id": 47061152, "comment_id": 81070947, "body": "no it is most likely a macro, as it stands the code is not correct (probably with the definition of that macro it is fine, but who knows..)"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1509576372, "post_id": 47061152, "comment_id": 81077879, "body": "<code>LOG4CXX_EXPORT</code> is probably defined as empty (basically it turns into nothing) on some platforms and as <code>__export__</code> or something like that on others where that&#39;s a keyword for that compiler. Check on what the preprocessor turns your file into."}], "owner": {"user_type": "does_not_exist", "display_name": "user4984149"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509561096, "creation_date": 1509559821, "last_edit_date": 1509561096, "question_id": 47061152, "link": "https://stackoverflow.com/questions/47061152/log4cxx-locale-looks-like-a-function-definition-but-there-is-no-parameter-lis", "title": "log4cxx - Locale looks like a function definition, but there is no parameter list", "body": "<p>I am trying to compile a project that uses log4cxx, a c++ logging framework. Once I downloaded the framework and added it as a dependency, however, I get this error:</p>\n\n<p>'Locale' : looks like a function definition, but there is no parameter list; skipping apparent body</p>\n\n<p>This happens in locale.h which looks like this:</p>\n\n<pre><code>#ifndef _LOG4CXX_HELPERS_LOCALE_H\n#define _LOG4CXX_HELPERS_LOCALE_H\n\n#include &lt;log4cxx/logstring.h&gt;\n\nnamespace log4cxx\n{\n        namespace helpers\n        {\n                class LOG4CXX_EXPORT Locale\n                {\n                public:\n                        Locale(const LogString&amp; language);\n                        Locale(const LogString&amp; language, const LogString&amp; country);\n                        Locale(const LogString&amp; language, const LogString&amp; country,\n                                const LogString&amp; variant);\n\n                        const LogString&amp; getLanguage() const;\n                        const LogString&amp; getCountry() const;\n                        const LogString&amp; getVariant() const;\n\n                protected:\n                        Locale(const Locale&amp;);\n                        Locale&amp; operator=(const Locale&amp;);\n                        const LogString language;\n                        const LogString country;\n                        const LogString variant;\n                }; // class Locale\n        }  // namespace helpers\n} // namespace log4cxx\n\n#endif // _LOG4CXX_HELPERS_LOCALE_H\n</code></pre>\n\n<p>Is there anything wrong with this syntax? I am not knowledgeable in C++ at all but I do not see what would be wrong with it.</p>\n\n<p>The one single thing on the internet I could find was this: <a href=\"https://issues.apache.org/jira/browse/LOGCXX-147\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/LOGCXX-147</a> which makes perfect sense because I am targetting a windows ce device (although, using Visual Studio 2008 instead of 2005). The suggestion there is to include log4cxx/logstring.h inside \"the cpp file\" which I assume they mean locale.cpp although if I am clearly misinterpreting this please let me know. It said that would get rid of the compilation error but unfortunately I did that and it did not do anything to help :(. </p>\n\n<p>I know it may be a bit of a longshot but does anyone know how one might fix this?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1509559830, "post_id": 47061124, "comment_id": 81069955, "body": "<b>TL;DR</b>: <code>-fno-operator-names</code>"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1509559877, "post_id": 47061124, "comment_id": 81069979, "body": "Is it very clever to redefine existing definitions...?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1509560116, "post_id": 47061124, "comment_id": 81070121, "body": "@Klaus I want to modify it as little as possible to make integration with future micropython releases easier."}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "closed_date": 1509559804, "answer_count": 0, "score": 1, "last_activity_date": 1509560146, "creation_date": 1509559708, "last_edit_date": 1509560146, "question_id": 47061124, "link": "https://stackoverflow.com/questions/47061124/how-to-disable-alternative-tokens-in-c", "closed_reason": "Duplicate", "title": "how to disable alternative tokens in C++", "body": "<p>I'm building <a href=\"https://github.com/micropython/micropython\" rel=\"nofollow noreferrer\">micropython</a> which is meant to be compiled as C-code; my project team wants it compiled as C++ code so we don't have to mix C and C++ code.</p>\n\n<p>Ok no big deal except <a href=\"https://github.com/micropython/micropython/blob/a3dc1b1957d2c96d7c60c2c629c95077b03488a1/py/parse.c#L87\" rel=\"nofollow noreferrer\"><strong>parse.c</strong></a> contains</p>\n\n<p><a href=\"https://github.com/micropython/micropython/blob/a3dc1b1957d2c96d7c60c2c629c95077b03488a1/py/parse.c#L87\" rel=\"nofollow noreferrer\"><code>#define or(n)                   (RULE_ACT_OR | n)</code></a></p>\n\n<p>And the C++ compiler says </p>\n\n<blockquote>\n  <p>error : \"or\" cannot be used as a macro name as it is an operator in C++</p>\n</blockquote>\n\n<p>I definitely don't want to start messing with the micropython source.</p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>Is there a C++  gcc compiler option to undefine one (or all) the <a href=\"http://en.cppreference.com/w/cpp/language/operator_alternative\" rel=\"nofollow noreferrer\">alternative tokens</a>?</p>\n"}, {"tags": ["c++", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1509559826, "post_id": 47061115, "comment_id": 81069951, "body": "Does your function not work?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1509560240, "post_id": 47061115, "comment_id": 81070199, "body": "What functionality do you expect when you bound a recursive function?  How is it different from what you&#39;ve written?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509560381, "post_id": 47061115, "comment_id": 81070279, "body": "My interpretation of the question is that you are trying to <a href=\"https://en.wikipedia.org/wiki/Map_(higher-order_function)\" rel=\"nofollow noreferrer\">map a function to your data structure</a>. That is, instead of printing each node, you would like to execute an arbitrary function on each node recursively. Is this correct?"}, {"owner": {"reputation": 803, "user_id": 5531385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wpokHCJQEJ4/AAAAAAAAAAI/AAAAAAAAEZU/ih9fDr0oG-Q/photo.jpg?sz=128", "display_name": "Victor Havin", "link": "https://stackoverflow.com/users/5531385/victor-havin"}, "edited": false, "score": 0, "creation_date": 1509560522, "post_id": 47061115, "comment_id": 81070371, "body": "Do you mean &quot;How to print it with indentation reflecting your tree structure instead of printing a &#39;flat&#39; column of keys?&quot;"}, {"owner": {"reputation": 527, "user_id": 1414786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d901954f01e9d53970cc94bda0ee2682?s=128&d=identicon&r=PG&f=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/1414786/misery"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509562344, "post_id": 47061115, "comment_id": 81071341, "body": "@Fran&#231;oisAndrieux My function works. However the requirement for this library is no unbounded recurrence. There is nothing about mapping function recursively. That is a simple lib without such tricks."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1509562412, "post_id": 47061115, "comment_id": 81071373, "body": "@Misery Recursive functions on recursive data are implicitly bound by the data. If you need an explicit boundary, see the answer below."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1509571323, "post_id": 47061115, "comment_id": 81075908, "body": "What do you expect it to do when it reaches the limit? Give up with an error? Skip part of the work? Switch to a different algorithm?"}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 8576366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTEwi.jpg?s=128&g=1", "display_name": "Pablo Oliva", "link": "https://stackoverflow.com/users/8576366/pablo-oliva"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1509561629, "post_id": 47061330, "comment_id": 81070972, "body": "Hmmm... that&#39;s another way to see it. Let&#39;s see if whoever asked comments my answer to see if it helped."}], "tags": [], "owner": {"reputation": 314, "user_id": 8576366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTEwi.jpg?s=128&g=1", "display_name": "Pablo Oliva", "link": "https://stackoverflow.com/users/8576366/pablo-oliva"}, "is_accepted": true, "score": 1, "last_activity_date": 1509560574, "creation_date": 1509560574, "answer_id": 47061330, "question_id": 47061115, "link": "https://stackoverflow.com/questions/47061115/how-to-bound-recurrence/47061330#47061330", "title": "how to bound recurrence?", "body": "<p>If I understand correctly, you want to limit the depth of your call stack (say, only allow for N recursive calls).</p>\n\n<p>The easiest way to do this would be to simply pass the current depth of your call stack as a const parameter.\nYour code would become:</p>\n\n<pre><code>void print_postorder(BST_NODE* node, const unsigned int call_depth)\n{\n     if (node == NULL || call_depth &gt; SOME_THRESHOLD)\n        return;\n\n     print_postorder(node-&gt;left, call_depth + 1);\n     print_postorder(node-&gt;right, call_depth + 1);\n\n     cout&lt;&lt;node-&gt;key&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Note that SOME_THRESHOLD must have a value. You can hardcode it in the function (bad) or define it as a static constant (better).</p>\n\n<p>Your first call would go from being <code>print_postorder(node)</code> to <code>print_postorder(node, 0)</code>.</p>\n"}], "owner": {"reputation": 527, "user_id": 1414786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d901954f01e9d53970cc94bda0ee2682?s=128&d=identicon&r=PG&f=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/1414786/misery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 47061330, "answer_count": 1, "score": -1, "last_activity_date": 1509560574, "creation_date": 1509559686, "question_id": 47061115, "link": "https://stackoverflow.com/questions/47061115/how-to-bound-recurrence", "title": "how to bound recurrence?", "body": "<p>I am writing a simple library using recursive data structures like BST. How do I bound recursive functions like search, insert or postorder print in an elegant manner. </p>\n\n<pre><code>void print_postorder(BST_NODE* node)\n{\n     if (node == NULL)\n        return;\n\n     print_postorder(node-&gt;left);\n     print_postorder(node-&gt;right);\n\n     cout&lt;&lt;node-&gt;key&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "object"], "comments": [{"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509559957, "post_id": 47061100, "comment_id": 81070025, "body": "How do you know it crashes in declareWinner and not somewhere else?"}, {"owner": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 1, "creation_date": 1509560161, "post_id": 47061100, "comment_id": 81070146, "body": "Apart from checking the fighters for NULL-Pointers, make sure that you return a string in all cases of calling declareWinner()."}, {"owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "reply_to_user": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1509560169, "post_id": 47061100, "comment_id": 81070149, "body": "@mnistic I do not know where it crashes , i just know it throws that sigill signal. I&#39;m trying to solve this problem on codewars, so it just shows me that signal. I.ve tried to put it in codeblocks to run too , and for some simple examples it works well."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1509560266, "post_id": 47061100, "comment_id": 81070214, "body": "Step 1: Run it under a debugger. Look at a stacktrace when it crashes. Verify it dies where/when you think it does. Step 2: step through the execution in the debugger, observe state, ensure it is what you expect at each step.   In short: debug the problem."}, {"owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "reply_to_user": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 0, "creation_date": 1509560284, "post_id": 47061100, "comment_id": 81070226, "body": "@Gerriet i am ensured that the pointers are not NULL, and why should i return a string in all cases? I mean ,  i am ensured that the firstAttacker is in the tests"}, {"owner": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 0, "creation_date": 1509560341, "post_id": 47061100, "comment_id": 81070258, "body": "From a design standpoint, setHealth() should be replaced by changeHealthBy(). Also instead of multiple calls of getHealth()&lt;=0 you could do something like bool hasLost()."}, {"owner": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 1, "creation_date": 1509560434, "post_id": 47061100, "comment_id": 81070313, "body": "I can see no code that ensures the pointers are not NULL. Also, program defensively, so make all assumptions explicit (e.g. that one of the fighters has the name that you give)."}, {"owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "reply_to_user": {"reputation": 1087, "user_id": 4883924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2rqmr.png?s=128&g=1", "display_name": "Gerriet", "link": "https://stackoverflow.com/users/4883924/gerriet"}, "edited": false, "score": 0, "creation_date": 1509560674, "post_id": 47061100, "comment_id": 81070471, "body": "@Gerriet , as i said before , i cant change the name of the classes or functions, even though i would like to name them differently. And the code doesnt ensures me that the pointers are not NULL but the problem does. I&#39;ll try and check it though."}, {"owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1509560710, "post_id": 47061100, "comment_id": 81070490, "body": "@JesperJuhl i have done that , and for something like this                       <code>Fighter fighter1(&quot;Jerry&quot;, 30, 3);     Fighter fighter2(&quot;Harald&quot;, 20, 5); \tcout&lt;&lt;declareWinner(&amp;fighter1, &amp;fighter2, &quot;Jerry&quot;); </code>                                             it doesnt throw sigill"}, {"owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "edited": false, "score": 0, "creation_date": 1509564404, "post_id": 47061100, "comment_id": 81072434, "body": "What if firstAttacker name is different from both fighter1&#39;s and fighter2&#39;s? That would result in not returning std::string and can cause SIGILL. Doesn&#39;t your compiler warn on return value for that case?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "edited": false, "score": 0, "creation_date": 1509569587, "post_id": 47062386, "comment_id": 81075095, "body": "I understand your point in adding a return statement at the end, i would&#39;ve used it if i haven&#39;t been sure about the fact that one of the <code>if</code> nor <code>else if</code>  statements are correct. But , i tried your function and it works and doesnt throw that signal anymore. I am sure it had nothing to do with the fact that the firstAttacker could be different than the names of the fighters, because the tests in the problem ensured me that the firstAttacker is one of the fighters."}, {"owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "reply_to_user": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "edited": false, "score": 1, "creation_date": 1509572320, "post_id": 47062386, "comment_id": 81076364, "body": "There is also a problem with while condition, which could exit prematurely and not return anything. Should use parenthesis: while((fighter1-&gt;getHealth()!=0)&amp;&amp;(fighter2-&gt;getHealth()!=0)&zwnj;&#8203;). But the point is your if conditions don&#39;t cover all possible cases, you should always use elses or other guards against premature return from function. Your compiler should give you a warning on that as well."}], "tags": [], "owner": {"reputation": 441, "user_id": 789999, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQxPzbrWxCY/AAAAAAAAAAI/AAAAAAAAAT8/VUGhtzwATDw/photo.jpg?sz=128", "display_name": "Victor", "link": "https://stackoverflow.com/users/789999/victor"}, "is_accepted": true, "score": 1, "last_activity_date": 1509575115, "last_edit_date": 1509575115, "creation_date": 1509564854, "answer_id": 47062386, "question_id": 47061100, "link": "https://stackoverflow.com/questions/47061100/why-does-this-exists-prematurely-with-a-sigill-signal/47062386#47062386", "title": "Why does this exists prematurely with a Sigill signal?", "body": "<p>In some conditions, it is possible that function runs to the end and exits without returning a value, that corrupts stack and can lead to SIGILL. As a safe measure you can, for example, add return statement to the end of function.  </p>\n\n<pre><code>std::string declareWinner(Fighter* fighter1, Fighter* fighter2, \n    std::string firstAttacker)\n{\n    // Your code goes here. Have fun!\n        if(firstAttacker==fighter1-&gt;getName())\n        {\n          while(fighter1-&gt;getHealth()!=0&amp;&amp;fighter2-&gt;getHealth()!=0)\n          {\n            fighter2-&gt;setHealth(fighter2-&gt;getHealth()-fighter1-&gt;getDamagePerAttack());\n            if(fighter2-&gt;getHealth()&lt;=0)\n            {\n              return fighter1-&gt;getName();\n            }\n            fighter1-&gt;setHealth(fighter1-&gt;getHealth()-fighter2-&gt;getDamagePerAttack());\n            if(fighter1-&gt;getHealth()&lt;=0)\n            {\n              return fighter2-&gt;getName();\n            }\n          }\n        }\n        else if(firstAttacker==fighter2-&gt;getName())\n        {\n          while(fighter1-&gt;getHealth()!=0&amp;&amp;fighter2-&gt;getHealth()!=0)\n          {\n            fighter1-&gt;setHealth(fighter1-&gt;getHealth()-fighter2-&gt;getDamagePerAttack());\n            if(fighter1-&gt;getHealth()&lt;=0)\n            {\n              return fighter2-&gt;getName();\n            }\n            fighter2-&gt;setHealth(fighter2-&gt;getHealth()-fighter1-&gt;getDamagePerAttack());\n            if(fighter2-&gt;getHealth()&lt;=0)\n            {\n              return fighter1-&gt;getName();\n            }\n          }\n        }\n        return \"No winner\";   &lt;= Add before exiting function\n}\n</code></pre>\n\n<p>I also noticed there's a redundancy  and possible logical errors in code. \nI would rewrite it like this (without changing function signature):</p>\n\n<pre><code>std::string declareWinner(Fighter* fighter1, Fighter* fighter2, \n      std::string firstAttacker)\n{ \n    Fighter *first;\n    Fighter *second;\n    if(firstAttacker == fighter1-&gt;getName()) {\n        first = fighter2;\n        second = fighter1;\n    } else if (firstAttacker == fighter2-&gt;getName()) {\n        first = fighter1;\n        second = fighter2;\n    } else {\n        // Bad call parameters\n        return \"Bad call\"; // Throw exception maybe?\n    }\n    // Simulating fighting\n    do {\n        std::swap(second,first);\n        second-&gt;setHealth(second-&gt;getHealth() - first-&gt;getDamagePerAttack()); \n    } while (second-&gt;getHealth() &gt; 0);\n    return first-&gt;getName(); \n\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8748788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1189290037881084/picture?type=large", "display_name": "Bogdan Carp", "link": "https://stackoverflow.com/users/8748788/bogdan-carp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 47062386, "answer_count": 1, "score": 1, "last_activity_date": 1509575115, "creation_date": 1509559642, "last_edit_date": 1509569915, "question_id": 47061100, "link": "https://stackoverflow.com/questions/47061100/why-does-this-exists-prematurely-with-a-sigill-signal", "title": "Why does this exists prematurely with a Sigill signal?", "body": "<p>I have a problem in which I have to return the name of a winner in a fight between two fighters.\nThe class for fighter is as follows:</p>\n\n<pre><code>class Fighter\n{\nprivate:\nstd::string name;\n\nint health;\n\nint damagePerAttack;\n\npublic:\nFighter(std::string name, int health, int damagePerAttack)\n{\n    this-&gt;name = name;\n    this-&gt;health = health;\n    this-&gt;damagePerAttack = damagePerAttack;\n}\n\n~Fighter() { };\n\nstd::string getName()\n{\n    return name;\n}\n\nint getHealth()\n{\n    return health;\n}\n\nint getDamagePerAttack()\n{\n    return damagePerAttack;\n}\n\nvoid setHealth(int value)\n{\n    health = value;\n}\n};\n</code></pre>\n\n<p>I wrote a function that should return the name of the winner.</p>\n\n<pre><code>  std::string declareWinner(Fighter* fighter1, Fighter* fighter2, \n  std::string firstAttacker)\n  {\n     // Your code goes here. Have fun!\n    if(firstAttacker==fighter1-&gt;getName())\n    {\n      while(fighter1-&gt;getHealth()!=0&amp;&amp;fighter2-&gt;getHealth()!=0)\n      {\n        fighter2-&gt;setHealth(fighter2-&gt;getHealth()-fighter1-&gt;getDamagePerAttack());\n        if(fighter2-&gt;getHealth()&lt;=0)\n        {\n          return fighter1-&gt;getName();\n        }\n        fighter1-&gt;setHealth(fighter1-&gt;getHealth()-fighter2-&gt;getDamagePerAttack());\n        if(fighter1-&gt;getHealth()&lt;=0)\n        {\n          return fighter2-&gt;getName();\n        }\n      }\n    }\n    else if(firstAttacker==fighter2-&gt;getName())\n    {\n      while(fighter1-&gt;getHealth()!=0&amp;&amp;fighter2-&gt;getHealth()!=0)\n      {\n        fighter1-&gt;setHealth(fighter1-&gt;getHealth()-fighter2-&gt;getDamagePerAttack());\n        if(fighter1-&gt;getHealth()&lt;=0)\n        {\n          return fighter2-&gt;getName();\n        }\n        fighter2-&gt;setHealth(fighter2-&gt;getHealth()-fighter1-&gt;getDamagePerAttack());\n        if(fighter2-&gt;getHealth()&lt;=0)\n        {\n          return fighter1-&gt;getName();\n        }\n      }\n    }\n  }\n</code></pre>\n\n<p>This satisfies all my needs, but it throws SIGILL signal, and i do not know what i did wrong. How should I deal with it?</p>\n"}, {"tags": ["c++", "multiple-inheritance", "diamond-problem"], "comments": [{"owner": {"reputation": 11698, "user_id": 1560850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dba9e19ac64c87c548a4c636bf5cb7f0?s=128&d=identicon&r=PG", "display_name": "valdo", "link": "https://stackoverflow.com/users/1560850/valdo"}, "edited": false, "score": 0, "creation_date": 1509559742, "post_id": 47061060, "comment_id": 81069901, "body": "Sounds like a bug with incorrect casting. Please provide more code/details. Definitely this should not happen."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1509559795, "post_id": 47061060, "comment_id": 81069930, "body": "Can you please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and Verifiable Example</a> to show us?"}], "answers": [{"tags": [], "owner": {"reputation": 1846, "user_id": 2446326, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/TumpQ.jpg?s=128&g=1", "display_name": "alernerdev", "link": "https://stackoverflow.com/users/2446326/alernerdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1509566068, "creation_date": 1509566068, "answer_id": 47062671, "question_id": 47061060, "link": "https://stackoverflow.com/questions/47061060/multiple-vtables-ending-up-in-the-wrong-one-when-making-a-call/47062671#47062671", "title": "multiple vtables, ending up in the wrong one when making a call", "body": "<p>Figured it out.   The problem was the way the object was instantiated:</p>\n\n<pre><code>void * p = new CRpCat();\nIRpCat * p2 = static_cast&lt;IRpCat *&gt;(p);\np2-&gt;Initialize();\n</code></pre>\n\n<p>Storing the pointer in \"void *\" first and then casting it, was \"slicing\" the pointer -- and therefore the weird results.   Thank you all.</p>\n"}], "owner": {"reputation": 1846, "user_id": 2446326, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/TumpQ.jpg?s=128&g=1", "display_name": "alernerdev", "link": "https://stackoverflow.com/users/2446326/alernerdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509566068, "creation_date": 1509559501, "question_id": 47061060, "link": "https://stackoverflow.com/questions/47061060/multiple-vtables-ending-up-in-the-wrong-one-when-making-a-call", "title": "multiple vtables, ending up in the wrong one when making a call", "body": "<p>I have the following setup:</p>\n\n<pre><code>class CRpCat : \n    public CQueryDataBase,\n    public IRpCat \n    {\npublic:\n    CRpCat();\n    virtual ~CRpCat();\n\n// IRpCat\npublic:\n    virtual HRESULT Initialize();\n</code></pre>\n\n<p>.....  blah blah  .......</p>\n\n<pre><code>class CQueryDataBase : public CQueryNotify\n{\n    // this has virtual functions, all concrete\n    virtual void OnDataChange(ULONG nRow, DBREASON eReason);\n</code></pre>\n\n<p>.....  blah blah  .......</p>\n\n<pre><code>class CQueryNotify \n{\npublic:\n    // abstract signatures\n    virtual void OnDataChange(ULONG nRow, DBREASON eReason) = 0;\n</code></pre>\n\n<p>...... blah blah ..............</p>\n\n<p>and finally</p>\n\n<pre><code>class IRpCat\n{\npublic:\n    virtual HRESULT Initialize() = 0;\n</code></pre>\n\n<p>So, I have a class thats deriving from 2 classes, and there are virtual functions everywhere.  The classes derived from are NOT under one parent class -- this is NOT the diamond problem (although, probably, its related)</p>\n\n<p>Here is the problem.  When instantiating the class and making the Initialize() call, I end up in the OnDataChange() instead:</p>\n\n<pre><code>IRpCat *pCat = GetInstance()-&gt;GetRpCat();\npCat-&gt;Initialize();\n</code></pre>\n\n<p>Both Initialize() and OnDataChange() are the first functions in their respective vtable slots -- so I dont understand whats going on, but I get that the Initialize() call is happening through vtable[0] -- but unfortunately, I end up in the wrong vtable.   On a hunch, I have tried the following:</p>\n\n<p>By making the first line virtual, I end up in Initialize() correctly()</p>\n\n<pre><code>class CRpCat : \n       public virtual CQueryDataBase,\n       public IRpCat \n       {\n</code></pre>\n\n<p>By making the second line virtual, I incorrectly end up in OnDataChange()</p>\n\n<pre><code>class CRpCat : \n       public CQueryDataBase,\n       public virtual IRpCat \n       {\n</code></pre>\n\n<p>And by making both lines virtual, it throws an exception when making Initialize() call</p>\n\n<pre><code>class CRpCat : \n       public virtual CQueryDataBase,\n       public virtual IRpCat \n       {\n</code></pre>\n\n<p>So, can someone please explain as to whats going on? (This is Visual Studio C++, by the way).  It definitely has something to do with the way vtables are laid out.\nThank you</p>\n"}, {"tags": ["c++", "c++17", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 1102294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878405ef25b8837f7d15b1b2dc0e8265?s=128&d=identicon&r=PG", "display_name": "Jonathan O&#39;Connor", "link": "https://stackoverflow.com/users/1102294/jonathan-oconnor"}, "edited": false, "score": 0, "creation_date": 1509622023, "post_id": 47060688, "comment_id": 81096328, "body": "yes, I needed to use the std::conditional_t version of ret_type. I presume all the hard work is happening in std::invoke_result_t, as the code also works with const member functions.   Finally, side-stepping the decltype is exactly what I want to do, as I now want to write methods that extract the key from Foo."}, {"owner": {"reputation": 591, "user_id": 1102294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878405ef25b8837f7d15b1b2dc0e8265?s=128&d=identicon&r=PG", "display_name": "Jonathan O&#39;Connor", "link": "https://stackoverflow.com/users/1102294/jonathan-oconnor"}, "edited": false, "score": 1, "creation_date": 1509622469, "post_id": 47060688, "comment_id": 81096606, "body": "For beginners to template meta-programming, the pattern I didn&#39;t know about was declaring a templated trait class, and then defining a specialization of the trait for pointers to members, templated on the type of member and type of class. While instantiating the Index alias template, C++17 finds a match for the trait template that expands the pointer to member into it&#39;s individual pieces."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1509560543, "last_edit_date": 1509560543, "creation_date": 1509558030, "answer_id": 47060688, "question_id": 47060448, "link": "https://stackoverflow.com/questions/47060448/how-do-i-create-specializations-of-alias-templates-using-class-template-speciali/47060688#47060688", "title": "How do I create specializations of alias templates using class template specialization?", "body": "<p>I think you may just want:</p>\n\n<pre><code>template &lt;class &gt;\nstruct trait;\n\ntemplate &lt;class C, class T&gt;\nstruct trait&lt;T C::*&gt; {\n    using class_type = C;\n    using ret_type = std::invoke_result_t&lt;T C::*, C&gt;; \n};\n\ntemplate &lt;typename PMember, typename T = trait&lt;PMember&gt;&gt;\nusing Index = std::map&lt;typename T::ret_type, typename T::class_type&gt;;\n</code></pre>\n\n<p>This works for both pointers to member functions and pointers to member data. However, you have to be careful with the member data since <code>ret_type</code> here will always be a reference type. So you may want to do something like:</p>\n\n<pre><code>using ret_type = std::conditional_t&lt;\n    std::is_function_v&lt;T&gt;,\n    std::invoke_result_t&lt;T C::*, C&gt;,\n    T&gt;;\n</code></pre>\n\n<hr />\n\n<p>Of course, this is C++17, so you can even side-step the decltype:</p>\n\n<pre><code>template &lt;auto PMember, typename T = trait&lt;decltype(PMember)&gt;&gt;\nusing Index = std::map&lt;typename T::ret_type, typename T::class_type&gt;;\n\nIndex&lt;&amp;Foo::x&gt;        indexOnX;       // std::map&lt;int, Foo&gt;\nIndex&lt;&amp;Foo::get_name&gt; indexOnGetName; // std::map&lt;char*, Foo&gt;\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 1102294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878405ef25b8837f7d15b1b2dc0e8265?s=128&d=identicon&r=PG", "display_name": "Jonathan O&#39;Connor", "link": "https://stackoverflow.com/users/1102294/jonathan-oconnor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "accepted_answer_id": 47060688, "answer_count": 1, "score": 3, "last_activity_date": 1509560543, "creation_date": 1509557147, "last_edit_date": 1592644375, "question_id": 47060448, "link": "https://stackoverflow.com/questions/47060448/how-do-i-create-specializations-of-alias-templates-using-class-template-speciali", "title": "How do I create specializations of alias templates using class template specialization?", "body": "<p>I have been playing around with pointers to data members and pointers to member functions, and I am trying to create a template that will create a specialized std::map using the class type and the return type of the function or type of the data member.</p>\n<p>So:</p>\n<pre><code>template&lt;typename PMember&gt;\nusing Index = std::map&lt;typename return_type_of&lt;PMember&gt;, typename pod_type_of&lt;PMember&gt;&gt;;\n\nstruct Foo { int x; char* get_name(); };\nIndex&lt;decltype(&amp;Foo::x)&gt; indexOnX; // std::map&lt;int, Foo&gt;\nIndex&lt;decltype(&amp;Foo::get_name)&gt; indexOnGetName; // std::map&lt;char*, Foo&gt;\n</code></pre>\n<p>I have managed to write 2 alias templates that do that, but sadly they have different names. <a href=\"https://godbolt.org/g/C6EYsd\" rel=\"nofollow noreferrer\">Code in Godbolt</a>:</p>\n<pre><code>include &lt;type_traits&gt;\n#include &lt;map&gt;\n\n/**\n * Splits a pointer to member function type into it's class and return type.\n * This only works with member functions that take no arguments.\n */\ntemplate &lt;typename MemFunc_t&gt;\nstruct decompose_member_function_pointer {\n   // We hide the implementation within the details struct. These should not be used by users of the class. \n   struct details {\n     // This templated function will be used to split M into it's component parts. \n     template &lt;typename C, typename T&gt;\n     static T get_returntype(T (C::*v)());\n\n     template &lt;typename C, typename T&gt;\n     static C get_classtype(T (C::*v)());\n   }; \n\n   using return_type = decltype(details::get_returntype(std::declval&lt;std::decay_t&lt;MemFunc_t&gt;&gt;()));\n   using type = decltype(details::get_classtype(std::declval&lt;std::decay_t&lt;MemFunc_t&gt;&gt;()));\n};\n\ntemplate &lt;typename Member_t&gt;\nusing decompose_member_function_pointer_t = typename decompose_member_function_pointer&lt;Member_t&gt;::type;\ntemplate &lt;typename Member_t&gt;\nusing decompose_member_function_pointer_rt = typename decompose_member_function_pointer&lt;Member_t&gt;::return_type;\n\ntemplate &lt;typename Member_t&gt;\nstruct decompose_member_object_pointer {\n   struct details {\n     template &lt;typename C, typename T&gt;\n     static T get_returntype(T C::*v);\n\n     template &lt;typename C, typename T&gt;\n     static C get_classtype(T C::*v);\n   }; \n\n   using return_type = decltype(details::get_returntype(std::declval&lt;Member_t&gt;()));\n   using type = decltype(details::get_classtype(std::declval&lt;Member_t&gt;()));\n};\n\ntemplate &lt;typename Member_t&gt;\nusing decompose_member_object_pointer_t = typename decompose_member_object_pointer&lt;Member_t&gt;::type;\ntemplate &lt;typename Member_t&gt;\nusing decompose_member_object_pointer_rt = typename decompose_member_object_pointer&lt;Member_t&gt;::return_type;\n\n\ntemplate&lt;typename MemFunc, typename = std::enable_if_t&lt;std::is_member_function_pointer_v&lt;MemFunc&gt;&gt;&gt;\nusing IndexOnMFP = std::map&lt;\n    decompose_member_function_pointer_rt&lt;MemFunc&gt;,\n    decompose_member_function_pointer_t&lt;MemFunc&gt;&gt;;\n\ntemplate&lt;typename MemFunc, typename = std::enable_if_t&lt;std::is_member_object_pointer_v&lt;MemFunc&gt;&gt;&gt;\nusing IndexOnMOP = std::map&lt;\n    decompose_member_object_pointer_rt&lt;MemFunc&gt;,\n    decompose_member_object_pointer_t&lt;MemFunc&gt;&gt;;\n\n\n// Now try using these alias templates\nstruct MyClass\n{\n    char value;\n    int age();\n    int age2() const;\n};\n\nIndexOnMOP&lt;decltype(&amp;MyClass::value)&gt; indexOnValue;\nIndexOnMFP&lt;decltype(&amp;MyClass::age)&gt; indexOnAge;\n</code></pre>\n<p>What I would like is to be able to combine IndexOnMOP and IndexOnMFP into a single template alias, e.g. IndexOnMemberPointer. I appreciate that only function and class templates allow specialization. So far all my attempts have failed.</p>\n<p>As a follow up, I would also like to be able to support working out the types from a pointer to a const member function.</p>\n"}, {"tags": ["c++", "visual-studio", "msbuild", "vcxproj"], "answers": [{"comments": [{"owner": {"reputation": 3296, "user_id": 1456887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01743e24e94a4bfe007c57079b21e7?s=128&d=identicon&r=PG", "display_name": "Jesse Chisholm", "link": "https://stackoverflow.com/users/1456887/jesse-chisholm"}, "edited": false, "score": 0, "creation_date": 1560901014, "post_id": 47147592, "comment_id": 99886291, "body": "In point of fact, <code>The Visual Studio C++ project system currently does not support wildcards in project items.</code> according to: <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/vcxproj-file-structure?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a>"}, {"owner": {"reputation": 3296, "user_id": 1456887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01743e24e94a4bfe007c57079b21e7?s=128&d=identicon&r=PG", "display_name": "Jesse Chisholm", "link": "https://stackoverflow.com/users/1456887/jesse-chisholm"}, "edited": false, "score": 0, "creation_date": 1560901102, "post_id": 47147592, "comment_id": 99886305, "body": "Equally annoying <code>The Visual Studio C++ project system currently does not support macros in project item paths.</code> according to the same page."}], "tags": [], "owner": {"reputation": 2837, "user_id": 6811012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da4b7e9c8b479f7645b62dc5a28a297?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek Blaszczynski", "link": "https://stackoverflow.com/users/6811012/jacek-blaszczynski"}, "is_accepted": false, "score": 1, "last_activity_date": 1510011074, "creation_date": 1510011074, "answer_id": 47147592, "question_id": 47060240, "link": "https://stackoverflow.com/questions/47060240/vs2017-how-can-i-write-per-file-options-in-vcxproj-without-breaking-the-filte/47147592#47147592", "title": "VS2017: How can I write per-file options in .vcxproj, without breaking the filters I&#39;ve set up?", "body": "<p>There are two problems which may be a cause of this behavior. </p>\n\n<p>Firstly I would avoid using following pattern when you need a fine grained control over project build:</p>\n\n<pre><code>    &lt;CLCompile Include=\"**\\*.cpp;\" Exclude=\"BufferTrio.cpp;GraphicsFacade.cpp;\"&gt;\n      &lt;AdditionalOptions&gt;/Za %(AdditionalOptions)&lt;/AdditionalOptions&gt;\n    &lt;/CLCompile&gt;\n    &lt;CLCompile Include=\"BufferTrio.cpp;GraphicsFacade.cpp;\"&gt;\n      &lt;AdditionalOptions&gt;%(AdditionalOptions)&lt;/AdditionalOptions&gt;\n    &lt;/CLCompile&gt;\n</code></pre>\n\n<p>It is much easier to control project when all files are included each one individually without the use of globbing <code>**\\*.cpp</code> arguments. I doubt that using attribute <code>Exclude=\"BufferTrio.cpp;GraphicsFacade.cpp;\"</code> jointly with <code>Include=\"**\\*.cpp;\"</code> on MSBuild property is correctly parsed and used. </p>\n\n<p>Secondly it is best to create two <code>&lt;ItemGroup&gt;&lt;/ItemGroup&gt;</code> nodes to control independently new and old files and apply to them different compiler flags.</p>\n\n<p>Thirdly you can create explicit <code>&lt;project-name&gt;.vcxproj.filters</code> project file in which filtering can be defined for both sources and headers with one file granularity i.e.:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Project ToolsVersion=\"15.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n  &lt;ItemGroup&gt;\n    &lt;ClCompile Include=\"E:\\src\\ms\\dotnet\\coreclr-4c\\src\\jit\\alloc.cpp\"&gt;\n      &lt;Filter&gt;Source Files&lt;/Filter&gt;\n    &lt;/ClCompile&gt;\n    &lt;ClCompile Include=\"E:\\src\\ms\\dotnet\\coreclr-4c\\src\\jit\\assertionprop.cpp\"&gt;\n      &lt;Filter&gt;Source Files&lt;/Filter&gt;\n    &lt;/ClCompile&gt;\n    &lt;ClCompile Include=\"E:\\src\\ms\\dotnet\\coreclr-4c\\src\\jit\\bitset.cpp\"&gt;\n      &lt;Filter&gt;Source Files&lt;/Filter&gt;\n    &lt;/ClCompile&gt;\n  &lt;/ItemGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;Filter Include=\"Source Files\"&gt;\n      &lt;UniqueIdentifier&gt;{3E79A5A2-A53A-3F44-8869-13CB1954DF36}&lt;/UniqueIdentifier&gt;\n    &lt;/Filter&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<p>Finally, it is possible to create build task which would divide files based on the date they were created or committed to repo and which would apply to them compiler flag based on the result of comparison i.e.</p>\n\n<pre><code>&lt;CLCompile Include=\"BufferTrio.cpp;\"&gt;\n  &lt;AdditionalOptions Condition=\"$(BufferTrioCppCreatedDate) &gt;= $(NumericDateTimeFlagThreshold)\"&gt;%(AdditionalOptions)&lt;/AdditionalOptions&gt;\n&lt;/CLCompile&gt;\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 8806368, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/lOsgi.png?s=128&g=1", "display_name": "Xenial", "link": "https://stackoverflow.com/users/8806368/xenial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1510011074, "creation_date": 1509556440, "last_edit_date": 1509561660, "question_id": 47060240, "link": "https://stackoverflow.com/questions/47060240/vs2017-how-can-i-write-per-file-options-in-vcxproj-without-breaking-the-filte", "title": "VS2017: How can I write per-file options in .vcxproj, without breaking the filters I&#39;ve set up?", "body": "<p>I learnt how to edit my .vcxproj file to compile some files with /Za and some without.</p>\n\n<p>However it appears that since I'm adding  elements to the .vcxproj file, the filters I have set up in the IDE are getting messed up, while the .vcxproj.filters file is turning into a much bigger mess of triple, quadruple, unworking duplicates that writes further duplicates every time it saves.</p>\n\n<p><strong>How can I set a compiler option (like /Za) to automatically apply to all new files, but not some old files, and still have filters working properly?</strong></p>\n\n<p>Here is a condensed example of what I added to my .vcxproj file:</p>\n\n<pre><code>  &lt;ItemGroup&gt;\n    &lt;CLCompile Include=\"**\\*.cpp;\" Exclude=\"BufferTrio.cpp;GraphicsFacade.cpp;\"&gt;\n      &lt;AdditionalOptions&gt;/Za %(AdditionalOptions)&lt;/AdditionalOptions&gt;\n    &lt;/CLCompile&gt;\n    &lt;CLCompile Include=\"BufferTrio.cpp;GraphicsFacade.cpp;\"&gt;\n      &lt;AdditionalOptions&gt;%(AdditionalOptions)&lt;/AdditionalOptions&gt;\n    &lt;/CLCompile&gt;\n  &lt;/ItemGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;None Include=\"fragmentShader.glsl\" /&gt;\n    &lt;None Include=\"vertexShader.glsl\" /&gt;\n  &lt;/ItemGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;Text Include=\"Notes.txt\" /&gt;\n    &lt;Text Include=\"Todo.txt\" /&gt;\n  &lt;/ItemGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;ClInclude Include=\"BufferTrio.h\" /&gt;\n    &lt;ClInclude Include=\"Exceptions.h\" /&gt;\n    &lt;ClInclude Include=\"FileUtils.h\" /&gt;\n    &lt;ClInclude Include=\"GraphicsFacade.h\" /&gt;\n  &lt;/ItemGroup&gt;\n</code></pre>\n\n<p>This, oddly, puts all .h files in the right filters, but all cpp/c files at the project's root, outside all filters.</p>\n\n<p>Nothing I do in the IDE or with the .vcxproj.filters file makes a difference that isn't just overwritten next time the project saves.</p>\n"}, {"tags": ["c++", "cmake", "shared-libraries"], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 2, "creation_date": 1509558305, "post_id": 47060462, "comment_id": 81069019, "body": "Thanks for the answer! I tried to modify the library CMakeLists but I got the error when I compile: target_include_directories called with invalid arguments   Do you know why? Do I need to specify where ${CMAKE_CURRENT_LIST_DIR} is?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509558596, "post_id": 47060462, "comment_id": 81069207, "body": "@KathyLee looks like you&#39;re using an old version of cmake. Are you able to upgrade to a newer version? (cmake 2.8 is very old)"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509558677, "post_id": 47060462, "comment_id": 81069264, "body": "@KathyLee if you can&#39;t upgrade, try use <code>${CMAKE_CURRENT_SOURCE_DIR}</code> instead, I believe this variable exists in 2.8"}, {"owner": {"reputation": 146, "user_id": 1446336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4889259fd607ffe143c3a8df7117dc45?s=128&d=identicon&r=PG", "display_name": "afakih", "link": "https://stackoverflow.com/users/1446336/afakih"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509559346, "post_id": 47060462, "comment_id": 81069656, "body": "@KathyLee for something this small you could just add <code>include_directories(include)</code>"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 146, "user_id": 1446336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4889259fd607ffe143c3a8df7117dc45?s=128&d=identicon&r=PG", "display_name": "afakih", "link": "https://stackoverflow.com/users/1446336/afakih"}, "edited": false, "score": 0, "creation_date": 1509559646, "post_id": 47060462, "comment_id": 81069842, "body": "@afakih that&#39;s not recommended, and for someone trying to learn cmake, teaching best practice is probably a good idea"}, {"owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509562234, "post_id": 47060462, "comment_id": 81071289, "body": "@SteveLorimer I have updated cmake to 3.2 but both commands fail. So I just copy-paste the usage of target_include_directories from <a href=\"https://cmake.org/cmake/help/v3.3/command/target_include_directories.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.3/command/&hellip;</a> and it works! Thank you!   One more question, can I use this library in another program? Since in your answer, you include both &quot;test&quot; library and &quot;myapp&quot; binary in same CMakeLists.txt. However, I would like to call this library in another program using another CMakeLists.txt under different directory. I used the code above but still cannot find header file.  How can I change CMakeLists.txt?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509562399, "post_id": 47060462, "comment_id": 81071367, "body": "@KathyLee apologies, I forgot the <code>PUBLIC</code> keyword in <code>target_include_directories</code>. I&#39;ve updated the answer. In order to pull in the <code>CMakeLists.txt</code> file in which your <code>test</code> library is defined, add <code>add_subdirectory(XXX)</code> to your <code>myapp</code> <code>CMakeLists.txt</code> file, where XXX is the directory in which the <code>test</code> <code>CMakeLists.txt</code> file is located"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509562667, "post_id": 47060462, "comment_id": 81071512, "body": "@KathyLee updated the answer with a directory and CMakeLists layout which might help"}, {"owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509573426, "post_id": 47060462, "comment_id": 81076860, "body": "@SteveLorimer  Thank you Steve! Your answer runs successfully! But this answer is to run library and app &quot;at the same time&quot; if compile src/CMakeLists.txt. Is it possible that I run the library first and save the library under one directory and then I run app with linking the lib? For example, after running the answer above, libtest.so is located in src/build/library. If I wrote another stand-alone app outside src, how can I link it to the library and let this app find all included header file?"}, {"owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509640821, "post_id": 47060462, "comment_id": 81109797, "body": "@SteveLorimer I found out a way to deal with my latest question. Maybe in CMakeLists.txt, I can use <code>INCLUDE_DIRECTORIES</code>  to include the header files in library. Then <code>add_executable</code> and <code>target_link_libraries(myNewApp &#47;home&#47;labUser&#47;Downloads&#47;src&#47;build&#47;library&#47;libmyLib.so&quot;)</code>        I hope this is a correct way to use the library. Thanks!"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509641033, "post_id": 47060462, "comment_id": 81109956, "body": "@KathyLee Read <a href=\"https://stackoverflow.com/questions/15175318/cmake-how-to-build-external-projects-and-include-their-targets\">this</a> and <a href=\"https://stackoverflow.com/questions/16398937/cmake-and-finding-other-projects-and-their-dependencies\">this</a> for help with your latest request"}, {"owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "edited": false, "score": 0, "creation_date": 1509641205, "post_id": 47060462, "comment_id": 81110058, "body": "@SteveLorimer Thanks!"}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 6, "last_activity_date": 1592783509, "last_edit_date": 1592783509, "creation_date": 1509557217, "answer_id": 47060462, "question_id": 47060164, "link": "https://stackoverflow.com/questions/47060164/cmake-linking-shared-library-no-such-file-or-directory-when-include-a-header/47060462#47060462", "title": "Cmake Linking Shared Library: &quot;No such file or directory&quot; when include a header file from library", "body": "<p>You have a couple of issues here.</p>\n<p><strong>Propagating headers to users of your target:</strong></p>\n<p>Whilst you've added the include file to your library target, you need to let <em>consumers</em> of your library target know how to find the header.</p>\n<p>As such, when your app <code>myapp</code> links against your library target <code>test</code>, you need to tell cmake to add <code>./include</code> to <code>myapp's</code> include search path.</p>\n<p>There is a special cmake variable, <a href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_CURRENT_LIST_DIR.html\" rel=\"nofollow noreferrer\"><code>${CMAKE_CURRENT_LIST_DIR}</code></a> which resolves to the path to the directory in which the current <code>CMakeLists.txt</code> being processed is.</p>\n<p>In your instance, that is the parent folder of both <code>src</code> and <code>include</code>.</p>\n<pre><code>./                    &lt;-- ${CMAKE_CURRENT_LIST_DIR} is this directory\n+--- CMakeLists.txt\n+--- src/\n|    +---Test.cpp\n|    +---ITest.cpp\n+--- include/\n     +---Test.hpp\n     +---ITest.hpp\n</code></pre>\n<p>In order to tell cmake to add a path to its include search path you use <a href=\"https://cmake.org/cmake/help/v3.0/command/target_include_directories.html\" rel=\"nofollow noreferrer\"><code>target_include_directories</code></a></p>\n<p>For this the path will then be <code>${CMAKE_CURRENT_LIST_DIR}/include</code></p>\n<p>So the syntax you'd be looking for is:</p>\n<pre><code>target_include_directories(test PUBLIC ${CMAKE_CURRENT_LIST_DIR}/include)\n</code></pre>\n<p>Note that this means you don't have to add <code>&quot;include/iTest.hpp&quot;</code> and <code>&quot;include/Test.hpp&quot;</code> to your <code>SRC_LIST</code> glob, as the compiler will be able to find them from the above <code>target_include_directories</code></p>\n<p><strong>Linking to your test library:</strong></p>\n<p>Now that you've created your library and added the include directories, to actually <em>use it</em> in your app, you should again use <code>target_link_libraries</code>, but don't specify the path to the generated <code>.so</code> file, instead refer to the name of the library target you created, <code>test</code></p>\n<pre><code>target_link_libraries(myapp test)\n</code></pre>\n<p>Now <code>myapp</code> will know how to find <code>Test.hpp</code> because it will get that information from the &quot;dependency link&quot; you've created between <code>myapp</code> and <code>test</code></p>\n<p>As such, assuming the following directory structure, the following CMakeLists.txt files may work</p>\n<pre><code>src/\n+--- library/\n|    +--- &lt; sources for your shared library &gt;\n+--- app/\n     +--- &lt; sources for your application &gt;\n</code></pre>\n<p><strong><code>src/CMakeLists.txt</code></strong></p>\n<pre><code>cmake_minimum_required(VERSION 3.0)\nproject(myapp)\n\nadd_subdirectory(library)\nadd_subdirectory(app)\n</code></pre>\n<p><strong><code>src/library/CMakeLists.txt</code></strong></p>\n<pre><code>set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} \n    -std=c++11 \n    -pthread \n    -O3 \n    -Wall \n    -ftree-vectorize \n    -ffast-math \n    -funroll-loops&quot;)\n\nfind_package(OpenCV REQUIRED)\n\nadd_library(test SHARED &quot;src/iTest.cpp src/Test.cpp&quot;)\ntarget_link_libraries(test ${OpenCV_LIBS})  // link opencv libs to libtest.so\ntarget_include_directories(test PUBLIC ${CMAKE_CURRENT_LIST_DIR}/include)\n</code></pre>\n<p><strong><code>src/app/CMakeLists.txt</code></strong></p>\n<pre><code>add_executable(myapp main.cpp)\ntarget_link_libraries(myapp test)\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 5869383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2174916a83fdff2744414ac51c874e80?s=128&d=identicon&r=PG&f=1", "display_name": "Kathy Lee", "link": "https://stackoverflow.com/users/5869383/kathy-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8289, "favorite_count": 1, "accepted_answer_id": 47060462, "answer_count": 1, "score": 4, "last_activity_date": 1592783509, "creation_date": 1509556203, "question_id": 47060164, "link": "https://stackoverflow.com/questions/47060164/cmake-linking-shared-library-no-such-file-or-directory-when-include-a-header", "title": "Cmake Linking Shared Library: &quot;No such file or directory&quot; when include a header file from library", "body": "<p>I am learning to build a library using Cmake. The code structure for building library is like below:</p>\n\n<pre><code>include:  \n   Test.hpp       \n   ITest.hpp     // interface\nsrc:\n   Test.cpp\n   ITest.cpp\n</code></pre>\n\n<p>In CMakeLists.txt, the sentences I used to build library is :</p>\n\n<pre><code>file(GLOB SRC_LIST \"src/iTest.cpp\" \"src/Test.cpp\" \"include/Test.hpp\"\n        \"include/iTest.hpp\"  \"include/deadreckoning.hpp\")\nadd_library(test SHARED ${SRC_LIST})\ntarget_link_libraries( test ${OpenCV_LIBS})  // link opencv libs to libtest.so\n</code></pre>\n\n<p>Then I wrote another test file (main.cpp), copy and paste the library under the same directory, link library and call functions inside the library. \nThis CMakeLists.txt is </p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(myapp)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -pthread -O3 -Wall -ftree-vectorize -ffast-math -funroll-loops\")\n\nadd_executable(myapp main.cpp)\ntarget_link_libraries(myapp \"/home/labUser/test_lib/libtest.so\")\n</code></pre>\n\n<p>The main.cpp compiles and runs succussfully if I don't include the header files inside the library: </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    cout &lt;&lt; \"hello world\" &lt;&lt; endl;\n    return -1;\n}\n</code></pre>\n\n<p>But when I include the header file <code>#include \"ITest.hpp\"</code>, it has error: </p>\n\n<pre><code>fatal error: iTest.hpp: No such file or directory\n  #include \"iTest.hpp\"   \ncompilation terminated.\n</code></pre>\n\n<p>I don't understand why it happens.I think I have already linked the library successfully because when I run main.cpp without including header file, it doesn't give any \"linking\" error. And I think apparently the header files are inside the library. Why I can't include it? Can anyone help me figure this out?</p>\n\n<p>Big thanks! </p>\n"}, {"tags": ["c++", "qt", "qthread", "qtconcurrent", "qsplashscreen"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509556037, "post_id": 47060077, "comment_id": 81067680, "body": "what is <code>preLoad</code>?"}, {"owner": {"reputation": 199, "user_id": 6686907, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e32f3b82e93892ea4f85cb3fda3ff288?s=128&d=identicon&r=PG&f=1", "display_name": "BSD", "link": "https://stackoverflow.com/users/6686907/bsd"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509556120, "post_id": 47060077, "comment_id": 81067733, "body": "preLoad is the method which calls the third party library. That first call takes 60-90 seconds. There is no code to show you. Sufficient to say that it blocks the thread during this period."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509556193, "post_id": 47060077, "comment_id": 81067766, "body": "Is it running on a secondary thread?"}, {"owner": {"reputation": 199, "user_id": 6686907, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e32f3b82e93892ea4f85cb3fda3ff288?s=128&d=identicon&r=PG&f=1", "display_name": "BSD", "link": "https://stackoverflow.com/users/6686907/bsd"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509556241, "post_id": 47060077, "comment_id": 81067793, "body": "Nope. Same thread."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1509556283, "post_id": 47060077, "comment_id": 81067827, "body": "I think that this task is blocking the GUI, if you have a heavy task it is advisable to execute it in a second thread obviously respecting the conditions of Qt."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1509556403, "post_id": 47060077, "comment_id": 81067904, "body": "I recommend you read the following: <a href=\"http://doc.qt.io/qt-5/qtconcurrentrun.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtconcurrentrun.html</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509556457, "post_id": 47060077, "comment_id": 81067952, "body": "Another option is to call between each instruction that you run in preload to: <code>qApp-&gt;processEvents();</code>"}, {"owner": {"reputation": 199, "user_id": 6686907, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e32f3b82e93892ea4f85cb3fda3ff288?s=128&d=identicon&r=PG&f=1", "display_name": "BSD", "link": "https://stackoverflow.com/users/6686907/bsd"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1509558295, "post_id": 47060077, "comment_id": 81069016, "body": "@eyllanesc Why in the world is Qt implementing it&#39;s own threading system? No wonder my std::thread operations where causing havoc. The reference you gave opened up a whole new view of building an application in Qt. I&#39;d like to give you the points for the answer. Can you put something into an answer rather than a comment?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1509559506, "post_id": 47060077, "comment_id": 81069750, "body": "<b><i>Qt implementing it&#39;s own threading system?</i></b> One reason is backward compatibility. Qt existed long before c++11.  Also Qt uses signals and slots with its threading support."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1509559089, "creation_date": 1509559089, "answer_id": 47060959, "question_id": 47060077, "link": "https://stackoverflow.com/questions/47060077/qt-gui-not-updated-because-of-threading-issue/47060959#47060959", "title": "Qt Gui not updated because of threading issue", "body": "<p>Every GUI is executed in an infinite loop, so Qt also uses it, but the blocking tasks generate that the loop is not executed correctly, showing inadequate behaviors like the one you observe.</p>\n\n<p>If one wants to execute blocking tasks it is advisable to execute it in another thread for it Qt provides several possibilities:</p>\n\n<ul>\n<li><p><a href=\"http://doc.qt.io/qt-5/threads-technologies.html#qthread-low-level-api-with-optional-event-loops\" rel=\"nofollow noreferrer\">QThread</a> </p></li>\n<li><p><a href=\"http://doc.qt.io/qt-5/threads-technologies.html#qthreadpool-and-qrunnable-reusing-threads\" rel=\"nofollow noreferrer\">QThreadPool and QRunnable</a> </p></li>\n<li><p><a href=\"http://doc.qt.io/qt-5/threads-technologies.html#qt-concurrent-using-a-high-level-api\" rel=\"nofollow noreferrer\">QtConcurrent</a></p></li>\n</ul>\n\n<p>I recommend the following <a href=\"http://doc.qt.io/qt-5/threads-technologies.html#choosing-an-appropriate-approach\" rel=\"nofollow noreferrer\">link</a> for you to choose the right option for your case.</p>\n\n<p>If you want to update the GUI view with the information generated in another thread it is advisable to use signals and slots, or use QtConcurrent.</p>\n\n<blockquote>\n  <p><a href=\"http://doc.qt.io/qt-5/thread-basics.html#gui-thread-and-worker-thread\" rel=\"nofollow noreferrer\"><strong>GUI Thread and Worker Thread</strong></a></p>\n  \n  <p>As mentioned, each program has one thread when it is started. This\n  thread is called the \"main thread\" (also known as the \"GUI thread\" in\n  Qt applications). The Qt GUI must run in this thread. All widgets and\n  several related classes, for example QPixmap, don't work in secondary\n  threads. A secondary thread is commonly referred to as a \"worker\n  thread\" because it is used to offload processing work from the main\n  thread.</p>\n</blockquote>\n\n<p>Another way is to force the GUI to update for this we can use <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#processEvents\" rel=\"nofollow noreferrer\">qApp->processEvents()</a>.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://doc.qt.io/qt-5/thread-basics.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/thread-basics.html</a></li>\n<li><a href=\"http://doc.qt.io/qt-5/threads-technologies.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/threads-technologies.html</a></li>\n</ul>\n"}], "owner": {"reputation": 199, "user_id": 6686907, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e32f3b82e93892ea4f85cb3fda3ff288?s=128&d=identicon&r=PG&f=1", "display_name": "BSD", "link": "https://stackoverflow.com/users/6686907/bsd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 47060959, "answer_count": 1, "score": 0, "last_activity_date": 1509559272, "creation_date": 1509555920, "last_edit_date": 1509559272, "question_id": 47060077, "link": "https://stackoverflow.com/questions/47060077/qt-gui-not-updated-because-of-threading-issue", "title": "Qt Gui not updated because of threading issue", "body": "<p>I am using a third party library which takes 60-90 seconds to dynamically load several libraries. It is an unfortunate design choice, but I can't change who the built their code.</p>\n\n<p>I am trying to use a QSplashScreen to at least tell the user to wait while I'm doing this one-time loading in the background. The problem is that the splash screen is not painting. I can see a window of non-painted space while the library loads. I can see the splash screen afterwards before I close it.</p>\n\n<p>I looked at similar questions (e.g. <a href=\"https://stackoverflow.com/questions/20928006/qt-splash-screen-not-showing\">Qt Splash Screen not showing</a>) but nothing seems to resolve my problem. I have tried loading an empty QPixmap and just giving it a solid color. That doesn't show up either. </p>\n\n<pre><code>QApplication a(argc, argv);\nQPixmap pxl(\"icon.bmp\");\nQSplashScreen qss(pxl);\nqss.show();\nqss.showMessage(QString::fromStdString(\"Please wait... Loading\"));\na.processEvents();\n\nMainWindow w;\n//thread is blocked\nw.preLoad();//this is where the lengthy process takes place\nw.show();\n\nqss.finish(&amp;w);\n</code></pre>\n\n<p>I'd like to ensure that it at least paints once before I start my loading process.</p>\n\n<p>------------------------EDIT-------------------------------</p>\n\n<p>Let me reiterated that the call to preLoad is BLOCKING the thread. This is not an option. I have tried a separate thread for that process. I have tried with a separate thread for the splash screen as well (turning it on and then finishing whne the other thread is done). I have tried using semaphore between the two threads to accomplish this and while everything works (including the splash screen) it takes 200-800 seconds to load. That is simply not acceptable. Thus I would like to see if there is away around it from this perspective.</p>\n\n<p>-------------------------Final solution--------------------------------</p>\n\n<p>Thanks to the comments below I was made aware that Qt has its own threading functionality. All the problems I was seeing appear to be caused by the interplay of std::thread and Qt's own implementation. </p>\n\n<p>I have a partial solution which does work. It's not as neat as it could be, but I wanted to include it in the question thread.</p>\n\n<pre><code>//in the main method code described above\nMainWindow w;\nw.preLoad();\nwhile(w.IsLoading())\n{\n  //waiting on semaphore signaling loading is complete\n  //this part could probably be done better with QThread \n  //and signals, but it is a quick fix for now\n  std::this_thread::sleepfor(std::chrono::milliseconds(500));\n  a.processEvents();\n}\nw.show();\n\nqss.finish(&amp;w);\n\n\n//In the MainWindow class\nvoid MainWindow::preLoad()\n{\n  loading=true;//semaphore to stall main thread\n  QFuture&lt;void&gt; future = QtConcurrent::run(this, &amp;MainWindow::LongMethod);\n}\n\nvoid MainWindow::LongMethod()\n{\n  thirdPartyLibrary.impossibleCall();\n  loading=false;//this handles my semaphore\n}\n</code></pre>\n"}, {"tags": ["c++", "autotools", "autoconf"], "comments": [{"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1509556421, "post_id": 47060001, "comment_id": 81067923, "body": "Maybe figure out, why the error message comes up at all. See <a href=\"https://lists.gnu.org/archive/html/automake/2003-01/msg00053.html\" rel=\"nofollow noreferrer\">lists.gnu.org/archive/html/automake/2003-01/msg00053.html</a> for an example."}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1509556544, "post_id": 47060001, "comment_id": 81068016, "body": "Here&#39;s a similar problem, the other way round: <a href=\"http://gnu-automake.7480.n7.nabble.com/source-code-type-detection-td4059.html\" rel=\"nofollow noreferrer\">gnu-automake.7480.n7.nabble.com/&hellip;</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1509556788, "post_id": 47060001, "comment_id": 81068173, "body": "Thanks Olaf. An <code>ls *.c</code> results in <code>ls: cannot access &#39;*.c&#39;: No such file or directory</code>; and <code>ls -1 *.cpp | wc -l</code> results in <code>155</code>. Its kind of a mystery (to me) why Autotools wants a C compiler for anything."}, {"owner": {"reputation": 14789, "user_id": 425738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58622287beb9cbbd6a1faff38c1c6ab3?s=128&d=identicon&r=PG", "display_name": "ldav1s", "link": "https://stackoverflow.com/users/425738/ldav1s"}, "edited": false, "score": 0, "creation_date": 1509578792, "post_id": 47060001, "comment_id": 81078630, "body": "It&#39;s possible their C++ macros still search for <a href=\"https://en.wikipedia.org/wiki/Cfront\" rel=\"nofollow noreferrer\">cfront</a> type compilers which would be problematic not to have a search for the C compiler."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1509578334, "post_id": 47063947, "comment_id": 81078503, "body": "Ugh, thanks Ken. Unfortunately, that did not work. The generated makefile includes <code>CC = gcc</code> and <code>CFLAGS =</code>. I even tried to remove it in <code>AC_CONFIG_COMMANDS</code> using <code>sed</code> in my <a href=\"https://github.com/noloader/cryptopp-autotools/blob/master/configure.ac\" rel=\"nofollow noreferrer\"><code>configure.ac</code></a>. No joy."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1509650817, "post_id": 47063947, "comment_id": 81115551, "body": "Thanks Ken. I&#39;m sorry to say I am still <a href=\"https://pastebin.com/6Njg0KW4\" rel=\"nofollow noreferrer\">witnessing the issue</a>. Looking at the makefile its doing exactly what I wanted to avoid: its linking through <code>CC</code>, not <code>CXX</code>.  I&#39;m guessing the Autoconf guys have never actually tested a C++ project; otherwise it would have stuck out like a sore thumb and been fixed. I tried to <code>CC=&#47;dev&#47;null</code>, but it just broke things."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1509650856, "post_id": 47063947, "comment_id": 81115575, "body": "I&#39;m guessing this can&#39;t be fixed by work-arounds on my end. I&#39;ll just accept since you&#39;ve spent so much time on the issue. If you want to try the real project, it can be found at <a href=\"https://github.com/noloader/cryptopp-autotools\" rel=\"nofollow noreferrer\">cryptopp-autotools</a>. It has your changes applied. Thanks again."}], "tags": [], "owner": {"reputation": 216, "user_id": 6866963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zTyI4.png?s=128&g=1", "display_name": "Ken Keys", "link": "https://stackoverflow.com/users/6866963/ken-keys"}, "is_accepted": true, "score": 3, "last_activity_date": 1509579099, "last_edit_date": 1509579099, "creation_date": 1509571667, "answer_id": 47063947, "question_id": 47060001, "link": "https://stackoverflow.com/questions/47060001/how-to-disable-c-compiler-in-c-autotools-project/47063947#47063947", "title": "How to disable C compiler in C++ Autotools project", "body": "<p>When you define a program like <code>bin_PROGRAMS=cryptest</code>, automake looks for <code>cryptest_SOURCES</code> to figure out what are the source files for cryptest.  If you don't define <code>cryptest_SOURCES</code>, automake will automatically generate one by appending \".c\" (by default) to the program name, e.g. as if you had defined <code>cryptest_SOURCES=cryptest.c</code>.  To override the default, you could explicitly define the source for each of your programs, e.g. <code>cryptest_SOURCES=cryptest.cpp</code>, or you could define <code>AM_DEFAULT_SOURCE_EXT=.cpp</code> to make all automatically generated source file names end in \".cpp\" instead of \".c\".</p>\n\n<p>Of course, if your source name doesn't match the program name, or there are multiple sources (including any header files you want to be included by \"make dist\"), you're going to need the explicit definition anyway, e.g. <code>cryptest_SOURCES=cryptest.cpp cryptest-part2.cpp cryptest.h</code>.</p>\n\n<p>See: <a href=\"https://www.gnu.org/software/automake/manual/automake.html#Default-_005fSOURCES\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/automake/manual/automake.html#Default-_005fSOURCES</a></p>\n\n<p>Edited to add:  Assuming you're going to be using AC macros to test features of the compiler, you're going to want to call <code>AC_LANG([C++])</code> first (after AC_PROG_CXX) to tell autoconf that it should be testing the C++ compiler, not the C compiler.</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 47063947, "answer_count": 1, "score": 0, "last_activity_date": 1509651006, "creation_date": 1509555682, "last_edit_date": 1509651006, "question_id": 47060001, "link": "https://stackoverflow.com/questions/47060001/how-to-disable-c-compiler-in-c-autotools-project", "title": "How to disable C compiler in C++ Autotools project", "body": "<p>I'm in the early stages of adding Autotools support to a C++ library. At this point I'm running <code>autoreconf</code> with the following configuration.</p>\n\n<pre><code>$ cat Makefile.am\nAUTOMAKE_OPTIONS = foreign\nbin_PROGRAMS=cryptest\n\n$ cat configure.ac\nAC_INIT(Crypto++, 6.0, http://www.cryptopp.com/wiki/Bug_Report)\nAM_INIT_AUTOMAKE\nAC_PROG_CXX\nAC_CONFIG_FILES([Makefile])\n</code></pre>\n\n<p>It is producing:</p>\n\n<pre><code>$ autoreconf --install --force\n/usr/share/automake-1.15/am/depend2.am: error: am__fastdepCC does not appear in AM_CONDITIONAL\n/usr/share/automake-1.15/am/depend2.am:   The usual way to define 'am__fastdepCC' is to add 'AC_PROG_CC'\n/usr/share/automake-1.15/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again\nMakefile.am: error: C source seen but 'CC' is undefined\nMakefile.am:   The usual way to define 'CC' is to add 'AC_PROG_CC'\nMakefile.am:   to 'configure.ac' and run 'autoconf' again.\nautoreconf: automake failed with exit status: 1\n</code></pre>\n\n<p>I'm trying to tackle the <em><code>error: C source seen but 'CC' is undefined</code></em> issue first.</p>\n\n<p>Conventional wisdom based on mailing list reading is to add <code>AC_PROG_CC</code> to work around the issue. I really don't feel like working around the problems C++ flags are going to cause a C compiler, especially on compilers like IBM's xlc and Sun's cc. It also seem wrong given GNU is all about user choice.</p>\n\n<p>How do I tell Autotools this project is a C++ project, and it should not do anything with C or a C compiler?</p>\n\n<hr>\n\n<p>Here are some of the issues it is causing.</p>\n\n<pre><code>$ egrep 'CC|CFLAGS' Makefile\nCOMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \\\n        $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n...\nLTCOMPILE = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \\\n        $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) \\\n        $(AM_CFLAGS) $(CFLAGS)\n...\nCCLD = $(CC)\n...\nLINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \\\n        $(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n</code></pre>\n\n<hr>\n\n<pre><code>$ autoreconf --version\nautoreconf (GNU Autoconf) 2.69\n\n$ autoconf --version\nautoconf (GNU Autoconf) 2.69\n\n$ automake --version\nautomake (GNU automake) 1.15\n</code></pre>\n"}, {"tags": ["c++", "opencv", "rgb"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509555726, "post_id": 47059994, "comment_id": 81067483, "body": "<code>rows = src.rows;</code> Is it just me or <code>src</code> is missing?"}, {"owner": {"reputation": 5, "user_id": 7981157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e3bf84eea8706f25f749dc5cbc3e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "Anda91", "link": "https://stackoverflow.com/users/7981157/anda91"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509558642, "post_id": 47059994, "comment_id": 81069247, "body": "I corrected the code, an apology, however this code does compile, but when it comes to wanting to execute it, it shows the error that I put"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7981157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e3bf84eea8706f25f749dc5cbc3e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "Anda91", "link": "https://stackoverflow.com/users/7981157/anda91"}, "edited": false, "score": 0, "creation_date": 1509558291, "post_id": 47060118, "comment_id": 81069013, "body": "I corrected the code, an apology, however this code does compile, but when it comes to wanting to execute it, it shows the error that I put"}], "tags": [], "owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "is_accepted": false, "score": 1, "last_activity_date": 1509556044, "creation_date": 1509556044, "answer_id": 47060118, "question_id": 47059994, "link": "https://stackoverflow.com/questions/47059994/error-wanting-to-get-green-rgb-channel-from-an-image/47060118#47060118", "title": "Error wanting to get green RGB channel from an image", "body": "<p>(guessing as the hunk you gave does not compile)</p>\n\n<pre><code>Mat black = Mat::zeros(rows, cols, src.type());\n</code></pre>\n\n<p>seem wrong, if the input image has 3 channels, you want a single channel here, thus the <code>src.type()</code> cannot be used here.</p>\n"}, {"tags": [], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "is_accepted": true, "score": 0, "last_activity_date": 1509559244, "creation_date": 1509559244, "answer_id": 47061009, "question_id": 47059994, "link": "https://stackoverflow.com/questions/47059994/error-wanting-to-get-green-rgb-channel-from-an-image/47061009#47061009", "title": "Error wanting to get green RGB channel from an image", "body": "<p>You should be using the <a href=\"https://docs.opencv.org/3.3.0/d2/de8/group__core__array.html#ga0547c7fed86152d7e9d0096029c8518a\" rel=\"nofollow noreferrer\" title=\"split\">split</a> function</p>\n\n<pre><code>Mat a = imread(path);\nMat channels[3];\nsplit(a, channels);\nimshow(\"Green\", channels[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 3, "last_activity_date": 1509560481, "last_edit_date": 1509560481, "creation_date": 1509559594, "answer_id": 47061092, "question_id": 47059994, "link": "https://stackoverflow.com/questions/47059994/error-wanting-to-get-green-rgb-channel-from-an-image/47061092#47061092", "title": "Error wanting to get green RGB channel from an image", "body": "<p>You are first creating a vector with 3 empty matrices, and then you're pushing back 3 other matrices, resulting in a vector of 6 matrices with different sizes.</p>\n\n<p>Simply create an empty vector to begin with:</p>\n\n<pre><code>vector&lt;Mat&gt; channels;\ng = Mat::zeros(Size(img.rows, img.cols), img.type());\nchannels.push_back(g);\nchannels.push_back(g);     \nchannels.push_back(img);\n</code></pre>\n\n<p>However what you're doing is not extracting the green channel. To do this you need to <code>split</code> and <code>merge</code>, or you can use <a href=\"https://docs.opencv.org/master/d2/de8/group__core__array.html#gacc6158574aa1f0281878c955bcf35642\" rel=\"nofollow noreferrer\">cv::extractChannel</a>:</p>\n\n<pre><code>cv::Mat green;\ncv::extractChannel(image, green, 1);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7981157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e3bf84eea8706f25f749dc5cbc3e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "Anda91", "link": "https://stackoverflow.com/users/7981157/anda91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 47061009, "answer_count": 3, "score": 0, "last_activity_date": 1509560481, "creation_date": 1509555662, "last_edit_date": 1509558094, "question_id": 47059994, "link": "https://stackoverflow.com/questions/47059994/error-wanting-to-get-green-rgb-channel-from-an-image", "title": "Error wanting to get green RGB channel from an image", "body": "<p>I have been looking for ways to use OpenCV to separate RGB layers and extract only the green layer of an image, but I have obtained these errors when I want to run the executable that was generated from the code, the code I have made is this:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt; \n#include &lt;stdio.h&gt;\n\nusing namespace cv;\nusing namespace std;\n\nMat img, g, fin_img;\nimg = imread(\"img.png\",CV_LOAD_IMAGE_COLOR);\nvector&lt;Mat&gt; channels(3);\n\ng = Mat::zeros(Size(img.rows, img.cols), img.type());\n\nchannels.push_back(g);\nchannels.push_back(g);\nchannels.push_back(img);\n\nmerge(channels, fin_img);\nimshow(\"img\", fin_img);\nwaitKey(0);\nreturn 0;\n</code></pre>\n\n<p>The error is this:</p>\n\n<blockquote>\n  <p>OpenCV Error: Assertion failed (mv[i].size == mv[0].size &amp;&amp; mv[i].depth() == depth) in merge, file /opt/opencv/modules/core/src/convert.cpp, line 336\n  terminate called after throwing an instance of 'cv::Exception'\n    what():  /opt/opencv/modules/core/src/convert.cpp:336: error: (-215) mv[i].size == mv[0].size &amp;&amp; mv[i].depth() == depth in function merge</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1509555206, "post_id": 47059830, "comment_id": 81067140, "body": "What&#39;s the definition of <code>MyFunction</code>?"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1509555263, "post_id": 47059830, "comment_id": 81067172, "body": "why do you need to cast, actually?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509555675, "post_id": 47059830, "comment_id": 81067454, "body": "Updated the question to include the definition for MyFunction."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509555774, "post_id": 47059830, "comment_id": 81067530, "body": "As for why I need to cast, I&#39;m not quite sure. For context, this is a coworker&#39;s &quot;code review&quot; code which is intentionally broken; he was using it to ask interview candidates to fix the bad code. However this coworker has actually left the company and the only notes say that it&#39;s a bad cast, and I&#39;m trying to figure out some more details about why because I&#39;m curious."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1509555952, "post_id": 47059830, "comment_id": 81067636, "body": "Casts that involve pointers are usually signs of bad (i.e. invalid) code."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1509557487, "post_id": 47059830, "comment_id": 81068580, "body": "@StoryTeller done, also I added some extra context about what the function is purporting to do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1509557627, "post_id": 47059830, "comment_id": 81068645, "body": "<i>I don&#39;t really know much C++</i> don\u2019t worry, your coworker didn\u2019t either."}], "answers": [{"tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 0, "last_activity_date": 1509555505, "creation_date": 1509555505, "answer_id": 47059942, "question_id": 47059830, "link": "https://stackoverflow.com/questions/47059830/what-is-wrong-with-this-cast/47059942#47059942", "title": "What is wrong with this cast?", "body": "<p>In C and C++ an array 'decays' to a pointer when the identifier is used as an argument to a function that expects a pointer. This means that if you have a function that takes a <code>char*</code> (C and common C++ form of a string argument) then you can just pass it a <code>char</code> array and no casting is required.</p>\n\n<p>In your example, you are casting to a <code>char**</code> which is a pointer to a pointer to a char. This suggests the function expects to change what a <code>char*</code> argument points to and this is not something that makes sense with an array argument. Without knowing more context here it's hard to give a more specific answer to your question though. It's also possible that a <code>char**</code> argument could be intended to be an array of strings (in which case you would expect an additional array size argument) but without seeing what <code>MyFunction()</code> is intended to do it's hard to say.</p>\n"}, {"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509556968, "post_id": 47060086, "comment_id": 81068279, "body": "Thanks, this helps a lot."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509559011, "post_id": 47060086, "comment_id": 81069454, "body": "To check my understanding for your new solution, is the problem that <code>char z_strings[3]</code> can&#39;t actually hold multiple strings (it would just be a string allocated with 3 bytes) and thus we need to upgrade it to <code>char* z_strings[3]</code> where each entry is actually a pointer to a string? (By string I technically mean array of chars)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1509559057, "post_id": 47060086, "comment_id": 81069482, "body": "@Stephen - Your understanding is correct so far. <code>GetPowers</code> wants to access a buffer of pointers. So that&#39;s what we provide."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1509558051, "last_edit_date": 1509558051, "creation_date": 1509555949, "answer_id": 47060086, "question_id": 47059830, "link": "https://stackoverflow.com/questions/47059830/what-is-wrong-with-this-cast/47060086#47060086", "title": "What is wrong with this cast?", "body": "<p>Unlike the widespread and erroneously taught belief, arrays are <strong>not</strong> pointers. They may <em>decay</em> into pointers in most contexts, but the address-of operator is not one of those contexts.</p>\n\n<p>If the type of <code>z_strings</code> is <code>char[3]</code>, then the type of <code>&amp;z_strings</code> is <code>char (*)[3]</code>. It is a pointer to an array of three characters. And a pointer to an array is not compatible with a pointer to a pointer.</p>\n\n<p>That's what's wrong with your cast. As for how to fix it, with the little context you've shown, the obvious solution is to introduce an actual pointer:</p>\n\n<pre><code>char *p_z_strings = z_strings; //decay here\nMyFunction(myints, &amp;p_z_strings , another_int_arg); // no cast; exact match\n</code></pre>\n\n<hr>\n\n<p>With the <em>added</em> context you provided, the \"obvious\" solution is now rather glaringly incorrect. There's still a few details missing, but if we are working under the assumption that <code>GetPowers</code> will do the allocation for the new strings, we do not need additional variables:</p>\n\n<pre><code>char* z_strings[3]; // Now we have an array of pointers\nGetPowers(p_int, z_strings, 3); // It decays into a pointer to a pointer\n// GetPowers populates it\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": false, "score": 1, "last_activity_date": 1509556935, "creation_date": 1509556935, "answer_id": 47060389, "question_id": 47059830, "link": "https://stackoverflow.com/questions/47059830/what-is-wrong-with-this-cast/47060389#47060389", "title": "What is wrong with this cast?", "body": "<p>The cast is bad, because it shuts up the compiler, without fixing the code.</p>\n\n<p>The real fix might be using the proper array, which could be (as the function argument type suggests) an array of pointers, e.g.</p>\n\n<pre><code>char *z_strings[3];\n</code></pre>\n\n<p>Now you can call the function without any cast at all:</p>\n\n<pre><code>MyFunction(myints, z_strings, another_int_arg);\n</code></pre>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 47060086, "answer_count": 3, "score": 1, "last_activity_date": 1509558051, "creation_date": 1509555135, "last_edit_date": 1509557610, "question_id": 47059830, "link": "https://stackoverflow.com/questions/47059830/what-is-wrong-with-this-cast", "title": "What is wrong with this cast?", "body": "<p>I've been told that the following is bad code because z_strings is already a char array. However I don't really know much C++ so I don't really know what the usage is doing or why it would be wrong. Can somebody offer an explanation?</p>\n\n<p>Declaration: <code>char z_strings[3];</code></p>\n\n<p>Usage: <code>MyFunction(myints, (char**)&amp;z_strings, another_int_arg);</code></p>\n\n<p>Definition of MyFunction: <code>void MyFunction(int* my_ints, char** z_strings, int another_int_arg)</code></p>\n\n<p>For context, this is a coworker's \"code review\" code which is intentionally broken; he was using it to ask interview candidates to fix the bad code. However this coworker has actually left the company and the only notes say that it's a bad cast, and I'm trying to figure out some more details about why because I'm curious. </p>\n\n<p>I removed context I thought was irrelevant, but for the full context MyFunction is actually <code>GetPowers(p_int, (char**)&amp;z_strings, 3);</code> <code>p_int</code> will be an array like <code>[2,3,4]</code> and <code>z_strings</code> will be populated with values like <code>['Hundreds','Thousands','Ten Thousands']</code>, in other words this function translates numerical powers into English equivalents.</p>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1509556042, "post_id": 47059745, "comment_id": 81067685, "body": "What c++ specification are you compiling to? c++17?"}, {"owner": {"reputation": 435, "user_id": 3069853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efafc30aa503981e733dfed73950621?s=128&d=identicon&r=PG&f=1", "display_name": "kwanti", "link": "https://stackoverflow.com/users/3069853/kwanti"}, "reply_to_user": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "edited": false, "score": 0, "creation_date": 1509556496, "post_id": 47059745, "comment_id": 81067980, "body": "compiled with both c++14 and c++17 also have the same result."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1509556540, "post_id": 47059745, "comment_id": 81068013, "body": "Interesting use case. I just want to chime in that I think it should probably be allowed by gcc, but perhaps they disallowed it because it&#39;s not guaranteed safe. (only <code>dynamic_cast</code> for downcasting is)"}, {"owner": {"reputation": 435, "user_id": 3069853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efafc30aa503981e733dfed73950621?s=128&d=identicon&r=PG&f=1", "display_name": "kwanti", "link": "https://stackoverflow.com/users/3069853/kwanti"}, "edited": false, "score": 0, "creation_date": 1509557105, "post_id": 47059745, "comment_id": 81068348, "body": "but in this case, the code is all inline and the actual type of the constructed object is visible to the compiler."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1509558380, "post_id": 47059745, "comment_id": 81069070, "body": "@AndyG Any undefined behaviour in expressions that are required to be constant expressions is ill-formed (diagnostic required), so that&#39;s not an argument."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1509565191, "post_id": 47059745, "comment_id": 81072873, "body": "GCC seems to accept the same code when you cast starting from d0. Clang simply accepts your code. Seems like a bug to me given that GCC tells you it can&#39;t access i, while it can if the same type is used starting from a different variable."}], "answers": [{"comments": [{"owner": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "edited": false, "score": 0, "creation_date": 1509564153, "post_id": 47062053, "comment_id": 81072273, "body": "Structs inherit publically by default, so that&#39;s not the problem."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1509576152, "post_id": 47062053, "comment_id": 81077814, "body": "<code>static_cast</code> from base to derived is well defined, as is <code>static_cast</code> between non-standard-layout classes."}], "tags": [], "owner": {"reputation": 1119, "user_id": 6797534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tu8Gt9iJGt8/AAAAAAAAAAI/AAAAAAAAAI0/Diz261BzMYk/photo.jpg?sz=128", "display_name": "Ray Hamel", "link": "https://stackoverflow.com/users/6797534/ray-hamel"}, "is_accepted": false, "score": -2, "last_activity_date": 1509563544, "creation_date": 1509563544, "answer_id": 47062053, "question_id": 47059745, "link": "https://stackoverflow.com/questions/47059745/is-it-constexpr-accessing-base-class-member-from-intermediate-derive-class-refer/47062053#47062053", "title": "Is it constexpr accessing base class member from intermediate derive class reference?", "body": "<p><code>static_cast</code> from a base class to a derived class is UB, as is <code>static_cast</code> between non-standard-layout classes (those with virtual or non-public members or bases or multiple inheritance). So to make the above code well-defined you need public inheritance</p>\n\n<pre><code>struct base : public root{};\nstruct derive : public base{};\n</code></pre>\n\n<p>and you can only <code>static_cast</code> from <code>derive</code> to <code>base</code> or <code>root</code>, and from <code>base</code> to <code>root</code>, and not in the other direction.</p>\n\n<p>Given GCC's usual semantics it probably \"should\" accept your code, but it also makes sense that it doesn't, since it relies on non-standard behavior.</p>\n"}], "owner": {"reputation": 435, "user_id": 3069853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efafc30aa503981e733dfed73950621?s=128&d=identicon&r=PG&f=1", "display_name": "kwanti", "link": "https://stackoverflow.com/users/3069853/kwanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1509563544, "creation_date": 1509554795, "last_edit_date": 1509554953, "question_id": 47059745, "link": "https://stackoverflow.com/questions/47059745/is-it-constexpr-accessing-base-class-member-from-intermediate-derive-class-refer", "title": "Is it constexpr accessing base class member from intermediate derive class reference?", "body": "<pre><code>struct root\n{\n    int i = 0;\n};\n\nstruct base: root{};\nstruct derive: base{};\n\nconstexpr derive d0;\n\nint main()\n{\n    constexpr auto&amp; r = static_cast&lt;root const&amp;&gt;(d0);\n    constexpr auto&amp; b = static_cast&lt;base const&amp;&gt;(r);\n    constexpr auto&amp; d = static_cast&lt;derive const&amp;&gt;(r);\n\n    static_assert(d0.i == 0, \"\"); // ok\n    static_assert(r.i == 0, \"\");  // ok\n    static_assert(b.i == 0, \"\");  // error in gcc\n    static_assert(d.i == 0, \"\");  // ok\n}\n</code></pre>\n\n<p>Clang accept the code above but gcc 7.2.0 compile with error below:</p>\n\n<pre><code>prog.cc:17:5: error: non-constant condition for static assertion\n     static_assert(b.i == 0, \"\");\n     ^~~~~~~~~~~~~ \nprog.cc:17:5: error: accessing value of 'd.derive::&lt;anonymous&gt;.base::&lt;anonymous&gt;' through a 'const base'\nglvalue in a constant\n</code></pre>\n\n<p>It is not constexpr only if I access value 'i' via intermediate base.\nWhich compiler is correct?</p>\n"}, {"tags": ["c++", "function", "class", "oop"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1509554874, "post_id": 47059693, "comment_id": 81066954, "body": "<code>requestStart()</code> is not a member of your class, which means <code>sec_</code> and <code>is_started_</code> are not defined inside <code>requestStart()</code> and you can&#39;t use them."}, {"owner": {"reputation": 428, "user_id": 7421020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faa42c836c9cf455d50c86e033c44b?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/7421020/federico"}, "edited": false, "score": 0, "creation_date": 1509555042, "post_id": 47059693, "comment_id": 81067058, "body": "It seems you need a general revision about c++..that code makes no sense."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1509555253, "post_id": 47059693, "comment_id": 81067164, "body": "1. <code>is_started_</code> and <code>sec_</code> are not functions. You are not trying to treat them like functions, either. It\u2019s confusing if you call them functions. 2. When you get a compiler error, please <i>copy</i> the text of the compiler error, not re-type the parts you think are important."}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 1, "creation_date": 1509558745, "post_id": 47059693, "comment_id": 81069306, "body": "See <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list?rq=1\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1509559041, "post_id": 47059693, "comment_id": 81069472, "body": "Need an example of your intended usage. Class member functions and friend free functions may be equally viable options."}, {"owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509571219, "post_id": 47059693, "comment_id": 81075870, "body": "I apologize for this noob question. I have just started coding in C++ (still learning the concepts) and definitely new to Stackoverflow. Thank you for your help."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509571352, "post_id": 47059766, "comment_id": 81075921, "body": "Thank you @Philip . I have a follow-up question to this. After binding my function to the class in the way you suggested, will I be able to access the variables declared in <code>private</code>?"}, {"owner": {"reputation": 1295, "user_id": 4360863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/heWif.png?s=128&g=1", "display_name": "Philip Brack", "link": "https://stackoverflow.com/users/4360863/philip-brack"}, "reply_to_user": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509571915, "post_id": 47059766, "comment_id": 81076172, "body": "yes.  In C++ member functions have access to private members."}, {"owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509574722, "post_id": 47059766, "comment_id": 81077352, "body": "I have updated my code in the original post. Can you kindly have a look? I am still not able to access the private members."}], "tags": [], "owner": {"reputation": 1295, "user_id": 4360863, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/heWif.png?s=128&g=1", "display_name": "Philip Brack", "link": "https://stackoverflow.com/users/4360863/philip-brack"}, "is_accepted": false, "score": 1, "last_activity_date": 1509554869, "creation_date": 1509554869, "answer_id": 47059766, "question_id": 47059693, "link": "https://stackoverflow.com/questions/47059693/functions-out-of-scope-error-c/47059766#47059766", "title": "Functions out of scope error C++", "body": "<p><code>int compROS::requestStarted() { }</code> after the class definition will scope the member function to your object.   Your issue is that you are declaring a function but not binding it to compROS class so you cannot access the instance members.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509571749, "post_id": 47060783, "comment_id": 81076092, "body": "Hi @Patrick Chu. Can you kindly elaborate the last line of your comment? What do you mean by simplifying the <code>compROS</code> method?"}, {"owner": {"reputation": 21, "user_id": 7503713, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jD9z2w9D3jg/AAAAAAAAAAI/AAAAAAAAABY/7kzGrrWBask/photo.jpg?sz=128", "display_name": "Patrick Chu", "link": "https://stackoverflow.com/users/7503713/patrick-chu"}, "reply_to_user": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509698399, "post_id": 47060783, "comment_id": 81132228, "body": "I am explaining under the assumption that your comROS is a constructor method. Essentially what you can do is implement the actual method outside of the class brackets, {}, and only use the signature, <code>comROS(string error_text, int sec)</code> in the brackets for your comROS class"}], "tags": [], "owner": {"reputation": 21, "user_id": 7503713, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jD9z2w9D3jg/AAAAAAAAAAI/AAAAAAAAABY/7kzGrrWBask/photo.jpg?sz=128", "display_name": "Patrick Chu", "link": "https://stackoverflow.com/users/7503713/patrick-chu"}, "is_accepted": false, "score": 0, "last_activity_date": 1509558366, "creation_date": 1509558366, "answer_id": 47060783, "question_id": 47059693, "link": "https://stackoverflow.com/questions/47059693/functions-out-of-scope-error-c/47060783#47060783", "title": "Functions out of scope error C++", "body": "<p>When you create a class in c++, what is usually included are the functions that this class will use(or may use), as well as the variables it needs in order to runs those functions. In your case, your <code>requestStart()</code> and <code>requestNotStart()</code> functions are not included in your compROS class as you don't have the actual function calls in your class. This is why when you try to run your program, your functions <code>requestStart()</code> and <code>requestNotStart()</code> are trying to find the variables <code>is_started_</code> and <code>sec_</code> but does not find it since those variables only exist INSIDE the class whereas your functions are OUTSIDE of your class. My suggestion is to put the function signature for both the <code>requestStart()</code> and <code>requestNotStart()</code> method in <code>public:</code> and simplify your <code>compPOS</code> method by only using the function signature and actually implement the method outside of the class. </p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509574817, "post_id": 47061043, "comment_id": 81077388, "body": "I followed your suggestions and updated my code. But I still can&#39;t access the private members."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "edited": false, "score": 0, "creation_date": 1509575739, "post_id": 47061043, "comment_id": 81077678, "body": "@dee19 Private members can not be accessed from outside the class. You need to either make the members public, create an accessor method (e.g. a setter), or define a friend function."}], "tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 0, "last_activity_date": 1509559392, "creation_date": 1509559392, "answer_id": 47061043, "question_id": 47059693, "link": "https://stackoverflow.com/questions/47059693/functions-out-of-scope-error-c/47061043#47061043", "title": "Functions out of scope error C++", "body": "<p>In object-oriented programming, a <strong>class</strong> definition is like a blueprint of a house. You can not use the kitchen, nor the bathroom, of the blueprint, the only thing you can do is to use it to build a house.</p>\n\n<p>In the same way, you can not call any methods of your class until you have built <strong>an instance</strong> of that class.</p>\n\n<pre><code>Lib::compROS c(\"my error\", 2);\n</code></pre>\n\n<p>Any function that wants to call any of your class' methods needs to know on what instance to make the call. You need to somehow pass a reference to an instance of your function.</p>\n\n<pre><code>int requestStart(Lib::compROS&amp; c) {\n    if(!c.is_started_)\n        sec_ = 2;\n        // Start timer\n        // Timer expired\n    c.is_started_ = true; // This member needs to be public for external access.\n    return 0;\n}\n\nint main() {\n    Lib::compROS c(\"my error\", 2); // Create instance.\n    requestStart(c); // Pass instance to function.\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8864361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a541865c0779ecd5ef45232339af17?s=128&d=identicon&r=PG&f=1", "display_name": "roo_saa", "link": "https://stackoverflow.com/users/8864361/roo-saa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1509574664, "creation_date": 1509554646, "last_edit_date": 1509574664, "question_id": 47059693, "link": "https://stackoverflow.com/questions/47059693/functions-out-of-scope-error-c", "title": "Functions out of scope error C++", "body": "<p>My code has a <code>class compROS</code>. I have created 2 functions <code>requestStart</code> and <code>requestNotStart</code> which are trying to call <code>is_started_</code> and <code>sec_</code> from class <code>compROS</code>. Now whenever I run the code, I get the following errors:</p>\n\n<blockquote>\n  <p>functions <code>requestStart</code> and <code>requestNotStart</code> and <code>is_started_</code> and <code>sec_</code> were not declared in this scope.</p>\n</blockquote>\n\n<p>My assumption is that the private functions are not accessible from the outside of the class. Should I add <code>requestStart</code> and <code>requestNotStart</code> as friend functions??</p>\n\n<p>What is the most efficient way of tackling these errors?</p>\n\n<p>Following is my code -</p>\n\n<p>(<strong>Updated my code based on the comments from @Snps and @Philip Brack</strong>)</p>\n\n<pre><code>using namespace std;\nnamespace Lib\n{\n  class compROS\n  {\n    public:\n      compROS(string error_text, int sec):\n        error_text_(error_text),\n        is_started_(false),\n        sec_(sec)\n        {\n        }\n\n    private:\n      string error_text_;\n      bool is_started_;\n      int sec_;\n  };\n}\n\nint requestStart(Lib::compROS&amp; c)\n{\n  if(!c.is_started_)\n    sec_ = 2;\n    // Start timer\n    // Timer expired\n  c.is_started_ = true;\n  return 0;\n}\n\nint requestNotStart(Lib::compROS&amp; c)\n{\n  // &lt;Code to be inserted&gt;\n  return 0;\n}\n\nint main (int argc, char **argv)\n{\n  Lib::compROS c(\"error\", 2);\n  requestStart(c);\n  requestNotStart(c);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1509554218, "post_id": 47059535, "comment_id": 81066528, "body": "<code>std::vector&lt;std::vector&lt;int&gt;&gt; vec(n, std::vector&lt;int&gt;(m));</code> If the size is known at compile-time, please do not use dynamic memory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 4, "creation_date": 1509554694, "post_id": 47059535, "comment_id": 81066843, "body": "@DeiDei That will not be contiguous and will be quite inefficient. As for your second sentence, that&#39;s just wrong."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1509554725, "post_id": 47059535, "comment_id": 81066869, "body": "<code>auto &amp;arr = *new std::array&lt;std::array&lt;TYPE, height&gt;, width&gt;</code>? Or <code>std::vector&lt;std::array&lt;TYPE, height&gt;&gt; arr(width);</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1509554736, "post_id": 47059535, "comment_id": 81066876, "body": "@DeiDei you suggest to use <code>std::vector</code> and you suggest not to use <code>std::vector</code>?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 2, "creation_date": 1509557350, "post_id": 47059535, "comment_id": 81068506, "body": "Use a <code>std::vector&lt;int&gt;</code> and calculate the offset for every access. Remove requirement three and adapt requirement two so that the syntax of your wrapper class becomes <code>arr(x, y)</code>."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1509609515, "post_id": 47059535, "comment_id": 81088367, "body": "&quot;on the heap for various reasons.&quot; Which reasons? Known size in compile time and using heap sounds opposite to me."}, {"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1509638807, "post_id": 47059535, "comment_id": 81108463, "body": "@Klaus known big size is as good reason as any to place an array to dynamic memory"}], "answers": [{"comments": [{"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 3, "creation_date": 1509555487, "post_id": 47059792, "comment_id": 81067318, "body": "Note that data in nested <code>std::array</code>&#39;s are <i>not</i> guaranteed to be contiguous (<a href=\"https://stackoverflow.com/q/9762662/873025\">stackoverflow.com/q/9762662/873025</a>)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1509554988, "creation_date": 1509554988, "answer_id": 47059792, "question_id": 47059535, "link": "https://stackoverflow.com/questions/47059535/best-practice-for-allocating-a-continuous-2d-array-on-the-heap-using-c14/47059792#47059792", "title": "Best practice for allocating a continuous 2d array on the heap using c++14", "body": "<p>You could use a <code>unique_ptr</code> that holds a raw array:</p>\n\n<pre><code>std::unique_ptr&lt;int[][Y]&gt; p(new int[X][Y]);\n</code></pre>\n\n<p>However, this doesn't give you meaningful bounds checking on the first axis, nor does it let you iterate using range-based for.</p>\n\n<hr />\n\n<p>You could use a <code>unique_ptr</code> that holds a <code>std::array</code></p>\n\n<pre><code>std::unique_ptr&lt;std::array&lt;std::array&lt;int, Y&gt;, X&gt;&gt; p;\n</code></pre>\n\n<p>However, this doesn't let you index, since <code>operator[]</code> is only defined for raw arrays. </p>\n\n<hr />\n\n<p>I would just write my own wrapper that gives me the best of both. Something like:</p>\n\n<pre><code>template &lt;typename T, size_t X, size_t Y&gt;\nstruct Array {\n    Array() {\n        p.reset(new T[X][Y]);\n    }   \n\n    using row = T[Y];\n\n    row* begin() { return p.get(); }\n    row* end() { return p.get() + X; }\n\n    row&amp; operator[](size_t y) { return p[y]; }\n\n    std::unique_ptr&lt;int[][Y]&gt; p;\n};\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7014286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb7b5ef4819e2e0b9b69d046b9cf87c?s=128&d=identicon&r=PG&f=1", "display_name": "rSir", "link": "https://stackoverflow.com/users/7014286/rsir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1509725873, "creation_date": 1509554090, "last_edit_date": 1509725873, "question_id": 47059535, "link": "https://stackoverflow.com/questions/47059535/best-practice-for-allocating-a-continuous-2d-array-on-the-heap-using-c14", "title": "Best practice for allocating a continuous 2d array on the heap using c++14", "body": "<p>I am having a hard time finding the answer to the following:</p>\n\n<p>What is the best practice way of allocating a 2d array of ints that is contiguous in memory on the heap in c++14.</p>\n\n<p>Conditions:</p>\n\n<ul>\n<li>The width and height is known at compile time but I would still like to put the 2d array on the heap for various reasons.</li>\n<li>I would like to access memory locations using the 2d syntax arr[x][y]</li>\n<li>I do not want to implement my own wrapper if possible</li>\n</ul>\n\n<p>Sub questions:</p>\n\n<ul>\n<li>Do I have to use std::array or is the native int[][dim] syntax usable?</li>\n<li>Is it possible to have a unique_ptr to the 2d array?</li>\n</ul>\n\n<p>Thanks in advance for answers.</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glm-math", "fbo"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1509553467, "post_id": 47059154, "comment_id": 81066060, "body": "Edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "edited": false, "score": 0, "creation_date": 1509556467, "post_id": 47059513, "comment_id": 81067958, "body": "@user308485 Please Upvote and accept the answer if it works for you."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 4, "last_activity_date": 1509553990, "creation_date": 1509553990, "answer_id": 47059513, "question_id": 47059154, "link": "https://stackoverflow.com/questions/47059154/opengl-render-to-framebuffer-as-well-as-to-display/47059513#47059513", "title": "OpenGL: Render to framebuffer as well as to display", "body": "<p>Your <code>drawScene()</code> code includes these lines at the end:</p>\n\n<pre><code>// Swap buffers\nglfwSwapBuffers(window);\nglfwPollEvents();\n</code></pre>\n\n<p>What do you think happens if you call this when you're not actually rendering to the screen?</p>\n\n<p>The obvious solution is to include a flag in the function that instructs whether to perform the buffer swapping:</p>\n\n<pre><code>void drawScene(bool swap = true) {\n    /*...*/\n    if(swap) {\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n    }\n}\n\ndo{\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffername);\n    drawScene(false);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    drawScene(true);\n}while( glfwGetKey(window, GLFW_KEY_ESCAPE ) != GLFW_PRESS\n</code></pre>\n\n<p>Or, you could move those calls outside the function, which is probably better since it doesn't really make sense to make them local to your draw function in the first place.</p>\n\n<pre><code>do{\n    glfwPollEvents(); //Prefer having this be the first call, in case you need the window\n    //responding to user input immediately\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffername);\n    drawScene();\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    drawScene();\n    glfwSwapBuffers(window); //No longer in drawScene() function\n}while( glfwGetKey(window, GLFW_KEY_ESCAPE ) != GLFW_PRESS\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 6405712, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/66716761277120457b31513170f94749?s=128&d=identicon&r=PG&f=1", "display_name": "user308485", "link": "https://stackoverflow.com/users/6405712/user308485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "accepted_answer_id": 47059513, "answer_count": 1, "score": 0, "last_activity_date": 1509553990, "creation_date": 1509552846, "last_edit_date": 1509553445, "question_id": 47059154, "link": "https://stackoverflow.com/questions/47059154/opengl-render-to-framebuffer-as-well-as-to-display", "title": "OpenGL: Render to framebuffer as well as to display", "body": "<p>I have a 3d scene which I can render on my display. However, in addition to rendering it to display, I would like to also be able to export the rendered scene, say once every 100 frames, as a image (say a JPG or PNG image), maybe saving it as a file somewhere on my machine.</p>\n\n<p>I tried something like the following:</p>\n\n<pre><code>do{\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffername);\n    drawScene();\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    drawScene();\n}while( glfwGetKey(window, GLFW_KEY_ESCAPE ) != GLFW_PRESS\n</code></pre>\n\n<p>I'm not sure if I'm using the FrameBuffer Objects correctly, but was looking for suggestions as to how to proceed given my goal. From the above code, I am binding the framebuffer to the FBO I have defined and then drawing the scene (which should draw to the FBO if I am correct?). Then I draw again to my regular display. However, this code causes the display to constantly switch between my scene, and an empty (black) scene, which I don't want. I want my scene to be displayed to the display device as a nice clean 3d scene, without constantly going all black.</p>\n\n<p>My drawing function looks something like this:</p>\n\n<pre><code>void drawScene() {\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n//glBindTexture(GL_TEXTURE_2D, 0);\n//glBindFramebuffer(GL_FRAMEBUFFER, framebuffername);\n\n// Use our shader\nglUseProgram(programID);\n\n// Compute the MVP matrix from keyboard and mouse input\ncomputeMatricesFromInputs();\nglm::mat4 ProjectionMatrix = getProjectionMatrix();\nglm::mat4 ViewMatrix = getViewMatrix();\nglm::mat4 ModelMatrix = glm::mat4(1.0); //DEFINE MODEL TO WORLD TRANSFORMATION\n                                        //glm::mat4 ModelMatrix = glm::scale(2.0,2.0,2.0);\nglm::mat4 MVP = ProjectionMatrix * ViewMatrix * ModelMatrix;\n\n// Send our transformation to the currently bound shader, \n// in the \"MVP\" uniform\nglUniformMatrix4fv(MatrixID, 1, GL_FALSE, &amp;MVP[0][0]);\nglUniform1f(FARPLANE, farplane_control);\nglUniform1f(NEARPLANE, nearplane_control);\nglUniformMatrix4fv(ModelMatrixID, 1, GL_FALSE, &amp;ModelMatrix[0][0]);\nglUniformMatrix4fv(ViewMatrixID, 1, GL_FALSE, &amp;ViewMatrix[0][0]);\nglm::vec3 lightPos = glm::vec3(0, 0, 4);\nglUniform3f(LightID, lightPos.x, lightPos.y, lightPos.z);\n\n// 1st attribute buffer : vertices\nglEnableVertexAttribArray(0);\nglBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\nglVertexAttribPointer(\n    0,                  // attribute\n    3,                  // size\n    GL_FLOAT,           // type\n    GL_FALSE,           // normalized?\n    0,                  // stride\n    (void*)0            // array buffer offset\n);\n\n// 2nd attribute buffer : normals\nglEnableVertexAttribArray(1);\nglBindBuffer(GL_ARRAY_BUFFER, normalbuffer);\nglVertexAttribPointer(\n    1,                                // attribute\n    3,                                // size\n    GL_FLOAT,                         // type\n    GL_FALSE,                         // normalized?\n    0,                                // stride\n    (void*)0                          // array buffer offset\n);\n\n// Draw the triangle !\nglDrawArrays(GL_TRIANGLES, 0, (GLsizei)vertices.size());\n\nglDisableVertexAttribArray(0);\nglDisableVertexAttribArray(1);\n\nglReadBuffer(GL_FRONT);\n\n// Swap buffers\nglfwSwapBuffers(window);\nglfwPollEvents();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1509552753, "post_id": 47059100, "comment_id": 81065603, "body": "Please show your code instead of describing it. Read this before: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1509553135, "post_id": 47059100, "comment_id": 81065861, "body": "You can&#39;t do that. It&#39;s impossible to insert/delete text in the middle of a file."}, {"owner": {"reputation": 1, "user_id": 8869214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e64e5f4b50df860602bdbe8345e700b?s=128&d=identicon&r=PG&f=1", "display_name": "Amp", "link": "https://stackoverflow.com/users/8869214/amp"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509553663, "post_id": 47059100, "comment_id": 81066192, "body": "Is that better @Michael Walz?"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1509555230, "creation_date": 1509555230, "answer_id": 47059858, "question_id": 47059100, "link": "https://stackoverflow.com/questions/47059100/how-to-use-getline-for-consecutive-lines-in-a-file/47059858#47059858", "title": "How to use getline for consecutive lines in a file", "body": "<p>The standard idiom for reading text lines from a file and storing them is:  </p>\n\n<pre><code>std::vector&lt;std::string&gt; file_data;\nstd::string text_line;\nwhile (std::getline(my_data_file, text_line))\n{\n    // Optional: store the text line\n    file_data.push_back(text_line);\n\n    // Call a function to process (or ignore) the text line:\n    Process_Text_Line(text_line);\n}\n</code></pre>\n\n<p>If you want to have a function that reads the file, you may need to pass the vector:  </p>\n\n<pre><code>void Read_File(std::vector&lt;std::string&gt;&amp; file_data)\n{\n    //...\n    // Read the data, see \"while\" loop above.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": -1, "last_activity_date": 1509562972, "creation_date": 1509562972, "answer_id": 47061908, "question_id": 47059100, "link": "https://stackoverflow.com/questions/47059100/how-to-use-getline-for-consecutive-lines-in-a-file/47061908#47061908", "title": "How to use getline for consecutive lines in a file", "body": "<p>Don't open and close the file for every read. Keep it open and read a line at a time:</p>\n\n<pre><code>std::istream in(\"filein.txt\");\nstd::ostream out(\"fileout.txt\");\nstd::string line;\nwhile (std::getline(in, line)) {\n    // modify line as appropriate\n    out &lt;&lt; line &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8869214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e64e5f4b50df860602bdbe8345e700b?s=128&d=identicon&r=PG&f=1", "display_name": "Amp", "link": "https://stackoverflow.com/users/8869214/amp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1509562972, "creation_date": 1509552648, "last_edit_date": 1509553763, "question_id": 47059100, "link": "https://stackoverflow.com/questions/47059100/how-to-use-getline-for-consecutive-lines-in-a-file", "title": "How to use getline for consecutive lines in a file", "body": "<p>I am trying to use getline on a file (unkown size) to grap the first line, input it into a string, manipulate this string (replace words with others, move some around) and output the manipulated line back to the file. </p>\n\n<p>After this, I need to do the same thing to line 2, 3, etc. until the end of the file. How would I go about doing this? I figured a while loop for getline would work, but not sure how to get the conditions for the while loop or how to manipulate each line individually. Such as lines 1 and 3 must be manipulated differently than lines 2 and 4. etc. </p>\n\n<p>A rough idea of what I'm trying to do:</p>\n\n<pre><code>void readFile(string filename, string text)\n{\n  ifstream infile;\n\n  infile.open(filename);\n\n  getline(cin, text) // pretty sure this is wrong..\n\n  infile.close(); // close here, or after manipulation???\n\n}\n\nvoid swapText(string filename, string text)\n{\n\n  string decrypText;\n\n  //Manupulate several things..\n\n  return decrypText;\n\n}\n\nvoid writeToFile(string filename, string decrypText)\n{\n\n  ofstream outfile;\n\n  outfile.open(filename);\n\n  outfile &lt;&lt; decrypText &lt;&lt; endl;\n\n  outfile.close();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "protocol-buffers", "ros"], "answers": [{"tags": [], "owner": {"reputation": 1002, "user_id": 2912912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHAKG.png?s=128&g=1", "display_name": "maetulj", "link": "https://stackoverflow.com/users/2912912/maetulj"}, "is_accepted": true, "score": 4, "last_activity_date": 1509717348, "creation_date": 1509717348, "answer_id": 47097514, "question_id": 47059079, "link": "https://stackoverflow.com/questions/47059079/converting-protobuf-to-ros-messages-with-similar-functionality/47097514#47097514", "title": "Converting Protobuf to ROS messages with similar functionality", "body": "<p>Yes there is a hack. But you need to input a some work into it. \nFor using the publisher/subscriber methods in ROS you need to define messages for all topics in <em>.msg</em> files. </p>\n\n<p>From this file then a C++ class is automatically generated. But you don't want to touch that autogenerated file! What you could do instead is define your class and associate it with the autogenerated class. </p>\n\n<p>Look <a href=\"https://answers.ros.org/question/129286/custom-classes-in-message-files/\" rel=\"nofollow noreferrer\">here</a> for an example how to do it. You could then expand your custom class with desired methods like <em>isValid</em>. </p>\n\n<p>Another (perhaps simpler) way would be to declare a helper class that would do the desired work for each type in messages.</p>\n\n<p>Or you could simply continue to use protobuf. It is also used at least in Gazebo if not also in ROS. </p>\n"}, {"tags": [], "owner": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "is_accepted": false, "score": 0, "last_activity_date": 1517874908, "creation_date": 1517874908, "answer_id": 48633415, "question_id": 47059079, "link": "https://stackoverflow.com/questions/47059079/converting-protobuf-to-ros-messages-with-similar-functionality/48633415#48633415", "title": "Converting Protobuf to ROS messages with similar functionality", "body": "<p>Sometime ago I wrote some auto generation scripts that consume Protobufs and produce ROS headers (<em>not</em> the msg files) to transmit Protobuf blobs over ROS comms. This would satisfy your need without having to duplicate a Protobuf definition with a supporting ROS msg definition. <a href=\"https://github.com/ammarhusain/ros-protobuf-bridge\" rel=\"nofollow noreferrer\">Code</a>.</p>\n"}], "owner": {"reputation": 441, "user_id": 3000724, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53e6d3292a0ea5259ee6ce7ef7ee37fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3000724", "link": "https://stackoverflow.com/users/3000724/user3000724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1987, "favorite_count": 0, "accepted_answer_id": 47097514, "answer_count": 2, "score": 3, "last_activity_date": 1517874908, "creation_date": 1509552559, "question_id": 47059079, "link": "https://stackoverflow.com/questions/47059079/converting-protobuf-to-ros-messages-with-similar-functionality", "title": "Converting Protobuf to ROS messages with similar functionality", "body": "<p>I recently inherited a large codebase at work utilizing MOOS &amp; Protobuf messages.</p>\n\n<p>At the request of my project lead, I am porting it to use exclusively ROS where ROS messages are used instead of protobuf. The code base heavily relies on utilizing protobuf functionality such as enumerator min / max, extracting a string from the variable field, ->has_variable() function, ->isValid(), etc.</p>\n\n<p>So far I have only been able to find very basic ROS message functionality from the wiki.</p>\n\n<p><strong>Are there any 'hacks' or the like to have this type of pliability?</strong></p>\n\n<p>Example: Protbufs support enumerators, but ROS messages don't, so I have:</p>\n\n<pre><code>  uint8 TYPE_FAILED        = 0\n  uint8 TYPE_OPERATIONAL   = 1\n  uint8 TYPE_INITIALIZING  = 2\n\n  uint8 health_state_type\n</code></pre>\n\n<p>My <code>health_state_type</code> is my 'enumerator' but I don't have a min or max unless I hardcode one, and I can't extract <code>TYPE_FAILED</code> as a string.  I've been slowly finding workarounds for this by using </p>\n\n<pre><code>my_message::custom_msg health;\nhealth.health_state_type = health.TYPE_FAILED\n</code></pre>\n\n<p>But I'm having to modify many different areas that use it as a string, not integer.</p>\n"}, {"tags": ["c++", "string", "types", "long-integer", "strtol"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1509552660, "post_id": 47059077, "comment_id": 81065540, "body": "What exactly <code>Item_int</code> is?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1509552778, "post_id": 47059077, "comment_id": 81065624, "body": "please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Given the code you show here nobody will be able to tell you exactly why you get that output. If it is not relevant you could just remove that <code>Item_int</code> from the example"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1509552894, "post_id": 47059149, "comment_id": 81065698, "body": "He <i>is</i> already  iterating over the string fo find if there are non-digit characters."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509553036, "post_id": 47059149, "comment_id": 81065789, "body": "<code>number = Long.parseLong(stringT);</code> Are you sure this is C++?"}], "tags": [], "owner": {"reputation": 680, "user_id": 8783155, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6d933349fcc18da576e4d4b23886abc?s=128&d=identicon&r=PG&f=1", "display_name": "P_Andre", "link": "https://stackoverflow.com/users/8783155/p-andre"}, "is_accepted": false, "score": 0, "last_activity_date": 1509553112, "last_edit_date": 1509553112, "creation_date": 1509552834, "answer_id": 47059149, "question_id": 47059077, "link": "https://stackoverflow.com/questions/47059077/string-with-numbers-change-type-to-long-int/47059149#47059149", "title": "string with numbers change type to long int", "body": "<p>First iterate over a string to find any non-numeric characters</p>\n\n<pre><code>bool is_number(const std::string&amp; s)\n    {\n        std::string::const_iterator it = s.begin();\n        while (it != s.end() &amp;&amp; std::isdigit(*it)) ++it;\n        return !s.empty() &amp;&amp; it == s.end();\n    }\n</code></pre>\n\n<p>Than convert string to int if is_number is succesful</p>\n\n<pre><code>long int number = 0;\nif (is_number(stringT))\n{\n  number = std::stol(stringT);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1509553142, "creation_date": 1509553142, "answer_id": 47059254, "question_id": 47059077, "link": "https://stackoverflow.com/questions/47059077/string-with-numbers-change-type-to-long-int/47059254#47059254", "title": "string with numbers change type to long int", "body": "<p>The number <code>12836564128606764591</code> is larger than what can fit into a <code>long long</code>.</p>\n\n<p>The maximum a <code>long long</code> can hold is <code>9223372036854775807</code> (assuming <code>long long</code> is 64 bits.</p>\n"}], "owner": {"reputation": 3, "user_id": 8568545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6a1827a7d48dbdf4e67d1085fd17b8?s=128&d=identicon&r=PG&f=1", "display_name": "Christ", "link": "https://stackoverflow.com/users/8568545/christ"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1509553142, "creation_date": 1509552554, "question_id": 47059077, "link": "https://stackoverflow.com/questions/47059077/string-with-numbers-change-type-to-long-int", "title": "string with numbers change type to long int", "body": "<p>I am writing in C++ and I have a string. I want to check if this string is only numbers and If it is I want to change the type to long int. </p>\n\n<pre><code>                       stringT = \"12836564128606764591\"; \n                       bool temp = false;\n                       for(char&amp; ch : stringT) \n                       {\n                        if(!isdigit(ch)) \n                          { \n                            temp=true;\n                            break;\n                          }\n                       }\n                       if(temp != true)\n                       {\n                        itm = new Item_int((long long) strtoll(stringT.c_str(), NULL, 0));\n                        std::cout &lt;&lt; \" itm:\" &lt;&lt; *itm &lt;&lt; std::endl;\n\n\n                       }  \n</code></pre>\n\n<p>but the result of print is: 9223372036854775807</p>\n"}, {"tags": ["c++", "multithreading", "boost", "bind", "wt"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1509552751, "post_id": 47059025, "comment_id": 81065601, "body": "Can&#39;t you just launch a new thread inside the function <code>Servicemode::doors_open_all()</code>?"}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1509552888, "post_id": 47059025, "comment_id": 81065696, "body": "Apparently not, it doesn&#39;t allow use of non-static member function in such a way."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1509553030, "post_id": 47059025, "comment_id": 81065783, "body": "Inside <code>Servicemode::doors_open_all()</code> you can launch a thread to do its work giving it a lambda function if need be. But you can, actually, run non-static member functions in a thread too."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1509553750, "post_id": 47059025, "comment_id": 81066243, "body": "imho <code>bind</code> is completely horrible and I would always prefer a lambda"}, {"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "edited": false, "score": 0, "creation_date": 1509610036, "post_id": 47059025, "comment_id": 81088631, "body": "Galik your idea of using a lambda inside the function worked indeed. You can post it as a proper answer if you want. Many thanks."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "edited": false, "score": 0, "creation_date": 1509608458, "post_id": 47059148, "comment_id": 81087778, "body": "Thanks for the suggestion but boost::thread (also with bind) gives an deleted function error: &#39; error: use of deleted function \u2018boost::thread::thread(const boost::thread&amp;) &#39;"}], "tags": [], "owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "is_accepted": false, "score": 0, "last_activity_date": 1509553205, "last_edit_date": 1509553205, "creation_date": 1509552834, "answer_id": 47059148, "question_id": 47059025, "link": "https://stackoverflow.com/questions/47059025/how-to-use-boostbind-with-stdthread-in-wt-c/47059148#47059148", "title": "how to use boost::bind with std::thread (in Wt c++)", "body": "<p>If I understand question corrently you need to run <code>doors_open_all</code> function in a new thread.</p>\n\n<p><code>boost::thread</code> constructor is internaly using <code>boost::bind</code> You don't need to be explicit.</p>\n\n<p>So <code>open_doors_button-&gt;clicked().connect(boost:: thread(&amp;Servicemode::doors_open_all, this));</code> should do the job.</p>\n\n<p>Version with <code>boost::thread</code> and <code>boost::bind</code>:\n<code>open_doors_button-&gt;clicked().connect(boost::thread(boost::bind(&amp;Servicemode::doors_open_all, this)));</code></p>\n\n<p>Edit:\nYou can also try using <code>std::async</code> for this purpouse too.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 2625232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuLAR.jpg?s=128&g=1", "display_name": "RockinRoel", "link": "https://stackoverflow.com/users/2625232/rockinroel"}, "is_accepted": false, "score": 0, "last_activity_date": 1509615620, "creation_date": 1509615620, "answer_id": 47071981, "question_id": 47059025, "link": "https://stackoverflow.com/questions/47059025/how-to-use-boostbind-with-stdthread-in-wt-c/47071981#47071981", "title": "how to use boost::bind with std::thread (in Wt c++)", "body": "<p>What does <code>Servicemode::doors_open_all()</code> do?</p>\n\n<p>If I assume that what is taking a long time is just all backend stuff, so no widgets are being created, deleted or modified, then you can spawn a thread inside <code>Servicemode::doors_open_all()</code> to do all of that backend stuff. When it's done you have two possibilities:</p>\n\n<ol>\n<li>Use <code>WServer::post()</code>, passing it the session id of your <code>WApplication</code> and a function, to notify the application that it should update its UI, and do all of your creating, deleting and modifying of widgets in that callback.</li>\n<li><p>Grab the update lock of the <code>WApplication</code>:</p>\n\n<pre><code>// Assuming that app is a Wt::WApplication*\nWt::WApplication::UpdateLock lock(app); // lock is released when it goes out of scope\n</code></pre>\n\n<p>When you have the update lock, you can go ahead and modify the widget tree.</p></li>\n</ol>\n\n<p>In any case, when doing this, you have to also do these two things:</p>\n\n<ol>\n<li>Enable server push beforehand by calling <code>app-&gt;enableUpdates(true)</code>. When the thread is done you can again disable server push with <code>app-&gt;enableUpdates(false)</code>.</li>\n<li>When you have modified the widget tree, notify Wt that it should push these changes to the client with <code>app-&gt;triggerUpdate()</code>.</li>\n</ol>\n\n<p>If what takes a long time is UI-related, then there's not much you can do, since Wt assumes that you only modify a <code>WApplication</code> and its widgets from a single thread at a time, i.e. when you have the update lock. The update lock is always grabbed automatically when handling an event coming from the client, like <code>WPushButton::clicked()</code>.</p>\n\n<p>Server push is demonstrated in the <code>serverpush</code> example. You can find that under <code>examples/feature/serverpush</code> in the Wt source tree.</p>\n"}], "owner": {"reputation": 109, "user_id": 7084234, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1209648255774934/picture?type=large", "display_name": "Levi", "link": "https://stackoverflow.com/users/7084234/levi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509615620, "creation_date": 1509552374, "question_id": 47059025, "link": "https://stackoverflow.com/questions/47059025/how-to-use-boostbind-with-stdthread-in-wt-c", "title": "how to use boost::bind with std::thread (in Wt c++)", "body": "<p>I'm using Wt C++ framework and need to connect a push button with a class function. The below code works fine but it's needed to run the function doors_open_all on a thread to allow usage of other actions at the same time.</p>\n\n<pre><code>Wt::WPushButton *open_doors_button = new Wt::WPushButton(\"open all\");\ncontainer_box-&gt;addWidget(open_doors_button);\nopen_doors_button-&gt;clicked().connect(boost::bind(&amp;Servicemode::doors_open_all, this));\n</code></pre>\n\n<p>Something along the lines is needed:</p>\n\n<pre><code>open_doors_button-&gt;clicked().connect(boost::threaded_bind(&amp;Servicemode::doors_open_all, this));\n</code></pre>\n"}, {"tags": ["c++", "g++", "compiler-optimization"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1509552441, "post_id": 47058978, "comment_id": 81065399, "body": "With a string of length 20,000 you could be exceeding the stack with the number of recursive calls.  To prove/disprove this try increasing the stack size."}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1509552614, "post_id": 47058978, "comment_id": 81065514, "body": "@RichardCritten, for 10,000, it works fine. So I think you are right. However here I am curious how O2 fights that."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1509552738, "post_id": 47058978, "comment_id": 81065592, "body": "You are running to UB (exceeding the stack) and changing the optimisation level might be doing tail-recursion elimination or just appearing to work.  You should examine the generated assembly."}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1509552897, "post_id": 47058978, "comment_id": 81065700, "body": "From what I know, this code doesn&#39;t look tail-call optimizable. And I have no idea about x86 assembly. That could solve the problem I think."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1509602062, "post_id": 47058978, "comment_id": 81084843, "body": "Could you provide an example (nfa, input-string-generator) for which O2 works but O3 doesn&#39;t?"}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1509634976, "post_id": 47058978, "comment_id": 81105549, "body": "@ead, edited the question. let me know if anything else is needed."}], "answers": [{"comments": [{"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "edited": false, "score": 0, "creation_date": 1509733755, "post_id": 47099673, "comment_id": 81154703, "body": "should&#39;ve thought of that. -O3 works for string upto 19k, O2 breaks at 22k in my pc. The gap is small."}, {"owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "edited": false, "score": 0, "creation_date": 1509733955, "post_id": 47099673, "comment_id": 81154795, "body": "i have 3 questions. How hard is x86 assembly? where did you learn it from? and most importantly, for someone who won&#39;t necessarily use this knowledge in foreseeable future, is learning x86 worth it? I know the answer would be complicated, but plz try to answer the last one in boolean."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "edited": false, "score": 0, "creation_date": 1509735885, "post_id": 47099673, "comment_id": 81155871, "body": "@ShihabShahriar my understanding of x86 is very limited, so I&#39;m not qualified to answer your first two questions. As for the third:  assembly makes you a better programmer because it enables you to understand how the things really work - you don&#39;t have to guess, what the compiler did - you just can see it"}], "tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 2, "last_activity_date": 1509727805, "last_edit_date": 1509727805, "creation_date": 1509724160, "answer_id": 47099673, "question_id": 47058978, "link": "https://stackoverflow.com/questions/47058978/g-optimization-o2-flag-fixes-a-broken-code-where-o3-breaks-it-again/47099673#47099673", "title": "g++ Optimization : O2 flag fixes a broken code where O3 breaks it again", "body": "<p>As you already have figured out: the problem is the stack-usage of your recursion. It is also true that TLO would not be performed neither for <code>-O2</code> nor for <code>-O3</code> (theoretically it would be possible only for the last recur-call which would not help in your case).</p>\n\n<p>However, depending on the level of the optimization your function needs different amount of space on the stack. There is no guarantee that <code>-O3</code> version will be faster and need less space on the stack.</p>\n\n<p>When we look at the <a href=\"https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSBnVAV2OUxAHIBSAJgGY8AO2QAbZlgDU3fgGEGBYsOAzs3AAwBBPoJHipM2QDdMyIsVUbtA4WImZpcgLYBDAA6WtV5g2WShLk6YDG4u7JIK6DIAQlZWCsTMZpIAygQuBJhxAOyxWpIFkq4ecsgILmQmZiSGaRmYAFSqjtiSii5CvgR4qJ0xVoWSAEaoqKKSYexu3ULAjgAikgBmLqIMWfx52tnz/V5aI2NFGWUQdZkNEemZjIp%2Bwm4AlNy5A4V4SxAPMrv8u7y8Pi8R6SYiYAisIRXeoAWlUk0w02Ue20%2BUKSxIEBczCIERAClhqnanUIPT6AFZot9KepuOTdvSQW9BgUPhBXARTgxyEI3AA6BjMIYJCC0R7i0HgyFtRIbLbM5aY7G4hj466YOH8bDErpkhh06JgHjZWRGunzEEAektGp1pN6%2BrRLMkbI5XJ5TxBYIhxChimYcriTslPqhKzWga8O04j1Ioi45M4pCEXHUSdQXFkfFivGiERYbAcOloSYIqZjsYA1nR%2BHzsgJ%2BLxyQBObIAFmbAA5aAA2dQ9uNcNtJlOcNOkDOcJOq9SkMtjmOkOCwJBoJxuPCiTBkCgQNcbrfEEDAeukJabzLEVUQIbl0hDYQVACeXBLpDXQSEBAA8kJRC%2BF1ILBXFmLc73wMEzDwExVUAzAAA9TBxDhODfYRMnjVDSyUJxX0XUQ8GFeBY1QJEHS4GFv34SQYWQGjIh%2BZBs2zWg3yYVh2DoWNMMTZM70neDOx7GEezbSRgGQOjsj5XhJAgXBCBIaQBHoSRZFQddN23ZT%2BDFUty3FUhq34HsZOyHse3bdQm3UWhO34Zs20HThhz4wDJ2nEBZ3nNNY2XRAUA0g9t3ISh9y0o8T14M8L23a9b0Ah8AmIAC3w/TAv1/f9wMwEDgDAwCINMboYLvBCkMyPCeQwqq7lwrDuMI1VIBIsjOgo79ZNo%2BiCCiP4mNzFi2ILTixWc3jR3HAShJEsSJKkmS5IU8wdNU9TNMPHTgX0hdDOrXg2z5ZtjpO07ToHTDXMm9MuE87yDKXGAAvCw9Qr3IKIuPU9z1ES94rvJLnyq9LMr/ADx2Ajp8pQiG8EgkrgjKxDkGQqr0MwTC3zqvDGqIlqJza2DKPUGi6JhBj%2BuY3NWOnEaODGniR34rhBOE0TxMkyRpNk%2BT8BW4tSDUj7Np0fhHh23yqxAJtnKu5mp0YLy5wM7iuF4Jn3Nu5XdtjEwrzJEA2yAA%3D%3D%3D\" rel=\"nofollow noreferrer\">assembly</a> we can see the the following: </p>\n\n<ol>\n<li><p><code>-O3</code> reserves 88 bytes via <code>subq $88, %rsp</code>, the footprint on the stack is even larger because also registers <code>r12-r15</code> are pushed on the stack in addition to the usual function prologue.</p></li>\n<li><p><code>-O2</code> reserves only 56  bytes in addition to the registers pushed on the stack.</p></li>\n<li><p>Without optimization the footprint on the stack is the largest: everything needs to be stored/loaded to/from the stack between two    lines of original code, in order to get predictable debug behavior so we can change values in debugger.</p></li>\n</ol>\n\n<p>That would explain your observations: without optimization the stack is full pretty quickly. <code>-O2</code> optimization mitigate it (but doesn't fix it), so recursion depth of 20000 can be handled - it will probably crash for 30000. <code>-O3</code> optimization has a larger stack footprint and fails already for smaller inputs.</p>\n\n<p>The proper fix for this problem is obvious now: one should either use the iterative version of depth first search or the breadth first search.</p>\n\n<p>Another issue in your code - the usage of <code>substr</code>which results in unnecessary memory copying/usage. Just pass the iterators to the first character in the string and increment it for the recursion-call.</p>\n"}], "owner": {"reputation": 3723, "user_id": 4553309, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c5517d1e4c6e16084e1b8155365e03d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shihab Shahriar Khan", "link": "https://stackoverflow.com/users/4553309/shihab-shahriar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 47099673, "answer_count": 1, "score": 2, "last_activity_date": 1509727805, "creation_date": 1509552202, "last_edit_date": 1509634868, "question_id": 47058978, "link": "https://stackoverflow.com/questions/47058978/g-optimization-o2-flag-fixes-a-broken-code-where-o3-breaks-it-again", "title": "g++ Optimization : O2 flag fixes a broken code where O3 breaks it again", "body": "<p>This code, for matching a string in NFA, which I think requires <code>O(N^2)</code> memory, predictably breaks when string size is <code>20,000</code>, then works with <code>-O2</code> compiled code, then breaks again for <code>-O3</code>. Compilation was done with <code>-std=c++14</code> enabled. In my opinion, the problem is stack-overflow.</p>\n\n<p>Input string was <code>\"ab\"</code> repeated <code>10,000</code> times, plus a <code>'c'</code> at end.The image below contains the NFA I'm trying to match.</p>\n\n<p>Specifically, my question is - </p>\n\n<p>1) What <code>-O2</code> optimization is behind this,(which I believe is impressive) fix?</p>\n\n<p>2) And what <code>-O3</code> optimization breaks it again?</p>\n\n<pre><code>struct State\n{\n    map&lt;char,vector&lt;State*&gt; &gt; transitions;\n    bool accepting = false;\n};\n\nbool match(State* state,string inp){\n    if(inp==\"\") return state-&gt;accepting;\n\n    for(auto s:state-&gt;transitions[inp[0]]) \n        if(match(s,inp.substr(1))) return true;\n\n    for(auto s:state-&gt;transitions['|']) //e-transitions\n        if(match(s,inp)) return true;\n\n    return false;\n}\n</code></pre>\n\n<p>In gcc documentation, it's said O3 has all optimizations of O2, plus some more. I couldn't \"get\" some of those extras or their relevance to this problem.And I want to emphasize, for what I've seen in similar questions, that I'm not looking for specific ways to fix this problem.</p>\n\n<p><a href=\"https://i.stack.imgur.com/tDFex.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tDFex.png\" alt=\"Th tested NFA\"></a></p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509551849, "post_id": 47058825, "comment_id": 81065003, "body": "This is what the <code>fixed</code> keyword is for, unfortunately it can&#39;t be used with arrays of user-defined types, even if they are blittable.  <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/unsafe-code-pointers/fixed-size-buffers\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/csharp/programming-guide/&hellip;</a>"}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509551903, "post_id": 47058825, "comment_id": 81065040, "body": "Yep, it will not allow me to read it... using CreateViewAccessor()"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509551993, "post_id": 47058825, "comment_id": 81065106, "body": "BTW the <code>FieldOffset</code> values you show are very wrong.  Right now, you&#39;re overlaying <code>Count</code> and <code>Index</code>, <code>union</code>-style, and then leaving far too much padding before the structure table starts."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509552028, "post_id": 47058825, "comment_id": 81065131, "body": "Beyond that, the C# type corresponding to C++ <code>char</code> is <code>sbyte</code> not <code>char</code>."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509552046, "post_id": 47058825, "comment_id": 81065147, "body": "@BenVoigt Thanks, I will review that."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509552212, "post_id": 47058825, "comment_id": 81065259, "body": "Perhaps <code>UnmanagedType.ByValArray</code> would work better than <code>LPStruct</code>, because the C++ side doesn&#39;t use any pointer."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509552618, "post_id": 47058825, "comment_id": 81065517, "body": "@BenVoigt unfortunately... I have tried everything I could find here, and everywhere else, I could not manage to do it...."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509557230, "post_id": 47058825, "comment_id": 81068424, "body": "I think this is a duplicate of <a href=\"https://stackoverflow.com/q/9418410/103167\">stackoverflow.com/q/9418410/103167</a>"}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509557388, "post_id": 47058825, "comment_id": 81068525, "body": "@BenVoigt Nope, that is different, plus the &quot;answer&quot; there does not actually work..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509557549, "post_id": 47058825, "comment_id": 81068614, "body": "How is it different?  That code has a structure which contains an array of another structure.  Your code has the same, plus needs to access it through <code>MemoryMappedFile</code>.  Since none of the tries you&#39;ve described look like the answer there, it&#39;s hard to know if you didn&#39;t make just a small mistake resulting in discarding the correct approach.  If you&#39;ve been able to reproduce the success of that approach (in passing to a C++ function) and then found it didn&#39;t work for MemoryMappedFile, that would be important to tell everyone trying to help."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509557699, "post_id": 47058825, "comment_id": 81068680, "body": "My code needs to work from managed C++ to C#, and it is a different scenario because when you try to use this in a MemoryMappedFile there are too many obstacles, for example you cannot even do &quot;public simple_struct[] h;&quot; like in the link you provided because you cannot read it..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509558100, "post_id": 47058825, "comment_id": 81068916, "body": "Show your complete attempt using the approach shown in that answer, and say exactly what went wrong.  You can&#39;t build up piecemeal, <code>public simple_struct[] h</code> will fail (because you aren&#39;t allowed to have references) but <code>[MarshalAs(UnmanagedType.ByValArray, SizeConst=256)] public simple_struct[] h</code> doesn&#39;t have references, the data is held in place."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509558360, "post_id": 47058825, "comment_id": 81069051, "body": "@BenVoigt Ok, I will post my complete attempt..."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509558806, "post_id": 47058825, "comment_id": 81069338, "body": "@BenVoigt Added code to see what I mean..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509560588, "post_id": 47058825, "comment_id": 81070415, "body": "related: <a href=\"https://stackoverflow.com/q/33649565/103167\">stackoverflow.com/q/33649565/103167</a>  So the problem is that <code>MarshalAs</code> affects the marshalled memory layout but not the actual memory layout in .NET.... and <code>MemoryMappedFile</code> view accessors use the actual memory layout.  I guess you can make a fixed byte buffer of sufficient size and use <code>Marshal.PtrToStructure</code> to move your substructures in and out, or use pointers with <code>unsafe</code> keyword.  Also, the offsets are still wrong, as is the length of the memory-mapping."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509560633, "post_id": 47058825, "comment_id": 81070444, "body": "It would have been so much better if &quot;<code>fixed</code>&quot; worked with blittable UDTs."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509562919, "post_id": 47058825, "comment_id": 81071638, "body": "@Ben Voigt unfortunately I do not have enough experience in C# to produce a solution...."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1509614958, "post_id": 47058825, "comment_id": 81091502, "body": "@BenVoigt I am still trying to find a fix, and I found that indeed you are correct, my FieldOffset are very wrong... I have no idea what are the correct values o.O"}], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509629624, "post_id": 47066053, "comment_id": 81101546, "body": "I will give this a try, as for now I need is Read."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509630026, "post_id": 47066053, "comment_id": 81101843, "body": "I am writing from C++ this structure into mappedmemory, and I cannot get any values with your code..."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509630143, "post_id": 47066053, "comment_id": 81101925, "body": "I add to STRUCT_2 like so: increment Count and Index, and then: write_data.Table[write_data.Index].Name = &quot;blablabla&quot; ... from c++ of course."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509632146, "post_id": 47066053, "comment_id": 81103368, "body": "Your solution is working, but something is going wrong because byte[] Name has data loss, basically I have 10 strings in Table and I get back only 2 and the rest: &quot;?????????&quot; ...."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509635853, "post_id": 47066053, "comment_id": 81106198, "body": "After tweaking the code to my needs, you have saved my DAY. Thank you for putting and end of 3 days in a row search and testing."}, {"owner": {"reputation": 99, "user_id": 2566538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb20b1de278ff007d00a5f87f566006?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/2566538/jake"}, "reply_to_user": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509664952, "post_id": 47066053, "comment_id": 81121856, "body": "Now i see your writing, if any problem is there then send me the code, i&#39;ll take care of that. I&#39;m glad you find a solution."}], "tags": [], "owner": {"reputation": 99, "user_id": 2566538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb20b1de278ff007d00a5f87f566006?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/2566538/jake"}, "is_accepted": true, "score": 1, "last_activity_date": 1509619316, "last_edit_date": 1509619316, "creation_date": 1509585199, "answer_id": 47066053, "question_id": 47058825, "link": "https://stackoverflow.com/questions/47058825/sharing-chained-structure-with-memory-mapped-file-from-c-to-c/47066053#47066053", "title": "Sharing chained structure with memory mapped file from C++ to C#", "body": "<p>Check this out. </p>\n\n<p>Tested on Visual Studio 2017, Windows 7 x64.</p>\n\n<p>Write and Read data works find.</p>\n\n<p>It's also good study for me. </p>\n\n<p>Take time on this.</p>\n\n<p>Godspeed!</p>\n\n<pre><code>    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]\n    public struct STRUCT_2\n    {\n        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 260)]\n        public  byte[]  Name;\n    }\n\n    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 4)]\n    public struct STRUCT_1\n    {\n        void Init()\n        {\n            this.Count = 0;\n            this.Index = 0;\n        }\n        public uint Count;\n        public uint Index;\n        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 10)] //! array size of 10.\n        public STRUCT_2 [] Table;\n    }\n\n    static void test3()\n    {\n\n        MemoryMappedFileSecurity CustomSecurity = new MemoryMappedFileSecurity();\n        CustomSecurity.AddAccessRule(new System.Security.AccessControl.AccessRule&lt;MemoryMappedFileRights&gt;\n            ( \"everyone\"\n            , MemoryMappedFileRights.FullControl\n            , System.Security.AccessControl.AccessControlType.Allow));\n\n        using (var mappedFile = MemoryMappedFile.CreateOrOpen(\"Local\\\\STRUCT_MAPPING\"\n                                                    , 10 * 1024\n                                                    , MemoryMappedFileAccess.ReadWriteExecute\n                                                    , MemoryMappedFileOptions.None\n                                                    , CustomSecurity\n                                                    , System.IO.HandleInheritability.Inheritable))\n        { \n            using (var accessor = mappedFile.CreateViewAccessor())\n            {\n                //! test setting.\n                int table_count = 5;\n\n                //! write data.\n                STRUCT_1 write_data;\n                write_data.Index = 1;\n                write_data.Count = 2;\n                write_data.Table = new STRUCT_2[10];\n\n                for (int i = 0; i &lt; 10; i++)\n                {\n                    write_data.Table[i].Name = new byte[260];\n                    write_data.Table[i].Name[0] = (byte)i;\n                }\n\n                //! ----------------------------\n                // Get size of struct\n                int size = Marshal.SizeOf(typeof(STRUCT_1));\n                byte[] data = new byte[size];\n\n                // Initialize unmanaged memory.\n                IntPtr p = Marshal.AllocHGlobal(size);\n\n                // Copy struct to unmanaged memory.\n                Marshal.StructureToPtr(write_data, p, false);\n\n                // Copy from unmanaged memory to byte array.\n                Marshal.Copy(p, data, 0, size);\n\n                // Write to memory mapped file.\n                accessor.WriteArray&lt;byte&gt;(0, data, 0, data.Length);\n\n                // Free unmanaged memory.\n                Marshal.FreeHGlobal(p);\n                p = IntPtr.Zero;\n\n                //! ----------------------------------------------\n                STRUCT_1 read_data;\n                size = Marshal.SizeOf(typeof(STRUCT_1));\n                data = new byte[size];\n\n                // Initialize unmanaged memory.\n                p = Marshal.AllocHGlobal(size);\n\n\n                // Read from memory mapped file.\n                accessor.ReadArray&lt;byte&gt;(0, data, 0, data.Length);\n\n                // Copy from byte array to unmanaged memory.\n                Marshal.Copy(data, 0, p, size);\n\n                // Copy unmanaged memory to struct.\n                read_data = (STRUCT_1)Marshal.PtrToStructure(p, typeof(STRUCT_1));\n\n                // Free unmanaged memory.\n                Marshal.FreeHGlobal(p);\n                p = IntPtr.Zero;\n\n\n                Console.WriteLine(read_data.Index);\n                Console.WriteLine(read_data.Count);\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 47066053, "answer_count": 1, "score": 2, "last_activity_date": 1509619316, "creation_date": 1509551681, "last_edit_date": 1509558779, "question_id": 47058825, "link": "https://stackoverflow.com/questions/47058825/sharing-chained-structure-with-memory-mapped-file-from-c-to-c", "title": "Sharing chained structure with memory mapped file from C++ to C#", "body": "<p>Following my other question <a href=\"https://stackoverflow.com/questions/47015984/sharing-memory-mapped-file-structure-between-c-and-c-sharp\">here</a>, I have been able to share string from C++ to C# thanks to this community.</p>\n\n<p>However, I need to go one level above and I need to share chained structures from C++ to C# using memory mapping.</p>\n\n<p>In an example scenario:</p>\n\n<p><strong>My C++ structures:</strong></p>\n\n<pre><code>struct STRUCT_2\n{\n    char Name[260];\n};\n\nstruct STRUCT_1\n{\n    void Init()\n    {\n        this-&gt;Count = 0;\n        this-&gt;Index = 0;\n    }\n\n    DWORD Count;\n    DWORD Index;\n    STRUCT_2 Table[256];\n};\n</code></pre>\n\n<p><strong>And me trying to \"transfer\" it to C#:</strong></p>\n\n<pre><code>[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi)]\npublic unsafe struct STRUCT_2\n{\n   [FieldOffset(0)]\n   public fixed char Name[260];\n}\n\n[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi)]\npublic unsafe struct STRUCT_1\n{\n   void Init()\n   {\n     this.Count = 0;\n     this.Index = 0;\n   }\n   [FieldOffset(0)]\n   public uint Count;\n   [FieldOffset(0)]\n   public uint Index;\n   [FieldOffset(100)]\n   [MarshalAs(UnmanagedType.LPStruct, SizeConst = 256)]\n   public STRUCT_2 Table;\n}\n</code></pre>\n\n<p>This works partially, basically I can see the values from <strong>Count</strong> and <strong>Index</strong>, however I cannot see values or even get them in <strong>STRUCT_2</strong>.</p>\n\n<p>I have tried to change:</p>\n\n<pre><code>public STRUCT_2[] Table;\n</code></pre>\n\n<p>But then the compiler tells me:</p>\n\n<p><em>\"The specified Type must be a struct containing no references.\"</em></p>\n\n<p>So my question would be, how can you read structures within structures using <em>MemoryMappedFile</em> in C# ?</p>\n\n<p>Advice, thoughts or examples are very welcomed.</p>\n\n<p><strong>Update:</strong></p>\n\n<p><strong>Complete testable code in C#:</strong></p>\n\n<pre><code>[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi)]\n        public unsafe struct STRUCT_2\n        {\n            [FieldOffset(0)]\n            public fixed byte Name[260];\n            // Fix thanks to Ben Voigt\n        }\n\n        [StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi)]\n        public unsafe struct STRUCT_1\n        {\n            void Init()\n            {\n                this.Count = 0;\n                this.Index = 0;\n            }\n            [FieldOffset(0)]\n            public uint Count;\n            [FieldOffset(0)]\n            public uint Index;\n            [FieldOffset(100)]\n            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 256)]\n            public STRUCT_2[] Table;\n        }\n\n        static void Main(string[] args)\n        {\n            MemoryMappedFileSecurity CustomSecurity = new MemoryMappedFileSecurity();\n            CustomSecurity.AddAccessRule(new System.Security.AccessControl.AccessRule&lt;MemoryMappedFileRights&gt;(\"everyone\", MemoryMappedFileRights.FullControl, System.Security.AccessControl.AccessControlType.Allow));\n\n            var mappedFile = MemoryMappedFile.CreateOrOpen(\"Local\\\\STRUCT_MAPPING\", 1024, MemoryMappedFileAccess.ReadWriteExecute, MemoryMappedFileOptions.None, CustomSecurity, System.IO.HandleInheritability.Inheritable);\n\n            using (var accessor = mappedFile.CreateViewAccessor())\n            {\n                STRUCT_1 data;\n\n                accessor.Read&lt;STRUCT_1&gt;(0, out data); // ERROR !\n                //The specified Type must be a struct containing no references.\n\n                Console.WriteLine(data.Count);\n                Console.WriteLine(data.Index);\n            }\n        }\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 844, "user_id": 7659, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c8bfd87b3ffb5deea9019ff5a5c5760?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7659/aaron"}, "edited": false, "score": 0, "creation_date": 1509551974, "post_id": 47058725, "comment_id": 81065090, "body": "Please describe the current failing behavior."}, {"owner": {"reputation": 9, "user_id": 7221271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f09eae91a613754ff15f290117ba629?s=128&d=identicon&r=PG&f=1", "display_name": "JE3", "link": "https://stackoverflow.com/users/7221271/je3"}, "reply_to_user": {"reputation": 844, "user_id": 7659, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c8bfd87b3ffb5deea9019ff5a5c5760?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7659/aaron"}, "edited": false, "score": 0, "creation_date": 1509552604, "post_id": 47058725, "comment_id": 81065509, "body": "its giving me an error message saying that i need a primary expression before the parenthesis"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509555499, "post_id": 47058725, "comment_id": 81067328, "body": "and on what line is that error"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1509555531, "post_id": 47058725, "comment_id": 81067354, "body": "What are the loops for?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1509555541, "post_id": 47058725, "comment_id": 81067362, "body": "It seems that you have misunderstood how <code>for</code> loops (and loops in general) have to be written. Please look at: <a href=\"http://en.cppreference.com/w/cpp/language/for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/for</a> and <a href=\"http://en.cppreference.com/w/cpp/language/while\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/while</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1509556595, "post_id": 47060124, "comment_id": 81068052, "body": "Sadly, the first two loops are &quot;valid&quot; enough to compile. Maybe it&#39;s worth to mention that statements like <code>for (;;) {&#47;* infinite loop *&#47;}</code> are valid. And used (with precautions)."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1509556409, "last_edit_date": 1509556409, "creation_date": 1509556068, "answer_id": 47060124, "question_id": 47058725, "link": "https://stackoverflow.com/questions/47058725/why-isnt-my-for-loop-for-my-leap-year-program-working/47060124#47060124", "title": "Why Isn&#39;t my for loop for my leap year program working?", "body": "<p>These are your for-loops:</p>\n\n<pre><code>for(month&gt;1; month&lt;12;)\nfor(year % 100 == 0;year % 400 == 0;)\nfor(year &gt;0;)\n</code></pre>\n\n<h1>None of those look like normal for-loops.</h1>\n\n<hr>\n\n<p>A normal for-loop has 3 separate parts:</p>\n\n<pre><code>for([init]; [test]; [mod]) { [body] }\n</code></pre>\n\n<p>Those 3 parts are:</p>\n\n<ul>\n<li><code>[init]</code> is an Initialization expression, such as <code>i = 0</code><br></li>\n<li><code>[test]</code> is a predicate to decide if the loop continues, such as <code>i &lt; 11</code><br></li>\n<li><code>[mod]</code> is a modifying expression to update the loop each time, such as <code>++i</code><br></li>\n</ul>\n\n<p>Your for-loops only have 1 or 2 parts, and they are not <em>initializer / predicate / modifier</em>.</p>\n\n<p><strong><em>Example</em></strong></p>\n\n<pre><code>for(i = 0; i &lt; 10; ++i) { printf(\"Count is %d\\n\", i); }\n</code></pre>\n\n<p>Resulting in</p>\n\n<pre><code>Count is 0\nCount is 1\nCount is 2\nCount is 3\nCount is 4\n[...]\nCount is 9\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7221271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f09eae91a613754ff15f290117ba629?s=128&d=identicon&r=PG&f=1", "display_name": "JE3", "link": "https://stackoverflow.com/users/7221271/je3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1509556409, "creation_date": 1509551391, "last_edit_date": 1509555142, "question_id": 47058725, "link": "https://stackoverflow.com/questions/47058725/why-isnt-my-for-loop-for-my-leap-year-program-working", "title": "Why Isn&#39;t my for loop for my leap year program working?", "body": "<p>Our assignment is to make a for loop program and while loop program out of our switch statement program, so I just need to know why my for loop program isn't running and if you want to check my while too, that would be great. </p>\n\n<p>while loop:</p>\n\n<pre><code>/* \n* File:   main.cpp\n* Author: Jorge Elias\n*\n* Created on October 22, 2017, 11:53 PM\n*/\n\n#include&lt;cstdlib&gt;\n#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;iomanip&gt;\nusing namespace std;\n\n/*\n * \n */\n int main( ) {\n     //Assigning the Integers\n     int month,days,year;\n     //Asking User for inputs\n     cout&lt;&lt;\"Please enter the Year: \";cin&gt;&gt;year;\n     cout&lt;&lt;\"Please enter the month (1-12): \";cin&gt;&gt;month;\n     //Switch statement to determine how many days there are in a month\n     switch(month) {\n         case 1:\n         case 3:\n         case 4:\n         case 5:\n         case 6:\n         case 7:\n         case 8:\n         case 10:\n         case 12:\n            cout&lt;&lt;\"31 days\"&lt;&lt;endl;\n            break;            \n    case 9:\n    case 11:\n        cout&lt;&lt;\"30 days\"&lt;&lt;endl;\n        break;\n while(month&lt;0){\n        cout&lt;&lt;\"INVALID INPUT! Please enter month number between 1-12\"&lt;&lt;endl;\n        break;\n        }\n\n//Determine if the Year inputed by the User is a Leap Year or not\n       case 2:\n\n       while(year&gt;0){\n       if(year % 100 == 0 &amp;&amp; year % 400 == 0)\n       {\n           cout&lt;&lt;\"This is a leap year, 29 days\"&lt;&lt;endl;\n       }\n           else if( year % 100 !=0 &amp;&amp; year % 4 == 0) \n           {\n               cout&lt;&lt;\"This is a leap year, 29 days\"&lt;&lt;endl;\n           }\n           else\n               cout&lt;&lt;\"there are 28 days\";\n       break;\n}\n}           \nreturn 0;\n }\n</code></pre>\n\n<p>for loop:\n          * \n     * File:   main.cpp\n     * Author: Jorge Elias\n     *\n     * Created on October 22, 2017, 11:53 PM\n     */</p>\n\n<pre><code> #include&lt;cstdlib&gt;\n #include&lt;iostream&gt;\n #include&lt;string&gt;\n #include&lt;iomanip&gt;\n using namespace std;\n\n /*\n  * \n  */\nint main( ) {\n    //Assigning the Integers\n    int month,days,year;\n    //Asking User for inputs\n    cout&lt;&lt;\"Please enter the Year: \";cin&gt;&gt;year;\n    cout&lt;&lt;\"Please enter the month (1-12): \";cin&gt;&gt;month;\n    //Switch statement to determine how many days there are in a month\n    for(month&gt;1; month&lt;12;){\n        switch(month) {\n        case 1:\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 10:\n        case 12:\n            cout&lt;&lt;\"31 days\"&lt;&lt;endl;\n        break;\n        case 9:\n        case 11:\n            cout&lt;&lt;\"30 days\"&lt;&lt;endl;\n        break;\n        for(month&lt;1;month&gt;12;){\n            cout&lt;&lt;\"INVALID INPUT! Please enter month number between 1-12\"&lt;&lt;endl;\n            break;\n        }\n        //Determine if the Year inputed by the User is a Leap Year or not\n        case 2:\n        for(year % 100 == 0;year % 400 == 0;)\n        {\n            cout&lt;&lt;\"This is a leap year, 29 days\"&lt;&lt;endl;\n            for( year % 100 !=0; year % 4 == 0;) \n            {\n               cout&lt;&lt;\"This is a leap year, 29 days\"&lt;&lt;endl;\n            }\n            for(year &gt;0;)\n            {\n                cout&lt;&lt;\"there are 28 days\";\n                break;\n          }\n       }\n    }     \n    }\n    return 0;\n   }\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtstylesheets"], "comments": [{"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "edited": false, "score": 0, "creation_date": 1509551873, "post_id": 47058662, "comment_id": 81065019, "body": "You mean like this ? <a href=\"http://doc.qt.io/qt-4.8/qt-widgets-stylesheet-example.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qt-widgets-stylesheet-example.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6793328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/940910b3c9205df889e39965d8bde9a5?s=128&d=identicon&r=PG&f=1", "display_name": "mep", "link": "https://stackoverflow.com/users/6793328/mep"}, "edited": false, "score": 0, "creation_date": 1509612075, "post_id": 47069878, "comment_id": 81089756, "body": "Ok, thanks. Well I have to use the object names, so unfortunately no option. So subclassing seems to be the only option. Actually wanted to prevent that, but I think it will work"}], "tags": [], "owner": {"reputation": 181, "user_id": 7845592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmQcC.jpg?s=128&g=1", "display_name": "bunto1", "link": "https://stackoverflow.com/users/7845592/bunto1"}, "is_accepted": false, "score": 0, "last_activity_date": 1509608023, "creation_date": 1509608023, "answer_id": 47069878, "question_id": 47058662, "link": "https://stackoverflow.com/questions/47058662/qt-how-to-change-stylesheet-of-the-widgetcontents-widget-of-every-scrollarea-in/47069878#47069878", "title": "Qt How to change stylesheet of the widgetContents-widget of every scrollarea in mainWindow?", "body": "<p>If you don't use the widget's object names somewhere else, you could set a common object name for all of them:</p>\n\n<pre><code>auto* content = new QWidget();\ncontent-&gt;setObjectName(\"scrollAreaWidget\");\nauto* scrollArea = new QScrollArea();\nscrollArea-&gt;setWidget(content);\n</code></pre>\n\n<p>And then address them from the qss like this:</p>\n\n<pre><code>QWidget#scrollAreaWidget\n{\n    background-color: white;\n}\n</code></pre>\n\n<hr>\n\n<p>If that is no option, you can try subclassing <code>QWidget</code> and apply the style for your new class. I haven't tried this approach, but <a href=\"https://stackoverflow.com/questions/38958873/a-simple-subclass-of-qwidget-doesnt-work-as-a-qwidget\">it seems</a>, you might face some difficulties there.</p>\n"}], "owner": {"reputation": 151, "user_id": 6793328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/940910b3c9205df889e39965d8bde9a5?s=128&d=identicon&r=PG&f=1", "display_name": "mep", "link": "https://stackoverflow.com/users/6793328/mep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509608023, "creation_date": 1509551198, "question_id": 47058662, "link": "https://stackoverflow.com/questions/47058662/qt-how-to-change-stylesheet-of-the-widgetcontents-widget-of-every-scrollarea-in", "title": "Qt How to change stylesheet of the widgetContents-widget of every scrollarea in mainWindow?", "body": "<p>In Qt I can not just style the QScrollArea (I only want to set the background color), I have to style the widgetContents-widget of every scrollarea like:</p>\n\n<pre><code>// qss code\nQScrollArea #scrollAreaWidgetContents_1, #scrollAreaWidgetContents_2, ...{\n    background-color: MYCOLOR;\n}\n</code></pre>\n\n<p>Question: How do I have to set up the stylesheet of mainWindow, that the widgetContents-widget of every scrollarea changes its background color without calling them all manually like in the example? Thanks for answers!</p>\n"}, {"tags": ["c++", "qt", "opengl", "qapplication", "qopenglfunctions"], "comments": [{"owner": {"reputation": 581, "user_id": 4262466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XhG84-oBmnI/AAAAAAAAAAI/AAAAAAAAAEo/GjZMY1zwcTY/photo.jpg?sz=128", "display_name": "ComradeJoecool", "link": "https://stackoverflow.com/users/4262466/comradejoecool"}, "edited": false, "score": 0, "creation_date": 1510327239, "post_id": 47058621, "comment_id": 81402065, "body": "I see now that QApplication actually inherits from QGuiApplication, so maybe QGuiApplicaitonPrivate::init() is called, still the globalShareContext  appears to not be initialized because it returns null"}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 4262466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XhG84-oBmnI/AAAAAAAAAAI/AAAAAAAAAEo/GjZMY1zwcTY/photo.jpg?sz=128", "display_name": "ComradeJoecool", "link": "https://stackoverflow.com/users/4262466/comradejoecool"}, "edited": false, "score": 0, "creation_date": 1509633549, "post_id": 47060698, "comment_id": 81104440, "body": "thanks, for the response, will try this when I get a chance"}], "tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1509558060, "creation_date": 1509558060, "answer_id": 47060698, "question_id": 47058621, "link": "https://stackoverflow.com/questions/47058621/qopenglwidget-with-qapplication/47060698#47060698", "title": "QOpenGLWidget with QApplication?", "body": "<p>I am doing a little guess work here.</p>\n\n<p>Probably your OpenGL is defaulting to ANGLE.\nAnd your previous application OpenGL calls are platform specific OpenGL API.</p>\n\n<p>try setting below attribute to your <code>QApplication</code> object.</p>\n\n<pre><code>appObject-&gt;setAttribute(Qt::AA_UseDesktopOpenGL, true);\n</code></pre>\n\n<p>then try calling</p>\n\n<pre><code>QOpenGLWidget::makeCurrent();\n</code></pre>\n\n<p>If things are still not working, configure your QT libraries for desktop OpenGL.</p>\n\n<pre><code>configure -opengl desktop\n</code></pre>\n\n<p>the below link gives you some information on Qt approach to OpenGL.\n<a href=\"http://doc.qt.io/qt-5/windows-requirements.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/windows-requirements.html</a></p>\n\n<p>Put in comments, if this is not helping you, will delete the answer.</p>\n"}], "owner": {"reputation": 581, "user_id": 4262466, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XhG84-oBmnI/AAAAAAAAAAI/AAAAAAAAAEo/GjZMY1zwcTY/photo.jpg?sz=128", "display_name": "ComradeJoecool", "link": "https://stackoverflow.com/users/4262466/comradejoecool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 850, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1509558060, "creation_date": 1509551066, "question_id": 47058621, "link": "https://stackoverflow.com/questions/47058621/qopenglwidget-with-qapplication", "title": "QOpenGLWidget with QApplication?", "body": "<p>We have a QWidget based application that was previously using a QWindow for OpenGL rendering. To fit that window in our application we had to use </p>\n\n<pre><code>QWidget QWidget::createWindowContainer(QWindow);\n</code></pre>\n\n<p>Previously we only used external to Qt OpenGL libraries for rendering.</p>\n\n<p>We have a desire to switch from using QWindow to some kind of QWidget for compatibility with touch gestures, and generally better overall compatibility with the rest of our application. The latest recommended OpenGL compatible QWidget seems to be QOpenGLWidget, so we are trying to use that.</p>\n\n<p><code>glContext</code> is an OpenGLContext that we manage ourselves.</p>\n\n<p>The problem now is that QOpenGLWidget is not a QSurface, so I cannot call</p>\n\n<pre><code>glContext-&gt;makeCurrent(this);\n</code></pre>\n\n<p>to make the context current on my custom QOpenGLWidget like we could before with our custom QWindow and our own OpenGLContext.</p>\n\n<p>If I try to use <code>QOpenGLWidget::makeCurrent();</code> then this uses the wrong context and tries to do stuff with some magical QT handled context or something I don't understand.</p>\n\n<p>The result is that after creating our OpenGLContext when we try to call </p>\n\n<pre><code>glFunctions = glContext-&gt;versionFunctions&lt;QOpenGLFunctions_3_3_Core&gt;();\nif(!glFunctions-&gt;initializeOpenGLFunctions())\n  printf(\"Could not initialize OpenGL functions.\");\n</code></pre>\n\n<p>It always fails to initialize the OpenGL functions.</p>\n\n<p>I have been reading over all the other resources I can find on the subject and came across this older Stack Overflow question that was similar:\n<a href=\"https://stackoverflow.com/questions/33635001/qopenglwidget-with-shared-opengl-context\">QOpenGLWidget with shared OpenGL context?</a></p>\n\n<p>The answer to that question did not solve my issue because we are using QApplication, not QGuiApplication as this is a QWidget based application.\n<code>QGuiApplicationPrivate::init()</code> is never called and the <code>QOpenGLContext::globalShareContext()</code> returns a null pointer since it is not initialized.</p>\n\n<p>Unfortunately I cannot wait for <code>QOpenGLWidget::initializeGL()</code> to be called to initialize the QT managed <code>OpenGLContext</code> since we already have lots of OpenGL resources over various classes that <em>attempt</em> to get initialized before that.</p>\n\n<p>Has anyone else come across this same problem?</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c++", "gcc", "segmentation-fault", "freebsd", "cppcms"], "comments": [{"owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1509958749, "post_id": 47058580, "comment_id": 81215768, "body": "Try running your binaries in gdb might give you some clues. Which freeBSD version are you on. Maybe you are using the wrong C++ library. Try playing with setting the c++ library to the one installed by your gcc."}, {"owner": {"reputation": 41, "user_id": 2568147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f9118d331d3c91d9193e8200b25368?s=128&d=identicon&r=PG", "display_name": "Igor Mroz", "link": "https://stackoverflow.com/users/2568147/igor-mroz"}, "reply_to_user": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1510090605, "post_id": 47058580, "comment_id": 81285502, "body": "I tried but it looks like it fail on built libcppcms. And I can&#39;t read any useful info from gdb."}, {"owner": {"reputation": 41, "user_id": 2568147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f9118d331d3c91d9193e8200b25368?s=128&d=identicon&r=PG", "display_name": "Igor Mroz", "link": "https://stackoverflow.com/users/2568147/igor-mroz"}, "reply_to_user": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1512157774, "post_id": 47058580, "comment_id": 82159502, "body": "I edited question."}, {"owner": {"reputation": 41, "user_id": 2568147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f9118d331d3c91d9193e8200b25368?s=128&d=identicon&r=PG", "display_name": "Igor Mroz", "link": "https://stackoverflow.com/users/2568147/igor-mroz"}, "reply_to_user": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1512244992, "post_id": 47058580, "comment_id": 82182217, "body": "And it looks like GCC links library with libc++ (ldd points to libc++), but I don&#39;t know why. Should it link with libstdc++, especially if i put &quot;-std=c++11&quot; param?"}], "owner": {"reputation": 41, "user_id": 2568147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f9118d331d3c91d9193e8200b25368?s=128&d=identicon&r=PG", "display_name": "Igor Mroz", "link": "https://stackoverflow.com/users/2568147/igor-mroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512158109, "creation_date": 1509550981, "last_edit_date": 1512158109, "question_id": 47058580, "link": "https://stackoverflow.com/questions/47058580/segmentation-fault-of-cppcms-application-under-freebsd", "title": "Segmentation fault of CppCMS application under FreeBSD", "body": "<p>I tried to build webpage based on CppCMS. It compiles and works under Gentoo (GCC). But I have problems when trying to build application under FreeBSD (account on hosting provider). Default compiler is Clang.</p>\n\n<p>I downloaded CppCMS package and exported few variables:</p>\n\n<pre><code>export CC=gcc48\nexport CXX=g++48\nexport LD_LIBRARY_PATH=/usr/local/lib/gcc48\n</code></pre>\n\n<p>Then as usual:</p>\n\n<pre><code>cmake -DCMAKE_INSTALL_PREFIX=/home/mrozigor/libs ..\nmake\n</code></pre>\n\n<p>And at this moment something is probably wrong, because it fails on all tests (<code>make test</code>) with segmentation fault. But I tried to build my application and used command:</p>\n\n<pre><code>PATH=$HOME/libs/bin:$PATH CPATH=$HOME/libs/include:$CPATH LIBRARY_PATH=$HOME/libs/lib:$LIBRARY_PATH ./build.sh\n</code></pre>\n\n<p>and it build it. But when trying to exec it (<code>LD_LIBRARY_PATH=$HOME/libs/lib app</code>) it also fails with SEGFAULT.</p>\n\n<p>What is also interesting when i tried to execute command <code>ldd libcppcms.so</code> in CppCMS build directory it fails with <code>ldd: libcppcms.so: Shared object \"libcppcms.so\" not found, required by \"ldd\"</code>, but when trying same command in lib install directory then it points to proper objects.</p>\n\n<p>Is this a problem with linking some libraries? Or maybe some env variables points to some Clang dependencies etc.?</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Tried with options:\n    cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=/home/mrozigor/libs -DCMAKE_C_COMPILER=gcc49 -DCMAKE_CXX_COMPILER=g++49 -DCMAKE_LIBRARY_PATH=/usr/local/lib/gcc49 ..\n    LD_LIBRARY_PATH=/usr/local/lib/gcc49 make\n    LD_LIBRARY_PATH=/usr/local/lib/gcc49 </p>\n\n<p>Still SEGFAULTs with given backtrace, based on dump file:</p>\n\n<pre><code>#0  0x0000000000000000 in ?? ()\n#1  0x0000000802d3fc49 in __cxxabiv1::__dynamic_cast (src_ptr=0x80300f3c0 &lt;(anonymous namespace)::ctype_c&gt;, src_type=0x802ff35d0 &lt;typeinfo for std::locale::facet&gt;, dst_type=0x802ff3340 &lt;typeinfo for std::ctype&lt;char&gt;&gt;, src2dst=0) at /wrkdirs/usr/ports/lang/gcc/work/gcc-4.9.4/libstdc++-v3/libsupc++/dyncast.cc:60\n#2  0x0000000802d76477 in std::has_facet&lt;std::ctype&lt;char&gt; &gt; (__loc=...) at /wrkdirs/usr/ports/lang/gcc/work/.build/x86_64-portbld-freebsd10.3/libstdc++-v3/include/bits/locale_classes.tcc:110\n#3  0x0000000802d67658 in std::basic_ios&lt;char, std::char_traits&lt;char&gt; &gt;::_M_cache_locale (this=this@entry=0x606448 &lt;std::cout@@GLIBCXX_3.4+8&gt;, __loc=...) at /wrkdirs/usr/ports/lang/gcc/work/.build/x86_64-portbld-freebsd10.3/libstdc++-v3/include/bits/basic_ios.tcc:159\n#4  0x0000000802d67824 in std::basic_ios&lt;char, std::char_traits&lt;char&gt; &gt;::init (this=this@entry=0x606448 &lt;std::cout@@GLIBCXX_3.4+8&gt;, __sb=0x80300d7c0 &lt;__gnu_internal::buf_cout_sync&gt;) at /wrkdirs/usr/ports/lang/gcc/work/.build/x86_64-portbld-freebsd10.3/libstdc++-v3/include/bits/basic_ios.tcc:132\n#5  0x0000000802d56d51 in std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_ostream (__sb=&lt;optimized out&gt;, this=&lt;optimized out&gt;, __in_chrg=&lt;optimized out&gt;, __vtt_parm=&lt;optimized out&gt;) at /wrkdirs/usr/ports/lang/gcc/work/.build/x86_64-portbld-freebsd10.3/libstdc++-v3/include/ostream:85\n#6  std::ios_base::Init::Init (this=&lt;optimized out&gt;) at /wrkdirs/usr/ports/lang/gcc/work/gcc-4.9.4/libstdc++-v3/src/c++98/ios_init.cc:91\n#7  0x000000080112c941 in __static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535) at /usr/local/lib/gcc49/include/c++/iostream:74\n#8  0x000000080112c98c in _GLOBAL__sub_I_posix_time.cpp(void) () at /home/mrozigor/src/cppcms/booster/lib/ptime/src/posix_time.cpp:101\n#9  0x000000080060ab77 in ?? () from /libexec/ld-elf.so.1\n#10 0x000000080060a0ee in ?? () from /libexec/ld-elf.so.1\n#11 0x0000000800608439 in ?? () from /libexec/ld-elf.so.1\n#12 0x0000000000000000 in ?? ()\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1509551187, "post_id": 47058530, "comment_id": 81064537, "body": "Why do you assume that the C code needs the C++ STL? It makes much more sense to assume that the C++ function needs the C++ STL."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1509551522, "post_id": 47058530, "comment_id": 81064791, "body": "@nwp hi. what I wanted to say is the C++ function that the C file calls need stl. But my question is does this option rly mean the gcc compile the C code with stl?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1509551627, "post_id": 47058530, "comment_id": 81064863, "body": "<code>main.o</code> isn&#39;t C code. You&#39;re linking, not compiling."}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509551615, "post_id": 47058633, "comment_id": 81064858, "body": "Thnx. I thought the stl is already compiled into the object file. how come are they still necessary while linking?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1509551811, "post_id": 47058633, "comment_id": 81064968, "body": "Much of the std:: library is &quot;compiled into the object file&quot; as you described (since they are largely template header files), but these header files in turn invoke functions that are in the std lib.  Hence, there&#39;s stuff to link. (e.g. &quot;new and delete&quot;)."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1509552000, "post_id": 47058633, "comment_id": 81065112, "body": "@selbie alright. Seems I learnt something new. Thnx."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1509551123, "creation_date": 1509551123, "answer_id": 47058633, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable/47058633#47058633", "title": "how do I link a C++ object file to a C executable?", "body": "<p>the C++ object you linked with needs the C++ library.</p>\n\n<p>If you're linking with the C driver (ex: <code>gcc</code>), you need to add linkage to C++ library because of this C++ object, not because of the C object. C driver isn't aware of C++.</p>\n\n<p>Had you linked with the C++ driver (ex: <code>g++</code>), the C++ library is set by default (you don't need to add it to the link options)</p>\n\n<p>Note that at this point all objects are compiled, the phase is the <em>link</em> phase.</p>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509552075, "post_id": 47058676, "comment_id": 81065165, "body": "Hey. I cannot compile it as cpp file. Cause actually the main.c calls other c libs. If I compile main.c with g++ I get over thousands errors..."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509553661, "post_id": 47058676, "comment_id": 81066191, "body": "I didn&#39;t say compile the .c file with the c++ compiler, I&#39;m saying have all generated .o files linked by invoking: <code>g++ -o main main.o get_config.o</code>. In this case, there&#39;s nothing to &quot;compile&quot; and the C++ compiler will in turn just invoke the linker with the correct parameters."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509556084, "post_id": 47058676, "comment_id": 81067713, "body": "Hi. sorry it was my mistake, I wanted to say it is at the linking stage I have a dynamic c lib to link with the main. Would it work?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509557060, "post_id": 47058676, "comment_id": 81068329, "body": "Most likely. Linking is independent of the programming language.  It&#39;s just the the compiler just invokes the linker for you with the correct flags and parameters. So I was suggesting if your Makefile will <i>compile</i> everything into a .o using the correct compiler, then you can can link all your .o files and get the correct C++ libs passed to the linker by using the c++ compiler."}, {"owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509558808, "post_id": 47058676, "comment_id": 81069340, "body": "Thnx. I was not very aware with the linking process. I thought it is language dependent.  But if things are as you state, what are the differences between g++ linker and gcc linker?  Do they actually both call ld but just with different default parameters?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "edited": false, "score": 0, "creation_date": 1509566175, "post_id": 47058676, "comment_id": 81073420, "body": "There is no &quot;g++ linker&quot; or &quot;gcc linker&quot;.  There&#39;s just <code>ld</code> (the linker) which combines all the <code>.o</code> files and all the additional libraries into a single executable with <code>main</code> as your entry point.  When you invoke <code>gcc</code> or <code>g++</code>, it launches a child process for <code>ld</code> and passes all the appropriate arguments for a C or C++ program including the list of additional libraries needed for C and C++.  It&#39;s just that C++ also needs all the C libs.  That&#39;s why the above should work."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1509551235, "creation_date": 1509551235, "answer_id": 47058676, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable/47058676#47058676", "title": "how do I link a C++ object file to a C executable?", "body": "<p>Most likely, you just need to use the C++ compiler to initiate the final link. By doing that, all the correct linkage parameters will get passed to the linker.</p>\n\n<pre><code>main: main.o get_config.o\n    ${CROSS}${CXX} $^ -o $@ ${LDFLAGS}\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 8543542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0735a717fbbd536b75d4a2ccfa0d5d15?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/8543542/j-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "closed_date": 1509551452, "answer_count": 2, "score": 0, "last_activity_date": 1509553507, "creation_date": 1509550852, "last_edit_date": 1509553507, "question_id": 47058530, "link": "https://stackoverflow.com/questions/47058530/how-do-i-link-a-c-object-file-to-a-c-executable", "closed_reason": "Duplicate", "title": "how do I link a C++ object file to a C executable?", "body": "<p>I am trying to call a C++ function from a C file. \nSo I declared the function as extern \"C\" and declared it in C file as well.\nCreated a object file from the cpp file let's call it cpp_object.o, then created a object file for the main.c.</p>\n\n<p>It is not that obvious that I can use g++ to link them. No, the main calls some c libs so I cannot link them with g++. So I have to link them with gcc.\nI tried the followings:</p>\n\n<pre><code>main: main.o cpp_object.o\n    ${CROSS}${CC} $^ -o $@ ${LDFLAGS}\n</code></pre>\n\n<p>It shows error that the object file cannot find the C++ stdlib. I did not know what happened. Googled it tried the following:</p>\n\n<pre><code>main: main.o get_config.o\n    ${CROSS}${CC} $^ -o $@ ${LDFLAGS}  -lstdc++\n</code></pre>\n\n<p>Then it worked!? Does it mean the gcc compile the code with the c++ stdlib? But I am bit confused, how do we need to compile a C code with c++ stl?</p>\n\n<p>So is this actually did what I wanted? Or I missed something?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1509550699, "post_id": 47058452, "comment_id": 81064222, "body": "Please tag with the appropriate language.  Is this C++?"}, {"owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1509551218, "post_id": 47058452, "comment_id": 81064559, "body": "yes,it is c++. I am a freshman, forgive me."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509551872, "post_id": 47058452, "comment_id": 81065017, "body": "I don&#39;t know your library but could this: <code>win.wait_for_button();</code> be your issue? Try to move this line right after the <code>for</code> loop. I guess this function has a default waiting time."}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "edited": false, "score": 0, "creation_date": 1509552023, "post_id": 47058452, "comment_id": 81065125, "body": "Is this from Stroustrup&#39;s book?"}, {"owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509552495, "post_id": 47058452, "comment_id": 81065440, "body": "wait for button is not the issue, I have tried it."}, {"owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509552542, "post_id": 47058452, "comment_id": 81065473, "body": "This is from the drill in the book c++"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509555191, "post_id": 47059419, "comment_id": 81067133, "body": "Thans a lot ! It&#39;s helpful!"}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "reply_to_user": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509555287, "post_id": 47059419, "comment_id": 81067188, "body": "You are welcome. That github link is certainly helpful, I hope you will read and understand the code there, not copy ;)"}, {"owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509555548, "post_id": 47059419, "comment_id": 81067367, "body": "Haha,actually,I have done this drill using a vector,which involves pointers introduced in the latter book.But I want to figure out a simple way. You know, simple is always better."}, {"owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "reply_to_user": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "edited": false, "score": 0, "creation_date": 1509555666, "post_id": 47059419, "comment_id": 81067449, "body": "vector is actually simple. using stl is better. and you need to store the rectangles somewhere... that is what the vector is doing"}], "tags": [], "owner": {"reputation": 538, "user_id": 7252065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee425f022d98bd19a1a2268c12d3f33?s=128&d=identicon&r=PG&f=1", "display_name": "anotherone", "link": "https://stackoverflow.com/users/7252065/anotherone"}, "is_accepted": true, "score": 1, "last_activity_date": 1509553671, "creation_date": 1509553671, "answer_id": 47059419, "question_id": 47058452, "link": "https://stackoverflow.com/questions/47058452/how-to-print-a-series-of-rectangles/47059419#47059419", "title": "How to print a series of rectangles", "body": "<p>If you are solving the drill for Chapter 13 of Stroustrup's Programming -- Principles and Practice Using C++ (Second Edition), in which he asks to plot a set of rectangles in a window, then your code is not reproducing your intent. You are plotting only 1 red rectangle, a number of times. You need a container, a vector for example, to store those rectangles and then use it to show them all together. The full code can be found  here  <a href=\"https://github.com/bewuethr/stroustrup_ppp/blob/master/chapter13/chapter13_drill.cpp\" rel=\"nofollow noreferrer\">link</a> (Credit: Benjamin Wuethrich, he actually solved all the exercises and drills of that book, have a look). Hopefully this will help you. Cheers!</p>\n"}], "owner": {"reputation": 159, "user_id": 8661316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03dcc852d873918eb7ab4f3f8e2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng Lu", "link": "https://stackoverflow.com/users/8661316/cheng-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 47059419, "answer_count": 1, "score": 1, "last_activity_date": 1509556186, "creation_date": 1509550603, "last_edit_date": 1509556186, "question_id": 47058452, "link": "https://stackoverflow.com/questions/47058452/how-to-print-a-series-of-rectangles", "title": "How to print a series of rectangles", "body": "<p>I want to print out a series of rectangles, but the rectangles just show one by one, and nothing show up in the end. I don't know why. I just want all these rectangles show up together.</p>\n\n<pre><code>#include \"Graph.h\" // get access to our graphics library facilities\n#include \"Simple_window.h\" \n\nint main()\n{\n  Graph_lib::Point tl{ 100, 100 }; \n\n  Simple_window win{ tl, 1000, 800, \"Simple Window\" }; \n\n  int x_size = 800;\n  int y_size = 800;\n\n\n  for (int x = 0, y = 0; x &lt; x_size&amp;&amp;y &lt; y_size; x += x_grid, y += y_grid)\n  { \n    Graph_lib::Rectangle r(Graph_lib::Point(x, y), x_grid, y_grid); \n    r.set_fill_color(Graph_lib::Color::red); \n    win.attach(r); \n    win.wait_for_button(); \n  } \n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "types", "compilation", "solaris"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509552271, "post_id": 47058431, "comment_id": 81065298, "body": "Is it the last member of the structure? This seems like a flexible array member at a glance."}, {"owner": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509552621, "post_id": 47058431, "comment_id": 81065524, "body": "yes, it is a last member of a structure. Is it not allowed in Solaris C++ compiler?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1509552849, "post_id": 47058431, "comment_id": 81065669, "body": "It is not allowed in C++ as a rule. GCC implements it as an extension. Making your code actually work will take a bit more effort than simply turning <code>tmp</code> into a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "edited": false, "score": 0, "creation_date": 1509716984, "post_id": 47078657, "comment_id": 81144258, "body": "Will -std=c++14 option allow the code compile itself without errors or will it only allow linking with the shared libraries compiled with C++14 standard? My current compiler is very old, so I wonder if upgrading to the latest one will solve my problem."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "edited": false, "score": 0, "creation_date": 1509816936, "post_id": 47078657, "comment_id": 81176927, "body": "@angie  Updating to the latest compiler <i>should</i> solve this issue.  Without trying, it&#39;s hard to say if it will work on the code you&#39;re trying to compile.  GCC has a lot of extensions that tend to get used without the developers realizing they&#39;re using non-portable extensions.  You just found one example, and there may be more lurking in your code."}, {"owner": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "edited": false, "score": 0, "creation_date": 1510866593, "post_id": 47078657, "comment_id": 81630389, "body": "Update: I did upgrade to Studio 12.6 Sun C++ 5.15 SunOS_sparc 2017/05/30 but I still see the same error. When I try to use option -std=c99 compiler does not recognize it, while it is listed in -flags list. It says that it is ld option. Even when I use -xlang=c99 (which is accepted as compiler option) this error still exists."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "edited": false, "score": 0, "creation_date": 1510913329, "post_id": 47078657, "comment_id": 81647908, "body": "@angie <code>-std=c99</code> looks like a C option, not a C++ one.  You need <code>-std=c++14</code>."}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1509635572, "creation_date": 1509635572, "answer_id": 47078657, "question_id": 47058431, "link": "https://stackoverflow.com/questions/47058431/error-incomplete-type-unsigned-char-when-compiling-with-sun-c-on-solar/47078657#47078657", "title": "&quot;Error: incomplete type &quot;unsigned char[]&quot; &quot; when compiling with SUN C++ on Solaris machine", "body": "<p>Given the code </p>\n\n<pre><code>struct\n{\n    ...,\n    char tmp[];\n};\n</code></pre>\n\n<p><code>tmp</code> is a <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a>.</p>\n\n<p>That is a C language construct that was <a href=\"https://stackoverflow.com/questions/45193984/size-of-a-struct-with-flexible-array-member\">not valid in C++ until C++14</a>, but was supported as an extension by GCC.</p>\n\n<p>The <a href=\"https://docs.oracle.com/cd/E77782_01/html/E77789/bkana.html#OSSCPgnaof\" rel=\"nofollow noreferrer\">latest version of Solaris Studio does support C++14 via the <code>-std=c++14</code> option.</a></p>\n\n<p>Note that a zero-length array, such as</p>\n\n<pre><code>struct\n{\n    ...,\n    char tmp[ 0 ];\n};\n</code></pre>\n\n<p>is <em>not</em> the same as a flexible array member, and the <code>-features=zla</code> option may not be supported by your version of the Studio compiler.  It's <a href=\"https://docs.oracle.com/cd/E18659_01/html/821-1383/bkana.html#bkapy\" rel=\"nofollow noreferrer\">not supported by Solaris Studio 12.2, for example.</a></p>\n"}], "owner": {"reputation": 43, "user_id": 8868510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b30edb1f7ac6df72180278948481c4?s=128&d=identicon&r=PG&f=1", "display_name": "angie", "link": "https://stackoverflow.com/users/8868510/angie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509635572, "creation_date": 1509550516, "last_edit_date": 1509561487, "question_id": 47058431, "link": "https://stackoverflow.com/questions/47058431/error-incomplete-type-unsigned-char-when-compiling-with-sun-c-on-solar", "title": "&quot;Error: incomplete type &quot;unsigned char[]&quot; &quot; when compiling with SUN C++ on Solaris machine", "body": "<p>I have a definition of <code>unsigned char tmp[];</code> as a member of a structure.  </p>\n\n<p>When compiling with g++4 on Linux RedHat it does not complain. \nBut when compiling with Sun C++ on Solaris 5.10 machine I get an error:</p>\n\n<blockquote>\n  <p>Error: In this declaration \"<code>tmp</code>\" is of an incomplete type \"<code>unsigned char[]</code>\".</p>\n</blockquote>\n\n<p>Are there any compile options for Sun C++ to make it compile? </p>\n\n<p>I've read about the incomplete types, should I change it to a pointer? That would be problematic because I have many occurrences of the same kind of definitions.\nWhy is the difference in compilation results?</p>\n"}, {"tags": ["c++", "c++11", "clion"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 8, "creation_date": 1509549832, "post_id": 47058212, "comment_id": 81063657, "body": "There is no default return type. Provide one yourself. And of course, if you really want to know what the language thinks, run your compiler on it and check the warning."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 1, "creation_date": 1509549835, "post_id": 47058212, "comment_id": 81063660, "body": "It&#39;s not the return statement, it&#39;s that you forgot to write <code>int</code> before the function definition"}, {"owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 1, "creation_date": 1509549942, "post_id": 47058212, "comment_id": 81063717, "body": "This is a good question. I wonder why the downvotes."}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1509549948, "post_id": 47058212, "comment_id": 81063721, "body": "Just add <code>int</code> on line 13 before <code>func()</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1509549984, "post_id": 47058212, "comment_id": 81063746, "body": "It&#39;s most likely a CLion artifact; there is no default return type in C++. Intellisenses often get confused by broken code. The actual error is that you didn&#39;t provide a return type on the definition."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1509550002, "post_id": 47058212, "comment_id": 81063767, "body": "There are no &quot;default return types&quot; (aka implicit <code>int</code>) in C++."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 3, "creation_date": 1509550033, "post_id": 47058212, "comment_id": 81063790, "body": "@Elazar Because it&#39;s not useful."}, {"owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1509550129, "post_id": 47058212, "comment_id": 81063861, "body": "@BaummitAugen what? This is a very useful question. C has default return type, CLion claims that C++ does too. Puzzling indeed."}, {"owner": {"reputation": 686, "user_id": 1977152, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yHhiK.png?s=128&g=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/1977152/zaid-khan"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1509550131, "post_id": 47058212, "comment_id": 81063864, "body": "Thanks @molbdnilo. I wonder whether it&#39;s because the reason of it being an error it&#39;s messing up with intellisense?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 1, "creation_date": 1509550231, "post_id": 47058212, "comment_id": 81063923, "body": "@Elazar The not useful part, IMO, is assuming a generic IDE knows more about what the language does or does not allow than simply asking the letter of the language, i.e. cppreference or the Standard or any other of various available resources."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1509550313, "post_id": 47058212, "comment_id": 81063981, "body": "<i>&quot;EDIT: It compiles and runs fine.&quot;</i> Now configure your compiler to expect valid Standard C++, turn on all errors and warnings, and see what happens."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 0, "creation_date": 1509550319, "post_id": 47058212, "comment_id": 81063985, "body": "@Elazar So what&#39;s useful about that question? Finding out why some IDE emits the wrong diagnostic for some obvious mistake?"}, {"owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1509550433, "post_id": 47058212, "comment_id": 81064049, "body": "@BaummitAugen The answer &quot;this diagnostics is wrong&quot; is very good answer to this good question. What&#39;s obvious to you is (obviously) not obvious to the OP, which seems to be more knowledgeable than many C++ users that might read this question."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 1, "creation_date": 1509550571, "post_id": 47058212, "comment_id": 81064137, "body": "@Elazar - RE: <i>&quot; C has default return type&quot;</i> that&#39;s not true. It wasn&#39;t true since 1999."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "edited": false, "score": 4, "creation_date": 1509550597, "post_id": 47058212, "comment_id": 81064152, "body": "@Elazar It&#39;s obvious to anyone who ever read any part of any C++ book or tutorial. Writing C++ based on guessing and then being surprised about the result is no constructive, as is this question."}, {"owner": {"reputation": 686, "user_id": 1977152, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yHhiK.png?s=128&g=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/1977152/zaid-khan"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1509550973, "post_id": 47058212, "comment_id": 81064391, "body": "@BaummitAugen I was being specific about CLion there(and that&#39;s why I tagged it). And I knew it wasn&#39;t nice(for a lack of better word) to not put a return type. Just that the warning was a bit weird."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1509551155, "post_id": 47058212, "comment_id": 81064516, "body": "Might be stating the obvious here, but just for fun trivia <code>0</code> is a <code>int</code> literal, so in theory if you were to set the return type to <code>auto</code>, an <code>int</code> would always be returned."}, {"owner": {"reputation": 686, "user_id": 1977152, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yHhiK.png?s=128&g=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/1977152/zaid-khan"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1509551276, "post_id": 47058212, "comment_id": 81064600, "body": "@underscore_d the edit was to indicate that the intellisense was wrong about it being an error. That&#39;s all!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1509551435, "post_id": 47058212, "comment_id": 81064717, "body": "@Bateman No, it <b>is</b> an error, at least if you&#39;re using a compiler in a conforming mode, as I said."}, {"owner": {"reputation": 686, "user_id": 1977152, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yHhiK.png?s=128&g=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/1977152/zaid-khan"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1509551516, "post_id": 47058212, "comment_id": 81064785, "body": "@underscore_d I meant the &quot;Return type of function &#39;func&#39; differs...&quot; part."}], "answers": [{"tags": [], "owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "is_accepted": true, "score": 3, "last_activity_date": 1509550851, "creation_date": 1509550851, "answer_id": 47058529, "question_id": 47058212, "link": "https://stackoverflow.com/questions/47058212/is-the-default-return-type-in-c11-long/47058529#47058529", "title": "Is the default return type in C++11 long?", "body": "<p>There is no default return type in standard C++.</p>\n\n<p>The IDE / compiler might be reusing the the same code that it is using for analyzing C89 definitions. I have no idea why is it <code>long</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1509551696, "post_id": 47058638, "comment_id": 81064900, "body": "So, what was your answer to the question of whether C++11 has a default return type?"}, {"owner": {"reputation": 135, "user_id": 2460685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59876863fc6012870512e40f050f7a9a?s=128&d=identicon&r=PG", "display_name": "DingusKhan", "link": "https://stackoverflow.com/users/2460685/dinguskhan"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1509557151, "post_id": 47058638, "comment_id": 81068382, "body": "It was more intended as an extension of the other answer, since they&#39;d see both."}], "tags": [], "owner": {"reputation": 135, "user_id": 2460685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59876863fc6012870512e40f050f7a9a?s=128&d=identicon&r=PG", "display_name": "DingusKhan", "link": "https://stackoverflow.com/users/2460685/dinguskhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1509551128, "creation_date": 1509551128, "answer_id": 47058638, "question_id": 47058212, "link": "https://stackoverflow.com/questions/47058212/is-the-default-return-type-in-c11-long/47058638#47058638", "title": "Is the default return type in C++11 long?", "body": "<p>This seems as though it's a compiler or IDE setting. The return type is set to int, and your value is within the range of a standard int, so it should implicitly convert. I suspect it is the IDE, not the compiler, since you've stated that it does compile and run successfully. Check your settings, perhaps reset them to default, and try to write the same code in a new project/file. </p>\n"}], "owner": {"reputation": 686, "user_id": 1977152, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yHhiK.png?s=128&g=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/1977152/zaid-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "closed_date": 1509551301, "accepted_answer_id": 47058529, "answer_count": 2, "score": 1, "last_activity_date": 1509551757, "creation_date": 1509549768, "last_edit_date": 1509551757, "question_id": 47058212, "link": "https://stackoverflow.com/questions/47058212/is-the-default-return-type-in-c11-long", "closed_reason": "Duplicate", "title": "Is the default return type in C++11 long?", "body": "<p>I'm using <strong>CLion 2017.2.3</strong> and there is an error by its Intellisense saying <code>Return type of function 'func' differs...</code> (<strong>Image attached below</strong>). Isn't the default return type in <code>C++</code> <code>int</code>? And why is the IDE showing it as an error? Is it a bug?</p>\n\n<p><strong>EDIT: It compiles and runs fine(without any flags, doesn't with them)</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/DKVio.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DKVio.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1509549613, "post_id": 47058147, "comment_id": 81063492, "body": "Scoping rules: member functions shadow global functions, they&#39;re not treated like overloading."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1509549618, "post_id": 47058147, "comment_id": 81063495, "body": "Research the subject of <i>name hiding</i>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1509549649, "post_id": 47058147, "comment_id": 81063518, "body": "It&#39;s a scope thing - local names hide names in outer scopes."}], "owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1509550283, "answer_count": 0, "score": 0, "last_activity_date": 1509562655, "creation_date": 1509549541, "last_edit_date": 1509562655, "question_id": 47058147, "link": "https://stackoverflow.com/questions/47058147/why-does-global-template-function-not-visible-inside-member-function", "closed_reason": "Duplicate", "title": "Why does global template function not visible inside member function?", "body": "<p>The following code <a href=\"https://wandbox.org/permlink/au91bEN6WcAGY3Ds\" rel=\"nofollow noreferrer\">doesn't compile</a>:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid f(T t) { }\n\nstruct S {\n    void f(int, double) {}\n    void f() { f(42); }\n};\n</code></pre>\n\n<p>Error is:</p>\n\n<blockquote>\n<pre><code>no matching member function for call to 'f'\n</code></pre>\n</blockquote>\n\n<p>If I explicitly add <code>::</code> before <code>f(42)</code> code <a href=\"https://wandbox.org/permlink/FTzOIW4mHvvdFjg4\" rel=\"nofollow noreferrer\">will be well compiled</a>. \nWhy does global template function with the same name as member function (but different number of parameters) not visible inside class namespace?</p>\n"}, {"tags": ["c++", "android-ndk", "android-gradle-plugin", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 665, "user_id": 1001566, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/06440d1938ee1c1e918c5584a4444038?s=128&d=identicon&r=PG", "display_name": "Paulo Coutinho", "link": "https://stackoverflow.com/users/1001566/paulo-coutinho"}, "edited": false, "score": 0, "creation_date": 1525166975, "post_id": 47058141, "comment_id": 87245259, "body": "Same problem. You find anything?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 14668910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tazqHzPimKo/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmeBGvPFkqJ6oxhxRqoaAmhadaZ1A/s96-c/photo.jpg?sz=128", "display_name": "Simin Badri", "link": "https://stackoverflow.com/users/14668910/simin-badri"}, "is_accepted": false, "score": 1, "last_activity_date": 1605813986, "last_edit_date": 1605813986, "creation_date": 1605805806, "answer_id": 64916591, "question_id": 47058141, "link": "https://stackoverflow.com/questions/47058141/how-do-i-link-to-sdl2-in-android-studio-from-a-native-activity-based-project/64916591#64916591", "title": "How do I link to SDL2 in Android Studio from a native activity based project?", "body": "<p>Too late but it may be useful for others. I've added <code>libSDL2.so</code> to my android project recently. Since I had this issue and found the solution, I post my solution here for others. I did the following step:</p>\n<ol>\n<li>Copy <code>libSDL2.so</code> into <code>app/jniLibs/armeabi-v7a/libSDL2.so</code></li>\n<li>Add the following lines to <code>src/main/CmakeLists.txt</code>:</li>\n</ol>\n<pre><code>add_library(\n    SDL2\n    SHARED\n    IMPORTED\n)\n\nset_target_properties(\n    SDL2\n    PROPERTIES IMPORTED_LOCATION\n    ${CMAKE_SOURCE_DIR}/../../jniLibs/armeabi-v7a/libSDL2.so\n)\n\ntarget_link_libraries(\n    your-lib PUBLIC\n    SDL2\n)\n</code></pre>\n"}], "owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1605813986, "creation_date": 1509549514, "question_id": 47058141, "link": "https://stackoverflow.com/questions/47058141/how-do-i-link-to-sdl2-in-android-studio-from-a-native-activity-based-project", "title": "How do I link to SDL2 in Android Studio from a native activity based project?", "body": "<p>How do I setup Gradle in Android Studio to find <code>libSDL2.so</code> (or any other .so library)?</p>\n\n<ul>\n<li>I've placed the <code>.so</code> files in <code>app/src/main/jniLibs</code> under their corresponding target directory (i.e <code>/armeabi/libSDL2.so</code>, <code>/armeabi-v7a/libSDL2.so</code> etc).</li>\n<li>I've added <code>SDL2</code> to the <code>CMakeFiles.txt</code> by the other libraries included in NDK.</li>\n</ul>\n\n<p>When building the linker cannot find <code>-lSDL2</code> <code>(...\\ld: error: cannot find -lSDL2)</code></p>\n\n<p>I suppose there is something I need to add to the gradle script, but I cannot find out what and where.</p>\n\n<p><em>Notes:</em>\nThe project is a pure NativeActivity project.\nAndroid Studio is version 3.0</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "stdasync", "std-future"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1509549536, "post_id": 47058099, "comment_id": 81063436, "body": "GCC 4.6 is very old by now, and its support for C++11 is quite lacking. If you can you should upgrade."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1509549825, "post_id": 47058099, "comment_id": 81063650, "body": "If I had to guess, I&#39;d say the count being 2 happens because your compiler is not doing copy elision for the <code>sp</code> argument to <code>fun</code>. What if you don&#39;t construct <code>sp1</code> explicitly, but as a temporary in the async call?"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1509549967, "post_id": 47058099, "comment_id": 81063732, "body": "taking a guess here, but what happens if you change the parameter value to be an rvalue reference (<code>&amp;&amp;</code>) instead?"}, {"owner": {"reputation": 175, "user_id": 3325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gbSP.jpg?s=128&g=1", "display_name": "Quokka", "link": "https://stackoverflow.com/users/3325279/quokka"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1509550036, "post_id": 47058099, "comment_id": 81063792, "body": "@Darhuuk I just tried that, and the <code>use_count()</code> is still  <code>== 2</code> in <code>fun()</code>."}, {"owner": {"reputation": 175, "user_id": 3325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gbSP.jpg?s=128&g=1", "display_name": "Quokka", "link": "https://stackoverflow.com/users/3325279/quokka"}, "reply_to_user": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 1, "creation_date": 1509550102, "post_id": 47058099, "comment_id": 81063847, "body": "@Default I did try that, but it won&#39;t even compile on my platform (ARM gcc 4.6.3).  It does work on coliru though (<a href=\"http://coliru.stacked-crooked.com/a/0fd3dc23236c8a4c\" rel=\"nofollow noreferrer\">link</a>)."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1509551138, "post_id": 47058099, "comment_id": 81064508, "body": "Copy elision, references and whatnot isn&#39;t relevant here, the old <code>shared_ptr</code> should no longer hold a reference after the move, regardless of how the moved to value is later dealt with"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 3325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gbSP.jpg?s=128&g=1", "display_name": "Quokka", "link": "https://stackoverflow.com/users/3325279/quokka"}, "edited": false, "score": 0, "creation_date": 1509553999, "post_id": 47058583, "comment_id": 81066407, "body": "That doesn&#39;t compile on my platform (ARM gcc 4.6.3).  It can be seen online on Wandbox.  Wandbox doesn&#39;t have gcc 4.6.3, but it has gcc 4.6.4, and it doesn&#39;t compile on that version either: (<a href=\"https://wandbox.org/permlink/hpUJIRPSyrePHLqo\" rel=\"nofollow noreferrer\">link</a>).    However, it does compile on gcc 4.7.3:  (<a href=\"https://wandbox.org/permlink/EiTlxiGvrreWk4tj\" rel=\"nofollow noreferrer\">link</a>)  I&#39;m trying to avoid upgrading my compiler, but if I want this behavior it&#39;s looking more and more like that&#39;s what I&#39;m going to have to do..."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1509552678, "last_edit_date": 1509552678, "creation_date": 1509550993, "answer_id": 47058583, "question_id": 47058099, "link": "https://stackoverflow.com/questions/47058099/use-count-of-shared-ptr-moved-into-a-stdasync-in-gcc-4-6-3/47058583#47058583", "title": "use_count() of shared_ptr moved into a std::async in gcc 4.6.3", "body": "<p>Although <code>std::async</code> makes copies of all arguments, when invoking the function it perfect-forwards the arguments to the callable, so that the argument value category is preserved.</p>\n\n<p>The arguments to <code>std::async</code> are only required to be <a href=\"http://en.cppreference.com/w/cpp/concept/MoveConstructible\" rel=\"nofollow noreferrer\">MoveConstructible</a>, otherwise it would not be possible to pass <code>std::unique_ptr</code> into <code>std::async</code>.</p>\n\n<p>In other words, the correct behaviour is <code>sp.use_count() == 1</code> and this is what I observe with an old g++-5.3.1.</p>\n\n<hr>\n\n<p>Check whether the following code compiles with the compiler where you observe <code>sp.use_count() == 2</code>:</p>\n\n<pre><code>using namespace std;\n\nvoid fun(unique_ptr&lt;int&gt; p) {\n    cout &lt;&lt; \"fun \" &lt;&lt; *p &lt;&lt; '\\n';\n}\n\nint main() {\n    unique_ptr&lt;int&gt; sp(new int{1});\n\n    auto fut = async(\n        launch::async,\n        fun,\n        move(sp)\n    );\n\n    fut.get();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": false, "score": 1, "last_activity_date": 1509558830, "last_edit_date": 1509558830, "creation_date": 1509555563, "answer_id": 47059967, "question_id": 47058099, "link": "https://stackoverflow.com/questions/47058099/use-count-of-shared-ptr-moved-into-a-stdasync-in-gcc-4-6-3/47059967#47059967", "title": "use_count() of shared_ptr moved into a std::async in gcc 4.6.3", "body": "<p>a possible workaround could be</p>\n\n<pre><code>void fun(shared_ptr&lt;int&gt;* sp)\n{\n    unique_ptr&lt;shared_ptr&lt;int&gt;&gt; guard(sp);\n\n    cout &lt;&lt; \"fun: sp.use_count() == \" &lt;&lt; sp-&gt;use_count() &lt;&lt;\n        \" (in gcc 4.6.3, is there a way to make this 1?)\\n\";\n}\n\nint main()\n{\n    auto sp1 = make_shared&lt;int&gt;(5);\n\n    auto fut = async(\n        launch::async,\n        fun,\n        new shared_ptr&lt;int&gt;(move(sp1))\n    );\n}\n</code></pre>\n\n<p>that said, it would be interesting to see where gcc463 makes the extra copy in the original code; it seems like the temporary given by decay_copy in async() is not forwarded to fun()'s parameter as an rvalue as it should be. Can't you step in with your debugger to see what's going on ?</p>\n"}], "owner": {"reputation": 175, "user_id": 3325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gbSP.jpg?s=128&g=1", "display_name": "Quokka", "link": "https://stackoverflow.com/users/3325279/quokka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1509558830, "creation_date": 1509549407, "last_edit_date": 1509552225, "question_id": 47058099, "link": "https://stackoverflow.com/questions/47058099/use-count-of-shared-ptr-moved-into-a-stdasync-in-gcc-4-6-3", "title": "use_count() of shared_ptr moved into a std::async in gcc 4.6.3", "body": "<p>In the code below, I want the <code>use_count()</code> of the <code>shared_ptr</code> moved into the <code>std::async</code> to be <code>1</code>:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt; \n#include &lt;future&gt; \n\nusing namespace std;\n\nvoid fun(shared_ptr&lt;int&gt; sp)\n{\n    cout &lt;&lt; \"fun: sp.use_count() == \" &lt;&lt; sp.use_count() &lt;&lt;\n        \" (in gcc 4.6.3, is there a way to make this 1?)\\n\";\n}\n\nint main()\n{\n    auto sp1 = make_shared&lt;int&gt;(5);\n\n    auto fut = async(\n        launch::async,\n        fun,\n        move(sp1)\n    );\n}\n</code></pre>\n\n<hr>\n\n<p>My platform uses gcc 4.6.3, and the code above gives this output (<code>fun: sp.use_count() == 2</code>):</p>\n\n<pre><code>fun: sp.use_count() == 2 (in gcc 4.6.3, is there a way to make this 1?)\n</code></pre>\n\n<hr>\n\n<p>On <a href=\"http://coliru.stacked-crooked.com/a/ea395d50d0c05d60\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com</a>, I get the behavior that I want (<code>fun: sp.use_count() == 1</code>):</p>\n\n<pre><code>fun: sp.use_count() == 1 (in gcc 4.6.3, is there a way to make this 1?)\n</code></pre>\n\n<hr>\n\n<p>I'm not sure what compiler coliru is using, but I'm guessing it's newer than gcc 4.6.3.</p>\n\n<p>Is there some way, some workaround, to get the behavior I want, without having to upgrade my compiler from gcc 4.6.3?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "sdl", "sdl-mixer"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1509550466, "post_id": 47058047, "comment_id": 81064071, "body": "SDL audio streams were added in SDL 2.0.6. It appears you use older version, while your version of SDL2_mixer already depends on it."}, {"owner": {"reputation": 1, "user_id": 7620451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea78bbe91f850ee6c8223398b84e2eb5?s=128&d=identicon&r=PG&f=1", "display_name": "silentsleuth", "link": "https://stackoverflow.com/users/7620451/silentsleuth"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1509554423, "post_id": 47058047, "comment_id": 81066673, "body": "Oh okay, so either I need to update my version of SDL or use an older version of SDL2_mixer.  That actually makes sense.  I will try that tonight and see if it works."}, {"owner": {"reputation": 1, "user_id": 7620451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea78bbe91f850ee6c8223398b84e2eb5?s=128&d=identicon&r=PG&f=1", "display_name": "silentsleuth", "link": "https://stackoverflow.com/users/7620451/silentsleuth"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1509586491, "post_id": 47058047, "comment_id": 81080652, "body": "That worked instantly.  Thank you so much."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 15141819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221682c97b81857e7f2b78b69213c03e?s=128&d=identicon&r=PG&f=1", "display_name": "San Andreas", "link": "https://stackoverflow.com/users/15141819/san-andreas"}, "is_accepted": false, "score": 0, "last_activity_date": 1612413569, "last_edit_date": 1612413569, "creation_date": 1612406326, "answer_id": 66038617, "question_id": 47058047, "link": "https://stackoverflow.com/questions/47058047/sdl-audiostreamflush-could-not-be-located-in-the-dynamic-link-library-sdl2-mixer/66038617#66038617", "title": "SDL_AudioStreamFlush could not be located in the dynamic link library SDL2_mixer.dll", "body": "<p>I have the same problem when using <code>SDL_mixer</code> and <code>SDL_ttf</code>.</p>\n<p>When  I change the old <code>SDL2.dll</code> in my folder (I put them all: header files, library files, and binary files in one directory) with the newest one (the one that is in the lib/X86/SDL2.dll) it works.</p>\n"}], "owner": {"reputation": 1, "user_id": 7620451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea78bbe91f850ee6c8223398b84e2eb5?s=128&d=identicon&r=PG&f=1", "display_name": "silentsleuth", "link": "https://stackoverflow.com/users/7620451/silentsleuth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 779, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1612413569, "creation_date": 1509549257, "last_edit_date": 1509549451, "question_id": 47058047, "link": "https://stackoverflow.com/questions/47058047/sdl-audiostreamflush-could-not-be-located-in-the-dynamic-link-library-sdl2-mixer", "title": "SDL_AudioStreamFlush could not be located in the dynamic link library SDL2_mixer.dll", "body": "<p>I'm just trying to follow along with the c++ graphics tutorial from MakingGamesWithBen about SDL mixer, an audio system.  I got the development library from:\n<a href=\"https://www.libsdl.org/projects/SDL_mixer/\" rel=\"nofollow noreferrer\">SDL_Mixer Development Library Download</a>.</p>\n\n<p>It's the SDL2_mixer-devel-2.0.2-VC.zip folder under development libraries for Visual C++.  I've done all the same steps as what he is showing, though I've been using x64 instead of x86.  When I try running the project though, it gives me the error\n\"SDL_AudioStreamFlush could not be located in the dynamic link library [file path] SDL2_mixer.dll\".  I'm not using the function SDL_AudioStreamFlush in my code at all, which is what perplexes me about this.  I honestly don't have any clue how to fix this, and online documentation doesn't seem to help.  Any assistance would be much appreciated, because I have tried looking on sites for other similar questions, but nothing I can use.  Below should be a dropbox link to my entire solution.</p>\n\n<p><a href=\"https://www.dropbox.com/sh/0blrourluyjpsca/AACs4bHdZs83q_R8lSjFINIEa?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/sh/0blrourluyjpsca/AACs4bHdZs83q_R8lSjFINIEa?dl=0</a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1639, "user_id": 8571771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ZdpN9.jpg?s=128&g=1", "display_name": "ppianist", "link": "https://stackoverflow.com/users/8571771/ppianist"}, "edited": false, "score": 1, "creation_date": 1509548816, "post_id": 47057848, "comment_id": 81062981, "body": "Please add some code you tried."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1509548913, "post_id": 47057848, "comment_id": 81063041, "body": "Do you have <i>any</i> knowledge of how large the board can be? 10x10? 100x100? Is it too much to allocate the max size?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509549551, "post_id": 47057848, "comment_id": 81063446, "body": "So, what did you try?"}, {"owner": {"reputation": 11, "user_id": 7310518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4820251e02b534908403356af4c6b731?s=128&d=identicon&r=PG&f=1", "display_name": "Tarkan Gen&#231;", "link": "https://stackoverflow.com/users/7310518/tarkan-gen%c3%a7"}, "reply_to_user": {"reputation": 1639, "user_id": 8571771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ZdpN9.jpg?s=128&g=1", "display_name": "ppianist", "link": "https://stackoverflow.com/users/8571771/ppianist"}, "edited": false, "score": 0, "creation_date": 1509550433, "post_id": 47057848, "comment_id": 81064048, "body": "I can&#39;t try even. Because columnSize and rowSize is changeable .So what can I do? @Vlav"}], "answers": [{"comments": [{"owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1509549596, "post_id": 47057945, "comment_id": 81063473, "body": "Welcome to StackOverflow! While this code may answer the question, the answer may get downvoted for including only a code dump and no explanation. You should improve this answer by explaining how it works and why you did it this way. Please read <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a> and other guidelines in the help section for more info."}, {"owner": {"reputation": 11, "user_id": 7310518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4820251e02b534908403356af4c6b731?s=128&d=identicon&r=PG&f=1", "display_name": "Tarkan Gen&#231;", "link": "https://stackoverflow.com/users/7310518/tarkan-gen%c3%a7"}, "edited": false, "score": 0, "creation_date": 1509549777, "post_id": 47057945, "comment_id": 81063610, "body": "this is work but This solution doesn&#39;t accept spaces &#39; &#39; like an array element. So if I print this ,Spaces will not show on the screen.Only show *."}, {"owner": {"reputation": 74, "user_id": 3316098, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003589424757/picture?type=large", "display_name": "sycoi001", "link": "https://stackoverflow.com/users/3316098/sycoi001"}, "edited": false, "score": 0, "creation_date": 1509549809, "post_id": 47057945, "comment_id": 81063636, "body": "I&#39;m new so sorry for this inconvenience. Next time I will improve my answer. This question is so basic. Thank you!"}, {"owner": {"reputation": 74, "user_id": 3316098, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003589424757/picture?type=large", "display_name": "sycoi001", "link": "https://stackoverflow.com/users/3316098/sycoi001"}, "edited": false, "score": 0, "creation_date": 1509549947, "post_id": 47057945, "comment_id": 81063720, "body": "Demo code is loading integer array. Instead try to load string. Good luck!"}, {"owner": {"reputation": 11, "user_id": 7310518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4820251e02b534908403356af4c6b731?s=128&d=identicon&r=PG&f=1", "display_name": "Tarkan Gen&#231;", "link": "https://stackoverflow.com/users/7310518/tarkan-gen%c3%a7"}, "edited": false, "score": 0, "creation_date": 1509550453, "post_id": 47057945, "comment_id": 81064063, "body": "columnSize and rowSize is changeable .So what can I do?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1509552724, "post_id": 47057945, "comment_id": 81065582, "body": "You could optionally allocate the board as a single dimension array:  <code>int * a = new int[row1 * col1];</code>  This would guarantee that all board positions are in the same area."}], "tags": [], "owner": {"reputation": 74, "user_id": 3316098, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003589424757/picture?type=large", "display_name": "sycoi001", "link": "https://stackoverflow.com/users/3316098/sycoi001"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548969, "creation_date": 1509548969, "answer_id": 47057945, "question_id": 47057848, "link": "https://stackoverflow.com/questions/47057848/how-can-we-load-a-board-from-txt-file-into-a-two-dimensional-arraywithout-rowsi/47057945#47057945", "title": "How can we load a board from TXT file into a two dimensional array(without rowSize and columnSize)", "body": "<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n   ifstream fin;\n\n   fin.open (\"input1.txt\");\n\n   if ( !fin ) exit( 1 );\n\n   int row1, col1; // Sizes needed for array\n\n   fin &gt;&gt; row1 &gt;&gt; col1;\n\n   int **a = new int *[row1]; \n\n   for ( int i = 0; i &lt; row1; i++ ) \n   {\n      a[i] = new int[col1];\n   }\n\n   for ( int i = 0; i &lt; row1; i++ )\n   {\n      for ( int j = 0; j &lt; col1; j++ )\n      {\n         fin &gt;&gt; a[i][j];\n      }\n   }\n\n\n   // You do the same for the second array \n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7310518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4820251e02b534908403356af4c6b731?s=128&d=identicon&r=PG&f=1", "display_name": "Tarkan Gen&#231;", "link": "https://stackoverflow.com/users/7310518/tarkan-gen%c3%a7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1509551331, "creation_date": 1509548683, "last_edit_date": 1509551331, "question_id": 47057848, "link": "https://stackoverflow.com/questions/47057848/how-can-we-load-a-board-from-txt-file-into-a-two-dimensional-arraywithout-rowsi", "title": "How can we load a board from TXT file into a two dimensional array(without rowSize and columnSize)", "body": "<p>I have a txt file and there is a board like this =></p>\n\n<p>I want to use dynamic array( with using <code>new</code> keyword).But all the example in the internet with row and column size.But I don't know row and columSize.So I must do that without columnSize and rowSize.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1509548361, "post_id": 47057737, "comment_id": 81062692, "body": "&quot;Is it possible?&quot; No."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1509548386, "post_id": 47057737, "comment_id": 81062710, "body": "It&#39;s possible but beyond the scope of the language."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1509548409, "post_id": 47057737, "comment_id": 81062732, "body": "Do not use all UPPERCASE identifiers for compile time constants, it is antipattern."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1509548608, "post_id": 47057737, "comment_id": 81062849, "body": "Possible if you know the structure of the compiled binary and make your program to edit this structure. Pretty fragile."}, {"owner": {"reputation": 5973, "user_id": 848068, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d893b452ce68913eb1e622bfcd4d7dc0?s=128&d=identicon&r=PG", "display_name": "s4eed", "link": "https://stackoverflow.com/users/848068/s4eed"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1509548837, "post_id": 47057737, "comment_id": 81062999, "body": "@Slava Thanks. Updated :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1509549357, "post_id": 47057737, "comment_id": 81063331, "body": "@saeed this advise is not particularly for your example but for your habit, get rid of it if you do not want to meet hard to debug problems in the future."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1509550813, "post_id": 47057737, "comment_id": 81064292, "body": "<b>Why do you ask?</b> Please motivate your question.... What is the actual constant, and what is its purpose?"}, {"owner": {"reputation": 5973, "user_id": 848068, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d893b452ce68913eb1e622bfcd4d7dc0?s=128&d=identicon&r=PG", "display_name": "s4eed", "link": "https://stackoverflow.com/users/848068/s4eed"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1509551722, "post_id": 47057737, "comment_id": 81064915, "body": "@BasileStarynkevitch Question Motivated :)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1509553366, "post_id": 47057737, "comment_id": 81066004, "body": "BTW, tell more about the company for which you are writing your code. I surely will avoid buying it! 1. Your question shows a basic misunderstanding about compilation, processors and operating systems. 2. Your efforts are going into useless protection schemes, to the detriment of genuine software quality (which requires a lot of efforts)."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1509549982, "last_edit_date": 1509549982, "creation_date": 1509548478, "answer_id": 47057786, "question_id": 47057737, "link": "https://stackoverflow.com/questions/47057737/changing-a-number-defined-in-a-cc-program-without-compiling-the-source-again/47057786#47057786", "title": "Changing a number defined in a C++(C) program without compiling the source again", "body": "<p>No, the behaviour of changing a variable that is <code>const</code> is <em>undefined</em>. So you can't do this with standard C or C++.</p>\n\n<p>Your best bet is to resort to an inline assembly solution; but note that <code>UNIQUE_ID</code> might be compiled out altogether (neither C nor C++ are <em>reflective</em> languages). In order to increase the probability of <code>UNIQUE_ID</code> being retained, remove the <code>const</code> qualifier and possibly introduce <code>volatile</code>.</p>\n\n<p>Personally I'd pass <code>UNIQUE_ID</code> on the command line to your program.</p>\n\n<p>Starting point: <a href=\"https://msdn.microsoft.com/en-us/library/fabdxz08.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/fabdxz08.aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1509549867, "post_id": 47058149, "comment_id": 81063680, "body": "plus the constant might be compiled out altogether."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1509551084, "post_id": 47058149, "comment_id": 81064467, "body": "Not to encourage this sort of thing but if you change the line to <code>const volatile int unique_id = 112233</code> the program would load unique_id on each usage and prevent it from being optimized away. This sort of thing is common, if usually through pointers in embedded programming."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1509553203, "last_edit_date": 1509553203, "creation_date": 1509549545, "answer_id": 47058149, "question_id": 47057737, "link": "https://stackoverflow.com/questions/47057737/changing-a-number-defined-in-a-cc-program-without-compiling-the-source-again/47058149#47058149", "title": "Changing a number defined in a C++(C) program without compiling the source again", "body": "<p>In general, you cannot change anything without re-compiling.</p>\n\n<p>In practice and in very limited cases, you might patch your binary. This is mostly processor specific (and executable format specific and ABI specific) and depends less on your particular operating system version (e.g. if it works for Windows 9, it could work for Windows 10).</p>\n\n<p><sup>(However, I don't know and never used Windows; I'm only using Linux; you should adapt my answer to your operating system)</sup></p>\n\n<p>So in <em>some cases</em> you might reverse-engineer your binary executable. If you do have the C source code, you could ask your compiler to emit the assembler code (e.g. by compiling with <code>gcc -O -fverbose-asm -S</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>). Then you might disassemble your executable, and change, with a binary or hexadecimal editor, the machine code containing that constant.</p>\n\n<p>This won't always work, because the machine instruction (and its size) could depend on the magnitude (bit size) of your constant.</p>\n\n<p>To take a simple example, in C, for GCC 7, on Linux/x86-64, consider the following C file:</p>\n\n<pre><code> /// A, B, C are preprocessor symbols defined as integers\n int f(int x) { \n   if (x &gt; 0)\n     return A*x + B;\n   return C;\n }\n</code></pre>\n\n<p>If I compile that with <code>gcc -fverbose-asm -S -O -DA=12751 -DB=32 -DC=11 e.c</code> I'm getting:</p>\n\n<pre><code>    .type   f, @function\nf:\n.LFB0:\n    .cfi_startproc\n# e.c:3:   if (x &gt; 0)\n    testl   %edi, %edi  # x\n    jle .L3 #,\n# e.c:4:     return A * x + B;\n    imull   $12751, %edi, %edi  #, x, tmp90\n    leal    32(%rdi), %eax  #, &lt;retval&gt;\n    ret\n.L3:\n# e.c:5:   return C;\n    movl    $11, %eax   #, &lt;retval&gt;\n# e.c:6: }\n    ret\n    .cfi_endproc\n.LFE0:\n    .size   f, .-f\n</code></pre>\n\n<p>But if I do <code>gcc -S -O -fverbose-asm -DA=12753 -DB=32 -DC=10 e.c</code> I'm getting</p>\n\n<pre><code>    .type   f, @function\nf:\n.LFB0:\n    .cfi_startproc\n# e.c:3:   if (x &gt; 0)\n    testl   %edi, %edi  # x\n    jle .L3 #,\n# e.c:4:     return A * x + B;\n    imull   $12753, %edi, %edi  #, x, tmp90\n    leal    32(%rdi), %eax  #, &lt;retval&gt;\n    ret\n.L3:\n# e.c:5:   return C;\n    movl    $10, %eax   #, &lt;retval&gt;\n# e.c:6: }\n    ret\n</code></pre>\n\n<p>So indeed, in the above case I could patch the binary (I would need to find the <code>12751</code> and <code>11</code>  constants in machine code; it is doable but tedious in that case).</p>\n\n<hr>\n\n<p>Now, let's try with A being a small power of two, like 16, and C being 0, so\n<code>gcc -S -O -fverbose-asm -DA=16 -DB=32 -DC=0 e.c</code>:</p>\n\n<pre><code>f:\n.LFB0:\n    .cfi_startproc\n# e.c:4:     return A * x + B;\n    leal    2(%rdi), %eax   #, tmp90\n    sall    $4, %eax    #, tmp93\n    testl   %edi, %edi  # x\n    movl    $0, %edx    #, tmp92\n    cmovle  %edx, %eax  # tmp93,, tmp92, &lt;retval&gt;\n# e.c:6: }\n    ret\n</code></pre>\n\n<p>Because of compiler optimizations, the code changed significantly. It is not easy to patch.</p>\n\n<h2>Important notice</h2>\n\n<p>With enough effort, money and time (think of NSA-like abilities) a lot of things are possible.</p>\n\n<p>if your goal is to obfuscate some data in your binary (e.g. some password), you might encrypt it to make hackers' life harder (but don't be naive, the NSA will be able to get it). Remember the motto: there is <a href=\"https://en.wikipedia.org/wiki/No_Silver_Bullet\" rel=\"nofollow noreferrer\"><strong><em>No Silver Bullet</em></strong></a>; it looks that is your goal, but don't be too naive (BTW, the legal protections around your software, e.g. the license, matters even more; so you need a lawyer to write a good EULA).</p>\n\n<p>If your goal is on the contrary to adapt some performance-critical code, you could use <a href=\"https://en.wikipedia.org/wiki/Metaprogramming\" rel=\"nofollow noreferrer\">metaprogramming</a> and <a href=\"https://en.wikipedia.org/wiki/Partial_evaluation\" rel=\"nofollow noreferrer\">partial evaluation</a> techniques. A practice I like doing is generate <em>at runtime</em> some temporary C (or C++) code (better suited for your particular situation and data), compile that temporary C or C++ code as some <a href=\"https://en.wikipedia.org/wiki/Plug-in_(computing)\" rel=\"nofollow noreferrer\">plugin</a>, then <a href=\"https://en.wikipedia.org/wiki/Dynamic_loading\" rel=\"nofollow noreferrer\">dynamically load</a> that temporary plugin (using <a href=\"http://man7.org/linux/man-pages/man3/dlopen.3.html\" rel=\"nofollow noreferrer\"><code>dlopen</code></a> and <a href=\"http://man7.org/linux/man-pages/man3/dlsym.3.html\" rel=\"nofollow noreferrer\"><code>dlsym</code></a> on Linux; on Windows you'll need <code>LoadLibrary</code> but I leave you to understand the details and consequences). Instead of generating C or C++ code at runtime you could use some <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow noreferrer\">JIT compiling</a> library like <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow noreferrer\">libgccjit</a>. If you are fond of such techniques, consider instead using better programming languages (like Common Lisp with <a href=\"http://sbcl.org/\" rel=\"nofollow noreferrer\">SBCL</a>) if your management allows them.</p>\n\n<blockquote>\n  <p>But I don't want to compile my program 1000 times for 1000 customers</p>\n</blockquote>\n\n<p>That surprises me a lot. Compiling a simple (short) C file containing just constants is quick, and linking time is also quick. I would instead consider recompilation for each customer.</p>\n\n<p>BTW, I feel <em>you are incredibly naive</em>. The most important protection is not technical in your binary, it is a legal protection (and you need a good contract, so find and pay a good lawyer).</p>\n\n<p>Did you consider on the contrary to make your product free software? Many companies are doing that (and making money on something else that licenses, e.g. support).</p>\n\n<hr>\n\n<p>NB. there are lots of existing <a href=\"https://en.wikipedia.org/wiki/License_manager\" rel=\"nofollow noreferrer\">license managers</a>. Did you consider buying and using one? Notice also that corporations have large incentives to avoid cheating, and those willing to steal your software will be able to do that anyway. You'll sell more products by working on software quality, not by spending efforts on vain \"protection\" measures which are annoying your customers, increasing your <a href=\"https://en.wikipedia.org/wiki/Logistics\" rel=\"nofollow noreferrer\">logistics</a> and distribution and maintenance costs, and harden the debugging of customer-found bugs.</p>\n"}, {"tags": [], "owner": {"reputation": 10571, "user_id": 122687, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9b4e0447e8d049ba853fe368765f6f76?s=128&d=identicon&r=PG", "display_name": "Stefan Monov", "link": "https://stackoverflow.com/users/122687/stefan-monov"}, "is_accepted": false, "score": 3, "last_activity_date": 1509552149, "creation_date": 1509552149, "answer_id": 47058963, "question_id": 47057737, "link": "https://stackoverflow.com/questions/47057737/changing-a-number-defined-in-a-cc-program-without-compiling-the-source-again/47058963#47058963", "title": "Changing a number defined in a C++(C) program without compiling the source again", "body": "<p>Considering the motivation you added to the question, you could simply make the exe read the id from a .txt file, and ship a different .txt file with the exe for every customer.</p>\n\n<p>Or, equivalently, you could make a DLL (or the equivalent for your platform) that has a function returning the id, and only recompile the DLL for every customer.</p>\n"}], "owner": {"reputation": 5973, "user_id": 848068, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d893b452ce68913eb1e622bfcd4d7dc0?s=128&d=identicon&r=PG", "display_name": "s4eed", "link": "https://stackoverflow.com/users/848068/s4eed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 47058149, "answer_count": 3, "score": 1, "last_activity_date": 1509553203, "creation_date": 1509548324, "last_edit_date": 1509551704, "question_id": 47057737, "link": "https://stackoverflow.com/questions/47057737/changing-a-number-defined-in-a-cc-program-without-compiling-the-source-again", "title": "Changing a number defined in a C++(C) program without compiling the source again", "body": "<p>Suppose I have this simple program which prints a number:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint unique_id = 112233;\nint main()\n{\n    std::cout &lt;&lt; unique_id;\n    return 0;\n}\n</code></pre>\n\n<p>Then I compile it to something like <code>a.exe</code>. Now I want to create another application that opens <code>a.exe</code> and changes <code>unique_id</code> to something else. Is it possible?<br>\nI'm not going to pass a parameter to the program because of some restrictions.</p>\n\n<p>I want to use the <code>unique_id</code>, as its name implies, to uniquely identify where my program is running. But I don't want to compile my program 1000 times for 1000 customers. I know I can use Hard Disk Serial number, but in virtual machines, this serial number may be omitted. I know I can use CPU serial number, But I read in S.O posts that this serial number is deprecated. I know I can use MAC address too :), but that address can be changed easily. So I decided to put the unique ID in exe file itself.</p>\n"}, {"tags": ["c++", "opencv", "c++11"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1509548012, "post_id": 47057553, "comment_id": 81062482, "body": "It all depends on the math used internally by the scaling algorithm, but I&#39;d expect them to make it 2x. Each pixel from the input will spread out to cover more than one pixel in the output, so input 499 <i>won&#39;t</i> line up exactly with 999 on the output."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1509548105, "post_id": 47057553, "comment_id": 81062524, "body": "See <a href=\"http://alvyray.com/Memos/CG/Microsoft/6_pixel.pdf\" rel=\"nofollow noreferrer\">alvyray.com/Memos/CG/Microsoft/6_pixel.pdf</a>"}, {"owner": {"reputation": 429, "user_id": 4054516, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001038919666/picture?type=large", "display_name": "Gines Hidalgo", "link": "https://stackoverflow.com/users/4054516/gines-hidalgo"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1509550281, "post_id": 47057553, "comment_id": 81063948, "body": "@MarkRansom Thanks! That PDF and your answer explain it quite well! I cannot choose a comment as correct answer, otherwise I would."}], "owner": {"reputation": 429, "user_id": 4054516, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001038919666/picture?type=large", "display_name": "Gines Hidalgo", "link": "https://stackoverflow.com/users/4054516/gines-hidalgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 653, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1509548835, "creation_date": 1509547717, "question_id": 47057553, "link": "https://stackoverflow.com/questions/47057553/proper-scaling-scale-cvresize-cvwarpaffine-cvwarpperspective", "title": "Proper scaling scale - cv::resize, cv::warpAffine, cv::warpPerspective", "body": "<p>I always had this question, which you can apply either to <code>cv::resize</code>, <code>cv::warpAffine</code> or <code>cv::warpPerspective</code>.</p>\n\n<p>I have an image e.g. 500 x 500 (in C++). I wanna rescale to an image e.g. 1000 x 1000. If I use e.g. OpenCV, it would be something like:</p>\n\n<pre><code>const auto fx = scale;\nconst auto fy = scale;\ncv::resize(inputImage, outputImage, cv::Size(), fx, fy)\n</code></pre>\n\n<p>Now, the point is, what is the real value of scale? 2 or 999/499?</p>\n\n<p>Explanation, I want the last pixel on inputImage to go the the last pixel in outputImage, right? That mean pixel 499 to go to 999 (as C++ is 0-based), right? So then, the scale should be 999/499 = 2.002004008, or should just be 2?</p>\n\n<p>I had this question for months and I still could not figure out the solution, my tests just work with basically the same accuracy either way, but I'd like to know the ideal way though.</p>\n"}, {"tags": ["c++", "compiler-errors", "overloading", "template-templates"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1509547261, "post_id": 47057344, "comment_id": 81061978, "body": "Why not use 2017?"}, {"owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1509547614, "post_id": 47057344, "comment_id": 81062209, "body": "Don&#39;t have a choice, <b>must</b> use VC2010 :("}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1509547651, "post_id": 47057344, "comment_id": 81062231, "body": "VC chokes on the template definition itself, or is it the instantiation that causes problems?"}, {"owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "edited": false, "score": 0, "creation_date": 1509548609, "post_id": 47057344, "comment_id": 81062850, "body": "Template definition itself."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "edited": false, "score": 0, "creation_date": 1509549449, "post_id": 47057752, "comment_id": 81063386, "body": "I think the TemplArgA==TemplArgB case would not give an error until function instantiation in either case, isn&#39;t it? Anyway, it&#39;s not relevant for me."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "edited": false, "score": 0, "creation_date": 1509549651, "post_id": 47057752, "comment_id": 81063522, "body": "@thilo, no, in your original code (I mean, for a conforming compiler) you&#39;ll get an error as soon as the class template gets instantiated ( but, I&#39;m not sure to what extent such diagnostic is required standard-wise, I should check that ... )"}, {"owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "edited": false, "score": 0, "creation_date": 1509549861, "post_id": 47057752, "comment_id": 81063676, "body": "Compiles with the suggested workaround, nice idea.  But in the real code, I don&#39;t have just TemplArgA and TemplArgB, but 4 template template parameters (say TemplArgA to TemplArgD) -- I don&#39;t think I can apply the workaround then? :("}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "edited": false, "score": 0, "creation_date": 1509550674, "post_id": 47057752, "comment_id": 81064196, "body": "@thilo, as a side note, according to <a href=\"https://timsong-cpp.github.io/cppwp/temp.spec#temp.inst-2\" rel=\"nofollow noreferrer\">temp.inst/2</a>, I confirm that the ArgA==ArgB case is required to be diagnosed at class template instantiation for the original code."}], "tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": false, "score": 2, "last_activity_date": 1509550112, "last_edit_date": 1592644375, "creation_date": 1509548365, "answer_id": 47057752, "question_id": 47057344, "link": "https://stackoverflow.com/questions/47057344/error-overloading-function-with-different-template-template-parameters-with-same/47057752#47057752", "title": "Error overloading function with different template template parameters with same argument", "body": "<blockquote>\n<p>Don't have a choice, must use VC2010 :(</p>\n<p>If so: Any idea how to work around it?</p>\n</blockquote>\n<p>so, you may try</p>\n<pre><code>template&lt;template&lt;typename&gt; class TemplArgA, template&lt;typename&gt; class TemplArgB&gt;\nclass CompileError {\npublic:\nvoid func(TemplArgA&lt;int&gt; x) {}\nvoid func(TemplArgB&lt;int&gt; x,void* workaround = 0) {}\n</code></pre>\n<p>of course, this is not strictly equivalent to your original code though (because you'll not get an error until function instantation in the TemplArgA==TemplArgB case; I don't know if this is relevant for you or not)</p>\n<blockquote>\n<p>But in the real code, I don't have just TemplArgA and TemplArgB, but 4 template template parameters (say TemplArgA to TemplArgD) -- I don't think I can apply the workaround then?</p>\n</blockquote>\n<p>you just need to persuade the compiler that those overloads are not equivalent:</p>\n<pre><code>template&lt;int&gt; struct workaround_t{};\n\nvoid func(TemplArgA&lt;int&gt; x, workaround_t&lt;0&gt;* workaround = 0) {}\nvoid func(TemplArgB&lt;int&gt; x, workaround_t&lt;1&gt;* workaround = 0) {}\nvoid func(TemplArgC&lt;int&gt; x, workaround_t&lt;2&gt;* workaround = 0) {}\n//...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1509551824, "creation_date": 1509551824, "answer_id": 47058872, "question_id": 47057344, "link": "https://stackoverflow.com/questions/47057344/error-overloading-function-with-different-template-template-parameters-with-same/47058872#47058872", "title": "Error overloading function with different template template parameters with same argument", "body": "<p>I suppose the problem is that the compiler see and error the possible istantiation win <code>TemplArgA == TemplaArgB</code> (when the two <code>func()</code> collide) so I suppose that (if you can use C++11) another workaround is SFINAE enable (or not) the second <code>func()</code> only id <code>TemplArgA != TemplArgB</code></p>\n\n<p>I mean something like</p>\n\n<pre><code>template &lt;template &lt;typename&gt; class C1, template &lt;typename&gt; class C2&gt;\nstruct bar\n {\n   void func (C1&lt;int&gt; x)\n    { }\n\n   template &lt;template &lt;typename&gt; class D2 = C2&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C2&lt;int&gt;, D2&lt;int&gt;&gt;{}\n                       &amp;&amp;  ( ! std::is_same&lt;C1&lt;int&gt;, D2&lt;int&gt;&gt;{})&gt;::type\n      func (D2&lt;int&gt; x)\n    { }    \n\n };\n</code></pre>\n\n<p>The OP add:</p>\n\n<blockquote>\n  <p>in the real code, I don't have just <code>TemplArgA</code> and <code>TemplArgB</code>, but 4 template template parameters (say <code>TemplArgA</code> to <code>TemplArgD</code>)</p>\n</blockquote>\n\n<p>My solution become really ugly (the third function</p>\n\n<pre><code>   template &lt;template &lt;typename&gt; class D3 = C3&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C3&lt;int&gt;, D3&lt;int&gt;&gt;{}\n                        &amp;&amp; ( ! std::is_same&lt;C1&lt;int&gt;, D3&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C2&lt;int&gt;, D3&lt;int&gt;&gt;{})&gt;::type\n      func (D3&lt;int&gt; x)\n    { }\n</code></pre>\n\n<p>and the fourth</p>\n\n<pre><code>   template &lt;template &lt;typename&gt; class D4 = C4&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C4&lt;int&gt;, D4&lt;int&gt;&gt;{}\n                        &amp;&amp; ( ! std::is_same&lt;C1&lt;int&gt;, D4&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C2&lt;int&gt;, D4&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C3&lt;int&gt;, D4&lt;int&gt;&gt;{})&gt;::type\n      func (D4&lt;int&gt; x)\n    { }\n</code></pre>\n\n<p>) but I hope could work.</p>\n\n<p>The following is a full working (but with g++ and clang++; I don't with VC2010) example</p>\n\n<pre><code>#include &lt;limits&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n\ntemplate &lt;typename&gt; struct foo1 { };\ntemplate &lt;typename&gt; struct foo2 { };\ntemplate &lt;typename&gt; struct foo3 { };\ntemplate &lt;typename&gt; struct foo4 { };\n\n\ntemplate &lt;template &lt;typename&gt; class C1, template &lt;typename&gt; class C2,\n          template &lt;typename&gt; class C3, template &lt;typename&gt; class C4&gt;\nstruct bar\n {\n   void func (C1&lt;int&gt; x)\n    { }\n\n   template &lt;template &lt;typename&gt; class D2 = C2&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C2&lt;int&gt;, D2&lt;int&gt;&gt;{}\n                       &amp;&amp;  ( ! std::is_same&lt;C1&lt;int&gt;, D2&lt;int&gt;&gt;{})&gt;::type\n      func (D2&lt;int&gt; x)\n    { }\n\n   template &lt;template &lt;typename&gt; class D3 = C3&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C3&lt;int&gt;, D3&lt;int&gt;&gt;{}\n                        &amp;&amp; ( ! std::is_same&lt;C1&lt;int&gt;, D3&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C2&lt;int&gt;, D3&lt;int&gt;&gt;{})&gt;::type\n      func (D3&lt;int&gt; x)\n    { }\n\n   template &lt;template &lt;typename&gt; class D4 = C4&gt;\n   typename std::enable_if&lt;    std::is_same&lt;C4&lt;int&gt;, D4&lt;int&gt;&gt;{}\n                        &amp;&amp; ( ! std::is_same&lt;C1&lt;int&gt;, D4&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C2&lt;int&gt;, D4&lt;int&gt;&gt;{})       \n                        &amp;&amp; ( ! std::is_same&lt;C3&lt;int&gt;, D4&lt;int&gt;&gt;{})&gt;::type\n      func (D4&lt;int&gt; x)\n    { }\n };\n\n\nint main ()\n {\n   bar&lt;foo1, foo2, foo3, foo4&gt;  b1234;\n   bar&lt;foo1, foo1, foo1, foo1&gt;  b1111;\n   bar&lt;foo1, foo1, foo1, foo2&gt;  b1112;\n   bar&lt;foo1, foo1, foo2, foo1&gt;  b1121;\n   bar&lt;foo1, foo2, foo1, foo1&gt;  b1211;\n   bar&lt;foo2, foo1, foo1, foo1&gt;  b2111;\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1509552286, "post_id": 47058904, "comment_id": 81065309, "body": "&quot;I still wonder...&quot; It surely is a vc bug, see <a href=\"https://timsong-cpp.github.io/cppwp/temp.type#1\" rel=\"nofollow noreferrer\">temp.type/1</a>"}], "tags": [], "owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1509551946, "creation_date": 1509551946, "answer_id": 47058904, "question_id": 47057344, "link": "https://stackoverflow.com/questions/47057344/error-overloading-function-with-different-template-template-parameters-with-same/47058904#47058904", "title": "Error overloading function with different template template parameters with same argument", "body": "<p>Found a workaround that works for me:</p>\n\n<pre><code>enum eSelector { S_A, S_B };\n\ntemplate&lt;template&lt;typename,eSelector&gt; class TemplArg&gt;\nclass Workaround {\npublic:\n  void func(TemplArg&lt;int, S_A&gt; x) {}\n  void func(TemplArg&lt;int, S_B&gt; x) {}\n};\n</code></pre>\n\n<p>This way, VC2010 compiles without C2535. It makes the classes to be provided as template arguments more complicated. I formally had classed</p>\n\n<pre><code>template&lt;typename T&gt; class MyA { ... };\ntemplate&lt;typename T&gt; class MyB { ... };\n</code></pre>\n\n<p>that I used as template arguments, now use partial template specialization like</p>\n\n<pre><code>template&lt;typename T, eSelector S&gt; class MyAB;\ntemplate&lt;typename T&gt; class MyAB&lt;T, S_A&gt; { ... };\ntemplate&lt;typename T&gt; class MyAB&lt;T, S_B&gt; { ... };\n\ntemplate&lt;typename T&gt; class MyA : public MyAB&lt;T, S_A&gt; { /* `forward' constructor implementations */ };\ntemplate&lt;typename T&gt; class MyB : public MyAB&lt;T, S_B&gt; { /* `forward' constructor implementations */ };\n</code></pre>\n\n<p>Anyway, things look much more complicated than they need to be with this approach, so I'm not really satisfied with this. I will try with Massimiliano's suggestion from his edited post, think that will make the code look less frightening; still I wanted to provide this approach for the sake of completeness ;)</p>\n\n<p>I still wonder whether I you missed out something important or whether it is a VC2010 bug ...</p>\n"}], "owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1509551946, "creation_date": 1509547015, "question_id": 47057344, "link": "https://stackoverflow.com/questions/47057344/error-overloading-function-with-different-template-template-parameters-with-same", "title": "Error overloading function with different template template parameters with same argument", "body": "<p>I have a class that gets two template template parameters and overloads a function with an argument that is either the one or the other template template parameter but both times with the same template argument:</p>\n\n<pre><code>template&lt;template&lt;typename&gt; class TemplArgA, template&lt;typename&gt; class TemplArgB&gt;\nclass CompileError {\npublic:\n  void func(TemplArgA&lt;int&gt; x) {}\n  void func(TemplArgB&lt;int&gt; x) {}\n};\n</code></pre>\n\n<p>I am using VC2010 and get</p>\n\n<pre><code>error C2535: 'void CompileError&lt;TemplArgA,TemplArgB&gt;::func(TemplArgA&lt;int&gt;)': member function already defined or declared\n</code></pre>\n\n<p>when compiling the above code sample (not even at template instantiation, just to have the above lines in the code already causes the compile error).</p>\n\n<p>These in contrast compile fine:</p>\n\n<pre><code>template&lt;class TemplArgA, class TemplArgB&gt;\nclass Compiles {\npublic:\n  void func(TemplArgA x) {}\n  void func(TemplArgB x) {}\n};\n\ntemplate&lt;template&lt;typename&gt; class TemplArgA, template&lt;typename&gt; class TemplArgB&gt;\nclass AlsoCompiles {\npublic:\n  void func(TemplArgA&lt;int&gt;    x) {}\n  void func(TemplArgB&lt;double&gt; x) {}\n};\n</code></pre>\n\n<p>Any idea what I am doing wrong?</p>\n\n<p>Seems to compile fine with clang++, so I wonder whether it might be a bug in VC2010 ... If so: Any idea how to work around it?</p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1509546198, "post_id": 47057078, "comment_id": 81061220, "body": "&quot;isthere in second argument is a complete function&quot; Yes, it&#39;s called lambda expression."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1509546233, "post_id": 47057078, "comment_id": 81061245, "body": "It&#39;s a lamda that&#39;s passed to the <code>lib_ptr_t</code> as a custom deleter."}, {"owner": {"reputation": 45, "user_id": 3906620, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9d2da44fee7fcf1012e09208ce85a16?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal Haider", "link": "https://stackoverflow.com/users/3906620/iqbal-haider"}, "edited": false, "score": 0, "creation_date": 1509546316, "post_id": 47057078, "comment_id": 81061295, "body": "Is c++0x, supports lamda expression?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1509546362, "post_id": 47057078, "comment_id": 81061320, "body": "@user3906620 <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">Lambda expressions</a> are C++11+ feature."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1509546392, "post_id": 47057078, "comment_id": 81061345, "body": "Sometimes. C++0x means &quot;do your best to be C++11 compatible, even though you can&#39;t because C++11 doesn&#39;t exist yet&quot;. Depending on from when the compiler is it may or may not support lambdas."}, {"owner": {"reputation": 45, "user_id": 3906620, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9d2da44fee7fcf1012e09208ce85a16?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal Haider", "link": "https://stackoverflow.com/users/3906620/iqbal-haider"}, "edited": false, "score": 0, "creation_date": 1509546397, "post_id": 47057078, "comment_id": 81061347, "body": "Thanks for comments"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 4, "last_activity_date": 1509546704, "creation_date": 1509546704, "answer_id": 47057254, "question_id": 47057078, "link": "https://stackoverflow.com/questions/47057078/function-argument-contains-complete-function/47057254#47057254", "title": "Function argument contains complete function", "body": "<p><code>[](void*d){ dlclose(d); }</code> is a lambda expression.</p>\n\n<p>It is shorthand to create an instance of a class very roughly like this:</p>\n\n<pre><code>struct anonymous_name {\n  void operator()(void* d) { dlclose(d); }\n};\n</code></pre>\n\n<p>(there are some minor differences I skipped that don't matter here).  <code>anonymous_name</code> isn't the real name of the class generated, instead it is given a name that cannot be named.</p>\n\n<p>An instance of <code>anonymous_name</code> can be called like a function.</p>\n\n<p>Now, <code>std::function&lt;void(void*)&gt;</code> is an object that uses a technique called \"type erasure\" to store <em>almost anything</em> that can be called with the signature <code>void(void*)</code>.  This includes function pointers, or function objects like instances of <code>anonymous_name</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 350, "user_id": 8868066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1f29be9201c038b572e7d053d4e8b1?s=128&d=identicon&r=PG&f=1", "display_name": "Botond D&#233;nes", "link": "https://stackoverflow.com/users/8868066/botond-d%c3%a9nes"}, "is_accepted": false, "score": 0, "last_activity_date": 1509548765, "creation_date": 1509548765, "answer_id": 47057874, "question_id": 47057078, "link": "https://stackoverflow.com/questions/47057078/function-argument-contains-complete-function/47057874#47057874", "title": "Function argument contains complete function", "body": "<p>The second argument is the deleter function object for the <code>std::unique_ptr</code> and in this case it's a lambda but it could be anything implicitly convertible to <code>std::function&lt;void(void*)&gt;</code> which is declared to be the type of the deleter object.</p>\n"}], "owner": {"reputation": 45, "user_id": 3906620, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9d2da44fee7fcf1012e09208ce85a16?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal Haider", "link": "https://stackoverflow.com/users/3906620/iqbal-haider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47057254, "answer_count": 2, "score": 0, "last_activity_date": 1509548765, "creation_date": 1509546122, "last_edit_date": 1509546276, "question_id": 47057078, "link": "https://stackoverflow.com/questions/47057078/function-argument-contains-complete-function", "title": "Function argument contains complete function", "body": "<p>In My C++ library code I saw following line</p>\n\n<pre><code> m_libs[ library_name ] = lib_ptr_t( handle, [](void*d){ dlclose(d); });\n</code></pre>\n\n<p>lib_prt_t declare in .hpp as</p>\n\n<pre><code>using lib_ptr_t = std::unique_ptr&lt;void,std::function&lt;void(void*)&gt;&gt;;\n</code></pre>\n\n<p>Can anyone explain , isthere in second argument is a complete function or some thing else.\nI can't understand what does it mean?</p>\n"}, {"tags": ["c++", "qt", "signals-slots", "qwebengineview", "qwebenginepage"], "comments": [{"owner": {"reputation": 48, "user_id": 1737792, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8c5615cd45310832e6c895be92f84d60?s=128&d=identicon&r=PG", "display_name": "Sacha_D", "link": "https://stackoverflow.com/users/1737792/sacha-d"}, "edited": false, "score": 0, "creation_date": 1509548234, "post_id": 47056998, "comment_id": 81062615, "body": "Or How via QWebEngineView get parameters of form&#39;s method  &quot;POST&quot; or &quot;GET&quot; and hyperlink&#39;s url clicked on displayed web page?"}, {"owner": {"reputation": 836, "user_id": 2373040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce2cf78deb084999f063eec15ca957d?s=128&d=identicon&r=PG", "display_name": "ManuelH", "link": "https://stackoverflow.com/users/2373040/manuelh"}, "edited": false, "score": 0, "creation_date": 1509611025, "post_id": 47056998, "comment_id": 81089140, "body": "What about the result of calling QWebEnginePage::url(), does that not tell you which URL/page has been loaded/viewed? Also take a look at QWebEnginePage::requestedUrl() - The URL requested to loaded by the frame currently viewed. The URL may differ from the one returned by url() if a DNS resolution or a redirection occurs."}, {"owner": {"reputation": 48, "user_id": 1737792, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8c5615cd45310832e6c895be92f84d60?s=128&d=identicon&r=PG", "display_name": "Sacha_D", "link": "https://stackoverflow.com/users/1737792/sacha-d"}, "reply_to_user": {"reputation": 836, "user_id": 2373040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce2cf78deb084999f063eec15ca957d?s=128&d=identicon&r=PG", "display_name": "ManuelH", "link": "https://stackoverflow.com/users/2373040/manuelh"}, "edited": false, "score": 0, "creation_date": 1509626458, "post_id": 47056998, "comment_id": 81099401, "body": "I tried QWebEnginePage::requestedUrl() - it returns address of already loaded page. I need to intercept on page buttons presses and links clicking.  To know what link was clicked, generate new web-page and navigate user on it."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9139938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1oOwf.png?s=128&g=1", "display_name": "Sz. David", "link": "https://stackoverflow.com/users/9139938/sz-david"}, "is_accepted": false, "score": 0, "last_activity_date": 1514423648, "creation_date": 1514423648, "answer_id": 48000474, "question_id": 47056998, "link": "https://stackoverflow.com/questions/47056998/qt-how-to-get-sender-of-sender-signal-or-how-to-know-loadstarted-url-of-qwebengi/48000474#48000474", "title": "Qt How to get sender of sender signal or how to know loadStarted url of QWebEngineView?", "body": "<p>If you have to intercept navigation requests and filter them by navigation type, the best you can do is to override QWebEnginePage::acceptNavigationRequest() virtual function.</p>\n\n<p><a href=\"https://doc.qt.io/qt-5/qwebenginepage.html#acceptNavigationRequest\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qwebenginepage.html#acceptNavigationRequest</a></p>\n\n<pre><code>class NavigationRequestOverride : public QWebEnginePage\n{\npublic:\n    NavigationRequestOverride(QObject* parent) : QWebEnginePage(parent) {}\nprotected:\n    virtual bool acceptNavigationRequest(const QUrl &amp;url, NavigationType type, bool isMainFrame)\n    {\n       // Here goes your logic\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 48, "user_id": 1737792, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8c5615cd45310832e6c895be92f84d60?s=128&d=identicon&r=PG", "display_name": "Sacha_D", "link": "https://stackoverflow.com/users/1737792/sacha-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514423648, "creation_date": 1509545879, "question_id": 47056998, "link": "https://stackoverflow.com/questions/47056998/qt-how-to-get-sender-of-sender-signal-or-how-to-know-loadstarted-url-of-qwebengi", "title": "Qt How to get sender of sender signal or how to know loadStarted url of QWebEngineView?", "body": "<p>QWebEngineView has signal void loadStarted(). It emits this signal when it received from QWebEnginePage. QWebEnginePage overrides this function from QWebEnginePagePrivate, where it is void loadStarted(const QUrl &amp;provisionalUrl, bool isErrorPage = false), but in QWebEnginePage class argument provisionalUrl marked as Q_UNUSED(), but I want to know its value. How can I do it?</p>\n"}, {"tags": ["c++", ".net", "file", "winapi", "ntfs"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1509547034, "post_id": 47056985, "comment_id": 81061815, "body": "No, sparse files are not those with alternate streams. That is a completely different and orthogonal feature."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 6, "last_activity_date": 1509554009, "last_edit_date": 1509554009, "creation_date": 1509553659, "answer_id": 47059418, "question_id": 47056985, "link": "https://stackoverflow.com/questions/47056985/check-if-file-is-sparse/47059418#47059418", "title": "Check if file is sparse", "body": "<p>In Win32, use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364944.aspx\" rel=\"noreferrer\"><code>GetFileAttributes()</code></a> function, checking the result if the <code>FILE_ATTRIBUTE_SPARSE_FILE</code> attribute is present.</p>\n\n<p>In .NET, use the <a href=\"https://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx\" rel=\"noreferrer\"><code>File.GetAttributes()</code></a> method, checking the result if the <code>FileAttributes.SparseFile</code> attribute is present. </p>\n"}], "owner": {"reputation": 14468, "user_id": 4928642, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cbfaff96665b7567defe1b34a883db8b?s=128&d=identicon&r=PG", "display_name": "Qwertiy", "link": "https://stackoverflow.com/users/4928642/qwertiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 47059418, "answer_count": 1, "score": 1, "last_activity_date": 1509554009, "creation_date": 1509545844, "last_edit_date": 1509547452, "question_id": 47056985, "link": "https://stackoverflow.com/questions/47056985/check-if-file-is-sparse", "title": "Check if file is sparse", "body": "<p>I'd like to check if file located on ntfs file system is <a href=\"https://msdn.microsoft.com/en-gb/en-en/library/windows/desktop/aa365564.aspx\" rel=\"nofollow noreferrer\">sparse</a>. What function I need to use to check that?</p>\n\n<p>As I know sparse files contain data pieces in separate streems so I tryed to list alternate streams via <code>FindFirstStreamW</code> and <code>FindNextStreamW</code>, but it doesn't show anything interesting with sparse files.</p>\n"}, {"tags": ["c++", "string", "c++11", "stdthread"], "comments": [{"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 1, "creation_date": 1509546108, "post_id": 47056962, "comment_id": 81061178, "body": "So what do you want? Create your own string class or create a thread class without the use of any operating system API? In case you want to do the latter: it&#39;s entirely impossible. Thread management belongs into the realm of the operating system&#39;s scheduler."}, {"owner": {"reputation": 125, "user_id": 8619231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458069254db035a1f3e4fe7b30c80257?s=128&d=identicon&r=PG", "display_name": "Vedant", "link": "https://stackoverflow.com/users/8619231/vedant"}, "reply_to_user": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1509546634, "post_id": 47056962, "comment_id": 81061523, "body": "@Jodocus i want to create a thread class....was trying to exemplify it using string class"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1509552463, "post_id": 47056962, "comment_id": 81065416, "body": "On Linux, the <a href=\"http://man7.org/linux/man-pages/man2/clone.2.html\" rel=\"nofollow noreferrer\">clone(2)</a> system call with a <code>CLONE_THREAD</code> argument is what ultimately creates a thread."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1509554377, "post_id": 47056962, "comment_id": 81066644, "body": "This is the right thinking. When the instructor says, don&#39;t use <code>std::string</code> and <code>std::string</code> is the correct solution, write your own string class. Same with <code>std::vector</code>."}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 8868066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef1f29be9201c038b572e7d053d4e8b1?s=128&d=identicon&r=PG&f=1", "display_name": "Botond D&#233;nes", "link": "https://stackoverflow.com/users/8868066/botond-d%c3%a9nes"}, "is_accepted": true, "score": 2, "last_activity_date": 1509546169, "creation_date": 1509546169, "answer_id": 47057092, "question_id": 47056962, "link": "https://stackoverflow.com/questions/47056962/behind-the-scenes-of-construction-of-a-thread/47057092#47057092", "title": "Behind the scenes of construction of a thread", "body": "<p>You cannot implement a thread class without either using the OS provided threading primitives or some higher level threading library (like <code>boost::thread</code> or <code>std::thread</code>) that in turn rely on said OS-provided threading primitives.</p>\n"}], "owner": {"reputation": 125, "user_id": 8619231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458069254db035a1f3e4fe7b30c80257?s=128&d=identicon&r=PG", "display_name": "Vedant", "link": "https://stackoverflow.com/users/8619231/vedant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47057092, "answer_count": 1, "score": 1, "last_activity_date": 1509546169, "creation_date": 1509545769, "question_id": 47056962, "link": "https://stackoverflow.com/questions/47056962/behind-the-scenes-of-construction-of-a-thread", "title": "Behind the scenes of construction of a thread", "body": "<p>It is known that how to use thread. But how is the thread library implemented. I mean, like we have <code>std::string</code>, its functionality can be somewhat replicated, by user himself using <strong>C-strings (char arrays)</strong>, it is easy.</p>\n\n<p>My question is how can i achieve this for the case of thread, like how can i create a class with bare-minimum C++ datatypes and functions(without WINAPI), std::thread like functionality into a class.</p>\n\n<p>I would like to give a example, my teacher has prohibited me from using std::string, and allowed to only use C-strings, but i can use <strong>OOP</strong> concepts..</p>\n\n<pre><code>class string_my\n{  \n      private:\n            char* str;\n      public:\n         // all the required func. to store the value in char*\n }\n</code></pre>\n"}, {"tags": ["c++", "winapi", "gdi"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1509550870, "post_id": 47056848, "comment_id": 81064317, "body": "GDI is strictly 24bpp and does not support alpha.  AlphaBlend() was a hack to use a bitmap with transparency anyway, but the blend result is 24bpp.  This kind of code went out of style almost 20 years ago, please use gdiplus.h"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1509552621, "post_id": 47056848, "comment_id": 81065523, "body": "If stepping through the debugger (as opposed to just letting it run as fast as it can) produces the desired result, then it sounds like you are constantly re-seeding the PNRG, using the current time. The debugger slows the code down enough so that re-seeding the PNRG happens at distinct times, whereas not running under a debugger happens to re-seed it with the same time value multiple times in a row."}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509555805, "post_id": 47056848, "comment_id": 81067556, "body": "@IInspectable : <code>rand()</code> used is the one in <code>cstdlib</code>, so I think seeding using time is not the issue."}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1509555968, "post_id": 47056848, "comment_id": 81067647, "body": "@BarmakShemirani : I tried logging generated alpha values just before <code>AlphaBlend()</code> call. Numbers look random enough."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1509556264, "post_id": 47056848, "comment_id": 81067808, "body": "I didn&#39;t see the earlier comment, I sort of repeated IInspectable. I tried the code on my computer and it looks random. <code>rand</code> sometimes goes wrong if the seed is wrong. Anyway, I can&#39;t reproduce the problem."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509558468, "post_id": 47056848, "comment_id": 81069133, "body": "We don&#39;t know, if it is an issue or not. We can&#39;t see the code, where the PRNG is seeded. It is not an issue to seed the PRNG with the current time. It is an issue when doing it repeatedly. Are you?"}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509562680, "post_id": 47056848, "comment_id": 81071515, "body": "@IInspectable : Poor wording on my part. I also assumed that you thought <code>rand()</code> is a non-standard function that seeds itself with time(which doesn&#39;t make much sense now that I think of it). What I meant is <code>rand()</code> is the standart library function AND it is not seeded <i>anywhere</i> in the code. I logged alpha values just before <code>AlphaBlend()</code> uses it. Values look random but output is not."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1509575268, "post_id": 47056848, "comment_id": 81077521, "body": "I can repro using your code sample but I don&#39;t have an explanation for the result."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1509575368, "post_id": 47056848, "comment_id": 81077561, "body": "@zett42 what compiler and OS do you use? Did you call <code>srand</code> once at the beginning?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1509575811, "post_id": 47056848, "comment_id": 81077705, "body": "@BarmakShemirani VS2017 under Win 10. Getting similar results whether or not I&#39;m calling <code>srand</code> once at the beginning. Long runs of identical cells being output, in my case even longer runs than in OPs image. Fun thing, when I add <code>Sleep(1)</code> at the end of <code>draw_mark()</code>, I get a more random result."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1509577629, "post_id": 47056848, "comment_id": 81078279, "body": "The use of <code>rand()</code> really is not the cause here. I&#39;ve set <code>alpha = y * 255 &#47; grid_h</code> which should produce a gradient of 64 distinct color values. Though I only get 10 different values in <a href=\"https://imgur.com/a/TFbcI\" rel=\"nofollow noreferrer\">the output</a>. Again, when inserting a <code>Sleep</code> in the outer loop, I get the expected result."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1509581534, "post_id": 47056848, "comment_id": 81079394, "body": "This is getting confusing now. There are two separate issues about <code>rand</code> and <code>AlphaBlend</code> which need to be separated. If <code>AlphaBlend</code> misbehaves it should do it with some consistency, separate from <code>rand</code>. Btw, I am using VS2015/Win10."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1509608891, "post_id": 47056848, "comment_id": 81088002, "body": "I&#39;m not able to reproduce. Output seems to be reasonable random. The only little problem is that starting drawing at top left corner of the window will leave first row and column cropped by one pixel. However this can be easily fixed by adjusting point coordinates when calling <code>AlphaBlend</code> <code>x + 1 - marker_center.x, y + 1 - marker_center.y,</code>"}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1509625102, "post_id": 47056848, "comment_id": 81098428, "body": "@zett42 : It seems higher the thread suspension time, less the corruption. I edited OP with a demo. Also, I get normal output when I first blit to mem DC, and then to window. Corruption occurs only when blitting to window."}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1509625277, "post_id": 47056848, "comment_id": 81098554, "body": "@VTT : You should blit directly to window to get corrupt output. If you blit to memory DC, output is normal."}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1509625375, "post_id": 47056848, "comment_id": 81098625, "body": "@BarmakShemirani : Are you blitting directly to window, or first to a memory DC, then to window? Please see the edit to OP."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1509625551, "post_id": 47056848, "comment_id": 81098754, "body": "The only modification I made is to call <code>produce_output</code> drawing body part inside of <code>WM_PAINT</code> handler, that is using dc returned by <code>BeginPaint</code> instead of the one returned by <code>GetDC</code> (which should be the same actually). I guess you should supply complete code snippet, including window initialization and message loop."}, {"owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1509626309, "post_id": 47056848, "comment_id": 81099286, "body": "@VTT : I get the same corrupt output when used that way as well. Window setup uses the default when a new Win32 project is created in VS2017. I use <code>WM_LBUTTONDOWN:{ produce_output(hWnd); break; }</code> for output."}], "owner": {"reputation": 781, "user_id": 4880927, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/37a8c893d6860d6e02be07984c1c4e11?s=128&d=identicon&r=PG&f=1", "display_name": "Kemal", "link": "https://stackoverflow.com/users/4880927/kemal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509627947, "creation_date": 1509545422, "last_edit_date": 1509627947, "question_id": 47056848, "link": "https://stackoverflow.com/questions/47056848/win32-gdi-alphablend-not-using-constant-alpha-value-correctly", "title": "Win32 GDI: AlphaBlend() not using constant alpha value correctly", "body": "<p>The code provided at the end draws a grid of red 3x3px rectangles with a random constant alpha value using <code>AlphaBlend()</code>. The output however, turns out not \"quite\" random:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BzDuF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BzDuF.png\" alt=\"sample_output\"></a></p>\n\n<p>Notice runs of constant alpha along x-axis.</p>\n\n<p>What might be causing this?</p>\n\n<p>P.S. Stepping though the debugger produces the expected output.</p>\n\n<hr>\n\n<p>Code to produce output:</p>\n\n<pre><code>void draw_mark(HDC hdc, int x, int y, \n               COLORREF mark_clr, int mark_w, int mark_h, BYTE alpha);\n\nvoid produce_output(HWND hWnd) {\n    InvalidateRect(hWnd, NULL, TRUE);\n    UpdateWindow(hWnd);\n\n    const int grid_w = 64, grid_h = 64;\n    const int mark_sz = 3;\n    HDC hdc = GetDC(hWnd);\n    for(int y = 0; y &lt; grid_h; ++y) {\n        for(int x = 0; x &lt; grid_w; ++x) {\n            BYTE rnd_alpha = rand();    // use random alpha for each mark\n            draw_mark(hdc, x * mark_sz, y * mark_sz, \n                      RGB(255,0,0), mark_sz, mark_sz, rnd_alpha);\n        }\n    }\n\n    // clean-up\n    ReleaseDC(hWnd, hdc);\n}\n\n// draws a [mark_w x mark_h] rectangle at (x,y) with alpha\nvoid draw_mark(HDC hdc, int x, int y, \n               COLORREF mark_clr, int mark_w, int mark_h, BYTE alpha) \n{\n    HDC hdcMem = CreateCompatibleDC(NULL);\n    HBITMAP hbm = CreateCompatibleBitmap(hdc, mark_w, mark_h);\n    HGDIOBJ hOldBmp = SelectObject(hdcMem, hbm);\n\n    for(int x = 0; x &lt; mark_w; ++x) {\n        for(int y = 0; y &lt; mark_h; ++y) {\n            SetPixel(hdcMem, x, y, mark_clr);\n        }\n    }\n    POINT marker_center{mark_w / 2, mark_h / 2};\n    SetPixel(hdcMem, marker_center.x, marker_center.y, RGB(255, 255, 255));\n\n    BLENDFUNCTION bf{};\n    bf.BlendOp = AC_SRC_OVER;\n    bf.BlendFlags = 0;\n    bf.AlphaFormat = 0;             // ignore source per-pixel alpha and...\n    bf.SourceConstantAlpha = alpha; // ...use constant alpha provided instead\n\n    AlphaBlend(hdc, \n               x - marker_center.x, y - marker_center.y, \n               mark_w, mark_h,  \n               hdcMem, 0, 0, mark_w, mark_h, bf);\n\n    // clean-up\n    SelectObject(hdcMem, hOldBmp);\n    DeleteObject(hbm);\n    DeleteDC(hdcMem);\n};\n</code></pre>\n\n<hr>\n\n<p><em>EDIT - As I look more into it, here are the additional issues I have noticed:</em></p>\n\n<p>1- Output is normal when <code>AlphaBlend()</code> destination is a memory DC, but not when a window DC. So the issue has to do with bliting directly to screen.</p>\n\n<p>2- Corrupt output is unrelated to use of <code>rand()</code> function. Replacing <code>BYTE rnd_alpha = rand();</code> with <code>++alpha</code> also produces somewhat similar corrupt outputs.</p>\n\n<p>3- More interestingly, suspending the thread in the <strong>inner loop</strong> such as <code>Sleep(some_duration)</code> seems to reduce the corruption. Higher the <code>some_duration</code>, less the corruption. Here is a sample output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Nq94.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Nq94.png\" alt=\"enter image description here\"></a></p>\n\n<p>First output is generated by first blitting to a memory DC, then to window. The rest is directly to the window. Notice how corruption increases(i.e. output becomes less random) as thread suspension time decreases.</p>\n"}, {"tags": ["c++", "exception", "heap", "binary-tree"], "comments": [{"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 1, "creation_date": 1509545566, "post_id": 47056833, "comment_id": 81060777, "body": "Have you tried stepping through your code with a debugger?"}, {"owner": {"reputation": 3, "user_id": 8601225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d16535fde5ddc2e89b5a5cca2a6bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad2098", "link": "https://stackoverflow.com/users/8601225/conrad2098"}, "reply_to_user": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1509545775, "post_id": 47056833, "comment_id": 81060947, "body": "I&#39;ve gone through it somewhat but I&#39;m not exactly proficient with the visual studio debugger"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1509545785, "post_id": 47056833, "comment_id": 81060954, "body": "does not compile"}, {"owner": {"reputation": 3, "user_id": 8601225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d16535fde5ddc2e89b5a5cca2a6bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad2098", "link": "https://stackoverflow.com/users/8601225/conrad2098"}, "edited": false, "score": 0, "creation_date": 1509545853, "post_id": 47056833, "comment_id": 81061005, "body": "No, it doesn&#39;t compile"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1509545880, "post_id": 47056833, "comment_id": 81061031, "body": "@Conrad2098 You need to get proficient with it. But this is simple. Set some break points where you think the error might be. And run your code. Then use &quot;step over&quot; to step through your code line by line until it eventually throws the error then you know WHERE it happened and then can figure out WHY."}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 0, "creation_date": 1509545920, "post_id": 47056833, "comment_id": 81061050, "body": "@Conrad2098 And you need to provide a <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a>"}, {"owner": {"reputation": 3, "user_id": 8601225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d16535fde5ddc2e89b5a5cca2a6bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad2098", "link": "https://stackoverflow.com/users/8601225/conrad2098"}, "edited": false, "score": 0, "creation_date": 1509545932, "post_id": 47056833, "comment_id": 81061058, "body": "Ok. Thank you for the help!"}, {"owner": {"reputation": 3, "user_id": 8601225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d16535fde5ddc2e89b5a5cca2a6bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad2098", "link": "https://stackoverflow.com/users/8601225/conrad2098"}, "edited": false, "score": 0, "creation_date": 1509545964, "post_id": 47056833, "comment_id": 81061087, "body": "And I&#39;ll keep that in mind next time"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1509568978, "post_id": 47056833, "comment_id": 81074829, "body": "Why in the world are you implementing a binary heap as a tree? Binary heap is more easily implemented in an array. If you need a node (i.e. tree-based) heap, then you&#39;d be better off with something like Pairing heap."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1509569107, "post_id": 47056833, "comment_id": 81074885, "body": "Oh, and I&#39;ll echo the comment about learning to use the debugger. It&#39;ll take you maybe an hour, and it&#39;ll save you more than that the next time you run into a bug in your code (i.e. tomorrow)."}], "answers": [{"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": true, "score": 0, "last_activity_date": 1509568872, "creation_date": 1509568872, "answer_id": 47063321, "question_id": 47056833, "link": "https://stackoverflow.com/questions/47056833/c-binary-max-heap-read-access-violation/47063321#47063321", "title": "C++ binary max heap Read Access Violation", "body": "<p>Quick inspection reveals errors in your <code>bubble_up</code> and <code>bubble_down</code> functions.</p>\n\n<p>In <code>bubble_up</code>, you have the following:</p>\n\n<pre><code>    THeapNode *parent = node-&gt;parent;\n\n    while ( parent-&gt;data &lt; node-&gt;data ) {\n        parent = node-&gt;parent;\n        string temp = parent-&gt;data;\n        parent-&gt;data = node-&gt;data;\n        node-&gt;data = temp;\n        }\n</code></pre>\n\n<p>This is going to fail when a node bubbles all the way to the top, because it doesn't check for the node being at the root. You need to write:</p>\n\n<pre><code>while (parent != NULL &amp;&amp; parent-&gt;data &lt; node-&gt;data)\n</code></pre>\n\n<p>In <code>bubble_down</code>, you have this code:</p>\n\n<pre><code>    while( node-&gt;data &lt; node-&gt;rightChild-&gt;data || node-&gt;data &lt; node-&gt;leftChild-&gt;data ){\n        if (node-&gt;rightChild-&gt;data &gt; node-&gt;leftChild-&gt;data) {\n</code></pre>\n\n<p>You don't check to see if the <code>rightChild</code> or <code>leftChild</code> are NULL.</p>\n\n<p>More importantly, that looks like an infinite loop to me because you never change the value of <code>node</code>.</p>\n\n<p>Those are just the errors I saw on a quick read through your code. There might be more.</p>\n"}], "owner": {"reputation": 3, "user_id": 8601225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d16535fde5ddc2e89b5a5cca2a6bf7?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad2098", "link": "https://stackoverflow.com/users/8601225/conrad2098"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 47063321, "answer_count": 1, "score": -1, "last_activity_date": 1509568872, "creation_date": 1509545401, "last_edit_date": 1509545666, "question_id": 47056833, "link": "https://stackoverflow.com/questions/47056833/c-binary-max-heap-read-access-violation", "title": "C++ binary max heap Read Access Violation", "body": "<p>So I'm making a binary max heap for my c++ class and I keep encountering this exception saying that I'm returning a nullptr in my class methods. I'm having trouble finding where it could be at in my code so any help would be greatly appreciated. The exception that keeps getting thrown is as follows:</p>\n\n<pre><code>Unhandled exception thrown: read access violation.\n**std::_String_alloc&lt;std::_String_base_types&lt;char,std::allocator&lt;char&gt; &gt; ::_Get_data**(...) returned nullptr. occurred\n</code></pre>\n\n<p>Here's my header file for the tree:\n        #ifndef HEAP_H\n        #define HEAP_H</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include \"THeapNode.h\"\n\n    class TreeHeap {\n    private:\n        THeapNode *root;  // the top node of the heap\n\n        int next_loc;   // the next valid location to place a node\n\n        void bubble_up(THeapNode *node);    //performs the bubble up operation on the given node\n\n        void bubble_down(THeapNode *node);  //performs the bubble down operation on the given node\n\n        void clear_heap(THeapNode *node); // removes all elements from the heap\n\n\n\n\n    public:\n\n        TreeHeap();    // the constructor\n\n        ~TreeHeap();   // the destructor\n\n        THeapNode* find_node(const int position);   // finds the node in the position given and returns a pointer to it\n\n        void insert(const string &amp;item);    // creates a node with the string given as the value and places it in the next location\n\n        bool Delete();  // removes the root of the heap and returns false if the tree is empty\n    };\n\n    #endif\n</code></pre>\n\n<p>Here's my Node's .h file:</p>\n\n<pre><code>    #ifndef NODE_H\n    #define NODE_H\n    #include&lt;string&gt;\n    using std::string;\n\n    struct THeapNode {\n        string data;    // stores a data string\n        THeapNode *parent;  // a pointer to the parent node\n        THeapNode *rightChild;     // a pointer to the right child node\n        THeapNode *leftChild;   // a pointer to the left child node\n        THeapNode( const string &amp;str );\n    };\n\n    #endif\n</code></pre>\n\n<p>And here's my .cpp file:</p>\n\n<pre><code>    #include \"stdafx.h\"\n    #include &lt;cmath&gt;\n    #include \"TreeHeap.h\"\n    #include \"THeapNode.h\"\n\n\n    TreeHeap::TreeHeap() {\n        root = NULL;   \n        next_loc = 1;\n    };\n\n    TreeHeap::~TreeHeap() {\n\n        THeapNode *current = root;\n        THeapNode *deleteNode = NULL;\n        int d = floor(log2(next_loc - 1));\n        int j = next_loc;\n\n        for ( int i = 1; i &lt;= j-1; i++ ) {\n\n            while (1) {\n\n                int d = floor(log2(next_loc - i));\n                int power = std::pow(2, d - 1);\n\n                if (next_loc == 1) {\n                    deleteNode = current;\n                    j -= 1;\n                }\n                else if (next_loc &lt; (std::pow(2, d - 1) * 3)) {\n                    current = current-&gt;leftChild;\n                }\n                else {\n                    current = current-&gt;rightChild;\n                }\n\n                // Update location and depth to reflect traversal\n                next_loc = std::pow(2, d - 1) + next_loc % power;\n                d = d - 1;\n            }\n\n            clear_heap(deleteNode);\n\n        }\n\n    }\n\n    void TreeHeap::clear_heap(THeapNode *node) {\n\n        if (node == NULL) {\n            return;\n        }\n\n        node-&gt;data = \"\";\n        node-&gt;leftChild = NULL;\n        node-&gt;rightChild = NULL;\n        node-&gt;parent = NULL;\n\n    }\n\n    void TreeHeap::insert( const string &amp;value ) {\n\n        THeapNode newNode = THeapNode(value);\n        int loc = next_loc;\n\n        if (loc == 1) {\n            *root = newNode;\n        }\n\n        THeapNode *current = root;\n\n        while (1) {\n\n            int d = floor(log2(loc));\n            int power = std::pow(2, d - 1);\n\n            if (loc &lt; (power * 3)) {\n                if (current-&gt;leftChild = nullptr) {\n                    *current-&gt;leftChild = newNode;\n                    newNode.parent = current;\n                    next_loc += 1;\n                    break;\n                }\n                else {\n                    current = current-&gt;leftChild;\n                }\n            }\n\n            else {\n                if (current-&gt;rightChild = nullptr) {\n                    *current-&gt;rightChild = newNode;\n                    newNode.parent = current;\n                    next_loc = +1;\n                    break;\n                }\n                else {\n                    current = current-&gt;rightChild;\n                }\n            }\n\n            // Update location and depth to reflect traversal\n            loc = std::pow(2, d - 1) + loc % power;\n            d = d - 1;\n\n        }\n        std::cout &lt;&lt; current-&gt;data &lt;&lt; \"\\n\";\n        system(\"PAUSE\");\n\n    }\n\n    void TreeHeap::bubble_up( THeapNode *node ) {\n\n        if (node == NULL) {\n            return;\n        }\n\n        THeapNode *parent = node-&gt;parent;\n\n        while ( parent-&gt;data &lt; node-&gt;data ) {\n            parent = node-&gt;parent;\n            string temp = parent-&gt;data;\n            parent-&gt;data = node-&gt;data;\n            node-&gt;data = temp;\n            }\n\n    }\n\n    void TreeHeap::bubble_down( THeapNode *node ) {\n\n        if (node == NULL) {\n            return;\n        }\n\n        while( node-&gt;data &lt; node-&gt;rightChild-&gt;data || node-&gt;data &lt; node-&gt;leftChild-&gt;data ){\n            if (node-&gt;rightChild-&gt;data &gt; node-&gt;leftChild-&gt;data) {\n\n                THeapNode *right = node-&gt;rightChild;\n                string temp = right-&gt;data;\n                right-&gt;data = node-&gt;data;\n                node-&gt;data = temp;\n            }\n            else if (node-&gt;rightChild-&gt;data &lt; node-&gt;leftChild-&gt;data) {\n\n                THeapNode *left = node-&gt;leftChild;\n                string temp = left-&gt;data;\n                left-&gt;data = node-&gt;data;\n                node-&gt;data = temp;\n            }\n        }\n    }\n\n    THeapNode* TreeHeap::find_node( const int position ){\n\n        int loc = position;\n        int d = floor(log2(position));\n        int power = std::pow(2, d - 1);\n        THeapNode *returnValue = root;\n\n        while (returnValue != NULL &amp;&amp; 1 &lt; position &amp;&amp; position &lt; (next_loc - 1)) {\n\n            if (loc == 1) {\n                return returnValue;\n            }\n            else if (loc &lt; ( std::pow( 2, d-1 ) * 3)) {\n                returnValue = returnValue-&gt;leftChild;\n            }\n            else {\n                returnValue = returnValue-&gt;rightChild;\n            }\n\n            // Update location and depth to reflect traversal\n            loc = std::pow(2, d - 1) + loc % power;\n            d = d - 1;\n        }\n        std::cout &lt;&lt; returnValue-&gt;data&lt;&lt;\"\\n\";\n        return returnValue;\n    }\n\n    bool TreeHeap::Delete() {\n\n        if (next_loc = 1) {\n            return false;\n        }\n\n        int d = floor(log2(next_loc - 1));\n        THeapNode *current = root;\n        THeapNode *usedNode = NULL;\n        int loc = next_loc - 1;\n\n        while ( 1 ) {\n\n            int d = floor(log2(loc));\n            int power = std::pow(2, d - 1);\n\n            if (loc == 1) {\n                usedNode = current;\n                break;\n            }\n            else if (loc &lt; (std::pow(2, d - 1) * 3)) {\n                current = current-&gt;leftChild;\n            }\n            else {\n                current = current-&gt;rightChild;\n            }\n\n            // Update location and depth to reflect traversal\n            loc = std::pow(2, d - 1) + loc % power;\n            d = d - 1;\n        }\n\n\n\n        THeapNode *temp = root;\n        clear_heap(root);\n        root = usedNode;\n        delete temp;\n\n        bubble_down(root);\n\n        return true;\n    }\n</code></pre>\n\n<p>Thanks in advance for any help you've got.</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1509545439, "post_id": 47056824, "comment_id": 81060679, "body": "Post the code, and the error, ad text. A vague description of both isn&#39;t very helpful."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1509545538, "post_id": 47056824, "comment_id": 81060756, "body": "Nobody can help you without seeing the actual code."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1509545929, "post_id": 47056824, "comment_id": 81061056, "body": "Your title says &quot;instance&quot; but the question says &quot;pointer&quot;. Is there perhaps a function that expects an instance but you&#39;re passing it a pointer?"}, {"owner": {"reputation": 13, "user_id": 8708015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d1ad0ca56ed62ef596c2df67bf8da0?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8708015/robert"}, "edited": false, "score": 0, "creation_date": 1509546939, "post_id": 47056824, "comment_id": 81061743, "body": "Did not finish writing the question and accidentally submitted it"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8708015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d1ad0ca56ed62ef596c2df67bf8da0?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8708015/robert"}, "edited": false, "score": 0, "creation_date": 1509547688, "post_id": 47057153, "comment_id": 81062263, "body": "Thank you for the reply, not getting any errors this time! oh no i cant upvote bc everyone hates me sorry :("}], "tags": [], "owner": {"reputation": 125, "user_id": 8619231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458069254db035a1f3e4fe7b30c80257?s=128&d=identicon&r=PG", "display_name": "Vedant", "link": "https://stackoverflow.com/users/8619231/vedant"}, "is_accepted": true, "score": 0, "last_activity_date": 1509561406, "last_edit_date": 1509561406, "creation_date": 1509546366, "answer_id": 47057153, "question_id": 47056824, "link": "https://stackoverflow.com/questions/47056824/passing-class-instance-into-function/47057153#47057153", "title": "Passing class instance into function", "body": "<p>May be this can work..\nAll the <strong>classes and functions</strong> are assumed, because of <strong>insufficient data input</strong> given by OP. I hope you mean that you want to pass <strong>pointer of the object</strong>.\nCode:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass student\n{ //whatever you want \n };\n\n void pass_pointer (student* ptr)\n { // whatever you want\n  }\n\n int main ()\n { \n     student* temp;\n     pass_pointer (temp);\n     return 0;\n  }\n</code></pre>\n\n<p>You can follow the following method to program whatever you want to do, i mean binary tree, whatever....hope that your problem is solved.</p>\n\n<p><strong>If this address your problem then kudos, if this doesnt answer what meant to ask please say so in the comments below, i will edit it accordingly.</strong></p>\n"}], "owner": {"reputation": 13, "user_id": 8708015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d1ad0ca56ed62ef596c2df67bf8da0?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8708015/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1509546457, "accepted_answer_id": 47057153, "answer_count": 1, "score": -3, "last_activity_date": 1509561406, "creation_date": 1509545390, "last_edit_date": 1509546182, "question_id": 47056824, "link": "https://stackoverflow.com/questions/47056824/passing-class-instance-into-function", "closed_reason": "Not suitable for this site", "title": "Passing class instance into function", "body": "<p>I am trying to pass a pointer of Student class into a function for a binary tree, however I am getting an error saying that there is no function that contains the input parameter, I am thinking it is because I am passing in a object pointer but, I don't know how to fix this, any help would be appreciated.</p>\n\n<p>Here is my code:</p>\n\n<p>demo.cpp:\n    #include </p>\n\n<pre><code>#include &lt;fstream&gt; //read files\n\n #include &lt;cstdlib&gt; //c standard library\n\n #include \"ETree.h\"\n\n#include \"Student.h\"\n\n#include &lt;string&gt;\n\nusing namespace assignment3;\nusing namespace std;\n\n\nint main()\n{\nETree&lt;Student&gt; * BinaryTree = new ETree&lt;Student&gt;();\ndelete BinaryTree;\n\nifstream input;\ninput.open(\"stuText.txt\");\n\nif (!input)\n{\n    cerr &lt;&lt; \"Text file not opened!\";\n    exit(1);\n}\nelse\n{\n    string word;\n    int num;\n    Student* inst;\n    while(input &gt;&gt; word &gt;&gt; num)\n    {\n        inst = new Student(word, num);\n        BinaryTree-&gt;add(inst);\n    }\n}   \nreturn 0;\n}\n</code></pre>\n\n<p>ETree.h</p>\n\n<pre><code>#ifndef ETREE_H\n\n#define ETREE_H\n\n#include \"BTNode.h\"\n\n\n namespace assignment3\n {\n template &lt;typename Student&gt;\n\nclass ETree\n{\n    public:\n\n    ETree();\n    ETree(Student inst);\n\n    ~ETree();\n\n    bool add(Student inst);\n\n\n    private:\n\n        BTNode&lt;Student&gt;* rootPtr;\n};\n//template &lt;typename object&gt;\n//std::istream&amp; operator&gt;&gt;(std::istream&amp; in, Queue&lt;object&gt;&amp; queue);\n }\n\n #include \"ETree.template\"\n\n #endif\n</code></pre>\n\n<p>ETree.template\n(the relevant part)</p>\n\n<pre><code>template &lt;typename Student&gt;\nbool ETree&lt;Student&gt;::add(Student inst)\n{\n    if(rootPtr == NULL)\n    {\n        rootPtr = new BTNode&lt;Student&gt;(inst);\n        return true;\n    }\n    else\n    {\n        return rootPtr-&gt;add(inst);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 1, "creation_date": 1509545316, "post_id": 47056598, "comment_id": 81060568, "body": "There&#39;s no &quot;modal&quot; or &quot;modeless&quot; application. Modal or modeless refers to a dialog&#39;s behaviour relative to the rest application, ie whether it allows user interaction with the other windows in the application. But in your case the dialog is the only window...  As for your question, I think the problem is due to not having created the application as required. Try creating a new &quot;Dialog-Based&quot; MFC Application, not just using main() yourself."}, {"owner": {"reputation": 163, "user_id": 4370769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5ab768df7eed58d2df0619a9898f795?s=128&d=identicon&r=PG&f=1", "display_name": "Malanche", "link": "https://stackoverflow.com/users/4370769/malanche"}, "reply_to_user": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 0, "creation_date": 1509547433, "post_id": 47056598, "comment_id": 81062100, "body": "This window is going to be part of a larger project and it needs to halt interaction with other windows when it appears, that&#39;s what I meant by modal but I used it wrong, I&#39;m new with MFC and VC++ in general. I didn&#39;t want to use the wizard because it creates a project that basically IS visual studio&#39;s UI, which does not allow me to understand how small components of it work. And yes, the main function lacked some instructions but now it works. Thank you!"}, {"owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "edited": false, "score": 0, "creation_date": 1509547901, "post_id": 47056598, "comment_id": 81062401, "body": "Hmmm, not sure whether this way you can block the calling application. The call will likely return as soon as your application is loaded. Maybe consider making it a dll instead?"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4370769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5ab768df7eed58d2df0619a9898f795?s=128&d=identicon&r=PG&f=1", "display_name": "Malanche", "link": "https://stackoverflow.com/users/4370769/malanche"}, "edited": false, "score": 0, "creation_date": 1509547127, "post_id": 47056940, "comment_id": 81061891, "body": "You have no idea how thankful I am. The problem is that I couldn&#39;t use the wizard because I&#39;m constrained to use VS 2010 (for some odd reason) and the wizard generates a very complex window system as a singleton. If it wouldn&#39;t be asking to much of my part, why is it that I was able to load the Bitmap using LoadImage? Does this function call AfxWinInit()? Thank you a lot!"}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "reply_to_user": {"reputation": 163, "user_id": 4370769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5ab768df7eed58d2df0619a9898f795?s=128&d=identicon&r=PG&f=1", "display_name": "Malanche", "link": "https://stackoverflow.com/users/4370769/malanche"}, "edited": false, "score": 0, "creation_date": 1509547524, "post_id": 47056940, "comment_id": 81062156, "body": "A windows system as a singleton? No, There is usually only a CWinApp singleton. This singleton may host hundreds of windows.If you have an Windows application and you use the MFC, there must be a CWinApp derived class and this calls AfxWinInit... so your code might work. Same for Extension DLLs that live inside an MFC application and for standard DLLs..."}], "tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": true, "score": 3, "last_activity_date": 1509545688, "creation_date": 1509545688, "answer_id": 47056940, "question_id": 47056598, "link": "https://stackoverflow.com/questions/47056598/modal-cdialog-doesnt-find-resources-mfc/47056940#47056940", "title": "Modal CDialog doesn&#39;t find resources (MFC)", "body": "<p>The problem is that an MFC code can't run without beeing initialized .</p>\n\n<p>If you want to have a command line application using the MFC you need to call AfxWinInit.</p>\n\n<p>The wizard will create code like this:</p>\n\n<pre><code>int main()\n{\n    int nRetCode = 0;\n\n    HMODULE hModule = ::GetModuleHandle(nullptr);\n\n    if (hModule != nullptr)\n    {\n        // initialize MFC and print and error on failure\n        if (!AfxWinInit(hModule, nullptr, ::GetCommandLine(), 0))\n        {\n            // TODO: change error code to suit your needs\n            wprintf(L\"Fatal Error: MFC initialization failed\\n\");\n            nRetCode = 1;\n        }\n</code></pre>\n\n<p>Using a dialog based application or any other non-command line application, will create a CWinApp singleton. Upon creation of the CWinApp object inside your process the AfxWinInit function will be called.</p>\n\n<p>Mainly your code fails because the resource handle isn't set. So your resource can't be found by the MFC.</p>\n"}], "owner": {"reputation": 163, "user_id": 4370769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5ab768df7eed58d2df0619a9898f795?s=128&d=identicon&r=PG&f=1", "display_name": "Malanche", "link": "https://stackoverflow.com/users/4370769/malanche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 47056940, "answer_count": 1, "score": 0, "last_activity_date": 1509545688, "creation_date": 1509544685, "question_id": 47056598, "link": "https://stackoverflow.com/questions/47056598/modal-cdialog-doesnt-find-resources-mfc", "title": "Modal CDialog doesn&#39;t find resources (MFC)", "body": "<p>I'm having some trouble to create a very simple CDialog application. My goal is to start a CDialog instance in the main function of my code, wait for it to get closed and continue. The problem here comes when I add a picture to the Dialog, it just <strong>does not appear</strong>. I even tried programatically to load it to a CStatic where I found a workaround. If I use <code>CBitmap::LoadBitmap(...)</code> it returns the error ERROR_RESOURCE_NAME_NOT_FOUND, but if I use <code>::LoadImage(GetModulehandle(0), ...)</code> it does work. So it seems the problem is the module handle. An important note is that if I try to do my app as modeless (Using a CWinApp) everything works flawlessly, but I need a Modal CDialog! I'm not giving up my main function. Thank you in advance.</p>\n\n<p>Just in case it might be of use, here is the code (almost all):</p>\n\n<p>MyDialog.h</p>\n\n<pre><code>#include&lt;afxwin.h&gt;\n#include\"resource.h\"\n\nclass CMyDialog: public CDialog{\npublic:\n    enum{ IDD = IDD_DIALOG1 };\n    CMyDialog();\n    ~CMyDialog();\nprotected:\n    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support\nprotected:\n    DECLARE_MESSAGE_MAP()\n};\n</code></pre>\n\n<p>MyDialog.cpp</p>\n\n<pre><code>#include\"MyDialog.h\"\n\nCMyDialog::CMyDialog(): CDialog(CMyDialog::IDD){\n}\n\nCMyDialog::~CMyDialog(){\n}\n\nvoid CMyDialog::DoDataExchange(CDataExchange* pDX){\n    CDialog::DoDataExchange(pDX);\n}\n\nBEGIN_MESSAGE_MAP(CMyDialog, CDialog)\nEND_MESSAGE_MAP()\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include\"MyDialog.h\"\n\nint main(){\n    CMyDialog mDialog;\n    mDialog.DoModal();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mongodb", "bson", "mongo-cxx-driver"], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 8617780, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-srylOhLCKMY/AAAAAAAAAAI/AAAAAAAAAFc/tayDdc8-1io/photo.jpg?sz=128", "display_name": "Joyo Waseem", "link": "https://stackoverflow.com/users/8617780/joyo-waseem"}, "is_accepted": true, "score": 2, "last_activity_date": 1509557738, "creation_date": 1509557738, "answer_id": 47060600, "question_id": 47056349, "link": "https://stackoverflow.com/questions/47056349/mongodb-c-driver-issue/47060600#47060600", "title": "Mongodb c++ driver issue", "body": "<p>In the current master branch, document.hpp file contains make_document method. \nif I'm not mistaken you are using stable release version.</p>\n\n<p>Take a look here.\n<a href=\"https://stackoverflow.com/questions/44540858/using-declaration-not-found-in-mongodb-c-driver\">Using declaration \u201cnot found\u201d in MongoDB c++ driver</a></p>\n"}], "owner": {"reputation": 313, "user_id": 7903808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/809104245919606/picture?type=large", "display_name": "Jo Joy", "link": "https://stackoverflow.com/users/7903808/jo-joy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 47060600, "answer_count": 1, "score": 2, "last_activity_date": 1520026093, "creation_date": 1509543890, "last_edit_date": 1520026093, "question_id": 47056349, "link": "https://stackoverflow.com/questions/47056349/mongodb-c-driver-issue", "title": "Mongodb c++ driver issue", "body": "<p>I am getting an error saying namespace \"bsoncxx::v_noabi::builder::basic\" has no member \"make_document\", I have already added required included as per mentioned in the tutorial.</p>\n\n<p>I am using mongo-cxx-driver-r3.1.1 version. \n<a href=\"https://github.com/mongodb/mongo-cxx-driver/blob/f3e98ed83f8684670cb29b1a3f004511752d6c34/examples/mongocxx/get_values_from_documents.cpp\" rel=\"nofollow noreferrer\">i have followed example from here</a></p>\n\n<p>here is what I have tried </p>\n\n<pre><code>       #include \"maxi.h\"\n       #include &lt;cstdlib&gt;\n       #include &lt;iostream&gt;\n       #include &lt;bsoncxx/builder/basic/array.hpp&gt;\n       #include &lt;bsoncxx/builder/basic/document.hpp&gt;\n       #include &lt;bsoncxx/builder/basic/kvp.hpp&gt;\n       #include &lt;mongocxx/client.hpp&gt;\n       #include &lt;mongocxx/instance.hpp&gt;\n\n    using bsoncxx::builder::basic::kvp;\n    using bsoncxx::builder::basic::make_document;// here is error \n    using bsoncxx::type;\n\n    mongocxx::instance inst{};\n    mongocxx::client conn{ mongocxx::uri{ \"mongodb://localhost:27017\" } };\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6DwOk.png\" rel=\"nofollow noreferrer\">see image here</a></p>\n\n<p>I have already tested MongoDB driver after compiling and its working perfectly. I need to use make_document option for some reason in order to achieve my goal.\nNot sure possible bsoncxx::builder::basic::make_document; option may have been removed or replaced with something else which I don't know. </p>\n"}, {"tags": ["c++", "function", "return-value"], "comments": [{"owner": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 2, "creation_date": 1509543985, "post_id": 47056302, "comment_id": 81059713, "body": "The return value is set before local variables go out of the scope. You could not do <code>int localVar = 5; return localVar;</code> otherwise."}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "edited": false, "score": 3, "creation_date": 1509544070, "post_id": 47056302, "comment_id": 81059772, "body": "&quot;If i have a variable defined inside a function, will it get destroyed <b>before</b> or after the temporary is initialized?&quot; Think about that question...."}, {"owner": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "reply_to_user": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 0, "creation_date": 1509544332, "post_id": 47056302, "comment_id": 81059958, "body": "@Melebius yes, I figured as much. The return value must be set before the function terminates. What I am confused is that &#39;temporary initializing&#39; part. Is the return value used to initialize a temporary or is setting the return value equilvalent to creating a temporary?"}, {"owner": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 0, "creation_date": 1509544754, "post_id": 47056302, "comment_id": 81060235, "body": "@ZylonD.Lite Could you figure out an example where it would make a difference? I find those two options pretty same."}, {"owner": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "reply_to_user": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 0, "creation_date": 1509544996, "post_id": 47056302, "comment_id": 81060395, "body": "@Melebius honestly speaking, I can&#39;t think of any. Because no matter what order they are done in, I guess they would be consecutively executed. I am just learning the language and sometime I tend to overthink. This question was purely academic."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 8237876, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1ssm6-EP-Dg/AAAAAAAAAAI/AAAAAAAAAFo/sj7URGs65l8/photo.jpg?sz=128", "display_name": "Gautham Arunachalam", "link": "https://stackoverflow.com/users/8237876/gautham-arunachalam"}, "is_accepted": false, "score": 0, "last_activity_date": 1509547209, "creation_date": 1509547209, "answer_id": 47057408, "question_id": 47056302, "link": "https://stackoverflow.com/questions/47056302/when-exactly-does-a-called-function-end/47057408#47057408", "title": "When exactly does a called function end?", "body": "<p>The Function ends after a return statement <br>\nthe variables that are declared in that scope will go out of scope and you will not be able to use that unless the variable is declared as static</p>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": true, "score": 1, "last_activity_date": 1509554598, "creation_date": 1509554598, "answer_id": 47059678, "question_id": 47056302, "link": "https://stackoverflow.com/questions/47056302/when-exactly-does-a-called-function-end/47059678#47059678", "title": "When exactly does a called function end?", "body": "<h3>Before</h3>\n\n<p>For functions returning by value, the temporary at the call site will be initialized <em>before</em> the scope of the function exits. Otherwise, any return value would be destroyed before it could be passed to the call site.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "edited": false, "score": 0, "creation_date": 1509591652, "post_id": 47060476, "comment_id": 81081863, "body": "Exactly what I wanted to know. Thank you."}, {"owner": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "reply_to_user": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "edited": false, "score": 0, "creation_date": 1510036616, "post_id": 47060476, "comment_id": 81252386, "body": "@ZylonD.Lite So why don\u2019t you <a href=\"https://stackoverflow.com/help/accepted-answer\">accept</a> this answer?"}, {"owner": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "reply_to_user": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "edited": false, "score": 0, "creation_date": 1510044570, "post_id": 47060476, "comment_id": 81256460, "body": "@Melebius because cmaster&#39;s answer came after I have accepted Snps&#39; answer. And his answer, while shorter, also responds to what I wanted to know."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1509557261, "creation_date": 1509557261, "answer_id": 47060476, "question_id": 47056302, "link": "https://stackoverflow.com/questions/47056302/when-exactly-does-a-called-function-end/47060476#47060476", "title": "When exactly does a called function end?", "body": "<p>This is the technical view. This might not be interesting to language-lawyers, but for other people, it might me instructive.</p>\n\n<hr>\n\n<p>A function ends precisely with the branch instruction that transfers control back to the caller. Before this point, the callee has full control, after this point, the caller has full control over what the CPU does. Generally, there is precisely one CPU instruction that is used for this control transfer. On X86-64, that's the <code>ret</code> instruction, PowerPC used <code>blr</code>, other CPUs have other names for the same thing. The name does not matter, though.</p>\n\n<p>Anything, that's within the responsibility of the function itself must happen before this instruction, anything that's none of the callee's business happens somewhere else.</p>\n\n<p>As the caller does not know which variables a function creates, it cannot be the callers responsibility to destruct them. More generally, the callee has to release any stack space that it allocated for its own purposes. As such, the callee must perform such cleanup itself before exiting by issuing the <code>ret</code> instruction. This means, that any local variables must vanish before the function exits.</p>\n\n<p>Things are a bit more complicated when it comes to returning a result from a function: This requires both caller and callee to collaborate. The details differ between the different calling conventions, but there are generally two cases:</p>\n\n<ol>\n<li><p>The return value is passed in a register.<br>\nIn this case, the callee will load the return value into a well-known register, and the caller will use that same register to access the return value.</p></li>\n<li><p>The return value is passed on the stack.\nIn this case, the callee will place the data that is to be returned at a defined position within the callers stack frame, and the caller will examine that same memory region for the functions result after the call has returned.</p></li>\n</ol>\n\n<p>TL;DR: If something is a functions responsibility, it must happen before the function returns (= executes the <code>ret</code> instruction). Freeing stack space and returning data to the caller are such responsibilities.</p>\n"}], "owner": {"reputation": 97, "user_id": 8652945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecb85e2a298a52a904d960ca728f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Zylon D. Lite", "link": "https://stackoverflow.com/users/8652945/zylon-d-lite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 47059678, "answer_count": 3, "score": 1, "last_activity_date": 1509562018, "creation_date": 1509543747, "question_id": 47056302, "link": "https://stackoverflow.com/questions/47056302/when-exactly-does-a-called-function-end", "title": "When exactly does a called function end?", "body": "<p>From a textbook I was reading, it is said that for functions with a return value, the return value is used to initialize a temporary at the call site. </p>\n\n<p>What I want to know is does that happen <em>before</em> or <em>after</em> the called function exits? In other words, if I have a variable(say, an <code>int</code>) defined inside the called function, will it get destroy before or after the temporary is initialized?</p>\n"}, {"tags": ["c++", "list", "vector", "stl"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1509543979, "post_id": 47056292, "comment_id": 81059708, "body": "<code>mTable.capacity()</code> and <code>mTable.size()</code> do not necessarily return the same values. Also what do you see are the values of <code>index</code> and <code>mTable.size()</code> when you debug the code?"}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1509543996, "post_id": 47056292, "comment_id": 81059719, "body": "Out of interest, is there a reason you don&#39;t just use <code>std::pair</code> instead of rolling your own?"}, {"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 2, "creation_date": 1509544075, "post_id": 47056292, "comment_id": 81059778, "body": "You never create the vector containing your table, you only reserve space for it."}, {"owner": {"reputation": 767, "user_id": 583159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1996ba35caeb74854985c041635484f?s=128&d=identicon&r=PG", "display_name": "webbi", "link": "https://stackoverflow.com/users/583159/webbi"}, "edited": false, "score": 0, "creation_date": 1509547289, "post_id": 47056292, "comment_id": 81061996, "body": "You should first do mTable.push_back(list) to have the std::list object inserted into std::vector, later can do mTable[index].push_back(toInsert)"}, {"owner": {"reputation": 1, "user_id": 8868442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee0df87771ac282b4d880eeeb28c879?s=128&d=identicon&r=PG&f=1", "display_name": "PauloftheWest", "link": "https://stackoverflow.com/users/8868442/paulofthewest"}, "edited": false, "score": 0, "creation_date": 1509635083, "post_id": 47056292, "comment_id": 81105637, "body": "UnholySheep: Yes, but I need the capacity to know the legal range for the vector.  A better variable name might be availableSpace or something.   Steve: No, I&#39;ll use pair in the future, thanks.   Johan: I don&#39;t understand, but creating the class, it should implicitly create the vector since I&#39;m not using a pointer...   webbi: I don&#39;t understand.  When I do the .reserve, it creates 100 double links lists.  I can confirm this, but when I try mTable[0].size() I get 0, not a seg fault."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8868442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee0df87771ac282b4d880eeeb28c879?s=128&d=identicon&r=PG&f=1", "display_name": "PauloftheWest", "link": "https://stackoverflow.com/users/8868442/paulofthewest"}, "edited": false, "score": 0, "creation_date": 1509635577, "post_id": 47058225, "comment_id": 81105989, "body": "This essentially works.  Although, I had to remove the second parameter:  HashTable&lt;K, V&gt;::HashTable(const int size):mTable(size)  I also removed the reserved function call.  Although, two questions, why did the reserve function call not work?  Also, why did vector not have this issue.  Thanks!"}], "tags": [], "owner": {"reputation": 1765, "user_id": 8524503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXxXM.png?s=128&g=1", "display_name": "Abhijith Asokan", "link": "https://stackoverflow.com/users/8524503/abhijith-asokan"}, "is_accepted": false, "score": 0, "last_activity_date": 1509549809, "creation_date": 1509549809, "answer_id": 47058225, "question_id": 47056292, "link": "https://stackoverflow.com/questions/47056292/c-segmentation-fault-with-push-back-on-list-but-not-on-vector/47058225#47058225", "title": "C++ Segmentation fault with push_back on list but not on vector", "body": "<p>Try this:</p>\n\n<pre><code>HashTable&lt;K, V&gt;::HashTable(const int size):mTable(size,std::list&lt;Pair&gt;){\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8868442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee0df87771ac282b4d880eeeb28c879?s=128&d=identicon&r=PG&f=1", "display_name": "PauloftheWest", "link": "https://stackoverflow.com/users/8868442/paulofthewest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509549809, "creation_date": 1509543730, "question_id": 47056292, "link": "https://stackoverflow.com/questions/47056292/c-segmentation-fault-with-push-back-on-list-but-not-on-vector", "title": "C++ Segmentation fault with push_back on list but not on vector", "body": "<p>We are doing a hashtable with chaining example for class.  Using the STL I defined the hashtable as <code>std::vector&lt;std::list&lt; Pair &gt; &gt; mTable</code>.  Unfortunately, when I call push_back on mTable[index] I get a seg fault.  The error does NOT exist if I define mTable to be <code>std::vector&lt;std::vector&lt; Pair &gt; &gt; mTable.</code><br>\nAm I using list incorrectly?  Here is the code:</p>\n\n<pre><code>template&lt;class K, class V&gt;\nclass HashTable {\n    private:\n        class Pair {\n            public:\n                K mKey;\n                V mVal;\n        };\n        std::vector&lt;std::list&lt;Pair&gt; &gt; mTable;\n...\n};\n\n...\n\ntemplate&lt;class K, class V&gt;\nHashTable&lt;K, V&gt;::HashTable(const int size) {\n    mTable.reserve(size);\n}\n\ntemplate&lt;class K, class V&gt;\nbool HashTable&lt;K, V&gt;::insert(const K &amp;key, const V &amp;val) {\n    int size = mTable.capacity(); // Gets how many elements can be stored in the array/vector.\n    int index = hashcode(key); // convert the key to an integer.\n    index %= size; // Size down the 'size' variable so it index into the array/vector.\n    Pair toInsert;\n    toInsert.mKey = key;\n    toInsert.mVal = val;\n    std::cout &lt;&lt; mTable[index].size() &lt;&lt; \"\\n\"; // works fine.\n    mTable[index].push_back(toInsert); // (SEG FAULT) Adds value to the hash table\n}\n</code></pre>\n"}]