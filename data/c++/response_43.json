[{"tags": ["c++", ".net", "visual-c++"], "comments": [{"owner": {"reputation": 5459, "user_id": 1734730, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/L8dDj.jpg?s=128&g=1", "display_name": "Nathan Cooper", "link": "https://stackoverflow.com/users/1734730/nathan-cooper"}, "edited": false, "score": 0, "creation_date": 1446681025, "post_id": 33534198, "comment_id": 54849994, "body": "Winforms isn&#39;t a thing in c++, so C# answers can&#39;t be &#39;converted&#39;. Either use MFC or something a bit friendlier like Qt. There are lots of tutorials for both out there."}, {"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1446686101, "post_id": 33534198, "comment_id": 54851481, "body": "When you <i>create</i> the control, you must specify the <code>WS_EX_TRANSPARENT</code> extended style (<code>GWL_EXSTYLE</code>), and also supply a <code>WM_ERASEBKGND</code> event handler in your message loop."}], "owner": {"reputation": 1, "user_id": 5526995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad8b91c6a16a993058801ee6e8b5a12d?s=128&d=identicon&r=PG&f=1", "display_name": "user202860", "link": "https://stackoverflow.com/users/5526995/user202860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446682323, "creation_date": 1446680486, "last_edit_date": 1446682323, "question_id": 33534198, "link": "https://stackoverflow.com/questions/33534198/creating-a-transparent-richtextbox-with-visual-c", "title": "Creating a transparent RichTextBox with Visual C++", "body": "<p>I'm looking to find a way to make a transparent RichTextBox in Visual C++. I've searched everywhere, the forums and the net but nothing seems to work. 99% of what I've found is in VB and C# which I can't seem to convert either.</p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1446682779, "post_id": 33534162, "comment_id": 54850488, "body": "Also, I tried running this on VS2010. Same issue."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1446684180, "post_id": 33534162, "comment_id": 54850902, "body": "I assume uic.exe is a Qt tool.  Is that set up correctly in VS on your machine?  How that external tool is set up probably has nothing to do with the VS solution or project."}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "is_accepted": false, "score": 0, "last_activity_date": 1446684414, "creation_date": 1446684414, "answer_id": 33534808, "question_id": 33534162, "link": "https://stackoverflow.com/questions/33534162/visual-studio-2008-cant-find-the-path-specified/33534808#33534808", "title": "Visual Studio 2008 cant find the path specified", "body": "<p>As I suspected, the key I added in regedit that had some aliases for calling different versions of python was indeed the culprit. Here is that file (in case anyone is curious):</p>\n\n<pre><code>doskey ls=dir $*\ndoskey python27-64=C:\\Python27-64\\python.exe $*\ndoskey python35-32=C:\\python35-32\\python.exe $*\n</code></pre>\n\n<p>Apparently (and I only noticed this from inspecting the working setup and noting the doskey lines) these calls to doskey destroy the moc/ui process on Windows. </p>\n\n<p>This makes no sense. Also, it is quite inconvenient because now I have to work really really hard to call different versions of python.</p>\n"}], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446684414, "creation_date": 1446680254, "last_edit_date": 1495535237, "question_id": 33534162, "link": "https://stackoverflow.com/questions/33534162/visual-studio-2008-cant-find-the-path-specified", "title": "Visual Studio 2008 cant find the path specified", "body": "<p>I have some projects that I haven't compiled on a particular computer for a while, although they compile fine on others -- the same exact projects, not copies. I am compiling code from the same network directory. As I said, on some computers, it works fine.</p>\n\n<p>However, on the computer in my office, visual studio seems to have lost all sense of a directory structure.</p>\n\n<p>First I was having trouble with moc (these projects use Qt) finding the mainwindow.h file. This is in the same directory as the .sln, .vproj, etc. I posted a question about this alread here:\n<a href=\"https://stackoverflow.com/questions/33510086/visual-studio-2008-moc-cant-find-mainwindow-h\">visual studio 2008 moc cant find mainwindow.h</a></p>\n\n<p>By removing and reloading mainwindow.h into the project, moc and visual studio were able to see it.</p>\n\n<p>Now moc can find mainwindow.h, but uic can't find mainwindow.ui -- which really comes as no surprise at this point. This is the error I get from visual studio:</p>\n\n<pre><code>1&gt;UIC mainwindow.ui\n1&gt;The system cannot find the path specified.\n1&gt;File 'mainwindow.ui' is not valid\n1&gt;Project : error PRJ0019: A tool returned an error code from \"UIC mainwindow.ui\"\n</code></pre>\n\n<p>and here is the offending line in the build log</p>\n\n<pre><code>C:\\QtSDK\\Desktop\\Qt\\4.8.1\\msvc2008\\bin\\uic.exe mainwindow.ui -o ui_mainwindow.h\n</code></pre>\n\n<p>Now, if I cd into the directory with the solution in it, I can run this line above and it generates ui_mainwindow.h beautifully. </p>\n\n<p>I am at a loss here. Clearly the files and permissions are fine, because I can compile them (although not from my local copy of visual studio). Clearly the .vcproj files are correct, because I can compile on other machines. It seems like there is some global tweak regarding paths that I somehow inadvertently did to my copy of visual studio. </p>\n\n<p>Also, I reinstalled it and the same behavior persists. I figured if there was some offending config file secreted away in the Windows file structure, this would have cleaned it, but obviously not.</p>\n\n<p>On the computer for which this setup does work, I get this as the first output:</p>\n\n<pre><code>1&gt;UIC mainwindow.ui\n1&gt;Z:\\dmedine\\git-lsl-tst-wrkng\\labstreaminglayer\\Apps\\XDFBrowser&gt;doskey python26=\"C:\\python26\\python\"  \n1&gt;MOC mainwindow.h\n1&gt;Z:\\dmedine\\git-lsl-tst-wrkng\\labstreaminglayer\\Apps\\XDFBrowser&gt;doskey python26=\"C:\\python26\\python\"  \n</code></pre>\n\n<p>I am a little confused by these doskey commands (I didn't create these projects, so there is much to be confused by). Does moc and uic need python on Windows? I did play around with my doskeys regarding python recently, so maybe this is the root of the problem, but I would like to know why.</p>\n"}, {"tags": ["c++", "mysql", "visual-studio-2013"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 1, "creation_date": 1446680367, "post_id": 33534128, "comment_id": 54849763, "body": "It&#39;s no video but might help: <a href=\"http://stackoverflow.com/questions/16424828/how-to-connect-mysql-database-using-c\" title=\"how to connect mysql database using c\">stackoverflow.com/questions/16424828/&hellip;</a>. Search SO for MySQL and cpp."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446680377, "post_id": 33534128, "comment_id": 54849768, "body": "I have had good results using <a href=\"http://soci.sourceforge.net/\" rel=\"nofollow noreferrer\">soci</a> for this."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5526942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BLuOL.jpg?s=128&g=1", "display_name": "Luka Jankovic", "link": "https://stackoverflow.com/users/5526942/luka-jankovic"}, "edited": false, "score": 0, "creation_date": 1446681000, "post_id": 33534242, "comment_id": 54849988, "body": "Do you recommend doing it the PHP or the C++ way, if it makes any difference at all?"}, {"owner": {"reputation": 30, "user_id": 4949987, "user_type": "registered", "profile_image": "https://graph.facebook.com/460497110786233/picture?type=large", "display_name": "Sentmen", "link": "https://stackoverflow.com/users/4949987/sentmen"}, "reply_to_user": {"reputation": 37, "user_id": 5526942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BLuOL.jpg?s=128&g=1", "display_name": "Luka Jankovic", "link": "https://stackoverflow.com/users/5526942/luka-jankovic"}, "edited": false, "score": 0, "creation_date": 1446681260, "post_id": 33534242, "comment_id": 54850064, "body": "It depense on the requirements and your skills. To learn a new language like PHP is a lot worse than building an server/client, and you still have to setup an HTTP connection for connecting it to the server. I suppose that you want build an server (1 central place where all the information is stored) and multiple clients over an network to access the information.  I think that C++ is better because the script is already compiled, while PHP does only compile it when you run it."}, {"owner": {"reputation": 629, "user_id": 4093728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02ee7ba2cefd4097f35b54626fe5a1a?s=128&d=identicon&r=PG", "display_name": "Keiji", "link": "https://stackoverflow.com/users/4093728/keiji"}, "edited": false, "score": 0, "creation_date": 1466703862, "post_id": 33534242, "comment_id": 63440751, "body": "Out of interest: why would you put a PHP script between C++ and MySQL for the sole purpose of marshaling between the two? Why not just use libmysqlclient? If you are going to use a marshaling process, why not write it in another language like Python, or even just call the &quot;mysql&quot; executable directly?"}], "tags": [], "owner": {"reputation": 30, "user_id": 4949987, "user_type": "registered", "profile_image": "https://graph.facebook.com/460497110786233/picture?type=large", "display_name": "Sentmen", "link": "https://stackoverflow.com/users/4949987/sentmen"}, "is_accepted": true, "score": 0, "last_activity_date": 1446680733, "creation_date": 1446680733, "answer_id": 33534242, "question_id": 33534128, "link": "https://stackoverflow.com/questions/33534128/how-do-i-connect-my-mysql-database-to-my-c-code/33534242#33534242", "title": "How do I connect my MySQL database to my c++ code?", "body": "<p>The best way to get this done is by:</p>\n\n<p>Creating an PHP/ASP script that connecting to the MySQL (like an API), or\nCreating an C++ server program that functioning as an API. </p>\n\n<p>If you want to choose the second one, you need to download the C++ connector: <a href=\"https://dev.mysql.com/downloads/connector/cpp/1.1.html\" rel=\"nofollow\">MySQL C++ connector</a>\nCheck the <a href=\"https://dev.mysql.com/doc/connector-cpp/en/\" rel=\"nofollow\">Documentation</a> from MySQL for more information and the examples.</p>\n"}], "owner": {"reputation": 37, "user_id": 5526942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BLuOL.jpg?s=128&g=1", "display_name": "Luka Jankovic", "link": "https://stackoverflow.com/users/5526942/luka-jankovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 33534242, "answer_count": 1, "score": 0, "last_activity_date": 1482642731, "creation_date": 1446680022, "last_edit_date": 1482642731, "question_id": 33534128, "link": "https://stackoverflow.com/questions/33534128/how-do-i-connect-my-mysql-database-to-my-c-code", "title": "How do I connect my MySQL database to my c++ code?", "body": "<p>I am making a simple c++ login program and I wish to connect my c++ code to my MySQL database. When the user signs up the program is supposed to send the user's mail and a hash of the password to the database and store it there. (I've already done the hashing with sha256). When the user logs in the program, it supposed to send the user's mail and password to the database where it checks if both are correct and send a acces granted or acces denied back.</p>\n\n<p>I just started working with MySQL and not being able to find any video or topic online of how to do this, making a post myself is my last hope.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1446710979, "post_id": 33534115, "comment_id": 54859546, "body": "Project layout is mostly up to the author. Each of your requirement has many possible decisions, and not only from the cmake side. E.g., reusing of <code>C</code> in other projects could be task for version-control system. As you are new to cmake, you better start from <b>any simple layout</b> just for <b>make project working</b>."}, {"owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1446716465, "post_id": 33534115, "comment_id": 54862687, "body": "@Tsyvarev project is already working, but with the simple cmake configuration I&#39;ve made, it is pretty monolithic. If there are many options for achieving the goal, which option is the best? If the information in the question is not enough, what are additional conditions?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1446717438, "post_id": 33534115, "comment_id": 54863285, "body": "<b>There is no &quot;the best option&quot;</b>. There are many &quot;addition conditions&quot; which may affects on &quot;goodness&quot; order of different decisions. And some of these conditions, like your 3d one, are <i>subjective</i>. You question could be good for <i>collect different opinions</i> about possible layouts, but SO site is of <i>question-answer</i> kind, and such questions are simply not suited for it."}], "answers": [{"tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": true, "score": 7, "last_activity_date": 1446932922, "last_edit_date": 1495535641, "creation_date": 1446931702, "answer_id": 33587990, "question_id": 33534115, "link": "https://stackoverflow.com/questions/33534115/preferred-cmake-project-structure/33587990#33587990", "title": "preferred cmake project structure", "body": "<p>First I have to admit that I agree with @Tsyvarev. Your CMake environment should fit to your processes/workflow and should take project sizes and team structure into account. Or generally speaking the environment CMake will be used in. And this tends to be - in a positive way - very alive.</p>\n\n<p>So this part of your question is difficult to answer and I'll concentrate on the technical part:</p>\n\n<ol>\n<li>CMake has to know the location of the dependencies - relative or absolute - by\n\n<ul>\n<li>having a monolithic source tree (the one you don't want anymore)\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/33443164/cmake-share-library-with-multiple-executables\">CMake share library with multiple executables</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31512485/cmake-how-to-setup-source-library-and-cmakelists-txt-dependencies\">CMake: How to setup Source, Library and CMakeLists.txt dependencies?</a></li>\n</ul></li>\n<li>a common directory location for includes/libraries/binaries\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3742090/custom-directory-for-cmake-library-output\">Custom Directory for CMake Library Output</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21592361/cmake-install-not-installing-libraries-on-windows\">cmake install not installing libraries on windows</a></li>\n</ul></li>\n<li>getting the paths via config files/variable definitions\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3016448/how-can-i-get-cmake-to-find-my-boost-installation\">How can I get cmake to find my alternative boost installation?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32670701/how-to-add-custom-command-for-the-cmake-build-process-itself\">How to add_custom_command() for the CMake build process itself?</a></li>\n</ul></li>\n<li>using registration in or installation from a database provided on the host\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/33462209/making-cmake-library-accessible-by-other-cmake-packages-automatically\">Making cmake library accessible by other cmake packages automatically</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24519499/cmake-wont-run-build-command-in-externalproject-add-correctly\">cmake wont run build_command in ExternalProject_Add correctly</a></li>\n</ul></li>\n</ul></li>\n<li>To keep your CMake files as simple as possible I would recommend to group your CMake code into separate dedicated files:\n\n<ul>\n<li>Prefer toolchain files over <code>if(SomeCompiler)</code> statements</li>\n<li>Move common/repeating code parts as <code>function()</code> bodies into a shared CMake include file</li>\n<li>Move complex non-target specific code parts into their own (CMake) script files</li>\n</ul></li>\n</ol>\n\n<h3>Example Code</h3>\n\n<p>Since you have specifically asked for the <code>find_package()</code> variant, taking <a href=\"https://coderwall.com/p/qej45g/use-cmake-enabled-libraries-in-your-cmake-project-iii\" rel=\"noreferrer\">Use CMake-enabled libraries in your CMake project</a> and the things listed above:</p>\n\n<p><strong>MyCommonCode.cmake</strong></p>\n\n<pre><code>cmake_policy(SET CMP0022 NEW)\n\nfunction(my_export_target _target _include_dir)\n    file(\n        WRITE \"${CMAKE_CURRENT_BINARY_DIR}/${_target}Config.cmake\"\n        \"\n            include(\\\"\\$\\{CMAKE_CURRENT_LIST_DIR\\}/${_target}Targets.cmake\\\")\n            set_property(\n                TARGET ${_target} \n                APPEND PROPERTY \n                    INTERFACE_INCLUDE_DIRECTORIES \\\"${_include_dir}\\\"\n            )\n        \"\n    )\n\n    export(\n        TARGETS ${_target} \n        FILE \"${CMAKE_CURRENT_BINARY_DIR}/${_target}Targets.cmake\"\n        EXPORT_LINK_INTERFACE_LIBRARIES\n    )\n    export(PACKAGE ${_target}) \nendfunction(my_export_target)\n</code></pre>\n\n<p><strong>C/CMakeLists.txt</strong></p>\n\n<pre><code>include(MyCommonCode.cmake)\n...\nmy_export_target(C \"${CMAKE_CURRENT_SOURCE_DIR}/include\")\n</code></pre>\n\n<p><strong>B/CMakeLists.txt</strong></p>\n\n<pre><code>include(MyCommonCode.cmake)\n\nfind_package(C REQUIRED)\n...\ntarget_link_libraries(B C)\nmy_export_target(B \"${CMAKE_CURRENT_SOURCE_DIR}/include\")\n</code></pre>\n\n<p><strong>A/CMakeLists.txt</strong></p>\n\n<pre><code>include(MyCommonCode.cmake)\n\nfind_package(B REQUIRED)\n...\ntarget_link_libraries(A B)\n</code></pre>\n\n<p>This keeps all 3 build environments separate, only sharing the relatively static <code>MyCommonCode.cmake</code> file. So in this approach I have so far not covered your first point, but would recommend the use of a external script to chain/trigger your build steps for A/B/C.</p>\n"}], "owner": {"reputation": 1641, "user_id": 799887, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9e6bb5d36fd7a4d6c0f324700fc8cbcb?s=128&d=identicon&r=PG", "display_name": "Grief", "link": "https://stackoverflow.com/users/799887/grief"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3267, "favorite_count": 4, "accepted_answer_id": 33587990, "answer_count": 1, "score": 3, "last_activity_date": 1446932922, "creation_date": 1446679992, "question_id": 33534115, "link": "https://stackoverflow.com/questions/33534115/preferred-cmake-project-structure", "title": "preferred cmake project structure", "body": "<p>I would like to have the following structure <code>A -&gt; B -&gt; C</code>, where:</p>\n\n<ul>\n<li><code>C</code> is boilerplate code, wrappers for third-party libraries, very\nbasic code etc. </li>\n<li><code>B</code> is the common classes, functions and data\nstructures specific to the project's domain.</li>\n<li><code>A</code> is the project itself.</li>\n</ul>\n\n<p>I would like to make it easy to reuse <code>C</code> or <code>B(+C)</code> in future in my other projects. In addition, I have the following requirements:</p>\n\n<ol>\n<li>As all three projects are in-progress, I would like to have an ability to build <code>C</code>, <code>C+B</code> and <code>C+B+A</code> in one shot.</li>\n<li>I would prefer the static linkage over dynamic, so that <code>C</code> and <code>C+B</code> would be static libraries, and <code>C+B+A</code> would be the executable</li>\n<li>I would like to keep cmake lists and config files simple and clean. Examples which I found in the official wiki and over the internet are pretty big and monstrous.</li>\n<li>It would be great if it won't require changing more than a couple of lines if I'd change the locations of <code>A</code>, <code>B</code> or <code>C</code> in the filesystem.</li>\n<li>All these three components are using google-test, but I'm not sure if it is important for the project layout.</li>\n</ol>\n\n<p>I am pretty new to cmake and I don't even understand is it better to write <code>XXXConfig.cmake</code> or <code>FindXXX.cmake</code> files. Also, I am not sure, how should I pass relative paths from subcomponent to the parent component using <code>X_INCLUDE_DIRS</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1446680313, "post_id": 33534114, "comment_id": 54849743, "body": "I cannot reproduce this error; I get 8."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1446680346, "post_id": 33534114, "comment_id": 54849752, "body": "uhmm... you never call the function..."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446680534, "post_id": 33534114, "comment_id": 54849829, "body": "other than that, make exponente int and all is good."}, {"owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "edited": false, "score": 1, "creation_date": 1446680762, "post_id": 33534114, "comment_id": 54849922, "body": "Did you even BOTHER to try to debug this?"}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1446680513, "post_id": 33534192, "comment_id": 54849820, "body": "tell him to remove the local variable <code>power</code>"}], "tags": [], "owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "is_accepted": false, "score": 1, "last_activity_date": 1446680633, "last_edit_date": 1446680633, "creation_date": 1446680444, "answer_id": 33534192, "question_id": 33534114, "link": "https://stackoverflow.com/questions/33534114/function-power-c/33534192#33534192", "title": "Function power C++", "body": "<p>You need call function like this, with parameters:\nHere is your main. You don't need local variable power. You want call function with name power.</p>\n\n<pre><code>int main ()\n{    \n double base,esponente;    \n cout&lt;&lt;\" \\n Inserisci base \\n\";\n cin&gt;&gt;base;\n cout&lt;&lt;\"\\nInserisci esponente\\n\";\n cin&gt;&gt;esponente;                                                   \n cout&lt;&lt;\"\\nL'elevamento a potenza e': \"&lt;&lt;power(base,esponente)&lt;&lt;endl;\n system (\"PAUSE\");                                     \n}    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": false, "score": 4, "last_activity_date": 1446680542, "creation_date": 1446680542, "answer_id": 33534214, "question_id": 33534114, "link": "https://stackoverflow.com/questions/33534114/function-power-c/33534214#33534214", "title": "Function power C++", "body": "<p>In your code you have two declarations of <code>power</code>.</p>\n\n<p><code>double power(double base, double esponente);</code></p>\n\n<p><code>double base,esponente,power;</code></p>\n\n<p>You declare the variable <code>power</code> but you never initialize it before printing it, so it's going to be undefined. Rerunning your program will actually give you a different number, in all likelihood. You need to remove this local variable declaration, as it shadows the global function declaration.</p>\n\n<p>Then, instead of</p>\n\n<p><code>cout&lt;&lt;\"\\nL'elevamento a potenza e': \"&lt;&lt;power&lt;&lt;endl;</code></p>\n\n<p>You want this line:</p>\n\n<p><code>cout&lt;&lt;\"\\nL'elevamento a potenza e': \"&lt;&lt;power(base, esponente)&lt;&lt;endl;</code></p>\n"}, {"tags": [], "owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "is_accepted": true, "score": 1, "last_activity_date": 1446749012, "last_edit_date": 1446749012, "creation_date": 1446680645, "answer_id": 33534230, "question_id": 33534114, "link": "https://stackoverflow.com/questions/33534114/function-power-c/33534230#33534230", "title": "Function power C++", "body": "<p>You are either printing the address of the function <code>power</code> or printing the uninitialized value of the double <code>power</code> the way you have written the code.  (Technically you are hitting an uninitialized shadowed variable).  In any case, you are not even calling the function you wrote... How does the <code>power</code> function know to be called? With what arguments?</p>\n\n<p>Fix 1. Suggest you delete the 'double' of <code>power</code>.<br>\nFix 2. Actually call the function and use/store/print the result  </p>\n\n<p>example. \nAfter getting input from user do this:</p>\n\n<pre><code>double result = power( base, exponent );\ncout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n\n<p>To print the result.  </p>\n"}], "owner": {"reputation": 13, "user_id": 5526957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72f4df6a7ddd3726e9d64666119541d3?s=128&d=identicon&r=PG&f=1", "display_name": "luke", "link": "https://stackoverflow.com/users/5526957/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 33534230, "answer_count": 3, "score": -4, "last_activity_date": 1446749012, "creation_date": 1446679987, "last_edit_date": 1446680586, "question_id": 33534114, "link": "https://stackoverflow.com/questions/33534114/function-power-c", "title": "Function power C++", "body": "<p>I need to write need a function to compute <code>power</code> in C++ </p>\n\n<p>I don't understand why my code below is wrong.</p>\n\n<p>ex. :  base: 2  exponent 3 -> result: 4.48498e-306\nif i use \"int\" the result is -> 2</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\ndouble power(double base, double exponent);       \n\nint main()\n{    \n    double base, exponent, power;\n\n    cout &lt;&lt; \"Enter a base \" &lt;&lt; endl;\n    cin &gt;&gt; base;\n    cout &lt;&lt; \"Enter an exponent\" &lt;&lt; endl;\n    cin &gt;&gt; exponent;\n    cout &lt;&lt; \"The result is ': \"&lt;&lt; power &lt;&lt; endl;\n    return 0;\n}    \n\ndouble power(double base, double exponent)\n{\n    int i;\n    double s=1;\n    for (i = 0; i &lt; exponent; ++i)\n        s *= base;\n    return s;\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1446689489, "last_edit_date": 1446689489, "creation_date": 1446688967, "answer_id": 33535426, "question_id": 33534091, "link": "https://stackoverflow.com/questions/33534091/convert-a-time-period-to-a-date-period/33535426#33535426", "title": "Convert a time_period to a date_period", "body": "<p>This works for me:</p>\n\n<pre><code>date_period to_date_period(time_period const&amp; tp) {\n    return { tp.begin().date(), tp.end().date() };\n}\n</code></pre>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/0cc3c7e971ebd8bb\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/date_time/gregorian/gregorian.hpp&gt;\n#include &lt;boost/date_time/posix_time/time_period.hpp&gt;\n#include &lt;boost/date_time/posix_time/posix_time_io.hpp&gt;\n\nusing boost::posix_time::time_period;\nusing boost::gregorian::date_period;\n\ndate_period to_date_period(time_period const&amp; tp) {\n    return { tp.begin().date(), tp.end().date() };\n}\n\nint main() {\n    time_period tp { { {2015, 1, 1}, {10, 13, 0} }, { {2015, 7, 13}, {23, 14, 0} } };\n    std::cout &lt;&lt; tp &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; to_date_period(tp) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>[2015-Jan-01 10:13:00/2015-Jul-13 23:13:59.999999]\n[2015-Jan-01/2015-Jul-12]\n</code></pre>\n"}], "owner": {"reputation": 10557, "user_id": 1157237, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2f62795a806ed2f35d96af1ba9a539e?s=128&d=identicon&r=PG", "display_name": "gcbenison", "link": "https://stackoverflow.com/users/1157237/gcbenison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33535426, "answer_count": 1, "score": 1, "last_activity_date": 1446689489, "creation_date": 1446679840, "question_id": 33534091, "link": "https://stackoverflow.com/questions/33534091/convert-a-time-period-to-a-date-period", "title": "Convert a time_period to a date_period", "body": "<p>What's a good way to convert a <code>time_period</code> to a <code>date_period</code>, e.g. \"2015-Apr-25 03:00:00/2015 Apr 27 05:00:00\" -> \"2015 Apr-25/2015 Apr 27\"?  I was hoping one could just use a constructor <code>date_period(my_time_period_variable)</code> but that does not work.</p>\n"}, {"tags": ["c++", "templates", "c++11", "bind", "stdbind"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1446680407, "post_id": 33534038, "comment_id": 54849775, "body": "I wonder whether the situation changes if you use <code>[this](void* p){ return this-&gt;MyFunc(p); }</code> in place of <code>bind</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1446680624, "post_id": 33534038, "comment_id": 54849861, "body": "@IgorTandetnik Might be slightly better, but <code>std::function</code> still generates plenty of boilerplate by itself."}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 1, "creation_date": 1446680651, "post_id": 33534038, "comment_id": 54849874, "body": "std::function is probably the cause of the bloat.  (<a href=\"https://www.youtube.com/watch?v=zt7ThwVfap0\" rel=\"nofollow noreferrer\">youtube.com/watch?v=zt7ThwVfap0</a>)  You could try replacing the bind with a lambda, but that won&#39;t likely reduce binary size."}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1446682845, "post_id": 33534038, "comment_id": 54850514, "body": "You could try a lightweight alternative like this <a href=\"https://codereview.stackexchange.com/questions/14730/impossibly-fast-delegate-in-c11\">fast delegate</a>, using the member function pointer template variant: <code>delegate&lt;void(void*)&gt;::from&lt;Foo, &amp;Foo::bar&gt;(&amp;foo);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5213, "user_id": 457488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3265ae55bf80e40f9fe031c6378306e6?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/457488/brad"}, "is_accepted": true, "score": 2, "last_activity_date": 1506445186, "last_edit_date": 1506445186, "creation_date": 1446846339, "answer_id": 33576206, "question_id": 33534038, "link": "https://stackoverflow.com/questions/33534038/reducing-stdbind-template-code-bloat/33576206#33576206", "title": "Reducing std::bind template code bloat?", "body": "<p>I dug into this a bit more and watched <a href=\"https://stackoverflow.com/users/1735922/john\">@John</a>'s video on <code>std::function</code>.  In the <a href=\"https://youtu.be/zt7ThwVfap0?t=1975\" rel=\"nofollow noreferrer\">video</a>, STL recommends using lambdas over <code>std::bind</code> for a few reasons.</p>\n\n<p>I tried converting the code to use a Lambda, which is exactly what <a href=\"https://stackoverflow.com/users/1670129/igor-tandetnik\">@Igor Tandetnik</a> recommended above.  It is significantly better.</p>\n\n<pre><code>mCallbackObj(std::bind(&amp;MyClass::MyFunc, this, _1))\n</code></pre>\n\n<p>Takes an additional 2,888 bytes of codespace.  Instead using</p>\n\n<pre><code>mCallbackObj([this](void *info){MyFunc(info);})\n</code></pre>\n\n<p>Only takes an additional 812 bytes!  This is significantly better, and good enough for my use-case.  For C++ programmers unfamiliar with the syntax of std::bind, the lambda solution is also easier to read.</p>\n\n<hr>\n\n<p><strong>Update -</strong></p>\n\n<p>After bumping to GCC 6.0 and tweaking our compiler flags (we weren't always passing in -O2 previously), I've retested this.</p>\n\n<pre><code>Lambda:            216 bytes\nstd::bind:         221 bytes\nfunction pointer:  228 bytes\n</code></pre>\n\n<p>All 3 are now much more reasonable.  We are mostly using lambdas, as they are the easiest to read once developers are familiar with the syntax.</p>\n"}], "owner": {"reputation": 5213, "user_id": 457488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3265ae55bf80e40f9fe031c6378306e6?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/457488/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 33576206, "answer_count": 1, "score": 4, "last_activity_date": 1506445186, "creation_date": 1446679562, "question_id": 33534038, "link": "https://stackoverflow.com/questions/33534038/reducing-stdbind-template-code-bloat", "title": "Reducing std::bind template code bloat?", "body": "<p>I've written an object that stores a <code>std::function&lt;void(void*)&gt;</code>, which is passed in as an argument to the constructor.  The object will later call back this std::function at some point in the future.  This is implemented and working great.</p>\n\n<p>In each class which uses this object, they call the constructor in the initialization list like so:</p>\n\n<pre><code>mCallbackObj(std::bind(&amp;MyClass::MyFunc, this, _1))\n</code></pre>\n\n<p>However, I've found that every class which contains this object as a member is increasing my codespace by ~2K.  With potentially hundreds of places where this object will be used, and limited codespace options (this is an embedded product), a 2k hit per use isn't acceptable.</p>\n\n<p>One interesting observation is that if a class has a second object:</p>\n\n<pre><code>mCallbackObj2(std::bind(&amp;MyClass::MyOtherFunc, this, _1))\n</code></pre>\n\n<p>this only increases codespace by some ~150 bytes - very acceptable!  It is only when the object is used in different classes that I see the 2K hit.  Putting the classes all in one .cpp file doesn't help - still a 2k hit per class that contains this object.</p>\n\n<p>I've played around with using <code>extern template class std::function&lt;void(void*)&gt;;</code>, but this had no impact on ROM size.</p>\n\n<p>I am using gcc 4.8.  I'd love to use <code>std::function</code> and <code>std::bind</code>, but am about to give up and switch to class method pointers.  They wouldn't be nearly as clean, but hopefully more ROM efficient.</p>\n\n<p>Before I give up on this, are there any other options to help reduce my template codespace bloat?</p>\n"}, {"tags": ["java", "c++", "interface", "header-files"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1446679613, "post_id": 33534030, "comment_id": 54849498, "body": "You can use the PImpl idiom if it really bothers you or the separation benefit outweighs the PImpl cost."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1446679807, "post_id": 33534030, "comment_id": 54849563, "body": "Don&#39;t consider it an interface that way. Think of it more as an interface to the compiler/linker, which need to know e.g. the size of the class, which is determined by all non-static member variables."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446679833, "post_id": 33534030, "comment_id": 54849571, "body": "If that that notion of &quot;interface&quot; doesn&#39;t match your own, then don&#39;t use it."}, {"owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446679955, "post_id": 33534030, "comment_id": 54849611, "body": "@zenith That makes sense. Thanks."}, {"owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446680682, "post_id": 33534030, "comment_id": 54849889, "body": "@juanchopanza From where I stand it seems like you are telling me to ignore what I don&#39;t understand, rather than trying to learn about it."}], "answers": [{"tags": [], "owner": {"reputation": 4145, "user_id": 1410669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1", "display_name": "UpAndAdam", "link": "https://stackoverflow.com/users/1410669/upandadam"}, "is_accepted": true, "score": 1, "last_activity_date": 1446683758, "creation_date": 1446683758, "answer_id": 33534712, "question_id": 33534030, "link": "https://stackoverflow.com/questions/33534030/how-can-a-c-header-file-be-considered-a-classs-interface-if-it-contains-pri/33534712#33534712", "title": "How can a C++ header file be considered a class&#39;s &quot;interface&quot; if it contains private member variable declarations?", "body": "<p>No.  Header Files and interfaces were constructed in C long before C++. A common methodology of doing this in C land is through opaque types. Where an object has a pointer to something that is defined as char** or char[x] only denoting the size for you so you can't see it.  Good examples include most anything related to Sybase and IBM middleware. You can't 'construct' objects directly, you have to go through their factory methods.</p>\n\n<p>In C++ this is often realized via the Pimpl pattern and private members.  While you can still see some of the bits; you can still program against the interface.  Furthermore not EVERY type will be exposed to you.  Its not as cut and dry.</p>\n\n<p>Like anything else there are trade-offs.  With Interfaces ( which more accurately turns into a templated class IMHO) every single function has to be defined over and over again for every child class; this is good for run-time performance.   You can also do a abstract base class composed entirely of pure virtual functions; and this is indeed in many ways an interface; except you've also taken on the cost of virtual function look-ups for everything, some people don't like this.</p>\n\n<p>You could argue points both ways till the cows come home... people write exhaustive papers on this stuff.  </p>\n\n<p>In the end I would argue you are taking Java too literally as to what an INTERFACE is.  While there often isn't a concrete thing in a header that says literally \"i am an interface\" its often there and can be gleaned and discovered purely from the headers.</p>\n\n<p>It's also noteworthy as an interface because with the headers and shared object you can know how to 'use' the classes and compile against them without having the source code.  So again, it is an interface; just not always as \"pure\" as the one you see in java.</p>\n"}], "owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 33534712, "answer_count": 1, "score": 1, "last_activity_date": 1446683758, "creation_date": 1446679512, "last_edit_date": 1495540317, "question_id": 33534030, "link": "https://stackoverflow.com/questions/33534030/how-can-a-c-header-file-be-considered-a-classs-interface-if-it-contains-pri", "title": "How can a C++ header file be considered a class&#39;s &quot;interface&quot; if it contains private member variable declarations?", "body": "<p>Trying to relearn C++ after a long-term dose of Java, I've <a href=\"https://stackoverflow.com/questions/5215764/c-drawbacks-to-writing-whole-classes-in-header-files-for-small-projects\">read</a> on SO and also vaguely remember that when a class is declared in a header file and defined in a cpp file, that splits its interface (the h file) from its implementation (the cpp file).</p>\n\n<p>But how can the h file be considered an interface if it contains private member variable declarations? The choice of member variables constrains the implementation, does it not? A different implementation may use an entirely different set of variables.</p>\n\n<p>For example, a complex number class could be implemented with real and imaginary variables, or with magnitude and argument variables, yet support the same set of getters and setters and what have you.</p>\n\n<p>Wouldn't the only way of separating interface from implementation be by inheriting pure-virtuals from a base class akin to Java's <code>interface</code>s?</p>\n"}, {"tags": ["c++", "c", "linux", "pipe"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 6, "creation_date": 1446679526, "post_id": 33534015, "comment_id": 54849469, "body": "Why not use stderr? But I would use files for output and introduce parameters to enable them"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1446679884, "post_id": 33534015, "comment_id": 54849587, "body": "<code>stderr</code> or a log file are the two common solutions."}, {"owner": {"reputation": 533, "user_id": 670163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09359daf453c03ba6f007964a09e95b0?s=128&d=identicon&r=PG", "display_name": "RJinman", "link": "https://stackoverflow.com/users/670163/rjinman"}, "reply_to_user": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 2, "creation_date": 1446680083, "post_id": 33534015, "comment_id": 54849669, "body": "@Marged Yes, come to think of it, that&#39;s the norm isn&#39;t it? So on the server it would output the binary data to stdout, but when invoked on the terminal you&#39;d say --output-file=output.txt or something and get debug info to stdout. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2194, "user_id": 2142505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f16433508978bc7ab06ee6fd8f124b?s=128&d=identicon&r=PG", "display_name": "davejagoda", "link": "https://stackoverflow.com/users/2142505/davejagoda"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681863, "creation_date": 1446681863, "answer_id": 33534433, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver/33534433#33534433", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>Use stderr:</p>\n\n<pre><code>./program --some-option --verbose --file=\"./myfile.txt\" &gt; ./output.txt 2&gt; ./debug.out\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "is_accepted": true, "score": 2, "last_activity_date": 1446682431, "creation_date": 1446682431, "answer_id": 33534515, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver/33534515#33534515", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>It is common practice to use stderr and stdout to separate different kinds of output.</p>\n\n<p>But preferably you should use parameters to allow the user specify where and if to write the output of a certain category.\nYou could use something like <code>--enable-verbose-output</code> or <code>--processing-log=foo.log</code></p>\n\n<p>You might also consider handling this within the log file you perhaps create already. By setting a certain verbosity in the logging framework you could write the desired output into your log as needed.</p>\n"}], "owner": {"reputation": 533, "user_id": 670163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09359daf453c03ba6f007964a09e95b0?s=128&d=identicon&r=PG", "display_name": "RJinman", "link": "https://stackoverflow.com/users/670163/rjinman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33534515, "answer_count": 2, "score": 2, "last_activity_date": 1446682431, "creation_date": 1446679415, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>I'm writing an application that will open a file and output some processed version. It will be a graphical desktop application, but must also be suitable for running on a web server. It therefore needs to provide a suitable interface for a web app's back-end code (which will likely be PHP).</p>\n\n<p>I decided the most versatile kind of interface was a CLI, where the program is invoked once per file. The generated data is piped out via stdout. This way, no temporary files have to be created; it all happens in memory.</p>\n\n<p>I'd like to be able to invoke the program manually from the terminal and see a verbose debug output. In general, when stdout is being used for outputting a data stream, what's the conventional way of outputting other information? Should I use stderr or is there another way? I'll like to be able to invoke the program like so and see some debug output.</p>\n\n<p>./program --some-option --verbose --file=\"./myfile.txt\" > ./output.txt</p>\n\n<p>Can I use file descriptor 3 (or some other number) for the binary data and stdout for the verbose info and do this?</p>\n\n<p>./program --some-option --verbose --file=\"./myfile.txt\" 3> ./output.txt</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 1, "creation_date": 1446679428, "post_id": 33533999, "comment_id": 54849438, "body": "You&#39;re missing a semicolon, hover over the error, it should tell you something like that. Please include only the text of the code in the future. Images don&#39;t last forever."}, {"owner": {"reputation": 6266, "user_id": 5497207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e185da0f69447ef588089e15e15198?s=128&d=identicon&r=PG&f=1", "display_name": "Oguz Ozgul", "link": "https://stackoverflow.com/users/5497207/oguz-ozgul"}, "edited": false, "score": 0, "creation_date": 1446680016, "post_id": 33533999, "comment_id": 54849636, "body": "The image in the link is now missing. Can you please copy your source code to your question next time? The question editor allows you to insert and format your source code very well."}], "answers": [{"tags": [], "owner": {"reputation": 2178, "user_id": 2050745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2B5fs.jpg?s=128&g=1", "display_name": "Nejc Galof", "link": "https://stackoverflow.com/users/2050745/nejc-galof"}, "is_accepted": false, "score": 0, "last_activity_date": 1446680042, "creation_date": 1446680042, "answer_id": 33534133, "question_id": 33533999, "link": "https://stackoverflow.com/questions/33533999/new-to-c-im-not-sure-what-i-did-wrong/33534133#33534133", "title": "New to C++, I&#39;m not sure what I did wrong", "body": "<p>You need put a semicolon after every line, like this:</p>\n\n<p>return 0;</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1492055050, "creation_date": 1492055050, "answer_id": 43383175, "question_id": 33533999, "link": "https://stackoverflow.com/questions/33533999/new-to-c-im-not-sure-what-i-did-wrong/43383175#43383175", "title": "New to C++, I&#39;m not sure what I did wrong", "body": "<p>every statement must end with a semicolon and you are missing that in the return...</p>\n\n<p>do this: </p>\n\n<pre><code>return 0;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5526939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DVAE1GO5Z3M/AAAAAAAAAAI/AAAAAAAAAeg/eJH5XHyi6c8/photo.jpg?sz=128", "display_name": "Jordan Watterston", "link": "https://stackoverflow.com/users/5526939/jordan-watterston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1492055050, "creation_date": 1446679341, "last_edit_date": 1492054993, "question_id": 33533999, "link": "https://stackoverflow.com/questions/33533999/new-to-c-im-not-sure-what-i-did-wrong", "title": "New to C++, I&#39;m not sure what I did wrong", "body": "<p>I''m kind of new to this, but I'm trying to run a hello world program in Eclipse Mars and I just keep getting errors. Can anyone give me a hand?</p>\n\n<p><a href=\"https://i.stack.imgur.com/88iJ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/88iJ5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "one-definition-rule"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1446679869, "post_id": 33533944, "comment_id": 54849581, "body": "<code>Regarding two definitions of Test::test, since one of them is an inline definition, it does not violate ODR</code> Where did you get this idea?"}, {"owner": {"reputation": 2670, "user_id": 894233, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/deaa200122a0fa1e8f377c75fa407055?s=128&d=identicon&r=PG", "display_name": "SHH", "link": "https://stackoverflow.com/users/894233/shh"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446680111, "post_id": 33533944, "comment_id": 54849675, "body": "Well, i think it does not violate ODR, since this issue is not mentioned under ODR section in the C++ specification. &quot;If a function with external linkage is declared inline in one translation unit, it shall be declared inline in all translation units in which it appears; no diagnostic is required.&quot; is mentioned in function specifier section, which doesn&#39;t deal with ODR."}], "answers": [{"comments": [{"owner": {"reputation": 2670, "user_id": 894233, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/deaa200122a0fa1e8f377c75fa407055?s=128&d=identicon&r=PG", "display_name": "SHH", "link": "https://stackoverflow.com/users/894233/shh"}, "edited": false, "score": 0, "creation_date": 1446680369, "post_id": 33534067, "comment_id": 54849765, "body": "Thanks for the answer. But the statement you mentioned is not stated in ODR section of the specification. So can I say that the code I presented doesn&#39;t violate ODR? (it violates function specifiers rule, but not ODR)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 2670, "user_id": 894233, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/deaa200122a0fa1e8f377c75fa407055?s=128&d=identicon&r=PG", "display_name": "SHH", "link": "https://stackoverflow.com/users/894233/shh"}, "edited": false, "score": 0, "creation_date": 1446680583, "post_id": 33534067, "comment_id": 54849842, "body": "@SHH I can&#39;t say whether or not it does. The wording of the ODR has &quot;non-inline function&quot;. It therefore implicitly assumes that a function cannot be both inline and non-inline; it must be one or the other. The ODR doesn&#39;t even make sense when you try to declare the same function as both inline and non-inline."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1446679762, "creation_date": 1446679762, "answer_id": 33534067, "question_id": 33533944, "link": "https://stackoverflow.com/questions/33533944/c-inline-function-and-external-function-with-the-same-name-give-an-unexpected/33534067#33534067", "title": "C++ inline function and external function with the same name give an unexpected result", "body": "<p>You are not allowed to define the function as both <code>inline</code> and non-<code>inline</code>.</p>\n\n<blockquote>\n  <p>If a function with external linkage is\n  declared inline in one translation unit, it shall be declared inline in all translation units in which it appears;\n  no diagnostic is required.</p>\n</blockquote>\n\n<p>([dcl.fct.spec]/4)</p>\n"}], "owner": {"reputation": 2670, "user_id": 894233, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/deaa200122a0fa1e8f377c75fa407055?s=128&d=identicon&r=PG", "display_name": "SHH", "link": "https://stackoverflow.com/users/894233/shh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446679762, "creation_date": 1446679114, "last_edit_date": 1446679549, "question_id": 33533944, "link": "https://stackoverflow.com/questions/33533944/c-inline-function-and-external-function-with-the-same-name-give-an-unexpected", "title": "C++ inline function and external function with the same name give an unexpected result", "body": "<p>Following code do not violate One Definition Rule, yet it is giving an unexpected result:</p>\n\n<p><strong>Test.hpp</strong></p>\n\n<pre><code>class Test\n{\n    public:\n        int test();\n};\n</code></pre>\n\n<p><strong>Test1.cpp</strong></p>\n\n<pre><code>#include \"Test.hpp\"\n\nint Test::test()\n{\n    return 1;\n}\n\nint test1() // expected to return 1\n{\n    Test a = Test();\n    return a.test();\n}\n</code></pre>\n\n<p><strong>Test2.cpp</strong></p>\n\n<pre><code>#include \"Test.hpp\"\n\ninline int Test::test() // doesn't violate ODR\n{\n    return 99;\n}\n\nint test2() // expected to return 99\n{\n    Test a = Test();\n    return a.test();\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint test1();\nint test2();\n\nint main()\n{\n    std::cout &lt;&lt; test1() &lt;&lt; std::endl;\n    std::cout &lt;&lt; test2() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I am expecting it to print \"1 99\", but it always prints \"1 1\".</p>\n\n<p>Regarding two definitions of Test::test, since one of them is an inline definition, it does not violate One Definition Rule as well.</p>\n\n<p>So this program is valid, but it is not printing out expected result...</p>\n\n<p>Is there anything wrong with this program? Or am I misunderstanding something about ODR rule? (a reference to C++ standard would be helpful).</p>\n"}, {"tags": ["c++", "inheritance", "object-slicing", "constructor-chaining"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1446679280, "post_id": 33533931, "comment_id": 54849402, "body": "Your code doesn&#39;t compile."}, {"owner": {"reputation": 75, "user_id": 3579465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607b85f8a0e640cdeb2e7e8a19a484db?s=128&d=identicon&r=PG&f=1", "display_name": "MPenate", "link": "https://stackoverflow.com/users/3579465/mpenate"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446680855, "post_id": 33533931, "comment_id": 54849949, "body": "Sorry, missed a semicolon and  a couple colons when I copied it over"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446682496, "post_id": 33533931, "comment_id": 54850408, "body": "Prefer a simple copy-paste instead of re-writing it to avoid any typos."}], "owner": {"reputation": 75, "user_id": 3579465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607b85f8a0e640cdeb2e7e8a19a484db?s=128&d=identicon&r=PG&f=1", "display_name": "MPenate", "link": "https://stackoverflow.com/users/3579465/mpenate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1446679357, "answer_count": 0, "score": 0, "last_activity_date": 1446680872, "creation_date": 1446679050, "last_edit_date": 1446680872, "question_id": 33533931, "link": "https://stackoverflow.com/questions/33533931/inheritance-or-object-slicing", "closed_reason": "Duplicate", "title": "Inheritance or Object Slicing?", "body": "<p>I've read up so much on this, and can't figure out why my <code>Player</code> object is losing its <code>draw</code> function.</p>\n\n<p>Object class:</p>\n\n<pre><code>class Object {\n    public:\n        Object(){}\n\n        Object(Object* o){\n            o-&gt;draw();\n        }\n\n        virtual void draw() { cout &lt;&lt; \"Object draw\" &lt;&lt; endl; }\n};\n</code></pre>\n\n<p>Player class:</p>\n\n<pre><code>class Player : public Object {\n    public:\n        Player() : Object(this) {}\n\n        void draw(){ cout &lt;&lt; \"Player draw\" &lt;&lt; endl; }\n};\n</code></pre>\n\n<p>When I run this code:</p>\n\n<pre><code>int main(){\n    Object o;\n    Player p;\n}\n</code></pre>\n\n<p>The output is: <code>Object draw</code>. I expect it to be <code>Player draw</code> so the object is either not overriding or the object is getting sliced when it goes through the function.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1446679213, "post_id": 33533902, "comment_id": 54849378, "body": "probably not related to your problem, but you mustn&#39;t directly compile header files. Remove <code>*.hpp</code> from args to <code>g++</code>"}], "answers": [{"tags": [], "owner": {"reputation": 974, "user_id": 4229825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dMNcM.jpg?s=128&g=1", "display_name": "0x1337", "link": "https://stackoverflow.com/users/4229825/0x1337"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679610, "creation_date": 1446679610, "answer_id": 33534043, "question_id": 33533902, "link": "https://stackoverflow.com/questions/33533902/g-compile-error-undefined-symbols-for-architecture-x86-64/33534043#33534043", "title": "g++ compile error (Undefined symbols for architecture x86_64)", "body": "<p><code>BaseServer::~BaseServer()</code> was <code>inline</code>. Without <code>inline</code> all works properly.</p>\n"}], "owner": {"reputation": 974, "user_id": 4229825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/dMNcM.jpg?s=128&g=1", "display_name": "0x1337", "link": "https://stackoverflow.com/users/4229825/0x1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446679610, "creation_date": 1446678944, "last_edit_date": 1446679026, "question_id": 33533902, "link": "https://stackoverflow.com/questions/33533902/g-compile-error-undefined-symbols-for-architecture-x86-64", "title": "g++ compile error (Undefined symbols for architecture x86_64)", "body": "<p>When I compile code by g++-4.9</p>\n\n<pre><code>g++ main.cpp base_server.cpp base_server.hpp threaded_server.cpp threaded_server.hpp\n</code></pre>\n\n<p>I'm getting error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"BaseServer::~BaseServer()\", referenced from:\n      ThreadedServer::~ThreadedServer() in ccQVIp8S.o\n      ThreadedServer::~ThreadedServer() in ccQVIp8S.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\nmake: *** [all] Error 1\n</code></pre>\n\n<p>When I compile by clang++ there are no any errors and warning. How to compile it by g++ ?</p>\n\n<p>base_server.hpp: <a href=\"https://gist.github.com/yutkin/ccecf7d6132ab63db3bd\" rel=\"nofollow\">https://gist.github.com/yutkin/ccecf7d6132ab63db3bd</a></p>\n\n<p>base_server.cpp: <a href=\"https://gist.github.com/yutkin/833bf593cf1775b3cb21\" rel=\"nofollow\">https://gist.github.com/yutkin/833bf593cf1775b3cb21</a></p>\n\n<p>threaded_server.hpp:  <a href=\"https://gist.github.com/yutkin/61ef0a91f1e1c811334b\" rel=\"nofollow\">https://gist.github.com/yutkin/61ef0a91f1e1c811334b</a></p>\n\n<p>threaded_server.cpp: <a href=\"https://gist.github.com/yutkin/62821e6791565a54edac\" rel=\"nofollow\">https://gist.github.com/yutkin/62821e6791565a54edac</a></p>\n\n<p>OS X 10.11.1</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2013", "windows-phone", "qml"], "comments": [{"owner": {"reputation": 4996, "user_id": 462639, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7019183695a9fbd1208d5f6e5fbc1794?s=128&d=identicon&r=PG", "display_name": "demonplus", "link": "https://stackoverflow.com/users/462639/demonplus"}, "edited": false, "score": 1, "creation_date": 1446699945, "post_id": 33533896, "comment_id": 54855104, "body": "First part of your question is duplicate of this: <a href=\"http://stackoverflow.com/questions/31420407/qmap-iteration-crash\">stackoverflow.com/questions/31420407/qmap-iteration-crash</a>"}, {"owner": {"reputation": 4996, "user_id": 462639, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7019183695a9fbd1208d5f6e5fbc1794?s=128&d=identicon&r=PG", "display_name": "demonplus", "link": "https://stackoverflow.com/users/462639/demonplus"}, "edited": false, "score": 0, "creation_date": 1446699966, "post_id": 33533896, "comment_id": 54855111, "body": "And could you please post two different questions as different questions?"}, {"owner": {"reputation": 4390, "user_id": 126517, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c95fa0b3a7230398100ed67a9d10d306?s=128&d=identicon&r=PG", "display_name": "Vladimir Prus", "link": "https://stackoverflow.com/users/126517/vladimir-prus"}, "edited": false, "score": 0, "creation_date": 1446705804, "post_id": 33533896, "comment_id": 54857175, "body": "The first part of the question say that QMap cannot be initialized with initializer list, whereas 31420407 discusses a runtime crash."}, {"owner": {"reputation": 4390, "user_id": 126517, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c95fa0b3a7230398100ed67a9d10d306?s=128&d=identicon&r=PG", "display_name": "Vladimir Prus", "link": "https://stackoverflow.com/users/126517/vladimir-prus"}, "edited": false, "score": 0, "creation_date": 1446706040, "post_id": 33533896, "comment_id": 54857264, "body": "Also, I am using initializer list syntax for QMap with VS 2013 and Qt 5.4.1 in real code with no issues, either compile or runtime. And the above code snippet compiles for me as well. What Qt version do you have?"}, {"owner": {"reputation": 819, "user_id": 3868194, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e6a4a108c4279ad84b61472a34df5923?s=128&d=identicon&r=PG&f=1", "display_name": "Szymson", "link": "https://stackoverflow.com/users/3868194/szymson"}, "edited": false, "score": 0, "creation_date": 1446708326, "post_id": 33533896, "comment_id": 54858243, "body": "I&#39;m using Qt 5.5. I will update Visual Studio ASAP and try again."}, {"owner": {"reputation": 819, "user_id": 3868194, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e6a4a108c4279ad84b61472a34df5923?s=128&d=identicon&r=PG&f=1", "display_name": "Szymson", "link": "https://stackoverflow.com/users/3868194/szymson"}, "edited": false, "score": 0, "creation_date": 1446721343, "post_id": 33533896, "comment_id": 54865781, "body": "After updated to Update 5 i get other error: <code>Error\t1\terror C2797: &#39;Model::number&#39;: list initialization inside member initializer list or non-static data member initializer is not implemented\t...&#47;project&#47;model.h\t</code>"}], "owner": {"reputation": 819, "user_id": 3868194, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e6a4a108c4279ad84b61472a34df5923?s=128&d=identicon&r=PG&f=1", "display_name": "Szymson", "link": "https://stackoverflow.com/users/3868194/szymson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446678921, "creation_date": 1446678921, "question_id": 33533896, "link": "https://stackoverflow.com/questions/33533896/qmap-visual-studio-error", "title": "QMap Visual Studio error", "body": "<p>Hello I have project which i can compile in Qt Creator. Now I installed <code>Visual Studio 2013 Ultimate</code> and <code>Qt AddIn</code>. When I try Debug this project in <code>Visual Studio</code> I get error:<br>\n<code>Error 4 error C2661: 'QMap&lt;int, Model*&gt;::QMap' : no overloaded function takes 5 arguments  D:\\projekt... 24 1 projekt</code></p>\n\n<p>definition of QMap:</p>\n\n<pre><code>QMap&lt;int, Model*&gt; modelItems =\n    {\n        {1, new Model(\"One\")},\n        {2, new Model(\"Two\")},\n        {3, new Model(\"Three\")},\n        {4, new Model(\"Four\")},\n        {5, new Model(\"Five\")},\n    };\n</code></pre>\n\n<p>And my next question:<br>\n* Is there possibility to compile version for Windows Phone if I use qml for GUI ?</p>\n"}, {"tags": ["c++", "if-statement", "optimization", "conditional", "bitwise-operators"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 5, "creation_date": 1446679084, "post_id": 33533797, "comment_id": 54849343, "body": "You need to show the code around it. There&#39;s no way to optimize an if-statement <i>by itself</i>. Context matters."}, {"owner": {"reputation": 341, "user_id": 4180489, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003030278321/picture?type=large", "display_name": "Saharsh Bishnoi", "link": "https://stackoverflow.com/users/4180489/saharsh-bishnoi"}, "edited": false, "score": 3, "creation_date": 1446679179, "post_id": 33533797, "comment_id": 54849370, "body": "<a href=\"https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\" rel=\"nofollow noreferrer\">software.intel.com/en-us/articles/&hellip;</a>"}, {"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446679765, "post_id": 33533797, "comment_id": 54849552, "body": "@zenith that&#39;s exactly what I was interested in - optimizing the statement itself, by rewriting it with bitwise operators for example (that should work faster, right?)"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 2, "creation_date": 1446679891, "post_id": 33533797, "comment_id": 54849589, "body": "Why would something like that make it work faster? Every half-decent compiler is able to make such optimizations by itself."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1446680005, "post_id": 33533797, "comment_id": 54849628, "body": "Also, if <code>a</code> is not a local variable, consider making it local. That could be a bottleneck (but should not with a decent compiler with optimizations turned on)."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1446680060, "post_id": 33533797, "comment_id": 54849655, "body": "it should go without saying, but just to be clear: you are compiling with appropriate optimizations enable, right?"}, {"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446680617, "post_id": 33533797, "comment_id": 54849856, "body": "@bolov I&#39;m using Visual Studio. I&#39;ve went through settings, optimization was set to /O2. After putting it to /Ox, this if statement is still 20-something percent of computing time, but overall time went down by a second. Thanks for reminding this!"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1446680765, "post_id": 33533797, "comment_id": 54849923, "body": "@I\u013cjaGubins This isn&#39;t the kind of thing you can optimize by itself. What else could you possibly do that you haven&#39;t already done? You&#39;ve specified precisely and clearly what you want in the simplest imaginable way. What else could help the compiler build better code? The performance issue likely has to do with what has to happen to get <code>a</code>&#39;s value or branch prediction, or other things we can&#39;t tell from just this bit. (You haven&#39;t even told us whether the branch is almost always taken, almost never taken, random, follows a pattern, or anything else. So on what basis could we optimize it?)"}, {"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446682191, "post_id": 33533797, "comment_id": 54850325, "body": "@DavidSchwartz I realize that it is possible to lower that bottleneck simply by calling that if statement less, but I was wondering specially about if there is anything possible about that <code>if</code>. I&#39;ve just checked this, around 90% of all times it goes inside that <code>if</code>. Is there anything that can be done with this? I know that GCC has <code>expect</code>, but from what I&#39;ve found, Visual Studio compiler doesn&#39;t support this."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446683376, "post_id": 33533797, "comment_id": 54850650, "body": "@I\u013cjaGubins It depends what&#39;s inside the <code>if</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "edited": false, "score": 0, "creation_date": 1446680069, "post_id": 33534069, "comment_id": 54849658, "body": "If there is only one <code>if</code>, without <code>else</code>, does that still create branches? And is there any chance to work around it?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1446680137, "post_id": 33534069, "comment_id": 54849683, "body": "@yes ofc there are branches: there are 2 paths: one if cond is true, one if cond if false (on this path you skip the <code>then</code> part of <code>if</code>)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "edited": false, "score": 1, "creation_date": 1446680197, "post_id": 33534069, "comment_id": 54849706, "body": "@I\u013cjaGubins Of course an <code>if</code> without <code>else</code> is a branch, you either execute the code in the <code>if</code> or you don&#39;t. <i>&quot; And is there any chance to work around it?&quot;</i> Depends on your code and program logic, if you can make the decision earlier, it might help."}, {"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "edited": false, "score": 0, "creation_date": 1446682386, "post_id": 33534069, "comment_id": 54850377, "body": "@BaummitAugen I&#39;ve just checked, around 90% of times it goes inside that if statement. Thanks for <code>__builtin_expect</code>, but I&#39;d like to use Visual Studio built-in compiler, which from I&#39;ve seen, doesn&#39;t have this."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "edited": false, "score": 1, "creation_date": 1446682609, "post_id": 33534069, "comment_id": 54850441, "body": "@I\u013cjaGubins <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/2dbdca4d-c0c0-40a3-993b-dc78817be26e/branch-hints?forum=vclanguage\" rel=\"nofollow noreferrer\">This thread</a> says that PGO might do the right thing for you, but I have no experience with Microsoft compilers."}, {"owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "edited": false, "score": 0, "creation_date": 1446684292, "post_id": 33534069, "comment_id": 54850934, "body": "@BaummitAugen Thank you! Using PGO trimmed another second off total time running!"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 3, "last_activity_date": 1446681623, "last_edit_date": 1446681623, "creation_date": 1446679769, "answer_id": 33534069, "question_id": 33533797, "link": "https://stackoverflow.com/questions/33533797/optimize-simple-comparison-with-zero-for-performance/33534069#33534069", "title": "Optimize simple comparison with zero for performance", "body": "<p>Unless your compiler is garbage, there is nothing you can do to speed up integer comparison.</p>\n\n<p>However, it is possible that the bottleneck you observe is not really the comparison itself, but rather the result of unlucky branch prediction.</p>\n\n<p>There are two ways of getting around this:</p>\n\n<p>If <em>\"to branch or not to branch\"</em> follows a pattern, move this last second decision further up in your program logic where you can use the pattern, just don't branch in your hot function. This might require serious thinking. A hacky way to find out whether you have patterns: Print <code>1</code> if you branch and <code>0</code> else for enough calls, Zip is up and see whether the resulting archive gets much smaller (in bits) than the number of values you printed. (Of course there are also smart formulas for that if you like it more theoretical.)</p>\n\n<p>If you choose one branch over the other most of the time, you can tell the compiler which branch is the likely one. With gcc, checkout <code>__builtin_expect</code>, for other compilers, read the manual.</p>\n\n<p><strong>Important for both solutions:</strong> You will need to measure whether that actually helped. Especially the second one will not be magically be better, it might even make things much worse. </p>\n"}], "owner": {"reputation": 1417, "user_id": 1668421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f53d8b8be6abee9494d094adf725bad?s=128&d=identicon&r=PG", "display_name": "the-lay", "link": "https://stackoverflow.com/users/1668421/the-lay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 33534069, "answer_count": 1, "score": -2, "last_activity_date": 1446681623, "creation_date": 1446678504, "question_id": 33533797, "link": "https://stackoverflow.com/questions/33533797/optimize-simple-comparison-with-zero-for-performance", "title": "Optimize simple comparison with zero for performance", "body": "<p>I have a bottleneck (about 20% CPU time) in my code which is in following if statement:</p>\n\n<pre><code>if (a == 0) { // here\n    ...\n}\n</code></pre>\n\n<p>where <code>a</code> is a <code>uint8_t</code>, so a number from 0 to 255.</p>\n\n<p>Are there any low level optimizations to make it faster?<br>\nI thought about using bitwise NOR <code>(~(a| 0))</code>, but that would work only if <code>a</code> was a 1-bit, right?</p>\n\n<p>Just in case: I don't care about code readability in this particular case.</p>\n"}, {"tags": ["java", "c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 1, "creation_date": 1446677925, "post_id": 33533669, "comment_id": 54848934, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446678068, "post_id": 33533669, "comment_id": 54848983, "body": "Java, C++, C, C#, Python, Haskell, BF, JS, MipsAsm?"}, {"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446678079, "post_id": 33533669, "comment_id": 54848989, "body": "I actually read that post, and I still require clarification, as from what I understand, it states that lists should not have changed. I am assuming that the solution is written in Java."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446678271, "post_id": 33533669, "comment_id": 54849064, "body": "@ArthurLee In the C++ sense, Java only has pointers. If you have a <code>MyClass m = new MyClass();</code>, a <code>m = somethingElse;</code> won&#39;t change the value of the existing old object, but any passing around passes only a reference/pointer to the same old object instead of copying it."}, {"owner": {"reputation": 40467, "user_id": 25216, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WurYy.jpg?s=128&g=1", "display_name": "Andrew Shepherd", "link": "https://stackoverflow.com/users/25216/andrew-shepherd"}, "edited": false, "score": 0, "creation_date": 1446678284, "post_id": 33533669, "comment_id": 54849073, "body": "Does this even compile? <code>lists</code> is defined as a parameter, and then it&#39;s also defined as a variable (four lines from the bottom)."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1446678316, "post_id": 33533669, "comment_id": 54849084, "body": "in java and C# &#39;ArrayList&lt;LinkedList&lt;TreeNode&gt;&gt;` is passed by reference (actually, in a way, by value since all class instances are references) in C++ it would depend on how the copy ctor is coded as it is passed by-value (no <code>*</code> or <code>&amp;</code>) but it could cause changes to the original object if the copy ctor were written in the &quot;right&quot; wrong way."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "reply_to_user": {"reputation": 40467, "user_id": 25216, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WurYy.jpg?s=128&g=1", "display_name": "Andrew Shepherd", "link": "https://stackoverflow.com/users/25216/andrew-shepherd"}, "edited": false, "score": 0, "creation_date": 1446678383, "post_id": 33533669, "comment_id": 54849110, "body": "@AndrewShepherd, that line is in a different function overload altogether."}, {"owner": {"reputation": 2095, "user_id": 5349263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c66ff89ed72d475248cef7878d5555?s=128&d=identicon&r=PG&f=1", "display_name": "blm", "link": "https://stackoverflow.com/users/5349263/blm"}, "edited": false, "score": 0, "creation_date": 1446678410, "post_id": 33533669, "comment_id": 54849119, "body": "lists is a reference to a complex data structure. While the reference itself is passed by value, it&#39;s a shallow copy of the reference, so whatever it references can still be modified (assuming it&#39;s modifiable, Strings aren&#39;t for example)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1446678779, "post_id": 33533669, "comment_id": 54849242, "body": "Java passes references by value. The &quot;references&quot; that are values in Java are unrelated to the &quot;references&quot; of &quot;pass by reference&quot;. (It&#39;s an unfortunate naming collision.) C++ introduces yet another meaning for &quot;reference&quot;."}, {"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446679249, "post_id": 33533669, "comment_id": 54849393, "body": "So if I understand properly, in Java/C#, passing an object (not a primitive) as a parameter into a function is passing the value of the reference, not the value itself? On a side note then, why would  int[] reference = { 1, 2, 3, 4, 5 };             int[] newReference = reference;             reference[0] = 0;             for (int i = 0; i &lt; newReference.Length; i++)             {                 Console.WriteLine(newReference[i]);             } print out 0, 2, 3, 4, 5, whereas  Node node = current; current = current.next; node would still point to what current originally was?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1446756113, "post_id": 33533669, "comment_id": 54888266, "body": "<code>passing an object (not a primitive) as a parameter into a function is passing the value of the reference, not the value itself?</code> Yes. Assigning a completely new object to the variable name inside the function won&#39;t do anything outside, but changing the passed object does."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1446756356, "post_id": 33533669, "comment_id": 54888413, "body": "<code>reference</code> and <code>newReference</code> are two distinct references to the same thing. <code>reference[0]</code> and <code>newReference[0]</code> <i>are</i> the same thing. (An array can be thought of as a single object. You&#39;re changing the content of a object here.).<code>Node node = current;</code> Now node and current are two references to the same thing. Then you change where current should reference to. It doesn&#39;t matter for node."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446682384, "post_id": 33534051, "comment_id": 54850375, "body": "I think that makes sense. So if I had a function for Binary Search Tree deletion, like so: public Node BSTDelete(Node root, int value)  { delete(root, int value); return root; } Root would reflect the root of the BST after a node was deleted from it?"}, {"owner": {"reputation": 231, "user_id": 1619628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtei7.jpg?s=128&g=1", "display_name": "Hendrik Simon", "link": "https://stackoverflow.com/users/1619628/hendrik-simon"}, "reply_to_user": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446682742, "post_id": 33534051, "comment_id": 54850477, "body": "I&#39;m not sure what you&#39;re doing in delete, but as long as you don&#39;t change the value of the reference all changes will happen on the same object."}, {"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446683915, "post_id": 33534051, "comment_id": 54850807, "body": "And if delete is recursive and root gets set to root.left/root.right, then the changes are ignored?"}, {"owner": {"reputation": 231, "user_id": 1619628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtei7.jpg?s=128&g=1", "display_name": "Hendrik Simon", "link": "https://stackoverflow.com/users/1619628/hendrik-simon"}, "reply_to_user": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446684253, "post_id": 33534051, "comment_id": 54850924, "body": "Recursion does not change the way java passes parameters. It&#39;s still passing the reference by value."}, {"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446686877, "post_id": 33534051, "comment_id": 54851684, "body": "If inside delete, during the traversal down to the node being deleted, root = root.left or root = root.right happens, and then it calls delete() again, would root in BSTDelete still point to the original root, or would it point to whatever root ended up being after being set to .left or .right a bunch of times?"}, {"owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "edited": false, "score": 0, "creation_date": 1446687233, "post_id": 33534051, "comment_id": 54851772, "body": "This is purely a theoretical question, for if I were implementing delete, I would set root.left = delete(root.left, value) etc instead of making root = root.left."}], "tags": [], "owner": {"reputation": 231, "user_id": 1619628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rtei7.jpg?s=128&g=1", "display_name": "Hendrik Simon", "link": "https://stackoverflow.com/users/1619628/hendrik-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679665, "last_edit_date": 1495541744, "creation_date": 1446679665, "answer_id": 33534051, "question_id": 33533669, "link": "https://stackoverflow.com/questions/33533669/passing-by-reference-vs-passing-by-value/33534051#33534051", "title": "Passing by reference vs Passing by value", "body": "<p>Java is always pass by value. However the value passed for complex datatypes is that of the reference, so the <code>lists</code> reference passed into <code>createLevelLinkedList(...)</code> refers to the same object as the original <code>lists</code> reference.</p>\n\n<p>As long as you don't change the value of the reference in the  <code>createLevelLinkedList(...)</code> method you will change the original object.</p>\n\n<p>As Paul mentioned, it's all written down here:</p>\n\n<p><a href=\"https://stackoverflow.com/a/40523/1619628\">https://stackoverflow.com/a/40523/1619628</a></p>\n"}], "owner": {"reputation": 161, "user_id": 2705374, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aba3e6f696b017bbd02e7357ffc1e4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Lee", "link": "https://stackoverflow.com/users/2705374/arthur-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446679665, "creation_date": 1446677816, "last_edit_date": 1446679504, "question_id": 33533669, "link": "https://stackoverflow.com/questions/33533669/passing-by-reference-vs-passing-by-value", "title": "Passing by reference vs Passing by value", "body": "<p>I'm currently studying Cracking the Coding interview, and I believe my basic understanding of pointers are being called into question. I am currently looking at a solution to make a linked list for every level of a binary tree. The solution is as follows:</p>\n\n<pre><code>void createLevelLinkedList(TreeNode root, ArrayList&lt;LinkedList&lt;TreeNode\u00bb lists, int level) {\n    if (root == null) return; // base case\n    LinkedList&lt;TreeNode&gt; list = null;\n    if (lists.size() == level) { // Level not contained in list\n        list = new LinkedList&lt;TreeNode&gt;();\n        /* Levels are always traversed in order. So., if this is the\n         * first time we've visited level i, we must have seen levels\n         * 0 through i - 1. We can therefore safely add the level at\n         * the end. */\n        lists.add(list);\n    } else {\n        list = lists.get(level);\n    }\n    list.add(root);\n    createLevelLinkedList(root.left, lists, level + 1);\n    createLevelLinkedList(root.right, lists, level + 1);\n}\n\nArrayList&lt;LinkedList&lt;TreeNode\u00bb createLevelLinkedList(TreeNode root) {\n    ArrayList&lt;LinkedList&lt;TreeNode\u00bb lists = new ArrayList&lt;LinkedList&lt;TreeNode\u00bb();\n    createLevelLinkedList(root, lists, 0);\n    return lists;\n}\n</code></pre>\n\n<p>This solution greatly confuses me, because in the createLeveLinkedList function with only the root parameter (the driver function), a new list of linked lists is created. From a java perspective, if it is passed by value, after createLevelLinkedLists(root, lists, 0) is called, to my understanding, lists should not have changed. </p>\n\n<p>If it was C++, I could understand it if they passed the pointer of the lists object into the function.</p>\n\n<p>Could someone please clarify this?</p>\n\n<p>Apologies for the formatting, I'm still not sure how it works on stackoverflow.</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c++", "memory-management", "clang", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 3057, "user_id": 14263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c3c9a2f47e1d2db6ef80387b8715364?s=128&d=identicon&r=PG", "display_name": "Marco Luglio", "link": "https://stackoverflow.com/users/14263/marco-luglio"}, "edited": false, "score": 0, "creation_date": 1600920147, "post_id": 33533608, "comment_id": 113242662, "body": "There\u2019s a site that looks promising: <a href=\"https://mapping-high-level-constructs-to-llvm-ir.readthedocs.io/en/latest/basic-constructs/structures.html\" rel=\"nofollow noreferrer\">mapping-high-level-constructs-to-llvm-ir.readthedocs.io/en/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4143, "user_id": 400048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8282b525f39ea9cb9e1c2d78474339a?s=128&d=identicon&r=PG", "display_name": "zcourts", "link": "https://stackoverflow.com/users/400048/zcourts"}, "edited": false, "score": 2, "creation_date": 1446680246, "post_id": 33533697, "comment_id": 54849727, "body": "I see, that makes sense. Thanks for the pretty quick response."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 4143, "user_id": 400048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8282b525f39ea9cb9e1c2d78474339a?s=128&d=identicon&r=PG", "display_name": "zcourts", "link": "https://stackoverflow.com/users/400048/zcourts"}, "edited": false, "score": 1, "creation_date": 1446747738, "post_id": 33533697, "comment_id": 54883427, "body": "It was purely coincidental."}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 13, "last_activity_date": 1446678316, "last_edit_date": 1446678316, "creation_date": 1446677982, "answer_id": 33533697, "question_id": 33533608, "link": "https://stackoverflow.com/questions/33533608/understanding-how-memory-allocation-works-llvm/33533697#33533697", "title": "Understanding how memory allocation works (LLVM)", "body": "<blockquote>\n  <p>my interpretation of the alloca instruction docs is that it anything\n  created from that gets freed on return so I can't use that right, it's\n  essentially only for local variables?</p>\n</blockquote>\n\n<p>Yes. Furthermore, the current advice on LLVM IR is that although <code>alloca</code> works as you expect it to, optimizations are another case. They advise that you <code>alloca</code> all of your locals in the entry block right away, even if you don't allow the user access to them or they don't always contain meaningful data.</p>\n\n<p>Heap allocation is a library feature. It is not a feature of LLVM or the compiler. When you use <code>new T()</code>, the compiler simply calls <code>operator new</code> to get the memory and then constructs <code>T</code> there. There is no magic involved. Most of the junk that you see there is C++-ABI specific rather than any requirement of LLVM. It eventually lowers into something like <code>void* p = malloc(size); new(p) T();</code>. For pretty much all types <code>T</code>, this pretty much boils down to a series of stores into <code>p</code> or calling a user-defined function.</p>\n\n<p>You can use the memory allocation function from the runtime library of your choice. </p>\n\n<blockquote>\n  <p>trying to understand how to allocate/construct an LLVM struct type</p>\n</blockquote>\n\n<p>The LLVM type system does not include the notion of construction. That is a notion of the source language. </p>\n\n<p>As far as LLVM is concerned, a struct is just a bunch of bits, and all memory locations are more-or-less the same. If you want the bits to be a particular thing, then store the bits you want to that location. If you want to put the bits on the heap, then call a runtime library heap allocation function and store the bits into that location.</p>\n\n<p>Note that garbage collection, however, is a somewhat different story, as there is some awkward stuff going on w.r.t. finding locals on the stack for marking.</p>\n\n<p>For the record, you will <em>not</em> get far trying to understand Clang's LLVM IR. I've been doing that for several years now and it is batshit crazy and will take you that long to start to get a grip, not to mention full of C++-specific ABI details that you don't want to know about. You will get a lot further asking in #llvm in their IRC channel or asking specific questions here than in trying to reverse-engineer that.</p>\n"}, {"comments": [{"owner": {"reputation": 4143, "user_id": 400048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8282b525f39ea9cb9e1c2d78474339a?s=128&d=identicon&r=PG", "display_name": "zcourts", "link": "https://stackoverflow.com/users/400048/zcourts"}, "edited": false, "score": 0, "creation_date": 1446680530, "post_id": 33534173, "comment_id": 54849824, "body": "ohhh, neat, the comments are massively useful"}], "tags": [], "owner": {"reputation": 24436, "user_id": 242762, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f7d4d2fea0deac168bc7e00e6d8f1db5?s=128&d=identicon&r=PG", "display_name": "Oak", "link": "https://stackoverflow.com/users/242762/oak"}, "is_accepted": false, "score": 5, "last_activity_date": 1446680342, "creation_date": 1446680342, "answer_id": 33534173, "question_id": 33533608, "link": "https://stackoverflow.com/questions/33533608/understanding-how-memory-allocation-works-llvm/33534173#33534173", "title": "Understanding how memory allocation works (LLVM)", "body": "<p>I don't recommend looking at unoptimized IR emitted by Clang - it's way too verbose. <code>-O1</code> makes it a lot more readable - here's the <code>-O1</code> version with comments annotating the lines (also I've reordered two lines to make it slightly more readable):</p>\n\n<pre>\n%struct.Alloc = type { i32 }                   ; Define the Alloc type.\n\ndefine noalias %struct.Alloc* @_Z8allocPtrv() #0 {\n  %1 = tail call noalias i8* @_Znwj(i32 4) #2  <b>; Call _Znwj(4). This retuns i8*.</b>\n  %3 = bitcast i8* %1 to i32*                  <b>; Cast the returned value to i32* (int*)...</b>\n  store i32 0, i32* %3, align 4                <b>; ...and zero its content.</b>\n  %2 = bitcast i8* %1 to %struct.Alloc*        <b>; Cast the returned value to Alloc*...</b>\n  ret %struct.Alloc* %2                        <b>; ...and return it.</b>\n}\n\n<b>; Declare the _Znwj function. This doesn't need to be defined since it's already defined\n; in libstdc++: this is 'operator new'. You can see this by passing this string through a\n; C++ demangler, for example the one at http://demangler.com/.</b>\ndeclare noalias i8* @_Znwj(i32) #1\n\ndefine i32 @main() #0 {\n  %1 = tail call %struct.Alloc* @_Z8allocPtrv()  <b>; Call _Z8allocPtrv (Defined above).</b>\n  ret i32 0\n}\n</pre>\n\n<p>This is a <code>new</code> call, not a local allocation, so it will not be cleared when leaving <code>@_Z8allocPtrv</code>. Local allocations are indeed performed in LLVM IR with the <code>alloca</code> instruction, and not a <code>new</code> call.</p>\n\n<p>If you're curious <em>how</em> <code>new</code> works, I believe its standard implementation uses <code>malloc</code>, which is translated by the compiler that compiled the library to some function that includes system call(s).</p>\n"}], "owner": {"reputation": 4143, "user_id": 400048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8282b525f39ea9cb9e1c2d78474339a?s=128&d=identicon&r=PG", "display_name": "zcourts", "link": "https://stackoverflow.com/users/400048/zcourts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6934, "favorite_count": 3, "accepted_answer_id": 33533697, "answer_count": 2, "score": 12, "last_activity_date": 1446680342, "creation_date": 1446677554, "last_edit_date": 1446678460, "question_id": 33533608, "link": "https://stackoverflow.com/questions/33533608/understanding-how-memory-allocation-works-llvm", "title": "Understanding how memory allocation works (LLVM)", "body": "<p>I'm making progress on a toy compiler (first time), and trying to understand how to allocate/construct an LLVM struct type.\nThe Kaleidoscope tutorial doesn't include or even mention this and I don't know what I'm looking for in the LLVM source/tests to find possible examples.</p>\n\n<p>So I've written a simply C++ example, dumped the IR with clang in an effort to try to understand what it produces but to be honest I don't follow it all. The things obvious to me are the function definition/declarations and some function calls and a <code>memset</code> call so I get pieces of it but it doesn't all come together for me yet. (P.S my interpretation of the alloca instruction docs is that it anything created from that gets freed on return so I can't use that right, it's essentially only for local variables?)</p>\n\n<p>What I've done is:</p>\n\n<p><code>alloc.cpp</code></p>\n\n<pre><code>struct Alloc {\n  int age;\n};\n\n//Alloc allocCpy() {\n//  return *new Alloc();\n//}\n\nAlloc *allocPtr() {\n  return new Alloc();\n}\n\nint main() {\n  Alloc *ptr = allocPtr();\n//  ptr-&gt;name = \"Courtney\";\n//  Alloc cpy = allocCpy();\n//  cpy.name = \"Robinson\";\n//  std::cout &lt;&lt; ptr-&gt;name &lt;&lt; std::endl;\n//  std::cout &lt;&lt; cpy.name &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>Then run <code>clang -S -emit-llvm alloc.cpp</code> to produce <code>alloc.ll</code></p>\n\n<pre><code>; ModuleID = 'alloc.cpp'\ntarget datalayout = \"e-m:o-i64:64-f80:128-n8:16:32:64-S128\"\ntarget triple = \"x86_64-apple-macosx10.11.0\"\n\n%struct.Alloc = type { i32 }\n\n; Function Attrs: ssp uwtable\ndefine %struct.Alloc* @_Z8allocPtrv() #0 {\nentry:\n  %call = call noalias i8* @_Znwm(i64 4) #3\n  %0 = bitcast i8* %call to %struct.Alloc*\n  %1 = bitcast %struct.Alloc* %0 to i8*\n  call void @llvm.memset.p0i8.i64(i8* %1, i8 0, i64 4, i32 4, i1 false)\n  ret %struct.Alloc* %0\n}\n\n; Function Attrs: nobuiltin\ndeclare noalias i8* @_Znwm(i64) #1\n\n; Function Attrs: nounwind\ndeclare void @llvm.memset.p0i8.i64(i8* nocapture, i8, i64, i32, i1) #2\n\n; Function Attrs: ssp uwtable\ndefine i32 @main() #0 {\nentry:\n  %retval = alloca i32, align 4\n  %ptr = alloca %struct.Alloc*, align 8\n  store i32 0, i32* %retval\n  %call = call %struct.Alloc* @_Z8allocPtrv()\n  store %struct.Alloc* %call, %struct.Alloc** %ptr, align 8\n  ret i32 0\n}\n\nattributes #0 = { ssp uwtable \"disable-tail-calls\"=\"false\" \"less-precise-fpmad\"=\"false\" \"no-frame-pointer-elim\"=\"true\" \"no-frame-pointer-elim-non-leaf\" \"no-infs-fp-math\"=\"false\" \"no-nans-fp-math\"=\"false\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"core2\" \"target-features\"=\"+cx16,+sse,+sse2,+sse3,+ssse3\" \"unsafe-fp-math\"=\"false\" \"use-soft-float\"=\"false\" }\nattributes #1 = { nobuiltin \"disable-tail-calls\"=\"false\" \"less-precise-fpmad\"=\"false\" \"no-frame-pointer-elim\"=\"true\" \"no-frame-pointer-elim-non-leaf\" \"no-infs-fp-math\"=\"false\" \"no-nans-fp-math\"=\"false\" \"stack-protector-buffer-size\"=\"8\" \"target-cpu\"=\"core2\" \"target-features\"=\"+cx16,+sse,+sse2,+sse3,+ssse3\" \"unsafe-fp-math\"=\"false\" \"use-soft-float\"=\"false\" }\nattributes #2 = { nounwind }\nattributes #3 = { builtin }\n\n!llvm.module.flags = !{!0}\n!llvm.ident = !{!1}\n\n!0 = !{i32 1, !\"PIC Level\", i32 2}\n!1 = !{!\"clang version 3.7.0 (tags/RELEASE_370/final)\"}\n</code></pre>\n\n<p>Can someone explain what's happening in this IR and how it maps back to the C++? Or ignoring this specific example how one would/should go about allocating heap memory for an LLVM StructType that out lives the function within which it was created (and if you're feeling generous, how to later release the memory).</p>\n\n<p>The bits I've commented out are from my original example but being a total novice the IR from that was even less insightful...</p>\n"}, {"tags": ["c++", "linux", "multithreading"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1446682524, "post_id": 33533494, "comment_id": 54850419, "body": "The problem is interesting, but out of curiosity, why are you running this stuff at high priority? Having higher priority CPU-eating threads is exactly the recipe to hang lower priority programs..."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1446684055, "post_id": 33533494, "comment_id": 54850854, "body": "Threads that always want the CPU should have lowered priority if anything."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446684109, "post_id": 33533494, "comment_id": 54850869, "body": "What CPUs does this machine have? And why are you specifying <code>-lpthread</code> with GCC/linux? (The correct flag is <code>-pthread</code>.)"}, {"owner": {"reputation": 71, "user_id": 5526728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269bbc66d8b5f519662e55df51c8b732?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/5526728/arun"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1446685515, "post_id": 33533494, "comment_id": 54851304, "body": "@MatteoItalia, i&#39;m doing an optimization to our current production application (multithreaded) has similar kind of architecture. Was getting better results if multiple consumer thread spins on data queue rather than wait/wakeup on the data when notified. But if multiple consumer thread spins on a core we&#39;re seeing the issue as mentioned above."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1446688658, "post_id": 33533494, "comment_id": 54852118, "body": "Scrap your code, sell your server and buy  a fan heater."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1446882901, "post_id": 33533494, "comment_id": 54937854, "body": "There is a big difference between &quot;high priority&quot; SCHED_OTHER (which is the normal scheduler) and SCHED_FIFO real-time. Real time threads should wake up and do their thing, then go back to sleep. Never just spin."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5526728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269bbc66d8b5f519662e55df51c8b732?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/5526728/arun"}, "edited": false, "score": 0, "creation_date": 1446685699, "post_id": 33534802, "comment_id": 54851366, "body": "The purpose was explained in the main comment area for the question (addressed to Matteo Italia). CPU this machine has Intel Xeon CPU"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 71, "user_id": 5526728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269bbc66d8b5f519662e55df51c8b732?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/5526728/arun"}, "edited": false, "score": 1, "creation_date": 1446685827, "post_id": 33534802, "comment_id": 54851402, "body": "I&#39;d suggest figuring out why you get poor performance when the thread has to be woken up. That&#39;s very unusual. The thread should only go to sleep if the queue is empty and the queue should only be empty if you&#39;re performing at least as well as you need to."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 71, "user_id": 5526728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269bbc66d8b5f519662e55df51c8b732?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/5526728/arun"}, "edited": false, "score": 0, "creation_date": 1446685874, "post_id": 33534802, "comment_id": 54851415, "body": "Also &quot;Xeon&quot; is a line of processors, not a specific processor. I want to know which specific processor (or processors) this machine has."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1446750933, "last_edit_date": 1446750933, "creation_date": 1446684385, "answer_id": 33534802, "question_id": 33533494, "link": "https://stackoverflow.com/questions/33533494/linux-kernel-unresponsive-when-multiple-high-priority-thread-run-on-multiple-cor/33534802#33534802", "title": "Linux kernel unresponsive when multiple high priority thread run on multiple cores", "body": "<p>The effects of suddenly depriving the kernel of any use of a live core for an unlimited amount of time are unspecified and unknown. Anything attached to that core before exclusive ownership of it was taken, which could include threads that are waiting to be scheduled on it, is forever lost to the system.</p>\n\n<p>DON'T DO THIS!</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4209394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb593f14f9f4c1b9acd3686d98180bd2?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Prabhu", "link": "https://stackoverflow.com/users/4209394/kiran-prabhu"}, "is_accepted": false, "score": -1, "last_activity_date": 1446875087, "last_edit_date": 1446875087, "creation_date": 1446799207, "answer_id": 33562625, "question_id": 33533494, "link": "https://stackoverflow.com/questions/33533494/linux-kernel-unresponsive-when-multiple-high-priority-thread-run-on-multiple-cor/33562625#33562625", "title": "Linux kernel unresponsive when multiple high priority thread run on multiple cores", "body": "<p>Tight loop with high priority thread is not a good idea...when the print hello is just looping without doing anything, Introduce switchtothread/yield after certain loops and sleep zero after a higher loop count. This will give other threads on the system oppurtinity to execute Eventually wait on a event handle when there is no work.</p>\n\n<p>@kiran0x1B</p>\n"}], "owner": {"reputation": 71, "user_id": 5526728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269bbc66d8b5f519662e55df51c8b732?s=128&d=identicon&r=PG&f=1", "display_name": "arun", "link": "https://stackoverflow.com/users/5526728/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1446881964, "creation_date": 1446676995, "last_edit_date": 1446881964, "question_id": 33533494, "link": "https://stackoverflow.com/questions/33533494/linux-kernel-unresponsive-when-multiple-high-priority-thread-run-on-multiple-cor", "title": "Linux kernel unresponsive when multiple high priority thread run on multiple cores", "body": "<p>Wrote a sample C++ multithreaded program that runs with 10 threads, each thread set to high priority and affinity. Compiled and ran this code on dell machine that has 16 cores, running centos 7 (Linux kernel - 3.10.0-229), disabled hyperthreading. After I ran this code, in few seconds, our Linux machine becomes unresponsive, in the sense that, if I open up Eclipse editor, and save a file or save a file in vi editor those applications hang. Interestingly, once I stop this program / process, then all other applications resume from where they left off. Also I don't see this issue if I remove priority from these 10 threads.</p>\n\n<p><strong>Questions</strong>:</p>\n\n<p>1) Out of 16 cores, 6 cores still left on the machine (above cpu usage shows, cpu executed 62.9% user space, and was idle for 37.1%. Interestingly 0% cpu usage in kernel space), so ideally kernel should have used those 6 cores to handle other application, what could be the reason that other application does not able to run? How to resolve this issue without introducing sleep / changing priority?</p>\n\n<p>2) Like to know better approach other than introducing a sleep / waiting on a event (which introduce minimal latency due to kernel context switch) in the thread to achieve parallelism?</p>\n\n<p><strong>Ran top command (<code>top -H</code>)</strong>:</p>\n\n<pre><code>%Cpu(s):  62.9 us,  0.0 sy,  0.0 ni, 37.1 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\n\n1107 arun      rt   0   96748   1112    932 R 99.9  0.0   0:25.78 PthreadTest\n1115 arun      rt   0   96748   1112    932 R 99.9  0.0   0:24.79 PthreadTest\n1118 arun      rt   0   96748   1112    932 R 99.9  0.0   0:22.79 PthreadTest\n1120 arun      rt   0   96748   1112    932 R 99.9  0.0   0:20.79 PthreadTest\n1123 arun      rt   0   96748   1112    932 R 99.9  0.0   0:18.79 PthreadTest\n1117 arun      rt   0   96748   1112    932 R 94.1  0.0   0:23.78 PthreadTest\n1119 arun      rt   0   96748   1112    932 R 94.1  0.0   0:21.78 PthreadTest\n1122 arun      rt   0   96748   1112    932 R 94.1  0.0   0:19.78 PthreadTest\n1124 arun      rt   0   96748   1112    932 R 94.1  0.0   0:17.78 PthreadTest\n1125 arun      rt   0   96748   1112    932 R 94.1  0.0   0:16.76 PthreadTest\n</code></pre>\n\n<p><strong>Code below</strong>:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;pthread.h&gt;\n\nusing namespace std;\n\n#define NUM_THREADS 10\n\nvoid *PrintHello(void *threadid)\n{\n   long tid;\n   tid = (long)threadid;\n\n   cout &lt;&lt; \"Hello World! Thread ID, \" &lt;&lt; tid &lt;&lt; endl;\n   while(true)\n   {\n        continue;\n   }\n   pthread_exit(NULL);\n}\n\nint main ()\n{\n   pthread_t threads[NUM_THREADS];\n   pthread_attr_t  threads_attr[NUM_THREADS];\n   struct sched_param     params;\n   params.sched_priority = sched_get_priority_max(SCHED_FIFO);\n   int rc;\n   int i;\n   int cpu_num = 0;\n\n   for( i=0; i &lt; NUM_THREADS; i++ ){\n\n      cpu_set_t cpu;\n      CPU_ZERO(&amp;cpu);\n      CPU_SET(cpu_num, &amp;cpu);\n      cout &lt;&lt; \"main() : creating thread, \" &lt;&lt; i &lt;&lt; \"cpu_num : \"&lt;&lt;cpu_num&lt;&lt;endl;\n      pthread_attr_init(&amp;threads_attr[i]);\n      pthread_attr_setscope(&amp;threads_attr[i], PTHREAD_SCOPE_SYSTEM);\n      rc = pthread_create(&amp;threads[i], NULL,\n                          PrintHello, (void *)i);\n      if (rc){\n         cout &lt;&lt; \"Error:unable to create thread,\" &lt;&lt; rc &lt;&lt; endl;\n         exit(-1);\n      }\n\n      sleep(1);\n\n\n      int ret = pthread_setaffinity_np(threads[i], sizeof(cpu_set_t), &amp;cpu);\n      if(ret == 0 &amp;&amp; CPU_ISSET(cpu_num, &amp;cpu))\n      {\n        cout &lt;&lt; \"Thread \" &lt;&lt; i &lt;&lt; \" affinity set \" &lt;&lt;endl;\n      }\n\n\n      ret = pthread_setschedparam(threads[i], SCHED_FIFO, &amp;params);\n      if(ret == 0)\n      {\n        cout &lt;&lt; \"Thread \" &lt;&lt; i &lt;&lt; \" priority set \" &lt;&lt;endl;\n      }\n      cpu_num++;\n   }\n\n\n// free attribute and wait for the other threads\n   void *status;\n   for( i=0; i &lt; NUM_THREADS; i++ )\n   {\n        rc = pthread_join(threads[i], &amp;status);\n        if (rc){\n            cout &lt;&lt; \"Error:unable to join,\" &lt;&lt; rc &lt;&lt; endl;\n            exit(-1);\n        }\n        cout &lt;&lt; \"Main: completed thread id :\" &lt;&lt; i ;\n        cout &lt;&lt; \"  exiting with status :\" &lt;&lt; status &lt;&lt; endl;\n   }\n\n   pthread_exit(NULL);\n}\n</code></pre>\n\n<p><strong>Compile</strong>:</p>\n\n<pre><code>g++ -std=c++14 -g -o PthreadTest busywait.cpp -lpthread\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 13014, "user_id": 4140572, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2uRSa.png?s=128&g=1", "display_name": "Angel Angel", "link": "https://stackoverflow.com/users/4140572/angel-angel"}, "edited": false, "score": 0, "creation_date": 1446677782, "post_id": 33533529, "comment_id": 54848881, "body": "I did not know, but now I think this very well, and a very clean syntax, thanks for your response"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 3, "last_activity_date": 1446677159, "creation_date": 1446677159, "answer_id": 33533529, "question_id": 33533474, "link": "https://stackoverflow.com/questions/33533474/this-stdfunction-is-similar-to/33533529#33533529", "title": "This std::function is similar to", "body": "<p>The <code>std::function</code> type is a generalization of function pointers. C++ makes a distinction between functions, member functions, and function objects (if you haven't heard of that last one, go look it up! They're super cool!), so a normal function pointer can't point at all the types of things in C++ that you can call like a function. <code>std::function</code> is essentially a type that acts like a function pointer that can point at just about anything that you could call like a function. To use <code>std::function</code> to point to something with argument types <code>Arg1, Arg2, ..., ArgN</code> and return type <code>Ret</code>, declare a variable of type</p>\n\n<pre><code>std::function&lt;Ret (Arg1, Arg2, ..., ArgN)&gt;\n</code></pre>\n"}], "owner": {"reputation": 13014, "user_id": 4140572, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2uRSa.png?s=128&g=1", "display_name": "Angel Angel", "link": "https://stackoverflow.com/users/4140572/angel-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 33533529, "answer_count": 1, "score": 2, "last_activity_date": 1449091622, "creation_date": 1446676909, "last_edit_date": 1449091622, "question_id": 33533474, "link": "https://stackoverflow.com/questions/33533474/this-stdfunction-is-similar-to", "title": "This std::function is similar to", "body": "<p>I was practicing lambdas, and I found this code:</p>\n\n<pre><code>auto make_fibo() \n{\n  return [](int n) {\n    std::function&lt;int(int)&gt; recurse;\n    recurse = [&amp;](int n){ \n       return (n&lt;=2)? 1 : recurse(n-1) + recurse(n-2); \n    }; \n    return recurse(n);\n  };\n}\n</code></pre>\n\n<p>I did not know it was this, exactly, did not know him<code>std::function&lt;int(int)&gt; recurse;</code> and after searching and reading this:</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/functional/function/\" rel=\"nofollow\">http://www.cplusplus.com/reference/functional/function/</a></p>\n\n<p>my question is? This std::function is similar to this for example:</p>\n\n<pre><code>typedef  int (*FredMemFn)(int i);\n</code></pre>\n\n<p>Thank you and sorry for English.</p>\n"}, {"tags": ["c++", "shared-ptr", "factory", "make-shared", "private-constructor"], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "closed_date": 1446677154, "answer_count": 0, "score": 2, "last_activity_date": 1446676840, "creation_date": 1446676840, "question_id": 33533453, "link": "https://stackoverflow.com/questions/33533453/stdmake-shared-and-private-constructor", "closed_reason": "Duplicate", "title": "std::make_shared and private constructor", "body": "<p>I'm struggling with a (let me say) corner case of the <code>std::make_shared</code> function and I didn't manage to find a viable alternative to my (not-so-serious) problem.</p>\n\n<p>The following code compiles fine:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass A {\n    A() = default;\n    A(const A &amp;) = default;\n    A(A &amp;&amp;) = default;\n    A&amp; operator=(const A &amp;) = default;\n    A&amp; operator=(A &amp;&amp;) = default;\n\npublic:\n    static std::shared_ptr&lt;A&gt; create() {\n        // std::shared_ptr&lt;A&gt; ptr = std::make_shared&lt;A&gt;();\n        std::shared_ptr&lt;A&gt; ptr{new A};\n        return ptr;\n    }\n};\n\nint main() {\n    auto ptr = A::create();\n}\n</code></pre>\n\n<p>It's intuitively a small example of a kind of factory for an user defined class named <em>A</em>.</p>\n\n<p>By looking at the <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow\">documentation</a> of <code>std::make_shared</code>, we find that:</p>\n\n<blockquote>\n  <p>This function is typically used to replace the construction std::shared_ptr(new T(args...)) of a shared pointer from the raw pointer returned by a call to new. In contrast to that expression, std::make_shared typically allocates memory for the T object and for the std::shared_ptr's control block with a single memory allocation (this is a non-binding requirement in the Standard), where std::shared_ptr(new T(args...)) performs at least two memory allocations.</p>\n</blockquote>\n\n<p>Quite interesting, it would help maybe switching the commented line with the one immediately after. It results in the following code for the function <code>create</code>:</p>\n\n<pre><code>    static std::shared_ptr&lt;A&gt; create() {\n        std::shared_ptr&lt;A&gt; ptr = std::make_shared&lt;A&gt;();\n        // std::shared_ptr&lt;A&gt; ptr{new A};\n        return ptr;\n    }\n</code></pre>\n\n<p>Unfortunately, this version does not compile because of the private constructor(s) of <code>A</code> (the error is something like <code>error: \u2018constexpr A::A()\u2019 is private</code>).</p>\n\n<p>To be clear, the problem is not the error for itself, it's quite clear to me what's due to and it makes sense. Anyway, I'd like to know if there is a workaround to be able to use the <code>std::make_shared</code> function and let the constructors to be private at the same time. As far as I can see, the code in the first example seems to be the only available solution, even if it goes without saying that it has a well known (and documented) drawback in terms or performance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1446676264, "post_id": 33533272, "comment_id": 54848259, "body": "10i * 7+17i = 70i+17i = 87i in ordinary mathematics. Are you sure you want a custom notation that deviates from all existing norms?"}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1446676375, "post_id": 33533272, "comment_id": 54848306, "body": "There are other ways, but <code>if</code> statements are the most straight-forward and easiest to understand."}, {"owner": {"reputation": 258, "user_id": 3196463, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cfd9dfa6dbce1d76a7a622463c87f912?s=128&d=identicon&r=PG&f=1", "display_name": "cflinspach", "link": "https://stackoverflow.com/users/3196463/cflinspach"}, "edited": false, "score": 0, "creation_date": 1446676418, "post_id": 33533272, "comment_id": 54848323, "body": "I just threw that in as an example to show the output. I updated the problem so it&#39;s correct."}, {"owner": {"reputation": 279749, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1446676543, "post_id": 33533272, "comment_id": 54848378, "body": "your complex arithmetic example is incorrect."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1446676622, "post_id": 33533272, "comment_id": 54848415, "body": "... That edit makes no sense. For the input you give, (0+10i)(7+17i), your original result of -170+70i is correct. It&#39;s just the 10i * 7+17i representation of the input that&#39;s wrong, and that&#39;s the thing you left unchanged?"}], "answers": [{"tags": [], "owner": {"reputation": 617, "user_id": 3365919, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fPKCA.jpg?s=128&g=1", "display_name": "naqushab", "link": "https://stackoverflow.com/users/3365919/naqushab"}, "is_accepted": false, "score": 0, "last_activity_date": 1446677156, "last_edit_date": 1446677156, "creation_date": 1446676807, "answer_id": 33533449, "question_id": 33533272, "link": "https://stackoverflow.com/questions/33533272/dont-print-variable-if-its-zero/33533449#33533449", "title": "Don&#39;t print variable if it&#39;s zero", "body": "<p>Yes, you can do it by including <code>&lt;complex&gt;</code></p>\n\n<pre><code>std::complex&lt;double&gt; com_one; // value 0 + 0i \nstd::complex&lt;double&gt; com_two(3.14); // value 3.14 + 0i\nstd::complex&lt;double&gt; com_three(1.5, 3.14) // value 1.5 + 3.14i \nstd::complex&lt;double&gt; com_four(com_two); // value is also 3.14 + 0i\n</code></pre>\n\n<p>Then to use arithmetic operations, you can just use</p>\n\n<pre><code>std::cout &lt;&lt; com_one + com_two &lt;&lt; std::endl; \nstd::cout &lt;&lt; com_one - 3.14 &lt;&lt; std::endl; \nstd::cout &lt;&lt; 2.75 * com_two &lt;&lt; std::endl; \ncom_one += com_three / 2.0;\n</code></pre>\n\n<p>Source: <a href=\"http://stdcxx.apache.org/doc/stdlibug/20-2.html\" rel=\"nofollow\">http://stdcxx.apache.org/doc/stdlibug/20-2.html</a></p>\n\n<p>For checking if it's a zero check it using <code>if</code>, and compare it with a zero. This is the most clean technique. </p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1446676887, "creation_date": 1446676887, "answer_id": 33533468, "question_id": 33533272, "link": "https://stackoverflow.com/questions/33533272/dont-print-variable-if-its-zero/33533468#33533468", "title": "Don&#39;t print variable if it&#39;s zero", "body": "<p>I don't think you can avoid doing the condition and printing if non-zero <em>somewhere</em>.</p>\n\n<p>About all you can do is wrap it up so most code doesn't need to deal with it:</p>\n\n<pre><code>class complex { \n   double x;\n   double i;\npublic:\n    // ...\n\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, complex const &amp;c) { \n        // if both parts are 0, we probably want to print *something*\n        if (c.x == 0.0 &amp;&amp; c.i == 0.0)\n            return os &lt;&lt; 0;\n        if (c.x != 0.0)\n            os &lt;&lt; c.x;\n        if (c.i != 0.0)\n            os &lt;&lt; c.i &lt;&lt; \"i\";\n        return os;\n     }\n};\n\ncomplex a, b, c;\n\n// ...\ncout &lt;&lt; a &lt;&lt; operation &lt;&lt; b &lt;&lt; \" = \" c &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>You'll have to add a little more if you want this to honor (for example) width/precision correctly (though for real use, you undoubtedly want to use the <code>complex</code> class that's already in the standard library instead).</p>\n"}], "owner": {"reputation": 258, "user_id": 3196463, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cfd9dfa6dbce1d76a7a622463c87f912?s=128&d=identicon&r=PG&f=1", "display_name": "cflinspach", "link": "https://stackoverflow.com/users/3196463/cflinspach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 33533468, "answer_count": 2, "score": -5, "last_activity_date": 1446677156, "creation_date": 1446675990, "last_edit_date": 1446676749, "question_id": 33533272, "link": "https://stackoverflow.com/questions/33533272/dont-print-variable-if-its-zero", "title": "Don&#39;t print variable if it&#39;s zero", "body": "<pre><code>double a, b, c, d, x, y;\nchar operation\n\n\ncout &lt;&lt; setw(6) &lt;&lt; a &lt;&lt; b \n     &lt;&lt; setw(3) &lt;&lt; operation\n     &lt;&lt; setw(6) &lt;&lt; c &lt;&lt; d \n     &lt;&lt; \" = \"\n     &lt;&lt; setw(6) &lt;&lt; x &lt;&lt; y \n     &lt;&lt; endl;\n</code></pre>\n\n<p>I'm making a calculator which takes two complex numbers and adds subtracts etc. My question is how do I format my output so that 0's are not displayed. </p>\n\n<p>I.E. if the input is (a+bi)(c+di) the output is a+bi * c+di = x+yi But a, b, c, d, x, y are only displayed if they are nonzero.</p>\n\n<p>I know I can do it with if statements and stuff but I was hoping there's a shorter, more efficient, path.</p>\n"}, {"tags": ["c++", "visual-studio", "for-loop", "operator-overloading", "visual-studio-debugging"], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1446676156, "post_id": 33533279, "comment_id": 54848204, "body": "Woah yeah. That was it. And my other operator wasn&#39;t being called from main to verify. I&#39;m so stupid haha."}], "tags": [], "owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "is_accepted": true, "score": 4, "last_activity_date": 1446676021, "creation_date": 1446676021, "answer_id": 33533279, "question_id": 33533246, "link": "https://stackoverflow.com/questions/33533246/c-visual-studio-empty-for-loop-in-operator-overload-causes-debug-error/33533279#33533279", "title": "C++ Visual Studio- Empty For Loop in Operator Overload causes debug error?", "body": "<p>The obvious thing is that you don't initialize i.  Try</p>\n\n<pre><code>for (int i = 0; i &lt; 10; ++i)\n</code></pre>\n"}], "owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 33533279, "answer_count": 1, "score": 0, "last_activity_date": 1446676021, "creation_date": 1446675885, "question_id": 33533246, "link": "https://stackoverflow.com/questions/33533246/c-visual-studio-empty-for-loop-in-operator-overload-causes-debug-error", "title": "C++ Visual Studio- Empty For Loop in Operator Overload causes debug error?", "body": "<p>I ran a for loop inside an overloaded operator and Visual Studio raised a debug error and can't resolve. When I remove the for loop, it runs perfectly; I used the exact loop in another functioning operator and there was no problem. </p>\n\n<p>How can an empty for loop crash visual studio debugger? </p>\n\n<p>Note: As I said, without this for loop, the program does not crash, so I assume the main() loop and class definition can not possibly have any relevance and therefore omitted them. If I'm wrong about that, I can certainly include them.</p>\n\n<pre><code>Account&amp; Account::operator=(char *string){\n\n    for (int i; i &lt; 10; i++) {\n\n        cout &lt;&lt; i;\n\n    }\n\n    return (*this);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "algorithm", "sorting", "stl"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1446675954, "post_id": 33533221, "comment_id": 54848103, "body": "I don&#39;t understand the problem. With n, it sorts n elements, with n-1, it sorts only n-1, ok, so what? The situation where you access n elements with only n-1 allocated is UB."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1446676370, "post_id": 33533221, "comment_id": 54848303, "body": "Can&#39;t you read the documentation for <code>std::sort</code>? Is that kind of thing not allowed anymore?"}, {"owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "edited": false, "score": 0, "creation_date": 1446676602, "post_id": 33533221, "comment_id": 54848409, "body": "sorry, I will read the documentation first from now on :)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "edited": false, "score": 0, "creation_date": 1446676310, "post_id": 33533276, "comment_id": 54848281, "body": "so the arr[n] which I am passing here, can show error sometime?"}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 2, "creation_date": 1446676691, "post_id": 33533276, "comment_id": 54848452, "body": "<code>&amp;arr[n]</code> is not undefined behavior because <code>(arr) + n</code> is valid as long as you avoid to dereference it (see clause 5.7 in the C++ standard). Thus, using std::algorithm with C arrays is usually valid."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1446677830, "post_id": 33533276, "comment_id": 54848901, "body": "I was confused about what&#39;s going on but unless they changed it in C++11 or up, <code>&amp;arr[n]</code> is undefined because there IS a dereference there.  They legalized it in C so maybe C++ absorbed that change."}, {"owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 0, "creation_date": 1446678061, "post_id": 33533276, "comment_id": 54848981, "body": "@Crazy Eddie:  &amp;arr[n] is the address after the last array element.  It doesn&#39;t dereference anything.  It&#39;s been that way since C90."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1446680285, "post_id": 33533276, "comment_id": 54849737, "body": "See litb&#39;s comment here: <a href=\"http://stackoverflow.com/questions/3144904/may-i-take-the-address-of-the-one-past-the-end-element-of-an-array/3144915#3144915\" title=\"may i take the address of the one past the end element of an array\">stackoverflow.com/questions/3144904/&hellip;</a>"}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1446676011, "creation_date": 1446676011, "answer_id": 33533276, "question_id": 33533221, "link": "https://stackoverflow.com/questions/33533221/accessing-unallocated-memory-while-sort-from-algorithm-stl-c/33533276#33533276", "title": "accessing unallocated memory while sort from algorithm stl c++", "body": "<p>Arrays are 0 indexed in C++.  If you have <code>n</code> elements then the first index is <code>0</code> and the last is <code>n-1</code>.</p>\n\n<p>It was working because it's undefined behavior.  It can do anything.  Often what happens is you just overwrite some variable on the stack with nonsense.  If it's the right variable this can allow someone to overload that buffer with targeted nonsense and cause code to be executed.  It's called a \"buffer overrun\" and you need to avoid them.</p>\n"}, {"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1446677787, "creation_date": 1446677787, "answer_id": 33533661, "question_id": 33533221, "link": "https://stackoverflow.com/questions/33533221/accessing-unallocated-memory-while-sort-from-algorithm-stl-c/33533661#33533661", "title": "accessing unallocated memory while sort from algorithm stl c++", "body": "<p>STL algorithms use \"half-open\" ranges.  That means it includes the first element and works up to--but not including--the last element.  Given:</p>\n\n<pre><code>std::sort(&amp;arr[0], &amp;arr[n]);\n</code></pre>\n\n<p>The sort function will sort the elements from <code>0</code> to <code>n - 1</code>.  It will never try to look in <code>arr[n]</code>.</p>\n\n<p>In C and C++, it's legal to create a pointer to the first element beyond the end of an array, but you cannot dereference that pointer.</p>\n\n<p>When you changed the call to:</p>\n\n<pre><code>std::sort(&amp;arr[0], &amp;arr[n-1]);\n</code></pre>\n\n<p>you introduced a bug, since this will ignore the last element in the array when sorting.</p>\n\n<p>Using half-open ranges (or intervals) is pretty natural given that arrays are indexed from 0.</p>\n"}], "owner": {"reputation": 93, "user_id": 2689119, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/b9e5e70863da4f9e0f7b35856b423c2d?s=128&d=identicon&r=PG", "display_name": "Uchiha_itachi", "link": "https://stackoverflow.com/users/2689119/uchiha-itachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1446677787, "creation_date": 1446675778, "last_edit_date": 1446676206, "question_id": 33533221, "link": "https://stackoverflow.com/questions/33533221/accessing-unallocated-memory-while-sort-from-algorithm-stl-c", "title": "accessing unallocated memory while sort from algorithm stl c++", "body": "<p>while I was going  through stl today, I came across a situation where to sort my dynamically allocated array from <code>arr[0],,..arr[n-1]</code>. I was using command </p>\n\n<pre><code>#include&lt;algorithm&gt;\n.\n.\nint *arr = new int[n]();\n//loop to take user input for each arr[i]\nsort(&amp;arr[0],&amp;arr[n]) \n</code></pre>\n\n<p>The above command was sorting the array without any error, even if I have allocated memory up to <code>arr[n-1]</code>.</p>\n\n<p>The below command was sorting upto n-1th element.</p>\n\n<pre><code>#include&lt;algorithm&gt;\n.\n.\nint *arr = new int[n]();\n//loop to take user input for each arr[i]\nsort(&amp;arr[0],&amp;arr[n-1]) \n</code></pre>\n\n<p>How was '<code>&amp;arr[n]</code>' working in the 1st code snippet.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "edited": false, "score": 0, "creation_date": 1446674603, "post_id": 33532896, "comment_id": 54847410, "body": "look carefully on parameters of <code>stol</code> and its signature"}, {"owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "edited": false, "score": 0, "creation_date": 1446674642, "post_id": 33532896, "comment_id": 54847434, "body": "There is <i>really</i> no <code>stol(int, int, int);</code>..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1446674768, "post_id": 33532896, "comment_id": 54847509, "body": "In addition to the above comments, you need to make certain your compiler supports C++11 and is using c++11 ( add -std=c++0x to the g++ command line) to get the stoX functions."}, {"owner": {"reputation": 87, "user_id": 5153454, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/U5tIa.jpg?s=128&g=1", "display_name": "Tal Yitzhak", "link": "https://stackoverflow.com/users/5153454/tal-yitzhak"}, "edited": false, "score": 0, "creation_date": 1446675375, "post_id": 33532896, "comment_id": 54847825, "body": "what do you mean add -std=c++0x to the g++ command line? how should i compile it (i use g++ Practice.c when i compile)"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1446676815, "post_id": 33532896, "comment_id": 54848519, "body": "To compile c++, you usually have to use a different file extent than &quot;.c&quot;.  Try rename your file to &quot;Practice.cpp&quot;"}, {"owner": {"reputation": 87, "user_id": 5153454, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/U5tIa.jpg?s=128&g=1", "display_name": "Tal Yitzhak", "link": "https://stackoverflow.com/users/5153454/tal-yitzhak"}, "edited": false, "score": 0, "creation_date": 1446677197, "post_id": 33532896, "comment_id": 54848668, "body": "changed it. still, how do I apply the -std=c++0x thing? where should i put/run it?"}], "owner": {"reputation": 87, "user_id": 5153454, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/U5tIa.jpg?s=128&g=1", "display_name": "Tal Yitzhak", "link": "https://stackoverflow.com/users/5153454/tal-yitzhak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1630, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446674467, "creation_date": 1446674467, "question_id": 33532896, "link": "https://stackoverflow.com/questions/33532896/getting-stol-was-not-declared-in-this-scope-error", "title": "Getting &#39;stol&#39; was not declared in this scope error", "body": "<p>I'm trying to write a function that gets a decimal number and turn it into a binary number (it should return it as long, so I'm converting it).\nThe thing is I keep get this error:</p>\n\n<pre><code> \"Practice.c: In function \u2018std::string base2(int)\u2019:\n Practice.c:12:29: error: \u2018stol\u2019 was not declared in this scope\n return (stol (number,0,2));\"\n</code></pre>\n\n<p>That's my code, can anyone help me?</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include &lt;stddef.h&gt;\n    using namespace std;\n\n    long base2(int number) {\n        string result = \"\";\n        while(number/2 != 0) {\n            result = \"\" + (number % 2) + result;\n            number = number/2;\n        }\n        return (stol (number,0,2));\n    }\n\n    int main() {\n        cout &lt;&lt; base2(3) &lt;&lt; endl;\n        cin.get();\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "clang", "clang-cl"], "answers": [{"tags": [], "owner": {"reputation": 11121, "user_id": 12958, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f1bb6e5c84ee4cbf4790d08b4515e62c?s=128&d=identicon&r=PG", "display_name": "justin.m.chase", "link": "https://stackoverflow.com/users/12958/justin-m-chase"}, "is_accepted": false, "score": 1, "last_activity_date": 1446674884, "creation_date": 1446674884, "answer_id": 33533004, "question_id": 33532869, "link": "https://stackoverflow.com/questions/33532869/is-it-possible-to-generate-a-lib-file-on-windows-using-clang-cl/33533004#33533004", "title": "Is it possible to generate a .lib file on windows using clang-cl?", "body": "<p>It looks like the answer is to use <code>llvm-lib</code>. This threw me off a bit because it wasn't named <code>clang-lib</code> but it appears to be doing what I am expecting.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 9769938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7895222ce10f8012b6f8cce19fb0176f?s=128&d=identicon&r=PG&f=1", "display_name": "Temtaime", "link": "https://stackoverflow.com/users/9769938/temtaime"}, "is_accepted": true, "score": 2, "last_activity_date": 1599693394, "creation_date": 1599693394, "answer_id": 63820730, "question_id": 33532869, "link": "https://stackoverflow.com/questions/33532869/is-it-possible-to-generate-a-lib-file-on-windows-using-clang-cl/63820730#63820730", "title": "Is it possible to generate a .lib file on windows using clang-cl?", "body": "<p>Yes, it seems to be possible.</p>\n<p>Use <code>-fuse-ld=llvm-lib</code> to link multiple source files into a static library</p>\n"}], "owner": {"reputation": 11121, "user_id": 12958, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f1bb6e5c84ee4cbf4790d08b4515e62c?s=128&d=identicon&r=PG", "display_name": "justin.m.chase", "link": "https://stackoverflow.com/users/12958/justin-m-chase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "accepted_answer_id": 63820730, "answer_count": 2, "score": 2, "last_activity_date": 1599693394, "creation_date": 1446674385, "question_id": 33532869, "link": "https://stackoverflow.com/questions/33532869/is-it-possible-to-generate-a-lib-file-on-windows-using-clang-cl", "title": "Is it possible to generate a .lib file on windows using clang-cl?", "body": "<p>I am on Windows and I have Visual Studio installed and the latest version of <code>clang</code>. I am able to run:</p>\n\n<pre><code>clang-cl hello.c\n</code></pre>\n\n<p>Which in turn generates <code>hello.exe</code>, which I can run as expected.</p>\n\n<p>But what I want to do is to generate a static library instead (<code>.lib</code> file). I am able to pass the <code>/LD</code> flag to generate a dynamic link library but I can't figure out how to generate a static library instead.</p>\n\n<p>Is this possible to do with <code>clang-cl</code>?</p>\n"}, {"tags": ["c++", "gcc", "stl", "clang", "standard-library"], "comments": [{"owner": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 2, "creation_date": 1446674513, "post_id": 33532853, "comment_id": 54847362, "body": "Not every day I see a C programmer using <code>not</code> instead of <code>!</code> ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 0, "creation_date": 1446674618, "post_id": 33532853, "comment_id": 54847419, "body": "@Lapshin: I&#39;m of split opinion on the practice. On the one hand the keywords logicals are nice, but on the other hand a decade of not using them makes them seem out of place."}, {"owner": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 0, "creation_date": 1446674662, "post_id": 33532853, "comment_id": 54847445, "body": "@Hurkyl i am not against, actually like here it&#39;s more readable, but still."}, {"owner": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 0, "creation_date": 1446674705, "post_id": 33532853, "comment_id": 54847467, "body": "A case reproduced on my machine. A good question indeed!"}, {"owner": {"reputation": 2132, "user_id": 717706, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ky9pE.jpg?s=128&g=1", "display_name": "Matei David", "link": "https://stackoverflow.com/users/717706/matei-david"}, "edited": false, "score": 0, "creation_date": 1446674711, "post_id": 33532853, "comment_id": 54847472, "body": ":) how about spaces inside template parameters, a relic of <code>&gt;&gt;</code> parsing :)"}, {"owner": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 0, "creation_date": 1446674863, "post_id": 33532853, "comment_id": 54847579, "body": "@MateiDavid I am actually too young to got used to that ugly spacing, praise c++11)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1446674921, "post_id": 33532853, "comment_id": 54847607, "body": "This is another manifestation of the <code>generate_canonical&lt;float&gt;</code> problem."}], "answers": [{"comments": [{"owner": {"reputation": 951, "user_id": 4324545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/067a9cf7538d753e3be66e77ef951614?s=128&d=identicon&r=PG", "display_name": "Lapshin Dmitry", "link": "https://stackoverflow.com/users/4324545/lapshin-dmitry"}, "edited": false, "score": 2, "creation_date": 1446675002, "post_id": 33532992, "comment_id": 54847643, "body": "I like your answer, but still, standart says <code>a &lt;= x &lt; b</code>, and that part keeps me from agreing with you..."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674849, "creation_date": 1446674849, "answer_id": 33532992, "question_id": 33532853, "link": "https://stackoverflow.com/questions/33532853/c-bug-in-uniform-real-distribution/33532992#33532992", "title": "c++ bug in uniform real distribution?", "body": "<p>While <code>[rand.dist.uni.real]</code> mandates the uniform distribution on the half-open interval of <em>real numbers</em>, it doesn't contain any language regarding how those should be rounded to floating point representations.</p>\n\n<p>So from the information I could find, it may very well be legal (and <em>required</em>) for a conforming implementation to produce floating point numbers that compare equal to the upper bound.</p>\n"}], "owner": {"reputation": 2132, "user_id": 717706, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ky9pE.jpg?s=128&g=1", "display_name": "Matei David", "link": "https://stackoverflow.com/users/717706/matei-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 1, "closed_date": 1446674826, "answer_count": 1, "score": 5, "last_activity_date": 1446734638, "creation_date": 1446674332, "last_edit_date": 1446734638, "question_id": 33532853, "link": "https://stackoverflow.com/questions/33532853/c-bug-in-uniform-real-distribution", "closed_reason": "Duplicate", "title": "c++ bug in uniform real distribution?", "body": "<p>I'm trying to use <code>std::uniform_real_distribution&lt;float&gt;(a, b)</code> to generate random floats, and I found a case where the output is equal to the upper limit <code>b</code>. According to:\n<a href=\"http://www.cplusplus.com/reference/random/uniform_real_distribution\" rel=\"nofollow\">http://www.cplusplus.com/reference/random/uniform_real_distribution</a>\n<a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution</a>\nthis shouldn't happen.</p>\n\n<p>With both <code>gcc-4.9.2</code> and <code>clang-3.5.0</code>, the following crashes for me:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;random&gt;\n\nint main() {\n    float a = 1.0f;\n    float b = 1.001f;\n    size_t seed = 293846;\n    size_t n = 9830;\n    std::mt19937 rg(seed);\n    std::uniform_real_distribution&lt; float &gt; u(a, b);\n    for (size_t i = 0; i &lt; n; ++i) {\n        float v = u(rg);\n        if (not (v &lt; b)) {\n            std::cerr &lt;&lt; \"error: i=\" &lt;&lt; i\n                      &lt;&lt; \" v=\" &lt;&lt; std::scientific &lt;&lt; std::setprecision(std::numeric_limits&lt; double &gt;::max_digits10) &lt;&lt; v\n                      &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt; std::endl;\n            abort();\n        }\n    }\n}\n</code></pre>\n\n<p>The output I see is:</p>\n\n<pre><code>error: i=9829 v=1.00100004673004150e+00 b=1.00100004673004150e+00\nAborted (core dumped)\n</code></pre>\n\n<p>Is this a bug with the Standard Library? Am I missing something?</p>\n\n<p><strong>Edit</strong>. While not an exact duplicate, the issue raised in this question is indeed covered by the answer to the other question referenced here.</p>\n\n<p>Most informative about the status of this issue is the LLVM bug thread here: <a href=\"https://llvm.org/bugs/show_bug.cgi?id=18767\" rel=\"nofollow\">https://llvm.org/bugs/show_bug.cgi?id=18767</a></p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446675554, "post_id": 33532805, "comment_id": 54847920, "body": "you show the debugging of a variable <code>linesArray</code> which does not appear anywhere in the code you show... so..."}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446675658, "post_id": 33532805, "comment_id": 54847978, "body": "@bolov It contains the strings parsed by this function. Updating my question..."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1446676294, "post_id": 33532805, "comment_id": 54848275, "body": "@Leviathlon now the post has become too big. Can you explain to me laconically in a comment what&#39;s wrong? For example, I will take your function, put it in a <code>main()</code> and then...?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446676370, "post_id": 33532805, "comment_id": 54848304, "body": "at first glance <code>componentsSeparatedByString</code> looks ok. Your purpose with debugging now is to identify (or at least narrow it down enought) where and when the bug happens. You need to see if <code>componentsSeparatedByString</code> builds the tokens ok, next if <code>linesArray</code> gets constructed correct. Try it first with ASCII input then work your way up to Unicode."}, {"owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 2, "creation_date": 1446676660, "post_id": 33532805, "comment_id": 54848432, "body": "&#39;\\xbb&#39; is not Unicode.  It&#39;s the character with numeric value of bb in hex."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446676718, "post_id": 33532805, "comment_id": 54848465, "body": "I don&#39;t see any way you signal how many tokens you have in <code>components</code>"}, {"owner": {"reputation": 577, "user_id": 3034338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9324b483505227ab1839298f7159d1?s=128&d=identicon&r=PG&f=1", "display_name": "fernando.reyes", "link": "https://stackoverflow.com/users/3034338/fernando-reyes"}, "edited": false, "score": 0, "creation_date": 1446676805, "post_id": 33532805, "comment_id": 54848510, "body": "Don&#39;t you need to use Unicode functions for this?"}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1446677048, "post_id": 33532805, "comment_id": 54848595, "body": "@gsamaras If I print a string came from strtok, it prints &quot;A&quot;. However, when I look up its length via strlen, it says 4, means controversy. I do NOT need Unicode handling. I just want to read a file and do some operations based on its content."}, {"owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 1, "creation_date": 1446677171, "post_id": 33532805, "comment_id": 54848647, "body": "Also, Unicode is not an encoding, and there are several possible ways to write Unicode code points..  Are you using UTF-8?  UTF-16?  UTF-32? Something obsolete like UCS-2?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446677204, "post_id": 33532805, "comment_id": 54848672, "body": "you have Undefined Behavior: it should be <code>delete[] input</code>. Compile with warning flags"}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 0, "creation_date": 1446677211, "post_id": 33532805, "comment_id": 54848674, "body": "@DavidThornley God. UTF-8."}, {"owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 0, "creation_date": 1446677243, "post_id": 33532805, "comment_id": 54848691, "body": "@bolav, strtok() doesn&#39;t need to know how many tokens there are.  It finds token after token until it returns NULL."}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446677524, "post_id": 33532805, "comment_id": 54848796, "body": "@bolov No warning with <code>-Wall</code> at all."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "edited": false, "score": 0, "creation_date": 1446677739, "post_id": 33532805, "comment_id": 54848869, "body": "@DavidThornley what I said has nothing to do with strtok. Let me ask you this: how does he know how many strings (tokens) are in the array returned by <code>componentsSeparatedByString</code>"}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446677953, "post_id": 33532805, "comment_id": 54848943, "body": "@bolov If the element is <code>nullptr</code>, previous element was the last element of that array (during iteration over result)."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446678220, "post_id": 33532805, "comment_id": 54849045, "body": "@Leviathlon yeah, you default initialize the <code>input</code> array elements. Don&#39;t forget about the <code>delete[]</code> though"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446678357, "post_id": 33532805, "comment_id": 54849100, "body": "@Leviathlon (about warnings) yeah gcc doesn&#39;t give any, clang however: <code>warning: &#39;delete&#39; applied to a pointer that was allocated with &#39;new[]&#39;</code>"}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446678465, "post_id": 33532805, "comment_id": 54849135, "body": "@bolov Completely true, I have to work with gcc however, so I didn&#39;t try that. Also I added the encapsulating function to the question."}, {"owner": {"reputation": 54006, "user_id": 14148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/583388f15233b9ebc538436f3a47a677?s=128&d=identicon&r=PG&f=1", "display_name": "David Thornley", "link": "https://stackoverflow.com/users/14148/david-thornley"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446678602, "post_id": 33532805, "comment_id": 54849182, "body": "@bolov:  Thanks.  Duh.  If Leviathlon knows there&#39;s enough tokens, that&#39;s good enough for debugging, but this needs either a way to pass back the number of tokens or at least initializing all elements of components to nullptr."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1446678659, "post_id": 33532805, "comment_id": 54849203, "body": "Ack. Please try to be as correct as possible in naming things. After all, your <i>compiler</i> does the same thing! &quot;Unicode&quot; is the <i>system</i> but unrelated to how the code points are stored. &quot;Changed the line ending character from Unix to Windows&quot; \u2013 no, line endings are not the issue here."}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446678738, "post_id": 33532805, "comment_id": 54849231, "body": "@Jongware Great to know that. Sorry for my illiteracy."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1446679028, "post_id": 33532805, "comment_id": 54849323, "body": "\u263a No harm done. The term you are looking for is &quot;character encoding&quot;. &quot;Windows&quot; (whatever you editor means by that, as it&#39;s more of a category than an exact type) means all of your characters are remapped into <code>char</code> range, no more Unicode involved. And so it&#39;s way easier to deal with."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1446679165, "post_id": 33532805, "comment_id": 54849363, "body": "... umm, I see you are updating your question as new insights arrive. While that is okay by me, try not to end up adding <a href=\"http://meta.stackoverflow.com/q/309266/2564301\"><code>SOLVED!</code></a> to its title ..."}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "edited": false, "score": 0, "creation_date": 1446717561, "post_id": 33532805, "comment_id": 54863360, "body": "Why -1? Just tell me the reason and I will do what you want. Do you have an answer to question? If not why are you downvoting?"}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1446679388, "post_id": 33533954, "comment_id": 54849426, "body": "borderline <code>not a question, but a comment</code>"}, {"owner": {"reputation": 96, "user_id": 4603871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fc97720dddafd01c18ec351aac675e?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Shaw", "link": "https://stackoverflow.com/users/4603871/bryan-shaw"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446749430, "post_id": 33533954, "comment_id": 54884442, "body": "@bolov, Do you mean not an answer, but a comment?  If so I agree with you.  I wasn&#39;t sure what the expected protocol was on Stack Overflow for stuff like this."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446749968, "post_id": 33533954, "comment_id": 54884746, "body": "yeah, I meant answer.  It is more suited as a comment, as it does not answer the problem OP is facing. I haven&#39;t flagged it as such because it does provide some good points about the code and can be argued that it does have some value as an answer. It my opinion it falls right on the edge between answer and comment."}, {"owner": {"reputation": 96, "user_id": 4603871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fc97720dddafd01c18ec351aac675e?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Shaw", "link": "https://stackoverflow.com/users/4603871/bryan-shaw"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446750131, "post_id": 33533954, "comment_id": 54884835, "body": "Fair enough.  I can move it if you feel it should be.  If not I&#39;ll just leave it here."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446750250, "post_id": 33533954, "comment_id": 54884905, "body": "As it hasn&#39;t attracted negatives votes, it seems that the community doesn&#39;t feel it&#39;s a clear case of <code>not an answer</code>, so imo you can leave it."}], "tags": [], "owner": {"reputation": 96, "user_id": 4603871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fc97720dddafd01c18ec351aac675e?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Shaw", "link": "https://stackoverflow.com/users/4603871/bryan-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679158, "creation_date": 1446679158, "answer_id": 33533954, "question_id": 33532805, "link": "https://stackoverflow.com/questions/33532805/weird-corrupted-string-coming-from-strtok/33533954#33533954", "title": "Weird corrupted string coming from strtok", "body": "<p>You should probably add better bounds checking for one thing.  I do not think that strcmp(string, \"\") will test for string being null, if thats what is intended.  It will only test for an empty string. Also, delimiter is used without being checked.  </p>\n\n<p>I also hope that you have code somewhere that is deleting all the code allocated with new in this function.  You need to worry about the string array as well as each element that is being created.</p>\n\n<p>Otherwise I do not immediately see anything wrong here, though if you start working with triple pointers I'd question my design.  That being said you know what you are trying to do better than I, so I'll leave you to it.  Good luck.</p>\n"}], "owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446679158, "creation_date": 1446674131, "last_edit_date": 1446678866, "question_id": 33532805, "link": "https://stackoverflow.com/questions/33532805/weird-corrupted-string-coming-from-strtok", "title": "Weird corrupted string coming from strtok", "body": "<p><strong>UPDATE: Found some workaround. See below.</strong></p>\n\n<p>I have written a C++ (nearly C except <code>new</code>'s) function in order to parse a string with a given delimiter character (in some way Cocoa's <code>NSString -componentsSeparatedByString</code> equivalent).</p>\n\n<p>I was doing some assertions in order to test my code, I've used <code>strlen</code> for its first element.</p>\n\n<p>Actually I'm using this function through an iteration. Not in the others, but in the first step of iteration I found out that string is <code>\"A\"</code>, however its length calculated by <code>strlen</code> is <code>4</code>.</p>\n\n<p>So I went into debugger and printed out the values, the string was correct, however the values are characters like <code>'\\xef'</code>, <code>'\\xbb'</code>. It seems there is a memory corruption.</p>\n\n<p>LLVM debugger also could not interpret stack variables correctly (I suppose), what does <code>0x0</code> mean? I know it is pointing to <code>0x0000000000000000</code>, but how did it come? It also couldn't tell the elements of the array.</p>\n\n<pre><code>#ifndef BUFSIZ\n#define BUFSIZ 1024\n#endif\n\nchar **componentsSeparatedByString(const char *string, const char *delimiter) {\n    if (strcmp(string, \"\")) {\n        char **components = new char*[BUFSIZ + 1]();\n\n        //  Copying string because strtok is destructive\n        char *input = new char[strlen(string) + 1]();\n        strcpy(input, string);\n\n        unsigned long count = 0;\n\n        char *token = strtok(input, delimiter);\n        while (token != NULL) {\n            components[count] = new char[strlen(token) + 1]();\n            strcpy(components[count++], token);\n\n            token = strtok(NULL, delimiter);\n        }\n\n        //  Releasing that temporary string\n        delete input;\n\n        return components;\n    } else {\n        return nullptr;\n    }\n}\n</code></pre>\n\n<p>Here are some results of debugger:</p>\n\n<p>At first, <code>linesArray</code> is a <code>char ***</code>, which means array of array of strings. It contains strings parsed by this function through iteration. As this function returns an array of strings, <code>linesArray</code> holds all of these results.</p>\n\n<p>The mentioned assertion was <code>strlen(linesArray[i][0]) == 1</code>. This assertion fails only in first step of iteration, where <code>i = 0</code>. There is nothing wrong after that, so I tried the second step of iteration first:</p>\n\n<pre><code>(lldb) po linesArray[1][0]\n\"P\"\n\n(lldb) po linesArray[1][0][0]\n'P'\n\n(lldb) po linesArray[1][0][0] == 'P'\ntrue\n</code></pre>\n\n<p>Everything looks great. Let's do it for the first one:</p>\n\n<pre><code>(lldb) po linesArray[0][0]\n\"A\"\n\n(lldb) po linesArray[0][0][0]\n'\\xef'\n\n(lldb) po linesArray[0][0][0] == '\\xef'\nfalse\n\n(lldb) po linesArray[0][0][0] == 'A'\nfalse\n</code></pre>\n\n<p>As you see <code>lldb</code> contradicts with itself. I couldn't find out why that happened. Is there a memory corruption?</p>\n\n<p>Here is the code how I get the raw strings from file:</p>\n\n<pre><code>char ***linesArray = new char**[BUFSIZ + 1]();\nchar **lines = new char*[BUFSIZ + 1]();\nlines[0] = new char[BUFSIZ + 1]();\nunsigned long count = 0;\nstd::ifstream file(\"whoo.mmp\");\n\nwhile (file.getline(lines[count], BUFSIZ)) {\n    lines[count][strlen(lines[count]) - 1] = '\\0';\n    lines[++count] = new char[BUFSIZ + 1]();\n}\n\nfor (CFUInteger i = 0; lines[i]; ++i) {\n    linesArray[i] = componentsSeparatedByString(lines[i], \";\");\n\n    for (CFUInteger b = 0; linesArray[i][b]; ++b) {\n        std::cout &lt;&lt; \"line: \" &lt;&lt; i &lt;&lt; \", command: \" &lt;&lt; b &lt;&lt; \" -&gt; \\\"\" &lt;&lt; linesArray[i][b] &lt;&lt; \"\\\" : \" &lt;&lt; strlen(linesArray[i][b]) &lt;&lt; '\\n';\n    }\n\n    delete lines[i];\n} \n\ndelete[] lines;\n</code></pre>\n\n<p>Memory hex dump at that breakpoint, showing <code>0x100300340</code>, address pointed by <code>linesArray[0][0][0]</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/b58Bl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b58Bl.png\" alt=\"Memory hex dump\"></a></p>\n\n<p>Any further information may be added upon request, thank you for your help.</p>\n\n<h1>Update</h1>\n\n<p>Changed the line ending character from Unix to Windows, now everything works fine except last line. That may be also solved with another workaround.</p>\n\n<p>Nevertheless I could not persuade myself to that solution, it's obfuscating. I'm using <code>libstdc++</code> (GNU C++ standard library) as standard library, <code>gnu++11</code> as C++ language dialect.</p>\n"}, {"tags": ["c++", "qt", "cmake", "qmake", "qobject"], "answers": [{"tags": [], "owner": {"reputation": 17464, "user_id": 374022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/125dfd1f8005b0dd80c8821446ec36b1?s=128&d=identicon&r=PG", "display_name": "Dimitar Asenov", "link": "https://stackoverflow.com/users/374022/dimitar-asenov"}, "is_accepted": true, "score": 3, "last_activity_date": 1446714062, "creation_date": 1446714062, "answer_id": 33540263, "question_id": 33532637, "link": "https://stackoverflow.com/questions/33532637/q-object-does-not-name-a-type-when-converting-a-qmake-project-to-cmake/33540263#33540263", "title": "Q_OBJECT does not name a type when converting a qmake project to cmake", "body": "<p>I found the issue and it was quite silly, but I want to explain it just in case someone else runs into a similar problem while converting from QMake.</p>\n\n<p>Since my code compiled just fine using QMake I didn't look inside the actual source file <code>EnvisionWindow.h</code> that gcc complained about, thinking that it must be a build issue. When I finally had a look, I saw that this file contains <em>no</em> includes, which is why the compiler couldn't find a definition for <code>Q_OBJECT</code>.</p>\n\n<p>The reason it worked with QMake is because that build uses a precompiled header with the <code>-include</code> flag used for each source file, thus injecting all necessary definitions. This is the behavior one gets automatically when using <code>PRECOMPILED_HEADER = precompiled_header_name.h</code> in a QMake <code>.pro</code> file. I wish QMake didn't do this, since all files in my project are supposed to explicitly include the precompiled header.</p>\n\n<p>Anyway, the solution was trivial: include the precompiled header in <code>EnvisionWindow.h</code> and everything compiles just fine now.</p>\n\n<p><em>Lesson learned:</em> take the compiler error more literally.</p>\n"}], "owner": {"reputation": 17464, "user_id": 374022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/125dfd1f8005b0dd80c8821446ec36b1?s=128&d=identicon&r=PG", "display_name": "Dimitar Asenov", "link": "https://stackoverflow.com/users/374022/dimitar-asenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 33540263, "answer_count": 1, "score": 0, "last_activity_date": 1446714062, "creation_date": 1446673554, "question_id": 33532637, "link": "https://stackoverflow.com/questions/33532637/q-object-does-not-name-a-type-when-converting-a-qmake-project-to-cmake", "title": "Q_OBJECT does not name a type when converting a qmake project to cmake", "body": "<p>I am trying to transition a shared library that uses Qt 5 and <code>Q_OBJECT</code> from QMake to CMake 3.2. Here is the current <code>CMakeLists.txt</code> file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2.2)\n\nproject(core)\n\n# Find includes in corresponding build directories\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\n# Instruct CMake to run moc automatically when needed.\nset(CMAKE_AUTOMOC ON)\n\nfind_package(Qt5Core REQUIRED)\nfind_package(Qt5Gui REQUIRED)\nfind_package(Qt5Widgets REQUIRED)\nfind_package(Qt5Xml REQUIRED)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++1y -pedantic-errors -Werror -Wextra -O2 -g -fno-omit-frame-pointer -Woverloaded-virtual\")\n\nadd_definitions(-DCORE_LIBRARY)\nadd_definitions(-DQT_PLUGIN)\nadd_definitions(-DQT_NO_DEBUG)\nadd_definitions(-DQT_SHARED)\n\nadd_library( core SHARED\n    src/reflect/TypeRegistry.h\n    src/Profiler.h\n    src/reflect/typeIdMacros.h\n    src/reflect/Reflect.h\n    src/AdapterManager.h\n    src/core_api.h\n    src/core.h\n    src/EnvisionApplication.h\n    src/EnvisionException.h\n    src/EnvisionManager.h\n    src/EnvisionPlugin.h\n    src/PluginInfo.h\n    src/global.h\n    src/precompiled.h\n    src/TestEvent.h\n    src/TestRunner.h\n    src/PluginManager.h\n    src/EnvisionWindow.h\n    src/reflect/TypeRegistry.cpp\n    src/Profiler.cpp\n    src/AdapterManager.cpp\n    src/EnvisionException.cpp\n    src/EnvisionManager.cpp\n    src/core.cpp\n    src/EnvisionApplication.cpp\n    src/TestEvent.cpp\n    src/TestRunner.cpp\n    src/PluginManager.cpp\n    src/EnvisionWindow.cpp\n    src/global.cpp )\n\ntarget_link_libraries(core Qt5::Core Qt5::Widgets Qt5::Xml Qt5::Gui)\n</code></pre>\n\n<p>With this <code>CMakeLists.txt</code> file, I can run <code>cmake</code> and it runs without any errors or warnings. However, when I run <code>make</code> I get an error:</p>\n\n<pre><code>$ make\n[  7%] Automatic moc for target core\nGenerating moc_EnvisionApplication.cpp\nGenerating moc_EnvisionWindow.cpp\nGenerating moc_TestRunner.cpp\n[  7%] Built target core_automoc\nScanning dependencies of target core\n[ 14%] Building CXX object CMakeFiles/core.dir/src/reflect/TypeRegistry.cpp.o\n[ 21%] Building CXX object CMakeFiles/core.dir/src/Profiler.cpp.o\n[ 28%] Building CXX object CMakeFiles/core.dir/src/AdapterManager.cpp.o\n[ 35%] Building CXX object CMakeFiles/core.dir/src/EnvisionException.cpp.o\n[ 42%] Building CXX object CMakeFiles/core.dir/src/EnvisionManager.cpp.o\n[ 50%] Building CXX object CMakeFiles/core.dir/src/core.cpp.o\nIn file included from /store/envision/envision/Core/src/core.cpp:27:0:\n/store/envision/envision/Core/src/EnvisionWindow.h:30:1: error: expected class-name before \u2018{\u2019 token\n {\n ^\n/store/envision/envision/Core/src/EnvisionWindow.h:31:2: error: \u2018Q_OBJECT\u2019 does not name a type\n  Q_OBJECT\n  ^\n  ...\n</code></pre>\n\n<p>As you can see, the MOC is run, but it seems like the original header files with the <code>Q_OBJECT</code> macro are passed as is to gcc and it naturally has no clue what <code>Q_OBJECT</code> is and therefore fails. Perhaps the old build, QMake generated new header files and used those instead of the original ones, or avoided this issue in some other way.</p>\n\n<p>Any ideas how to resolve this issue? I looked on-line but didn't find a definitive answer and I feel like there should be a straight-forward solution. Hopefully I don't have to modify any source code as this is just a small part of a bigger project.</p>\n"}, {"tags": ["python", "c++", "fann"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446674250, "post_id": 33532623, "comment_id": 54847217, "body": "Fun with external links: 404! Provide <b>all required</b> information in your question!"}, {"owner": {"reputation": 41, "user_id": 4736670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9TU4.png?s=128&g=1", "display_name": "G. Mizael Mtz Hdz", "link": "https://stackoverflow.com/users/4736670/g-mizael-mtz-hdz"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446696934, "post_id": 33532623, "comment_id": 54854182, "body": "I&#39;m sorry, it&#39;s correct now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446724975, "post_id": 33532623, "comment_id": 54867942, "body": "What did you not understand with &quot;Provide all required information <b>in</b> your question!&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 3075683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8511982af88fbe27c1df387513fa681f?s=128&d=identicon&r=PG&f=1", "display_name": "RPM", "link": "https://stackoverflow.com/users/3075683/rpm"}, "is_accepted": true, "score": 0, "last_activity_date": 1446677018, "last_edit_date": 1446677018, "creation_date": 1446675703, "answer_id": 33533205, "question_id": 33532623, "link": "https://stackoverflow.com/questions/33532623/what-is-the-range-of-error-fann/33533205#33533205", "title": "What is the range of error [FANN]?", "body": "<p>The error is actually the mean square error. For each input record, fann calculates the difference between the target value and the observed value, squares it, sums them all together and divides through by the number of records. It is not a ratio or anything, so values larger than one are possible, particularly if your output values are larger than one.</p>\n\n<p>I would try normalising your input so that it falls in the <code>[-1, 1]</code> range. Neural networks tend to like that more than a range of 0 to 10000.</p>\n"}], "owner": {"reputation": 41, "user_id": 4736670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9TU4.png?s=128&g=1", "display_name": "G. Mizael Mtz Hdz", "link": "https://stackoverflow.com/users/4736670/g-mizael-mtz-hdz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 33533205, "answer_count": 1, "score": -2, "last_activity_date": 1446696603, "creation_date": 1446673519, "last_edit_date": 1446696603, "question_id": 33532623, "link": "https://stackoverflow.com/questions/33532623/what-is-the-range-of-error-fann", "title": "What is the range of error [FANN]?", "body": "<p>I use library FANN <a href=\"http://leenissen.dk/fann/html/files/fann_cpp-h.html\" rel=\"nofollow\">http://leenissen.dk/fann/html/files/fann_cpp-h.html</a>. The values of ANN: </p>\n\n<p>i)activation_function_hidden: SIGMOID_SYMMETRIC_STEPWISE\nii)activation_function_output: LINEAR</p>\n\n<p>My ANN(Artificial neural network), range of input: [0 - 10000]\nRange or output: [0-26]</p>\n\n<p>But the error sometimes is > 1.0, is it possible?, What is the range of error?</p>\n\n<p>*Error in training</p>\n"}, {"tags": ["c++", "string", "validation"], "comments": [{"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1446673737, "post_id": 33532568, "comment_id": 54846933, "body": "you also tested only that your input not start with numbers, if it contains numbers in the middle or at the end it pass your test."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1446673887, "post_id": 33532568, "comment_id": 54847008, "body": "&quot;Only letters&quot; and &quot;no numbers&quot; are different things. Which one do you actually want to test for?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4725678"}, "edited": false, "score": 0, "creation_date": 1446674295, "post_id": 33532715, "comment_id": 54847243, "body": "Hi men, thanks but, let me ask you something, your code is in C++?... is a little confusing to me."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1446675560, "post_id": 33532715, "comment_id": 54847924, "body": "@RobertGomez Yes, this code is C++."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 7, "last_activity_date": 1446701184, "last_edit_date": 1446701184, "creation_date": 1446673807, "answer_id": 33532715, "question_id": 33532568, "link": "https://stackoverflow.com/questions/33532568/verifying-that-a-string-contains-only-letters-in-c/33532715#33532715", "title": "Verifying that a string contains only letters in C++", "body": "<p>No numbers:</p>\n\n<pre><code>if(std::none_of(str.begin(), str.end(), [](unsigned char c){return std::isdigit(c);})) {\n    // stuff\n}\n</code></pre>\n\n<p>All letters:</p>\n\n<pre><code>if(std::all_of(str.begin(), str.end(), [](unsigned char c){return std::isalpha(c);})) {\n    // stuff\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4725678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2125, "favorite_count": 0, "closed_date": 1473187657, "accepted_answer_id": 33532715, "answer_count": 1, "score": 1, "last_activity_date": 1446701184, "creation_date": 1446673306, "question_id": 33532568, "link": "https://stackoverflow.com/questions/33532568/verifying-that-a-string-contains-only-letters-in-c", "closed_reason": "Duplicate", "title": "Verifying that a string contains only letters in C++", "body": "<p>I only found information about this topic using C#, and i'm using C++.\nHope you can help me with this.</p>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;  // Librer\u00eda para el manejo de archivos\n#include &lt;string&gt;   // Librer\u00eda para el manejo de strings\n#include &lt;stdlib.h&gt; // Librer\u00eda para el uso de system(\"cls\");\n\nint main()\n{\n    //Variables\n    string NombreJugador;\n\n/*  Content\n------------------------------------------------------------------------*/\n    do\n    {\n        cout &lt;&lt; \"Your name: \";\n        cin &gt;&gt; NombreJugador;\n    } while(ValidarNombreJugador(NombreJugador));\n\n    return 0;\n}\n\n/*  Function\n------------------------------------------------------------------------*/\nint ValidarNombreJugador(string NombreJugador)\n{\n    int Numero;\n\n    Numero = atoi(NombreJugador.c_str());\n\n    if (Numero!=0)\n    {\n        cout &lt;&lt; \"No puede ingresar numeros, solo letras.\" &lt;&lt; endl;\n        return 1;\n    }\n\n    else\n    {\n        cout &lt;&lt; \"Perfecto, tu nombre no tiene numeros.\" &lt;&lt; endl;\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I have found on Google this way to validate that the name only have letters and not numbers.</p>\n\n<p>The problem is that if you enter \"0\", it recognize it as a letter, a mean, it returns true.</p>\n\n<p><strong>What should I do to properly validate that the string has only letters and not numbers?.</strong></p>\n\n<p>I'm new using string by the way.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1446709978, "post_id": 33532530, "comment_id": 54859037, "body": "<code>CMAKE_MODULE_PATH</code> affects on <i>module</i> mode for <code>find_package</code>: It is used for finding <code>FindFoo.cmake</code>. That is why your first approach doesn&#39;t work. But your second approach should work. Did your tried clean configuration(with empty build directory)? What cache entry <code>Foo_DIR</code> contains after such build? (cached variables are listed in <code>CMakeCache.txt</code>)."}, {"owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1446736726, "post_id": 33532530, "comment_id": 54876125, "body": "The second approach with a clean build worked ... not sure why"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1446746832, "post_id": 33532530, "comment_id": 54882925, "body": "The thing is that variables <code>Foo_FOUND</code>, <code>Foo_DIR</code> and some others <i>are cached</i>. So second running <code>find_package()</code> doesn&#39;t renew them. It is common thing with CMake - if something doesn&#39;t work as expected, then <b>clean build directory and rerun cmake</b>."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "edited": false, "score": 0, "creation_date": 1446674517, "post_id": 33532768, "comment_id": 54847363, "body": "There doesn&#39;t seemto be a &quot;FindFoo.cmake&quot; file in /usr/share/cmake-x.y/modules --- although there are plenty of other &quot;Find*.cmake&quot; corresponding to other programs (Matlab, MPI, Git, ect...)"}, {"owner": {"reputation": 1311, "user_id": 3378021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec3de97d52c21d78a129718943fca613?s=128&d=identicon&r=PG&f=1", "display_name": "Matt O", "link": "https://stackoverflow.com/users/3378021/matt-o"}, "reply_to_user": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "edited": false, "score": 0, "creation_date": 1446674809, "post_id": 33532768, "comment_id": 54847535, "body": "Can you tell me what Foo actually is in your scenario?"}], "tags": [], "owner": {"reputation": 1311, "user_id": 3378021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ec3de97d52c21d78a129718943fca613?s=128&d=identicon&r=PG&f=1", "display_name": "Matt O", "link": "https://stackoverflow.com/users/3378021/matt-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674897, "last_edit_date": 1446674897, "creation_date": 1446673974, "answer_id": 33532768, "question_id": 33532530, "link": "https://stackoverflow.com/questions/33532530/cmake-find-package-cannot-find-include-dirs/33532768#33532768", "title": "CMake find_package() cannot find include dirs", "body": "<p>Make sure the headers are installed, often you'll need to install a -dev or -devel package to get the headers. If they are installed and you can see them in your system, they might be on a path that cmake isn't expecting. Open the findFoo.cmake file (on Linux this will generally be in /usr/share/c make-x.y/modules) and check the list of expected locations, see if you're have installed in a less conventional one. </p>\n"}], "owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3579, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446675059, "creation_date": 1446673167, "last_edit_date": 1446675059, "question_id": 33532530, "link": "https://stackoverflow.com/questions/33532530/cmake-find-package-cannot-find-include-dirs", "title": "CMake find_package() cannot find include dirs", "body": "<p>I am trying to install two projects: Foo and NeedsFoo.  I have successfully compiled and locally installed Foo using cmake.  However, I'm on a server and cmake doesn't appear to \"remember\" where Foo is.</p>\n\n<p>In the cmake to configure NeedsFoo I have</p>\n\n<pre><code>list(APPEND CMAKE_MODULE_PATH \"&lt;prefix&gt;/foo-install/CMake/FOO\") # add path to FOOConfig.cmake\nfind_package(FOO REQUIRED)\nif( FOO_FOUND )\n   MESSAGE(STATUS \"Found FOO!\")\nendif( FOO_FOUND )\n\nMESSAGE(STATUS ${FOO_INCLUDE_DIRS})\n</code></pre>\n\n<p>\"Found Foo!\" is printed --- so cmake finds FOO --- but the variable <code>${FOO_INCLUDE_DIRS}</code> is empty and, therefore, the package does not compile.  Any thoughts?</p>\n\n<p>EDIT: There seems to be another copy of Foo installed on the server.  Unfortunately, I can't use it (it is the 'master' branch of our project and I need to use my own branch).  I tried changing the find_package call to </p>\n\n<pre><code>find_package(FOO REQUIRED PATHS \"&lt;prefix&gt;/foo-install/CMake/Foo\" NO_DEFAULT_PATH) \n</code></pre>\n\n<p>but that did not solve the problem.</p>\n"}, {"tags": ["c++", "bitmap", "mfc"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1446676309, "post_id": 33532448, "comment_id": 54848280, "body": "I don&#39;t know what this is supposed to do: <code>CreateBitmapInfoStruct</code> You should give example of usage of your function. By the way, <code>CImage</code> is good for displaying images but use GDI+ for image manipulation. GDI+ can flip images and do much more."}, {"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1446682457, "post_id": 33532448, "comment_id": 54850401, "body": "The CreatebitmapInfo struct returns the tagBITMAPINFO struct, aka BITMAPINFOHEADER for the bitmap passed to it."}, {"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1446682504, "post_id": 33532448, "comment_id": 54850410, "body": "In my H. File, I have: class BitmapTools : public CBitmap { public: \tHBITMAP H_Bitmap;\t \tPBITMAPINFO PBMI; \t// If the color depth is 8 bits or lower there will be a color palette/table.  \tRGBQUAD colortable; \tPBITMAPINFO CreateBitmapInfoStruct(HBITMAP hBmp); \tvoid CreateBMPFile(LPTSTR pszFile, PBITMAPINFO pbi, HBITMAP hBMP, HDC hDC); \tbool LoadAttachBitmap(LPCTSTR bmpfile); \tvoid GetWidthAndHeight (int* pw, int* ph) const; \tvoid Invert (BOOL bLateral); \tvoid InvertAndFlip(); };"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "edited": false, "score": 0, "creation_date": 1446734250, "post_id": 33540818, "comment_id": 54874300, "body": "Thanks Barmak.  For some reason, I cannot get WriteFile to write, using the method you posted."}, {"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "edited": false, "score": 0, "creation_date": 1446735211, "post_id": 33540818, "comment_id": 54874993, "body": "This works!  I had to change the argument passed to WriteFile used to store the number of bytes from NULL to a temp pointer casted as LPDWORD. e.g.,  WriteFile(hfile,(LPVOID)&amp;bmpFileHeader, sizeof(BITMAPFILEHEADER), (LPDWORD) &amp;dwTmp, NULL);"}, {"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "edited": false, "score": 0, "creation_date": 1446735424, "post_id": 33540818, "comment_id": 54875153, "body": "I found the solution to the writefile problem here: <a href=\"http://stackoverflow.com/questions/17130532/writefile-causes-crash-with-access-violation\" title=\"writefile causes crash with access violation\">stackoverflow.com/questions/17130532/&hellip;</a>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "edited": false, "score": 0, "creation_date": 1446741678, "post_id": 33540818, "comment_id": 54879737, "body": "Oh sorry. I am using Windows 10 which is more forgiving on these errors, I must have thought I could get away with putting <code>NULL</code> there. I edited the answer to show your changes."}, {"owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "edited": false, "score": 0, "creation_date": 1451416088, "post_id": 33540818, "comment_id": 56775970, "body": "Thanks again, Barmak. I implemented your code and it works perfectly."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 1, "last_activity_date": 1446740837, "last_edit_date": 1446740837, "creation_date": 1446715719, "answer_id": 33540818, "question_id": 33532448, "link": "https://stackoverflow.com/questions/33532448/attempting-to-create-save-bitmap-funcion-for-multiple-bpp-formats/33540818#33540818", "title": "Attempting to create Save bitmap funcion for multiple BPP formats", "body": "<p>I think there was memory allocation problem for palette images, plus error with header data. This one should work: </p>\n\n<pre><code>BOOL SaveHBitmap(const char* filename, HBITMAP hbitmap, HDC hdc)\n{\n    BITMAP bitmap;\n    if (!GetObject(hbitmap, sizeof(BITMAP), (void*)&amp;bitmap))\n        return FALSE;\n\n    // Convert the color format to a count of bits.  \n    WORD clrbits = (WORD)(bitmap.bmPlanes * bitmap.bmBitsPixel);\n    if (clrbits == 1) clrbits = 1;\n    else if (clrbits &lt;= 4)  clrbits = 4;\n    else if (clrbits &lt;= 8)  clrbits = 8;\n    else if (clrbits &lt;= 16) clrbits = 16;\n    else if (clrbits &lt;= 24) clrbits = 24;\n    else clrbits = 32;\n\n    //clrUsed is zero for 24 bit and higher\n    int clrUsed = (clrbits &lt;= 8) ? (1 &lt;&lt; clrbits) : 0;\n    TRACE(\"clrUsed %d\\n\", clrUsed);\n\n    int bitmapInfoSize = sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD) * clrUsed;\n    PBITMAPINFO bitmapInfo = (PBITMAPINFO)new char[bitmapInfoSize];\n    memset(bitmapInfo, 0, bitmapInfoSize);\n\n    // Initialize the fields in the BITMAPINFO structure.  \n    bitmapInfo-&gt;bmiHeader.biSize = sizeof(BITMAPINFOHEADER);\n    bitmapInfo-&gt;bmiHeader.biWidth = bitmap.bmWidth;\n    bitmapInfo-&gt;bmiHeader.biHeight = bitmap.bmHeight;\n    bitmapInfo-&gt;bmiHeader.biPlanes = bitmap.bmPlanes;\n    bitmapInfo-&gt;bmiHeader.biBitCount = bitmap.bmBitsPixel;\n    bitmapInfo-&gt;bmiHeader.biClrUsed = clrUsed;\n    bitmapInfo-&gt;bmiHeader.biCompression = BI_RGB;\n\n    // Compute the number of bytes in the array of color indices and store the result in biSizeImage.  \n    // The width must be DWORD aligned unless the bitmap is RLE compressed. \n    int dibSize = ((bitmap.bmWidth * clrbits + 31) &amp; ~31) / 8 * bitmap.bmHeight;\n    char* dib = new char[dibSize];\n\n    bitmapInfo-&gt;bmiHeader.biSizeImage = dibSize;\n\n    // Set biClrImportant to 0, indicating that all of the device colors are important.  \n    bitmapInfo-&gt;bmiHeader.biClrImportant = 0;\n\n    PBITMAPINFOHEADER bmpInfoHeader = (PBITMAPINFOHEADER)bitmapInfo;\n\n    if (!GetDIBits(hdc, hbitmap, 0, bmpInfoHeader-&gt;biHeight, dib, bitmapInfo, 0))\n    {\n        delete bitmapInfo;\n        delete[]dib;\n        return FALSE;\n    }\n\n    BITMAPFILEHEADER bmpFileHeader = { 0 };\n    bmpFileHeader.bfType = 0x4d42;\n    bmpFileHeader.bfOffBits = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER) + clrUsed * sizeof(RGBQUAD);\n    bmpFileHeader.bfSize = bmpFileHeader.bfOffBits + dibSize;\n\n    HANDLE hfile = CreateFile(filename, GENERIC_READ | GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);\n    if (hfile != INVALID_HANDLE_VALUE)\n    {\n        DWORD dwTmp;\n        WriteFile(hfile, (void*)&amp;bmpFileHeader, sizeof(BITMAPFILEHEADER), &amp;dwTmp, NULL);\n        WriteFile(hfile, (void*)bmpInfoHeader, sizeof(BITMAPINFOHEADER) + clrUsed * sizeof(RGBQUAD), &amp;dwTmp, NULL);\n        WriteFile(hfile, (void*)dib, dibSize, &amp;dwTmp, NULL);\n        CloseHandle(hfile);\n    }\n\n    delete bitmapInfo;\n    delete[]dib;\n\n    return TRUE;\n}\n\nvoid foo()\n{\n    const char* filename = \"c:\\\\test\\\\test8bit.bmp\";\n\n    if (IDOK != ::MessageBox(0, \"this will over-write the file\", 0, MB_OKCANCEL))\n        return;\n\n    HBITMAP hbitmap = (HBITMAP)LoadImage(0, filename, IMAGE_BITMAP, 0, 0,\n        LR_CREATEDIBSECTION | LR_DEFAULTSIZE | LR_LOADFROMFILE);\n    if (!hbitmap) return;\n\n    //modify hbitmap here\n    //...\n\n    HDC hdc = CreateCompatibleDC(0);\n    SaveHBitmap(filename, hbitmap, hdc);\n    DeleteDC(hdc);\n\n    ShellExecute(0, 0, filename, 0, 0, SW_SHOW);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5011623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3TNS.png?s=128&g=1", "display_name": "Hugh Laurie", "link": "https://stackoverflow.com/users/5011623/hugh-laurie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 33540818, "answer_count": 1, "score": 1, "last_activity_date": 1446740837, "creation_date": 1446672876, "last_edit_date": 1446682922, "question_id": 33532448, "link": "https://stackoverflow.com/questions/33532448/attempting-to-create-save-bitmap-funcion-for-multiple-bpp-formats", "title": "Attempting to create Save bitmap funcion for multiple BPP formats", "body": "<p>I have a C++ MFC project where I need to flip a bitmap which can be in different formats, and then save it. I am having trouble making a function to save the bitmap in multiple formats.</p>\n\n<p>When I tried to enable ATL (Active Template Libraray) to use the functions in CImage, the #includes that I added broke the project. After trying several different things I gave up.</p>\n\n<p>Since I cannot use CImage, I looked at Microsoft's example for saving a bitmap image. The problem is that their example does not work for any image except 24-bit bitmaps.</p>\n\n<p>Here are the functions from MSDN. </p>\n\n<pre><code>PBITMAPINFO BitmapTools::CreateBitmapInfoStruct(HBITMAP hBmp)\n{ \nBITMAP bmp; \nPBITMAPINFO pbmi; \nWORD    cClrBits; \n\n// Retrieve the bitmap color format, width, and height.  \nif (!GetObjectW(hBmp, sizeof(BITMAP), (LPSTR)&amp;bmp)) \n    return pbmi;\n// errhandler(\"GetObject\", hwnd); \n\n// Convert the color format to a count of bits.  \ncClrBits = (WORD)(bmp.bmPlanes * bmp.bmBitsPixel); \nif (cClrBits == 1) \n    cClrBits = 1; \nelse if (cClrBits &lt;= 4) \n    cClrBits = 4; \nelse if (cClrBits &lt;= 8) \n    cClrBits = 8; \nelse if (cClrBits &lt;= 16) \n    cClrBits = 16; \nelse if (cClrBits &lt;= 24) \n    cClrBits = 24; \nelse cClrBits = 32; \n\n// Allocate memory for the BITMAPINFO structure. (This structure  \n// contains a BITMAPINFOHEADER structure and an array of RGBQUAD  \n// data structures.)  \n\nif (cClrBits &lt; 24)\n{\n    pbmi = (PBITMAPINFO) LocalAlloc(LPTR, \n        sizeof(BITMAPINFOHEADER) + \n        sizeof(RGBQUAD) * (1&lt;&lt; cClrBits)); \n\n    // There is no RGBQUAD array for these formats: 24-bit-per-pixel or 32-bit-per-pixel \n}\nelse\n{\n    pbmi = (PBITMAPINFO) LocalAlloc(LPTR, sizeof(BITMAPINFOHEADER)); \n}\n\n// Initialize the fields in the BITMAPINFO structure.  \n\npbmi-&gt;bmiHeader.biSize = sizeof(BITMAPINFOHEADER); \npbmi-&gt;bmiHeader.biWidth = bmp.bmWidth; \npbmi-&gt;bmiHeader.biHeight = bmp.bmHeight; \npbmi-&gt;bmiHeader.biPlanes = bmp.bmPlanes; \npbmi-&gt;bmiHeader.biBitCount = bmp.bmBitsPixel; \nif (cClrBits &lt; 24) \n    pbmi-&gt;bmiHeader.biClrUsed = (1&lt;&lt;cClrBits); \n\n// If the bitmap is not compressed, set the BI_RGB flag.  \npbmi-&gt;bmiHeader.biCompression = BI_RGB; \n\n// Compute the number of bytes in the array of color  \n// indices and store the result in biSizeImage.  \n// The width must be DWORD aligned unless the bitmap is \n// RLE compressed. \npbmi-&gt;bmiHeader.biSizeImage = ((pbmi-&gt;bmiHeader.biWidth * cClrBits +31) &amp; ~31) /8\n    * pbmi-&gt;bmiHeader.biHeight; \n// Set biClrImportant to 0, indicating that all of the  \n// device colors are important.  \npbmi-&gt;bmiHeader.biClrImportant = 0; \nreturn pbmi; \n} \n</code></pre>\n\n<p>The function to create the file:</p>\n\n<pre><code>void BitmapTools::CreateBMPFile(LPTSTR pszFile, PBITMAPINFO pbi, HBITMAP hBMP, HDC hDC) \n{ \nHANDLE hf;                  // file handle  \nBITMAPFILEHEADER hdr;       // bitmap file-header  \nPBITMAPINFOHEADER pbih;     // bitmap info-header  \nLPBYTE lpBits;              // memory pointer  \nDWORD dwTotal;              // total count of bytes  \nDWORD cb;                   // incremental count of bytes  \nBYTE *hp;                   // byte pointer  \nDWORD dwTmp; \n\npbih = (PBITMAPINFOHEADER) pbi; \nlpBits = (LPBYTE) GlobalAlloc(GMEM_FIXED, pbih-&gt;biSizeImage);\n\nif (!lpBits) \n    return;//errhandler(\"GlobalAlloc\", hwnd); \n\n\n// Retrieve the color table (RGBQUAD array) and the bits  \n// (array of palette indices) from the DIB.  \nif (!GetDIBits(hDC, hBMP, 0, (WORD) pbih-&gt;biHeight, lpBits, pbi, \n    DIB_RGB_COLORS)) \n{\n    return;//errhandler(\"GetDIBits\", hwnd); \n}\n\n// Create the .BMP file.  \nhf = CreateFile(pszFile, \n    GENERIC_READ | GENERIC_WRITE, \n    (DWORD) 0, \n    NULL, \n    CREATE_ALWAYS, \n    FILE_ATTRIBUTE_NORMAL, \n    (HANDLE) NULL); \nif (hf == INVALID_HANDLE_VALUE) \n    return;//errhandler(\"CreateFile\", hwnd); \nhdr.bfType = 0x4d42;        // 0x42 = \"B\" 0x4d = \"M\"  \n// Compute the size of the entire file.  \nhdr.bfSize = (DWORD) (sizeof(BITMAPFILEHEADER) + \n    pbih-&gt;biSize + pbih-&gt;biClrUsed \n    * sizeof(RGBQUAD) + pbih-&gt;biSizeImage); \nhdr.bfReserved1 = 0; \nhdr.bfReserved2 = 0; \n\n// Compute the offset to the array of color indices.  \nhdr.bfOffBits = (DWORD) sizeof(BITMAPFILEHEADER) + \n    pbih-&gt;biSize + pbih-&gt;biClrUsed \n    * sizeof (RGBQUAD); \n\n// Copy the BITMAPFILEHEADER into the .BMP file.  \nif (!WriteFile(hf, (LPVOID) &amp;hdr, sizeof(BITMAPFILEHEADER), \n    (LPDWORD) &amp;dwTmp,  NULL)) \n{\n    return;//errhandler(\"WriteFile\", hwnd); \n}\n\n// Copy the BITMAPINFOHEADER and RGBQUAD array into the file.  \nif (!WriteFile(hf, (LPVOID) pbih, sizeof(BITMAPINFOHEADER) \n    + pbih-&gt;biClrUsed * sizeof (RGBQUAD), \n    (LPDWORD) &amp;dwTmp, ( NULL)))\n    return;//errhandler(\"WriteFile\", hwnd); \n\n// Copy the array of color indices into the .BMP file.  \ndwTotal = cb = pbih-&gt;biSizeImage; \nhp = lpBits; \nif (!WriteFile(hf, (LPSTR) hp, (int) cb, (LPDWORD) &amp;dwTmp,NULL)) \n    return;// errhandler(\"WriteFile\", hwnd); \n\n// Close the .BMP file.  \nif (!CloseHandle(hf)) \n    return;// errhandler(\"CloseHandle\", hwnd); \n\n// Free memory.  \nGlobalFree((HGLOBAL)lpBits);\n}\n</code></pre>\n\n<p>For some reason, when there is a color palette, this last function does not work. If anyone has any tips for modifying this, I would really appreciate it.</p>\n\n<p>Thanks,\n-HL</p>\n\n<p>Edited: Basically, the first function gets and stores the BitmapInfo from the bitmap that was loaded.Here are the declared functions in my H file. For sake of brevity, I am not posting all of the methods in the .cpp file that already work correctly.</p>\n\n<pre><code>class BitmapTools : public CBitmap\n{\npublic:\n// PaddedWidth = ((Width * (BitsPerPixel / 8)) + 3) &amp; (~3)\n// ScanPadding = PaddedWidth - (Width * ( BitsPerPixel / 8 ));\nHBITMAP H_Bitmap;   \nPBITMAPINFO PBMI;\n// If the color depth is 8 bits or lower there will be a color palette/table. \nRGBQUAD colortable;\nPBITMAPINFO CreateBitmapInfoStruct(HBITMAP hBmp);\nvoid CreateBMPFile(LPTSTR pszFile, PBITMAPINFO pbi, HBITMAP hBMP, HDC hDC);\nbool LoadAttachBitmap(LPCTSTR bmpfile);\nvoid GetWidthAndHeight (int* pw, int* ph) const;\nvoid Invert (BOOL bLateral);\nvoid InvertAndFlip();\n};\n</code></pre>\n\n<p>For Calling the methods:</p>\n\n<pre><code>BitmapTools tools;\nif (!tools.LoadAttachBitmap(\"test.bmp\"))\n{\n    return;\n}\ntools.InvertAndFlip();\ntools.PBMI = tools.CreateBitmapInfoStruct(tools.H_Bitmap);\nHDC dc = CreateCompatibleDC(NULL); \ntools.CreateBMPFile(\"temp.bmp\", tools.PBMI, tools.H_Bitmap, dc);\nreturn;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1446672862, "post_id": 33532413, "comment_id": 54846485, "body": "You need to declare the size of <code>odd</code> and <code>even</code>. They&#39;re defaulting to 0 elements, so you&#39;re assigning outside the bounds."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1446672921, "post_id": 33532413, "comment_id": 54846514, "body": "This <code>int odd[]={};</code> isn&#39;t valid C++. Arrays must have non-zero sizes, determined from compile-time constants."}, {"owner": {"reputation": 89231, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "edited": false, "score": 1, "creation_date": 1446672987, "post_id": 33532413, "comment_id": 54846547, "body": "You can use a <code>std::vector&lt;int&gt;</code>, and then you can add numbers to this dynamically with <code>.push_back()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446673230, "post_id": 33532413, "comment_id": 54846671, "body": "another option is to change <code>odd[]</code> to <code>odd[6]</code>"}, {"owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "edited": false, "score": 0, "creation_date": 1446674899, "post_id": 33532413, "comment_id": 54847597, "body": "btw, consider using <code>sizeof(array)</code> or even <code>countof(array)</code>, <code>_countof</code> or similar in for loop expressions. When you manually specify same size of array in four different places, you&#39;ll probably got some problems when modifying this code later."}], "answers": [{"tags": [], "owner": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "is_accepted": false, "score": 0, "last_activity_date": 1446673021, "creation_date": 1446673021, "answer_id": 33532492, "question_id": 33532413, "link": "https://stackoverflow.com/questions/33532413/finding-even-numbers-in-the-array-issue-c/33532492#33532492", "title": "finding even numbers in the array issue (C++)", "body": "<p>You can use <code>std::vector&lt; int &gt; odd;</code> and then call only <code>odd.push_back(elem)</code> whem <code>elem</code> is odd.</p>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "is_accepted": false, "score": 1, "last_activity_date": 1446673505, "creation_date": 1446673505, "answer_id": 33532617, "question_id": 33532413, "link": "https://stackoverflow.com/questions/33532413/finding-even-numbers-in-the-array-issue-c/33532617#33532617", "title": "finding even numbers in the array issue (C++)", "body": "<p>You've got an Undefined Behavior, so result may be any, even random, even formatted hard drive.</p>\n\n<p><code>int odd[] = {}</code> is the same as <code>int odd[/*count  of elements inside {}*/] = {/*nothing*/}</code>, so it's <code>int odd[0];</code> </p>\n\n<p>Result is not defined when you're accessing elements besides the end of array.\nYou probably have to think about correct odd/even arrays size, or use another auto-sizeable data structure. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3285991"}, "is_accepted": false, "score": 1, "last_activity_date": 1446674337, "creation_date": 1446674337, "answer_id": 33532857, "question_id": 33532413, "link": "https://stackoverflow.com/questions/33532413/finding-even-numbers-in-the-array-issue-c/33532857#33532857", "title": "finding even numbers in the array issue (C++)", "body": "<p>\nFirst, although not causing a problem, you initialize an array with data and then overwrite it.  The code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int a[6] = {1,6,3,8,5,10};\n</code></pre>\n\n<p>can be replaced with</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int a[6];\n</code></pre>\n\n<p>Also, as stated in the comments,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int odd[]={};\n</code></pre>\n\n<p>isn't valid.  You should either allocate a buffer as big as the main buffer (6 ints) or use a vector (although I personally prefer c-style arrays for small sizes, because they avoid heap allocations and extra complexity).  With the full-size buffer technique, you need a value like <code>-1</code> (assuming you intend to only input positive numbers) to store after the list of values in the arrays to tell your output code to stop reading, or store the sizes somewhere.  This is to prevent reading values that haven't been set.</p>\n\n<p>I don't understand your problem when 4 is in the input.  Your code looks fine except for your arrays.</p>\n"}], "owner": {"reputation": 283, "user_id": 4922544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-UGcFrKeeKDA/AAAAAAAAAAI/AAAAAAAARWM/q5oP174SnVY/photo.jpg?sz=128", "display_name": "Yu Xiong", "link": "https://stackoverflow.com/users/4922544/yu-xiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7200, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1446674337, "creation_date": 1446672745, "question_id": 33532413, "link": "https://stackoverflow.com/questions/33532413/finding-even-numbers-in-the-array-issue-c", "title": "finding even numbers in the array issue (C++)", "body": "<p>My code is to extract odd number and even number in an 1D array.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int a[6] = {1,6,3,8,5,10};\n    int odd[]={};\n    int even[]={};\n\n    for (int i=0; i &lt; 6; i++) {\n        cin &gt;&gt; a[i];\n    }\n\n    for (int i=0; i &lt; 6; i++) {\n        if (a[i] % 2 == 1) {\n            odd[i] = a[i];\n            cout &lt;&lt; odd[i] &lt;&lt; endl;\n        }\n    }\n\n    cout &lt;&lt; \" \" &lt;&lt; endl;\n\n    for (int i=0; i &lt; 6; i++) {\n        if (a[i] % 2 == 0) {\n            even[i] = a[i];\n            cout &lt;&lt; even[i] &lt;&lt; endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>1\n3\n5\n\n2\n1\n6\n</code></pre>\n\n<p>It shows that it successfully extract odd numbers but the same method applied to the even number. It comes with an issue while the even number is 4. </p>\n\n<p>Could anyone help me find the cause here? Thanks.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1446677454, "post_id": 33532402, "comment_id": 54848773, "body": "Your inner loop probably does not need the cout statement.  (366,000 * 480 linefeeds!)  And, while you are at it, please describe what you think the output of running your program should be?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1446677694, "post_id": 33532402, "comment_id": 54848849, "body": "Also in the inner loop, you do not need to forward declare the randomGenerator() function, already done at the top of your code"}, {"owner": {"reputation": 1, "user_id": 5526619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c37f347b249e0447447667ed907524?s=128&d=identicon&r=PG&f=1", "display_name": "SCSUjer", "link": "https://stackoverflow.com/users/5526619/scsujer"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1446763904, "post_id": 33532402, "comment_id": 54892375, "body": "so the array was way too big after reading some comments and further inquiry with the professor.stock_amount=100 day_amount=50 time_amount=8. Basically an                                                                           olap cube[Stock_amount][day_amount][time_amount]"}, {"owner": {"reputation": 1, "user_id": 5526619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c37f347b249e0447447667ed907524?s=128&d=identicon&r=PG&f=1", "display_name": "SCSUjer", "link": "https://stackoverflow.com/users/5526619/scsujer"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1446764635, "post_id": 33532402, "comment_id": 54892663, "body": "The output once said and done should insert random prices 1-100 into the 3-d array. Then calculate the average price of each stock for every day of the given period (50), then write the output of the averages to the given file with 100 rows for the stocks and 50 columns for the days."}], "answers": [{"comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "reply_to_user": {"reputation": 79438, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 0, "creation_date": 1446717910, "post_id": 33532741, "comment_id": 54863595, "body": "@bames53 true, but that is another debate. For sure STL would be a more &quot;modern&quot; approach that inteernally moves the array to the heap, but this answer was a specific assessment to the presented code. I added this remark to the answer to consider your remark . :)"}], "tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 3, "last_activity_date": 1446720813, "last_edit_date": 1446720813, "creation_date": 1446673890, "answer_id": 33532741, "question_id": 33532402, "link": "https://stackoverflow.com/questions/33532402/need-to-insert-random-numbers-of-1-100-into-a-three-dimensional-array/33532741#33532741", "title": "Need to insert random numbers of 1-100 into a three dimensional array", "body": "<p>You seem to be exceeding stack size. your array, created on the stack, holds about 175M integers, that is, about 700MB of memory. You need to setup compilation options to increase the stack size.</p>\n\n<p>EDIT: moreover, please be aware that putting such huge arrays on the stack is generally considered bad practice. Ideally, use STL vectors, that is the modern way to deal with arrays. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3285991"}, "edited": false, "score": 0, "creation_date": 1446691891, "post_id": 33535022, "comment_id": 54852869, "body": "This is a good example of how to use C++11 and onward effectively. +1!"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1446694067, "post_id": 33535022, "comment_id": 54853435, "body": "@ZirconiumHacker Thank you.  I\u2019ve added a version that uses smart pointers."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1446693704, "last_edit_date": 1446693704, "creation_date": 1446685912, "answer_id": 33535022, "question_id": 33532402, "link": "https://stackoverflow.com/questions/33532402/need-to-insert-random-numbers-of-1-100-into-a-three-dimensional-array/33535022#33535022", "title": "Need to insert random numbers of 1-100 into a three dimensional array", "body": "<p>Here\u2019s a more complex version using the STL:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstdint&gt;\n#include &lt;ctime&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nusing std::cout;\nusing std::endl;\n\n// The size of a type that can hold values from 1 to 100.  Used for storage.  (Copy to int for calculation.)\nusing elem_t = int_least8_t;\n// Lower and upper bounds:\nconstexpr int lb = 1;\nconstexpr int ub = 100;\n\nconstexpr size_t stocks = 100, days = 300, times = 400;\nusing pricearray_t = elem_t[days][times][stocks];\n\npricearray_t&amp; init_prices()\n/* Returns a heap-allocated array that must be deleted with delete[]. */\n{\n  // This ugly little cast is brought to us by the C++ rules for array types.\n  pricearray_t &amp;to_return = *(pricearray_t*) new pricearray_t;\n  const std::default_random_engine::result_type seed = std::time(NULL) * CLOCKS_PER_SEC + std::clock();\n  std::default_random_engine generator(seed);\n  std::uniform_int_distribution&lt;int_fast8_t&gt; distribution( lb, ub );\n\n  auto x = std::bind( distribution, generator );\n\n  for ( size_t i = 0; i &lt; days; ++i )\n    for ( size_t j = 0; j &lt; times; ++j )\n      for ( size_t k = 0; k &lt; stocks; ++k )\n        to_return[i][j][k] = static_cast&lt;elem_t&gt;(x());\n\n  return to_return;\n}\n\nint main(void)\n{\n  const pricearray_t &amp;prices = init_prices();\n\n  long long int sum = 0;\n  for ( size_t i = 0; i &lt; days; ++i )\n    for ( size_t j = 0; j &lt; times; ++j )\n      for ( size_t k = 0; k &lt; stocks; ++k ) {\n        const int x = prices[i][j][k];\n        assert( x &gt;= lb );\n        assert( x &lt;= ub );\n        sum += x;\n      }\n\n   cout &lt;&lt; \"The mean is \" &lt;&lt; static_cast&lt;double&gt;(sum) / days / times / stocks &lt;&lt; \".\" &lt;&lt; endl;\n\n  delete[] &amp;prices;\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Here\u2019s a version that uses smart pointers to manage memory automatically:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstdint&gt;\n#include &lt;ctime&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;random&gt;\n\nusing std::cout;\nusing std::endl;\n\n// The size of a type that can hold values from 1 to 100.  Used for storage.  (Copy to int for calculation.)\nusing elem_t = int_least8_t;\n// Lower and upper bounds:\nconstexpr int lb = 1;\nconstexpr int ub = 100;\n\nconstexpr size_t stocks = 100, days = 300, times = 400;\n// The unique_ptr type doesn\u2019t play nicely with arrays of known size.\nusing pricearray_t = elem_t[][times][stocks];\n\nstd::unique_ptr&lt;pricearray_t&gt; init_prices()\n/* Returns a managed pointer to an array of uniformly-distributed values.\n */\n{\n  // This smart pointer will use its move constructor to avoid copying the entire array.\n  std::unique_ptr&lt;pricearray_t&gt; to_return = std::make_unique&lt;pricearray_t&gt;(days);\n  const std::default_random_engine::result_type seed = std::time(NULL) * CLOCKS_PER_SEC + std::clock();\n  std::default_random_engine generator(seed);\n  std::uniform_int_distribution&lt;int_fast8_t&gt; distribution( lb, ub );\n  auto x = std::bind( distribution, generator );\n\n  for ( size_t i = 0; i &lt; days; ++i )\n    for ( size_t j = 0; j &lt; times; ++j )\n      for ( size_t k = 0; k &lt; stocks; ++k )\n        to_return[i][j][k] = static_cast&lt;elem_t&gt;(x());\n\n  return to_return;\n}\n\nint main(void)\n{\n /* The contents of the smart pointer will be deleted automatically when it goes out of scope.\n  */\n  const std::unique_ptr&lt;pricearray_t&gt; prices = init_prices();\n\n  long long int sum = 0;\n  for ( size_t i = 0; i &lt; days; ++i )\n    for ( size_t j = 0; j &lt; times; ++j )\n      for ( size_t k = 0; k &lt; stocks; ++k ) {\n        const int x = prices[i][j][k];\n        assert( x &gt;= lb );\n        assert( x &lt;= ub );\n        sum += x;\n      }\n\n   cout &lt;&lt; \"The mean is \" &lt;&lt; static_cast&lt;double&gt;(sum) / days / times / stocks &lt;&lt; \".\" &lt;&lt; endl;\n\n   return EXIT_SUCCESS;\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5526619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c37f347b249e0447447667ed907524?s=128&d=identicon&r=PG&f=1", "display_name": "SCSUjer", "link": "https://stackoverflow.com/users/5526619/scsujer"}, "is_accepted": false, "score": 0, "last_activity_date": 1446764478, "creation_date": 1446764478, "answer_id": 33556452, "question_id": 33532402, "link": "https://stackoverflow.com/questions/33532402/need-to-insert-random-numbers-of-1-100-into-a-three-dimensional-array/33556452#33556452", "title": "Need to insert random numbers of 1-100 into a three dimensional array", "body": "<p>It seems the specifications for the original cube provided by the professor were clearly much too large....odd how a professor wouldnt catch that? Scaled back the specs, and now have something that works. The bit in the main is supposed to find the average of the stock price each day(50) for each stock(100). </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;ctime&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nconst int STOCK_AMOUNT = 100, DAY_AMOUNT = 50, TIME_AMOUNT = 8;\nint randomGenerator();\nvoid priceGenerator(int [STOCK_AMOUNT][DAY_AMOUNT][TIME_AMOUNT]);\n\n\nint main()\n{\nofstream outputFile;\nint cube[STOCK_AMOUNT][DAY_AMOUNT][TIME_AMOUNT];\ndouble total;\nsrand((unsigned)time(0));\npriceGenerator(cube);\noutputFile.open(\"Average_Day_Price\");\nfor (int row = 0; row &lt; STOCK_AMOUNT; row++)\n{   \ntotal=0;\nfor (int col = 0; col &lt; DAY_AMOUNT; col++)\n{       \nfor (int layer = 0; layer &lt; TIME_AMOUNT; layer++)\n{           \ntotal = cube[row][col][layer];\ndouble average = (total / TIME_AMOUNT);\noutputFile &lt;&lt; \"STOCK Id:\" &lt;&lt; (row+1) &lt;&lt; \"--\" &lt;&lt; \"--\" &lt;&lt; average &lt;&lt;endl:             \n}\n}\n}\noutputFile.close();\nreturn 0;\n}\nvoid priceGenerator(int array0[STOCK_AMOUNT][DAY_AMOUNT][TIME_AMOUNT])\n{\nint i,y, z;\nfor ( i = 0; i &lt; STOCK_AMOUNT; i++)\n{\nfor ( y = 0; y &lt; DAY_AMOUNT; y++)\n{\nfor (z = 0; z &lt; TIME_AMOUNT; z++)       \n{\nint randNum;\nint lowerLimit = 1;\nint upperLimit = 100;\nrandNum = (rand() % upperLimit) + lowerLimit;\narray0[i][y][z] = randNum;          \n}\n}\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5526619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c37f347b249e0447447667ed907524?s=128&d=identicon&r=PG&f=1", "display_name": "SCSUjer", "link": "https://stackoverflow.com/users/5526619/scsujer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1446764478, "creation_date": 1446672716, "last_edit_date": 1446676757, "question_id": 33532402, "link": "https://stackoverflow.com/questions/33532402/need-to-insert-random-numbers-of-1-100-into-a-three-dimensional-array", "title": "Need to insert random numbers of 1-100 into a three dimensional array", "body": "<p>I need to create a program in which random numbers between 1 and 100 are placed in each dimension of a 3D array. The arrays are of varying sizes, and thus far have only encountered crashes upon execution. Tried on a smaller scale with a 1D array and got it to work fine. Cant seem to translate on larger scale. My code so far...</p>\n\n<pre><code>int const STOCK_AMOUNT = 1000, DAY_AMOUNT = 366, TIME_AMOUNT = 480;\nint randomGenerator();\nvoid randomInsert(int array0[DAY_AMOUNT][TIME_AMOUNT][STOCK_AMOUNT]);\n\nint main()\n{\n    int cube[DAY_AMOUNT][TIME_AMOUNT][STOCK_AMOUNT];\n    srand((unsigned)time(0));\n    randomInsert(cube);\n    return 0;\n}\n\nvoid randomInsert(int array0[DAY_AMOUNT][TIME_AMOUNT][STOCK_AMOUNT])\n{\n    for (int count1 = 0; count1 &lt; DAY_AMOUNT; count1++)\n    {\n        for (int count2 = 0; count2 &lt; TIME_AMOUNT; count2++)\n        {\n            for (int count3 = 0; count3 &lt; STOCK_AMOUNT; count3++)\n            {\n                int randomGenerator();\n                array0[count1][count2][count3] = randomGenerator();\n                cout &lt;&lt; endl;\n            }\n        }\n    }   \n}\n\nint randomGenerator()\n{\n    int randNum;\n    int lowerLimit = 1;\n    int upperLimit = 100;\n    randNum = (rand() % upperLimit) + lowerLimit;\n    return randNum;\n}\n</code></pre>\n"}, {"tags": ["c++", "function-pointers"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1446672575, "post_id": 33532362, "comment_id": 54846344, "body": "Can you show the definition of <code>Manager::testfunc</code>?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1446672654, "post_id": 33532362, "comment_id": 54846383, "body": "Did you try initializing an <code>std::function&lt;std::string()&gt;</code> from <code>&amp;Manager::testfunc</code>?"}, {"owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1446672952, "post_id": 33532362, "comment_id": 54846532, "body": "@Brian - added. It&#39;s pretty much just a shell at the moment. I plan to add the code to it after I figure out how to get the map working."}, {"owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446673065, "post_id": 33532362, "comment_id": 54846596, "body": "@juanchopanza - how does that work? I don&#39;t really understand, sorry!"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1446673126, "post_id": 33532362, "comment_id": 54846617, "body": "You should understand that before you try using maps of functions. One step at a time. It has nothing to do with maps."}, {"owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446673537, "post_id": 33532362, "comment_id": 54846830, "body": "@juanchopanza - It&#39;s just that testfunc is supposed to get it&#39;s string value from the map, and then do some actions based on that. I don&#39;t see how I can initialize values in that function when I don&#39;t yet know what the values are going to be. Am I making sense or is my explanation bad?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446673631, "post_id": 33532362, "comment_id": 54846884, "body": "You aren&#39;t making any sense. Figure out how to use <code>std::function</code>."}, {"owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1446673632, "post_id": 33532362, "comment_id": 54846886, "body": "<code>Manager::testfunc</code> is a <code>std::function&lt;void (std::string)&gt;</code> not a <code>std::function&lt;std::string()&gt;</code>"}, {"owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "reply_to_user": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1446674065, "post_id": 33532362, "comment_id": 54847105, "body": "@WhiteViking - Thanks, I updated my code to show that!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446680538, "post_id": 33532362, "comment_id": 54849830, "body": "<code>&amp;Manager::testfunc</code> is a pointer-to-member, not a function pointer"}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 2, "last_activity_date": 1446674986, "last_edit_date": 1446674986, "creation_date": 1446672964, "answer_id": 33532471, "question_id": 33532362, "link": "https://stackoverflow.com/questions/33532362/how-do-i-insert-a-member-function-pointer-into-a-map/33532471#33532471", "title": "How do I insert a member-function pointer into a map?", "body": "<p>In order for a member function pointer to be callable you must bind it to an object. Thus, provided a <code>Manager</code> object (e.g., <code>Manager m</code>) you can use <code>std::bind</code> to bind a member function (e.g., <code>void Manager::foo(std::string const&amp;)</code>) and then insert it in your <code>std::map</code> as follows:</p>\n\n<pre><code>struct Manager {\n  void foo(std::string const&amp; str) { std::cout &lt;&lt; str &lt;&lt; std::endl; }\n};\n\nint main() {\n  std::map&lt;std::string, std::function&lt;void(std::string const&amp;)&gt;&gt; cMap;\n  Manager m;\n  cMap.insert(std::make_pair(\"test\", std::bind(&amp;Manager::foo, &amp;m, std::placeholders::_1)));\n  cMap[\"test\"](\"Hello, world!\");\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8a58425499c168cf\" rel=\"nofollow\"><strong>LIVE DEMO</strong></a></p>\n"}], "owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33532471, "answer_count": 1, "score": 2, "last_activity_date": 1446747102, "creation_date": 1446672531, "last_edit_date": 1446747102, "question_id": 33532362, "link": "https://stackoverflow.com/questions/33532362/how-do-i-insert-a-member-function-pointer-into-a-map", "title": "How do I insert a member-function pointer into a map?", "body": "<p>I have this map:</p>\n\n<pre><code>std::map&lt;std::string, std::function&lt;void (std::string)&gt;&gt; cMap;\n</code></pre>\n\n<p>I don't quite understand how to add value to it?</p>\n\n<p>I tried</p>\n\n<blockquote>\n  <p>cMap.insert(std::make_pair(\"test\", &amp;Manager::testfunc));</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>cMap[\"test\"] = &amp;Manager::testfunc;</p>\n</blockquote>\n\n<p>But I get \"failed to specialize function template\" errors on either one.</p>\n\n<p>I'm not all that familiar with function pointers and I've honestly spent <em>hours</em> googling and reading questions and answers, but I just can't find anything that works. Please help me.</p>\n\n<p>Edit:\nFor now, Manager::testfunc is just:</p>\n\n<pre><code>void Manager::testfunc (std::string value) { }\n</code></pre>\n"}, {"tags": ["c++", "copy-constructor", "pass-by-value"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446672880, "post_id": 33532275, "comment_id": 54846493, "body": "&quot;copy-constructor&quot; and &quot;unique_ptr like&quot; are not compatible... the latter is only movable."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446672954, "post_id": 33532275, "comment_id": 54846533, "body": "<code>StackGuard(StackGuard&lt;T&gt; newPtr)</code> is not a copy-constructor; copy-constructors can only accept their argument by lvalue reference. . I don&#39;t even think this is a legal function"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1446674271, "post_id": 33532721, "comment_id": 54847229, "body": "I think, since we need to avoid double delete, the copy constructor needs to modify its input, and point thePtr to NULL"}, {"owner": {"reputation": 7212, "user_id": 108517, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3401cada0a161eba206575cc4122960?s=128&d=identicon&r=PG", "display_name": "J&#248;rgen Fogh", "link": "https://stackoverflow.com/users/108517/j%c3%b8rgen-fogh"}, "edited": false, "score": 0, "creation_date": 1446675912, "post_id": 33532721, "comment_id": 54848085, "body": "Doh. You&#39;re right, I didn&#39;t think about the use case. <i>Usually</i> you should use a const reference though. I have edited the answer."}], "tags": [], "owner": {"reputation": 7212, "user_id": 108517, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3401cada0a161eba206575cc4122960?s=128&d=identicon&r=PG", "display_name": "J&#248;rgen Fogh", "link": "https://stackoverflow.com/users/108517/j%c3%b8rgen-fogh"}, "is_accepted": false, "score": 0, "last_activity_date": 1446675927, "last_edit_date": 1446675927, "creation_date": 1446673824, "answer_id": 33532721, "question_id": 33532275, "link": "https://stackoverflow.com/questions/33532275/ive-met-an-copy-constructor-error-but-dont-know-if-my-thought-about-this-erro/33532721#33532721", "title": "I&#39;ve met an copy constructor error, but don&#39;t know if my thought about this error is correct", "body": "<p>Your assumption that the copy constructor would have to call itself recursively is correct. For this reason, the standard disallows copy constructors declared by value. This means that only the second version is legal.</p>\n\n<p>The other constructor is legal. However, you should usually declare copy constructors by const reference. Constructors should not modify their input, so you should let the compiler enforce the guarantee for you. Using a const reference will also let you copy const objects, which you can't do otherwise.</p>\n"}, {"comments": [{"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1446674536, "post_id": 33532723, "comment_id": 54847378, "body": "Thank you for your answer, and this ambiguity is the reason compiler yells? About the copyable thing, what if I want to handover the ownership of the object held by StackGuard object?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 1, "creation_date": 1446674632, "post_id": 33532723, "comment_id": 54847428, "body": "@Curtis2 You move it. <code>StackGuard&lt;T&gt; new_obj = std::move(old_obj);</code>"}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1446674787, "post_id": 33532723, "comment_id": 54847523, "body": "Aha, that&#39;s it! Thank you so much, very helpful! @Barry"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1446673826, "creation_date": 1446673826, "answer_id": 33532723, "question_id": 33532275, "link": "https://stackoverflow.com/questions/33532275/ive-met-an-copy-constructor-error-but-dont-know-if-my-thought-about-this-erro/33532723#33532723", "title": "I&#39;ve met an copy constructor error, but don&#39;t know if my thought about this error is correct", "body": "<p>From [class.copy]:</p>\n\n<blockquote>\n  <p>A declaration of a constructor for a class X is ill-formed if its first parameter is of type (optionally cv-qualified)\n  X and either there are no other parameters or else all other parameters have default arguments. A member\n  function template is never instantiated to produce such a constructor signature.</p>\n</blockquote>\n\n<p>Your constructor <code>StackGuard(StackGuard&lt;T&gt; )</code> is ill-formed. The issue here has nothing to do with recursion: such a constructor would lead to ambiguity. Consider the equivalent:</p>\n\n<pre><code>void foo(int ) { }\nvoid foo(int&amp; ) { }\n\nint i;\nfoo(i); // error: ambiguous\n</code></pre>\n\n<p>If such a constructor were allowed, there would always be ambiguity between this impostor copy constructor and the real (implicit or explicit) copy constructor.</p>\n\n<p>And furthermore, \"unique-ptr like\" doesn't suggest to me copyable. You'll want to write a move constructor. If you don't have access to C++11, you'll want to take a look at how <code>auto_ptr</code> is implemented and copy from there.</p>\n"}], "owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33532723, "answer_count": 2, "score": 0, "last_activity_date": 1446675927, "creation_date": 1446672241, "last_edit_date": 1446672732, "question_id": 33532275, "link": "https://stackoverflow.com/questions/33532275/ive-met-an-copy-constructor-error-but-dont-know-if-my-thought-about-this-erro", "title": "I&#39;ve met an copy constructor error, but don&#39;t know if my thought about this error is correct", "body": "<p>I'm writing an unique_ptr-like class called StackGuard, and trying to make two copy constructors:</p>\n\n<pre><code>template&lt;typename T&gt;    \nclass StackGuard{\n  T* thePtr;   //To store the raw pointer.\n               //something here...\n  StackGuard(StackGuard&lt;T&gt;&amp; newPtr) throw();\n  StackGuard(StackGuard&lt;T&gt; newPtr) throw();  //I know this is not the right way\n              //something here...\n};\n\ntemplate&lt;typename T&gt;\nStackGuard&lt;T&gt;::StackGuard(StackGuard&lt;T&gt;&amp; newPtr) throw(){\n    thePtr = newPtr.thePtr;\n    newPtr.thePtr = NULL;\n}\n\ntemplate&lt;typename T&gt;\nStackGuard&lt;T&gt;::StackGuard(StackGuard&lt;T&gt; newPtr) throw(){\n    thePtr = newPtr.thePtr;\n    newPtr.thePtr = NULL;\n}\n</code></pre>\n\n<p>But it doesn't work. The compiler says</p>\n\n<pre><code>error: invalid constructor; you probably meant \u2018StackGuard&lt;T&gt; (const StackGuard&lt;T&gt;&amp;)\u2019\n     StackGuard(StackGuard&lt;T&gt; newPtr) throw();\n                                            ^\nerror: prototype for \u2018StackGuard&lt;T&gt;::StackGuard(StackGuard&lt;T&gt;)\u2019 \ndoes not match any in class \u2018StackGuard&lt;T&gt;\u2019\n  StackGuard&lt;T&gt;::StackGuard(StackGuard&lt;T&gt; newPtr) throw(){\n  ^\nerror: candidates are: StackGuard&lt;T&gt;::StackGuard(const StackGuard&lt;T&gt;&amp;)\n  StackGuard&lt;T&gt;::StackGuard(const StackGuard&lt;T&gt;&amp; newPtr) throw(){\n  ^\nerror:                 StackGuard&lt;T&gt;::StackGuard(T*)\n  StackGuard&lt;T&gt;::StackGuard(T* guarded = NULL) throw() {\n</code></pre>\n\n<p>I have a thought about this error, but don't know if it's right.</p>\n\n<p>My thought is:</p>\n\n<p>The pass-by-value copy constructor need to use the copy constructor to copy the argument, and at this scenario, the it'll call itself recursively, which will result in infinite calls.</p>\n\n<p>I also wonder, why the compiler give a \"does not match any in class\" error, since it has a match.</p>\n"}, {"tags": ["c++", "file", "random-sample"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446671679, "post_id": 33532108, "comment_id": 54845872, "body": "What qualifies <i>randomness</i>? An arbitrary line number based on the result of a random number generator?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1446672069, "post_id": 33532108, "comment_id": 54846087, "body": "I rolled a die, and a 1 turned up. Seems like your code is ok."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1446672250, "post_id": 33532108, "comment_id": 54846191, "body": "Figure out how to get the k:th line for a specific k. Add randomness."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1446672259, "post_id": 33532108, "comment_id": 54846197, "body": "Get a random numner and store it in <code>x</code>. Read <code>x-1</code> lines. Then the next line you read will be the one you use."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1446672677, "post_id": 33532108, "comment_id": 54846395, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/232237/whats-the-best-way-to-return-a-random-line-in-a-text-file-using-c\" title=\"whats the best way to return a random line in a text file using c\">stackoverflow.com/questions/232237/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5446698, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/imHWH.jpg?s=128&g=1", "display_name": "Solarmo", "link": "https://stackoverflow.com/users/5446698/solarmo"}, "edited": false, "score": 0, "creation_date": 1446734550, "post_id": 33532309, "comment_id": 54874532, "body": "Well, the first one will get a certain line, it won&#39;t get a random one."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 81, "user_id": 5446698, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/imHWH.jpg?s=128&g=1", "display_name": "Solarmo", "link": "https://stackoverflow.com/users/5446698/solarmo"}, "edited": false, "score": 0, "creation_date": 1446735054, "post_id": 33532309, "comment_id": 54874879, "body": "@Solarmo You can set the <code>lineno</code> to a random number though."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1446672815, "last_edit_date": 1446672815, "creation_date": 1446672371, "answer_id": 33532309, "question_id": 33532108, "link": "https://stackoverflow.com/questions/33532108/pick-a-random-line-from-text-file-in-c/33532309#33532309", "title": "Pick a random line from text file in C++", "body": "<p>You can read in your file's lines into a <code>std::vector&lt;std::string&gt;</code> and <em>randomly</em> access a specific line within the range of the vectors size:</p>\n\n<pre><code>std::string line;\nstd::vector&lt;std::string&gt; lines;\nwhile(getline(infile, line)) {\n    lines.push_back(line);\n}\n\nif(lines.size() &gt;= 4) {\n     std::cout &lt;&lt; \"Line number 5: \" &lt;&lt; lines[4] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<p>Another option is to set a random number first, and count the lines read:</p>\n\n<pre><code>int lineno = 5;\nint linecount = 0;\nstd::string line;\nwhile(getline(infile, line)) {\n    ++linecount;\n    if(linecount == lineno) {\n        std::cout &lt;&lt; \"Line number \" &lt;&lt; lineno &lt;&lt; \": \" &lt;&lt; line &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": false, "score": 1, "last_activity_date": 1446672525, "creation_date": 1446672525, "answer_id": 33532361, "question_id": 33532108, "link": "https://stackoverflow.com/questions/33532108/pick-a-random-line-from-text-file-in-c/33532361#33532361", "title": "Pick a random line from text file in C++", "body": "<p>Call <code>getline</code> a random number of times and make sure to stop the loop if you reach end of file.</p>\n\n<p>As long as you don't know how long the lines in your file are there's no way to somehow compute the beginning of any line (except the very first line of course) and seek directly to that point.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5446698, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/imHWH.jpg?s=128&g=1", "display_name": "Solarmo", "link": "https://stackoverflow.com/users/5446698/solarmo"}, "edited": false, "score": 0, "creation_date": 1446735243, "post_id": 33532584, "comment_id": 54875023, "body": "What&#39;s Get_Random_Line_Number() ??"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 81, "user_id": 5446698, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/imHWH.jpg?s=128&g=1", "display_name": "Solarmo", "link": "https://stackoverflow.com/users/5446698/solarmo"}, "edited": false, "score": 0, "creation_date": 1446739452, "post_id": 33532584, "comment_id": 54878233, "body": "It is a function you write to return a random line number."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1446673388, "creation_date": 1446673388, "answer_id": 33532584, "question_id": 33532108, "link": "https://stackoverflow.com/questions/33532108/pick-a-random-line-from-text-file-in-c/33532584#33532584", "title": "Pick a random line from text file in C++", "body": "<p>You can store the file offsets of the line beginnings into a <code>std::vector</code>.  Next, generate your random number.  Use the number as an index into the <code>std::vector</code>, and get the starting position of the line.  Seek to that position and fetch the line.</p>\n\n<pre><code>std::vector&lt;std::streampos&gt; line_offsets;\nline_offsets.push_back(0); // The first line.\nstd::string text_line;\nwhile (getline(text_file, text_line))\n{\n  std::streampos file_offset = text_file.tellg();\n  line_offsets.push_back(file_offset);\n}\n//...\nstd::streampos offset = line_offsets[Get_Random_Line_Number()];\ntext_file.seekg(offset);\nstd::string random_text_line;\ngetline(text_file, random_text_line);\n</code></pre>\n\n<p>This method doesn't use as much memory as storing each text line into a vector.</p>\n"}, {"tags": [], "owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "is_accepted": false, "score": 3, "last_activity_date": 1446710238, "last_edit_date": 1495541441, "creation_date": 1446674894, "answer_id": 33533006, "question_id": 33532108, "link": "https://stackoverflow.com/questions/33532108/pick-a-random-line-from-text-file-in-c/33533006#33533006", "title": "Pick a random line from text file in C++", "body": "<p>You can use the \"Reservoir Sampling\" approach as described in these related posts:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/3540315/1025391\">https://stackoverflow.com/a/3540315/1025391</a></li>\n<li><a href=\"https://stackoverflow.com/a/9401846/1025391\">https://stackoverflow.com/a/9401846/1025391</a></li>\n<li><a href=\"https://stackoverflow.com/a/32792504/1025391\">https://stackoverflow.com/a/32792504/1025391</a></li>\n<li><a href=\"https://stackoverflow.com/a/232248/1025391\">https://stackoverflow.com/a/232248/1025391</a></li>\n<li><a href=\"https://stackoverflow.com/a/2933159/1025391\">https://stackoverflow.com/a/2933159/1025391</a></li>\n</ul>\n\n<p>As we learn from the Wikipedia article on Reservoir Sampling: </p>\n\n<blockquote>\n  <p>Reservoir sampling is a family of randomized algorithms for randomly choosing a sample of k items from a list S containing n items, where n is either a very large or unknown number. Typically n is large enough that the list doesn't fit into main memory.</p>\n</blockquote>\n\n<p>Using such algorithm it is possible to pick random elements from a series of unknown length in a single pass, without the need to store all of them in memory.</p>\n\n<p>Here's an (untested) example:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\nint main() {\n    std::random_device seed;\n    std::mt19937 prng(seed());\n    std::string line, result;\n    for(std::size_t n = 0; std::getline(std::cin, line); n++) {\n        std::uniform_int_distribution&lt;&gt; dist(0, n);\n        if (dist(prng) &lt; 1)\n            result = line;\n    }\n    std::cout &lt;&lt; \"random line: '\" &lt;&lt; result &lt;&lt; \"'\\n\";\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>$ g++ test.cc -std=c++11 &amp;&amp; ./a.out &lt; test.cc\nrandom line: '#include &lt;iostream&gt;'\n</code></pre>\n\n<p>For reference:</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/random</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Reservoir_sampling\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Reservoir_sampling</a></li>\n</ul>\n"}], "owner": {"reputation": 81, "user_id": 5446698, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/imHWH.jpg?s=128&g=1", "display_name": "Solarmo", "link": "https://stackoverflow.com/users/5446698/solarmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5368, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1446712080, "creation_date": 1446671561, "last_edit_date": 1446712080, "question_id": 33532108, "link": "https://stackoverflow.com/questions/33532108/pick-a-random-line-from-text-file-in-c", "title": "Pick a random line from text file in C++", "body": "<p>I'm trying to read a random line from a text file.</p>\n\n<p>My code so far picks the first line, but I need a random line.</p>\n\n<p>How would I get a random line?</p>\n\n<pre><code>string line;\nif(infile.good()){\n    getline(infile, line);\n}\n</code></pre>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446671347, "post_id": 33532045, "comment_id": 54845670, "body": "What is first? Leftmost? Rightmost?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 2, "creation_date": 1446671477, "post_id": 33532045, "comment_id": 54845740, "body": "Interesting: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#SwappingBitsXOR\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#SwappingBitsXOR</a>"}, {"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 1, "creation_date": 1446671496, "post_id": 33532045, "comment_id": 54845754, "body": "Build a hash table of all 256 possible states a byte can be in and the transformation you want.  Then just do the look up.  Repeat for the next byte if needed."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 1, "creation_date": 1446671559, "post_id": 33532045, "comment_id": 54845794, "body": "@i_am_jorf and then the challenge is to handle the <code>unsigned long long</code>: it has 7 boundaries where adjacent bit pairs cross byte boundaries."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1446671673, "post_id": 33532045, "comment_id": 54845868, "body": "@i_am_jorf If you could see me tilt my head... you&#39;d know I&#39;m awaiting your demo implementation o.O"}, {"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1446671758, "post_id": 33532045, "comment_id": 54845915, "body": "Yeah, you&#39;re right.  Nevermind."}, {"owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "edited": false, "score": 0, "creation_date": 1446672106, "post_id": 33532045, "comment_id": 54846113, "body": "Isn&#39;t the first example <code>100100 -&gt; 011000</code> ? Or could someone explain the problem a little more clearly?"}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "edited": false, "score": 0, "creation_date": 1446672199, "post_id": 33532045, "comment_id": 54846172, "body": "@personjerry, you start from right to left, detect first 2 bits that differ, and swap them. The goal is to detect the closest number which has the same number of bits set to 1."}, {"owner": {"reputation": 3355, "user_id": 480529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b7b7fbfc2e7e23b3856161ecea29a21?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/480529/r%c3%a9mi"}, "edited": false, "score": 0, "creation_date": 1447194873, "post_id": 33532045, "comment_id": 55055937, "body": "BTW, is it an academic exercise, or do you have an application for this? Just curious."}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 3355, "user_id": 480529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b7b7fbfc2e7e23b3856161ecea29a21?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/480529/r%c3%a9mi"}, "edited": false, "score": 0, "creation_date": 1447233253, "post_id": 33532045, "comment_id": 55068133, "body": "@R&#233;mi, just a problem for technical interviews."}], "answers": [{"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 3, "last_activity_date": 1446674610, "last_edit_date": 1446674610, "creation_date": 1446674303, "answer_id": 33532844, "question_id": 33532045, "link": "https://stackoverflow.com/questions/33532045/how-to-swap-first-2-consecutive-different-bits/33532844#33532844", "title": "How to swap first 2 consecutive different bits", "body": "<p>This is the same idea without using an <code>if</code>.</p>\n\n<pre><code>unsigned long long special_swap(unsigned long long number)\n{\n    unsigned long long t = ((number &amp; 1) &lt;&lt; 1) - 1;\n    return (number + t) ^ ((number ^ (number + t)) &gt;&gt; 2);\n}\n</code></pre>\n\n<p>The variable <code>t</code> is either 1 or -1, depending on the lsb of the number.</p>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/7355e4d8509fe43d\" rel=\"nofollow\">Test it live</a></kbd></p>\n"}, {"comments": [{"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "edited": false, "score": 0, "creation_date": 1446675916, "post_id": 33533069, "comment_id": 54848088, "body": "I considered the function undefined in 0, so that&#39;s fine. How did you come up with x ^ (x &gt;&gt; 1), what does that achieve?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 1, "creation_date": 1446737218, "post_id": 33533069, "comment_id": 54876520, "body": "Note: this function also has a case that is not handled &quot;as expected&quot;: when all bits are 1, it sets the highest bit to 0. However the function from the question (and my version of it) set the two highest bits to 0. Anyway: that&#39;s a very nice solution!"}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1446814507, "post_id": 33533069, "comment_id": 54912452, "body": "@alain, i guess I would consider the case when all bits are 1 also as undefined, since the correct result would overflow (e.g. for 4 bits integers 1111 -&gt; 10111). I chose this as accepted answer because I found it easier to understand and it doesn&#39;t differentiate between 0 and 1 bits."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "edited": false, "score": 0, "creation_date": 1446820302, "post_id": 33533069, "comment_id": 54916082, "body": "@gg.kaspersky I just wanted to mention it for completeness. I think I would also have accepted this answer ;-)"}], "tags": [], "owner": {"reputation": 3355, "user_id": 480529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b7b7fbfc2e7e23b3856161ecea29a21?s=128&d=identicon&r=PG", "display_name": "R&#233;mi", "link": "https://stackoverflow.com/users/480529/r%c3%a9mi"}, "is_accepted": true, "score": 4, "last_activity_date": 1446676092, "last_edit_date": 1446676092, "creation_date": 1446675173, "answer_id": 33533069, "question_id": 33532045, "link": "https://stackoverflow.com/questions/33532045/how-to-swap-first-2-consecutive-different-bits/33533069#33533069", "title": "How to swap first 2 consecutive different bits", "body": "<p>This is how I would do it:</p>\n\n<pre><code>unsigned long long my_swap(unsigned long long number)\n{\n unsigned long long x = number ^ (number &gt;&gt; 1);\n return number ^ ((x &amp; -x) * 3);\n}\n</code></pre>\n\n<p>My solution returns 0 when number == 0, whereas the function of the original question returns 1100000000000000000000000000000000000000000000000000000000000000.</p>\n\n<p>Some explanations: the bits of x contain 0 if the bit at this position is equal to the next bit, and 1 if it is different. (x &amp; -x) is the least significant bit of x, that is to say the first bit difference.</p>\n"}], "owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 3, "accepted_answer_id": 33533069, "answer_count": 2, "score": 8, "last_activity_date": 1446676092, "creation_date": 1446671313, "last_edit_date": 1446672779, "question_id": 33532045, "link": "https://stackoverflow.com/questions/33532045/how-to-swap-first-2-consecutive-different-bits", "title": "How to swap first 2 consecutive different bits", "body": "<p>What would be a fast and elegant way to swap the first (least significant) 2 different consecutive bits in an unsigned integer?</p>\n\n<p>E.g.</p>\n\n<pre><code>100100 -&gt; 100010\n110011 -&gt; 110101\n</code></pre>\n\n<p>So far I came up with this:</p>\n\n<pre><code>unsigned long long special_swap(unsigned long long number)\n{\n    if (number &amp; 1)\n        return (number + 1) ^ ((number ^ (number + 1)) &gt;&gt; 2);\n    number = ~number;\n    return ~((number + 1) ^ ((number ^ (number + 1)) &gt;&gt; 2));\n}\n</code></pre>\n\n<p>My biggest discontent with the above solution is that it uses the <code>if</code> instruction.</p>\n"}, {"tags": ["c++", "sdl", "truetype", "sdl-ttf"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1446671372, "post_id": 33531999, "comment_id": 54845683, "body": "Where are you printing the characters to the screen?  <code>printToConsole</code> does not print anything."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1446671560, "post_id": 33531999, "comment_id": 54845795, "body": "<code>printToConsole</code> only copies a string slowly. You&#39;re not rendering it until it has been copied completely."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3285991"}, "is_accepted": true, "score": 1, "last_activity_date": 1446675573, "creation_date": 1446675573, "answer_id": 33533169, "question_id": 33531999, "link": "https://stackoverflow.com/questions/33531999/sdl-delay-not-working-in-for-loop/33533169#33533169", "title": "SDL_Delay not working in for loop", "body": "<p>You should re-render the text for every new character added, instead of slowly copying it and then rendering it afterwards.</p>\n\n<p>(Sorry for the short answer, I don't have enough rep to comment).</p>\n"}], "owner": {"reputation": 283, "user_id": 2921254, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/t4aZU.gif?s=128&g=1", "display_name": "genfy", "link": "https://stackoverflow.com/users/2921254/genfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 33533169, "answer_count": 1, "score": 0, "last_activity_date": 1446675573, "creation_date": 1446671185, "question_id": 33531999, "link": "https://stackoverflow.com/questions/33531999/sdl-delay-not-working-in-for-loop", "title": "SDL_Delay not working in for loop", "body": "<p>For some reason my loop isn't working. I'm trying to create slow typing text but it just prints simultaneously. By slow printing text, I mean like an RPG's dialogue.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>void printToConsole(std::string message, std::string &amp;text){\n    for(int i = 0; i &lt; message.length(); i++){\n        text += message[i];\n        SDL_Delay(30);\n    }\n}\n</code></pre>\n\n<p>If needed, here is my full code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;SDL.h&gt;\n#include&lt;string&gt;\n#include&lt;SDL_ttf.h&gt;\n\nvoid handleEvents(SDL_Event e, bool* quit){\n    while(SDL_PollEvent(&amp;e) &gt; 0){\n        if(e.type == SDL_QUIT){\n            *quit = true;\n        }\n    }\n}\n\nvoid render(SDL_Renderer* renderer, SDL_Texture* textToRender, SDL_Rect srcrect, SDL_Rect dstrect){\n    SDL_RenderClear(renderer);\n\n    SDL_RenderCopy(renderer, textToRender, &amp;srcrect, &amp;dstrect);\n\n    SDL_RenderPresent(renderer);\n}\n\nvoid printToConsole(std::string message, std::string &amp;text){\n    for(int i = 0; i &lt; message.length(); i++){\n        text += message[i];\n        SDL_Delay(30);\n    }\n}\n\nvoid start(std::string &amp;text){\n    printToConsole(\"Hey ;)\", text);\n}\n\nint main( int argc, char *argv[] ) {\n    SDL_Init(SDL_INIT_EVERYTHING);\n    TTF_Init();\n    SDL_Window* window = SDL_CreateWindow(\"Game\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 600, 600, SDL_RENDERER_ACCELERATED);\n    SDL_Renderer* renderer = SDL_CreateRenderer(window, 0, 0);\n\n    std::string text; //This is the text that has been rendered.\n    bool quit = false;\n    SDL_Event e;\n\n    TTF_Font* font = TTF_OpenFont(\"Hack-Regular.ttf\", 28);\n    SDL_Color color = {255, 255, 255};\n    SDL_Surface* textSurface;\n    SDL_Texture* textTexture;\n\n    SDL_Rect srcrect;\n    SDL_Rect dstrect;\n\n    srcrect.x = 0;\n    srcrect.y = 0;\n    srcrect.w = 100;\n    srcrect.h = 32;\n    dstrect.x = 10;\n    dstrect.y = 10;\n    dstrect.w = 100;\n    dstrect.h = 32;\n\n    while(!quit){\n        handleEvents(e, &amp;quit);\n        render(renderer, textTexture, srcrect, dstrect);\n\n        start(text);\n\n        textSurface = TTF_RenderText_Solid(font, text.c_str(), color);\n        textTexture = SDL_CreateTextureFromSurface(renderer, textSurface);\n    }\n\n    SDL_DestroyWindow(window);\n    SDL_DestroyRenderer(renderer);\n\n    window = NULL;\n    renderer = NULL;\n    TTF_Quit();\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-studio-2012", "mingw", "hook"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446711048, "post_id": 33531955, "comment_id": 54859587, "body": "It is operating system specific."}, {"owner": {"reputation": 67712, "user_id": 155077, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MaCKR.jpg?s=128&g=1", "display_name": "Stefan Steiger", "link": "https://stackoverflow.com/users/155077/stefan-steiger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446720668, "post_id": 33531955, "comment_id": 54865368, "body": "@Basile Starynkevitch: No it&#39;s not. It&#39;s processor specific, but it works on Windows, Linux, AND Mac. However, on Windows, right now, it doesn&#39;t work when I compile with VC. It only works on Windows when I compile with MinGW g++. The only reason it can realistically fail is that there&#39;s a jump within the first 5 bytes (here 6 or 9, depending on the compiler). Another reason that it fails is when you run it on Linux in a shared library that&#39;s compiled with -fPIC, but that&#39;s clear, since it doesn&#39;t read the PLT. What is different for each operating-system/executable is the detour length."}], "owner": {"reputation": 67712, "user_id": 155077, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MaCKR.jpg?s=128&g=1", "display_name": "Stefan Steiger", "link": "https://stackoverflow.com/users/155077/stefan-steiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446756764, "creation_date": 1446670975, "last_edit_date": 1446756764, "question_id": 33531955, "link": "https://stackoverflow.com/questions/33531955/why-does-patching-a-function-work-in-g-but-not-in-vc-2013-2015", "title": "Why does patching a function work in g++, but not in VC 2013/2015?", "body": "<p>I'm trying to overwrite a function in memory. So far, works perfectly (tested on 32 bit). </p>\n\n<p>However, when I want to unpatch the function overwritten in memory, \nI get an error when running <code>RE_RenderScene</code> after UNPATCH.</p>\n\n<p>Also, when I run it in Visual Studio 2013, I get an error when I call the original function from the modified function. </p>\n\n<p>When I compile it in g++, everything works as expected/fine. </p>\n\n<p>What's the problem ? And how to resolve it ? </p>\n\n<p>Additionally the address of <code>RE_RenderScene</code> gives me a funny value when running the program compiled with Visual Studio:</p>\n\n<pre><code>&gt;MyIntercept.exe\nSizeof address: 32 bit\nAddress of RE_RenderScene: 0x013C10A0\nAddress of RE_RenderScene: 0x013c10a0\n</code></pre>\n\n<p>When I run it with g++, i get some more reasonable values:</p>\n\n<pre><code>&gt;g++ MyIntercept.cpp -o myinter\n&gt;myinter\nSizeof address: 32 bit\nAddress of RE_RenderScene: 0x00401690\nAddress of RE_RenderScene: 0x00401690\n</code></pre>\n\n<p>This is the disassembly for gdb (g++)</p>\n\n<p><a href=\"https://i.stack.imgur.com/YuhhE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YuhhE.png\" alt=\"gdb\"></a></p>\n\n<p>This is the disassembly for VC 2015 (IDA)</p>\n\n<p><a href=\"https://i.stack.imgur.com/bga6i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bga6i.png\" alt=\"ida\"></a></p>\n\n<p>Additionally, on the machine with Visual Studio 2013, it gave me a Permission error (I'm no administrator there). <br />\nSo I ran it again on another machine with Visual Studio 2015, as full administrator, (root) so permissions can't be an issue.</p>\n\n<p>With Visual Studio 2015 and <code>detourlength</code> 9, it runs through, but i get this message in the end: </p>\n\n<p><a href=\"https://i.stack.imgur.com/Pwkae.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pwkae.png\" alt=\"Unpatch message\"></a></p>\n\n<p>I don't understand how calling-convention could be a problem, since all functions in question are declared in an <code>extern \"C\"</code> block. </p>\n\n<p>Also, I get an additional compile error when I enable optimization. <br />\nThis is not so when optimization is out. </p>\n\n<p>Is this a Visual C++ runtime bug ? </p>\n\n<p>You can also find the sourcecode here:<br />\n<a href=\"https://github.com/ststeiger/FunctionInterception\" rel=\"nofollow noreferrer\">https://github.com/ststeiger/FunctionInterception</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n#ifndef OPCODE_NOT_DEFINED\n#define OPCODE_NOT_DEFINED 1\n#else\n// Defined IA32-80x86 by default, but abort program at runtime because OP-Code is not defined\n#undef OPCODE_NOT_DEFINED\n#define OPCODE_NOT_DEFINED 1\n#endif\n\n\n// ========================\n\n#ifndef JMP_OPCODE\n#define JMP_OPCODE 0xE9\n#endif\n\n#ifndef OPCODE_LENGTH\n#define OPCODE_LENGTH 1\n#endif\n\n#ifndef DATATYPE_ADDRESS\n#define DATATYPE_ADDRESS long\n#endif\n\n#ifndef ADDRESS_LENGTH\n#define ADDRESS_LENGTH (sizeof(DATATYPE_ADDRESS))\n#endif\n\n#ifndef MIN_REQUIRED_FOR_DETOUR\n#define MIN_REQUIRED_FOR_DETOUR (OPCODE_LENGTH + ADDRESS_LENGTH)\n#endif\n\n#ifndef INT_DETOUR_FACTOR\n#define INT_DETOUR_FACTOR 1\n#endif\n\n#ifdef OPCODE_NOT_DEFINED\n    #undef OPCODE_NOT_DEFINED\n    #define OPCODE_NOT_DEFINED 0\n#endif\n\n\n\n\n// Select Processor\n#if ( defined (__x86__) || defined (__x86) || defined (_x86) || defined (x86) || \\\n    defined (__i386__) || defined (__i386) || defined (_i386) || defined (i386) || \\\n    defined (__m_ix86__) || defined (__m_ix86) || defined (_m_ix86) || defined (m_ix86))\n// little endian\n#undef JMP_OPCODE\n#undef OPCODE_LENGTH\n#undef DATATYPE_ADDRESS\n#undef ADDRESS_LENGTH\n#undef MIN_REQUIRED_FOR_DETOUR\n#undef INT_DETOUR_FACTOR\n#undef OPCODE_NOT_DEFINED\n\n// Defines for IA-32 80x86 Architecture\n#define JMP_OPCODE 0xE9\n#define OPCODE_LENGTH 1\n#define DATATYPE_ADDRESS long\n#define ADDRESS_LENGTH (sizeof(DATATYPE_ADDRESS))\n#define MIN_REQUIRED_FOR_DETOUR (OPCODE_LENGTH + ADDRESS_LENGTH)\n#define INT_DETOUR_FACTOR 1\n#define OPCODE_NOT_DEFINED 0\n\n// For Mac only\n#define MAC_DETLEN_RE_RenderScene 7\n#define MAC_DETLEN_RE_Com_MD5File 7\n#define MAC_DETLEN_RE_VM_Create 7\n#define MAC_DETLEN_RE_VM_CallCompiled 7\n#define MAC_DETLEN_RE_VM_Free 7\n#define MAC_DETLEN_RE_Sys_ConsoleInputShutdown 7\n// end of Mac only\n#endif\n\n\n#if ( defined (__x86_64__) || defined (__x86_64) || defined (_x86_64)|| defined (x86_64) || \\\n    defined (__ia64__) || defined (__ia64) || defined (_ia64) || defined (ia64) || \\\n    defined (__m_ia64__) || defined (__m_ia64) || defined (_m_ia64) || defined (m_ia64) || \\\n    defined (__amd64__) || defined (__amd64) || defined (_amd64) || defined (amd64))\n// switchable endian\n#undef JMP_OPCODE\n#undef OPCODE_LENGTH\n#undef DATATYPE_ADDRESS\n#undef ADDRESS_LENGTH\n#undef MIN_REQUIRED_FOR_DETOUR\n#undef INT_DETOUR_FACTOR\n#undef OPCODE_NOT_DEFINED\n\n// Defines for IA-64 80x86 architecture \n// To be done: don't know if they work if it's truly 64 bit, but assume full 32-bit compatibility\n#define JMP_OPCODE 0xE9\n#define OPCODE_LENGTH 1\n#define DATATYPE_ADDRESS long\n#define ADDRESS_LENGTH (sizeof(DATATYPE_ADDRESS))\n#define MIN_REQUIRED_FOR_DETOUR (OPCODE_LENGTH + ADDRESS_LENGTH)\n#define INT_DETOUR_FACTOR 1\n#define OPCODE_NOT_DEFINED 0\n\n// For Mac only\n#define MAC_DETLEN_RE_RenderScene 7\n#define MAC_DETLEN_RE_Com_MD5File 7\n#define MAC_DETLEN_RE_VM_Create 7\n#define MAC_DETLEN_RE_VM_CallCompiled 7\n#define MAC_DETLEN_RE_VM_Free 7\n#define MAC_DETLEN_RE_Sys_ConsoleInputShutdown 7\n// end of Mac only\n#endif\n\n\n\n// ====================\n\n#if ( defined(__MACOS_X__) || defined(__MACOS_X) || defined(_MACOS_X) || defined(MACOS_X) || \\\n    defined(__DARWIN__) || defined(__DARWIN) || defined(_DARWIN) || defined(DARWIN) || \\\n    defined(__MACOSX__) || defined(__MACOSX) || defined(_MACOSX) || defined(MACOSX) || \\\n    defined(__OSX__) || defined(__OSX) || defined(_OSX) || defined(OSX) || \\\n    defined(__APPLE__) || defined(__APPLE) || defined(_APPLE) || defined(APPLE) || \\\n    defined(__MACINTOSH__) || defined(__MACINTOSH) || defined(_MACINTOSH) || defined(MACINTOSH) || \\\n    defined(__MAC__) || defined(__MAC) || defined(_MAC) || defined(MAC))\n\n#include &lt;sys/param.h&gt;\n#include &lt;mach-o/dyld.h&gt;\n#endif\n\n\n#if ( defined (_WIN32) || defined (_WIN64) )\n    #include &lt;windows.h&gt;\n    #include &lt;conio.h&gt;\nDWORD oldprot;\n// https://msdn.microsoft.com/en-us/library/windows/desktop/aa366898(v=vs.85).aspx\n// BOOL WINAPI VirtualProtect\n// If the function succeeds, the return value is nonzero.\n// If the function fails, the return value is zero.To get extended error information, call GetLastError.\n#define unprotect(addr,len) (VirtualProtect(addr, len, PAGE_EXECUTE_READWRITE, &amp;oldprot))\n#define GETPAGESIZE()        getpagesize()\n#define EXPORT               __declspec (dllexport)\n// popen in Microbosoft C++: _popen\n#define POPEN(x,y)           _popen (x, y)\n#define PCLOSE(x)            _pclose(x)\n\nunsigned long getpagesize(void)\n{\n    static long g_pagesize = 0;\n    if (!g_pagesize)\n    {\n        SYSTEM_INFO system_info;\n        GetSystemInfo(&amp;system_info);\n        g_pagesize = system_info.dwPageSize;\n    }\n    return (unsigned long)g_pagesize;\n}\n\nunsigned long uslngPageSize = GETPAGESIZE();\nunsigned long uslngPageMask = (~(uslngPageSize - 1));\n\n#else // LINUX / UNIX / OS X\n// #include &lt;unistd.h&gt; //STDIN_FILENO\n#include &lt;termios.h&gt; //termios, TCSANOW, ECHO, ICANON\n#include &lt;sys/mman.h&gt;\n\n// int mprotect(void *addr, size_t len, int prot);\n// On success, mprotect() returns zero. On error, -1 is returned, and errno is set appropriately.\n#define unprotect(addr,len)  (mprotect(addr,len,PROT_READ|PROT_WRITE|PROT_EXEC))\n#define GETPAGESIZE()         sysconf (_SC_PAGE_SIZE)\n#define POPEN(x,y)            popen (x, y)\n#define PCLOSE(x)             pclose(x)\n\n#endif\n\n\n\n\n\n// ==================\n\n// http://stackoverflow.com/questions/1798511/how-to-avoid-press-enter-with-any-getchar\nint WaitChar()\n{\n#if defined(_WIN32)\n    int c = getch();\n\n    fflush(stdin);\n    return c;\n#elif defined(__linux__) || defined(__linux) || defined(linux) || defined(__gnu_linux__)\n    int c;\n    static struct termios oldt, newt;\n    /*tcgetattr gets the parameters of the current terminal\n    STDIN_FILENO will tell tcgetattr that it should write the settings\n    of stdin to oldt*/\n    tcgetattr(STDIN_FILENO, &amp;oldt);\n    /*now the settings will be copied*/\n    newt = oldt;\n\n    /*ICANON normally takes care that one line at a time will be processed\n    that means it will return if it sees a \"\\n\" or an EOF or an EOL*/\n    newt.c_lflag &amp;= ~(ICANON);\n\n    /*Those new settings will be set to STDIN\n    TCSANOW tells tcsetattr to change attributes immediately. */\n    tcsetattr(STDIN_FILENO, TCSANOW, &amp;newt);\n\n    c = getchar();\n\n    // restore the old settings\n    tcsetattr(STDIN_FILENO, TCSANOW, &amp;oldt);\n\n    fflush(stdin);\n    return c;\n#else\n    // system(\"/bin/stty raw\");\n    int c;\n    printf(\"Note: Waitchar for OS not supported, waits for ENTER-key instead.\\n\");\n    c = getchar();\n\n    fflush(stdin);\n    return c;\n#endif\n\n    return 0;\n}\n\n// ===========================================\n\n\n\n// offset[ENGINE][FUNCTION_NAME] ;\n// detourlength[ENGINE][FUNCTION_NAME]\n\n#define HOTPATCH(FUNCTION_NAME) \\\n    original_##FUNCTION_NAME = TemplateFuncInterceptFunction(\\\n    original_##FUNCTION_NAME, \\\n    reinterpret_cast&lt;unsigned long&gt; (&amp;FUNCTION_NAME), \\\n    reinterpret_cast&lt;unsigned long&gt; (&amp;modified_##FUNCTION_NAME), \\\n    static_cast&lt;unsigned long&gt; (FUNCTION_NAME##_COPY) \\\n    )\n\n#define UNPATCH(FUNCTION_NAME) \\\n    unpatchfunc(reinterpret_cast&lt;void*&gt;(reinterpret_cast&lt;unsigned long&gt;(&amp;FUNCTION_NAME)), reinterpret_cast&lt;unsigned char*&gt; (reinterpret_cast&lt;unsigned long&gt;(original_##FUNCTION_NAME)), static_cast&lt;unsigned long&gt; (FUNCTION_NAME##_COPY))\n\n\n\n#define NATURALIZE(FUNCTION_NAME) \\\n    Naturalized_##FUNCTION_NAME = FuncConvertAddress(Naturalized_##FUNCTION_NAME, &amp;FUNCTION_NAME)\n\n\ntemplate &lt;class DataType&gt;\nDataType FuncConvertAddress(const DataType dt_FunctionPointer, unsigned long uslng_FunctionAddress)\n{\n    return reinterpret_cast&lt;DataType&gt; (uslng_FunctionAddress);\n}\n\n\n\n\nvoid* FuncGetPage(const unsigned long &amp;uslngVirtualMemoryAddress)\n{\n    return reinterpret_cast&lt;void*&gt; (uslngVirtualMemoryAddress &amp; uslngPageMask);\n}\n\n\nvoid* InterceptFunction(void* voidptr_AddressOfDetouredFunction, unsigned long uslng_CopyLength, void* voidptr_AddressOfDetourFunction)\n{\n    DATATYPE_ADDRESS Relocation;\n    //printf(\"copy length: %ld\\n\", uslng_CopyLength);\n    //printf(\"MIN_REQUIRED_FOR_DETOUR : %d\\n\", MIN_REQUIRED_FOR_DETOUR );\n    void* voidptr_BackupForOriginalFunction = malloc(uslng_CopyLength + MIN_REQUIRED_FOR_DETOUR);\n    //printf(\"Sizeof Backuppointer %ld\\n\", sizeof(voidptr_BackupForOriginalFunction));\n    //printf(\"Sizeof AddrDetouredFunction %d\\n\", sizeof(voidptr_AddressOfDetouredFunction));\n\n    // printf(\"Here 1\\n\");\n    memcpy(voidptr_BackupForOriginalFunction, voidptr_AddressOfDetourFunction, uslng_CopyLength);\n    // printf(\"Here 2\\n\");\n\n\n    if (OPCODE_NOT_DEFINED)\n    {\n        printf(\"Error: OP-Code not defined\\n.\");\n        exit(EXIT_FAILURE);\n    }\n\n    // printf(\"JMP_OPCODE 0x%X\\n\", JMP_OPCODE);\n    // printf(\"OPCODE_LENGTH %d\\n\", OPCODE_LENGTH);\n    // printf(\"MIN_REQUIRED_FOR_DETOUR %d\\n\", MIN_REQUIRED_FOR_DETOUR);\n\n\n    memset(reinterpret_cast&lt;void*&gt; (reinterpret_cast&lt;unsigned long&gt; (voidptr_BackupForOriginalFunction)+uslng_CopyLength),\n        JMP_OPCODE, OPCODE_LENGTH);\n    // printf(\"Here 3\\n\");\n\n\n    Relocation = static_cast&lt;DATATYPE_ADDRESS&gt; (reinterpret_cast&lt;unsigned long&gt; (voidptr_AddressOfDetouredFunction)\n        -(reinterpret_cast&lt;unsigned long&gt; (voidptr_BackupForOriginalFunction)\n        +MIN_REQUIRED_FOR_DETOUR));\n    // printf(\"Here 4\\n\");\n\n    memcpy(reinterpret_cast&lt;void*&gt; (reinterpret_cast&lt;unsigned long&gt; (voidptr_BackupForOriginalFunction)\n        +uslng_CopyLength + OPCODE_LENGTH), &amp;Relocation, ADDRESS_LENGTH);\n    // printf(\"Here 5\\n\");\n\n\n    int retUnprotect = unprotect(FuncGetPage(reinterpret_cast &lt;unsigned long&gt; (voidptr_AddressOfDetouredFunction)), uslngPageSize);\n    printf(\"Patch unprotect: %d\\n\", retUnprotect);\n\n\n    memset(voidptr_AddressOfDetouredFunction, JMP_OPCODE, OPCODE_LENGTH);\n\n    Relocation = static_cast&lt;DATATYPE_ADDRESS&gt; (reinterpret_cast&lt;unsigned long&gt; (voidptr_AddressOfDetourFunction)\n        -(reinterpret_cast&lt;unsigned long&gt; (voidptr_AddressOfDetouredFunction)\n        +MIN_REQUIRED_FOR_DETOUR));\n\n    memcpy(reinterpret_cast&lt;void*&gt; (reinterpret_cast&lt;unsigned long&gt; (voidptr_AddressOfDetouredFunction)\n        +OPCODE_LENGTH), &amp;Relocation, ADDRESS_LENGTH);\n    int retReprotect = unprotect(FuncGetPage(reinterpret_cast &lt;unsigned long&gt; (voidptr_BackupForOriginalFunction)), uslngPageSize);\n    printf(\"Patch reprotect: %d\\n\", retReprotect);\n\n\n    return voidptr_BackupForOriginalFunction;\n}\n\n\n\n\nvoid unpatchfunc(void* patched_function, unsigned char* original_function, unsigned long uslng_DetourLength)\n{\n    //DWORD dw_OldProtect;\n    //VirtualProtect(patched_function, uslng_DetourLength, PAGE_EXECUTE_READWRITE, &amp;dw_OldProtect);\n    int retUnprotect = unprotect(FuncGetPage(reinterpret_cast&lt;unsigned long&gt;(patched_function)), uslngPageSize);\n    printf(\"Unpatch: unprotect: %d\\n\", retUnprotect);\n\n    unsigned int intIndex;\n    for (intIndex = 0; intIndex &lt; uslng_DetourLength; ++intIndex)\n        *((unsigned char*)patched_function + intIndex) = *(original_function + intIndex);\n\n    //VirtualProtect(patched_function, uslng_DetourLength, dw_OldProtect, &amp;dw_OldProtect);\n    int retReprotect = unprotect(FuncGetPage(reinterpret_cast&lt;unsigned long&gt;(patched_function)), uslngPageSize);\n    printf(\"Unpatch reprotect: %d\\n\", retReprotect);\n\n    if (original_function != NULL)\n        free((void*)original_function);\n}\n\n\n// C++ is typesafe, they said...\n// I say: Yes, but at which price ?\ntemplate &lt;class DataType&gt;\nDataType TemplateFuncInterceptFunction(DataType dt_Original_Function, unsigned long uslng_FunctionAddress,\n    unsigned long uslng_modified_FunctionName, unsigned long uslng_DetourLength)\n{\n    return reinterpret_cast&lt;DataType&gt;\n        (reinterpret_cast&lt;unsigned long&gt;\n        (InterceptFunction(reinterpret_cast&lt;void*&gt; (uslng_FunctionAddress),\n        uslng_DetourLength,\n        reinterpret_cast&lt;void*&gt; (uslng_modified_FunctionName)\n        )\n        )\n        );\n}\n\n\n\n\nextern \"C\" \n{\n\n\n\n    void RE_RenderScene()\n    {\n        printf(\"This is the original RE_RenderScene\\n\");\n    }\n\n    void (*original_RE_RenderScene)(); // = &amp;RE_RenderScene;\n\n    void modified_RE_RenderScene()\n    {\n        printf(\"Entering the modified RenderScene\\n\");\n\n        printf(\"Calling the original RenderScene in the modified RenderScene\\n\");\n        printf(\"Address of RE_RenderScene: %p\\n\", &amp;RE_RenderScene);\n        printf(\"Address of original_RE_RenderScene: %p\\n\", *original_RE_RenderScene);\n        printf(\"Address of original_RE_RenderScene: %p\\n\", original_RE_RenderScene);\n        // (*original_RE_RenderScene)();\n\n        printf(\"Finished calling the original RenderScene in the modified RenderScene\\n\");\n\n        printf(\"Exiting modified RenderScene\\n\");\n    }\n\n\n}\n\n// gdb MyIntercept.exe\n// info address RE_RenderScene\n// disas RE_RenderScene\n// disas 0x012E10CD\n\n\n// Define detour-length\n// #define RE_RenderScene_COPY 9 // Visual Studio 2015\n#define RE_RenderScene_COPY 6 // g++\n\n// int _tmain(int argc, _TCHAR* argv[])\nint main(int argc, char* argv[])\n{\n    printf(\"Sizeof address: %d bit\\n\", sizeof(void*) * 8);\n    printf(\"Address of %s: 0x%08p\\n\", \"RE_RenderScene\", &amp;RE_RenderScene);\n    printf(\"Address of %s: 0x%08x\\n\", \"RE_RenderScene\", &amp;RE_RenderScene);\n    printf(\"===================================================\\n\");\n\n\n    unsigned char* memoryDumpPointer = (unsigned char*)&amp;RE_RenderScene;\n    int i;\n    for (i = 0; i &lt; 100; ++i)\n    {\n        printf(\"0x%02X\\n\", memoryDumpPointer[i]);\n    }\n\n    if (true)\n    {\n        RE_RenderScene(); // Calling original version\n\n        printf(\"\\n\\n====================== Hotpatching =============================\\n\");\n        // HOTPATCH(RE_RenderScene);\n\n        // Overwriting the RE_RenderScene function (JMP REL32 = 0xE9)\n        original_RE_RenderScene = TemplateFuncInterceptFunction(\n            original_RE_RenderScene,\n            reinterpret_cast&lt;unsigned long&gt; (&amp;RE_RenderScene),\n            reinterpret_cast&lt;unsigned long&gt; (&amp;modified_RE_RenderScene),\n            static_cast&lt;unsigned long&gt; (RE_RenderScene_COPY)\n        );\n\n        /////// Expands to\n        /////// InterceptFunction(&amp;RE_RenderScene, RE_RenderScene_COPY, &amp;modified_RE_RenderScene);\n        /////// original_RE_RenderScene = FuncInterceptFunction(RE_RenderScene, modified_RE_RenderScene);\n        printf(\"====================== Hotpatched ==============================\\n\\n\");\n\n        RE_RenderScene(); // Calling the modified version\n        // Second time works\n        RE_RenderScene();\n\n\n        printf(\"\\n\\n====================== Unpatching =============================\\n\");\n        UNPATCH(RE_RenderScene); // Undoing modification\n        printf(\"====================== Unpatched ==============================\\n\");\n        // BUG shows here\n        RE_RenderScene();\n    }\n\n\n    printf(\"\\n\\n\\n--- Press any key to continue --- \\n\");\n    WaitChar();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "design-patterns"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1446671155, "post_id": 33531849, "comment_id": 54845561, "body": "<code>IBase is ambiguous</code> you probably mean is <b>pure abstract</b>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446671494, "post_id": 33531849, "comment_id": 54845752, "body": "Well, if you&#39;re looking for CRTP,  <code>Interface</code> should derive from <code>CMammal</code>, not vice versa. Also lookup for the <i>Mixin Pattern</i>."}, {"owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1446673997, "post_id": 33531849, "comment_id": 54847069, "body": "@101010 sure, it&#39;s abstract, but it&#39;s not a problem. Problem is IBase is inherited twice in that sample, this needs vitrual inheritance, and makes code more hard to support."}, {"owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446674108, "post_id": 33531849, "comment_id": 54847130, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Thanks for both CRTP and <i>Mixin</i>. I&#39;m not sure I can derive Interface from implementation (or haven&#39;t understand you), but at least, now I have something to learn about."}], "owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446672022, "creation_date": 1446670601, "last_edit_date": 1446672022, "question_id": 33531849, "link": "https://stackoverflow.com/questions/33531849/inheritance-of-interface-implementation-in-c", "title": "Inheritance of interface implementation in C++", "body": "<p>I'm trying to improve legacy code with following COM interfaces structure:</p>\n\n<pre><code>IBase &lt;- IMammal &lt;- IPet &lt;- ICat\n                  \\       \\- IDog\n                   \\\n                    \\- ICattle &lt;- ICow\n</code></pre>\n\n<p>I can't rearrange  or change this interface, but I'd like to improve implementations. We have several implementations:</p>\n\n<pre><code>CMammal &lt;- CPet &lt;- CCat\n         \\       \\- CDog\n          \\\n           \\- CCattle &lt;- CCow\n</code></pre>\n\n<p>So, we have some common mammal implementation CMammal::age(), CMammal::sex(), some pet implementation: CPet::findBed(), CPet::goThrowughStairs()</p>\n\n<p>And some cattle/cow implementation: CCattle::goShed(), CCow::moo().</p>\n\n<p>The problem: I'd like to propagate age(), sex() implementation to pets as well as to cattle, but I have no idea how should I do this. </p>\n\n<p>Straighforward solution looks impossible to me:</p>\n\n<pre><code>class CPet : CMammal, IPet { ... } \n</code></pre>\n\n<p>because both CMammal and IPet are derived from IBase, so <code>CCat::foo() { IBase::bar(); }</code>  will fail to compile because IBase is ambiguous. </p>\n\n<p>The only solution I managed to find is to use template class for implementations:</p>\n\n<pre><code>template &lt;typename Interface&gt; class CMammal : Interface \n    { ... };\ntemplate &lt;typename Interface&gt; class CPet : CMammal&lt;Interface &gt;\n    { ... };\ntemplate &lt;typename Interface&gt; class CCattle : Interface  \n    { ... };\n\n// \"end-point\" classes:\nclass CCat : CPet&lt;ICat&gt; { ... }; // maybe, at least it able to compile\nclass CDog : CPet&lt;IDog&gt; { ... };\nclass CCow : CCattle&lt;ICow&gt; { ... }; \n</code></pre>\n\n<p>That solution looks at last possible to implement in terms of C++, but there is issue: template classes has to be declared in header, so I got a lot of very big headers, possibly slower compilation and I'm not sure what will happen with binary size.</p>\n\n<p>So, I'm still looking for a better solution and got stuck at this point. </p>\n\n<p>Is there any idea how to implemnt this in more clear and efficient way? Maybe, some ideas about what I have to learn about? </p>\n\n<p>Old alternative is several defines like this:</p>\n\n<pre><code>#define DECLARE_MAMMAL     int sex(); int age();\n#define DEFINE_MAMMAL(cls) int cls::sex() { ...; } int cls::age() { ...; } \n\nclass CCat : ICat\n{\n   DECLARE_PET\n   DECLARE_MAMMAL\n   ...\n};\n\n// -.cpp-\nDEFINE_PET(CCat)\nDEFINE_MAMMAL(Cat)\n\n// -.h-\nclass CCow : ICow\n{\n   DECLARE_CATTLE\n   DECLARE_MAMMAL\n   ...\n};\n\n// -.cpp-\nDEFINE_CATTLE(CCow)\nDEFINE_MAMMAL(CCow)\n</code></pre>\n\n<p>This solution has short headers, no copy-paste, but extreemely hard to debug.</p>\n"}, {"tags": ["c++", "qt", "focus", "maya", "qgraphicsview"], "answers": [{"tags": [], "owner": {"reputation": 5197, "user_id": 503888, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f998ce921f025f19bfea5d86032e9f94?s=128&d=identicon&r=PG", "display_name": "Achayan", "link": "https://stackoverflow.com/users/503888/achayan"}, "is_accepted": true, "score": 3, "last_activity_date": 1446685575, "creation_date": 1446685575, "answer_id": 33534974, "question_id": 33531846, "link": "https://stackoverflow.com/questions/33531846/remove-blue-focus-border-around-qgraphicsview/33534974#33534974", "title": "Remove blue focus border around QGraphicsView", "body": "<p>You can try setting style sheet eg:</p>\n\n<pre><code>QGraphicsView:focus {\nborder: none;\noutline: none;\n}\n</code></pre>\n"}], "owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 33534974, "answer_count": 1, "score": 1, "last_activity_date": 1446685575, "creation_date": 1446670588, "question_id": 33531846, "link": "https://stackoverflow.com/questions/33531846/remove-blue-focus-border-around-qgraphicsview", "title": "Remove blue focus border around QGraphicsView", "body": "<p>In Qt (for a Maya plugin), I have a QSplitter containing 2 QGraphicsViews.\nOne of these QGraphicsViews contains some QLineEdits.<p>Whenever I click on one of these QLineEdits, it gets a blue border (focus), but the QGraphicsView gets a blue border too. How to avoid the QGraphicsView to get a blue border ?\n<a href=\"https://i.stack.imgur.com/qybaE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qybaE.png\" alt=\"enter image description here\"></a> </p>\n"}, {"tags": ["c++", "templates", "metaprogramming", "template-meta-programming", "type-deduction"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1446670485, "post_id": 33531791, "comment_id": 54845203, "body": "A pointer to member function"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 1, "creation_date": 1446670496, "post_id": 33531791, "comment_id": 54845211, "body": "<a href=\"https://isocpp.org/wiki/faq/pointers-to-members\" rel=\"nofollow noreferrer\">Pointer to member function</a>"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1446670577, "post_id": 33531791, "comment_id": 54845261, "body": "a pointer to a member function"}, {"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1446670931, "post_id": 33531791, "comment_id": 54845452, "body": "A pointer to a member function."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1446670979, "post_id": 33531791, "comment_id": 54845477, "body": "pointer to a member function"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1446672322, "post_id": 33531791, "comment_id": 54846219, "body": "It could be a pointer to a member function, possibly. I&#39;ll ask around and see if anyone knows."}, {"owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "edited": false, "score": 0, "creation_date": 1446672410, "post_id": 33531791, "comment_id": 54846260, "body": "Thanks guys :) I appreciate the feedback: I can either close it or accept an answer if one of you decides to post it."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1446672816, "post_id": 33531791, "comment_id": 54846466, "body": "See also <a href=\"http://stackoverflow.com/a/264088/2069064\">this answer</a> for an explanation of what&#39;s actually going on in this code."}], "answers": [{"tags": [], "owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "is_accepted": true, "score": 5, "last_activity_date": 1446672909, "last_edit_date": 1446672909, "creation_date": 1446672637, "answer_id": 33532384, "question_id": 33531791, "link": "https://stackoverflow.com/questions/33531791/what-does-t-mean-in-templates-parameters/33532384#33532384", "title": "What does T::* mean in template&#39;s parameters?", "body": "<p>A member function pointer to a member in class C that returns a <code>std::string</code>.</p>\n\n<p>Check <a href=\"https://isocpp.org/wiki/faq/pointers-to-members\" rel=\"noreferrer\">isocpp.org</a> for more info on pointers to member functions.</p>\n"}], "owner": {"reputation": 18004, "user_id": 675100, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jTqPB.png?s=128&g=1", "display_name": "Patryk", "link": "https://stackoverflow.com/users/675100/patryk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 1, "accepted_answer_id": 33532384, "answer_count": 1, "score": 1, "last_activity_date": 1446672909, "creation_date": 1446670411, "last_edit_date": 1446670739, "question_id": 33531791, "link": "https://stackoverflow.com/questions/33531791/what-does-t-mean-in-templates-parameters", "title": "What does T::* mean in template&#39;s parameters?", "body": "<p>Following the article written in <a href=\"https://jguegant.github.io/blogs/tech/sfinae-introduction.html\" rel=\"nofollow\">here</a>: </p>\n\n<p>I came across this code (shortened and changed for clarity):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class T&gt; struct hasSerialize\n{\n    // This helper struct permits us to check that serialize is truly a method.\n    // The second argument must be of the type of the first.\n    // For instance reallyHas&lt;int, 10&gt; would be substituted by reallyHas&lt;int, int 10&gt; and works!\n    // reallyHas&lt;int, &amp;C::serialize&gt; would be substituted by reallyHas&lt;int, int &amp;C::serialize&gt; and fail!\n    // Note: It only works with integral constants and pointers (so function pointers work).\n    // In our case we check that &amp;C::serialize has the same signature as the first argument!\n    // reallyHas&lt;std::string (C::*)(), &amp;C::serialize&gt; should be substituted by \n    // reallyHas&lt;std::string (C::*)(), std::string (C::*)() &amp;C::serialize&gt; and work!\n    template &lt;typename U, U u&gt; struct reallyHas;\n\n    // We accept a pointer to our helper struct, in order to avoid to instantiate a real instance of this type.\n    // std::string (C::*)() is function pointer declaration.\n    template &lt;typename C&gt;\n    static char&amp;\n    test(reallyHas&lt;std::string (C::*)(), &amp;C::serialize&gt;* /*unused*/) { }\n};\n</code></pre>\n\n<p>So this </p>\n\n<pre><code>std::string (C::*)()\n</code></pre>\n\n<p>caught my attention.</p>\n\n<p>Can anyone explain me the <code>C::*</code> part? That is a function pointer that returns <code>std::string</code> but what more?</p>\n"}, {"tags": ["c++", "multithreading", "atomic", "compare-and-swap"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1446670147, "post_id": 33531686, "comment_id": 54845001, "body": "You can&#39;t atomically access a non-atomic data type. If you don&#39;t want to make it atomic, you had better guard access with a lock."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1446670355, "post_id": 33531686, "comment_id": 54845126, "body": "There are non-standard ways to do it -- each compiler/build environment created its own before atomic appeared in the standard.    If this would be of help, specify what compiler you are using and what platform you are running on."}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1446670420, "post_id": 33531686, "comment_id": 54845165, "body": "@DaleWilson compiler-specific is fine, I am using GCC 5.2"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670639, "creation_date": 1446670639, "answer_id": 33531860, "question_id": 33531686, "link": "https://stackoverflow.com/questions/33531686/atomically-decrement-data-member-of-a-union/33531860#33531860", "title": "Atomically decrement data member of a union?", "body": "<p>Yes, there are ways to do this. You can either use GCC atomic builtins found here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.5/gcc/Atomic-Builtins.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc-4.4.5/gcc/Atomic-Builtins.html</a> or you can use atomic functions provided by your OS. The third option is to use atomic assembly instructions.</p>\n"}, {"comments": [{"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1446671654, "post_id": 33531891, "comment_id": 54845858, "body": "Am I right in thinking the GCC intrinsic doesnt copy the unexpected value to the 2nd/3rd argument, if the expected value is not found in the &quot;atomic&quot;?"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1446676299, "post_id": 33531891, "comment_id": 54848278, "body": "It returns the value from *ptr before the swap.   You can compare it to oldval to see if the swap worked.  There is another method that returns a bool to indicated whether the swap happened.  It does not give you the &quot;before&quot; value.  I edited my answer to provide sample code."}], "tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": true, "score": 1, "last_activity_date": 1446676282, "last_edit_date": 1446676282, "creation_date": 1446670752, "answer_id": 33531891, "question_id": 33531686, "link": "https://stackoverflow.com/questions/33531686/atomically-decrement-data-member-of-a-union/33531891#33531891", "title": "Atomically decrement data member of a union?", "body": "<p>GCC has atomic operations as built-ins.  They are described on <a href=\"http://gcc.gnu.org/onlinedocs/gcc-4.4.5/gcc/Atomic-Builtins.html\" rel=\"nofollow\">this page</a>.</p>\n\n<p>The operation you are looking for is </p>\n\n<pre><code>type __sync_val_compare_and_swap (type *ptr, type oldval type newval, ...)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bool __sync_bool_compare_and_swap (type *ptr, type oldval type newval, ...)\n</code></pre>\n\n<p>These builtins perform an atomic compare and swap. That is, if the current value of *ptr is oldval, then write newval into *ptr.</p>\n\n<p>For Windows users the corresponding capability is</p>\n\n<pre><code>LONG __cdecl InterlockedCompareExchange(\n  _Inout_ LONG volatile *Destination,\n  _In_    LONG          Exchange,\n  _In_    LONG          Comparand\n);\n</code></pre>\n\n<p>Which is described <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683560(v=vs.85).aspx\" rel=\"nofollow\">here</a></p>\n\n<p>Example using the bool form of the gcc intrinsic:</p>\n\n<pre><code>do{\n   int oldVal = protectedVal;\n   int newVal = someFunction(oldVal);\n} while (__sync_bool_compare_and_swap(&amp;protectedVal, oldVal, newVal);\n</code></pre>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 33531891, "answer_count": 2, "score": 0, "last_activity_date": 1446676282, "creation_date": 1446670024, "last_edit_date": 1446670439, "question_id": 33531686, "link": "https://stackoverflow.com/questions/33531686/atomically-decrement-data-member-of-a-union", "title": "Atomically decrement data member of a union?", "body": "<p>I have a struct in a union with uint64_t, providing access to two int32_t. I would like to decrement one of the struct members atomically. I came up with this:</p>\n\n<pre><code>class{\n\npublic:\n\nvoid atomicallyDecrement_B(const int32_t decrementByThisValue){\n    MyUnion newUnion;\n    MyStruct currentStruct = _union._data;\n\n    do{\n        const int32_t currentB = currentStruct.b;\n        const int32_t currentA = currentStruct.a;\n        const int32_t newB = currentB - decrementByThisValue;\n\n        newUnion._data.a = currentA;\n        newUnion._data.b = newB;\n    }\n    while(!std::atomic_compare_exchange_weak(&amp;_union._data, &amp;currentStruct, newUnion._data));\n}\n\nprivate:\n    struct MyStruct{\n        int a;\n        int b;\n    };\n\n    union MyUnion{\n        MyUnion(){\n            _data.a = 0;\n            _data.b = 0;\n        }\n\n        MyStruct _data;\n        uint64_t _atomic;\n    } _union;\n};\n</code></pre>\n\n<p>but it seems the first argument to <code>atomic_compare_exchange_weak()</code> must be an atomic type itself. Is there any way to perform this operation <strong>without</strong> changing the uint64_t data member to be <code>std::atomic&lt;uint64_t&gt;</code>?</p>\n\n<p>I am using GCC 5.2</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1446740420, "post_id": 33543468, "comment_id": 54878870, "body": "I specifically don&#39;t want to use it because it&#39;s incredibly slow (see <a href=\"http://stackoverflow.com/questions/33504015/how-to-fast-append-to-qtextedit\" title=\"how to fast append to qtextedit\">stackoverflow.com/questions/33504015/&hellip;</a>) it does support links at least partially because when I append html which contains them, they look different than rest of text."}, {"owner": {"reputation": 1121, "user_id": 3021018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6fhj.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3021018/aaron"}, "reply_to_user": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1446741962, "post_id": 33543468, "comment_id": 54879931, "body": "Well, I fear it really only highlights the links but provides no functionality beyond."}, {"owner": {"reputation": 1121, "user_id": 3021018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6fhj.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3021018/aaron"}, "reply_to_user": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1446831612, "post_id": 33543468, "comment_id": 54923002, "body": "You might get a less seriously blocking QTextBrowser if you buffer the log messages in chunks of 10 or 100 depending on their frequency and add those chunks to the QTextBrowser. No neat scrolling but your App. should stay responsive."}, {"owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "edited": false, "score": 0, "creation_date": 1446901405, "post_id": 33543468, "comment_id": 54942313, "body": "<code>QTextBrowser</code> is inherited from <code>QTextEdit</code> and is just as slow as that one. I tried it in past, I&#39;ve been playing with it for weeks. That thing is inherently slow. Its performance is nowhere near <code>QPlainTextEdit</code> and is basically unusable for anything what requires decent performance."}], "tags": [], "owner": {"reputation": 1121, "user_id": 3021018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6fhj.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3021018/aaron"}, "is_accepted": false, "score": 1, "last_activity_date": 1446723098, "creation_date": 1446723098, "answer_id": 33543468, "question_id": 33531632, "link": "https://stackoverflow.com/questions/33531632/how-to-catch-the-link-click-event-in-qplaintextedit/33543468#33543468", "title": "How to catch the link click event in QPlainTextEdit", "body": "<p>Seems QPlainTextEdit doesn't support links at all. As the docu states it is for plain text with bit formatting only.</p>\n\n<p>But it seems you can use a QTextBrowser as text editor if you set the readOnly property to false. Something like <code>setProperty(\"readOnly\", false)</code> should work.</p>\n"}, {"comments": [{"owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "edited": false, "score": 0, "creation_date": 1556135719, "post_id": 33585505, "comment_id": 98339321, "body": "Is there a way to make the mouse cursor change when you hover over the hyperlink?   I tried setting the <code>LinksAccessibleByMouse</code> flag in the <code>textInteractionFlags</code> property of the <code>QPlainTextEdit</code> widget, but that had no effect."}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": true, "score": 9, "last_activity_date": 1446918735, "last_edit_date": 1446918735, "creation_date": 1446916658, "answer_id": 33585505, "question_id": 33531632, "link": "https://stackoverflow.com/questions/33531632/how-to-catch-the-link-click-event-in-qplaintextedit/33585505#33585505", "title": "How to catch the link click event in QPlainTextEdit", "body": "<p>There is the function <a href=\"http://doc.qt.io/qt-5/qplaintextedit.html#anchorAt\" rel=\"noreferrer\"><code>QPlainTextEdit::anchorAt</code></a>:</p>\n\n<blockquote>\n  <p>Returns the reference of the anchor at position pos, or an empty\n  string if no anchor exists at that point.</p>\n</blockquote>\n\n<p>To activate some link the user should press left mouse button on this object and release the button also on this link. That can be tracked by <code>mousePressEvent</code> and <code>mouseReleaseEvent</code>.</p>\n\n<p>Unfortunately there is no simple mechanism to check on release that the button is released on the same link object. It is possible to compare only anchor text. So, the false positive detection can happen if there are several anchors with the same link. If it is a problem, it possible to do the similar trick with checking text selection state as in <code>QTextBrowser</code> if the widget text is selectable.</p>\n\n<p>The simplest implementation:</p>\n\n<pre><code>#ifndef PLAINTEXTEDIT_H\n#define PLAINTEXTEDIT_H\n\n#include &lt;QPlainTextEdit&gt;\n#include &lt;QMouseEvent&gt;\n\nclass PlainTextEdit : public QPlainTextEdit\n{\n    Q_OBJECT\n\nprivate:\n    QString clickedAnchor;\n\npublic:\n    explicit PlainTextEdit(QWidget *parent = 0) : QPlainTextEdit(parent)\n    {\n    }\n\n    void mousePressEvent(QMouseEvent *e)\n    {\n        clickedAnchor = (e-&gt;button() &amp; Qt::LeftButton) ? anchorAt(e-&gt;pos()) :\n                                                         QString();\n        QPlainTextEdit::mousePressEvent(e);\n    }\n\n    void mouseReleaseEvent(QMouseEvent *e)\n    {\n        if (e-&gt;button() &amp; Qt::LeftButton &amp;&amp; !clickedAnchor.isEmpty() &amp;&amp;\n            anchorAt(e-&gt;pos()) == clickedAnchor)\n        {\n            emit linkActivated(clickedAnchor);\n        }\n\n        QPlainTextEdit::mouseReleaseEvent(e);\n    }\n\nsignals:\n    void linkActivated(QString);\n};\n\n#endif // PLAINTEXTEDIT_H\n</code></pre>\n\n<p>The signal <code>linkActivated</code> is emitted with <code>href</code> anchor text. For example the signal will be emitted with the string <code>\"http://example.com\"</code> when the following anchor is activated:</p>\n\n<pre><code>QString html = \"&lt;a href='http://example.com'&gt;Click me!&lt;/a&gt;\";\ntext-&gt;appendHtml(html);\n</code></pre>\n"}], "owner": {"reputation": 12209, "user_id": 1514983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/953f9c2e14575db714293ea3dffebca8?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1514983/petr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2457, "favorite_count": 2, "accepted_answer_id": 33585505, "answer_count": 2, "score": 4, "last_activity_date": 1446918735, "creation_date": 1446669815, "last_edit_date": 1446901670, "question_id": 33531632, "link": "https://stackoverflow.com/questions/33531632/how-to-catch-the-link-click-event-in-qplaintextedit", "title": "How to catch the link click event in QPlainTextEdit", "body": "<p>If I create a link using <code>appendHtml</code> in QPlainTextEdit, how can I figure out if user click on it, and do something with the URL? There is no signal for clicking on URL, like in <code>QTextBrowser</code>.</p>\n\n<p>Is there any way to accomplish this, other than creating a completely new Qt control that does this?</p>\n\n<p><strong>NOTE:</strong> I am not interested in different components like <code>QTextEdit</code> or <code>QTextBrowser</code> as these are incredibly slow. I specifically want to catch link clicks within either <code>QPlainTextEdit</code> or any customization of it, which has the same performance.</p>\n"}, {"tags": ["c++", "compilation", "g++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446669943, "post_id": 33531628, "comment_id": 54844883, "body": "What optimization flags are you using? You might compile with <code>g++ -Wall -O3 -fverbose-asm -S</code>  then look into the produced <code>.s</code>  assembler file (and perhaps even <code>-fdump-tree-all</code>  to understand, thru hundreds of dumped files, what is happening <i>inside</i> the compiler)."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 2, "creation_date": 1446669945, "post_id": 33531628, "comment_id": 54844885, "body": "<code>Is there any particular reason that makes g++ do this?</code>: In God We trust. A compiler makes certain &quot;optimization&quot; that you can/must not be aware of."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1446669964, "post_id": 33531628, "comment_id": 54844897, "body": "What optimizations did you enable? Also, some of this may be due to stack alignment requirements for function calls."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446670428, "post_id": 33531628, "comment_id": 54845170, "body": "And you added the C tag because it starts with the same letter, I presume?"}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446670434, "post_id": 33531628, "comment_id": 54845172, "body": "@BasileStarynkevitch I&#39;ve updated the questions with the options I used."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1446670485, "post_id": 33531628, "comment_id": 54845202, "body": "@EOF I&#39;ve updated the questions with the options I used."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446670526, "post_id": 33531628, "comment_id": 54845232, "body": "@Olaf I don&#39;t think this is C++ specific, although I didn&#39;t try similar things for C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446670584, "post_id": 33531628, "comment_id": 54845266, "body": "@uraj: This is very specific! C++ is not &quot;C with classes&quot;."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446670647, "post_id": 33531628, "comment_id": 54845298, "body": "@Olaf Then you must know the reason for this right? Otherwise how do you know this is C++ specific?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446670893, "post_id": 33531628, "comment_id": 54845428, "body": "@uraj: Last comment: This might be a very specific pattern the compiler generates. It might very well be different even for small changes to your code. Read about compiler construction and code generation, optimisation, how OOP functionality are transformed to machine language, etc. Foir more details learn/practice some decades CS&amp;related, including compiler construction."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446671089, "post_id": 33531628, "comment_id": 54845532, "body": "@Olaf If you have no clear strong evidence showing this is C++ specific, then there IS A POSSIBILITY that this question is related to C as well.  Besides, I&#39;m a CS PhD student and I know well about the stuff you mentioned."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446671385, "post_id": 33531628, "comment_id": 54845689, "body": "@uraj: Yes, some of my students also tell me they know better. Until they fail their test. Don&#39;t start an argumentum ad verecundiam with me. That just shows lack of actual knowledge/experience. act is you shall not add C tag for C++ questions. You could add Oberon, Java or Rust tags with much higher rectification here. I&#39;d complain less if that was just a function."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446672004, "post_id": 33531628, "comment_id": 54846048, "body": "@Olaf See my own answer, dear professor."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1446672229, "post_id": 33531628, "comment_id": 54846182, "body": "@uraj You don&#39;t tag a question <code>C</code> just because the same issue might be present in C even though that&#39;s not where you encountered it. Should I tag a grammar question about uncountable nouns in English with <code>Swedish</code> because the same issue might exist in Swedish?"}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446672890, "post_id": 33531628, "comment_id": 54846499, "body": "@DavidSchwartz I added the <code>c</code> tag because my knowledge tells me this is likely related to C as well. Adding the tag can draw attention from people good at C and increase the chance for this question to be answered. In your example, if adding <code>Swedish</code> helps the question get answered, why not?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446673464, "post_id": 33531628, "comment_id": 54846795, "body": "let&#39;s tag this question Perl too in case the same issue shows up there"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446673486, "post_id": 33531628, "comment_id": 54846804, "body": "@uraj Because using a tag that may or may not relate to the question just to get the attention of people looking for that tag is abusive. Tags are a give and take -- by placing a particular tag on a question, you are promising people that the question will be about that subject and therefore their interest in the question is justified. But you didn&#39;t carry your end of the bargain by making sure it was actually relevant."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446673596, "post_id": 33531628, "comment_id": 54846868, "body": "A <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> would improve this question"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1446673974, "post_id": 33531628, "comment_id": 54847055, "body": "Honestly, I am most appalled by the <code>add     $0x10, %esp</code> <i>right before</i> <code>leave</code>."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446673979, "post_id": 33531628, "comment_id": 54847059, "body": "@DavidSchwartz That&#39;s a valid point and I buy that."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1446674488, "post_id": 33531628, "comment_id": 54847347, "body": "@EOF My guess is these two lines are generated at different phases of optimization so g++ fails to consider them together."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446672363, "post_id": 33532196, "comment_id": 54846239, "body": "Show proof C has the same alignment requirements."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446672548, "post_id": 33532196, "comment_id": 54846333, "body": "@Olaf How about you go ask for it in the answer I cited? By the way that question has a C tag and you might want to remove it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446672907, "post_id": 33532196, "comment_id": 54846507, "body": "And you think potentially breaking the ABI helps solve your problem? Well, I hope I will never have to debug your code then or you work in safety-critical areas."}, {"owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446672948, "post_id": 33532196, "comment_id": 54846530, "body": "@Olaf That, is not related to this question at all."}], "tags": [], "owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "is_accepted": true, "score": -1, "last_activity_date": 1446671945, "last_edit_date": 1495541689, "creation_date": 1446671945, "answer_id": 33532196, "question_id": 33531628, "link": "https://stackoverflow.com/questions/33531628/what-does-g-allocate-unused-memory-on-the-stack/33532196#33532196", "title": "What does g++ allocate unused memory on the stack?", "body": "<p>As EOF mentioned in the comment, this is due to stack alignment and is subject to change by setting the option <code>-mpreferred-stack-boundary</code>. The credit goes to this answer <a href=\"https://stackoverflow.com/a/1061942/696110\">https://stackoverflow.com/a/1061942/696110</a></p>\n\n<p>The option mentioned affects C compilation as well. </p>\n"}], "owner": {"reputation": 309, "user_id": 696110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cc9958c68be766d928b6c4d4ffb17e40?s=128&d=identicon&r=PG", "display_name": "uraj", "link": "https://stackoverflow.com/users/696110/uraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 33532196, "answer_count": 1, "score": 0, "last_activity_date": 1446672668, "creation_date": 1446669804, "last_edit_date": 1446672668, "question_id": 33531628, "link": "https://stackoverflow.com/questions/33531628/what-does-g-allocate-unused-memory-on-the-stack", "title": "What does g++ allocate unused memory on the stack?", "body": "<p>When analyzing the binary code generated by g++ 5.2.0, I found that the compiler frequently allocates memory that seems not used by any program elements. Below is an example.</p>\n\n<p>The source code is</p>\n\n<pre><code>void\ncxx_pretty_printer::declarator (tree t)\n{\n  this-&gt;direct_declarator (t); // A virtual function call\n}\n</code></pre>\n\n<p>and the generated binary</p>\n\n<pre><code>0x8427ce8   _ZN18cxx_pretty_printer10declaratorEP9tree_node:\n0x8427ce8   push    %ebp\n0x8427ce9   mov     %esp, %ebp\n0x8427ceb   sub     $0x8, %esp\n0x8427cee   mov     0x8(%ebp), %eax\n0x8427cf1   mov     0x0(%eax), %eax\n0x8427cf3   add     $0x4c, %eax\n0x8427cf6   mov     0x0(%eax), %eax\n0x8427cf8   sub     $0x8, %esp\n0x8427cfb   pushl   0xc(%ebp)\n0x8427cfe   pushl   0x8(%ebp)\n0x8427d01   call    *0x0(%eax,0)\n0x8427d03   add     $0x10, %esp\n0x8427d06   nop \n0x8427d07   leave   \n0x8427d08   ret \n</code></pre>\n\n<p>I don't quite understand why the code at 0x8427ceb and 0x8427cf8 should exist. The compiler decreases the stack register, which seems to me that it is allocating some space on the stack. However, this space is never used by anything. </p>\n\n<p>Is there any particular reason that makes g++ do this? The options I used are</p>\n\n<pre><code>-O2 -fno-exceptions -fno-rtti -fasynchronous-unwind-tables\n</code></pre>\n"}, {"tags": ["c++", "boost", "c++-standard-library", "file-access"], "comments": [{"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 1, "creation_date": 1446669990, "post_id": 33531614, "comment_id": 54844911, "body": "Just for the sake of it: <a href=\"http://stackoverflow.com/questions/10164341/cross-platform-c-filesystem-watcher\" title=\"cross platform c filesystem watcher\">stackoverflow.com/questions/10164341/&hellip;</a> - not boost or standard library (which has nothing on file systems yet), but might be useful."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1446671860, "post_id": 33531614, "comment_id": 54845962, "body": "Re <i>Wait for a certain input file to exist (and be deletable).</i> The first part is easy. Try to open the file. Wait a bit and try again if you get an error. The parenthetical part is anything but easy. What does that even mean, particularly in a cross-platform sense?"}], "answers": [{"comments": [{"owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "edited": false, "score": 0, "creation_date": 1446670988, "post_id": 33531809, "comment_id": 54845482, "body": "Thanks. I was hoping there is a library that abstracts over the OS- and FS-specifics for me. I&#39;ve edited the question accordingly."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "edited": false, "score": 0, "creation_date": 1446671069, "post_id": 33531809, "comment_id": 54845519, "body": "Why would you imagine that every OS feature could be wrapped in an OS &amp; FS neutral way?"}, {"owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "edited": false, "score": 1, "creation_date": 1446671454, "post_id": 33531809, "comment_id": 54845728, "body": "I was just hoping that <i>this</i> one can, for the three given platforms (assuming &quot;OS &amp; FS neutral&quot; means OS &amp; FS invariant API -- correct me if I misunderstood.)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670466, "creation_date": 1446670466, "answer_id": 33531809, "question_id": 33531614, "link": "https://stackoverflow.com/questions/33531614/how-to-wait-for-a-file-to-exist-and-be-released/33531809#33531809", "title": "How to wait for a file to exist (and be released)?", "body": "<p>It certainly is operating system (and file system) specific. On Linux specifically you could <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow\">inotify(7)</a> facilities (with native Linux <em>local</em> file systems like Ext4 or BTRFS). </p>\n"}, {"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1446670934, "creation_date": 1446670934, "answer_id": 33531946, "question_id": 33531614, "link": "https://stackoverflow.com/questions/33531614/how-to-wait-for-a-file-to-exist-and-be-released/33531946#33531946", "title": "How to wait for a file to exist (and be released)?", "body": "<p>There is an Asio service that abstracts over</p>\n\n<ul>\n<li>Win32 filemonitoring API</li>\n<li><code>inotify</code> on Linux (and friends?)</li>\n</ul>\n\n<p>floating around on the web. It has not been accepted into Boost yet, although some discussion is going on to include it with Boost Asio (the library for <em>asynchronous IO</em>)</p>\n\n<p>Found this, which might help you find it: </p>\n\n<ul>\n<li>mailing list thread: <a href=\"http://boost.2283326.n4.nabble.com/filesystem-file-monitoring-td2652549.html\" rel=\"nofollow\">http://boost.2283326.n4.nabble.com/filesystem-file-monitoring-td2652549.html</a></li>\n<li><a href=\"https://github.com/kvikas/file-monitor-service/blob/master/inotify/file_monitor_service.hpp\" rel=\"nofollow\">https://github.com/kvikas/file-monitor-service/blob/master/inotify/file_monitor_service.hpp</a></li>\n</ul>\n"}], "owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1534, "favorite_count": 1, "accepted_answer_id": 33531946, "answer_count": 2, "score": 3, "last_activity_date": 1446671098, "creation_date": 1446669760, "last_edit_date": 1446671098, "question_id": 33531614, "link": "https://stackoverflow.com/questions/33531614/how-to-wait-for-a-file-to-exist-and-be-released", "title": "How to wait for a file to exist (and be released)?", "body": "<p>Is there a library with a function that blocks the caller until a certain file exists and/or is deletable? (Very preferably in the standard C++ libraries or boost.)</p>\n\n<h1>Background</h1>\n\n<p>I'm a C++ newcomer writing a single-threaded application that needs to</p>\n\n<ol>\n<li>Perform some heavy calculations on start up.</li>\n<li>Wait for a certain input file to exist (and be deletable).</li>\n<li>If the file contains a certain instruction, delete it and exit.</li>\n<li>(Else) process it, delete it, and produce an output file.</li>\n<li>Repeat from step 2.</li>\n</ol>\n\n<p>The reason for having steps 2,3 and 5 (instead of just step 1&amp;4 and invoking the application on demand) is that step 1 involves some heavy processing.</p>\n\n<p>I don't want to spend a lot of processor time busy-waiting during step 2, but I also don't want to introduce unnecessary latency by polling for the file's existence infrequently.</p>\n\n<p>What is the right approach here? (Preferably cross-platform: Windows, Linux, OSX.)</p>\n"}, {"tags": ["c++", "eigen", "pca"], "comments": [{"owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "edited": false, "score": 0, "creation_date": 1446802979, "post_id": 33531505, "comment_id": 54905561, "body": "One thing to add: I&#39;m quite sure that WEKA is using SVD. But this should not explain the difference in the outcome or?"}, {"owner": {"reputation": 1098, "user_id": 7447660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ok0v3.jpg?s=128&g=1", "display_name": "Koenigsberg", "link": "https://stackoverflow.com/users/7447660/koenigsberg"}, "edited": false, "score": 0, "creation_date": 1574096846, "post_id": 33531505, "comment_id": 104100568, "body": "I realize this question is old, however do you know by any chance, which paper (or other source) you used for this implementation?"}, {"owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "reply_to_user": {"reputation": 1098, "user_id": 7447660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ok0v3.jpg?s=128&g=1", "display_name": "Koenigsberg", "link": "https://stackoverflow.com/users/7447660/koenigsberg"}, "edited": false, "score": 0, "creation_date": 1574100631, "post_id": 33531505, "comment_id": 104102382, "body": "I think I just looked it up on Wikipedia and multiple other pages that I found via search. But not to a scientific paper. But if you need more trustworthy sources I&#39;m sure you can find the procedure in plenty of maths/stats/data analysis books."}, {"owner": {"reputation": 1098, "user_id": 7447660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ok0v3.jpg?s=128&g=1", "display_name": "Koenigsberg", "link": "https://stackoverflow.com/users/7447660/koenigsberg"}, "edited": false, "score": 0, "creation_date": 1574152047, "post_id": 33531505, "comment_id": 104119065, "body": "I am indeed looking for this specific source. Thanks for the quick response."}], "answers": [{"comments": [{"owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "edited": false, "score": 0, "creation_date": 1446721172, "post_id": 33540736, "comment_id": 54865676, "body": "That was a mistake, in my big code I made a funciton call that&#39;s returning by value like this: traindata.row(i) = normalize(traindata.row(i));. Changed it here too to make sure there is no mistake. Thanks for the code simplification, I guessed it&#39;s somehow possible. Can you see another problem?"}, {"owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "edited": false, "score": 0, "creation_date": 1447237945, "post_id": 33540736, "comment_id": 55070730, "body": "Another question, my compiler tells me &#39;no match for \u2018operator/\u2019&#39; when I run your code. I have Eigen3, seems there is no rowwise division or?"}, {"owner": {"reputation": 361, "user_id": 5578293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FeS5w.jpg?s=128&g=1", "display_name": "Jan Hackenberg", "link": "https://stackoverflow.com/users/5578293/jan-hackenberg"}, "edited": false, "score": 0, "creation_date": 1503258635, "post_id": 33540736, "comment_id": 78530006, "body": "this will throw division by zero if you have for 1 feature max = min, am I right?"}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1503402013, "post_id": 33540736, "comment_id": 78590506, "body": "Right, you need to replace zeros by ones in <code>scalingFactors</code>."}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": false, "score": 7, "last_activity_date": 1446716622, "last_edit_date": 1446716622, "creation_date": 1446715436, "answer_id": 33540736, "question_id": 33531505, "link": "https://stackoverflow.com/questions/33531505/principal-component-analysis-with-eigen-library/33540736#33540736", "title": "Principal Component Analysis with Eigen Library", "body": "<p>When scaling to 0,1, you modify the local variable <code>vec</code> but forgot to update <code>traindata</code>.</p>\n\n<p>Moreover, this can be done more easily this way:</p>\n\n<pre><code>RowVectorXf minCoeffs = traindata.colwise().maxCoeff();\nRowVectorXf minCoeffs = traindata.colwise().minCoeff();\nRowVectorXf scalingFactors = maxCoeffs - minCoeffs;\ntraindata = (traindata.rowwise()-minCoeffs).array().rowwise() / scalingFactors.array();\n</code></pre>\n\n<p>that is, using row-vectors and <em>array</em> features.</p>\n\n<p>Let me also add that the symmetric eigenvalue decomposition is actually faster than SVD. The true advantage of SVD in this case is that it avoids squaring the entries, but since your input data are normalized and centered, and that you only care about the largest eigenvalues, there is no accuracy concern here.</p>\n"}, {"comments": [{"owner": {"reputation": 361, "user_id": 5578293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FeS5w.jpg?s=128&g=1", "display_name": "Jan Hackenberg", "link": "https://stackoverflow.com/users/5578293/jan-hackenberg"}, "edited": false, "score": 0, "creation_date": 1503258450, "post_id": 34256456, "comment_id": 78529957, "body": "could you please also post the running code? Thanks."}, {"owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "reply_to_user": {"reputation": 361, "user_id": 5578293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FeS5w.jpg?s=128&g=1", "display_name": "Jan Hackenberg", "link": "https://stackoverflow.com/users/5578293/jan-hackenberg"}, "edited": false, "score": 0, "creation_date": 1503477285, "post_id": 34256456, "comment_id": 78626333, "body": "I&#39;ll have a look, I don&#39;t know if I still have access to that piece of code and which version I used eventually. But I surely talked about classic standardization, which is well defined: <a href=\"https://en.wikipedia.org/wiki/Feature_scaling#Standardization\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Feature_scaling#Standardization</a>"}], "tags": [], "owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1501847217, "last_edit_date": 1501847217, "creation_date": 1450041400, "answer_id": 34256456, "question_id": 33531505, "link": "https://stackoverflow.com/questions/33531505/principal-component-analysis-with-eigen-library/34256456#34256456", "title": "Principal Component Analysis with Eigen Library", "body": "<p>The reason was that Weka <em>standardized</em> the dataset. This means it scales each feature's variance to unit variance. When I did this, the plots looked the same. Technically my approach was correct as well.</p>\n"}], "owner": {"reputation": 928, "user_id": 1332314, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0ab81d1add08343653dc53cbc5b1e524?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1332314/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7558, "favorite_count": 4, "accepted_answer_id": 34256456, "answer_count": 2, "score": 7, "last_activity_date": 1501847217, "creation_date": 1446669364, "last_edit_date": 1484038170, "question_id": 33531505, "link": "https://stackoverflow.com/questions/33531505/principal-component-analysis-with-eigen-library", "title": "Principal Component Analysis with Eigen Library", "body": "<p>I'm trying to compute the 2 major principal components from a dataset in C++ with Eigen.</p>\n\n<p>The way I do it at the moment is to normalize the data between <code>[0, 1]</code> and then center the mean. After that I compute the covariance matrix and run an eigenvalue decomposition on it. I know SVD is faster, but I'm confused about the computed components.</p>\n\n<p>Here is the major code about how I do it (where <code>traindata</code> is my MxN sized input matrix):</p>\n\n<pre><code>Eigen::VectorXf normalize(Eigen::VectorXf vec) {\n  for (int i = 0; i &lt; vec.size(); i++) { // normalize each feature.\n      vec[i] = (vec[i] - minCoeffs[i]) / scalingFactors[i];\n  }\n  return vec;\n}\n\n// Calculate normalization coefficients (globals of type Eigen::VectorXf). \nmaxCoeffs = traindata.colwise().maxCoeff();\nminCoeffs = traindata.colwise().minCoeff();\nscalingFactors = maxCoeffs - minCoeffs;\n\n// For each datapoint.\nfor (int i = 0; i &lt; traindata.rows(); i++) { // Normalize each datapoint.\n  traindata.row(i) = normalize(traindata.row(i));\n}\n\n// Mean centering data.\nEigen::VectorXf featureMeans = traindata.colwise().mean();\nEigen::MatrixXf centered = traindata.rowwise() - featureMeans;\n\n// Compute the covariance matrix.\nEigen::MatrixXf cov = centered.adjoint() * centered;\ncov = cov / (traindata.rows() - 1);\n\nEigen::SelfAdjointEigenSolver&lt;Eigen::MatrixXf&gt; eig(cov);\n// Normalize eigenvalues to make them represent percentages.\nEigen::VectorXf normalizedEigenValues =  eig.eigenvalues() / eig.eigenvalues().sum();\n\n\n// Get the two major eigenvectors and omit the others.\nEigen::MatrixXf evecs = eig.eigenvectors();\nEigen::MatrixXf pcaTransform = evecs.rightCols(2);\n\n\n// Map the dataset in the new two dimensional space.\ntraindata = traindata * pcaTransform;\n</code></pre>\n\n<p>The result of this code is something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/h2ktP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h2ktP.png\" alt=\"enter image description here\"></a></p>\n\n<p>To confirm my results, I tried the same with WEKA. So what I did is to use the normalize and the center filter, in this order. Then the principal component filter and save + plot the output. The result is this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2DheY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2DheY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Technically I should have done the same, however the outcome is so different. Can anyone see if I made a mistake?</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5", "qt-quick"], "comments": [{"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1446670077, "post_id": 33531466, "comment_id": 54844959, "body": "Out of curiosity, what happens if you try an OpenGL build of Qt (configure with <code>-opengl desktop</code>)?"}, {"owner": {"reputation": 77, "user_id": 5286910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c8a4b86a9782771ef3d1b74fa8cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Secafo", "link": "https://stackoverflow.com/users/5286910/secafo"}, "reply_to_user": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1446670880, "post_id": 33531466, "comment_id": 54845424, "body": "I think that I&#39;m compiling using the Qt 5.5.1 without OpenGL, I couldn&#39;t find it on the online installer, only for Qt 5.4. What you mean with configure with <code>-opengl desktop</code>?"}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1446671048, "post_id": 33531466, "comment_id": 54845513, "body": "I meant configure Qt with that argument before you build it. But <a href=\"http://doc.qt.io/qt-5/windows-requirements.html#dynamically-loading-graphics-drivers\" rel=\"nofollow noreferrer\">maybe you don&#39;t have to now</a>: you can set the <code>QT_OPENGL</code> environment variable to <code>desktop</code> before you run your application, and that should switch it to OpenGL from ANGLE at runtime."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446672444, "post_id": 33531466, "comment_id": 54846278, "body": "It&#39;s possible that this a driver/hardware acceleration issue on your system"}, {"owner": {"reputation": 77, "user_id": 5286910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c8a4b86a9782771ef3d1b74fa8cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Secafo", "link": "https://stackoverflow.com/users/5286910/secafo"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446673275, "post_id": 33531466, "comment_id": 54846699, "body": "@sehe - I will run some tests and see if I can make it work and post here the results."}, {"owner": {"reputation": 77, "user_id": 5286910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c8a4b86a9782771ef3d1b74fa8cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Secafo", "link": "https://stackoverflow.com/users/5286910/secafo"}, "reply_to_user": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1446674430, "post_id": 33531466, "comment_id": 54847325, "body": "@Mitch - The Qt installed is the one that I downloaded using the online installer, I didn&#39;t build it myself, how can I configure using <code>-opengl desktop</code>? Do I have to compile Qt manually with this argument?"}, {"owner": {"reputation": 77, "user_id": 5286910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c8a4b86a9782771ef3d1b74fa8cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Secafo", "link": "https://stackoverflow.com/users/5286910/secafo"}, "edited": false, "score": 0, "creation_date": 1446687634, "post_id": 33531466, "comment_id": 54851856, "body": "Just tested using Qt 5.4.2 64bit OpenGL and it&#39;s working properly. I think that I have to compile Qt 5.5.1 with OpenGL as it doesn&#39;t seems to have that version available to download yet."}], "owner": {"reputation": 77, "user_id": 5286910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c8a4b86a9782771ef3d1b74fa8cc12?s=128&d=identicon&r=PG&f=1", "display_name": "Secafo", "link": "https://stackoverflow.com/users/5286910/secafo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446669659, "creation_date": 1446669240, "last_edit_date": 1446669659, "question_id": 33531466, "link": "https://stackoverflow.com/questions/33531466/qt-quick-applications-glitching", "title": "Qt quick applications glitching", "body": "<p>I opened some Qt quick examples that comes with Qt and when I try to resize the window it starts to glitch.</p>\n\n<p>This is an animated gif using the stoc example:</p>\n\n<p><a href=\"http://105.imagebam.com/download/ZgcdXsQQukzkLCDchoYVrQ/44471/444703921/glitch.gif\" rel=\"nofollow noreferrer\">glitch http://105.imagebam.com/download/ZgcdXsQQukzkLCDchoYVrQ/44471/444703921/glitch.gif</a></p>\n\n<p>My configuration is: Windows 10, 6 GB ram, i5, and using Qt 5.5.1 64bit MSVC 2013.</p>\n\n<p>Is there any way of fixing it?</p>\n"}, {"tags": ["c++", "memory-management", "abort"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1446669302, "post_id": 33531455, "comment_id": 54844500, "body": "The commented out code is wrong: it should be <code>delete[] m_ptr</code> and the delete should be done after copying. The problem you are seeing is probably a double delete."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1446669413, "post_id": 33531455, "comment_id": 54844561, "body": "Also, learning about this memory management and why this happens is good, but for your own code use <code>std::vector</code>.  It takes care of so much stuff for you, like exception safety in your code for example."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1446669511, "post_id": 33531455, "comment_id": 54844628, "body": "See <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What&#39;s the Rule of Three?</a>"}], "owner": {"reputation": 183, "user_id": 4396280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k9tCT.jpg?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/4396280/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1446669293, "answer_count": 0, "score": 0, "last_activity_date": 1446669186, "creation_date": 1446669186, "question_id": 33531455, "link": "https://stackoverflow.com/questions/33531455/c-abortedcore-dumped", "closed_reason": "Duplicate", "title": "C++ Aborted(core dumped)", "body": "<p>I have a <code>Aborted(Core dumped)</code> error during the execution  of the following program.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass Array\n{\n      int *m_ptr;\n      int m_size;\n      public:\n             Array(int sz)\n             {\n                       cout&lt;&lt;\"constructor\\n\";\n                       m_size = sz;\n                       m_ptr = new int[sz];\n             }\n             ~Array()\n             {\n                     cout&lt;&lt;\"Delete\\n\";\n                     delete[] m_ptr;\n             }\n             int&amp; operator[] (int j)\n             {\n                  cout&lt;&lt;\"Operation []\\n\";\n                  return m_ptr[j];\n             }\n             int&amp; operator[] (int j) const\n             {\n                  cout&lt;&lt;\"Operation []\\n\";\n                  return m_ptr[j];\n             }\n             void copy(const Array&amp; ar)\n             {\n                  m_size = ar.m_size;\n                  m_ptr = new int[m_size];\n                  int *ptr = ar.m_ptr;\n                  int j;\n                  for(j = 0;j &lt; m_size; j++)\n                  m_ptr[j] = ptr[j];\n             }\n             Array(const Array&amp; ar)\n             {\n                                copy(ar);\n             }\n             /*Array&amp; operator= (const Array&amp; ar) //Why this function prevents us from Aborted(Core Dumped)\n             {\n                    delete m_ptr;\n                    copy(ar);\n                    return *this;\n             }*/\n             void print()\n             {\n                  int i;\n                  for(i = 0;i &lt; m_size;i++)\n                  cout&lt;&lt;m_ptr[i]&lt;&lt;\"  \";\n                  cout&lt;&lt;endl;\n             }\n};\nint main()\n{\n    Array a1(10);\n    Array a2(5);\n    int i;\n    for(i = 0;i &lt; 10;i++)\n    {\n          a1[i] = 1;\n          if(i &lt; 5) a2[i] = 2;\n    }\n    a1.print();\n    a2.print();\n    a1 = a2;//If I do not copy a2 in a1, the  Aborted(Core dumped) error disappers\n    return 0;\n}\n</code></pre>\n\n<p>Clearly, it is a problem related to memory allocation. The author of the book I am reading has made the function <code>Array&amp; operator= (const Array&amp; ar)</code> but I do not understand how does this function resolve the problem. I learned that I should use a destructor every time I allocate a new object with <code>new</code>. However, in this example I have a destructor and still, if I do not add the function in question, I get <code>Aborted(Core dumped)</code>. Can you please explain why do I get this error message and how does the function resolve the issue?</p>\n"}, {"tags": ["c++", "vector", "constructor", "destructor", "push-back"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1446668876, "post_id": 33531315, "comment_id": 54844262, "body": "Read up on the &quot;rule of 3&quot;.  You should have a copy constructor and assignment operator instrumented in your classes as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3477273"}, "edited": false, "score": 0, "creation_date": 1446669068, "post_id": 33531315, "comment_id": 54844375, "body": "as you were told, vector makes a deep copy by calling the copy constructor"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1446669159, "post_id": 33531315, "comment_id": 54844421, "body": "If you want to call the default constructor and not the copy constructor, you can <code>emplace()</code> the new elements."}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 5, "last_activity_date": 1446669393, "last_edit_date": 1446669393, "creation_date": 1446668884, "answer_id": 33531378, "question_id": 33531315, "link": "https://stackoverflow.com/questions/33531315/vector-destroys-objects-but-does-not-construct-their-replacements/33531378#33531378", "title": "vector destroys objects but does not construct their replacements?", "body": "<blockquote>\n  <p>How can vector be destroying objects, but not constructing their\n  replacements?</p>\n</blockquote>\n\n<p>It constructs them via calling the <strong>copy constructor</strong> of the object and not the user defined default one.</p>\n\n<p>That is, if you don't define one copy constructor for an object the compiler is going to implicitly define one for you. This is the case also here. When your vector's buffer gets re-allocated the copy constructor of each object is evoked in order to copy the objects in their new location. You can see this if you define the copy constructor as follows:</p>\n\n<pre><code>class cMember {\npublic: \n  int id;\n  cMember();\n  CMember(cMember const&amp;);\n  ^^^^^^^^^^^^^^^^^^^^^^^^\n  ~cMember();\n};\n\ncMember::cMember(cMember const &amp;) {\n    cout&lt;&lt;\"member copy constructor\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/73323ef25f883e1b\" rel=\"nofollow\"><strong>LIVE DEMO</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5526186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325164c83e4c630bbc96a65b4178fcf6?s=128&d=identicon&r=PG&f=1", "display_name": "BDO", "link": "https://stackoverflow.com/users/5526186/bdo"}, "edited": false, "score": 0, "creation_date": 1446672320, "post_id": 33531447, "comment_id": 54846218, "body": "This answer makes sense, but my question came up because the actual situation is a little more complex than the code example I posted. Add a pointer to cMember and delete it in the destructor, and that becomes an issue. Sorry about not making that clear in the original question. Is there a typical way of handling this?"}, {"owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "reply_to_user": {"reputation": 13, "user_id": 5526186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325164c83e4c630bbc96a65b4178fcf6?s=128&d=identicon&r=PG&f=1", "display_name": "BDO", "link": "https://stackoverflow.com/users/5526186/bdo"}, "edited": false, "score": 1, "creation_date": 1446672512, "post_id": 33531447, "comment_id": 54846310, "body": "You&#39;ll want to write a custom copy constructor, and in that copy constructor, allocate new memory for the copy (instead of just assigning the pointer). Alternatively if you don&#39;t want to allocate more memory each time and the two objects should be using the same pointer (just without the deallocation problem) you could consider using smart pointers from C++11: <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr</a>"}, {"owner": {"reputation": 13, "user_id": 5526186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325164c83e4c630bbc96a65b4178fcf6?s=128&d=identicon&r=PG&f=1", "display_name": "BDO", "link": "https://stackoverflow.com/users/5526186/bdo"}, "edited": false, "score": 0, "creation_date": 1446673881, "post_id": 33531447, "comment_id": 54847003, "body": "I think I&#39;ve avoided this whole issue by just never pushing a statically allocated object. I&#39;ve always used vectors of pointers and a cleanup routine when the objects pointed to are no longer needed. Thanks for your explanations and solutions!"}], "tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1446669155, "creation_date": 1446669155, "answer_id": 33531447, "question_id": 33531315, "link": "https://stackoverflow.com/questions/33531315/vector-destroys-objects-but-does-not-construct-their-replacements/33531447#33531447", "title": "vector destroys objects but does not construct their replacements?", "body": "<p>Because <code>cMember</code> is statically allocated, when the function goes out of scope that memory would be lost. This would be problematic for the vector if it still had a reference to that point in memory. So instead, <code>std::vector</code> will copy construct that object. This gives the vector its own dynamically allocated copy, which will exist for the vector even after the function goes out of scope.</p>\n\n<p>I modified your code to print <code>this</code> as well, and this is the output:</p>\n\n<pre><code>directory constructor\nA\nmember constructor 0x7fff572e86f8\nB\nmember destructor 0x7fff572e86f8\nA\nmember constructor 0x7fff572e86f8\nmember destructor 0x7fc1dbc04c80\nB\nmember destructor 0x7fff572e86f8\nC\n</code></pre>\n\n<p>As you can see, the object being destroyed between A and B was not constructed by your functions. Instead, it was the copy constructed object used by the <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5526186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/325164c83e4c630bbc96a65b4178fcf6?s=128&d=identicon&r=PG&f=1", "display_name": "BDO", "link": "https://stackoverflow.com/users/5526186/bdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33531447, "answer_count": 2, "score": 1, "last_activity_date": 1446669393, "creation_date": 1446668639, "question_id": 33531315, "link": "https://stackoverflow.com/questions/33531315/vector-destroys-objects-but-does-not-construct-their-replacements", "title": "vector destroys objects but does not construct their replacements?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass cMember\n{\n    public: \n    int id;\n\n    cMember();\n    ~cMember();\n};\n\ncMember::cMember()\n{\n    cout&lt;&lt;\"member constructor\\n\";\n}\n\ncMember::~cMember() \n{\n    cout&lt;&lt;\"member destructor\\n\";\n};\n\nclass cDirectory\n{\n    std::vector&lt;cMember&gt; memberList;\n\npublic:\n    cDirectory();\n    ~cDirectory();\n\n    void Populate();\n};\n\n\ncDirectory::cDirectory()\n{\n    cout&lt;&lt;\"directory constructor\\n\";\n}\n\ncDirectory::~cDirectory()\n{\n    cout&lt;&lt;\"directory desctructor\\n\";\n}\n\nvoid cDirectory::Populate()\n{\n    for(int i = 0; i &lt; 2; i++)\n    {\n        cout&lt;&lt;\"A\\n\";\n        cMember t;\n        memberList.push_back(t);\n        cout&lt;&lt;\"B\\n\";\n    }\n    cout&lt;&lt;\"C\\n\";\n}\n\nint main( int argc, const char ** argv )\n{\n    cDirectory dir;\n    dir.Populate();\n    exit(0);\n}\n</code></pre>\n\n<p>Looking at the output of this program, the second iteration calls the members destructor between A and B. I assume this call is the vector reallocating and repopulating, and destroying the members it had in it before the reallocation.</p>\n\n<p>How can vector be destroying objects, but not constructing their replacements?</p>\n"}, {"tags": ["c++", "r", "rcpp"], "answers": [{"tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 5, "last_activity_date": 1446670529, "creation_date": 1446670529, "answer_id": 33531826, "question_id": 33531235, "link": "https://stackoverflow.com/questions/33531235/rcpp-get-element-by-name-operator/33531826#33531826", "title": "Rcpp get element by name - $ operator", "body": "<p>Of course, and there are plenty of examples. Just use</p>\n\n<pre><code>std::string x = l[\"b\"];\n</code></pre>\n\n<p>where <code>l</code> is the <code>Rcpp::List</code> object which is assumed to have names.</p>\n"}], "owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 33531826, "answer_count": 1, "score": 5, "last_activity_date": 1446734805, "creation_date": 1446668314, "last_edit_date": 1446734805, "question_id": 33531235, "link": "https://stackoverflow.com/questions/33531235/rcpp-get-element-by-name-operator", "title": "Rcpp get element by name - $ operator", "body": "<p>In <code>R</code> I can write:</p>\n\n<pre><code>l &lt;- list(a=0, b=\"10\");\n</code></pre>\n\n<p>And get the value of the element of the list named <code>b</code> as follow:</p>\n\n<pre><code>x &lt;\u2013 l$b\n</code></pre>\n\n<p>Is there a way to get the same result by using an <code>Rcpp::List</code> object? </p>\n"}, {"tags": ["c++", "blackberry-10"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 2, "creation_date": 1446668086, "post_id": 33531132, "comment_id": 54843838, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Constructor&#39;s initializer list</a>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1446668221, "post_id": 33531132, "comment_id": 54843906, "body": "That&#39;s not a semi-colon, that&#39;s a colon."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1446668560, "post_id": 33531132, "comment_id": 54844090, "body": "The top four google hits for &quot;constructor colon&quot; point to answers for this question on this very site. DuckDuckGo and Bing would have worked too if you do not like Google, as would &quot;[c++] constructor colon&quot; in the SO search. Downvoted for lack of research effort."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1446675282, "post_id": 33531132, "comment_id": 54847771, "body": "Man, I wish they taught member initializer lists in schools."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1446668163, "creation_date": 1446668163, "answer_id": 33531189, "question_id": 33531132, "link": "https://stackoverflow.com/questions/33531132/c-what-is-the-stuff-between-between-the-semi-colon-and-curly-braces/33531189#33531189", "title": "C++, what is the stuff between between the semi colon, and curly braces", "body": "<p>These are member initializer lists.</p>\n\n<p>They are used to initialize members of an object. Note the difference between <strong>initialization</strong> and <strong>assignment</strong>. You could also \"initialize\" the members in the constructor but that would actually be an assignment. That means, the member would've been initialized (default constructed) beforehand.</p>\n\n<p>Using a member initializer list is more efficient than assignment within the constructor and is good C++ style.</p>\n"}, {"comments": [{"owner": {"reputation": 823, "user_id": 3512175, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00e4e07f7e9843a2a91ed0695a2ad1c3?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby W", "link": "https://stackoverflow.com/users/3512175/bobby-w"}, "edited": false, "score": 0, "creation_date": 1446668353, "post_id": 33531204, "comment_id": 54843983, "body": "Awesome, great explanation!"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 5, "last_activity_date": 1446668206, "creation_date": 1446668206, "answer_id": 33531204, "question_id": 33531132, "link": "https://stackoverflow.com/questions/33531132/c-what-is-the-stuff-between-between-the-semi-colon-and-curly-braces/33531204#33531204", "title": "C++, what is the stuff between between the semi colon, and curly braces", "body": "<p>That's a member initializer list (and it's a colon, not a semicolon).</p>\n\n<p>It initializes the member with the value in the parentheses, so (for example) <code>m_contactService(new ContactService(this))</code> is approximately the same as if you put <code>m_contactService = new ContactService(this);</code> inside the body of the constructor.</p>\n\n<p>There are a few differences though--the member initializer list does actually initialize instead of assigning a value. That means it can be used for things like const values, the base class, and references, to which assignment isn't allowed.</p>\n"}], "owner": {"reputation": 823, "user_id": 3512175, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/00e4e07f7e9843a2a91ed0695a2ad1c3?s=128&d=identicon&r=PG&f=1", "display_name": "Bobby W", "link": "https://stackoverflow.com/users/3512175/bobby-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1446668440, "accepted_answer_id": 33531204, "answer_count": 2, "score": -2, "last_activity_date": 1446668235, "creation_date": 1446667982, "last_edit_date": 1446668235, "question_id": 33531132, "link": "https://stackoverflow.com/questions/33531132/c-what-is-the-stuff-between-between-the-semi-colon-and-curly-braces", "closed_reason": "Duplicate", "title": "C++, what is the stuff between between the semi colon, and curly braces", "body": "<p>I downloaded an example from the blackberry website.\nI noticed they have some values before the curly braces, and after a colon, seperated by commas.</p>\n\n<p>What are these for, and how do they work?</p>\n\n<p>Edit: Is this just another way of instantiating values? The same as setting these values inside of the curly braces?</p>\n\n<pre><code>using namespace bb::cascades;\nusing namespace bb::pim::contacts;\n\n//! [0]\nAddressBook::AddressBook(QObject *parent)\n    : QObject(parent)\n    , m_contactService(new ContactService(this))\n    , m_model(new GroupDataModel(this))\n    , m_contactViewer(new ContactViewer(m_contactService, this))\n    , m_contactEditor(new ContactEditor(m_contactService, this))\n    , m_currentContactId(-1)\n{\n    // Disable grouping in data model\n    m_model-&gt;setGrouping(ItemGrouping::None);\n\n    // Ensure to invoke the filterContacts() method whenever a contact has been added, changed or removed\n    bool ok = connect(m_contactService, SIGNAL(contactsAdded(QList&lt;int&gt;)), SLOT(filterContacts()));\n    Q_ASSERT(ok);\n    ok = connect(m_contactService, SIGNAL(contactsChanged(QList&lt;int&gt;)), SLOT(filterContacts()));\n    Q_ASSERT(ok);\n    ok = connect(m_contactService, SIGNAL(contactsDeleted(QList&lt;int&gt;)), SLOT(filterContacts()));\n    Q_ASSERT(ok);\n\n    // Fill the data model with contacts initially\n    filterContacts();\n}\n</code></pre>\n"}, {"tags": ["c++", "if-statement", "compiler-errors"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1446667915, "post_id": 33531097, "comment_id": 54843738, "body": "You forgot a <code>{</code> after <code>if(pathID == 1)</code>."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446667941, "post_id": 33531097, "comment_id": 54843760, "body": "Voting to close as off-topic due to a simple typographical error."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1446667914, "creation_date": 1446667914, "answer_id": 33531111, "question_id": 33531097, "link": "https://stackoverflow.com/questions/33531097/error-expected-unqualified-id-before-if/33531111#33531111", "title": "error: expected unqualified-id before if", "body": "<p>You forgot a curly brace after</p>\n\n<pre><code>if(pathID == 1)\n</code></pre>\n\n<p>Add it and it'll work fine.</p>\n"}], "owner": {"reputation": 3, "user_id": 5339957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9NTM.jpg?s=128&g=1", "display_name": "11matt556", "link": "https://stackoverflow.com/users/5339957/11matt556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2342, "favorite_count": 0, "closed_date": 1446668113, "answer_count": 1, "score": 0, "last_activity_date": 1446667964, "creation_date": 1446667857, "last_edit_date": 1446667964, "question_id": 33531097, "link": "https://stackoverflow.com/questions/33531097/error-expected-unqualified-id-before-if", "closed_reason": "Not suitable for this site", "title": "error: expected unqualified-id before if", "body": "<p>I have looked through previous answers, but none of them have explained why I am getting this error.</p>\n\n<p>Here is my code with the error. It occurs on \"if(pathID==2...)\" and every if statement after that.</p>\n\n<pre><code>void add_path(int a,int b, int current_step,int pathID){\n\n    if(pathID == 0){\n            path[current_step] = new step(a,b,\"Filled A\",path[current_step]);\n    }\n    if(pathID == 1)\n            path[current_step] = new step(a,b,\"Filled B\",path[current_step]);\n    }\n    if(pathID == 2){\n            path[current_step] = new step(a,b,\"Empty A\",path[current_step]);\n    }\n    if(pathID == 3){\n            path[current_step] = new step(a,b,\"Empty B\",path[current_step]);\n    }\n    if(pathID == 4){\n            path[current_step] = new step(a,b,\"Pour B to A\",path[current_step]);\n    }\n    if(pathID == 5){\n            path[current_step] = new step(a,b,\"Pour A to B\",path[current_step]);\n    }\n}\n</code></pre>\n\n<p>All this code is meant to do is add to the linked list at a given position in an array. The pathID is passed in and tells it what action was performed, so we know we know what to add to the linked list.</p>\n\n<p>Later in the program I use that linked list to determine what actions were taken. I still need to make it a doubly linked list so it does not print in reverse, but that's another problem.</p>\n"}, {"tags": ["c++", "boost", "memory-mapped-files"], "comments": [{"owner": {"reputation": 2178, "user_id": 823697, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/060deac0d28e7234cab7d504618b2a64?s=128&d=identicon&r=PG&f=1", "display_name": "ovk", "link": "https://stackoverflow.com/users/823697/ovk"}, "edited": false, "score": 1, "creation_date": 1446667178, "post_id": 33530861, "comment_id": 54843292, "body": "You may want to check this question <a href=\"http://unix.stackexchange.com/questions/75996/modify-ulimit-open-files-of-a-specific-process\" title=\"modify ulimit open files of a specific process\">unix.stackexchange.com/questions/75996/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 431, "user_id": 3171600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe36b39f0133cdbe53b7f303625ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "joshu", "link": "https://stackoverflow.com/users/3171600/joshu"}, "edited": false, "score": 1, "creation_date": 1446668952, "post_id": 33531118, "comment_id": 54844305, "body": "For one thing, you&#39;ll reduce on overhead (obviously, because you already ran out of that specific resource under your config...). For the other thing, you&#39;ll obviously remove the need to open/reopen mappings all the time (you can just keep the one open). The common misconception is that &quot;this will take too much RAM&quot;, but virtual memory simply doesn&#39;t work like that."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 431, "user_id": 3171600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe36b39f0133cdbe53b7f303625ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "joshu", "link": "https://stackoverflow.com/users/3171600/joshu"}, "edited": false, "score": 1, "creation_date": 1446669272, "post_id": 33531118, "comment_id": 54844486, "body": "(On that last topic: <a href=\"http://stackoverflow.com/questions/24249763/release-memory-mapped-memory/24253385\" title=\"release memory mapped memory\">stackoverflow.com/questions/24249763/&hellip;</a>,  also perhaps interesting: <a href=\"http://stackoverflow.com/questions/24352943/write-only-memory-mapping-in-boost/24354199?s=55|0.0000#24354199\" title=\"write only memory mapping in boost\">stackoverflow.com/questions/24352943/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1446667932, "creation_date": 1446667932, "answer_id": 33531118, "question_id": 33530861, "link": "https://stackoverflow.com/questions/33530861/memory-mapped-files-and-max-file-size/33531118#33531118", "title": "Memory Mapped Files and Max File Size", "body": "<p>Why do you need many mapped files open? That seems very inefficient. Maybe you can map (regions of) a single large file?</p>\n\n<blockquote>\n  <p><strong>Q.</strong>  I was thinking of trying to combine them into a single file; however, I would like to avoid that if possible due to the performance</p>\n</blockquote>\n\n<p>That's ... nonsense. The performance could basically only increase.</p>\n\n<p>One particular thing to keep in mind is to align the different regions inside your \"big mapped file\" to multiple of your memory page/disk block size. 4k should be a nice starter for this coarse alignment.</p>\n"}], "owner": {"reputation": 431, "user_id": 3171600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe36b39f0133cdbe53b7f303625ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "joshu", "link": "https://stackoverflow.com/users/3171600/joshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 33531118, "answer_count": 1, "score": 0, "last_activity_date": 1446667932, "creation_date": 1446666918, "question_id": 33530861, "link": "https://stackoverflow.com/questions/33530861/memory-mapped-files-and-max-file-size", "title": "Memory Mapped Files and Max File Size", "body": "<p>I am using <code>boost::iostreams::mapped_file_source</code> to create a memory mapped files. In excess of 1024. To my surprise when I have created around 1024 memory mapped files my program throws an exception stating there are too many files open. After some research I found that Ubuntu uses a max file size per processes of 1024 (found from <code>ulimit -n</code>). Unfortunately, I need all of the files to be open at the same time. Does anyone know a way around this? Is it possible to make the files not count towards the limit someway? I was thinking of trying to combine them into a single file; however, I would like to avoid that if possible due to the performance. And I would also like to not modify the operating system by changing the value. Any points in the correct direction are much appreciated!</p>\n"}, {"tags": ["c++", "r", "valgrind", "rcpp"], "comments": [{"owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "edited": false, "score": 1, "creation_date": 1446671394, "post_id": 33530745, "comment_id": 54845694, "body": "For segfaults, it&#39;s usually &#39;easier&#39; to run under a debugger and then to navigate up / down the frame to see the call causing problems. There are <a href=\"http://bioconductor.org/developers/how-to/c-debugging/\" rel=\"nofollow noreferrer\">some hints</a>."}, {"owner": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1446671544, "post_id": 33530745, "comment_id": 54845784, "body": "Valgrind 3.8.1 is now quite old. So, the first thing to try is to upgrade to the new release (3.11.0), which a.o. will support newer processor/hwcaps and/or will have less bugs :)"}, {"owner": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446732720, "post_id": 33530745, "comment_id": 54873097, "body": "I installed Valgrind through yum install. Not sure it it picks up the old version."}], "answers": [{"comments": [{"owner": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446732640, "post_id": 33531865, "comment_id": 54873033, "body": "Thanks Dirk. From Kevin&#39;s answer in the following thread, it appears that the problem is with a different function SfSparseVector. <a href=\"http://stackoverflow.com/questions/33500363/svm-using-rsofia-crashes-r\" title=\"svm using rsofia crashes r\">stackoverflow.com/questions/33500363/svm-using-rsofia-crashe&zwnj;&#8203;s-r</a>"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446732926, "post_id": 33531865, "comment_id": 54873256, "body": "Yes,  and your use of valgrind was never quite right to investigate a segfault."}, {"owner": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446733152, "post_id": 33531865, "comment_id": 54873432, "body": "Dirk...unfortunately I came across a few references which guided me in that direction. One of them is here: <a href=\"http://thomas-cokelaer.info/blog/2013/03/using-valgrind-to-debug-r-programs/\" rel=\"nofollow noreferrer\">thomas-cokelaer.info/blog/2013/03/&hellip;</a>"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446733647, "post_id": 33531865, "comment_id": 54873869, "body": "Do you believe things you read on the Internet? Wow.  The mind boggles."}, {"owner": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "edited": false, "score": 0, "creation_date": 1446733824, "post_id": 33531865, "comment_id": 54874004, "body": "I agree...looking at your answer above about assert() I realize I shouldn&#39;t believe everything :)"}, {"owner": {"reputation": 2969, "user_id": 3671495, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FWkhb.jpg?s=128&g=1", "display_name": "Jack Wasey", "link": "https://stackoverflow.com/users/3671495/jack-wasey"}, "edited": false, "score": 0, "creation_date": 1446840781, "post_id": 33531865, "comment_id": 54927827, "body": "I&#39;m not an asserter myself, but I do see in Writing R Extensions section 1.7: &quot; The normal way to ensure that is to define the macro NDEBUG, and as from R 2.15.0 R CMD INSTALL does so as part of the compilation flags. If you wish to use assert during development. you can include -UNDEBUG in PKG_CPPFLAGS. Note that your own `src/Makefile&#39; or makefiles in sub-directories may also need to define NDEBUG.&quot;"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1446843165, "post_id": 33531865, "comment_id": 54928966, "body": "I always read that as suggesting a way to allow <code>assert()</code> for debug builds only.  Don&#39;t get me wrong: <code>assert()</code> is a fine tool, but CRAN does not want us to take the enveloping R instance down. And they are right."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 1, "last_activity_date": 1446670661, "creation_date": 1446670661, "answer_id": 33531865, "question_id": 33530745, "link": "https://stackoverflow.com/questions/33530745/interpreting-valgrind-output-of-r-script/33531865#33531865", "title": "Interpreting valgrind output of R script", "body": "<p>Looks like it is using an <code>assert()</code> which, according to <code>Writing R Extension</code> one should not be using in the first place.  </p>\n\n<p>Now why the <code>assert()</code> evaluates the way it does and hence aborts is another matter.  But for that one would need a minimally reproducible example, plus some spare time and patience.</p>\n"}], "owner": {"reputation": 2684, "user_id": 1002903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7be7142a7911f25a3323c9b3b75c310b?s=128&d=identicon&r=PG", "display_name": "Ravi", "link": "https://stackoverflow.com/users/1002903/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446670661, "creation_date": 1446666496, "last_edit_date": 1495540719, "question_id": 33530745, "link": "https://stackoverflow.com/questions/33530745/interpreting-valgrind-output-of-r-script", "title": "Interpreting valgrind output of R script", "body": "<p>I have a R script that throws a segfault error. The R script uses a package \"RSofia\" that internally calls a C++ program using Rcpp package which I believe is causing the issue.</p>\n\n<p>Please refer to the link for the question I posted on the same: <a href=\"https://stackoverflow.com/questions/33500363/svm-using-rsofia-crashes-r\">RSofia Issue</a></p>\n\n<p>I am trying to debug and identify what is causing the issue using valgrind as follows:</p>\n\n<pre><code>R -d \"valgrind --leak-check=full --show-reachable=yes\" -f svm.r\n</code></pre>\n\n<p>This throws the following output:</p>\n\n<pre><code>==11235== Memcheck, a memory error detector\n==11235== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.\n==11235== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info\n==11235== Command: /usr/lib64/R/bin/exec/R -f svm.r\n==11235== \n\nvex: priv/main_main.c:319 (LibVEX_Translate): Assertion `are_valid_hwcaps(VexArchAMD64, vta-&gt;archinfo_host.hwcaps)' failed.\nvex storage: T total 0 bytes allocated\nvex storage: P total 0 bytes allocated\n\nvalgrind: the 'impossible' happened:\n  LibVEX called failure_exit().\n==11235==    at 0x38031DA7: report_and_quit (m_libcassert.c:235)\n==11235==    by 0x38031E0E: panic (m_libcassert.c:319)\n==11235==    by 0x38031E68: vgPlain_core_panic_at (m_libcassert.c:324)\n==11235==    by 0x38031E7A: vgPlain_core_panic (m_libcassert.c:329)\n==11235==    by 0x3804D162: failure_exit (m_translate.c:708)\n==11235==    by 0x380D4C38: vex_assert_fail (main_util.c:219)\n==11235==    by 0x380D3009: LibVEX_Translate (main_main.c:319)\n==11235==    by 0x3804AACE: vgPlain_translate (m_translate.c:1559)\n==11235==    by 0x38079D9F: vgPlain_scheduler (scheduler.c:991)\n==11235==    by 0x380A6409: run_a_thread_NORETURN (syswrap-linux.c:103)\n\nsched status:\nrunning_tid=1\n\nThread 1: status = VgTs_Runnable\n==11235==    at 0x4000B00: ??? (in /lib64/ld-2.12.so)\n==11235==    by 0x2: ???\n==11235==    by 0x7FF00036E: ???\n==11235==    by 0x7FF000386: ???\n==11235==    by 0x7FF000389: ???\n</code></pre>\n\n<p>Can someone help with how to locate the error from this message and what could be a possible fix to this?</p>\n"}, {"tags": ["c++", "function-object"], "comments": [{"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "edited": false, "score": 0, "creation_date": 1446666452, "post_id": 33530674, "comment_id": 54842892, "body": "Comp is a type parameter, not a function object class name. By the way, you can actually define a <code>Comp comp</code> object and then invoke <code>comp</code>."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1446666653, "post_id": 33530674, "comment_id": 54843002, "body": "Did you instantiate/use the function call operator of <code>LessThanPred</code>? Since it is a template member it gets checked for correctly only when instantiated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446667105, "post_id": 33530674, "comment_id": 54843244, "body": "I&#39;m voting to close this question as off-topic because The citation is not correct"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1446667202, "post_id": 33530674, "comment_id": 54843304, "body": "@DieterL&#252;cking: section 6.7 &quot;Template Parameters as Strategy&quot; of &quot;Essential C++&quot; (1st printing) does contain that exact code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446672603, "post_id": 33530674, "comment_id": 54846361, "body": "Hence I am wrong (wtf, trusting)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4814964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9bd2fffbf48e2222922ddc7d59e636?s=128&d=identicon&r=PG&f=1", "display_name": "yycfox", "link": "https://stackoverflow.com/users/4814964/yycfox"}, "edited": false, "score": 0, "creation_date": 1446675967, "post_id": 33530880, "comment_id": 54848111, "body": "For the default situation, could I change the code &#39; { return Comp(val, _val); }&#39; into  { return Comp()(val, _val); }?"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 1, "last_activity_date": 1446667002, "creation_date": 1446667002, "answer_id": 33530880, "question_id": 33530674, "link": "https://stackoverflow.com/questions/33530674/function-object-as-template-parameter/33530880#33530880", "title": "Function object as template parameter", "body": "<p>The code as is compiles because the template members are only checked for semantic correctness when they are instantiated. The code is syntactically well-formed, though. However, when you try to instantiate the function call operator of <code>LessThanPred&lt;T&gt;</code>, you'll get a compiler error. For example, with the version of <a href=\"http://clang.llvm.org/\" rel=\"nofollow\"><code>clang</code></a> (3.6.1) I'm using I get</p>\n\n<pre><code>less-than.cpp:8:18: error: no matching constructor for initialization of 'std::less&lt;int&gt;'\n        { return Comp(val, _val); }\n                 ^    ~~~~~~~~~\nless-than.cpp:17:25: note: in instantiation of member function 'LessThanPred&lt;int, std::less&lt;int&gt; &gt;::operator()' requested here\n    LessThanPred&lt;int&gt;(2)(1);\n</code></pre>\n\n<p>when trying to use the function as</p>\n\n<pre><code>LessThanPred&lt;int&gt;(2)(1)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4814964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9bd2fffbf48e2222922ddc7d59e636?s=128&d=identicon&r=PG&f=1", "display_name": "yycfox", "link": "https://stackoverflow.com/users/4814964/yycfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 33530880, "answer_count": 1, "score": 1, "last_activity_date": 1446667341, "creation_date": 1446666313, "last_edit_date": 1446667341, "question_id": 33530674, "link": "https://stackoverflow.com/questions/33530674/function-object-as-template-parameter", "title": "Function object as template parameter", "body": "<pre><code>template &lt;typename elemType, typename Comp = less&lt;elemType&gt; &gt;\nclass LessThanPred {\n    public:\n        LessThanPred(const elemType &amp;val) : _val(val){}\n        bool operator()(const elemType &amp;val) const\n        { return Comp(val, _val); }\n        void val(const elemType &amp;newval) { _val = newval; }\n        elemType val() const { return _val; }\nprivate:\n    elemType _val;};\n</code></pre>\n\n<p>That's an example from Essential c++. <code>Comp</code> is obviously a function object class name. Why could I use the <code>Comp(val, _val)</code> directly? Normally I think I should firstly define a function object like this: <code>Comp comp</code>, then invoke <code>comp</code> not <code>Comp</code>.</p>\n"}, {"tags": ["c++", "qt", "qprocess"], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1446738925, "post_id": 33535995, "comment_id": 54877813, "body": "This didn&#39;t work and I guess <code>deleteLater</code> is not working as advertised. It actually destroys the QProcess before it finishes with error message <code>QProcess: Destroyed while process (&quot;sh&quot;) is still running.</code> If I remove <code>deleteLater</code> call my QProcess does finish and generate output."}, {"owner": {"reputation": 700, "user_id": 2434232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564b3a9897830897b883c5736d254d30?s=128&d=identicon&r=PG", "display_name": "Dani&#235;l Sonck", "link": "https://stackoverflow.com/users/2434232/dani%c3%abl-sonck"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1446829466, "post_id": 33535995, "comment_id": 54921852, "body": "I will try some stuff when I get home, maybe &quot;finished&quot; isn&#39;t the best signal to use."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1446840194, "post_id": 33535995, "comment_id": 54927504, "body": "Thanks, I have a solution that is working, I think I will post so it may help others but if you know of better, let me know"}], "tags": [], "owner": {"reputation": 700, "user_id": 2434232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564b3a9897830897b883c5736d254d30?s=128&d=identicon&r=PG", "display_name": "Dani&#235;l Sonck", "link": "https://stackoverflow.com/users/2434232/dani%c3%abl-sonck"}, "is_accepted": false, "score": 1, "last_activity_date": 1446692903, "creation_date": 1446692903, "answer_id": 33535995, "question_id": 33530592, "link": "https://stackoverflow.com/questions/33530592/how-to-destroy-qprocess-when-it-finishes-and-the-class-than-contaed-the-slot/33535995#33535995", "title": "How to destroy QProcess when it finishes and the class than contaed the slot", "body": "<p>Well, you seem to keep track of the process object. You could implement <code>createPdfLink(int)</code> like this:</p>\n\n<pre><code>void createPdfLink(int status)\n{\n    if(status != 0)\n    {\n       // Do error handling\n    }\n    else\n    {\n       // regular code\n    }\n\n    myProcess-&gt;deleteLater();\n    deleteLater();\n}\n</code></pre>\n\n<p>assuming <code>myProcess</code> is stored as <code>myProcess</code> inside the <code>PdfSymlink</code> object as well. It causes the process to be deleted by Qt as soon as it is allowed to be deleted by Qt (mainly to prevent random crashes) and causes the class itself to delete when allowed.</p>\n\n<p><strong>Extra:</strong></p>\n\n<p>As a more clean code, it might be better to include the <code>connect</code> function inside the constructor of the <code>PdfSymlink</code> class:</p>\n\n<pre><code>PdfSymlink::PdfSymlink(QString fileName, QString linkName, QProcess * myProcess)\n{\n    this-&gt;myProcess = myProcess;\n    connect(myProcess, SIGNAL(finished(int)), SLOT(createPdfLink(int)));\n\n    // More initialization code\n}\n</code></pre>\n\n<p>This has the added benefit of keeping code relevant, and makes the \"receiver\" argument optional as the overloaded non-static member-function <code>connect(sender,signal,method)</code> is used.</p>\n"}, {"comments": [{"owner": {"reputation": 700, "user_id": 2434232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564b3a9897830897b883c5736d254d30?s=128&d=identicon&r=PG", "display_name": "Dani&#235;l Sonck", "link": "https://stackoverflow.com/users/2434232/dani%c3%abl-sonck"}, "edited": false, "score": 1, "creation_date": 1508420291, "post_id": 33575910, "comment_id": 80609865, "body": "Just so anyone reading this solution. Please note that deleteLater(int) SLOT doesn&#39;t exist so in effect, deleteLater is never called. It is equivalent to not having the second connect. Probably this is shown on the terminal as &quot;Could not connect QProcess::finished(int) to QProcess::deleteLater(int), no such slot&quot;"}], "tags": [], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "is_accepted": false, "score": 1, "last_activity_date": 1566235039, "last_edit_date": 1566235039, "creation_date": 1446844882, "answer_id": 33575910, "question_id": 33530592, "link": "https://stackoverflow.com/questions/33530592/how-to-destroy-qprocess-when-it-finishes-and-the-class-than-contaed-the-slot/33575910#33575910", "title": "How to destroy QProcess when it finishes and the class than contaed the slot", "body": "<p>So if anyone runs into the same issue I fix it, I had to call deleteLater as a slot:</p>\n\n<pre><code>void PDf::createPDF()\n{\n        QProcess *myProcess= new QProcess();\n\n        PdfSymlink * pdfSymlink = new PdfSymlink( fileName, linkName, myProcess ); // fileName and LinkName definition is omitted \n\n        connect(myProcess, SIGNAL(finished(int)), pdfSymlink, SLOT(createPdfLink(int))\n\n        // Call deleteLater\n        connect(myProcess, SIGNAL(finished(int)), myProcess, SLOT(deleteLater()) );\n\n        myProcess-&gt;start(\"sh\",args); // args is defined now shown in code\n} \n</code></pre>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566235039, "creation_date": 1446666040, "question_id": 33530592, "link": "https://stackoverflow.com/questions/33530592/how-to-destroy-qprocess-when-it-finishes-and-the-class-than-contaed-the-slot", "title": "How to destroy QProcess when it finishes and the class than contaed the slot", "body": "<p>I start a <code>QProcess</code> in member function of a class but that object (Pdf object below) will soon get destroyed after creating the process. I obviously want the slot function to be available and called when QProcess finishes. I pass <code>QProcess</code> pointer so when it finishes, it will destroy it as well. But actually it doesn't really is destroyed when it finishes.</p>\n\n<pre><code>void PDf::createPDF()\n{\nPdfSymlink * pdfSymlink = new PdfSymlink( fileName, linkName, myProcess );\n\nconnect(myProcess, SIGNAL(finished(int)), pdfSymlink, SLOT(createPdfLink(int)) );\n\nmyProcess-&gt;start(\"sh\",args); // args is defined now shown in code\n} \n</code></pre>\n\n<p>This is a repetitive code which is called many many timesI want the QProcess to get destroyed when it finishes and likewise pdfSymlink should be destroyed as well. How can I do that?</p>\n\n<p>Note my slot does get called and it does the job but I want to make sure I clean up after this object.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1446666489, "post_id": 33530578, "comment_id": 54842916, "body": "<a href=\"http://stackoverflow.com/questions/24109/c-ide-for-linux\">IDEs</a> and even text editors often provide functionality to build, run and debug app in one click or key press"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 2, "creation_date": 1446666569, "post_id": 33530578, "comment_id": 54842961, "body": "Also, you can use some build system: make and cmake are probably the most popular"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1446669257, "post_id": 33530578, "comment_id": 54844479, "body": "Scripts/batch files would work too, but make is better."}], "answers": [{"tags": [], "owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1446666477, "creation_date": 1446666477, "answer_id": 33530737, "question_id": 33530578, "link": "https://stackoverflow.com/questions/33530578/how-to-make-compiling-opengl-c-program-easier/33530737#33530737", "title": "how to make compiling OpenGL C++ program &quot;easier&quot;?", "body": "<p>Create a Makefile that looks like this:</p>\n\n<pre><code>all:\n        g++ test.cpp -o proba  -lglut -lGL\n</code></pre>\n\n<p>Then simply type <code>make</code> and it will compile your program. Note: indent with a TAB in the makefile.</p>\n\n<p>(see <a href=\"https://en.wikipedia.org/wiki/Makefile\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Makefile</a>)</p>\n"}], "owner": {"reputation": 49, "user_id": 4206341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1683a1ca2d1e190900696646a48bc3f7?s=128&d=identicon&r=PG&f=1", "display_name": "gilley", "link": "https://stackoverflow.com/users/4206341/gilley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 33530737, "answer_count": 1, "score": -1, "last_activity_date": 1446669582, "creation_date": 1446665986, "last_edit_date": 1446669582, "question_id": 33530578, "link": "https://stackoverflow.com/questions/33530578/how-to-make-compiling-opengl-c-program-easier", "title": "how to make compiling OpenGL C++ program &quot;easier&quot;?", "body": "<p>I'm using linux mint 17.2 and have downloaded everything necessary to program in OpenGL.</p>\n\n<p>When I download test program and save it in text editor as (for example)  test.cpp I need to do this command in terminal to compile it:</p>\n\n<pre><code>g++ test.cpp -o proba  -lglut -lGL\n</code></pre>\n\n<p>I wanna skip this -lglut and -lGL part so it is automatically included. How is it possible ? Can it be done in some IDE like CODEBLOCKS maybe ?</p>\n"}, {"tags": ["c++", "c", "function", "c++11", "callback"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446665662, "post_id": 33530465, "comment_id": 54842431, "body": "Maybe <a href=\"http://stackoverflow.com/questions/10938774/get-function-pointer-from-stdfunction-when-using-stdbind\">this</a> helps."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1446665820, "post_id": 33530465, "comment_id": 54842522, "body": "I assume that <code>void* args</code> is for userdata, that you can cast back to your type."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1446665873, "post_id": 33530465, "comment_id": 54842551, "body": "Is your register callback <b>actually</b> <code>void register_callback(void(*callback)(void*,int), void* args)</code> by any chance?  If yes, please correct.  If no, please provide more information on how the callback works, and what the arguments mean.  Ideally actually copy-paste the actual callback interface here, don&#39;t paraphrase."}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1446665992, "post_id": 33530465, "comment_id": 54842622, "body": "@Jarod42 yes it is for userdata"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446666149, "post_id": 33530465, "comment_id": 54842714, "body": "Avoid std:::function (If you bind to a class, have a static function dispatching to a member-function, where <code>args</code> represents the class object)"}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1446666370, "post_id": 33530465, "comment_id": 54842841, "body": "@Yakk you are right. Updated."}], "answers": [{"comments": [{"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446681526, "post_id": 33530750, "comment_id": 54850145, "body": "Thanks. Can you elaborate a little more on your suggestion of using smart pointer? Did you mean to create a std::function object on heap and wrap it with a smart pointer? But then I would have to ensure that the the smart pointer remains valid right?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446684119, "post_id": 33530750, "comment_id": 54850875, "body": "@vikky.rk Yes but copies of the smart pointer mean that the pointer-to-element remain valid; unlike copies of the <code>std::function</code>.  So a bit easier to deal with."}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446750860, "post_id": 33530750, "comment_id": 54885217, "body": "Makes sense. One more question: Where is the lambda stored when it get converted to function pointer?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446750881, "post_id": 33530750, "comment_id": 54885226, "body": "@vikky.rk It isn&#39;t.  There is no state to store.  Well, the 1 byte no-state could be stored somewhere while it is a function, but neither calling the lambda nor the function <i>use</i> that state in any real sense."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1446666534, "creation_date": 1446666534, "answer_id": 33530750, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries/33530750#33530750", "title": "Working with std::function on C libraries", "body": "<pre><code>std::function&lt;void(int)&gt; bob;\nregister_callback( [](int x, void* pbob){\n  auto&amp; bob = *static_cast&lt;std::function&lt;void(int)&gt;*&gt;(pbob);\n  bob(x);\n}, &amp;bob );\n</code></pre>\n\n<p>this remains valid for as long as the variable <code>bob</code> does.</p>\n\n<p>A copy of <code>bob</code> is not enough, the actual instance of <code>bob</code> that we took a pointer to in the <code>register_callback</code> call has to live long enough.</p>\n\n<p>If this is difficult, consider a smart pointer wrapping said <code>std::function</code> and doing a pointer to the stored <code>std::function</code>.</p>\n\n<p>There will be modest overhead in the above, in that we dispatch over a function pointer, then over the equivalent of a vtable, then inside the <code>std::function</code> again.</p>\n\n<p>What is going on above is that I make a stateless lambda to convert the <code>void* args</code> into a pointer-to-<code>std::function</code>, and invoke that <code>std::function</code> with the <code>int</code>.  Stateless lambdas can convert to function pointers implicitly.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1446668153, "creation_date": 1446668153, "answer_id": 33531183, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries/33531183#33531183", "title": "Working with std::function on C libraries", "body": "<p>With:</p>\n\n<pre><code>class CallBack\n{\npublic:\n    explicit CallBack(std::function&lt;void(int)&gt; f) : f(f) {}\n\n    static void to_c_api(int a, void* that)\n    {\n        reinterpret_cast&lt;CallBack*&gt;(that)-&gt;f(a);\n    }\nprivate:\n    std::function&lt;void(int)&gt; f;\n};\n</code></pre>\n\n<p>You may then do</p>\n\n<pre><code>CallBack callback; // should live longer than the calls\nvoid register_callback(CallBack::to_c_api, &amp;callback);\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 33530750, "answer_count": 2, "score": 1, "last_activity_date": 1446668153, "creation_date": 1446665582, "last_edit_date": 1446666352, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries", "title": "Working with std::function on C libraries", "body": "<p>I have a C library function with the following signature,</p>\n\n<pre><code>void register_callback(void (*callback)(int, void*), void* args);\n</code></pre>\n\n<p>What is the best way to get this to work with, if I have a callback of the form,</p>\n\n<pre><code>std::function&lt;void(int)&gt;?\n</code></pre>\n"}, {"tags": ["c++", "unordered-map", "c++03", "tr1"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1446665566, "post_id": 33530430, "comment_id": 54842378, "body": "Is there any guarantee an <code>std::unordered_map</code> is <b>not</b> ordered? AFAIK, it&#39;s implemented with a hash table, so, depending on the hash algorithm, an ordered output is entirely plausible."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446665689, "post_id": 33530430, "comment_id": 54842450, "body": "You lack a return value for <code>main</code>."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1446665727, "post_id": 33530430, "comment_id": 54842475, "body": "What is the output you would expect, and what did you get instead (a short example would be a good idea)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446665832, "post_id": 33530430, "comment_id": 54842529, "body": "@cad If <code>main</code> ends without a return an implicit one is generated.  see 3.6.1(5)"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1446665984, "post_id": 33530430, "comment_id": 54842617, "body": "@NathanOliver I mean the <code>int</code> in front of <code>main</code>. But you got me, at first I doubted my sanity. :-) Shoot me if I&#39;m still wrong."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446666098, "post_id": 33530430, "comment_id": 54842686, "body": "@cad Ah yes the return <i>type</i> is missing from <code>main</code>.  The return <i>statement</i> is allowed to be omitted."}, {"owner": {"reputation": 13, "user_id": 4333979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b85df876faa0d98d89ad5e46503476e?s=128&d=identicon&r=PG&f=1", "display_name": "LordSilver", "link": "https://stackoverflow.com/users/4333979/lordsilver"}, "edited": false, "score": 0, "creation_date": 1446666292, "post_id": 33530430, "comment_id": 54842793, "body": "Ex. input: 5 (counter); 3; 7; 1; 3; 8. expected output: [3,2]; [7,1]; [1,1]; [8,1]. program output: [1,1]; [3,2]; [7,1]; [8,1]. As you see, it sorts by key as if it was a normal map."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1446667699, "post_id": 33530430, "comment_id": 54843612, "body": "First, <code>unordered_map</code> doesn&#39;t guarantee any order. That&#39;s different from guaranteeing that it is not ordered. Second, the whole <code>if&#47;else</code> is superfluous and actually inefficient (because it does two lookups instead of one) - <code>map[key]</code> inserts <code>int()</code> (i.e., 0) if <code>key</code> isn&#39;t already in the map."}, {"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "edited": false, "score": 0, "creation_date": 1446716939, "post_id": 33530430, "comment_id": 54863002, "body": "@LordSilver You want the order to be untouched? I.e. you want the iterator to iterate the map in the order you inserted the values? That&#39;s a case for <code>std::vector&lt;std::pair&lt;int,int&gt; &gt;</code> then, but this will be quite slow when searching for a key. Using a vector for storage, as well as a map for key lookup could be a solution, but you need to manage both datastructures simultaneously."}, {"owner": {"reputation": 13, "user_id": 4333979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b85df876faa0d98d89ad5e46503476e?s=128&d=identicon&r=PG&f=1", "display_name": "LordSilver", "link": "https://stackoverflow.com/users/4333979/lordsilver"}, "edited": false, "score": 0, "creation_date": 1446890282, "post_id": 33530430, "comment_id": 54939478, "body": "Yes, that&#39;s exactly what I&#39;ve tryed to attain. I&#39;d like the order to be untouched while keeping the best possible performance for searching operations within the data stracture. I thought an unordered_map could be suitable for this purpose."}], "owner": {"reputation": 13, "user_id": 4333979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b85df876faa0d98d89ad5e46503476e?s=128&d=identicon&r=PG&f=1", "display_name": "LordSilver", "link": "https://stackoverflow.com/users/4333979/lordsilver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446665457, "creation_date": 1446665457, "question_id": 33530430, "link": "https://stackoverflow.com/questions/33530430/stdtr1unordered-map-is-ordered-instead", "title": "std::tr1::unordered_map is ordered instead", "body": "<p>I'd like to have an unordered_map which contains the occurrences of each key; the problem is that, when I print myMap, it's ordered instead. I know it'd be better to use C++11, but I cannot for some reasons I'm not going to explain.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tr1/unordered_map&gt;\n\nusing namespace std;\nusing std::tr1::unordered_map;\n\nmain () {\n    unordered_map&lt;int,int&gt; myMap;\n    int counter, key;\n\n    cin&gt;&gt;counter;\n    for (int i=0; i&lt;counter; i++) {\n        cin&gt;&gt;key; // Read key from keyboard\n        if (myMap.find(key) == myMap.end()) // If key is not already present in myMap\n            myMap[key] = 1; // Insert the new key with 1 occurrence\n        else\n            myMap[key]++; // Increment the current key occurrence\n    }\n    for (unordered_map&lt;int,int&gt;::const_iterator it = myMap.begin(); it != myMap.end(); ++it)\n        cout &lt;&lt; \"[\" &lt;&lt; it-&gt;first &lt;&lt; \",\" &lt;&lt; it-&gt;second &lt;&lt; \"] \" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446665868, "post_id": 33530414, "comment_id": 54842549, "body": "Looks like a msvc bug"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1446666040, "post_id": 33530414, "comment_id": 54842647, "body": "@DieterL&#252;cking, I tried it using g++ 4.9.3 and <code>BaseX::foo();</code> works."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1446668230, "post_id": 33531119, "comment_id": 54843915, "body": "Why are we looking up <code>Interface</code> though?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1446668327, "post_id": 33531119, "comment_id": 54843964, "body": "@Barry Um, you wrote <code>Base&lt;Interface&gt;::foo();</code>...not sure why you think it won&#39;t be looked up."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1446668453, "post_id": 33531119, "comment_id": 54844034, "body": "@Barry Well, before we lookup <code>foo</code>, we need to know what scope to look it up in (or, what <code>Base&lt;Interface&gt;</code> is)...so you lookup <code>Base</code> and <code>Interface</code>."}, {"owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "edited": false, "score": 0, "creation_date": 1446668619, "post_id": 33531119, "comment_id": 54844126, "body": "Unfortunately, I inherit from several <code>Base&lt;X&gt;</code> and need <code>Base&lt;X&gt;::</code> to disambiguate. What is the most elegant solution for this case?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "edited": false, "score": 1, "creation_date": 1446668709, "post_id": 33531119, "comment_id": 54844173, "body": "@BetaCarotin Qualify the name."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1446669084, "post_id": 33531119, "comment_id": 54844386, "body": "@DieterL&#252;cking So it seems. 4.9+ rejects it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446669777, "post_id": 33531119, "comment_id": 54844783, "body": "I consider it a bug (for every compiler doing that)"}, {"owner": {"reputation": 42096, "user_id": 592323, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5df027e3c31ae3b8755c0ea377f951a0?s=128&d=identicon&r=PG", "display_name": "leemes", "link": "https://stackoverflow.com/users/592323/leemes"}, "reply_to_user": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "edited": false, "score": 0, "creation_date": 1446669938, "post_id": 33531119, "comment_id": 54844879, "body": "@BetaCarotin I&#39;d suggest <code>Base&lt;::X&gt;</code> instead of <code>Base&lt;X&gt;</code>. This will look up <code>X</code> in the global scope, instead of the local one. So you don&#39;t need typedefs / usings."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1446671211, "post_id": 33531119, "comment_id": 54845601, "body": "@DieterL&#252;cking what a bug? Rejecting the code? That&#39;s what the standard says they should do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446673295, "post_id": 33531119, "comment_id": 54846712, "body": "@T.C. &quot;Downvoter care to comment?&quot; do not ask that, just  accept it (I have no vote here)"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1446668622, "last_edit_date": 1446668622, "creation_date": 1446667935, "answer_id": 33531119, "question_id": 33530414, "link": "https://stackoverflow.com/questions/33530414/behavior-of-qualified-name-using-private-inheritance/33531119#33531119", "title": "Behavior of qualified name using private inheritance", "body": "<p>Injected-class-names.</p>\n\n<p>The name <code>Interface</code> is injected into the scope of the class <code>Interface</code> as if it's a public member, and in turn inherited by <code>Base&lt;Interface&gt;</code> (as a private member, since you are using private inheritance).</p>\n\n<p>When you write <code>Base&lt;Interface&gt;::foo()</code> in <code>Derived</code>, unqualified name lookup for <code>Interface</code> looks first at <code>Derived</code> and its base class, finds <code>Interface</code> in the base class, and then access control kicks in because that name is <code>private</code>.</p>\n\n<p>The simplest fix is to just write <code>Base::foo()</code>, or even just <code>foo()</code> if it isn't virtual and you aren't planning to write a <code>foo()</code> in <code>Derived</code>.</p>\n\n<p>If you have to include the template argument for some reason, then write <code>Base&lt;::Interface&gt;</code>.</p>\n"}], "owner": {"reputation": 1575, "user_id": 1593297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zsi4O.jpg?s=128&g=1", "display_name": "Beta Carotin", "link": "https://stackoverflow.com/users/1593297/beta-carotin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 33531119, "answer_count": 1, "score": 9, "last_activity_date": 1446670699, "creation_date": 1446665400, "question_id": 33530414, "link": "https://stackoverflow.com/questions/33530414/behavior-of-qualified-name-using-private-inheritance", "title": "Behavior of qualified name using private inheritance", "body": "<p>When compiling the following example in msvc, I get </p>\n\n<blockquote>\n  <p>'Interface' not accessible because 'Base' uses 'private' to\n  inherit from 'Interface'</p>\n</blockquote>\n\n<p>in the line marked with <code>Error</code>. When the call to <code>foo</code> is qualified with a type alias of the same type, it works. I tested with msvc and ideone.</p>\n\n<p>Why are the two calls not equal?</p>\n\n<pre><code>struct Interface {};\n\ntemplate&lt;class T&gt;\nstruct Base : private T\n{\n    void foo() {}\n};\n\nusing BaseX =   Base&lt;Interface&gt;;\n\nclass Derived : Base&lt;Interface&gt;\n{\n    Derived() {\n        Base&lt;Interface&gt;::foo();   // Error\n        BaseX::foo();             // Works\n    }\n};\n</code></pre>\n\n<p><a href=\"http://ideone.com/cTQmYP\">Ideone</a></p>\n"}, {"tags": ["c++", "templates", "enums"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1446664822, "post_id": 33530219, "comment_id": 54841976, "body": "Did you already try using <code>typename a&lt;T&gt;::Etry enumParam</code>?"}, {"owner": {"reputation": 3784, "user_id": 2593738, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EO83B.png?s=128&g=1", "display_name": "developerbmw", "link": "https://stackoverflow.com/users/2593738/developerbmw"}, "edited": false, "score": 0, "creation_date": 1446665253, "post_id": 33530219, "comment_id": 54842205, "body": "Yeah you just need to put <code>typename</code> before your argument. See the link in the comment above for why."}], "owner": {"reputation": 272, "user_id": 3630497, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/879d1b150cea9e8b3506d68ae6e1953c?s=128&d=identicon&r=PG&f=1", "display_name": "user11001", "link": "https://stackoverflow.com/users/3630497/user11001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1446665275, "answer_count": 0, "score": 1, "last_activity_date": 1446665989, "creation_date": 1446664633, "last_edit_date": 1446665989, "question_id": 33530219, "link": "https://stackoverflow.com/questions/33530219/enum-define-in-template-class-in-c", "closed_reason": "Duplicate", "title": "enum define in template class in c++", "body": "<p>My code describes two classes that implement simple enum defined in <code>class \"a\"</code> and function <code>\"getNum</code>\" that uses the <code>enum</code> and i get the following comilation errors:</p>\n\n<p>1.\"<code>C2061: syntax error: identifier 'Etry</code><br>\n2.\"<code>C4346: 'a&lt;T&gt;::Etry': dependent name is not a type</code></p>\n\n<p>The code:</p>\n\n<blockquote>\n  <p>a class:</p>\n</blockquote>\n\n<pre><code>template &lt;typename T&gt;\nclass a\n\n{\n\npublic:\n\nenum Etry\n{\n    AAA,\n    BBB,\n    CCC\n};\n\na()\n{\n    printf(\"\\nconstructor of a class.\\n\");\n};\n\n};\n</code></pre>\n\n<blockquote>\n  <p>b class:</p>\n</blockquote>\n\n<pre><code>template &lt;typename T&gt;\nclass b\n{\npublic:\n\n    void getNum(int num, a&lt;T&gt;::Etry enumParam)\n    {\n        printf(\"\\nbla bla....\\n\");\n    }\n\n    b() {\n        printf(\"\\nconstructor of b class.\\n\");\n    }\n};\n</code></pre>\n\n<p>Why did I get the errors?</p>\n"}, {"tags": ["c++", "linux", "opencv", "video"], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 2165675, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/8mhwy.jpg?s=128&g=1", "display_name": "Prasad Revanaki", "link": "https://stackoverflow.com/users/2165675/prasad-revanaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1458137090, "last_edit_date": 1458137090, "creation_date": 1458134438, "answer_id": 36036919, "question_id": 33530168, "link": "https://stackoverflow.com/questions/33530168/opencv-c-cant-get-xvid-video-file-framerate/36036919#36036919", "title": "OpenCV (C++) Can&#39;t get XVID video file framerate", "body": "<p>Probably XVID is missing on your linux machine which is required by ffmpeg. Try installing XVID as below, it may help you.</p>\n\n<pre><code>cd /opt\n\nwget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz\n\ntar xzvf xvidcore-1.3.2.tar.gz\n\ncd xvidcore/build/generic\n\n./configure --prefix=\"$HOME/ffmpeg_build\"\n\nmake\n\nmake install\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 4174961, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a72962e28cd994537fa0b76df71e315?s=128&d=identicon&r=PG&f=1", "display_name": "javierbg", "link": "https://stackoverflow.com/users/4174961/javierbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458137090, "creation_date": 1446664449, "last_edit_date": 1446664759, "question_id": 33530168, "link": "https://stackoverflow.com/questions/33530168/opencv-c-cant-get-xvid-video-file-framerate", "title": "OpenCV (C++) Can&#39;t get XVID video file framerate", "body": "<p>I'm trying to get VideoCapture working with OpenCV. The video I'm trying to load is in XVID format (checked it with <code>VideoCapture::get(CV_CAP_PROP_FOURCC)</code>). It works fine, but whenever I try to get the video framerate (<code>VideoCapture::get(CV_CAP_PROP_FPS)</code>) I get <code>-nan</code>.</p>\n\n<p>I've used the same video and the same code on another computer (at uni, they have a custom Debian installation) and I can confirm that the framerate info is there (it works fine there). I read somewhere that Ubuntu recently removed ffmpeg from their repositories (I use Linux Mint 17.2), so I installed the <code>ffmpeg</code> package from the <code>ppa:kirillshkrogalev/ffmpeg-next</code> repositories. After that I recompiled OpenCV and installed again, without any change.</p>\n\n<p>I'm using OpenCV 2.4.11 with C++ under Linux Mint 17.2.</p>\n"}, {"tags": ["c++", "dictionary", "function-pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446664502, "post_id": 33530148, "comment_id": 54841819, "body": "Use std::function instead and consider lambdas or std::bind"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446664655, "post_id": 33530148, "comment_id": 54841903, "body": "A member function pointer has a different type than a pointer to a free function."}], "owner": {"reputation": 117, "user_id": 2022185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f48ebc635a501ef162390e2750f4c075?s=128&d=identicon&r=PG", "display_name": "user2022185", "link": "https://stackoverflow.com/users/2022185/user2022185"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1446664827, "answer_count": 0, "score": 0, "last_activity_date": 1446671545, "creation_date": 1446664378, "last_edit_date": 1446671545, "question_id": 33530148, "link": "https://stackoverflow.com/questions/33530148/how-to-create-a-map-with-a-function-pointer-as-a-value-and-insert-into-that-map", "closed_reason": "Duplicate", "title": "How to create a map with a function pointer as a value, and insert into that map?", "body": "<p>My goal: I want to create a map with a string as the key and a function pointer as the value. I then want to insert some key value pairs into the map.</p>\n\n<p>Here's what I have so far. In my header file I have this snippet:</p>\n\n<pre><code>std::map&lt;std::string, std::function&lt;std::string()&gt;&gt; cMap;   \n</code></pre>\n\n<p>In my cpp file is:</p>\n\n<pre><code>void Manager::initialize() {\n    commandMap[\"GO\"] = &amp;Manager::testfunc;\n}\nvoid Manager::testfunc(std::string testvalue) {};\n</code></pre>\n\n<p>I want the &amp;Manager::testfunc to be added to the map and point to the function in my class, but I don't understand any of this very well, and it's not working. </p>\n\n<p>I'm getting the error \"Failed to specialize function template 'unknown-type std::invoke(_Callable &amp;&amp;,_Types &amp;&amp;...)'\". What does that mean?</p>\n\n<p>The 'duplicate' topic uses std::bind, but I believe that's not what I need. How do I add to the value without that? Please, I really don't think the linked topic is for the same problem. I really would appreciate if someone could help me, I've been trying and searching and googling all day and I just can't figure it out by myself.</p>\n"}, {"tags": ["c++", "linux", "linker", "shared-libraries"], "owner": {"reputation": 21, "user_id": 5525407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9723451f0d3d4d511937a5b79bd16af2?s=128&d=identicon&r=PG&f=1", "display_name": "globbolg", "link": "https://stackoverflow.com/users/5525407/globbolg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "closed_date": 1446664855, "answer_count": 0, "score": 1, "last_activity_date": 1446664326, "creation_date": 1446664326, "question_id": 33530136, "link": "https://stackoverflow.com/questions/33530136/how-to-expose-entrypoints-from-a-library-a-which-is-linked-into-a-shared-libr", "closed_reason": "Duplicate", "title": "How to expose entrypoints from a library (.a) which is linked into a shared library (.so)", "body": "<p>Is there a way in Linux to expose entrypoints from a library (.a) which is linked into a shared library.</p>\n\n<p>Using C/C++ in Windows I can achieve this the following way, but I fail to find a corresponding solution for Linux.</p>\n\n<p><strong>Windows:</strong></p>\n\n<p>Library \"component.lib\" has entry point like \"Object* CreateInstance()\", part of \"sharedmain.cpp\".</p>\n\n<p>When creating the DLL I link with the \"component.lib\" and set \"Module Definition File\" pointing to a file with the content.</p>\n\n<pre><code>EXPORTS\n    CreateInstance\n</code></pre>\n\n<p>This effectively results in a DLL with the desired external entrypoint.</p>\n\n<p><strong>Linux:</strong> </p>\n\n<p>When building same code for Linux I have not found a way of achieving the same thing.</p>\n\n<p>I've tried the option of building a library from \"sharedmain.cpp\" into library \"libcomponent.a\", then linking it into\na shared object but this results in a shared object that does not expose the entrypoint from the library.</p>\n\n<p>As a workaround I instead explicitly build and link the \"sharedmain.cpp\" into every shared object. But this is not optimal since I'd\nlike to hide this implementation an a library which is used by multiple shared objects.</p>\n\n<p>I've played with the GCC visibility attributes (<a href=\"http://www.ibm.com/developerworks/aix/library/au-aix-symbol-visibility/\" rel=\"nofollow\">http://www.ibm.com/developerworks/aix/library/au-aix-symbol-visibility/</a>) but\nthis does not make any difference. I currently use \"  extern \"C\" <strong>attribute</strong> ((visibility (\"default\")))  \" when\nspecifying the entrypoint.</p>\n\n<p>Any ideas? Is it at all possible?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2012"], "comments": [{"owner": {"reputation": 3784, "user_id": 2593738, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EO83B.png?s=128&g=1", "display_name": "developerbmw", "link": "https://stackoverflow.com/users/2593738/developerbmw"}, "edited": false, "score": 1, "creation_date": 1446665361, "post_id": 33530112, "comment_id": 54842274, "body": "Title of question is misleading. PDB != DLL"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1446666598, "post_id": 33530112, "comment_id": 54842974, "body": "The missing files are debug symbols, not the DLLs themselves. You are likely not going to debug the Intel files anyway."}, {"owner": {"reputation": 171, "user_id": 5067835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11287daae7bde8f53445471d428122c6?s=128&d=identicon&r=PG&f=1", "display_name": "Enis", "link": "https://stackoverflow.com/users/5067835/enis"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446700634, "post_id": 33530112, "comment_id": 54855330, "body": "But how can I fix this error? It exits my program regardless of whether or not I use it. @BoPersson"}, {"owner": {"reputation": 171, "user_id": 5067835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11287daae7bde8f53445471d428122c6?s=128&d=identicon&r=PG&f=1", "display_name": "Enis", "link": "https://stackoverflow.com/users/5067835/enis"}, "reply_to_user": {"reputation": 3784, "user_id": 2593738, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EO83B.png?s=128&g=1", "display_name": "developerbmw", "link": "https://stackoverflow.com/users/2593738/developerbmw"}, "edited": false, "score": 0, "creation_date": 1446700667, "post_id": 33530112, "comment_id": 54855340, "body": "@developerbmw What is the difference? I&#39;m asking for future reference."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1446709845, "post_id": 33530112, "comment_id": 54858983, "body": "@Enis - The message <i>&quot;.. has exited with code 0&quot;</i> means that your program has run to completion and ended without an error code. That&#39;s good! If you set a breakpoint in the main function, I&#39;m sure you can single step the two lines and see the result. Also, a .dll file contains code that your program can call, while a .pdb file contains info for the debugger so it can show function names and variables when you debug the .dll. This is important for your own code, but you are likely not going to debug Intel&#39;s code, so that some of them are missing is not a big deal."}, {"owner": {"reputation": 3784, "user_id": 2593738, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EO83B.png?s=128&g=1", "display_name": "developerbmw", "link": "https://stackoverflow.com/users/2593738/developerbmw"}, "edited": false, "score": 1, "creation_date": 1446714270, "post_id": 33530112, "comment_id": 54861302, "body": "@Enis the DLL is the actual library. The PDB (Program Database) is just data used for debugging. You won&#39;t need this as you shouldn&#39;t need to debug the library."}], "owner": {"reputation": 171, "user_id": 5067835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11287daae7bde8f53445471d428122c6?s=128&d=identicon&r=PG&f=1", "display_name": "Enis", "link": "https://stackoverflow.com/users/5067835/enis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446664243, "creation_date": 1446664243, "question_id": 33530112, "link": "https://stackoverflow.com/questions/33530112/visual-studio-express-cannot-find-intel-dll-files-but-theyre-in-syswow64", "title": "Visual Studio Express cannot find Intel.dll files but they&#39;re in SysWOW64?", "body": "<p>I'm compiling a small piece of code for the OpenCV library. I did the tutorial yesterday on <a href=\"http://docs.opencv.org/3.0-last-rst/doc/tutorials/introduction/windows_install/windows_install.html\" rel=\"nofollow noreferrer\">http://docs.opencv.org/3.0-last-rst/doc/tutorials/introduction/windows_install/windows_install.html</a> along with the Visual Studio stuff and got the tutorial code working, so it cannot be anything related to the library itself.</p>\n\n<p>So I modified the code yesterday a little bit to just do this:</p>\n\n<pre><code>#include &lt;opencv2/core.hpp&gt;\n#include &lt;opencv2/imgcodecs.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main( int argc, char** argv )\n{\n    Mat A = Mat::eye(4, 4, CV_64F);\n    cout &lt;&lt; \"A = \" &lt;&lt; A &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It compiles correctly but when it debugs, the system says it cannot find and load various PDB files that are IN the folder SysWOW64.</p>\n\n<p>I've attached an image of the errors below. Note that all of those files are in the folder - I did a quick search to check.</p>\n\n<p>Can anyone tell me what to do?<a href=\"https://i.stack.imgur.com/pCqK0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pCqK0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446664501, "post_id": 33530060, "comment_id": 54841817, "body": "what C++ compiler do you have, and what path to it?"}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446664558, "post_id": 33530060, "comment_id": 54841851, "body": "MinGW, with paths C:/MinGW/bin/g++.exe and C:/MinGW/bin/gcc.exe"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446664708, "post_id": 33530060, "comment_id": 54841926, "body": "have you Visual Studio? you need <code>gnu make</code> or <code>nmake</code> from VS to build stuff"}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446664848, "post_id": 33530060, "comment_id": 54841990, "body": "Let me install VS... :)"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 1, "creation_date": 1446667768, "post_id": 33530060, "comment_id": 54843637, "body": "Hm, VS for nmake not needed (I mean VS too big to install it just to use nmake), you can install gnu make for win32: <a href=\"http://gnuwin32.sourceforge.net/packages/make.htm\" rel=\"nofollow noreferrer\">gnuwin32.sourceforge.net/packages/make.htm</a> it is much better 3MB vs N GB of VS"}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446668263, "post_id": 33530060, "comment_id": 54843932, "body": "Still not working @user1034749, attaching a screenshot to my question"}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446668482, "post_id": 33530060, "comment_id": 54844047, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94245/discussion-between-mrd-and-user1034749\">continue this discussion in chat</a>."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 2, "creation_date": 1446668506, "post_id": 33530060, "comment_id": 54844060, "body": "First you need nmake or make in your PATH (may require reboot of windows), second cmake cache results, so after cmake failed and you something change you need remove CMakeCache.txt from build directory."}, {"owner": {"reputation": 5375, "user_id": 1090455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d9a0265d342807a582efe8bf053917f6?s=128&d=identicon&r=PG", "display_name": "K3---rnc", "link": "https://stackoverflow.com/users/1090455/k3-rnc"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1508487433, "post_id": 33530060, "comment_id": 80637430, "body": "@fghj <code>cmake</code>, <code>clang-cl</code>, <code>make</code> all in path; damn shit from microsoft just won&#39;t ever work!"}], "owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2961, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1446668304, "creation_date": 1446664078, "last_edit_date": 1446668304, "question_id": 33530060, "link": "https://stackoverflow.com/questions/33530060/cmake-error-compiler-not-working", "title": "CMake Error Compiler Not Working", "body": "<p>I've been tryin to build the vxl libary with CMaker for several hours, but have been encountering error after error...</p>\n\n<p>The last one... (I've checked and I don't have sh.exe on my path):</p>\n\n<pre><code>The C compiler identification is GNU 4.8.1\nThe CXX compiler identification is GNU 4.8.1\nCheck for working C compiler: C:/MinGW/bin/gcc.exe\nCMake Error: Generator: execution of make failed. Make command was: \"nmake\" \"/NOLOGO\" \"cmTC_ff6a8\\fast\"\nCheck for working C compiler: C:/MinGW/bin/gcc.exe -- broken\nCMake Error at C:/Program Files (x86)/CMake/share/cmake-3.4/Modules/CMakeTestCCompiler.cmake:61 (message):\n  The C compiler \"C:/MinGW/bin/gcc.exe\" is not able to compile a simple test\n  program.\n\n  It fails with the following output:\n\n   Change Dir: C:/vxl-root/obj-e/CMakeFiles/CMakeTmp\n\n\n\n  Run Build Command:\"nmake\" \"/NOLOGO\" \"cmTC_ff6a8\\fast\"\n\n  The system cannot find the file specified\n\n  Generator: execution of make failed.  Make command was: \"nmake\" \"/NOLOGO\"\n  \"cmTC_ff6a8\\fast\"\n\n\n\n\n\n  CMake will not be able to correctly generate this project.\nCall Stack (most recent call first):\n  CMakeLists.txt:21 (PROJECT)\n\n\nConfiguring incomplete, errors occurred!\nSee also \"C:/vxl-root/obj-e/CMakeFiles/CMakeOutput.log\".\nSee also \"C:/vxl-root/obj-e/CMakeFiles/CMakeError.log\".\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MHfVv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MHfVv.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "opencv", "generic-programming"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1446664886, "post_id": 33529941, "comment_id": 54842010, "body": "No, but you can load the image with <code>IMREAD_COLOR</code>, and it will always be CV_8UC3. Or you can just switch over the image <code>type</code>"}, {"owner": {"reputation": 581, "user_id": 923945, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f6de5030680ab4a2ff67375bf9ae2e12?s=128&d=identicon&r=PG", "display_name": "ShaulF", "link": "https://stackoverflow.com/users/923945/shaulf"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446668424, "post_id": 33529941, "comment_id": 54844011, "body": "It will be CV_8UC3, even if the picture is 255 gray scale?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446668494, "post_id": 33529941, "comment_id": 54844053, "body": "Yes, the 3 channels will be equal."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446668546, "post_id": 33529941, "comment_id": 54844079, "body": "You should probably better explain what you want to do inside <code>FindFeature</code>. because there are a few solution to this."}, {"owner": {"reputation": 581, "user_id": 923945, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f6de5030680ab4a2ff67375bf9ae2e12?s=128&d=identicon&r=PG", "display_name": "ShaulF", "link": "https://stackoverflow.com/users/923945/shaulf"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446675000, "post_id": 33529941, "comment_id": 54847642, "body": "At the end, I need to process the image, and its all boil down to iterate the pixels. To do it in an efficient manner, I have to work with <code>cv:Mat_&lt;Pixel&gt;</code> so I have the actual type. this is what I get inside these handlers."}, {"owner": {"reputation": 581, "user_id": 923945, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f6de5030680ab4a2ff67375bf9ae2e12?s=128&d=identicon&r=PG", "display_name": "ShaulF", "link": "https://stackoverflow.com/users/923945/shaulf"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446677112, "post_id": 33529941, "comment_id": 54848623, "body": "I edited the question to make it clear, the difference between the image types, and their handlers."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1446719782, "post_id": 33529941, "comment_id": 54864760, "body": "Have a look <a href=\"http://stackoverflow.com/a/33154287/5008845\">here</a>"}], "owner": {"reputation": 581, "user_id": 923945, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f6de5030680ab4a2ff67375bf9ae2e12?s=128&d=identicon&r=PG", "display_name": "ShaulF", "link": "https://stackoverflow.com/users/923945/shaulf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1446676912, "creation_date": 1446663593, "last_edit_date": 1446676912, "question_id": 33529941, "link": "https://stackoverflow.com/questions/33529941/open-cv-is-there-is-a-way-dispatch-a-method-by-the-underline-pixel-type", "title": "Open CV - Is there is a way dispatch a method, by the underline pixel type?", "body": "<p>I open an image using imread(), getting a cv::Mat instance.<br>\nI wish to apply a function on this matrix, by its underline pixel type.<br>\nI wish to know if there is a Dispatch() function in openCV?<br>\nHere is a code sample.<br></p>\n\n<pre><code>FindFeature(cv::Mat_&lt;Vec3b&gt;&amp; image) \n{\n    image.forEach&lt;Vec3b&gt;([](Vec3b &amp;p, const int * position) -&gt; void \n    { p[0] /= 2; p[1] /= 2; p[2] /= 2;});\n}\n\nFindFeature(cv::Mat_&lt;uchar&gt;&amp; image) \n{\n    image.forEach&lt;uchar&gt;([](uchar &amp;p, const int * position) -&gt; void \n    { p /= 2; });\n}\n\ntemplate&lt;typename Pixel&gt;\nvoid FindFeature(cv::Mat_&lt;Pixel&gt;&amp; image)\n{\n     // we don't know how to work on any other image type\n     throw std::runtime_exception(\"unsupported image type\");\n}\n\nvoid main()\n{\n    int flags = CV_LOAD_IMAGE_COLOR | CV_LOAD_IMAGE_ANYDEPTH\n    cv::Mat image = imread(\"c:\\image.jpg\", flags);\n    Dispatch(FindFeature, image);\n}\n</code></pre>\n\n<p>Here you can see I handle differently grayscale and RGB images.</p>\n"}, {"tags": ["c++", "visual-studio", "mfc", "window", "preview"], "comments": [{"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "edited": false, "score": 1, "creation_date": 1446665544, "post_id": 33529856, "comment_id": 54842367, "body": "There is nice MSDN article about that <a href=\"https://msdn.microsoft.com/en-us/library/edak6tf8.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/edak6tf8.aspx</a>"}, {"owner": {"reputation": 11, "user_id": 5059516, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/45f6f94c8901727d1c3a10341519e53a?s=128&d=identicon&r=PG&f=1", "display_name": "alabama1", "link": "https://stackoverflow.com/users/5059516/alabama1"}, "reply_to_user": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "edited": false, "score": 0, "creation_date": 1446746343, "post_id": 33529856, "comment_id": 54882671, "body": "That article is related to PrintPreview.  I am asking about a preview that would make ( a hint of ) contents  visible in explorer ( without launching the application) . If you still feel that article is helpful , please point to specific part(s) of it."}], "answers": [{"tags": [], "owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": true, "score": 2, "last_activity_date": 1446732342, "creation_date": 1446732342, "answer_id": 33546636, "question_id": 33529856, "link": "https://stackoverflow.com/questions/33529856/how-to-implement-previews-on-windows-using-visual-studio-and-mfc-c/33546636#33546636", "title": "How to implement previews on windows using visual studio and MFC C++", "body": "<blockquote>\n  <p>By preview I mean the preview that we get in explorer (e.g. for word\n  or bmp files) Which interface needs to be implemented?</p>\n</blockquote>\n\n<p>From your description, it sounds like you are asking for a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/cc144067(v=vs.85).aspx\" rel=\"nofollow\">Shell Extension</a>.  In particular, you should investigate the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/cc144118(v=vs.85).aspx\" rel=\"nofollow\">Thumbnail Provider</a>.  It exposes the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb774614(v=vs.85).aspx\" rel=\"nofollow\">IThumnailProvider</a> interface to make it easy to implement a thumbnail handler.</p>\n\n<p>Take a look at <a href=\"https://code.msdn.microsoft.com/windowsapps/CppShellExtThumbnailHandler-32399b35\" rel=\"nofollow\">C++ Windows Shell thumbnail handler (CppShellExtThumbnailHandler)</a> for some sample code.</p>\n"}], "owner": {"reputation": 11, "user_id": 5059516, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/45f6f94c8901727d1c3a10341519e53a?s=128&d=identicon&r=PG&f=1", "display_name": "alabama1", "link": "https://stackoverflow.com/users/5059516/alabama1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 33546636, "answer_count": 1, "score": 0, "last_activity_date": 1446732342, "creation_date": 1446663289, "question_id": 33529856, "link": "https://stackoverflow.com/questions/33529856/how-to-implement-previews-on-windows-using-visual-studio-and-mfc-c", "title": "How to implement previews on windows using visual studio and MFC C++", "body": "<p>We have our proprietary file format. Visual studio MFC desktop application (native C++ mostly) renders it on screen. \nHow to implement preview for the file. By preview I mean the preview that we get in explorer (e.g. for word or bmp files)\nWhich interface needs to be implemented?\nAny input on where to get started will be useful.</p>\n"}, {"tags": ["c++", "templates", "crash", "msvc12", "cl"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446662818, "post_id": 33529570, "comment_id": 54840809, "body": "Did you define the function templates in a header?"}], "answers": [{"tags": [], "owner": {"reputation": 651, "user_id": 2246371, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/74765870b8af99fa38c0e5e024439a2d?s=128&d=identicon&r=PG&f=1", "display_name": "antipattern", "link": "https://stackoverflow.com/users/2246371/antipattern"}, "is_accepted": true, "score": 2, "last_activity_date": 1446663688, "last_edit_date": 1446663688, "creation_date": 1446663228, "answer_id": 33529836, "question_id": 33529570, "link": "https://stackoverflow.com/questions/33529570/error-msb6006-cl-exe-exited-with-code-1-after-adding-template-function-or-cla/33529836#33529836", "title": "error MSB6006: &quot;CL.exe&quot; exited with code 1 after adding template function or class", "body": "<p>First you need to compile all .cpp files that include the templated functions seperately (select one in the project explorer, right click and \"compile\").</p>\n\n<p>For me, the first hint was that some of them compiled, while for others <code>cl.exe</code> crashed. </p>\n\n<p>The next step was to create a <code>bogus.cpp</code> file with just one function, where one by one I added calls to every templated function I created. After adding one: recompile. This went well until I got to the defective one, now the <code>bogus.cpp</code>also crashed <code>cl.exe</code>. Jackpot.</p>\n\n<p>The last job was fixing the syntax error, which is annoying without error messages, but once this is done, <code>bogus.cpp</code> will compile again. Return to adding more function calls there until you have everything covered.</p>\n\n<p>Hope I could help.</p>\n"}, {"comments": [{"owner": {"reputation": 651, "user_id": 2246371, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/74765870b8af99fa38c0e5e024439a2d?s=128&d=identicon&r=PG&f=1", "display_name": "antipattern", "link": "https://stackoverflow.com/users/2246371/antipattern"}, "edited": false, "score": 0, "creation_date": 1562840975, "post_id": 56979917, "comment_id": 100508775, "body": "IIRC I was restarting my machine in the midst of diagnosing the problem, thus it is likely that I did not have multiple instances of VS open at that time. However, given the generic nature of the error message, I would not be surprised if there were several states of error resulting in this output."}], "tags": [], "owner": {"reputation": 1036, "user_id": 1525147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5cfcd48923a673752ec23d1155cfc198?s=128&d=identicon&r=PG", "display_name": "Leonardo Lopez", "link": "https://stackoverflow.com/users/1525147/leonardo-lopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1562802233, "creation_date": 1562802233, "answer_id": 56979917, "question_id": 33529570, "link": "https://stackoverflow.com/questions/33529570/error-msb6006-cl-exe-exited-with-code-1-after-adding-template-function-or-cla/56979917#56979917", "title": "error MSB6006: &quot;CL.exe&quot; exited with code 1 after adding template function or class", "body": "<p>What fixed it for me was that I had two instances of Visual Studio running, and while one of them was in the middle of a debugging session, I tried to compile the other instance. Stopping the debugging session fixed this error for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12479394, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LgS36b11xWM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rckLVfecQ3k8T4Qt2WSybGG45d6Vw/photo.jpg?sz=128", "display_name": "Chevron", "link": "https://stackoverflow.com/users/12479394/chevron"}, "is_accepted": false, "score": 0, "last_activity_date": 1575457804, "creation_date": 1575457804, "answer_id": 59174625, "question_id": 33529570, "link": "https://stackoverflow.com/questions/33529570/error-msb6006-cl-exe-exited-with-code-1-after-adding-template-function-or-cla/59174625#59174625", "title": "error MSB6006: &quot;CL.exe&quot; exited with code 1 after adding template function or class", "body": "<p>Encountered the same issue with simple form and VS2019. This does not seem to be related necessarily to a code issue, but potentially with VS itself.</p>\n\n<ol>\n<li>Took fresh checkout of code, built OK.</li>\n<li>Added new tab to existing form, CL.exe exited with code 1 error.</li>\n<li>Reverted code and added changes until error presented then could not get error to clear, event after clearing build output directories.</li>\n<li>Completely reverted build - CL.exe exited with code 1 error.</li>\n<li>Performed update of VS to 16.4.0 and restart PC - project builds OK.</li>\n</ol>\n"}], "owner": {"reputation": 651, "user_id": 2246371, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/74765870b8af99fa38c0e5e024439a2d?s=128&d=identicon&r=PG&f=1", "display_name": "antipattern", "link": "https://stackoverflow.com/users/2246371/antipattern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4048, "favorite_count": 0, "accepted_answer_id": 33529836, "answer_count": 3, "score": 0, "last_activity_date": 1575457804, "creation_date": 1446662439, "last_edit_date": 1446663555, "question_id": 33529570, "link": "https://stackoverflow.com/questions/33529570/error-msb6006-cl-exe-exited-with-code-1-after-adding-template-function-or-cla", "title": "error MSB6006: &quot;CL.exe&quot; exited with code 1 after adding template function or class", "body": "<p>Asking this question preemtively because there is not much to be found about this error code. It is rather trivial to solve, but cost me a lot of time to diagnose because no proper error message is given.</p>\n\n<p>So what happened? </p>\n\n<ul>\n<li>I added templated functions to my project</li>\n<li>Now when the project compiles, A message pops up saying that <code>CL.exe</code> had a problem and needs to be closed</li>\n<li>Visual Studio aborting the compilation with <code>error MSB6006: \"CL.exe\" exited with code 1</code></li>\n</ul>\n\n<p>The problem were syntax errors in my template functions. Who could have guessed that. </p>\n\n<p>However, it was hard to find out, because these did not get reported. See my answer for how to determine which functions are defective.</p>\n\n<p>The templated functions were in a .cpp included in the header, however, defining them completely in the header did not make any difference. </p>\n\n<pre><code>// foo.h\n\ntemplate &lt;typename T&gt;\nvoid foo();\n\n...\n\n#include \"foo.cpp\"\n\n\n\n// foo.cpp\n\ntemplate &lt;typename T&gt;\nvoid foo() \n{\n...\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "pointers", "constants"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1446662498, "post_id": 33529539, "comment_id": 54840627, "body": "Don&#39;t you <i>assign</i> the pointer returned by the <code>new</code> call to <code>p</code>? So, clearly you are changing the address it points to. I don&#39;t understand what you mean by the \u201cprohibits the passing of a const pointer into a function\u201d thing."}, {"owner": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1446664414, "post_id": 33529539, "comment_id": 54841777, "body": "Right. But the first value is undefined. So it&#39;s as if the pointer doesn&#39;t have a value that counts. The first value that will count is the one to be given during assignment. So what I was asking is, why should it matter if the ONE assignment is done during declaration or at a later line? There&#39;s only going to be ONE official assignment anyway."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446673787, "post_id": 33529539, "comment_id": 54846954, "body": "@dspfnder C++ doesn&#39;t have a concept of whether default-initialized values &quot;count&quot; or are valid. This is why Clang prohibits the creation of <code>const</code> values without explicit initialization."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1446676730, "post_id": 33529539, "comment_id": 54848471, "body": "@dspfnder: <i>&quot;why should it matter if the ONE assignment is done during declaration or at a later line?&quot;</i> Because that&#39;s not true. The &quot;assignment during declaration&quot; is not an assignment. It is an initialisation."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1446678657, "post_id": 33529539, "comment_id": 54849202, "body": "@dspfnder Do you have a Java background by chance? A <code>const</code> pointer in C++ is not equivalent to a <code>final</code> reference in Java."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 9, "last_activity_date": 1446663272, "last_edit_date": 1446663272, "creation_date": 1446662609, "answer_id": 33529626, "question_id": 33529539, "link": "https://stackoverflow.com/questions/33529539/why-cant-a-const-pointer-be-set-afterwards/33529626#33529626", "title": "Why can&#39;t a const pointer be set afterwards?", "body": "<p><strong>This is the entire purpose of <code>const</code>.</strong></p>\n\n<p><code>const</code> stands for \"constant\", and means the object cannot be assigned to.</p>\n\n<p>If you want the pointer to be a variable, don't make it <code>const</code>.</p>\n\n<p>I suspect you were expecting your assignment to be allowed because it was the first ever assignment to that object. You were wrong! This is the purpose of <em>initialisation</em>, which you are not presently using.</p>\n\n<p>I'm guessing you meant to write:</p>\n\n<pre><code>int* const p = new int[10];\n</code></pre>\n\n<hr>\n\n<p>But I worry that you have more fundamental misconceptions here. For example:</p>\n\n<blockquote>\n  <p>It's not as if allocating memory will change the starting address</p>\n</blockquote>\n\n<p>Yes, it absolutely, completely will.</p>\n\n<p>When your <code>p</code> comes into existence, it has an unspecified value. Its value is not a \"starting address\" that you can use.</p>\n\n<p>Then you assign to it (though you ought to have initialised instead). It takes on the value equals to the pointer returned by <code>new</code>. That pointer has no relationship to anything previous in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1446662824, "post_id": 33529654, "comment_id": 54840813, "body": "&quot;it stores some address&quot; is not really an accurate way to describe an uninitialized pointer.  It&#39;s illegal to read from an uninitialized value, and if you do, two reads of the same variable might not give back the same address."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1446662979, "post_id": 33529654, "comment_id": 54840903, "body": "@BenVoigt is this better?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1446783080, "post_id": 33529654, "comment_id": 54897787, "body": "Actually the line <code>int* const p;</code> won&#39;t even compile, since you cannot declare a <code>const</code> and leave it un-initialized."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1446662954, "last_edit_date": 1446662954, "creation_date": 1446662709, "answer_id": 33529654, "question_id": 33529539, "link": "https://stackoverflow.com/questions/33529539/why-cant-a-const-pointer-be-set-afterwards/33529654#33529654", "title": "Why can&#39;t a const pointer be set afterwards?", "body": "<p>Allocating memory does change the address.  For instance if we have</p>\n\n<pre><code>int * foo;\nfoo = new int[bar];\n</code></pre>\n\n<p><code>foo</code> is uninitialized and has a garbage value.  Then <code>foo = new int[bar];</code> assigns to <code>foo</code> a new address that is the start of a block of <code>bar</code> <code>int</code>s.</p>\n\n<p>Now when you have </p>\n\n<pre><code>int* const p;\n</code></pre>\n\n<p>The pointer is <code>const</code> so we cannot change it after it is initialized.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446662712, "creation_date": 1446662712, "answer_id": 33529655, "question_id": 33529539, "link": "https://stackoverflow.com/questions/33529539/why-cant-a-const-pointer-be-set-afterwards/33529655#33529655", "title": "Why can&#39;t a const pointer be set afterwards?", "body": "<pre><code>int* const p;\n</code></pre>\n\n<p>declares <code>p</code> to be a pointer which cannot be changed, i.e. you cannot change where it points to once it is initialized. However, you can change the values it points to since the object type it points to is <code>int</code>.</p>\n\n<pre><code>int* const p = new int [10];\np = new int[20]; // Not OK\np[0] = 100;      // OK\n</code></pre>\n\n<p>Contrast that with</p>\n\n<pre><code>int const* p = new int [10];\np = new int[20]; // OK. You can change where the pointer points to.\np[0] = 100;      // Not OK. You cannot change the value of what p points to.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 1, "creation_date": 1446663619, "post_id": 33529898, "comment_id": 54841318, "body": "I am aware of the difference between a const pointer and a pointer to a const. My question was specifically about the first case. Since its initial value is basically a non-value, why should you not be allowed to assign it once to the real value?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 0, "creation_date": 1446663673, "post_id": 33529898, "comment_id": 54841342, "body": "As stated in the response several times, you cannot modify it. Because of that, you must assign a value during the declaration."}, {"owner": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 0, "creation_date": 1446663875, "post_id": 33529898, "comment_id": 54841463, "body": "Just clarifying some confusion in your response. Thanks."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 0, "creation_date": 1446663961, "post_id": 33529898, "comment_id": 54841509, "body": "I&#39;d be glad, but please let me know what&#39;s unclear. No problem to clarify it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "edited": false, "score": 1, "creation_date": 1446676865, "post_id": 33529898, "comment_id": 54848530, "body": "@dspfnder: Its initial value is not &quot;basically a non-value&quot;. I don&#39;t know where you&#39;ve heard that. It is an unspecified value."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1446665417, "last_edit_date": 1446665417, "creation_date": 1446663422, "answer_id": 33529898, "question_id": 33529539, "link": "https://stackoverflow.com/questions/33529539/why-cant-a-const-pointer-be-set-afterwards/33529898#33529898", "title": "Why can&#39;t a const pointer be set afterwards?", "body": "<h2>Short version</h2>\n\n<p>The way you are defining the pointer means that it is <code>const</code> for itself, so <strong>you cannot reassign it and you have actually to assign it along with its declaration</strong>.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow\">Here</a> more details about the <code>const</code> keyword, even though it is not specifically oriented to the use with the pointers.</p>\n\n<p>Please even note that the following code should not compile for you are not assigning a value to the const pointer <em>p</em>:</p>\n\n<pre><code>int main() {\n    int * const p;\n}\n</code></pre>\n\n<p>The same is true for the following one:</p>\n\n<pre><code>int main() {\n    int const i;\n}\n</code></pre>\n\n<p>It doesn't depend on the fact that you are dealing with a pointer, instead it's how the <code>const</code> keyword actually works and should/can be used.</p>\n\n<hr>\n\n<h2>More details about const and pointers</h2>\n\n<p>Anyway, I didn't see your whole code and it looks to me that your intent is not to have a const pointer, instead in your case it could help having a pointer to const (but it mainly depends on your problem, so I can be wrong).\nHow to define them depends on your purposes, of course.</p>\n\n<p>You can either define it as a const pointer or a pointer to a const value, the means of which are slightly different (of course, you can also define a pointer as a const pointer to a const value, that is an easily deducible consequence of the others above mentioned).</p>\n\n<p>The first one indicates that the pointer itself cannot be reassigned, thus you have to assign it during the declaration and that's all.\nThe second one instead define a pointer that is reassignable, but you can assign it only addresses of const variables of the given type (or better, even if they are defined as non const, they will be treated as const when accessed through that pointer, with all the limitations of the case).</p>\n\n<p>It follows a brief example of the types of const pointer and pointer to const above mentioned:</p>\n\n<pre><code>int main() {\n    int i;\n    // pointer to const int\n    int const *icp;\n    // const pointer to int\n    int * const cip = &amp;i;\n    // const pointer to const int\n    int const * const cicp = &amp;i;\n    // this one can be reassigned, of course\n    icp = &amp;i;\n}\n</code></pre>\n\n<p>Note also that <code>int const</code> and <code>const int</code> are interchangeable, so the declarations below are equivalent:</p>\n\n<pre><code>int const *p;\nconst int *p;\n</code></pre>\n\n<p>Obviously, this is not an exhaustive list. I've only tried to give you more details about how the <code>const</code> keyword can be used while defining a pointer and which are the intended means of those declarations.</p>\n"}], "owner": {"reputation": 1049, "user_id": 4411577, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b15a7c7c6f85f173206d822a1dd3f626?s=128&d=identicon&r=PG&f=1", "display_name": "dspfnder", "link": "https://stackoverflow.com/users/4411577/dspfnder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 1, "answer_count": 4, "score": -7, "last_activity_date": 1446667505, "creation_date": 1446662355, "last_edit_date": 1446667505, "question_id": 33529539, "link": "https://stackoverflow.com/questions/33529539/why-cant-a-const-pointer-be-set-afterwards", "title": "Why can&#39;t a const pointer be set afterwards?", "body": "<p>I know this is probably a trivial question. What is the logic behind not being able to set a const pointer after its declaration? It's not as if allocating memory will change the starting address which is what the const refers to. So why can't this...</p>\n\n<pre><code>int* const p;\np = new int [10];\n</code></pre>\n\n<p>... be done... which also prohibits the passing of a const pointer into a function?</p>\n"}, {"tags": ["c++", "inheritance", "multiple-inheritance"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1446663146, "post_id": 33529535, "comment_id": 54841019, "body": "Can you express the idea in pseudo-code? I do not understand what &#39;group of methods&#39; is."}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1446663271, "post_id": 33529535, "comment_id": 54841103, "body": "I think you should add more information."}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1446663392, "post_id": 33529535, "comment_id": 54841183, "body": "Another question: trait1 and trait2 have same function name but different implementations, or different function names?"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446664123, "post_id": 33529535, "comment_id": 54841602, "body": "trait1 and trait2 have same functions name but different implementations"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446664228, "post_id": 33529535, "comment_id": 54841668, "body": "Maybe a good old violation of &#39;is a&#39; (In terms of modelling data a square is no rectangle)"}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446664931, "post_id": 33529535, "comment_id": 54842037, "body": "I updated the post. Ask more questions if necessary."}], "answers": [{"comments": [{"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1446663954, "post_id": 33529959, "comment_id": 54841503, "body": "&quot;trait&quot;s are methods not classes."}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1446664586, "post_id": 33529959, "comment_id": 54841869, "body": "@Lasokoz: OP wrote: &quot;I was going to move all of these traits methods out from the main hierarchy into some separate one. Then derive B, B1 and C1 from appropriate trait.&quot;. He wanted to make trait a class."}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446665027, "post_id": 33529959, "comment_id": 54842086, "body": "@user2198121: I have edited the answer to fix the typo and included class C1"}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1446665822, "post_id": 33529959, "comment_id": 54842523, "body": "I cannot suggest edit: try to indent every code line with four spaces for better readability."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446668633, "post_id": 33529959, "comment_id": 54844130, "body": "@Eugene, Thank you for the solution. How do you think, can I make abstract <code>trait</code> class, then virtually derive it with <code>trait1</code> like this <a href=\"http://pastebin.com/SfHfR8ad\" rel=\"nofollow noreferrer\">pastebin.com/SfHfR8ad</a> to exclude surplus virtual inheritance? Are there any pitfalls?"}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "reply_to_user": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446670256, "post_id": 33529959, "comment_id": 54845078, "body": "@user2198121: No, this way B1 still has 2 instances of trait1. I also think your native language is Russian :)."}, {"owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "edited": false, "score": 0, "creation_date": 1446671072, "post_id": 33529959, "comment_id": 54845520, "body": "@Eugene, I suppose, it is not because my English is auful =)"}], "tags": [], "owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "is_accepted": true, "score": 2, "last_activity_date": 1446664912, "last_edit_date": 1446664912, "creation_date": 1446663677, "answer_id": 33529959, "question_id": 33529535, "link": "https://stackoverflow.com/questions/33529535/derived-classes-derived-traits/33529959#33529959", "title": "Derived classes derived traits", "body": "<p>Your problem may be solved by virtually inheriting from trait1:</p>\n\n<p><code>class trait2 : virtual public trait1{}\nclass B : public A, virtual public trait1{}\nclass B1 : public B, public trait2{}\nclass C1 : public C, public trait2{}</code></p>\n\n<p>However, this design only makes sense if class trait1 is stateless. If not, consider different designs, maybe Bridge pattern.</p>\n"}], "owner": {"reputation": 1352, "user_id": 2198121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa303bed01349a6f8f42a872322c7eb2?s=128&d=identicon&r=PG", "display_name": "NuPagadi", "link": "https://stackoverflow.com/users/2198121/nupagadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 33529959, "answer_count": 1, "score": 0, "last_activity_date": 1446664912, "creation_date": 1446662331, "last_edit_date": 1446664002, "question_id": 33529535, "link": "https://stackoverflow.com/questions/33529535/derived-classes-derived-traits", "title": "Derived classes derived traits", "body": "<p>Here is the diagram:\n<a href=\"https://i.stack.imgur.com/TtUAW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TtUAW.png\" alt=\"class hierarchy\"></a></p>\n\n<p>Class <code>B</code> has some group of methods <code>trait1</code>.\nClass <code>B1</code> and <code>C1</code> has similar group of methods <code>trait2</code>.\n<code>trait2</code> is derived from <code>trait1</code>.</p>\n\n<p><strong>How can I implement this?</strong> I was going to move all of these <code>trait</code>s methods out from the main hierarchy into some separate one. Then derive <code>B</code>, <code>B1</code> and <code>C1</code> from appropriate trait. But then I realized that there would be a problem with inheriting <code>B1</code> from <code>B</code> because <code>B1</code> would have <code>trait1</code> too.</p>\n\n<p>Now I think I can have some field of type, say, <code>TraitBase</code>, and initiate it with appropriate ctor of type either <code>trait1</code> or <code>trait2</code>. But I don't like the idea that I should have a field so my class has some special behaviour. May be there is another solution? Thank you.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I mean class <code>B</code> has some feature, which is derived in <code>B1</code>. <code>C1</code> should have the feature, which class <code>B1</code> has.</p>\n\n<pre><code>class B\n{\n   virtual foo1();\n   virtual foo2();\n\n\n   virtual trait_method1(); //implementation 1\n   virtual trait_method2(); //implementation 1\n};\n\nclass B1 : public B\n{\n   virtual foo1();\n   virtual foo2();\n\n\n   virtual trait_method1(); //implementation 2\n   virtual trait_method2(); //implementation 2\n};\n\nclass C1 : public C\n{\n   virtual bar1();\n   virtual bar2();\n\n\n   trait_method1(); //implementation 2\n   trait_method2(); //implementation 2\n};\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "char"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446662550, "post_id": 33529525, "comment_id": 54840654, "body": "Looks like a bad mixture of zero terminated and  non zero terminated strings"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446662619, "post_id": 33529525, "comment_id": 54840703, "body": "You better decide first whether to program in C or C++."}], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1446662468, "creation_date": 1446662468, "answer_id": 33529576, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array/33529576#33529576", "title": "Copy characters from char array to char array", "body": "<p>You can use strncpy which allows you to specify the number of bytes to copy.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663041, "post_id": 33529584, "comment_id": 54840943, "body": "When i use memcpy like you said the sid inside the called functions gets the value &quot;593378e02614ebf8468cb67ca319beda&#240;&#250;&#217;,&#251;&#217;@ w&#222;UVS&#254;&#255;&#255;&#255;\u201e&#250;&#217;&lt;&quot; So it gets the bytes i want but adding useless stuff.."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663102, "post_id": 33529584, "comment_id": 54840992, "body": "@BillAdonopoulos: because it is not null terminated"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663136, "post_id": 33529584, "comment_id": 54841010, "body": "@BillAdonopoulos What is useless stuff? You said that you need to copy 32 characters. So where are the useless stuff from?"}, {"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663179, "post_id": 33529584, "comment_id": 54841039, "body": "So how can i make it null terminated? If i set sessionID[33] i get null terminated string but it gets 33 characters not 32 that i need and with [32] it&#39;s not null terminated"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663278, "post_id": 33529584, "comment_id": 54841108, "body": "@BillAdonopoulos I think that the problem is not with this copy operation. The problem is how ypu are using the result string further in your code."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663403, "post_id": 33529584, "comment_id": 54841188, "body": "@BillAdonopoulos It is not clear now what you are trying to achieve. Whether you indeed need to copy 32 characters or something else. You could copy 31 characters and set the 32nd character to zero."}, {"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663812, "post_id": 33529584, "comment_id": 54841434, "body": "Thank you very much. Your solution fixed the problem :)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1446663048, "last_edit_date": 1446663048, "creation_date": 1446662512, "answer_id": 33529584, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array/33529584#33529584", "title": "Copy characters from char array to char array", "body": "<p>Use <code>memcpy</code> function instead.</p>\n\n<pre><code>memcpy( sessionID, ticket, sizeof( sessionID )  );\n</code></pre>\n\n<p>Take into account that sessionID won;t contain a string. It will contain \"raw\" characters.</p>\n\n<p>As for function <code>strcpy</code> then it is designed to copy strings that is a sequence of characters termintaed by zero.\nSo in case of your code fragment it will copy as many characters as there are characters in <code>ticket</code> before the character with value '\\0' provided that such a character is present in <code>ticket</code> . </p>\n"}], "owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4221, "favorite_count": 0, "accepted_answer_id": 33529584, "answer_count": 2, "score": 0, "last_activity_date": 1446664644, "creation_date": 1446662294, "last_edit_date": 1446664644, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array", "title": "Copy characters from char array to char array", "body": "<p>I have a char array with the size of 128. I want to copy the first 32 to another char array. This is how i'm trying to do it: </p>\n\n<pre><code>char ticket[128];\ndata.readBytes(ticketLength, (BYTE*)ticket);\nchar sessionID[32];\nstrcpy(sessionID, ticket);\n\nint userID = bdAuthService::checkLogin(sessionID);\n</code></pre>\n\n<p>The contents of \"ticket\" are <code>\"11aa14462ac96a9b389686672b99fa9e1IvtooKO6eVxVHO6URIQld8jFaceTaker\"</code> and when i'm trying to pass the sessionID to the checkLogin function it gets the same contents as ticket <code>\"11aa14462ac96a9b389686672b99fa9e1IvtooKO6eVxVHO6URIQld8jFaceTaker\"</code>. </p>\n\n<p>Can anyone help me here?</p>\n"}, {"tags": ["c++", "design-patterns", "polymorphism"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 1, "creation_date": 1446662202, "post_id": 33529468, "comment_id": 54840466, "body": "You are using Warrior and Archer before they are declared."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1446662292, "post_id": 33529468, "comment_id": 54840522, "body": "<code>return (Character*)new Warrior(CharacterName);</code> is unnecessary, just say <code>return new Warrior(CharacterName);</code>  Also what is <code>NhanVat</code>?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1446662309, "post_id": 33529468, "comment_id": 54840532, "body": "On the line <code>YourChar-&gt;creatCharacter</code> you are using an uninitialized pointer. But this doesn&#39;t explain the error message."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1446662381, "post_id": 33529468, "comment_id": 54840569, "body": "@MohamadElghawi Well, the <code>class</code>es <i>are</i> declared, but not defined, so the constructors are not declared. Anyway, this is the problem."}, {"owner": {"reputation": 35, "user_id": 4902809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-HgVTTilFlZA/AAAAAAAAAAI/AAAAAAAAAok/vRRXCMLqwBY/photo.jpg?sz=128", "display_name": "Trung L&#234; Ho&#224;ng", "link": "https://stackoverflow.com/users/4902809/trung-l%c3%aa-ho%c3%a0ng"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1446662453, "post_id": 33529468, "comment_id": 54840605, "body": "@rlbond that was a mistake, I edited"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1446662550, "post_id": 33529468, "comment_id": 54840651, "body": "@5gon12eder Yes they are declared but he is trying to construct an instance of them before the point of declaration."}, {"owner": {"reputation": 35, "user_id": 4902809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-HgVTTilFlZA/AAAAAAAAAAI/AAAAAAAAAok/vRRXCMLqwBY/photo.jpg?sz=128", "display_name": "Trung L&#234; Ho&#224;ng", "link": "https://stackoverflow.com/users/4902809/trung-l%c3%aa-ho%c3%a0ng"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1446662553, "post_id": 33529468, "comment_id": 54840658, "body": "@MohamadElghawi how can I define them, I cant put Archer, Warrior before Character."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1446662572, "post_id": 33529468, "comment_id": 54840667, "body": "<i><code>YourChar = YourChar-&gt;creatCharacter(choice, name);</code></i> Huh?? You&#39;re dereferncing an uninitialised pointer variable?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1446662695, "post_id": 33529468, "comment_id": 54840742, "body": "@MohamadElghawi The <code>class</code>es are declared by the forward-declarations at the very top of the file. The constructors are not declared because they are only declared at the point of the class definition which is also where the constructors are defined. Which is just what the compiler says. But I don&#39;t want to add more confusion by my nitpicking. I think you&#39;ve spotted the issue. Maybe make it an answer?"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1446662792, "post_id": 33529468, "comment_id": 54840793, "body": "@5gon12eder Sorry. You are right in saying that they are declared (forward declared)."}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1446663144, "post_id": 33529468, "comment_id": 54841017, "body": "Whats the point of the class Character if you don&#39;t put common attributes inside it (like name)?"}, {"owner": {"reputation": 35, "user_id": 4902809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-HgVTTilFlZA/AAAAAAAAAAI/AAAAAAAAAok/vRRXCMLqwBY/photo.jpg?sz=128", "display_name": "Trung L&#234; Ho&#224;ng", "link": "https://stackoverflow.com/users/4902809/trung-l%c3%aa-ho%c3%a0ng"}, "reply_to_user": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1446663464, "post_id": 33529468, "comment_id": 54841216, "body": "@Devolus I use Character only for inheritance"}, {"owner": {"reputation": 35, "user_id": 4902809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-HgVTTilFlZA/AAAAAAAAAAI/AAAAAAAAAok/vRRXCMLqwBY/photo.jpg?sz=128", "display_name": "Trung L&#234; Ho&#224;ng", "link": "https://stackoverflow.com/users/4902809/trung-l%c3%aa-ho%c3%a0ng"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446663796, "post_id": 33529468, "comment_id": 54841428, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 oh, I missed that. It should be           Character* YourChar = new Character;"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1446827174, "post_id": 33529468, "comment_id": 54920463, "body": "About the design pattern: it is the &quot;parametrized factory method&quot;, more commonly known as a &quot;factory&quot;.  An &quot;Abstract Factory Design Pattern&quot; is an abstract class from which specific factories are inherited to provide different sets of class instances (typical example: widgets for different window environments)"}], "answers": [{"tags": [], "owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "is_accepted": false, "score": 0, "last_activity_date": 1446663692, "creation_date": 1446663692, "answer_id": 33529963, "question_id": 33529468, "link": "https://stackoverflow.com/questions/33529468/about-polymorphism-in-c/33529963#33529963", "title": "About Polymorphism in C++", "body": "<p>Rearrange your files into header/source files. It will make your code much cleaner and easier to read and it will also solve your problem.</p>\n\n<pre><code>// Archer.h\n#pragma once \n\n#include \"Character.h\"\n\nclass Archer : public Character\n{ \npublic:\n    Archer(void);\n    Archer(std::string CharacterName);\n    ~Archer(void);\n\n    void Skill_Cast();\n\nprivate:\n    std::string name;\n};\n\n// Character.h\n#pragma once\n\n#include &lt;string&gt;\n\nclass Character \n{\npublic:\n    Character(void);\n    ~Character(void);\n\n   Character* creatCharacter(int choice, std::string CharacterName);\n\n   virtual void Skill_Cast() {};\n};\n\n// Character.cpp\n#include \"Warrior.h\"\n#include \"Archer.h\"\n\nCharacter* Character::creatCharacter(int choice, std::string CharacterName)\n{\n    if (choice == 1)\n        return (Character*)new Warrior(CharacterName);\n\n    if (choice == 2)\n        return (Character*)new Archer(CharacterName);\n\n    return NULL;\n}\n</code></pre>\n\n<p>I haven't done all the work for you but this should point you in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1446664311, "creation_date": 1446664311, "answer_id": 33530131, "question_id": 33529468, "link": "https://stackoverflow.com/questions/33529468/about-polymorphism-in-c/33530131#33530131", "title": "About Polymorphism in C++", "body": "<p>If you are set on using Abstract Factory (which is rarely useful), do it right. You should not have your createChracater (defined within Character class - base class should not know anything about it's descendants). Instead, you should have a separate file, with separate function, like following:</p>\n\n<p>CharacterFactory.h </p>\n\n<pre><code>#include &lt;character.h&gt;\n#include &lt;memory&gt;\nstd::unique_ptr&lt;Character&gt; make_character(int type, std::string name);\n</code></pre>\n\n<p>CharacterFactory.cpp</p>\n\n<pre><code>#include &lt;warrior.h&gt;\n#include &lt;archer.h&gt;\n#include &lt;stdexcept&gt;\n\nstd::unique_ptr&lt;Character&gt; make_character(int type, std::string name) {\n    if (type == 1)\n        return std::unique_ptr&lt;Character&gt;(new Archer(name));\n    if (type == 2)\n        return std::unique_ptr&lt;Character&gt;(new Warrior(name));\n    throw std::runtime_error(\"Unknown character type requested!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1446665082, "creation_date": 1446665082, "answer_id": 33530345, "question_id": 33529468, "link": "https://stackoverflow.com/questions/33529468/about-polymorphism-in-c/33530345#33530345", "title": "About Polymorphism in C++", "body": "<p>In this snippet ... you need not (and should not) cast the derived instance back to the base class:</p>\n\n<pre><code>Character* creatCharacter(int choice, string CharacterName) \n{\n    if (choice == 1)\n        return (Character*)new Warrior(CharacterName);\n\n    if (choice == 2)\n        return (Character*)new Archer(CharacterName);\n   return NULL;\n}\n</code></pre>\n\n<p>For polymorphism to work, your derived classes must inherit from the base.  It looks like your base class is \"Character\", so this code should be more like the following.  The idea is that Warrior is-a Character (as Archer is-a Character), so you need not (shall not) cast.</p>\n\n<pre><code>Character* creatCharacter(int choice, string CharacterName) \n{\n    if (choice == 1)\n        return (new Warrior(CharacterName));\n\n    if (choice == 2)\n        return (new Archer(CharacterName));\n\n   return NULL;\n}\n</code></pre>\n\n<p>When used, simply invoke the Character action you wish.  </p>\n\n<p>For example, assume Character has the method </p>\n\n<pre><code>virtual void Character::action1(){ ... do stuff };  // body in .cc file\n</code></pre>\n\n<p>Then, with a warrior instance, you can invoke action1() as in:</p>\n\n<pre><code>Warrior warrior;\nwarrior.action1();   // because warrior \"is-a\" 'Character'.\n</code></pre>\n\n<p>Or, more typically, from a pointer in an array of Character.</p>\n\n<pre><code>std::vector&lt;Character*&gt;  actionFigures;\n\nfor ( &lt;&lt; maybe all figures in vector &gt;&gt; )\n   actionFigures[i]-&gt;action1();  \n</code></pre>\n\n<p>The above invokes Character::action1() <em>only</em> if the derived instance does not replace the method.  </p>\n\n<p>If Warrior re-defines action1(), then its version of the action1() method will be invoked.</p>\n\n<hr>\n\n<p>There is also another somewhat bigger (though very common) mistake you have started down:  the point of polymorphism is that the base class does NOT (shall NOT, CAN NOT) know what might be derived from it.  Derived classes might be added many code versions later, with possibly NO changes to the base class.  (i.e. code re-use)</p>\n\n<p>This function is 'broken' in the sense that for every new derived Character you will have to modify this function, re-test everything, etc.  (not code re-use)</p>\n\n<hr>\n\n<p>This is just additional guidance, not trying to write the code for you.</p>\n\n<hr>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 35, "user_id": 4902809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-HgVTTilFlZA/AAAAAAAAAAI/AAAAAAAAAok/vRRXCMLqwBY/photo.jpg?sz=128", "display_name": "Trung L&#234; Ho&#224;ng", "link": "https://stackoverflow.com/users/4902809/trung-l%c3%aa-ho%c3%a0ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1446691357, "creation_date": 1446662112, "last_edit_date": 1446691357, "question_id": 33529468, "link": "https://stackoverflow.com/questions/33529468/about-polymorphism-in-c", "title": "About Polymorphism in C++", "body": "<p>I'm learning about polymorphism and this is a small game. I have a representative class Character here, I want to program so that from a Character people can choose Warrior or Archer to continue the game.</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;string&gt;\n\nclass Warrior;\nclass Archer;\n\nclass Character {\n   public:\n   Character(void);\n   ~Character(void);\n\nCharacter* creatCharacter(int choice, string CharacterName) {\n\n    if (choice == 1)\n        return (Character*)new Warrior(CharacterName);\n\n    if (choice == 2)\n        return (Character*)new Archer(CharacterName);\n\n      return NULL;\n   }\n\n   virtual void Skill_Cast() {};\n};\n\nclass Warrior :public Character {\nprivate:\n   string name;\npublic:\n   Warrior(void);\n   ~Warrior(void);\n\n   Warrior(string CharacterName) {\n      name = CharacterName;\n   }\n\n\n  void Skill_Cast() {\n      cout &lt;&lt; \"Punch!\" &lt;&lt; endl;\n  }\n\n };\n\nclass Archer : public Character\n{ \nprivate:\n    string name;\npublic:\nArcher(void);\n~Archer(void);\n\nArcher(string CharacterName) {\n    name = CharacterName;\n}\n\n   void Skill_Cast() {\n    cout &lt;&lt; \"Shoot!\" &lt;&lt; endl;\n   }\n\n};\n</code></pre>\n\n<p>In the main function:</p>\n\n<pre><code>int main() {\n   cout &lt;&lt;\"Enter character's name: \";\n   string name;\n   getline(cin, name, '\\n');\n   cout &lt;&lt;\"Enter your character class by number (1),(2),(3): \";\n   int choice;\n   cin &gt;&gt; choice;\n\n   Character* YourChar;\n\n\n\n  YourChar = YourChar-&gt;creatCharacter(choice, name);\n\n  YourChar-&gt;Skill_Cast();\n}\n</code></pre>\n\n<p>And this is ERRORS:</p>\n\n<pre><code> Error  1   error C2512: 'Warrior' : class has no constructors  \n Error  2   error C2514: 'Archer' : class has no constructors   \n</code></pre>\n\n<p>Can you explain me the errors and help me fix that, by the way, Is this a kind of \"Abstract Factory Design Pattern\" ? Thanks so much.\n(sorry for my bad English)</p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 635, "user_id": 2010398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GnCdn.png?s=128&g=1", "display_name": "gmug", "link": "https://stackoverflow.com/users/2010398/gmug"}, "edited": false, "score": 1, "creation_date": 1446715273, "post_id": 33529466, "comment_id": 54861957, "body": "One difference I see is that you use in the second example a default constructor whereas in the first exmple a specialized constructor is used."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 635, "user_id": 2010398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GnCdn.png?s=128&g=1", "display_name": "gmug", "link": "https://stackoverflow.com/users/2010398/gmug"}, "edited": false, "score": 0, "creation_date": 1446725501, "post_id": 33529466, "comment_id": 54868274, "body": "@gmug That&#39;s a good observation. I&#39;ll look through other constructors in the library and see if they follow the same pattern. This wouldn&#39;t explain why the two member functions returning void are documented on this page and not the first, but maybe that&#39;s a separate issue."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 635, "user_id": 2010398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GnCdn.png?s=128&g=1", "display_name": "gmug", "link": "https://stackoverflow.com/users/2010398/gmug"}, "edited": false, "score": 0, "creation_date": 1446725772, "post_id": 33529466, "comment_id": 54868457, "body": "Sadly, I&#39;ve found other examples in my library where the constructor takes arguments and is properly documented."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 1, "creation_date": 1446836011, "post_id": 33529466, "comment_id": 54925214, "body": "Blind shot: is your constructor the first member after the <code>public:</code> ?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446840833, "post_id": 33529466, "comment_id": 54927863, "body": "@Thomas, yes, one of them is."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446841492, "post_id": 33529466, "comment_id": 54928222, "body": "could you provide the whole .h file?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446842294, "post_id": 33529466, "comment_id": 54928569, "body": "@Thomas I&#39;ve edited the question to include the whole header file."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446842789, "post_id": 33529466, "comment_id": 54928796, "body": "Did you consider an update of doxygen? On which OS are you? And what happen if you add just after <code>public:</code> a default constructor?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446851833, "post_id": 33529466, "comment_id": 54931974, "body": "@Thomas I upgraded to 1.8.10 with no change. I also added a default constructor -- the documentation for this default constructor appears as expected. However, the other two are still broken."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 1, "creation_date": 1447063646, "post_id": 33529466, "comment_id": 54987991, "body": "Given your email address I bet you can&#39;t share the whole project, could you produce an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1447081742, "post_id": 33529466, "comment_id": 54998418, "body": "@Thomas I&#39;ll work on this, thanks again."}, {"owner": {"reputation": 4158, "user_id": 1228449, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03c6c1563ed94f735579a66abd200ebb?s=128&d=identicon&r=PG", "display_name": "Johannes S.", "link": "https://stackoverflow.com/users/1228449/johannes-s"}, "edited": false, "score": 1, "creation_date": 1447083538, "post_id": 33529466, "comment_id": 54999585, "body": "Running Doxygen 1.8.7 (configured with Doxywizard default settings except disabling LaTeX and diagrams) on just <code>ToyTagger.hh</code> produced the correct result for me. The constructors are listed as &quot;Public functions&quot; in the overview at the top, but under &quot;Constructors &amp; Destructors&quot; for the details. The &quot;More...&quot; link jumps to the correct spot, not to the group page. Can you run doxygen on an individual file as well? Maybe any of the included files in ToyTagger.hh has some broken doxygen code? Are there any warnings during doxygen generation?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 4158, "user_id": 1228449, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03c6c1563ed94f735579a66abd200ebb?s=128&d=identicon&r=PG", "display_name": "Johannes S.", "link": "https://stackoverflow.com/users/1228449/johannes-s"}, "edited": false, "score": 0, "creation_date": 1447084830, "post_id": 33529466, "comment_id": 55000467, "body": "@JohannesS. I am noticing this now as I try to make a minimal working example as Thomas suggested; it&#39;s pretty hard to reproduce the error I am seeing. I will look over the warning messages."}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1447266584, "post_id": 33529466, "comment_id": 55088026, "body": "@Thomas, and Johannes - At first my MWE did not suffer from this problem. In trying to create a MWE I discovered the issue. I was adding the corresponding .cpp file to the Doxygen group as well, and getting rid of this fixes the issue. I figured this out with both of your help. If you make answers like &quot;Making a MWE could narrow down the issue&quot; for Thomas and &quot;A single .hh file might look fine but you must consider interactions between multiple files when debugging oxygen&quot; for Johannes, I would give bounties to those."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1447317710, "post_id": 33529466, "comment_id": 55107655, "body": "Done. Feel free to add informations to the answer to make it more complete"}], "answers": [{"tags": [], "owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "is_accepted": false, "score": 1, "last_activity_date": 1447317074, "last_edit_date": 1495542218, "creation_date": 1447317074, "answer_id": 33667152, "question_id": 33529466, "link": "https://stackoverflow.com/questions/33529466/doxygen-1-8-8-putting-c-constructors-public-member-functions-on-group-page/33667152#33667152", "title": "Doxygen (1.8.8) putting C++ constructors / public member functions on group page rather than class page", "body": "<p>You should try to produce an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> to track the issue.</p>\n\n<p>Also, try to check what file you add to which group: it may leads to weird behavior sometimes...</p>\n"}], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2187, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1447449454, "creation_date": 1446662107, "last_edit_date": 1447449454, "question_id": 33529466, "link": "https://stackoverflow.com/questions/33529466/doxygen-1-8-8-putting-c-constructors-public-member-functions-on-group-page", "title": "Doxygen (1.8.8) putting C++ constructors / public member functions on group page rather than class page", "body": "<p>I am trying to document some of my code with Doxygen. I have a library which I'm calling a Doxygen group, and many classes in separate header files. A number of the constructors are shown as public member functions on the class pages, but their documentation is shown on the group page rather than in the Constructors &amp;&amp; Destructors section on the class page. Some are not; I haven't exactly figured out the pattern yet.</p>\n\n<p>Here is one that fails:</p>\n\n<pre><code>/**\n * @addtogroup gr_espresso\n * @{\n */\n\n/**\n * @file ToyTagger.hh\n */\n...\nnamespace Espresso {\n  ...\n  /**\n   * @class ToyTagger\n   * @brief Fake tagging algorithm\n   * @details ...\n   *\n   */\n  class ToyTagger {\n  public:\n\n    /**\n     * @brief Simple constructor.\n     * @details ...\n     */\n    ToyTagger(CalibrationMode _mode, const Distribution&amp; _pdf, const Calibration* _smear_cal = nullptr);\n    ...\n  }\n}\n/**\n * @}\n */\n</code></pre>\n\n<p>The following documentation is produced for the class ToyTagger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oUpGB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oUpGB.png\" alt=\"enter image description here\"></a></p>\n\n<p>The constructor shown above in pseudocode is listed under Public Member Functions, but not under Constructors &amp; Destructor documentation. Instead, the \"More info\" link leads to the page for the group gr_espresso. The same thing is true for another constructor, and also for one of the three member functions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zToiH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zToiH.png\" alt=\"enter image description here\"></a></p>\n\n<p>I haven't shown the code for the second constructor or three member functions, but there is no apparent difference.</p>\n\n<p>On the other hand, here is one that succeeds:</p>\n\n<pre><code>/**\n * @addtogroup gr_espresso\n * @{\n */\n\n/**\n * @file StandardCalibration.hh\n */\n...\nnamespace Espresso\n{\n  ...\n  class StandardCalibration : public Calibration {\n  public:\n   /**\n    * @brief Default constructor\n    * @details Simple constructor that creates a trivial calibration\n    * where \\f$\\omega(\\eta) = \\eta\\f$\n    */\n    StandardCalibration();\n    ...\n  }\n}\n\n/**\n * @}\n */\n</code></pre>\n\n<p>This generates the documentation I would expect:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4kIar.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4kIar.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anyone know what's going on here? Am I doing something wrong that leads to such (apparently) unpredictable behavior?</p>\n"}, {"tags": ["c++", "windows", "dll"], "comments": [{"owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "edited": false, "score": 0, "creation_date": 1446662198, "post_id": 33529410, "comment_id": 54840462, "body": "How are you referencing it, can you post the CMakeLists.txt? You might need to put it in System / System32."}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "edited": false, "score": 0, "creation_date": 1446662427, "post_id": 33529410, "comment_id": 54840592, "body": "@AndyM added CMakeLists.txt"}, {"owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "edited": false, "score": 0, "creation_date": 1446662940, "post_id": 33529410, "comment_id": 54840882, "body": "What compiler are you using, where is the exe? Do you have <code>which</code> installed (comes with Cygwin, not sure about MinGW). By looking at those other questions related to that dll, it looks like it needs to be in the same dir as your compiler&#39;s exe."}, {"owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "reply_to_user": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "edited": false, "score": 0, "creation_date": 1446663156, "post_id": 33529410, "comment_id": 54841025, "body": "@AndyM adding C:\\MiniGW\\bin to my path variable seems to have fixed it, I&#39;m now getting another stack of errors but that&#39;s a different pair of sleeves :)"}], "owner": {"reputation": 4519, "user_id": 1876047, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7d51d56d5cfd90e54ccb53479d3be672?s=128&d=identicon&r=PG", "display_name": "MrD", "link": "https://stackoverflow.com/users/1876047/mrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446662414, "creation_date": 1446661943, "last_edit_date": 1495535231, "question_id": 33529410, "link": "https://stackoverflow.com/questions/33529410/cmaker-missing-dll-windows", "title": "CMaker Missing DLL Windows", "body": "<p>I'm trying to build a project using CMake 3.4.0-rc3 on 64-bit Windows 8.</p>\n\n<p>When I click \"generate\", I get an error saying:</p>\n\n<p><a href=\"https://i.stack.imgur.com/f9V6R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f9V6R.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thing is, when I go to C:\\MinGW\\bin I do have a dll called libmpc-3.dll. By looking <a href=\"https://stackoverflow.com/questions/5127446/cant-compile-with-mingw-libmpc-2-dll-is-missing\">at a similar answer</a> I tried running <code>mingw-get install mpc</code> which ran successfully but didn't fix the problem. Any advice? :)</p>\n\n<p>EDIT: CMakeLists.txt</p>\n\n<pre><code>#\n# Root vxl\n#\n#   vxl-maintainers@lists.sf.net\n\nCMAKE_MINIMUM_REQUIRED(VERSION 2.5)\n\n# Support for CMake 2.6\nIF( COMMAND CMAKE_POLICY )\n  CMAKE_POLICY(SET CMP0003 NEW)\nENDIF( COMMAND CMAKE_POLICY )\n\n# CMake 2.8 stuff\nSET( CMAKE_LEGACY_CYGWIN_WIN32 0 ) # Remove when CMake &gt;= 2.8.4 is required\n\n# Use @rpath on OS X\nIF( POLICY CMP0042 )\n  CMAKE_POLICY(SET CMP0042 NEW)\nENDIF()\n\nPROJECT(vxl)\n\nSET( LIBRARY_OUTPUT_PATH ${vxl_BINARY_DIR}/lib CACHE PATH\n     \"Output directory for the vxl libraries\" )\n\nIF( NOT EXECUTABLE_OUTPUT_PATH )\n    SET( EXECUTABLE_OUTPUT_PATH \".\" )\nENDIF( NOT EXECUTABLE_OUTPUT_PATH )\n\n\n# CMake support directory.\nSET(VXL_CMAKE_DIR ${vxl_SOURCE_DIR}/config/cmake/Modules)\n\nINCLUDE( ${VXL_CMAKE_DIR}/VXLStandardOptions.cmake )\nINCLUDE( ${vxl_SOURCE_DIR}/config/cmake/config/vxl_utils.cmake )\n# INCLUDE( ${vxl_SOURCE_DIR}/UseSTLPort.cmake )\nINCLUDE(${vxl_SOURCE_DIR}/config/cmake/doxygen/doxygen.cmake)\n\n# Copy the UseVXL.cmake file to the binary directory so that client\n# projects don't need to find the source directory first. They can run\n# the UseVXL.cmake from the vxl binary directory, and determine the\n# vxl source directory by loading the cache.\nCONFIGURE_FILE( ${VXL_CMAKE_DIR}/UseVXL.cmake\n                ${vxl_BINARY_DIR}/UseVXL.cmake COPYONLY )\n\n# Copy CTestCustom.cmake to top of build tree\nCONFIGURE_FILE( ${VXL_CMAKE_DIR}/CTestCustom.cmake\n  ${vxl_BINARY_DIR}/CTestCustom.cmake COPYONLY )\n\n# Location of VXL's FindXXX.cmake CMake modules.\n# This is identical to VXL_CMAKE_DIR.  Perhaps we should eliminate MODULE_PATH?\nSET( MODULE_PATH ${vxl_SOURCE_DIR}/config/cmake/Modules CACHE STATIC \"VXL module path\" )\n\n# For use in client projects that call UseVXL.cmake\nSET (VXL_LIBRARY_PATH ${LIBRARY_OUTPUT_PATH} CACHE STATIC \"Where all the vxl libraries are, for clients to use.\" )\n\n# Options to add extra compiler and linker flags\n#\n# These options allow you to specify additional flags without\n# affecting the default flags for a particular platform or build type.\n# This is especially useful for adding extra warning flags.\nSET( VXL_EXTRA_CMAKE_C_FLAGS             CACHE STRING \"Extra flags appended to CMAKE_C_FLAGS\" )\nSET( VXL_EXTRA_CMAKE_CXX_FLAGS           CACHE STRING \"Extra flags appended to CMAKE_CXX_FLAGS\" )\nSET( VXL_EXTRA_CMAKE_EXE_LINKER_FLAGS    CACHE STRING \"Extra flags appended to CMAKE_EXE_LINKER_FLAGS\" )\nSET( VXL_EXTRA_CMAKE_MODULE_LINKER_FLAGS CACHE STRING \"Extra flags appended to CMAKE_MODULE_LINKER_FLAGS\" )\nSET( VXL_EXTRA_CMAKE_SHARED_LINKER_FLAGS CACHE STRING \"Extra flags appended to CMAKE_SHARED_LINKER_FLAGS\" )\nSET( CMAKE_C_FLAGS             \"${CMAKE_C_FLAGS} ${VXL_EXTRA_CMAKE_C_FLAGS}\" )\nSET( CMAKE_CXX_FLAGS           \"${CMAKE_CXX_FLAGS} ${VXL_EXTRA_CMAKE_CXX_FLAGS}\" )\nSET( CMAKE_EXE_LINKER_FLAGS    \"${CMAKE_EXE_LINKER_FLAGS} ${VXL_EXTRA_CMAKE_EXE_LINKER_FLAGS}\" )\nSET( CMAKE_MODULE_LINKER_FLAGS \"${CMAKE_MODULE_LINKER_FLAGS} ${VXL_EXTRA_CMAKE_MODULE_LINKER_FLAGS}\" )\nSET( CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS} ${VXL_EXTRA_CMAKE_SHARED_LINKER_FLAGS}\" )\n\n\n# Option to specify whether this is a build for the dashboard.  Each\n# dashboard build should set BUILD_FOR_VXL_DASHBOARD to YES in the\n# initial cache (set in the CTest script).\nOPTION( BUILD_FOR_VXL_DASHBOARD \"Is this a build for the dashboard?\" NO )\n\n# A variable to default some OPTIONs to YES for the dashboard, but to\n# NO for other builds.\nIF( BUILD_FOR_VXL_DASHBOARD )\n  SET( YES_FOR_DASHBOARD \"YES\" )\nELSE( BUILD_FOR_VXL_DASHBOARD )\n  SET( YES_FOR_DASHBOARD \"NO\" )\nENDIF( BUILD_FOR_VXL_DASHBOARD )\n\n# Use this variable in vxl_config.h to tell if it is a shared build\nset(VXL_BUILD_SHARED FALSE)\nif(BUILD_SHARED_LIBS)\n  set(VXL_BUILD_SHARED TRUE)\nendif()\n\n# Do platform-specific configuration.\nIF(NOT VXL_NO_CMAKE_CONFIGURE)\n  SUBDIRS(config/cmake/config)\nENDIF(NOT VXL_NO_CMAKE_CONFIGURE)\n\n\n# Options to reduce build to just some core libraries\nOPTION( BUILD_CORE_NUMERICS \"Build VXL's numerics libraries\" YES )\nOPTION( BUILD_CORE_SERIALISATION \"Build VXL's serialisation libraries\" YES )\nOPTION( BUILD_CORE_UTILITIES \"Build VXL's utility libraries\" YES )\nOPTION( BUILD_CORE_GEOMETRY \"Build VXL's geometry libraries\" YES )\nOPTION( BUILD_CORE_IMAGING \"Build VXL's imaging libraries\" YES )\nOPTION( BUILD_NONDEPRECATED_ONLY \"Build only nondeprecated libraries (Experimental)\" NO )\nIF(BUILD_CORE_NUMERICS)\n  IF( BUILD_FOR_VXL_DASHBOARD )\n    OPTION( BUILD_CORE_PROBABILITY \"Build VXL's probability libraries (Experimental)\" YES )\n  ELSE( BUILD_FOR_VXL_DASHBOARD )\n    OPTION( BUILD_CORE_PROBABILITY \"Build VXL's probability libraries (Experimental)\" NO )\n  ENDIF( BUILD_FOR_VXL_DASHBOARD )\nENDIF(BUILD_CORE_NUMERICS)\nSET (BUILD_CORE_ALL OFF CACHE INTERNAL \"All Core libraries are being built\")\nIF (BUILD_CORE_GEOMETRY AND BUILD_CORE_NUMERICS)\n  IF (BUILD_CORE_UTILITIES AND BUILD_CORE_SERIALISATION)\n    IF (BUILD_CORE_IMAGING)\n      SET (BUILD_CORE_ALL ON CACHE INTERNAL \"All Core libraries are being built\")\n    ENDIF (BUILD_CORE_IMAGING)\n  ENDIF (BUILD_CORE_UTILITIES AND BUILD_CORE_SERIALISATION)\nENDIF (BUILD_CORE_GEOMETRY AND BUILD_CORE_NUMERICS)\n\n# Optionally use old error reporting methods, rather than exceptions.\n# The main use is in vil which often uses/used null images to imply an error.\nOPTION (VXL_LEGACY_ERROR_REPORTING \"Use old error reporting methods rather than exceptions?\" YES)\nIF (VXL_LEGACY_ERROR_REPORTING)\n  ADD_DEFINITIONS( -DVXL_LEGACY_ERROR_REPORTING )\nENDIF (VXL_LEGACY_ERROR_REPORTING)\n\n\n\n# Options to build no longer maintained libraries.\n# It is still useful to have the dashboard check that they are correct,\n# but no-one is likely to work on improving test coverage or fixing memory leaks.\nOPTION( BUILD_UNMAINTAINED_LIBRARIES \"Build libraries that are no longer actively maintained?\" ${YES_FOR_DASHBOARD} )\n\n# Option to build Windows Unicode support, the string\n# type of which is wchar_t, each character is a 16-bit unsigned integer.\nIF(WIN32)\n  IF(VXL_HAS_WIN_WCHAR_T)\n    OPTION( VXL_USE_WIN_WCHAR_T \"Build overloading functions that accept Windows wide char strings?\" YES )\n    IF(VXL_USE_WIN_WCHAR_T)   # Force it to be 0/1\n      SET(VXL_USE_WIN_WCHAR_T 1)\n    ELSE(VXL_USE_WIN_WCHAR_T)\n      SET(VXL_USE_WIN_WCHAR_T 0)\n    ENDIF(VXL_USE_WIN_WCHAR_T)\n  ELSE(VXL_HAS_WIN_WCHAR_T)\n    SET(VXL_USE_WIN_WCHAR_T 0)\n  ENDIF(VXL_HAS_WIN_WCHAR_T)\nELSE(WIN32)\n  # avoid empty macro definition\n  SET(VXL_USE_WIN_WCHAR_T 0)\nENDIF(WIN32)\n\n# In order to be able to link vxl libraries into shared libraries on 64 bit linux, the -fPIC \n# compiler flag must be added.  Only do this if we are on a x86_64 *nix platform, we're building \n# static libraries, and the user has not explicitly requested position dependent code.\nIF(UNIX)\n  IF(NOT BUILD_SHARED_LIBS AND CMAKE_SYSTEM_PROCESSOR MATCHES \"x86_64\")\n    OPTION(BUILD_POSITION_DEPENDENT_CODE \"Generate position dependent code (i.e. code cannot be used in shared library)\" OFF)\n    MARK_AS_ADVANCED(BUILD_POSITION_DEPENDENT_CODE)\n    IF (NOT BUILD_POSITION_DEPENDENT_CODE)\n      message(STATUS \"Adding -fPIC compiler flag to generate position independent code.\")\n      SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS}-fPIC\")\n      SET(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS}-fPIC\")\n    ENDIF(NOT BUILD_POSITION_DEPENDENT_CODE)\n  ENDIF(NOT BUILD_SHARED_LIBS AND CMAKE_SYSTEM_PROCESSOR MATCHES \"x86_64\")\nENDIF(UNIX)\n\n# Build the core vxl + support libraries\nSUBDIRS(vcl v3p core)\n\n# Optionally build the contributed libraries\nIF( EXISTS ${vxl_SOURCE_DIR}/contrib/CMakeLists.txt )\n  OPTION( BUILD_CONTRIB \"Build the contributed libraries?\" YES )\nENDIF( EXISTS ${vxl_SOURCE_DIR}/contrib/CMakeLists.txt )\n\nIF( BUILD_CONTRIB AND BUILD_CORE_ALL)\n  SUBDIRS( contrib )\nENDIF( BUILD_CONTRIB AND BUILD_CORE_ALL)\n\n# Use the old configure script if the cache tells us to do so.\nIF(VXL_NO_CMAKE_CONFIGURE)\n  IF(RUN_CONFIGURE)\n    EXEC_PROGRAM( ${vxl_SOURCE_DIR}/configure\n      ${vxl_BINARY_DIR} )\n  ENDIF(RUN_CONFIGURE)\nENDIF(VXL_NO_CMAKE_CONFIGURE)\n\n# Some types of path names can cause havoc with regular expressions,\n# so avoid those.\nIF( ${vxl_BINARY_DIR} MATCHES  \\\\+ )\n  MESSAGE(SEND_ERROR \"You cannot have a + in your binary path\")\nENDIF( ${vxl_BINARY_DIR} MATCHES  \\\\+ )\nIF( ${vxl_SOURCE_DIR} MATCHES  \\\\+ )\n  MESSAGE(SEND_ERROR \"You cannot have a + in your source path\")\nENDIF( ${vxl_SOURCE_DIR} MATCHES  \\\\+ )\n\n# include CMakeListsLocal.txt from source directory if it exists\n# also include it from the binary dir if different from source dir\nIF( ${vxl_BINARY_DIR} MATCHES ${vxl_SOURCE_DIR} )\n  INCLUDE( ${vxl_SOURCE_DIR}/CMakeListsLocal.txt OPTIONAL )\nELSE( ${vxl_BINARY_DIR} MATCHES ${vxl_SOURCE_DIR} )\n  INCLUDE( ${vxl_SOURCE_DIR}/CMakeListsLocal.txt OPTIONAL )\n  INCLUDE( ${vxl_BINARY_DIR}/CMakeListsLocal.txt OPTIONAL )\nENDIF( ${vxl_BINARY_DIR} MATCHES ${vxl_SOURCE_DIR} )\n\n# Standard include directories.\nSET(VXLCORE_INCLUDE_DIR ${vxl_BINARY_DIR}/core ${vxl_SOURCE_DIR}/core)\nSET(VXLCORE_INSTALL_INCLUDE_DIR ${CMAKE_INSTALL_PREFIX}/include/vxl/core)\nSET(VCL_INCLUDE_DIR ${vxl_BINARY_DIR}/vcl ${vxl_SOURCE_DIR}/vcl)\nSET(VCL_INSTALL_INCLUDE_DIR ${CMAKE_INSTALL_PREFIX}/include/vxl/vcl)\n\n# Autoconf does not work on windows.  Use hardcoded results if not using\n# cmake to configure.\nIF(VXL_NO_CMAKE_CONFIGURE)\n  IF(WIN32)\n    IF(NOT CYGWIN)\n      SET(VCL_INCLUDE_DIR ${vxl_SOURCE_DIR}/vcl/config.win32 ${VCL_INCLUDE_DIR})\n      SET(VCL_INSTALL_INCLUDE_DIR\n        ${CMAKE_INSTALL_PREFIX}/include/vcl/config.win32\n        ${VCL_INSTALL_INCLUDE_DIR}\n      )\n    ENDIF(NOT CYGWIN)\n  ENDIF(WIN32)\nENDIF(VXL_NO_CMAKE_CONFIGURE)\n\nINCLUDE_DIRECTORIES(${VCL_INCLUDE_DIR} ${VXLCORE_INCLUDE_DIR})\n\n# This SUBDIRS command must be the last SUBDIRS command in this file\nSUBDIRS( config/cmake/export )\n</code></pre>\n"}, {"tags": ["c++", "class", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1446661995, "post_id": 33529343, "comment_id": 54840348, "body": "<code>if (inF.eof()</code> is wrong (you skip the last student) and <code>student* stud</code> is code smell"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1446662013, "post_id": 33529343, "comment_id": 54840360, "body": "Don&#39;t pass in the object you&#39;re using as the target for reading in as a pointer--since you&#39;re writing over it multiple times anyway I suspect you don&#39;t care about the contents of the base variable when the function is finished. In that case, just make the temporary in the function itself and save yourself some trouble. Oooor you could do <code>vect.push_back(*stud)</code>"}, {"owner": {"reputation": 55, "user_id": 4032350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "kensai01", "link": "https://stackoverflow.com/users/4032350/kensai01"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1446662282, "post_id": 33529343, "comment_id": 54840517, "body": "@jaggedSpire So you mean create a temporary pointer inside the function rather than pass a pointer in?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1446662552, "post_id": 33529343, "comment_id": 54840656, "body": "@DieterL&#252;cking: Skip the last student? Don&#39;t you mean, obtain an extra student?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1446662847, "post_id": 33529343, "comment_id": 54840823, "body": "@LightnessRacesinOrbit No that eof-check may prevent, that a well defined  student becomes a part of the resulting students."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1446663365, "post_id": 33529343, "comment_id": 54841167, "body": "@DieterL&#252;cking: Oh, right. What&#39;s that doing before the push back. Weird."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1446663377, "post_id": 33529343, "comment_id": 54841178, "body": "@kensai01 no, make a local object, and then use <code>stud.</code> instead of <code>stud-&gt;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446665499, "post_id": 33529343, "comment_id": 54842338, "body": "I highly recommend overloading <code>operator&gt;&gt;</code> in your <code>class</code> or <code>struct</code>.  This would allow a syntax like: <code>inF &gt;&gt; *stud;</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446663188, "post_id": 33529577, "comment_id": 54841044, "body": "Actually, (1) is OK. Also trying to read multiple fields (unchecked) is OK,  when a final test <code>if(stream) </code> follows."}, {"owner": {"reputation": 55, "user_id": 4032350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "kensai01", "link": "https://stackoverflow.com/users/4032350/kensai01"}, "edited": false, "score": 0, "creation_date": 1446663351, "post_id": 33529577, "comment_id": 54841153, "body": "@R Sahu How do I go about changing #2, that was the crux of my entire question. I&#39;m trying to load from a simple text file that has rows of text input pertaining to attributes of the student. I create an array of that many(rows in file) objects of class student. I then fill those objects with the information. Now how do I go to vectors from there or should I even bother using vectors to store such data?   Problem is, other requirements of the project are to be able to sort, add and delete and modify individual entries. I&#39;m having a hard time visualizing how to go about implementing this."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1446663361, "post_id": 33529577, "comment_id": 54841160, "body": "@DieterL&#252;cking, in this case, it is probably a logical error to rely on <code>while(inF)</code> to break the loop."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1446663488, "last_edit_date": 1495542188, "creation_date": 1446662469, "answer_id": 33529577, "question_id": 33529343, "link": "https://stackoverflow.com/questions/33529343/reading-file-into-vectors-whats-wrong-with-my-input-function/33529577#33529577", "title": "reading file into vectors, what&#39;s wrong with my input function?", "body": "<p>Problems I see:</p>\n\n<ol>\n<li><p>You are using <code>while (inF)</code> to break the loop. See <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>.</p></li>\n<li><p>You are using one pointer, <code>stud</code> to read all the values and storing the same pointer multiple times in <code>vect</code>. First of all, the compiler should produce an error. You cannot add a pointer to a vector of objects.</p>\n\n<p>It's not clear why the function needs <code>stud</code> as an argument. You can just as easily use a local object in the function. Like this:</p>\n\n<pre><code>for (int index = 0; index &lt; size; index++){\n   student stud;\n   if ( !(inF &gt;&gt; first &gt;&gt; last &gt;&gt; middle) )\n   {\n      // Deal with error.\n   }\n   stud.setName(first, last, middle);\n\n   ...\n}\n</code></pre></li>\n<li><p>It's better to check whether the calls to <code>inF &gt;&gt; ...</code> assigned anything successfully and not assume that it succeeded. Instead of:</p>\n\n<pre><code>inF &gt;&gt; first &gt;&gt; last &gt;&gt; middle;\n</code></pre>\n\n<p>use</p>\n\n<pre><code>if ( !(inF &gt;&gt; first &gt;&gt; last &gt;&gt; middle) )\n{\n    // Deal with error.\n}\n</code></pre>\n\n<p>I suggest changing all such calls.</p></li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 4032350, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "kensai01", "link": "https://stackoverflow.com/users/4032350/kensai01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 33529577, "answer_count": 1, "score": 0, "last_activity_date": 1446663488, "creation_date": 1446661728, "question_id": 33529343, "link": "https://stackoverflow.com/questions/33529343/reading-file-into-vectors-whats-wrong-with-my-input-function", "title": "reading file into vectors, what&#39;s wrong with my input function?", "body": "<p>I have an assignment to create a record management system for a class project. When adding records I would like to first read into a vector the contents of my record file currently then perform additions to the file finally outputting back to the record file. However, I'm having a hard time wrapping my mind around how to structure this. I am currently using a dynamic array to store the data but when I try to put it into the vector I it won't let me because it's a pointer. I feel like I'm approaching this entirely wrong and could use some assistance. Here is my input function:</p>\n\n<pre><code> void student::input(istream&amp; inF, student* stud, vector&lt;student&gt;&amp; vect, int size)\n{\n    //local variables\n    string first, middle, last, addressNum, addressStreet, \n        phone, gender, email, emContactFirst, emContactLast;\n    int ID, age;\n    string ph, emPhone;\n    while (inF)\n    {\n        for (int index = 0; index &lt; size; index++){\n            inF &gt;&gt; first &gt;&gt; last &gt;&gt; middle;\n            stud-&gt;setName(first, last, middle);\n            inF &gt;&gt; ID;\n            stud-&gt;setId(ID);\n            inF &gt;&gt; age;\n            stud-&gt;setAge(age);\n            inF &gt;&gt; phone;\n            stud-&gt;setPhone(phone);\n            inF &gt;&gt; addressNum &gt;&gt; addressStreet;\n            stud-&gt;setAddress(addressNum, addressStreet);\n            inF &gt;&gt; gender;\n            stud-&gt;setGender(gender);\n            inF &gt;&gt; email;\n            stud-&gt;setEmail(email);\n            inF &gt;&gt; emPhone;\n            stud-&gt;setEmPhone(emPhone);\n            inF &gt;&gt; emContactFirst &gt;&gt; emContactLast;\n            stud-&gt;setEmContact(emContactFirst, emContactLast);\n            inF &gt;&gt; stud-&gt;gpa &gt;&gt; stud-&gt;hobbies &gt;&gt; stud-&gt;major\n                &gt;&gt; stud-&gt;probation;\n            if (inF.eof())\n                break;\n            else\n            stud++;\n            vect.push_back(stud);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446663899, "post_id": 33529212, "comment_id": 54841474, "body": "You could of course catch the exception and handle the error to know what causes it"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446665300, "post_id": 33529212, "comment_id": 54842238, "body": "Got sidetracked, but here you go: <a href=\"http://coliru.stacked-crooked.com/a/7cd950538f167a90\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7cd950538f167a90</a>"}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446689316, "post_id": 33529876, "comment_id": 54852257, "body": "&#39;&quot;IO services are thread-safe, so you can use one service on many threads.&quot; I know it, but I want to use multiple thread - multiple io_service,  please see my update"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446689359, "post_id": 33529876, "comment_id": 54852270, "body": "That&#39;s what I said: <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/io_service.html#boost_asio.reference.io_service.thread_safety\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/&hellip;</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446689716, "post_id": 33529876, "comment_id": 54852353, "body": "@Ikarus (to the edited comment) - you can provided that you can listen on separate ports/interfaces. I suppose you could use <code>sockets</code> on differen <code>io_service</code> than <code>acceptor_</code>, but your sample program didn&#39;t have sockets."}, {"owner": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446690016, "post_id": 33529876, "comment_id": 54852426, "body": "Can I use many io_service instance to listen on 1 port? does it improve performance?  I don&#39;t want to use many ports because it will be inconvenience for client"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 1, "creation_date": 1446690117, "post_id": 33529876, "comment_id": 54852456, "body": "Did you read the answer? Or that by Miles? No you cannot use many <code>io_service</code> instances to &quot;listen&quot; on 1 port. You can only have 1 acceptor per port, and the acceptor is tied to 1 <code>io_service</code>. You can repeat the question, but the answer stays the same."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446690208, "post_id": 33529876, "comment_id": 54852477, "body": "@Ikarus whether it&#39;ll be inconvenient depends on your routing/load balancing. It probably won&#39;t be faster anyways. You can use multiple ports if you insist on benchmarking it."}, {"owner": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "edited": false, "score": 0, "creation_date": 1446690539, "post_id": 33529876, "comment_id": 54852561, "body": "sorry, I&#39;ve not read the answer carefully, I just want to confirm that there&#39;s no way to use many io_service instances to listen on 1 port. thanks!  My program has socket, the above code is just a part of my program."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 9, "last_activity_date": 1446663692, "last_edit_date": 1446663692, "creation_date": 1446663370, "answer_id": 33529876, "question_id": 33529212, "link": "https://stackoverflow.com/questions/33529212/boost-asio-multiple-threads-and-multiple-io-service/33529876#33529876", "title": "Boost Asio, Multiple threads and multiple io_service", "body": "<p>You can use multiple threads, but you need to use 1 acceptor for a port.</p>\n\n<p>IO services are thread-safe, so you can use one service on many threads. </p>\n\n<p>You can even have multiple io services, no problem. You can't bind multiple acceptors to the same port though (unless you bind to different logical network interfaces, perhaps, but that's not really \"the same port\" then).</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n\nusing namespace boost::asio;\nusing namespace boost;\n\nint main() {\n    io_service io_service_;\n\n    ip::tcp::acceptor acceptor_(io_service_, { {}, 6767 });\n    acceptor_.bind({ ip::tcp::v4(), 6767 });\n\n    boost::thread_group tg;\n    for (unsigned i = 0; i &lt; thread::hardware_concurrency(); ++i)\n        tg.create_thread(boost::bind(&amp;io_service::run, &amp;io_service_));\n\n    // ...\n    //\n    tg.join_all();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1446689829, "post_id": 33530664, "comment_id": 54852381, "body": "Your answer seems to be exactly what I said an hour earlier."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475067178, "post_id": 33530664, "comment_id": 66792286, "body": "The <code>SO_REUSEADDRESS</code> option have nothing to do with accepting multiple simultaneous connections, that&#39;s allowed anyway (by assigning different port numbers to each accepted connection). Instead the <code>SO_REUSEADDR</code> option allows you to bind a socket to an address/port already bound to another socket which is in the <code>TIME_WAIT</code> state. That means you can close the socket, create a new, and bind it to the same address/port without getting an error."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 5, "last_activity_date": 1446666279, "creation_date": 1446666279, "answer_id": 33530664, "question_id": 33529212, "link": "https://stackoverflow.com/questions/33529212/boost-asio-multiple-threads-and-multiple-io-service/33530664#33530664", "title": "Boost Asio, Multiple threads and multiple io_service", "body": "<p>You can only have one <code>acceptor</code> listening on a given port.  If you want to handle multiple clients with one port, you'll need to set the option <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/reference/basic_socket_acceptor/reuse_address.html\" rel=\"noreferrer\"><code>reuse_address</code></a> on your <code>acceptor</code>.  That way the socket you pass to <code>async_accept()</code> will use a different port, leaving your listen port free to accept a connection from another client.</p>\n\n<pre><code>boost::asio::io_service ios_;\nboost::asio::ip::tcp::acceptor acceptor_(ios_);\n\nvoid handle_client(boost::shared_pointer&lt;boost::asio::ip::tcp::socket&gt; sock);\nvoid start_accept();\n\nint main() {\n    boost::asio::ip::tcp::endpoint ep(ip::tcp::v4(), LISTEN_PORT);\n    acceptor_.open(ep.protocol());\n    acceptor_.set_option(boost::asio::ip::tcp::acceptor::reuse_address(true));\n    acceptor_.bind(ep);\n    acceptor_.listen();\n    boost::thread_group threads;\n    for (int i = 0; i &lt; NUM_WORKER_THREADS; ++i) {\n        threads.create_thread(boost::bind(&amp;io_service::run, &amp;ios_));\n    }\n    start_accept();\n    threads.join_all();\n}\n\nvoid start_accept() {\n    boost::shared_pointer&lt;boost::asio::ip::tcp::socket&gt; sock(ios_);\n    acceptor_.async_accept(*sock, boost::bind(handle_client, sock));\n}\n\nvoid handle_client(boost::shared_pointer&lt;boost::asio::ip::tcp::socket&gt; sock) {\n    start_accept();\n    // talk to the client\n}\n</code></pre>\n\n<p>See <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost_asio/example/cpp11/http/server/\" rel=\"noreferrer\">Boost's HTTP server example</a> for a more complete example.</p>\n"}], "owner": {"reputation": 995, "user_id": 2693741, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/9awAN.png?s=128&g=1", "display_name": "Ikarus", "link": "https://stackoverflow.com/users/2693741/ikarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9156, "favorite_count": 4, "accepted_answer_id": 33529876, "answer_count": 2, "score": 6, "last_activity_date": 1446689406, "creation_date": 1446661216, "last_edit_date": 1446689406, "question_id": 33529212, "link": "https://stackoverflow.com/questions/33529212/boost-asio-multiple-threads-and-multiple-io-service", "title": "Boost Asio, Multiple threads and multiple io_service", "body": "<p>I want to develop a server use multiple threads and multiple io_service instance(each thread use an io_service instance) to listen at a port. For each io_service instance I create a corresponding boost::asio::ip::tcp::acceptor object. I try this code:</p>\n\n<pre><code> using namespace boost::asio;\n    ...\n    io_service io_service_;\n    io_service io_service_1;\n\n    ip::tcp::acceptor* acceptor_;\n    acceptor_ = new ip::tcp::acceptor(io_service_);\n    ip::tcp::endpoint ep( ip::tcp::v4(), LISTEN_PORT);\n    acceptor_-&gt;open(ep.protocol());\n    acceptor_-&gt;bind(ep);\n    acceptor_-&gt;listen();\n\n    ip::tcp::acceptor* acceptor_1;\n    acceptor_1 = new ip::tcp::acceptor(io_service_1);\n    acceptor_1-&gt;open(ep.protocol());\n    acceptor_1-&gt;bind(ep);\n    acceptor_1-&gt;listen();\n    ...\n\n    boost::thread th( boost::bind(&amp;io_service::run, &amp;io_service_));\n    boost::thread th( boost::bind(&amp;io_service::run, &amp;io_service_1));\n    ...\n</code></pre>\n\n<p>when running will display error dialog: </p>\n\n<blockquote>\n  <p>boost::exception_detail::clone_impl&lt; boost::exception_detail::error_info_injector > at memory location 0x001FF704.</p>\n</blockquote>\n\n<p>can you help me how to make a server with Multiple threads, each thread use an io_service instance?</p>\n\n<p><strong>Update:</strong> as I read in Boost.Asio C++ Network Programming, have 3 way to use io_service with thread:</p>\n\n<ol>\n<li>Single-thread with one io_service and one handler thread(thread running io_service::run())</li>\n<li>Multi-threaded with a single io_service instance and several\nhandler threads</li>\n<li>Multi-threaded with several io_service instances and several threads</li>\n</ol>\n\n<p>I can implement case 1 and 2. But with case 3, I don't know how to implement it to handle many concurrent connections, should I use 1 thread to handle 1 io_service(as above)? Is case 3 has better performance(can handle more concurrent connections) than case 2? </p>\n"}, {"tags": ["c++", "arrays", "file", "struct"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1446660849, "post_id": 33529083, "comment_id": 54839683, "body": "ofstream is not the most performant thing.. you can use C functions which are faster, but do you realyl need the speed? I&#39;m guessing it&#39;s not a production code.."}, {"owner": {"reputation": 2501, "user_id": 1795073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5a0ac48d1b8836dc6f679a9003d0dcf?s=128&d=identicon&r=PG", "display_name": "Pattu", "link": "https://stackoverflow.com/users/1795073/pattu"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1446661044, "post_id": 33529083, "comment_id": 54839811, "body": "It&#39;s for a school assignement. Actually I have a binary file of size 15GB or so and I want to convert it into a text file in the format shown above."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1446661279, "post_id": 33529083, "comment_id": 54839957, "body": "the whole deal shouldn&#39;t take more than couple of minutes if it&#39;s written correctly. I wouldn&#39;t go overkilling it for this. <code>sprintf</code> is the farest I&#39;d go with it"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1446661328, "post_id": 33529083, "comment_id": 54839988, "body": "<i>But it&#39;s slow</i> --  You never identified 1) What exactly is slow and 2) Whether you are running an optimized build or a non-optimized &quot;debug&quot; build.  For 1) You are calling the allocator <code>new [ ]</code> and you&#39;re doing I/O."}, {"owner": {"reputation": 2501, "user_id": 1795073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5a0ac48d1b8836dc6f679a9003d0dcf?s=128&d=identicon&r=PG", "display_name": "Pattu", "link": "https://stackoverflow.com/users/1795073/pattu"}, "edited": false, "score": 0, "creation_date": 1446661615, "post_id": 33529083, "comment_id": 54840148, "body": "I assume it&#39;s slow because the disk IO is slow. But I just want to know if there are any proper ways(clever C++ ways) to write an array of structs to a text file in the manner shown above."}, {"owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1446662116, "post_id": 33529083, "comment_id": 54840424, "body": "Can you just write as you read the data, rather than one and then the other? (Seconded on the mention of C functions by @DavidHaim, they&#39;re much faster than ofstream)"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1446662212, "post_id": 33529083, "comment_id": 54840471, "body": "@Pattu What is slow? Do you have actual value, to decide if it&#39;s sensible? And you need to show how you measure it. E.g. if it&#39;s kilobytes per second it&#39;s not fault of <code>ofstream</code>, if it&#39;s 100s MBps you probably hit the IO wall, so there is no point in doing it in a faster way."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1446662280, "post_id": 33529083, "comment_id": 54840516, "body": "@DavidHaim Would you care to provide a source for the claim? Generally people say otherwise. E.g <a href=\"http://stackoverflow.com/questions/17468088/performance-difference-between-c-and-c-style-file-io\" title=\"performance difference between c and c style file io\">stackoverflow.com/questions/17468088/&hellip;</a> , <a href=\"http://stackoverflow.com/questions/16351339/why-c-output-is-too-much-slower-than-c\" title=\"why c output is too much slower than c\">stackoverflow.com/questions/16351339/&hellip;</a> ."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1446662580, "post_id": 33529083, "comment_id": 54840674, "body": "@luk32 My own expirience, beacuse of that I didn&#39;t write it as an answer"}, {"owner": {"reputation": 2501, "user_id": 1795073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5a0ac48d1b8836dc6f679a9003d0dcf?s=128&d=identicon&r=PG", "display_name": "Pattu", "link": "https://stackoverflow.com/users/1795073/pattu"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1446662769, "post_id": 33529083, "comment_id": 54840779, "body": "@DavidHaim I will give it a shot with the c methods."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446665768, "post_id": 33529083, "comment_id": 54842495, "body": "I recommend using <i>block</i> writes rather than writing one instance at a time.  There is an overhead associated with a file transaction, whether you write 1 byte at a time or 1MB.  The idea is to keep the hard drive spinning or write as much as you can per transaction.  The call to <code>ofstream::write</code> or <code>fwrite</code> doesn&#39;t matter, the number of calls and the data per call is what matters."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1446666237, "creation_date": 1446666237, "answer_id": 33530650, "question_id": 33529083, "link": "https://stackoverflow.com/questions/33529083/fast-and-efficient-way-of-writing-an-array-of-structs-to-a-text-file/33530650#33530650", "title": "Fast and efficient way of writing an array of structs to a text file", "body": "<p>The most efficient method to write structures to a file is to write as many as you can in the fewest transactions.  </p>\n\n<p>Usually this means using an array and writing entire array with one transaction.  </p>\n\n<p>The file is a <em>stream</em> device and is most efficient when data is continuously flowing in the stream.  This can be as simple as writing the array in one call to more complicated using threads.  You will save more time by performing block or burst I/O than worrying about which function call to use.  </p>\n\n<p>Also, in my own programs, I have observed that placing formatted text into a buffer (array) and then block writing the buffer is faster than using a function to write the formatted text to the file.  There is a chance that the data stream may pause during the formatting.  With writing formatted data from a buffer, the flow of data through the stream is continuous.  </p>\n\n<p>There are other factors involved in writing to a file, such as allocating space on the media, other tasks running on your system and any sharing of the file media.  </p>\n\n<p>By using the above techniques, I was able to write GBs of data in minutes instead of the previous duration of hours.  </p>\n"}], "owner": {"reputation": 2501, "user_id": 1795073, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5a0ac48d1b8836dc6f679a9003d0dcf?s=128&d=identicon&r=PG", "display_name": "Pattu", "link": "https://stackoverflow.com/users/1795073/pattu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 621, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446666237, "creation_date": 1446660726, "question_id": 33529083, "link": "https://stackoverflow.com/questions/33529083/fast-and-efficient-way-of-writing-an-array-of-structs-to-a-text-file", "title": "Fast and efficient way of writing an array of structs to a text file", "body": "<p>I have a binary file. I am reading a block of data from that file into an array of structs using fread method. My struct looks like below.</p>\n\n<pre><code>struct Num {\n    uint64_t key;\n    uint64_t val\n};\n</code></pre>\n\n<p>My main goal is to write the array into a different text file with space separated key and value pairs in each line as shown below.</p>\n\n<pre><code>Key1 Val1\nKey2 Val2\nKey3 Val3\n</code></pre>\n\n<p>I have written a simple function to do this.</p>\n\n<pre><code>Num *buffer = new Num[buffer_size];\n// Read a block of data from the binary file into the buffer array.\nofstream out_file(OUT_FILE, ios::out);\nfor(size_t i=0; i&lt;buffer_size; i++)\n    out_file &lt;&lt; buffer[i].key &lt;&lt; ' ' &lt;&lt; buffer[i].val &lt;&lt; '\\n';\n</code></pre>\n\n<p>The code works. But it's slow. One more approach would be to create the entire string first and write to file only once at the end. </p>\n\n<p>But I want to know if there are any best ways to do this. I found some info about ostream_iterator. But I am not sure how it works.</p>\n"}, {"tags": ["c++", "rotation"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1446659693, "post_id": 33528714, "comment_id": 54838928, "body": "What doesn&#39;t work? Wrong results?"}], "answers": [{"tags": [], "owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "is_accepted": true, "score": 3, "last_activity_date": 1446660245, "last_edit_date": 1446660245, "creation_date": 1446659986, "answer_id": 33528863, "question_id": 33528714, "link": "https://stackoverflow.com/questions/33528714/rotation-function-weird-behaviour/33528863#33528863", "title": "Rotation function weird behaviour", "body": "<p>In your second function when you update <code>point-&gt;x</code> you are changing the properties of <code>point</code>. Therefore when you call the same function again later during setting of <code>point-&gt;z</code>, the value of <code>point-&gt;x</code> has already changed.</p>\n\n<pre><code>void Rotate3FY(Vector3F* point, Vector3F* center, float rad)\n{\n    point-&gt;x = GetDistance3FX_inline(point, center) * cos(rad) - GetDistance3FZ_inline(point, center) * sin(rad) + center-&gt;x;\n    // point is now different to what it was at the start because you just \n    // changed is x member!!!!!!!\n    point-&gt;z = GetDistance3FZ_inline(point, center) * cos(rad) + GetDistance3FX_inline(point, center) * sin(rad) + center-&gt;z;\n}\n</code></pre>\n\n<p>In the first function, you store the values you require in separate variables <strong>before</strong> modifying <code>point</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 4200867, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qaRaU.jpg?s=128&g=1", "display_name": "tomatocake", "link": "https://stackoverflow.com/users/4200867/tomatocake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33528863, "answer_count": 1, "score": 1, "last_activity_date": 1446660245, "creation_date": 1446659503, "last_edit_date": 1446659723, "question_id": 33528714, "link": "https://stackoverflow.com/questions/33528714/rotation-function-weird-behaviour", "title": "Rotation function weird behaviour", "body": "<p>I've been working on a rotation function. The points move sligthly to the rotation center with each cycle. It depends on a function to get the distance between the center and the point to rotate:</p>\n\n<pre><code>struct Vector3F\n{\n    float x, y, z;\n};\n\ninline float GetDistance3FX_inline(Vector3F* v1, Vector3F* v2) \n{ \n    return v1-&gt;x - v2-&gt;x; \n}\n\ninline float GetDistance3FZ_inline(Vector3F* v1, Vector3F* v2) \n{ \n    return v1-&gt;z - v2-&gt;z; \n}\n</code></pre>\n\n<p>The actual rotation function, that <strong>does</strong> work:</p>\n\n<pre><code>void Rotate3FY(Vector3F* point, Vector3F* center, float rad)\n{\n    float x = GetDistance3FX_inline(point, center);\n    float z = GetDistance3FZ_inline(point, center);\n    point-&gt;x = x * cos(rad) - z * sin(rad) + center-&gt;x;\n    point-&gt;z = z * cos(rad) + x * sin(rad) + center-&gt;z;\n}\n</code></pre>\n\n<p>The function that <strong>does not</strong> work:</p>\n\n<pre><code>void Rotate3FY(Vector3F* point, Vector3F* center, float rad)\n{\n    point-&gt;x = GetDistance3FX_inline(point, center) * cos(rad) - GetDistance3FZ_inline(point, center) * sin(rad) + center-&gt;x;\n    point-&gt;z = GetDistance3FZ_inline(point, center) * cos(rad) + GetDistance3FX_inline(point, center) * sin(rad) + center-&gt;z;\n}\n</code></pre>\n\n<p>I have no clue what logical difference there is between these two. \nThank your for any advice.</p>\n"}, {"tags": ["c++", "recursion", "switch-statement"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1446659292, "post_id": 33528548, "comment_id": 54838628, "body": "<code>&#39;A&#39; + 0..25</code> is a solution"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446659424, "post_id": 33528548, "comment_id": 54838727, "body": "I don&#39;t see why either <code>switch</code>, or recursion is actually necessary to solve this. Also post a complete test case (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) please."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1446659731, "post_id": 33528548, "comment_id": 54838959, "body": "Can you not just index a &quot;0123456789ABCDEF...........&quot; array?"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446662367, "post_id": 33528548, "comment_id": 54840563, "body": "Your baseConversion method is totally useless for bases greater than 10, so there is no place you could put that <code>switch</code> that would do anything toward solving the problem.  Try again with a valid base conversion method.  Hint: that outputs a string, not a number."}, {"owner": {"reputation": 1, "user_id": 4884948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200410258535408/picture?type=large", "display_name": "Alexander Jenness", "link": "https://stackoverflow.com/users/4884948/alexander-jenness"}, "edited": false, "score": 0, "creation_date": 1446662721, "post_id": 33528548, "comment_id": 54840751, "body": "I&#39;m pretty sure it works for bases greater than 10... Could you explain why you say that?"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446663084, "post_id": 33528548, "comment_id": 54840973, "body": "I&#39;m quite sure it does not work for bases greater than 10.  Even imagining it might work implies such a fundamental misunderstanding of what a number within a computer is, that there is no easy way to explain it to you.  First you need to unlearn something very wrong, before you can learn anything correct."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446664162, "post_id": 33528548, "comment_id": 54841625, "body": "A number in a computer is not a string.  When you multiply a number by ten, you are not shifting a string to the left by one.  Outside a computer, those not comfortable with math might act like a number is a string and might have even been taught that multiplying by 10 shifts that string left one place.  That viewpoint won&#39;t serve you very well in math outside a computer, and it is totally wrong for math inside a computer."}], "answers": [{"tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 0, "last_activity_date": 1446663303, "last_edit_date": 1446663303, "creation_date": 1446662888, "answer_id": 33529711, "question_id": 33528548, "link": "https://stackoverflow.com/questions/33528548/using-a-switch-with-a-recursive-function-in-c/33529711#33529711", "title": "Using a switch with a recursive function in C++", "body": "<p>Here is a crude recursive base conversion function to help you understand the difference between that and what you did:</p>\n\n<pre><code>std::string baseConversion(int num, int base)\n{\n   std::string result;\n   if (num&gt;=base) result = baseConversion(num/base, base);\n   num %= base;\n   if (num&lt;10) result += (char)('0' + num); else result += (char)('A'+num-10);\n   return result;\n}\n</code></pre>\n\n<p>That function starts with an empty string when <code>num&lt;base</code> or with a (recursive computation of) all but the rightmost digit when <code>num&gt;=base</code>.  </p>\n\n<p>Then it appends the last digit to that.</p>\n"}, {"comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446664540, "post_id": 33529949, "comment_id": 54841841, "body": "I think the recursion is great for understanding.  Without recursion, you get the digits produced in the opposite sequence from what you want.  With recursion, you can easily use the digits in the sequence you want regardless of whether that is the sequence they would normally be produced in.  There are certainly other ways to deal with the production sequence being backwards, including the trivial inefficient way of letting std::string take care of it, and more difficult efficient ways.  But for understanding base conversion without that worry, recursion is clearer."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446664774, "post_id": 33529949, "comment_id": 54841957, "body": "It is the <code>switch</code> not the recursion, that is bad for understanding and learning.  Generalizing rules so that multiple cases can be detected and processed without being individually listed is essential to programming.  If you don&#39;t do that, you are just writing some bad code but you are not programming.  (Both of us changed the <code>switch</code> to something a programmer might reasonably do)."}, {"owner": {"reputation": 570, "user_id": 808930, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6491bf3beb5cbe180f64bd5dd6891c1e?s=128&d=identicon&r=PG&f=1", "display_name": "notrai", "link": "https://stackoverflow.com/users/808930/notrai"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1446664986, "post_id": 33529949, "comment_id": 54842064, "body": "recursion is a great problem solving tool, agreed; just pointing out here that iteration could do that same without the additional function stacks; and I think here it is more intuitive too (entirely a personal opinion though); switch : couldn&#39;t agree more"}], "tags": [], "owner": {"reputation": 570, "user_id": 808930, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6491bf3beb5cbe180f64bd5dd6891c1e?s=128&d=identicon&r=PG&f=1", "display_name": "notrai", "link": "https://stackoverflow.com/users/808930/notrai"}, "is_accepted": false, "score": 0, "last_activity_date": 1446746114, "last_edit_date": 1446746114, "creation_date": 1446663625, "answer_id": 33529949, "question_id": 33528548, "link": "https://stackoverflow.com/questions/33528548/using-a-switch-with-a-recursive-function-in-c/33529949#33529949", "title": "Using a switch with a recursive function in C++", "body": "<p>you don't really need a switch, as also pointed in the comments : this can be done like so</p>\n\n<pre><code>string f(int n, int base) {\n    string res = \"\";\n    if (n &lt; base) \n        res += n &lt; 10 ? n : n + 'A' - 10;\n    else {\n        string t = f(n / base, base); \n        res += t + (n % base) &lt; 10 ? n % base : (n%base) + 'A' - 10; //t should be on LHS\n    }\n    return res;\n}\n</code></pre>\n\n<p>also, take care that you should return appending individual chars into either a string or a char array and not int data type as you are doing.</p>\n\n<p>as again pointed out in comments, don't need recursion here unless just for learning.</p>\n"}], "owner": {"reputation": 1, "user_id": 4884948, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200410258535408/picture?type=large", "display_name": "Alexander Jenness", "link": "https://stackoverflow.com/users/4884948/alexander-jenness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1880, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1446746114, "creation_date": 1446658996, "last_edit_date": 1446662384, "question_id": 33528548, "link": "https://stackoverflow.com/questions/33528548/using-a-switch-with-a-recursive-function-in-c", "title": "Using a switch with a recursive function in C++", "body": "<p>I am creating a program that coverts any base 10 number to any other base up to 36 using recursion and I cannot find the right spot to put my switch for changing any remainder that is returned by the recursive function larger than 9 into its letter counterpart. (A = 10, B = 11...) My conversion function uses recursion and seems to be making it a bit more difficult to implement the switch. Where would be the appropriate place to put the switch?</p>\n\n<p>Converting 200 from decimal to hexadecimal should be c8. My program prints it as 128. The 12 should be c which is what the switch is for.</p>\n\n<p>I am using recursion since it is a pretty simple way to convert to a new base. \nAs of now the program runs but still continues to output just numbers and is not switching. Thanks for any replies!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include&lt;cstdlib&gt;\n\nusing namespace std;\n\nint baseConversion(int num, int base);\n\nint main()\n{\n    int numInput;\n    int baseInput;\n\n    cout &lt;&lt; \"Enter number for conversion: \" &lt;&lt; endl;\n    cin&gt;&gt;numInput;\n    cout&lt;&lt;\"Enter the base you would like the number converted to: \"&lt;&lt;endl;\n    cin&gt;&gt;baseInput;\n\n//int temp2 = baseConversion(numInput,baseInput);\n\n\ncout &lt;&lt; numInput &lt;&lt;\" to the base \"&lt;&lt;baseInput&lt;&lt;\" is: \";\nswitch(baseConversion(numInput,baseInput))\n{\n    case 10:\n    cout &lt;&lt; \"A\";\n    break;\n    case 11:\n    cout &lt;&lt; \"B\";\n    break;\n    case 12:\n    cout &lt;&lt; \"C\";\n    break;\n    case 13:\n    cout &lt;&lt; \"D\";\n    break;\n    case 14:\n    cout &lt;&lt; \"E\";\n    break;\n    case 15:\n    cout &lt;&lt; \"F\";\n    break;\n    case 16:\n    cout &lt;&lt; \"G\";\n    break;\n    case 17:\n    cout &lt;&lt; \"H\";\n    break;\n    case 18:\n    cout &lt;&lt; \"I\";\n    break;\n    case 19:\n    cout &lt;&lt; \"J\";\n    break;\n    case 20:\n    cout &lt;&lt; \"K\";\n    break;\n    case 21:\n    cout &lt;&lt; \"L\";\n    break;\n    case 22:\n    cout &lt;&lt; \"M\";\n    break;\n    case 23:\n    cout &lt;&lt; \"N\";\n    break;\n    case 24:\n    cout &lt;&lt; \"O\";\n    break;\n    case 25:\n    cout &lt;&lt; \"P\";\n    break;\n    case 26:\n    cout &lt;&lt; \"Q\";\n    break;\n    case 27:\n    cout &lt;&lt; \"R\";\n    break;\n    case 28:\n    cout &lt;&lt; \"S\";\n    break;\n    case 29:\n    cout &lt;&lt; \"T\";\n    break;\n    case 30:\n    cout &lt;&lt; \"U\";\n    break;\n    case 31:\n    cout &lt;&lt; \"V\";\n    break;\n    case 32:\n    cout &lt;&lt; \"W\";\n    break;\n    case 33:\n    cout &lt;&lt; \"X\";\n    break;\n    case 34:\n    cout &lt;&lt; \"Y\";\n    break;\n    case 35:\n    cout &lt;&lt; \"Z\";\n    break;\n    default:\n        cout &lt;&lt;baseConversion(numInput,baseInput);\n    }\n    cout&lt;&lt;endl;\n\nreturn 0;\n}\n\nint baseConversion(int num, int base)\n{\nif(num == 0 || base == 10)\n    return num;\n\nreturn (num% base) + 10*baseConversion(num / base, base);\n\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c++", "wifi"], "comments": [{"owner": {"reputation": 4612, "user_id": 2385309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJPW4.jpg?s=128&g=1", "display_name": "72DFBF5B A0DF5BE9", "link": "https://stackoverflow.com/users/2385309/72dfbf5b-a0df5be9"}, "edited": false, "score": 0, "creation_date": 1446659142, "post_id": 33528520, "comment_id": 54838528, "body": "Also: <a href=\"https://stackoverflow.com/questions/9015514/parsing-packets-captured-using-wireshark-for-management-frames-identification-us\" title=\"parsing packets captured using wireshark for management frames identification us\">stackoverflow.com/questions/9015514/&hellip;</a>"}, {"owner": {"reputation": 4612, "user_id": 2385309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJPW4.jpg?s=128&g=1", "display_name": "72DFBF5B A0DF5BE9", "link": "https://stackoverflow.com/users/2385309/72dfbf5b-a0df5be9"}, "edited": false, "score": 0, "creation_date": 1446659177, "post_id": 33528520, "comment_id": 54838552, "body": "See: <a href=\"https://github.com/simsong/tcpflow/tree/master/src/wifipcap\" rel=\"nofollow noreferrer\">github.com/simsong/tcpflow/tree/master/src/wifipcap</a>"}, {"owner": {"reputation": 5840, "user_id": 4918012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/411c039b7185298d34b3d5ae8018f5eb?s=128&d=identicon&r=PG&f=1", "display_name": "nbroeking", "link": "https://stackoverflow.com/users/4918012/nbroeking"}, "reply_to_user": {"reputation": 4612, "user_id": 2385309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJPW4.jpg?s=128&g=1", "display_name": "72DFBF5B A0DF5BE9", "link": "https://stackoverflow.com/users/2385309/72dfbf5b-a0df5be9"}, "edited": false, "score": 0, "creation_date": 1446659199, "post_id": 33528520, "comment_id": 54838566, "body": "Both of those actually end up talking about parsing ethernet frames. Ethernet is fundamentally different than wifi."}, {"owner": {"reputation": 4612, "user_id": 2385309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJPW4.jpg?s=128&g=1", "display_name": "72DFBF5B A0DF5BE9", "link": "https://stackoverflow.com/users/2385309/72dfbf5b-a0df5be9"}, "edited": false, "score": 0, "creation_date": 1446659251, "post_id": 33528520, "comment_id": 54838596, "body": "See my last comment. P.S. They are talking about Wifi packets"}], "owner": {"reputation": 5840, "user_id": 4918012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/411c039b7185298d34b3d5ae8018f5eb?s=128&d=identicon&r=PG&f=1", "display_name": "nbroeking", "link": "https://stackoverflow.com/users/4918012/nbroeking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "closed_date": 1446659510, "answer_count": 0, "score": 0, "last_activity_date": 1446658899, "creation_date": 1446658899, "question_id": 33528520, "link": "https://stackoverflow.com/questions/33528520/how-can-i-parse-a-wifi-packet-with-libpcap-c", "closed_reason": "Duplicate", "title": "How can I parse a wifi packet with libpcap? (c++)", "body": "<p>I have a pipe that comes from another process that will spit out all wifi packets in the area. I need a way to parse the bytes and turn them into some sort of packet object that has src, destination, rssi and other such values. I would prefer to not have to write the processing myself (the wifi standard is over 1000 pages) but I can't find any library that will do this for me. Does anyone know of a library that can help with this? </p>\n\n<p>I am using c++ do all the processing. </p>\n"}, {"tags": ["c++", "inheritance", "multiple-inheritance", "reinterpret-cast"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446658242, "post_id": 33528199, "comment_id": 54837932, "body": "Is the <code>Base2</code> inheritance non-<code>public</code> on purpose?"}, {"owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446658321, "post_id": 33528199, "comment_id": 54837993, "body": "@zenith No. Does it make a difference?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446658465, "post_id": 33528199, "comment_id": 54838085, "body": "Yes. Otherwise you can&#39;t cast between <code>Base2</code> and <code>Derived</code>: <a href=\"http://stackoverflow.com/q/860339/3425536\">stackoverflow.com/q/860339/3425536</a>"}, {"owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446658509, "post_id": 33528199, "comment_id": 54838128, "body": "But it compiles and appears to run OK."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1446658548, "post_id": 33528199, "comment_id": 54838151, "body": "@ksl just because something compiles does not make it correct."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1446658552, "post_id": 33528199, "comment_id": 54838153, "body": "Well you&#39;re using <code>reinterpret_cast</code>, so obviously. Probably undefined behavior though."}, {"owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "edited": false, "score": 0, "creation_date": 1446658697, "post_id": 33528199, "comment_id": 54838249, "body": "I&#39;ve corrected Derived to inherit publicly from Base2."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1446658982, "post_id": 33528199, "comment_id": 54838430, "body": "Can you cast <code>instance1</code> to <code>Derived*</code> instead ?"}], "answers": [{"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "edited": false, "score": 0, "creation_date": 1446658940, "post_id": 33528273, "comment_id": 54838399, "body": "@ksl Cast to <code>Derived*</code>."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1446659006, "last_edit_date": 1446659006, "creation_date": 1446658165, "answer_id": 33528273, "question_id": 33528199, "link": "https://stackoverflow.com/questions/33528199/use-of-reinterpret-cast/33528273#33528273", "title": "Use of reinterpret_cast", "body": "<p>In this case, a simple <code>dynamic_cast</code> to <code>Derived*</code> would be preferred:</p>\n\n<pre><code>Base2* instance2 = dynamic_cast&lt;Derived*&gt;(instance1);\n</code></pre>\n\n<p>(Or <code>static_cast</code> if you <em>know</em> that <code>*instance1</code> is really a <code>Derived</code>, and you don't want the dynamic dispatch overhead. Not recommended though.)</p>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1446658913, "creation_date": 1446658913, "answer_id": 33528526, "question_id": 33528199, "link": "https://stackoverflow.com/questions/33528199/use-of-reinterpret-cast/33528526#33528526", "title": "Use of reinterpret_cast", "body": "<p><code>reinterpret_cast</code> doesn't know how to handle casting between siblings (for example in vtable implementations it won't fix up the <code>this</code> pointer) so it will definitely not work. Note that it may <em>appear</em> to do what you expect. You'll want to use <code>dynamic_cast</code> in this case, or alternately <code>static_cast</code> to derived and use the implicit conversion to <code>base2</code>.</p>\n"}], "owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 33528526, "answer_count": 2, "score": 2, "last_activity_date": 1446659085, "creation_date": 1446657910, "last_edit_date": 1446658644, "question_id": 33528199, "link": "https://stackoverflow.com/questions/33528199/use-of-reinterpret-cast", "title": "Use of reinterpret_cast", "body": "<p>Is there anything wrong with the following code? In particular I'm interested in the use of <code>reinterpret_cast</code>.</p>\n\n<pre><code>class Base1\n{\npublic:\n    virtual void foo(){}\n};\n\nclass Base2\n{\npublic:\n    virtual void bar(){}\n};\n\nclass Derived : public Base1, public Base2\n{\n};\n\nint main()\n{\n    Base1* instance1 = new Derived();\n    instance1-&gt;foo();\n\n    Base2* instance2 = reinterpret_cast&lt;Base2*&gt;(instance1);\n    instance2-&gt;bar();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "std"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1446659656, "post_id": 33528082, "comment_id": 54838894, "body": "Doesn&#39;t <code>std::bind</code> support composition on its own, so this should work if you replace <code>__gnu_cxx::compose2</code> by <code>std::bind</code> ?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1446660259, "post_id": 33528082, "comment_id": 54839315, "body": "@PiotrSkotnicki Yes, you can. Not sure why I initially replied to you that you couldn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "edited": false, "score": 0, "creation_date": 1446658737, "post_id": 33528457, "comment_id": 54838275, "body": "My example above is far-simplified from what I&#39;m actually doing."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "edited": false, "score": 0, "creation_date": 1446658764, "post_id": 33528457, "comment_id": 54838295, "body": "@WillBeason Well I&#39;m sure what you&#39;re actually doing would benefit from using a lambda too."}, {"owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "edited": false, "score": 3, "creation_date": 1446658959, "post_id": 33528457, "comment_id": 54838416, "body": "I understand how to do this with lambdas. The point of this question is to learn how to use <code>std::bind</code> in scenarios such as this."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "edited": false, "score": 0, "creation_date": 1446659566, "post_id": 33528457, "comment_id": 54838832, "body": "@WillBeason And the answer is to not use <code>std::bind</code> in scenarios such as this."}, {"owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "edited": false, "score": 0, "creation_date": 1446660288, "post_id": 33528457, "comment_id": 54839327, "body": "Nice, I didn&#39;t realize they could be nested like that!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1446660288, "last_edit_date": 1446660288, "creation_date": 1446658683, "answer_id": 33528457, "question_id": 33528082, "link": "https://stackoverflow.com/questions/33528082/how-to-use-stdbind-with-compose2/33528457#33528457", "title": "How to use std::bind with compose2?", "body": "<p>Just don't use <code>bind</code> or <code>compose2</code>. You will thank yourself later:</p>\n\n<pre><code>int NumBothCriteria(std::vector&lt;int&gt; v) {\n  return std::count_if(v.begin(), v.end(),\n                       [](int i){ return i &gt; 5 &amp;&amp; i%3 == 0; });\n}\n</code></pre>\n\n<hr />\n\n<p>The answer you're looking for is that you can simply use <code>std::bind</code> in place of where you're using <code>__gnu_cxx::compose2</code>:</p>\n\n<pre><code>return std::count_if(v.begin(), v.end(),\n    std::bind(std::logical_and&lt;bool&gt;(),\n        std::bind(DivisibleByN(), _1, 3),\n        std::bind(GreaterThanFive, _1)));\n</code></pre>\n\n<p>But that is far more complicated and harder to reason about than just using a lambda. </p>\n"}, {"tags": [], "owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "is_accepted": false, "score": 0, "last_activity_date": 1446660238, "creation_date": 1446660238, "answer_id": 33528943, "question_id": 33528082, "link": "https://stackoverflow.com/questions/33528082/how-to-use-stdbind-with-compose2/33528943#33528943", "title": "How to use std::bind with compose2?", "body": "<p>I figured out how to make it work with <code>std::function</code>.</p>\n\n<pre><code>int NumBothCriteria2(std::vector&lt;int&gt; v) {\n  using std::placeholders::_1;\n  return std::count_if(v.begin(), v.end(),\n                       __gnu_cxx::compose2(std::logical_and&lt;bool&gt;(),\n                                           std::function&lt;int(int)&gt;(std::bind(\n                                               DivisibleByN(), _1, 3)),\n                                           std::ref(GreaterThanFive)));\n}\n</code></pre>\n"}], "owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 33528457, "answer_count": 2, "score": 1, "last_activity_date": 1446660288, "creation_date": 1446657602, "last_edit_date": 1495541206, "question_id": 33528082, "link": "https://stackoverflow.com/questions/33528082/how-to-use-stdbind-with-compose2", "title": "How to use std::bind with compose2?", "body": "<p>I would like to use a <code>binary_function</code> in a <code>compose2</code> in C++11 with <code>std::bind</code> without using the <code>boost</code> library.</p>\n\n<p><strong>EDIT:</strong> or labmdas.</p>\n\n<p>Suppose I have the following definitions:</p>\n\n<pre><code>bool GreaterThanFive(int x) { return x &gt; 5; }\n\nstruct DivisibleByN : binary_function&lt;int, int, bool&gt; {\n  bool operator()(int x, int n) const { return x % n == 0; }\n};\n</code></pre>\n\n<p>Say I want to count the elements of a vector which are greater than 5 and divisible by 3. I can easily combine them with the following:</p>\n\n<pre><code>int NumBothCriteria(std::vector&lt;int&gt; v) {\n  return std::count_if(v.begin(), v.end(),\n                       __gnu_cxx::compose2(std::logical_and&lt;bool&gt;(),\n                                           std::bind2nd(DivisibleByN(), 3),\n                                           std::ref(GreaterThanFive)));\n}\n</code></pre>\n\n<p>As <code>bind2nd</code> is deprecated as of C++11, I would like to move to <code>std::bind</code>. I haven't yet figured out why the following is not equivalent (and does not compile).</p>\n\n<pre><code>int NumBothCriteria(std::vector&lt;int&gt; v) {\n  using namespace std::placeholders;\n  return std::count_if(v.begin(), v.end(),\n                       __gnu_cxx::compose2(std::logical_and&lt;bool&gt;(),\n                                           std::bind(DivisibleByN(), _1, 3),\n                                           std::ref(GreaterThanFive)));\n}\n</code></pre>\n\n<p>It gives me the following compile error:</p>\n\n<pre><code>no type named 'argument_type' in 'std::_Bind&lt;DivisibleByN *(std::_Placeholder&lt;1&gt;, int)&gt;`\n  operator()(const typename _Operation2::argument_type&amp; __x) const\n                   ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~\n</code></pre>\n\n<p>My intuition is that <code>std::bind</code> isn't doing something that <code>std::bind2nd</code> does, but I'm not sure how to get the <code>argument_type</code> typedef back.</p>\n\n<p><a href=\"https://stackoverflow.com/search?q=std+bind+compose2\">My search came up with three questions.</a> The first uses <code>bind2nd</code>, the second uses <code>boost</code>, and the third is for C++03. Unfortunately <em>Effective STL</em> still uses the <code>std::bind2nd</code>.</p>\n"}, {"tags": ["c++", "linux", "windows", "file-extension"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1446657295, "post_id": 33527949, "comment_id": 54837286, "body": "You could install a virtual machine manager (e.g., VirtualBox), and install  a copy of Linux in it, then run that executable in that copy of Linux. Pretty sure Windows won&#39;t run Linux executables directly though."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1446657681, "post_id": 33527949, "comment_id": 54837569, "body": "what if he needs that executable to run in windows environment? I wonder if disassembling the executable to assembly code under linux and then taking the .asm file and assembling in windows would work. I hope a compiler junkie chimes in on this"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 1, "creation_date": 1446657904, "post_id": 33527949, "comment_id": 54837690, "body": "@IIIIIIIIIIIIIIIIIIIIIIII Converting the binary format is possible to some degree, but then the next problem is the completely different set of runtime libs. (Even a hello-world program with only standard language features calls many OS-dependent function before and after main when in compiled form). Just recompiling (if the code is sufficiently platform-independent) is waayy easier."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1446657920, "post_id": 33527949, "comment_id": 54837704, "body": "A file extension doesn&#39;t necessarily tell you anything about the file&#39;s content. Unix compilers use the name <code>a.out</code> for generated executables by default, but you should almost always specify a more meaningful name. Are you asking about an <code>a.out</code> file? How was it generated?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1446658630, "post_id": 33527949, "comment_id": 54838205, "body": "@JerryCoffin Running in a linux VM won&#39;t guarantee to get it running actually, unless it was compiled on the exact same platform."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446658925, "post_id": 33527949, "comment_id": 54838390, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Right--it&#39;s a necessary (but not sufficient) condition."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446660315, "post_id": 33527949, "comment_id": 54839346, "body": "It&#39;s very unlikely that this file is actually a Linux executable. And if you had to do research to find out that it&#39;s an executable, the next step is definitely <i>not</i> trying to run it! If it really is an <code>a.out</code> file, you can&#39;t view it as &quot;proper code&quot;, because it&#39;s an executable, not source."}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1446663509, "post_id": 33527949, "comment_id": 54841252, "body": "@IIIIIIIIIIIIIIIIIIIIIIII, even if you dissassemble it the assembly wont run."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1446674809, "post_id": 33527949, "comment_id": 54847536, "body": "@IIIIIIIIIIIIIIIIIIIIIIII Additional information to my previous comment, some hours ago: In theory, each problematic function call could be replaced manually by function calls (or larger code pieces) which do the same thing for the other OS. But a) this won&#39;t work automatically, because b) this is basically porting the program to another OS. While working in the binary format. ... Porting is easier with the source (and even easier if the source is written independly of the OS: only recompiling then). Nobody will try to port a binary file if the source could be used instead, it&#39;s just too hard"}, {"owner": {"reputation": 323, "user_id": 4385622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rqvxd.jpg?s=128&g=1", "display_name": "Aswin G", "link": "https://stackoverflow.com/users/4385622/aswin-g"}, "edited": false, "score": 0, "creation_date": 1446831552, "post_id": 33527949, "comment_id": 54922967, "body": "I got the file as part of an online challenge. I already have the information that the file was generated using C code. I just need to run it. I tried installing Virtualbox, but ran into a host of problems. I&#39;m hating how a tiny .out file is making me go into larger and larger issues lol."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446658717, "post_id": 33528125, "comment_id": 54838264, "body": "You should note, that using Cygwin still needs recompilation as well. Also POSIX standard is unrelated in this case."}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 1, "creation_date": 1446663585, "post_id": 33528125, "comment_id": 54841300, "body": "Cygwin doesn&#39;t allow Linux executables to be run. They are windows executables with cygwin code which mimicks linux calls to some extent."}], "tags": [], "owner": {"reputation": 363, "user_id": 3786711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7iuC.jpg?s=128&g=1", "display_name": "Mayur Bhangale", "link": "https://stackoverflow.com/users/3786711/mayur-bhangale"}, "is_accepted": false, "score": 2, "last_activity_date": 1446658858, "last_edit_date": 1446658858, "creation_date": 1446657710, "answer_id": 33528125, "question_id": 33527949, "link": "https://stackoverflow.com/questions/33527949/is-it-possible-to-run-out-files-in-windows/33528125#33528125", "title": "Is it possible to run .out files in windows?", "body": "<p>There's no way of directly converting a linux executable to Windows format.\nYou'll have to recompile or use <a href=\"http://www.cygwin.com/\" rel=\"nofollow\">Cygwin</a>, It allows running Linux commands in Windows environment.</p>\n"}, {"comments": [{"owner": {"reputation": 323, "user_id": 4385622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rqvxd.jpg?s=128&g=1", "display_name": "Aswin G", "link": "https://stackoverflow.com/users/4385622/aswin-g"}, "edited": false, "score": 0, "creation_date": 1446830985, "post_id": 33542638, "comment_id": 54922615, "body": "Thanks for the answer. I&#39;m trying hard to get the code out of the file. Online dissassembler and boomerang decompiler (Which gave a partial C code) has helped, but it looks like I can&#39;t do anything without having access to a Linux system."}, {"owner": {"reputation": 323, "user_id": 4385622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rqvxd.jpg?s=128&g=1", "display_name": "Aswin G", "link": "https://stackoverflow.com/users/4385622/aswin-g"}, "edited": false, "score": 0, "creation_date": 1446831471, "post_id": 33542638, "comment_id": 54922915, "body": "I was wondering, is there any website that allows me to upload and run .out files online, like the way it would run from a Linux terminal?"}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "reply_to_user": {"reputation": 323, "user_id": 4385622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rqvxd.jpg?s=128&g=1", "display_name": "Aswin G", "link": "https://stackoverflow.com/users/4385622/aswin-g"}, "edited": false, "score": 0, "creation_date": 1446831673, "post_id": 33542638, "comment_id": 54923040, "body": "Not sure, but I would doubt it,"}], "tags": [], "owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "is_accepted": false, "score": 1, "last_activity_date": 1446720534, "creation_date": 1446720534, "answer_id": 33542638, "question_id": 33527949, "link": "https://stackoverflow.com/questions/33527949/is-it-possible-to-run-out-files-in-windows/33542638#33542638", "title": "Is it possible to run .out files in windows?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/A.out\" rel=\"nofollow\">a.out</a> is not neccessarily related to C or C++, it can be generated from any other kind of compiler/assembler. If you read the article, then you can see that it isn't even guaruanteed that this actually is what you may think of <code>a.out</code> format.</p>\n\n<p>In order to execute it, the only possible way to achieve this is to install a Unix OS to execute it, but this again wont guaruantee that it really can be executed, because there may be dependencies or the wrong OS, etc..</p>\n\n<p>To view the content of the file, there are different utillities on different platforms. For example you can use <code>objdump</code> on <code>Linux</code> or <code>Cygwin/Windows</code> to take a look at it. You can use a disassembler and see if you can make sense of it. On Windows you can use <code>IDA</code> which covers a broad range of fileformats and may be able to dissect it.</p>\n\n<p>Now that you managed to take a look inside it, there is the next issue you asked for, by converting it. This is a tedious process though, because you must do it by hand. If IDA could identify it, you get a good start because you now have an assembly source as a starting point, but it will likely not assemble, and certainly not run on your target platform (Windows).</p>\n"}], "owner": {"reputation": 323, "user_id": 4385622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Rqvxd.jpg?s=128&g=1", "display_name": "Aswin G", "link": "https://stackoverflow.com/users/4385622/aswin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9900, "favorite_count": 0, "closed_date": 1447803848, "answer_count": 2, "score": -2, "last_activity_date": 1446720534, "creation_date": 1446657216, "question_id": 33527949, "link": "https://stackoverflow.com/questions/33527949/is-it-possible-to-run-out-files-in-windows", "closed_reason": "Not suitable for this site", "title": "Is it possible to run .out files in windows?", "body": "<p>I have a file with the extension .out . I'm running windows 10. From what I understand, .out files are generated while coding in C and C++ in Linux. I was wondering if there was any way in which I could execute the file in windows. Renaming it's extension to .exe gave me an error saying the file was incompatible with 64-bit version of windows.</p>\n\n<p>So is there any way I could execute the file, or better yet, view it's contents as proper code so I can work with it, while using Windows?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1446657175, "post_id": 33527864, "comment_id": 54837207, "body": "Your question is unclear. You aren&#39;t even using <code>cin</code> anywhere in the code you posted, and we don&#39;t know what <code>b</code>, <code>i</code>, and <code>v</code> are or what they have to do with what you&#39;re asking."}, {"owner": {"reputation": 1, "user_id": 5446982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e44e018c415221175b7511626347ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Rusz", "link": "https://stackoverflow.com/users/5446982/daniel-rusz"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1446657427, "post_id": 33527864, "comment_id": 54837376, "body": "I understand you. I mean. I have on cin decimal Binary number. Like 010101 and at Cout I transfer it into decimal .. so for example, when u put into cin 1100, cout will go out with 12. When u put into cin 123, cout will fail with some error message &quot;Nespravny vstup&quot; because 2 and 3 are not from binary numbers. And I need program to fail if somebody will put space at the start of inputting cin .. Like .. _0101 .. In this case I need program to fail .."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1446657782, "post_id": 33527864, "comment_id": 54837624, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1, "user_id": 5446982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e44e018c415221175b7511626347ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Rusz", "link": "https://stackoverflow.com/users/5446982/daniel-rusz"}, "edited": false, "score": 0, "creation_date": 1446657894, "post_id": 33527864, "comment_id": 54837683, "body": "Ok I editted it, put in complete program.Hopefully u will understand me now."}], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1446669038, "creation_date": 1446669038, "answer_id": 33531424, "question_id": 33527864, "link": "https://stackoverflow.com/questions/33527864/c-cin-fail-when-space-on-begining/33531424#33531424", "title": "C++ - Cin.fail when space on begining", "body": "<p><code>cin &gt;&gt; b;</code> will skip leading whitespace and then read the next word. That's how it is designed.</p>\n\n<p>If you want to read an entire line of input, use <code>getline</code> instead.</p>\n\n<p>It will also be much easier, and a lot safer, if you read into a <code>std::string</code> instead of a fixed size <code>char b[80];</code>. If you ever happen to read more than 80 characters into that, you're toast.</p>\n"}], "owner": {"reputation": 1, "user_id": 5446982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e44e018c415221175b7511626347ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Rusz", "link": "https://stackoverflow.com/users/5446982/daniel-rusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1446669038, "creation_date": 1446656948, "last_edit_date": 1446657875, "question_id": 33527864, "link": "https://stackoverflow.com/questions/33527864/c-cin-fail-when-space-on-begining", "title": "C++ - Cin.fail when space on begining", "body": "<p>I need help with cin.fail when it starts with a space.</p>\n\n<p>This is what I mean.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\nint main ()\n{\n    char b[80];\n    int e,d,v,m=0;\n\n    for(int i=0;i&lt;80;i++)\n    {\n        b[i]=0;\n    }\n\n    cout &lt;&lt; \"Insert number in binary:\" &lt;&lt; endl;\n    cin &gt;&gt; b;\n\n    v=0;\n    for(int i=0;i&lt;80;i++)\n    {\n        if(b[i]=='1' || b[i]=='0' || b[i]=='\\n')\n        {\n        v++;\n        }\n        else if(b[i]!=0 || b[i]!='\\0' || b[i]==' ')\n        {\n            cout &lt;&lt; \"Error\" &lt;&lt; endl;\n            return 0;\n        }\n    }\n\n    e=v-1;\n    d=0;\n    m=0;\n    for(int i=0;i&lt;v;i++)\n    {\n      m=(b[i]-48)*(pow(2,e));\n      d=d+m;\n      e=e-1;\n    }\n\n    cout &lt;&lt; \"His number in decimal: \"&lt;&lt; d &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>When there is something like 1010 it OK, it will give me number.\nIf it contains other number - 2,3 etc.. it will fail, its OK\nBut when it get something like _101010 .. programm will still proceed and it will give me number, but I need it to fail. So I need something like .. when b contains 1 0 or \\n, programm will continue, otherwise it will fail. But when I put in \\n like </p>\n\n<p><code>if(b[i]=='1' || b[i]=='0' || b[i]=='\\n')</code> - its not working .. I mean, programm fails in any case ... </p>\n\n<p>Sorry for asking on this \"stupid\" question, but I am doing it for hours and still didnt figure it out .. Thanks guys.</p>\n"}, {"tags": ["c++", "arrays", "dynamic-memory-allocation"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1446657261, "post_id": 33527914, "comment_id": 54837258, "body": "Even <code>const int&amp;</code> as a return type for the <code>const</code> overload, I&#39;d say."}, {"owner": {"reputation": 183, "user_id": 4396280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k9tCT.jpg?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/4396280/george"}, "edited": false, "score": 0, "creation_date": 1446657534, "post_id": 33527914, "comment_id": 54837460, "body": "When executing I get a Aborted(Core dumped). In the book I am reading, they add the function  Array&amp; operator= (const Array&amp; ar)              {                     delete m_ptr;                     copy(ar);                     return *this;              } I do not understand why do we need to use this function. How does it help us not to have the Aborted(Core dumped) message at the end of the execution?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 183, "user_id": 4396280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k9tCT.jpg?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/4396280/george"}, "edited": false, "score": 0, "creation_date": 1446657743, "post_id": 33527914, "comment_id": 54837601, "body": "@George, I suggest you ask another question with the fixed up code instead of trying to get answer to that in comments."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446657343, "last_edit_date": 1446657343, "creation_date": 1446657128, "answer_id": 33527914, "question_id": 33527805, "link": "https://stackoverflow.com/questions/33527805/c-error-passing-const-as-this-array/33527914#33527914", "title": "C++ error: Passing &#39;const&#39; as &#39;this&#39; array", "body": "<p><strong>Issue 1</strong></p>\n\n<p>You don't need the <code>Array::</code> in</p>\n\n<pre><code>void Array::copy(const Array&amp; ar) { ... }\n</code></pre>\n\n<p>when the function is defined inside the class definition. It can simply be</p>\n\n<pre><code>void copy(const Array&amp; ar) { ... }\n</code></pre>\n\n<p>You need the <code>Array::</code> part only when the function is defined outside the class definition.</p>\n\n<p><strong>Issue 2</strong></p>\n\n<p>In <code>print</code>, you have the line:</p>\n\n<pre><code>              cout&lt;&lt;ar[i]&lt;&lt;\"  \";\n</code></pre>\n\n<p>Since <code>ar</code> is a <code>const</code> object and the <code>operator[]()</code> function is not a <code>const</code> member function, the compiler doesn't like it. What you should do is provide two overloads of the <code>operator[]</code> function -- one for <code>const</code> objects and one for non-<code>const</code> objects.</p>\n\n<pre><code>int&amp; operator[] (int j)\n{\n   return m_ptr[j];\n}\n\nint operator[] (int j) const\n{\n   return m_ptr[j];\n}\n</code></pre>\n\n<p>Then, you can use the array operator to access the elements of a <code>const</code> object as well as access and modify the elements of a non-<code>const</code> object.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1446657234, "creation_date": 1446657234, "answer_id": 33527959, "question_id": 33527805, "link": "https://stackoverflow.com/questions/33527805/c-error-passing-const-as-this-array/33527959#33527959", "title": "C++ error: Passing &#39;const&#39; as &#39;this&#39; array", "body": "<p>Just change</p>\n\n<pre><code>void Array::copy(const Array&amp; ar)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>void copy(const Array&amp; ar)\n</code></pre>\n\n<p>The class scope qualifier is only needed for function definitions appearing outside of the class declaration.</p>\n"}], "owner": {"reputation": 183, "user_id": 4396280, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k9tCT.jpg?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/4396280/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446657802, "creation_date": 1446656772, "last_edit_date": 1446657802, "question_id": 33527805, "link": "https://stackoverflow.com/questions/33527805/c-error-passing-const-as-this-array", "title": "C++ error: Passing &#39;const&#39; as &#39;this&#39; array", "body": "<p>I am getting  <code>passing 'const Array' as 'this' argument of 'int&amp; Array::operator[](int)'  discards qualifiers</code> when compiling under <code>Dev C++</code>. If I compile using <code>gcc</code> on <code>cygwin</code> I've got a few error messages of this type:</p>\n\n<pre><code> error: extra qualification \u2018Array::\u2019 on member \u2018Array\u2019 [-fpermissive]\n</code></pre>\n\n<p>Can you tell me what is the reason for the error? I've spent a lot of time on this code and still can't make it work correctly.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass Array\n{\n      int *m_ptr;\n      int m_size;\n      public:\n             Array(int sz)\n             {\n                       cout&lt;&lt;\"constructor\\n\";\n                       m_size = sz;\n                       m_ptr = new int[sz];\n             }\n             ~Array()\n             {\n                     cout&lt;&lt;\"Delete\\n\";\n                     delete[] m_ptr;\n             }\n             int&amp; operator[] (int j)\n             {\n                  cout&lt;&lt;\"Operation []\\n\";\n                  return m_ptr[j];\n             }\n             void Array::copy(const Array&amp; ar)\n             {\n                  m_size = ar.m_size;\n                  m_ptr = new int[m_size];\n                  int *ptr = ar.m_ptr;\n                  int j;\n                  for(j = 0;j &lt; m_size; j++)\n                  m_ptr[j] = ptr[j];\n             }\n             Array::Array(const Array&amp; ar)\n             {\n                                copy(ar);\n             }\n\n             void Array::print(const Array&amp; ar)\n             {\n                  int i;\n                  int len = ar.m_size;\n                  for(i = 0;i &lt; len;i++)\n                  cout&lt;&lt;ar[i]&lt;&lt;\"  \";\n                  cout&lt;&lt;endl;\n             }\n};\nint main()\n{\n    Array a1(10);\n    Array a2(5);\n    int i;\n    for(i = 0;i &lt; 10;i++)\n    {\n          a1[i] = 1;\n          if(i &lt; 5) a2[i] = 2;\n    }\n    print(a1);\n\n    return 0;\n}\n</code></pre>\n\n<p>Furthermore,  the book I am reading also has the function </p>\n\n<pre><code>Array&amp; operator= (const Array&amp; ar) \n{ \n   delete m_ptr; \n   copy(ar); \n   return *this; \n}\n</code></pre>\n\n<p>I do not understand why do we need to use this function.</p>\n"}, {"tags": ["c++", "function", "operator-keyword"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446656636, "post_id": 33527742, "comment_id": 54836820, "body": "What error did you encounter?"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446656793, "post_id": 33527742, "comment_id": 54836930, "body": "@cad, I listed the error above."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 1, "creation_date": 1446657308, "post_id": 33527742, "comment_id": 54837299, "body": "Why don&#39;t you just use <code>strncpy</code> again, like you did before?"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446657595, "post_id": 33527742, "comment_id": 54837502, "body": "Can you copy literal text into strncpy? such as strncpy(n._name , &quot;new name&quot;, 40); ?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1446659210, "post_id": 33527742, "comment_id": 54838572, "body": "In your edit, you have switched the first two operands of the strncpy function.  Did you look up the reference to strncpy that I referenced below?"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1446659309, "post_id": 33527742, "comment_id": 54838643, "body": "@AnonMail, yes i wanna put &quot;new name&quot; or &quot;joint&quot; into n._name.. not sure how to do that"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1446659548, "post_id": 33527742, "comment_id": 54838815, "body": "That&#39;s not how an assignment operator works.  The signature operator= has a well defined meaning in C++.  If you want your class to do something that is not assignment, then name your function something else.  Otherwise you confuse everybody."}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446659642, "post_id": 33527742, "comment_id": 54838885, "body": "i specifically want to set  _name into whatever string is passed into n,"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1446659954, "post_id": 33527742, "comment_id": 54839129, "body": "I renamed you Account::operator= to Account::foo.  And it compiled and ran successfully."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1446660493, "post_id": 33527742, "comment_id": 54839456, "body": "Use <code>std::string</code> please."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446656903, "post_id": 33527796, "comment_id": 54837015, "body": "<code>strncpy(n._name, _name); </code> ?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "reply_to_user": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446657192, "post_id": 33527796, "comment_id": 54837216, "body": "No.  You would have to supply an n as the third argument.  Also, look up std::strncpy so you know the arguments it expects.  See that here: <a href=\"http://en.cppreference.com/w/cpp/string/byte/strncpy\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/strncpy</a>"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446657384, "post_id": 33527796, "comment_id": 54837347, "body": "std::strncpy(_name,n._name, 40); Wont work. Says error under _name  const char is incompatible with char"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446657476, "post_id": 33527796, "comment_id": 54837417, "body": "All i need it to do is set the name passed reference or for example A to new name so shouldnt n._name = &quot;new name&quot;; work?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "reply_to_user": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446658009, "post_id": 33527796, "comment_id": 54837757, "body": "With some minor adjustments I was able to get it to compile strncpy to work by doing the same thing as in your constructor.  The adjustments were to remove the const qualifier from the assignment operator member function.  And to make the argument to the assignment operator const."}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446658205, "post_id": 33527796, "comment_id": 54837904, "body": "binary &#39;=&#39; : no operator found which takes a right-hand operand of type &#39;const char [6]&#39; (or there is no acceptable conversion)"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "reply_to_user": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446658544, "post_id": 33527796, "comment_id": 54838146, "body": "Can you edit you code in the original question so we can see what you&#39;re doing."}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446658766, "post_id": 33527796, "comment_id": 54838296, "body": "Could i possible use string&amp; operator=( const string&amp; str);? i tried using it however it wouldnt let me implement it."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1446658976, "post_id": 33527796, "comment_id": 54838424, "body": "<b>Don&#39;t use <code>strncpy</code></b>, unless you really have to deal in 0-padded (<i>not</i> terminated) buffers of fixed length."}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "edited": false, "score": 0, "creation_date": 1446658995, "post_id": 33527796, "comment_id": 54838440, "body": "What would i do then? I&#39;m lost haha"}, {"owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1446659182, "post_id": 33527796, "comment_id": 54838554, "body": "@deduplicator what do you mean?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1446659352, "post_id": 33527796, "comment_id": 54838663, "body": "Make <code>_name</code> a <code>std::string</code>. Or at least be consistent in whether it&#39;s a C-string stored in the beginning of that buffer, or non-zero bytes stored in a zero-padded buffer of fixed length."}], "tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1446656738, "creation_date": 1446656738, "answer_id": 33527796, "question_id": 33527742, "link": "https://stackoverflow.com/questions/33527742/c-operator-functions/33527796#33527796", "title": "c++ Operator functions", "body": "<p>You can't assign an array.  In your case, you can do a strncpy (as you did in your constructor) into the array.  But, in general, it's much better to use std::string.</p>\n"}, {"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 2, "last_activity_date": 1446659863, "creation_date": 1446659863, "answer_id": 33528831, "question_id": 33527742, "link": "https://stackoverflow.com/questions/33527742/c-operator-functions/33528831#33528831", "title": "c++ Operator functions", "body": "<p>You <code>operator=</code> is written backwards!</p>\n\n<pre><code>Account&amp; Account::operator=( Account&amp; n) const {\n    strncpy(n._name , n, 40);\n    return n;\n}\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>Account&amp; Account::operator=(const Account&amp; n){\n    strncpy(_name, n._name, 40);\n    return *this;\n}\n</code></pre>\n\n<p>When you write <code>A = B;</code> then it is like <code>A.operator=(B)</code>. So <code>A</code> will be <code>*this</code> (the object assigned to) and <code>B</code> will be <code>n</code> (the original one).</p>\n\n<p>But you have a small issue with the actual use. Since there is no <code>operator=</code> that takes a string as argument, your code:</p>\n\n<pre><code>A = \"new name\";\n</code></pre>\n\n<p>is actually equivalent to:</p>\n\n<pre><code>A = Account(\"new name\");\n</code></pre>\n\n<p>which is also equivalent to:</p>\n\n<pre><code>A = Account(\"new name\", 0.0);\n</code></pre>\n\n<p>No harm done because <code>operator=</code> does not assign to the balance, only to the name. But you probably should not be doing this...</p>\n\n<p>My advice, do not overload operator just for fun: use normal member functions.</p>\n\n<p>PS: Issues with <code>strncpy</code> apart, I'm not entering in those.</p>\n"}], "owner": {"reputation": 71, "user_id": 4560751, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10153090146542594/picture?type=large", "display_name": "Andrew Barsoom", "link": "https://stackoverflow.com/users/4560751/andrew-barsoom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1446659863, "creation_date": 1446656572, "last_edit_date": 1446659586, "question_id": 33527742, "link": "https://stackoverflow.com/questions/33527742/c-operator-functions", "title": "c++ Operator functions", "body": "<p>im trying to Set the name of A to \"new name\" and return the reference of A\nhowever im getting an error from the operator= function  <code>binary '=' : no operator found which takes a right-hand operand of type 'const char [6]' (or there is no acceptable conversion)</code>  </p>\n\n<pre><code>expression must be a modifiable value.\n</code></pre>\n\n<p>If i simply do <code>return n = \"new name\";</code> it returns a segmentation fault</p>\n\n<p>Please pay attention to my operator= function in my Account.cpp file.</p>\n\n<p>Here are my three files:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Account.h\"\nusing namespace sict;\nusing namespace std;\n\n    int main(){\n      Account A;\n      Account B(\"Saving\", 10000.99);\n      Account C(\"Checking\", 100.99);\n      double value = 0;\n      cout &lt;&lt; A &lt;&lt; endl &lt;&lt; B &lt;&lt; endl &lt;&lt; C &lt;&lt; endl &lt;&lt; \"--------\" &lt;&lt; endl;\n      A = B + C;\n      A = \"Joint\";\n      cout &lt;&lt; A &lt;&lt; endl &lt;&lt; B &lt;&lt; endl &lt;&lt; C &lt;&lt; endl &lt;&lt; \"--------\" &lt;&lt; endl;\n      A = B += C;\n      cout &lt;&lt; A &lt;&lt; endl &lt;&lt; B &lt;&lt; endl &lt;&lt; C &lt;&lt; endl &lt;&lt; \"--------\" &lt;&lt; endl;\n      value += A;\n      value += B;\n      value += C;\n      cout &lt;&lt; \"Total balance: \" &lt;&lt; value &lt;&lt; endl;\n      return 0;\n    }\n</code></pre>\n\n<p>Here is my Account.cpp i removed functions that i thought were unnecessary.\nEdit: I'll include my entire account.cpp and account.h</p>\n\n<p>Account.cpp:</p>\n\n<pre><code>  #include \"cstring\"\n#include \"iomanip\"\n#include \"Account.h\"\nusing namespace std;\nnamespace sict{\n  Account::Account(){\n    _name[0] = 0;\n    _balance = 0;\n  }\n  Account::Account(double balance){\n    _name[0] = 0;\n    _balance = balance;\n  }\n\n  Account::Account(const char name[], double balance){\n    strncpy(_name, name, 40);\n    _name[40] = 0;\n    _balance = balance;\n  }\n  void Account::display()const{\n    cout &lt;&lt; _name &lt;&lt; \": $\" &lt;&lt; setprecision(2) &lt;&lt; fixed &lt;&lt; _balance;\n  }\n  Account&amp; Account::operator+=(Account &amp;s1)  {\n     // return Account(_balance += s1._balance);\n      _balance += s1._balance;\n      return *this;\n\n  }\n\n  Account&amp; Account::operator=( Account&amp; n) const {\n</code></pre>\n\n<p>strncpy(n._name , n, 40);</p>\n\n<pre><code>      return n;\n  }\n  double operator+=(double&amp; d, const Account&amp; a){\n      d += a;\n      return d;\n  }\n  ostream&amp; operator&lt;&lt;(ostream&amp; os, const Account&amp; A){\n    A.display();\n    return os;\n}\n  Account operator+(const Account &amp;p1, const Account &amp;p2){\n    return Account(p1._balance + p2._balance);\n  }\n\n\n\n}\n</code></pre>\n\n<p>Here is the Declaration for the Operator= in Account.h</p>\n\n<pre><code>#ifndef SICT_ACCOUNT_H__\n#define SICT_ACCOUNT_H__\n#include &lt;iostream&gt;\nnamespace sict{\n  class Account{\n    char _name[41];\n    double _balance;\n  public:\n    Account();\n    Account(const char name[], double balance = 0.0);\n    Account(double balance);\n    void display()const;\n     friend Account operator+(const Account &amp;p1, const Account &amp;p2);\n     Account&amp; operator+=(Account&amp; s1)   ;\n    Account&amp; operator=( Account&amp; n) const;\n\n\n  };\n  Account operator+(const Account &amp;p1, const Account &amp;p2);\n  double operator+=(double&amp; d, const Account&amp; a);\n  std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Account&amp; C);\n};\n\n#endif\n</code></pre>\n\n<p>Any help/tips would be appreciated thanks.</p>\n\n<p>Edit: Added some code to operator=</p>\n"}, {"tags": ["c++", "recursion", "tree"], "answers": [{"tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": true, "score": 2, "last_activity_date": 1446657081, "creation_date": 1446657081, "answer_id": 33527895, "question_id": 33527722, "link": "https://stackoverflow.com/questions/33527722/not-able-to-return-out-of-recursion/33527895#33527895", "title": "Not able to return out of recursion", "body": "<p>I'm not sure what this is doing:</p>\n\n<pre><code>for( int inx = 0; inx &lt; numChildNodes; ++inx )\n{\n    findHasTypeDatasetNodeInAMTree( childNodes[inx] );\n}\n</code></pre>\n\n<p>But I'm pretty sure it doesn't stop when you find something so the result is ALWAYS <code>NULLTAG</code>. How about something like:</p>\n\n<pre><code>for( int inx = 0; inx &lt; numChildNodes; ++inx )\n{\n    auto result = findHasTypeDatasetNodeInAMTree( childNodes[inx] );\n    if( result != NULLTAG )\n        return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 2594, "user_id": 815961, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ofYz8.jpg?s=128&g=1", "display_name": "Pavan Dittakavi", "link": "https://stackoverflow.com/users/815961/pavan-dittakavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 33527895, "answer_count": 1, "score": 0, "last_activity_date": 1456315799, "creation_date": 1446656515, "last_edit_date": 1456315799, "question_id": 33527722, "link": "https://stackoverflow.com/questions/33527722/not-able-to-return-out-of-recursion", "title": "Not able to return out of recursion", "body": "<p>I have the following piece of code. It aims at traversing the [attached screenshot] Tree structure in depth first manner.<a href=\"https://i.stack.imgur.com/jkCgH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jkCgH.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, I am interested in the highlighted entry in green -> <strong>Has Class( DatasetType )</strong> node of this tree structure. This Tree structure is subjected to additions of new nodes by customers. So, I have to traverse the Tree structure to find my node of interest. I have formulated the below code. But And I can see that it identifies that node of my interest.</p>\n\n<p>However, it is not stopping there. It is proceeding onto the next sibling i.e., Has Class( EPMJob ). I want my processing to stop. I am pretty sure that my way of returning stuff is missing something. but not able to pin point.</p>\n\n<p>Any inputs are most welcome.</p>\n\n<pre><code>tag_t findHasTypeDatasetNodeInAMTree( tag_t amTreeNode )\n{\n    CharPointer nodeName;\n    Response stat = askRuleName( amTreeNode, &amp;nodeName );\n\n    CharPointer nodeArgument;\n    stat = askRuleArg( amTreeNode, &amp;nodeArgument );\n\n    if( tc_strcmp( nodeName.getString(), \"Has Class\" ) == 0 &amp;&amp; tc_strcmp( nodeArgument.getString(), \"DatasetType\" ) == 0 )\n    {\n        return amTreeNode;\n    }\n\n    int numChildNodes = 0;\n    TagPointer childNodes;\n    stat = askChildren( amTreeNode, &amp;numChildNodes, &amp;childNodes );\n\n    if( numChildNodes == 0 )\n    {\n        return NULLTAG;\n    }\n\n    // The following is the piece that needs attention. \n    // Do not want to NULL check here though\n    for( int inx = 0; inx &lt; numChildNodes; ++inx )\n    {\n        findHasTypeDatasetNodeInAMTree( childNodes[inx] );\n    }\n\n    return NULLTAG;\n}\n</code></pre>\n"}, {"tags": ["c++", "strstr"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1446656877, "post_id": 33527698, "comment_id": 54836995, "body": "fairly fast <b>for what?</b> Modern stdlib implementations often contain heavily-optimized, parallelizable functions backed by compiler intrinsics. &quot;Should I try and use another implementation&quot; \u2013 As long as you haven&#39;t mesured explicitly that <code>strstr()</code> is the bottleneck, why would you bother?"}, {"owner": {"reputation": 2212, "user_id": 1106901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35be4631a101e9d4972ff457a1fb4fe9?s=128&d=identicon&r=PG&f=1", "display_name": "JosiahDaniels", "link": "https://stackoverflow.com/users/1106901/josiahdaniels"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1446657354, "post_id": 33527698, "comment_id": 54837326, "body": "@TheParamagneticCroissant Before I started spending a lot of time measuring, I wanted to make sure that <code>strstr()</code> isn&#39;t known to be a naive approach that looks at all possibilities. Assuming that it is highly optimized, my time is better off trying to speed up other parts of the code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1446657393, "post_id": 33527698, "comment_id": 54837353, "body": "I believe, sources for C runtime are available. You can go there and check yourself."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1446657499, "post_id": 33527698, "comment_id": 54837435, "body": "On a side note, if intended use for <code>strstr()</code> is any sort of parsing, Boost.Spirit would be the better approach."}, {"owner": {"reputation": 2212, "user_id": 1106901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35be4631a101e9d4972ff457a1fb4fe9?s=128&d=identicon&r=PG&f=1", "display_name": "JosiahDaniels", "link": "https://stackoverflow.com/users/1106901/josiahdaniels"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1446657817, "post_id": 33527698, "comment_id": 54837640, "body": "@SergeyA Good point. Thanks."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1446657963, "post_id": 33527698, "comment_id": 54837726, "body": "@JosiahDaniels &quot;Before I started spending a lot of time measuring&quot; \u2013 nononono, that&#39;s the other way around. <b>First</b> you measure, and only then you try to optimize."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1446659427, "post_id": 33527698, "comment_id": 54838729, "body": "@TheParamagneticCroissant ... or first you measure then you decide that it&#39;s not worth optimizing.  Too many people forget that some code does not need to be &quot;optimized&quot; it needs to be correct, maintainable, etc."}, {"owner": {"reputation": 2212, "user_id": 1106901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35be4631a101e9d4972ff457a1fb4fe9?s=128&d=identicon&r=PG&f=1", "display_name": "JosiahDaniels", "link": "https://stackoverflow.com/users/1106901/josiahdaniels"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1446660341, "post_id": 33527698, "comment_id": 54839363, "body": "@TheParamagneticCroissant Perhaps I wasn&#39;t clear. I know that strstr is taking a lot of time, I wanted to know if there were theoretically faster options. If so, I would implement a faster algorithm, then measure again to make sure it actually made an improvement. I don&#39;t want to get bogged down trying to speed something up that can&#39;t be sped up."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446666703, "post_id": 33527698, "comment_id": 54843045, "body": "The <code>strstr</code> function may be optimized on some platforms to use specialized processor instructions.  For example, some Intel processors have an instruction that searches memory.  These instructions may be faster than using another algorithm.  The majority of the &quot;depends&quot; is in the size of the data.  With modern computers, there must be HUGE data sizes in order for a linear search to be slow.  Remember that every branch may impose a reloading of the instruction cache which would be slower than using a specialized processor instruction."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1446667379, "creation_date": 1446667379, "answer_id": 33530988, "question_id": 33527698, "link": "https://stackoverflow.com/questions/33527698/what-string-search-algorithm-does-strstr-use/33530988#33530988", "title": "What string search algorithm does strstr use?", "body": "<p>As others have recommended:  Profile.  Perform <em>valid</em> performance tests.  </p>\n\n<p>Without the profile data, you could be optimizing a part of the code that runs 20% of the time, a waste of ROI.</p>\n\n<p>Development costs are the prime concern with modern computers, not execution time.  The best use of time is to develop the program to operate correctly with few errors before entering System Test.  This is where the focus should be.  Also due to this reasoning, most people don't care how Visual Studio implements <code>strstr</code> as long as the function works correctly.  </p>\n\n<p>Be aware that there is line or point where a linear search outperforms other searches.  This line depends on the size of the data or the search criteria.  For example, linear search using a processor with branch prediction and a large instruction cache may outperform other techniques for small and medium data sizes.  A more complicated algorithm may have more branches that cause reloading of the instruction cache or data cache (wasting execution time).  </p>\n\n<p>Another method for optimizing your program is to make the data organization easier for searching.  For example, making the string small enough to fit into a cache line.  This also depends on the quantity of searching.  For a large amount of searches, optimizing the data structure may gain some performance.  </p>\n\n<p>In summary, optimize if and only if the program is not working correctly, the User is complaining about speed, it is missing timing constraints or it doesn't fit in the allocated memory.  Next step is then to profile and optimize the areas where most of the time is spent.  Any other optimization is futile.  </p>\n"}, {"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679112, "creation_date": 1446679112, "answer_id": 33533943, "question_id": 33527698, "link": "https://stackoverflow.com/questions/33527698/what-string-search-algorithm-does-strstr-use/33533943#33533943", "title": "What string search algorithm does strstr use?", "body": "<p>The C++ standard refers to the C standard for the description of what strstr does.  The C standard doesn't seem to put any restrictions on the complexity, so pretty much any algorithm the finds the first instance of the substring would be compliant.</p>\n\n<p>Thus different implementations may choose different algorithms.  You'd have to look at your particular implementation to determine which it uses.</p>\n\n<p>The simple, brute-force approach is likely O(m&times;n) where <em>m</em> and <em>n</em> are the lengths of the strings.  If you need better than that, you can try other libraries, like Boost, or implement one of the sub-linear searches yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "edited": false, "score": 1, "creation_date": 1446686443, "post_id": 33534591, "comment_id": 54851570, "body": "That strstr.c is <i>not</i> what any user-space program uses on OS X. It&#39;s part of libsa, which is used to build the kernel. As far as I know, Clang and GCC both use intrinsics for strstr. Actually (having just checked), Clang will replace a call to strstr with the load of a constant, if both strings are known at compile time."}, {"owner": {"reputation": 2809, "user_id": 4345926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/78b3827bc3fc1884126c6851058c4fac?s=128&d=identicon&r=PG", "display_name": "g24l", "link": "https://stackoverflow.com/users/4345926/g24l"}, "reply_to_user": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "edited": false, "score": 0, "creation_date": 1446989795, "post_id": 33534591, "comment_id": 54964005, "body": "@MarkBessey I was just wondering, how many use cases are there that strstr is used at compile time ( i.e. both strings are known at development time)? Nonetheless, intereseting optimization"}], "tags": [], "owner": {"reputation": 2809, "user_id": 4345926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/78b3827bc3fc1884126c6851058c4fac?s=128&d=identicon&r=PG", "display_name": "g24l", "link": "https://stackoverflow.com/users/4345926/g24l"}, "is_accepted": false, "score": 2, "last_activity_date": 1446682965, "creation_date": 1446682965, "answer_id": 33534591, "question_id": 33527698, "link": "https://stackoverflow.com/questions/33527698/what-string-search-algorithm-does-strstr-use/33534591#33534591", "title": "What string search algorithm does strstr use?", "body": "<p>The implementation in visual studio strstr is not know to me, and I am uncertain if it is to anyone. However I found these interesting <a href=\"http://volnitsky.com/project/str_search/\" rel=\"nofollow\">sources</a> and an <a href=\"http://www.opensource.apple.com/source/xnu/xnu-792.13.8/libsa/strstr.c\" rel=\"nofollow\">example</a> implementation. The latter shows that the algorithm runs in worst case quadratic time wrt the size of the searched string. Aggregate should be less than that. The algorithmic limit of non stochastic solutions should be that.</p>\n\n<p>What is actually the case is that depending the size of the input it might be possible that different algorithms are used, mainly optimized to the metal. However, one cannot really bet on that. In case that you are doing DNA sequencing strstr and family are very important and most probably you will have to write your own customized version. Usually, standard implementations are optimized for the general case, but on the other hand those working on compilers know their shit n staff. At any rate you should not bet your own skills against the pros.</p>\n\n<p>But really all this discussion about time to develop is hurting the effort to write good software. Be certain that the benefit of rewriting a custom strstr outweigh the effort that is going to be needed to maintain and tune it for your specific case, before you embark on this task.</p>\n"}], "owner": {"reputation": 2212, "user_id": 1106901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35be4631a101e9d4972ff457a1fb4fe9?s=128&d=identicon&r=PG&f=1", "display_name": "JosiahDaniels", "link": "https://stackoverflow.com/users/1106901/josiahdaniels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1446682965, "creation_date": 1446656451, "question_id": 33527698, "link": "https://stackoverflow.com/questions/33527698/what-string-search-algorithm-does-strstr-use", "title": "What string search algorithm does strstr use?", "body": "<p>I was reading through the <a href=\"https://en.wikipedia.org/wiki/String_searching_algorithm\" rel=\"nofollow\">String searching algorithm</a> wikipedia article, and it made me wonder what algorithm <a href=\"https://msdn.microsoft.com/en-us/library/z9da80kz.aspx\" rel=\"nofollow\">strstr</a> uses in Visual Studio? Should I try and use another implementation, or is <code>strstr</code> fairly fast?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "qt", "signals-slots"], "answers": [{"comments": [{"owner": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 0, "creation_date": 1446831276, "post_id": 33551315, "comment_id": 54922792, "body": "I want two things to happen in my table, 1) I want the table cells to fit tightly to their contents (the result I get from using <code>resizeColumnsToContents</code>, and 2) I want the table width to fit tightly to the width of the horizontal header (i.e. no space after the last column AND no need for the horizontal scroll bar). Setting the Size Policy to Expanding does not give me these results."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 0, "creation_date": 1446833615, "post_id": 33551315, "comment_id": 54923953, "body": "The problem needs to be broken in parts: 1) How to automatically adjust the inner widget size. 2) How to adjust cells. I believe it is wrong to reject the simplest and effective #1 because you have not figured out #2. The question originally is about #1 though. And I cannot tell about #2 as long as I did not do that but pretty much did a lot of the rest."}, {"owner": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 0, "creation_date": 1446841929, "post_id": 33551315, "comment_id": 54928424, "body": "I&#39;ve already figured out how to adjust the cell sizes to my liking by using <code>resizeColumnsToContents</code>. I now just need to adjust the QTableWidget width to fit the total width of my displayed data. I&#39;m going through all this trouble because I don&#39;t like how the vertical scrollbar covers some of my right most columns data when it appears. I have also hidden the horizontal scrollbar because I only have two columns to display. I simply need the width of the vertical scrollbar as it appears for me to complete the look I want."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 1, "creation_date": 1446845931, "post_id": 33551315, "comment_id": 54930171, "body": "That should be the other way around. For your QTableWidget I would try to overload resizeEvent method and given new size do the adjust for cells. And the size would be right without any scroll bar."}, {"owner": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 0, "creation_date": 1447096426, "post_id": 33551315, "comment_id": 55007184, "body": "Thanks @AlexanderVX, I moved everything from my <code>verticalScrollBarChanged</code> function into the <code>resizeEvent</code> function and this worked perfectly."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "edited": false, "score": 0, "creation_date": 1447097192, "post_id": 33551315, "comment_id": 55007654, "body": "I am glad as well. Accept the answer?"}], "tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1446846103, "last_edit_date": 1446846103, "creation_date": 1446745379, "answer_id": 33551315, "question_id": 33527608, "link": "https://stackoverflow.com/questions/33527608/get-qscrollbar-width-upon-change-in-qscrollbar-visibility/33551315#33551315", "title": "Get QScrollBar Width upon change in QScrollBar Visibility", "body": "<p>Qt has a better way of taking care of such async resize of some widget container area. You should probably remove all the code that explicitly takes care of it and instead add this:</p>\n\n<pre><code>// m_tableWidget constructed\n// at least first parameter for horizontal sizing should be Expanding. \nm_tableWidget-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\n</code></pre>\n\n<p>And for that table widget class it makes sense to overload resizeEvent virtual method which will be triggered with every resize and do the cells adjust from there or <code>resizeColumnsToContents()</code>.</p>\n"}], "owner": {"reputation": 657, "user_id": 4325153, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/1Uh6h.jpg?s=128&g=1", "display_name": "Stanton", "link": "https://stackoverflow.com/users/4325153/stanton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 33551315, "answer_count": 1, "score": 0, "last_activity_date": 1446846103, "creation_date": 1446656228, "question_id": 33527608, "link": "https://stackoverflow.com/questions/33527608/get-qscrollbar-width-upon-change-in-qscrollbar-visibility", "title": "Get QScrollBar Width upon change in QScrollBar Visibility", "body": "<p>I'm trying to get the width of a qscrollbar as it changes visibility. I'm doing this because I want to change the width of my qtablewidget by the width of the qscrollbar if it is visible.</p>\n\n<p>I'm using the <code>rangeChanged(int min, int max)</code> signal from my qscrollbar. If <code>max &gt; min</code> then the qscrollbar is visible. My problem is that when I get the qscrollbar width using <code>m_tableWidget-&gt;verticalScrollBar()-&gt;width()</code> the value is not the current width, but rather the previous width before the rangeChanged signal was fired.</p>\n\n<p>This is what my signal-slot connection looks like:</p>\n\n<pre><code>connect(m_tableWidget-&gt;verticalScrollBar(), SIGNAL(rangeChanged(int,int)),\n        this, SLOT(verticalScrollBarChanged(int,int)));\n</code></pre>\n\n<p>And this is the slot function:</p>\n\n<pre><code>void ImageTableWidget::verticalScrollBarChanged(int min, int max)\n{\n    int verticalScrollBarWidth = 0;\n    if (max-min)\n        verticalScrollBarWidth = m_tableWidget-&gt;verticalScrollBar()-&gt;width();\n\n    int horizontalHeaderWidth = m_tableWidget-&gt;horizontalHeader()-&gt;length();\n    m_tableWidget-&gt;setFixedWidth(verticalScrollBarWidth + horizontalHeaderWidth);\n}\n</code></pre>\n\n<p>Does anyone know how I could obtain the new qscrollbar width at the time it becomes visible/invisible?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1446656816, "post_id": 33527575, "comment_id": 54836945, "body": "It&#39;s not cool at all. <code>_tmain</code> is just a macro that gets replaced by <code>main</code> or <code>wmain</code> depending on your choice of character set. You can just use the one you need, and skip the macro. It used to be slightly useful when compiling for both Windows 95 and Windows NT. Not something you will do often!"}, {"owner": {"reputation": 7519, "user_id": 54760, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2e0c5cba6edebd447399a6ee24ce52ec?s=128&d=identicon&r=PG", "display_name": "xarzu", "link": "https://stackoverflow.com/users/54760/xarzu"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1446659188, "post_id": 33527575, "comment_id": 54838557, "body": "What do I click on to enable Unicode?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1446659491, "post_id": 33527575, "comment_id": 54838769, "body": "The generated file is just a sugestion. You can edit the file and write it as you like."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1446659836, "post_id": 33527575, "comment_id": 54839045, "body": "You probably did already, when you created the project. The template uses the UNICODE preprocessor definition to generate <code>main</code> or <code>wmain</code>. You can change it from Project Properties &gt; General &gt; Project Defaults &gt; Character Set or by adding/removing it from the list of preprocessor definitions."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 1, "creation_date": 1446659913, "post_id": 33527575, "comment_id": 54839101, "body": "Changing the generated file is <i>not</i> enough as all WIndows header files use _TCHAR, _TSTR etc."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1446661753, "post_id": 33527575, "comment_id": 54840210, "body": "Using _tmain(), TCHAR, and the other TCHAR functions allows you to switch between 8 bit characters or 16 bit unicode characters by changing the project settings for character set. To enable unicode, right click on project, properties, switch from debug / release to all configurations if needed, and change character set to : not set, or to unicode, ... ."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1446664504, "post_id": 33527575, "comment_id": 54841822, "body": "@rcgldr - And why would you want to switch character set halfway through a project? <code>TCHAR</code> is either <code>char</code> or <code>wchar_t</code>, so you could just use one of those and skip all the macro stuff."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446665723, "post_id": 33527575, "comment_id": 54842473, "body": "@BoPersson - I doubt Microsoft would go through the trouble of providing all those TCHAR macros if there wasn&#39;t some demand for it. I don&#39;t know if the demand still exists, but the macros are still there."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1446666031, "post_id": 33527575, "comment_id": 54842643, "body": "@rcgldr - It helps people having to compile code written in the 1990s, but you really shouldn&#39;t use the macros if you have the option to start from scratch. Like if you are learning Windows programming now."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1467536680, "post_id": 33527575, "comment_id": 63763953, "body": "&quot;cool&quot; you misspelled &quot;abominable&quot;. HTH."}], "owner": {"reputation": 7519, "user_id": 54760, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2e0c5cba6edebd447399a6ee24ce52ec?s=128&d=identicon&r=PG", "display_name": "xarzu", "link": "https://stackoverflow.com/users/54760/xarzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467533795, "creation_date": 1446656137, "last_edit_date": 1446659264, "question_id": 33527575, "link": "https://stackoverflow.com/questions/33527575/how-does-visual-studio-generate-tmain", "title": "How does Visual Studio generate _tmain?", "body": "<p>I created a console app in Visual Studio 2015.  The main program has parameters.  It looks like this:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n</code></pre>\n\n<p>But that was about a month ago and now I cannot retrace the steps I did to create this cool main type program where the main function has a parameter list.</p>\n\n<p>The best I can do is create one like this:</p>\n\n<pre><code>int main()\n</code></pre>\n\n<p>What options do I click on when I select to create a new project, to create a console app with a _tmain functioni like this:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n</code></pre>\n\n<p>I understand that _tmain is for Unicode.  What do I click on to enable unicode?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1446656215, "post_id": 33527566, "comment_id": 54836495, "body": "I don&#39;t understand you question. What do you mean with &quot;why could a data object has different size from its sizeof()?&quot;?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1446656249, "post_id": 33527566, "comment_id": 54836524, "body": "@Superlokkus His example <code>char</code> is <code>4</code> bytes big but <code>sizeof(char)</code> returns <code>1</code>. And <code>4 != 1</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 4, "creation_date": 1446656340, "post_id": 33527566, "comment_id": 54836606, "body": "@cad: No, a <code>char</code> is 1 byte by definition. On that system, a byte is 32 bits."}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "edited": false, "score": 0, "creation_date": 1446656383, "post_id": 33527566, "comment_id": 54836635, "body": "Sorry, I might have confused you. In the question it says that on a machine the size of char is 32bits, but the sizeof(char) is 1. I thought sizeof(char) will also be 32, isn&#39;t it? Isn&#39;t char a single character? It is because the machine deliberately assign 32 bits to a char type, but eventually the sizeof(char) only return the real size of it? In that case the other digits are simply wasted."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446656512, "post_id": 33527566, "comment_id": 54836728, "body": "<i>@KennethChen</i> You should have written your own answer, not answering in the question. Answering your own questions is perfectly OK and actually appreciated."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656558, "post_id": 33527566, "comment_id": 54836761, "body": "It won&#39;t be <code>32</code> even in that case. One could think it would be <code>4 = 32&#47;8</code> in the worst case."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656583, "post_id": 33527566, "comment_id": 54836783, "body": "<code>sizeof</code> yields the size <i>in bytes</i>. If a <code>char</code> is 32 bits, then a byte is 32 bits. We don&#39;t know that any of the bits are wasted; a <code>char</code> can hold any of 2**32 distinct values."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656619, "post_id": 33527566, "comment_id": 54836807, "body": "&quot;The standard does NOT require a char to be 8-bits, but does require that sizeof(char) return 1.&quot; You answerded your question already. What is your point?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656638, "post_id": 33527566, "comment_id": 54836824, "body": "@EugeneSh.: No, in the worst <i>and only</i> case, <code>sizeof (char) == 1</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656714, "post_id": 33527566, "comment_id": 54836881, "body": "@EugeneSh.: Why the <code>8</code>? It is actually <code>32</code>, because <code>CHAR_BIT</code> would be <code>32</code> here."}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656762, "post_id": 33527566, "comment_id": 54836904, "body": "@KeithThompson Yes you&#39;re right! I learned that a byte is 8 digits, I didn&#39;t know that byte could have a different number of bits! I got it now."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656766, "post_id": 33527566, "comment_id": 54836908, "body": "@KeithThompson Do you mind reading the whole comment?  Olaf: <code>sizeof</code> is never returning the bit size"}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656785, "post_id": 33527566, "comment_id": 54836925, "body": "@Olaf Yeah I just didn&#39;t understand the explanation."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656818, "post_id": 33527566, "comment_id": 54836947, "body": "@KeithThompson: The range is not necessarily realted. That&#39;s what  <code>CHAR_MAX</code> &amp; friends are for."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656918, "post_id": 33527566, "comment_id": 54837029, "body": "@EugeneSh.: I read the whole comment. What did I miss?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656927, "post_id": 33527566, "comment_id": 54837036, "body": "@Olaf, oh, I see. I mean one that thinks that the <code>sizeof</code> is returning the number of octets. Which is a plenty of people."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656965, "post_id": 33527566, "comment_id": 54837056, "body": "@KeithThompson Perhaps I wasn&#39;t clear, see my previous comment to Olaf."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446656995, "post_id": 33527566, "comment_id": 54837089, "body": "@KennethChen: Your teachers were wrong. A type with 8 bits is an <b>octet</b>. The width of a byte is machine-dependent. It&#39;s just that most architectures <b>nowadays</b> have 8 bits/byte. Some decades ago e.g. 9 bits  were quite common. And on some DSPs it still has e.g. 24 bits."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657065, "post_id": 33527566, "comment_id": 54837124, "body": "@Olaf while you are formally right, people are mostly trying to refer the non-octet-sized bytes as &quot;machine words&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657093, "post_id": 33527566, "comment_id": 54837156, "body": "@EugeneSh.: Yeah, bad enough. Perhaps time for a new architecture with  11 bits (next larger prime would be nice). You have the phone number of Intel? ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657101, "post_id": 33527566, "comment_id": 54837160, "body": "Add BTW: &quot;<i>Isn&#39;t sizeof() function ...</i>&quot; <code>sizeof</code> is an operator, not a function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657171, "post_id": 33527566, "comment_id": 54837203, "body": "@alk: While you are right, I actually wish it was a function. Anyway, I confess, I always use parenthesis, although they are semantically not for <code>sizeof</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657331, "post_id": 33527566, "comment_id": 54837315, "body": "@EugeneSh.: No, a &quot;machine word&quot; is normally the size of the (data) registers. That would be e.g. 32 bits for ARM &lt;v8 or x86. A byte is the smallest seperately addressable unit. That&#39;s the reason it&#39;s size may vary. The WP article is worth reading, although it also concentrates a bit too much on  &quot;byte &lt;=&gt; 8 bits&quot; imo. I also used to take this &quot;shortcut&quot;. Since some years, I tend to prefer &quot;octets&quot; or define &quot;byte == 8 bits&quot; in my documenation."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657381, "post_id": 33527566, "comment_id": 54837345, "body": "@EugeneSh.: Referring to bytes, even 32-bit bytes, as &quot;words&quot; is IMHO not helpful. A word may be several bytes wide. For example, a machine might have 16-bit bytes and 64-bit words. The standard doesn&#39;t even talk about &quot;words&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657456, "post_id": 33527566, "comment_id": 54837393, "body": "@Olaf What&#39;s &quot;WP article&quot;?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446657464, "post_id": 33527566, "comment_id": 54837401, "body": "@Olaf: One is never to old to learn. I had dropped this habit after about 20 years ... ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657504, "post_id": 33527566, "comment_id": 54837440, "body": "@EugeneSh.: Sorry, I&#39;m too much used to kde&#39;s shortcuts. &quot;WikiPedia&quot;"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657543, "post_id": 33527566, "comment_id": 54837470, "body": "@Olaf: Indeed &quot;<i>too much</i>&quot; .. KDE? &quot;<i>Kalles Desktop Environment</i>&quot;?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657609, "post_id": 33527566, "comment_id": 54837513, "body": "@alk &quot;K Desktop Environment&quot;? Don&#39;t ask about the &quot;K&quot; :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657637, "post_id": 33527566, "comment_id": 54837533, "body": "@alk: You are asking what <a href=\"https://www.kde.org/\" rel=\"nofollow noreferrer\">KDE</a> is?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657659, "post_id": 33527566, "comment_id": 54837551, "body": "@EugeneSh.: Well, I did. Answer: Don&#39;t ask ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657748, "post_id": 33527566, "comment_id": 54837608, "body": "@Olaf: No; but why is &quot;<i>WP</i>&quot; is a &quot;<i>KDE</i>&quot; shortcut? :-S <i>lost, sigh</i>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1446657891, "post_id": 33527566, "comment_id": 54837678, "body": "@alk: In Plasma: <code>Alt-F2</code> (Command-line pops up), type e.g. <code>wp:byte</code> (enter); it&#39;s actually lowercase. Will open WP with the given searchphrase. Same for e.g. <code>gg:byte</code> or <code>leo:nette sache</code>. One of the things I miss most if I have to work on Windows. It&#39;s actually called &quot;Webshortcuts&quot;/&quot;Web-K&#252;rzel&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446656633, "post_id": 33527633, "comment_id": 54836818, "body": "Re. the down-vote, if there is any inaccuracy in this answer, I&#39;d gladly fix it given some feedback."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446656845, "post_id": 33527633, "comment_id": 54836971, "body": "Perhaps some disliked the word &quot;<i>byte</i>&quot; and would have liked to read &quot;<i>... yields the size of a type in <code>char</code>s</i>&quot;?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446656947, "post_id": 33527633, "comment_id": 54837047, "body": "@alk Probably someone unfamiliar with the C and C++ standards :-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657285, "post_id": 33527633, "comment_id": 54837274, "body": "I think you should mention that term <code>byte</code> is used as defined in C/C++. Because this term used in many programming languages and not only there. (not related to downvote)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657596, "post_id": 33527633, "comment_id": 54837503, "body": "@Slava I think that is clear enough in the answer, especially given the quotes."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657826, "post_id": 33527633, "comment_id": 54837645, "body": "@juanchopanza I do not think so. Problem is term <code>byte</code> is so widely used novadays. Many programming languages, hard drive size etc etc. It is very easy to confuse what you mean by that term."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658022, "post_id": 33527633, "comment_id": 54837771, "body": "@Slava I have already said what a byte means here. It is the size of a <code>char</code>. That should be quite simple to understand."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1446658390, "post_id": 33527633, "comment_id": 54838033, "body": "No it is not simple to understand. If you say that hard drive is 2Terra__bytes__ on platform where char is represented by 32bits, does it mean that each byte on that hard drive is 32bits?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658471, "post_id": 33527633, "comment_id": 54838092, "body": "@Slava Not so simple to understand if one doesn&#39;t know how to read and think a little."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658683, "post_id": 33527633, "comment_id": 54838239, "body": "@juanchopanza I know how to read, I just try to explain you that for somebody your answer can be misleading, because term <code>byte</code> is used so widely. Look into Superlokkus&#39;s answer, he says that this understanding of byte is general, which is is questionable at least. So confusion is definitely there."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658819, "post_id": 33527633, "comment_id": 54838326, "body": "Not only mention that you got downvote most probably because somebody did not like your definition of <code>byte</code>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446659725, "post_id": 33527633, "comment_id": 54838951, "body": "@Slava I wasn&#39;t suggesting you can&#39;t read! I know you know all this stuff. I expect readers here to be able to think a little, and I think I have given enough definitions here for someone who is willing to think to figure out that there are different definitions of byte. I have given the one that matters for this question."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 12, "last_activity_date": 1446660129, "last_edit_date": 1446660129, "creation_date": 1446656275, "answer_id": 33527633, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527633#33527633", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>The <code>sizeof</code> operator yields the size of a type in <em>bytes</em>, where a byte is defined to be the size of a <code>char</code>. So <code>sizeof(char)</code> is always 1 by definition, regardless of how many <em>bits</em>  <code>char</code> has on a given platform.</p>\n\n<p>This applies to both C and C++.</p>\n\n<hr>\n\n<p>From the C11 standard, <strong>6.5.3.4</strong></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>The <code>sizeof</code> operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. The size is determined from the type of the operand....\n  <br></li>\n  </ol>\n</blockquote>\n\n<p>Then,</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>When <code>sizeof</code> is applied to an operand that has type <code>char</code>, <code>unsigned char</code>, or <code>signed char</code>, (or a qualified version thereof) the result is 1.</li>\n  </ol>\n</blockquote>\n\n<p>From the C++11 standard, <strong>5.3.3</strong></p>\n\n<blockquote>\n  <ol>\n  <li>The <code>sizeof</code> operator yields the number of bytes in the object representation of its operand. The operand is either an expression, which is an unevaluated operand (Clause 5), or a parenthesized <em>type-id</em>.... ... <strong><code>sizeof(char)</code>, <code>sizeof(signed char)</code> and <code>sizeof(unsigned char)</code> are 1.</strong></li>\n  </ol>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446656609, "post_id": 33527644, "comment_id": 54836802, "body": "@juanchopanza bytes/bits does it actually matter in the context?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446656668, "post_id": 33527644, "comment_id": 54836842, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yes, because &quot;how many bytes a char takes&quot; can only be one."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446656700, "post_id": 33527644, "comment_id": 54836869, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Certainly it matters. Why wouldn&#39;t it?"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1446656814, "last_edit_date": 1446656814, "creation_date": 1446656293, "answer_id": 33527644, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527644#33527644", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>Per 5.3.3 [expr.sizeof]</p>\n\n<blockquote>\n  <p>The sizeof operator yields the number of bytes in the object representation of its operand. The operand is either an expression, which is an unevaluated operand (Clause 5), or a parenthesized type-id. The sizeof operator shall not be applied to an expression that has function or incomplete type, to an enumeration\n  type whose underlying type is not fixed before all its enumerators have been declared, to the parenthesized name of such types, or to a glvalue that designates a bit-field. <strong><em>sizeof(char), sizeof(signed char) and sizeof(unsigned char) are 1.</em></strong>[...]</p>\n</blockquote>\n\n<p><sup>emphasis mine</sup></p>\n\n<p>So no matter how many bits a <code>char</code> takes up its size is always 1</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1446656369, "creation_date": 1446656369, "answer_id": 33527671, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527671#33527671", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p><code>sizeof(x)</code> is returning the size of  <code>x</code> expressed in units of size of <code>char</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657056, "post_id": 33527695, "comment_id": 54837118, "body": "I am afraid you make it even more confusing. Term <code>byte</code> used not only in C or C++, there it means the same as <code>octet</code>."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657281, "post_id": 33527695, "comment_id": 54837268, "body": "@Slava could you please proof your statement that the size is a byte is fixed in the C/C++ standards?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657416, "post_id": 33527695, "comment_id": 54837367, "body": "By there I mean somewhere else, not C/C++. Sorry for confusing."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657856, "post_id": 33527695, "comment_id": 54837661, "body": "No, byte != octet they have a different definition and knowing the difference is sometimes important. But I thought the 3rd comment to his question (and answer to mine) was from him, and so I bet on the wrong horse."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657994, "post_id": 33527695, "comment_id": 54837747, "body": "byte != octet in C/C++. byte equal to 8 bits in java, c#. byte equal to 8 bits when you say hard drive is 2Terra<code>byte</code>s  size. I do not think that C/C++ has monopoly of using this term."}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 3, "last_activity_date": 1446656811, "last_edit_date": 1446656811, "creation_date": 1446656446, "answer_id": 33527695, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527695#33527695", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>You're just confused with the <strong>difference</strong> between <strong>bytes</strong> and <strong>octets</strong>.</p>\n\n<p>A byte is the size of one character. This yields to the always true <code>sizeof(char) == 1</code>, because <code>sizeof</code> return the size in <strong>bytes</strong></p>\n\n<p>While an <strong>octet</strong> consists out of <strong>8 bits</strong>.</p>\n\n<p>On almost all modern platforms, the size of a byte is coincidentally the same as of an octet. That's the reason why it's a common error to mix them up, even book authors and professors are doing this. </p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1446657016, "post_id": 33527822, "comment_id": 54837096, "body": "The question as given is perfectly valid. It assumes a <code>char</code> is 32 bits. It has nothing to do with the size of a word or of a register."}, {"owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446657157, "post_id": 33527822, "comment_id": 54837193, "body": "spec says nothing about size of char in terms of bits, it says size of char is one byte.. so <code>char is 32 bits</code> is an incomplete statement"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446657472, "post_id": 33527822, "comment_id": 54837411, "body": "The standard also says that a <code>char</code> is <code>CHAR_BIT</code> bits,  where <code>CHAR_BIT &gt;= 8</code>. And a &quot;word&quot; can be multiple bytes, so your suggestion that the question <i>should</i> have specified the word size doesn&#39;t make much sense."}, {"owner": {"reputation": 2036, "user_id": 2649104, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Tcl1T.png?s=128&g=1", "display_name": "Srujan Barai", "link": "https://stackoverflow.com/users/2649104/srujan-barai"}, "edited": false, "score": 0, "creation_date": 1446658049, "post_id": 33527822, "comment_id": 54837791, "body": "@GautamJha It is not, according to C 1 byte is the size of char and not vice verse. Therefore irrespective of how much size is used by a char (which could be 32 bits), it will always return 1"}, {"owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "edited": false, "score": 0, "creation_date": 1446659609, "post_id": 33527822, "comment_id": 54838864, "body": "It is other way round <code>according to C size of char is one byte, and definition of byte is beyond C&#39;s scope</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446685555, "post_id": 33527822, "comment_id": 54851320, "body": "No, the definition of &quot;byte&quot; is not &quot;beyond C&#39;s scope&quot;. The latest draft of the ISO C standard is <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570.pdf</a>. The definition of &quot;byte&quot; is section 3.6: &quot;addressable unit of data storage large enough to hold any member of the basic character set of the execution environment&quot;. The C++ standard has a similar definition. The word &quot;byte&quot; may be used differently in other contexts, but that&#39;s how it&#39;s used by the C and C++ standards."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446685737, "post_id": 33527822, "comment_id": 54851379, "body": "And again, I&#39;m concerned about your first paragraph (it&#39;s why I downvoted). The original question asks about an implementation where a <code>char</code> is 32 bits. You suggest that the question <i>should</i> be about an implementation where a word is 32 bits. The result of <code>sizeof (char)</code> is the same in both cases, but this has nothing to do with the size of a &quot;word&quot;."}], "tags": [], "owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "is_accepted": false, "score": -1, "last_activity_date": 1446661334, "last_edit_date": 1446661334, "creation_date": 1446656810, "answer_id": 33527822, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527822#33527822", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>The question should have been -- Suppose in a hypothetical machine, the <code>word size(size of registers)</code> is 32 bits. What would sizeof(char) return?</p>\n\n<p>And answer will be <code>1 byte</code>.</p>\n\n<blockquote>\n  <p>In computing, word is a term for the natural unit of data used by a\n  particular processor design. A word is a fixed-sized piece of data\n  handled as a unit by the instruction set or the hardware of the\n  processor. The number of bits in a word (the word size, word width, or\n  word length) is an important characteristic of any specific processor\n  design or computer architecture. -- <a href=\"https://en.wikipedia.org/wiki/Word_%28computer_architecture%29\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Word_%28computer_architecture%29</a></p>\n</blockquote>\n\n<p>In you case <code>word-size</code> will be 32 bits. Also</p>\n\n<blockquote>\n  <p>Historically, the byte was the number of bits used to encode a single\n  character of text in a computer and for this reason it is the smallest\n  addressable unit of memory in many computer architectures. -- <a href=\"https://en.wikipedia.org/wiki/Byte\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Byte</a></p>\n</blockquote>\n\n<p>1 byte is smallest addressable unit of memory, it cat be 8 bit , 9 bits or 16 bits anything that hardware spec chooses.</p>\n\n<p>As far as <code>sizeof</code> is concerned it first determines the type of argument, eventually computes the size in bytes. So, following two C++ statements will produce same result.</p>\n\n<pre><code>  int n;\n  std::cout&lt;&lt;sizeof(int);\n  std::cout&lt;&lt;sizeof(n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2036, "user_id": 2649104, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Tcl1T.png?s=128&g=1", "display_name": "Srujan Barai", "link": "https://stackoverflow.com/users/2649104/srujan-barai"}, "is_accepted": false, "score": 0, "last_activity_date": 1446657321, "creation_date": 1446657321, "answer_id": 33527985, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527985#33527985", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>There are no machines where sizeof(char) is 4. It's always 1 byte. That byte might contain 32 bits, but as far as the C compiler is concerned, it's one byte.</p>\n\n<p>The correct name for \"8 bits\" is octet. The C Standard uses the word \"byte\" for an object that is the size of a char. Others may use the word \"byte\" in different ways, often when they mean \"octet\", but in C (and C++, or Objective-C) it means \"object the size of a char\". A char may be more than 8 bits, or more than one octet, but it's always one byte.</p>\n"}], "owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2260, "favorite_count": 1, "accepted_answer_id": 33527633, "answer_count": 6, "score": 4, "last_activity_date": 1446661334, "creation_date": 1446656100, "last_edit_date": 1446657271, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>I was learning C++ and come across the following question. I'm just a beginner and I got confused. Isn't sizeof() function supposed to return the size of the datatype? Why could a data object has different size from its sizeof()? I don't understand the explanation of the answer. </p>\n\n<p>Suppose in a hypothetical machine, the size of char is 32 bits. What would sizeof(char) return?</p>\n\n<p>a) 4</p>\n\n<p>b) 1</p>\n\n<p>c) Implementation dependent</p>\n\n<p>d) Machine dependent</p>\n\n<p>Answer:b</p>\n\n<p>Explanation: The standard does NOT require a char to be 8-bits, but does require that sizeof(char) return 1.</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1446659599, "post_id": 33527413, "comment_id": 54838856, "body": "If you are writing in C++ (based on your tags)  use C++!  Remove  <code>strcpy</code> from your vocabulary."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1446659634, "post_id": 33527413, "comment_id": 54838878, "body": "And the design pattern you are looking for is called a Factory.   Google it, please."}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 3790945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d692725df28f6b84449352802f6543?s=128&d=identicon&r=PG&f=1", "display_name": "Blito", "link": "https://stackoverflow.com/users/3790945/blito"}, "edited": false, "score": 0, "creation_date": 1446656539, "post_id": 33527551, "comment_id": 54836748, "body": "You should add that this will only work in C++14 (because of <code>make_unique&lt;&gt;</code>). And since you&#39;re at it, he may as well use enum classes instead of just enums."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 158, "user_id": 3790945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d692725df28f6b84449352802f6543?s=128&d=identicon&r=PG&f=1", "display_name": "Blito", "link": "https://stackoverflow.com/users/3790945/blito"}, "edited": false, "score": 0, "creation_date": 1446657297, "post_id": 33527551, "comment_id": 54837288, "body": "@Blito Added a note about that. And aren&#39;t scoped enums enums as well? I didn&#39;t dismiss the option of scoped enums, in fact I even hinted at it by using the <code>mode::</code> prefix."}, {"owner": {"reputation": 158, "user_id": 3790945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d692725df28f6b84449352802f6543?s=128&d=identicon&r=PG&f=1", "display_name": "Blito", "link": "https://stackoverflow.com/users/3790945/blito"}, "edited": false, "score": 0, "creation_date": 1446668636, "post_id": 33527551, "comment_id": 54844132, "body": "Yes, they are. The difference is that by using just enums he could also use plain integers instead of <code>mode::phones</code>, etc. The <code>mode::</code> prefix can be used in (old) enums too, so it&#39;s ambiguous. It&#39;s just a detail."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1446657232, "last_edit_date": 1446657232, "creation_date": 1446656074, "answer_id": 33527551, "question_id": 33527413, "link": "https://stackoverflow.com/questions/33527413/assigning-different-classes-to-a-particular-object-depending-on-user-input-in-c/33527551#33527551", "title": "Assigning different classes to a particular object depending on user input in C++", "body": "<p>You cannot decide the type of an object dynamically at run-time.</p>\n\n<p>Seems like you should use <em>polymorphism</em> in this situation:</p>\n\n<p>First define an abstract class, say <code>object</code>, that defines the behavior that you use to access your <code>genObj</code>. That is, everything <code>phones</code>, <code>computers</code>, <code>shoes</code>, and <code>books</code> have in commons.</p>\n\n<p>Then make those four sub-classes of <code>object</code> and then something like this:</p>\n\n<pre><code>std::unique_ptr&lt;object&gt; genObj;\n\nswitch(mode)\n{\n    case 1:\n        genObj = std::make_unique&lt;phones&gt;();\n        strcpy(fileName, \"phonesDatabase.dat\");\n        break;\n    case 2:\n        genObj = std::make_unique&lt;computers&gt;();\n        strcpy(fileName, \"computersDatabase.dat\");\n        break;\n    case 3:\n        genObj = std::make_unique&lt;shoes&gt;();\n        strcpy(fileName, \"shoesDatabase.dat)\";\n        break;\n    case 4:\n        genObj = std::make_unique&lt;books&gt;();\n        strcpy(fileName, \"booksDatabase.dat\");\n        break;\n}\n</code></pre>\n\n<p>(Note that <code>make_unique</code> is a feature only in the most recent C++ standard, so if you're writing your code for an old standard then you will have to use <code>new</code> instead, e.g. <code>genObj.reset(new books)</code>.)</p>\n\n<p>Also as a side note, make <code>mode</code> of an enum type, so that you don't have to handle magic numbers and can replace <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code> with some descriptive names such as <code>mode::phones</code>, <code>mode::computers</code>, <code>mode::shoes</code>, and <code>mode::books</code> respectively.</p>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 1644482, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ea25c27c274633522adb95bfd17388d4?s=128&d=identicon&r=PG", "display_name": "Sergey Kanaev", "link": "https://stackoverflow.com/users/1644482/sergey-kanaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1446656099, "creation_date": 1446656099, "answer_id": 33527564, "question_id": 33527413, "link": "https://stackoverflow.com/questions/33527413/assigning-different-classes-to-a-particular-object-depending-on-user-input-in-c/33527564#33527564", "title": "Assigning different classes to a particular object depending on user input in C++", "body": "<p><code>switch</code> construction won't handle dynamic allocation of objects for you. It'll be much better to employ a fabric here with common interface or abstract class (depending on your needs), say class <code>IFace</code>, and then have a local variable <code>IFace *genObj</code> and then make it equal to <code>new some_derived_from_IFace</code>.</p>\n"}], "owner": {"reputation": 3308, "user_id": 1512179, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/txOmS.png?s=128&g=1", "display_name": "Aayush Mahajan", "link": "https://stackoverflow.com/users/1512179/aayush-mahajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446657232, "creation_date": 1446655647, "question_id": 33527413, "link": "https://stackoverflow.com/questions/33527413/assigning-different-classes-to-a-particular-object-depending-on-user-input-in-c", "title": "Assigning different classes to a particular object depending on user input in C++", "body": "<p>I have considered an object 'genObj'. This object can be of the class phones,   laptops, shoes, or books.\nI wish to take user input varying from 1-4, and accordingly assign genObj to a praticular class.</p>\n\n<p>I wish to do this because I have to add these objects to data files. I am maintaining 4 separate data files for the different classes, and a value to fileName is also assigned accordingly.</p>\n\n<pre><code> switch(mode)\n    {\n     case 1:\n        phones genObj;\n        strcpy(fileName,\"phonesDatabase.dat\");\n        break;\n     case 2:\n        computers genObj;\n        strcpy(fileName,\"computersDatabase.dat\");\n        break;\n     case 3:\n        shoes genObj;\n        strcpy(fileName,\"shoesDatabase.dat)\";\n        break;\n     case 4:\n        books genObj;\n        strcpy(fileName,\"booksDatabase.dat\");\n        break;\n    }\n</code></pre>\n\n<p>Doing this, hovewer, gives the following error:</p>\n\n<pre><code>\"Multiple declaration for genObj in function add(int)\"\n</code></pre>\n\n<p>The values are assigned to fileName without problem as I have declared </p>\n\n<pre><code>char fileName[20];\n</code></pre>\n\n<p>globally, and it gets initialized later. However, since the object genObj can be of different classes, it cannot be initialized like this.</p>\n\n<p>If I am not able to assign genObj different classes according to user input, I will have to separate the code into 4 parts, each for one class. and that would be too cumbersome, and inelegant.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "constructor", "pass-by-value", "pass-by-const-reference"], "answers": [{"comments": [{"owner": {"reputation": 7212, "user_id": 108517, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3401cada0a161eba206575cc4122960?s=128&d=identicon&r=PG", "display_name": "J&#248;rgen Fogh", "link": "https://stackoverflow.com/users/108517/j%c3%b8rgen-fogh"}, "edited": false, "score": 3, "creation_date": 1446656333, "post_id": 33527424, "comment_id": 54836595, "body": "This is technically true. However, the reference will probably be compiled to a pointer, which means that the <i>pointer</i> has to be copied instead of the value."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 2, "last_activity_date": 1446656000, "last_edit_date": 1446656000, "creation_date": 1446655698, "answer_id": 33527424, "question_id": 33527391, "link": "https://stackoverflow.com/questions/33527391/argument-passed-by-value-or-const-reference-in-the-constructor/33527424#33527424", "title": "Argument passed by value or const reference in the constructor", "body": "<p>If the first constructor is called, the argument passed to it will <strong>not</strong> be copied. The <code>val</code> argument will bind to the argument passed (<strong>copy by reference</strong>).</p>\n\n<p>If the second constructor is called, the argument passed to it will be <strong>copied by value</strong>.</p>\n\n<p>Both constructors are the same in that they initialize <code>_val</code> with <code>val</code> respectively and perform an additional <strong>copy by value</strong>.</p>\n\n<p>So, without any optimizations, it looks like this:</p>\n\n<pre><code>                                                    Copies\nconst int&amp; constructor          1\nint constructor                          2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446655970, "post_id": 33527467, "comment_id": 54836310, "body": "Although one of the copies can be elided."}, {"owner": {"reputation": 329, "user_id": 3707656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/338f96490a26fec141e5e31f83b3c479?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Agnese", "link": "https://stackoverflow.com/users/3707656/marco-agnese"}, "edited": false, "score": 1, "creation_date": 1446656094, "post_id": 33527467, "comment_id": 54836406, "body": "Yes that was my guess. So second do an additional copy without optimization. So for big object is better the first solution. Or maybe, even better, is to pass a int&amp;&amp; directly."}], "tags": [], "owner": {"reputation": 532, "user_id": 1644482, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ea25c27c274633522adb95bfd17388d4?s=128&d=identicon&r=PG", "display_name": "Sergey Kanaev", "link": "https://stackoverflow.com/users/1644482/sergey-kanaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1446655809, "creation_date": 1446655809, "answer_id": 33527467, "question_id": 33527391, "link": "https://stackoverflow.com/questions/33527391/argument-passed-by-value-or-const-reference-in-the-constructor/33527467#33527467", "title": "Argument passed by value or const reference in the constructor", "body": "<p>Basically, constructor 2 will make a copy twice: first time on call and the second time on intialization.\nOn the other hand, you understand that reference is nothing more than a pointer and as the size of referenced variable decreases to pointer size there is no cost reduction between contsructors 1 and 2.</p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 3707656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/338f96490a26fec141e5e31f83b3c479?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Agnese", "link": "https://stackoverflow.com/users/3707656/marco-agnese"}, "edited": false, "score": 0, "creation_date": 1446656445, "post_id": 33527617, "comment_id": 54836687, "body": "int was only for seek of simplicity. Use a templated argument instead of int. My question was about the number of copy if no copy-elision is performed by the compiler"}], "tags": [], "owner": {"reputation": 7212, "user_id": 108517, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f3401cada0a161eba206575cc4122960?s=128&d=identicon&r=PG", "display_name": "J&#248;rgen Fogh", "link": "https://stackoverflow.com/users/108517/j%c3%b8rgen-fogh"}, "is_accepted": false, "score": 1, "last_activity_date": 1446656242, "creation_date": 1446656242, "answer_id": 33527617, "question_id": 33527391, "link": "https://stackoverflow.com/questions/33527391/argument-passed-by-value-or-const-reference-in-the-constructor/33527617#33527617", "title": "Argument passed by value or const reference in the constructor", "body": "<p>In general, you never need to pass <code>int</code> variables by const reference.</p>\n\n<p>The real question is: Why do you care? There will only be a measurable speed difference if <code>Foo</code> is constructed inside a loop with very many iterations <strong>and</strong> it is pretty much the only thing which happens inside that loop - very unlikely.</p>\n\n<p>So just use #2. Not because of efficiency but because it is simpler.</p>\n"}], "owner": {"reputation": 329, "user_id": 3707656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/338f96490a26fec141e5e31f83b3c479?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Agnese", "link": "https://stackoverflow.com/users/3707656/marco-agnese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 1, "closed_date": 1446656499, "accepted_answer_id": 33527424, "answer_count": 3, "score": 0, "last_activity_date": 1446656242, "creation_date": 1446655595, "question_id": 33527391, "link": "https://stackoverflow.com/questions/33527391/argument-passed-by-value-or-const-reference-in-the-constructor", "closed_reason": "Duplicate", "title": "Argument passed by value or const reference in the constructor", "body": "<p>Which constructor is better for the following class?</p>\n\n<pre><code>struct Foo\n{ \n  Foo(const int&amp; val):val_(val){} // constructor 1    \n  Foo(int val):val_(val){} // constructor 2\n  int val_;\n};\n</code></pre>\n\n<p>Without any compiler optimization, do they copy val only once or does constructor 2 create a further copy before the initialization list?</p>\n"}, {"tags": ["c++", "linux", "windows", "keyboard"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446655593, "post_id": 33527304, "comment_id": 54836033, "body": "Use an existing cross platform framework.  Search the internet for &quot;C++ cross platform framework review&quot; to &quot;find the best one&quot;."}, {"owner": {"reputation": 193, "user_id": 2097262, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc4a087a98e3279a45adf106d2a2d410?s=128&d=identicon&r=PG", "display_name": "AlmostBearded", "link": "https://stackoverflow.com/users/2097262/almostbearded"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446656021, "post_id": 33527304, "comment_id": 54836340, "body": "If it would be a more complicated problem I&#39;d do. But it seems not that hard for this particular issue."}, {"owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446657936, "post_id": 33527304, "comment_id": 54837711, "body": "Going along with what @ThomasMatthews said, look into a framework. SDL2 (<a href=\"https://www.libsdl.org/download-2.0.php\" rel=\"nofollow noreferrer\">libsdl.org/download-2.0.php</a>) is really lightweight, easy to use and handles all of this really well."}], "owner": {"reputation": 193, "user_id": 2097262, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc4a087a98e3279a45adf106d2a2d410?s=128&d=identicon&r=PG", "display_name": "AlmostBearded", "link": "https://stackoverflow.com/users/2097262/almostbearded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446655364, "creation_date": 1446655364, "question_id": 33527304, "link": "https://stackoverflow.com/questions/33527304/generalizing-keyboard-input", "title": "Generalizing Keyboard Input", "body": "<p>I'm currently writing on an engine for game development and I'm having a hard time in figuring out how to best generalize keyboard input.</p>\n\n<p>I want to do something like:</p>\n\n<pre><code>void onKeyDown(int key)\n{\n  // Set key down state to true.\n}\nvoid onKeyUp(int key)\n{\n  // Set key down state to false.\n}\nvoid update()\n{\n  if (/* is key down */)\n  {\n    // Do something.\n  }\n}\n</code></pre>\n\n<p>Now I need to know in which data structure I have to save my key states. At first I thought a <code>bool[256]</code> array would be sufficient but what about the control characters? </p>\n\n<p>Then I thought about using a map like <code>map&lt; int, bool></code>. Would this work for the different languages? I would want to check the key state with <code>key_states['a']</code> or with defined constants for unprintable characters like <code>key_states[Key::Enter]</code>. What if someone from asia would input some asian character? Would that work too?</p>\n\n<p>On my linux machine there are 3 different 'representations' of a key. First there is a key code which seems to be impractical for what I'm trying to do. The next are representations are keysym and a string representation. Because I also need to know when a non-printable key is pressed (like e.g. the enter key) the string representation is not usable either I guess.</p>\n\n<p>So that leaves me with the keysym. This is a little test output I generated on my linux (I clicked 'a', 'Shift-a', 'Ctrl-a' and 'Alt-a':</p>\n\n<pre><code>DOWN: KeyCode: 38 '&amp;', KeySym: 97 'a', String: 'a'\nDOWN: KeyCode: 50 '2', KeySym: 65505 '&lt;E1&gt;', String: ''\nDOWN: KeyCode: 38 '&amp;', KeySym: 65 'A', String: 'A'\nDOWN: KeyCode: 37 '%', KeySym: 65507 '&lt;E3&gt;', String: ''\nDOWN: KeyCode: 38 '&amp;', KeySym: 97 'a', String: '^A'\nDOWN: KeyCode: 64 '@', KeySym: 65513 '&lt;E9&gt;', String: ''\nDOWN: KeyCode: 38 '&amp;', KeySym: 97 'a', String: 'a'\n</code></pre>\n\n<p>It seems like the keysym is always the same as the string representation for printable characters. Is this guaranteed for all languages? If it is I could always take the keysym as key into the <code>key_states</code> map. Then the above use case would look like:</p>\n\n<pre><code>void onKeyDown(int keysym)\n{\n  key_states[keysym] = true;\n}\nvoid onKeyUp(int keysym)\n{\n  key_states[keysym] = false;\n}\nvoid update()\n{\n  // Check if Ctrl-a was pressed.\n  if (key_states[Key::Ctrl] &amp;&amp; key_states['a'])\n  {\n    // Do something.\n  }\n}\n</code></pre>\n\n<p>Would this work platform and language independently?</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c++", "multithreading", "file-io", "pthreads", "ifstream"], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 2408875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15ea8ff293d578de847b18811386f04?s=128&d=identicon&r=PG", "display_name": "Ojas", "link": "https://stackoverflow.com/users/2408875/ojas"}, "edited": false, "score": 0, "creation_date": 1446655827, "post_id": 33527386, "comment_id": 54836186, "body": "The file size is too large to store it in memory."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 403, "user_id": 2408875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15ea8ff293d578de847b18811386f04?s=128&d=identicon&r=PG", "display_name": "Ojas", "link": "https://stackoverflow.com/users/2408875/ojas"}, "edited": false, "score": 1, "creation_date": 1446667788, "post_id": 33527386, "comment_id": 54843653, "body": "@Ojas Unless it\u2019s larger than 2GiB on a 32-bit system, memory-mapping it should still work."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1446655591, "creation_date": 1446655591, "answer_id": 33527386, "question_id": 33527208, "link": "https://stackoverflow.com/questions/33527208/reading-same-file-with-ifstream-by-multiple-threads-pthread/33527386#33527386", "title": "Reading same file with ifstream by multiple threads (pthread)", "body": "<p>If you try to read the same file object in multiple threads, they\u2019ll clobber each other\u2019s state.  I suggest reading the file into memory once (or memory-mapping it) and having each thread read the data from memory, which they can do wait-free.</p>\n"}], "owner": {"reputation": 403, "user_id": 2408875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15ea8ff293d578de847b18811386f04?s=128&d=identicon&r=PG", "display_name": "Ojas", "link": "https://stackoverflow.com/users/2408875/ojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446655591, "creation_date": 1446655064, "question_id": 33527208, "link": "https://stackoverflow.com/questions/33527208/reading-same-file-with-ifstream-by-multiple-threads-pthread", "title": "Reading same file with ifstream by multiple threads (pthread)", "body": "<p>I have a function that is executed simultaneously by multiple threads created in my program and which recursively creates more threads to execute the same function again. I have to process a large file in this function. As there would be multiple threads processing the same file, I guess I'll have to seek to the start of the file for each thread. Will this move the other file streams also to the start of the file? Will there be any issues?</p>\n\n<pre><code>void *myFunc(){\n    string lin;\n    ifstream ifs (\"input.txt\");\n    if(ifs){\n        ifs.seekg(0,ifs.beg);\n        while(getline(ifs,lin)){\n            ...\n            do something\n            ...\n        }\n        ifs.close();\n    }\n    pthread_t ptds[100];\n    int cc = 0;\n    if(some condition based on the above code){\n        for(int i=0;i&lt;100;i++){\n            int rc = pthread_create(&amp;ptds[cc++], NULL, myFunc, NULL);\n            if (rc){\n                cout &lt;&lt; \"Error:unable to create thread,\" &lt;&lt; rc &lt;&lt; endl;\n                exit(-1);\n            }\n            else{\n                cout &lt;&lt; \"Thread created\" &lt;&lt; endl;\n            }\n        }\n        void* status;\n        int rc;\n        for(int i=0; i &lt; 100; i++ ){\n            rc = pthread_join(ptds[i], &amp;status);\n            if (rc){\n                cout &lt;&lt; \"Error:unable to join,\" &lt;&lt; rc &lt;&lt; endl;\n                exit(-1);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I am getting some ambiguous results. The results change every time I run the code. I'm assuming this has something to do with file I/O synchronization. How to resolve this?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1446655214, "post_id": 33527205, "comment_id": 54835787, "body": "Please don&#39;t include line-numbers in code you post, it makes it hard to copy the code to try out ourselves. If you want to tell us about a special line, then add a comment in the code."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1446655427, "post_id": 33527205, "comment_id": 54835918, "body": "In C++, there are no variable-length primitive arrays. Just use <code>std::vector</code>."}, {"owner": {"reputation": 11, "user_id": 5523206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X0iiD.jpg?s=128&g=1", "display_name": "Lauren Arvanitis", "link": "https://stackoverflow.com/users/5523206/lauren-arvanitis"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446662807, "post_id": 33527205, "comment_id": 54840803, "body": "@JoachimPileborg Thanks for the tip, I am new to Stack Exchange."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1446662895, "post_id": 33527205, "comment_id": 54840851, "body": "@JohnArvanitis - you can use alloca() as an equivalent to variable length arrays. I posted an answer showing how this is done."}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 5496575, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cwz4QV1MyWI/AAAAAAAAAAI/AAAAAAAAAEA/5-P-bIt8VaA/photo.jpg?sz=128", "display_name": "0xLLLLH", "link": "https://stackoverflow.com/users/5496575/0xllllh"}, "is_accepted": false, "score": 0, "last_activity_date": 1446655502, "creation_date": 1446655502, "answer_id": 33527350, "question_id": 33527205, "link": "https://stackoverflow.com/questions/33527205/variable-size-array-in-c/33527350#33527350", "title": "Variable size array in C++", "body": "<p>In C++,you can  use \"std::vector&lt; T >\" to save your data as a variable size array.</p>\n\n<p>Just learn how to use STL,it would simplify your works.</p>\n"}, {"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446696012, "post_id": 33527373, "comment_id": 54853931, "body": "Since the inner array have a size fixed at time of compilation, you could use a vector of <code>std::array</code> instead, will make that declaration a little simpler."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446758987, "post_id": 33527373, "comment_id": 54889923, "body": "@JoachimPileborg, thanks for the suggestion. It makes perfect sense."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1446758955, "last_edit_date": 1446758955, "creation_date": 1446655559, "answer_id": 33527373, "question_id": 33527205, "link": "https://stackoverflow.com/questions/33527205/variable-size-array-in-c/33527373#33527373", "title": "Variable size array in C++", "body": "<p>There is a difference between:</p>\n\n<pre><code>const int rows = numlines(\"health.txt\");\n</code></pre>\n\n<p>and</p>\n\n<pre><code>const int rows = 20;\n</code></pre>\n\n<p>In both cases the value of the variable cannot modified once it is initialzed. The difference is that in the first case, the value won't be known until run time while in the second case, the value is known at compile time.</p>\n\n<p>In C++, an array can be declared using a variable only if its value is known at compile time.</p>\n\n<p>That explains why you cannot use:</p>\n\n<pre><code> const int rows = numlines(\"health.txt\");\n float data[rows][5] = {0};\n</code></pre>\n\n<p>but you can use:</p>\n\n<pre><code> const int rows = 20;\n float data[rows][5] = {0};\n</code></pre>\n\n<p>You can easily get around that issue by using an <code>std::vector</code> of <code>std::vector</code>s.</p>\n\n<pre><code> const int rows = numlines(\"health.txt\");\n std::vector&lt;std::vector&lt;float&gt;&gt; data(rows, std::vector&lt;float&gt;(5));\n</code></pre>\n\n<p>Since you know the size of the inner array, you can also you <code>std::array</code>. It will make the declaration a little simpler.</p>\n\n<pre><code> std::vector&lt;std::array&lt;float, 5&gt;&gt; data(rows);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446694720, "post_id": 33529443, "comment_id": 54853611, "body": "The <code>alloca</code> function is not in the C++ standard nor in the POSIX standards, it&#39;s availability isn&#39;t universal, and should not be used for any kind of portable code. Also, it&#39;s very easy to overflow the stack by allocating more than the stack can hold. I wouldn&#39;t recommend it."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446698951, "post_id": 33529443, "comment_id": 54854760, "body": "@JoachimPileborg - Linux has <a href=\"http://man7.org/linux/man-pages/man3/alloca.3.html\" rel=\"nofollow noreferrer\">alloca</a>. It&#39;s been in MIcrosoft compilers since the days of MSDOS and still in VS 2015. <a href=\"http://www.gnu.org/software/libc/manual/html_node/Variable-Size-Automatic.html\" rel=\"nofollow noreferrer\">Gnu article</a> includes pros and cons of alloca. I mostly use alloca to replace VLAs (variable length arrays) when I&#39;m working with someone else&#39;s code, which is why I suggested this since the OP appears to want a replacement for VLAs, other than using a container like std::vector."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1446662680, "last_edit_date": 1446662680, "creation_date": 1446662049, "answer_id": 33529443, "question_id": 33527205, "link": "https://stackoverflow.com/questions/33527205/variable-size-array-in-c/33529443#33529443", "title": "Variable size array in C++", "body": "<p>You can use alloca to implement the equivalent of a variable length array:</p>\n\n<pre><code>    float (*data)[5] = (float (*)[5]) _alloca(rows * 5 * sizeof(float));\n</code></pre>\n\n<p>This will allocate local (stack) space and set data to point to the first row (with 5 columns) of a matrix of floats. The 5 can be replaced with a constant. You can then use data like a normal local matrix, data[ i ][ j ] ... . Depending on the compiler, the name may be alloca() instead of _alloca(), and the cast (float (*)[5]) may not be needed. </p>\n\n<p>Since this is a local allocation, it's automatically freed when the function exits.</p>\n"}], "owner": {"reputation": 11, "user_id": 5523206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X0iiD.jpg?s=128&g=1", "display_name": "Lauren Arvanitis", "link": "https://stackoverflow.com/users/5523206/lauren-arvanitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1446758955, "creation_date": 1446655052, "last_edit_date": 1446655532, "question_id": 33527205, "link": "https://stackoverflow.com/questions/33527205/variable-size-array-in-c", "title": "Variable size array in C++", "body": "<p>This is interesting. I want to make a 2D array where one of the dimensions is a variable. Here is my code:<br>\n</p>\n\n<pre><code>int main(void) {\n     const int rows = numlines(\"health.txt\");\n     float data[rows][5] = {0};\n     readIntoArray(data, 5, rows, \"health.txt\");\n     return 0;\n}\n</code></pre>\n\n<p>Line 3 \"rows\" is underlined with an error. It says: \"Expression must have a constant value.\" <em>Apparently</em> it works for other people to use <code>const</code> in these situations. But mine might work differently because my variable is defined by a function. Here is that function:  </p>\n\n<pre><code>int numlines(string filename) {\n    int number_of_lines = 0;\n    ifstream fin(filename);\n    string line;\n    while (getline(fin, line)) {\n        ++number_of_lines;\n    }\n    return number_of_lines;\n}\n</code></pre>\n\n<p>I have tried following other suggestions and making my code follow this format:<br>\n(Replace lines 2 &amp; 3 of the first code block with this.)</p>\n\n<pre><code>int rows = numlines(\"health.txt\");\n    float **data;\n    data = new float*[rows];    //The height is defined by the function\n    for (int i = 0; i &lt; rows; i++) {\n    data[i] = new float[5];    //The width is 5\n}\n</code></pre>\n\n<p>But then that causes an error on \"data\" in line 4 of the first codeblock. The error is <code>Argument of type \"float**\" is incompatible with parameter of type \"float (*)[5]\"</code>. Here is the first line of the relevant function:  </p>\n\n<pre><code>void readIntoArray(float data[][MAXCOLUMNS], int arrayX, int arrayY, string filename)\n</code></pre>\n\n<p><code>MAXCOLUMNS</code> is <code>#define</code>d as 5.  </p>\n\n<p>How do I pass the 2D array into the function without creating an error?<br>\n<em>I am not the most experienced in c++, so I might be missing something obvious.</em></p>\n"}, {"tags": ["c++", "qt5"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446655080, "post_id": 33527166, "comment_id": 54835686, "body": "There are many <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682599%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">DLL-related functions in the Windows API</a>. Check them out."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446655132, "post_id": 33527166, "comment_id": 54835720, "body": "And what does this question has to do with Qt4 and the Brainfuck language? Please edit your question to include only relevant tags."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5525691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0593fcbe516d68c842d7cb1d9b421c?s=128&d=identicon&r=PG&f=1", "display_name": "pandora", "link": "https://stackoverflow.com/users/5525691/pandora"}, "is_accepted": true, "score": 1, "last_activity_date": 1447074278, "creation_date": 1447074278, "answer_id": 33609763, "question_id": 33527166, "link": "https://stackoverflow.com/questions/33527166/how-to-connect-the-dll-files-in-the-process-of-code-execution-in-c/33609763#33609763", "title": "How to connect the dll files in the process of code execution in C++?", "body": "<p>the problem was solved by using QLibrary </p>\n\n<pre><code> for(int i=0; i&lt;n;i++)\n    {            \n       QString* pLoadLib =&amp;sDrivers[i]; //\u0437\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u043c \u0430\u0434\u0440\u0435\u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439\n       std::cout&lt;&lt;sDrivers[i].toUtf8().constData()&lt;&lt;\"\\n\";//\u0432\u044b\u0432\u043e\u0434\u0438\u043c \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\n       QLibrary lib(*pLoadLib); //\u0420\u0430\u0437\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 - \u0442\u0435\u043a\u0441\u0442 \u043f\u0443\u0442\u0438 \u043a \u0414\u041b\u041b\n       if (!lib.load())\n          {\n             std::cout&lt;&lt;\"driver not loaded\\n\";//error\n          }\n       else\n          {   typedef QString (*FuncType) (const QString&amp;);\n                    FuncType func = (FuncType)(lib.resolve(\"FuncName\")); //\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e func \u043a\u0430\u043a \u0444\u0443\u043d\u043a\u0446\u0438\u044f OddUpper \u0438\u0437 dll\n                    if (func)\n                    {\n                       QString test = func(\"working\");\n                       qDebug()&lt;&lt;test;\n                    }\n                    if (!func)\n                    {\n                        std::cout&lt;&lt;\"func not loaded\";\n                    }\n                    lib.unload();\n                }\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5525691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0593fcbe516d68c842d7cb1d9b421c?s=128&d=identicon&r=PG&f=1", "display_name": "pandora", "link": "https://stackoverflow.com/users/5525691/pandora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 33609763, "answer_count": 1, "score": 0, "last_activity_date": 1447074278, "creation_date": 1446654942, "last_edit_date": 1446661266, "question_id": 33527166, "link": "https://stackoverflow.com/questions/33527166/how-to-connect-the-dll-files-in-the-process-of-code-execution-in-c", "title": "How to connect the dll files in the process of code execution in C++?", "body": "<p>There is a compiled program written in QT (C++). In the program folder is added dll file all the names of Lib1.dll, Lib2.dll, etc. How can I get these libraries in the process of implementation of the program ? I.e. initially the program is compiled without them</p>\n\n<p>For example:</p>\n\n<pre><code>int n = 10;\nfor(int i=0;i&lt;n;i++)\n{\n       include(\"lib\"+i+\".dll\");\n}\n</code></pre>\n"}]